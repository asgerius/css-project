[{"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1466036836, "post_id": 37847626, "comment_id": 63155590, "body": "all you save is one byte, since you don&#39;t have anything in the class, and it must get some minimal allocation."}, {"owner": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "reply_to_user": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1466038192, "post_id": 37847626, "comment_id": 63155890, "body": "@SHR that&#39;s not bad then because there will be multiple threads using this (up to thousands) so it should help a lot!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1466040285, "post_id": 37847626, "comment_id": 63156358, "body": "Thousands of threads? That&#39;s the design problem you should be focusing on."}, {"owner": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1466041259, "post_id": 37847626, "comment_id": 63156576, "body": "@PeteBecker haha well frankly this was not my choice and that is just a guess, I don&#39;t really know how many they&#39;re doing. I was only assigned the calculator and a few other modules. This is part of a large project involving a couple dozen designers and will eventually run on a Cray. But I do know that <code>Calculator</code> has to be used trillions of times in one execution of the main."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "edited": false, "score": 0, "creation_date": 1466034926, "post_id": 37847642, "comment_id": 63155199, "body": "If I make it a namespace can it still be a template? I didn&#39;t mention it here but this <code>Calculator</code> module will be used by other teams for different purposes. Would the namespace have that versatility? Thanks!"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "edited": false, "score": 0, "creation_date": 1466035300, "post_id": 37847642, "comment_id": 63155281, "body": "@MBarbosa A function can be templated regardless of whether it&#39;s in a namespace or a class."}, {"owner": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1466035427, "post_id": 37847642, "comment_id": 63155304, "body": "@JamesAdkison thanks! I will have to look into how to make a namespace, but doesn&#39;t seem like much of a stretch from a class. I&#39;ve used them before of course, just never have had to make one."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 4, "last_activity_date": 1466034676, "creation_date": 1466034676, "answer_id": 37847642, "question_id": 37847626, "link": "https://stackoverflow.com/questions/37847626/does-scoping-into-a-classs-header-file-in-c-create-an-instance-of-it/37847642#37847642", "title": "Does &quot;scoping into&quot; a class&#39;s header file in C++ create an instance of it?", "body": "<p>Yes, the second approach does not instantiate any class. It's not that the overhead is massive, but this does save a few bits, here and there.</p>\n\n<p>As an alternative just consider declaring a <code>Calculator</code> namespace; if all you want is a different scope. A class with no non-static members and methods, and with only static methods or members, is, pretty much, just a namespace of its own.</p>\n"}], "owner": {"reputation": 101, "user_id": 6447850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b8ec19f2d8c1a355e90ada93ae7836?s=128&d=identicon&r=PG&f=1", "display_name": "M Barbosa", "link": "https://stackoverflow.com/users/6447850/m-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466034676, "creation_date": 1466034561, "question_id": 37847626, "link": "https://stackoverflow.com/questions/37847626/does-scoping-into-a-classs-header-file-in-c-create-an-instance-of-it", "title": "Does &quot;scoping into&quot; a class&#39;s header file in C++ create an instance of it?", "body": "<p>As part of a project I am working on I have to design a discrete vector calculus calculator. Additionally, the main program has to be able to handle pretty large data sets. My idea was to make a class called <code>Calculator</code> which only has functions as members. So I thought of two ways to use the functions inside <code>Calculator</code> as shown below:</p>\n\n<p>The first way is to just instantiate the class and use its members like so:</p>\n\n<pre><code>/* inside main program */\nVector V;\nCalculator calc;\nVector Vgrad = calc.gradient( V );\n</code></pre>\n\n<p>The other way (I think) is to just \"scope in\" and hopefully this doesn't instantiate the class:</p>\n\n<pre><code>/* inside main program */\nVector V;\nVector Vgrad = Calculator::gradient( V );\n</code></pre>\n\n<p>I am wondering if the second version skips having to instantiate the class. This code is being run in parallel and I don't want each thread to create its own <code>Calculator</code> in order to save space. So I am wondering if the second way of writing it is (a) valid, and (b) more memory economic. Any other design ideas are welcome, but keep in mind that I want to keep these entities in a class for readability. </p>\n"}, {"tags": ["c++", "linux", "x11", "sfml", "dwm"], "comments": [{"owner": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "edited": false, "score": 3, "creation_date": 1466036943, "post_id": 37847605, "comment_id": 63155613, "body": "Here&#39;s a possible <a href=\"https://github.com/SFML/SFML/issues/991\" rel=\"nofollow noreferrer\">issue report</a>. If you hit a roadblock, it might be worth trying the workarounds in the bug report or a build a SFML with the proposed patch applied."}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1466117212, "post_id": 37847605, "comment_id": 63197829, "body": "I feel like drinking should have fixed it. Are you sure you are getting drunk correctly?"}], "owner": {"reputation": 27, "user_id": 5846376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13234e33c6f7df486bc857a14c5e901e?s=128&d=identicon&r=PG&f=1", "display_name": "A.Budziak", "link": "https://stackoverflow.com/users/5846376/a-budziak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466034884, "creation_date": 1466034401, "last_edit_date": 1466034884, "question_id": 37847605, "link": "https://stackoverflow.com/questions/37847605/x-setinputfocus-dwm-and-sfml", "title": "X setInputFocus - dwm and SFML", "body": "<p>I'm using Arch Linux with dwm window manager (yup, I know it's not longer supported). Currently I'm developing small application in C++ using SFML graphics library. Whenever I try to run any application with this library I get this error:</p>\n\n<pre><code>X Error of failed request:  BadMatch (invalid parameter attributes)\n  Major opcode of failed request:  42 (X_SetInputFocus)\n  Serial number of failed request:  80\n  Current serial number in output stream:  89  \n</code></pre>\n\n<p>Xorg logs print nothing, I also tried installing xlibs (but it was already installed), different version of SFML, dwm, getting drunk, everything. Funny thing is that on my friend's notebook with the same version of SFMl and dwm (but on Ubuntu) - everything works fine.\nIf it's not possible to get any answer connected exactly with this problem, \nI'd like to know if it's possible to get any logs connected with X input.\nThanks.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1466032636, "creation_date": 1466032636, "answer_id": 37847384, "question_id": 37847235, "link": "https://stackoverflow.com/questions/37847235/start-a-timer-and-reset-it-after-3-seconds/37847384#37847384", "title": "Start a timer and reset it after 3 seconds", "body": "<p>Try something like this:</p>\n\n<pre><code>const std::clock_t notrunning = (std::clock_t)(-1);\n\ninline void checkTimerReset(std::clock_t &amp;start)\n{\n  if (start != notrunning) {\n    if (((std::clock() - start) / CLOCKS_PER_SEC) &gt;= 3)\n      start = notrunning;\n  }\n}\n\n...\n\nstd::clock_t start = notrunning;\n\nwhile (1) {\n  some things here\n\n  for (something) {\n    some things happening here\n\n    if (something) {\n      if (start == notrunning) {\n          start = std::clock();\n      }\n    }\n\n    checkTimerReset(start);\n  }\n\n  checkTimerReset(start);\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6317562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471d9f6f2e2ab44c6a5a6557395017b4?s=128&d=identicon&r=PG&f=1", "display_name": "HumbleMan", "link": "https://stackoverflow.com/users/6317562/humbleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466032636, "creation_date": 1466031739, "last_edit_date": 1466032418, "question_id": 37847235, "link": "https://stackoverflow.com/questions/37847235/start-a-timer-and-reset-it-after-3-seconds", "title": "Start a timer and reset it after 3 seconds", "body": "<p>I want to implement a <strong>timer that starts if a condition is true</strong>, after 3 seconds I want it to <strong>reset the timer</strong> and it shall not start to count untill the condition in the if-statement is true again. See my code below:</p>\n\n<pre><code>//--here I want to check if 3 sec has gone, and if yes, do something and reset it--\nint duration;\nstd::clock_t start;\n\nwhile (1) {\n     //some things here\n\n     for (something) {\n          //some things happening here\n\n         if (a Condition) {\n              start = std::clock(); &lt;- start the timer here\n         }\n     }\n}\n</code></pre>\n\n<p>I will use this with a video stream (opencv), thats why I have the <code>while</code> loop in case you wonder. I have not succeeded with this after several tries.</p>\n\n<p>I am able to start the timer but then I want to have an if-statement to check if 3 seconds has passed <code>duration = ( std::clock() - start ) / (double) CLOCKS_PER_SEC;</code> but I am still unable solve it (both to check if time has passed and then to reset it). Any ideas will be appreciated!</p>\n"}, {"tags": ["python", "c++", "opencv", "julia", "feature-detection"], "comments": [{"owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466045934, "post_id": 37847201, "comment_id": 63157566, "body": "What happens if you replace <code>print(matches[1])</code> with <code>print(matches)</code>?"}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "reply_to_user": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466105829, "post_id": 37847201, "comment_id": 63192707, "body": "<code>print(matches)</code> in the Julia example gives the following:  (I also put it in the question)  Julia  <code>Any[PyObject &lt;DMatch 0x7ff58c290f90&gt; PyObject &lt;DMatch 0x7ff58c290fb0&gt;     PyObject &lt;DMatch 0x7ff58c290fd0&gt; PyObject &lt;DMatch 0x7ff58c2bc030&gt; \u2026     PyObject &lt;DMatch 0x7ff58c24be10&gt; PyObject &lt;DMatch 0x7ff58c24be30&gt;     PyObject &lt;DMatch 0x7ff58c24be50&gt; PyObject &lt;DMatch 0x7ff58c24be70&gt;]</code>"}, {"owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466129279, "post_id": 37847201, "comment_id": 63200526, "body": "Thanks. Answered below."}, {"owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "reply_to_user": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "edited": false, "score": 0, "creation_date": 1466183607, "post_id": 37847201, "comment_id": 63228631, "body": "@FengyangWang Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 10971, "user_id": 3575047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1820d77e8fbadfc9800df2b21efcd46?s=128&d=identicon&r=PG&f=1", "display_name": "Fengyang Wang", "link": "https://stackoverflow.com/users/3575047/fengyang-wang"}, "is_accepted": true, "score": 1, "last_activity_date": 1466129270, "creation_date": 1466129270, "answer_id": 37872032, "question_id": 37847201, "link": "https://stackoverflow.com/questions/37847201/opencv-dmatch-objects-in-python-and-julia-dont-match/37872032#37872032", "title": "OpenCV, DMatch objects in Python and Julia don&#39;t match", "body": "<p>PyCall will convert nested lists in Python to two-dimensional arrays in Julia. For instance,</p>\n\n<pre><code>julia&gt; pyeval(\"[[1, 2], [3, 4]]\")\n2\u00d72 Array{Any,2}:\n 1  2\n 3  4\n</code></pre>\n\n<p>This means that to access the first row, as you tried <code>matches[1]</code> for, you need <code>matches[1,:]</code>. To access the first element of the first row, try <code>matches[1,1]</code>.</p>\n\n<p>When you do <code>matches[1]</code>, Julia gives you the first element in matches, which in this case is the first column of the first row.</p>\n\n<p>(Note that when printed, two dimensional arrays are usually aligned and elements are separated by spaces, while one dimensional arrays are not aligned and elements are separated by commas. This is a good way to tell.)</p>\n"}], "owner": {"reputation": 1522, "user_id": 5759234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rb4Ai.jpg?s=128&g=1", "display_name": "haxtar", "link": "https://stackoverflow.com/users/5759234/haxtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 37872032, "answer_count": 1, "score": 2, "last_activity_date": 1466129270, "creation_date": 1466031512, "last_edit_date": 1466106051, "question_id": 37847201, "link": "https://stackoverflow.com/questions/37847201/opencv-dmatch-objects-in-python-and-julia-dont-match", "title": "OpenCV, DMatch objects in Python and Julia don&#39;t match", "body": "<p>I'm trying to implement a feature matching method using OpenCV, but the translation from a Python version to Julia does not match up:</p>\n\n<p>The methods are exactly the same and use the same images for processing. (<code>[:method]</code> is just standard convention for accessing a specific type of method in Julia, so don't be fooled! Also, Julia indexing starts at 1, not 0, so these two sets of print statements <em>should</em> yield the same result, but they don't.)</p>\n\n<p><strong>Julia version:</strong></p>\n\n<pre><code>query = cv2.imread(\"images/q1.jpg\",0)\ntrain = cv2.imread(\"images/q2.jpg\",0) \n\norb = cv2.ORB_create()\n\nkp1 = orb[:detect](query)\nkp1, des1 = orb[:compute](query, kp1)\n\nkp2 = orb[:detect](train)\nkp2, des2 = orb[:compute](train, kp2)\n\nbf = cv2.BFMatcher()\nmatches = bf[:knnMatch](des1, des2, k=2)\n\nprint(matches[1])\nprint(matches[1][:distance])\n</code></pre>\n\n<p>prints the below. Only one DMatch object is stored in <code>matches</code>.</p>\n\n<pre><code>PyObject &lt;DMatch 0x7fac68b2be50&gt;\n305.0639343261719\n</code></pre>\n\n<p><strong>Python version:</strong></p>\n\n<pre><code>query = cv2.imread('images/q1.jpg',0)       \ntrain = cv2.imread('images/q2.jpg',0)\n\norb = cv2.ORB_create()\n\nkp1 = orb.detect(query)\nkp1, des1 = orb.compute(query, kp1)\n\nkp2 = orb.detect(train)\nkp2, des2 = orb.compute(train, kp2)\n\nbf = cv2.BFMatcher()\nmatches = bf.knnMatch(des1, des2, k=2)\n\nprint(matches[0])\nprint(matches[0][0].distance)\n</code></pre>\n\n<p>prints the below. Two DMatch objects are stored in <code>matches</code></p>\n\n<pre><code>[&lt;DMatch 0x7f0266a47a70&gt;, &lt;DMatch 0x7f0266a47c50&gt;]\n305.0639343261719\n</code></pre>\n\n<p>My question is, why is only one DMatch object stored in the <code>matches</code> that I created with Julia, but two are stored in the one I created with Python, [<strong>NOTE</strong>: I need both DMatch objects to successfully implement feature matching, so the Python one is correct!] and how can I fix the problem? </p>\n\n<p>Any help is much appreciated.</p>\n\n<p>EDIT:\nwriting <code>print(matches)</code> for both examples gives the following:  </p>\n\n<p>In Julia:</p>\n\n<pre><code>Any[PyObject &lt;DMatch 0x7ff58c290f90&gt; PyObject &lt;DMatch 0x7ff58c290fb0&gt;\n    PyObject &lt;DMatch 0x7ff58c290fd0&gt; PyObject &lt;DMatch 0x7ff58c2bc030&gt;\n\u2026\n    PyObject &lt;DMatch 0x7ff58c24be10&gt; PyObject &lt;DMatch 0x7ff58c24be30&gt;\n    PyObject &lt;DMatch 0x7ff58c24be50&gt; PyObject &lt;DMatch 0x7ff58c24be70&gt;]\n</code></pre>\n\n<p>In Python:             </p>\n\n<p><code>[[&lt;DMatch 0x7fcda37c5730&gt;, &lt;DMatch 0x7fcda37c5830&gt;], [&lt;DMatch 0x7fcda37c5650&gt;, &lt;DMatch 0x7fcda37c5610&gt;],... [&lt;DMatch 0x7fcda375f5d0&gt;, &lt;DMatch 0x7fcda375f5f0&gt;], [&lt;DMatch 0x7fcda375f610&gt;, &lt;DMatch 0x7fcda375f630&gt;]]</code></p>\n"}, {"tags": ["c++", "google-app-engine", "boost", "google-drive-api"], "comments": [{"owner": {"reputation": 4751, "user_id": 4491066, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-42QbCgAf1fE/AAAAAAAAAAI/AAAAAAAAACo/OfrkBcjQpbQ/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/4491066/adam"}, "edited": false, "score": 0, "creation_date": 1466031742, "post_id": 37847123, "comment_id": 63154363, "body": "Have you tried to go to that URL and get an authentication code?"}, {"owner": {"reputation": 189, "user_id": 6258855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7f042fe1abceaae5d631ed880e34c?s=128&d=identicon&r=PG&f=1", "display_name": "dooode", "link": "https://stackoverflow.com/users/6258855/dooode"}, "reply_to_user": {"reputation": 4751, "user_id": 4491066, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-42QbCgAf1fE/AAAAAAAAAAI/AAAAAAAAACo/OfrkBcjQpbQ/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/4491066/adam"}, "edited": false, "score": 0, "creation_date": 1466036800, "post_id": 37847123, "comment_id": 63155581, "body": "@Adam yes, as indicated in the post, I post the key to the cli as required, and then that&#39;s when it dies."}], "owner": {"reputation": 189, "user_id": 6258855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7f042fe1abceaae5d631ed880e34c?s=128&d=identicon&r=PG&f=1", "display_name": "dooode", "link": "https://stackoverflow.com/users/6258855/dooode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466031117, "creation_date": 1466031117, "question_id": 37847123, "link": "https://stackoverflow.com/questions/37847123/grive-fails-auth-with-exception-type-boostexception-detailclone-impl-gentoo", "title": "grive fails auth with exception type: boost::exception_detail::clone_impl Gentoo", "body": "<p>I used portage to install grive. It installs error free but when trying to use for the first time, it kicks back an exception.</p>\n\n<pre><code>gdrive # grive -a\n-----------------------\nPlease go to this URL and get an authentication code:\n\nhttps://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fdocs.google.com%2Ffeeds%2F+https%3A%2F%2Fdocs.googleusercontent.com%2F+https%3A%2F%2Fspreadsheets.google.com%2Ffeeds%2&amp;redirect_uri=urn:ietf:wg:oauth:2.0:oob&amp;response_type=code&amp;client_id=22314510474.apps.googleusercontent.com\n\n-----------------------\nPlease input the authentication code here: \n4/CVoD_uotkiP6UVPO51JBkZFLSPmAdXZQzBkSuM55vk\nReading local directories\nSynchronizing folders\nexception: /home/abuild/rpmbuild/BUILD/grive-master/libgrive/src/protocol/AuthAgent.cc(174): Throw in function long int gr::AuthAgent::CheckHttpResponse(long int, const string&amp;, const gr::http::Header&amp;)\nDynamic exception type: boost::exception_detail::clone_impl&lt;gr::http::Error&gt;\n[gr::expt::BacktraceTag*] = #0 0x524b64 grive gr::Exception::Exception()\n#1 0x505917 grive gr::http::Error::Error()\n#2 0x50cd23 grive gr::AuthAgent::CheckHttpResponse(long, std::string const&amp;, gr::http::Header const&amp;)\n#3 0x50c7db grive gr::AuthAgent::Get(std::string const&amp;, gr::DataStream*, gr::http::Header const&amp;)\n#4 0x4ebc78 grive gr::v1::Drive::SyncFolders()\n#5 0x4ec1da grive gr::v1::Drive::DetectChanges()\n#6 0x4c981e grive Main(int, char**)\n#7 0x4c9dca grive main\n#8 0x7f61ae2cbb05 /lib64/libc.so.6 __libc_start_main\n#9 0x4c8738 grive \n\n[gr::http::HttpResponseTag*] = 400\n[gr::http::UrlTag*] = https://docs.google.com/feeds/default/private/full/-/folder?max-results=50&amp;showroot=true\n[gr::http::HeaderTag*] = Authorization: Bearer ya29.Ci8CA690emlxfHZzy2ZlVycWYAntDSmFEQTZNLgJV3CTb6OtoDHbgAiwqHG779h6mQ\nGData-Version: 3.0\n</code></pre>\n\n<p>How do I connect to my grive following install?</p>\n"}, {"tags": ["c++", "qt", "memory-leaks", "ownership"], "comments": [{"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466032105, "post_id": 37846843, "comment_id": 63154473, "body": "<code>QMimeData</code> inherits <code>QObject</code> and stores its data internally as a <code>QVector</code> of strings and <code>QVariant</code> pairs. It has the same memory management limitations any other <code>QObject</code>-derived class experiences."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466056916, "post_id": 37846843, "comment_id": 63160884, "body": "<code>cppcheck</code> would not find anything in this example because the <code>QMimeData</code> instance gets deleted at the end. But until then I might have stored gigabytes of data in thousands of instances of new <code>QMimeData</code> instances - which is - I admit - not a classical memory leak."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 1, "creation_date": 1466065240, "post_id": 37846843, "comment_id": 63165709, "body": "Are you actually seeing excessive memory consumption, or just concerned that it may happen?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1466106581, "post_id": 37846843, "comment_id": 63193144, "body": "And this is, ladies and gentlemen, how you reap the well-deserved sweet, sweet karma for having a clear question with a self-contained test case. Should be a case study for everyone whose questions are downvoted and/or closed. I figure if it&#39;s worth commenting the downsides, it&#39;s worth commenting the upsides, too, to reinforce good behavior. Well done."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "reply_to_user": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466107187, "post_id": 37846843, "comment_id": 63193495, "body": "@Jon: I&#39;m pretty sure there is memory loss but in the first place I wanted to track the lifetime of a <code>QMimeData</code> or <code>QDrag</code> instance to know when a drag&amp;drop operation gets aborted. Currently there&#39;s no way for me to know e.g. when to hide some &quot;on demand drop widget&quot;."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466111128, "post_id": 37846843, "comment_id": 63195533, "body": "There&#39;s only a leak if you don&#39;t pass the <code>QMimeData</code> on to an appropriate handler. It looks like a case of <i>potential</i> leaks if the newly created <code>QMimeData</code> object is not given a parent by the object creating it (or if you don&#39;t delete it directly)."}], "answers": [{"comments": [{"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466062301, "post_id": 37852189, "comment_id": 63163913, "body": "I use a <code>QListWidget</code> which derives from <code>QAbstractItemView</code> and creates/handles the <code>QDrag</code> object. I only create the <code>QMimeData</code> which then gets owned by the <code>QDrag</code> object which I don&#39;t have access to."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 1, "creation_date": 1466066420, "post_id": 37852189, "comment_id": 63166519, "body": "Yes, but the documentation says that QDrag::setMimeData passes ownership to the QDrag object. This means the QMimeData object will be deleted when QDrag is deleted"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466072303, "post_id": 37852189, "comment_id": 63170566, "body": "Ok, but then the <code>QDrag</code> object does not get deleted in time - I&#39;ll correct this detail in my question but the issue is the same."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466079943, "post_id": 37852189, "comment_id": 63175527, "body": "As I said in my comment - I don&#39;t create <code>QDrag</code> manually - <code>QListWidget</code> does that for me. I&#39;ll add a working example as soon as possible!"}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466082354, "post_id": 37852189, "comment_id": 63177383, "body": "If you let the widget handle the QDrag, it is stated in the documentation that it will be destroyed on time. Do you really observe an actual memory leak related to QDrag ?"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466087508, "post_id": 37852189, "comment_id": 63181543, "body": "I&#39;ve added an example which reproduces the described behavior. I&#39;m not sure whether this is a memory leak but neither I know why it shouldn&#39;t.."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466111200, "post_id": 37852189, "comment_id": 63195564, "body": "<code>QDrag</code> objects are internally managed by a private singleton class, <code>QDragManager</code>. Thus, no leak."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 1, "creation_date": 1466111784, "post_id": 37852189, "comment_id": 63195840, "body": "That&#39;s not a very useful definition of a leak. I can start/abort as many drag operations as I want and the underlying <code>QDrag</code> and <code>QMimeData</code> instances will <b>never</b> be cleaned up in program lifetime despite they&#39;re not used any more. For me this is a leak."}], "tags": [], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "is_accepted": false, "score": 2, "last_activity_date": 1466061003, "creation_date": 1466061003, "answer_id": 37852189, "question_id": 37846843, "link": "https://stackoverflow.com/questions/37846843/memory-leak-in-qt5-how-to-get-qmimedata-deleted/37852189#37852189", "title": "Memory leak in Qt5? How to get QMimeData deleted?", "body": "<p>There is a memory leak only if you forget to delete the pointer returned by <code>mimeData()</code>. You have to manage the ownership as with any pointer.</p>\n\n<p>For instance, if you pass the <code>mimeData()</code> returned pointer to a <code>QDrag</code> object using <code>setMimeData()</code>, he will take ownership of it, and will take care of deleting it at the end of the drag operation. There is no memory leak in this case.</p>\n\n<p>See : <a href=\"http://doc.qt.io/qt-5/qdrag.html#setMimeData\" rel=\"nofollow\">http://doc.qt.io/qt-5/qdrag.html#setMimeData</a></p>\n"}, {"comments": [{"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466107326, "post_id": 37868077, "comment_id": 63193566, "body": "unfortunately I don&#39;t see any output from qDebug - neither on terminal nor in QtCreator. But the output with <code>cout</code> proves the destructor doesn&#39;t get called (in my case)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466107622, "post_id": 37868077, "comment_id": 63193708, "body": "@frans Weird... What platform &amp; Qt version is that on? It&#39;s definitely a bug. Please report if not reported already."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1466106458, "last_edit_date": 1466106458, "creation_date": 1466106092, "answer_id": 37868077, "question_id": 37846843, "link": "https://stackoverflow.com/questions/37846843/memory-leak-in-qt5-how-to-get-qmimedata-deleted/37868077#37868077", "title": "Memory leak in Qt5? How to get QMimeData deleted?", "body": "<p>It should be happening, if it isn't, then it's a bug - there's nothing you can do about it, other than reporting it if it hasn't been reported yet.</p>\n\n<p>I can't reproduce it on OS X with Qt 5.6. It may be platform-specific, or an already fixed bug in an old Qt version. As soon as I release the mouse button at the end of the drag, the mime data gets deleted. The call stack when the destructor executes has the <code>QDrag</code> destructor called from the event loop via <code>deleteLater</code> somewhere. I've used your code verbatim. </p>\n\n<p>Sidebar: It could be made just a bit more minimal, if you really wanted it as short as possible. Here's what I got, although I agree it's mostly splitting hair. Your question beats 99% other questions by <strong>providing a working example - big kudos for that</strong>! The things that I think matter for brevity are:</p>\n\n<ol>\n<li>Inclusion of the entire needed Qt module(s).</li>\n<li>Use of <code>qDebug</code> instead of <code>std::cout</code> &amp; al, it saves an include and is more Qt style.</li>\n<li>Access specifiers don't matter if you use <code>struct</code> anyway.</li>\n<li>Generally speaking, destructors are either virtual in the public base class, or they can never be without succumbing to slicing. So you don't have to spell that out.</li>\n</ol>\n\n<p>I have example code where I don't follow this, of course. I like to call it legacy code :)</p>\n\n\n\n<pre><code>#include &lt;QtWidgets&gt;\n\nstruct TrackedMimeData : QMimeData {\n   TrackedMimeData(const QString &amp; text) {\n      qDebug() &lt;&lt; this;\n      setText(text);\n   }\n   ~TrackedMimeData() {\n      qDebug() &lt;&lt; \"~\" &lt;&lt; this;\n   }\n};\n\nstruct MyListWidget : QListWidget {\n   MyListWidget() {\n      setDragEnabled(true);\n      addItem(\"item1\");\n      addItem(\"item2\");\n   }\n   QMimeData * mimeData(const QList&lt;QListWidgetItem *&gt;) const override {\n      return new TrackedMimeData(\"hello\");\n   }\n};\n\nint main(int argsc, char *argsv[]) {\n   QApplication application(argsc, argsv);\n   MyListWidget gui;\n   gui.show();\n   return application.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1466108063, "creation_date": 1466029607, "last_edit_date": 1495535332, "question_id": 37846843, "link": "https://stackoverflow.com/questions/37846843/memory-leak-in-qt5-how-to-get-qmimedata-deleted", "title": "Memory leak in Qt5? How to get QMimeData deleted?", "body": "<p>I just provided an answer for <a href=\"https://stackoverflow.com/q/23709529/1668622\">this</a> question and wanted to provide a working example when I noticed that newly created <code>QMimeData</code> instance returned by <code>QListModel::mimeData()</code> won't get deleted until the application gets terminated.</p>\n\n<p>So this is not a <em>real</em> memory leak since Qt handles all <code>QMimeData</code> instances on shutdown but you only have to drag&amp;drop long enough and put the right content into your mime data to let the memory run full.</p>\n\n<p>Did I miss something? Is there a way to tell Qt to delete the <code>QMimeData</code> instances as soon as they are not needed any more?</p>\n\n<p><strong>Please note:</strong></p>\n\n<p>I know that every instance of <code>QMimeData</code> gets deleted by Qt automatically on program termination.\nMy problem here is not a real memory leak as reported by <code>valgrind</code> or <code>cppcheck</code> but it looks like the multiple and potentially very large <code>QMimeData</code> instances get not cleaned up at runtime which blows up memory consumption as well.</p>\n\n<p><strong>Example Code:</strong></p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n#include &lt;iostream&gt;\n\nstruct TrackedMimeData : public QMimeData {\n   TrackedMimeData(const QString &amp; text) {\n      std::cout &lt;&lt; this &lt;&lt; std::endl;\n      setText(text);\n   }\n   ~TrackedMimeData() {\n       std::cout &lt;&lt; \"~\" &lt;&lt; this &lt;&lt; std::endl;\n   }\n};\n\nstruct MyListWidget : QListWidget {\n   MyListWidget() {\n      setDragEnabled(true);\n      addItem(\"item1\");\n      addItem(\"item2\");\n   }\n   QMimeData * mimeData(const QList&lt;QListWidgetItem *&gt;) const override {\n      return new TrackedMimeData(\"hello\");\n   }\n};\n\nint main(int argsc, char *argsv[]) {\n   QApplication application(argsc, argsv);\n   MyListWidget gui;\n   gui.show();\n   return application.exec();\n}\n</code></pre>\n\n<p>Example output looks like this:</p>\n\n<pre><code>0xa58750\n0xa4e0f0\n~0xa4e0f0\n0xa3c6c0\n~0xa3c6c0\n0xa51880\n0xa5ecd0\n0xa31f50\n0xa57db0\n0xa5afc0\n~0xa5afc0\n0xa5aa70\n~0xa5aa70\n------ CLOSE WINDOW\n~0xa58750\n~0xa51880\n~0xa5ecd0\n~0xa31f50\n~0xa57db0\n</code></pre>\n\n<p>The destructors get called <em>before</em> closing the application only when the drop get's accepted.</p>\n\n<p>Btw. I'm on a home-grown Qt <strong>5.6 @1fcdb6cafcf</strong> - on one computer and on <strong>5.6.0-19.fc23</strong> Fedora 23 precompiled on another. So I doubt it's just a temporary development state.</p>\n"}, {"tags": ["c++", "xcode", "macos", "c++11", "libvlc"], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466065152, "post_id": 37849737, "comment_id": 63165652, "body": "First thanks to answer me. In second where do i put them ?"}, {"owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "reply_to_user": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466066365, "post_id": 37849737, "comment_id": 63166491, "body": "place <code>lib</code> folder from archive above, near your executable file."}, {"owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466069690, "post_id": 37849737, "comment_id": 63168741, "body": "Ok it is compiled and now it does not crashing but in console it print a series of error like core access and so on.. So the video do not start !"}, {"owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "reply_to_user": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466074724, "post_id": 37849737, "comment_id": 63172052, "body": "Please check if <code>lib\\vlc\\lib</code> contains <code>libvlccore.8.dylib</code> symlink to <code>..&#47;..&#47;libvlccore.8.dylib</code>. At some conditions when you copy symlinks  on OS X - it could copy file symlink pointed to instead of symlink as-is."}, {"owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466145225, "post_id": 37849737, "comment_id": 63204919, "body": "This is my procedure, unzip archive by terminal, to preserve integrity of link, so from fast check i have seen that all link are correct... Any idea ?!"}, {"owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "reply_to_user": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466147389, "post_id": 37849737, "comment_id": 63206012, "body": "Could you copy libvlc log somewhere?"}, {"owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "edited": false, "score": 0, "creation_date": 1466147512, "post_id": 37849737, "comment_id": 63206090, "body": "Do you refer terminal output ? If not, where can i find it ?"}, {"owner": {"reputation": 1656, "user_id": 2626233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0rBe.jpg?s=128&g=1", "display_name": "feepk", "link": "https://stackoverflow.com/users/2626233/feepk"}, "edited": false, "score": 0, "creation_date": 1466532754, "post_id": 37849737, "comment_id": 63351864, "body": "RSATom, sorry to jump the thread - are we aware of the issue? Did we fix it for 3.0?"}, {"owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "reply_to_user": {"reputation": 1656, "user_id": 2626233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0rBe.jpg?s=128&g=1", "display_name": "feepk", "link": "https://stackoverflow.com/users/2626233/feepk"}, "edited": false, "score": 0, "creation_date": 1466574281, "post_id": 37849737, "comment_id": 63366196, "body": "@feepk, don&#39;t know. I didn&#39;t report it. And I didn&#39;t try 3.0."}, {"owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "reply_to_user": {"reputation": 1656, "user_id": 2626233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0rBe.jpg?s=128&g=1", "display_name": "feepk", "link": "https://stackoverflow.com/users/2626233/feepk"}, "edited": false, "score": 0, "creation_date": 1466574564, "post_id": 37849737, "comment_id": 63366313, "body": "@feepk, if I remember correctly, the issue was introduced with VLC 2.2.0, VLC 2.1.5 didn&#39;t have that issue."}], "tags": [], "owner": {"reputation": 627, "user_id": 3847832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0becf34260757cc77d3faee854a7d010?s=128&d=identicon&r=PG", "display_name": "RSATom", "link": "https://stackoverflow.com/users/3847832/rsatom"}, "is_accepted": false, "score": 0, "last_activity_date": 1466050074, "creation_date": 1466050074, "answer_id": 37849737, "question_id": 37846658, "link": "https://stackoverflow.com/questions/37846658/using-libvlc-in-c-project-mac-os-x-xcode/37849737#37849737", "title": "using LibVLC in C++ Project [Mac OS X - Xcode]", "body": "<p>One possible reason could be the bug in <code>libvlc</code> 2.2.x which not allow use it outside <code>VLC.app</code> (due to fail load plugins, since plugins try search <code>libvlccore.dylib</code> in wrong place). As workaround you should use slightly modified VLC tree. You could get it already prepared from <a href=\"https://github.com/RSATom/WebChimera.js/releases/download/v0.2.5/WebChimera.js_v0.2.5_electron_v0.33.9_VLC_v2.2.3_x64_osx.tar.gz\" rel=\"nofollow\">one of my projects</a>.</p>\n"}], "owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 723, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1466050074, "creation_date": 1466028669, "last_edit_date": 1466029055, "question_id": 37846658, "link": "https://stackoverflow.com/questions/37846658/using-libvlc-in-c-project-mac-os-x-xcode", "title": "using LibVLC in C++ Project [Mac OS X - Xcode]", "body": "<p>I am writing an application that catch a stream video from a wifi camera and I am using LibVLC to retrieve the video.</p>\n\n<p>So, before implementing my application, I have tested LibVLC with the example code, but it crashes on function <strong>libvlc_media_new_location</strong></p>\n\n<p>I am using this Framework on Mac OS X El Capitan with Xcode, the dialect of C++ is std=c++11 and libc++ (LLVM).</p>\n\n<p>This is the example code that doesn't work:</p>\n\n<pre><code>libvlc_instance_t * inst;\nlibvlc_media_player_t *mp;\nlibvlc_media_t *m;\n\n/* Load the VLC engine */\ninst = libvlc_new (0, NULL);\n\n/* Create a nxxew item, this is the line that crashes*/\nm = libvlc_media_new_location (inst, \"http://mycool.movie.com/test.mov\"); \n\n/* Create a media player playing environement */\nmp = libvlc_media_player_new_from_media (m);\n\n/* No need to keep the media now */\nlibvlc_media_release (m);\n</code></pre>\n\n<p>Could you help me please ? \nThanks in advance for response.</p>\n"}, {"tags": ["c++", "oop", "constructor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 39, "creation_date": 1466028437, "post_id": 37846565, "comment_id": 63153338, "body": "There are actually three call variants that can be used, but theres only one constructor. That&#39;s either a trick question or asked unclearly. Should have been <b>&quot;How many constructor call candidates does the class Fraction have?&quot;</b> Bad question otherwise, sue them if you fail the exam because of that :-P."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466028638, "post_id": 37846565, "comment_id": 63153407, "body": "As for your question, <i>overloaded</i> for what actually?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 25, "creation_date": 1466028841, "post_id": 37846565, "comment_id": 63153488, "body": "There are also implicitly declared copy and move constructors..."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 2, "creation_date": 1466033454, "post_id": 37846565, "comment_id": 63154822, "body": "It all boils down to whether <b>they</b> gave you those 3 constructor invocations as &quot;proof&quot; that there are 3 constructors, if that&#39;s the case <b>they</b> are likely inadequate. They likely have the answer <b>3</b> which counts implicitly generated constructors as well, but without the clarification or knowledge that&#39;s the case, so they threw that confusing nonsense at you to simulate adequacy, hoping they will get away with it and you won&#39;t come asking here on SO :)"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1466104350, "post_id": 37846565, "comment_id": 63191987, "body": "Look at the generated machine code and you&#39;ll see those three calls all call the same routine - and the &quot;default&quot; arguments are present (pushed or put in registers, as appropriate) at the call site.  So &quot;they&quot; are wrong."}], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 5, "last_activity_date": 1466028757, "creation_date": 1466028757, "answer_id": 37846679, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37846679#37846679", "title": "How many constructors does the class have?", "body": "<p>You have only one declaration of a constructor.<br>\nOn the other side:</p>\n\n<blockquote>\n  <p>When two or more different declarations are specified for a single name in the same scope, that name is said to be\u00a0overloaded</p>\n</blockquote>\n\n<p>Because of that, I'd not use the term <em>overloaded</em> here.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 8, "creation_date": 1466029264, "post_id": 37846719, "comment_id": 63153619, "body": "Compiler generated copy and move constructors count or not? Answer would still be 3 if so. Looks like a <i>trick question</i> for me."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466029377, "post_id": 37846719, "comment_id": 63153663, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I am talking about the constructor corresponding to the declaration, not others."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466029419, "post_id": 37846719, "comment_id": 63153677, "body": "Sure, I know. But may be the question was written by some bad ass."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1466029520, "post_id": 37846719, "comment_id": 63153709, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I see what you are saying. Agree that the question can be improved a bit :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466031745, "post_id": 37846719, "comment_id": 63154366, "body": "Well, you cannot deny that taken the snippets litterally there are actually 3 constructor definitions (unrelated to these 3 call variants of the defined constructor available as shown in the sample). It&#39;s actually a trick question, I&#39;d bet my ass."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466046277, "post_id": 37846719, "comment_id": 63157622, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, you can bet your ass all you want :) I&#39;m not not betting my ass on questions framed by tricksters."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1466055877, "post_id": 37846719, "comment_id": 63160422, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Are the default ones implicitly defined only if you default them explicitly or if you actually use them? In this case, there are <i>potentially</i> three constructor definitions, but it mostly depends on the rest of the code."}, {"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 2, "creation_date": 1466080549, "post_id": 37846719, "comment_id": 63175978, "body": "When I was in education and on a C++ course the answer would have been 3 to make sure we remembered about the default and copy constructors that get automatically generated.  I was in education between early 2001 to 2006.  If that question is from an older exam paper, it will be about copy and default constructors to make sure students remember they will be there even if not shown in code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 1, "creation_date": 1466091345, "post_id": 37846719, "comment_id": 63184376, "body": "@TafT, the default constructor will not be generated by the compiler in this particular case since the declared constructor also works as the default constructor. In pre-C++11 days, the answer to that question would be 2. This must be a newer question."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1466104152, "post_id": 37846719, "comment_id": 63191890, "body": "@TafT - I agree with you - and thus disagree that this question is a trick question (if this is the reason - as discussed elsewhere if the &quot;reason&quot; is that you can <i>call</i> the declared destructor three different ways - then its a <i>bad</i> question)."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1466107356, "post_id": 37846719, "comment_id": 63193571, "body": "The question still has no clear answer - since parts of the class are omitted, it isn&#39;t clear whether there are any members which inhibit generation of the implicit constructors."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1466108208, "post_id": 37846719, "comment_id": 63193976, "body": "@SebastianRedl, that posted code seems to hint that there is only one explicitly declared constructor."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1466110376, "post_id": 37846719, "comment_id": 63195148, "body": "@RSahu But there could still be members that have no copy or move constructor of their own."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1466110868, "post_id": 37846719, "comment_id": 63195407, "body": "@SebastianRedl, in a class called <code>Fraction</code>, that is highly improbable."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 55, "last_activity_date": 1466105672, "last_edit_date": 1466105672, "creation_date": 1466028933, "answer_id": 37846719, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37846719#37846719", "title": "How many constructors does the class have?", "body": "<p>There is only one constructor corresponding to the posted declaration, not three overloads.</p>\n\n<p>The calls</p>\n\n<pre><code>Fraction();\nFraction(n);\n</code></pre>\n\n<p>are equivalent to:</p>\n\n<pre><code>Fraction(0, 1);\nFraction(n, 1);\n</code></pre>\n\n<p>One more way to convince yourself that there is only one constructor corresponding to the declaration is that you only need to define one constructor, not three.</p>\n\n<p>The section of the C++11 standard on default arguments has this:</p>\n\n<blockquote>\n  <p><strong>8.3.6 Default arguments</strong></p>\n  \n  <p>1 If an <em>initializer-clause</em> is specified in a <em>parameter-declaration</em> this <em>initializer-clause</em> is used as a default argument. Default arguments will be used in calls where trailing arguments are missing.</p>\n  \n  <p>2 [ <em>Example:</em> the declaration</p>\n\n<pre><code>void point(int = 3, int = 4);\n</code></pre>\n  \n  <p>declares a function that can be called with zero, one, or two arguments of\\ type <code>int</code>. It can be called in any of these ways:</p>\n\n<pre><code>point(1,2); point(1); point();\n</code></pre>\n  \n  <p>The last two calls are equivalent to <code>point(1,4)</code> and <code>point(3,4)</code>, respectively. <em>\u2014end example</em> ]</p>\n</blockquote>\n\n<p>Now the main question.</p>\n\n<blockquote>\n  <p><strong>How many constructors does the class Fraction have?</strong></p>\n</blockquote>\n\n<p>If the person that framed the question wants to include the move constructor and the copy constructor, which are implicitly generated by the compiler unless explicitly deleted, in the set of constructors, then <strong>the answer is three</strong>. In that case, the question is a trick question.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 27, "last_activity_date": 1466099671, "last_edit_date": 1592644375, "creation_date": 1466030192, "answer_id": 37846954, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37846954#37846954", "title": "How many constructors does the class have?", "body": "<blockquote>\n<p><strong>Is a function with default values an overloaded function?</strong></p>\n</blockquote>\n<p>No. Overloads look like</p>\n<pre><code>Fraction();\nFraction(int numerator);\nFraction(int numerator, int denominator);\n</code></pre>\n<p>and have each their own implementation (definition), while a function with default parameters has a single implementation.</p>\n<hr />\n<blockquote>\n<p>I thought it's only one, but they suggested there are 3: ...</p>\n<p><strong>&quot;How many constructors does the class Fraction have?&quot;</strong></p>\n</blockquote>\n<h1>It's a trick question, designed to fool you showing the available call variants for a <em>single constructor</em> declaration.</h1>\n<p>The <strong>definite</strong> answer for the given code snippet is <strong>3</strong> (in words <strong>three</strong>).</p>\n<p>There's one specialized constructor (which serves three variants of calling), and the compiler generates a copy and move constructor automatically if you don't <code>delete</code> them, or provide a custom implementation:</p>\n<pre><code>Fraction(int numerator = 0, int denominator = 1); // (1)\n// Redundant, just for demonstration:\nFraction(const Fraction&amp; rhs) = default; // (2)\nFraction(Fraction&amp;&amp; rhs) = default; // (3)\n</code></pre>\n<hr />\n<p>So for such exam, if you will answer</p>\n<blockquote>\n<p>The class has one constructor</p>\n</blockquote>\n<p>That's wrong anyways. If you will answer</p>\n<blockquote>\n<p>The class has three constructors <em>(as you wrote that is the accepted answer)</em></p>\n</blockquote>\n<p>you'll need to explain in depth, why you think so (as explained above).<br />\nIn any oral exam I'd ask you to backup why exactly, so I'd do in an apprentice test.</p>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 4988044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176bea70fb8474bc1a454ffeefd59702?s=128&d=identicon&r=PG&f=1", "display_name": "TheCppZoo", "link": "https://stackoverflow.com/users/4988044/thecppzoo"}, "is_accepted": false, "score": 18, "last_activity_date": 1466105270, "last_edit_date": 1466105270, "creation_date": 1466034411, "answer_id": 37847607, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37847607#37847607", "title": "How many constructors does the class have?", "body": "<p>The answer to your question is relative to these three follow-up questions:</p>\n\n<ol>\n<li>Before C++ 11, C++ 11, or C++14 and beyond?</li>\n<li>Do the implicitly defined constructors count?</li>\n<li>What are the members? The presence of a non-copyable member will delete the implicit copy constructor.</li>\n</ol>\n\n<p>The explicit definition is only one constructor; the compiler will insert a three-argument call regardless of whether the call explicitly supplies 0, 1, or 2 arguments.</p>\n\n<p>In pre-'11 there are no move constructors, in '11 there are two implicit constructor definitions, <code>Fraction(const Fraction &amp;) noexcept</code> and <code>Fraction(Fraction &amp;&amp;) noexcept</code>, check the accessible <a href=\"http://en.cppreference.com/w/cpp/language/move_constructor#Implicitly-declared_move_constructor\">cppreference</a>, in '14 the rules of when there is an implicitly defined move constructor change.</p>\n\n<p>The question you got is unfortunately innocently looking but quite technical; I hope your class does not insist on oversimplifying C++, it is the worst way to learn it.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1466064454, "post_id": 37850370, "comment_id": 63165224, "body": "<i>&quot;So, it gives 3 constructors&quot;</i> No. That&#39;s only one constructor, that provides 3 different options for calling.. <i>&quot;No overloading is taking place here&quot;</i> sounds contradictorily, and I don&#39;t see what your answer adds benefically over what already has been stated."}], "tags": [], "owner": {"reputation": 1, "user_id": 4985258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3s5dA.jpg?s=128&g=1", "display_name": "MEGHA SHARMA", "link": "https://stackoverflow.com/users/4985258/megha-sharma"}, "is_accepted": false, "score": -5, "last_activity_date": 1466069289, "last_edit_date": 1466069289, "creation_date": 1466054102, "answer_id": 37850370, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37850370#37850370", "title": "How many constructors does the class have?", "body": "<p>Because it depends on the arguments you pass:</p>\n\n<pre><code>Fraction() --&gt; Fraction(0,1)\nFraction(n)---&gt; Fraction(n,1)\nFraction(n,m)\n</code></pre>\n\n<p>So it gives 3 constructors. No overloading is taking place here.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466070338, "post_id": 37854202, "comment_id": 63169210, "body": "<i>&quot;and a constructor does not engage in the same kind of overloading resolution as an ordinary function ...&quot;</i> Huh what?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1466084345, "post_id": 37854202, "comment_id": 63178990, "body": "No &quot;additional syntaxes&quot; are created. This has nothing to do with syntax."}], "tags": [], "owner": {"reputation": 1, "user_id": 6473721, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/abc5579e0ba92533f056da32aba6f8a6?s=128&d=identicon&r=PG", "display_name": "user6473721", "link": "https://stackoverflow.com/users/6473721/user6473721"}, "is_accepted": false, "score": -4, "last_activity_date": 1466066817, "creation_date": 1466066817, "answer_id": 37854202, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have/37854202#37854202", "title": "How many constructors does the class have?", "body": "<p>This kind of function definition defines a single function but 2 additional calling syntaxes.  The subtle difference becomes apparent when taking function pointers or matching a template function argument to overloaded functions: in that case you only have a function with full argument list as the available overloaded type.</p>\n\n<p>Now the tricky thing is that we are talking about a constructor here, and a constructor does not engage in the same kind of overloading resolution as an ordinary function and is, for all purposes, not accessible other than syntactically.  In particular, this definition <em>does</em> count separately as a default constructor.  It also counts separately as a converting constructor from int and can be used as ((Fraction)3).</p>\n\n<p>So for all practical purposes, it creates three different <em>syntactic</em> entities in the constructor category.  And as opposed to ordinary functions, there is no functional context where overload resolution would expose the difference between three actual function signatures and three merely syntactical calling conventions.</p>\n\n<p>This is not a good question for a written test.  This is really something for an oral exam since there are so many subtleties involved that the difference between a formally correct answer (if any) and a formally wrong answer is not likely to correlate well with actual knowledge and skill, and the reasoning behind any answer is more important than the answer itself.</p>\n"}], "owner": {"reputation": 669, "user_id": 2387406, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/316df85b6b5314029878ca71de47d7ce?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Schaufelberger", "link": "https://stackoverflow.com/users/2387406/frank-schaufelberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7246, "favorite_count": 7, "answer_count": 6, "score": 57, "last_activity_date": 1467861947, "creation_date": 1466028199, "last_edit_date": 1467861947, "question_id": 37846565, "link": "https://stackoverflow.com/questions/37846565/how-many-constructors-does-the-class-have", "title": "How many constructors does the class have?", "body": "<p>I'm preparing for an upcoming C++ exam and came across this question about classes and constructors:</p>\n\n<blockquote>\n  <h3>How many constructors does the class Fraction have?\"</h3>\n\n<pre><code>class Fraction {\n//...\npublic:\n   Fraction(int numerator = 0, int denominator = 1);\n//...\n};\n</code></pre>\n</blockquote>\n\n<p>I thought it's only one, but they suggested there are three:</p>\n\n<pre><code>Fraction();\nFraction(n);\nFraction(n, d);\n</code></pre>\n\n<p>Or in other words:<br>\n<strong>Is a function with default values an overloaded function?</strong></p>\n"}, {"tags": ["c++", "qt", "drag-and-drop", "qt5"], "comments": [{"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1466056585, "post_id": 37846521, "comment_id": 63160740, "body": "This question has a totally different intention: I want to know how I can get informed about a drag&amp;drop operation has ended - either by dropping on a valid target or by being aborted (dropped in an invalid area or by pressing <code>ESC</code>) The other question asks how I avoid a memory leak caused by creating new instances of <code>QMimeData</code> every time the source widgets <code>mimeData()</code> method gets called."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1466058198, "post_id": 37846521, "comment_id": 63161515, "body": "Misunderstood this one."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1466060502, "post_id": 37846521, "comment_id": 63162769, "body": "Can you un-duplicate this question or do I have to edit the title?"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466065339, "post_id": 37846521, "comment_id": 63165775, "body": "It&#39;s no longer flagged as a dupe that I can see. Btw, I would introduce your comment back into the question to prevent any more confusion, i.e., clarify the question a bit."}], "answers": [{"comments": [{"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466109278, "post_id": 37868682, "comment_id": 63194568, "body": "As in <a href=\"http://stackoverflow.com/q/37846843/1668622\">stackoverflow.com/q/37846843/1668622</a> this answer does not work for me. The label text gets set but not cleared.."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466111470, "post_id": 37868682, "comment_id": 63195679, "body": "@frans On the contrary, the answer works because it indicates exactly what&#39;s happening - a Qt bug. If the first code snippet (the simpler <code>startDrag</code>) also doesn&#39;t signal the end of drag then it indicates a very serious bug where not only <code>QDrag</code> leaks but the event loop is re-entered multiple times. This will cause multiple other memory leaks since <code>deleteLater</code> is deferred until the control returns to outermost event loop. Don&#39;t fight with Qt bugs: fix them or report them. You&#39;re not doing anything wrong, it&#39;s supposed to work and there&#39;s no need for workarounds."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466112231, "post_id": 37868682, "comment_id": 63196037, "body": "@frans IOW, this definitely tracks the lifetime of a <code>QDrag</code>, and highlights a bug where <code>QDrag</code> is kept around even after the drag has ended. I&#39;ve checked on Windows and there it works properly too. You have found a X11-related Qt bug, it looks like. Report it. You have a test case already."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1466145938, "post_id": 37868682, "comment_id": 63205260, "body": "Fight a Qt bug? Like this one?: <a href=\"http://i.dailymail.co.uk/i/pix/2010/06/01/article-1282890-09D495A6000005DC-862_634x303.jpg\" rel=\"nofollow noreferrer\">i.dailymail.co.uk/i/pix/2010/06/01/&hellip;</a> I can&#39;t! I&#39;ll rather try to reproduce and report it..."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1484062545, "last_edit_date": 1484062545, "creation_date": 1466108438, "answer_id": 37868682, "question_id": 37846521, "link": "https://stackoverflow.com/questions/37846521/how-to-track-the-lifetime-of-a-drag-drop-operation/37868682#37868682", "title": "How to track the lifetime of a Drag/Drop operation?", "body": "<p>In Qt 4 up until at least Qt 5.7, drag is pseudo-synchronous. It starts the moment <code>QListWidget::startDrag</code> is entered and calls <code>QDrag::exec()</code>, and ends when <code>QListWidget::startDrag</code> returns. Thus, you might have:</p>\n\n<pre><code>void startDrag(Qt::DropActions supportedActions) override {\n   emit dragStarted();\n   QListWidget::startDrag(supportedActions); // reenters the event loop\n   emit dragStopped();\n}\n</code></pre>\n\n<p>Easy-peasy, if it ignores whether a drag actually took place (it could be filtered out). </p>\n\n<p>But this implementation might change, and indeed it should change: event loop reentering is a mess. And we'd also like to know if <code>QDrag::exec()</code> was really called on a <code>QDrag</code> instance. Thus we need to check the existence of a <code>QDrag</code> instance after the control returns to the event loop (either by returning or by re-entering).</p>\n\n<p>We can leverage <code>QDrag</code> being a child of the <code>QAbstractItemView</code>. Once the drag has started, you can find the instance and track its lifetime. The lifetime monitoring requires posting a functor to the event loop to cope with the pseudosynchronous drag implementation at the moment. The code below will still work if/when drag becomes fully asynchronous.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/drag-lifetime-37846521\n#include &lt;QtWidgets&gt;\n\ntemplate &lt;typename F&gt;\nstatic void postToThread(F &amp;&amp; fun, QObject * obj = qApp) {\n   QObject src;\n   QObject::connect(&amp;src, &amp;QObject::destroyed, obj, std::forward&lt;F&gt;(fun),\n                    Qt::QueuedConnection);\n}\n\nstruct MyListWidget : QListWidget {\n   Q_SIGNAL void dragStarted();\n   Q_SIGNAL void dragStopped();\n   MyListWidget() {\n      setDragEnabled(true);\n      addItem(\"item1\");\n      addItem(\"item2\");\n   }\n   void startDrag(Qt::DropActions supportedActions) override {\n      postToThread([this]{\n         auto drag = findChild&lt;QDrag*&gt;();\n         if (drag) {\n            emit dragStarted();\n            connect(drag, &amp;QObject::destroyed, this, &amp;MyListWidget::dragStopped);\n         }\n      }, this);\n      QListWidget::startDrag(supportedActions); // reenters the event loop\n   }\n   Q_OBJECT\n};\n\nint main(int argc, char **argv) {\n   QApplication app(argc, argv);\n   QWidget gui;\n   QVBoxLayout layout(&amp;gui);\n   MyListWidget list;\n   QLabel label;\n   layout.addWidget(&amp;list);\n   layout.addWidget(&amp;label);\n   QObject::connect(&amp;list, &amp;MyListWidget::dragStarted, [&amp;]{ label.setText(\"Drag Active\"); });\n   QObject::connect(&amp;list, &amp;MyListWidget::dragStopped, [&amp;]{ label.clear(); });\n   gui.show();\n   return app.exec();\n}\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1484062545, "creation_date": 1466027950, "last_edit_date": 1495542830, "question_id": 37846521, "link": "https://stackoverflow.com/questions/37846521/how-to-track-the-lifetime-of-a-drag-drop-operation", "title": "How to track the lifetime of a Drag/Drop operation?", "body": "<p>I have an application which let's me drag&amp;drop items from a modified <code>QListWidget</code> on to a modified <code>QLabel</code> using <code>startDrag()</code>, <code>dragEnterEvent()</code>, <code>dropEvent()</code>, etc.</p>\n\n<p>I now want to not only get notified, when the dragging <strong>starts</strong> but also when it get's <strong>interrupted</strong> (by pressing <code>ESC</code> or dropping somewhere in the void). (My goal is to uncover a hidden widget I can drop items on which hides again as soon as the drag operation gets interrupted.)</p>\n\n<p>I crawled the docs but find anything promising - has someone accomplished this already?</p>\n\n<p>There is a quite <a href=\"https://stackoverflow.com/questions/26443890/catching-drag-cancel-event-in-qt\">similar question</a> already but it didn't get useful answers and it's two years old - so maybe there are some new trickies introduced by Qt5?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "netbeans"], "answers": [{"tags": [], "owner": {"reputation": 1624, "user_id": 54013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4b23013c4d06e7fd92892232d60e5b6?s=128&d=identicon&r=PG", "display_name": "Johan Boul&#233;", "link": "https://stackoverflow.com/users/54013/johan-boul%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1466031251, "creation_date": 1466031251, "answer_id": 37847153, "question_id": 37846436, "link": "https://stackoverflow.com/questions/37846436/does-anyone-knows-how-to-configure-netbeans-c-compiler-for-openmp/37847153#37847153", "title": "Does anyone knows how to configure Netbeans C++ compiler for OpenMP?", "body": "<p>You need to pass the <code>-fopenmp</code> option to the compiler driver (i.e. g++). It will take care of enabling openmp support during compilation, and also pass for you the necessary linker options.</p>\n"}], "owner": {"reputation": 1, "user_id": 6471793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9817fcc6af880412cafcc1c0189996?s=128&d=identicon&r=PG&f=1", "display_name": "Sardar Esm", "link": "https://stackoverflow.com/users/6471793/sardar-esm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 748, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466611103, "creation_date": 1466027590, "last_edit_date": 1466611103, "question_id": 37846436, "link": "https://stackoverflow.com/questions/37846436/does-anyone-knows-how-to-configure-netbeans-c-compiler-for-openmp", "title": "Does anyone knows how to configure Netbeans C++ compiler for OpenMP?", "body": "<p>I am trying to run a simple parallel c++ code on Netbeans. just including omp.h does not work. any experiences? should I configure Netbeans somehow?\nI am using Cygwin compiler.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 3, "creation_date": 1466029059, "post_id": 37846433, "comment_id": 63153557, "body": "Can you work around this using e.g. <code>noexcept(new T(std::move(value)))</code> or someting? Since it is an unevaluated expression it&#39;s not actually allocating anything but also it should specifically &quot;leak&quot; and so the dtor should not be involved... I guess you might need to use a no-throw version of new though, since you don&#39;t want to detect <code>std::bad_alloc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1466032088, "post_id": 37847131, "comment_id": 63154468, "body": "<i>&quot;it&#39;s clear that <code>std::is_nothrow_move_constructible&lt;T&gt;::value</code> should only relate to the constructor&quot;</i> -- that&#39;s not clear at all, the issue is unresolved, and it&#39;s certainly not true that there is a clear consensus that the submitter&#39;s expectation is correct, or that there&#39;s any defect in the standard."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466062915, "post_id": 37847131, "comment_id": 63164295, "body": "@JonathanWakely point taken. I have edited the question. I would think that a C++ standard construct should do what it says on the tin, i.e. in this case tests only whether a type has a no-throw move constructor, but nothing else."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466085351, "post_id": 37847131, "comment_id": 63179836, "body": "But the trait is not &quot;has nothrow move constructor&quot; (see <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3142.html\" rel=\"nofollow noreferrer\">N3142</a> for why it isn&#39;t that). Instead it tells you whether creating an object from an rvalue can throw, which is not the same. And for most cases where you want to know if creating it throws, you also want to know if destroying it throws,  because it&#39;s no good optimising something like the internals of a container for elements with non-throwing moves if their destructors can throw."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466085857, "post_id": 37847131, "comment_id": 63180248, "body": "Also, the MoveConstructible concept that the trait is related to (but not identical to) subsumes the Destructible concept. A type which is not Destructible is not MoveConstructible. So &quot;is MoveConstructible&quot; means &quot;can be constructed from an rvalue, and is destructible&quot;, and &quot;is nothrow MoveConstructible&quot; means &quot;can be constructed from an rvalue, and is destructible, and those operations don&#39;t throw&quot;. So I still take issue with your claim that &quot;From its name it appears clear ...&quot; because you seem to think the name is &quot;has nothrow move constructor&quot; rather than &quot;is nothrow move constructible&quot;."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466086204, "post_id": 37847131, "comment_id": 63180521, "body": "@JonathanWakely The name certainly does not relate to destruction and the traits shouldn&#39;t either (for otherwise it&#39;s confusing and unclear \u2013 there are cases where one wants a traits solely on the construction). Thus, the remaining issue is the distinction between &#39;is constructible&#39; and &#39;has constructor&#39;. Okay, we want to know if <code>T(std::move(value))</code> works and will not throw, but <b>not</b> if the destruction of the resulting object may throw."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466086253, "post_id": 37847131, "comment_id": 63180564, "body": "The name relates to MoveConstructible, and that subsumes Destructible."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466087031, "post_id": 37847131, "comment_id": 63181185, "body": "@JonathanWakely I understand that, but take issue with this: it&#39;s unclear and confusing. There should then be a concept MoveConstructibleAndDescructible and similar for the traits. There are cases, where one may want to differentiate these things."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466117160, "post_id": 37847131, "comment_id": 63197813, "body": "@JonathanWakely But CopyConstructible subsumes MoveConstructible and yet <code>is_[meow_]copy_constructible</code> doesn&#39;t check move construction :)"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1466154188, "post_id": 37847131, "comment_id": 63209924, "body": "@JonathanWakely IMHO, traits should do what they say on the tin, nothing less and nothing more. Everything else is a recipe for confusion, buggy code, and disaster."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1466165580, "post_id": 37847131, "comment_id": 63217465, "body": "@T.C. yes, that&#39;s why I said <code>is_move_constructible</code> is related to (but not identical to) MoveConstructible. It&#39;s still closer to MoveConstructible than to &quot;has move constructor&quot; because there are many types that are MoveConstructible, and for which <code>is_move_constructible</code> is true, but which don&#39;t have a move constructor."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1466165717, "post_id": 37847131, "comment_id": 63217557, "body": "@Walter, there are cases where you want to distinguish them, but they are uncommon (throwing destructors are uncommon, and non-Destructible types are rarer still). The concepts and the traits correspond to the properties required in the Standard Library (which are also the ones more commonly needed in user code too). If you want a different trait for different cases, write one. <code>std::is_move_constructible</code> does what it&#39;s specified to do in the standard, and IMHO that&#39;s not a defect."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 6, "last_activity_date": 1466086888, "last_edit_date": 1466086888, "creation_date": 1466031151, "answer_id": 37847131, "question_id": 37846433, "link": "https://stackoverflow.com/questions/37846433/noexcept-expression-vs-type-traits/37847131#37847131", "title": "noexcept expression vs type traits", "body": "<p>Good question, see also <a href=\"http://cplusplus.github.io/LWG/lwg-active.html#2116\" rel=\"nofollow\">this language defect discussion</a>. From its name it appears clear that <code>std::is_nothrow_move_constructible&lt;T&gt;::value</code> <em>should</em> only relate to the constructibiliry from an rvalue (but in practice may also relate to the destruction), while <code>noexcept(T(std::move(value)))</code> always relates to both construction and destruction.</p>\n\n<p>So, in your case, the most save way, avoiding the unresolved issue of the <code>std::is_nothrow_move_constructible</code> traits, is to use placement new, avoiding the issue with <code>std::bad_alloc</code> (mentioned in Chris Beck's comment), and, similarly, use <code>T</code>'s desctructor for the wrapper's destructor.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Wrapper {\npublic:\n    Wrapper(T&amp;&amp; value) noexcept(new(nullptr) T(std::move(value)))\n        : value_(std::move(value))\n    {}\n    ~Wrapper() noexcept(noexcept(value_.T::~T()))\n    {}\nprivate:\n    T value_;\n};\n</code></pre>\n"}], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 1, "accepted_answer_id": 37847131, "answer_count": 1, "score": 7, "last_activity_date": 1466086888, "creation_date": 1466027583, "last_edit_date": 1466027922, "question_id": 37846433, "link": "https://stackoverflow.com/questions/37846433/noexcept-expression-vs-type-traits", "title": "noexcept expression vs type traits", "body": "<p>I'm learning how to use conditional <code>noexcept</code> and come across this problem. Suppose I have a class:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Wrapper {\npublic:\n    Wrapper(T&amp;&amp; value) noexcept(/* ??? */)\n        : value_(std::move(value))\n    {}\n\nprivate:\n    T value_;\n};\n</code></pre>\n\n<p>For the <code>/* ??? */</code> part, I thought we can use either <code>noexcept(T(std::move(value)))</code> or <code>std::is_nothrow_move_constructible&lt;T&gt;::value</code>, until I stumbled upon <a href=\"http://en.cppreference.com/w/cpp/types/is_copy_constructible#Notes\" rel=\"noreferrer\">this</a>. </p>\n\n<p>So if I use <code>noexcept(noexcept(T(std::move(value))))</code>, strictly speaking I'm saying that \"this constructor is <code>noexcept</code> iff constructing <em>and destructing</em> a <code>T</code> is <code>noexcept</code>\"?</p>\n\n<p>Although destructors that throw should be put on fire and burned.</p>\n"}, {"tags": ["c++", "unordered-map", "particle-system"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1466027536, "post_id": 37846246, "comment_id": 63153028, "body": "Is there any particular reason you have to look-up and remove specific contacts? I would simply fill up an <code>std::vector&lt;contact_data&gt;</code> <i>(or maybe multiple vectors, one per thread)</i> and then solve all the contacts sequentially in a later step. After solving all contacts, the vector(s) can be <code>clear</code>ed."}, {"owner": {"reputation": 748, "user_id": 505047, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b89b03ffaeb3ee9dd974edc0a3d7dfcd?s=128&d=identicon&r=PG", "display_name": "iluvatar", "link": "https://stackoverflow.com/users/505047/iluvatar"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1466083717, "post_id": 37846246, "comment_id": 63178449, "body": "Hi.Every time step the contact list needs to be updated because of the system dynamics, and not only some new contacts are created while some others are destroyed, but also there contacts themselves evolved since, for example, the relative displacement between particles changed. A typical simulation requires over million of steps. Clearing the whole list every time step would be prohibitively expensive in terms of performance"}], "owner": {"reputation": 748, "user_id": 505047, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b89b03ffaeb3ee9dd974edc0a3d7dfcd?s=128&d=identicon&r=PG", "display_name": "iluvatar", "link": "https://stackoverflow.com/users/505047/iluvatar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466026826, "creation_date": 1466026826, "question_id": 37846246, "link": "https://stackoverflow.com/questions/37846246/data-structure-for-managing-contact-collision-info-between-particles", "title": "Data structure for managing contact-collision info between particles", "body": "<p>I am performing some particle simulations in C++ and I need to keep a list of contacts info between particles. A contact is actually a data struct containing some data related to the contact. Each particle is identified with a unique ID. Once a contact is lost, it is deleted from the list. The bottleneck of the simulation is computing the force (a routine inside the contacts), and I have found an important impact on the overall performance according to the actual way the contact list is organised. </p>\n\n<p>Currently, I am using a c++ unordered_map (hash map), whose key is a single integer obtained from a pair function applied over the two unique IDS of the particles, and the value is the contact itself. </p>\n\n<p>I would like to know if there is a better approach to this problem (organising efficiently the list of contacts while keeping the info of the particles they are related with) since my approach is done just because I read and found than a hash map is fast for both insertion and deletion.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c++", "c++11", "vector", "stl", "iterator"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1466026936, "post_id": 37846198, "comment_id": 63152790, "body": "This whole design is completely off the mark. <code>std::vector&lt;int&gt;::const_iterator</code> may well be simply <code>const int *</code> and then your entire code explodes."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1466031835, "post_id": 37846198, "comment_id": 63154389, "body": "whats wrong with just <code>typedef std::vector&lt;int&gt;::const_iterator iterator;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": true, "score": 2, "last_activity_date": 1466032314, "creation_date": 1466032314, "answer_id": 37847328, "question_id": 37846198, "link": "https://stackoverflow.com/questions/37846198/minimal-functionality-for-a-custom-iterator-derived-non-publicly-from-an-stl-ite/37847328#37847328", "title": "Minimal functionality for a custom iterator derived non-publicly from an STL iterator?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow\">Range-for</a> is expressed through the traditional <a href=\"http://en.cppreference.com/w/cpp/language/for\" rel=\"nofollow\">for loop</a> like follows:</p>\n\n<pre><code>for ( range_declaration : range_expression ) loop_statement         \n</code></pre>\n\n<p>can be considered to expand to</p>\n\n<pre><code>{\n    auto &amp;&amp; __range = range_expression ;\n    for (auto __begin = begin_expr, __end = end_expr;\n            __begin != __end; ++__begin) {\n\n        range_declaration = *__begin;\n        loop_statement\n    }\n} \n</code></pre>\n\n<p>where some unique identifiers are used instead of <code>__range</code>, <code>__begin</code> and <code>__end</code>, so that no identifier from the enclosing scope is hidden.</p>\n\n<p>This means that the iterator type must support the following operations:</p>\n\n<ul>\n<li><code>!=</code></li>\n<li><code>++</code> (preincrement)</li>\n<li><code>*</code> (dereference)</li>\n</ul>\n"}], "owner": {"reputation": 8829, "user_id": 79111, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/O31rq.png?s=128&g=1", "display_name": "Ton van den Heuvel", "link": "https://stackoverflow.com/users/79111/ton-van-den-heuvel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 37847328, "answer_count": 1, "score": 1, "last_activity_date": 1466032314, "creation_date": 1466026562, "last_edit_date": 1466027022, "question_id": 37846198, "link": "https://stackoverflow.com/questions/37846198/minimal-functionality-for-a-custom-iterator-derived-non-publicly-from-an-stl-ite", "title": "Minimal functionality for a custom iterator derived non-publicly from an STL iterator?", "body": "<p>Please consider the following code, where an inline iterator class is defined for a wrapper class around an <code>std::vector</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Vector\n{\npublic:\n    using VectorIt = std::vector&lt;int&gt;::const_iterator;\n\n    class iterator: protected VectorIt\n    {\n    public:\n        iterator(const VectorIt&amp; it): VectorIt(it) { }\n\n        using VectorIt::operator*;\n        using VectorIt::operator-&gt;;\n    };\n\n    iterator begin() const { return iterator(v.cbegin()); }\n    iterator end() const { return iterator(v.cend()); }\n\nprivate:\n    std::vector&lt;int&gt; v = {1, 2, 3};\n};\n</code></pre>\n\n<p>I would like to control access to functionality provided by the STL iterator base class of the custom iterator, hence the protected inheritance. When I use this list in a range-for loop as follows:</p>\n\n<pre><code>for (auto i : Vector{}) { std::cout &lt;&lt; i &lt;&lt; \"\\n\"; }\n</code></pre>\n\n<p>I am greeted with the following error (GCC 5.3.0):</p>\n\n<blockquote>\n  <p>\u2018__gnu_cxx::__normal_iterator&lt;const int*, std::vector&lt;int> >\u2019 is an\n  inaccessible base of \u2018Vector::iterator\u2019</p>\n</blockquote>\n\n<p>What is the minimal functionality of the underlying <code>std::vector&lt;int&gt;::const_iterator</code> that I need to expose such that <code>Vector::iterator</code> can be used in the range-based for loop shown above? </p>\n"}, {"tags": ["python", "c++", "qt", "pyqt", "qgraphicsitem"], "comments": [{"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 2251, "user_id": 3477005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/x9tik.jpg?s=128&g=1", "display_name": "Daniele Pantaleone", "link": "https://stackoverflow.com/users/3477005/daniele-pantaleone"}, "edited": false, "score": 0, "creation_date": 1466087986, "post_id": 37846195, "comment_id": 63181851, "body": "@DanielePantaleone I somewhat agree. The way I solved it is a bit different though. I am posting my answer in case it could be useful."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108661, "post_id": 37846195, "comment_id": 63194227, "body": "Exactly. Posting a good solution to a dupe has it&#39;s own perks. But if you post it to the original question (if you are sure that it is a new merit-able answer) then you might get more views to that (older questions with more views index more on Google Search). Take note the next time."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108783, "post_id": 37846195, "comment_id": 63194305, "body": "@BhargavRao Great! Thanks for the advice - will post in orginal."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1466108934, "post_id": 37846195, "comment_id": 63194382, "body": "Don&#39;t do so now. Keep that in mind the next time."}], "answers": [{"tags": [], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "is_accepted": false, "score": 1, "last_activity_date": 1466093515, "last_edit_date": 1495535358, "creation_date": 1466089602, "answer_id": 37862953, "question_id": 37846195, "link": "https://stackoverflow.com/questions/37846195/resizing-qgraphicsitem-based-on-position-of-child-resizer-item/37862953#37862953", "title": "Resizing QGraphicsItem based on position of child &#39;resizer&#39; item", "body": "<p>I ended converting the <code>Resizer</code> class to a subclass of <code>QGraphicsObject</code>. It turns out it was possible to reimplement the paint method (even though my auto-completion did not find it previously). </p>\n\n<p><code>Resizer.itemChange</code> now emits a signal which is assigned to the <code>resize</code> method in the parent <code>Box</code> class which uses the position change information from the resizer to adjust the rect of the box.</p>\n\n<p>This way, the resizer can be resused for other items as well, without having to re-implement mouse press/move/release events as in the answer provided <a href=\"https://stackoverflow.com/questions/34429632/resize-a-qgraphicsitem-with-the-mouse/34442054#34442054\">here</a>.</p>\n\n<pre><code>import sys\nfrom PyQt4.QtGui import *\nfrom PyQt4.QtCore import *\n\nclass Box(QGraphicsRectItem):\n\n    def __init__(self, position, rect=QRectF(0, 0, 100, 50), parent=None, scene=None):\n        super().__init__(rect, parent, scene)\n\n        self.setFlag(QGraphicsItem.ItemIsSelectable, True)\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n        self.setFlag(QGraphicsItem.ItemIsFocusable, True)\n        self.setFlag(QGraphicsItem.ItemSendsGeometryChanges, True)\n\n        self.setPos(position)\n\n        self.resizer = Resizer(parent=self)\n        resizerWidth = self.resizer.rect.width() / 2\n        resizerOffset = QPointF(resizerWidth, resizerWidth)\n        self.resizer.setPos(self.rect().bottomRight() - resizerOffset)\n        self.resizer.resizeSignal.connect(self.resize)\n\n    def paint(self, painter, option, widget=None):\n        pen = QPen()\n        pen.setColor(Qt.black)\n        painter.setPen(pen)\n        painter.setBrush(Qt.transparent)\n        painter.drawRect(self.rect())\n\n    @pyqtSlot()\n    def resize(self, change):\n        self.setRect(self.rect().adjusted(0, 0, change.x(), change.y()))\n        self.prepareGeometryChange()\n        self.update()\n\n\nclass Resizer(QGraphicsObject):\n\n    resizeSignal = pyqtSignal(QPointF)\n\n    def __init__(self, rect=QRectF(0, 0, 10, 10), parent=None):\n        super().__init__(parent)\n\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n        self.setFlag(QGraphicsItem.ItemIsSelectable, True)\n        self.setFlag(QGraphicsItem.ItemSendsGeometryChanges, True)\n        self.rect = rect\n\n    def boundingRect(self):\n        return self.rect\n\n    def paint(self, painter, option, widget=None):\n        if self.isSelected():\n            pen = QPen()\n            pen.setStyle(Qt.DotLine)\n            painter.setPen(pen)\n        painter.drawEllipse(self.rect)\n\n    def itemChange(self, change, value):\n        if change == QGraphicsItem.ItemPositionChange:\n            if self.isSelected():\n                self.resizeSignal.emit(value - self.pos())\n        return value\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n\n    view = QGraphicsView()\n    scene = QGraphicsScene()\n    scene.setSceneRect(0, 0, 500, 1000)\n    view.setScene(scene)\n\n    box = Box(QPointF(50, 50), scene=scene)\n\n    view.show()\n\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "closed_date": 1466108508, "answer_count": 1, "score": 1, "last_activity_date": 1466093515, "creation_date": 1466026556, "last_edit_date": 1592644375, "question_id": 37846195, "link": "https://stackoverflow.com/questions/37846195/resizing-qgraphicsitem-based-on-position-of-child-resizer-item", "closed_reason": "Duplicate", "title": "Resizing QGraphicsItem based on position of child &#39;resizer&#39; item", "body": "<p>I'm trying to create a minimal QGraphicsItem that acts as a resizer to its parent. I think I'm nearly there but am drawing a blank and how to convey its position to the parent item when it is being moved. What I am going for looks something like this (without the text):</p>\n<p><a href=\"https://i.stack.imgur.com/9xieK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9xieK.gif\" alt=\"enter image description here\" /></a></p>\n<p>And here is a self contained example of what I have so far:</p>\n<pre><code>import sys\nfrom PyQt4.QtGui import *\nfrom PyQt4.QtCore import *\n\n\nclass Resizer(QGraphicsEllipseItem):\n\n    def __init__(self, rect=QRectF(0, 0, 10, 10), parent=None, scene=None):\n        super().__init__(rect, parent, scene)\n\n        self.setFlag(QGraphicsItem.ItemIsMovable, True)\n\n    def mousePressEvent(self, mouseEvent):\n        self.resize = True\n        self.initialPos = self.scenePos()\n        self.setSelected(True)\n\n    def mouseMoveEvent(self, mouseEvent):\n        if self.resize:\n            self.currentPos = self.scenePos()\n            self.change = self.initialPos - self.currentPos\n        super().mouseMoveEvent(mouseEvent)\n\n    def mouseReleaseEvent(self, mouseEvent):\n        self.resize = False\n        self.setSelected(False)\n\n\nif __name__ == &quot;__main__&quot;:\n\n    app = QApplication(sys.argv)\n\n    view = QGraphicsView()\n    scene = QGraphicsScene()\n    scene.setSceneRect(0, 0, 500, 500)\n    view.setScene(scene)\n\n    rect = QRectF(100, 100, 150, 50)\n    box = QGraphicsRectItem(rect)\n\n    scene.addItem(box)\n\n    resizer = Resizer(parent=box)\n    resizerWidth = resizer.rect().width() / 2\n    resizerOffset = QPointF(resizerWidth, resizerWidth)\n    resizer.setPos(box.rect().bottomRight() - resizerOffset)\n\n    view.show()\n\n    sys.exit(app.exec_())\n</code></pre>\n<p>So how can I convey <code>self.change</code> in the <code>mouseMoveEvent</code> to the parent in a way that the parent is resized as the <code>Resizer</code> is being moved? Any other suggestions are welcome.</p>\n<p>I've tried converting the <code>Resizer</code> to a subclass of <code>QGraphicsObject</code> so that it could emit a signal on <code>mouseMoveEvent</code>, but <code>QGraphicsObject</code> does not have a paint method and I am unsure on how to display the <code>Resizer</code> on the scene.</p>\n<p>Any advice on this is welcome.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "operator-overloading"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 1, "creation_date": 1466026953, "post_id": 37846188, "comment_id": 63152796, "body": "It&#39;s called <i>name hiding</i>. See e.g. <a href=\"http://stackoverflow.com/questions/1628768/why-does-an-overridden-function-in-the-derived-class-hide-other-overloads-of-the\" title=\"why does an overridden function in the derived class hide other overloads of the\">stackoverflow.com/questions/1628768/&hellip;</a>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1466027733, "post_id": 37846188, "comment_id": 63153098, "body": "You can resolve the issue by inserting <code>using base::operator();</code> in your class A. Be aware that accessibility is depending on where you insert your using declarations and that you can change accessibility in respect to the parent&#39;s one (e. g. make protected functions public by placing the using into the public section)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1466027865, "post_id": 37846188, "comment_id": 63153155, "body": "And be aware that you cannot &quot;unhide&quot; a single function this way - either all overloads or none (exception: there is only one function with given name in the parent...)."}], "answers": [{"comments": [{"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1466027322, "post_id": 37846243, "comment_id": 63152944, "body": "Thanks, that works. Is the point of the <code>using declaration</code> being obligatory to prevent problems with multiple inheritance? Would there be a problem, if the standard specified that unless a <code>using declaration</code> is present, the function from the first listed parent class is used?"}, {"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1466027903, "post_id": 37846243, "comment_id": 63153162, "body": "Answered in a comment to the question: <a href=\"http://stackoverflow.com/a/1629074/2640636\">stackoverflow.com/a/1629074/2640636</a> Thanks @Alan Stokes"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 3, "last_activity_date": 1466027371, "last_edit_date": 1466027371, "creation_date": 1466026799, "answer_id": 37846243, "question_id": 37846188, "link": "https://stackoverflow.com/questions/37846188/inheritance-and-template-operator-overloading/37846243#37846243", "title": "Inheritance and template operator overloading", "body": "<p>The declaration of the operator in the derived class hides the name in the base class.<br>\nTo <em>solve</em> the issue, it's a matter of a <a href=\"http://eel.is/c++draft/namespace.udecl#using-declaration\" rel=\"nofollow\"><code>using declaration</code></a>:</p>\n\n<pre><code>template &lt;&gt;\nstruct A&lt;int&gt;: public base {\n    using base::operator();\n    void operator()() { std::cout &lt;&lt; \"A&lt;int&gt;\" &lt;&lt; std::endl; }\n};\n</code></pre>\n\n<p>And both of them will compile.</p>\n"}], "owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 37846243, "answer_count": 1, "score": 1, "last_activity_date": 1466027371, "creation_date": 1466026529, "question_id": 37846188, "link": "https://stackoverflow.com/questions/37846188/inheritance-and-template-operator-overloading", "title": "Inheritance and template operator overloading", "body": "<p>Inheritance and template operator overloading</p>\n\n<p>I don't understand why the operator in <code>A&lt;int&gt;</code> overshadows the operator in <code>base</code>.\nIt has a different signature after all.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct base {\n  template &lt;typename U&gt;\n  void operator()(U&amp;&amp; x) { std::cout &lt;&lt; \"base\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename T&gt;\nstruct A: public base { };\n\ntemplate &lt;&gt;\nstruct A&lt;int&gt;: public base {\n  void operator()() { std::cout &lt;&lt; \"A&lt;int&gt;\" &lt;&lt; std::endl; } // line 1\n};\n\nint main()\n{\n  A&lt;double&gt;()(1);\n  A&lt;int&gt;()(1); // line 2\n  A&lt;int&gt;()();  // line 3\n}\n</code></pre>\n\n<p>Line 2 does not compile if line 1 is present.</p>\n\n<p>Line 3 does not compile if line 1 is removed (obviously).</p>\n\n<p>If I copy the operator template from base to A, everything works.</p>\n\n<p>I expected the output to be:</p>\n\n<pre><code>base\nbase\nA&lt;int&gt;\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-c++", "assembly", "x86"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1466026573, "post_id": 37846117, "comment_id": 63152636, "body": "What makes you think this is faster than just writing it in C or C++? And it doesn&#39;t really matter how fast it is, given that a Caesar cipher can be broken in milliseconds."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1466028755, "post_id": 37846117, "comment_id": 63153445, "body": "Is <code>DWORD dwsKey</code> a typo. Seems like the extra <code>s</code> is a mistake? and then remove the local variable <code>DWORD dwKey;</code> ?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466048523, "post_id": 37846117, "comment_id": 63158133, "body": "What&#39;s the point of this code?  Are you on purpose writing slow asm to stop the compiler from using a 4-byte xor, or SSE2 PXOR?"}], "answers": [{"comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1466031225, "post_id": 37846238, "comment_id": 63154205, "body": "I believe that <code>__asm</code> takes care of saving and restoring the registers that are used within the <code>__asm</code> statement if need be. MSVC analyzes the __asm to determine register usage. About the only registers (besides selectors) that need to be dealt with manually (preserved) are ESP and EBP. GCC doesn&#39;t analyze inline assembler statements, but MSVC does."}, {"owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1466032864, "post_id": 37846238, "comment_id": 63154673, "body": "&quot;When using __asm to write assembly language in C/C++ functions, you don&#39;t need to preserve the EAX, EBX, ECX, EDX, ESI, or EDI registers&quot; (<a href=\"https://msdn.microsoft.com/en-us/library/k1a8ss06.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/k1a8ss06.aspx</a>).  The page also implies it does the analysis Michael mentions in order to optimize which registers it needs to save/restore automatically."}], "tags": [], "owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "is_accepted": true, "score": 4, "last_activity_date": 1466027204, "last_edit_date": 1466027204, "creation_date": 1466026776, "answer_id": 37846238, "question_id": 37846117, "link": "https://stackoverflow.com/questions/37846117/c-c-inline-asm-improper-operand-type/37846238#37846238", "title": "C/C++ Inline asm improper operand type", "body": "<p>I think you have two problems.  </p>\n\n<p>First, \"xor\" can't take two memory operands (ds:[eax] is a memory location and dwKey is a memory location); secondly, you've used \"byte ptr\" to indicate you want a byte, but you're trying to use a DWORD and assembly can't automatically convert those.</p>\n\n<p>So, you'll probably have to load your value into an 8-bit register and then do it.  For example:</p>\n\n<pre><code>void XorBlock(DWORD dwStartAddress, DWORD dwSize, DWORD dwsKey)\n{\n    DWORD dwKey;\n    __asm\n    {\n        push eax\n        push ecx\n        mov ecx, dwStartAddress          // Move Start Address to ECX\n        add ecx, dwSize                  // Add the size of the function to ECX\n        mov eax, dwStartAddress          // Copy the Start Address to EAX\n        mov ebx, dwKey                   // &lt;---- LOAD dwKey into EBX\n\n        crypt_loop :                         // Start of the loop\n            xor byte ptr ds : [eax], bl     // XOR The current byte with the low byte of EBX\n            inc eax                         // Increment EAX with dwStartAddress++\n            cmp eax, ecx                     // Check if every byte is XORed\n            jl crypt_loop;                      // Else jump back to the start label\n\n        pop ecx // pop ECX from stack\n        pop eax // pop EAX from stack\n    }\n}\n</code></pre>\n\n<p>Although, it also looks like dwKey is uninitialized in your code; maybe you should just \"mov bl, 0x42\".  I'm also not sure you need to push and pop the registers; I can't remember what registers you are allowed to clobber with MSVC++ inline assembler.</p>\n\n<p>But, in the end, I think Alan Stokes is correct in his comment: it is very unlikely assembly is actually faster than C/C++ code in this case.  The compiler can easily generate this code on its own, and you might find the compiler actually does unexpected optimizations to make it run even faster than the \"obvious\" assembly does (for example, <a href=\"https://en.wikipedia.org/wiki/Loop_unrolling\" rel=\"nofollow\">loop unrolling</a>).</p>\n"}], "owner": {"reputation": 51, "user_id": 6454141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb7fa6bc82e142d9a7d24b8acc1b9bc?s=128&d=identicon&r=PG&f=1", "display_name": "Zer0Mem0ry", "link": "https://stackoverflow.com/users/6454141/zer0mem0ry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1438, "favorite_count": 0, "accepted_answer_id": 37846238, "answer_count": 1, "score": 0, "last_activity_date": 1466029959, "creation_date": 1466026206, "last_edit_date": 1466029959, "question_id": 37846117, "link": "https://stackoverflow.com/questions/37846117/c-c-inline-asm-improper-operand-type", "title": "C/C++ Inline asm improper operand type", "body": "<p>I have the following code, that is supposed to XOR a block of memory:</p>\n\n<pre><code>void XorBlock(DWORD dwStartAddress, DWORD dwSize, DWORD dwsKey)\n{\nDWORD dwKey;\n__asm\n{\n    push eax\n    push ecx\n    mov ecx, dwStartAddress          // Move Start Address to ECX\n    add ecx, dwSize                  // Add the size of the function to ECX\n    mov eax, dwStartAddress          // Copy the Start Address to EAX\n\n    crypt_loop:                         // Start of the loop\n        xor byte ptr ds:[eax], dwKey     // XOR The current byte with 0x4D\n        inc eax                         // Increment EAX with dwStartAddress++\n        cmp eax,ecx                     // Check if every byte is XORed\n    jl crypt_loop;                      // Else jump back to the start label\n\n    pop ecx // pop ECX from stack\n    pop eax // pop EAX from stack\n}\n}\n</code></pre>\n\n<p>However, the argument dwKey gives me an error. The code works perfectly if for example the dwKey is replaced by 0x5D.</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "reply_to_user": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1466026772, "post_id": 37845909, "comment_id": 63152726, "body": "I added glad.h to my include path but Idk where to put glad.c"}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1536571511, "post_id": 37845909, "comment_id": 91456810, "body": "The &quot;duplicate answer&quot; is ridiculous and too general to be of any help."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 2, "creation_date": 1466026591, "post_id": 37846063, "comment_id": 63152648, "body": "I think my headers are correctly included. However I still got an error saying &#39;undefined reference to GladGLLoader&#39;. Do you know where to put glad.h and glad.c?"}, {"owner": {"reputation": 392, "user_id": 3477333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IfQAQ.jpg?s=128&g=1", "display_name": "vmil", "link": "https://stackoverflow.com/users/3477333/vmil"}, "reply_to_user": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466027396, "post_id": 37846063, "comment_id": 63152973, "body": "Have you included the GLAD source in your project?"}, {"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466027481, "post_id": 37846063, "comment_id": 63153008, "body": "I did but I think I was not including it in a right place??"}, {"owner": {"reputation": 392, "user_id": 3477333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IfQAQ.jpg?s=128&g=1", "display_name": "vmil", "link": "https://stackoverflow.com/users/3477333/vmil"}, "reply_to_user": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466027624, "post_id": 37846063, "comment_id": 63153069, "body": "Generate the GLAD loader using <a href=\"http://http://glad.dav1d.de/\" rel=\"nofollow noreferrer\">http://glad.dav1d.de</a> Then copy the glad.h, glad.c, and khrplatform.h to a GLAD library folder in your src directory."}, {"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466028300, "post_id": 37846063, "comment_id": 63153293, "body": "That&#39;s what I did before but it gave me a compile error when I include &lt;glad/glad.h&gt; in my main.cpp"}, {"owner": {"reputation": 392, "user_id": 3477333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IfQAQ.jpg?s=128&g=1", "display_name": "vmil", "link": "https://stackoverflow.com/users/3477333/vmil"}, "reply_to_user": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466028335, "post_id": 37846063, "comment_id": 63153303, "body": "What is the error?"}, {"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "edited": false, "score": 0, "creation_date": 1466030348, "post_id": 37846063, "comment_id": 63153969, "body": "fatal error: glad/glad.h: No such file or directory"}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1536571382, "post_id": 37846063, "comment_id": 91456734, "body": "I am having the same problem in Ubuntu 18.04: fatal error: glad/glad.h: No such file or directory"}, {"owner": {"reputation": 6711, "user_id": 322537, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/TMSvO.jpg?s=128&g=1", "display_name": "john-jones", "link": "https://stackoverflow.com/users/322537/john-jones"}, "edited": false, "score": 0, "creation_date": 1541346797, "post_id": 37846063, "comment_id": 93176641, "body": "@vmil, that link is dead."}, {"owner": {"reputation": 939, "user_id": 1246117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e7ff09de72724c2415872886fc1f9bf?s=128&d=identicon&r=PG", "display_name": "Timothy John Laird", "link": "https://stackoverflow.com/users/1246117/timothy-john-laird"}, "edited": false, "score": 0, "creation_date": 1543893897, "post_id": 37846063, "comment_id": 94072669, "body": "two commands: to install pull glad python stuff: pip install --upgrade git+<a href=\"https://github.com/dav1dde/glad.git#egg=glad\" rel=\"nofollow noreferrer\">github.com/dav1dde/glad.git#egg=glad</a> to made a c inc/src file with the glad python stuff: python -m glad --generator=c --spec=gl --out-path yourgladfolderpath"}], "tags": [], "owner": {"reputation": 392, "user_id": 3477333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IfQAQ.jpg?s=128&g=1", "display_name": "vmil", "link": "https://stackoverflow.com/users/3477333/vmil"}, "is_accepted": false, "score": 1, "last_activity_date": 1466025996, "creation_date": 1466025996, "answer_id": 37846063, "question_id": 37845909, "link": "https://stackoverflow.com/questions/37845909/opengl-setting-up-glad-on-ubuntu/37846063#37846063", "title": "opengl -- setting up glad on Ubuntu", "body": "<p>Make sure you include the GLFW header. Also include the GLAD header BEFORE the GLFW header.</p>\n"}], "owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7941, "favorite_count": 0, "closed_date": 1466026912, "answer_count": 1, "score": 3, "last_activity_date": 1466027360, "creation_date": 1466025383, "last_edit_date": 1466027360, "question_id": 37845909, "link": "https://stackoverflow.com/questions/37845909/opengl-setting-up-glad-on-ubuntu", "closed_reason": "Duplicate", "title": "opengl -- setting up glad on Ubuntu", "body": "<p>I followed <a href=\"http://www.glfw.org/docs/latest/quick.html\" rel=\"nofollow\">this</a> tutorial to write a simple project using GLFW and glad but I don't know how to set up glad in my project. I am currently using Eclipse.</p>\n\n<p>To be more precise, I am trying to ask how to correctly include glad in a project</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466025164, "post_id": 37845801, "comment_id": 63151990, "body": "<a href=\"http://pt.stackoverflow.com/\">pt.stackoverflow.com</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 1, "creation_date": 1466026713, "post_id": 37845801, "comment_id": 63152699, "body": "If it matters, measure it. But it doesn&#39;t matter here, unless your something is utterly trivial."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6436654, "user_type": "registered", "profile_image": "https://graph.facebook.com/984503675001389/picture?type=large", "display_name": "&#205;caro Dantas", "link": "https://stackoverflow.com/users/6436654/%c3%8dcaro-dantas"}, "edited": false, "score": 0, "creation_date": 1466027903, "post_id": 37846003, "comment_id": 63153163, "body": "Obrigado, realmente &#233; melhor evitar c&#225;lculos!"}], "tags": [], "owner": {"reputation": 1062, "user_id": 3680517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/054176a7c3473e7715ad6f6b0eb26afc?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJannino", "link": "https://stackoverflow.com/users/3680517/mikejannino"}, "is_accepted": false, "score": 0, "last_activity_date": 1466025741, "last_edit_date": 1492087236, "creation_date": 1466025741, "answer_id": 37846003, "question_id": 37845801, "link": "https://stackoverflow.com/questions/37845801/declare-int-variable-aux-a-length-or-use-o-length-in-all-loops/37846003#37846003", "title": "Declare int variable aux a.length = (); Or use o.length () in all loops?", "body": "<p>As a general rule of thumb, as computations get bigger, more complex, and more frequent you want to minimize your unnecessary calculations. This means that storing something that needs to be calculated in a variable may speed up the process.</p>\n\n<p>In both of your examples, for <em>extremely</em> large numbers, </p>\n\n<pre><code>int scratch = big.length();\n\nfor(int i=0;i&lt;scratch;i++){\n    //body//\n}\n</code></pre>\n\n<p>is usually faster.</p>\n\n<p>In the future, general questions like this tend to belong in something like the <a href=\"https://codereview.stackexchange.com/\">Code Review Stack Exchange</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6436654, "user_type": "registered", "profile_image": "https://graph.facebook.com/984503675001389/picture?type=large", "display_name": "&#205;caro Dantas", "link": "https://stackoverflow.com/users/6436654/%c3%8dcaro-dantas"}, "edited": false, "score": 1, "creation_date": 1466027912, "post_id": 37846064, "comment_id": 63153167, "body": "Ok! Muito obrigado :D"}], "tags": [], "owner": {"reputation": 1849, "user_id": 1455928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f5b843368697e6170f943ac2fbf6bbc?s=128&d=identicon&r=PG", "display_name": "Edu", "link": "https://stackoverflow.com/users/1455928/edu"}, "is_accepted": true, "score": 0, "last_activity_date": 1466025999, "creation_date": 1466025999, "answer_id": 37846064, "question_id": 37845801, "link": "https://stackoverflow.com/questions/37845801/declare-int-variable-aux-a-length-or-use-o-length-in-all-loops/37846064#37846064", "title": "Declare int variable aux a.length = (); Or use o.length () in all loops?", "body": "<p>Both first are the better approach.</p>\n\n<p>On the first example you are checking if <code>i&lt;a.length()</code> is true on every cycle. That means that you are going to execute <code>a.length()</code> for every iteration. If the variable <code>a</code> is not changed, it is unnecessary and the better approach is to calculate before and use that value.</p>\n\n<p>Note that if the variable <code>a</code> is changed inside, placing <code>i&lt;a.length()</code> might be the correct approach. It depends on your problem.</p>\n\n<p>On the second example it is the same basics. You avoid useless calculations because you won't need to calculate <code>a.find(b[i])</code> again inside the else.</p>\n"}], "owner": {"reputation": 113, "user_id": 6436654, "user_type": "registered", "profile_image": "https://graph.facebook.com/984503675001389/picture?type=large", "display_name": "&#205;caro Dantas", "link": "https://stackoverflow.com/users/6436654/%c3%8dcaro-dantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1466057874, "accepted_answer_id": 37846064, "answer_count": 2, "score": -1, "last_activity_date": 1466025999, "creation_date": 1466024908, "last_edit_date": 1466025227, "question_id": 37845801, "link": "https://stackoverflow.com/questions/37845801/declare-int-variable-aux-a-length-or-use-o-length-in-all-loops", "closed_reason": "Needs more focus", "title": "Declare int variable aux a.length = (); Or use o.length () in all loops?", "body": "<p>I wonder which is faster: Say I'm working with some text (30 characters), which would be better? And with a lot of text which would be better?</p>\n\n<p>1-</p>\n\n<pre><code>int tam = text.length();\nfor(int i=0;i&lt;tam;i++)\n{\n    //something here//\n}\n</code></pre>\n\n<p>2-</p>\n\n<pre><code>for(int i=0;i&lt;a.length();i++)\n{\n    //something here//\n}\n</code></pre>\n\n<p>and also comparing these two:</p>\n\n<p>1-</p>\n\n<pre><code>        for (int i = 0; i &lt; b.length(); i++)\n        {\n            aux = a.find(b[i]);\n            if (aux == -1)\n            {\n                sucess = 0;\n                break;\n            }\n            else\n            {\n                a.erase(aux,1);\n            }\n        }\n</code></pre>\n\n<p>2-</p>\n\n<pre><code>        for (int i = 0; i &lt; b.length(); i++)\n        {\n            if (a.find(b[i]) == -1)\n            {\n                sucess = 0;\n                break;\n            }\n            else\n            {\n                a.erase(a.find(b[i]),1);\n            }\n        }\n</code></pre>\n"}, {"tags": ["python", "c++", "boost"], "owner": {"reputation": 11, "user_id": 5675558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f2cb18d18478d3321e520519032b96?s=128&d=identicon&r=PG&f=1", "display_name": "Okan Adal\u0131", "link": "https://stackoverflow.com/users/5675558/okan-adal%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507472972, "creation_date": 1466024817, "last_edit_date": 1507472972, "question_id": 37845781, "link": "https://stackoverflow.com/questions/37845781/boost-python-shared-library-issue-in-specific-case", "title": "Boost python shared library issue in specific case", "body": "<p>I am trying to extend my c++ library which is created using qtcreator to python with boost::python. I create a setup.py like following:</p>\n\n<pre><code>from distutils.core import setup\nfrom distutils.extension import Extension \nmodule1 = Extension('FOO',\n        include_dirs = ['/usr/include/python3.4', '/home/user/cppProjects/FOOLib','/usr/include', '/usr/local/lib/python3.4/dit-packages'],\n        libraries = ['python3.4', 'boost_python-py34', 'boost_thread', 'boost_system', 'FOOLib'],\n        library_dirs = ['/usr/lib/x86_64-linux-gnu/', '/usr/lib/python3.4/config-3.4m-x86_64-linux-gnu/','/home/skywalker/cppProjects/build-FOO-Desktop-Debug/'],       \n        sources = ['pythonprovider.cpp'],\n        extra_compile_args=['-std=c++11'])\nsetup(name=\"PackageName\",\next_modules=[module1])\n</code></pre>\n\n<p>and Bar.h </p>\n\n<pre><code>class Bar\n{\n   public:\n     Bar(boost::python::list args)\n     {\n       ...\n     }\n\n     static void SetN(int n)\n     {\n          Bar::N = n;\n     }\n     static int N;\n};\n</code></pre>\n\n<p>and Bar.cpp</p>\n\n<pre><code>int Bar::N;\n</code></pre>\n\n<p>pythonprovider.cpp is</p>\n\n<pre><code>BOOST_PYTHON_MODULE(FOO)\n{\n   class_&lt;Bar&gt;(\"Bar\", init&lt;list&gt;());\n}\n</code></pre>\n\n<p>Compiling the library and using in c++ app is working fine.\nI am typing the following code in terminal and installation of python module is working fine.</p>\n\n<pre><code>sudo python3 setup.py install\n</code></pre>\n\n<p>Including the package in python like</p>\n\n<pre><code>from FOO import *\n</code></pre>\n\n<p>working fine. But when i modify the pythonprovider.cpp with static method</p>\n\n<pre><code>BOOST_PYTHON_MODULE(FOO)\n{\n   class_&lt;Bar&gt;(\"Bar\", init&lt;list&gt;())\n      .def(\"SetN\", &amp;Bar::SetN)\n      .staticmethod(\"SetN\");\n}\n</code></pre>\n\n<p>compiling and installation working fine but importing the module assert an error</p>\n\n<p>ImportError: libFOO.so.1: cannot open shared object file: No such file or directory</p>\n\n<p>This happen to me before. When i move to body of constructor from cpp file to header file problem is solved but in this case it is not solve my problem.</p>\n"}, {"tags": ["c++", "visual-c++", "dll", "linker"], "comments": [{"owner": {"reputation": 655, "user_id": 3108054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8e7b48ae2a3cf1d91aa1e8cdf3b3c1?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;hand BOUGHIAS", "link": "https://stackoverflow.com/users/3108054/mhand-boughias"}, "edited": false, "score": 1, "creation_date": 1466050034, "post_id": 37845673, "comment_id": 63158473, "body": "Did you try with the absolute path of libfftw3-3.def"}, {"owner": {"reputation": 427, "user_id": 5975045, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ea137d6ba404fb60ed93346509bbf41?s=128&d=identicon&r=PG&f=1", "display_name": "Scorch", "link": "https://stackoverflow.com/users/5975045/scorch"}, "reply_to_user": {"reputation": 655, "user_id": 3108054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8e7b48ae2a3cf1d91aa1e8cdf3b3c1?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;hand BOUGHIAS", "link": "https://stackoverflow.com/users/3108054/mhand-boughias"}, "edited": false, "score": 1, "creation_date": 1466081205, "post_id": 37845673, "comment_id": 63176476, "body": "No, in retrospect it seems kind of stupid, but I hadn&#39;t. It seems to work now though, so forgive my ignorance and thanks for the fix"}], "owner": {"reputation": 427, "user_id": 5975045, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ea137d6ba404fb60ed93346509bbf41?s=128&d=identicon&r=PG&f=1", "display_name": "Scorch", "link": "https://stackoverflow.com/users/5975045/scorch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466025124, "creation_date": 1466024375, "last_edit_date": 1466025124, "question_id": 37845673, "link": "https://stackoverflow.com/questions/37845673/generating-import-library-from-dll", "title": "Generating import library from dll?", "body": "<p>So, I downloaded this FFT library (called FFTW, <a href=\"https://github.com/FFTW/fftw3\" rel=\"nofollow\">here</a>) for Visual C++, but, unfortunately for me, the libraries that were included were in .dll format. There were instructions on importing the library on windows using the lib.exe program, <a href=\"http://www.fftw.org/install/windows.html\" rel=\"nofollow\">here</a>, but when I run lib.exe using the parameters it set out, it gives me \"Fatal Error Lnk1104: cannot open  libfftw3-3.def\". I tried running the command as an administrator thinking that maybe my permissions were preventing from opening the file, but that didn't seem to work either. I'm not familiar with this process at all, so I'm sort of at a loss. Thanks in advance, and any help is appreciated.</p>\n"}, {"tags": ["c++", "sockets", "tcp-ip"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1466034559, "post_id": 37845586, "comment_id": 63155121, "body": "It doesn&#39;t block the port. You code is going into an infinite loop."}, {"owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1466092323, "post_id": 37845586, "comment_id": 63185063, "body": "@EJP Could you explain what is causing the infinite loop?"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466024500, "post_id": 37845665, "comment_id": 63151677, "body": "I incorporated non-blocking sockets so that my client application could proceed, even if a connection was not possible.  Right after setting the socket to be non-blocking, I use select to poll for a response over a given timeout period."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1466026310, "post_id": 37845665, "comment_id": 63152505, "body": "Right approach, assuming you aren&#39;t writing for Windows (use overlapped io)  but that won&#39;t help you with the connect. One way or another you&#39;ll have to wait for the connection to complete or fail like Sergey said. On the other hand, it looks like you&#39;re headed in <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio.html\" rel=\"nofollow noreferrer\">the same direction as boost::asio</a>. Probably worth your time looking into it before burning too much time reinventing the wheel."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466044068, "post_id": 37845665, "comment_id": 63157213, "body": "@Austin, what&#39;s the point than? You are still waiting for connection result. Just do a blocking socket and save yourself a lot of worries."}, {"owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466092251, "post_id": 37845665, "comment_id": 63185015, "body": "@SergeyA Because I need to be able to return control to the calling application eventually.  Wouldn&#39;t a block indefinitely take control until a connection was established or an error occurred?"}, {"owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466092290, "post_id": 37845665, "comment_id": 63185047, "body": "Also, do you guys think the timeout is the problem.  Usually the connection happens very quickly, so I&#39;m not sure why in this one case it would take much longer to establish a connection."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466092327, "post_id": 37845665, "comment_id": 63185067, "body": "@Austin, I am pretty sure this is what is happening."}, {"owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "edited": false, "score": 0, "creation_date": 1466092366, "post_id": 37845665, "comment_id": 63185095, "body": "Ok, I&#39;ll give it a shot with blocking on and see what happens."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1466024339, "creation_date": 1466024339, "answer_id": 37845665, "question_id": 37845586, "link": "https://stackoverflow.com/questions/37845586/tcp-connect-with-invalid-connection-blocks-port/37845665#37845665", "title": "TCP Connect With Invalid Connection Blocks Port", "body": "<p>Your socket is non-blocking mode (you do it explicitly).</p>\n\n<p>As a result, your connect will return immediately with 'connection is in progress'. When socket is non-blocking, you would need than to <code>poll</code> on this socket and wait for it to become readable and/or writeable - this would mean connection is completed (either successfully or not).</p>\n\n<p>A better option in my view would be to use blocking sockets - I see no reason for you to use non-blocking call here.</p>\n"}], "owner": {"reputation": 79, "user_id": 5428956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a84f465de138aa12674e8db0dc26acd8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5428956/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466024339, "creation_date": 1466024050, "question_id": 37845586, "link": "https://stackoverflow.com/questions/37845586/tcp-connect-with-invalid-connection-blocks-port", "title": "TCP Connect With Invalid Connection Blocks Port", "body": "<p>I'm writing a TCP communication script in c++ to communicate between my computer and an Aldebaran Nao robot.</p>\n\n<p>In general my script is working.  However, the trouble I am having is that when I call connect from the client (when the server application is closed or the ethernet connection removed) I get an error that the operation is in progress.</p>\n\n<p>However, once the server application is restarted / ethernet cable reconnected, I still cannot call connect to successfully reestablish a connection.  I still get an error that the operation is in progress.</p>\n\n<p>As a note, whenever my client determines that a connection cannot be made, the socket descriptor is closed before reattempting a connection.  Here is my code for connecting on the client side:</p>\n\n<p>If there is any more information that would be useful, I would be happy to provide it.  This project is relatively large, so I didn't want to include too much irrelevant information here.</p>\n\n<pre><code> TCPStream* TCPConnector::connect(const char* serverIP, int port, int timeoutSec)\n{\n    if (timeoutSec == 0)\n    {\n        return connect(serverIP, port);\n    }\n\n    struct sockaddr_in address;\n\n    // Store all zeros for address struct.\n    memset(&amp;address, 0, sizeof(address));\n\n    // Configure address struct.\n    address.sin_family = AF_INET;\n    address.sin_port = htons(port); // Convert from host to TCP network byte order.\n    inet_pton(PF_INET, serverIP, &amp;(address.sin_addr)); // Convert IP address to network byte order.\n\n    // Create a socket.  The socket signature is as follows: socket(int domain, int type, int protocol)\n    int sd = socket(AF_INET, SOCK_STREAM, 0);\n\n    int optval = 1;\n\n    if (setsockopt(sd, SOL_SOCKET, SO_REUSEADDR, &amp;optval, sizeof optval) == -1)\n    {\n        std::cout &lt;&lt; \"failed to set socket option\" &lt;&lt; std::endl;\n    }\n\n    // Set socket to be non-blocking.\n    int arg;\n    arg  = fcntl(sd, F_GETFL, NULL);\n    arg |= O_NONBLOCK;\n    fcntl(sd, F_SETFL, arg);\n\n    // Connect with time limit.\n    fd_set set;\n    FD_ZERO(&amp;set);    // Clear the set.\n    FD_SET(sd, &amp;set); // Add our file descriptor to the set.\n\n    struct timeval timeout;\n    timeout.tv_sec  = timeoutSec;\n    timeout.tv_usec = 0;\n\n    // If the connect call returns 0, then the connection was established.  Otherwise,\n    // check if the three-way handshake is underway.\n    if (::connect(sd, (struct sockaddr *)&amp;address, sizeof(address)) &lt; 0)\n    {\n        // If the handshake is underway.\n        if (errno == EINPROGRESS)\n        {\n            std::cout &lt;&lt; \"handshake in progress\" &lt;&lt; std::endl;\n\n            // Designate timeout period.\n            int ret = select(sd + 1, NULL, &amp;set, NULL, &amp;timeout);\n\n            std::cout &lt;&lt; \"return value from select : \" &lt;&lt; ret &lt;&lt; std::endl;\n\n            // Check if timeout or an error occurred.\n            if (ret &lt;= 0)\n            {\n                return NULL;\n            }\n            else\n            {\n                // Check if select returned 1 due to an error.\n                int valopt;\n                socklen_t len = sizeof(int);\n\n                getsockopt(sd, SOL_SOCKET, SO_ERROR, (void*)(&amp;valopt), &amp;len);\n\n                if (valopt)\n                {\n                    char * errorMessage = strerror( errno); // get string message from errn\n                    std::string msg (errorMessage);\n                    std::cout &lt;&lt; msg &lt;&lt; std::endl;\n\n\n                    return NULL;\n                }\n            }  \n        }\n        else\n        {\n            return NULL;\n        }\n    }\n\n    // Return socket to blocking mode\n    arg = fcntl(sd, F_GETFL, NULL);\n    arg &amp;= (~O_NONBLOCK);\n    fcntl(sd, F_SETFL, arg);\n\n    // Create stream object.\n    return new TCPStream(sd, &amp;address);\n}\n</code></pre>\n"}, {"tags": ["c++", "type-deduction"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1466024114, "post_id": 37845570, "comment_id": 63151439, "body": "There are no universal references. It was a terrible term, and the proper word is &#39;forwarding reference&#39;."}, {"owner": {"reputation": 1037, "user_id": 6189761, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2de4f154cf90c96d2f41002829aaebb?s=128&d=identicon&r=PG&f=1", "display_name": "Laith", "link": "https://stackoverflow.com/users/6189761/laith"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466024279, "post_id": 37845570, "comment_id": 63151547, "body": "I know URef and RRef are same"}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 6, "last_activity_date": 1466024224, "creation_date": 1466024224, "answer_id": 37845627, "question_id": 37845570, "link": "https://stackoverflow.com/questions/37845570/how-universal-references-get-deduced/37845627#37845627", "title": "How Universal References get deduced", "body": "<p>You forgot where you started from. The whole ideea was to see to what <code>auto</code> deduces to. It indeed deduces to <code>int</code>. And <code>v</code> is of type <code>auto&amp;&amp;</code>, i.e. <code>int&amp;&amp;</code></p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1466025069, "creation_date": 1466025069, "answer_id": 37845837, "question_id": 37845570, "link": "https://stackoverflow.com/questions/37845570/how-universal-references-get-deduced/37845837#37845837", "title": "How Universal References get deduced", "body": "<p>If <code>T</code> is a template parameter (or <code>auto</code>) and <code>T&amp;&amp;</code> is used to deduce <code>T</code>, then:</p>\n\n<ul>\n<li>If the argument is an rvalue (xvalue or prvalue) of type <code>U</code>, then <code>T</code> is deduced to simply <code>U</code> and <code>T&amp;&amp;</code> is <code>U&amp;&amp;</code>.</li>\n<li>If the argument is an lvalue of type <code>U</code>, then <code>T</code> is deduced to <code>U&amp;</code> and <code>T&amp;&amp;</code> is <code>U&amp;&amp;</code>.</li>\n</ul>\n\n<p>Your confusion probably stems from confusing the type of the template parameter, <code>T</code>, with the type of the deduced function argument, <code>T&amp;&amp;</code>.</p>\n\n<p>Note that since <code>T&amp;&amp;</code> always expands to a reference type, a forwarding reference is indeed a reference and never results in the expression being passed by value.</p>\n"}], "owner": {"reputation": 1037, "user_id": 6189761, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2de4f154cf90c96d2f41002829aaebb?s=128&d=identicon&r=PG&f=1", "display_name": "Laith", "link": "https://stackoverflow.com/users/6189761/laith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 37845627, "answer_count": 2, "score": 2, "last_activity_date": 1466025069, "creation_date": 1466023993, "last_edit_date": 1466024179, "question_id": 37845570, "link": "https://stackoverflow.com/questions/37845570/how-universal-references-get-deduced", "title": "How Universal References get deduced", "body": "<p>There is something about <code>Universal references</code> really confuses me, I know that</p>\n\n<pre><code>T&amp;&amp; + lvalue =&gt; T&amp;\nT&amp;&amp; + rvalue =&gt; T&amp;&amp;\n</code></pre>\n\n<p>Then I heard Scott Meyers says: there is \"special rule for universal references\" which is: </p>\n\n<pre><code>T&amp;&amp; + rvalue =&gt; T (NOT T&amp;&amp;)\n</code></pre>\n\n<p>So I did simple test thinking it would clear things up</p>\n\n<pre><code>int i = 32;\nauto&amp;&amp; v = std::move(i); // assigning xvalue\n\n// According to Scott: auto&amp;&amp; is URef\n// And according to the \"rule\" v should get deduced to T\n// VS2015 tells me this is int&amp;&amp; (NOT int)... huh???\n\nauto&amp;&amp; x = int(8); // assigning prvalue\n// same as above ... hmmm\n</code></pre>\n\n<p>So what am I missing here ... I really need to understand this...</p>\n\n<p>When <code>URef</code> get deduced to to <code>T&amp;&amp;</code> and when it get deduced to <code>T</code> ... I would appreciated examples to help clear things up ... thanks</p>\n\n<p>Note: I already searched SO I found related questions but didn't find specific answer to this question.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1466022069, "post_id": 37845013, "comment_id": 63150423, "body": "Doesn&#39;t &quot;serially&quot; mean &quot;one after the other&quot;?"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 5, "creation_date": 1466022149, "post_id": 37845013, "comment_id": 63150461, "body": "<code>std::move()</code> the threads into (and out of) the container."}, {"owner": {"reputation": 485, "user_id": 3461423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9eafca0617370a9cdc336b44c49dee?s=128&d=identicon&r=PG&f=1", "display_name": "alexeibs", "link": "https://stackoverflow.com/users/3461423/alexeibs"}, "edited": false, "score": 3, "creation_date": 1466022199, "post_id": 37845013, "comment_id": 63150492, "body": "Why can&#39;t you just one thread with a task queue?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 7, "creation_date": 1466022226, "post_id": 37845013, "comment_id": 63150507, "body": "You need to spend some time learning how Multithreading works, how c++11 threads work, and also some general information about c++; the code presented here suggests you don&#39;t currently have working knowledge sufficient to work with this kind of problem."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 6, "creation_date": 1466022228, "post_id": 37845013, "comment_id": 63150508, "body": "You should rather use a queue of functions and let one thread handle them all, one after the other."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466022501, "post_id": 37845013, "comment_id": 63150665, "body": "@juanchopanza I think what he meant is that he could run some processing serially (as in in one thread) but doesn&#39;t want to block the UI."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1466023012, "post_id": 37845013, "comment_id": 63150909, "body": "Also since you use separate mutexes for <code>add</code> and <code>remove</code> then your code is not thread safe (not to mention that without lock guards there&#39;s a deadlock possibility, at least in <code>remove</code> function)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1466023546, "post_id": 37845013, "comment_id": 63151148, "body": "@Chad That solves the problem technically, but not from the root."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466023955, "post_id": 37845013, "comment_id": 63151349, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I have not idea what you mean by <code>but not from the root</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1466024201, "post_id": 37845013, "comment_id": 63151497, "body": "@LokiAstari Obviously that design is flawed, at least quite odd."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466024379, "post_id": 37845013, "comment_id": 63151611, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 There is not enough info in the question to support that conclusion."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1466025048, "post_id": 37845013, "comment_id": 63151935, "body": "@LokiAstari Well, even with <code>std::move()</code> that design would suffer from efficient use of the available cores in parallel."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466025568, "post_id": 37845013, "comment_id": 63152174, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That depends on how fast threads are added and the size of the job. There is not enough information to determine the merits of the design."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1466025775, "post_id": 37845013, "comment_id": 63152271, "body": "@LokiAstari I was extending my answer with some more aspects ..."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 3461423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9eafca0617370a9cdc336b44c49dee?s=128&d=identicon&r=PG&f=1", "display_name": "alexeibs", "link": "https://stackoverflow.com/users/3461423/alexeibs"}, "edited": false, "score": 0, "creation_date": 1466023979, "post_id": 37845387, "comment_id": 63151364, "body": "A possible implementation can use a boost::asio::io_service class: <a href=\"http://stackoverflow.com/a/37829164/3461423\">stackoverflow.com/a/37829164/3461423</a>"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1466028741, "last_edit_date": 1495542163, "creation_date": 1466023317, "answer_id": 37845387, "question_id": 37845013, "link": "https://stackoverflow.com/questions/37845013/making-a-queue-of-threads-in-c/37845387#37845387", "title": "Making a queue of threads in C++", "body": "<blockquote>\n  <p>I know I could do them serially but the whole point is so the commands don't block the UI.  </p>\n  \n  <hr>\n  \n  <p>Is there another way I can do this?</p>\n</blockquote>\n\n<p>As it was already mentioned <code>std::thread</code> is a movable class type and you could use <code>std::move()</code> to transfer them in the queue.</p>\n\n<hr>\n\n<p>But I don't think it's a good design to use a queue of <code>std::thread</code> instances.</p>\n\n<p>Let's suppose you're placing a thread instance to that queue that utilizes a thread function, it will be started immediately. So then, what's the role of the queue here?<br>\nShould the thread pop itself from the queue as soon it was started? Who's going to <code>join()</code> it then?</p>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/questions/37845013/making-a-queue-of-threads-in-c#comment63150492_37845013\">@alexeibs suggests</a> you should have <strong>one</strong> thread, that executes UI background tasks (e.g. <code>std::function</code> objects) that are read from the queue.</p>\n\n<p>You could even have such task queue being shared by multiple threads (aka <a href=\"https://stackoverflow.com/questions/15752659/thread-pooling-in-c11\"><em>thread pool</em></a>), and maximize your available CPU cores' utilization (ideally you shouldn't have more active threads than CPU cores available).</p>\n\n<p>The synchronization (mutexes, condition variables for notifying etc.) should be applied to the queue itself then.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466026779, "post_id": 37845465, "comment_id": 63152731, "body": "Well, suppose the thread is running now after the <code>std::move()</code> applied. What&#39;s the role of the queue then? When should the thread instance be <code>pop()</code>ed from it?"}], "tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 2, "last_activity_date": 1466024492, "last_edit_date": 1466024492, "creation_date": 1466023615, "answer_id": 37845465, "question_id": 37845013, "link": "https://stackoverflow.com/questions/37845013/making-a-queue-of-threads-in-c/37845465#37845465", "title": "Making a queue of threads in C++", "body": "<p>You can move threads:</p>\n\n<p>So you can simply fix your code like this.</p>\n\n<pre><code>void add(std::thread&amp;&amp; thread) {\n          //        ^^   \n        mutex_add.lock();\n        threads.push(std::move(thread));\n          //         ^^^^^^^^^\n        mutex_add.unlock();\n    }\n</code></pre>\n\n<p>But saying that there are other ways to solve this that may be better.</p>\n\n<p>Rather than having a queue of threads that can be added and removed. Have an queue of jobs that are executed by a thread(s) owned by the object. Or you can simply use <code>std::async()</code> to start jobs in the background.</p>\n"}], "owner": {"reputation": 830, "user_id": 2038087, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d07c2adb620fa01aff60177c9ba769b8?s=128&d=identicon&r=PG", "display_name": "silverAndroid", "link": "https://stackoverflow.com/users/2038087/silverandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3726, "favorite_count": 1, "accepted_answer_id": 37845387, "answer_count": 2, "score": 0, "last_activity_date": 1466028848, "creation_date": 1466021990, "last_edit_date": 1466028848, "question_id": 37845013, "link": "https://stackoverflow.com/questions/37845013/making-a-queue-of-threads-in-c", "title": "Making a queue of threads in C++", "body": "<p>I'm trying to run threads one after the other. I know I could do them serially but the whole point is so the commands don't block the UI. </p>\n\n<p>However, in the implementation I came up with, I can't use <code>std::thread</code> because I can't pass threads as a parameter. </p>\n\n<p>Is there another way I can do this? </p>\n\n<hr>\n\n<p>This is my current implementation:</p>\n\n<pre><code>#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;queue&gt;\n\nclass ThreadQueue {\n    std::queue &lt;std::thread&gt; threads;\n    std::mutex mutex_add;\n    std::mutex mutex_remove;\n\npublic:\n   ThreadQueue() {}\n\n    ~ThreadQueue() {}\n\n    void add(std::thread thread) {\n        mutex_add.lock();\n        threads.push(thread);\n        mutex_add.unlock();\n    }\n\n    std::thread remove() {\n        mutex_remove.lock();\n        std::thread thread = threads.front;\n        threads.pop();\n        thread.join();\n        mutex_remove.unlock();\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "sparse-matrix", "ram", "armadillo"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5272967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1075461afe37f7ef7516a2f7ac8bfd9?s=128&d=identicon&r=PG", "display_name": "andywiecko", "link": "https://stackoverflow.com/users/5272967/andywiecko"}, "edited": false, "score": 0, "creation_date": 1466143501, "post_id": 37860791, "comment_id": 63204192, "body": "So if I my understanding is correct, constructor using COO format has RAM &quot;consumption&quot; to convert to CSC format, so if I  use constructor with CSC format I&#39;ll save RAM, because I won&#39;t be doing such conversion?"}], "tags": [], "owner": {"reputation": 819, "user_id": 2379385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Us2h.jpg?s=128&g=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/2379385/ryan"}, "is_accepted": true, "score": 2, "last_activity_date": 1466083867, "creation_date": 1466083867, "answer_id": 37860791, "question_id": 37844956, "link": "https://stackoverflow.com/questions/37844956/armadillo-efficient-ram-sparse-batch-insertion/37860791#37860791", "title": "Armadillo: efficient RAM sparse batch insertion", "body": "<p>The answer here will be to use the other sparse matrix constructor that takes the CSC format, so you will need to modify your <code>// calculate loc and val</code> code, instead filling the following three arrays:</p>\n\n<ul>\n<li><code>values</code> (length equal to number of points)</li>\n<li><code>row_indices</code> (length equal to number of points)</li>\n<li><code>col_ptrs</code> (length equal to number of columns plus one)</li>\n</ul>\n\n<p>The points should be arranged in column-major ordering in the <code>values</code> and <code>row_indices</code> vectors, and the <code>col_ptrs</code> vector contains the number of nonzero elements before the beginning of the column.  That is, <code>col_ptrs[0]</code> will always contain 0, <code>col_ptrs[1]</code> will contain the number of nonzero elements in the first column, <code>col_ptrs[2]</code> will contain the number of nonzero elements in the first and second columns, and <code>col_ptrs[n_cols + 1]</code> will contain the number of nonzero elements in the matrix.</p>\n\n<p>For more documentation on this constructor, see the \"Batch constructors\" section of <a href=\"http://arma.sourceforge.net/docs.html#SpMat\" rel=\"nofollow\">http://arma.sourceforge.net/docs.html#SpMat</a> ; this is the fourth entry in that list.</p>\n\n<p>If you cannot easily modify your calculation code to adhere to that format, then you might be better off trying to specify <code>sort_locations = false</code> to the constructor you are using, if you are not already doing that.</p>\n"}], "owner": {"reputation": 167, "user_id": 5272967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1075461afe37f7ef7516a2f7ac8bfd9?s=128&d=identicon&r=PG", "display_name": "andywiecko", "link": "https://stackoverflow.com/users/5272967/andywiecko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 37860791, "answer_count": 1, "score": 1, "last_activity_date": 1466083867, "creation_date": 1466021759, "question_id": 37844956, "link": "https://stackoverflow.com/questions/37844956/armadillo-efficient-ram-sparse-batch-insertion", "title": "Armadillo: efficient RAM sparse batch insertion", "body": "<p>I know that Sparse matrix in armadillo is still in preliminary support.\nI'm using armadillo lib in my quantum systems research and I have problem to construct sparse mat in  effective RAM way.</p>\n\n<p>So far I was using my own implementation of sparse matrixes, but I want to have an optimized matrix class.</p>\n\n<p>I'm filling elements in batch mode:</p>\n\n<pre><code>umat loc(2,size);\ncx_vec val(size);\n\n// calculate loc and val\n...\n//\n\nsp_cx_mat Hamiltonian(loc, val);\n</code></pre>\n\n<p>This kind of action copy values from loc,val to constructor of Hamiltonian and for some few seconds require 2x RAM. I calculate huge matrix (size is about 2**L, where L=22, 24, ...) so I wish I had well optimised code in memory.\nFor comparison, matrix size: 705432x705432 - RAM and \"filling time\":</p>\n\n<ul>\n<li><p>my implementation (COO format): time <code>7.95s</code>, memory  <code>317668kB</code></p></li>\n<li><p>armadillo (CSC format):  time <code>5.32s</code>, memory <code>715000kB</code></p></li>\n</ul>\n\n<p>Is it possible to deallocate fragments of vectors: <code>loc</code>, <code>val</code> on the fly to save memory, element by element?</p>\n"}, {"tags": ["c++", "c++11", "memory-management", "stl"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1466023440, "post_id": 37844940, "comment_id": 63151088, "body": "Weeks? I know code of mine has run for well over a year."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 4, "creation_date": 1466023912, "post_id": 37844940, "comment_id": 63151331, "body": "So that means even if you had a minor issue, it wouldn&#39;t matter because you in fact restart your server very often."}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1466031427, "post_id": 37844940, "comment_id": 63154258, "body": "@MSalters this is not the way how I develop software: hoping, any possible issue is <i>covered</i> by the periodic restart of the program. My intention is, the server runs for months. Therefore I want to clarify these points before I adapt the code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1466034891, "post_id": 37844940, "comment_id": 63155195, "body": "Millions of threads... at once?  That seems like a bad idea, naively."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1466040371, "post_id": 37844940, "comment_id": 63156382, "body": "Ah.  Then nearly zero thread reuse then (like task queues).  Each thread is a many-mb allocation."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1466023638, "post_id": 37845122, "comment_id": 63151197, "body": "Good point about the C stack being <i>bigger</i>. With GCC now supporting <a href=\"http://stackoverflow.com/questions/31228579/why-is-cow-stdstring-optimization-still-enabled-in-gcc-5-1\">Small String Optimization</a>, you will even get the best of both worlds: short strings on stack (no fragmentation issue), long strings on heap (keeps stack small). Not yet there for 4.9.3 unless you roll your own."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1466026085, "post_id": 37845122, "comment_id": 63152415, "body": "@MSalters gcc/libstdc++ also has <a href=\"http://stackoverflow.com/questions/10463851/what-is-gccs-vstring\"><code>vstring</code></a> if there&#39;s need for small string optimization."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466026874, "post_id": 37845122, "comment_id": 63152768, "body": "OP was asking whether he can be sure fragmentation won&#39;t <i>gradually increase</i> over time until he runs out of memory. And it&#39;s legitimate to have concerns about the standard library&#39;s memory allocator."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466027112, "post_id": 37845122, "comment_id": 63152858, "body": "@einpoklum: &quot;<i>And it&#39;s legitimate to have concerns about the standard library&#39;s memory allocator.</i>&quot; That doesn&#39;t change the facts that A) you don&#39;t have to use the standard library&#39;s allocator to use standard library containers, and B) those concerns are the result of relying on dynamic allocations, not of the standard library itself. You&#39;d have those same concerns if you use <code>new</code> directly or <code>make_unique</code> pointers. So it has nothing to do with the reliability of the standard library itself."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1466027224, "post_id": 37845122, "comment_id": 63152900, "body": "@einpoklum: &quot;<i>OP was asking whether he can be sure fragmentation won&#39;t gradually increase over time until he runs out of memory.</i>&quot; Fragmentation cannot cause you to run out of memory. It can only cause you to be unable to find sufficient contiguous free memory. Furthermore, there&#39;s no way to know, since it depends on the details of <i>exactly</i> what these millions of threads are doing. So that part of the question is effectively unanswerable."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 16, "last_activity_date": 1466088311, "last_edit_date": 1466088311, "creation_date": 1466022293, "answer_id": 37845122, "question_id": 37844940, "link": "https://stackoverflow.com/questions/37844940/is-stl-memory-management-reliable-for-a-long-running-program/37845122#37845122", "title": "Is STL memory management &quot;reliable&quot; for a long running program?", "body": "<blockquote>\n  <p>Can I completely safe rewrite my program to the new modern STL notation and get rid of the old C code?</p>\n</blockquote>\n\n<p>First, STL is not new; it dates back to well before C++ itself was standardized. Second, we call it the C++ standard library.</p>\n\n<p>Third, as long as your threads follow the requirements of C++ (ie: don't terminate in a way that C++ doesn't allow), and you don't leak memory, then yes, you'll be fine.</p>\n\n<blockquote>\n  <p>Is there any memory fragmentation when running for that long time in million of threads?</p>\n</blockquote>\n\n<p>You're going from objects living on the stack to dynamically allocating memory. <em>Of course</em> there is the possibility of memory fragmentation.</p>\n\n<p>That has absolutely nothing to do with C++ standard library containers. It's an outgrowth of using dynamic allocations.</p>\n\n<p>Equally importantly, you could just use <code>std::array&lt;char, ...&gt;</code> if you want to use a nicer, fixed-size stack array. Then again, <code>std::string</code> implementations with small string optimization offer a pretty good compromise in a lot of cases, forgoing allocating memory if the string is below some maximum size.</p>\n\n<blockquote>\n  <p>What about the performance? Using the old C code having the variables on stack does not have any performance impact.</p>\n</blockquote>\n\n<p>It made your stack longer, which given the 10 million threads, could have caused you to commit more pages of memory. Then again, maybe not.</p>\n\n<p>In any case, memory allocation is always an issue when it comes to a hyper-threaded application. Memory allocation, by its nature, has to be reentrant. That means mutex locking and so forth.</p>\n\n<p>You can devise atomic ways of allocating and deallocating memory, but that tends to require allocations of fixed sizes. And such things tend to have their own downsides. You could have thread-local memory pools that you allocate from. All of those require using your own memory allocators.</p>\n\n<p>But most importantly of all... these issues again have nothing to do with using C++ standard library types <em>specifically</em>. This is simply what happens when you go from static memory to dynamic allocations. Whether you're using <code>malloc/free</code> or standard library containers, the issue is with dynamic allocations.</p>\n"}, {"tags": [], "owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "is_accepted": true, "score": 1, "last_activity_date": 1481983649, "last_edit_date": 1481983649, "creation_date": 1467468339, "answer_id": 38161026, "question_id": 37844940, "link": "https://stackoverflow.com/questions/37844940/is-stl-memory-management-reliable-for-a-long-running-program/38161026#38161026", "title": "Is STL memory management &quot;reliable&quot; for a long running program?", "body": "<p>First, I am very grateful for all the comments and Nicol's answer. His last comment, regarding the fragmentation, hit the nail on the head.</p>\n\n<blockquote>\n  <p>1) The fragmentation depends on the details of <em>exactly</em> what these\n  millions of threads are doing.</p>\n</blockquote>\n\n<p>After analyzing deeply the project I realized there are millions of memory allocations and releases.</p>\n\n<p>Therefore I wrote my own STL Memory Allocator which:</p>\n\n<ol>\n<li>has an internal <code>unordered_map</code> to maintain all the pointers.</li>\n<li>is multi-thread safe.</li>\n<li>According to point 1. it reuses <em>freed</em> pointers which are marked as free.</li>\n<li>to <em>unload</em> the Controller the requested memory size [by STL] is aligned to 16 bytes size.</li>\n</ol>\n\n<p>My STL Memory Allocator loggs all requests and this is the summary [digest]:</p>\n\n<pre><code>Statistics:\n     Total allocated Memory: 813'041'344 bytes\n     Administrative Memory : 3'464'152 bytes\n     Available pointers    : 2'500\n+-------------------------------------------------------------------------+\n| Index | Aligned Memory Size | Max Used Pointers | Total Requested Count |\n+-------------------------------------------------------------------------+\n|      1|                   48|                296|             49'545'399|\n|      2|                   64|                469|             73'226'993|\n|      3|                   80|              1'167|             67'108'769|\n|      4|                   96|                129|             12'864'168|\n|      5|                  112|                281|              4'528'422|\n|      6|                  128|                 64|              8'715'454|\n|      7|                  144|                 74|              5'148'202|\n|     10|                  192|                387|              1'313'920|\n|     11|                  208|                 26|              1'311'779|\n|     13|                  272|                 56|             11'574'551|\n|     15|                  352|                368|              1'178'994|\n|     18|                  512|                262|              3'224'044|\n|     22|                  656|                  5|              2'586'081|        \n+-------------------------------------------------------------------------+\n</code></pre>\n\n<p><strong>Legend:</strong></p>\n\n<ul>\n<li><code>Aligned Memory Size</code>: Each requested block is aligned to 16 bytes + 32 bytes of maintaining data. E.q. allocating 1 bytes results in a memory block of real 48 bytes size.</li>\n<li><code>Max Used Pointers</code>: This is the amount how many memory blocks for this size has been used at the same time by all running threads. In other words, this memory [<code>Size * Max Used Pointers</code>] was physically allocated from the OS.</li>\n<li><code>Total Requested Count</code>: This count is increased each time an allocation [for the aligned size] is requested.</li>\n</ul>\n\n<p>For me this means I can save definitely millions of allocations and releases and I don't know how the fragmentation would look like with the default STL allocator.</p>\n\n<hr>\n\n<blockquote>\n  <p>2) I could get rid of the old C style code and I can use the more\n  convenient STL containers.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>3) The performance is <em>OK</em>. For me it means my Allocator is not the\n  fastest one but considering it is totally multi-thread safe and\n  serving thousands requests per second it suffices totally for my\n  needs.</p>\n</blockquote>\n\n<hr>\n\n<p>So, the answer is, that [in fairness] I still don't know how reliable the default STL Memory Allocator is, but due to the mentioned facts I got - <strong>at least</strong> - a clue what is internally going on.</p>\n\n<p>Supposing my Allocator is bug free [which I can expect after running for a long time and serving millions of requests] I can close this case for me.</p>\n"}], "owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 1, "accepted_answer_id": 38161026, "answer_count": 2, "score": 3, "last_activity_date": 1481983649, "creation_date": 1466021714, "last_edit_date": 1466087985, "question_id": 37844940, "link": "https://stackoverflow.com/questions/37844940/is-stl-memory-management-reliable-for-a-long-running-program", "title": "Is STL memory management &quot;reliable&quot; for a long running program?", "body": "<p>I read lot of SO posts regarding memory management in C++11 STL but I could not really find a satisfying answer.</p>\n\n<p><strong>My situation:</strong> I develop a <em>long running</em> server [it runs around 4-6 weeks]. For the moment I use lot of <em>old</em> C code <code>char [x][y]</code> or <code>char [z]</code> variables located on the stack.</p>\n\n<p>I have my <em>doubt</em> if the STL memory management is still <em>reliable</em> using it extensively in a program which is running for weeks and serving in t\u0332h\u0332i\u0332s\u0332 period more than 10 million threads and each thread would have lot of STL operations.</p>\n\n<p>To be more specific: I want to rewrite all fix sized variables located on stack to <code>std::vector&lt;std::string&gt;</code> or <code>std::string</code> type.</p>\n\n<p><strong>My questions:</strong></p>\n\n<ol>\n<li>Can I completely safe rewrite my program to the new modern STL notation and get rid of the old C code?</li>\n<li>Is there any <em>memory fragmentation</em> when running for that long time in million of threads?</li>\n<li>What about the performance? Using the old C code having the variables on stack does not have any performance impact.</li>\n</ol>\n\n<p>Compiler is <code>gcc 4.9.3</code></p>\n"}, {"tags": ["c++", "debugging", "windows-7", "crash", "crash-reports"], "comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1466021871, "post_id": 37844823, "comment_id": 63150325, "body": "The link you provide tells you what you need to know."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1466023863, "post_id": 37844823, "comment_id": 63151305, "body": "@CrazyEddie I only have numbers, I don&#39;t how it shows text as well in additional information. I don&#39;t see what I can do from there."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1466024382, "post_id": 37844823, "comment_id": 63151612, "body": "Hmm...that&#39;s unfortunate because it spells out in detail how to get the information you need."}, {"owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "edited": false, "score": 0, "creation_date": 1466740793, "post_id": 37844823, "comment_id": 63454401, "body": "does it work? Were you able to generate dumps and analyze them in windbg?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1466021794, "creation_date": 1466021794, "answer_id": 37844966, "question_id": 37844823, "link": "https://stackoverflow.com/questions/37844823/can-i-get-to-source-code-from-crash-signature-windows-crash-report/37844966#37844966", "title": "Can I get to source code from Crash Signature (windows crash report)", "body": "<p>I'm guessing that what you want is a minidump (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680369(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms680369(v=vs.85).aspx</a>). That would likely provide you the info you want.</p>\n"}, {"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1466767592, "post_id": 37904768, "comment_id": 63466953, "body": "Thanks I was able to generate the dump file but only via task manager. I don&#39;t have any registry entries so I guess defaults should work? It does generate dump file for a simple demp app automatically but doesn&#39;t for the real application. Don&#39;t know why that is. I haven&#39;t tried your reg file but does it really need to be filled? The default values of registry wouldn&#39;t work?"}, {"owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 1, "creation_date": 1466779431, "post_id": 37904768, "comment_id": 63474262, "body": "for me it works. Some AV suites block access. You can configure the values on your own with regedit.exe. you can also use procdump t register it as post mortem debugger: <b>procdump -ma -i C:\\localdumps</b>"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1466788607, "post_id": 37904768, "comment_id": 63479459, "body": "Thanks it turn out it was created but not in default folder but elsewhere because of previous configuration. I am following up on analysis to make pdf files work."}, {"owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1472367043, "post_id": 37904768, "comment_id": 65718258, "body": "is your question now answered? Do you need to know more?"}], "tags": [], "owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "is_accepted": false, "score": 0, "last_activity_date": 1466319850, "creation_date": 1466319850, "answer_id": 37904768, "question_id": 37844823, "link": "https://stackoverflow.com/questions/37844823/can-i-get-to-source-code-from-crash-signature-windows-crash-report/37904768#37904768", "title": "Can I get to source code from Crash Signature (windows crash report)", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/bb513638(VS.85).aspx\" rel=\"nofollow\">Configure the Windows Error Reporting (WER)</a> to generate a dumps (works since <code>Windows Server 2008 RTM/Vista Sp1</code>). This sample .reg file configures Windows to create full memory dumps of all app crashes and stores them into <code>C:\\localdumps</code>:</p>\n\n<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting\\LocalDumps]\n\"DumpFolder\"=hex(2):43,00,3a,00,5c,00,4c,00,6f,00,63,00,61,00,6c,00,44,00,75,\\\n  00,6d,00,70,00,73,00,00,00\n\"DumpType\"=dword:00000002\n</code></pre>\n\n<p>If you only want to get dumps of your app, import this .reg file:</p>\n\n<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting\\LocalDumps\\MyAPP.exe]\n\"DumpFolder\"=hex(2):43,00,3a,00,5c,00,4c,00,6f,00,63,00,61,00,6c,00,44,00,75,\\\n  00,6d,00,70,00,73,00,00,00\n\"DumpType\"=dword:00000002\n</code></pre>\n\n<p>Change the MyAPP.exe to your real application name.</p>\n\n<p>Now open the dmp in Windbg, configure the <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff552208(v=vs.85).aspx\" rel=\"nofollow\">Microsoft symbols server  access in Windbg</a> and also add your private PDBs to the symbol search path. Now run <code>.srcfix; !analyze -v</code> and look what Windbg tells you where you application crashed.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466319850, "creation_date": 1466021344, "question_id": 37844823, "link": "https://stackoverflow.com/questions/37844823/can-i-get-to-source-code-from-crash-signature-windows-crash-report", "title": "Can I get to source code from Crash Signature (windows crash report)", "body": "<p>By crash Signature I mean 'Problem Signature' but stackoverflow doesn't allow 'problem' word in title.</p>\n\n<p>My applications crashes randomly which results in a typical Windows 7 crash dialog. You press the show problem details button and it shows 'problem signature' which looks something like this:</p>\n\n<pre><code>Problem signature:\n  Problem Event Name:       APPCRASH\n  Application Name:         MyAPP.exe\n  Application Version:      1.0.0.1\n  Application Timestamp:    56f42d87\n  Fault Module Name:        KERNELBASE.dll\n  Fault Module Version:     6.1.7601.23392\n  Fault Module Timestamp:   524f83ff\n  Exception Code:           e06d7363\n  Exception Offset:         000084d5\n  OS Version:               6.1.7600.2.1.0.256.48\n  Locale ID:                1033\n  Additional Information 1: 59d3\n  Additional Information 2: 59d2b19b48819489f0f177fd879bb2a4\n  Additional Information 3: 4230\n  Additional Information 4: 4230b7cc692f7b01f72cd61a9ca3153f\n</code></pre>\n\n<p>I see <a href=\"https://blogs.msdn.microsoft.com/oanapl/2009/01/30/windows-error-reporting-and-clr-integration/\" rel=\"nofollow\">here</a> what it means but can I use this information to get to the source code and preferably the line number which is causing the crash?</p>\n"}, {"tags": ["c++", "c++11", "random", "stl", "c++14"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1466021571, "post_id": 37844808, "comment_id": 63150166, "body": "TL;DR; Seed only once."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466021602, "post_id": 37844808, "comment_id": 63150186, "body": "I don&#39;t see where you seed your generator (I may have missed something) - if you don&#39;t seed you&#39;ll always get the same sequence."}, {"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466021858, "post_id": 37844808, "comment_id": 63150315, "body": "@JesperJuhl Do I have to seed it? I&#39;m using random library and I want different output for every call of generate_random_individual. It seems that this lampda function uses the same generators because it takes those via lampda call, so it should return different random values (see the two calls: std::cout &lt;&lt; std::get&lt;0&gt;(generators)() &lt;&lt; std::endl; and than the 4 calls at the very end of post)."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1466021977, "post_id": 37844808, "comment_id": 63150379, "body": "You need to work on creating <b>minimal</b> examples."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1466022017, "post_id": 37844808, "comment_id": 63150402, "body": "Yes, you have to seed them or each invokation of the program will have same values. Also you need to reuse generators and do not recreate them, as it would reset random sequence again."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466022038, "post_id": 37844808, "comment_id": 63150411, "body": "Yes. You always have to seed your generator."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1466021874, "post_id": 37844960, "comment_id": 63150328, "body": "<i>&quot;You might want to look at what the boost random classes offer&quot;</i> Nothing superior to the current standard IMO."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1466021911, "post_id": 37844960, "comment_id": 63150345, "body": "Yes. Don&#39;t re-generate generators. Re-use them (and seed them properly - once)."}, {"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "edited": false, "score": 0, "creation_date": 1466022026, "post_id": 37844960, "comment_id": 63150405, "body": "I really re-generate generators? Where do I do so if you could point it out for me?"}, {"owner": {"reputation": 15441, "user_id": 248123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea22838ed5987c80d1a77245f6acabe4?s=128&d=identicon&r=PG", "display_name": "andand", "link": "https://stackoverflow.com/users/248123/andand"}, "edited": false, "score": 0, "creation_date": 1466022139, "post_id": 37844960, "comment_id": 63150457, "body": "Everyplace you call the constructor Generator() you are creating a new generator.  You should be passing a generator as reference, not calling the constructor."}, {"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "edited": false, "score": 0, "creation_date": 1466022717, "post_id": 37844960, "comment_id": 63150760, "body": "@andand I use Generator() only when creating generators variable. Afterwise I use each generator with overloaded () in lampda function generate_random_individual..."}], "tags": [], "owner": {"reputation": 15441, "user_id": 248123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea22838ed5987c80d1a77245f6acabe4?s=128&d=identicon&r=PG", "display_name": "andand", "link": "https://stackoverflow.com/users/248123/andand"}, "is_accepted": false, "score": 4, "last_activity_date": 1466021775, "creation_date": 1466021775, "answer_id": 37844960, "question_id": 37844808, "link": "https://stackoverflow.com/questions/37844808/c-stl-random-number-generation-returning-the-same-number/37844960#37844960", "title": "C++ STL random number generation returning the same number", "body": "<p>You are creating new generators every time you want to use a random number.  I don't know how the seed is generated for these generators, but it's clearly using the same seed for each generator instance you create.  What you should instead be doing is creating a single generator all of your distributions use.</p>\n\n<p>You might want to look at what the boost random classes offer, and examine some samples there.</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "is_accepted": false, "score": 2, "last_activity_date": 1466024129, "creation_date": 1466024129, "answer_id": 37845611, "question_id": 37844808, "link": "https://stackoverflow.com/questions/37844808/c-stl-random-number-generation-returning-the-same-number/37845611#37845611", "title": "C++ STL random number generation returning the same number", "body": "<p>Problem solved - I forgot to add &amp; when passing in one of my functions, namely here:</p>\n\n<pre><code>auto genotype=std::experimental::apply(\n                    [&amp;](auto&amp;... x){ //THIS LINE!\n                        return std::make_tuple(x()...);\n                    },\n                    gen\n            );\n</code></pre>\n\n<p>As a result it was copying the generators as most of you said, thanks for input.</p>\n"}], "owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466024255, "creation_date": 1466021274, "last_edit_date": 1466024255, "question_id": 37844808, "link": "https://stackoverflow.com/questions/37844808/c-stl-random-number-generation-returning-the-same-number", "title": "C++ STL random number generation returning the same number", "body": "<p>I haven't found similiar question so I apologize if it's already been asked. Anyway, here is my function:</p>\n\n<pre><code>#ifndef OPTIMALIZATION_HPP\n#define OPTIMALIZATION_HPP\n\n#include&lt;utility&gt;\n#include&lt;random&gt;\n#include&lt;experimental/random&gt;\n#include&lt;functional&gt;\n#include&lt;experimental/functional&gt;\n#include&lt;experimental/tuple&gt;\n#include&lt;algorithm&gt;\n#include&lt;type_traits&gt;\n#include&lt;iostream&gt;\n\nnamespace numerics{\n    template&lt;\n        std::size_t population_size, std::size_t generations,\n        typename Func,\n        typename Compare,\n        typename Generator=std::default_random_engine,\n        template&lt;typename&gt;\n            typename RealDistribution=std::uniform_real_distribution,\n        template&lt;typename&gt;\n            typename IntegerDistribution=std::uniform_int_distribution,\n        typename ...Ts\n    &gt;\n    auto optimize(\n            const Func&amp; function, const Compare&amp; comp,\n            const std::pair&lt;Ts,Ts&gt;&amp;... ranges\n    ){\n\n        constexpr std::size_t range_argument_count=sizeof...(ranges);\n        static_assert(range_argument_count&gt;2,\n                \"Function needs at least two range arguments\"\n        );\n\n        //RANDOM NUMBER GENERATORS LAMPDA FUNCTIONS\n        auto real_random_generator=[&amp;](const std::pair&lt;auto,auto&gt; range){\n            return std::bind(\n                    RealDistribution&lt;decltype(range.first)&gt;(range.first,range.second),\n                    Generator()\n            );\n        };\n\n        auto integer_random_generator=[&amp;](const std::pair&lt;auto,auto&gt;&amp; range){\n            return std::bind(\n                    IntegerDistribution&lt;decltype(range.first)&gt;(range.first,range.second),\n                    Generator()\n            );\n        };\n\n        //MAKING TUPLE OF GENERATORS FOR SPECIFIC RANGES ARGUMENTS\n        auto generator_objects=std::make_tuple(\n                integer_random_generator,\n                real_random_generator\n        );\n        auto generators=std::make_tuple(\n                std::get&lt;std::is_floating_point&lt;decltype(ranges.first)&gt;::value&gt; //UPDATE FOR C++17\n                (generator_objects)(ranges)...\n        );\n        //RANDOMIZES NUMBERS FINE!\n        std::cout &lt;&lt; std::get&lt;0&gt;(generators)() &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::get&lt;0&gt;(generators)() &lt;&lt; std::endl;\n\n        //SINGLE RANDOM INDIVIDUAL GENERATOR\n        auto generate_random_individual=[&amp;](const auto&amp; gen){\n            auto genotype=std::experimental::apply(\n                    [&amp;](auto... x){\n                        return std::make_tuple(x()...);\n                    },\n                    gen\n            );\n            return std::make_pair(\n                    std::experimental::apply(function,genotype),\n                    genotype\n            );\n        };\n        //RETURN THE SAME NUMBER!\n        auto foo=generate_random_individual(generators);\n        auto foo2=generate_random_individual(generators);\n        auto foo3=generate_random_individual(generators);\n        auto foo4=generate_random_individual(generators);\n        std::cout &lt;&lt; std::get&lt;0&gt;(foo.second) &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::get&lt;0&gt;(foo2.second) &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::get&lt;0&gt;(foo3.second) &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::get&lt;0&gt;(foo4.second) &lt;&lt; std::endl;\n        return 1.;\n}}\n#endif\n</code></pre>\n\n<p>The most interesting part is where I randomize via function call from one of generators and it works fine (line:  //RANDOMIZES NUMBERS FINE!)\nWhen I do it in function generate_random_individual (using few generator objects with specific ranges) via the very same function call on the very same object sets (so I'm not making new generators) it returns the same numbers in the last couts.</p>\n\n<p>I can provide test cases if anybody wants it, I wasn't sure if I should include those. </p>\n\n<p>EDIT: I'm leaving this as an example, see my answer if you want to know where exactly the bug was, thanks for help.</p>\n"}, {"tags": ["c++", "gcc", "types"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466021317, "post_id": 37844752, "comment_id": 63150044, "body": "If <code>func</code> requires an <code>int</code> why are you passing an <code>int*</code>?"}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466021417, "post_id": 37844752, "comment_id": 63150098, "body": "This was an error in code which I saw today - probably this was a typo."}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 2, "creation_date": 1466022016, "post_id": 37844752, "comment_id": 63150400, "body": "A similar statement gives <a href=\"http://cdecl.ridiculousfish.com/?q=void+%28%2Af%28int%2A%29%29%28int%29\" rel=\"nofollow noreferrer\">this according to cdecl</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1466022357, "post_id": 37844752, "comment_id": 63150576, "body": "<a href=\"http://www.codeproject.com/Articles/7042/How-to-interpret-complex-C-C-declarations\" rel=\"nofollow noreferrer\">How to interpret complex C/C++ declarations</a>"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1466022720, "post_id": 37844752, "comment_id": 63150763, "body": "At first I though that the compiler refused to accept this declaration - is my assumption right? Can you maybe give us the full error message gcc printed for clarity?"}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1466023328, "post_id": 37844752, "comment_id": 63151042, "body": "Error message was confusing - most important part was &quot;error: no type named \u2018type\u2019 in \u2018class std::result_of&lt;void (<i>(int</i>))(int)&gt;\u2019&quot;. So this is completely different from usual &quot;invalid conversion from X to Y&quot; or &quot;no matching function for call to X()&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1466022720, "post_id": 37845022, "comment_id": 63150762, "body": "Thanks, I see it now. I started decoding from wrong point and got confused."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1466022854, "post_id": 37845022, "comment_id": 63150828, "body": "Yes, that&#39;s what it would be in the real world. But that&#39;s <b>not</b> what it means when it&#39;s the argument type for <code>std::result_of</code>, which hijacks this notation to represent a callable type and its argument list."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1466024719, "post_id": 37845022, "comment_id": 63151787, "body": "@PeteBecker I thought that OP was confused about that declaration. I never heard of <code>std::result_of</code> (because I&#39;ve learned C++ after C++11 came out, so I&#39;m using just <code>decltype</code> and new features), thanks for your explanation of it. I&#39;ll edit my answer."}], "tags": [], "owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "is_accepted": true, "score": 5, "last_activity_date": 1466025012, "last_edit_date": 1495541308, "creation_date": 1466022023, "answer_id": 37845022, "question_id": 37844752, "link": "https://stackoverflow.com/questions/37844752/how-to-interpret-this-c-type/37845022#37845022", "title": "How to interpret this C++ type?", "body": "<pre><code>void (*(int*))(int)\n</code></pre>\n\n<p>Is:</p>\n\n<p>a function that takes a single parameter of type <code>int*</code> as returns </p>\n\n<p>a pointer to a function that takes a single parameter of type <code>int</code> and returns </p>\n\n<p><code>void</code></p>\n\n<hr>\n\n<p>It is similar to the C/C++ standard library function <a href=\"http://www.cplusplus.com/reference/csignal/signal/\" rel=\"nofollow noreferrer\">signal</a>:</p>\n\n<pre><code>void (*signal(int sig, void (*func)(int)))(int);\n</code></pre>\n\n<p>which returns a pointer to a previous signal handler (which is of the same type as the <code>func</code> parameter).</p>\n\n<p>EDIT: As <a href=\"https://stackoverflow.com/questions/37844752/how-to-interpret-this-c-type/37845022?noredirect=1#comment63150828_37845022\">Pete Becker pointed out in comment</a>, when used with <code>std::result_of</code>, it <a href=\"https://stackoverflow.com/a/37845242/4932834\">means something different</a>, but type of expression itself is still the type I described, <code>std::result_of</code> just interprets it differently.</p>\n"}, {"comments": [{"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1466023470, "post_id": 37845242, "comment_id": 63151106, "body": "Yes, that was confusing at beginning. Thanks for explanation."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 7, "last_activity_date": 1466022762, "creation_date": 1466022762, "answer_id": 37845242, "question_id": 37844752, "link": "https://stackoverflow.com/questions/37844752/how-to-interpret-this-c-type/37845242#37845242", "title": "How to interpret this C++ type?", "body": "<p>This isn't as simple as it looks.  <code>std::result_of</code> abuses the type system to smuggle in information about a function call so that it can figure out what the return type of that function call would be.</p>\n\n<p>The argument to <code>std::result_of</code> has the form <code>Fty(T1, T2, ...)</code>, where <code>Fty</code> is a callable type and <code>T1</code> etc. are the types of the arguments that it is being called with. Given that information, <code>std::result_of</code> has a nested type named <code>type</code> that is a synonym for the return type of calling a callable type with the signature <code>Fty</code> with arguments of the given types. Phew, that's a mouthful.</p>\n\n<p>So, in <code>result_of&lt;void (*(int*))(int)&gt;</code> there are two parts to the template argument. The first part is <code>void (*(int*))</code>, which is the callable type in question. In this case it's a pointer to function that takes <code>int*</code> and returns <code>void</code>. The second part is <code>(int)</code>, which is the type list for the proposed arguments.</p>\n\n<p>So what that is saying is that <code>std::result_of</code> is being instantiated with a function whose type is <code>void (*(int*))</code> and with an argument list of <code>(int)</code>. And that's the problem, as you indicated: you can't pass an argument of type <code>int</code> to a function that takes an argument of type <code>int*</code>.</p>\n\n<p>Aren't you glad you asked? (Incidentally, this is pretty low-level template hackery that's not needed any more; <code>decltype</code> is a much cleaner way to figure out the return type of a function call).</p>\n"}], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 1, "accepted_answer_id": 37845022, "answer_count": 2, "score": 6, "last_activity_date": 1466025012, "creation_date": 1466021120, "last_edit_date": 1466021992, "question_id": 37844752, "link": "https://stackoverflow.com/questions/37844752/how-to-interpret-this-c-type", "title": "How to interpret this C++ type?", "body": "<p>Today I was helping with following incorrect code piece (<code>func</code> was declared with <code>int</code> param, but <code>int*</code> was passed as second param to <code>std::thread</code> constructor):</p>\n\n<pre><code>#include &lt;thread&gt;\n\nvoid func(int);\nint* ptr;\n\nvoid start()\n{\n    std::thread t = std::thread(func, ptr);\n}\n</code></pre>\n\n<p>When I tried to compile this with gcc 5.3.0, it printed error message with following type:</p>\n\n<pre><code>class std::result_of&lt;void (*(int*))(int)&gt;\n</code></pre>\n\n<p>Now I wonder how to interpret type passed as parameter to <code>class std::result_of&lt;&gt;</code>. It is similar to pointer to function (in this case <code>void(*)(int)</code>), but with extra <code>(int*)</code> after star in brackets. How to interpret this type?</p>\n"}, {"tags": ["c++", "c++11", "hash"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1466020374, "post_id": 37844507, "comment_id": 63149552, "body": "Lowest bits are preserved by default."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1466020677, "post_id": 37844507, "comment_id": 63149714, "body": "What are the desired properties of the hash? <code>foo %</code> <a href=\"https://en.wikipedia.org/wiki/2147483647_(number)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/2147483647_(number)</a>  springs to mind."}, {"owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "edited": false, "score": 0, "creation_date": 1466020752, "post_id": 37844507, "comment_id": 63149754, "body": "Thanks! I just edited the post, though. I actually want to use hashing to prevent overflow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 4, "creation_date": 1466020763, "post_id": 37844507, "comment_id": 63149762, "body": "It sounds like you have an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>...."}, {"owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1466020789, "post_id": 37844507, "comment_id": 63149773, "body": "@CaptainGiraffe I want to use this to seed std::default_random_engine, and I don&#39;t want the seed values to repeat."}, {"owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "edited": false, "score": 0, "creation_date": 1466020874, "post_id": 37844507, "comment_id": 63149813, "body": "@Hurkyl Whoops. Yeah, I guess I did fall right into that one."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 6, "last_activity_date": 1466020904, "creation_date": 1466020904, "answer_id": 37844696, "question_id": 37844507, "link": "https://stackoverflow.com/questions/37844507/conversion-from-unsigned-long-long-to-unsigned-int-in-c/37844696#37844696", "title": "Conversion from unsigned long long to unsigned int in C++", "body": "<p>Arithmetic with unsigned integral types in C and in C++ deals with out of range values by modular reduction; e.g. if <code>unsigned int</code> is a 32 bit type, then when assigned a value out of range, it reduces the value modulo <code>2^32</code> and stores the least nonnegative representative.</p>\n\n<p>In particular, that is exactly what the standard mandates when assigning from a larger to a smaller unsigned integral type.</p>\n\n<p>Note also that the standard doesn't guarantee the size of <code>unsigned int</code> &mdash; if you need, for example, a type that is definitely exactly 32 bits wide, use <code>uint32_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "edited": false, "score": 0, "creation_date": 1466024141, "post_id": 37845005, "comment_id": 63151452, "body": "This is pretty nice. Unfortunately, I am doing this inside a class constructor and do not have access to the starting time (unless I pass it in to the constructor, which I do not want to do)."}, {"owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "reply_to_user": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "edited": false, "score": 0, "creation_date": 1466029239, "post_id": 37845005, "comment_id": 63153611, "body": "That&#39;s not a problem, just get the time at the start of the ctor. It doesn&#39;t have to be the beginning of the app, just some point before your for loop and in scope."}], "tags": [], "owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1466021966, "creation_date": 1466021966, "answer_id": 37845005, "question_id": 37844507, "link": "https://stackoverflow.com/questions/37844507/conversion-from-unsigned-long-long-to-unsigned-int-in-c/37845005#37845005", "title": "Conversion from unsigned long long to unsigned int in C++", "body": "<p>Replying to the question in edit two, you can seed based on the delta between when you started and when the seed is needed. E.g.:</p>\n\n<pre><code>std::default_random_engine generator;\ntypedef std::chrono::high_resolution_clock myclock;\nmyclock::time_point beginning = myclock::now();\nfor (int i = 0; i &lt; 128; i++) // or whatever type of loop you're using\n{\n    // obtain a seed from the timer\n    myclock::duration d = myclock::now() - beginning;\n    unsigned seed = d.count();\n    generator.seed(seed);\n    // TODO: magic\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 2, "last_activity_date": 1466022374, "creation_date": 1466022374, "answer_id": 37845145, "question_id": 37844507, "link": "https://stackoverflow.com/questions/37844507/conversion-from-unsigned-long-long-to-unsigned-int-in-c/37845145#37845145", "title": "Conversion from unsigned long long to unsigned int in C++", "body": "<p>Good news you're safe:</p>\n\n<ol>\n<li>I just ran <code>time.time_since_epoch().count()</code> and got:</li>\n</ol>\n\n<blockquote>\n  <p>1,465,934,400</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>You've got a while till you have till you see a repeat value since `numeric_limits is:</li>\n</ol>\n\n<blockquote>\n  <p>4,294,967,295</p>\n</blockquote>\n\n<ol start=\"3\">\n<li><a href=\"https://en.wikipedia.org/wiki/Type_conversion#C-like_languages\" rel=\"nofollow\">Copying to a integral type of a smaller size</a>:</li>\n</ol>\n\n<blockquote>\n  <p>Causes dropping of excess higher order bits</p>\n</blockquote>\n\n<p>So if you just do <code>static_cast&lt;unsigned int&gt;(foo)</code> you won't get a matching output for roughly 136 years: <code>numeric_limits&lt;unsigned int&gt;::max / 60U / 60U / 24U / 356U</code></p>\n\n<p>PS You won't care if you get a repeat by then.</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1466074530, "post_id": 37845589, "comment_id": 63171936, "body": "As is mentioned in <a href=\"http://stackoverflow.com/a/37845145/2642059\">my answer</a> You needn&#39;t worry about seeds repeating. that only happens every 139 years. And it is already linear (the best way to avoid repetition.) It&#39;s interesting but, because your hash will not have a deterministic pattern you have actually <i>increased</i> the likelihood of finding a duplicate :("}], "tags": [], "owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "is_accepted": false, "score": 1, "last_activity_date": 1466024055, "creation_date": 1466024055, "answer_id": 37845589, "question_id": 37844507, "link": "https://stackoverflow.com/questions/37844507/conversion-from-unsigned-long-long-to-unsigned-int-in-c/37845589#37845589", "title": "Conversion from unsigned long long to unsigned int in C++", "body": "<p>Okay, I've settled on using <code>std::hash</code>.</p>\n\n<pre><code>std::hash&lt;long long&gt; seeder;\nauto seed = seeder(time.time_since_epoch().count());\n</code></pre>\n\n<p>Since I am doing this in an initializer list, this can be put together in one line and passed to <code>std::default_random_engine</code> (but that looks pretty ugly).</p>\n\n<p>This is quit a hit to performance, but at least it reduces the chance of seeds repeating.</p>\n"}], "owner": {"reputation": 327, "user_id": 2880811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4R1ZT.png?s=128&g=1", "display_name": "5nefarious", "link": "https://stackoverflow.com/users/2880811/5nefarious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 0, "accepted_answer_id": 37845145, "answer_count": 4, "score": 2, "last_activity_date": 1466024055, "creation_date": 1466020198, "last_edit_date": 1466021256, "question_id": 37844507, "link": "https://stackoverflow.com/questions/37844507/conversion-from-unsigned-long-long-to-unsigned-int-in-c", "title": "Conversion from unsigned long long to unsigned int in C++", "body": "<p>If I write the following code in C/C++:</p>\n\n<pre><code>using namespace std::chrono;\nauto time = high_resolution_clock::now();\nunsigned long long foo = time.time_since_epoch().count();\nunsigned bar = foo;\n</code></pre>\n\n<p>Which bits of foo are dropped in the conversion to unsigned int? Is there any way I can enforce only the least significant bits to be preserved?</p>\n\n<p>Alternatively, is there a simple way to hash foo into an unsigned int size? (This would be preferred, but I'm doing all of this in an initializer list.)</p>\n\n<p>EDIT:  Just realized that preserving the least significant bits could still allow looping. I gues hashing is what I'd be going for then.</p>\n\n<p>2nd EDIT:  To clarify what I responded in a comment, I am seeding std::default_random_engine inside a loop and do not want an overflow to cause seed values to repeat. I am looking for a simple way to hash unsigned long long into unsigned int.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1466020175, "post_id": 37844474, "comment_id": 63149442, "body": "What is wrong with <a href=\"http://en.cppreference.com/w/cpp/algorithm/max\" rel=\"nofollow noreferrer\"><code>std::max</code></a>?  It is <code>constexpr</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1466020189, "post_id": 37844474, "comment_id": 63149453, "body": "Since c++14 you can use <code>std::max</code>"}, {"owner": {"reputation": 10557, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "edited": false, "score": 1, "creation_date": 1466020233, "post_id": 37844474, "comment_id": 63149479, "body": "Looks like boost does provide [something along these lines|<a href=\"http://www.boost.org/doc/libs/1_42_0/libs/integer/doc/html/boost_integer/minmax.html]\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_42_0/libs/integer/doc/html/boost_&zwnj;&#8203;integer/&hellip;</a>"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1466020820, "post_id": 37844474, "comment_id": 63149787, "body": "You can use <code>std::underlying_type</code> (C++11) to safely cast your enum type to a numeric type and compare that."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 6, "last_activity_date": 1466020620, "creation_date": 1466020620, "answer_id": 37844620, "question_id": 37844474, "link": "https://stackoverflow.com/questions/37844474/a-stdmax-but-for-template-parameters/37844620#37844620", "title": "A std::max, but for template parameters", "body": "<p>In C++14 you should just use <code>std::max</code>. If, however, C++14 is off-limits, following simple code should help:</p>\n\n<pre><code>template&lt;enum_t A, enum_t B&gt; \nstruct max_of {\n    enum { value = A &gt; B ? A : B};\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 3, "last_activity_date": 1466020752, "creation_date": 1466020752, "answer_id": 37844661, "question_id": 37844474, "link": "https://stackoverflow.com/questions/37844474/a-stdmax-but-for-template-parameters/37844661#37844661", "title": "A std::max, but for template parameters", "body": "<p>You have two solutions. You can use a simple comparison and using the ternary operator to select the biggest value, or you can use <code>std::max</code>, which will work for c++14 and up.</p>\n\n<p><code>std::max</code> solution</p>\n\n<pre><code>template&lt;enum_t e1, enum_t e2&gt;\nstruct max_of {\n    static constexpr auto value = std::max(e1, e2);\n};\n</code></pre>\n\n<p>manual solution:</p>\n\n<pre><code>template&lt;enum_t e1, enum_t e2&gt;\nstruct max_of {\n    static constexpr auto value = e1 &gt; e2 ? e1 : e2;\n};\n</code></pre>\n\n<p>You can alternatively implement your own max function to complete the lack of a <code>constexpr</code> one in c++11:</p>\n\n<pre><code>template&lt;typename T&gt; \nconstexpr const T&amp; max(const T&amp; a, const T&amp; b) {\n    return (a &lt; b) ? b : a;\n}\n</code></pre>\n"}], "owner": {"reputation": 10557, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 37844620, "answer_count": 2, "score": 3, "last_activity_date": 1466020752, "creation_date": 1466020096, "last_edit_date": 1466020747, "question_id": 37844474, "link": "https://stackoverflow.com/questions/37844474/a-stdmax-but-for-template-parameters", "title": "A std::max, but for template parameters", "body": "<p>I'm finding myself in need of a template class that finds the maximum of two constant values at compile time; something like this:</p>\n\n<pre><code>template&lt;enum_t e1, enum_t e2&gt;\nstruct max_of { static const enum_t value = SOMEHOW_MAX(e1, e2); };\n</code></pre>\n\n<p>where <code>enum_t</code> is an enumerated type, and <code>max_of&lt;x, y&gt;::value</code> should equal the maximum of <code>x</code> and <code>y</code>.   So the question is: what to use in place of <code>SOMEHOW_MAX</code>?  I am constrained against using c++14 features, so it can't just be <code>std::max</code>, because that can't compare template parameter values at compile time.  If the cardinality of <code>enum_t</code> is reasonably small, one possible way to implement <code>max_of</code> is via template specializations, like so:</p>\n\n<pre><code>template&lt;&gt;\nstruct max_of&lt;E_FIRST, E_SECOND&gt; { static const enum_t value = E_SECOND; };\n</code></pre>\n\n<p>which does work, but clearly becomes rather verbose even for a small number of <code>enum_t</code> values.  Is there some way to get the template system to take the maximum programatically?</p>\n"}, {"tags": ["c++", "dynamic-library"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466019884, "post_id": 37844329, "comment_id": 63149294, "body": "Obviously, your <code>dynlib.so</code> has issues. How was it created?"}, {"owner": {"reputation": 5521, "user_id": 479230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fK2jw.jpg?s=128&g=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/479230/jimmy"}, "edited": false, "score": 0, "creation_date": 1466019953, "post_id": 37844329, "comment_id": 63149330, "body": "have you tried <code>nm -D dynlib.so</code> ?"}, {"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466020964, "post_id": 37844329, "comment_id": 63149859, "body": "@SergeyA Not sure what you mean by that, but I guess &quot;manually&quot;."}, {"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "reply_to_user": {"reputation": 5521, "user_id": 479230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fK2jw.jpg?s=128&g=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/479230/jimmy"}, "edited": false, "score": 0, "creation_date": 1466020967, "post_id": 37844329, "comment_id": 63149864, "body": "@Jimmy I haven&#39;t, though It returns &quot;nm: dynlib.so: File format not recognized&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466021026, "post_id": 37844329, "comment_id": 63149888, "body": "@areuz, manually like <b>how</b>? Your <code>nm</code> output should be a strong indication that whatever the process was to create it, it was <b>NOT</b> the right one."}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 0, "creation_date": 1466020868, "post_id": 37844466, "comment_id": 63149808, "body": "I added the extern linkage and the error is now <i>./dynlib.so: invalid ELF header</i>. ^^ With that I also compiled it with <i>g++ -std=c++11 -fPIC loadlibtest.cpp -ldl -o main</i> Both g++ and gcc are 4.8.4."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 1, "creation_date": 1466021121, "post_id": 37844466, "comment_id": 63149941, "body": "@areuz Question is, how are you compiling  dynlib.so? <code>g++  -fPIC -shared dynlib.cc  -o dynlib.so</code> where dynlib.cc is the <code>getInt</code> definition wrapped in <code>extern &quot;C&quot;</code> works for me fine."}, {"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 0, "creation_date": 1466021179, "post_id": 37844466, "comment_id": 63149973, "body": "In your latest edit, you haven&#39;t defined <i>func</i>, nor <i>error</i>. But I expect <i>error</i> to be a char."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 0, "creation_date": 1466021450, "post_id": 37844466, "comment_id": 63150110, "body": "@areuz  <code>char *error;</code> (see the linked example in the manpage). The under-the line edit is just language-lawyer nitpicking, though. A brute force cast from a a successfully returned <code>void*</code> to function pointer should work on reasonable compilers."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 1, "creation_date": 1466021523, "post_id": 37844466, "comment_id": 63150139, "body": "Your problem appears to be that you&#39;re creating the dynlib.so wrong."}, {"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "edited": false, "score": 1, "creation_date": 1466021546, "post_id": 37844466, "comment_id": 63150156, "body": "You know when I said I don&#39;t know anything about dynamic libraries. Well, I haven&#39;t seen someone compiling it before. After I did what you said It worked like a charm."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 3, "last_activity_date": 1466020608, "last_edit_date": 1466020608, "creation_date": 1466020065, "answer_id": 37844466, "question_id": 37844329, "link": "https://stackoverflow.com/questions/37844329/local-dynamic-library/37844466#37844466", "title": "Local dynamic library", "body": "<p>It works fine for me. I've compiled dynlib.so with</p>\n\n<pre><code>$ gcc dynlib.c -fPIC -shared -o dynlib.so\n</code></pre>\n\n<p>(Obviously, you need to either compile it as C or C++ with <code>extern \"C\"</code> to avoid name mangling).</p>\n\n<p>and I needed to place <code>-ldl</code> after the source file in the <code>g++</code> invocation.</p>\n\n<p>gcc: 4.8.5; g++: 5.3.0</p>\n\n<hr>\n\n<p><code>dlsym</code> may fail too and casting from void* to function pointers is technically UB. You should base it on the <a href=\"http://linux.die.net/man/3/dlopen\" rel=\"nofollow\">usage snippet from the \nmanpage</a>(modified for your function):</p>\n\n<pre><code>       dlerror();    /* Clear any existing error */\n\n       /* Writing: func = (int (*)(int)) dlsym(handle, \"getInt\");\n          would seem more natural, but the C99 standard leaves\n          casting from \"void *\" to a function pointer undefined.\n          The assignment used below is the POSIX.1-2003 (Technical\n          Corrigendum 1) workaround; see the Rationale for the\n          POSIX specification of dlsym(). */\n\n       *(void **) (&amp;func) = dlsym(handle, \"getInt\");\n\n       if ((error = dlerror()) != NULL)  {\n           fprintf(stderr, \"%s\\n\", error);\n           exit(EXIT_FAILURE);\n       }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1466022600, "post_id": 37844978, "comment_id": 63150713, "body": "There is a way to use uncompiled code as shared library. The way is called compilation. ;-) C and C++ aren&#39;t languages designed for runtime interpretation. If you&#39;re dynamically loaded plugins must be supplied as source, then it&#39;s your program needs to compile it for itself first."}, {"owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1466022880, "post_id": 37844978, "comment_id": 63150837, "body": "@PSkocik Thanks :) I&#39;ll look into that, It can&#39;t be that hard."}], "tags": [], "owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "is_accepted": false, "score": 1, "last_activity_date": 1466021841, "creation_date": 1466021841, "answer_id": 37844978, "question_id": 37844329, "link": "https://stackoverflow.com/questions/37844329/local-dynamic-library/37844978#37844978", "title": "Local dynamic library", "body": "<p>After some great replies I discovered what I'm doing wrong.</p>\n\n<p>1) I wasn't using extern \"C\" for my library functions, so <em>dlsym</em> was unable to find the function.</p>\n\n<p>2) I didn't know that dynamic libraries had to be compiled &lt;&lt; pretty stupid of me.</p>\n\n<p>I still want to know if there is a way to use uncompiled code as a library, but my initial problem was solved, thanks to everyone.</p>\n"}], "owner": {"reputation": 596, "user_id": 6036665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-v3znGKV8B74/AAAAAAAAAAI/AAAAAAAAAFY/-u-7OdaCm9g/photo.jpg?sz=128", "display_name": "niraami", "link": "https://stackoverflow.com/users/6036665/niraami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37844466, "answer_count": 2, "score": 1, "last_activity_date": 1466021841, "creation_date": 1466019517, "question_id": 37844329, "link": "https://stackoverflow.com/questions/37844329/local-dynamic-library", "title": "Local dynamic library", "body": "<p>Right off the bat, I want to say that I've never worked with dynamic libraries so It's possible that I don't even understand how they work properly.</p>\n\n<p>I want to have a fully loaded code running and after some trigger (probably user interaction) I want to load a specific library and execute a function inside that library. Preferably close it afterwards. Essentially allowing me to change it and re-load it during run time.</p>\n\n<p>This is the simple dynamic library (called <em>dynlib.so</em> located in the same directory as the main code):</p>\n\n<pre><code>int getInt(int arg_0)\n{\n  return (arg_0 + 7);\n}\n</code></pre>\n\n<p>And this is the main program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;dlfcn.h&gt;\n\nint main() {\n  void *lib_handle = dlopen(\"./dynlib.so\", RTLD_LAZY | RTLD_NOW);\n  if (!lib_handle) {\n    fprintf(stderr, \"%s\\n\", dlerror());\n    exit(EXIT_FAILURE);\n  }\n\n  typedef int (*func_ptr)(int);\n  func_ptr func = (func_ptr)dlsym(lib_handle, \"getInt\");\n  std::cout &lt;&lt; func(13);\n\n  dlclose(lib_handle);\n}\n</code></pre>\n\n<p>I'm compiling it using: <em>g++ -std=c++11 -ldl loadlibtest.cpp -o main</em>.</p>\n\n<p>The error I'm catching is <em>./libshared.so: file too short</em> In my <code>if (!lib_handle) {</code>.</p>\n"}, {"tags": ["c++", "sqlite", "c++11", "encryption", "sqlcipher"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1466019598, "post_id": 37844224, "comment_id": 63149139, "body": "I don&#39;t see in the code where you&#39;re using the <code>a</code> or the function it references."}, {"owner": {"reputation": 53, "user_id": 1925583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dab161e46637529b25bad017a0e7d0d?s=128&d=identicon&r=PG", "display_name": "Farrell", "link": "https://stackoverflow.com/users/1925583/farrell"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1466019793, "post_id": 37844224, "comment_id": 63149254, "body": "@CaptainObvlious  the presence of the template and its specialization kills decryption after compilation. Even without the explicit use"}, {"owner": {"reputation": 53, "user_id": 1925583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dab161e46637529b25bad017a0e7d0d?s=128&d=identicon&r=PG", "display_name": "Farrell", "link": "https://stackoverflow.com/users/1925583/farrell"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1466019911, "post_id": 37844224, "comment_id": 63149302, "body": "I think it is a feature of the compiler. Using visual studio does not reproduce this error"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1466021182, "post_id": 37844224, "comment_id": 63149975, "body": "Sounds like you have undefined behavior somewhere in your code. Step through it with a debugger to find out where and why it&#39;s faulting."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1466024693, "post_id": 37844224, "comment_id": 63151767, "body": "I wonder whether the outcome changes if <code>A</code>&#39;s constructor initializes <code>A::db</code> to some valid value."}, {"owner": {"reputation": 53, "user_id": 1925583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dab161e46637529b25bad017a0e7d0d?s=128&d=identicon&r=PG", "display_name": "Farrell", "link": "https://stackoverflow.com/users/1925583/farrell"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1466083325, "post_id": 37844224, "comment_id": 63178138, "body": "@CaptainObvlious, seg fault was in <code>int sqlite3OsShmLock(sqlite3_file *id, int, int, int);</code> function (<a href=\"http://web.mit.edu/freebsd/head/contrib/sqlite3/sqlite3.c\" rel=\"nofollow noreferrer\">web.mit.edu/freebsd/head/contrib/sqlite3/sqlite3.c</a>)"}], "owner": {"reputation": 53, "user_id": 1925583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dab161e46637529b25bad017a0e7d0d?s=128&d=identicon&r=PG", "display_name": "Farrell", "link": "https://stackoverflow.com/users/1925583/farrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466020283, "creation_date": 1466019104, "last_edit_date": 1466020283, "question_id": 37844224, "link": "https://stackoverflow.com/questions/37844224/sqlitecipher-stdfunction-incompatibility", "title": "sqlitecipher &amp; std::function incompatibility", "body": "<p>I use <strong>sqlitecipher</strong> (<a href=\"https://github.com/devbean/QtCipherSqlitePlugin\" rel=\"nofollow\">https://github.com/devbean/QtCipherSqlitePlugin</a>) as Qt plugin to encrypt/decrypt my sqlite database. OS is <strong>Ubuntu 14.04</strong>, compiler is <strong>GCC 4.9</strong>, <strong>Qt</strong> version is <strong>5.5.1</strong>.</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;functional&gt;\n#include &lt;QtSql&gt;\n\nstruct A\n{\n    template&lt;typename R&gt;\n    R fun(std::function&lt;R(double&amp;)&gt; const&amp; f);\n    double db;\n};\n\ntemplate&lt;typename R&gt;\nR A::fun(std::function&lt;R(double&amp;)&gt; const&amp; f)\n{\n    return f(db);\n}\n\ntemplate&lt;&gt;\nvoid A::fun&lt;void&gt;(std::function&lt;void(double&amp;)&gt; const&amp; f)\n{\n    f(db);\n}\n\ndouble fun(std::function&lt;double(double)&gt; f)\n{\n    return f(1.1);\n}\n\nint main(int argc, char *argv[])\n{\n    A a;\n    a.fun&lt;double&gt;([](double&amp;)-&gt;double{return 0;});\n\n    QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLCIPHER\", \"db\");\n    db.setDatabaseName(db_path); // encrypted database\n    db.open();\n    QSqlQuery q(db);                \n    q.exec(\"pragma key='testkey'\"); \n    bool res =  q.exec(\"SELECT * FROM TestTable LIMIT 10\"); // res == false\n\n    while (q.next()) {\n      qDebug() &lt;&lt; q.value(0);\n    }\n\n    db.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I can't decrypt my database, if i use <code>std::function</code> in the <strong>template functions</strong> (<code>res == false</code>).\nIf use <code>db.setPassword(\"testkey\")</code> instead of <code>q.exec(\"pragma key='testkey'\");</code>, i have <em>segmentation fault</em>.</p>\n\n<p>When I remove the specialization of templates and the template or replace <code>std::function</code> with a pointer to a function, decryption works.</p>\n\n<p>What is special about this situation?</p>\n\n<p><strong><em>The presence of the template and its specialization kills decryption after compilation. Even without the explicit use.</em></strong></p>\n"}, {"tags": ["c++", "3d", "directx", "projection", "raycasting"], "comments": [{"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 3, "creation_date": 1466883214, "post_id": 37844196, "comment_id": 63504690, "body": "I am not aquainted with the argument, but as I saw in &quot;XMVectorSet(screenX, screenY, 5.0f, 0.0f)&quot; you used a 4D vector. So you are working in a 4D space and what you see is the 2D projection of it. I am understanding correctly or not ?"}, {"owner": {"reputation": 7637, "user_id": 1306012, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5a309f07bf7f23a6f176b8d57c22cc65?s=128&d=identicon&r=PG", "display_name": "Bruno Bieri", "link": "https://stackoverflow.com/users/1306012/bruno-bieri"}, "edited": false, "score": 3, "creation_date": 1467066654, "post_id": 37844196, "comment_id": 63567349, "body": "See this maybe: <a href=\"http://stackoverflow.com/a/26662222/1306012\">stackoverflow.com/a/26662222/1306012</a>"}, {"owner": {"reputation": 1599, "user_id": 5548098, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b269d67e99a61f7bc9fa580b924ea2a?s=128&d=identicon&r=PG&f=1", "display_name": "ackh", "link": "https://stackoverflow.com/users/5548098/ackh"}, "edited": false, "score": 3, "creation_date": 1467144743, "post_id": 37844196, "comment_id": 63607224, "body": "I&#39;m actually using 3D vectors, the fourth part (0.0f) of the coordinates just implies that it is a vector. Setting it to 1.0f implies that it is a point."}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 5917770, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1067479839989518/picture?type=large", "display_name": "Kapil Dhaimade", "link": "https://stackoverflow.com/users/5917770/kapil-dhaimade"}, "is_accepted": false, "score": 4, "last_activity_date": 1467128290, "creation_date": 1467128290, "answer_id": 38080588, "question_id": 37844196, "link": "https://stackoverflow.com/questions/37844196/unexpected-result-when-unprojecting-screen-coordinates-in-directx/38080588#38080588", "title": "Unexpected result when unprojecting screen coordinates in DirectX", "body": "<p>I used the <code>XMMatrixLookAtRH</code> API in <code>Model::SetViewMatrix()</code> function to calculate the view matrix and got decent values of <code>v</code> and <code>rayOrigin</code> vectors.</p>\n\n<p>For eg:</p>\n\n<pre><code>XMStoreFloat4x4(\n        &amp;m_modelViewProjectionConstantBufferData-&gt;view,\n        XMMatrixLookAtRH(m_cameraPosition, XMVectorSet(0.0f, 1.0f, 0.0f, 0.0f), \n        XMVectorSet(1.0f, 0.0f, 0.0f, 0.0f))\n        );\n</code></pre>\n\n<p>Though I haven't been able to visualize the output on screen, I checked the result by computing for simple values in a console application and the vector values seem to be correct. Please check in your application and confirm.</p>\n\n<p><strong>NOTE:</strong> You have to give <strong>focal point</strong> and <strong>up direction</strong> vector parameters to use <code>XMMatrixLookAtRH</code> API instead of your current approach.</p>\n"}, {"tags": [], "owner": {"reputation": 1599, "user_id": 5548098, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b269d67e99a61f7bc9fa580b924ea2a?s=128&d=identicon&r=PG&f=1", "display_name": "ackh", "link": "https://stackoverflow.com/users/5548098/ackh"}, "is_accepted": false, "score": 6, "last_activity_date": 1467144434, "last_edit_date": 1495540739, "creation_date": 1467144434, "answer_id": 38085358, "question_id": 37844196, "link": "https://stackoverflow.com/questions/37844196/unexpected-result-when-unprojecting-screen-coordinates-in-directx/38085358#38085358", "title": "Unexpected result when unprojecting screen coordinates in DirectX", "body": "<p>Thanks for your hint, Kapil. I tried the <code>XMMatrixLookAtRH</code> method but could not change the camera's pitch / yaw using that approach so I discarded that approach and came up with generating the matrix myself.</p>\n\n<p>What resolved my problem was transposing the model, view and projection matrices using <code>XMMatrixTranspose</code> before passing them to <code>XMVector3Unproject</code>. So instead of having the code as follows</p>\n\n<pre><code>  XMMATRIX projectionMatrix = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;projection);\n  XMMATRIX viewMatrix       = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;view);\n  XMMATRIX modelMatrix      = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;model);\n\n  XMVECTOR rayBegin = XMVector3Unproject(XMVectorSet(screenX, screenY, -m_boundingSphereRadius, 0.0f),\n                                         0.0f,\n                                         0.0f,\n                                         screenWidth,\n                                         screenHeight,\n                                         0.0f,\n                                         1.0f,\n                                         projectionMatrix,\n                                         viewMatrix,\n                                         modelMatrix);\n</code></pre>\n\n<p>it needs to be</p>\n\n<pre><code>  XMMATRIX projectionMatrix = XMMatrixTranspose(XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;projection));\n  XMMATRIX viewMatrix       = XMMatrixTranspose(XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;view));\n  XMMATRIX modelMatrix      = XMMatrixTranspose(XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;model));\n\n  XMVECTOR rayBegin = XMVector3Unproject(XMVectorSet(screenX, screenY, -m_boundingSphereRadius, 0.0f),\n                                         0.0f,\n                                         0.0f,\n                                         screenWidth,\n                                         screenHeight,\n                                         0.0f,\n                                         1.0f,\n                                         projectionMatrix,\n                                         viewMatrix,\n                                         modelMatrix);\n</code></pre>\n\n<p>It's not entirely clear to me why I need to transpose the matrices before passing them to the unproject method. However, I suspect that it is related to the issue that I'm facing when I move my camera. That problem has already been described here on StackOverflow by <a href=\"https://stackoverflow.com/questions/21215930/directx-world-to-view-matrix-where-is-my-misconception\">this</a> posting.</p>\n\n<p>I did not manage to solve that problem yet. Simply transposing the view matrix does not resolve it. However, my main problem is solved and my model is finally clickable.</p>\n\n<p>If anyone has anything to add and shine some light on why the matrices need to be transposed or why moving the camera distorts the model please go ahead and post comments or answers.</p>\n"}, {"comments": [{"owner": {"reputation": 302, "user_id": 5917770, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1067479839989518/picture?type=large", "display_name": "Kapil Dhaimade", "link": "https://stackoverflow.com/users/5917770/kapil-dhaimade"}, "edited": false, "score": 2, "creation_date": 1467150886, "post_id": 38086895, "comment_id": 63610107, "body": "@ackh, Please note that in the posted code, I have also set camera position as 1,1,1,1, i.e outside origin. Even then, I&#39;m getting correct values of the screen vector. Only problem is I am still not able to visualize the output except checking vector values in Visual Studio debugger. I plotted the vectors with these values on paper and they do seem correct. Please check in your GUI application."}, {"owner": {"reputation": 1599, "user_id": 5548098, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b269d67e99a61f7bc9fa580b924ea2a?s=128&d=identicon&r=PG&f=1", "display_name": "ackh", "link": "https://stackoverflow.com/users/5548098/ackh"}, "edited": false, "score": 1, "creation_date": 1467223381, "post_id": 38086895, "comment_id": 63647585, "body": "Many thanks for your effort here. I will try what you suggested and report again. Unfortunately this is a side project and it will take some time until I can get back to it."}], "tags": [], "owner": {"reputation": 302, "user_id": 5917770, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1067479839989518/picture?type=large", "display_name": "Kapil Dhaimade", "link": "https://stackoverflow.com/users/5917770/kapil-dhaimade"}, "is_accepted": false, "score": 3, "last_activity_date": 1467152289, "last_edit_date": 1467152289, "creation_date": 1467150659, "answer_id": 38086895, "question_id": 37844196, "link": "https://stackoverflow.com/questions/37844196/unexpected-result-when-unprojecting-screen-coordinates-in-directx/38086895#38086895", "title": "Unexpected result when unprojecting screen coordinates in DirectX", "body": "<p>I am able to get equal values of <code>v</code> and <code>rayOrigin</code> vectors using <code>XMMatrixLookAtRH</code> method as well as your custom view matrix with this code without needing matrix transpose operations:</p>\n\n<pre><code>#include &lt;directxmath.h&gt;\n\nusing namespace DirectX;\n\nXMVECTOR m_cameraXAxis;\nXMVECTOR m_cameraYAxis;\nXMVECTOR m_cameraZAxis;\nXMVECTOR m_cameraPosition;\n\nXMMATRIX gView;\nXMMATRIX gView2;\nXMMATRIX gProj;\nXMMATRIX gModel;\n\nvoid SetViewMatrix()\n{\n    XMVECTOR lTarget = XMVectorSet(2.0f, 2.0f, 2.0f, 1.0f);\n\n    m_cameraPosition = XMVectorSet(1.0f, 1.0f, 1.0f, 1.0f);\n    m_cameraZAxis = XMVector3Normalize(XMVectorSubtract(m_cameraPosition, lTarget));\n    m_cameraXAxis = XMVector3Normalize(XMVector3Cross(XMVectorSet(1.0f, -1.0f, -1.0f, 0.0f), m_cameraZAxis));\n\n    XMFLOAT3 cameraPosition;\n    XMFLOAT3 cameraXAxis;\n    XMFLOAT3 cameraYAxis;\n    XMFLOAT3 cameraZAxis;\n\n    XMFLOAT4X4 viewMatrix;\n\n    // Keep camera's axes orthogonal to each other and of unit length.\n    m_cameraZAxis = XMVector3Normalize(m_cameraZAxis);\n    m_cameraYAxis = XMVector3Normalize(XMVector3Cross(m_cameraZAxis, m_cameraXAxis));\n\n    // m_cameraYAxis and m_cameraZAxis are already normalized, so there is no need\n    // to normalize the below cross product of the two.\n    m_cameraXAxis = XMVector3Cross(m_cameraYAxis, m_cameraZAxis);\n\n    // Fill in the view matrix entries.\n    float x = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraXAxis));\n    float y = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraYAxis));\n    float z = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraZAxis));\n\n    XMStoreFloat3(&amp;cameraPosition, m_cameraPosition);\n    XMStoreFloat3(&amp;cameraXAxis, m_cameraXAxis);\n    XMStoreFloat3(&amp;cameraYAxis, m_cameraYAxis);\n    XMStoreFloat3(&amp;cameraZAxis, m_cameraZAxis);\n\n    viewMatrix(0, 0) = cameraXAxis.x;\n    viewMatrix(1, 0) = cameraXAxis.y;\n    viewMatrix(2, 0) = cameraXAxis.z;\n    viewMatrix(3, 0) = x;\n\n    viewMatrix(0, 1) = cameraYAxis.x;\n    viewMatrix(1, 1) = cameraYAxis.y;\n    viewMatrix(2, 1) = cameraYAxis.z;\n    viewMatrix(3, 1) = y;\n\n    viewMatrix(0, 2) = cameraZAxis.x;\n    viewMatrix(1, 2) = cameraZAxis.y;\n    viewMatrix(2, 2) = cameraZAxis.z;\n    viewMatrix(3, 2) = z;\n\n    viewMatrix(0, 3) = 0.0f;\n    viewMatrix(1, 3) = 0.0f;\n    viewMatrix(2, 3) = 0.0f;\n    viewMatrix(3, 3) = 1.0f;\n\n    gView = XMLoadFloat4x4(&amp;viewMatrix);\n\n    gView2 = XMMatrixLookAtRH(m_cameraPosition, XMVectorSet(2.0f, 2.0f, 2.0f, 1.0f),\n            XMVectorSet(1.0f, -1.0f, -1.0f, 0.0f));\n\n    //m_modelViewProjectionConstantBufferData-&gt;view = viewMatrix;\n    printf(\"yo\");\n}\n\nvoid SetProjectionMatrix(float width, float height, float nearZ, float farZ)\n{\n    XMMATRIX orthographicProjectionMatrix = XMMatrixOrthographicRH(width, height, nearZ, farZ);\n\n    XMFLOAT4X4 orientation = XMFLOAT4X4\n        (\n            1.0f, 0.0f, 0.0f, 0.0f,\n            0.0f, 1.0f, 0.0f, 0.0f,\n            0.0f, 0.0f, 1.0f, 0.0f,\n            0.0f, 0.0f, 0.0f, 1.0f\n            );\n\n    XMMATRIX orientationMatrix = XMLoadFloat4x4(&amp;orientation);\n\n    gProj = XMMatrixTranspose( XMMatrixMultiply(orthographicProjectionMatrix, orientationMatrix));\n}\n\nvoid SetModelMatrix()\n{\n    XMFLOAT4X4 orientation = XMFLOAT4X4\n        (\n            1.0f, 0.0f, 0.0f, 0.0f,\n            0.0f, 1.0f, 0.0f, 0.0f,\n            0.0f, 0.0f, 1.0f, 0.0f,\n            0.0f, 0.0f, 0.0f, 1.0f\n            );\n\n    XMMATRIX orientationMatrix = XMMatrixTranspose( XMLoadFloat4x4(&amp;orientation));\n\n    gModel = orientationMatrix;\n}\n\nbool SelectObject(float screenX, float screenY, float screenWidth, float screenHeight)\n{\n    XMMATRIX projectionMatrix = gProj;\n    XMMATRIX viewMatrix = gView;\n    XMMATRIX modelMatrix = gModel;\n    XMMATRIX viewMatrix2 = gView2;\n\n    XMVECTOR v = XMVector3Unproject(XMVectorSet(screenX, screenY, 5.0f, 0.0f),\n        0.0f,\n        0.0f,\n        screenWidth,\n        screenHeight,\n        0.0f,\n        1.0f,\n        projectionMatrix,\n        viewMatrix,\n        modelMatrix);\n\n    XMVECTOR rayOrigin = XMVector3Unproject(XMVectorSet(screenX, screenY, 0.0f, 0.0f),\n        0.0f,\n        0.0f,\n        screenWidth,\n        screenHeight,\n        0.0f,\n        1.0f,\n        projectionMatrix,\n        viewMatrix,\n        modelMatrix);\n\n    // Code to retrieve v0, v1 and v2 is omitted\n    auto diff = v - rayOrigin;\n    auto diffNorm = XMVector3Normalize(diff);\n\n    XMVECTOR v2 = XMVector3Unproject(XMVectorSet(screenX, screenY, 5.0f, 0.0f),\n        0.0f,\n        0.0f,\n        screenWidth,\n        screenHeight,\n        0.0f,\n        1.0f,\n        projectionMatrix,\n        viewMatrix2,\n        modelMatrix);\n\n    XMVECTOR rayOrigin2 = XMVector3Unproject(XMVectorSet(screenX, screenY, 0.0f, 0.0f),\n        0.0f,\n        0.0f,\n        screenWidth,\n        screenHeight,\n        0.0f,\n        1.0f,\n        projectionMatrix,\n        viewMatrix2,\n        modelMatrix);\n\n    auto diff2 = v2 - rayOrigin2;\n    auto diffNorm2 = XMVector3Normalize(diff2);\n\n    printf(\"hi\");\n    return true;\n}\n\nint main()\n{\n    SetViewMatrix();\n    SetProjectionMatrix(1000, 1000, 0.0f, 1.0f);\n    SetModelMatrix();\n\n    SelectObject(500, 500, 1000, 1000);\n\n    return 0;\n}\n</code></pre>\n\n<p>Please check your application with this code and confirm. You'll see the code is the same as your earlier code. The only addition is initial values of camera parameters, calculation of 2nd view matrix in <code>SetViewMatrix()</code> using <code>XMMatrixLookAtRH</code> method and calculating vectors using both the view matrices in <code>SelectObject()</code>.</p>\n\n<p><strong>No need to Transpose</strong></p>\n\n<p>I did not have to transpose any matrix. Transpose should not be required for <strong>Projection</strong> and <strong>Model</strong> matrices because they are both diagonal matrices and transposing them will give the same matrix. I don't think a transpose of <strong>View</strong> matrix is required either. The formula of <code>XMMatrixLookAtRH</code> explained <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb281711(v=vs.85).aspx\" rel=\"nofollow\">here</a> provides the view matrix exactly like yours. Also, the sample project given <a href=\"https://code.msdn.microsoft.com/How-to-pick-and-manipulate-089639ab\" rel=\"nofollow\">here</a> does not transpose its matrices while checking intersection. You can download and check the sample project.</p>\n\n<p><strong>Possible problem sources</strong></p>\n\n<p>1) Initialization: The only code I have not been able to see is your initialization of <code>m_cameraZAxis</code>, <code>m_cameraXAxis</code>, <code>nearZ</code>, <code>farZ</code> parameters, etc. Also, I have not used your camera rotation functions. As you can see, I have initialized camera by using position, target and direction vectors for calculation. Do check if your initial calculation of <code>m_cameraZAxis</code> accords with my sample code.</p>\n\n<p>2) LH/RH look: Make sure there is no accidental mix-up of <strong>left-hand</strong> and <strong>right-hand</strong> looks anywhere in your code.</p>\n\n<p>3) Check if your rotation code (<code>ChangeCameraPitch</code> or <code>ChangeCameraYaw</code>) is accidentally creating camera axes which are <strong>not orthogonal</strong>. You are using the camera's <strong>Y-axis</strong> as input in <code>ChangeCameraYaw</code> and as output in <code>ChangeCameraPitch</code>. But the <strong>Y-axis</strong> is being reset in <code>SetViewMatrix</code> by the cross-product or X and Z axes. So the earlier value of Y-axis may get lost. </p>\n\n<p>Good luck with your application! Do tell if you find a proper solution and root cause to your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1599, "user_id": 5548098, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b269d67e99a61f7bc9fa580b924ea2a?s=128&d=identicon&r=PG&f=1", "display_name": "ackh", "link": "https://stackoverflow.com/users/5548098/ackh"}, "is_accepted": true, "score": 1, "last_activity_date": 1467919813, "last_edit_date": 1495542780, "creation_date": 1467919813, "answer_id": 38253825, "question_id": 37844196, "link": "https://stackoverflow.com/questions/37844196/unexpected-result-when-unprojecting-screen-coordinates-in-directx/38253825#38253825", "title": "Unexpected result when unprojecting screen coordinates in DirectX", "body": "<p>As mentioned the issue was not fully resolved even though clicking now works. The issue with the distortion of the model when moving the camera, which I suspected is related, was still present. What I meant with \"the model gets distorted\" is visible in the following illustration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cd5MI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cd5MI.png\" alt=\"enter image description here\"></a></p>\n\n<p>The left image shows how the model looks when the camera is located in the center of the world, i.e. (0, 0, 0) while the right image shows what happens when I move the camera in negative y-axis direction. As can be seen the model widens at the bottom and gets smaller at the top which is the same behavior described in the <a href=\"https://stackoverflow.com/questions/21215930/directx-world-to-view-matrix-where-is-my-misconception\">link</a> I already provided above.</p>\n\n<p>What I eventually did to resolve both issues is:</p>\n\n<ol>\n<li>Transpose the matrices before passing them to XMVector3Unproject (already described above)</li>\n<li>Transposed my view matrix by changing the code of the <code>SetViewMatrix</code> method (code see below)</li>\n</ol>\n\n<p>The <code>SetViewMatrix</code> method now looks as follows:</p>\n\n<pre><code>void Camera::SetViewMatrix()\n{\n  XMFLOAT3 cameraPosition;\n  XMFLOAT3 cameraXAxis;\n  XMFLOAT3 cameraYAxis;\n  XMFLOAT3 cameraZAxis;\n\n  XMFLOAT4X4 viewMatrix;\n\n  // Keep camera's axes orthogonal to each other and of unit length.\n  m_cameraZAxis = XMVector3Normalize(m_cameraZAxis);\n  m_cameraYAxis = XMVector3Normalize(XMVector3Cross(m_cameraZAxis, m_cameraXAxis));\n\n  // m_cameraYAxis and m_cameraZAxis are already normalized, so there is no need\n  // to normalize the below cross product of the two.\n  m_cameraXAxis = XMVector3Cross(m_cameraYAxis, m_cameraZAxis);\n\n  // Fill in the view matrix entries.\n  float x = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraXAxis));\n  float y = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraYAxis));\n  float z = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraZAxis));\n\n  //XMStoreFloat3(&amp;cameraPosition, m_cameraPosition);\n  XMStoreFloat3(&amp;cameraXAxis, m_cameraXAxis);\n  XMStoreFloat3(&amp;cameraYAxis, m_cameraYAxis);\n  XMStoreFloat3(&amp;cameraZAxis, m_cameraZAxis);\n\n  viewMatrix(0, 0) = cameraXAxis.x;\n  viewMatrix(0, 1) = cameraXAxis.y;\n  viewMatrix(0, 2) = cameraXAxis.z;\n  viewMatrix(0, 3) = x;\n\n  viewMatrix(1, 0) = cameraYAxis.x;\n  viewMatrix(1, 1) = cameraYAxis.y;\n  viewMatrix(1, 2) = cameraYAxis.z;\n  viewMatrix(1, 3) = y;\n\n  viewMatrix(2, 0) = cameraZAxis.x;\n  viewMatrix(2, 1) = cameraZAxis.y;\n  viewMatrix(2, 2) = cameraZAxis.z;\n  viewMatrix(2, 3) = z;\n\n  viewMatrix(3, 0) = 0.0f;\n  viewMatrix(3, 1) = 0.0f;\n  viewMatrix(3, 2) = 0.0f;\n  viewMatrix(3, 3) = 1.0f;\n\n  m_modelViewProjectionConstantBufferData-&gt;view = viewMatrix;\n}\n</code></pre>\n\n<p>So I just exchanged row and column coordinates. Note that I had to make sure that my <code>ChangeCameraYaw</code> method gets called before my <code>ChangeCameraPitch</code> method. This is necessary because the orientation of the model otherwise is not as I want it.</p>\n\n<p>There is also another approach that could be used. Instead of transposing the view matrix by exchanging the row and column coordinates and transposing it before passing it to XMVector3Unproject I could use the <code>row_major</code> keyword in the vertex shader together with the view matrix:</p>\n\n<pre><code>cbuffer ModelViewProjectionConstantBuffer : register(b0)\n{\n  matrix model;\n  row_major matrix view;\n  matrix projection;\n};\n</code></pre>\n\n<p>I came across this idea in <a href=\"http://www.catalinzima.com/2012/12/a-word-on-matrices/\" rel=\"nofollow noreferrer\">this</a> blog post. The keyword <code>row_major</code> influences on how the shader compiler interprets the matrix in memory. The same could also be achieved by changing the order of the vector * matrix multiplication in the vertex shader, i.e. using <code>pos = mul(view, pos);</code> instead of <code>pos = mul(pos, view);</code></p>\n\n<p>That's pretty much it. The two issues are indeed interconnected but using what I posted in this question I was able to resolve both issues so I'm accepting my own reply as answer to this question. Hope it helps someone in the future.</p>\n"}], "owner": {"reputation": 1599, "user_id": 5548098, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b269d67e99a61f7bc9fa580b924ea2a?s=128&d=identicon&r=PG&f=1", "display_name": "ackh", "link": "https://stackoverflow.com/users/5548098/ackh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "accepted_answer_id": 38253825, "answer_count": 4, "score": 11, "last_activity_date": 1467919813, "creation_date": 1466019025, "last_edit_date": 1466446663, "question_id": 37844196, "link": "https://stackoverflow.com/questions/37844196/unexpected-result-when-unprojecting-screen-coordinates-in-directx", "title": "Unexpected result when unprojecting screen coordinates in DirectX", "body": "<p>In order to be able to determine whether the user clicked on any of my 3D objects I\u2019m trying to turn the screen coordinates of the click into a vector which I then use to check whether any of my triangles got hit. To do so I\u2019m using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.transformation.xmvector3unproject(v=vs.85).aspx\" rel=\"nofollow noreferrer\">XMVector3Unproject</a> method provided by DirectX and I\u2019m implementing everything in C++/CX.</p>\n\n<p>The problem that I\u2019m facing is that the vector that results from unprojecting the screen coordinates is not at all as I expect it to be. The below image illustrates this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/A0xbr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A0xbr.png\" alt=\"Vector resulting from unprojection\"></a>\nThe cursor position at the time that the click occurs (highlighted in yellow) is visible in the isometric view on the left. As soon as I click, the vector resulting from unprojecting appears behind the model indicated in the images as the white line penetrating the model. So instead of originating at the cursor location and going into the screen in the isometric view it is appearing at a completely different position.</p>\n\n<p>When I move the mouse in the isometric view horizontally while clicking and after that moving the mouse vertically and clicking the below pattern appears. All lines in the two images represent vectors resulting from clicking. The model has been removed for better visibility.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8xP6v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8xP6v.png\" alt=\"Vector resulting from unprojection originate in same location\"></a>\nSo as can be seen from the above image all vectors seem to originate from the same location. If I change the view and repeat the process the same pattern appears but with a different origin of the vectors.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QUlDM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QUlDM.png\" alt=\"Different perspective, different origin of the vectors\"></a></p>\n\n<p>Here are the code snippets that I use to come up with this. First of all I receive the cursor position using the below code and pass it to my \u201cSelectObject\u201d method together with the width and height of the drawing area:</p>\n\n<pre><code>void Demo::OnPointerPressed(Object^ sender, PointerEventArgs^ e)\n{\n  Point currentPosition = e-&gt;CurrentPoint-&gt;Position;\n\n  if(m_model-&gt;SelectObject(currentPosition.X, currentPosition.Y, m_renderTargetWidth, m_renderTargetHeight))\n  {\n    m_RefreshImage = true;\n  }\n}\n</code></pre>\n\n<p>The \u201cSelectObject\u201d method looks as follows:</p>\n\n<pre><code>bool Model::SelectObject(float screenX, float screenY, float screenWidth, float screenHeight)\n{\n  XMMATRIX projectionMatrix = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;projection);\n  XMMATRIX viewMatrix       = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;view);\n  XMMATRIX modelMatrix      = XMLoadFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;model);\n\n  XMVECTOR v = XMVector3Unproject(XMVectorSet(screenX, screenY, 5.0f, 0.0f),\n                                  0.0f,\n                                  0.0f,\n                                  screenWidth,\n                                  screenHeight,\n                                  0.0f,\n                                  1.0f,\n                                  projectionMatrix,\n                                  viewMatrix,\n                                  modelMatrix);\n\n  XMVECTOR rayOrigin = XMVector3Unproject(XMVectorSet(screenX, screenY, 0.0f, 0.0f),\n                                          0.0f,\n                                          0.0f,\n                                          screenWidth,\n                                          screenHeight,\n                                          0.0f,\n                                          1.0f,\n                                          projectionMatrix,\n                                          viewMatrix,\n                                          modelMatrix);\n\n  // Code to retrieve v0, v1 and v2 is omitted\n\n  if(Intersects(rayOrigin, XMVector3Normalize(v - rayOrigin), v0, v1, v2, depth))\n  {\n    return true;\n  }\n}\n</code></pre>\n\n<p>Eventually the calculated vector is used by the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh855922(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Intersects</a> method of the DirectX::TriangleTests namespace to detect if a triangle got hit. I\u2019ve omitted the code in the above snipped because it is not relevant for this problem.</p>\n\n<p>To render these images I use an orthographic projection matrix and a camera that can be rotated around both its local x- and y-axis which generates the view matrix. The world matrix always stays the same, i.e. it is simply an identity matrix.</p>\n\n<p>The view matrix is calculated as follows (based on the example in Frank Luna\u2019s book 3D Game Programming):</p>\n\n<pre><code>void Camera::SetViewMatrix()\n{\n  XMFLOAT3 cameraPosition;\n  XMFLOAT3 cameraXAxis;\n  XMFLOAT3 cameraYAxis;\n  XMFLOAT3 cameraZAxis;\n\n  XMFLOAT4X4 viewMatrix;\n\n  // Keep camera's axes orthogonal to each other and of unit length.\n  m_cameraZAxis = XMVector3Normalize(m_cameraZAxis);\n  m_cameraYAxis = XMVector3Normalize(XMVector3Cross(m_cameraZAxis, m_cameraXAxis));\n\n  // m_cameraYAxis and m_cameraZAxis are already normalized, so there is no need\n  // to normalize the below cross product of the two.\n  m_cameraXAxis = XMVector3Cross(m_cameraYAxis, m_cameraZAxis);\n\n  // Fill in the view matrix entries.\n  float x = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraXAxis));\n  float y = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraYAxis));\n  float z = -XMVectorGetX(XMVector3Dot(m_cameraPosition, m_cameraZAxis));\n\n  XMStoreFloat3(&amp;cameraPosition, m_cameraPosition);\n  XMStoreFloat3(&amp;cameraXAxis   , m_cameraXAxis);\n  XMStoreFloat3(&amp;cameraYAxis   , m_cameraYAxis);\n  XMStoreFloat3(&amp;cameraZAxis   , m_cameraZAxis);\n\n  viewMatrix(0, 0) = cameraXAxis.x;\n  viewMatrix(1, 0) = cameraXAxis.y;\n  viewMatrix(2, 0) = cameraXAxis.z;\n  viewMatrix(3, 0) = x;\n\n  viewMatrix(0, 1) = cameraYAxis.x;\n  viewMatrix(1, 1) = cameraYAxis.y;\n  viewMatrix(2, 1) = cameraYAxis.z;\n  viewMatrix(3, 1) = y;\n\n  viewMatrix(0, 2) = cameraZAxis.x;\n  viewMatrix(1, 2) = cameraZAxis.y;\n  viewMatrix(2, 2) = cameraZAxis.z;\n  viewMatrix(3, 2) = z;\n\n  viewMatrix(0, 3) = 0.0f;\n  viewMatrix(1, 3) = 0.0f;\n  viewMatrix(2, 3) = 0.0f;\n  viewMatrix(3, 3) = 1.0f;\n\n  m_modelViewProjectionConstantBufferData-&gt;view = viewMatrix;\n}\n</code></pre>\n\n<p>It is influenced by two methods which rotate the camera around the x-and y-axis of the camera:</p>\n\n<pre><code>void Camera::ChangeCameraPitch(float angle)\n{\n  XMMATRIX rotationMatrix = XMMatrixRotationAxis(m_cameraXAxis, angle);\n\n  m_cameraYAxis = XMVector3TransformNormal(m_cameraYAxis, rotationMatrix);\n  m_cameraZAxis = XMVector3TransformNormal(m_cameraZAxis, rotationMatrix);\n}\n\nvoid Camera::ChangeCameraYaw(float angle)\n{\n  XMMATRIX rotationMatrix = XMMatrixRotationAxis(m_cameraYAxis, angle);\n\n  m_cameraXAxis = XMVector3TransformNormal(m_cameraXAxis, rotationMatrix);\n  m_cameraZAxis = XMVector3TransformNormal(m_cameraZAxis, rotationMatrix);\n}\n</code></pre>\n\n<p>The world / model matrix and the projection matrix are calculated as follows:</p>\n\n<pre><code>void Model::SetProjectionMatrix(float width, float height, float nearZ, float farZ)\n{\n  XMMATRIX orthographicProjectionMatrix = XMMatrixOrthographicRH(width, height, nearZ, farZ);\n\n  XMFLOAT4X4 orientation = XMFLOAT4X4\n  (\n    1.0f, 0.0f, 0.0f, 0.0f,\n    0.0f, 1.0f, 0.0f, 0.0f,\n    0.0f, 0.0f, 1.0f, 0.0f,\n    0.0f, 0.0f, 0.0f, 1.0f\n  );\n\n  XMMATRIX orientationMatrix = XMLoadFloat4x4(&amp;orientation);\n\n  XMStoreFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;projection, XMMatrixTranspose(orthographicProjectionMatrix * orientationMatrix));\n}\n\nvoid Model::SetModelMatrix()\n{\n  XMFLOAT4X4 orientation = XMFLOAT4X4\n  (\n    1.0f, 0.0f, 0.0f, 0.0f,\n    0.0f, 1.0f, 0.0f, 0.0f,\n    0.0f, 0.0f, 1.0f, 0.0f,\n    0.0f, 0.0f, 0.0f, 1.0f\n  );\n\n  XMMATRIX orientationMatrix = XMLoadFloat4x4(&amp;orientation);\n\n  XMStoreFloat4x4(&amp;m_modelViewProjectionConstantBufferData-&gt;model, XMMatrixTranspose(orientationMatrix));\n}\n</code></pre>\n\n<p>Frankly speaking I do not yet understand the problem that I\u2019m facing. I\u2019d be grateful if anyone with a deeper insight could give me some hints as to where I need to apply changes so that the vector calculated from the unprojection starts at the cursor position and moves into the screen.</p>\n\n<p><strong>Edit 1</strong>:</p>\n\n<p>I assume it has to do with the fact that my camera is located at (0, 0, 0) in world coordinates. The camera rotates around its local x- and y-axis. From what I understand the view matrix created by the camera builds the plane onto which the image is projected. If that is the case it would explain why the ray is at a somehow \"unexpected\" location.</p>\n\n<p>My assumption is that I need to move the camera out of the center so that it is located outside of the object. However, if simply modify the member variable <code>m_cameraPosition</code> of the camera my model gets totally distorted.</p>\n\n<p>Anyone out there able and willing to help?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466020343, "post_id": 37844088, "comment_id": 63149536, "body": "Have you tried setting your <code>QListWidgetItem</code>&#39;s alignment to left?"}, {"owner": {"reputation": 93, "user_id": 6268215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54122333653b1fcd4c6f20674fb30c15?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Conner", "link": "https://stackoverflow.com/users/6268215/ian-conner"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466022478, "post_id": 37844088, "comment_id": 63150646, "body": "The text is already aligned to the left.  The problem is that the 16px icon has padding on either side so it&#39;s actually 22px wide, which leaves a large gap between the text.  You can see it better in this screenshot where I&#39;ve clicked on one of the icons to select it: <a href=\"http://fs5.directupload.net/images/160615/ag99mdbt.png\" rel=\"nofollow noreferrer\">fs5.directupload.net/images/160615/ag99mdbt.png</a>"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1466027870, "post_id": 37844088, "comment_id": 63153159, "body": "The padding is, IIRC, fixed at six pixels for the <code>QWindowsVista</code> style. This is much the same as the padding between the icon and text on a pushbutton or <code>QLabel</code>."}], "owner": {"reputation": 93, "user_id": 6268215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54122333653b1fcd4c6f20674fb30c15?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Conner", "link": "https://stackoverflow.com/users/6268215/ian-conner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466020053, "creation_date": 1466018598, "last_edit_date": 1466020053, "question_id": 37844088, "link": "https://stackoverflow.com/questions/37844088/qlistwidget-removing-padding-consistent-column-width", "title": "QListWidget - Removing Padding &amp; Consistent Column Width", "body": "<p>I created a QListWidget using setViewMode(QListView::ListMode) and setFlow(QListView::TopToBottom) to get this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/s5OLF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s5OLF.png\" alt=\"screenshot\"></a></p>\n\n<p>The large space between the icon and the text looks odd so I tried to remove it with:</p>\n\n<pre><code>list-&gt;setStyleSheet(\"QListView::icon { padding-right: 0px; }\");\n</code></pre>\n\n<p>and also:</p>\n\n<pre><code>list-&gt;setStyleSheet(\"QListView::icon { padding: 0px; }\");\n</code></pre>\n\n<p>but neither removes the space.  Is there any way to remove the space between the icon and the text?</p>\n\n<p>Also, you'll see from the above screenshot that QListWidget uses variable column widths, but I wanted all the columns to have the same width.  I tried this solution:</p>\n\n<pre><code>int width = 0;\nint numItems = list-&gt;count();\nQFontMetrics metrics(list-&gt;font());\nfor (int i = 0 ; i  &lt; numItems ; ++i)\n{\n    if (metrics.boundingRect(list-&gt;item(i)-&gt;text()).width() &gt; width)\n        width = metrics.boundingRect(list-&gt;item(i)-&gt;text()).width();\n}\nlist-&gt;setGridSize(QSize(width+30, 16));\n</code></pre>\n\n<p>However, it doesn't seem to work consistently and I had to use +30 to account for the icon area, which isn't a very good solution, particularly if the size of the icon changes.</p>\n\n<p>Is there a better way to get all the columns the same width? </p>\n"}, {"tags": ["python", "c++", "boost", "runtime", "boost-python"], "comments": [{"owner": {"reputation": 973, "user_id": 2911262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JDrRJ.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2911262/peter"}, "edited": false, "score": 1, "creation_date": 1466049687, "post_id": 37844022, "comment_id": 63158384, "body": "I&#39;m not sure but I think this is impossible. You can use inherited python classes from your MyClass or you can generation part your C++ code before compilation instead of making classes at run-time."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 1, "creation_date": 1466083282, "post_id": 37844022, "comment_id": 63178106, "body": "Can you please elaborate and provide an example of what is trying to be accomplished?  All user-defined Python classes created by Boost.Python occurs at runtime."}, {"owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1466084747, "post_id": 37844022, "comment_id": 63179367, "body": "@TannerSansbury, I provided an axample and added the details of problem."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1466087421, "post_id": 37844022, "comment_id": 63181474, "body": "This is technically possible, but it seems like code smell to me.  I suspect that the code will be less than optimal and manageable due to the amount of time execution will cross the language boundary, which can be expensive.  If the application protocol allows for new <i>data types</i> to be introduced on-the-fly, then perhaps the meta-data can be used to create serializer and deserializer objects that convert between the byte protocol and generic-ish Python dict and list-like objects?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1471351831, "post_id": 37844022, "comment_id": 65303867, "body": "The array side of this looks a lot like numpy record arrays/structured array. <a href=\"http://docs.scipy.org/doc/numpy/user/basics.rec.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/user/basics.rec.html</a>."}], "owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466084664, "creation_date": 1466018306, "last_edit_date": 1466084664, "question_id": 37844022, "link": "https://stackoverflow.com/questions/37844022/how-to-create-classes-in-boostpython-at-run-time", "title": "How to create classes in Boost::Python at run-time?", "body": "<p>In module source to create new classes I must use next declarative style constructions:</p>\n\n<pre><code>class_&lt;MyClass&gt;(\"MyClass\")\n    .def(\"my_method\", &amp;MyClass::my_method)\n    .def(\"my_second_method\", &amp;MyClass::my_second_method);\n</code></pre>\n\n<p>But if I need to create classes at run-time? For example module function will be return new class. What I must do?</p>\n\n<p>In fact I need create new types on the fly. In my case this typed fixed dictonairies and typed arrays. I need this for optimize my existing code: overhead problem. In my project used data types that transmitted via network. Its a reason to create fixed dict classes in runtime (every class will store individual fields with specified names, like a structs in C++, it's a <code>fixed dict</code> and typed arrays, which the holds element type and array of data of this type).</p>\n\n<p>This will be looks something like this in python code:</p>\n\n<pre><code>from MyCPPLib import DeclareFixedDictonary, DeclareTypedArray\n\n# new used defined data type\nNewClass = DeclareFixedDictonary([('field_1', int32), ('field_2', String])\n\n# instance of this type\nnew_instance = NewClass(4, \"Hi\") \nnew_instance['field_1'] = 6\nnew_instance['field_2'] = \"qweqwe\"\n\n# ----------------------------------------------\nNewArrayClass = DeclareTypedArray(NewClass)\nnew_array_instance = NewArrayClass([new_instance, NewClass()])\n\n# ----------------------------------------------\nNewComplexClass = DeclareFixedDictonary([('f1', float), ('f2', NewArrayClass), (f3, NewClass)])\n\n# ... etc ...\n</code></pre>\n\n<p>I think if I will create this features with C++ using Python::Boost or/and Python API then I will get maximum speed-up with my types.\nMy problem is creating new classes in runtime (by other function, in example this <code>DeclareFixedDictonary</code> and <code>DeclareTypedArray</code>).</p>\n\n<p>Following the docs to declare new python class with Boost I must do something like this:</p>\n\n<pre><code>BOOST_PYTHON_MODULE(DataTypes)\n{\n\n    class_&lt;DataTypesClass&gt;(\"DataTypesClass\")\n        .def(\"set\", &amp;DataTypesClass::set)\n        .def(\"get\", &amp;DataTypesClass::get)\n        .def(\"set_item\", &amp;DataTypesClass::SetItem)\n        .def(\"get_item\", &amp;DataTypesClass::GetItem)\n        ;\n\n}\n</code></pre>\n\n<p>But this is <em>module</em> classes, they can be created only in my module, and I can't use <code>class_</code> in another module function, it's gives error. Maybe Boost has API to create new classes in run-time? Maybe <code>type</code> instances and dynamically filling attributes. Or maybe best way to do this is code generation? But is more hard than reflection system in Python.</p>\n"}, {"tags": ["c++", "templates", "matrix", "static"], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466018753, "post_id": 37844104, "comment_id": 63148645, "body": "That won&#39;t work. Instantiating <code>Matrix</code> with n != m will result in instantiating the function signature, which is ill-formed when n != m. You have to be a bit more subtle."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466019392, "post_id": 37844104, "comment_id": 63149024, "body": "@Brian you&#39;re right, it doesn&#39;t compile. I don&#39;t understand why SFINAE doesn&#39;t kick in and just ignores the function. Anyway, edited my answer, static_assert seems to work and even gives a better error-message"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466021161, "post_id": 37844104, "comment_id": 63149967, "body": "SFINAE only occurs when substitution failure occurs during template argument deduction."}, {"owner": {"reputation": 3, "user_id": 6471261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b47232ae3144f1df2b93950ea29db35?s=128&d=identicon&r=PG&f=1", "display_name": "baggins133", "link": "https://stackoverflow.com/users/6471261/baggins133"}, "edited": false, "score": 0, "creation_date": 1466095948, "post_id": 37844104, "comment_id": 63187183, "body": "Thanks, I&#39;ve not not really come across static_assert :)"}], "tags": [], "owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "is_accepted": true, "score": 1, "last_activity_date": 1466019497, "last_edit_date": 1466019497, "creation_date": 1466018659, "answer_id": 37844104, "question_id": 37843972, "link": "https://stackoverflow.com/questions/37843972/c-template-matrix-class-square-matrix-specialisation/37844104#37844104", "title": "C++ template matrix class - square matrix specialisation", "body": "<p>Try this:</p>\n\n<pre><code>static Matrix&lt;n, m&gt; identity() {\n    static_assert(n == m, \"Only square matrices have a identity\");\n    return {}; //TODO\n}\n</code></pre>\n\n<p>See: <a href=\"http://cpp.sh/7te2z\" rel=\"nofollow\">http://cpp.sh/7te2z</a></p>\n"}, {"tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": false, "score": -1, "last_activity_date": 1466029710, "last_edit_date": 1495535638, "creation_date": 1466029710, "answer_id": 37846859, "question_id": 37843972, "link": "https://stackoverflow.com/questions/37843972/c-template-matrix-class-square-matrix-specialisation/37846859#37846859", "title": "C++ template matrix class - square matrix specialisation", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/partial_specialization\" rel=\"nofollow noreferrer\">Partial specialization</a> of a template class is allowed for the entire class, but not for its single member.</p>\n\n<blockquote>\n  <p>Members of partial specializations are not related to the members of the primary\n  template.</p>\n</blockquote>\n\n<p>That is the reason behind your compilation error.</p>\n\n<p>Of course, specializing the entire Matrix template for the square matrix case doesn't make sense. <a href=\"https://stackoverflow.com/users/1080064/tkausl\">@tkausl</a> has already answered how to make the <code>identity()</code> function available only for the square matrix types.</p>\n\n<p>However, I would like to draw your attention toward a couple of issues in your implementation of <code>Matrix</code>:</p>\n\n<ol>\n<li><p>The matrix data is a plain array (instead of a dynamically allocated array or <code>std::vector</code>). This has the following disadvantages:</p>\n\n<ul>\n<li><code>sizeof(Matrix&lt;N, M, T&gt;) == sizeof(T)*N*M</code>. Allocating large matrices on the stack may result in <a href=\"http://www.stackoverflow.com\">stack overflow</a>.</li>\n<li>Impossibility of taking advantage of move semantics (as the data is inseparable from the matrix object).</li>\n</ul>\n\n<p>Though, if the matrix dimensions are fixed at compile time constants, then, most probably, they will be small numbers. If so, paying the cost of dynamic allocation may indeed be unjustified.</p></li>\n<li><p><code>identity()</code> returns its result by value (rather than by constant reference).</p></li>\n<li><p><code>I</code> (the identity matrix) is a static member of the class. It is better to make it a static variable inside the <code>identity()</code> function.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 6471261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b47232ae3144f1df2b93950ea29db35?s=128&d=identicon&r=PG&f=1", "display_name": "baggins133", "link": "https://stackoverflow.com/users/6471261/baggins133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 37844104, "answer_count": 2, "score": 0, "last_activity_date": 1466029710, "creation_date": 1466018143, "question_id": 37843972, "link": "https://stackoverflow.com/questions/37843972/c-template-matrix-class-square-matrix-specialisation", "title": "C++ template matrix class - square matrix specialisation", "body": "<p>I'm creating a simple C++ matrix template class, with the following definition:</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;uint n, uint m, typename T = double&gt;\nclass Matrix {\nprivate:\n    T data[n][m];\n\n    static Matrix&lt;n, m, T&gt; I;\n\npublic:\n    Matrix();\n    Matrix(std::initializer_list&lt;T&gt; l);\n\n    T&amp; at(uint i, uint j);  // one-based index\n    T&amp; at_(uint i, uint j); // zero-based index\n\n    template&lt;uint k&gt; Matrix&lt;n, k, T&gt; operator*(Matrix&lt;m, k, T&gt;&amp; rhs);\n    Matrix&lt;m, n, T&gt; transpose();\n    Matrix&lt;n, m, T&gt; operator+(const Matrix&lt;n, m, T&gt;&amp; rhs);\n    Matrix&lt;n, m, T&gt;&amp; operator+=(const Matrix&lt;n, m, T&gt;&amp; rhs);\n    Matrix&lt;n, m, T&gt; operator-(const Matrix&lt;n, m, T&gt;&amp; rhs);\n    Matrix&lt;n, m, T&gt;&amp; operator-=(const Matrix&lt;n, m, T&gt;&amp; rhs);\n    Matrix&lt;n, m, T&gt; operator*(const T&amp; rhs);\n    Matrix&lt;n, m, T&gt;&amp; operator*=(const T&amp; rhs);\n    Matrix&lt;n, m, T&gt; operator/(const T&amp; rhs);\n    Matrix&lt;n, m, T&gt;&amp; operator/=(const T&amp; rhs);\n\n    static Matrix&lt;n, m, T&gt; identity();\n};\n</code></pre>\n\n<p>(<code>uint</code> is defined as an <code>unsigned int</code>)</p>\n\n<p>The final function <code>Matrix&lt;n, m, T&gt; identity()</code> aims to return the static <code>I</code> member which is the identity matrix using a basic singleton pattern. Obviously the identity matrix is only defined for square matrices so I tried this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;uint n, typename T&gt;\ninline Matrix&lt;n, n, T&gt; Matrix&lt;n, n, T&gt;::identity() {\n    if (!I) {\n        I = Matrix&lt;n, n, T&gt;();\n        for (uint i = 0; i &lt; n; ++i) {\n            I.at(i, i) = 1;\n        }\n    }\n    return I;\n}\n</code></pre>\n\n<p>Which gives the error <code>C2244 'Matrix&lt;n,n,T&gt;::identity': unable to match function definition to an existing declaration</code>.</p>\n\n<p>My impression was that I could do some sort of specialisation of the template where the number of columns and rows are equal. I'm not sure if this is even possible, but your help would be much appreciated.</p>\n"}, {"tags": ["c++", "asynchronous"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1466018062, "post_id": 37843896, "comment_id": 63148270, "body": "How did you determine it doesn&#39;t launch an asynchronous operation?"}, {"owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466018689, "post_id": 37843896, "comment_id": 63148613, "body": "It is continuing to block execution on the method that invokes NewFileAction(). Multiple files will come in simultaneously but do not get processed until the compression is done."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1466018772, "post_id": 37843896, "comment_id": 63148659, "body": "That could be because <code>Compress</code> goes out of scope. Read the docs for <code>std::future</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "edited": false, "score": 0, "creation_date": 1466019186, "post_id": 37844217, "comment_id": 63148879, "body": "So should I use a vector to keep track of the objects and add them as a member of the class itself?"}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": true, "score": 7, "last_activity_date": 1466019088, "creation_date": 1466019088, "answer_id": 37844217, "question_id": 37843896, "link": "https://stackoverflow.com/questions/37843896/trying-to-get-async-to-work-in-a-windows-c-application/37844217#37844217", "title": "Trying to get async to work in a Windows C++ application", "body": "<p><code>std::async</code> returns a <code>std::future</code> object. Since <code>Compress</code> is local object (of type <code>std::future</code>), and will go out of scope. Since this is only object holding the <code>async</code> return result, the destructor will keep on waiting. You should keep such object(s) in member of this class (a <code>vector&lt;future&gt;</code> may be).</p>\n"}], "owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 37844217, "answer_count": 1, "score": 4, "last_activity_date": 1466019088, "creation_date": 1466017870, "question_id": 37843896, "link": "https://stackoverflow.com/questions/37843896/trying-to-get-async-to-work-in-a-windows-c-application", "title": "Trying to get async to work in a Windows C++ application", "body": "<p>I can't seem to understand why this won't work. I've searched endlessly and don't see how my example below doesn't kick off an asynchronous operation.</p>\n\n<pre><code>void Folder::NewFileAction()\n{\n     if (Folder::Match) \n     {\n         LOG(LOG_INFO) &lt;&lt; \"New file detected. Compressing\";\n         auto Compress = async(launch::async, &amp;ZipFile, Folder::FilePath);\n     }\n}\n</code></pre>\n\n<p>Shouldn't this kick off an asynchronous operation in another thread? Is there a flag I have to enable in Visual Studio 2015?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "encoding", "utf-8", "utf-32"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466018651, "post_id": 37843885, "comment_id": 63148589, "body": "Pray that the file has a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">Byte Order Mark</a> you can read and then set the stream&#39;s locale  accordingly. If not, start guessing."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1466019556, "post_id": 37843885, "comment_id": 63149113, "body": "As stated in the answer for this similar question, reading the file in binary mode will bypass any limitations created by incompatibility with ASCII."}], "answers": [{"comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1466019197, "post_id": 37844174, "comment_id": 63148883, "body": "OP asks about UTF-x encodings (so far :) ). &#39;\\0&#39; bytes, which are practically there 100% the time for x &gt;= 16 (at first ASCII char) enables us to distinguish amongst these - OTOH your answer is very interesting for the generic case for many different encodings."}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1466068435, "post_id": 37844174, "comment_id": 63167859, "body": "@lorro you are assuming English text. If the text is mostly \u2600\t\u2601\t\u2602\t\u2603\t\u2604\t\u2605\t\u2606\t\u2607\t\u2608\t\u2609\t\u260a\t\u260b\t\u260c\t\u260d\t\u260e\t\u260f and \u2500\t\u2501\t\u2502\t\u2503\t\u2504\t\u2505\t\u2506\t\u2507\t\u2508\t\u2509\t\u250a\t\u250b\t\u250c\t\u250d\t\u250e\t\u250f then you&#39;re not going to see so many &#39;\\0&#39; bytes and it might throw the detection. It will also not work with what I&#39;ve suggested if your training set is only English text, but it has a chance of working if the training set contains documents like that."}], "tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466018923, "creation_date": 1466018923, "answer_id": 37844174, "question_id": 37843885, "link": "https://stackoverflow.com/questions/37843885/encoding-independent-input-stream-in-c/37844174#37844174", "title": "Encoding independent input stream in C++", "body": "<p>There's no way to figure it out reliably for an arbitrary byte stream. You can open the same way a binary executable file, which is not encoded in any of the mentioned encodings.</p>\n\n<p>What you can do is try to guess. Treat the file as binary and read the the first 10k bytes or something like that, then compare the distribution of byte values to some canonical models you've built and see which one is the closest, and go with that one.</p>\n\n<p>To build such a model you can take some texts (either stuff you already have or copy from wikipedia some articles) encode them with the various encodings and run the same algorithm to build the distribution. Average the results and use that as the canonical models for comparison. Works best when you tend to have the same kind of text (i.e. if you build the models with plain English text it might be difficult to classify documents using non-ascii characters).</p>\n\n<p>If your files have a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow\">byte order mark</a>, it helps a lot.</p>\n"}, {"comments": [{"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1466019074, "post_id": 37844178, "comment_id": 63148821, "body": "Not true for non-english text. If you need a lot of high order unicode characters you will not see those patterns so clearly."}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 0, "creation_date": 1466019341, "post_id": 37844178, "comment_id": 63148991, "body": "My question was actually because I&#39;ll have to read texts like japanese ideograms, so it is not that easy &gt;&lt;"}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": true, "score": 0, "last_activity_date": 1466018934, "creation_date": 1466018934, "answer_id": 37844178, "question_id": 37843885, "link": "https://stackoverflow.com/questions/37843885/encoding-independent-input-stream-in-c/37844178#37844178", "title": "Encoding independent input stream in C++", "body": "<p>While you cannot definitely infer, in practice, you might try-and-fail based on a list of encodings.</p>\n\n<ul>\n<li>UTF-16 will likely have a '\\0' very early (whether at even or odd position(s) is decided by endianness, which might be little, big, or on some architectures, medium);</li>\n<li>UTF-32 will likely have three of those; while</li>\n<li>UTF-8 strings should not have this character.</li>\n</ul>\n\n<p>Additionally, utf files are permitted (but not required) to store a byte order mark: <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Byte_order_mark</a> . If you have it, you are lucky, as that's different amongst the encodings.</p>\n"}], "owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "closed_date": 1466023589, "accepted_answer_id": 37844178, "answer_count": 2, "score": 0, "last_activity_date": 1466018934, "creation_date": 1466017852, "last_edit_date": 1466018190, "question_id": 37843885, "link": "https://stackoverflow.com/questions/37843885/encoding-independent-input-stream-in-c", "closed_reason": "Duplicate", "title": "Encoding independent input stream in C++", "body": "<p>I have a C++ program which reads text files. Currently I'm using C's <code>fopen()</code> to read and then <code>fgetc()</code> to read the next character.\nI <code>typedef</code>'d a \"file character\", which is actually an <code>int</code> (and I can change it to <code>long</code> without problems, obviously).</p>\n\n<p>Now the program can read UTF-7 and UTF-8 text files, but what if I use UTF-16 or UTF-32 text files? Is there a way to infer the file encoding and then read the file properly?\nEven passing to C++'s <code>istream</code>'s wouldn't be a problem.</p>\n"}, {"tags": ["c++", "dll", "visual-studio-2008", "mfc"], "comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466018273, "post_id": 37843794, "comment_id": 63148391, "body": "Were they got loaded? Are you sure they are debug versions?"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466019051, "post_id": 37843794, "comment_id": 63148812, "body": "@Ajay yes, the load/Initializing! parts are very similar between our two logs."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466019171, "post_id": 37843794, "comment_id": 63148869, "body": "I zipped up my build, my colleague copied it onto HIS PC and my build LOGS the IMPLICIT DLLs on HIS PC!  So, it&#39;s not a BUILD issue, but a SYSTEM issue???  Antivirus (we both have the same Trend Micro served from the same server)?  I think this is now officially outside the realm of SO."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466019266, "post_id": 37843794, "comment_id": 63148932, "body": "While debugging see if DLLs are actually loaded, and see which ones (Debug-&gt;Windows-&gt;Modules)."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466019385, "post_id": 37843794, "comment_id": 63149022, "body": "@Ajay - yes, checked Modules window, they are loaded (the software would not have gotten very far if they hadn&#39;t)"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466019457, "post_id": 37843794, "comment_id": 63149058, "body": "Long time I&#39;ve done MFC DLLs, I am forgetting things. Sorry, I can&#39;t help you further, I gave all best possible approaches."}, {"owner": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "edited": false, "score": 0, "creation_date": 1466022951, "post_id": 37843794, "comment_id": 63150873, "body": "Probably a long shot, but could it be related to different Environment variable settings?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466071657, "post_id": 37843794, "comment_id": 63170107, "body": "To eliminate Visual Studio as part of the problem, run your application without a debugger attached, and capture the <code>TRACE</code> output with a tool like <a href=\"https://technet.microsoft.com/en-us/sysinternals/debugview.aspx\" rel=\"nofollow noreferrer\">DebugView</a>. To get more reliable information on module load and unload, you could also enable Loader Snaps using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff549557.aspx\" rel=\"nofollow noreferrer\">GFlags</a> tool."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466089896, "post_id": 37843794, "comment_id": 63183255, "body": "@IInspectable - none of those DLLs showed up in the DebugView tool either.  Will try some other tools..."}], "owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466017484, "creation_date": 1466017484, "question_id": 37843794, "link": "https://stackoverflow.com/questions/37843794/implicitly-linked-dlls-not-reporting-foo-dll-terminating-when-closing-dbg-ver", "title": "Implicitly linked DLLs not reporting &quot;foo.DLL Terminating!&quot; when closing DBG version MFC app on my PC", "body": "<p>When I run my app in VS2008, the output window dumps all of the explicitly loaded/unloaded DLLs to the output window.  However, the implicit DLLs are NOT reported (missing implicit DLL \"Terminating!\" messages are KB405M, PROGEXT, MATEXT, HOSTEXT, CodeJock, and UTILS):</p>\n\n<pre><code>DashboardDm.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\DashboardDm.dll'\nProgram.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\PrgrmDm.dll'\n'DmDesigner.exe': Unloaded 'C:\\Windows\\SysWOW64\\comdlg32.dll'\nThe thread 'Win32 Thread' (0x3594) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x25a4) has exited with code 0 (0x0).\nPROGRSC.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\PrgRcDm.dll'\nCOMMRSC.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\ComRcDm.dll'\nThe thread 'Win32 Thread' (0x3314) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x2ab8) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x372c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x2bb4) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x11f8) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x1fdc) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x237c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0xb4c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x2b08) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x3170) has exited with code 0 (0x0).\nThe program '[10044] DmDesigner.exe: Native' has exited with code 0 (0x0).\n</code></pre>\n\n<p>However, when a colleague runs it on his PC in the debugger, he gets both the explicit  DLLs listed AND the implicit DLLs (note missing Terminating! DLLs ARE listed below):</p>\n\n<pre><code>DashboardDm.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\DashboardDm.dll'\nProgram.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\PrgrmDm.dll'\n'DmDesigner.exe': Unloaded 'C:\\Windows\\SysWOW64\\comdlg32.dll'\nThe thread 'Win32 Thread' (0x2420) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x7bdc) has exited with code 0 (0x0).\nPROGRSC.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\PrgRcDm.dll'\nCOMMRSC.DLL Terminating!\n'DmDesigner.exe': Unloaded 'D:\\DSPMX\\Debug\\Bin\\ComRcDm.dll'\nThe thread 'Win32 Thread' (0x8348) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x35b8) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x6b6c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x8718) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x1eec) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x746c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x54c8) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x548c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x3a40) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x1e1c) has exited with code 0 (0x0).\nThe thread 'Win32 Thread' (0x5bbc) has exited with code 0 (0x0).\nKB405M.DLL Terminating!\nPROGEXT.DLL Terminating!\nMatExt.DLL Terminating!\nHOSTEXT.DLL Terminating!\nCodejock ToolkitPro Terminating!\nUTILS.DLL Terminating!\nThe program '[7388] DmDesigner.exe: Native' has exited with code 0 (0x0).\n</code></pre>\n\n<p>If I stick a breakpoint at one of the dwReason == DLL_PROCESS_DETACH AfxTermExtensionModule's calls - it never is hit (just in case the TRACE0 mechanism was broke).</p>\n\n<p>I am getting no unhandled/reported exceptions in the Output Window, exit code is 0, all looks fine.  What could be causing this on my PC?  How is my colleague not seeing the same issue?</p>\n\n<p>I am running Windows 7 (same as my colleague).  VS2008, same application, same source code base.</p>\n"}, {"tags": ["c++", "winapi", "tooltip"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1466046976, "post_id": 37843775, "comment_id": 63157764, "body": "You will need to use custom draw for this."}, {"owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1466067918, "post_id": 37843775, "comment_id": 63167505, "body": "@andlabs: I can&#39;t use MFC..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466069938, "post_id": 37843775, "comment_id": 63168914, "body": "Custom drawing does not necessitate MFC. In fact, there cannot be anything that is MFC-only, since the MFC use system services exposed through the Windows API. A standard <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760246.aspx\" rel=\"nofollow noreferrer\">Tooltip</a> control can request custom-drawing (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760264.aspx\" rel=\"nofollow noreferrer\">NM_CUSTOMDRAW</a> notification for details)."}, {"owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466085045, "post_id": 37843775, "comment_id": 63179605, "body": "@IInspectable: I saw the documentation you posted, but still I can&#39;t get how to call it without associating it with any control or even how to perform a drawing, setting height and width of the tooltip and so on through those structures (NMCUSTOMDRAW, NMTTCUSTOMDRAW). Thanks for your patience."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "edited": false, "score": 0, "creation_date": 1466028367, "post_id": 37846486, "comment_id": 63153317, "body": "The matter is that I wanted to avoid MFC because won&#39;t have it installed at my exam, so I&#39;ll be able to use only standard WINAPI structures and functions. Thank you anyway."}], "tags": [], "owner": {"reputation": 33, "user_id": 6207098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1196e7dc9c09c2a8a1f4ec90ad6a2914?s=128&d=identicon&r=PG&f=1", "display_name": "Matta", "link": "https://stackoverflow.com/users/6207098/matta"}, "is_accepted": false, "score": 0, "last_activity_date": 1466027810, "creation_date": 1466027810, "answer_id": 37846486, "question_id": 37843775, "link": "https://stackoverflow.com/questions/37843775/how-do-i-customize-the-appearence-of-my-tooltip-c-winapi/37846486#37846486", "title": "How do I customize the appearence of my tooltip? (C++ WINAPI)", "body": "<p>CMFCToolTipInfo has more options to customize the look with the MFC Feature pack.</p>\n\n<p>Example:</p>\n\n<pre><code>CMFCToolTipInfo params;\nparams.m_bBoldLabel = FALSE;\nparams.m_bDrawDescription = TRUE;\nparams.m_bDrawIcon = TRUE;\nparams.m_bRoundedCorners = TRUE;\nparams.m_bDrawSeparator = FALSE\nparams.m_clrFill = RGB (100, 100, 100);\nparams.m_clrFillGradient = RGB (100, 100, 100);\nparams.m_clrText = RGB (255, 255, 255); //RGB (61, 83, 80);\nparams.m_clrBorder =  RGB (255, 255, 255);\nparams.m_bBalloonTooltip = FALSE;\nparams.m_bVislManagerTheme = FALSE;\n\nm_ToolTip.SetParams (&amp;params);\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466027810, "creation_date": 1466017414, "question_id": 37843775, "link": "https://stackoverflow.com/questions/37843775/how-do-i-customize-the-appearence-of-my-tooltip-c-winapi", "title": "How do I customize the appearence of my tooltip? (C++ WINAPI)", "body": "<p>I was able to create a tooltip that displays a simple message, but I'd like, as you may have guessed by reading the title, to customize it adding some fancy color, fonts or stuff like that. \nThat's my code:</p>\n\n<pre><code>// Balloon.cpp : definisce il punto di ingresso dell'applicazione.\n//\n\n #include \"stdafx.h\"\n #include \"Balloon.h\"\n #include &lt;Commctrl.h&gt;\n\n #pragma comment(lib, \"ComCtl32.lib\")\n\n #pragma comment(linker, \\\n\"\\\"/manifestdependency:type='Win32' \"\\\n\"name='Microsoft.Windows.Common-Controls' \"\\\n\"version='6.0.0.0' \"\\\n\"processorArchitecture='*' \"\\\n\"publicKeyToken='6595b64144ccf1df' \"\\\n\"language='*'\\\"\")\n\n\n#define MAX_LOADSTRING 100\n\n // Variabili globali:\n HINSTANCE hInst;                                // istanza corrente\n WCHAR szTitle[MAX_LOADSTRING];                  // Testo della barra del titolo\n  WCHAR szWindowClass[MAX_LOADSTRING];            // nome della classe di finestre principale\n\n // Dichiarazioni con prototipo delle funzioni incluse in questo modulo di codice:\n ATOM                MyRegisterClass(HINSTANCE hInstance);\n BOOL                InitInstance(HINSTANCE, int);\n LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);\n INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);\n\n int APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                 _In_opt_ HINSTANCE hPrevInstance,\n                 _In_ LPWSTR    lpCmdLine,\n                 _In_ int       nCmdShow)\n {\n    UNREFERENCED_PARAMETER(hPrevInstance);\n     UNREFERENCED_PARAMETER(lpCmdLine);\n\n// TODO: inserire qui il codice.\n\n\n\n\n// Inizializzare le stringhe globali\nLoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);\nLoadStringW(hInstance, IDC_BALLOON, szWindowClass, MAX_LOADSTRING);\nMyRegisterClass(hInstance);\n\n// Eseguire l'inizializzazione dall'applicazione:\nif (!InitInstance (hInstance, nCmdShow))\n{\n    return FALSE;\n}\n\nHACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_BALLOON));\n\nMSG msg;\n\n// Ciclo di messaggi principale:\nwhile (GetMessage(&amp;msg, nullptr, 0, 0))\n{\n    if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;msg))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n}\n\nreturn (int) msg.wParam;\n}\n\n\n\n//\n//  FUNZIONE: MyRegisterClass()\n//\n//  SCOPO: registra la classe di finestre.\n//\n ATOM MyRegisterClass(HINSTANCE hInstance)\n {\nWNDCLASSEXW wcex;\n\nwcex.cbSize = sizeof(WNDCLASSEX);\n\nwcex.style          = CS_HREDRAW | CS_VREDRAW;\nwcex.lpfnWndProc    = WndProc;\nwcex.cbClsExtra     = 0;\nwcex.cbWndExtra     = 0;\nwcex.hInstance      = hInstance;\nwcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_BALLOON));\nwcex.hCursor        = LoadCursor(nullptr, IDC_ARROW);\nwcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);\nwcex.lpszMenuName   = MAKEINTRESOURCEW(IDC_BALLOON);\nwcex.lpszClassName  = szWindowClass;\nwcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));\n\nreturn RegisterClassExW(&amp;wcex);\n }\n\n HWND CreateToolTip(int toolID, HINSTANCE hInst, HWND hDlg, PTSTR pszText) {\nif (!toolID || !hDlg || !pszText) {\n    return FALSE;\n}\n\nHWND hwndTool = GetDlgItem(hDlg, toolID);\n\nHWND hwndTip = CreateWindowEx(NULL, TOOLTIPS_CLASS, NULL,\n    WS_POPUP | TTS_ALWAYSTIP | TTS_BALLOON,\n    CW_USEDEFAULT, CW_USEDEFAULT,\n    CW_USEDEFAULT, CW_USEDEFAULT,\n    hDlg, NULL,\n    hInst, NULL);\n\nif (!hwndTool || !hwndTip) {\n    return (HWND)NULL;\n}\n\nTOOLINFO toolInfo;\ntoolInfo.cbSize = sizeof(toolInfo);\ntoolInfo.hwnd = hDlg;\ntoolInfo.uFlags = TTF_IDISHWND | TTF_SUBCLASS;\ntoolInfo.uId = (UINT_PTR)hwndTool;\ntoolInfo.lpszText = pszText;\nSendMessage(hwndTip, TTM_ADDTOOL, 0, (LPARAM)&amp;toolInfo);\n\nreturn hwndTip;\n}\n\n//\n//   FUNZIONE: InitInstance(HINSTANCE, int)\n//\n//   SCOPO: salva l'handle di istanza e crea la finestra principale\n//\n//   COMMENTI:\n//\n//        In questa funzione l'handle di istanza viene salvato in una variabile globale e\n//        la finestra di programma principale viene creata e visualizzata.\n//\nBOOL InitInstance(HINSTANCE hInstance, int nCmdShow)\n{\n hInst = hInstance; // Memorizzare l'handle di istanza nella variabile globale\n\n HWND hWnd = CreateWindowW(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,\n  CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\n\n  if (!hWnd)\n  {\n  return FALSE;\n  }\n\n  ShowWindow(hWnd, nCmdShow);\n  UpdateWindow(hWnd);\n\n  return TRUE;\n}\n\n//\n//  FUNZIONE: WndProc(HWND, UINT, WPARAM, LPARAM)\n//\n//  SCOPO:  elabora i messaggi per la finestra principale.\n//\n//  WM_COMMAND - elabora il menu dell'applicazione\n//  WM_PAINT - disegna la finestra principale\n//  WM_DESTROY - inserisce un messaggio di uscita e restituisce un risultato\n//\n//\nHWND mybutton, tooltip_mess;\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\nswitch (message)\n{\ncase WM_COMMAND:\n    {\n        int wmId = LOWORD(wParam);\n        // Analizzare le selezioni di menu:\n        switch (wmId)\n        {\n        case IDM_ABOUT:\n            DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n            break;\n        case IDM_EXIT:\n            DestroyWindow(hWnd);\n            break;\n        default:\n            return DefWindowProc(hWnd, message, wParam, lParam);\n        }\n    }\n    break;\ncase WM_PAINT:\n    {\n        PAINTSTRUCT ps;\n        HDC hdc = BeginPaint(hWnd, &amp;ps);\n        // TODO: aggiungere qui il codice di disegno che usa HDC...\n        EndPaint(hWnd, &amp;ps);\n    }\n    break;\ncase WM_DESTROY:\n    PostQuitMessage(0);\n    break;\n    /*EDITBALLOONTIP ebt;\n\n    ebt.cbStruct = sizeof(ebt);\n    ebt.pszText = L\" Tooltip text! \";\n    ebt.pszTitle = L\" Tooltip title!!! \";\n    ebt.ttiIcon = TTI_ERROR_LARGE;    // tooltip icon\n\n    SendMessage(hWnd, EM_SHOWBALLOONTIP, 0, (LPARAM)&amp;ebt);\n\n    */\ncase WM_CREATE:\n    mybutton = CreateWindowEx(\n        WS_EX_CLIENTEDGE,\n        L\"BUTTON\",\n        L\"My Button\",\n        WS_VISIBLE | WS_CHILD,\n        10, 10, 100, 24,\n        hWnd,\n        (HMENU)11,\n        hInst,\n        NULL);\n    tooltip_mess = CreateToolTip(11, hInst, hWnd, L\"Tooltip message\");\n\n    break;\ndefault:\n    return DefWindowProc(hWnd, message, wParam, lParam);\n}\nreturn 0;\n}\n\n // Gestore dei messaggi della finestra Informazioni su.\n INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)\n {\nUNREFERENCED_PARAMETER(lParam);\nswitch (message)\n{\ncase WM_INITDIALOG:\n    return (INT_PTR)TRUE;\n\ncase WM_COMMAND:\n    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)\n    {\n        EndDialog(hDlg, LOWORD(wParam));\n        return (INT_PTR)TRUE;\n    }\n    break;\n}\nreturn (INT_PTR)FALSE;\n }\n</code></pre>\n\n<p>This makes me obtain such result: </p>\n\n<p><a href=\"https://i.stack.imgur.com/5ltD2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ltD2.png\" alt=\"Tracking tooltip\"></a></p>\n\n<p>which is a little bit sad... my idea was to get something like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/0KIv3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0KIv3.png\" alt=\"Target tooltip\"></a></p>\n\n<p>I found looking around in the web informations about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775466(v=vs.85).aspx\" rel=\"nofollow noreferrer\">EDITBALLOONTIP</a></p>\n\n<p>and it seems to offer what I was looking for, but I realised you can use it only in association with some button, while I'd like to make my tooltip pop up when a player does a wrong move.</p>\n\n<p>Could anyone please address me on the right way, even giving me the name of something that can do in my case, please?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466020505, "post_id": 37843619, "comment_id": 63149612, "body": "It looks good as long as <code>f</code> is not going to be reused after that. It&#39;s possible that <code>operator()</code> will have some side-effects that may modify internal members (move on internal members) of <code>f</code> (if any). I am not sure though, haven&#39;t thought it through..Good question."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466020933, "post_id": 37843619, "comment_id": 63149845, "body": "@Arunmu If (1) the method is overloaded on ref-qualifiers, and (2) the caller passes the functor in as an rvalue, we have enough reason to believe that the caller intends to call the <code>&amp;&amp;</code> version. That being the case, it&#39;s probably reasonable to perfect-forward every occurrence of <code>f</code> in <code>doStuff</code>...I think."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1466022900, "post_id": 37843619, "comment_id": 63150849, "body": "I don&#39;t see any problem with <code>forward&lt;F&gt;(f)</code> as long as don&#39;t use <code>f</code> again within <code>doStuff</code>"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1466023038, "post_id": 37843619, "comment_id": 63150918, "body": "@Praetorian Why would using <code>f</code> again be a problem? <code>std::forward</code> is nothing more than a conditional cast, so unless the <code>&amp;&amp;</code> method blows up the object itself, reusing <code>f</code> should be fine. No?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1466023273, "post_id": 37843619, "comment_id": 63151024, "body": "Well, yes, but if I go through the trouble of implementing ref qualified overloads, I&#39;d probably only do it when the <code>&amp;&amp;</code> overload has a chance to be more efficient by stealing the guts of the functor. In any case, unless you also control every single functor that will be passed to <code>doStuff</code>, you have to assume that it has an <code>operator()() &amp;&amp;</code> that modifies the functor so that subsequent calls may behave differently."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1466023849, "post_id": 37843619, "comment_id": 63151299, "body": "@Praetorian Good point."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466056048, "post_id": 37843619, "comment_id": 63160480, "body": "@ZizhengTai My point expressed clearly by Praetorian"}], "answers": [{"tags": [], "owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "is_accepted": true, "score": 0, "last_activity_date": 1469174536, "last_edit_date": 1469174536, "creation_date": 1469138715, "answer_id": 38515115, "question_id": 37843619, "link": "https://stackoverflow.com/questions/37843619/perfect-forwarding-callable-objects-in-higher-order-functions/38515115#38515115", "title": "Perfect-forwarding callable objects in higher-order functions", "body": "<p><code>std::forward</code> is a conditional r-value cast, and the point is as usual to steal the guts out of dying objects. There's no difference between <code>functors</code> and other objects in this respect. The down-side is same as with any use of <code>std::forward</code>; if you are not prepared to steal those guts, you shouldn't.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstruct Foo {\n    std::vector&lt;int&gt; vec = {1,2,3};\n    std::vector&lt;int&gt;&amp; operator()(...) &amp; {\n        return vec;\n    }\n    std::vector&lt;int&gt; operator()(...) &amp;&amp; {\n        return std::move(vec);\n        // Clearly, don't rely on 'vec' here...\n    }\n};\n\nFoo getFoo(){\n    return {};\n}\n\nint main() {\n    auto foo = getFoo();\n    auto vec1=foo();\n    auto vec2=getFoo()();\n}\n</code></pre>\n\n<p>Clearly, don't do things like this:</p>\n\n<pre><code>auto vec3 = std::move(foo)();\nvec4 = foo();\n</code></pre>\n\n<p>for the same reasons. </p>\n"}], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 2, "accepted_answer_id": 38515115, "answer_count": 1, "score": 11, "last_activity_date": 1469174536, "creation_date": 1466016876, "last_edit_date": 1466020605, "question_id": 37843619, "link": "https://stackoverflow.com/questions/37843619/perfect-forwarding-callable-objects-in-higher-order-functions", "title": "Perfect-forwarding callable objects in higher-order functions", "body": "<p>I had been writing higher-order functions like this:</p>\n\n<pre><code>template&lt;typename F, typename... Args&gt;\nvoid doStuff(F f, Args&amp;&amp;... args)\n{\n    // ...\n    f(std::forward&lt;Args&gt;(args)...);\n    // ...\n}\n</code></pre>\n\n<p>Or maybe replace <code>F f</code> with <code>F&amp;&amp; f</code>.</p>\n\n<p>But after I learned about ref-qualifiers (ouch), things got complicated. Imagine a functor class:</p>\n\n<pre><code>struct Foo {\n    void operator()(...) &amp;;\n    void operator()(...) &amp;&amp;;\n};\n</code></pre>\n\n<p>Then my previous implementations of <code>doStuff</code> will only ever call the <code>&amp;</code> method, since parameters are always lvalues.</p>\n\n<p>I think the way to resolve this is to implement <code>doStuff</code> like this:</p>\n\n<pre><code>template&lt;typename F, typename... Args&gt;\nvoid doStuff(F&amp;&amp; f, Args&amp;&amp;... args)\n{\n    // ...\n    std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n    // ...\n}\n</code></pre>\n\n<p>This is also how <code>std::result_of</code> is <a href=\"http://en.cppreference.com/w/cpp/types/result_of#Possible_implementation\" rel=\"nofollow\">possibly implemented</a>. What I want to know is, is there any drawback to this implementation, i.e., should I replace all my HOF implementations with it?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "stdthread"], "comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466017584, "post_id": 37843572, "comment_id": 63147993, "body": "Which line of code has error?"}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1466017840, "post_id": 37843572, "comment_id": 63148137, "body": "Please post complete example and information about your compiler. After adding missing variables to above code it compiled cleanly using g++ 5.3.0 on Cygwin."}, {"owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "edited": false, "score": 0, "creation_date": 1466018338, "post_id": 37843572, "comment_id": 63148425, "body": "Thank you for your comments! I am compiling the code on OS X, after check it says &quot;Apple LLVM version 7.0.2 (clang-700.1.81)&quot;. I will edit my question with full code in a few seconds."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1466018761, "post_id": 37843572, "comment_id": 63148648, "body": "You call <code>join()</code> right after you created thread in the loop, basically making your app convoluted single threaded one, what is the reason?"}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1466018977, "post_id": 37843572, "comment_id": 63148773, "body": "Your pre-declaration of checkMin has int value as parameter instead of int* . Is that maybe somehow the problem?"}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1466019062, "post_id": 37843572, "comment_id": 63148816, "body": "Yes, declaration in line 14 is wrong - after changing it to void checkMin(int* value); code compiled cleanly."}, {"owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "edited": false, "score": 0, "creation_date": 1466019277, "post_id": 37843572, "comment_id": 63148940, "body": "You&#39;re right guys, thanks a lot! I&#39;ve been thinking on why it didn&#39;t work for a few moments and the answer was that simple :)"}, {"owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1466019524, "post_id": 37843572, "comment_id": 63149097, "body": "@Slava The aim of the program was to compute the minimal value of the array in defined number of threads."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466019653, "post_id": 37843572, "comment_id": 63149163, "body": "@Rafa\u0142Pluskota, you do not achieve this purpose. Your code is single-threaded."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1466019289, "post_id": 37844231, "comment_id": 63148950, "body": "@Slava, that&#39;s for sure. I will highlught this as well."}, {"owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "edited": false, "score": 0, "creation_date": 1466025266, "post_id": 37844231, "comment_id": 63152037, "body": "@SergeyA Yes you&#39;re right - incrementing ptrTabThreads was inappropriate. The solution with std::array looks nicer and cleaner. But one more thing I don&#39;t understand - why I need to join threads in separate loop?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "edited": false, "score": 1, "creation_date": 1466038307, "post_id": 37844231, "comment_id": 63155907, "body": "@Rafa\u0142P is your intent to have all the threads running at once or did you want them to run one after the other? <code>join</code> waits for the thread to end, so your implementation just creates a thread, waits for it to end, then creates another, instead of starting them all at once."}, {"owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1466066541, "post_id": 37844231, "comment_id": 63166594, "body": "@kfsone Of course my intent was to run them all at the same time. Thanks for helping me understand the idea correctly."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1466019764, "last_edit_date": 1466019764, "creation_date": 1466019124, "answer_id": 37844231, "question_id": 37843572, "link": "https://stackoverflow.com/questions/37843572/passing-pointer-as-argument-with-stdthread-function-c11/37844231#37844231", "title": "Passing pointer as argument with std::thread function C++11", "body": "<p>The immediate problem which triggers compilation error is right here:</p>\n\n<pre><code>void checkMin(int value);\n</code></pre>\n\n<p>This is the prototype of your function, and it is incorrect - it should be </p>\n\n<pre><code>void checkMin(int* value); //&lt;-- not the pointer.\n</code></pre>\n\n<p>But this is not the only one! Your code makes no sense. Look at this fragment:</p>\n\n<pre><code>std::thread tabThreads[threadCount];\nstd::thread *ptrTabThreads = tabThreads;\n\nfor (int i = 0; i &lt; threadCount; ++i) {\n    ptrTabThreads = new std::thread(checkMin, ptrTab[i]);\n    ptrTabThreads-&gt;join();\n    ++ptrTabThreads;\n}\n</code></pre>\n\n<p>What's the purpose of all this jumping with pointers? You also have a leak in your code, since you are modifying the pointer you obtained from <code>new</code> before <code>delete</code>ing it. Why not use following simple code?</p>\n\n<pre><code>std::array&lt;std::thread, threadCount&gt; tabThreads;\n\nfor (int i = 0; i &lt; threadCount; ++i) {\n    tabThreads[i] = std::thread(checkMin, ptrTab[i]);\n    tabThreads[i].join();\n}\n</code></pre>\n\n<p>This still serves no pratical purpose (application remains effectively single-threaded, since you join your thread right after creating it), but at least, the code is correct. To really do some fancy multithreading, you need your loop to look like following:</p>\n\n<pre><code>for (int i = 0; i &lt; threadCount; ++i)\n    tabThreads[i] = std::thread(checkMin, ptrTab[i]);\n\nfor (std::thread&amp; t : tabThreads) // so-called range-for loop. Nice thing!\n    t.join();\n</code></pre>\n\n<p>This will paralellize stuff!</p>\n"}], "owner": {"reputation": 33, "user_id": 6471171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c96ca4377544c37bfed1affb6353a?s=128&d=identicon&r=PG&f=1", "display_name": "rpl", "link": "https://stackoverflow.com/users/6471171/rpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2766, "favorite_count": 0, "accepted_answer_id": 37844231, "answer_count": 1, "score": 0, "last_activity_date": 1466019813, "creation_date": 1466016725, "last_edit_date": 1466018603, "question_id": 37843572, "link": "https://stackoverflow.com/questions/37843572/passing-pointer-as-argument-with-stdthread-function-c11", "title": "Passing pointer as argument with std::thread function C++11", "body": "<p>I wanted to pass a pointer to the thread function, but it gives back </p>\n\n<blockquote>\n  <p>error: \n        attempt to use a deleted function\n      __invoke(_VSTD::move(_VSTD::get&lt;0>(__t)), _VSTD::move(_VSTD::get&lt;_In...</p>\n</blockquote>\n\n<p>Code fragment in main</p>\n\n<pre><code>for (int i = 0; i &lt; threadCount; ++i) {\n    ptrTabThreads = new std::thread(checkMin, ptrTab[i]);\n    ptrTabThreads-&gt;join();\n    ++ptrTabThreads;\n}\n</code></pre>\n\n<p>And code for checkMin function</p>\n\n<pre><code>void checkMin(int* tab) {\n    int sizeOfTable = 0;\n\n    if (tab == ptrTab[threadCount-1])\n        sizeOfTable = partSize + additionalNumbers;\n    else\n        sizeOfTable = partSize;       \n\n    mt.lock();\n    for (int i = 0; i &lt; sizeOfTable; ++i) {\n        if (tab[i] &lt; minValue) {\n            minValue = tab[i];\n        }\n    }\n    mt.unlock(); \n}\n</code></pre>\n\n<p>Where ptrTab is an array of pointers:</p>\n\n<pre><code>int* ptrTab[threadCount];\n</code></pre>\n\n<p>Full code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;climits&gt;\n\n#define threadCount 10\n#define numbersCount 75\nstd::mutex mt;\nint minValue = INT32_MAX;\nint partSize, additionalNumbers;\nint* ptrTab[threadCount];\n\nvoid checkMin(int value);\nvoid printTab(int *tab);\n\nint main() {\n    int tab[numbersCount];\n    srand(time(NULL));\n\n    for (int i = 0; i &lt; numbersCount; ++i) {\n        tab[i] = rand() % 1000;\n        std::cout &lt;&lt; \" \" &lt;&lt; tab[i];\n    }\n\n    partSize = numbersCount / threadCount;\n    additionalNumbers = numbersCount % threadCount;\n\n    for (int i = 0; i &lt; threadCount-1; ++i) {\n        int *newTab = new int[partSize];\n        ptrTab[i] = newTab;\n    }\n    int *newTab = new int[partSize+additionalNumbers];\n    ptrTab[threadCount-1] = newTab;\n\n    int copiedElements = 0;\n    for (int i = 0; i &lt; threadCount-1; ++i) {\n        int *tmpTab = ptrTab[i];\n        for (int j = 0; j &lt; partSize; j++) {\n            tmpTab[j] = tab[copiedElements];\n            copiedElements++;\n        }\n    }\n    int *tmpTab = ptrTab[threadCount-1];\n    int elementsLeft = numbersCount-copiedElements;\n    for (int i = 0; i &lt; elementsLeft; ++i) {\n        tmpTab[i] = tab[copiedElements];\n        copiedElements++;\n    }\n\n    /*for (int i = 0; i &lt; threadCount; ++i) {\n        printTab(ptrTab[i]);\n    }*/\n\n\n    //----------------------\n\n    std::thread tabThreads[threadCount];\n    std::thread *ptrTabThreads = tabThreads;\n\n    for (int i = 0; i &lt; threadCount; ++i) {\n        ptrTabThreads = new std::thread(checkMin, ptrTab[i]);\n        ptrTabThreads-&gt;join();\n        ++ptrTabThreads;\n    }\n\n    std::cout &lt;&lt; \"\\n\\n\" &lt;&lt; minValue &lt;&lt; \"\\n\\n\";\n\n    //for check\n    std::cout &lt;&lt; \"for check: minimal value is \";\n    int min = INT32_MAX;\n    for (int i = 0; i &lt; numbersCount; ++i) {\n        if (tab[i] &lt; min) {\n            min = tab[i];\n        }\n    }\n    std::cout &lt;&lt; min &lt;&lt; \"\\n\\n\";\n\n}\n\nvoid checkMin(int* tab) {\n    int sizeOfTable = 0;\n\n    if (tab == ptrTab[threadCount-1]) \n        sizeOfTable = partSize + additionalNumbers;\n    else\n        sizeOfTable = partSize;        \n\n    mt.lock();\n    for (int i = 0; i &lt; sizeOfTable; ++i) {\n        if (tab[i] &lt; minValue) {\n            minValue = tab[i];\n        }\n    }\n    mt.unlock();\n}\n\nvoid printTab(int *tab) {\n    for (int i = 0; i &lt; 10; ++i) {\n        std::cout &lt;&lt; tab[i] &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; \"\\n\\n\";\n}\n</code></pre>\n\n<p>Thank you for all your advices.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466016403, "post_id": 37843412, "comment_id": 63147335, "body": "<code>using namespace std;</code> in header file is an instant failure. <i>Doesn&#39;t work</i> means nothing."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1466016469, "post_id": 37843412, "comment_id": 63147374, "body": "I&#39;m voting to close this question as off-topic because <i>doesn&#39;t worrk</i> is not a valid description of the problem."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466016692, "post_id": 37843412, "comment_id": 63147511, "body": "You should try to reduce your code to the relevant stuff. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466018909, "post_id": 37843412, "comment_id": 63148726, "body": "@SergeyA What&#39;s <i>not working</i> is pretty obvious here. Though the OP could have chosen a better wording or description."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466019253, "post_id": 37843412, "comment_id": 63148924, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, an essential skill of software developer is an ability to clearly articulate issues. Far more important than knowing a particular language. I want to emphasize this."}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "is_accepted": false, "score": 1, "last_activity_date": 1466016508, "creation_date": 1466016508, "answer_id": 37843502, "question_id": 37843412, "link": "https://stackoverflow.com/questions/37843412/c-change-data-member-of-an-object-data-member/37843502#37843502", "title": "C++. Change data member of an Object data member", "body": "<p>You are returning objects by value, not by reference. That means, you get a <strong>copy</strong> of author but you're not modifying the one stored in Book class.</p>\n\n<p>You should modify the signature in </p>\n\n<pre><code>Author&amp; Book::getAuthor();\n</code></pre>\n\n<p>to make your changes to the object <strong>author</strong> effective</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1466016562, "creation_date": 1466016562, "answer_id": 37843516, "question_id": 37843412, "link": "https://stackoverflow.com/questions/37843412/c-change-data-member-of-an-object-data-member/37843516#37843516", "title": "C++. Change data member of an Object data member", "body": "<blockquote>\n  <p>I want to modify the mail from the Author from the test program, but <code>cppbook.getAuthor().setEmail(\"...\")</code> doesn't work.</p>\n</blockquote>\n\n<p><code>Author getAuthor();</code> should be <code>Author&amp; getAuthor();</code> if you want to change the internal object associated to <code>Book</code>.</p>\n\n<p>Otherwise you're just changing a temporary copy of that <code>Author</code> instance.</p>\n"}], "owner": {"reputation": 11, "user_id": 6471158, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GxPfc0QnCsw/AAAAAAAAAAI/AAAAAAAAAEo/vGaenvRMBCQ/photo.jpg?sz=128", "display_name": "Joan Quintana", "link": "https://stackoverflow.com/users/6471158/joan-quintana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466018790, "creation_date": 1466016287, "last_edit_date": 1466018790, "question_id": 37843412, "link": "https://stackoverflow.com/questions/37843412/c-change-data-member-of-an-object-data-member", "title": "C++. Change data member of an Object data member", "body": "<p>This is my simple code to illustrate. There is a Book that has an Author as a data member inside the class.\nI want to modify the mail from the Author from the test program, but cppbook.getAuthor().setEmail(\"...\") doesn't work. I tried passing by reference.\nI found an alternative but not satisfactory. Must be a simple answer, I think I miss something.</p>\n\n<pre><code>class Author {\nprivate:\n    string name;\n    string email;\n\npublic:\n    Author(string name, string email) {\n       this-&gt;name = name;\n       this-&gt;email = email;\n    }\n\n    string getName() {\n       return name;\n    }\n\n    string getEmail() {\n       return email;\n    }\n\n    void setEmail(string email) {\n       this-&gt;email = email;\n    }\n\n    void print() {\n       cout &lt;&lt; name &lt;&lt; \"-\" &lt;&lt; email &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<hr>\n\n<pre><code>class Book {\nprivate:\n   string name;\n   Author author; // data member author is an instance of class Author\n\npublic:\n    Book(string name, Author author)\n          : name(name), author(author) {\n    }\n\n    string getName() {\n       return name;\n    }\n\n    Author getAuthor() {\n       return author;\n    }\n\n    void print() {\n       cout &lt;&lt; name &lt;&lt; \" - \" &lt;&lt; author.getEmail() &lt;&lt; endl;\n    }\n\n\n    void setAuthorMail(string mail) {\n       author.setEmail(mail);\n    }\n};\n</code></pre>\n\n<hr>\n\n<pre><code>int main() {\n   Author john(\"John\", \"john@gmail.com\");\n   john.print();  // John-john@gmail.com\n\n   Book cppbook(\"C++ Introduction\", john);\n   cppbook.print();\n\n   cppbook.getAuthor().setEmail(\"peter@gmail.com\");\n   cppbook.print(); //mail doesn't change: C++ Introduction - john@gmail.com\n   cppbook.setAuthorMail(\"andrew@gmail.com\");\n   cppbook.print(); //mail changes: C++ Introduction - andrew@gmail.com\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/4ct0ip\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n"}, {"tags": ["c++", "gcc", "cygwin"], "comments": [{"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 1, "creation_date": 1466020280, "post_id": 37843343, "comment_id": 63149504, "body": "have you installed cygwin-devel ?"}, {"owner": {"reputation": 15096, "user_id": 200987, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1cdd96f59bb81a26d81870ba244215bc?s=128&d=identicon&r=PG", "display_name": "oligofren", "link": "https://stackoverflow.com/users/200987/oligofren"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1466025703, "post_id": 37843343, "comment_id": 63152240, "body": "Got this exact same error as well when trying to build YouCompleteMe, which tries to compile the Boost library. Also GCC 5.4.0 - installed literally 10 minutes ago. Installing cygwin-devel fixed it for me, so thanks @matzeri"}, {"owner": {"reputation": 65, "user_id": 1230190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bcf7396523942bca97f0d218b46bb55?s=128&d=identicon&r=PG", "display_name": "III.6", "link": "https://stackoverflow.com/users/1230190/iii-6"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1466054391, "post_id": 37843343, "comment_id": 63159898, "body": "@matzeri Thank you so much. That solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 15096, "user_id": 200987, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1cdd96f59bb81a26d81870ba244215bc?s=128&d=identicon&r=PG", "display_name": "oligofren", "link": "https://stackoverflow.com/users/200987/oligofren"}, "is_accepted": true, "score": 1, "last_activity_date": 1466025824, "creation_date": 1466025824, "answer_id": 37846021, "question_id": 37843343, "link": "https://stackoverflow.com/questions/37843343/updated-gcc-to-v5-4-0-on-cygwin-cmath-generates-errors/37846021#37846021", "title": "Updated GCC to v5.4.0 on Cygwin. cmath generates errors", "body": "<p>Try the suggestion by @matzeri: just install <code>cygwin-devel</code></p>\n\n<p>Got this exact same error as well when trying to build <code>YouCompleteMe</code>, which tries to compile the Boost library. Also GCC 5.4.0 - installed literally 10 minutes ago. Installing cygwin-devel fixed this exact error for me. </p>\n\n<p><em>Unfortunately, I just got a new one about <code>LONG_BIT definition</code> being wrong, but that is another question ...</em> </p>\n"}], "owner": {"reputation": 65, "user_id": 1230190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bcf7396523942bca97f0d218b46bb55?s=128&d=identicon&r=PG", "display_name": "III.6", "link": "https://stackoverflow.com/users/1230190/iii-6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 37846021, "answer_count": 1, "score": 0, "last_activity_date": 1466025824, "creation_date": 1466016048, "question_id": 37843343, "link": "https://stackoverflow.com/questions/37843343/updated-gcc-to-v5-4-0-on-cygwin-cmath-generates-errors", "title": "Updated GCC to v5.4.0 on Cygwin. cmath generates errors", "body": "<p>So I just updated my gcc installation on Cygwin from v5.3.0 to v5.4.0. I made sure to update gcc-core as well. Now when I try to compile a very simple code I get the following errors : </p>\n\n<pre><code>In file included from /usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/x86_64-pc-cygwin/bits/stdc++.h:41:0,\n                 from /cygdrive/c/Users/Mehdi/Documents/ClionProjects/Playground/main.cpp:1:\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1073:11: error: '::acoshl' has not been declared\n   using ::acoshl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1077:11: error: '::asinhl' has not been declared\n   using ::asinhl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1081:11: error: '::atanhl' has not been declared\n   using ::atanhl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1085:11: error: '::cbrtl' has not been declared\n   using ::cbrtl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1089:11: error: '::copysignl' has not been declared\n   using ::copysignl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1093:11: error: '::erfl' has not been declared\n   using ::erfl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1097:11: error: '::erfcl' has not been declared\n   using ::erfcl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1101:11: error: '::exp2l' has not been declared\n   using ::exp2l;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1105:11: error: '::expm1l' has not been declared\n   using ::expm1l;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1109:11: error: '::fdiml' has not been declared\n   using ::fdiml;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1113:11: error: '::fmal' has not been declared\n   using ::fmal;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1117:11: error: '::fmaxl' has not been declared\n   using ::fmaxl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1121:11: error: '::fminl' has not been declared\n   using ::fminl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1129:11: error: '::ilogbl' has not been declared\n   using ::ilogbl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1133:11: error: '::lgammal' has not been declared\n   using ::lgammal;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1137:11: error: '::llrintl' has not been declared\n   using ::llrintl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1141:11: error: '::llroundl' has not been declared\n   using ::llroundl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1145:11: error: '::log1pl' has not been declared\n   using ::log1pl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1149:11: error: '::log2l' has not been declared\n   using ::log2l;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1153:11: error: '::logbl' has not been declared\n   using ::logbl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1157:11: error: '::lrintl' has not been declared\n   using ::lrintl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1161:11: error: '::lroundl' has not been declared\n   using ::lroundl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1165:11: error: '::nanl' has not been declared\n   using ::nanl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1169:11: error: '::nearbyintl' has not been declared\n   using ::nearbyintl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1173:11: error: '::nextafterl' has not been declared\n   using ::nextafterl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1175:11: error: '::nexttoward' has not been declared\n   using ::nexttoward;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1176:11: error: '::nexttowardf' has not been declared\n   using ::nexttowardf;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1177:11: error: '::nexttowardl' has not been declared\n   using ::nexttowardl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1181:11: error: '::remainderl' has not been declared\n   using ::remainderl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1185:11: error: '::remquol' has not been declared\n   using ::remquol;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1189:11: error: '::rintl' has not been declared\n   using ::rintl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1193:11: error: '::roundl' has not been declared\n   using ::roundl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1197:11: error: '::scalblnl' has not been declared\n   using ::scalblnl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1201:11: error: '::scalbnl' has not been declared\n   using ::scalbnl;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1205:11: error: '::tgammal' has not been declared\n   using ::tgammal;\n           ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/cmath:1209:11: error: '::truncl' has not been declared\n   using ::truncl;\n</code></pre>\n\n<p>I haven't tried to completely delete Cygwin and re-install everything since I consider that a really bad last effort. and I really don't think editing cmath to remove all those \"using\"s would be a good idea since it could lead to unpredictable behavior or more compilation bugs. So ... what's wrong ?</p>\n"}, {"tags": ["c++", "opengl", "shading", "libigl"], "comments": [{"owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1466098328, "post_id": 37843326, "comment_id": 63188520, "body": "do you have an image, how it should look like?"}, {"owner": {"reputation": 188, "user_id": 306574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a595e2597c89635fab89845fe75c11c?s=128&d=identicon&r=PG", "display_name": "nclement", "link": "https://stackoverflow.com/users/306574/nclement"}, "reply_to_user": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1466200859, "post_id": 37843326, "comment_id": 63236465, "body": "@Thomas something like the second image I just posted. However, as you can see the shadows are turned off, so valleys/mountains are not obvious."}], "owner": {"reputation": 188, "user_id": 306574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a595e2597c89635fab89845fe75c11c?s=128&d=identicon&r=PG", "display_name": "nclement", "link": "https://stackoverflow.com/users/306574/nclement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1469400071, "creation_date": 1466015988, "last_edit_date": 1469400071, "question_id": 37843326, "link": "https://stackoverflow.com/questions/37843326/libigl-strange-shading-on-mesh-faces", "title": "libIGL strange shading on mesh faces", "body": "<p>I'm using libIGL to generate a tet-mesh, and would like to visualize this mesh with colors. Each vertex has a different value (result of using the Graph Laplacian to minimize the quadratic energy), and these values have been converted to colors using <code>igl::jet</code>. I would like to \"slice\" my tet-mesh at different z-values, and have followed <a href=\"https://github.com/libigl/libigl/blob/master/tutorial/605_Tetgen/main.cpp\" rel=\"nofollow noreferrer\">Example 605</a> to do so.</p>\n\n<p>When this is visualized, the colors are all right, but the shading is all wrong (as can be seen in the image below). Is there an (easy) way to fix the shading? I've tried using both <a href=\"https://github.com/libigl/libigl/blob/master/include/igl/bfs_orient.h\" rel=\"nofollow noreferrer\" title=\"bfs_orient\">bfs_orient</a> and <a href=\"https://github.com/libigl/libigl/blob/master/include/igl/embree/reorient_facets_raycast.h%20reoirent_faces_raycast\" rel=\"nofollow noreferrer\">embree::reorient_faces_raycast</a> to no avail.</p>\n\n<p><a href=\"https://i.stack.imgur.com/02XH9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/02XH9.png\" alt=\"coloring of tetmesh with strange shading\"></a></p>\n\n<p>To reproduce the problem, just lines 52-54 of Example 605 to be:</p>\n\n<pre><code>    Eigen::VectorXd C = V_temp.col(2);\n    Eigen::MatrixXd Col;\n    igl::jet(C, true, Col);\n    viewer.data.clear();\n    viewer.data.set_mesh(V_temp,F_temp);\n    viewer.data.set_colors(Col);\n    viewer.data.set_face_based(false);\n</code></pre>\n\n<p>Edit: I can turn off the lighting by adding</p>\n\n<pre><code>    viewer.core.lighting_factor = 0;\n</code></pre>\n\n<p>The resulting image is:\n<a href=\"https://i.stack.imgur.com/mQdRp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mQdRp.png\" alt=\"image with dating turned off\"></a>\nHowever, this doesn't have any lighting, and I can't help but feel there's a better way that will preserve the lighting. Perhaps something that exposes the OpenGL_Shader?</p>\n"}, {"tags": ["c++", "c++11", "function-pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1466016006, "post_id": 37843302, "comment_id": 63147086, "body": "Yes, writing a 4-line function was such terrible boilerplate... The fact of the matter is that a lot of people don&#39;t need a pointer to a function that returns a newly allocated object of an arbitrary type. Some people do, but you can write that yourself, as you have done."}, {"owner": {"reputation": 9267, "user_id": 2284221, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/120d229a55c7a6ce3037e6932c190616?s=128&d=identicon&r=PG", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/2284221/patrick-collins"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1466016046, "post_id": 37843302, "comment_id": 63147106, "body": "@Nicol: there are about 20 in the real code."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1466016117, "post_id": 37843302, "comment_id": 63147160, "body": "C++ does not allow you to obtain the address of a constructor. So you have to wrap the <code>new</code> in a function, then you can get the address of that function.  Using a template is the cleanest solution, but I would suggest a two-parameter template so you can specify the <code>arg</code> typename as well, then you don&#39;t need separate <code>A</code> and <code>B</code> functions. <code>template&lt;typename FooType, typename ArgType&gt; FooType* makeFoo(ArgType arg) { return new FooType(arg); }</code>, <code>&amp;MakeFoo&lt;FooType1, A&gt;</code>, <code>&amp;MakeFoo&lt;FooType1, B&gt;</code>, etc."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1466016118, "post_id": 37843302, "comment_id": 63147161, "body": "Why are there 20 lines? You can use variadic templates to pass along any number of parameter types."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1466016156, "post_id": 37843302, "comment_id": 63147180, "body": "What do you need such a pointer for? What problem does <code>makeFoo&lt;X&gt;(a)</code> solve that writing <code>new X(a)</code> doesn&#39;t?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1466016386, "post_id": 37843302, "comment_id": 63147325, "body": "@Barry: maybe the functions are being used in a class factory that registers function pointers at runtime."}, {"owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "edited": false, "score": 0, "creation_date": 1466016414, "post_id": 37843302, "comment_id": 63147344, "body": "I don&#39;t fully understand the question: Where do you get &quot;function pointers&quot; here? Are you omitting some typedefs? Also: Why don&#39;t use perfect-forwarding to construct arbitrary objects? In that case one templated function would be sufficient."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466016451, "post_id": 37843302, "comment_id": 63147366, "body": "@RemyLebeau I&#39;m asking because it&#39;s an important part of the question. Maybe the function pointers aren&#39;t necessary at all. Maybe there&#39;s an external API that requires them, etc."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1466016537, "post_id": 37843302, "comment_id": 63147414, "body": "@Barry: the <i>why</i> is not relevant to the question as it is asked, only the <i>how</i> is important. We have to answer the question as asked. If you want to query the OP for the <i>why</i> in order to offer alternative solutions, that is a different matter, but that is not what the OP is asking for."}, {"owner": {"reputation": 9267, "user_id": 2284221, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/120d229a55c7a6ce3037e6932c190616?s=128&d=identicon&r=PG", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/2284221/patrick-collins"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466016676, "post_id": 37843302, "comment_id": 63147495, "body": "@Remy -- yes, that&#39;s exactly the situation (a class factory)"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1466017204, "last_edit_date": 1466017204, "creation_date": 1466016785, "answer_id": 37843590, "question_id": 37843302, "link": "https://stackoverflow.com/questions/37843302/pointer-to-constructor-overload/37843590#37843590", "title": "Pointer to constructor overload?", "body": "<p>Yes, just use a lambda. A capture-less lambda can be implicitly converted to a function pointer:</p>\n\n<pre><code>X*(*p)(A) = [](A arg){ return new X(arg); };\n</code></pre>\n\n<p>If you want even less typing and more safety, you could also just take a pointer to the right specialization of <code>std::make_unique</code>:</p>\n\n<pre><code>auto p2 = std::make_unique&lt;X, A&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": true, "score": 7, "last_activity_date": 1466017023, "creation_date": 1466017023, "answer_id": 37843662, "question_id": 37843302, "link": "https://stackoverflow.com/questions/37843302/pointer-to-constructor-overload/37843662#37843662", "title": "Pointer to constructor overload?", "body": "<p>You might merge all the makeFooA&lt;>(), makeFooB&lt;>(), etc. functions into a single generic template:</p>\n\n<pre><code>template&lt;typename T, typename... Args&gt;\nT* make_ptr(Args&amp;&amp;... args)\n{\n    return new T(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>This has the advantage that passing multiple parameters is now possible (either by value or by reference) and the drawback that you need to specify full signature when taking the address, i.e., &amp;make_ptr.</p>\n\n<p>Note that, if you have boost, you don't need to implement it yourself: <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/functional/factory/doc/html/\">http://www.boost.org/doc/libs/1_61_0/libs/functional/factory/doc/html/</a></p>\n"}], "owner": {"reputation": 9267, "user_id": 2284221, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/120d229a55c7a6ce3037e6932c190616?s=128&d=identicon&r=PG", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/2284221/patrick-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 37843662, "answer_count": 2, "score": 1, "last_activity_date": 1466017204, "creation_date": 1466015918, "question_id": 37843302, "link": "https://stackoverflow.com/questions/37843302/pointer-to-constructor-overload", "title": "Pointer to constructor overload?", "body": "<p>I have a bunch of legacy code that looks like:</p>\n\n<pre><code>#define MAKE_FOO_FNS(fooname) \\\nfooname* makeFoo_ ## fooname ## A(A arg) { \\\n  return new fooname(arg); \\\n} \\\nfooname* makeFoo_ ## fooname ## B(B arg) { \\\n  return new fooname(arg); \\\n} \\\n// ... repeated many more times \n</code></pre>\n\n<p>so that later in the code we can say:</p>\n\n<pre><code>MAKE_FOO_FNS(FooType1);\nMAKE_FOO_FNS(FooType2);\n</code></pre>\n\n<p>and then have access to function pointers with the types:</p>\n\n<pre><code> FooType1* (*)(A);\n FooType1* (*)(B);\n FooType2* (*)(A);\n FooType2* (*)(B);\n</code></pre>\n\n<p>I know that I can replace <code>MAKE_FOO_FNS</code> with templates:</p>\n\n<pre><code>template&lt;typename FooType&gt;\nFooType* makeFooA(A arg) {\n  return new FooType(arg);\n}\n// .. etc ..\n</code></pre>\n\n<p>so that we can get the function pointer from <code>&amp;MakeFooA&lt;FooType1&gt;</code>, <code>&amp;MakeFooA&lt;FooType2&gt;</code>, etc, without any macro hackery.</p>\n\n<p>But this still seems like unnecessary boilerplate --- is there a (C++11) way to get a function pointer directly to \"invoking operator <code>new</code> of <code>FooType1</code> with the constructor that takes an <code>A</code>\" without writing all of these wrapper functions?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1466015822, "post_id": 37843238, "comment_id": 63146978, "body": "What&#39;s the question? Why <i>not</i>? Clearly the second function is a better match (requiring one less conversion)."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1466015991, "post_id": 37843238, "comment_id": 63147075, "body": "@KerrekSB Can you elaborate? The overload resolution rules always make my head ache."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466016080, "post_id": 37843336, "comment_id": 63147130, "body": "&quot;in all cases&quot; - close, but not quite."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466016158, "post_id": 37843336, "comment_id": 63147183, "body": "@T.C. I cannot figure out a case that it won&#39;t match.  Even <code>template&lt;class T&gt; void operator()(T)</code> and <code>template&lt;class T&gt; void operator(T&amp;&amp;)</code> shouldn&#39;t distinguish?  Same with r/l value this... what am I missing?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1466016318, "post_id": 37843336, "comment_id": 63147286, "body": "In the first case, you get the fun adjustments applied to <code>B</code>. <a href=\"http://coliru.stacked-crooked.com/a/9d50e88749850fc4\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9d50e88749850fc4</a> (Of course, it isn&#39;t <code>result_of</code>&#39;s fault; the problem happens earlier, when the function type is formed...)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1466016112, "last_edit_date": 1466016112, "creation_date": 1466016022, "answer_id": 37843336, "question_id": 37843238, "link": "https://stackoverflow.com/questions/37843238/stdresult-of-for-lvalue-rvalue-arguments/37843336#37843336", "title": "std::result_of for lvalue/rvalue arguments", "body": "<p><code>std::result_of</code> when given non-reference parameters presumes they are rvalues.</p>\n\n<p>In fact, <code>std::result_of_t&lt;A(B)&gt;</code> is the same as <code>std::result_of_t&lt;A(B&amp;&amp;)&gt;</code> in almost all cases.</p>\n\n<p>You can see some <a href=\"http://en.cppreference.com/w/cpp/types/result_of\" rel=\"nofollow\">possibile implementations here</a> if you want to see why.  Basically, <code>result_of_t&lt;A(B)&gt;</code> does a <code>decltype( std::declval&lt;A&gt;()(std::declval&lt;B&gt;()) )</code> (ignoring member function pointer cases), and a <code>B&amp;&amp;</code> rvalue reference and a temporary <code>B</code> will invoke the same overloads of any <code>operator()</code> on an <code>A</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": false, "score": 1, "last_activity_date": 1466016492, "creation_date": 1466016492, "answer_id": 37843496, "question_id": 37843238, "link": "https://stackoverflow.com/questions/37843238/stdresult-of-for-lvalue-rvalue-arguments/37843496#37843496", "title": "std::result_of for lvalue/rvalue arguments", "body": "<p>There are <a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow\">three primary value categories</a> (lvalue, prvalue and xvalue), and three <a href=\"http://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow\">reference qualifiers</a> (none, <code>&amp;</code> and <code>&amp;&amp;</code>).</p>\n\n<p>Clearly it makes sense that <code>&amp;</code> should designate lvalue category and <code>&amp;&amp;</code> should designate xvalue; it follows that an omitted reference qualifier should designate prvalue.</p>\n\n<p>Note that this is the same as you would get for a function with the corresponding return type:</p>\n\n<pre><code>int f(); // returns prvalue int\nint&amp; f(); // returns lvalue reference to int\nint&amp;&amp; f(); // returns xvalue reference to int\n</code></pre>\n\n<p>And in your case:</p>\n\n<pre><code>const int&amp; f();\nint&amp;&amp; g();\nint h();\n\ndecltype(Foo{}(f())) a;  // int\ndecltype(Foo{}(g())) b;  // char\ndecltype(Foo{}(h())) c;  // char\n</code></pre>\n\n<p>So you can see that <code>result_of</code> is just showing what <code>decltype</code> would tell you.</p>\n"}], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 37843336, "answer_count": 2, "score": 1, "last_activity_date": 1466016492, "creation_date": 1466015674, "question_id": 37843238, "link": "https://stackoverflow.com/questions/37843238/stdresult-of-for-lvalue-rvalue-arguments", "title": "std::result_of for lvalue/rvalue arguments", "body": "<p>I noticed this behavior of <code>std::result_of</code> when playing around:</p>\n\n<pre><code>struct Foo {\n    int operator()(const int&amp;) const { ... }\n    char operator()(int&amp;&amp;) const { ... }\n};\n\nresult_of_t&lt;Foo(const int&amp;)&gt; a;  // int\nresult_of_t&lt;Foo(int&amp;&amp;)&gt;      b;  // char\nresult_of_t&lt;Foo(int)&gt;        c;  // char -- why?\n</code></pre>\n\n<p>Why does <code>std::result_of</code> prefer the function taking an rvalue reference for the third case?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1466015613, "post_id": 37843196, "comment_id": 63146854, "body": "<code>__delegate</code> is a function. It&#39;s just like <code>int f();</code>, and the you say <code>f()</code>."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1528023171, "post_id": 37843196, "comment_id": 88341056, "body": "@vsoftco I have reopened the question as I am pretty sure it is not a duplicate. The question has a misleading title but it targets declval protector usage, not declval principles of work."}], "answers": [{"comments": [{"owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "edited": false, "score": 0, "creation_date": 1466015858, "post_id": 37843245, "comment_id": 63147005, "body": "And what&#39;s the purpose of the return statement?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "edited": false, "score": 1, "creation_date": 1466015994, "post_id": 37843245, "comment_id": 63147076, "body": "@MattiaF.: To make the function well-formed and avoid warnings perhaps? Note that the function isn&#39;t defined, by the way."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466016058, "post_id": 37843245, "comment_id": 63147116, "body": "I am surprised gcc actually has this implementation. I&#39;d expect it to have declaration only. Are they trying to be nice to users? :)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466016468, "post_id": 37843245, "comment_id": 63147372, "body": "Funny thing is that this template is ill-formed since it has no valid specialization. But it&#39;s okay since it occurs inside the implementation ;)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1466016542, "post_id": 37843245, "comment_id": 63147415, "body": "@Brian Hmm, there can hypothetically be a specialization of <code>__declval_protector</code> later that has a true <code>__stop</code>, no?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466016603, "post_id": 37843245, "comment_id": 63147455, "body": "@T.C. Oh yeah, that could be the case... I just realized I&#39;m not entirely sure how that rule is supposed to be interpreted."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466016995, "post_id": 37843245, "comment_id": 63147675, "body": "@T.C. It would be a lot simpler if we could just allow <code>static_assert(false, ...)</code> in these cases."}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "reply_to_user": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "edited": false, "score": 4, "creation_date": 1466018169, "post_id": 37843245, "comment_id": 63148325, "body": "@Mattia F. If a static_assert isn&#39;t dependent on a template parameter, it fires whether the template is instantiated or not."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466026422, "post_id": 37843245, "comment_id": 63152563, "body": "@T.C.: I think It&#39;s also UB if your program defines specializations that are not visible at the time of instantiation, isn&#39;t it?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466026522, "post_id": 37843245, "comment_id": 63152613, "body": "@KerrekSB Time of instantiation or time of definition? Of course this triggers an error at instantiation time when there turns out to be no such specialization after all."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1466033764, "post_id": 37843245, "comment_id": 63154904, "body": "@T.C.: Hm, that&#39;s true. I was trying to address the point of the template being ill-formed, but I&#39;m not sure whether it really matters."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 17, "last_activity_date": 1466015697, "creation_date": 1466015697, "answer_id": 37843245, "question_id": 37843196, "link": "https://stackoverflow.com/questions/37843196/how-does-stddeclval-work/37843245#37843245", "title": "How does std::declval work?", "body": "<blockquote>\n  <p>I don't understand why the static_assert is not called every time I call declval, since __stop is always false</p>\n</blockquote>\n\n<p>Your premise is wrong. The static assert <em>is</em> indeed called every time you call <code>declval</code>. The trick is that <em>you must never call <code>declval</code></em>. It must only be used in unevaluated contexts. That's why the static assertion is there.</p>\n"}], "owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1528023057, "creation_date": 1466015547, "last_edit_date": 1466108090, "question_id": 37843196, "link": "https://stackoverflow.com/questions/37843196/how-does-stddeclval-work", "title": "How does std::declval work?", "body": "<p>Can somebody explain how does std::declval work?\nI've found this implementation inside gcc headers/type_traits (lines 2248-2262), which is (cleared up a bit to improve readability):</p>\n\n<pre><code>template&lt;typename _Tp&gt;\nstruct __declval_protector\n{\n    static const bool __stop = false;\n    static typename add_rvalue_reference&lt;_Tp&gt;::type __delegate();\n};\n\ntemplate&lt;typename _Tp&gt;\ntypename add_rvalue_reference&lt;_Tp&gt;::type\ndeclval ()\n{\n    static_assert(__declval_protector&lt;_Tp&gt;::__stop, \"declval() must not be used!\");\n    return __declval_protector&lt;_Tp&gt;::__delegate();\n}\n</code></pre>\n\n<p>I don't understand the part <code>return __declval_protector&lt;_Tp&gt;::__delegate()</code>, does it call the <em>default initializer</em> for an Rvalue reference of type <em>T</em>?\nAlso i don't understand why the <code>static_assert</code> is not called every time I call <code>declval</code>, since <code>__stop</code> is always false (And how can it distinguish between unevaluated contexts and evaluated ones?). </p>\n\n<p><strong>EDIT:</strong>\nFrom what I understand now, all this stuff is equivalent to:</p>\n\n<pre><code>template&lt;typenam _Tp&gt;\nstruct __declval_protector\n{\n    const bool __stop = false;\n};\n\ntemplate&lt;typename _Tp&gt;\ntypename add_rvalue_reference&lt;_Tp&gt;::type\nmydeclval ()\n{\n    static_assert(__declval_protector&lt;_Tp&gt;::__stop, \"declval() must not be used!\");\n}\n</code></pre>\n\n<p>But of course the compiler will issue that we do not return anything.</p>\n"}, {"tags": ["c++", "algorithm", "encryption", "base64"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466018792, "post_id": 37843061, "comment_id": 63148666, "body": "Ever heard of padding?"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1466015402, "creation_date": 1466015402, "answer_id": 37843153, "question_id": 37843061, "link": "https://stackoverflow.com/questions/37843061/base64-algorithm-with-multiple-result-of-a-factor-in-c/37843153#37843153", "title": "Base64 algorithm with multiple result of a factor in C++", "body": "<p>Pad the result of the base4 encoding to be a multiple of 16.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1466015868, "creation_date": 1466015868, "answer_id": 37843287, "question_id": 37843061, "link": "https://stackoverflow.com/questions/37843061/base64-algorithm-with-multiple-result-of-a-factor-in-c/37843287#37843287", "title": "Base64 algorithm with multiple result of a factor in C++", "body": "<p>base64 encoder encodes your 8-bit data using 6-bits per character, so for every 3 bytes of input data you get 4 bytes of output data (plus padding to 4-byte boundary). So data size passed to AES algorithm may have length which is not multiple of 16.</p>\n\n<p>Please check documentation for your AES library - chances are that it can handle this internally if you call special function for last chunk of data (e.g. <code>EVP_EncryptFinal_ex</code> in OpenSSL). Another solution is to pad data to 16-byte boundary in your code before encrypting it.</p>\n"}, {"tags": [], "owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "is_accepted": false, "score": 0, "last_activity_date": 1466021386, "last_edit_date": 1466021386, "creation_date": 1466021063, "answer_id": 37844732, "question_id": 37843061, "link": "https://stackoverflow.com/questions/37843061/base64-algorithm-with-multiple-result-of-a-factor-in-c/37844732#37844732", "title": "Base64 algorithm with multiple result of a factor in C++", "body": "<p>Most AES implementations support padding such as PKCS#7 (n\u00e9e PKCS#5). This will add the required padding bytes on encryption and remove then on decryption.</p>\n\n<p>AES is a data based function and as such accepts any bytes so it's not necessary to Base64 encode prior to encryption. Encrypted data is just bytes, not characters, so the output may need to be encoded with a method such as Base64 or hexadecimal based on the usage such as the need for printable characters.</p>\n"}], "owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466021386, "creation_date": 1466015136, "last_edit_date": 1466016286, "question_id": 37843061, "link": "https://stackoverflow.com/questions/37843061/base64-algorithm-with-multiple-result-of-a-factor-in-c", "title": "Base64 algorithm with multiple result of a factor in C++", "body": "<p>I have the following problem: I need to convert a certain content to base64 to prevent some problems with characters, and after this conversion I need to encrypt this data with one Aes algorithm with a key length of 16. The problem occurs when the result of the base64 algorithm returns a response with size that is not a multiple of 16 causing problems on encryption, considering that the size of the original content are multiples of 16. How can I avoid this problem?</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 1500, "user_id": 2716244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc26e30a27c57bdbfec658910fea4db?s=128&d=identicon&r=PG&f=1", "display_name": "igorushi", "link": "https://stackoverflow.com/users/2716244/igorushi"}, "edited": false, "score": 0, "creation_date": 1466016103, "post_id": 37843050, "comment_id": 63147151, "body": "You need to instantiate fixed fields in unsafe block."}, {"owner": {"reputation": 1500, "user_id": 2716244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc26e30a27c57bdbfec658910fea4db?s=128&d=identicon&r=PG&f=1", "display_name": "igorushi", "link": "https://stackoverflow.com/users/2716244/igorushi"}, "edited": false, "score": 1, "creation_date": 1466016340, "post_id": 37843050, "comment_id": 63147299, "body": "Encoding.GetBytes will solve your second problem <a href=\"https://msdn.microsoft.com/en-us/library/ds4kkd55(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ds4kkd55(v=vs.110).aspx</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "edited": false, "score": 0, "creation_date": 1466032171, "post_id": 37843378, "comment_id": 63154498, "body": "Your example is excellent and I hope it works for me. I can&#39;t try it right at this moment but I will a little later when I get to my desk. As for using a marshalling attribute, it&#39;s another option I wasn&#39;t sure how to setup and the project was nearing it&#39;s scheduled deadline. Once I had it all working I left it alone to meet the deadline. I&#39;m going to try your suggestions and will provide an update later this evening. Thank you for taking the time. I truly appreciate your help."}, {"owner": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "edited": false, "score": 0, "creation_date": 1466099317, "post_id": 37843378, "comment_id": 63189122, "body": "I am trying your first example, but I receive <code>Type could not be marshaled because the length of an embedded array instance does not match the declared length in the layout.</code> Is this caused because my <code>int[] SomeList</code> does not contain 288 elements in the array and/or <code>byte[] PathToData</code> is not exactly 256 bytes? SomeList will not always be initialized with 288 elements - sometimes only 1 element and of course, PathToData is not exactly 256 bytes length. Just wondering if this is why I&#39;m getting the error and if so, how might this be overcome?"}, {"owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "reply_to_user": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "edited": false, "score": 1, "creation_date": 1466103029, "post_id": 37843378, "comment_id": 63191292, "body": "I think you&#39;re right -- I was assuming that C# would zero-extend the arrays, but I guess it won&#39;t do that automatically.  You can try manually extend your arrays to the right size.  For example, you could allocate an array of the correct size and then copy from your smaller array to the correctly-sized array using Array.Copy()."}, {"owner": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "edited": false, "score": 0, "creation_date": 1466292419, "post_id": 37843378, "comment_id": 63258015, "body": "I know this question has been marked as answered. Maybe I should ask a new one, but I think this is considered related. When I call the DLL&#39;s entry point I get an exception - <code>Method&#39;s type signature is not PInvoke compatible.</code> I&#39;ve read other SO questions/answers, but not able to see how they help. Does it stand out to you why I would be receiving this error? Remember, I do not have access to the C++ source code for the 3rd party DLL. I&#39;ll ask a new question if you think I should."}, {"owner": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "edited": false, "score": 0, "creation_date": 1466297218, "post_id": 37843378, "comment_id": 63258858, "body": "I have asked a new question here: <a href=\"http://stackoverflow.com/questions/37902919/c-sharp-calling-c-3rd-party-dll-no-source-raises-exception-not-pinvoke-com\" title=\"c sharp calling c 3rd party dll no source raises exception not pinvoke com\">stackoverflow.com/questions/37902919/&hellip;</a>"}], "tags": [], "owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "is_accepted": true, "score": 3, "last_activity_date": 1466103455, "last_edit_date": 1466103455, "creation_date": 1466016192, "answer_id": 37843378, "question_id": 37843050, "link": "https://stackoverflow.com/questions/37843050/c-how-to-set-member-arrays-of-an-unsafe-struct/37843378#37843378", "title": "C#: How to set member arrays of an unsafe struct", "body": "<p>Is there some reason you're using an unsafe struct?  Can you not use marshalling attributes?  See <a href=\"https://msdn.microsoft.com/en-us/library/eshywdt7(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/eshywdt7(v=vs.110).aspx</a></p>\n\n<p>Regardless, you need to know how you're converting from a C# string to a byte array, and that depends on what encoding your C++ DLL expects that string to be in.  For example, on Windows, it is often the \"ANSI code page\", but on Linux/Unix it might be either \"current locale\" or explicitly \"UTF-8\".  </p>\n\n<p>So, one option that gives you the most control over the encoding would be to do somethiing like:</p>\n\n<pre><code>    [StructLayout(LayoutKind.Sequential)]\n    public struct MyDllInput\n    {\n        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 288)]\n        public int[] SomeList;\n\n        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 256)]\n        public byte[] PathToData;\n    }\n    public static void Main()\n    {\n        MyDllInput dllInput = new MyDllInput()\n        {\n            SomeList = new int[288],\n            PathToData = new byte[256]\n        };\n\n        var listData = new int[] { 0, 12, 33, 67, 93 };\n        Array.Copy(listData, dllInput.SomeList, listData.Length);\n\n        var pathToDataBytes = Encoding.UTF8.GetBytes(\"C:\\\\some\\\\path\\\\to\\\\data\");\n        Array.Copy(pathToDataBytes, dllInput.PathToData, pathToDataBytes.Length);\n    }\n</code></pre>\n\n<p>Alternatively, instead of doing the encoding conversion directly, you can try declaring the PathToData as a string and then using a marshalling attribute to have C# convert it for you; see <a href=\"https://msdn.microsoft.com/en-us/library/s9ts558h(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/s9ts558h(v=vs.110).aspx</a>:</p>\n\n<pre><code>    [StructLayout(LayoutKind.Sequential)]\n    public struct MyDllInput\n    {\n        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 288)]\n        public int[] SomeList;\n\n        [MarshalAs(UnmanagedType.ByValTStr, SizeConst =256)]\n        public String PathToData;\n    }\n    public static void Main()\n    {\n        MyDllInput dllInput = new MyDllInput()\n        {\n            SomeList = new int[288],\n            PathToData = \"C:\\\\some\\\\path\\\\to\\\\data\"\n        };            \n\n        var listData = new int[] { 0, 12, 33, 67, 93 };\n        Array.Copy(listData, dllInput.SomeList, listData.Length);\n    }\n</code></pre>\n\n<p>In the second case, it's important that when you declare EntryPoint you set the CharSet property on the DllImportAttribute to get the string conversion to happen the way you want.  In your case, you <em>probably</em> want CharSet.Ansi since your DLL takes a char* and not a wchar_t*.  For example,</p>\n\n<pre><code>    [DllImport(\"MyDll.dll\", CharSet = CharSet.Ansi)]\n    private static extern void EntryPoint(ref MyDllInput input);\n</code></pre>\n"}], "owner": {"reputation": 5348, "user_id": 1357113, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7bdb1955c5c31b90536a81dba8260198?s=128&d=identicon&r=PG", "display_name": "rwkiii", "link": "https://stackoverflow.com/users/1357113/rwkiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 37843378, "answer_count": 1, "score": 1, "last_activity_date": 1466103455, "creation_date": 1466015100, "question_id": 37843050, "link": "https://stackoverflow.com/questions/37843050/c-how-to-set-member-arrays-of-an-unsafe-struct", "title": "C#: How to set member arrays of an unsafe struct", "body": "<p>I am working on a VS 2015 MVC C# web application that loads a 3rd party C++ DLL I do not have source code for. The DLL requires an input param. The new spec requires a couple of array members. One is an <code>int</code> array and the other is a <code>char</code> array.</p>\n\n<p>My C# struct defines the intended <code>char</code> array as <code>byte</code> to match the 8-bit C++ char:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential)]\npublic unsafe struct MyDLLInput\n{\n    public fixed int SomeList[288];\n    public fixed byte PathToData[256];\n};\n</code></pre>\n\n<p>The struct seems correct to me, but now I need to set values and I'm not having any success.</p>\n\n<pre><code>MyDLLInput dllInput = new MyDLLInput()\n{\n    SomeList = new int[] {0,12,33,67,93},\n    PathToData = \"C:\\\\some\\\\path\\\\to\\\\data\"\n}\n\n// Call 3rd Party DLL\nMyDLLOutput = MyDLL.EntryPoint(MyDLLInput);\n</code></pre>\n\n<p>For both member arrays I am getting the following error:</p>\n\n<blockquote>\n  <p>Fixed size buffers can only be accessed through locals or fields.</p>\n</blockquote>\n\n<p>There are at least a couple of things going on here - aside from the proper way of setting the values using a local I also have to make an encoding conversion from <code>string</code> to <code>byte[]</code>.</p>\n\n<p>Can someone provide me with a code example of a clean way to set these values?</p>\n"}, {"tags": ["c++", "directx", "directx-11", "direct3d", "direct3d11"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6048087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GwCUYqizApE/AAAAAAAAAAI/AAAAAAAAABA/7CbUKic9nOw/photo.jpg?sz=128", "display_name": "Zakary Strange", "link": "https://stackoverflow.com/users/6048087/zakary-strange"}, "edited": false, "score": 0, "creation_date": 1466190902, "post_id": 37852079, "comment_id": 63232200, "body": "I checked all the functions watching the registers, and they are all returning S_OK"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "reply_to_user": {"reputation": 31, "user_id": 6048087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GwCUYqizApE/AAAAAAAAAAI/AAAAAAAAABA/7CbUKic9nOw/photo.jpg?sz=128", "display_name": "Zakary Strange", "link": "https://stackoverflow.com/users/6048087/zakary-strange"}, "edited": false, "score": 0, "creation_date": 1466574630, "post_id": 37852079, "comment_id": 63366352, "body": "Add error checks. Initialize all variables. Turn on the DEBUG device and look for error messages."}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 0, "last_activity_date": 1466060694, "creation_date": 1466060694, "answer_id": 37852079, "question_id": 37842927, "link": "https://stackoverflow.com/questions/37842927/directx-11-hello-triangle-not-rendering/37852079#37852079", "title": "DirectX 11. Hello Triangle not rendering", "body": "<p>The code you've posted is missing error checking of the <code>HRESULT</code> on most of the Direct3D calls. If a COM call returns a <code>void</code> you don't have to handle the error, otherwise you do. You can do this with the <code>SUCCEEDED</code> macro, the <code>FAILED</code> macro, or with the <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ThrowIfFailed\" rel=\"nofollow\">ThrowIfFailed</a> helper. I'd bet at least one of your calls is failing and you don't notice because you aren't checking for a failure result.</p>\n\n<p>Second, you should enable the Debug device by passing <code>D3D11_CREATE_DEVICE_DEBUG</code> as the 4th parameter. Then look for ERROR or CORRUPTION messages in your debug output. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2012/11/30/direct3d-sdk-debug-layer-tricks/\" rel=\"nofollow\">this post</a>.</p>\n\n<blockquote>\n  <p>Not sure where you got your original \"hello world\" tutorial, but you should take a look at the <a href=\"https://github.com/walbourn/directx-vs-templates/wiki\" rel=\"nofollow\">Direct3D Game VS Templates</a> and the <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow\">DirectX Tool Kit</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 6048087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GwCUYqizApE/AAAAAAAAAAI/AAAAAAAAABA/7CbUKic9nOw/photo.jpg?sz=128", "display_name": "Zakary Strange", "link": "https://stackoverflow.com/users/6048087/zakary-strange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 848, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1466060694, "creation_date": 1466014689, "question_id": 37842927, "link": "https://stackoverflow.com/questions/37842927/directx-11-hello-triangle-not-rendering", "title": "DirectX 11. Hello Triangle not rendering", "body": "<p>I've been debugging this for about a day now and everything seems okay. Im trying to get a simple tringle to render, but nothing is showing up. I have a Pixel Shader and a Vertex Shader which is compiling okay. </p>\n\n<p>I will supply all of the code, any help would be greatly appreciated. </p>\n\n<p>Main C++ File:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;D3D11_1.h&gt;\n\nstatic int ScreenWidth = 1280;\nstatic int ScreenHeight = 720;\n\nstatic bool GlobalRunning;\n\nstatic ID3D11Device *Device;\nstatic ID3D11DeviceContext *DeviceContext;\nstatic IDXGISwapChain1 *SwapChain;\nstatic ID3D11RenderTargetView *RenderTargetView;\n\n#define Assert(Expression) if(!(Expression)) { *(int *)0 = 0;}\n\nstruct vec3\n{\n    float X;\n    float Y;\n    float Z;\n};\n\nstruct vec4\n{\n    float X;\n    float Y;\n    float Z;\n    float W;\n};\n\nstruct vertex\n{\n    vec3 Position;\n    vec4 Color;\n};\n\nstatic int\nSafeTruncateUInt64(LONG Value)\n{\n    Assert(Value &lt;= 0xFFFFFFFF);\n    int Result = (int)Value;\n    return(Result);\n}\n\nstruct read_file_result\n{\n    void *Contents;\n    int ContentsSize;\n};\n\nstatic read_file_result \nWin32LoadEntireFile(char *Filename)\n{\n    read_file_result Result = {};\n\n    HANDLE File = CreateFileA(Filename, GENERIC_READ, FILE_SHARE_READ, 0, OPEN_EXISTING, 0, 0);\n\n    if(File != INVALID_HANDLE_VALUE)\n    {\n        LARGE_INTEGER FileSize;\n        if(GetFileSizeEx(File, &amp;FileSize))\n        {\n            int FileSize32 = SafeTruncateUInt64(FileSize.QuadPart);\n            Result.Contents = VirtualAlloc(0, FileSize32, MEM_RESERVE|MEM_COMMIT, PAGE_READWRITE);\n            if(Result.Contents)\n            {\n                DWORD BytesRead;\n                if(ReadFile(File, Result.Contents, FileSize32, &amp;BytesRead, 0) &amp;&amp; BytesRead == FileSize32)\n                {\n                    Result.ContentsSize = FileSize32;\n                }\n                else\n                {\n                    // TODO(zak): Logging\n                }\n\n            }\n            else\n            {\n                // TODO(zak): Logging\n            }\n        }\n        else\n        {\n            // TODO(zak): Logging\n        }\n    }\n    else\n    {\n        // TODO(zak): Logging\n    }\n\n    return(Result);\n}\n\nstatic LRESULT CALLBACK\nWin32MainWindowCallback(HWND Window,\n                        UINT Message,\n                        WPARAM WParam,\n                        LPARAM LParam)\n{\n    LRESULT Result = 0;\n\n    switch(Message)\n    {\n        case WM_ACTIVATEAPP:\n        {\n            // TODO(zak): Handle this\n        } break;\n\n        case WM_SIZE:\n        {\n            ScreenWidth = LOWORD(LParam);\n            ScreenHeight = HIWORD(LParam);\n\n            RenderTargetView-&gt;Release();\n\n            SwapChain-&gt;ResizeBuffers(0, ScreenWidth, ScreenHeight, DXGI_FORMAT_UNKNOWN, 0);\n\n            ID3D11Texture2D *BackBuffer;\n            if(SwapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (void **)&amp;BackBuffer) == S_OK)\n            {\n                Device-&gt;CreateRenderTargetView(BackBuffer, 0, &amp;RenderTargetView);\n                BackBuffer-&gt;Release();\n            }\n        } break;\n\n        case WM_QUIT:\n        {\n            GlobalRunning = false;\n        } break;\n\n        case WM_DESTROY:\n        {\n            GlobalRunning = false;\n        } break;\n\n        default:\n        {\n            Result = DefWindowProcA(Window, Message, WParam, LParam);\n        }\n    }\n\n    return(Result);\n}\n\n\nint CALLBACK\nWinMain(HINSTANCE Instance,\n        HINSTANCE PrevInstance,\n        LPSTR CommandLine,\n        int ShowCode)\n{\n    WNDCLASSA WindowClass = {};\n    WindowClass.style = CS_HREDRAW|CS_VREDRAW;\n    WindowClass.lpfnWndProc = Win32MainWindowCallback;\n    WindowClass.hInstance = Instance;\n    WindowClass.lpszClassName = \"DXPlaygroundWindowClass\";\n\n    if(RegisterClassA(&amp;WindowClass))\n    {\n        RECT WindowRect;\n        WindowRect.top = 0;\n        WindowRect.bottom = ScreenHeight;\n        WindowRect.left = 0;\n        WindowRect.right = ScreenWidth;\n\n        AdjustWindowRect(&amp;WindowRect, WS_OVERLAPPEDWINDOW, 0);\n\n        HWND Window =\n            CreateWindowExA(0,\n                            WindowClass.lpszClassName,\n                            \"D3D Playground\",\n                            WS_OVERLAPPEDWINDOW,\n                            CW_USEDEFAULT, CW_USEDEFAULT,\n                            WindowRect.right - WindowRect.left,\n                            WindowRect.bottom - WindowRect.top,\n                            0, 0, Instance, 0);\n\n        if(Window)\n        {\n            D3D_FEATURE_LEVEL FeatureLevelsRequested[3]\n            {\n                D3D_FEATURE_LEVEL_11_0,\n                D3D_FEATURE_LEVEL_10_1,\n                D3D_FEATURE_LEVEL_10_0,\n            };\n\n            D3D_FEATURE_LEVEL FeatureLevelReturned;\n\n            if(D3D11CreateDevice(0,\n                                 D3D_DRIVER_TYPE_HARDWARE,\n                                 0,\n                                 0,\n                                 FeatureLevelsRequested,\n                                 3,\n                                 D3D11_SDK_VERSION,\n                                 &amp;Device,\n                                 &amp;FeatureLevelReturned,\n                                 &amp;DeviceContext) == S_OK)\n            {\n                IDXGIFactory2 *Factory;\n                if(CreateDXGIFactory(__uuidof(IDXGIFactory2), (void **)&amp;Factory) == S_OK)\n                {\n                    DXGI_SWAP_CHAIN_DESC1 SwapChainDescription = {};\n                    SwapChainDescription.Width = ScreenWidth;\n                    SwapChainDescription.Height = ScreenHeight;\n                    SwapChainDescription.Format = DXGI_FORMAT_B8G8R8A8_UNORM;\n\n                    DXGI_SAMPLE_DESC SampleDescription = {};\n                    SampleDescription.Count = 1;\n                    SampleDescription.Quality = 0;\n\n                    SwapChainDescription.SampleDesc = SampleDescription;\n                    SwapChainDescription.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;\n                    SwapChainDescription.BufferCount = 2;\n                    SwapChainDescription.Scaling = DXGI_SCALING_STRETCH;\n                    SwapChainDescription.SwapEffect = DXGI_SWAP_EFFECT_DISCARD;\n\n                    if(Factory-&gt;CreateSwapChainForHwnd(Device, Window,\n                                                       &amp;SwapChainDescription,\n                                                       0, 0, &amp;SwapChain) == S_OK)\n                    {\n                        ID3D11Texture2D *BackBuffer;\n                        if(SwapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D),\n                                                (void **)&amp;BackBuffer) == S_OK)\n                        {\n                            Device-&gt;CreateRenderTargetView(BackBuffer, 0, &amp;RenderTargetView);\n                            BackBuffer-&gt;Release();\n                        }\n\n                        ShowWindow(Window, SW_SHOWNORMAL);\n\n                        read_file_result VertexShaderFile = Win32LoadEntireFile(\"shaders/testvertex.fxo\");\n                        read_file_result PixelShaderFile = Win32LoadEntireFile(\"shaders/testpixel.fxo\");\n\n                        ID3D11VertexShader *VertexShader;\n                        ID3D11PixelShader *PixelShader;\n\n                        Device-&gt;CreateVertexShader(VertexShaderFile.Contents, \n                                VertexShaderFile.ContentsSize, 0, &amp;VertexShader);\n\n                        Device-&gt;CreatePixelShader(PixelShaderFile.Contents,\n                                PixelShaderFile.ContentsSize, 0, &amp;PixelShader);\n\n                        DeviceContext-&gt;VSSetShader(VertexShader, 0, 0);\n                        DeviceContext-&gt;PSSetShader(PixelShader, 0, 0);\n\n                        D3D11_INPUT_ELEMENT_DESC ied[] =\n                        {\n                            {\"POSITION\", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0},\n                            {\"COLOR\", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0},\n                        };\n\n                        ID3D11InputLayout *Layout;\n                        Device-&gt;CreateInputLayout(ied, 2, VertexShaderFile.Contents, VertexShaderFile.ContentsSize, &amp;Layout);\n                        DeviceContext-&gt;IASetInputLayout(Layout);\n\n                        vertex OurVerticies[3] = {};\n                        OurVerticies[0].Position.Y = 0.5f;\n                        OurVerticies[0].Color.X = 1.0f;\n                        OurVerticies[0].Color.W = 1.0f;\n                        OurVerticies[1].Position.X = 0.45f;\n                        OurVerticies[1].Position.Y = -0.5f;\n                        OurVerticies[1].Color.Y = 1.0f;\n                        OurVerticies[1].Color.W = 1.0f;\n                        OurVerticies[2].Position.X = -0.45f;\n                        OurVerticies[2].Position.Y = -0.5f;\n                        OurVerticies[2].Color.Z = 1.0f;\n                        OurVerticies[2].Color.W = 1.0f;\n\n                        ID3D11Buffer *VertexBuffer = 0;\n\n                        D3D11_BUFFER_DESC BufferDescription = {};\n                        BufferDescription.Usage = D3D11_USAGE_DYNAMIC;\n                        BufferDescription.ByteWidth = sizeof(vertex) * 3;\n                        BufferDescription.BindFlags = D3D11_BIND_VERTEX_BUFFER;\n                        BufferDescription.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;\n\n                        Device-&gt;CreateBuffer(&amp;BufferDescription, 0, &amp;VertexBuffer);\n\n                        D3D11_MAPPED_SUBRESOURCE MappedSubresource;\n                        DeviceContext-&gt;Map(VertexBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &amp;MappedSubresource);\n                        CopyMemory(MappedSubresource.pData, OurVerticies, sizeof(OurVerticies));\n                        DeviceContext-&gt;Unmap(VertexBuffer, 0);\n\n\n                        GlobalRunning = true;\n\n                        while(GlobalRunning)\n                        {                                            \n                            MSG Message;\n\n                            while(PeekMessageA(&amp;Message, 0, 0, 0, PM_REMOVE))\n                            {\n                                TranslateMessage(&amp;Message);\n                                DispatchMessageA(&amp;Message);\n                            }\n\n                            FLOAT ClearColor[] = {0.0f, 0.0f, 1.0f, 1.0f};\n                            DeviceContext-&gt;ClearRenderTargetView(RenderTargetView, ClearColor);\n                            DeviceContext-&gt;OMSetRenderTargets(1, &amp;RenderTargetView, 0);\n\n                            UINT Stride = sizeof(vertex);\n                            UINT Offset = 0;\n                            DeviceContext-&gt;IASetVertexBuffers(0, 1, &amp;VertexBuffer, &amp;Stride, &amp;Offset);\n\n                            DeviceContext-&gt;IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);\n\n\n\n                            DeviceContext-&gt;Draw(3, 0); \n\n                            SwapChain-&gt;Present(1, 0);\n\n                        }\n                    }\n                    else\n                    {\n                        // TODO(zak): Logging\n                    }\n                }\n                else\n                {\n                    // TODO(zak): Logging\n                }\n            }\n            else\n            {\n                // TODO(zak): Logging\n            }\n        }\n        else\n        {\n            // TODO(zak): Logging\n        }\n    }\n    else\n    {\n        // TODO(zak): Logging\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>Pixel Shader</p>\n\n<pre><code>float4 main(float4 position : SV_POSITION, float4 color : COLOR) : SV_TARGET\n{\n    return color;\n}\n</code></pre>\n\n<p>Vertex Shader</p>\n\n<pre><code>struct VOut\n{\n    float4 position : SV_POSITION;\n    float4 color : COLOR;\n};\n\nVOut main(float4 position : POSITION, float4 color : COLOR)\n{\n    VOut output;\n\n    output.position = position;\n    output.color = color;\n\n    return output;\n}\n</code></pre>\n"}, {"tags": ["c++", "time.h"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1466013504, "post_id": 37842515, "comment_id": 63145685, "body": "Maybe what is wrong is that your computer is exteremly fast <b>or ---&gt;</b> you are just asking for someone to debug it for you"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1466013591, "post_id": 37842515, "comment_id": 63145732, "body": "Please edit question and add the code that adds elements."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1466013756, "post_id": 37842515, "comment_id": 63145822, "body": "Depending on your platform, <code>clock()</code> probably returns CPU time and not actual time. Also, its resolution is pretty low."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1466014413, "post_id": 37842515, "comment_id": 63146157, "body": "Rerun the test with 100 thousand Nodes."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1466014436, "post_id": 37842515, "comment_id": 63146170, "body": "What if you use <code>std::chrono::high_resolution_clock::now()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466014249, "post_id": 37842706, "comment_id": 63146067, "body": "That&#39;s a plausible explanation."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1466014266, "post_id": 37842706, "comment_id": 63146076, "body": "The actual resolution of <code>clock</code> is probably even worse than a millisecond."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 6, "last_activity_date": 1466014871, "last_edit_date": 1466014871, "creation_date": 1466014004, "answer_id": 37842706, "question_id": 37842515, "link": "https://stackoverflow.com/questions/37842515/why-all-the-elements-in-my-list-have-got-the-same-time-of-creation/37842706#37842706", "title": "Why all the elements in my list have got the same time of creation?", "body": "<blockquote>\n  <p>Why all the elements in my list have got the same time of creation?</p>\n</blockquote>\n\n<p>You are using </p>\n\n<pre><code>((clock() / (double)(CLOCKS_PER_SEC)) * 1000);\n</code></pre>\n\n<p>to get the value for the <code>time</code> member variable. That is time in milliseconds. Today's computers can do a lot of work in a millisecond. The time taken to create all the objects appears to be less than a millisecond. That's why you see the same value of <code>time</code> for all your objects.</p>\n\n<p>If the resolution of <code>clock</code> is greater than a millisecond, you will see the same value of <code>time</code> for larger number of objects.</p>\n"}], "owner": {"reputation": 75, "user_id": 5254842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4abe2cc4f9cc1c5dc2ff92a0fc16f050?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/5254842/hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 37842706, "answer_count": 1, "score": 0, "last_activity_date": 1466014871, "creation_date": 1466013359, "question_id": 37842515, "link": "https://stackoverflow.com/questions/37842515/why-all-the-elements-in-my-list-have-got-the-same-time-of-creation", "title": "Why all the elements in my list have got the same time of creation?", "body": "<p>I wanted to add to nodes in my list variable, that contains time elapsed from start of program. Unfortunatly, all of them has got the same. What is wrong in my code?</p>\n\n<pre><code>    void MyList:: pushBack(val nval)\n{\n    if (size == 0)\n    {\n        first-&gt;elem = nval;\n        first-&gt;time = ((clock() / (double)(CLOCKS_PER_SEC)) * 1000);\n        size++;\n        return;\n    }\n    Node *n = new Node(); \n    n-&gt;time= ((clock() / (double)(CLOCKS_PER_SEC)) *1000);\n    n-&gt;elem = nval;\n    last-&gt;next = n;\n    last = n;\n    size++;\n//  delete n;\n\n}\n   struct Node {\n    double time;\n    val elem;\n    Node *next=nullptr;\n};\n\nclass MyList\n{\n    int size = 0;\n    Node* first;\n    Node* last = first;\nMyList();\nvoid pushBack(val nval);\n~MyList();\n};\n</code></pre>\n"}, {"tags": ["c++", "io", "int", "byte", "endianness"], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1466015111, "post_id": 37842563, "comment_id": 63146523, "body": "it did not consider the endianness. If i print out the data-var i got the value &#180;3137536000&#180; which equals &#180;0xBB030000&#180;but i need to get &#180;0x000003BB&#180;"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1466015920, "post_id": 37842563, "comment_id": 63147039, "body": "@Opa114 actually, this code does <i>consider endianness</i> in the sense that it works on a machine of any endianness. There is simply a mistake, and this converts <i>little</i> endian, rather than big endian which is what you wanted. Change the buffer indices to go from 0 to 3, and it&#39;ll work."}], "tags": [], "owner": {"reputation": 342, "user_id": 6262233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cf20b335862b1287a647625058e2e0?s=128&d=identicon&r=PG&f=1", "display_name": "petrmikheev", "link": "https://stackoverflow.com/users/6262233/petrmikheev"}, "is_accepted": true, "score": 3, "last_activity_date": 1466015995, "last_edit_date": 1466015995, "creation_date": 1466013561, "answer_id": 37842563, "question_id": 37842439, "link": "https://stackoverflow.com/questions/37842439/c-how-to-read-bytes-as-integer-endianness-independent/37842563#37842563", "title": "C++ How to read Bytes as Integer endianness independent?", "body": "<p>I am not sure that this is the best solution, but it works.</p>\n\n<pre><code>uint8_t buffer[4] = {0};\ninput.read((char*)buffer, sizeof(buffer));\nunsigned int result = buffer[0];\nresult = (result &lt;&lt; 8) | buffer[1];\nresult = (result &lt;&lt; 8) | buffer[2];\nresult = (result &lt;&lt; 8) | buffer[3];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1466014981, "post_id": 37842864, "comment_id": 63146452, "body": "this works, but it did not consider the endianness. If i print out the data-var i got the value <code>3137536000</code> which equals &#180;0xBB030000&#180; but i need to get <code>0x000003BB</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466015670, "post_id": 37842864, "comment_id": 63146898, "body": "Still falls into the same trap, Ajay. OP doesn&#39;t know if the file is big or little and they want generic code to handle both cases. Any file protocol that doesn&#39;t specify endian is flawed and should go back to the lab for a redesign, but...."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 1, "creation_date": 1466015731, "post_id": 37842864, "comment_id": 63146930, "body": "Numbers don&#39;t keep endian-ness with them!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466016101, "post_id": 37842864, "comment_id": 63147146, "body": "Exactly. The question resolves down to &quot;How do you safely determine the endian of a file?&quot; Without more information, you can&#39;t. The file MUST have some sort of tag or a value that can be tested for validity and will only be valid in one endian. OP hasn&#39;t specified any of this."}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 1, "last_activity_date": 1466015411, "last_edit_date": 1466015411, "creation_date": 1466014522, "answer_id": 37842864, "question_id": 37842439, "link": "https://stackoverflow.com/questions/37842439/c-how-to-read-bytes-as-integer-endianness-independent/37842864#37842864", "title": "C++ How to read Bytes as Integer endianness independent?", "body": "<p>There is no need to use an array of <code>uint8_t</code>, you can direcly read into a 4 byte integer:</p>\n\n<pre><code>uint32_t data;\ninput.read((char*)&amp;data, sizeof(data));\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>This code works on my VC++ compiler:</p>\n\n<pre><code>#include&lt;stdint.h&gt;\n#include&lt;intrin.h&gt;\n#include&lt;iostream&gt;\n\nint main()\n{\n    uint32_t data;\n    data = 0xBB030000;\n    data = _byteswap_ulong(data);\n\n    std::cout &lt;&lt; data;\n}\n</code></pre>\n\n<p>If you are using GCC, you need to replace <code>_byteswap_ulong</code> with <code>__builtin_bswap32</code>. If you need independent code, you need to craft your own (probably on top of these compiler intrinsics).</p>\n"}, {"comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 2, "creation_date": 1466015625, "post_id": 37843144, "comment_id": 63146861, "body": "On Windows, it requires linking to <code>Ws2_32.lib</code>."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1466015379, "creation_date": 1466015379, "answer_id": 37843144, "question_id": 37842439, "link": "https://stackoverflow.com/questions/37842439/c-how-to-read-bytes-as-integer-endianness-independent/37843144#37843144", "title": "C++ How to read Bytes as Integer endianness independent?", "body": "<p>If your OS supports POSIX or is windows, then you can use <a href=\"http://linux.die.net/man/3/ntohl\" rel=\"nofollow\"><code>ntohl</code></a>:</p>\n\n<pre><code>int data;\ninput &gt;&gt; data;\ndata = ntohl(data);\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3466, "favorite_count": 1, "accepted_answer_id": 37842563, "answer_count": 3, "score": 2, "last_activity_date": 1466015995, "creation_date": 1466013129, "last_edit_date": 1466013487, "question_id": 37842439, "link": "https://stackoverflow.com/questions/37842439/c-how-to-read-bytes-as-integer-endianness-independent", "title": "C++ How to read Bytes as Integer endianness independent?", "body": "<p>i want to read some Bytes of my File as an Integer Value. For Example the file contains the value <code>0x000003BB</code> which equals 955.</p>\n\n<p>I could read the data this way:</p>\n\n<pre><code>ifstream input (\"C:/Desktop/myFile\", ios::binary);\nuint8_t buffer[4] = {0};\ninput.read((char*)buffer, sizeof(buffer));\n</code></pre>\n\n<p>But how can i convert the buffer-array to the corresponding int-value 955? And if possible in a endianness independent way, because this and some other Files in Big Endian Byte Order but my system are on Little Endian Byte Order. Thanks :)</p>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1466012720, "post_id": 37842289, "comment_id": 63145250, "body": "<code>iter-&gt;</code> and <code>(*iter).</code> are semantically identical, completely up to your style preference. The only (potential) difference is that the <code>-&gt;</code> operator is <a href=\"https://stackoverflow.com/questions/221346/what-can-i-use-instead-of-the-arrow-operator\">able to be overloaded</a>."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1466012994, "post_id": 37842289, "comment_id": 63145399, "body": "Use <code>-&gt;</code>, it&#39;s what people typically expect to see."}, {"owner": {"reputation": 310, "user_id": 5041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0jAKz.jpg?s=128&g=1", "display_name": "linofex", "link": "https://stackoverflow.com/users/5041993/linofex"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1466013031, "post_id": 37842289, "comment_id": 63145421, "body": "@CoryKramer thank you! In C I use them as I prefer, but in C++, with classes, STL and other I thought that there was difference."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1466016700, "post_id": 37842289, "comment_id": 63147518, "body": "@CoryKramer the indirection operator <code>*</code> can also be overloaded, otherwise how <code>iterator</code> object indirection would work?"}], "answers": [{"comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 1, "creation_date": 1466017031, "post_id": 37842599, "comment_id": 63147690, "body": "Idiotic, but possible: <code>(it.operator-&gt;()[0])-&gt;Geta();</code>"}], "tags": [], "owner": {"reputation": 141, "user_id": 4539472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Nhkm.jpg?s=128&g=1", "display_name": "Austin Day", "link": "https://stackoverflow.com/users/4539472/austin-day"}, "is_accepted": false, "score": 1, "last_activity_date": 1466014120, "last_edit_date": 1466014120, "creation_date": 1466013685, "answer_id": 37842599, "question_id": 37842289, "link": "https://stackoverflow.com/questions/37842289/access-an-element-with-iterator/37842599#37842599", "title": "Access an element with iterator", "body": "<p>An example where it would make a real difference, is when you are iterating over pointers, like so:</p>\n\n<pre><code>std::vector&lt;num*&gt; nums;\nfor (auto it = nums.begin(); it != nums.end(); it++) {\n    (*it)-&gt;getA();\n}\n</code></pre>\n\n<p>I don't know of any way of accomplishing this with using only <code>-&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6471068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d6b81497df3961e932b21b46a5aae2?s=128&d=identicon&r=PG&f=1", "display_name": "AmirShrestha", "link": "https://stackoverflow.com/users/6471068/amirshrestha"}, "is_accepted": false, "score": 1, "last_activity_date": 1466017059, "last_edit_date": 1466017059, "creation_date": 1466014838, "answer_id": 37842977, "question_id": 37842289, "link": "https://stackoverflow.com/questions/37842289/access-an-element-with-iterator/37842977#37842977", "title": "Access an element with iterator", "body": "<p>With C++11 features, we can also make accessing of elements cleaner as in the following example using range based for loop.</p>\n\n<pre><code>for(const auto&amp; elem:nums)\n{\n    std::cout &lt;&lt; elem.Geta() &lt;&lt; \" \" &lt;&lt;elem.Getb() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 841, "user_id": 4257805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/no6FV.jpg?s=128&g=1", "display_name": "Davit Tevanian", "link": "https://stackoverflow.com/users/4257805/davit-tevanian"}, "is_accepted": false, "score": 1, "last_activity_date": 1466021012, "creation_date": 1466021012, "answer_id": 37844721, "question_id": 37842289, "link": "https://stackoverflow.com/questions/37842289/access-an-element-with-iterator/37844721#37844721", "title": "Access an element with iterator", "body": "<ol>\n<li><p><code>-&gt;</code> for accessing object member variables and methods via <code>pointer</code> to object.</p></li>\n<li><p><code>.</code> for accessing object member variables and methods via object <code>instance</code>.</p></li>\n</ol>\n\n<p>But container iterators like pointers to some data structures and in my opinion (1.) more convenient for usage. </p>\n\n<p>In case when you have vector of pointers, you need notice that you have pointers (iterators) to pointers (vector elements) and use this syntax <code>(*iter)-&gt;Geta();</code></p>\n"}], "owner": {"reputation": 310, "user_id": 5041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0jAKz.jpg?s=128&g=1", "display_name": "linofex", "link": "https://stackoverflow.com/users/5041993/linofex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2702, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1466021012, "creation_date": 1466012668, "last_edit_date": 1466018198, "question_id": 37842289, "link": "https://stackoverflow.com/questions/37842289/access-an-element-with-iterator", "title": "Access an element with iterator", "body": "<p>Consider this code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\nclass num{\n  int a;\n  int b;\n\n    public:\n        num(int a_, int b_): a(a_), b(b_){}\n        int Geta(){return a;}\n        int Getb(){return b;}\n\n};\n\nint main(){\n    num a(2, 5);\n    num b(32, 654);\n    std::vector&lt;num&gt; nums;\n    nums.push_back(a);\n    nums.push_back(b);\n    std::vector&lt;num&gt;::iterator iter = nums.begin();\n    std::cout &lt;&lt; iter-&gt;Geta()&lt;&lt; \" \" &lt;&lt;(*iter).Getb() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This works, but I don't know which way is better to access the element of the array with the iterator<code>iter-&gt;</code> or <code>(*iter)</code>.</p>\n\n<p>I think that this example is a particular case where both works. Can you give me a code where is possible to see the difference (and why)?</p>\n"}, {"tags": ["c++", "vector", "stl", "boolean", "bitarray"], "comments": [{"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 10, "creation_date": 1466012590, "post_id": 37842178, "comment_id": 63145191, "body": "Use <a href=\"http://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\">std::all_of</a> everything else is probably just premature optimization unless you can prove that it&#39;s a bottleneck..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 10, "creation_date": 1466012599, "post_id": 37842178, "comment_id": 63145196, "body": "&quot;The fastest way&quot; can depend on C++ library implementation, compiler implementation, compiler optimisation level, target CPU, a whole lot of other things that makes this question pretty much unanswerable. &quot;The fastest way&quot; also comes across as a question of curiosity rather than a concrete problem you&#39;ve faced. Is the obvious way (a simple <code>for</code> loop -- edit, or as Raphael Miedl commented, a standard library function that does that already) fast enough? Do you see an immediate problem with your implementation in the performance, in the generated code?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 1, "creation_date": 1466012760, "post_id": 37842178, "comment_id": 63145278, "body": "The fastest way is the first readable one you can think of. It increases the speed of development and maintainability. Usually it should be an algorithm from the standard library"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1466012787, "post_id": 37842178, "comment_id": 63145289, "body": "If you really care, benchmark using <code>vector&lt;bool&gt;</code> + <code>all_of</code> against <a href=\"http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html\" rel=\"nofollow noreferrer\"><code>boost::dynamic_bitset</code></a> and its <code>all</code> member function. While <code>vector&lt;bool&gt;</code> can&#39;t seem to make up its mind about whether to act as a bit-array or a generic <code>vector</code>, <code>dynamic_bitset</code> has the functionality you&#39;d typically expect from a bit-array."}, {"owner": {"reputation": 1619, "user_id": 498680, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/86f955ec4bf3a8dc99906ee374339702?s=128&d=identicon&r=PG", "display_name": "AnimatedRNG", "link": "https://stackoverflow.com/users/498680/animatedrng"}, "edited": false, "score": 0, "creation_date": 1466012801, "post_id": 37842178, "comment_id": 63145293, "body": "@hvd Not really -- it&#39;s just that std::vector&lt;bool&gt; is typically optimized as a bit array, so you would think that there&#39;s a fairly quick way to check whether they&#39;re all true or not. Preferably something short and readable."}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 1, "creation_date": 1466012922, "post_id": 37842178, "comment_id": 63145364, "body": "@AnimatedRNG <code>vector&lt;bool&gt;</code> is more of a failed attempt at that. It uses a bitmap to safe space but doesn&#39;t expose any functionality to actually make use of that and gain speed. And it also breaks some container requirements thus getting the worst of both most of the time."}, {"owner": {"reputation": 1743, "user_id": 5502206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e05d0d997fd75b4881e5c39055222a?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kravchenko", "link": "https://stackoverflow.com/users/5502206/v-kravchenko"}, "edited": false, "score": 3, "creation_date": 1466012953, "post_id": 37842178, "comment_id": 63145383, "body": "Probably, you can use std::bitset instead. It has such methods."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1466013046, "post_id": 37842178, "comment_id": 63145430, "body": "@AnimatedRNG Your compiler may optimise it to that already anyway. That&#39;s something you should be able to check yourself better than anyone here, since we don&#39;t know which compiler, standard library, etc. you&#39;re using."}, {"owner": {"reputation": 1619, "user_id": 498680, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/86f955ec4bf3a8dc99906ee374339702?s=128&d=identicon&r=PG", "display_name": "AnimatedRNG", "link": "https://stackoverflow.com/users/498680/animatedrng"}, "reply_to_user": {"reputation": 1743, "user_id": 5502206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e05d0d997fd75b4881e5c39055222a?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kravchenko", "link": "https://stackoverflow.com/users/5502206/v-kravchenko"}, "edited": false, "score": 0, "creation_date": 1466013167, "post_id": 37842178, "comment_id": 63145487, "body": "@V.Kravchenko That sounds like a good idea -- I honestly just need a fairly readable way to test whether a container of &lt; 15 boolean elements is completely true or false. Given that this should be a straightforward (and easy to optimize) operation, I was hoping it would also be fairly efficient as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 8, "creation_date": 1466013257, "post_id": 37842178, "comment_id": 63145528, "body": "Er... what, &lt; 15 boolean elements and you&#39;re micro-optimising <i>that</i>?"}, {"owner": {"reputation": 1619, "user_id": 498680, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/86f955ec4bf3a8dc99906ee374339702?s=128&d=identicon&r=PG", "display_name": "AnimatedRNG", "link": "https://stackoverflow.com/users/498680/animatedrng"}, "edited": false, "score": 0, "creation_date": 1466013384, "post_id": 37842178, "comment_id": 63145605, "body": "@hvd Well this is more out of curiosity really, whether there exists a readable and efficient way to test whether a small boolean array is all true or not. I don&#39;t really need it to be optimal, I suppose, I&#39;m just curious"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1466014737, "post_id": 37842178, "comment_id": 63146334, "body": "If you can use a <code>bitset</code> instead you could do <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/all_any_none\" rel=\"nofollow noreferrer\"><code>all</code></a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1466014764, "post_id": 37842178, "comment_id": 63146348, "body": "The readable and efficient way is to just use the standard library algorithms that will be recognizable to all. Like <code>std::all_of</code>, <code>std::any_of</code> and friends. Don&#39;t reinvent the wheel - especially not for trivial things like this where performance doesn&#39;t really matter (or differences are so far into the statistical noise as to <i>not matter</i>). Sure, if used in a very hot inner loop that&#39;s executed millions of times each second, then <i>maybe</i> micro optimizing this makes sense. But I&#39;d like to see some proof that that is the case first, before writing unreadable code."}], "answers": [{"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 5, "last_activity_date": 1546867840, "last_edit_date": 1546867840, "creation_date": 1466015209, "answer_id": 37843086, "question_id": 37842178, "link": "https://stackoverflow.com/questions/37842178/check-whether-stdvectorbool-is-comprised-of-only-true-values/37843086#37843086", "title": "Check whether std::vector&lt;bool&gt; is comprised of only true values", "body": "<p>Given <code>const vector&lt;bool&gt; foo(13)</code> use <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>find</code></a>:</p>\n\n<pre><code>cout &lt;&lt; (find(foo.begin(), foo.end(), false) == foo.end()) &lt;&lt; endl;\n</code></pre>\n\n<p>Or if you have <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> you can <a href=\"https://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\"><code>none_of</code></a>:</p>\n\n<pre><code>cout &lt;&lt; none_of(cbegin(foo), cend(foo), logical_not&lt;bool&gt;()) &lt;&lt; endl;\n</code></pre>\n\n<p>Alternatively if you know your <code>vector</code>'s size at compile time you can use <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>bitset</code></a>'a <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/all_any_none\" rel=\"nofollow noreferrer\"><code>all</code></a> method:</p>\n\n<pre><code>bitset&lt;13&gt; foo;\n\ncout &lt;&lt; foo.all() &lt;&lt; endl;\n</code></pre>\n\n<p><a href=\"https://ideone.com/PZGMwL\" rel=\"nofollow noreferrer\"><kbd>Live Examples</kbd></a></p>\n"}], "owner": {"reputation": 1619, "user_id": 498680, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/86f955ec4bf3a8dc99906ee374339702?s=128&d=identicon&r=PG", "display_name": "AnimatedRNG", "link": "https://stackoverflow.com/users/498680/animatedrng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3244, "favorite_count": 0, "accepted_answer_id": 37843086, "answer_count": 1, "score": 4, "last_activity_date": 1546867840, "creation_date": 1466012351, "question_id": 37842178, "link": "https://stackoverflow.com/questions/37842178/check-whether-stdvectorbool-is-comprised-of-only-true-values", "title": "Check whether std::vector&lt;bool&gt; is comprised of only true values", "body": "<p>What is the fastest way to determine whether a vector holding boolean values (which is typically optimized as a bit array) only holds true values? For small vectors, I think it might not be a bad idea to just compare the vector against another vector storing only true values (assuming we know the size of both vectors).</p>\n"}, {"tags": ["c++", "hex", "unsigned-integer"], "comments": [{"owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "edited": false, "score": 3, "creation_date": 1466012879, "post_id": 37842177, "comment_id": 63145336, "body": "I suspect you want &amp;&amp; rather than ||.  As it is, your condition always evaluates true."}], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 1250473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spHQA.png?s=128&g=1", "display_name": "Marshall Conover", "link": "https://stackoverflow.com/users/1250473/marshall-conover"}, "reply_to_user": {"reputation": 337, "user_id": 5075147, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc012826cd46b0fee58b7757dcea8d4?s=128&d=identicon&r=PG", "display_name": "btald1331", "link": "https://stackoverflow.com/users/5075147/btald1331"}, "edited": false, "score": 0, "creation_date": 1466013140, "post_id": 37842359, "comment_id": 63145465, "body": "No problem, we all have those days. :P"}], "tags": [], "owner": {"reputation": 765, "user_id": 1250473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spHQA.png?s=128&g=1", "display_name": "Marshall Conover", "link": "https://stackoverflow.com/users/1250473/marshall-conover"}, "is_accepted": true, "score": 3, "last_activity_date": 1466013118, "last_edit_date": 1466013118, "creation_date": 1466012876, "answer_id": 37842359, "question_id": 37842177, "link": "https://stackoverflow.com/questions/37842177/comparing-8-bit-unsigned-integer-to-hex-failing/37842359#37842359", "title": "Comparing 8 - bit Unsigned Integer to HEX Failing", "body": "<p>I think you might want your logic to be:</p>\n\n<pre><code>if ( ui8BufferIn.at(0) != 0xE4 &amp;&amp; ui8BufferIn.at(0) != 0xE2){\n</code></pre>\n\n<p>As right now you're saying \"If either case of: (it's not <code>0xE4</code>) or case of: (it's not <code>0xE2</code>), we have a problem\" - which, if I understand correctly, is not what you want to say. With your statement, you could be getting <code>0xE2</code>, but because you're not getting <code>0xE4</code> (<code>ui8BufferIn.at(0) != 0xE4</code>), your statement executes.</p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 5625102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc184e0e79be57f4a76f0cc757ada884?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowwolf", "link": "https://stackoverflow.com/users/5625102/shadowwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1466013172, "creation_date": 1466013172, "answer_id": 37842460, "question_id": 37842177, "link": "https://stackoverflow.com/questions/37842177/comparing-8-bit-unsigned-integer-to-hex-failing/37842460#37842460", "title": "Comparing 8 - bit Unsigned Integer to HEX Failing", "body": "<p>There's a small logic error in your code. In this case, your error will always appear. Say the <code>uint8_t</code> value is <code>0xE2</code>. You will get the following condition:</p>\n\n<pre><code>if(0xE2 != 0xE4 || 0xE2 != 0xE2)\n    //Error\n</code></pre>\n\n<p>Which will evaluate to:</p>\n\n<pre><code>if(true || false) //Actually the second operand will not be evaluated\n    //Error\n</code></pre>\n\n<p>Which will execute your error condition. Actually for any given input, your error function will execute. Except if your <code>uint8_t</code> value manages to compare equal to both <code>0xE2</code> and <code>0xE4</code>, but for as far as I know, such a value currently does not exist.</p>\n\n<p>The simplest solution would be to change your 'or' into an 'and', giving the following code:</p>\n\n<pre><code>if(ui8BufferIn.at(0) != 0xE4 &amp;&amp; ui8BufferIn.at(0) != 0xE2)\n    //Error\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1466139503, "post_id": 37842509, "comment_id": 63202868, "body": "Upvoted... I feel important to say that the statement is always true, as it cannot be both predicates false at the same time."}], "tags": [], "owner": {"reputation": 160, "user_id": 3147629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ba08438b94cde0ff7ffed3a6866a63?s=128&d=identicon&r=PG&f=1", "display_name": "maxlazar", "link": "https://stackoverflow.com/users/3147629/maxlazar"}, "is_accepted": false, "score": 3, "last_activity_date": 1466013329, "creation_date": 1466013329, "answer_id": 37842509, "question_id": 37842177, "link": "https://stackoverflow.com/questions/37842177/comparing-8-bit-unsigned-integer-to-hex-failing/37842509#37842509", "title": "Comparing 8 - bit Unsigned Integer to HEX Failing", "body": "<p>The logic you have goes as such:</p>\n\n<pre><code>If (value is not (value a)) OR (value is not (value b)) then...\n</code></pre>\n\n<p>Lets' look at the possibilities:</p>\n\n<pre><code>Value = a: then value is not b: result is true\nValue = b: then value is not a: result is true\nValue = other: the value is not a: result is true\n</code></pre>\n\n<p>So the if statement always evaluates to true</p>\n"}], "owner": {"reputation": 337, "user_id": 5075147, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc012826cd46b0fee58b7757dcea8d4?s=128&d=identicon&r=PG", "display_name": "btald1331", "link": "https://stackoverflow.com/users/5075147/btald1331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 37842359, "answer_count": 3, "score": 1, "last_activity_date": 1466013329, "creation_date": 1466012332, "last_edit_date": 1466012671, "question_id": 37842177, "link": "https://stackoverflow.com/questions/37842177/comparing-8-bit-unsigned-integer-to-hex-failing", "title": "Comparing 8 - bit Unsigned Integer to HEX Failing", "body": "<p>I have a C++ Vector full of uint8_t values from a TCP data segment. I am looking specifically for 1 of two values which should be at the first index of the vector. </p>\n\n<p>I have the following if statement to express my logic. </p>\n\n<pre><code>if ( ui8BufferIn.at(0) != 0xE4 || ui8BufferIn.at(0) != 0xE2){\n    printf(\"\\nWe have a problem, no parsing will be done, Package Type = %u\\n\", ui8BufferIn.at(0));\n    proceed = false;\n}\n</code></pre>\n\n<p>The above if statement is executing when it shouldn't. I get the following printout: </p>\n\n<pre><code>We have a problem, no parsing will be done, Package Type = 226\n</code></pre>\n\n<p>So you don't have to do the math, <code>226</code> as an integer is <code>0xE2</code> in HEX. </p>\n\n<p>I've been at this a while, so it very well may be something simple, but any help would be great!</p>\n"}, {"tags": ["c++", "compilation", "shared-libraries", "static-libraries", "fpic"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1466012862, "post_id": 37842036, "comment_id": 63145329, "body": "This is very generic, I know, but if your code contains Undefined Behaviour then anything may happen and changing a compiler flag may cause the compiler to exploit that UB in a new way - in any case, the bug is in your code if UB is involved. Just a long-shot guess..."}, {"owner": {"reputation": 69, "user_id": 6342532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d57d33c04508f6b3155cfa528a14fba?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Flood", "link": "https://stackoverflow.com/users/6342532/connor-flood"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466013834, "post_id": 37842036, "comment_id": 63145867, "body": "That&#39;s along the lines I was thinking too. I did a fair bit of reading on -fPIC and couldn&#39;t find anyone else reporting run-time errors in their code by including it (in most cases, it was including -fPIC that was the solution to their problems)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466013963, "post_id": 37842036, "comment_id": 63145931, "body": "Maybe you could provide a minimal, reproducible, compilable test case that we could try. That would help diagnosing the problem. See <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">sscce.org</a>"}, {"owner": {"reputation": 69, "user_id": 6342532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d57d33c04508f6b3155cfa528a14fba?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Flood", "link": "https://stackoverflow.com/users/6342532/connor-flood"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466016103, "post_id": 37842036, "comment_id": 63147150, "body": "I agree, I&#39;ll look into creating one. The problem is the static library is compiled from a very large codebase, and is not something that can be made public."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6342532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d57d33c04508f6b3155cfa528a14fba?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Flood", "link": "https://stackoverflow.com/users/6342532/connor-flood"}, "edited": false, "score": 0, "creation_date": 1466013484, "post_id": 37842140, "comment_id": 63145667, "body": "So let&#39;s say I compile a static library (with the -fPIC option). Now, I want to compile that static library with Test.cpp (which has a main method). When I run the generated executable, only ONE of my functions callled by main causes a segmentation fault, while the rest of the code works fine. But when the static library is compiled WITHOUT -fPIC, then all of the code in the generated executable works g. So why does the inclusion of -fPIC cause only some of the code to fail?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 69, "user_id": 6342532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d57d33c04508f6b3155cfa528a14fba?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Flood", "link": "https://stackoverflow.com/users/6342532/connor-flood"}, "edited": false, "score": 0, "creation_date": 1466058991, "post_id": 37842140, "comment_id": 63161937, "body": "@ConnorFlood It&#39;s really impossible to say without more information, and depends on what all your functions are doing. Are the functions that work calling other functions in the libraries? Do the function that crashes do that?"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1466012214, "creation_date": 1466012214, "answer_id": 37842140, "question_id": 37842036, "link": "https://stackoverflow.com/questions/37842036/why-does-including-fpic-to-compile-a-static-library-cause-a-segmentation-fault/37842140#37842140", "title": "Why does including -fPIC to compile a static library cause a segmentation fault at run time?", "body": "<p>A dynamic library is supposed to be loaded at run-time and can therefore not have position-dependent code.</p>\n\n<p>A static library, on the other hand, is just an archive of object files.</p>\n\n<p>When linking with a dynamic library, the linker adds the name of the library in the executable file, so the loader can load it when it loads the program. When the linker links with a static library, it basically extracts the object files and links with them like any other object file.</p>\n\n<p>So unless you create an executable where all other object files are position-independent (you use <code>-fPIC</code> for your the programs code) then you can't link with a static library which uses position-independent code, the generated executable is simply not set up for it.</p>\n"}], "owner": {"reputation": 69, "user_id": 6342532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d57d33c04508f6b3155cfa528a14fba?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Flood", "link": "https://stackoverflow.com/users/6342532/connor-flood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3902, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1466012214, "creation_date": 1466011834, "question_id": 37842036, "link": "https://stackoverflow.com/questions/37842036/why-does-including-fpic-to-compile-a-static-library-cause-a-segmentation-fault", "title": "Why does including -fPIC to compile a static library cause a segmentation fault at run time?", "body": "<p>I'm compiling C++ static library with g++ and using the -fPIC option. I must use the -fPIC option because eventually this library will be linked with other static libraries to form a dynamic library.</p>\n\n<p>When I test the static library locally, it works completely fine when I don't include the -fPIC option. But as soon as I compile the library with -fPIC, I receive a segmentation fault error at run-time when calling one of the functions.</p>\n\n<p>What reasons could including -fPIC to compile a static library cause a segementation fault at run-time?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466011598, "post_id": 37841872, "comment_id": 63144690, "body": "Using <code>static</code> means that <code>queue</code> isn&#39;t visible in other translation units. That&#39;s the entire point of that use of the keyword."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1466011607, "post_id": 37841872, "comment_id": 63144695, "body": "Your objective is analogous to: &quot;I have a secret bank account. I don&#39;t anybody to know about it but I want some people to be able to put money in it.&quot;"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 0, "creation_date": 1466012587, "post_id": 37841872, "comment_id": 63145188, "body": "If you can live with changing <code>A.h, A.cpp</code>... then you can always use the function <code>B&amp; getQueue() { return *queue; }</code> which you define inside <code>A.cpp</code> and declare inside <code>A_priviliged.h</code>. But really, you should be asking yourself how you got yourself into this situation."}, {"owner": {"reputation": 63, "user_id": 6470797, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17b28a4d62eae7b0094f9f06f065d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Shunning Jiang", "link": "https://stackoverflow.com/users/6470797/shunning-jiang"}, "edited": false, "score": 0, "creation_date": 1466013651, "post_id": 37841872, "comment_id": 63145763, "body": "Someone else wrote this code and maybe he was wishing that the queue is only initiated once, and the code package has been distributed everywhere. I&#39;m adding functionality to reset the whole context. Then I sadly found that the whole context includes the queue and it turned out to be a big problem for me."}, {"owner": {"reputation": 307, "user_id": 4955266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/unvkm.jpg?s=128&g=1", "display_name": "Fuseteam", "link": "https://stackoverflow.com/users/4955266/fuseteam"}, "edited": false, "score": 0, "creation_date": 1466038186, "post_id": 37841872, "comment_id": 63155888, "body": "Being static queue is only available in class b. queue is assigned to next in class b. so if you want the value of queue you should first initiate d b than retrieve it using b.next or was it b-&gt;next."}], "answers": [{"comments": [{"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 0, "creation_date": 1466012109, "post_id": 37842059, "comment_id": 63144948, "body": "Maybe I&#39;m overlooking something, but what about creating a function that returns a reference to the pointer and then exporting that function in the header. Then you can abuse the fact that a reference returned by a function is an l-value. And l-values can be assigned. Like so: <code>B&amp; getQueue() { return *queue; }</code>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 2, "creation_date": 1466012197, "post_id": 37842059, "comment_id": 63144991, "body": "@Centril How will you do that &quot;without changing A.h and A.cpp&quot; (which is stipulated in the question)?"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 0, "creation_date": 1466012338, "post_id": 37842059, "comment_id": 63145064, "body": "oh, I missed that part of the question... Thanks for saving me from an embarrassing SO answer ;) For those interested,here&#39;s the stuff about l-values: // <a href=\"http://stackoverflow.com/questions/6111905/c-is-return-value-a-l-value\" title=\"c is return value a l value\">stackoverflow.com/questions/6111905/c-is-return-value-a-l-va&zwnj;&#8203;lue</a>"}, {"owner": {"reputation": 63, "user_id": 6470797, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17b28a4d62eae7b0094f9f06f065d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Shunning Jiang", "link": "https://stackoverflow.com/users/6470797/shunning-jiang"}, "edited": false, "score": 0, "creation_date": 1466012615, "post_id": 37842059, "comment_id": 63145201, "body": "alright, I have to find other ways to solve the problem lol. Thank you very much!"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 4, "last_activity_date": 1466011968, "creation_date": 1466011968, "answer_id": 37842059, "question_id": 37841872, "link": "https://stackoverflow.com/questions/37841872/access-some-static-variable-that-are-defined-in-cpp-while-its-class-type-is-als/37842059#37842059", "title": "Access some static variable that are defined in .cpp while its class type is also defined in .cpp", "body": "<p>There is <strong>no way</strong> to access <code>queue</code> outside of <code>A.cpp</code>. <code>static</code> gives the variable internal linkage, making it invisible outside the translation unit. Period.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1466013229, "creation_date": 1466013229, "answer_id": 37842480, "question_id": 37841872, "link": "https://stackoverflow.com/questions/37841872/access-some-static-variable-that-are-defined-in-cpp-while-its-class-type-is-als/37842480#37842480", "title": "Access some static variable that are defined in .cpp while its class type is also defined in .cpp", "body": "<p>You cannot access this variable directly from your code - there is no \"magic syntax\" which allows this. However there is a way around - you can use debugging information generated by compiler. By using it you should be able to access that variable like debugger does. After quick Google search I found <a href=\"http://www.gnu.org/software/gdb/papers/libgdb/libgdb.html\" rel=\"nofollow\" title=\"libgdb\">libgdb</a>. You can try to use it to access that variable, or at least as an example how to load and use debug information.</p>\n"}], "owner": {"reputation": 63, "user_id": 6470797, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17b28a4d62eae7b0094f9f06f065d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Shunning Jiang", "link": "https://stackoverflow.com/users/6470797/shunning-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37842059, "answer_count": 2, "score": 1, "last_activity_date": 1466013229, "creation_date": 1466011226, "question_id": 37841872, "link": "https://stackoverflow.com/questions/37841872/access-some-static-variable-that-are-defined-in-cpp-while-its-class-type-is-als", "title": "Access some static variable that are defined in .cpp while its class type is also defined in .cpp", "body": "<p>I guess I've fallen into a situation that I need to modify something that is \"protected\" in some sense. I worked around and didn't find a proper solution, or it is actually unsolvable.</p>\n\n<p>A.h</p>\n\n<pre><code>class A\n{\n    static void append(int x);\n}\n</code></pre>\n\n<p>A.cpp</p>\n\n<pre><code>class B;\nstatic B *queue = 0;\n\nclass B\n{\n    friend class A;\n\n    int value;\n    B* next;\n\n    B(int x)\n    {\n        value = x;\n        next = queue;\n        queue = this;\n    }\n}\n\nvoid A::append(int x)\n{\n  new B(x);\n}\n</code></pre>\n\n<p>What I want to do is basically finding a way to manipulate the queue externally in another source file without changing A.h and A.cpp, since class A and B don't provide methods to manipulate the queue.</p>\n\n<p>C.cpp</p>\n\n<pre><code>#include \"A.h\"\n\n&lt;whatever magic declaration&gt;\n\nvoid C()\n{\n    queue = 0;\n}\n</code></pre>\n\n<p>Thank you very much for any comments!</p>\n"}, {"tags": ["c++", "math", "perlin-noise"], "comments": [{"owner": {"reputation": 856, "user_id": 950488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GIg0O.png?s=128&g=1", "display_name": "Pikalek", "link": "https://stackoverflow.com/users/950488/pikalek"}, "edited": false, "score": 1, "creation_date": 1466017032, "post_id": 37841845, "comment_id": 63147691, "body": "What specifically is the problem? If the output is wrong, show us an example; if the code is crashing, describe where it goes wrong, etc."}, {"owner": {"reputation": 7, "user_id": 4014375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002345421962/picture?type=large", "display_name": "ZzkilzZ", "link": "https://stackoverflow.com/users/4014375/zzkilzz"}, "reply_to_user": {"reputation": 856, "user_id": 950488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GIg0O.png?s=128&g=1", "display_name": "Pikalek", "link": "https://stackoverflow.com/users/950488/pikalek"}, "edited": false, "score": 0, "creation_date": 1466024385, "post_id": 37841845, "comment_id": 63151615, "body": "I Tried to modify the code to this : <a href=\"https://gyazo.com/e9347771859fdb6b6e8c0494fab56c93\" rel=\"nofollow noreferrer\">gyazo.com/e9347771859fdb6b6e8c0494fab56c93</a> I also changed the grid from 20x20 pixels to 100x100 and i&#39;m now getting this result: <a href=\"https://gyazo.com/f5bc1631bc3452f37478525995d11eb0\" rel=\"nofollow noreferrer\">gyazo.com/f5bc1631bc3452f37478525995d11eb0</a>"}, {"owner": {"reputation": 7, "user_id": 4014375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002345421962/picture?type=large", "display_name": "ZzkilzZ", "link": "https://stackoverflow.com/users/4014375/zzkilzz"}, "reply_to_user": {"reputation": 856, "user_id": 950488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GIg0O.png?s=128&g=1", "display_name": "Pikalek", "link": "https://stackoverflow.com/users/950488/pikalek"}, "edited": false, "score": 0, "creation_date": 1466024576, "post_id": 37841845, "comment_id": 63151717, "body": "With the commented out code i get this result: <a href=\"https://gyazo.com/0320dc638166dd8099b6287e91bf6513\" rel=\"nofollow noreferrer\">gyazo.com/0320dc638166dd8099b6287e91bf6513</a> Which is just random pixels around the screen :/ I really don&#39;t know where the code is failing as i have some difficulties understanding the math. I am currently trying to learn the math through source codes but it&#39;s hard, could someone please give me a detailed explanation of all the mathematical operations? That would help me out alot!!!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1466024842, "post_id": 37841845, "comment_id": 63151833, "body": "Have you read up on integer division versus floating point division?"}, {"owner": {"reputation": 7, "user_id": 4014375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002345421962/picture?type=large", "display_name": "ZzkilzZ", "link": "https://stackoverflow.com/users/4014375/zzkilzz"}, "edited": false, "score": 0, "creation_date": 1466025822, "post_id": 37841845, "comment_id": 63152293, "body": "I don&#39;t think that is the issue, It&#39;s the algorithm i do not understand :/"}], "owner": {"reputation": 7, "user_id": 4014375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002345421962/picture?type=large", "display_name": "ZzkilzZ", "link": "https://stackoverflow.com/users/4014375/zzkilzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466011135, "creation_date": 1466011135, "question_id": 37841845, "link": "https://stackoverflow.com/questions/37841845/what-is-wrong-with-my-perlin-noise-generator", "title": "What is wrong with my perlin noise generator?", "body": "<p>I am trying to generate perlin noise for a math essay for school, and i have some difficulties figuring out the math behind it. This is my perlin class. The perlin noise function generates ( should generate) a number between 0 and 1, that i then multiply by 255 to apply color to every pixel on the screen, please help!</p>\n\n<pre><code> #include \"perlinnoise.h\"\n\n\n\nperlinnoise::perlinnoise()\n{\nsrand(time(NULL));\n\ndouble random = rand() % 1000;\nfor (int i = 0; i &lt; (651 * 2); i = i + 2)\n{\n    random = (rand() % 1000);\n    vecGrad[i] = random / 1000;\n    vecGrad[i + 1] = vecGrad[i];\n    vecGrad[i] = cos(vecGrad[i] * 2 * 3.1416);\n    vecGrad[i + 1] = sin(vecGrad[i + 1] * 2 * 3.1416);\n}\n}\n\nint perlinnoise::perlinNoise(int x, int y)\n{\n//20 pixel in each case\n//30 boxes in width and 20 boxes in height\n//651 vectors to create\n\n\nsf::Vector2i boxXY;\nboxXY.x = ((x / 20));\nboxXY.y = ((y / 20));\n\nsf::Vector2i displacement1;     displacement1.x = x - boxXY.x * 20;     displacement1.y = y - boxXY.y * 20;\nsf::Vector2i displacement2;     displacement2.x = x - (boxXY.x * 20 + 20); displacement2.y = y - boxXY.y * 20;\nsf::Vector2i displacement3;     displacement3.x = x - boxXY.x * 20; displacement3.y = y - (boxXY.y * 20 + 20);\nsf::Vector2i displacement4;     displacement4.x = x - (boxXY.x * 20 + 20); displacement4.y = y - (boxXY.y * 20 + 20);\n\n/*std::cout &lt;&lt; displacement1.x &lt;&lt; std::endl; std::cout &lt;&lt; displacement1.y &lt;&lt; std::endl;\nstd::cout &lt;&lt; displacement2.x &lt;&lt; std::endl; std::cout &lt;&lt; displacement2.y &lt;&lt; std::endl;\nstd::cout &lt;&lt; displacement3.x &lt;&lt; std::endl; std::cout &lt;&lt; displacement3.y &lt;&lt; std::endl;\nstd::cout &lt;&lt; displacement4.x &lt;&lt; std::endl; std::cout &lt;&lt; displacement4.y &lt;&lt; std::endl;*/\n\ndouble dotP1 = (vecGrad[((boxXY.y * 30) + boxXY.x)] * displacement1.x) + (vecGrad[(boxXY.y * 30) + boxXY.x + 1] * displacement1.y);\ndouble dotP2 = (vecGrad[((boxXY.y * 30) + boxXY.x + 3)] * displacement2.x) + (vecGrad[(boxXY.y * 30) + boxXY.x + 4] * displacement2.y);\ndouble dotP3 = (vecGrad[((boxXY.y * 30 + 1) + boxXY.x)] * displacement3.x) + (vecGrad[(boxXY.y * 30) + boxXY.x + 1] * displacement3.y);\ndouble dotP4 = (vecGrad[((boxXY.y * 30 + 1) + boxXY.x + 3)] * displacement4.x) + (vecGrad[(boxXY.y * 30) + boxXY.x + 4] * displacement4.y);\n</code></pre>\n\n<p>This is where i have some troubles ( I think)</p>\n\n<pre><code>int intensity = 0;\ndouble Sx = (3 * (x - boxXY.x * 20) * (x - boxXY.x * 20)) - (2 * (x - boxXY.x * 20) * (x - boxXY.x * 20) * (x - boxXY.x * 20));\ndouble Sy = (3 * (y - boxXY.y * 20) * (y - boxXY.y * 20)) - (2 * (y - boxXY.y * 20) * (y - boxXY.y * 20) * (y - boxXY.y * 20));\n\ndouble a = dotP1 + (Sx * (dotP2 - dotP1));\ndouble b = dotP3 + (Sx * (dotP4 - dotP3));\n\n\n\ndouble aa = dotP1 + (Sy * (dotP2 - dotP1));\ndouble bb = dotP3 + (Sy * (dotP4 - dotP3));\n\nintensity = (a+b+aa+bb)/4;\n//Should generate number between 0 and 1, but doesn't :/\n\nreturn intensity;\n\n}\n\nperlinnoise::~perlinnoise()\n{\n}\n</code></pre>\n\n<p>I've been reading lots of articles, and they are all very unclear about the math used.I ended up generating a grid with 20*20 pixels in each, with each cross section in the grid having a randomly generated gradient vector. I then calculate the displacement vectors and then do the dot product on the four corners with displacement and gradient vectors. This first part is a bit messy as i am not very experienced, but the last part is a bit more straightforward. I use a smoothing function on the x and y axis and use that number to generate a, b, aa and bb, and i then take the average of that. This is what i thought i understood from the articles i read, but apparently it's wrong :/ Any help please?\nThanks in advance!</p>\n"}, {"tags": ["c++", "casting", "iostream", "chrono"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466011410, "post_id": 37841784, "comment_id": 63144586, "body": "I can repo it on MSVS 2015,  Cannot repo on g++ or clang."}, {"owner": {"reputation": 1915, "user_id": 4475902, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8283da1024358bce8d1a286b923c360c?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/4475902/konrad"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466011508, "post_id": 37841784, "comment_id": 63144640, "body": "@NathanOliver yes, I thought it might be something to do with the compiler. Unfortunately, at the moment, I only have access to one compiler, the one I used to obtain the result above."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1466011701, "post_id": 37841784, "comment_id": 63144744, "body": "Actually <a href=\"https://ideone.com/n662yH\" rel=\"nofollow noreferrer\">can reproduce</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1466011932, "post_id": 37841784, "comment_id": 63144858, "body": "I am curious why you do not keep the duration and then do the conversion on the duration&#39;s after you get the end time.  I find <a href=\"http://coliru.stacked-crooked.com/a/0d8313f798a7fe16\" rel=\"nofollow noreferrer\">this</a> easier to read and use and I get the same values on all compilers."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1466012052, "post_id": 37841784, "comment_id": 63144921, "body": "As soon as you escape the type safety of the <code>&lt;chrono&gt;</code> system by using <code>.count()</code> you are far more vulnerable to run time errors.  Delay using <code>.count()</code> and <code>time_since_epoch()</code> as long as you can, if you have to use them at all."}, {"owner": {"reputation": 1915, "user_id": 4475902, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8283da1024358bce8d1a286b923c360c?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/4475902/konrad"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466012096, "post_id": 37841784, "comment_id": 63144944, "body": "@NathanOliver I was just doing some small comparisons (checking performance of code) between Python and C++ code, very informally. I was more curious as to why the code behaved as above."}], "answers": [{"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 1, "last_activity_date": 1466012700, "creation_date": 1466012700, "answer_id": 37842296, "question_id": 37841784, "link": "https://stackoverflow.com/questions/37841784/chrono-duration-cast-not-working-when-doing-arithmetic-in-cout/37842296#37842296", "title": "chrono duration_cast not working when doing arithmetic in cout", "body": "<p>You are probably overflowing <code>unsigned long</code> (sizeof is 4):</p>\n\n<pre><code>unsigned long begin_time = \\\n    std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now().time_since_epoch()).count();\n</code></pre>\n\n<p>Recommended:</p>\n\n<pre><code>using namespace std::chrono;\nauto begin_time = steady_clock::now();\n\n//some code here\n\nstd::cout &lt;&lt; \"time diff with arithmetic in cout: \" &lt;&lt; \n    duration_cast&lt;milliseconds&gt;(steady_clock::now() - begin_time).count() &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 1, "last_activity_date": 1466012827, "creation_date": 1466012827, "answer_id": 37842336, "question_id": 37841784, "link": "https://stackoverflow.com/questions/37841784/chrono-duration-cast-not-working-when-doing-arithmetic-in-cout/37842336#37842336", "title": "chrono duration_cast not working when doing arithmetic in cout", "body": "<p>There is nothing wrong with <code>duration_cast</code>, the problem is that an <code>unsigned long</code> is not large enough to handle a time in milliseconds since epoch. From ideone I get this output:</p>\n\n<pre><code>Max value for `unsigned long`: 4294967295\nMilliseconds since epoch:     15426527488\n</code></pre>\n\n<p>I get the number of milliseconds by directly outpouting:</p>\n\n<pre><code>std::cout &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now().time_since_epoch()).count() &lt;&lt; std::endl;\n</code></pre>\n\n<p>In your first output, you get a gigantic number because <code>begin_time</code> is cast to <code>std::chrono::milliseconds::rep</code> (the return type of <code>.count()</code>) which is large enough to handle the <code>time_since_epoch</code> (guaranted by the standard), while in your second output, both value are truncated by the <code>unsigned long</code> and thus you get a (probably) correct result.</p>\n\n<p><em>Note: There may be architecture where an <code>unsigned long</code> is enough to handle this but you should not rely on it and directly use the arithmetic operators provided for <code>std::chrono::duration</code>.</em></p>\n"}], "owner": {"reputation": 1915, "user_id": 4475902, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8283da1024358bce8d1a286b923c360c?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/4475902/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1225, "favorite_count": 0, "accepted_answer_id": 37842296, "answer_count": 2, "score": 3, "last_activity_date": 1466012827, "creation_date": 1466010938, "question_id": 37841784, "link": "https://stackoverflow.com/questions/37841784/chrono-duration-cast-not-working-when-doing-arithmetic-in-cout", "title": "chrono duration_cast not working when doing arithmetic in cout", "body": "<p>I do not understand the following behaviour</p>\n\n<pre><code>unsigned long begin_time = \\\n    std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now().time_since_epoch()).count();\n\n//some code here\n\nstd::cout &lt;&lt; \"time diff with arithmetic in cout: \" &lt;&lt; \\\n    std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now().time_since_epoch()).count() - begin_time &lt;&lt; std::endl;\n\nunsigned long time_diff = \\\n    std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now().time_since_epoch()).count() - begin_time;\n\nstd::cout &lt;&lt; \"time_diff: \" &lt;&lt; time_diff &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>time diff with arithmetic in cout: &lt;very large number (definitely not milliseconds)&gt;\ntime_diff: &lt;smaller number (definitely milliseconds)&gt;\n</code></pre>\n\n<p>Why does the <code>duration_cast</code> not work when I do arithmetic within the cout? I have used <code>unsigned int</code> and <code>int</code> for the <code>time_diff</code> variable, but I always get good output when I first do the arithmetic within the variable initialization or assignment.</p>\n\n<p><strong>NOTE</strong></p>\n\n<p>I am using Visual Studio 2013 (Community edition)</p>\n"}, {"tags": ["c++", "loops", "iteration"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466025129, "post_id": 37841663, "comment_id": 63151969, "body": "You could eliminate a lot of <code>if</code> statements by using an array of <code>board</code>s (or string).  Something like <code>cout &lt;&lt; board_array[numberGuesses] &lt;&lt; endl;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 10, "last_activity_date": 1466010719, "creation_date": 1466010719, "answer_id": 37841722, "question_id": 37841663, "link": "https://stackoverflow.com/questions/37841663/looping-increment-not-working/37841722#37841722", "title": "Looping Increment Not Working", "body": "<p><code>=</code> is the assignment operator. To check for equality, you should use the <code>==</code> operator:</p>\n\n<pre><code>if (numberGuesses == 0) {\n    // Here -------^\n    // (and do the same for the other conditions)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6470814, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6e06ccf9c20dd3f8d7a45b6fe68d069?s=128&d=identicon&r=PG&f=1", "display_name": "user6470814", "link": "https://stackoverflow.com/users/6470814/user6470814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466011023, "creation_date": 1466010504, "last_edit_date": 1466011023, "question_id": 37841663, "link": "https://stackoverflow.com/questions/37841663/looping-increment-not-working", "title": "Looping Increment Not Working", "body": "<p>I am a beginner to programming and am new to the forum. I have been working on a beginning project, a game of Hangman. I am using an iteration constant, numberGuesses to track how many guesses the user has inputted. However, my program is not iterating properly and I cannot figure why for whatever reason. Any help is greatly appreciated!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string userWord = \" \";\n    char userLetter = ' ';\n    int numberGuesses = 0;\n    string board1 =\n        \" -------|\\n\"\n        \" |      |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board2 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board3 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \" |      |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board4 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \"-|      |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board5 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \"-|-     |\\n\"\n        \"        |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board6 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \"-|-     |\\n\"\n        \"/       |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n    string board7 = \n        \" -------|\\n\"\n        \" |      |\\n\"\n        \" O      |\\n\"\n        \"-|-     |\\n\"\n        \"/ \\\\     |\\n\"\n        \"        |\\n\"\n        \"      -----\";\n\n    cout &lt;&lt; \"Enter a word to guess: \";\n    cin &gt;&gt; userWord;\n    for (int i = 0; i &lt; userWord.length(); i++)\n       {\n           userWord[i] = toupper(userWord[i]);\n       }\n    cout &lt;&lt; \"You entered: \" &lt;&lt; userWord &lt;&lt; endl;\n\n\n\n    do \n    {\n\n        if (numberGuesses = 0)\n        {\n            cout &lt;&lt; board1;\n        }    \n        if (numberGuesses = 1)\n        {\n            cout &lt;&lt; board2;\n        }\n        else if (numberGuesses = 2)\n        {\n            cout &lt;&lt; board3;   \n        }\n        else if (numberGuesses = 3)\n        {\n            cout &lt;&lt; board4;\n        }\n        else if (numberGuesses = 4)\n        {\n            cout &lt;&lt; board5;\n        }\n        else if (numberGuesses = 5)\n        {\n            cout &lt;&lt; board6;\n        }\n        else if (numberGuesses = 6)\n        {\n            cout &lt;&lt; board7;\n        }\n\n        cout &lt;&lt; \"\\nEnter a letter to guess: \";\n        cin &gt;&gt; userLetter;\n        userLetter = toupper(userLetter);\n        cout &lt;&lt; \"You entered: \" &lt;&lt; userLetter &lt;&lt; endl;\n\n        if (userWord.find(userLetter) != string::npos)\n            cout &lt;&lt; userLetter &lt;&lt; \" is in the word to guess.\" &lt;&lt; endl;\n        else\n            cout &lt;&lt; userLetter &lt;&lt; \" is NOT in the word to guess.\" &lt;&lt; endl;\n\n        numberGuesses++;\n\n    }\n\n    while (numberGuesses &lt;= 6);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1466010582, "post_id": 37841637, "comment_id": 63144126, "body": "Please debug my program. No."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466011087, "post_id": 37841637, "comment_id": 63144410, "body": "@Mukul - You <i>are</i> asking us to debug your code.  You want us to take your code, compile it, run it, <b>debug it</b>, and give you an answer.  Why not learn to use the debugger that comes with your compiler tool suite?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466011672, "post_id": 37841637, "comment_id": 63144728, "body": "<i>can you guys take a look at the code</i>  -- You have a mountain of code.  No programmer can take all that code and ingest it at one time.  You could have reduced this down to a small, reproducible example using <code>std::list</code> and references."}, {"owner": {"reputation": 488, "user_id": 5506443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b224fdaa6addab49f578b84203908cff?s=128&d=identicon&r=PG&f=1", "display_name": "Muku", "link": "https://stackoverflow.com/users/5506443/muku"}, "edited": false, "score": 0, "creation_date": 1466012762, "post_id": 37841637, "comment_id": 63145279, "body": "okay, it was actually bad(there were a mountain of code), i kind of panicked, sorry guys."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466012776, "post_id": 37841637, "comment_id": 63145285, "body": "@Mukul <a href=\"http://ideone.com/8vgiVM\" rel=\"nofollow noreferrer\">As an example</a>  Note that the list is empty.  Why is it empty?  You could have experimented with something like the example to see that you need to return a reference, not a copy of the list."}, {"owner": {"reputation": 488, "user_id": 5506443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b224fdaa6addab49f578b84203908cff?s=128&d=identicon&r=PG&f=1", "display_name": "Muku", "link": "https://stackoverflow.com/users/5506443/muku"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466014405, "post_id": 37841637, "comment_id": 63146150, "body": "@PaulMcKenzie it is not empty, i have added several products to the list, and i am calling the function (after pushing back product into the list) that returns the number of products. That&#39;s why i know, that products are not being added to the list."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466015517, "post_id": 37841637, "comment_id": 63146791, "body": "@Mukul I don&#39;t understand what you&#39;re saying.  You say you&#39;re adding products to the list, and then you discovered that products are not being added to the list.  Second, your code that returned an object instead of a reference, and then assigned that to a reference is invalid C++.  Third, the answer you accepted illustrates exactly what the problem is, and the small example program <a href=\"http://ideone.com/uNizuT\" rel=\"nofollow noreferrer\">could have been adjusted</a> to show this:"}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466012508, "post_id": 37842029, "comment_id": 63145149, "body": "<code>list&lt;Product&gt;&amp; Product_list = GetProduct_list();</code> -- This shouldn&#39;t compile if <code>GetProduce_list()</code> returns an object and not a reference."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 2, "last_activity_date": 1466011808, "creation_date": 1466011808, "answer_id": 37842029, "question_id": 37841637, "link": "https://stackoverflow.com/questions/37841637/what-the-products-are-not-added-in-the-product-listsupermarket-cpp/37842029#37842029", "title": "What the products are not added in the product list?(supermarket.cpp)", "body": "<p>I suspect that the problem is from the combination of this couple of methods</p>\n\n<pre><code>list&lt;Product&gt; Supermarket::GetProduct_list()\n {return Product_list;}\n\nvoid Supermarket::Add_new_product_in_productlist(Product P)\n{\n   //Need to Implement\n   list&lt;Product&gt;&amp; Product_list = GetProduct_list();\n   Product_list.push_back(P);\n   cout &lt;&lt;\"GetProduct Count in ADD_new\"&lt;&lt;GetTotalProductsCount()&lt;&lt;endl;\n}\n</code></pre>\n\n<p><code>GetProduct_list()</code> return a <strong>copy</strong> of the member <code>Product_list</code>, so when you define</p>\n\n<pre><code>   list&lt;Product&gt;&amp; Product_list = GetProduct_list();\n</code></pre>\n\n<p>you obtain a reference to a <strong>copy</strong> of the member; when you add a product</p>\n\n<pre><code>   Product_list.push_back(P);\n</code></pre>\n\n<p>you add a product in a copy of the member, not in the member. Copy that is destroyer exiting from <code>Add_new_product_in_productlist()</code></p>\n\n<p>I suppose you could simply avoid the use of <code>GetProduct_list()</code></p>\n\n<pre><code>void Supermarket::Add_new_product_in_productlist(Product P)\n{\n   Product_list.push_back(P);\n   cout &lt;&lt;\"GetProduct Count in ADD_new\"&lt;&lt;GetTotalProductsCount()&lt;&lt;endl;\n}\n</code></pre>\n\n<p>but, if you want use <code>GetProduct_list()</code> in this way, you should return a reference to <code>Product_list</code>, so</p>\n\n<pre><code>list&lt;Product&gt; &amp; Supermarket::GetProduct_list()\n { return Product_list; }\n</code></pre>\n\n<p>p.s.: sorry for my bad English</p>\n"}], "owner": {"reputation": 488, "user_id": 5506443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b224fdaa6addab49f578b84203908cff?s=128&d=identicon&r=PG&f=1", "display_name": "Muku", "link": "https://stackoverflow.com/users/5506443/muku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 37842029, "answer_count": 1, "score": -2, "last_activity_date": 1466012476, "creation_date": 1466010411, "last_edit_date": 1466012476, "question_id": 37841637, "link": "https://stackoverflow.com/questions/37841637/what-the-products-are-not-added-in-the-product-listsupermarket-cpp", "title": "What the products are not added in the product list?(supermarket.cpp)", "body": "<p>I can only change functions that says need to implement. The products are not being added to the list, Why? (Also please take a look at the read/display list of product function)  (supermarket.cpp) </p>\n\n<p>The product is another class which has variable such quantiry, price and such.\nThe supermarket system maintains a list of products that an administrator add an product and read products.     </p>\n\n<p>At supermarket.cpp</p>\n\n<pre><code>{\nAdd_new_product_in_productlist(p3); //p3 is product type object    \nlist&lt;Product&gt; Plist=GetProduct_list(); //Return the prolist from supermarket\nWrite_product_in_supermarket_system(Plist);\nRead_products_from_supermarket_system();\nvoid Supermarket::Write_product_in_supermarket_system(list\n}\n\nlist &lt;Product&gt; product_list)\n{\n     SetProduct_list(product_list);\n     cout &lt;&lt;\"StProduct Count in ADD_new\"&lt;&lt;GetTotalProductsCount()&lt;&lt;endl;\n}  \n\n  //Read display the product from product list\n  list&lt;Product&gt; Supermarket::Read_products_from_supermarket_system()\n  {\n    list&lt;Product&gt; Productlist = GetProduct_list();\n    list&lt;Product&gt;:: iterator iterator;\n\n    for(iterator = Productlist.begin(); \n         iterator != Productlist.end();++iterator)      {\n    iterator-&gt;Display_Product();\n    cout &lt;&lt;\"I am here\"&lt;&lt;endl;\n\n    return Productlist;\n  }\n</code></pre>\n"}, {"tags": ["c++", "matrix", "code-generation", "submatrix"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1466009948, "post_id": 37841369, "comment_id": 63143778, "body": "You can generate a lot of code if you use templates. If you post the code that you would write manually for 2x2 sub-matrices and 3x3 sub-matrices, you might get help on how to generalize that for  MxM sub-matrices."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1466010467, "post_id": 37841369, "comment_id": 63144051, "body": "What is the algorithm you use to determine all possible 2x2 sub matrices and why do you need to generate code dynamically?"}, {"owner": {"reputation": 1450, "user_id": 5358284, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/tf9Cf.jpg?s=128&g=1", "display_name": "polfosol \u0c20_\u0c20", "link": "https://stackoverflow.com/users/5358284/polfosol-%e0%b0%a0-%e0%b0%a0"}, "edited": false, "score": 0, "creation_date": 1466010775, "post_id": 37841369, "comment_id": 63144235, "body": "You know, if <code>N</code> gets larger, the number of sub-matrices would exponentially grow. Why do you need <i>all of them</i>?"}, {"owner": {"reputation": 346, "user_id": 3760156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd5a4ab75a247314a8ef641a323d70?s=128&d=identicon&r=PG&f=1", "display_name": "Vineel", "link": "https://stackoverflow.com/users/3760156/vineel"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1466019719, "post_id": 37841369, "comment_id": 63149197, "body": "@Bob__ I first select two columns and then two rows. Selecting two columns need 2 loops and for rows 2 loops. That&#39;s how I get 4 loops. Basically the four iterators of 4 loops are for 2 rows and 2 colums which form the 2x2 matrix"}, {"owner": {"reputation": 346, "user_id": 3760156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd5a4ab75a247314a8ef641a323d70?s=128&d=identicon&r=PG&f=1", "display_name": "Vineel", "link": "https://stackoverflow.com/users/3760156/vineel"}, "reply_to_user": {"reputation": 1450, "user_id": 5358284, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/tf9Cf.jpg?s=128&g=1", "display_name": "polfosol \u0c20_\u0c20", "link": "https://stackoverflow.com/users/5358284/polfosol-%e0%b0%a0-%e0%b0%a0"}, "edited": false, "score": 0, "creation_date": 1466019834, "post_id": 37841369, "comment_id": 63149271, "body": "@polfosol I would like to know whether any of them are singular. Please answer if you have a better way to determine if any of the sub matrices is singular Thanks."}, {"owner": {"reputation": 1450, "user_id": 5358284, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/tf9Cf.jpg?s=128&g=1", "display_name": "polfosol \u0c20_\u0c20", "link": "https://stackoverflow.com/users/5358284/polfosol-%e0%b0%a0-%e0%b0%a0"}, "edited": false, "score": 0, "creation_date": 1466059484, "post_id": 37841369, "comment_id": 63162182, "body": "@vineel The general problem is way more complicated than it looks. I have to give it more thoughts, but sadly I don&#39;t have enough time right now."}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 4965159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1c579a4b1685c29629e181b4d36ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth Puranik", "link": "https://stackoverflow.com/users/4965159/prashanth-puranik"}, "edited": false, "score": 0, "creation_date": 1466011693, "post_id": 37841943, "comment_id": 63144739, "body": "Just to add - since there are 10C4 combinations for row and for columns each, the total number of sub matrices would be (10C4)^2"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1466012270, "post_id": 37841943, "comment_id": 63145029, "body": "OT, there isn&#39;t Mathjax in SO, but you can use i <b>&lt;sub&gt;</b> 1 <b>&lt;/sub&gt;</b> for subscripts..."}, {"owner": {"reputation": 346, "user_id": 3760156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd5a4ab75a247314a8ef641a323d70?s=128&d=identicon&r=PG&f=1", "display_name": "Vineel", "link": "https://stackoverflow.com/users/3760156/vineel"}, "edited": false, "score": 0, "creation_date": 1466019311, "post_id": 37841943, "comment_id": 63148972, "body": "@PrashanthPuranik But how to generate those 10C4 combinations without using loops? If you think that I haven&#39;t got it the right way, please elaborate your answer. Thanks"}, {"owner": {"reputation": 36, "user_id": 4965159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1c579a4b1685c29629e181b4d36ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth Puranik", "link": "https://stackoverflow.com/users/4965159/prashanth-puranik"}, "edited": false, "score": 0, "creation_date": 1466045792, "post_id": 37841943, "comment_id": 63157537, "body": "My point is - you don&#39;t <i>need to</i> use 2*M loops to generate the combinations. The algorithm I have mentioned is one way to generate the combinations of rows/columns in a sequence."}, {"owner": {"reputation": 36, "user_id": 4965159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1c579a4b1685c29629e181b4d36ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth Puranik", "link": "https://stackoverflow.com/users/4965159/prashanth-puranik"}, "edited": false, "score": 0, "creation_date": 1466049612, "post_id": 37841943, "comment_id": 63158364, "body": "I made an edit to include the algorithm to generate the next combination (disclaimer added)"}, {"owner": {"reputation": 346, "user_id": 3760156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd5a4ab75a247314a8ef641a323d70?s=128&d=identicon&r=PG&f=1", "display_name": "Vineel", "link": "https://stackoverflow.com/users/3760156/vineel"}, "edited": false, "score": 0, "creation_date": 1466070477, "post_id": 37841943, "comment_id": 63169305, "body": "@PrashanthPuranik Thanks a lot, I have written the code, it works. I will think over the algo. Actually I want to check singularity of all possible sub matrices. My approach is to compute all submatrices and then find their determinants. How ever after computing the determinant of 2x2 matrices , I&#39;ll store them and use while computing determinants of  3x3 matrices. And so on. Can you suggest me a better approach. I have no space and time constraints."}, {"owner": {"reputation": 36, "user_id": 4965159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1c579a4b1685c29629e181b4d36ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth Puranik", "link": "https://stackoverflow.com/users/4965159/prashanth-puranik"}, "edited": false, "score": 0, "creation_date": 1466079252, "post_id": 37841943, "comment_id": 63175036, "body": "Hey, it works like a counter - something like a fuel station/gas station/petrol bunk filling machine. The digits get incremented starting from the right and when you hit the max digit at a position (9 for decimal system we use!) it increments the digit to the left and resets the currently considered digit to 0 (minimum value digit) - except in our case we don&#39;t &quot;reset&quot; to zero, we reset based on some other logic - this is what the inner for loop does you can figure out :) - it is somewhat complicated to explain in words."}], "tags": [], "owner": {"reputation": 36, "user_id": 4965159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c1c579a4b1685c29629e181b4d36ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth Puranik", "link": "https://stackoverflow.com/users/4965159/prashanth-puranik"}, "is_accepted": false, "score": 1, "last_activity_date": 1466082102, "last_edit_date": 1466082102, "creation_date": 1466011533, "answer_id": 37841943, "question_id": 37841369, "link": "https://stackoverflow.com/questions/37841369/determine-all-square-sub-matrices-of-a-given-nxn-matrix-in-c/37841943#37841943", "title": "Determine all square sub matrices of a given NxN matrix in C++", "body": "<p>If I get what you are saying, you mean you require M loops to choose M rows, and M loops for M columns for an M x M sub matrix, 1 &lt;= M &lt;= N</p>\n\n<p>You don't need 2*M loops to do this. No need to dynamically generate code with an ever-increasing number of loops!</p>\n\n<p>Essentially, you need to \"combine\" all possible combinations of i_{1}, i_{2}, ..., i_{M} and j_{1}, j_{2}, ..., j_{M} such that 1 &lt;= i_{1} &lt; i_{2} &lt; ... &lt; i_{M} &lt;= N (and similarly for j)</p>\n\n<p>If you have all possible combinations of all such i_{1}, ..., i_{M} you are essentially done.</p>\n\n<p>Say for example you are working with a 10 x 10 matrix and you require 4 x 4 sub matrices.</p>\n\n<p>Suppose you selected rows {1, 2, 3, 4} and columns {1, 2, 3, 4} initially. Next select column {1, 2, 3, 5}. Next {1, 2, 3, 6} and so on till {1, 2, 3, 10}. Next select {1, 2, 4, 5}, next {1, 2, 4, 6} and so on till you reach {7, 8, 9, 10}. This is one way you could generate all (\"10 choose 4\") combinations in a sequence.</p>\n\n<p>Go ahead, write a function that generates this sequence and you are done. It can take as input M, N, current combination (as an array of M values) and return the next combination.</p>\n\n<p>You need to call this sequence to select the next row and the next column.</p>\n\n<p>I have put this a little loosely. If something is not clear I can edit to update my answer.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>I will be assuming loop index starts from 0 (the C++ way!). To elaborate the algorithm further, given one combination as input the next combination can be generated by treating the combination as a \"counter\" of sorts (except that no digit repeats).</p>\n\n<p>Disclaimer : I have not run or tested the below snippet of code. But the idea is there for you to see. Also, I don't use C++ anymore. Bear with me for any mistakes.</p>\n\n<pre><code>// Requires M &lt;= N as input, (N as in N x N matrix)\nvoid nextCombination( int *currentCombination, int M, int N ) {\n    int *arr = currentCombination;\n    for( int i = M - 1; i &gt;= 0; i-- ) {\n        if( arr[i] &lt; N - M + i ) {\n            arr[i]++;\n            for( i = i + 1, i &lt; M; i++ ) {\n                arr[i] = arr[i - 1] + 1;\n            }\n            break;\n        }\n    }\n\n}\n\n// Write code for Initialization: arr = [0, 1, 2, 3]\nnextCombination( arr, 4, 10 );\n// arr = [0, 1, 2, 4]\n\n// You can check if the last combination has been reached by checking if arr[0] == N - M + 1. Please incorporate that into the function if you wish.\n</code></pre>\n\n<hr>\n\n<p>Edit:</p>\n\n<blockquote>\n  <p>Actually I want to check singularity of all possible sub matrices. My approach is to compute all submatrices and then find their determinants. How ever after computing the determinant of 2x2 matrices , I'll store them and use while computing determinants of 3x3 matrices. And so on. Can you suggest me a better approach. I have no space and time constraints. \u2013 vineel </p>\n</blockquote>\n\n<p>A straight-forward approach using what you suggest is to index the determinants based on the the rows-columns combination that makes a sub matrix. At first store determinants for 1 x 1 sub matrices in a hash map (basically the entries themselves).</p>\n\n<p>So the hash map would look like this for the 10 x 10 case<br>\n    <code>\n    { \n        \"0-0\" : arr_{0, 0}, \n        \"0-1\" : arr_{0, 1},\n        . \n        . \n        . \n        \"1-0\" : arr_{1, 0}, \n        \"1-1\" : arr_{1, 1},\n        .\n        .\n        .\n        \"9-9\" : arr_{9, 9}\n    }\n</code></p>\n\n<p>When M = 2, you can calculate determinant using the usual formula (the determinants for 1 x 1 sub matrices having been initialized) and then add to the hash map. The hash string for a 2 x 2 sub matrix would look something like <code>1:3-2:8</code> where the row indices in the original 10 x 10 matrix are 1,3 and the column indices are 2, 8. In general, for m x m sub matrix, the determinant can be determined by looking up all necessary (already) computed (m - 1) x (m - 1) determinants - this is a simple hash map lookup. Again, add the determinant to hash map once calculated.</p>\n\n<p>Of course, you may need to slightly modify the nextCombination() function - it currently assumes row and column indices run from 0 to N - 1.</p>\n\n<p>On another note, since all sub matrices are to be processed starting from 1 x 1, you don't need something like a nextCombination() function. Given a 2 x 2 matrix, you just need to select one more row and column to form a 3 x 3 matrix. So you need to select one row-index (that's not part of the row indices that make the 2 x 2 sub matrix) and similarly one column-index. But doing this for every 2 x 2 matrix will generate duplicate 3 x 3 matrices - you need to think of some way to eliminate duplicates. One way to avoid duplicates is by choosing only such row/column whose index is greater than the highest row/column index in the sub matrix.</p>\n\n<p>Again I have loosely defined the idea. You can build upon it.</p>\n"}], "owner": {"reputation": 346, "user_id": 3760156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd5a4ab75a247314a8ef641a323d70?s=128&d=identicon&r=PG&f=1", "display_name": "Vineel", "link": "https://stackoverflow.com/users/3760156/vineel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466082102, "creation_date": 1466009522, "question_id": 37841369, "link": "https://stackoverflow.com/questions/37841369/determine-all-square-sub-matrices-of-a-given-nxn-matrix-in-c", "title": "Determine all square sub matrices of a given NxN matrix in C++", "body": "<p>GIven an NxN square matrix, I would like to determine all possible square sub matrices by removing equal number of rows and columns.</p>\n\n<p>In order to determine all possible 2x2 matrices I need to loop 4 times. Similarly for 3x3 matrices I need to loop 6 times and so on. Is there a way to generate code in C++ so that the code for the loops is generated dynamically? I have checked some answers related to code generation in C++, but most of them use python in it. I have no idea regarding python. So, is it possible to write code to generate code in C++? </p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1466009234, "post_id": 37841218, "comment_id": 63143375, "body": "Why are folk still wasting their lives building string classes? Go clubbing instead."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466009248, "post_id": 37841218, "comment_id": 63143388, "body": "Your <code>String&amp; String::Concat(const String &amp; Str)</code> will cause out-of-range access unless what is concatenated is zero-length string."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466009515, "post_id": 37841218, "comment_id": 63143521, "body": "Do you have a question?"}], "answers": [{"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 1, "last_activity_date": 1466013163, "creation_date": 1466013163, "answer_id": 37842454, "question_id": 37841218, "link": "https://stackoverflow.com/questions/37841218/string-stringconcatconst-char-str/37842454#37842454", "title": "String &amp; String::Concat(const char Str[])", "body": "<p>You expect the length of the concatenated string to be the sum of the length of the two strings. Therefore:</p>\n\n<pre><code>String&amp; String::Concat(const String &amp; Str)\n{\n    pTemp = new char[NumChars + Str.NumChars + 1];\n    strcpy(pTemp, pChar);\n    strcat(pTemp, Str.pChar);\n    delete[]pChar;\n    pChar = pTemp;\n    return *this;\n}\n</code></pre>\n\n<p>You can optimize this further by not strcat()-ing but strcpy()-ing twice (with an offset added to pTemp second time), as you already know the string length.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6470601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMD8f.jpg?s=128&g=1", "display_name": "Jonathon", "link": "https://stackoverflow.com/users/6470601/jonathon"}, "edited": false, "score": 0, "creation_date": 1466201971, "post_id": 37842822, "comment_id": 63236798, "body": "Hm, doesn&#39;t work when I run it, does the same thing my code did, just stopped when it reached concat in main.... I&#39;m still confused :("}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 3, "user_id": 6470601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMD8f.jpg?s=128&g=1", "display_name": "Jonathon", "link": "https://stackoverflow.com/users/6470601/jonathon"}, "edited": false, "score": 0, "creation_date": 1466211272, "post_id": 37842822, "comment_id": 63238835, "body": "@Jonathon - did you <code>Display()</code> the result?"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1466014363, "creation_date": 1466014363, "answer_id": 37842822, "question_id": 37841218, "link": "https://stackoverflow.com/questions/37841218/string-stringconcatconst-char-str/37842822#37842822", "title": "String &amp; String::Concat(const char Str[])", "body": "<p>I'm not sure to understand the use of your <code>MaxSlots</code>; it's the size of allocated <code>pChar</code> (minus 1)? If so, there are points in your code where you forget to set/update/use.</p>\n\n<p>And I don't understand what do you mean with \"how to pass through a String class\", but regarding \"what steps are even needed in order to concatenate two strings\", you've forgotten to take in count the number of chars already present in the object.</p>\n\n<p>First of all, I suggest to create e <code>Reserve()</code> method; something like [caution: code not tested]</p>\n\n<pre><code>String&amp; String::Reserve (int n)\n{\n  if ( n &gt; MaxSlots )\n   {\n      MaxSlots = n;\n      pTemp    = new char[MaxSlots+1];\n      strcpy(pTemp, pChar);\n      delete[]pChar;\n      pChar = pTemp;\n   }\n}\n</code></pre>\n\n<p>Next, rewrite your <code>Concat()</code> methods in this way</p>\n\n<pre><code>String&amp; String::Concat(const String &amp; Str)\n{\n   NumChars += Str.NumChars;\n   Reserve(NumChars);\n   strcat(pChar, Str.pChar);\n   return *this;\n}\n\nString &amp; String::Concat(const char * Str)\n{\n   if ( Str )\n   {\n      NumChars += strlen(Str);\n      Reserve(NumChars);\n      strcat(pChar, Str);\n   }\n   return *this;\n}\n</code></pre>\n\n<p>p.s.: sorry for my bad English</p>\n"}], "owner": {"reputation": 3, "user_id": 6470601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMD8f.jpg?s=128&g=1", "display_name": "Jonathon", "link": "https://stackoverflow.com/users/6470601/jonathon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 37842822, "answer_count": 2, "score": -5, "last_activity_date": 1466014363, "creation_date": 1466009049, "last_edit_date": 1466009165, "question_id": 37841218, "link": "https://stackoverflow.com/questions/37841218/string-stringconcatconst-char-str", "title": "String &amp; String::Concat(const char Str[])", "body": "<p>I decided to code all assignments from last semesters c++ class over summer in order to better prepare for c++ 3 but I don't understand how to pass through a String class or what steps are even needed in order to concatenate two strings and the display the result in the main cpp file.\nIn my Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"String.h\"\n\nint main()\n{\n    String Str1;\n    String Str2(\"this is a test\");\n    String Str3(Str2);\n    String Str4(\"bruh\");\n    int result;\n\n    cout &lt;&lt; \"Testing Display: \" &lt;&lt; endl;\n    Str2.Display();\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Testing displayLine: \" &lt;&lt; endl;\n    Str2.displayLine();\n    cout &lt;&lt; endl;\n\n    result = Str2.Compare(Str3);\n    if (result &lt; 0)\n    {\n        Str2.Display();\n        cout &lt;&lt; \" comes before \" &lt;&lt; endl;\n        Str3.Display();\n        cout &lt;&lt; endl;\n    }\n\n    else\n        if (result &gt; 0)\n        {\n            Str3.Display();\n            cout &lt;&lt; \" comes before \" &lt;&lt; endl;\n            Str2.Display();\n        }\n        else\n        {\n            Str3.Display();\n            cout &lt;&lt; \" is equal to \" &lt;&lt; endl;\n            Str2.Display();\n        }\n    cout &lt;&lt; endl;\n\n    result = Str2.Compare(\"wxyz\");\n    Str1.Copy(Str3);\n\n    cout &lt;&lt; \"Str1 contains \" &lt;&lt; Str1.length() &lt;&lt;\" characters\"&lt;&lt; endl;\n\n\n    cout &lt;&lt; \"Concatenation: \";\n    Str2.Concat(Str4);\n        cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>In my String.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;string.h&gt;\n#include \"String.h\"\n\n#pragma warning(disable:4996)\n\nString::String()\n{\n    NumChars = 0;\n    MaxSlots = 0;\n    pChar = new char[NumChars+1];\n    pChar[0] = '\\0';\n}\n\nString::String(const char Str[])\n{\n    NumChars = strlen(Str);\n    pChar = new char[NumChars + 1];\n    strcpy(pChar, Str);\n}\n\nString::String(const String &amp; Str)\n{\n    NumChars = Str.NumChars;\n    pChar = new char[NumChars + 1];\n    strcpy(pChar, Str.pChar);\n}\n\nString::~String()\n{\n    delete[] pChar;\n}\n\nint String::Compare(const String &amp; Str) const\n{\n    return strcmp(pChar, Str.pChar);        //case sensitive\n}\n\nint String::Compare(const char Str[]) const\n{\n    return strcmp(pChar, Str);          //case sensitive\n}\n\nString&amp; String::Copy(const String &amp; Str)\n{\n    if (this != &amp;Str)\n    {\n        if (MaxSlots &lt; Str.NumChars)\n        {\n            delete[]pChar;\n            MaxSlots = Str.NumChars;\n            pChar = new char[NumChars + 1];\n        }\n        else;\n        NumChars = Str.NumChars;\n        strcpy(pChar, Str.pChar);\n    }\n    else;\n    return *this;\n}\n\nString&amp; String::Copy(const char Str[])\n{\n    delete[] pChar;\n    NumChars = strlen(Str);\n    MaxSlots = NumChars;\n    pChar = new char[MaxSlots + 1];\n    return *this;\n}\n\nString&amp; String::Concat(const String &amp; Str)\n{\n    pTemp = new char[NumChars+1];\n    strcpy(pTemp, pChar);\n    strcat(pTemp, Str.pChar);\n    delete[]pChar;\n    pChar = pTemp;\n    return *this;\n}\n\nString &amp; String::Concat(const char Str[])\n{\n    return *this;\n    /*\n    NumChars = strlen(Str);\n    MaxSlots = NumChars;\n\n\n     delete[] pChar;\n    MaxSlots = MaxSlots + NumChars;\n    NumChars = NumChars + strlen(Str);\n    pChar = new char[MaxSlots + 1]; */\n}\n\nvoid    String::Display() const\n{\n    cout &lt;&lt; pChar;\n}\n\nvoid    String::displayLine() const\n{\n    cout &lt;&lt; pChar;\n}\n</code></pre>\n\n<p>In my String.h:</p>\n\n<pre><code>#ifndef STRING_H\n#define STRING_H\n\nclass String\n    {\n    public:\n                    String(); //default constructor\n                    String(const char[]); \n                    String(const String &amp;); //copy constructor\n                    ~String();\n        int         Compare(const String &amp;) const;\n        int         Compare(const char[])const;\n        String&amp;     Copy(const String&amp;);\n        String&amp;     Copy(const char[]);\n        String&amp;     Concat(const String&amp;);\n        String&amp;     Concat(const char[]);\n        void        Display()const;\n        void        displayLine() const;\n        int         length() const;\n\n    private:\n        char    * pChar;\n        char    *pTemp;\n        int     NumChars;\n        int     MaxSlots;\n};\n\ninline int String::length() const\n{\n    return NumChars;\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "templates", "pointers"], "comments": [{"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466009128, "post_id": 37841203, "comment_id": 63143315, "body": "Look at the &quot;prototype&quot; design pattern"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6470713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e789395619bcbe72f590653a9fdfd581?s=128&d=identicon&r=PG&f=1", "display_name": "pajosftw", "link": "https://stackoverflow.com/users/6470713/pajosftw"}, "edited": false, "score": 0, "creation_date": 1466013783, "post_id": 37842311, "comment_id": 63145841, "body": "I added a short block of code to my OP to try and illustrate my problem better."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 11, "user_id": 6470713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e789395619bcbe72f590653a9fdfd581?s=128&d=identicon&r=PG&f=1", "display_name": "pajosftw", "link": "https://stackoverflow.com/users/6470713/pajosftw"}, "edited": false, "score": 0, "creation_date": 1466014871, "post_id": 37842311, "comment_id": 63146395, "body": "@pajosftw Added another example."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1466014481, "last_edit_date": 1466014481, "creation_date": 1466012749, "answer_id": 37842311, "question_id": 37841203, "link": "https://stackoverflow.com/questions/37841203/cast-from-parent-to-childt-with-unknown-t-and-get-t/37842311#37842311", "title": "Cast from Parent* to Child&lt;T&gt;* with unknown T, and get T", "body": "<p>Do you mean something like this (minimal example)?</p>\n\n<pre><code>struct Parent {\n    virtual Parent * clone() = 0;\n};\n\ntemplate&lt;class T&gt;\nstruct Child: Parent {\n    Child&lt;T&gt; * clone() override {\n        return new Child&lt;T&gt;;\n    }\n};\n\nint main() {\n    Child&lt;int&gt; *c = new Child&lt;int&gt;;\n    Child&lt;int&gt; *cclone = c-&gt;clone();\n    Parent *pclone = c-&gt;clone();\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Considering the snippet added by the OP with an edit, here is a slightly modified example (based on the same idea):</p>\n\n<pre><code>struct Parent;\n\ntemplate &lt;typename T&gt;\nvoid foo(Parent*) { }\n\nstruct Parent{\n    virtual void invokeFoo() = 0;\n};\n\ntemplate &lt;typename T&gt;\nstruct Child: Parent {\n    void invokeFoo() override {\n        foo&lt;T&gt;(this);\n    }\n};\n\nint main() {\n    Parent* object = new Child&lt;int&gt;;\n    object-&gt;invokeFoo();\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6470713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e789395619bcbe72f590653a9fdfd581?s=128&d=identicon&r=PG&f=1", "display_name": "pajosftw", "link": "https://stackoverflow.com/users/6470713/pajosftw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466014481, "creation_date": 1466008975, "last_edit_date": 1466013734, "question_id": 37841203, "link": "https://stackoverflow.com/questions/37841203/cast-from-parent-to-childt-with-unknown-t-and-get-t", "title": "Cast from Parent* to Child&lt;T&gt;* with unknown T, and get T", "body": "<p>I have an object of type Child that has been initialized with unknown T. I need to create a new object of the same type T as this object. My object of type Child has an untemplated base class Parent. My only access to my object of type Child is through a pointer of type Parent. Is it possible to cast this pointer to Parent into a pointer to the correctly-templated type Child object? Or otherwise obtain T from the pointer to Parent?</p>\n\n<p>The only examples I can find already know T when casting.</p>\n\n<pre><code>struct Parent{\n\n};\n\ntemplate &lt;typename T&gt;\nstruct Child{\n    typedef T    ValueType;\n\n};\n\ntemplate &lt;typename T&gt;\nvoid foo(Parent*) { }\n\n// implementation\n\nParent* object; // provided from somewhere else, points to Child&lt;T&gt; of unknown T\n\nfoo&lt;T&gt;(object); // PROBLEM because T depends on what T the Child in object was templated with\n</code></pre>\n"}, {"tags": ["c++", "member"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1466009066, "post_id": 37841199, "comment_id": 63143285, "body": "<code>text in the input file will not be changed by putback</code>"}, {"owner": {"reputation": 131, "user_id": 6149716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c78332830c14aca6ea6e2caee71e8894?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousAlpaca", "link": "https://stackoverflow.com/users/6149716/curiousalpaca"}, "edited": false, "score": 0, "creation_date": 1466009238, "post_id": 37841199, "comment_id": 63143377, "body": "&quot;If you put back a character other than the last character read, the text in the input file will not be changed by putback&quot;   I putback the last character."}, {"owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "edited": false, "score": 0, "creation_date": 1466014399, "post_id": 37841199, "comment_id": 63146145, "body": "It says putting back a character that is not the last one read will not change the input file. But where do you see the book saying putting back the last character read WILL change the input file?"}], "owner": {"reputation": 131, "user_id": 6149716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c78332830c14aca6ea6e2caee71e8894?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousAlpaca", "link": "https://stackoverflow.com/users/6149716/curiousalpaca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466008968, "creation_date": 1466008968, "question_id": 37841199, "link": "https://stackoverflow.com/questions/37841199/c-putback-member-function", "title": "C++ putback member function", "body": "<p>I was studying this book \"Problem solving with c++\" when I came across this text:\n\"Notice that putback places a character in an input stream, while put places\na character in an output stream. The character that is put back into the input\nstream with the member function putback need not be the last character read;\nit can be any character you wish. If you put back a character other than the\nlast character read, the text in the input file will not be changed by putback,\nalthough your program will behave as if the text in the input file had been\nchanged.\"</p>\n\n<p>I implemented a small program to figure out if this is true or not:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream input;\n    ofstream output;\n\n    input.open(\"infile.dat\");\n    output.open(\"outfile.dat\");\n\n    char next;\n    input.get(next);\n    while (next!='a')\n    {\n        output.put(next);\n        input.get(next);\n    }\n    input.putback(next);\n    input.get(next);\n    output&lt;&lt;\"haha\"&lt;&lt;next;\n    input.close();\n    output.close();\n    return 0;\n}\n</code></pre>\n\n<p>If the book is correct, than the text in the infile.dat should be changed. But when I check the infile.dat, the data in it doesn't change a bit. What am I missing here?</p>\n"}, {"tags": ["c++", "ios", "objective-c", "macos", "function"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "edited": false, "score": 0, "creation_date": 1466010589, "post_id": 37841399, "comment_id": 63144134, "body": "Okey, thank you . It works. But now i still have the warnings. Am I missing something?"}, {"owner": {"reputation": 46, "user_id": 6012300, "user_type": "registered", "profile_image": "https://graph.facebook.com/1165018290175759/picture?type=large", "display_name": "Thien Liu", "link": "https://stackoverflow.com/users/6012300/thien-liu"}, "reply_to_user": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "edited": false, "score": 0, "creation_date": 1466010842, "post_id": 37841399, "comment_id": 63144276, "body": "What&#39;s the warning this time?"}, {"owner": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "edited": false, "score": 0, "creation_date": 1466011197, "post_id": 37841399, "comment_id": 63144481, "body": "<a href=\"https://www.dropbox.com/s/ga5zcagk85m9jy3/Schermafbeelding%202016-06-15%20om%2019.17.25.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/ga5zcagk85m9jy3/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "edited": false, "score": 0, "creation_date": 1466011215, "post_id": 37841399, "comment_id": 63144492, "body": "<a href=\"https://www.dropbox.com/s/ga5zcagk85m9jy3/Schermafbeelding%202016-06-15%20om%2019.17.25.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/ga5zcagk85m9jy3/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "edited": false, "score": 0, "creation_date": 1466012071, "post_id": 37841399, "comment_id": 63144931, "body": "i was able to fix the warning of the function , but not when I call the function      NSString *myUserKeyValue = nil;          if ((int)myUserKey == 1) {         myUserKeyValue = usernameValue;     }     else if ((int)myUserKey == 2) {         myUserKeyValue = firstnameValue;     }     else if ((int)myUserKey == 3) {         myUserKeyValue = lastnameValue;     }     else if ((int)myUserKey == 4) {         myUserKeyValue = fullnameValue;     }     else if ((int)myUserKey == 5) {         myUserKeyValue = emailValue;     }     return myUserKeyValue;"}], "tags": [], "owner": {"reputation": 46, "user_id": 6012300, "user_type": "registered", "profile_image": "https://graph.facebook.com/1165018290175759/picture?type=large", "display_name": "Thien Liu", "link": "https://stackoverflow.com/users/6012300/thien-liu"}, "is_accepted": false, "score": 1, "last_activity_date": 1466010421, "last_edit_date": 1466010421, "creation_date": 1466009641, "answer_id": 37841399, "question_id": 37841190, "link": "https://stackoverflow.com/questions/37841190/custom-function-not-returning-correct-value/37841399#37841399", "title": "Custom function not returning correct value", "body": "<p>The condition checking should be <code>if (myUserKey == 1)</code> instead of <code>(myUserKey = 1)</code>, the same modification for the rest.</p>\n"}, {"comments": [{"owner": {"reputation": 2981, "user_id": 3146563, "user_type": "registered", "profile_image": "https://graph.facebook.com/697156688/picture?type=large", "display_name": "jtlim", "link": "https://stackoverflow.com/users/3146563/jtlim"}, "edited": false, "score": 0, "creation_date": 1466062452, "post_id": 37845313, "comment_id": 63164016, "body": "No! You&#39;re type casting NSUInteger to pointers, and then comparing a pointer to a hard coded number. Fix your parameter type."}], "tags": [], "owner": {"reputation": 15, "user_id": 5355950, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-QWnf-K2rZPI/AAAAAAAAAAI/AAAAAAAAABo/EIJIajFXdLI/photo.jpg?sz=128", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/5355950/damian-van-de-kauter"}, "is_accepted": false, "score": -1, "last_activity_date": 1466023035, "creation_date": 1466023035, "answer_id": 37845313, "question_id": 37841190, "link": "https://stackoverflow.com/questions/37841190/custom-function-not-returning-correct-value/37845313#37845313", "title": "Custom function not returning correct value", "body": "<p>This should do it.</p>\n\n<pre><code>-(void)awakeFromNib {\n    NSString *result = [SMUser getValueForKey:SMUsername];\n    NSLog(@\"THE RESULT: %@\", result);\n}\n\n+ (NSString *)getValueForKey:(SMUserKey*)myUserKey {\n    NSString *myUserKeyValue = nil;\n    if (myUserKey == 1) {\n        myUserKeyValue = @\"Username\";\n    }\n    if (myUserKey == 2) {\n        myUserKeyValue = @\"First Name\";\n    }\n    if (myUserKey == 3) {\n        myUserKeyValue = @\"Last Name\";\n    }\n    if (myUserKey == 4) {\n        myUserKeyValue = @\"Full Name\";\n    }\n    if (myUserKey == 5) {\n        myUserKeyValue = @\"Email\";\n    }\n    return myUserKeyValue;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6473191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2a02173fa00b3a8791e6ad103abb5d?s=128&d=identicon&r=PG&f=1", "display_name": "Koder", "link": "https://stackoverflow.com/users/6473191/koder"}, "is_accepted": false, "score": 1, "last_activity_date": 1466061767, "creation_date": 1466061767, "answer_id": 37852458, "question_id": 37841190, "link": "https://stackoverflow.com/questions/37841190/custom-function-not-returning-correct-value/37852458#37852458", "title": "Custom function not returning correct value", "body": "<p>Just posting another way of doing this using switch case,</p>\n\n<pre><code>+ (NSString *)getValueForKey:(SMUserKey*)myUserKey {\nNSString *myUserKeyValue = nil;\n\nswitch (SMUserKey) {\n    case 1:\n    {\n        myUserKeyValue = @\"Username\";\n        break;\n    }\n    case 2:\n    {\n        myUserKeyValue = @\"First Name\";\n        break;\n    }\n    case 3:\n    {\n        myUserKeyValue = @\"Last Name\";\n        break;\n    }\n    case 4:\n    {\n        myUserKeyValue = @\"Full Name\";\n        break;\n    }\n    case 5:\n    {\n        myUserKeyValue = @\"Email\";\n        break;\n    }\n\n    default:\n        break;\n}\n\nreturn myUserKeyValue;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 2981, "user_id": 3146563, "user_type": "registered", "profile_image": "https://graph.facebook.com/697156688/picture?type=large", "display_name": "jtlim", "link": "https://stackoverflow.com/users/3146563/jtlim"}, "is_accepted": true, "score": 0, "last_activity_date": 1466062535, "last_edit_date": 1466062535, "creation_date": 1466062217, "answer_id": 37852617, "question_id": 37841190, "link": "https://stackoverflow.com/questions/37841190/custom-function-not-returning-correct-value/37852617#37852617", "title": "Custom function not returning correct value", "body": "<p>You have enum names.  <strong>Use Them</strong></p>\n\n<pre><code>+ (NSString *)getValueForKey:(SMUserKey)myUserKey {\n    switch(myUserKey) {\n    case SMUsername:  return @\"Username\";\n    case SMFirstName: return @\"First Name\";\n    case SMLastName:  return @\"Last Name\";\n    case SMFullName:  return @\"Full Name\";\n    case SMEmail:     return @\"EMail\";\n    default:          return nil;\n    }\n}\n</code></pre>\n\n<p>Hard coding your magic numbers is going to cause maintenance headaches long term.</p>\n\n<p>Note that the parameter type should be <code>SMUserKey</code> not <code>SMUserKey*</code></p>\n"}], "owner": {"reputation": 47, "user_id": 6470721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VapEK.jpg?s=128&g=1", "display_name": "Damian Van de Kauter", "link": "https://stackoverflow.com/users/6470721/damian-van-de-kauter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 37852617, "answer_count": 4, "score": -1, "last_activity_date": 1466062535, "creation_date": 1466008932, "last_edit_date": 1466011403, "question_id": 37841190, "link": "https://stackoverflow.com/questions/37841190/custom-function-not-returning-correct-value", "title": "Custom function not returning correct value", "body": "<p>I have a code to create my own function but it gives me a warning:</p>\n\n<ul>\n<li>Incompatible integer to pointer conversion assigning to 'SMUserKey *' (aka 'unsigned long *') from 'int'</li>\n<li>Incompatible integer to pointer conversion sending 'SMUserKey' (aka 'unsigned long') to parameter of type 'SMUserKey *' (aka 'unsigned long *')</li>\n</ul>\n\n<p>So it's showing warning and I want to get rid of them.</p>\n\n<p>This is my .h code:</p>\n\n<pre><code>typedef NSUInteger SMUserKey;\n\n\nNS_ENUM(SMUserKey) {\n    SMUsername = 1,\n    SMFirstName = 2,\n    SMLastName = 3,\n    SMFullName = 4,\n    SMEmail = 5,\n};\n</code></pre>\n\n<p>This is my .m code:</p>\n\n<pre><code>-(void)awakeFromNib {\n    NSString *result = [SMUser getValueForKey:SMUsername];\n    NSLog(@\"THE RESULT: %@\", result);\n}\n\n+ (NSString *)getValueForKey:(SMUserKey*)myUserKey {\n    NSString *myUserKeyValue = nil;\n    if (myUserKey == 1) {\n        myUserKeyValue = @\"Username\";\n    }\n    if (myUserKey == 2) {\n        myUserKeyValue = @\"First Name\";\n    }\n    if (myUserKey == 3) {\n        myUserKeyValue = @\"Last Name\";\n    }\n    if (myUserKey == 4) {\n        myUserKeyValue = @\"Full Name\";\n    }\n    if (myUserKey == 5) {\n        myUserKeyValue = @\"Email\";\n    }\n    return myUserKeyValue;\n}\n</code></pre>\n\n<p>This is the image showing the warnings:</p>\n\n<p><a href=\"http://i.stack.imgur.com/cxMob.png\" rel=\"nofollow\">Click here to see the image</a></p>\n"}, {"tags": ["c++", "stl", "iterator"], "comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1466008644, "post_id": 37840879, "comment_id": 63143044, "body": "I really don&#39;t see, how your code is supposed to work: You are passing the address of two iterators and a functor that takes an int to <code>std::partition</code> and expect it to do something meaningfull?"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1466008724, "post_id": 37840879, "comment_id": 63143093, "body": "<code>bool operator==()</code> and <code>bool operator!=()</code>  are definitely false"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1466008773, "post_id": 37840879, "comment_id": 63143124, "body": "Also the <code>DualRandIt</code> isn&#39;t actually an iterator at all. It is missing most of the necessary type defs/traits as well as a dereference operator."}], "answers": [{"comments": [{"owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "edited": false, "score": 0, "creation_date": 1466064474, "post_id": 37841331, "comment_id": 63165237, "body": "So besides an iterator wrapper, I also need some combined object DualElement&lt;V1, V2&gt; to iterate over?"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "edited": false, "score": 1, "creation_date": 1466066749, "post_id": 37841331, "comment_id": 63166712, "body": "@Matthias Yes, but I think this DualElement&lt;&gt; could be embedded inside of your iterator. This could be a pair for example <code>std::pair&lt;int*, int&gt;</code> where <code>first</code> is pointer to array and <code>second</code> is an index in it."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 3, "last_activity_date": 1466009386, "last_edit_date": 1495541775, "creation_date": 1466009386, "answer_id": 37841331, "question_id": 37840879, "link": "https://stackoverflow.com/questions/37840879/c-random-access-iterator-out-of-range/37841331#37841331", "title": "C++ Random Access Iterator out of range", "body": "<p>You have Undefined Behaviour at the std::partition call:</p>\n\n<pre><code>return std::partition(&amp;first, &amp;last, p)-&gt;it1;\n</code></pre>\n\n<p>this causes to partition range of elements of type <code>DualRandIt&lt;&gt;</code> between two addresses <code>&amp;first</code> and <code>&amp;last</code>. What you wanted here is :</p>\n\n<pre><code>return std::partition(first, last, p).it1;\n</code></pre>\n\n<p>but then you no longer partition pointers but iterators and this will get your lots of errors because your iterator is not standard compliant. </p>\n\n<p>To see how to write an iterator see here: <a href=\"https://stackoverflow.com/questions/8054273/how-to-implement-an-stl-style-iterator-and-avoid-common-pitfalls\">How to implement an STL-style iterator and avoid common pitfalls?</a></p>\n"}], "owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1466087023, "creation_date": 1466007968, "last_edit_date": 1466087023, "question_id": 37840879, "link": "https://stackoverflow.com/questions/37840879/c-random-access-iterator-out-of-range", "title": "C++ Random Access Iterator out of range", "body": "<p>In order to partition or sort two ranges simultaneously (as opposed to <code>std::partition</code> or <code>std::sort</code> for only one range) while only considering the elements of the first range during comparisons, I created a template Random Access Iterator <code>DualRandIt</code> wrapping two Random Access Iterators.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\n// Random Access Iterator wrapping two Random Access Iterators\ntemplate&lt;typename RandIt1, typename RandIt2&gt;\nstruct DualRandIt {\n\n    using difference_type = typename std::iterator&lt;std::random_access_iterator_tag, DualRandIt&lt;RandIt1, RandIt2&gt; &gt;::difference_type;\n\n    DualRandIt(RandIt1 it1, RandIt2 it2) : it1(it1), it2(it2) {}\n    DualRandIt(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) : it1(v.it1), it2(v.it2) {}\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; &amp;operator=(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) {\n        it1 = v.it1;\n        it2 = v.it2;\n        return *this;\n    }\n\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; &amp;operator+=(difference_type n) {\n        it1 += n;\n        it2 += n;\n        return (*this)\n    }\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; operator+(difference_type n) const {\n        return DualRandIt&lt;RandIt1, RandIt2&gt;(it1 + n, it2 + n);\n    }\n    friend inline DualRandIt&lt;RandIt1, RandIt2&gt; operator+(difference_type n, const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) {\n        return v + n;\n    }\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; &amp;operator-=(difference_type n) {\n        it1 -= n;\n        it2 -= n;\n        return (*this)\n    }\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; operator-(difference_type n) const {\n        return DualRandIt&lt;RandIt1, RandIt2&gt;(it1 - n, it2 - n);\n    }\n    inline difference_type operator-(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 - v.it1; // or it2 - v.it2;\n    }\n\n    friend inline void swap(DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v1, DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v2) {\n        std::swap(v1.it1, v2.it1);\n        std::swap(v1.it2, v2.it2);\n    }\n    inline DualRandIt&lt;RandIt1, RandIt2&gt; operator[](difference_type i) const {\n        return DualRandIt&lt;RandIt1, RandIt2&gt;(it1[i], it2[i]);\n    }\n\n    inline bool operator==(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 == v.it1;\n    }\n    inline bool operator!=(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 != v.it1;\n    }\n    inline bool operator&lt;(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 &lt; v.it1;\n    }\n    inline bool operator&lt;=(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 &lt;= v.it1;\n    }\n    inline bool operator&gt;(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 &gt; v.it1;\n    }\n    inline bool operator&gt;=(const DualRandIt&lt;RandIt1, RandIt2&gt; &amp;v) const {\n        return it1 &gt;= v.it1;\n    }\n\n    RandIt1 it1;\n    RandIt2 it2;\n};\n\n// Simultaneous partitioning of two ranges with a predicate (only applied to elements of the first range)\ntemplate&lt;typename BidirIt1, typename BidirIt2, typename UnaryPredicate&gt;\ninline BidirIt1 dual_partition(BidirIt1 f1, BidirIt1 l1, BidirIt2 f2, BidirIt2 l2, UnaryPredicate p) {\n    DualRandIt&lt;BidirIt1, BidirIt2&gt; first(f1, f2);\n    DualRandIt&lt;BidirIt1, BidirIt2&gt; last(l1, l2);\n    return std::partition(&amp;first, &amp;last, p)-&gt;it1;\n}\n</code></pre>\n\n<p>Using this code gives <code>Exception thrown: read access violation</code> during partitioning. Using the <code>std::partition</code> works fine on the first range and since the implementation of the logical operator overloads seems rather trivial I wonder how that it is possible to go out of range?</p>\n\n<p>The following code can be used to trigger the exception:</p>\n\n<pre><code>// --------------------------------------------------------\n// For testing purposes\n// --------------------------------------------------------\nstruct Compare {\n\n    Compare(int position) : position(position) {}\n\n    inline bool operator()(const int &amp;info) const {\n        return info &lt;= position;\n    }\n    inline bool operator()(const DualRandIt&lt;int*, int*&gt; &amp;info) const {\n        return *info.it1 &lt;= position;\n    }\n\n    const int position;\n};\n\nint main() {\n    int a[5];\n    int b[5];\n\n    for (int i = 0; i &lt; 5; ++i) {\n        a[i] = 5 - i;\n        b[i] = 5 - i;\n    }\n\n    //std::partition(&amp;a[0], &amp;a[4] + 1, Compare(3));\n    dual_partition(&amp;a[0], &amp;a[4]+1, &amp;b[0], &amp;b[4] + 1, Compare(3));\n}\n</code></pre>\n\n<p><strong>Edit version 2</strong>:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\ntemplate&lt;typename Element1, typename Element2&gt;\nstruct DualRandIt {\n\n    DualRandIt(Element1 *it1, Element2 *it2) : it1(it1), it2(it2) {}\n    DualRandIt(const DualRandIt&lt;Element1, Element2&gt; &amp;v) : it1(v.it1), it2(v.it2) {}\n    inline DualRandIt&lt;Element1, Element2&gt; &amp;operator=(const DualRandIt&lt;Element1, Element2&gt; &amp;v) {\n        it1 = v.it1; it2 = v.it2;\n        return *this;\n    }\n\n    typedef std::ptrdiff_t difference_type;\n\n    inline DualRandIt&lt;Element1, Element2&gt; &amp;operator++() {\n        ++it1; ++it2;\n        return (*this);\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; operator++(int) {\n        DualRandIt&lt;Element1, Element2&gt; it = *this;\n        ++it1; ++it2;\n        return it;\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; operator+(difference_type n) const {\n        return DualRandIt&lt;Element1, Element2&gt;(it1 + n, it2 + n);\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; &amp;operator+=(difference_type n) {\n        it1 += n; it2 += n;\n        return (*this)\n    }\n    friend inline DualRandIt&lt;Element1, Element2&gt; operator+(difference_type n, const DualRandIt&lt;Element1, Element2&gt; &amp;v) {\n        return v + n;\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; &amp;operator--() {\n        --it1; --it2;\n        return (*this);\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; operator--(int) {\n        DualRandIt&lt;Element1, Element2&gt; it = *this;\n        --it1; --it2;\n        return it;\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; operator-(difference_type n) const {\n        return DualRandIt&lt;Element1, Element2&gt;(it1 - n, it2 - n);\n    }\n    inline DualRandIt&lt;Element1, Element2&gt; &amp;operator-=(difference_type n) {\n        it1 -= n; it2 -= n;\n        return (*this)\n    }\n    inline difference_type operator-(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 - v.it1; // or it2 - v.it2;\n    }\n\n    inline DualRandIt&lt;Element1, Element2&gt; operator[](difference_type i) const {\n        return DualRandIt&lt;Element1, Element2&gt;(it1[i], it2[i]);\n    }\n\n    struct value_type {\n        inline bool operator&lt;(const Element1 &amp;e) const {\n            return e1 &lt; e;\n        }\n        inline bool operator&lt;(const value_type &amp;v) const {\n            return e1 &lt; v.e1;\n        }\n\n        Element1 e1;\n        Element2 e2;\n    };\n\n    struct reference {\n\n        inline reference &amp;operator=(const reference &amp;v) {\n            *e1 = *v.e1; *e2 = *v.e2;\n            return *this;\n        }\n        inline reference &amp;operator=(const value_type &amp;v) {\n            *e1 = v.e1; *e2 = v.e2;\n            return *this;\n        }\n        operator value_type() const {\n            value_type rv = { *e1, *e2 };\n            return rv;\n        }\n\n        inline bool operator==(const reference &amp;v) const {\n            return *e1 == *v.e1;\n        }\n        inline bool operator!=(const reference &amp;v) const {\n            return *e1 != *v.e1;\n        }\n        inline bool operator&lt;(const reference &amp;v) const {\n            return *e1 &lt; *v.e1;\n        }\n        inline bool operator&lt;=(const reference &amp;v) const {\n            return *e1 &lt;= *v.e1;\n        }\n        inline bool operator&gt;(const reference &amp;v) const {\n            return *e1 &gt; *v.e1;\n        }\n        inline bool operator&gt;=(const reference &amp;v) const {\n            return *e1 &gt;= *v.e1;\n        }\n\n        inline bool operator==(const Element1 &amp;e) const {\n            return *e1 == e;\n        }\n        inline bool operator!=(const Element1 &amp;e) const {\n            return *e1 != e;\n        }\n        inline bool operator&lt;(const Element1 &amp;e) const {\n            return *e1 &lt; e;\n        }\n        inline bool operator&lt;=(const Element1 &amp;e) const {\n            return *e1 &lt;= e;\n        }\n        inline bool operator&gt;(const Element1 &amp;e) const {\n            return *e1 &gt; e;\n        }\n        inline bool operator&gt;=(const Element1 &amp;e) const {\n            return *e1 &gt;= e;\n        }\n\n        inline bool operator==(const value_type &amp;v) const {\n            return *e1 == v.e1;\n        }\n        inline bool operator!=(const value_type &amp;v) const {\n            return *e1 != v.e1;\n        }\n        inline bool operator&lt;(const value_type &amp;v) const {\n            return *e1 &lt; v.e1;\n        }\n        inline bool operator&lt;=(const value_type &amp;v) const {\n            return *e1 &lt;= v.e1;\n        }\n        inline bool operator&gt;(const value_type &amp;v) const {\n            return *e1 &gt; v.e1;\n        }\n        inline bool operator&gt;=(const value_type &amp;v) const {\n            return *e1 &gt;= v.e1;\n        }\n\n        Element1 *e1;\n        Element2 *e2;\n    };\n\n    reference operator*() {\n        reference rv = { it1, it2 };\n        return rv;\n    }\n\n    typedef reference pointer;\n\n    inline bool operator==(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 == v.it1;\n    }\n    inline bool operator!=(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 != v.it1;\n    }\n    inline bool operator&lt;(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 &lt; v.it1;\n    }\n    inline bool operator&lt;=(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 &lt;= v.it1;\n    }\n    inline bool operator&gt;(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 &gt; v.it1;\n    }\n    inline bool operator&gt;=(const DualRandIt&lt;Element1, Element2&gt; &amp;v) const {\n        return it1 &gt;= v.it1;\n    }\n\n    typedef std::random_access_iterator_tag iterator_category;\n    typedef reference pointer;\n\n    Element1 *it1;\n    Element2 *it2;\n};\n\nstruct Compare {\n    Compare(int position) : position(position) {}\n    inline bool operator()(const DualRandIt&lt;int, int&gt;::reference &amp;info) const { return info &lt;= position; }\n    const int position;\n};\n\nint main() {\n    int a[] = { 5,4,3,2,1 };\n    int b[] = { 5,4,3,2,1 };\n\n    DualRandIt&lt;int, int&gt; first(&amp;a[0], &amp;b[0]);\n    DualRandIt&lt;int, int&gt; last(&amp;a[5], &amp;b[5]);\n\n    std::partition(first, last, Compare(3));\n    //std::sort(first, last);\n}\n</code></pre>\n\n<p>The sorting now works but the partitioning seems to leave the elements after the middle element untouched. Furthermore, I am not sure if it was actually necessary to restrict the iterators to pointers for <code>DualRandIt</code>?</p>\n\n<p>It is also possible to rewrite the partition method, etc. to apply every swap to the other range as well:\ntemplate</p>\n\n<pre><code>template&lt;typename BidirIt1, typename BidirIt2, typename UnaryPredicate&gt;\nBidirIt1 dual_partition(BidirIt1 f1, BidirIt1 l1, BidirIt2 f2, BidirIt2 l2, UnaryPredicate p) {\n    BidirIt1 fp = std::find_if_not(f1, l1, p);\n    f2 += (fp - f1);\n    f1 = fp;\n    if (f1 == l1) return f1;\n\n    BidirIt1 i = std::next(f1);\n    BidirIt2 j = std::next(f2);\n    for (; i != l1; ++i, ++j) {\n        if (p(*i)) {\n            std::iter_swap(i, f1);\n            std::iter_swap(j, f2);\n            ++f1;\n            ++f2;\n        }\n    }\n    return f1;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466014512, "post_id": 37840682, "comment_id": 63146207, "body": "Can you link the RFC? I don&#39;t recognize that spec."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466014586, "post_id": 37840682, "comment_id": 63146249, "body": "@sehe many thanks. I probably didn&#39;t write it very well... <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466014753, "post_id": 37840682, "comment_id": 63146341, "body": "@sehe to my mind the interesting (and actually quite complex) thing about HTTP headers is that &#39;/&#39; is a separator, which separates values within a value. So actually value[0] should itself be a vector of values: &quot;text&quot;, &quot;html&quot; with added properties (&quot;q&quot;=&quot;1.0&quot;) and so on."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1466077410, "post_id": 37840682, "comment_id": 63173777, "body": "@RichardHodges: There is a very simple http header parser given in the example code associated to <code>boost::asio</code>: <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/example/cpp11/http/server/request_parser.cpp\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/doc/html/boost_asio/example/cpp11/&zwnj;&#8203;&hellip;</a> However, an advantage of that, and a drawback of spirit, is that that kind of parser can be &quot;interrupted&quot; and resumed if it runs out of text to parse. Spirit does not support &quot;tristate&quot; parsing, i.e. &quot;good, fail, not finished&quot;. In spirit AFAIK if you run out of text to parse, the state of the parser will be lost when it returns. So, I think you don&#39;t actually want spirit for this."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1466077472, "post_id": 37840682, "comment_id": 63173826, "body": "I guess maybe you aren&#39;t using it for a server or something, or you are using it in some kind of situation where you will always have the full header, or can afford to reparse?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1466079950, "post_id": 37840682, "comment_id": 63175532, "body": "@ChrisBeck I&#39;ve written an http server which stores the header in a protobuf message, so I have the full header value. Now I want to reparse the value to turn each header type&#39;s value into it own stucture (many will be similar of course). This then makes using the header&#39;s contents easy as its a simple api call. .e.g <code>if (header.content_type().type() == &quot;application&quot; &amp;&amp; header.content_type().subtype == &quot;json&quot;)...</code>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1466080024, "post_id": 37840682, "comment_id": 63175585, "body": "@ChrisBeck the rationale for using protobuf to store http headers (and payloads) is that I can hand off protobuf services calls which have arrived via http onto a bus for further handling."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466110462, "post_id": 37840682, "comment_id": 63195201, "body": "@sehe finally came up with an answer. I&#39;d value your expert eye on it."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466116449, "post_id": 37840682, "comment_id": 63197563, "body": "@RichardHodges consider it done. I think you could simplify to do without the variant. I&#39;ll show that for fun. Hold on"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1466103607, "last_edit_date": 1466103607, "creation_date": 1466098929, "answer_id": 37865999, "question_id": 37840682, "link": "https://stackoverflow.com/questions/37840682/decode-http-header-value-fully-with-boost-spirit/37865999#37865999", "title": "decode http header value fully with boost spirit", "body": "<p>OK, after an heroic 24 hours of struggle (well, not really - more like reading the manual over and over again...), I've found <em>a</em> way that works.</p>\n\n<p>I am by no means competent with <code>boost::spirit</code>. If someone out there can improve on this answer, please do post it.</p>\n\n<p>This spirit state machine takes the value of a header (with one, optionally parameterised, value) and turns it into a <code>content_type</code> structure.</p>\n\n<p>My amateur reading of the HTTP standard indicates that some headers have the form (spaces here indicate any amount of white space, values may be quoted or not:</p>\n\n<pre><code>Header-Name: tokena/tokenb [; param1 = \"value\" [; param2 = value]...]\n</code></pre>\n\n<p>whereas others have the more general form:</p>\n\n<pre><code>Header-Name: token [; param1 = \"value\"[; param2 = value]...] [ , token ...]\n</code></pre>\n\n<p>This code covers the first case - i.e. the HTTP <code>Content-Type</code> header value. I will need to extend it to cater for the <code>Accept</code> header (which can advertise multiple values with parameters) - that will come later.</p>\n\n<p>So here's the code. Please by all means show me how to improve it!!</p>\n\n<pre><code>#define BOOST_SPIRIT_DEBUG\n#include &lt;gtest/gtest.h&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/config/warning_disable.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/qi_char.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_core.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_operator.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_fusion.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_stl.hpp&gt;\n#include &lt;boost/fusion/include/adapt_struct.hpp&gt;\n#include &lt;boost/fusion/include/std_pair.hpp&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;boost/variant.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\nnamespace ascii = boost::spirit::ascii;\n\nusing unary_parameter = std::string;\n\nstruct binary_parameter\n{\n    std::string name;\n    std::string value;\n};\nBOOST_FUSION_ADAPT_STRUCT(binary_parameter,\n                          (std::string, name)\n                          (std::string, value))\n\nusing parameter = boost::variant&lt;unary_parameter, binary_parameter&gt;;\n\nstruct type_subtype\n{\n    std::string type;\n    std::string subtype;\n};\nBOOST_FUSION_ADAPT_STRUCT(type_subtype,\n                          (std::string, type)\n                          (std::string, subtype))\n\nusing content_type_pair = std::pair&lt;std::string, std::string&gt;;\n\nstruct content_type\n{\n    type_subtype type;\n    std::vector&lt;parameter&gt; params;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(content_type,\n                          (type_subtype, type)\n                          (std::vector&lt;parameter&gt;, params))\n\ntemplate&lt;class Iterator&gt;\nstruct token_grammar : qi::grammar&lt;Iterator, content_type()&gt;\n{\n\n    token_grammar() : token_grammar::base_type(content_type_rule)\n    {\n        using ascii::char_;\n        using qi::omit;\n        using qi::eoi;\n\n        CR = char_('\\r');\n        LF = char_('\\n');\n        CRLF = CR &gt;&gt; LF;\n        SP = char_(' ');\n        HT = char_('\\t');\n        LWS = -CRLF &gt;&gt; +(SP | HT);\n\n        UPALPHA = char_('A', 'Z');\n        LOALPHA = char_('a', 'z');\n        ALPHA = UPALPHA | LOALPHA;\n        DIGIT = char_('0', '9');\n        CTL = char_(0, 31) | char_(127);\n        QUOT = char_('\"');\n        TEXT = (char_ - CTL) | HT;\n\n        separator = char_('(') | ')' | '&lt;' | '&gt;' | '@'\n        | ',' | ';' | ':' | '\\\\' | '\"'\n        | '/' | '[' | ']' | '?' | '='\n        | '{' | '}' | SP | HT;\n\n        end_sequence = separator | space;\n        token = +(char_ - separator);\n\n        qdtext = char_ - char_('\"') - '\\\\';\n        quoted_pair = omit[char_('\\\\')] &gt;&gt; char_;\n        quoted_string = omit[char_('\"')] &gt;&gt; *(qdtext | quoted_pair) &gt;&gt; omit[char_('\"')];\n        value = quoted_string | token ;\n\n        type_subtype_rule = token &gt;&gt; '/' &gt;&gt; token;\n        name_only = token;\n        nvp = token &gt;&gt; omit[*SP] &gt;&gt; omit['='] &gt;&gt; omit[*SP] &gt;&gt; value;\n        any_parameter = omit[*SP] &gt;&gt; omit[char_(';')] &gt;&gt; omit[*SP] &gt;&gt; (nvp | name_only);\n        content_type_rule = type_subtype_rule &gt;&gt; *any_parameter;\n\n        BOOST_SPIRIT_DEBUG_NODES((qdtext)(quoted_pair)(quoted_string)(value)(token)(separator));\n    }\n\n    qi::rule&lt;Iterator, void()&gt; CR, LF, CRLF, SP, HT, LWS, CTL, QUOT;\n    qi::rule&lt;Iterator, char()&gt; UPALPHA, LOALPHA, ALPHA, DIGIT, TEXT, qdtext, quoted_pair;\n    qi::rule&lt;Iterator, void()&gt; separator, space, end_sequence;\n    qi::rule&lt;Iterator, std::string()&gt; quoted_string, token, value;\n    qi::rule&lt;Iterator, type_subtype()&gt; type_subtype_rule;\n    qi::rule&lt;Iterator, unary_parameter()&gt; name_only;\n    qi::rule&lt;Iterator, binary_parameter()&gt; nvp;\n    qi::rule&lt;Iterator, parameter()&gt; any_parameter;\n    qi::rule&lt;Iterator, content_type()&gt; content_type_rule;\n\n};\n\nTEST(spirit_test, test1)\n{\n    token_grammar&lt;std::string::const_iterator&gt; grammar{};\n\n    std::string test = R\"__test(application/json )__test\";\n    content_type ct;\n    bool r = qi::parse(test.cbegin(), test.cend(), grammar, ct);\n    EXPECT_EQ(\"application\", ct.type.type);\n    EXPECT_EQ(\"json\", ct.type.subtype);\n    EXPECT_EQ(0, ct.params.size());\n\n    ct = {};\n    test = R\"__test(text/html ; charset = \"ISO-8859-5\")__test\";\n    qi::parse(test.cbegin(), test.cend(), grammar, ct);\n    EXPECT_EQ(\"text\", ct.type.type);\n    EXPECT_EQ(\"html\", ct.type.subtype);\n    ASSERT_EQ(1, ct.params.size());\n    ASSERT_EQ(typeid(binary_parameter), ct.params[0].type());\n    auto&amp; x = boost::get&lt;binary_parameter&gt;(ct.params[0]);\n    EXPECT_EQ(\"charset\", x.name);\n    EXPECT_EQ(\"ISO-8859-5\", x.value);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117161, "post_id": 37870446, "comment_id": 63197814, "body": "Many thanks. One question. The only place that spaces are disallowed is in the type/subtype rule. In this case, is it ok to add a skipper to the content_type rule? I take it that the presence of a skipper in an outer rule will not impose one on a non-skipping subrule?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117207, "post_id": 37870446, "comment_id": 63197826, "body": "Yes. I mentioned that - with a link to a background answer related to skippers :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117293, "post_id": 37870446, "comment_id": 63197851, "body": "You&#39;ll need to be more explicit and put it in simpler terms for me. I find the interrelations between rules a little baffling :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117296, "post_id": 37870446, "comment_id": 63197853, "body": "Here&#39;s a version <a href=\"http://coliru.stacked-crooked.com/a/2c294a7ce13db259\" rel=\"nofollow noreferrer\">without using variants</a> and one <a href=\"http://coliru.stacked-crooked.com/a/4f3b3d489012b0b3\" rel=\"nofollow noreferrer\">without even using boost::oprional</a> in the AST types."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117350, "post_id": 37870446, "comment_id": 63197867, "body": "The best clue I can give is &quot;lexemes&quot; don&#39;t skip anything. So, that&#39;s what I meant with he block-quote under item 6."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117492, "post_id": 37870446, "comment_id": 63197918, "body": "Ah I see it now. The skipper is on the any_parameter rule. Mea culpa."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466117573, "post_id": 37870446, "comment_id": 63197947, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114886/discussion-between-sehe-and-richard-hodges\">continue this discussion in chat</a>."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1466123306, "post_id": 37870446, "comment_id": 63199336, "body": "Wow, the new fusion code is a little jarring... going to have to look at the docs to see how that actually works."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466146578, "post_id": 37870446, "comment_id": 63205591, "body": "@sehe thank you for the update. I have a feeling that the http spec defines space as SP|HT but that&#39;s a minor issue. One last question. Obviously this is all well and good for one header type. Is it reasonable to put the basic rules into a base class if I want discrete grammars for each header type? Obviously I want to avoid redundant construction/reconstruction if headers are missing/present... Or should I ask another question about that?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466154211, "post_id": 37870446, "comment_id": 63209943, "body": "When composing grammars, I don&#39;t think inheritance is a useful technique. Of course you can create separate grammars, and (re)use them inside other grammars. Even for literally /shared/ grammar rules, consider passing a reference to the grammar containing the stateless, shared rules to the other grammar&#39;s constructor. In Qi, rules constitute a compilation firewall anyways (think type erasure) so there&#39;s no gain in terms of performance for duplicating them locally."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1466161059, "post_id": 37870446, "comment_id": 63214563, "body": "@sehe i see. While you were writing that... I have another question (using inheritance, but that&#39;s besides the point) - it&#39;s about neat error handling. Hope you find it interesting :) <a href=\"http://stackoverflow.com/questions/37879781/boost-spirit-improving-error-output\" title=\"boost spirit improving error output\">stackoverflow.com/questions/37879781/&hellip;</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1466118482, "last_edit_date": 1495541342, "creation_date": 1466116393, "answer_id": 37870446, "question_id": 37840682, "link": "https://stackoverflow.com/questions/37840682/decode-http-header-value-fully-with-boost-spirit/37870446#37870446", "title": "decode http header value fully with boost spirit", "body": "<p>I've taken the code as <a href=\"https://stackoverflow.com/a/37865999/85371\">posted by OP</a> and given it a review.</p>\n\n<ol>\n<li><p>there's no need to specify <code>void()</code>. In fact it's preferable to use <code>qi::unused_type</code> in such cases, which is what rules will default to if no attribute type is declared.</p></li>\n<li><p>there no need for <code>char_</code> if you don't wish to expose the attribute. Use <code>lit</code> instead.</p></li>\n<li><p>there is no need to wrap every char parser in a <code>rule</code>. That hurts performance. It's best to leave the proto expression tree un-evaluated as long so Qi can optimize parser expressions more, and the compiler can inline more. </p>\n\n<p>Also, Qi doesn't have move semantics on attributes, so avoiding redundant rules eliminates redundant copies of sub-attributes that get concatenated in the containing rules.</p>\n\n<blockquote>\n  <p>Sample alternative spelling (caution, see <a href=\"https://stackoverflow.com/questions/22023779/assigning-parsers-to-auto-variables\">Assigning parsers to auto variables</a>)</p>\n\n<pre><code>auto CR   = qi::lit('\\r');\nauto LF   = qi::lit('\\n');\nauto CRLF = qi::lit(\"\\r\\n\");\nauto HT   = qi::lit('\\t');\nauto SP   = qi::lit(' ');\nauto LWS  = qi::copy(-CRLF &gt;&gt; +(SP | HT)); // deepcopy\n\nUPALPHA = char_('A', 'Z');\nLOALPHA = char_('a', 'z');\nALPHA   = UPALPHA | LOALPHA;\nDIGIT   = char_('0', '9');\n//CTL     = char_(0, 31) | char_(127);\nTEXT    = char_(\"\\t\\x20-\\x7e\\x80-\\xff\");\n</code></pre>\n</blockquote></li>\n<li><p>Since you didn't have to use <code>char_</code>, you also don't have kill the attribute using <code>qi::omit[]</code>.</p></li>\n<li><p>When you are in a Qi domain expression template, raw string/char literals are implicitly wrapped in a <code>qi::lit</code> so, you can simply things like</p>\n\n<pre><code>quoted_pair   = omit[char_('\\\\')] &gt;&gt; char_;\nquoted_string = omit[char_('\"')] &gt;&gt; *(qdtext | quoted_pair) &gt;&gt; omit[char_('\"')];\n</code></pre>\n\n<p>to just</p>\n\n<pre><code>quoted_pair   = '\\\\' &gt;&gt; char_;\nquoted_string = '\"' &gt;&gt; *(qdtext | quoted_pair) &gt;&gt; '\"';\n</code></pre></li>\n<li><p>instead of spelling out skipping spaces with <code>omit[*SP]</code> all the time, just declare the rule with a skipper. Now, you can simplify</p>\n\n<pre><code>nvp               = token &gt;&gt; omit[*SP] &gt;&gt; omit['='] &gt;&gt; omit[*SP] &gt;&gt; value;\nany_parameter     = omit[*SP] &gt;&gt; omit[char_(';')] &gt;&gt; omit[*SP] &gt;&gt; (nvp | name_only);\ncontent_type_rule = type_subtype_rule &gt;&gt; *any_parameter;\n</code></pre>\n\n<p>to just</p>\n\n<pre><code>nvp               = token &gt;&gt; '=' &gt;&gt; value;\nany_parameter     = ';' &gt;&gt; (nvp | name_only);\ncontent_type_rule = type_subtype_rule &gt;&gt; qi::skip(spaces)[*any_parameter];\n</code></pre>\n\n<blockquote>\n  <p>Note that any subrule invocations of rules that are declared without a skipper are <em>implicitly lexeme</em>: <a href=\"https://stackoverflow.com/questions/17072987/boost-spirit-skipper-issues/17073965#17073965\">Boost spirit skipper issues</a></p>\n</blockquote></li>\n<li><p>there were many redundant/unused headers</p></li>\n<li>recent compilers + boost versions make BOOST_FUSION_ADAPT_STRUCT much simpler by using <code>decltype</code></li>\n</ol>\n\n<p>The results of simplifying are much less noisy:</p>\n\n<pre><code>//#define BOOST_SPIRIT_DEBUG\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/fusion/include/adapted.hpp&gt;\n\nstruct parameter {\n    boost::optional&lt;std::string&gt; name;\n    std::string value;\n};\n\nstruct type_subtype {\n    std::string type;\n    std::string subtype;\n};\n\nstruct content_type {\n    type_subtype type;\n    std::vector&lt;parameter&gt; params;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(type_subtype, type, subtype)\nBOOST_FUSION_ADAPT_STRUCT(content_type, type, params)\n\ntemplate&lt;class Iterator&gt;\nstruct token_grammar : qi::grammar&lt;Iterator, content_type()&gt;\n{\n    token_grammar() : token_grammar::base_type(content_type_rule)\n    {\n        using qi::ascii::char_;\n\n        spaces        = char_(' ');\n        token         = +~char_( \"()&lt;&gt;@,;:\\\\\\\"/[]?={} \\t\");\n        quoted_string = '\"' &gt;&gt; *('\\\\' &gt;&gt; char_ | ~char_('\"')) &gt;&gt; '\"';\n        value         = quoted_string | token;\n\n        type_subtype_rule = token &gt;&gt; '/' &gt;&gt; token;\n        name_only         = token;\n        nvp               = token &gt;&gt; '=' &gt;&gt; value;\n        any_parameter     = ';' &gt;&gt; (nvp | name_only);\n        content_type_rule = type_subtype_rule &gt;&gt; qi::skip(spaces) [*any_parameter];\n\n        BOOST_SPIRIT_DEBUG_NODES((nvp)(any_parameter)(content_type_rule)(quoted_string)(token)(value)(type_subtype_rule))\n    }\n\n  private:\n    using Skipper = qi::space_type;\n    Skipper spaces;\n\n    qi::rule&lt;Iterator, binary_parameter(), Skipper&gt; nvp;\n    qi::rule&lt;Iterator, parameter(), Skipper&gt;        any_parameter;\n    qi::rule&lt;Iterator, content_type()&gt;              content_type_rule;\n\n    // lexemes\n    qi::rule&lt;Iterator, std::string()&gt;               quoted_string, token, value;\n    qi::rule&lt;Iterator, type_subtype()&gt;              type_subtype_rule;\n    qi::rule&lt;Iterator, unary_parameter()&gt;           name_only;\n};\n</code></pre>\n\n<p>See it <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2c294a7ce13db259\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong> (with the same test cases)</p>\n\n<h2>BONUS</h2>\n\n<p>I'd prefer a simpler AST in a case like this. By injecting some attribute values using <code>qi::attr</code> you can <a href=\"http://coliru.stacked-crooked.com/a/2c294a7ce13db259\" rel=\"nofollow noreferrer\">avoid using boost::variant</a> and/or <a href=\"http://coliru.stacked-crooked.com/a/4f3b3d489012b0b3\" rel=\"nofollow noreferrer\">even avoid boost::optional</a>:</p>\n\n<pre><code>struct parameter {\n    bool have_name;\n    std::string name;\n    std::string value;\n};\n\nstruct type_subtype {\n    std::string type;\n    std::string subtype;\n};\n\nstruct content_type {\n    type_subtype type;\n    std::vector&lt;parameter&gt; params;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(parameter, have_name, name, value)\nBOOST_FUSION_ADAPT_STRUCT(type_subtype, type, subtype)\nBOOST_FUSION_ADAPT_STRUCT(content_type, type, params)\n\nnamespace qi = boost::spirit::qi;\n\ntemplate&lt;class Iterator&gt;\nstruct token_grammar : qi::grammar&lt;Iterator, content_type()&gt;\n{\n    token_grammar() : token_grammar::base_type(content_type_rule)\n    {\n        using qi::ascii::char_;\n\n        spaces        = char_(' ');\n        token         = +~char_( \"()&lt;&gt;@,;:\\\\\\\"/[]?={} \\t\");\n        quoted_string = '\"' &gt;&gt; *('\\\\' &gt;&gt; char_ | ~char_('\"')) &gt;&gt; '\"';\n        value         = quoted_string | token;\n\n        type_subtype_rule = token &gt;&gt; '/' &gt;&gt; token;\n        name_only         = qi::attr(false) &gt;&gt; qi::attr(\"\") &gt;&gt; token;\n        nvp               = qi::attr(true)  &gt;&gt; token &gt;&gt; '=' &gt;&gt; value;\n        any_parameter     = ';' &gt;&gt; (nvp | name_only);\n        content_type_rule = type_subtype_rule &gt;&gt; qi::skip(spaces) [*any_parameter];\n\n        BOOST_SPIRIT_DEBUG_NODES((nvp)(any_parameter)(content_type_rule)(quoted_string)(token)(value)(type_subtype_rule))\n    }\n\n  private:\n    using Skipper = qi::space_type;\n    Skipper spaces;\n\n    qi::rule&lt;Iterator, parameter(), Skipper&gt; nvp, name_only, any_parameter;\n    qi::rule&lt;Iterator, content_type()&gt;       content_type_rule;\n\n    // lexemes\n    qi::rule&lt;Iterator, std::string()&gt;        quoted_string, token, value;\n    qi::rule&lt;Iterator, type_subtype()&gt;       type_subtype_rule;\n};\n</code></pre>\n"}], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 1, "accepted_answer_id": 37870446, "answer_count": 2, "score": 3, "last_activity_date": 1466118482, "creation_date": 1466007263, "last_edit_date": 1466021543, "question_id": 37840682, "link": "https://stackoverflow.com/questions/37840682/decode-http-header-value-fully-with-boost-spirit", "title": "decode http header value fully with boost spirit", "body": "<p>Once again, I find myself reaching for boost spirit. Once again I find myself defeated by it.</p>\n\n<p>A HTTP header <em>value</em> takes the general form:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>text/html; q=1.0, text/*; q=0.8, image/gif; q=0.6, image/jpeg; q=0.6, image/*; q=0.5, */*; q=0.1\n</code></pre>\n\n<p>i.e. <code>value *OWS [; *OWS name *OWS [= *OWS possibly_quoted_value] *OWS [...]] *OWS  [ , &lt;another value&gt; ...]</code></p>\n\n<p>so in my mind, this header decodes to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>value[0]: \n  text/html\n  params:\n    name : q\n    value : 1.0\nvalue[1]:\n  text/*\n  params:\n    name : q\n    value : 0.8\n...\n</code></pre>\n\n<p>and so on.</p>\n\n<p>I am certain that to anyone who knows how, the boost::spirit::qi syntax for this is trivial.</p>\n\n<p>I humbly ask for your assistance.</p>\n\n<p>for example, here's the outline of the code which decodes the <code>Content-Type</code> header, which is limited to one value of the form <code>type/subtype</code>, with any number of parameters of the form <code>&lt;sp&gt; ; &lt;sp&gt; token=token|quoted_string</code></p>\n\n<pre><code>template&lt;class Iter&gt;\nvoid parse(ContentType&amp; ct, Iter first, Iter last)\n{\n    ct.mutable_type()-&gt;append(to_lower(consume_token(first, last)));\n    consume_lit(first, last, '/');\n    ct.mutable_subtype()-&gt;append(to_lower(consume_token(first, last)));\n    while (first != last) {\n        skipwhite(first, last);\n        if (consume_char_if(first, last, ';'))\n        {\n            auto p = ct.add_parameters();\n            skipwhite(first, last);\n            p-&gt;set_name(to_lower(consume_token(first, last)));\n            skipwhite(first, last);\n            if (consume_char_if(first, last, '='))\n            {\n                skipwhite(first, last);\n                p-&gt;set_value(consume_token_or_quoted(first, last));\n            }\n            else {\n                // no value on this parameter\n            }\n        }\n        else if (consume_char_if(first, last, ','))\n        {\n            // normally we should get the next value-token here but in the case of Content-Type\n            // we must barf\n            throw std::runtime_error(\"invalid use of ; in Content-Type\");\n        }\n    }\n}\n\nContentType&amp; populate(ContentType&amp; ct, const std::string&amp; header_value)\n{\n    parse(ct, header_value.begin(), header_value.end());\n    return ct;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1466007505, "post_id": 37840678, "comment_id": 63142360, "body": "You already answered your own question. Your function needs to be inline, no matter how many times it is executed."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1466007596, "post_id": 37840678, "comment_id": 63142439, "body": "It doesn&#39;t matter how many times it&#39;s <i>executed</i>. It matters in how many translation units it will be defined."}], "owner": {"reputation": 383, "user_id": 4746527, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a740df6f0bd027dbfc23fef08d35b6d?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/4746527/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13, "favorite_count": 0, "closed_date": 1466007561, "answer_count": 0, "score": 0, "last_activity_date": 1466007247, "creation_date": 1466007247, "question_id": 37840678, "link": "https://stackoverflow.com/questions/37840678/not-inline-function-definition-in-header-file-which-is-included-by-two-inline-fu", "closed_reason": "Duplicate", "title": "not-inline function definition in header file which is included by two inline functions", "body": "<p>Compiler complains about multiple definitions of <code>func()</code>.</p>\n\n<p>It seems have something to do with the code below residing in the header file, which is included by multiple other .cpp files. If func() is set to be inline, compilor would be happy. However, func() is expected to be executed only once... What are my options then?</p>\n\n<pre><code>namespace S\n{\n    const LDS &amp;func()\n    {\n        static LDS ret;\n        ...\n        return ret;\n    }\n}\n\ninline LDS &amp;operator&lt;&lt;(LDS &amp;str_,stringType1 &amp;data_)\n{\n    str_ &lt;&lt; S::func();\n}\n\ninline LDS &amp;operator&lt;&lt;(LDS &amp;str_,stringType2 &amp;data_)\n{\n    str_ &lt;&lt; S::func();\n}\n</code></pre>\n"}, {"tags": ["c++", "observer-pattern"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1466007262, "post_id": 37840543, "comment_id": 63142198, "body": "One basic syntax error can generate a flurry of other errors.  Always start at the top of the error list, <b>never</b> the bottom."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466007504, "post_id": 37840543, "comment_id": 63142359, "body": "Note: <code>VOID</code> is defined to <code>void</code>, so <code>int main(VOID)</code> looks weird but will work. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows Data Types (Windows)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 0, "last_activity_date": 1466006899, "creation_date": 1466006899, "answer_id": 37840591, "question_id": 37840543, "link": "https://stackoverflow.com/questions/37840543/error-c2660-mouselistenermousepressed-function-does-not-take-4-arguments/37840591#37840591", "title": "error C2660: &#39;MouseListener::MousePressed&#39; : function does not take 4 arguments", "body": "<p><code>Button</code> is not declared at the point where <code>MousePressed</code> is declared, so it cannot be used. I suggest you should use forward declaration.</p>\n\n<pre><code>class Button; // add this line\n\nstruct MouseListener\n{\n    virtual void MousePressed(Button &amp;b, int x, int y, bool isLeft) = 0;\n};\n\nclass Button : public Label\n{\npublic:\n\n    vector &lt;MouseListener*&gt; listeners;\n.\n.\n.\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6470380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1013537345cc783b9325af9d2ca9bd79?s=128&d=identicon&r=PG&f=1", "display_name": "Adi Gonen", "link": "https://stackoverflow.com/users/6470380/adi-gonen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 37840591, "answer_count": 1, "score": 0, "last_activity_date": 1466009729, "creation_date": 1466006739, "last_edit_date": 1592644375, "question_id": 37840543, "link": "https://stackoverflow.com/questions/37840543/error-c2660-mouselistenermousepressed-function-does-not-take-4-arguments", "title": "error C2660: &#39;MouseListener::MousePressed&#39; : function does not take 4 arguments", "body": "<p>Im working on an c++ pseudo graphic button for a school assignment.\nI use the observer pattern.</p>\n<p>in Button.cpp:</p>\n<pre><code>void Button::notify()\n{\n    for (int iterator = 0; iterator &lt; listeners.size(); iterator++)\n    {\n        listeners[iterator]-&gt;MousePressed(*this, x, y, isLeft);\n    }\n}\n</code></pre>\n<p>as you can see the MousePressed function receive 4 arguments but i get:</p>\n<blockquote>\n<p>function does not take 4 arguments</p>\n</blockquote>\n<p>in Button.h:</p>\n<pre><code>struct MouseListener\n{\n    virtual void MousePressed(Button &amp;b, int x, int y, bool isLeft) = 0;\n};\n\nclass Button : public Label\n{\npublic:\n\n    vector &lt;MouseListener*&gt; listeners;\n.\n.\n.\n</code></pre>\n<p>in main:</p>\n<pre><code>struct MyListener : public MouseListener\n{\n    MyListener(iControl &amp;c) : _c(c) { }\n    void  MousePressed(Button &amp;b, int x, int y, bool isLeft)\n    {\n        _c.setForeground(Color::Red);\n    }\nprivate:\n    iControl &amp;_c;\n};\n\nint main(VOID)\n{\n</code></pre>\n<p>errors:</p>\n<blockquote>\n<ul>\n<li><p>Error    2   error C2061: syntax error : identifier 'Button' c:\\users\\gonen\\unitedproj\\unitedproj\\Button.h   14  1   unitedProj</p>\n</li>\n<li><p>Error    4   error C2061: syntax error : identifier 'Button' c:\\users\\gonen\\unitedproj\\unitedproj\\Button.h   14  1   unitedProj</p>\n</li>\n<li><p>Error    5   error C2660: 'MouseListener::MousePressed' : function does not take 4 arguments C:\\Users\\Gonen\\unitedProj\\unitedProj\\Button.cpp 24  1   unitedProj</p>\n</li>\n</ul>\n</blockquote>\n<p>when the first two are for the declartion in main and the last is in the use of the function in Button.cpp.\nhelp? when im standing with the mouse curser on the function in Button.cpp i get:</p>\n<blockquote>\n<p>void MouseListener::MousePressed(Button &amp;b,int x,int y, bool isLeft)</p>\n</blockquote>\n<p>I just need this to work so i can move on and let the rest of the group members to use the button in the controls they implementing... and move on to the next i need to do :-(</p>\n<p>edit: thank you for the fast answer.\nI tried to do what you asked. now i get:</p>\n<blockquote>\n<p>*Error    3   error LNK2019: unresolved external symbol main referenced in function __tmainCRTStartup C:\\Users\\Gonen\\unitedProj\\unitedProj\\MSVCRTD.lib(crtexe.obj)    un\u200c\u200bitedProj</p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "tuples"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1466007846, "post_id": 37840519, "comment_id": 63142593, "body": "It&#39;s unclear what you want to deduce from what. Can you elaborate on what your problem is? Preferably in a more minimal example."}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 1, "creation_date": 1466008139, "post_id": 37840519, "comment_id": 63142767, "body": "What is the problem with your commented-out code <code>IntegerDistribution&lt;decltype(range.first)&gt;(range.first,range&zwnj;&#8203;.second);</code>? Does it give a compile error? If so, what?"}, {"owner": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "edited": false, "score": 0, "creation_date": 1466008155, "post_id": 37840519, "comment_id": 63142777, "body": "Take a look at <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for some advise on how to simplify your problem to make it easier for others to understand."}, {"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "reply_to_user": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1466011142, "post_id": 37840519, "comment_id": 63144453, "body": "@Smeeheey This line was okay, sorry, I&#39;m still new to posting on StackOverflow. Answer below is what I was looking for."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1466014774, "post_id": 37840519, "comment_id": 63146351, "body": "@MostLovelyRollOnThePlanet - unrelated to your question but... remember to define <code>constexpr</code> the <code>range_argument_count</code>; if it&#39;s a simple variable, you can&#39;t use it in the following <code>static_assert()</code>"}, {"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1466018108, "post_id": 37840519, "comment_id": 63148297, "body": "@max66 I did, removed it by an accident when posting this code as I had to clean it a little bit."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "edited": false, "score": 0, "creation_date": 1466010758, "post_id": 37841273, "comment_id": 63144224, "body": "The tricky one is really a great idea, but you need to give ranges instead of ranges.first in the second line, second argument, otherwise perfect, thanks!"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "edited": false, "score": 0, "creation_date": 1466014165, "post_id": 37841273, "comment_id": 63146028, "body": "@MostLovelyRollOnThePlanet I think it&#39;s also a bug in the original post that I just copied over.  Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": true, "score": 2, "last_activity_date": 1466014111, "last_edit_date": 1466014111, "creation_date": 1466009199, "answer_id": 37841273, "question_id": 37840519, "link": "https://stackoverflow.com/questions/37840519/generating-elements-based-on-underlying-tuple-types-during-run-time/37841273#37841273", "title": "Generating elements based on underlying tuple types during run-time", "body": "<p>Write a helper function to determine whether to make a real or an integer generator.  In this case it will be based off the type of the first parameter in the range.  I will leave it to you to determine how to also check the second parameter.  (I haven't tested this code, but I am confident that the idea works).</p>\n\n<pre><code>template &lt;class Range&gt;\nauto get_distribution(Range range, std::true_type)\n{\n    return real_random_generator(range);\n}\n\ntemplate &lt;class Range&gt;\nauto get_distribution(Range range, std::false_type)\n{\n    return integer_random_generator(range);\n}\n</code></pre>\n\n<p>Simply use the pack expansion syntax to call your helper function on every range</p>\n\n<pre><code>auto generators = std::make_tuple(get_distribution(ranges, \n                      std::is_floating_point&lt;decltype(ranges.first)&gt;{})...);\n</code></pre>\n\n<p>The <code>std::is_floating_point</code> is what determines which overload gets called for each range.</p>\n\n<p>If you like tricky, but more concise, code you could try this out:</p>\n\n<pre><code>auto fs = std::make_tuple(integer_random_generator, real_random_generator);\nauto generator = std::make_tuple(std::get&lt;std::is_floating_point&lt;decltype(ranges.first)&gt;::value&gt;(fs)(ranges)...);\n</code></pre>\n\n<p>Construct a tuple of your generator-generating lambdas (this wouldn't work  if they weren't objects) and use the condition as an index into the tuple and immediately call it.  I don't advocate using this, but I thought I would share it nonetheless.</p>\n"}], "owner": {"reputation": 59, "user_id": 4595108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4ef30b1573b8f2e56984c903c3724?s=128&d=identicon&r=PG&f=1", "display_name": "MostLovelyRollOnThePlanet", "link": "https://stackoverflow.com/users/4595108/mostlovelyrollontheplanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 37841273, "answer_count": 1, "score": 1, "last_activity_date": 1466014111, "creation_date": 1466006690, "last_edit_date": 1466007805, "question_id": 37840519, "link": "https://stackoverflow.com/questions/37840519/generating-elements-based-on-underlying-tuple-types-during-run-time", "title": "Generating elements based on underlying tuple types during run-time", "body": "<p>How can I deduce the type or pair elements during compile-time? I need it to make a correct instantion accordingly to argument type (e.g. for Integer_random_generator those may be long, int, unsigned int etc., for real_random_generator double, float and other floating-points). I need to make generators with certain bounds as you can see in the commented out lines 63-77.</p>\n\n<pre><code>#ifndef OPTIMALIZATION_HPP\n#define OPTIMALIZATION_HPP\n\n    #include&lt;utility&gt;\n    #include&lt;random&gt;\n    #include&lt;experimental/random&gt;\n    #include&lt;functional&gt;\n    #include&lt;experimental/functional&gt;\n    #include&lt;experimental/tuple&gt;\n    #include&lt;algorithm&gt;\n    #include&lt;type_traits&gt;\n    #include&lt;iostream&gt;\n\n    #include\"tuple_for_each.hpp\"\n\n    //ZNAJDZ/ZROB INDEKSOWANY DOSTEP DO TUPLI W CZASIE RUN-TIME'U\n    namespace numerics{\n        template&lt;\n            std::size_t population_size, std::size_t generations,\n            typename Func,\n            typename Compare, //GREATER, LESS, TYPE RETURNED BY FUNCTION\n            typename Generator=std::default_random_engine,\n            template&lt;typename&gt;\n                typename RealDistribution=std::uniform_real_distribution,\n            template&lt;typename&gt;\n                typename IntegerDistribution=std::uniform_int_distribution,\n            typename ...Ts\n        &gt;\n        auto optimize(\n                const Func&amp; function, const Compare&amp; comp,\n                const std::pair&lt;Ts,Ts&gt;&amp;... range\n        ){\n\n            std::size_t range_argument_count=sizeof...(range);\n            static_assert(range_argument_count&gt;2,\n                    \"Function needs at least two range arguments\"\n            );\n\n            //RANDOM NUMBER GENERATORS\n            auto real_random_generator=[&amp;](const std::pair&lt;auto,auto&gt; range){\n                std::cout &lt;&lt; \"DOUBLE\" &lt;&lt; std::endl;\n                return std::bind(\n                        RealDistribution&lt;long double&gt;(range.first,range.second),\n                        //RealDistribution&lt;decltype(range.first)&gt;(range.first,range.second);\n                        //HOW TO DEDUCE TYPE OF DISTRIBUTION FROM PAIR DURING COMPILE-TIME???\n                        Generator()\n                );\n            };\n\n            auto integer_random_generator=[&amp;](const std::pair&lt;auto,auto&gt;&amp; range){\n            std::cout &lt;&lt; \"INTEGER\" &lt;&lt; std::endl;\n                return std::bind(\n                        IntegerDistribution&lt;long long&gt;(range.first,range.second),\n                        //IntegerDistribution&lt;decltype(range.first)&gt;(range.first,range.second);\n                        //HOW TO DEDUCE TYPE OF DISTRIBUTION FROM PAIR DURING COMPILE-TIME???\n                        Generator()\n                );\n            };\n            std::cout &lt;&lt; integer_random_generator(std::get&lt;0&gt;(std::make_tuple(range...)))() &lt;&lt; std::endl;\n            std::cout &lt;&lt; real_random_generator(std::get&lt;1&gt;(std::make_tuple(range...)))()&lt;&lt;std::endl;\n            std::cout &lt;&lt; integer_random_generator(std::get&lt;2&gt;(std::make_tuple(range...)))()&lt;&lt;std::endl;\n\n            //GENERATORS DEPENDING ON TYPE, USED THROUGH WHOLE PROGRAM\n            /*std::tuple&lt;&gt; generators;\n            numerics::for_each(std::make_tuple(range...), [&amp;](std::pair&lt;auto,auto&gt;&amp; x){ //FOR_EACH SPRAWDZENIA\n                    try{\n                        generators=std::tuple_cat(\n                                generators,\n                                std::make_tuple(integer_random_generator(x.first)));\n                    }\n                    catch(...){\n                        generators=std::tuple_cat(\n                                generators,\n                                std::make_tuple(real_random_generator(x.first)));\n                    }\n                }\n            );*/\n            return \"pls work\";\n        }\n    }\n    #endif  \n</code></pre>\n\n<p>Test cases:</p>\n\n<pre><code>#include&lt;utility&gt;\n#include&lt;iostream&gt;\n#include\"optimize.hpp\"\n\nclass Function{\n    public:\n        Function()=default;\n        double operator()(int x, double y, long z)const{\n            return (std::exp(x+1.25)*std::pow(y,z))/std::exp((x*y)/z);\n        }\n};\n\nint main(){\n    Function f{};\n    auto comp=std::less&lt;double&gt;();\n    auto x=numerics::optimize&lt;100, 200&gt;(\n            f, comp,\n            std::make_pair(-21, 37),\n            std::make_pair(14.88, 88.41),\n            std::make_pair(-13, 37)\n    );\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466006664, "post_id": 37840293, "comment_id": 63141808, "body": "You will have to describe the actual issue more clearly."}, {"owner": {"reputation": 548, "user_id": 3123089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/402244ef48ee8bcf83f0d840d61cdb18?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/3123089/christoph"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466007026, "post_id": 37840293, "comment_id": 63142045, "body": "Oh thats embarassing... Of course, its the ordering. I&#39;m trying to draw something without using the appropriate shader program. Whoever commented about this (and deleted it?) thanks!"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466007097, "post_id": 37840293, "comment_id": 63142087, "body": "Yeah, I deleted that comment after seeing that it was a <code>map</code> and thought you would have already checked that  ;). You are welcome."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1466007334, "post_id": 37840293, "comment_id": 63142248, "body": "Can one of you restore the solution as an answer? Otherwise the thread isn&#39;t useful."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1466031618, "post_id": 37840293, "comment_id": 63154323, "body": "@Arunmu Please restore the answer for preventing this question from being useless (&amp; closed)"}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1466063230, "post_id": 37850776, "comment_id": 63164468, "body": "How would you know in which order the objects are needed? From OP it appears that the order is arbitrary."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 1, "last_activity_date": 1466055906, "creation_date": 1466055906, "answer_id": 37850776, "question_id": 37840293, "link": "https://stackoverflow.com/questions/37840293/adding-stdshared-ptr-to-a-map-ruins-programs-behaviour/37850776#37850776", "title": "Adding std::shared_ptr to a map ruins programs behaviour", "body": "<p>Looking at this code:</p>\n\n<pre><code>void RenderSystem::DrawAll() const\n   {\n     for (auto const &amp; gameObject : m_gameObjects)\n     {\n       gameObject.second-&gt;GetComponent&lt;RenderComponent&gt;()-&gt;Draw();\n     }\n   }\n</code></pre>\n\n<p>The <code>Draw</code> function gets called in the order of <code>gameObject</code> stored in the map <code>m_gameObjects</code>, not in the order that you actually need.</p>\n\n<p>A <code>vector</code> or <code>deque</code> seems to be better alternative to store the objects but in the order in which you want to draw.</p>\n"}], "owner": {"reputation": 548, "user_id": 3123089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/402244ef48ee8bcf83f0d840d61cdb18?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/3123089/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37850776, "answer_count": 1, "score": 0, "last_activity_date": 1466055906, "creation_date": 1466006038, "question_id": 37840293, "link": "https://stackoverflow.com/questions/37840293/adding-stdshared-ptr-to-a-map-ruins-programs-behaviour", "title": "Adding std::shared_ptr to a map ruins programs behaviour", "body": "<p>I'm sorry that I was not able to think of a better title for my question. I've encountered the following problem:</p>\n\n<p>I have a GameObject class, representing everything possible in the world. It can hold several components defining its behaviour. A GameObject is made renderable as following: </p>\n\n<pre><code>    //GameObjectPtr is std::shared_ptr&lt;GameObject&gt;\n    GameObjectPtr skyBoxGameObject = GameObject::makeGameObject();\n    skyBoxGameObject-&gt;AddComponent&lt;RenderComponent&gt;(skyBox);\n</code></pre>\n\n<p>In the main Loop, if I now take the RenderComponent from the GameObject as follows: </p>\n\n<pre><code>    planeGameObject-&gt;GetComponent&lt;RenderComponent&gt;()-&gt;Draw();\n    skyBoxGameObject-&gt;GetComponent&lt;RenderComponent&gt;()-&gt;Draw();\n</code></pre>\n\n<p>Everything works fine. On the other hand I now want to implement a RenderSystem which stores the GameObjects by ID and hold a reference to them using, again, std::shared_ptr:</p>\n\n<pre><code>    //In RenderSystem:\n    std::map&lt;unsigned int, std::shared_ptr&lt;GameObject&gt;&gt; m_gameObjects;\n</code></pre>\n\n<p>Adding a GameObject to the RenderingSystem is done with:</p>\n\n<pre><code>    void RenderSystem::AddGameObject(std::shared_ptr&lt;GameObject&gt; gameObjectPtr)\n    {\n      if (m_gameObjects.count(gameObjectPtr-&gt;GetId()) &gt; 0)\n        throw std::runtime_error(\"GameObject already registered\");\n      if (gameObjectPtr-&gt;GetComponent&lt;RenderComponent&gt;() == nullptr)\n        throw std::runtime_error(\"GameObject doesn't provide rendercomponent\");\n      m_gameObjects[gameObjectPtr-&gt;GetId()] = gameObjectPtr;\n    }\n</code></pre>\n\n<p>And the drawing is done in this way:</p>\n\n<pre><code>   void RenderSystem::DrawAll() const\n   {\n     for (auto const &amp; gameObject : m_gameObjects)\n     {\n       gameObject.second-&gt;GetComponent&lt;RenderComponent&gt;()-&gt;Draw();\n     }\n   }\n</code></pre>\n\n<p>Unfortunately the Objects are not displayed properly. Is there anything wrong with my code or is something copied/moved by adding it to the map that shouldn't be? I've got no clue. </p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1466006225, "post_id": 37840270, "comment_id": 63141495, "body": "<a href=\"http://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\">See this</a>"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466006258, "post_id": 37840270, "comment_id": 63141510, "body": "Using <code>srand()</code> in loop might not good, and in this case it <i>is</i> wrong."}, {"owner": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "edited": false, "score": 2, "creation_date": 1466006441, "post_id": 37840270, "comment_id": 63141642, "body": "Although not critical here, it is worth noting that rand() is not a particularly good pseudorandom number generator. Take a look at things like std::mt19937"}], "answers": [{"tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": true, "score": 5, "last_activity_date": 1466006243, "creation_date": 1466006243, "answer_id": 37840372, "question_id": 37840270, "link": "https://stackoverflow.com/questions/37840270/rand-not-generating-random-numbers-even-after-srandtimenull/37840372#37840372", "title": "rand() not generating random numbers even after srand(time(NULL))", "body": "<p>You must call <code>srand()</code> once, whereas you call it on every entry into <code>generateWeight()</code>. Since nowadays computers are fast and <code>time()</code> returns the time in seconds, this mostly restarts the random number generator from the same seed.</p>\n"}, {"tags": [], "owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "is_accepted": false, "score": 0, "last_activity_date": 1466024431, "creation_date": 1466024431, "answer_id": 37845690, "question_id": 37840270, "link": "https://stackoverflow.com/questions/37840270/rand-not-generating-random-numbers-even-after-srandtimenull/37845690#37845690", "title": "rand() not generating random numbers even after srand(time(NULL))", "body": "<p>The problem is that you initialize the pseudo random number generator seed again and again with the same seed (the time which has not changed since the last call since CPUs are very fast today) and, thus, you always get the same \"random\" number.</p>\n\n<p>Generelly, 1) don't use srand() in a loop and 2) rand() has several defects as it does not generate nicely distributed random numbers (nice video about this <a href=\"https://www.youtube.com/watch?v=LDPMpc-ENqY\" rel=\"nofollow\">rand() considered harmful</a>)</p>\n\n<p>Instead of rand() you should use <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow\">std::uniform_int_distribution</a> (requires C++11):</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_int_distribution&lt;&gt; dis(1, 6);\n\n    for (int n=0; n&lt;10; ++n)\n        std::cout &lt;&lt; dis(gen) &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6408284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vi34P.jpg?s=128&g=1", "display_name": "chuakc92", "link": "https://stackoverflow.com/users/6408284/chuakc92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "accepted_answer_id": 37840372, "answer_count": 2, "score": -2, "last_activity_date": 1466024431, "creation_date": 1466005991, "last_edit_date": 1466006255, "question_id": 37840270, "link": "https://stackoverflow.com/questions/37840270/rand-not-generating-random-numbers-even-after-srandtimenull", "title": "rand() not generating random numbers even after srand(time(NULL))", "body": "<p>I'm trying to call a class function using a loop</p>\n\n<pre><code>for (int i = 0; i &lt; Basket.getLemonNum(); i++)\n{\n    lemonWeights[i] = Fruit.generateWeight(fruit, fruitWeight);\n    cout &lt;&lt; lemonWeights[i] &lt;&lt; \" \";\n}  \n</code></pre>\n\n<p>This goes to the Fruit class to it's member function generateWeight():</p>\n\n<pre><code>   int fruitClass::generateWeight(char fruitN, int&amp; fruitW)\n    {\n    srand(time(NULL));\n\n    int weight = 0;\n\n    switch (fruitName)\n    {\n    case 'a':\n        weight = rand() % 500 + 100;\n        return fruitW = weight;\n        break;\n    case 'l':\n        weight = rand() % 400 + 300; \n        return fruitW = weight;\n        break;\n    case 'w':\n        weight = rand() % 1000 + 800; \n        return fruitW = weight;\n        break;\n    }\n} \n\n\n\nOutput:\n128 128 128 128\n</code></pre>\n\n<p>but it's generating the same number all the time, even when I use a different function to call it:</p>\n\n<pre><code>for (int i = 0; i &lt; Basket.getWatermelonNum(); i++)\n{\n    watermelonWeights[i] = Fruit.generateWeight(fruit, fruitWeight);\n    cout &lt;&lt; watermelonWeights[i] &lt;&lt; \" \";\n\n}\n\nOutput:\n128 128 128\n</code></pre>\n\n<p>As you can see, I did seed srand().\nAlso, the header files  and  are included.\nWhat is going on?</p>\n"}, {"tags": ["c++", "qt", "qwidget", "qthread"], "comments": [{"owner": {"reputation": 2539, "user_id": 3637404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ff3SL.png?s=128&g=1", "display_name": "Felipe Lema", "link": "https://stackoverflow.com/users/3637404/felipe-lema"}, "edited": false, "score": 0, "creation_date": 1466008950, "post_id": 37840212, "comment_id": 63143230, "body": "Have you tried connecting signals and slots using <a href=\"http://doc.qt.io/qt-5/qt.html#ConnectionType-enum\" rel=\"nofollow noreferrer\"><code>Qt::QueuedConnection</code></a>?. Also, you shouldn&#39;t use the pointer to a QWidget. Use slots and signals to communicate the widget among threads (again, no pointers). See the <a href=\"http://doc.qt.io/qt-5/qtcore-threads-mandelbrot-example.html\" rel=\"nofollow noreferrer\">mandelbrot example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1466016028, "last_edit_date": 1495540727, "creation_date": 1466013443, "answer_id": 37842529, "question_id": 37840212, "link": "https://stackoverflow.com/questions/37840212/cannot-send-posted-events-for-objects-in-another-thread-qt/37842529#37842529", "title": "Cannot send posted events for objects in another thread - Qt", "body": "<blockquote>\n  <p>I already read in another topics that QThreads doesn't work with QWidgets [...]\n  but the output in my application seems to be correct.</p>\n</blockquote>\n\n<p>It's not correct, otherwise you wouldn't ask, right?</p>\n\n<p>A <code>QWidget</code> must be in the main thread. And most likely it is. But you're invoking its methods from another thread, and the methods you invoke are not thread safe. Don't do that. There are other ways of invoking methods safely across threads. Use them instead. For example, assuming that you wish to call <code>QWidget::resize</code>, you could use <code>postToThread</code> from <a href=\"https://stackoverflow.com/a/21653558/1329652\">this answer</a>:</p>\n\n<pre><code>QWidget* widget;\nQSize size;\nQ_ASSERT_X(widget-&gt;thread() == qApp-&gt;thread(), \"widget\",\n           \"The widget must live in the main thread.\");\npostToThread([=]{ widget-&gt;resize(size); }, widget);\n</code></pre>\n\n<p>If you want to be more verbose, or have to maintain a Qt 4 code base, you could do this instead:</p>\n\n<pre><code>class TSWidgetAdapter : public QObject {\n  Q_OBJECT\n  QWidget * widget() const { return qobject_cast&lt;QWidget*&gt;(parent()); }\n  Q_SLOT void resize_d(const QSize &amp; size) { widget()-&gt;resize(size); }\npublic:\n  explicit TSWidgetAdapter(QWidget * parent) : QObject(parent) {\n    Q_ASSERT_X(parent-&gt;thread() == qApp-&gt;thread(), \"TSWidgetAdapter()\",\n              \"The widget must live in the main thread.\");\n    connect(this, SIGNAL(resize(QSize)), this, SLOT(resize_d(QSize)));\n  }\n  Q_SIGNAL void resize(const QSize &amp; size);\n};\n\nQWidget* widget;\nQSize size;\nTSWidgetAdapter widget_ts(widget);\nwidget_ts.resize(size);\n</code></pre>\n\n<p>The <code>_d</code> slots are called in the thread of the widget. That's the beauty of automatic connections: you can call the signal in any thread, and the slot will be called in the thread of the target object only. Since the adapter is a child of the widget, it is in the widget's thread - that's enforced by Qt.</p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "accepted_answer_id": 37842529, "answer_count": 1, "score": 1, "last_activity_date": 1466016028, "creation_date": 1466005846, "question_id": 37840212, "link": "https://stackoverflow.com/questions/37840212/cannot-send-posted-events-for-objects-in-another-thread-qt", "title": "Cannot send posted events for objects in another thread - Qt", "body": "<p>I have created a <strong>QThread</strong> class to run a function that is in another class, but this another class has a pointer to a <strong>QWidget</strong> (QwtPlot), and I am receiving this message in the application output:</p>\n\n<pre><code>QCoreApplication::sendPostedEvents: Cannot send posted events for objects in another thread\n</code></pre>\n\n<p>I already read in another topics that QThreads doesn't work with QWidgets (the UI widgets must be in the main thread), but the output in my application seems to be correct.</p>\n\n<p>Can anyone explain to me why this message appears? And what can happen if I let the code as is?</p>\n\n<p>Note: sorry, I can't post the code.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "matrix", "boost", "vector", "ublas"], "comments": [{"owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "edited": false, "score": 0, "creation_date": 1466009323, "post_id": 37840184, "comment_id": 63143421, "body": "Can you post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> and specify compiler and Boost version? Your code works for me <a href=\"http://coliru.stacked-crooked.com/a/0b086dbf82dcf2f9\" rel=\"nofollow noreferrer\">on CoLiRu</a> with Boost 1.59."}, {"owner": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "reply_to_user": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "edited": false, "score": 0, "creation_date": 1466010484, "post_id": 37840184, "comment_id": 63144066, "body": "You will have to uncomment one of the last two lines, I am on linux, gcc 4.8 and boost 1.54"}], "answers": [{"comments": [{"owner": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "edited": false, "score": 0, "creation_date": 1466017331, "post_id": 37842482, "comment_id": 63147846, "body": "For <code>&#39;u_v2 = subrange(u_v, 1, 1 + i);</code> I still get error  <code>error: no matching function for call to</code> but first solution is working great."}, {"owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "reply_to_user": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "edited": false, "score": 0, "creation_date": 1466017982, "post_id": 37842482, "comment_id": 63148223, "body": "The earliest versions I have are g++ 4.9.2 and Boost 1.55, and it works. The <a href=\"http://www.boost.org/users/history/\" rel=\"nofollow noreferrer\">version history</a> for Boost doesn&#39;t show any updates to uBLAS for 1.55. The docs for 1.54 do include the <a href=\"http://www.boost.org/doc/libs/1_54_0/libs/numeric/ublas/doc/vector_proxy.htm#11SimpleProjections\" rel=\"nofollow noreferrer\"><code>subrange()</code> free function</a> for vector ranges. Could be a compiler bug, I guess."}, {"owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "reply_to_user": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "edited": false, "score": 0, "creation_date": 1466018258, "post_id": 37842482, "comment_id": 63148378, "body": "Are you using the verbatim code from <a href=\"http://coliru.stacked-crooked.com/a/c31097f83085f349\" rel=\"nofollow noreferrer\">my CoLiRu</a>?"}], "tags": [], "owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "is_accepted": true, "score": 1, "last_activity_date": 1466013732, "last_edit_date": 1466013732, "creation_date": 1466013235, "answer_id": 37842482, "question_id": 37840184, "link": "https://stackoverflow.com/questions/37840184/creating-boostnumericublas-vector-from-another-subvector-or-submatrix/37842482#37842482", "title": "Creating boost::numeric::ublas vector from another subvector or submatrix", "body": "<p>The issue with this line:</p>\n\n<pre><code>u_v2 = subrange(u_a, 0,1,0,5);\n</code></pre>\n\n<p>is that the <code>subrange</code> of a matrix is a matrix expression, not a vector expression, and you are assigning to a vector. You can use the <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/numeric/ublas/doc/matrix_proxy.html#11Projections\" rel=\"nofollow\"><code>row()</code></a> free function to perform the desired conversion:</p>\n\n<pre><code>u_v2 = row(subrange(u_a, 0, 1, 0, 5), 0);\n</code></pre>\n\n<p>This line:</p>\n\n<pre><code>u_v2 = subrange(u_v, 1,i); \n</code></pre>\n\n<p>compiles fine, but fails with a runtime error. This is because on the initial iteration, the requested range goes from 1 to 0 which is invalid. If you wanted the subvector of <code>i - 1</code> elements starting at index 1, you would do it like this:</p>\n\n<pre><code>u_v2 = subrange(u_v, 1, 1 + i); \n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c31097f83085f349\" rel=\"nofollow\">Live at CoLiRu</a></p>\n"}], "owner": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 37842482, "answer_count": 1, "score": 0, "last_activity_date": 1466013732, "creation_date": 1466005773, "question_id": 37840184, "link": "https://stackoverflow.com/questions/37840184/creating-boostnumericublas-vector-from-another-subvector-or-submatrix", "title": "Creating boost::numeric::ublas vector from another subvector or submatrix", "body": "<p>I am trying to create a vector from another submatrix or subvector. I have tried following but get this error <code>error: no match for \u2018operator=\u2019</code></p>\n\n<pre><code> int m_size = 10; \n boost::numeric::ublas::matrix&lt;double&gt; u_a(m_size, m_size);\n  boost::numeric::ublas::vector&lt;double&gt; u_v(m_size);\n\n    for (int i = 0; i &lt; m_size; i = i + 1 ){\n        for (int j = 0; j &lt; m_size; j++ ){\n         double rand1 = (rand()%10+1) +  ((double) rand() / (RAND_MAX));\n         u_a(i,j) = rand1;\n    }\n    double rand3 = (rand()%10+1) +  ((double) rand() / (RAND_MAX));\n    u_v(i) = rand3;\n    }\n\nfor (int i = 0; i &lt; m_size; i = i + 1 ){\n  boost::numeric::ublas::matrix&lt;double&gt; u_p(i, i);\n  boost::numeric::ublas::vector&lt;double&gt; u_v2(i);\n  u_p = subrange(u_a, 0, i, 0, i); \n  // I have tried following two   \n  //u_v2 = subrange(u_a, 0,1,0,5);\n  //u_v2 = subrange(u_v, 1,i); \n }\n</code></pre>\n"}, {"tags": ["c++", "opencv", "mat"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1466017501, "post_id": 37839945, "comment_id": 63147947, "body": "Can you test the first snippet without creating an intermediate matrix? <code>cvtColor(src, dst, CV_RGBA2GRAY); flip(dst, dst, 0);</code>"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1466017647, "post_id": 37839945, "comment_id": 63148030, "body": "However, I&#39;d go with first snipper because: 1) you don&#39;t rely on what is probably undefined behaviour, 2) flipping an image <b>can&#39;t</b> be the bottleneck of you application. You should gain more by optimizing your algorithm"}, {"owner": {"reputation": 41, "user_id": 6470103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878a8a3d02c25b4683a6bc7d1dcd72cd?s=128&d=identicon&r=PG&f=1", "display_name": "pigeonR", "link": "https://stackoverflow.com/users/6470103/pigeonr"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1466070623, "post_id": 37839945, "comment_id": 63169396, "body": "Flipping image in place reduces execution time by 5-10%."}, {"owner": {"reputation": 41, "user_id": 6470103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878a8a3d02c25b4683a6bc7d1dcd72cd?s=128&d=identicon&r=PG&f=1", "display_name": "pigeonR", "link": "https://stackoverflow.com/users/6470103/pigeonr"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1466071911, "post_id": 37839945, "comment_id": 63170295, "body": "After gaining some insight, I&#39;d say it should work since it is based on two&#39;s complement arithmetics. Algorithm is quite simple and already strongly optimized: this operation is not bottleneck, but it takes about 2-3% of execution time. I&#39;ll go with first one, and - if needed - precisely test the second one. Thanks @Miki"}], "owner": {"reputation": 41, "user_id": 6470103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878a8a3d02c25b4683a6bc7d1dcd72cd?s=128&d=identicon&r=PG&f=1", "display_name": "pigeonR", "link": "https://stackoverflow.com/users/6470103/pigeonr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1466587822, "creation_date": 1466005157, "last_edit_date": 1466587822, "question_id": 37839945, "link": "https://stackoverflow.com/questions/37839945/initializing-cvmat-with-negative-step-to-flip-image-vertically", "title": "Initializing cv::Mat with negative step to flip image vertically", "body": "<p>I have a vertically flipped RGBA image stored in <code>uchar[] raw_data</code>, but I need it in grayscale <code>cv::Mat</code>. This can be easily achieved using following code:</p>\n\n<pre><code>cv::Mat src(width, height, CV_8UC4, raw_data), tmp, dst;\ncvtColor(src, tmp, CV_RGBA2GRAY);\nflip(tmp, dst, 0);\n</code></pre>\n\n<p>However, I found out that following code is up to two times faster:</p>\n\n<pre><code>int linesize = width * 4; // 4 bytes per RGBA pixel\nuchar *data_ptr = raw_data + linesize * (height-1); // ptr to last line\ncv::Mat tmp(width, height, CV_8UC4, data_ptr, -linesize), dst;\ncvtColor(tmp, dst, CV_RGBA2GRAY);\n</code></pre>\n\n<p>The trick is quite obvious: <code>tmp</code> is created with pointer to last line and <strong>negative</strong> line size, so it moves back in memory when iterating over lines. This results in <code>cvtColor</code> by-the-way vertical image flip. Image data is iterated over only once instead of twice, which gives aforementioned boost. I've tested it, it works, end of story.</p>\n\n<p>The questions is: is there any reason to do it the first way? I'm aware, that the fourth parameter in used <code>cv::Mat</code> ctor have <code>size_t</code> type, so in fact this is based on pointer overflows. The code goes to different devices, including smartphones and tablets, so performance is important. On the other hand, it will be compiled to different architectures (x86, ARM), so portability must be preserved.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt", "libavcodec", "libav", "libavformat"], "owner": {"reputation": 175, "user_id": 649561, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ad1bc93116b1c68def966cb63f677ec9?s=128&d=identicon&r=PG", "display_name": "T-basket Dotcodotuk", "link": "https://stackoverflow.com/users/649561/t-basket-dotcodotuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1466004660, "creation_date": 1466004660, "question_id": 37839750, "link": "https://stackoverflow.com/questions/37839750/decoding-h264-stream-fails-eventually", "title": "Decoding H264 Stream Fails Eventually", "body": "<p>After many weeks trying to connect to my home cctv in my c++/Qt project using libav on my raspberry pi (armv7) I am able to correctly display my camera for a good while (at least 20 minutes) with hardly any NAL warnings in the console (but some warnings about invalid NAL unit). However, eventually I will just start to see just a grey screen and lots of NAL warnings in the console and I have to close and reopen the connection to get my camera displaying correctly. I have searched the internet many times to make sure I am understanding av_parser_parse2 correctly and I think I am. </p>\n\n<p>I have pasted my 3 main functions below in the hope that somebody can tell me - is there more to decoding a h264 stream using libav than I understand currently?</p>\n\n<p>Thank you.</p>\n\n<pre><code>void MainWindow::playStreamToScreen(MainWindow* app)\n{\n\navcodec_register_all();\n\ncodec = avcodec_find_decoder(AV_CODEC_ID_H264);\nif (!codec) {\n    qDebug() &lt;&lt; \"codec not found\\n\";\n    return;\n}\n\nc = avcodec_alloc_context3(codec);\n/* if(codec-&gt;capabilities &amp; CODEC_CAP_TRUNCATED)\n    c-&gt;flags |= CODEC_FLAG_TRUNCATED;\nif(codec-&gt;capabilities &amp; CODEC_FLAG2_CHUNKS)\n    c-&gt;flags |= CODEC_FLAG2_CHUNKS;*//* We may send incomplete frames */\npicture = av_frame_alloc();\npFrameRGB=av_frame_alloc();\nint  numBytes=avpicture_get_size(pix_fmt_dst, myWidth, myHeight);\nbuffer= (uint8_t*)malloc(numBytes);\nif(avpicture_fill((AVPicture *)pFrameRGB, buffer, pix_fmt_dst,\n                  myWidth, myHeight) &lt; 0)\n{\n    qDebug() &lt;&lt; \"failed fill picture\";\n}\nif (avcodec_open2(c, codec, NULL) &lt; 0) {\n    qDebug() &lt;&lt; \"could not open codec\\n\";\n    return;\n}\n\nframe = 0;\n\nif(parser == NULL)parser = av_parser_init(AV_CODEC_ID_H264);\nif(parser == NULL)\n{\n    qDebug() &lt;&lt; \"after init parser is null\";\n    return;\n}\nparser-&gt;flags |= PARSER_FLAG_ONCE;\n\nstruct timeval t;\nfloat inv_fps2;// = 4;\nint ii = 0;\ninv_fps2 = 1e6/9.98;//av_q2d(c-&gt;time_base);\nqDebug() &lt;&lt; \"before timebase\";\nc-&gt;time_base = (AVRational){1,10};\nc-&gt;bit_rate =  251000;\nc-&gt;width = 352;\nc-&gt;height = 288;\nc-&gt;pix_fmt = AV_PIX_FMT_YUV420P;\n\nif(img_convert_ctx == NULL)\n{\n\n    img_convert_ctx = sws_getCachedContext ( img_convert_ctx, c-&gt;width, c-&gt;height,\n                                             AV_PIX_FMT_YUV420P, myWidth, myHeight,  AV_PIX_FMT_RGB555,\n                                             SWS_LANCZOS | SWS_ACCURATE_RND , NULL, NULL, NULL );\n}\n\nrunning = true;\nint retval;\ngettimeofday(&amp;t, 0);\n\n\n}\n\n\nvoid MainWindow::display_frame(AVCodecContext* cc, AVFrame *frame, SwsContext* img_convert_ctx, MainWindow* app)\n{\n\nsws_scale ( img_convert_ctx, frame-&gt;data, frame-&gt;linesize, 0,\n            288, pFrameRGB-&gt;data, pFrameRGB-&gt;linesize );\n\napp-&gt;currentImage = QImage(pFrameRGB-&gt;data[0], app-&gt;myWidth, app-&gt;myHeight, pFrameRGB-&gt;linesize[0], QImage::Format_RGB555) .copy();// - See more at: http://www.mzan.com/article/30784549-best-simplest-way-to-display-ffmpeg-frames-in-qt5-solved.shtml#sthash.RvAFLQsc.dpuf\nQImage img2 = app-&gt;currentImage.scaled(app-&gt;width(), app-&gt;height(), Qt::KeepAspectRatio);\nQMetaObject::invokeMethod(app-&gt;myLabel, \"setImage\", Qt::QueuedConnection, Q_ARG(QImage, img2));\napp-&gt;myLabel-&gt;setFixedSize(app-&gt;width(), app-&gt;height());\n\n\n}\n\n\nvoid MainWindow::socketReadyRead()\n{\n    if(connectingToLive &amp;&amp; i  == 0)\n    {\n    qDebug() &lt;&lt; \"starting live stream\";\n    i++;\n    this-&gt;playStreamToScreen(this);\n\n    }\n    else if(connectingToLive &amp;&amp; i &gt; 0)\n    {\n    QByteArray temp;\n    int inbuf_start = 0;\n    int inbuf_len = 0;\n\n    temp.append(socket-&gt;readAll());//reads from network here\n\n\n\n    inbuf_len = temp.size();\n    inbuf_start = 0;\n\n    int out_size;\n\n    while (inbuf_len)\n    {\n        av_init_packet(&amp;packet2);\n        packet2.data = 0;\n        packet2.size = 0;\n        len = av_parser_parse2(parser, c, &amp;packet2.data, &amp;packet2.size,\n                               (uint8_t*)temp.constData()+ inbuf_start, inbuf_len,\n                               AV_NOPTS_VALUE, AV_NOPTS_VALUE, 0);\n\n        inbuf_start += len;\n        inbuf_len -= len;\n\n        if(packet2.size == 0 &amp;&amp; len &gt;= 0)\n        {\n\n\n            break;\n\n        }\n\n        else if(len)\n        {\n\n            retval = avcodec_decode_video2(c, picture, &amp;got_picture, &amp;packet2);\n\n            if (got_picture &amp;&amp; retval &gt; 0)\n            {\n                display_frame(c, picture, img_convert_ctx, this);\n\n            }\n\n        }\n\n    }\n\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "contour"], "comments": [{"owner": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "edited": false, "score": 0, "creation_date": 1466005017, "post_id": 37839748, "comment_id": 63140601, "body": "THe question reads, as if you have interesting code to show, and based on that people will for sure offer advice. Could you put somethin into the question? That would be great."}, {"owner": {"reputation": 135, "user_id": 6470285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa2c642f6f64aa972b1c2f6702e40698?s=128&d=identicon&r=PG&f=1", "display_name": "tomu", "link": "https://stackoverflow.com/users/6470285/tomu"}, "reply_to_user": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "edited": false, "score": 0, "creation_date": 1466005762, "post_id": 37839748, "comment_id": 63141154, "body": "@Dilettant This is not a coding issue, currently. It&#39;s just seeking for some methods. The code is nothing more than imread, matchShapes (which is not even working)."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466005782, "post_id": 37839748, "comment_id": 63141165, "body": "if it not a coding issue then it is off topic"}, {"owner": {"reputation": 135, "user_id": 6470285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa2c642f6f64aa972b1c2f6702e40698?s=128&d=identicon&r=PG&f=1", "display_name": "tomu", "link": "https://stackoverflow.com/users/6470285/tomu"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466006900, "post_id": 37839748, "comment_id": 63141964, "body": "@FirstStep It&#39;s programming related, but not on a directly code related level issue yet, I assume it is safe to post such question here?"}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1466077453, "post_id": 37839748, "comment_id": 63173808, "body": "Without some example images it&#39;s difficult to say something definite. The method of choice will definitely depend on the data."}], "owner": {"reputation": 135, "user_id": 6470285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa2c642f6f64aa972b1c2f6702e40698?s=128&d=identicon&r=PG&f=1", "display_name": "tomu", "link": "https://stackoverflow.com/users/6470285/tomu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 667, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466007369, "creation_date": 1466004651, "last_edit_date": 1466007369, "question_id": 37839748, "link": "https://stackoverflow.com/questions/37839748/opencv-contour-template-match", "title": "opencv contour template match", "body": "<p>The goal is to find the position of certain objects in some images, these objects have similar shape, but totally different colour, and a little bit different on size. The shape is known, so template with a reasonable similarity can be created if necessary.</p>\n\n<p>I know opencv has shape matching function which can return matching result in double, but cannot give a best matching position, i.e. the object position in the image. I can cut the image into sections and run matching shape on each, but the problem is, the size of that object is not previously known, therefore, to do it in this way, different section sizes should all be tried.</p>\n\n<p>So I am wondering if there is other more manageable method to do this?Like the match template method, except for a contour instead of a solid picture section. BTW, I tried to do some preporcess to get rid of noise inside the object so it becomes a section with contour only, and the template matching can be applied, but it is not working, always noise inside.</p>\n\n<p>Any suggestion on this issue? Thanks.</p>\n"}, {"tags": ["c++", "file", "memory", "io"], "comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1466005307, "post_id": 37839690, "comment_id": 63140826, "body": "Just to be sure, you are using NTFS, are you? Not some crazy filesystem such as exFAT..."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466005672, "post_id": 37839690, "comment_id": 63141088, "body": "Something is definitely wrong. Though seeks are slow, they shouldn&#39;t be measured in seconds. Can you please show more of your code?"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1466005849, "post_id": 37839690, "comment_id": 63141220, "body": "@rodrigo I use NTFS"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466006082, "post_id": 37839690, "comment_id": 63141392, "body": "@Leon <a href=\"http://pastebin.com/MejiTKj0\" rel=\"nofollow noreferrer\">pastebin.com/MejiTKj0</a>"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466006470, "post_id": 37839690, "comment_id": 63141663, "body": "@Krustenkaese Thanks. What about the write function? We may go through less cycles if you share all your code."}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466006661, "post_id": 37839690, "comment_id": 63141806, "body": "@Leon The write function is only a dummy for TIFFWriteScanline, which is part of the libtiff library and isn&#39;t the bottleneck. I&#39;ve isolated the given read function as the most time consuming procedure. TIFFWriteScanline takes about 150 ms max."}, {"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1466007068, "post_id": 37839690, "comment_id": 63142076, "body": "I would expect to offset by the 3 integer as well in the read (12 bytes)"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466007139, "post_id": 37839690, "comment_id": 63142117, "body": "Is the file located on a local disk?"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1466007165, "post_id": 37839690, "comment_id": 63142138, "body": "@Alessandro Teruzzi The Offset is fine because to simplify things i didn&#39;t tell about some more variables i&#39;m saving so 15 is okay... if you look into the routine opening the file you&#39;ll se the missing bytes :D"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1466007557, "post_id": 37839690, "comment_id": 63142398, "body": "Is the posted code enough to reproduce the problem?"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1466007759, "post_id": 37839690, "comment_id": 63142542, "body": "@Karoly Horvath To repoduce my problem i would have to send you a 4GB file containing my measurements... everything else is written like i&#39;ve posted... although i&#39;m down from 4hrs computation time to 15 min... I&#39;m slowly getting used to it :D"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466007820, "post_id": 37839690, "comment_id": 63142580, "body": "What are the values of m_nElemSize, m_nXDim, m_nXDim and m_nYDim?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1466007857, "post_id": 37839690, "comment_id": 63142603, "body": "@Krustenkaese: have you actually <i>tested</i> the minimal code you&#39;ve posted?"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466007899, "post_id": 37839690, "comment_id": 63142626, "body": "&quot;Every 6th read&quot; - is it a strict statement, or just something giving an idea?"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466008289, "post_id": 37839690, "comment_id": 63142856, "body": "@Leon m_nElemSize = 2, m_nXDim = 2550, m_nYDim = 820, m_nZDim = 978 and when using File Mapping it is strict and when using fread it isn&#39;t as strict :D"}, {"owner": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "edited": false, "score": 1, "creation_date": 1466008560, "post_id": 37839690, "comment_id": 63142993, "body": "Have you verified that this is not a problem caused by a bad hard drive? (&quot;Every 6th read&quot; is an extremely specific fault to be consistent.) Does the HDD demonstrate these qualities when you are running other applications or is it just an issue with this one application? Finally, have you verified that there are no other bugs that could be causing a slowdown (such as a processing loop) and it is actually the seek itself that is slow?"}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "edited": false, "score": 0, "creation_date": 1466008823, "post_id": 37839690, "comment_id": 63143151, "body": "@Chris Britt I actually didn&#39;t think about checking the hard drive... Thanks a lot, will do that next thing tomorrow. softwarebugs aren&#39;t likely because i&#39;ve reduced the code to a minimum."}], "answers": [{"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1466005282, "post_id": 37839822, "comment_id": 63140799, "body": "Anyway, seek time of a HDD should never be 6 seconds long! There has to be a better explanation..."}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 0, "last_activity_date": 1466004847, "creation_date": 1466004847, "answer_id": 37839822, "question_id": 37839690, "link": "https://stackoverflow.com/questions/37839690/slowdown-when-reading-big-file-randomly-with-c/37839822#37839822", "title": "Slowdown when reading big file randomly with C++", "body": "<p>If you have a HDD disk on which the files are stored, you should know that seek times dominate heavily when trying to perform random access. You may find you're better off reading the entire file sequentially into memory (a relatively quick operation compared to seek) and then performing your processing on the memory data instead. You may find this is quicker even if you need only a relatively small percentage of the overall file data.</p>\n"}, {"comments": [{"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466008320, "post_id": 37840947, "comment_id": 63142868, "body": "That&#39;s done on purpose, so that writes are consecutive."}], "tags": [], "owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1466008472, "last_edit_date": 1466008472, "creation_date": 1466008229, "answer_id": 37840947, "question_id": 37839690, "link": "https://stackoverflow.com/questions/37839690/slowdown-when-reading-big-file-randomly-with-c/37840947#37840947", "title": "Slowdown when reading big file randomly with C++", "body": "<p>In your loop Z / nZ should be outer most loop and Y should be inner loop. That would save seek times, if the storage memory layout has stored a nZ pages one by one .</p>\n\n<p>In the current code displayed it shows nZ in inner loop, which is no good. The current arrangement of loops is analogous to book reading, with reading first line for each page of the book, then reading second line and so on;  </p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "is_accepted": true, "score": 0, "last_activity_date": 1466066016, "creation_date": 1466066016, "answer_id": 37853936, "question_id": 37839690, "link": "https://stackoverflow.com/questions/37839690/slowdown-when-reading-big-file-randomly-with-c/37853936#37853936", "title": "Slowdown when reading big file randomly with C++", "body": "<p>Thank you all very much for your input.\nActually the first thing i should have checked was at fault, being the HDD, which wasn't able to provide the needed datarate.<br>\nI'm now thinking about switching to a SSD - Device.</p>\n"}], "owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 37853936, "answer_count": 3, "score": -4, "last_activity_date": 1466066016, "creation_date": 1466004510, "last_edit_date": 1466007274, "question_id": 37839690, "link": "https://stackoverflow.com/questions/37839690/slowdown-when-reading-big-file-randomly-with-c", "title": "Slowdown when reading big file randomly with C++", "body": "<p>I've run into some trouble when reading chunks of data at random locations all over a big file (>4GB).<br>\nThe task is to save a 3D datacube to a file and transpose the axes while not loading the whole dataset into RAM.<br>\nThe storage format is as follows:<br>\nI've got 3 Integer at the beginning of the File, storing the dimensions (nX, nY, nZ ).<br>\nAfter that follows the data as lines with length nX.<br>\nThese Lines are repeated nY times which results in a page and the pages are repeated nZ times.<br>\nMeaning:<br>\nA line has nX bytes<br>\nA page has nX * nY bytes<br>\nThe file has nX * nY * nZ + 12 bytes<br>\nTo transpose the dataset i execute the following loop:<br></p>\n\n<pre><code>for( int i=0;i&lt;nY;i++ )\n{\n    for( int j=0;j&lt;nZ;j++ )\n    {\n        read( pBuf, i*nX+j*nY*nX );//read nX bytes from offset i*nX+j*nX*nY\n        writeNext(pBuf);\n    }\n}\n</code></pre>\n\n<p>When using fopen, _fseeki64 and fread it happens that after approx. 30% of the overall reads every 6th read or so takes up to 7 s, since there are multiple millions of those reads i can't accept these delays.\nThus i implemented the same algorithm with memory mapped files (CreateFile, CreateFileMapping and MapViewOfFile), but now every 6th read takes about 2 s.<br>\nIs there a method/chance of increasing the readout speed?\n<br>\n<br>\nEDIT1:<br>\nI've added some code at <a href=\"http://pastebin.com/MejiTKj0\" rel=\"nofollow\">http://pastebin.com/MejiTKj0</a><br>\nEDIT2:<br>\nSome may notice an inconsistency regarding the offset in the read function. To simplify matters i didn't tell about all variables saved in the file header thus the offset of 15 bytes is okay</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "is_accepted": false, "score": 4, "last_activity_date": 1466004678, "creation_date": 1466004678, "answer_id": 37839757, "question_id": 37839585, "link": "https://stackoverflow.com/questions/37839585/how-to-wrap-a-function-with-single-argument-to-accept-multiple-arguments/37839757#37839757", "title": "How to wrap a function with single argument to accept multiple arguments?", "body": "<p>Since you're in a specific situation where you need a <code>double x double -&gt; double</code> function, you can wrap <code>foo</code> as follows:</p>\n\n<pre><code>double foo_w(double a, double) { return foo(a); }\n</code></pre>\n\n<p>If you are interested in a more general solution, you can look into variadic template for the number of arguments (and their respective type) as Mohammadreza Panahi shows in his answer. But try not to over engineer your problem. ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466037448, "post_id": 37839779, "comment_id": 63155725, "body": "Does it finally return a pointer or just the function itself?"}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466071985, "post_id": 37839779, "comment_id": 63170361, "body": "@YiFei It returns a lambda, which has its own unique type and is not a pointer to function. Since it&#39;s a capturing lambda, you can&#39;t convert it to a function pointer, to the best of my knowledge (see <a href=\"http://stackoverflow.com/a/28746827/1051764\">this answer</a>)."}], "tags": [], "owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "is_accepted": false, "score": 4, "last_activity_date": 1466071993, "last_edit_date": 1466071993, "creation_date": 1466004731, "answer_id": 37839779, "question_id": 37839585, "link": "https://stackoverflow.com/questions/37839585/how-to-wrap-a-function-with-single-argument-to-accept-multiple-arguments/37839779#37839779", "title": "How to wrap a function with single argument to accept multiple arguments?", "body": "<p>Here are two general solutions.</p>\n\n<h2>Compile time</h2>\n\n<p>This can be accomplished using variadic templates:</p>\n\n<pre><code>double func(double x)\n{\n    return x + 1;\n}\n\ntemplate&lt;typename... Ts&gt;\ndouble wrappedFunc(double x, const Ts&amp;...)\n{\n    return f(x);\n}\n</code></pre>\n\n<p><code>wrappedFunc()</code> can be invoked with any number of arguments of any types, only the first one will actually be used and passed to <code>f()</code>:</p>\n\n<pre><code>wrappedFunc(5.0, \"Hello!\", false, -23);    // returns 6.0\n</code></pre>\n\n<h2>Run time</h2>\n\n<p>As far as I understand the edit you made, you are looking for a way to do this at run time. Here's one way to do so in C++14, using a function template, returning a lambda with variable number of parameters, which calls the original function, passing its first parameter and ignoring the rest:</p>\n\n<pre><code>template&lt;typename Func&gt;\nauto getVariadicWrapper(Func func)\n{   \n    return [func](auto argument, auto...) {return func(argument);};\n}\n</code></pre>\n\n<p>This function template can be used to construct a wrapper function in the following manner:</p>\n\n<pre><code>// Assuming func() is the same as before\n\n// Create a wrapper function, which passes its first param to func and ignores the rest.\nauto wrappedFunc = getVariadicWrapper(func);\n\n// Use it\nwrappedFunc(5.0, false, \"bananas\", 72233);    // returns 6.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466006024, "post_id": 37839925, "comment_id": 63141343, "body": "@YiFei of course, because if it would, and you call <code>func(1, 2)</code>, what would it do? It can&#39;t call <code>foo</code> with 2 arguments. That&#39;s why you can use the ellipsis <code>...</code> to &quot;fake&quot; multiple arguments, and then <code>func(1, 2)</code> is well formed"}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466006461, "post_id": 37839925, "comment_id": 63141654, "body": "It seems you&#39;ve misunderstood what I want, but yours seems to work if using <code>std::function&lt;double(double)&gt;</code>, i.e. the number of parameters should be the least, as I can always have <code>...</code> to do this trick."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 4, "last_activity_date": 1466005120, "creation_date": 1466005120, "answer_id": 37839925, "question_id": 37839585, "link": "https://stackoverflow.com/questions/37839585/how-to-wrap-a-function-with-single-argument-to-accept-multiple-arguments/37839925#37839925", "title": "How to wrap a function with single argument to accept multiple arguments?", "body": "<p>Instead of a function pointer, if you use C++11, you can use <code>std::function</code> to store the functions:</p>\n\n<pre><code>double foo(double, double) {}\ndouble Foo(double, ...) {} //You could also use a template for this one\n\n//Note that the number of parameters of 'func' should be the maximum possible\n//arguments of the functions you want to store (here: 1 vs 2)\nstd::function&lt;double(double, double)&gt; func;\n\nfunc = foo; //Ok\nfunc = Foo; //Ok\n\n//Now you can call 'func'\nfunc(1, 2); //if 'func' == 'Foo', ignores the 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466036781, "post_id": 37840275, "comment_id": 63155573, "body": "Seemed I can&#39;t initialize it in struct constructor, must I assign it outside of the struct?"}, {"owner": {"reputation": 1051, "user_id": 5281853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b82301049e4a8068a396245063cc5ee?s=128&d=identicon&r=PG&f=1", "display_name": "gbehar", "link": "https://stackoverflow.com/users/5281853/gbehar"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1466057519, "post_id": 37840275, "comment_id": 63161166, "body": "I didn&#39;t have trouble doing it in the constructor. Maybe give a code example? (Lambdas are only available since C++11 btw)"}], "tags": [], "owner": {"reputation": 1051, "user_id": 5281853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b82301049e4a8068a396245063cc5ee?s=128&d=identicon&r=PG&f=1", "display_name": "gbehar", "link": "https://stackoverflow.com/users/5281853/gbehar"}, "is_accepted": true, "score": 0, "last_activity_date": 1466005995, "creation_date": 1466005995, "answer_id": 37840275, "question_id": 37839585, "link": "https://stackoverflow.com/questions/37839585/how-to-wrap-a-function-with-single-argument-to-accept-multiple-arguments/37840275#37840275", "title": "How to wrap a function with single argument to accept multiple arguments?", "body": "<p>Another nice and easy way is with a lambda</p>\n\n<p>If you have</p>\n\n<pre><code>double func (double a)\n{\n    return a;\n}\n\nstruct st\n{\n    double(*foo)(double,double);\n};\n</code></pre>\n\n<p>You can do </p>\n\n<pre><code>st a;\na.foo = [](double a,double b){return func(a);};\n</code></pre>\n"}], "owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 37840275, "answer_count": 4, "score": 1, "last_activity_date": 1466071993, "creation_date": 1466004212, "last_edit_date": 1466005408, "question_id": 37839585, "link": "https://stackoverflow.com/questions/37839585/how-to-wrap-a-function-with-single-argument-to-accept-multiple-arguments", "title": "How to wrap a function with single argument to accept multiple arguments?", "body": "<p>I want some code that will enables me to do:</p>\n\n<pre><code>// Dummy function foo\ndouble foo(double a){return a+1;}\n// Some wrapping here ... which generates (maybe a pointer to)\ndouble Foo(double a, ...){return a+1;}\n// i.e. ignore any other arguments, just accept\n</code></pre>\n\n<p>It's mainly because I have a struct member that will store a pointer to function, say <code>double (*)(double, double)</code> normally, but some case it has to store a pointer to a unary function (and I don't really want to use boost.variant).</p>\n\n<p><strong>EDIT</strong>: Sorry if I didn't say it clearly, but <strong>it should (somehow like a converter) that works for infinite unary functions of a same kind</strong>.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 11, "creation_date": 1466004018, "post_id": 37839474, "comment_id": 63139869, "body": "It says &quot;at least...&quot;. There&#39;s nothing to stop it being larger than 8."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1466004090, "post_id": 37839474, "comment_id": 63139925, "body": "&quot;A byte is <b>at least</b> large enough to contain ...&quot;. This definition allows for 42-bits bytes."}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "edited": false, "score": 0, "creation_date": 1466004104, "post_id": 37839474, "comment_id": 63139933, "body": "I thought about it. But then, if it is being larger, isn&#39;t that an inefficient utilization of memory space ? Sorry but, i am unaware of these details."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 4, "creation_date": 1466004437, "post_id": 37839474, "comment_id": 63140168, "body": "If your word size is 36 bits (GE 645, PDP-10), then you can have 9-bit bytes."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466004452, "post_id": 37839474, "comment_id": 63140179, "body": "The C++ memory types are based on ranges, not on bit-widths."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1466004489, "post_id": 37839474, "comment_id": 63140206, "body": "Packed data can still be packed. Asking about the advantages and disadvantages of having larger bytes would be the subject of a completely new question, though."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1466004633, "post_id": 37839474, "comment_id": 63140310, "body": "@UjjwalAryan It would be inefficient on many platforms, but they&#39;re not forced to do so. But on some platforms, it might be more efficient to make them bigger, and that&#39;s why the standard doesn&#39;t force them to make them 8 bits."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "edited": false, "score": 1, "creation_date": 1466004742, "post_id": 37839474, "comment_id": 63140393, "body": "@UjjwalAryan Inefficient if you just want to store bytes. However, perhaps there is some theoretical system that uses 32 bits as the smallest memory unit, then you&#39;d have 32 bit bytes. There could be speed benefits to bigger &quot;bytes&quot;, at least in the future."}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "edited": false, "score": 0, "creation_date": 1466004822, "post_id": 37839474, "comment_id": 63140453, "body": "Okay. I have never heard about such systems. Maybe there are. But it does seem a little counter-intuitive though."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1466004943, "post_id": 37839474, "comment_id": 63140550, "body": "<a href=\"http://stackoverflow.com/q/2098149/179910\">Related</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1466008851, "post_id": 37839474, "comment_id": 63143170, "body": "AFAIK, there&#39;s absolutely nothing special about 8 for the size of a byte... except for the number of programs written that were expecting the size of a byte to be 8 bits."}], "owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "closed_date": 1466004604, "answer_count": 0, "score": 4, "last_activity_date": 1466004099, "creation_date": 1466003926, "last_edit_date": 1466004099, "question_id": 37839474, "link": "https://stackoverflow.com/questions/37839474/does-the-c-14-memory-model-specify-that-a-byte-must-have-8-bits", "closed_reason": "Duplicate", "title": "Does the C++ 14 memory model specify that a byte must have 8 bits?", "body": "<p>Quoting from C++14 ISO standard (Freely available <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow noreferrer\">working draft</a> ) (Page 6, section 1.7)</p>\n\n<blockquote>\n  <p>The fundamental storage unit in the C++ memory model is the byte. A\n  byte is at least large enough to contain any member of the basic\n  execution character set (2.3) and the eight-bit code units of the\n  Unicode UTF-8 encoding form and is composed of a contiguous sequence\n  of bits, the number of which is implementation- defined....</p>\n</blockquote>\n\n<p>The question is:</p>\n\n<p>Doesn't the above imply that a byte will always contain 8 bits, since\nit has to contain 8-bit code units, and the basic execution character\nset contains all the basic english and mathematical symbols which I\nhope will require at least 8 bits for storage? Why then, it says that\nnumber of bits is implementation defined?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466002999, "post_id": 37839065, "comment_id": 63139116, "body": "You specify the full path to the tool. Or are you talking about setting the application&#39;s working directory? You can call the <code>SetCurrentDirectory</code> function."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1466004510, "post_id": 37839065, "comment_id": 63140217, "body": "As its not answering your question as such i&#39;ll leave this as a comment. If you&#39;re only working on windows I&#39;d recommend using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateProcess</a> as this lets you specify all the various parameters when you spawn a process including its working directory, etc."}, {"owner": {"reputation": 854, "user_id": 4035677, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/YJzOS.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4035677/nick"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1466004806, "post_id": 37839065, "comment_id": 63140440, "body": "@MikeVine that looks really interesting. Thanks I&#39;ll look into it."}], "answers": [{"tags": [], "owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "is_accepted": true, "score": 1, "last_activity_date": 1466006468, "creation_date": 1466006468, "answer_id": 37840454, "question_id": 37839065, "link": "https://stackoverflow.com/questions/37839065/how-do-i-run-a-command-line-tool-from-a-different-directory-in-c/37840454#37840454", "title": "How do I run a command line tool from a different directory in C++", "body": "<p>As suggested by @CodyGray in the comments, my idea was to use <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/aa365530(v=vs.85).aspx\" rel=\"nofollow\"><code>SetCurrentDirectory</code></a>. If your program is located in the <em>BST</em> directory and you want to run <em>xst</em> in the sub-folder <em>XST\\Files</em> relative to it, then it makes sense to also use <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/ms683197(v=vs.85).aspx\" rel=\"nofollow\"><code>GetModuleFileName</code></a>. Use this function to retrieve the path to your program and then replace the file name by your sub-folder. Finally change directory to the modified path:</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    // Get the path to your program.\n    char moduleFilePath[MAX_PATH];\n    GetModuleFileName(NULL, moduleFilePath, MAX_PATH);\n\n    // Find the backslash in front of the name of your program.\n    string::size_type pos = string(moduleFilePath).rfind(\"\\\\\");\n\n    // Replace the program name by your sub-folder.\n    string subFolderPath = string(moduleFilePath).substr(0, pos) + \"\\\\XST\\\\Files\";\n\n    // Change into the sub-folder relative to your program.\n    SetCurrentDirectory(subFolderPath.c_str());\n\n    // Execute some program in your sub-folder.\n    system(\"type test.txt\");\n\n    return 0;\n}\n</code></pre>\n\n<p>As I don't have <em>xst</em>, I put a text file <em>test.txt</em> into the sub-folder for testing purposes. The file just contains <code>Test test test</code>, so the program above prints out the following:</p>\n\n<blockquote>\n  <p>Test test test</p>\n</blockquote>\n\n<p>But as suggested by @MikeVine, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow\"><code>CreateProcess</code></a> might be a smarter solution.</p>\n"}], "owner": {"reputation": 854, "user_id": 4035677, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/YJzOS.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4035677/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 37840454, "answer_count": 1, "score": 1, "last_activity_date": 1466007011, "creation_date": 1466002855, "last_edit_date": 1495540288, "question_id": 37839065, "link": "https://stackoverflow.com/questions/37839065/how-do-i-run-a-command-line-tool-from-a-different-directory-in-c", "title": "How do I run a command line tool from a different directory in C++", "body": "<p>I am trying to build a C++ application that makes a bunch of command line calls on the Windows command prompt using the <code>system()</code> function. The C++ runs in directory <em>BSP</em> below. <em>BSP</em> contains a sub-folder <em>BSP/XST/Files</em>. One of the commands the application makes, needs to call a command line tool (Xilinx Synthesis tools) that needs to run in the <em>Files</em> directory.</p>\n\n<pre><code>BSP\n|---XST\n|---|---Files\n</code></pre>\n\n<p>Doing it manually on the command prompt I would do something similar to:</p>\n\n<pre><code>&gt;&gt;cd XST\n&gt;&gt;cd Files\n&gt;&gt;xst -h\n</code></pre>\n\n<p>Is there a way to call a tool in the sub-directory from the <em>BSP</em> directory?\nI looked at this question <a href=\"https://stackoverflow.com/questions/3903288/run-an-exe-from-a-different-directory\">here</a>, but it does not work. I'm guessing because they are talking about an executable that is stored within the sub-directory whereas I am calling a command line tool (i.e. uses environment variables).</p>\n\n<p>To simplify: Is there a command/option to run a command line tool in a sub-folder on the Windows command prompt? I can just emulate the statement via my C++.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 1203, "user_id": 3801949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee4ba90bb26abd4545860ca0e02bc28?s=128&d=identicon&r=PG&f=1", "display_name": "selyunin", "link": "https://stackoverflow.com/users/3801949/selyunin"}, "edited": false, "score": 4, "creation_date": 1466002448, "post_id": 37838859, "comment_id": 63138710, "body": "<a href=\"http://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c\" title=\"easiest way to convert int to string in c\">stackoverflow.com/questions/5590381/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "edited": false, "score": 0, "creation_date": 1466003136, "post_id": 37838859, "comment_id": 63139219, "body": "It&#39;s probably not a space. Check out an ASCII table: <a href=\"https://www.bing.com/search?q=ascii+table\" rel=\"nofollow noreferrer\">bing.com/search?q=ascii+table</a>"}, {"owner": {"reputation": 1, "user_id": 9646416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1PEDwFeRrKY/AAAAAAAAAAI/AAAAAAAAAAA/7j4LhPL5LMU/photo.jpg?sz=128", "display_name": "John Walker", "link": "https://stackoverflow.com/users/9646416/john-walker"}, "edited": false, "score": 0, "creation_date": 1523728026, "post_id": 37838859, "comment_id": 86690946, "body": "I doubt very much that &#39;ENQ&#39; is redundant.. these control characters are used in communication to control the flow of information and acknowledgement of messages between devices, although what current protocols (http, ftp, etc. ) use I do not know. As far as I remember, and it is 40+ years ago, ENQ was used to bid for a communications channel, STX indicated the start of the message, ETX the end of the message, ACK that it had been received correctly, NAK that it had not been received correctly, SYN to sychronise etc. ASCII &#39;0&#39; is thus Hex 30, a space is Hex 20, and letters start not unreasonab"}, {"owner": {"reputation": 279, "user_id": 6278133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UAc4wivY8S8/AAAAAAAAAAI/AAAAAAAAD5g/qPFS_fsRglA/photo.jpg?sz=128", "display_name": "Firzok Nadeem", "link": "https://stackoverflow.com/users/6278133/firzok-nadeem"}, "edited": false, "score": 0, "creation_date": 1593027083, "post_id": 37838859, "comment_id": 110639350, "body": "For conversion like these, I have a bookmark <a href=\"https://www.converttypes.com/\" rel=\"nofollow noreferrer\">converttypes.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 6, "last_activity_date": 1466002431, "creation_date": 1466002431, "answer_id": 37838912, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37838912#37838912", "title": "Converting integer to string in c++", "body": "<p>Character code for numbers are not equal to the integer the character represents in typical system.</p>\n\n<p>It is granteed that character codes for decimal digits are consecutive (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\">N3337</a> 2.3 Character sets, Paragraph 3), so you can add <code>'0'</code> to convert one-digit number to character.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    string s;\n    int b=5;\n    s.push_back((char)(b + '0'));\n    cout&lt;&lt;s&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "is_accepted": false, "score": 4, "last_activity_date": 1466002480, "creation_date": 1466002480, "answer_id": 37838930, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37838930#37838930", "title": "Converting integer to string in c++", "body": "<p>You are interpreting the integer <em>5</em> as a character. In ASCII encoding, <em>5</em> is the <strong>Enquiry</strong> <em>control character</em> as you lookup <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow\">here</a>.</p>\n\n<p>The character <strong>5</strong> on the other hand is represented by the decimal number 53.</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 6458469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a76af8b44168b1375e7ee92543e9e2?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Navarro", "link": "https://stackoverflow.com/users/6458469/benjamin-navarro"}, "is_accepted": false, "score": 1, "last_activity_date": 1466003133, "creation_date": 1466003133, "answer_id": 37839199, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37839199#37839199", "title": "Converting integer to string in c++", "body": "<p>As others said, you can't convert an integer to a string the way you are doing it.</p>\n\n<p>IMHO, the best way to do it is using the C++11 method <a href=\"http://www.cplusplus.com/reference/string/to_string/\" rel=\"nofollow\">std::to_string</a>.</p>\n\n<p>Your example would translate to:</p>\n\n<pre><code>using namespace std;\nint main()\n{\n    string s;\n    int b=5;\n    s = to_string(b);\n    cout&lt;&lt;s&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 1116556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa88dd58b83c5d079298c809cc9eef38?s=128&d=identicon&r=PG", "display_name": "Zeps", "link": "https://stackoverflow.com/users/1116556/zeps"}, "is_accepted": false, "score": 0, "last_activity_date": 1466004259, "creation_date": 1466004259, "answer_id": 37839599, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37839599#37839599", "title": "Converting integer to string in c++", "body": "<p>Also, you can use <a href=\"http://www.cplusplus.com/reference/sstream/stringstream/stringstream/\" rel=\"nofollow\">stringstream</a>,\nstd::to_string doesn't work for me on GCC</p>\n"}, {"tags": [], "owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "is_accepted": false, "score": 0, "last_activity_date": 1466004590, "creation_date": 1466004590, "answer_id": 37839719, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37839719#37839719", "title": "Converting integer to string in c++", "body": "<p>If we were writing C++ from scratch in 2016, maybe we would make this work. However as it choose to be (mostly) backward compatible with a fairly low level language like C, <code>'char'</code> is in fact just a number, that string/printing algorithms interpret as a character -but most of the language doesn't treat special. Including the cast. So by doing <code>(char)</code> you're only converting a 32 bit signed number (<code>int</code>) to a 8 bit signed number (<code>char</code>). </p>\n\n<p>Then you interpret it as a character when you print it, since printing functions do treat it special. But the value it gets printed to is not <code>'5'</code>. The correspondence is conventional and completely arbitrary; the first numbers were reserved to special codes which are probably obsolete by now. As Hoffman pointed out, the bit value <code>5</code> is the code for <code>Enquiry</code> (whatever it means), while to print <code>'5'</code> the character has to contain the value <code>53</code>. To print a proper space you'd need to enter <code>32</code>. It has no meaning other than someone decided this was as good as anything, sometime decades ago, and the convention stuck.</p>\n\n<p>If you need to know for other characters and values, what you need is an \"ASCII table\". Just google it, you'll find plenty. </p>\n\n<p>You'll notice that numbers and letters of the same case are next to each other in the order you expect, so there is some logic to it at least. Beware, however, it's often not intuitive anyway: uppercase letters are before lowercase ones for instance, so <code>'A' &lt; 'a'</code>.</p>\n\n<p>I guess you're starting to see why it's better to rely on dedicated system functions for strings!</p>\n"}, {"tags": [], "owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1466009135, "creation_date": 1466009135, "answer_id": 37841253, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c/37841253#37841253", "title": "Converting integer to string in c++", "body": "<p>The problem in your code is that you are converting the integer 5 to ASCII (=> ENQ ASCII code, which is not \"printable\").\nTo convert it to ASCII properly, you have to add the ASCII code of '0' (48), so:</p>\n\n<pre><code>char ascii = b + '0';\n</code></pre>\n\n<p>However, to convert an integer to std::string use:</p>\n\n<pre><code>std::stringstream ss; //from &lt;sstream&gt;\nss &lt;&lt; 5;\nstd::string s = ss.str ();\n</code></pre>\n\n<p>I always use this helper function in my projects:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::string toString (T arg)\n{\n    std::stringstream ss;\n    ss &lt;&lt; arg;\n    return ss.str ();\n}\n</code></pre>\n"}], "owner": {"reputation": 285, "user_id": 4693154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-viJRqdm9lkw/AAAAAAAAAAI/AAAAAAAAAPo/gdKWUlqOH1I/photo.jpg?sz=128", "display_name": "Gibreel Abdullah", "link": "https://stackoverflow.com/users/4693154/gibreel-abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26758, "favorite_count": 0, "accepted_answer_id": 37838912, "answer_count": 6, "score": 2, "last_activity_date": 1523728026, "creation_date": 1466002316, "question_id": 37838859, "link": "https://stackoverflow.com/questions/37838859/converting-integer-to-string-in-c", "title": "Converting integer to string in c++", "body": "<p>This is the code I wrote to convert integer to string.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    string s;\n    int b=5;\n    s.push_back((char)b);\n    cout&lt;&lt;s&lt;&lt;endl;\n}\n</code></pre>\n\n<p>I expected the output to be 5 but it is giving me blank space.</p>\n\n<p>I know there is another way of doing it using stringstream but I want to know what is wrong in this method?</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "dynamic-programming", "memoization"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 4653451, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-69-qGy3Rh-E/AAAAAAAAAAI/AAAAAAAAAUs/XH7b45uqTgs/photo.jpg?sz=128", "display_name": "Saksham", "link": "https://stackoverflow.com/users/4653451/saksham"}, "edited": false, "score": 0, "creation_date": 1466005848, "post_id": 37839862, "comment_id": 63141218, "body": "How can I fix this ?"}], "tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1466004956, "creation_date": 1466004956, "answer_id": 37839862, "question_id": 37838792, "link": "https://stackoverflow.com/questions/37838792/whats-wrong-in-this-recursive-algorithm/37839862#37839862", "title": "What&#39;s wrong in this recursive algorithm?", "body": "<p>One problem is that you are computing the cost based on pos[n[a]].  </p>\n\n<p>pos[n[a]] returns the position in the original array, but the cost should be based on the position in the current array P (i.e. with some elements moved to Q).</p>\n\n<p>For example, if P is originally {4,1,2} then the position of the 2 is x==3, but after P is reduced to {1,2}, then the position of the 2 is x==2.</p>\n"}], "owner": {"reputation": 157, "user_id": 4653451, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-69-qGy3Rh-E/AAAAAAAAAAI/AAAAAAAAAUs/XH7b45uqTgs/photo.jpg?sz=128", "display_name": "Saksham", "link": "https://stackoverflow.com/users/4653451/saksham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37839862, "answer_count": 1, "score": -1, "last_activity_date": 1466005118, "creation_date": 1466002170, "last_edit_date": 1466005118, "question_id": 37838792, "link": "https://stackoverflow.com/questions/37838792/whats-wrong-in-this-recursive-algorithm", "title": "What&#39;s wrong in this recursive algorithm?", "body": "<p>Problem statement:</p>\n\n<p>An N-element permutation is an N-element sequence of distinct numbers from the set {1, 2, ...,n}. For example the sequence 2,1,4,5,3 is a 5-element permutation. P is an N-element permutation. Your task is to sort P in ascending order. But because it is very simple, I have a new rule for you. You have two sequences P and Q. P is an N-element permutation and Q is initially empty and formed by sorting P (i.e. finally Q = 1, 2, 3,... , N). You have to implement N steps to sort P. In the i-th step, P has N-i+1 remaining elements, Q has i-1 elements and you have to choose some x-th element (from the N-i+1 available elements) of P and put it to the left or to the right of Q. The cost of this step is equal to x * i. The total cost is the sum of costs of individual steps. After N steps, Q must be an ascending sequence. Your task is to minimize the total cost.</p>\n\n<p>Input</p>\n\n<p>The first line of the input file is T (T \u2264 10), the number of test cases. Then descriptions of T test cases follow. The description of each test case consists of two lines. The first line contains a single integer N (1 \u2264 N \u2264 1000). The second line contains N distinct integers from the set {1, 2, .., N}, the N-element permutation P.</p>\n\n<p>Output</p>\n\n<p>For each test case your program should write one line, containing a single integer - the minimum total cost of sorting.</p>\n\n<p>Input:\n1\n4\n4 1 3 2</p>\n\n<p>Output:\n15</p>\n\n<p>My solution :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nint sz;\nint n[1001];\nmap&lt;int,int&gt;pos;\nint solve(int i,int a,int b){\nif(a==-1&amp;&amp;b==sz) //if all the elements have been moved \n    return 0;\nif(i&gt;sz)\n    return INT_MAX;\n    int ret = INT_MAX;\n    if(a&gt;=0) //select the element from left\n        ret = min(ret,solve(i+1,a-1,b)+((i+1)*pos[n[a]]));\n    if(b&lt;sz) //select the element from right\n        ret = min(ret,solve(i+1,a,b+1)+((i+1)*pos[n[b]]));\nreturn ret;\n}\n\nint main()\n{\n   int t;\n   cin&gt;&gt;t;\n   while(t--){\n        cin&gt;&gt;sz;\n   for(int i=0;i&lt;sz;i++){\n    int x;\n    cin&gt;&gt;x;\n    n[i] = x; //value\n    pos[x] = i+1; //position of elements of array before sorting\n   }\n   sort(n,n+sz); //sorting the array\n   int ret = INT_MAX;\n   for(int i=0;i&lt;sz;i++)  \n     ret= min(ret,solve(0,i,i+1));\n             cout &lt;&lt; ret &lt;&lt; endl;\n\n        }\n    return 0;\n}\n</code></pre>\n\n<p>This returns wrong answer . What's wrong with my approach ? How can this be fixed ? </p>\n"}, {"tags": ["c++", "oop", "dictionary"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1466002210, "post_id": 37838771, "comment_id": 63138552, "body": "<code>vector&lt;void*&gt;</code>?  Why?  Also, what does <code>std::map</code> have to do with this, when the issue is solely with <code>std::vector</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1466002404, "post_id": 37838771, "comment_id": 63138687, "body": "Er, why do you think <code>mymap.clear()</code> doesn&#39;t clear your map ?"}, {"owner": {"reputation": 11, "user_id": 6470205, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6W6WzXQD8Xw/AAAAAAAAAAI/AAAAAAAAAFA/t5fP_1ij0ig/photo.jpg?sz=128", "display_name": "Kuppusamy k", "link": "https://stackoverflow.com/users/6470205/kuppusamy-k"}, "edited": false, "score": 0, "creation_date": 1466002788, "post_id": 37838771, "comment_id": 63138950, "body": "@hurkyl :: it&#39;s clearing value ., but map holding some address"}, {"owner": {"reputation": 3212, "user_id": 2233706, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/224116af88436575b20ba30f2fd9d995?s=128&d=identicon&r=PG", "display_name": "user2233706", "link": "https://stackoverflow.com/users/2233706/user2233706"}, "edited": false, "score": 0, "creation_date": 1466002951, "post_id": 37838771, "comment_id": 63139069, "body": "map will key will still point to an empty vector even after you clear the vector.  You don&#39;t want an empty vector?"}, {"owner": {"reputation": 11, "user_id": 6470205, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6W6WzXQD8Xw/AAAAAAAAAAI/AAAAAAAAAFA/t5fP_1ij0ig/photo.jpg?sz=128", "display_name": "Kuppusamy k", "link": "https://stackoverflow.com/users/6470205/kuppusamy-k"}, "edited": false, "score": 0, "creation_date": 1466003189, "post_id": 37838771, "comment_id": 63139259, "body": "for mymap.clear() vector got empty . i want that pointing to empty vector will hold some address to be cleared"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1466004008, "post_id": 37838771, "comment_id": 63139860, "body": "I don&#39;t understand what you&#39;re asking. Can you edit your question to include what you want?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1466004251, "post_id": 37838771, "comment_id": 63140046, "body": "@Kuppusamy: For <code>mymap.clear()</code>, all of the contained vectors got <i>destroyed</i>; there are none left."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1466006509, "post_id": 37838771, "comment_id": 63141695, "body": "@Kuppusamyk The map&#39;s data type is <code>std::vector&lt;void*&gt;</code>, not a <code>std::vector&lt;void*&gt;*</code> (a pointer to a vector).  So there is no pointer to delete."}], "answers": [{"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1466015200, "post_id": 37841457, "comment_id": 63146573, "body": "@ Mattia F. - or <code>delete [] address</code>, instead of <code>free(address)</code>, if <code>address</code> was allocated with <code>new []</code>"}, {"owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1466015634, "post_id": 37841457, "comment_id": 63146864, "body": "Well, I posted just an example, he can do whatever he wants with that value."}], "tags": [], "owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1466015599, "last_edit_date": 1466015599, "creation_date": 1466009840, "answer_id": 37841457, "question_id": 37838771, "link": "https://stackoverflow.com/questions/37838771/clear-map-of-vector-pointer-in-c/37841457#37841457", "title": "clear map of vector pointer in c++", "body": "<p>I don't really understand the question, but if you meant that you want to delete the objects pointed by <code>vector&lt;void*&gt;</code>, then use:</p>\n\n<pre><code>for (const auto&amp; v : mymap) //for each value in the map\n    for (const auto&amp; address: v.second) //for each element in the vector\n        delete address;\nmymap.clear ();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6470205, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6W6WzXQD8Xw/AAAAAAAAAAI/AAAAAAAAAFA/t5fP_1ij0ig/photo.jpg?sz=128", "display_name": "Kuppusamy k", "link": "https://stackoverflow.com/users/6470205/kuppusamy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1466015599, "creation_date": 1466002126, "last_edit_date": 1466002192, "question_id": 37838771, "link": "https://stackoverflow.com/questions/37838771/clear-map-of-vector-pointer-in-c", "title": "clear map of vector pointer in c++", "body": "<pre><code>map&lt;string ,vector&lt;void*&gt;&gt; mymap;\n</code></pre>\n\n<p>I tried like,</p>\n\n<pre><code>std::map&lt;std::string, vector&lt;void*&gt;&gt;::iterator itr = mymap.begin();\n\nstd::vector&lt;void*&gt; ::iterator it =(itr-&gt;second).begin();\n\n\nif(it != (itr-&gt;second).end())\n{\n    (itr-&gt;second).resize(0);\n    (itr-&gt;second).shrink_to_fit();\n}\n\n\nmymap.clear();\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "allocation"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1466002100, "post_id": 37838646, "comment_id": 63138481, "body": "That&#39;s not the responsibility of allocators. Try Boost.CircularBuffer."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1466002111, "post_id": 37838646, "comment_id": 63138488, "body": "You need to call destructors for these elements, and an allocator is too low-level to do it. You probably don&#39;t want a <code>std::vector</code> at all. Have a look at <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/circular_buffer.html\" rel=\"nofollow noreferrer\"><code>boost::circular_buffer</code></a>."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1466002350, "post_id": 37838646, "comment_id": 63138640, "body": "<a href=\"http://stackoverflow.com/questions/5559730/which-stl-c-container-to-use-for-a-fixed-size-list\" title=\"which stl c container to use for a fixed size list\">stackoverflow.com/questions/5559730/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/9516711/efficient-circular-list\" title=\"efficient circular list\">stackoverflow.com/questions/9516711/efficient-circular-list</a>, <a href=\"http://stackoverflow.com/questions/9743605/thread-safe-implementation-of-circular-buffer\" title=\"thread safe implementation of circular buffer\">stackoverflow.com/questions/9743605/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/19059336/c-threadsafe-ringbuffer-implementation\" title=\"c threadsafe ringbuffer implementation\">stackoverflow.com/questions/19059336/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 3, "last_activity_date": 1466002937, "last_edit_date": 1466002937, "creation_date": 1466002479, "answer_id": 37838929, "question_id": 37838646, "link": "https://stackoverflow.com/questions/37838646/c-allocator-hooking-into-a-resize-function/37838929#37838929", "title": "C++ Allocator: hooking into a resize function", "body": "<p>TL;DR, you are trying to use the wrong container.</p>\n\n<p>The allocator is responsible for the allocation, deallocation etc. of the memory as required by the container. It is the responsibility of the container to implement the required semantics and it uses the allocators to assist it in doing so.</p>\n\n<p><code>std::vector</code> is probably not the best choice for the cache you describe, or at least not in its raw form.</p>\n\n<p>You can look to boost (<a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/circular_buffer.html\" rel=\"nofollow\"><code>circular_buffer</code></a>) as an alternative.</p>\n\n<p>Given the <code>vector</code> you mention, you could also look to wrap that with the cache interface you desire, but changing the allocator is not the correct route. Changes to the allocator will leave the vector thinking there are valid objects in the \"lower\" 25% of the container, whilst the allocator has already removed them (or the memory to them).</p>\n"}], "owner": {"reputation": 155, "user_id": 5664915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e15d0c3cf27b839276e525e0f4a99ad?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/5664915/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37838929, "answer_count": 1, "score": 1, "last_activity_date": 1466003028, "creation_date": 1466001806, "last_edit_date": 1466003028, "question_id": 37838646, "link": "https://stackoverflow.com/questions/37838646/c-allocator-hooking-into-a-resize-function", "title": "C++ Allocator: hooking into a resize function", "body": "<p>As far as I know, when a <code>vector</code> runs out of space the allocator is used to create new space. However, I want to create a custom resize policy that will remove the bottom 25% of elements instead and maintain the same size all the time. This is to build a cache that has limited space.</p>\n\n<p>Is there a method or default functor I can override to get the behavior I want?</p>\n"}, {"tags": ["c++", "linker", "static-linking"], "comments": [{"owner": {"reputation": 1848, "user_id": 2290151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7491ff3c0c23e578432bb1ebd93e2c?s=128&d=identicon&r=PG", "display_name": "renefritze", "link": "https://stackoverflow.com/users/2290151/renefritze"}, "edited": false, "score": 0, "creation_date": 1466002817, "post_id": 37838517, "comment_id": 63138975, "body": "I&#39;m somewhat curious about the need to <code>hide as much information as I can from ldd</code>. Maybe XY problem? <a href=\"http://meta.stackexchange.com/a/66378\">meta.stackexchange.com/a/66378</a>"}, {"owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "reply_to_user": {"reputation": 1848, "user_id": 2290151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7491ff3c0c23e578432bb1ebd93e2c?s=128&d=identicon&r=PG", "display_name": "renefritze", "link": "https://stackoverflow.com/users/2290151/renefritze"}, "edited": false, "score": 0, "creation_date": 1466009124, "post_id": 37838517, "comment_id": 63143313, "body": "It&#39;s just a step in analyzing the executable for extra information on how to break the program. Reverse engineering. Assuming that someone is trying to break the program or get information from it, I just wanted to hide as much as possible."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "edited": false, "score": 0, "creation_date": 1466009249, "post_id": 37839466, "comment_id": 63143389, "body": "I&#39;ve tried those two options before, but the compiler I&#39;m using is quite old and do not have <code>-static-libstdc++</code>. And when I added <code>-static-libgcc</code>, I was still able to see it when I perform <code>ldd</code>."}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 1, "last_activity_date": 1466003893, "creation_date": 1466003893, "answer_id": 37839466, "question_id": 37838517, "link": "https://stackoverflow.com/questions/37838517/g-unable-to-link-static-version-of-shared-objects/37839466#37839466", "title": "g++ unable to link static version of shared objects", "body": "<p>Those libraries <code>libstdc++</code>, <code>libgcc</code> and <code>libc</code> are special in that they're very fundamental to the running of any program compiled with <code>gcc</code>. Special <code>gcc</code> options exist if you want to link them statically, namely <code>-static-libstdc++</code> and <code>-static-libgcc</code>.</p>\n\n<p>Note that you should really know what you're doing if you choose these options. It can create portability problems for your program, many of which express themselves in unintuitive ways.</p>\n"}], "owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466003893, "creation_date": 1466001451, "question_id": 37838517, "link": "https://stackoverflow.com/questions/37838517/g-unable-to-link-static-version-of-shared-objects", "title": "g++ unable to link static version of shared objects", "body": "<p>I want to hide as much information as I can from <code>ldd</code>, so I'm learning how to statically link in libraries instead of dynamically linking them. I've read from another stackoverflow post that the correct syntax is</p>\n\n<pre><code>g++ -ldynamiclib -o exe files.cpp staticlib.a\n</code></pre>\n\n<p>Thus, my current compilation code looks like this:</p>\n\n<pre><code>STATIC_LIB=\"\"\nSTATIC_LIB=\"$STATIC_LIB ${PATH}/libcrypto.a\"\nSTATIC_LIB=\"$STATIC_LIB ${PATH}/libdl-2.5.so\" // I couldn't find the .a version for this, so I tried doing it this way, and have also tried doing just -ldl\nSTATIC_LIB=\"$STATIC_LIB ${PATH}/libstdc++.a\"\nSTATIC_LIB=\"$STATIC_LIB ${PATH}/libgcc.a\"\nSTATIC_LIB=\"$STATIC_LIB ${PATH}/libc.a\"\n\ng++ -g -I${INCLUDE_PATH} -o executable file1.cpp file2.cpp $STATIC_LIB\n</code></pre>\n\n<p>I've confirmed with <code>ldd</code> that this way works for libcrypto, as it is an external library that I brought in. However, this does not work at all for everything else, and I can still see them being listed when I use <code>ldd</code>. Does anyone knows the correct way of doing this?</p>\n\n<p>P.S. I've also tried several other alternatives such as including -static, or using -Wl,-Bstatic, and I couldn't get either of those to work. Not sure if it's my syntax or if it's just not possible.</p>\n"}, {"tags": ["c++", "2d", "game-engine", "directx-11", "direct3d11"], "comments": [{"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1466001624, "post_id": 37838450, "comment_id": 63138114, "body": "Well, it sounds like you&#39;re new to game programming in general, so making a <b>game engine</b> might be a bit of a stretch. I&#39;d get more familiar with game programming first, so you&#39;ll know what features game programmers might want. I&#39;d start by creating a simple game with an existing 2D library (or a library that allows 2D), like <a href=\"https://en.wikipedia.org/wiki/Simple_DirectMedia_Layer\" rel=\"nofollow noreferrer\">SDL</a>."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1466002175, "post_id": 37838450, "comment_id": 63138530, "body": "<b>Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem</b>"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1466009541, "post_id": 37838450, "comment_id": 63143540, "body": "Look at the <a href=\"https://github.com/Microsoft/DirectXTK\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a> and it&#39;s <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">tutorials</a>. You can do a lot with <code>SpriteBatch</code> just like you could with XNA Game Studio."}, {"owner": {"reputation": 11, "user_id": 6470087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSGOE.jpg?s=128&g=1", "display_name": "Zach Danz", "link": "https://stackoverflow.com/users/6470087/zach-danz"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1466090568, "post_id": 37838450, "comment_id": 63183796, "body": "@ChuckWalbourn That&#39;s a great suggestion, thank you! I had been looking into XNA."}, {"owner": {"reputation": 11, "user_id": 6470087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSGOE.jpg?s=128&g=1", "display_name": "Zach Danz", "link": "https://stackoverflow.com/users/6470087/zach-danz"}, "reply_to_user": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1466090574, "post_id": 37838450, "comment_id": 63183800, "body": "@Frecklefoot I&#39;ve created some games in Unity before, but I find that the use of an editor like that has really been black-boxing my learning, which is why I want to create my own engine."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6470087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSGOE.jpg?s=128&g=1", "display_name": "Zach Danz", "link": "https://stackoverflow.com/users/6470087/zach-danz"}, "edited": false, "score": 0, "creation_date": 1466090298, "post_id": 37849111, "comment_id": 63183582, "body": "I&#39;m hesitant to use DirectX 2D because I&#39;ve heard a number of negative remarks about it... <a href=\"http://braid-game.com/news/2009/01/a-demonstration-that-direct2d-is-patently-ridiculous/\" rel=\"nofollow noreferrer\">braid-game.com/news/2009/01/&hellip;</a>"}, {"owner": {"reputation": 29, "user_id": 5713189, "user_type": "registered", "profile_image": "https://graph.facebook.com/941540895940605/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/5713189/chris"}, "reply_to_user": {"reputation": 11, "user_id": 6470087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSGOE.jpg?s=128&g=1", "display_name": "Zach Danz", "link": "https://stackoverflow.com/users/6470087/zach-danz"}, "edited": false, "score": 0, "creation_date": 1466118521, "post_id": 37849111, "comment_id": 63198224, "body": "Consider what you want to do.  Your post say &quot;assistance in creating a 2D game engine&quot; which is graphics + game code.  Do you want 80% time on the game code and 20% on coding graphcis? or vise versus?  This being your first engine I would not try to learn HLSL and the CPU/GPU handshaking that has to happen, leave that up to an API like DirectX2D.  You have enough to worry about with bounding boxes, collisions, state machines, user input, action response control, sound, asset loading, animation, path finding, etc. - Good luck and use stackover flow for all those queries, it has helped me a lot."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1469556226, "post_id": 37849111, "comment_id": 64581719, "body": "<a href=\"https://github.com/Microsoft/DirectXTK12/\" rel=\"nofollow noreferrer\">DirectX Tool Kit for DirectX12</a> is now available including <code>SpriteBatch</code>. See <a href=\"https://github.com/Microsoft/DirectXTK12/wiki/Sprites-and-textures\" rel=\"nofollow noreferrer\">this tutorial lesson</a>."}, {"owner": {"reputation": 29, "user_id": 5713189, "user_type": "registered", "profile_image": "https://graph.facebook.com/941540895940605/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/5713189/chris"}, "edited": false, "score": 0, "creation_date": 1469581456, "post_id": 37849111, "comment_id": 64591892, "body": "Awesome, thanks Chuck for making this a reality.  That is one of the best classes I have used in DirectX 11, glad to see it in 12!"}], "tags": [], "owner": {"reputation": 29, "user_id": 5713189, "user_type": "registered", "profile_image": "https://graph.facebook.com/941540895940605/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/5713189/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1466047050, "last_edit_date": 1466047050, "creation_date": 1466045491, "answer_id": 37849111, "question_id": 37838450, "link": "https://stackoverflow.com/questions/37838450/directx-11-2d-game-engine-using-direct-3d-c/37849111#37849111", "title": "DIrectX 11 2D Game Engine using Direct 3D (C++)", "body": "<p>DirectX 2D is what you want if you will only do 2D.  It is hardware accelerated and you can use the math library that is shared with DirectX 11 &amp; 12 to ease you into the workings of a 3D Engine.  If you will eventually convert it to 3D, Chuck W. Comment on DirextX tool kit is a good one.<br>\nChuck, BTW, are you still writing a DirectX 12 Sprite batch class you mention last year?  Would be awesome to see that.</p>\n"}], "owner": {"reputation": 11, "user_id": 6470087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSGOE.jpg?s=128&g=1", "display_name": "Zach Danz", "link": "https://stackoverflow.com/users/6470087/zach-danz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2059, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466047050, "creation_date": 1466001244, "question_id": 37838450, "link": "https://stackoverflow.com/questions/37838450/directx-11-2d-game-engine-using-direct-3d-c", "title": "DIrectX 11 2D Game Engine using Direct 3D (C++)", "body": "<p>I have scoured the internet looking for assistance in creating a 2D game engine in DirectX 11 using Direct 3D (instead of the Direct 2D wrapper, which most sites seem to agree isn't ideal).</p>\n\n<p>I have found a plethora of resources detailing how to create a 3D game engine, but as this is my first engine attempt, I'd rather go with 2D and save myself the trouble of 3D math... I have also found a decent amount of information and textbooks on creating a 2D engine in DirectX 9, but it's my understanding that DirectX 9 handles a lot of these things very differently than DirectX 11 --and I'd rather be learning the latest and greatest (ignoring DIrectX 12 obviously, which many sites seem to agree isn't ideal for 2D)</p>\n\n<p><strong>Therefore, can anyone recommend any good sites, textbooks, videos, tutorials etc.. that could help me build a 2D game engine in C++ with DirectX 11 3D? --or, should I be doing something completely different?</strong></p>\n\n<p>Some other notes:\nI don't want to use OpenGL; \nI have already looked at: <a href=\"http://www.directxtutorial.com/LessonList.aspx?listid=11\" rel=\"nofollow\">http://www.directxtutorial.com/LessonList.aspx?listid=11</a> and <a href=\"http://www.rastertek.com/dx11tut11.html\" rel=\"nofollow\">http://www.rastertek.com/dx11tut11.html</a> to name a few.</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1466001583, "post_id": 37838290, "comment_id": 63138083, "body": "This seems to be mostly a matter of interface design. You&#39;ll have to decide how you want to write code that interacts with your <code>Camera</code> class, then figure out a way to make your interface as close to that as possible. To me, the <code>camera.cmd.foo</code> syntax seems to have the redundant <code>cmd</code> part. I&#39;d prefer to be able to write <code>Temperature t = camera.temperature();</code> or <code>camera.setFrameRate(6);</code> or even <code>camera.frameRate = 6;</code> Exposing member variables isn&#39;t necessarily problematic as long as they are designed to safely accessed by a user who doesn&#39;t (need to) know the interaction between them."}, {"owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "reply_to_user": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 1, "creation_date": 1466005361, "post_id": 37838290, "comment_id": 63140862, "body": "Your first couple of sentences really hit home.  I&#39;m trying to make the internal workings of the program clean and easily extensible, but I&#39;m not really thinking at all about the best way for a user to interact with the API.   So far, a lot of suggestions seem to like camera.frameRate = 5;  It&#39;s a great concept, but probably confusing for other people looking at the code.  I need to think more deeply."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2911080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkw4K.jpg?s=128&g=1", "display_name": "AndreaPomatto", "link": "https://stackoverflow.com/users/2911080/andreapomatto"}, "is_accepted": false, "score": 0, "last_activity_date": 1466002024, "creation_date": 1466002024, "answer_id": 37838739, "question_id": 37838290, "link": "https://stackoverflow.com/questions/37838290/class-composition-with-public-member-objects/37838739#37838739", "title": "Class composition with public member objects", "body": "<p>You can use one or more structs to group \"settings\", and then expose a method to set them:</p>\n\n<pre><code>typedef struct settings{\n  int setting1;\n  int setting2;\n}MySettings;\n\nclass Myclass{\n private :\n   int setting1;\n   int setting2;\n\n public Myclass(MySettigs *settings)\n{\n  if(null != settings){\n     setting1=settings-&gt;setting1;\n     setting2=settings-&gt;setting2;\n  }\n}\n\npublic void ChangeSettings (MySettings *setting){\n  if(null != settings)\n  {\n     setting1=settings-&gt;setting1;\n     setting2=settings-&gt;setting2;\n  }\n}\n\npublic void TakeSettings (MySettigs *settings){\n  [copy local variables into the passed struct]\n}\n</code></pre>\n\n<p>I strongly advise to be careful when changing settings while the object is \"operational\".You can fall in an undefined state where settings are being changed while another thread is using them.</p>\n"}, {"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1466003814, "last_edit_date": 1466003814, "creation_date": 1466002372, "answer_id": 37838885, "question_id": 37838290, "link": "https://stackoverflow.com/questions/37838290/class-composition-with-public-member-objects/37838885#37838885", "title": "Class composition with public member objects", "body": "<p>In your mentioned design I don't think exposing public members through composition is a big no-no.</p>\n\n<p>When exposing public members, the big no-no is <em>unsafe</em> access to your class internals. </p>\n\n<p>An example would be allowing public access to <code>CameraValue::_maxValue</code>. A user could change that value to anything, causing all sorts of undefined behaviour.</p>\n\n<p>Were it up to me to design this I wouldn't have a <code>CameraCommands</code> member, as from the looks of it it doesn't add anything other then a level of indirection.</p>\n\n<p>I would either add all the <code>CameraAction</code> and <code>CameraValue</code> members as part of the camera class, or inherit them.</p>\n\n<p>Something like this:</p>\n\n<p><strong>Merging <code>CameraCommands</code> into <code>Camera</code>:</strong></p>\n\n<pre><code>class Camera \n{\npublic:\n  Camera();\n\n  CameraAction reset;\n  CameraQuery  temperature;\n  CameraValue  framerate;\n  CameraValue  sensitivity;\n  //... &gt;100 more of these guys\n\n  void startAcquisition();\n  void stopAcquisition();\n  void setDataBuffer(void* buffer);\n  void setOtherThing(int thing);\n};\n</code></pre>\n\n<p><strong>Inheriting <code>CameraCommands</code> into <code>Camera</code>:</strong></p>\n\n<pre><code>class Camera : public CameraCommands\n{\npublic:\n  Camera();\n\n  void startAcquisition();\n  void stopAcquisition();\n  void setDataBuffer(void* buffer);\n  void setOtherThing(int thing);\n};\n</code></pre>\n\n<p>You can even provide some operators for <code>CameraValue</code> etc so that you can set a value through assignment (<code>operator=</code>), and get a value through either implicit conversion (<code>operator T</code>) or dereferencing (<code>operator*</code>):</p>\n\n<pre><code>template&lt;typename T&gt;\nclass CameraValue\n{\npublic\n    CameraValue(SerialInterface*, std::string cmd);\n\n    CameraValue&amp; operator=(const T&amp; val)\n    {\n        _val = val;\n        std::string val_str = std::to_string(_val);\n       _ser_ifc-&gt;sendString(_cmd + \"=\" + val_str);            \n    }\n\n    const T&amp; get() const\n    {\n        return _val;\n    }\n\n    // implicit access to _val\n    operator const T&amp;() const\n    {\n        return _val;\n    }\n\n    // dereference operator to access _val\n    const T&amp; operator*() const\n    {\n        return _val;\n    }\nprivate:\n    T _val;\n    SerialInterface* _ser_ifc;\n    std::string      _cmd;\n};\n</code></pre>\n\n<p>Then use <code>CameraValue</code> in your class as follows:</p>\n\n<pre><code>using CameraFramerate = CameraValue&lt;int&gt;;\n\nCameraFramerate framerate;\n</code></pre>\n\n<p>The above techniques offer (IMO) a more composable use of <code>Camera</code>, such as the following:</p>\n\n<pre><code>Camera camera;\n\n// setting values\ncamera.framerate = 30;\ncamera.sensitivity = 95;\n\n// getting values\nint framerate =  camera.framerate; // uses operator T&amp;()\nint framerate = *camera.framerate; // uses operator*()\n</code></pre>\n\n<p>The key point here is that <code>Camera::framerate</code> etc don't allow any access that could change your camera class' internal state in an undefined and/or unsafe manner.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466006919, "post_id": 37838901, "comment_id": 63141976, "body": "I really like this concept and inheritance.  I&#39;m not sure if having includes inside of your class is common practice, but I&#39;ve never thought about it before and it would be very useful to me in other scenarios where nested classes are an eye-sore.  What is the purpose of making Camera friends with Command, Query, and Value?"}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466007088, "post_id": 37838901, "comment_id": 63142082, "body": "@Sam So that they can access <code>SerialPort</code> (or whatever you call it). You need to pass <code>Camera</code> into each <code>Command</code>, so why not store the SerialPort there for their use? Maybe only <code>Command</code> needs to be <code>friend</code>s - maybe none."}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466007210, "post_id": 37838901, "comment_id": 63142172, "body": "@Sam Note also my file naming scheme: it&#39;s obvious which main header the <code>inc</code> is for. But also note that if the parent class only needs refs or pointers to the child classes, you can leave the <code>class XXX;</code> inside the class, but actually put the <code>#include</code> elsewhere."}, {"owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466007417, "post_id": 37838901, "comment_id": 63142303, "body": "So you&#39;re saying Command will have a private member that is a Camera* pointer to this, and through that pointer (that is sent in the constructor) I will be able to access the private SerialPort?  Or is access to the Camera::port more simple / direct than that?"}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466007691, "post_id": 37838901, "comment_id": 63142500, "body": "I&#39;d use a ref (<code>&amp;</code>) instead of a pointer (<code>*</code>). Note though if that&#39;s the only reason you need a back-reference, you might think about making <code>serialPort</code> <code>private static</code> inside <code>Camera</code> - that way <code>Command</code> won&#39;t need a back-ref, it can use <code>Camera::serialPort</code> instead of <code>camera.serialPort</code>. That means only one Camera connected at a time, so I think it&#39;s best to put in the back-ref from the beginning."}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466007784, "post_id": 37838901, "comment_id": 63142557, "body": "The more I think about it, the more I think that the <code>int</code> in <code>Query</code> should be <code>private</code>. <code>Value</code> shouldn&#39;t touch it: it should only <code>Send()</code> the requested new value, then the response could update <code>Query</code>&#39;s <code>int</code>"}, {"owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466010724, "post_id": 37838901, "comment_id": 63144208, "body": "Unfortunately, in this case I need to connect up to four cameras at a single time.  I was also thinking about the static serial port for a long time until I determined it just wouldn&#39;t work in this instance.  One more question related to design (because I&#39;m new-ish).  Why would you recommend storing a reference to the camera instead of a pointer.  Would anything be different aside from the syntax of accessing the camera data?  Also, what would happen if the Command accessed itself through its Camera reference?  I feel like there&#39;s got to be some kind of practical coding violation"}, {"owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "reply_to_user": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "edited": false, "score": 0, "creation_date": 1466010896, "post_id": 37838901, "comment_id": 63144306, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114768/discussion-between-sam-wilton-and-john-burger\">continue this discussion in chat</a>."}, {"owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "reply_to_user": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "edited": false, "score": 0, "creation_date": 1466033042, "post_id": 37838901, "comment_id": 63154719, "body": "@Sam A pointer has only one drawback compared to a reference: it could be 0, so you need to check for that. A reference has only one drawback compared to a pointer: it can&#39;t be reassigned. But <code>Camera</code> holds individual <code>Command</code>s, <code>Query</code>s and <code>Value</code>s, whose existence is inside <code>Camera</code>, and don&#39;t belong to any other <code>Camera</code>. So a reference is perfect: it doesn&#39;t need to be reassigned, and its referent cant just disappear - not before the <code>Command</code> does anyway!"}], "tags": [], "owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "is_accepted": true, "score": 1, "last_activity_date": 1466005663, "last_edit_date": 1466005663, "creation_date": 1466002407, "answer_id": 37838901, "question_id": 37838290, "link": "https://stackoverflow.com/questions/37838290/class-composition-with-public-member-objects/37838901#37838901", "title": "Class composition with public member objects", "body": "<p>You've basically described an interesting hierarchy:</p>\n\n<p><code>Command</code> -> <code>Query</code> -> <code>Value</code>.</p>\n\n<ul>\n<li>A <code>Command</code> holds the string that is the text of the command;\nIt can also offer a <code>protected</code> <code>Send()</code> method for its children to call.</li>\n<li>A <code>Query</code> also holds a (<code>protected</code>) <code>int</code> variable (or whatever) that you can <code>get()</code> and/or <code>operator int()</code> immediately, or <code>query()</code> from the camera;</li>\n<li>A <code>Value</code> adds the <code>set()</code> and/or <code>operator =(int)</code> command to <code>Query</code>.</li>\n</ul>\n\n<p>The constructor (in particular) of <code>Value</code> can have <code>min</code> and <code>max</code> as you describe.</p>\n\n<p>The <code>Camera</code> object can then have a number of <code>public</code> members:</p>\n\n<pre><code>class Camera {\n\nprivate: // Classes that no-one else can have!\n\n    class Command; friend Command;\n#include \"Camera.Command.inc\"\n\n    class Query; friend Query;\n#include \"Camera.Query.inc\"\n\n    class Value; friend Value;\n#include \"Camera.Value.inc\"\n\npublic: // Variables using above classes\n\n    Command reset;\n    Command open;  // Maybe make this one private, for friends?\n    Command close; // Ditto?\n\n    Query temperature;\n    Query sernum;\n    Query maxFrameRate;\n\n    Value frameRate;\n\nprivate: // Variables\n\n    SerialPort port; // Allow Command and co. access to this\n\n}; // Camera\n</code></pre>\n\n<p>By organising it like this, then:</p>\n\n<ul>\n<li>The user of the variables can't make impossible requests - there is no method to do so;</li>\n<li>The <code>query()</code> and <code>set()</code> methods hide the mechanism to interface with the physical camera.</li>\n</ul>\n\n<p>You'll note I've added <code>#include \"Camera.XXX.inc\"</code> in the middle of the <code>Camera</code> class. Note:</p>\n\n<ol>\n<li>It doesn't clutter the Camera class with the definitions of those sub-Classes - but the C++ compiler needs them before you can use them, so you need to have them there. And if you want to know what they do, just open the file!</li>\n<li>I gave them the <code>.inc</code> extension since they're \"included\" in the <code>.h</code> file: they don't stand alone as their own header file.</li>\n</ol>\n"}], "owner": {"reputation": 95, "user_id": 6383812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G0HH-nrbL7Y/AAAAAAAAAAI/AAAAAAAAAB8/pi3dD5ZY1_s/photo.jpg?sz=128", "display_name": "Sam Wilton", "link": "https://stackoverflow.com/users/6383812/sam-wilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 37838901, "answer_count": 3, "score": 2, "last_activity_date": 1466005663, "creation_date": 1466000850, "question_id": 37838290, "link": "https://stackoverflow.com/questions/37838290/class-composition-with-public-member-objects", "title": "Class composition with public member objects", "body": "<p>I am trying to figure out the best way to design my program features.</p>\n\n<p>A major component of the program is a Camera class.  This Camera object represents the program user interface to a real camera, which interfaces to a computer through a frame grabber card.  The camera class can link to a frame grabber, start and stop acquisition, and also mutate/access <em>many</em> different camera properties.  When I say many, I'm talking about over 250 unique commands.  Each unique command is issued to the camera by sending a serial string through the framegrabber to the physical camera.  Each command can be thought of as one of three types.  An action, a query, and a value.</p>\n\n<p>An action command is something that doesn't require an equals sign, for example \"reset\", \"open\", \"close\"</p>\n\n<p>A query is something that you can get, but not set, that is usually associated with a value. For example \"temperature=?\", \"sernum=?\", \"maxframerate=?\" commands would cause the camera to send back information.  These values cannot be mutated so \"temperature=20\" would result in an error.</p>\n\n<p>A value is something you can get and set that is usually associated with a value.  For example \"framerate=30\" and \"framerate=?\" are two unique commands, but I consider the base string \"framerate\" to be a value command type because it can be both mutated and accessed.</p>\n\n<p>The 250 unique commands can be reduced to ~100 CameraActions, CameraQuerys, and CameraValues. Instead of having 250 methods in my Camera class, I had an idea to compose command objects instead of individual setters, getters, and actions.  The command string can be provided in the constructor, or reset with a setter. Then I could compose a CameraCommands object that holds all of the available commands, and provide that as a public member to my Camera.</p>\n\n<pre><code>//CameraAction.h =============================================\nclass CameraAction {\npublic:\n  CameraAction(std::string commandString, SerialInterface* serialInterface);\n  void operator()() { _serialInterface-&gt;sendString(_commandString); }\n\nprivate:\n  SerialInterface* _serialInterface;\n  std::string      _commandString;\n\n}; \n\n\n//CameraValue.h =====================================================\nclass CameraValue {\n\npublic:\n\n  CameraValue(std::string commandString, double min, double max, SerialInterface* serialInterface);\n\n  void set(double value)\n  {\n    if(value &gt; _maxValue) { throw std::runtime_error(\"value too high\"); }\n    if(value &lt; _minValue) { throw std::runtime_error(\"value too low\"); }\n    std::string valueString = std::to_string(value);\n    _serialInterface-&gt;sendString(_commandString + \"=\" + valueString);\n  }\n\n  double get()\n  {\n    std::string valueString = _serialInterface-&gt;sendString(_commandString + \"=?\");\n    return atof(valueString.c_str());\n  }\n\nprivate:\n\n  SerialInterface* _serialInterface;\n  std::string      _commandString;\n  double           _minValue;\n  double           _maxValue;\n\n};  \n\n\n//CameraCommands.h ===================================================\nclass CameraCommands {\n\npublic:\n  CameraCommands();\n  CameraAction reset;\n  CameraQuery  temperature;\n  CameraValue  framerate;\n  CameraValue  sensitivity;\n  //... &gt;100 more of these guys\n\n};\n\n\n//Camera.h ===========================================================\nclass Camera {\npublic:\n  Camera();\n  CameraCommands cmd;\n  void startAcquisition();\n  void stopAcquisition();\n  void setDataBuffer(void* buffer);\n  void setOtherThing(int thing);\n};\n</code></pre>\n\n<p>so that the user could do something like:</p>\n\n<pre><code>Camera myCamera;\nmyCamera.cmd.reset();\nmyCamera.cmd.framerate.set(30);\nmyCamera.cmd.sensitivity.set(95);\ndouble temperature = myCamera.cmd.temperature.get();\nmyCamera.startAcquisition();\n</code></pre>\n\n<p>etc...</p>\n\n<p>The main problem here is that I'm exposing public member variables, which is supposed to be a massive no-no.  Is my current object design logical, or should I simply implement 250 setters and getters and 100 more setters and getters to mutate the minimum and maximum settable values. </p>\n\n<p>This seems kludgey to me because there are also many setters/getters associated with the Camera object that are unrelated to the user commands.  It's nice for the user interface to provide the scope of the method (cmd) for the user to know whether something is being mutated physically in the camera, or just being mutated in the programmatic object (other methods).  Is there any better way to design my program?</p>\n"}, {"tags": ["c++", "c++11", "stl", "containers"], "answers": [{"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 1, "creation_date": 1466005840, "post_id": 37838556, "comment_id": 63141213, "body": "Specifically, you&#39;ll have to construct the comparison object that you want to use and pass that to the set constructor."}, {"owner": {"reputation": 119, "user_id": 2291688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa097da7c4b7d334d7a4048955ba7573?s=128&d=identicon&r=PG", "display_name": "BitKnight", "link": "https://stackoverflow.com/users/2291688/bitknight"}, "edited": false, "score": 0, "creation_date": 1466053798, "post_id": 37838556, "comment_id": 63159693, "body": "Thank you so much Mr. Kuhl and Mr. Clow. Acc. to me also its the obvious solution which I&#39;ve tried before putting this question and, Believe me, It was giving error. After your answer I became confident the there is some other problem which I found out this morning. Actually the syntax of my comparator constructor is, <b>Comparator(CompareType pCmpType)</b>, where CompareType is enum. Now when I create set as <b>std::set&lt;MyObj, Comparator&gt; myObjSet(Comparator(kCompareType_area));</b>, and while inserting, <b>myObjSet.insert(123)</b> it gives error as, <i>left of &#39;.insert&#39; must have class/struct/union</i>"}, {"owner": {"reputation": 119, "user_id": 2291688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa097da7c4b7d334d7a4048955ba7573?s=128&d=identicon&r=PG", "display_name": "BitKnight", "link": "https://stackoverflow.com/users/2291688/bitknight"}, "edited": false, "score": 0, "creation_date": 1466054268, "post_id": 37838556, "comment_id": 63159855, "body": "But when I create set object like, <b>std::set&lt;MyObj, Comparator&gt; myObjSet(Comparator((CompareType)kCompareType_area))</b>, it compiles just fine. And now I am easily passing my set as reference also, So the solution is to explicitly provide the datatype of enum while declearing the set with comparator object. Thanks for your help :)"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 119, "user_id": 2291688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa097da7c4b7d334d7a4048955ba7573?s=128&d=identicon&r=PG", "display_name": "BitKnight", "link": "https://stackoverflow.com/users/2291688/bitknight"}, "edited": false, "score": 0, "creation_date": 1466056774, "post_id": 37838556, "comment_id": 63160821, "body": "@BitKnight: you should have posted the complete and <i>actual</i> code! The issue you describe is the <a href=\"https://en.m.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">most vexing parse</a>: when the constructor argument happens to be an identifier the statement meant to be an object definition can also be interpreted as a function declaration and the compiler prefers the latter. That is not the case when the argument is an integer literal as you posted in your question! The usual fix is using extra parenthesis or, with C++11 or later curlies."}, {"owner": {"reputation": 119, "user_id": 2291688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa097da7c4b7d334d7a4048955ba7573?s=128&d=identicon&r=PG", "display_name": "BitKnight", "link": "https://stackoverflow.com/users/2291688/bitknight"}, "edited": false, "score": 0, "creation_date": 1466061282, "post_id": 37838556, "comment_id": 63163306, "body": "Well, that explains a lot. I didn&#39;t know this <i>Most Vexing Parse</i> concept. Thanks a lot for enlightening me on this. It never occurred to me that this could be the problem, may be that is why I posted the simplest form of my problem. I&#39;ll surely post complete and actual code from next time. Thanks again Mr. Dietmar, appriciate your help :)"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 6, "last_activity_date": 1466005907, "last_edit_date": 1466005907, "creation_date": 1466001548, "answer_id": 37838556, "question_id": 37838194, "link": "https://stackoverflow.com/questions/37838194/how-to-declare-stl-set-with-comparison-object-of-class-with-parametrized-constru/37838556#37838556", "title": "How to declare STL Set with comparison Object of class with parametrized constructor", "body": "<p>If you need a parameter in your comparator, you'll need to use a function object. Something along the lines of your class. I think you'll need to make the function call operator a <code>const</code> member. You'd use it something like this:</p>\n\n<pre><code>std::set&lt;MyObj, Comparator&gt; myObjSet(Comparator(100));\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2291688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa097da7c4b7d334d7a4048955ba7573?s=128&d=identicon&r=PG", "display_name": "BitKnight", "link": "https://stackoverflow.com/users/2291688/bitknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 37838556, "answer_count": 1, "score": 1, "last_activity_date": 1466005907, "creation_date": 1466000606, "last_edit_date": 1466002133, "question_id": 37838194, "link": "https://stackoverflow.com/questions/37838194/how-to-declare-stl-set-with-comparison-object-of-class-with-parametrized-constru", "title": "How to declare STL Set with comparison Object of class with parametrized constructor", "body": "<p>When using the set, I want to pass my own comparison function which also takes a parameter. How to do that and how to pass that set as reference to other functions?</p>\n\n<p>For example, I've Comparator Class (with <code>operator()</code> overloaded and private default constructor) which takes an argument in constructor which is used while doing comparison. which works fine with sort algorithms like,</p>\n\n<pre><code>sort(myVector.begin(), myVector.end(), Comparator(10));\n</code></pre>\n\n<p>but how do I declare a set with this comparator object with parameter.</p>\n\n<p>I've tried these syntax's,</p>\n\n<pre><code>std::set&lt; MyObj, bool(*)(const MyObj&amp;, const MyObj&amp;)&gt;   myObjSet(Compatrator(100));\n</code></pre>\n\n<p>Now when I insert as, <code>myObjSet.insert(MyObj(0))</code>, it gives error as <code>Error: \"left of '.insert' must have class/struct/union\"</code></p>\n\n<p>Now when I declare set as,</p>\n\n<pre><code>std::set&lt; MyObj, Comparator(int)&gt; myObjSet;\n</code></pre>\n\n<p>it gives error as \"function returning function\".</p>\n\n<hr>\n\n<pre><code>class Comparator\n{\n    int m_cmpParameter;\n    Comparator();\n\npublic:\n\n    ~Comparator();\n    Comparator(int pCmpParam):m_cmpParameter(pCmpParam){}\n\n    bool operator()(const MyObj&amp; pObjA, const MyObj&amp; pObjB);\n};\n</code></pre>\n\n<hr>\n\n<p>In my project I've this one class for all comparisons required by STL containers. How do I use this Comparator class with Set with passing a parameter to comparison object?\nAnd How do I pass this set as reference to other functions, more specifically, what should be the function signature?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "qt", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 759626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d0df065685e278535235dfedcaaef?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/759626/tom"}, "edited": false, "score": 0, "creation_date": 1466003940, "post_id": 37839421, "comment_id": 63139815, "body": "Thank you Frik!!  That did the trick.  I agree the C++ api is much nicer.  I would use it if I didn&#39;t need mono-spaced font."}], "tags": [], "owner": {"reputation": 809, "user_id": 3926689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47953c3b9cf633215d39416911b896bc?s=128&d=identicon&r=PG&f=1", "display_name": "Frik", "link": "https://stackoverflow.com/users/3926689/frik"}, "is_accepted": true, "score": 0, "last_activity_date": 1466003770, "creation_date": 1466003770, "answer_id": 37839421, "question_id": 37838070, "link": "https://stackoverflow.com/questions/37838070/opencv-text-does-not-display-when-using-the-qt-library-with-cvfontqt-and-cvaddt/37839421#37839421", "title": "OpenCV: Text does not display when using the Qt library with cvFontQt and cvAddText on Windows 10 in VS2015 x64 build", "body": "<p>Any specific reason why you are using floating point images? If not, try adjusting the image initialization to:</p>\n\n<pre><code>IplImage *img = cvCreateImage(cvSize(600, 300), IPL_DEPTH_8U, 3);\n</code></pre>\n\n<p>The use of a 3-channel 8-bit image seems to fix the problem. </p>\n\n<p>Just a note - when assigning color to floating point images the value should be in the range [0, 1], not [0, 255]. Also, the C++ api is much nicer!</p>\n"}], "owner": {"reputation": 3, "user_id": 759626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d0df065685e278535235dfedcaaef?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/759626/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 37839421, "answer_count": 1, "score": 0, "last_activity_date": 1466003770, "creation_date": 1466000273, "last_edit_date": 1495542698, "question_id": 37838070, "link": "https://stackoverflow.com/questions/37838070/opencv-text-does-not-display-when-using-the-qt-library-with-cvfontqt-and-cvaddt", "title": "OpenCV: Text does not display when using the Qt library with cvFontQt and cvAddText on Windows 10 in VS2015 x64 build", "body": "<p>I am am trying to use OpenCV to create an image from text.  The image may or may not have an overlay that needs to be merged with it.  The font of the Text needs to be needs to be different than the HERSHEY text that comes with the C++ interface of OpenCV.  I saw in <a href=\"https://stackoverflow.com/questions/11917124/opencv-how-to-use-other-font-than-hershey-with-cvputtext-like-arial/14362413#14362413\" title=\"this post\">this post</a> and others that it can be done using the cvFontQt and cvAddText.</p>\n\n<p>I am using OpenCV 2.4.13 and Qt 5.6.  In the sample code below I can output the first and third lines using <strong>cvPutText</strong> with <strong>cvFont</strong> and HERSHEY however the second line using <strong>cvAddText</strong> with <strong>cvFontQt</strong> does not display.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"opencv2\\core\\core_c.h\"        \n#include \"opencv2\\highgui\\highgui_c.h\"  \n\nint main()\n{\n    // Create a window for a container to hold the image\n    cvNamedWindow(\"cvtest\", CV_WINDOW_AUTOSIZE);\n\n    IplImage *img = cvCreateImage(cvSize(600, 300), IPL_DEPTH_64F, 4);\n\n    // Set the image background to white\n    cvSet(img, cvScalar(255, 255, 255));\n\n    CvFont font;\n\n    cvInitFont(&amp;font, CV_FONT_HERSHEY_SIMPLEX, 0.5, 0.5);\n    cvPutText(img, \"cvInitFont; cvPutText: First line.\", cvPoint(4, 30), &amp;font, cvScalar(255));\n\n    CvFont fontqt = cvFontQt(\"Courier New\", -1, cvScalar(0,0,255), CV_FONT_NORMAL, CV_STYLE_NORMAL, 0);\n    cvAddText(img, \"cvFontQV; cvAddText:   Second line.\", cvPoint(4, 60), &amp;fontqt);\n\n    cvPutText(img, \"cvInitFont; cvPutText: Third line.\", cvPoint(4, 90), &amp;font, cvScalar(255));\n\n    cvShowImage(\"cvtest\", img);\n\n    cvWaitKey(0);\n\n    cvSaveImage(\"C:\\\\OpenCvTest64F.jpg\", img);\n\n    // Cleanup\n    cvDestroyAllWindows();\n    cvReleaseImage(&amp;img);\n\n    return 0;\n}\n</code></pre>\n\n<p>The resulting image (\"C:\\OpenCvTest64F.jpg\"):</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z3WEv.jpg\" rel=\"nofollow noreferrer\">Output Image</a></p>\n\n<p>Am I using cvFontQt or cvAddText incorrectly?  Any thoughts on why it does not show up in the image?</p>\n"}, {"tags": ["c++", "qt", "qt-designer"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3347155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XT6qA.jpg?s=128&g=1", "display_name": "kabinja", "link": "https://stackoverflow.com/users/3347155/kabinja"}, "edited": false, "score": 0, "creation_date": 1466002120, "post_id": 37838434, "comment_id": 63138492, "body": "Thanks for the answer. I thought of it as well, but as you said, you will need to maintain two different versions of the same file. I guess there is no easy way to achieve that. I will check out your idea on XML preprocessing, but I fear it might be a lot of work for what we are trying to do."}], "tags": [], "owner": {"reputation": 977, "user_id": 6385043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7c3064c86e6a7e521442a3a9bb7303d?s=128&d=identicon&r=PG&f=1", "display_name": "maxik", "link": "https://stackoverflow.com/users/6385043/maxik"}, "is_accepted": false, "score": 0, "last_activity_date": 1466001645, "last_edit_date": 1466001645, "creation_date": 1466001222, "answer_id": 37838434, "question_id": 37838034, "link": "https://stackoverflow.com/questions/37838034/using-same-qt-ui-files-in-differnt-qt-version/37838434#37838434", "title": "using same qt .ui files in differnt qt version", "body": "<p>When you build using <em>qmake</em> you might consider the following snippet</p>\n\n<pre><code>greatherThan(QT_MAJOR_VERSION, 4) {\n    FORMS += # qt 5 forms goes here\n    INCLUDEPATH += # path to qt 5 forms\n} else {\n    FORMS += # qt 4 forms goes here\n    INCLUDEPATH += # path to qt 4 forms\n}\n</code></pre>\n\n<p>Then, considered the files are called the same and placed in different, version specific directories, you should easily use them in your source files.</p>\n\n<p>Querying the value of <strong>QT_VERSION</strong> might enable you to react on minor version changes. Hence you should use <em>contains(...)</em> and some proper regular expression.</p>\n\n<hr>\n\n<p>I scrubbed my head a lot but could not come up with a solution where you have one ui file which changes with the used Qt version. Maybe you could do some XML preprocessing in your toolchain...</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1466014083, "creation_date": 1466014083, "answer_id": 37842734, "question_id": 37838034, "link": "https://stackoverflow.com/questions/37838034/using-same-qt-ui-files-in-differnt-qt-version/37842734#37842734", "title": "using same qt .ui files in differnt qt version", "body": "<p>The <code>.ui</code> file is just an xml file. It is converted to code by <code>uic</code>. The generated code is specific to a build with a particular version of Qt, you cannot reuse the same build directory and thus uic output with multiple Qt installations. Uic output should not be in your source code repository.</p>\n\n<p>The error you get indicates that you're using output from Qt 5.6's uic with Qt 4. This is not ever supposed to work.</p>\n\n<p>Instead, you should do a clean build of your code using Qt 4, and there, most likely, uic might either ignore, warn or abort on unknown elements/attributes. If it does abort, it's easy enough to modify uic not to do that (a couple lines have to be changed).</p>\n\n<p>If you're using Qt professionally, you're already building your own copy that you maintain, so patching uic should be a trivial thing to add to your process.</p>\n"}], "owner": {"reputation": 85, "user_id": 3347155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XT6qA.jpg?s=128&g=1", "display_name": "kabinja", "link": "https://stackoverflow.com/users/3347155/kabinja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 37842734, "answer_count": 2, "score": 1, "last_activity_date": 1466014083, "creation_date": 1466000176, "question_id": 37838034, "link": "https://stackoverflow.com/questions/37838034/using-same-qt-ui-files-in-differnt-qt-version", "title": "using same qt .ui files in differnt qt version", "body": "<p>For historical reasons, we need to keep our software compatible with Qt 4.8. The current branch is built on Qt 5.2. </p>\n\n<p>Recently I have been trying to exploit the new features of some of the QWidget, like QAbstractScrollArea::setSizeAdjustPolicy. Unfortunately, when I do that, I cannot compile in Qt 4.8 and Visual Studio produce the following error</p>\n\n<blockquote>\n  <p>error C2039: 'AdjustToContents' : is not a member of 'QAbstractScrollArea'</p>\n</blockquote>\n\n<p>Usually, I would use a precompiler directive to adapt the code for each version. In this case however, I cannot do that since qt designer is generating a .ui file which generates code on the fly.</p>\n\n<p>Is there a way to let Qt know that I want to exclude some nodes of the .ui file when compiling?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "edited": false, "score": 0, "creation_date": 1466000254, "post_id": 37837972, "comment_id": 63137048, "body": "I don&#39;t think this is a particular good idea."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1466000867, "post_id": 37837972, "comment_id": 63137508, "body": "If you have access to C++11, you could try something like this: <a href=\"http://stackoverflow.com/questions/12338695/c11-styled-callbacks\">stackoverflow.com/questions/12338695/c11-styled-callbacks</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1466006271, "last_edit_date": 1466006271, "creation_date": 1466001501, "answer_id": 37838541, "question_id": 37837972, "link": "https://stackoverflow.com/questions/37837972/can-i-create-in-class-function-types/37838541#37838541", "title": "Can i create in-class function types?", "body": "<p>For the code:</p>\n\n<pre><code>class Server {\n    void handler1(Message msg); // This declares a method named handler one which takes a Message and returns void\n    void(Server::*handler)(Message); // This declares a member variable named handler of the type Server method pointer to a method that takes a Message and returns a void\n};\n</code></pre>\n\n<p><code>handler</code> can be reassigned with any <code>Server</code> method which takes a <code>Message</code> and returns <code>void</code>. But it must be initialized before it is first used; something like: <code>handler = handler1</code> at this point a call to <code>handler</code> would be a call to <code>handler1</code>. But <code>handler</code> could then be reassigned at will, for example if you did: <code>handler = handler2</code> at this point a call to <code>handler</code> would be a call to <code>handler2</code>.</p>\n\n<p>I wasn't sure from your question if you understood, but <code>handler</code> never defines a method; only a pointer to one.</p>\n\n<p>Given this definition of <code>Server</code>:</p>\n\n<pre><code>class Server {\n    void Handler1(int param) { cout &lt;&lt; param + 1 &lt;&lt; endl; }\n    void Handler2(int param) { cout &lt;&lt; (param &lt;&lt; 1) &lt;&lt; endl; }\n    void Handler3(int param) { cout &lt;&lt; (param != 0 ? \"true\\n\" : \"false\\n\"); }\n    void Handler4(int param) { cout &lt;&lt; static_cast&lt;char&gt;(param + 'A') &lt;&lt; endl; }\npublic:\n    function&lt;void(Server, int)&gt; handler_;\n    void next() {\n        if (!handler_ || *handler_.target&lt;void (Server::*)(int)&gt;() == &amp;Server::Handler4) {\n            handler_ = &amp;Server::Handler1;\n        } else if(*handler_.target&lt;void (Server::*)(int)&gt;() == &amp;Server::Handler1) {\n            handler_ = &amp;Server::Handler2;\n        } else if (*handler_.target&lt;void (Server::*)(int)&gt;() == &amp;Server::Handler2) {\n            handler_ = &amp;Server::Handler3;\n        } else {\n            handler_ = &amp;Server::Handler4;\n        }\n    }\n};\n</code></pre>\n\n<p>You could do the following:</p>\n\n<pre><code>Server foo;\n\nfor (auto i = 'A'; i &lt;= 'Z'; ++i) {\n    foo.next();\n    foo.handler_(foo, i);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/422b3750f986e32c\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 25, "user_id": 4258947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/447faf1203f1b3712249bd721211630c?s=128&d=identicon&r=PG&f=1", "display_name": "iYehuda", "link": "https://stackoverflow.com/users/4258947/iyehuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466006271, "creation_date": 1465999997, "question_id": 37837972, "link": "https://stackoverflow.com/questions/37837972/can-i-create-in-class-function-types", "title": "Can i create in-class function types?", "body": "<p>I am working on a little project containing simple server which listens to messages.</p>\n\n<p>Assuming we have the following classes:</p>\n\n<pre><code>class Message;\n\nclass Server\n{\n    void handler1(Message msg);\n    void handler2(Message msg);\n    .\n    .\n    .\n    void handler19(Message msg);\n};\n</code></pre>\n\n<p>Can i create a new function type of the class <code>Server</code> that returns <code>void</code> and gets a single <code>Message</code> variable called msg like this:</p>\n\n<pre><code>typedef void(Server::*MessageHandler)(Message msg);\n</code></pre>\n\n<p>So the class declaration would be:</p>\n\n<pre><code>class Server\n{\n    MessageHandler handler1;\n    .\n    .\n    .\n    MessageHandler handler19;\n}\n</code></pre>\n\n<p>A thing as mentioned would come handy with sqlite3 callback functions (where the function declaration is not the cleanest).</p>\n\n<p>If it is possible, how can i implement such function?</p>\n\n<p>If this is not possible, is there any similar way of making the code more simple (like C# delegates)?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["php", "c++", "exec"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466005259, "post_id": 37837673, "comment_id": 63140783, "body": "In order for the C++ program to get input from pipes, the C++ program needs to input from <code>std::cin</code>."}, {"owner": {"reputation": 415, "user_id": 2942945, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bc1cc84544b8dcbb2b5a89d82d294ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user2942945", "link": "https://stackoverflow.com/users/2942945/user2942945"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466005673, "post_id": 37837673, "comment_id": 63141089, "body": "@ThomasMatthews This is already done. Its working when I call with pipe directly via the command line. Its juste not working with exec() with large xml. If I test with a small xml, its working"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1466014160, "post_id": 37837673, "comment_id": 63146025, "body": "Have you tried creating a named pipe (externally), then starting the c++ to read it and write to it from php?"}], "owner": {"reputation": 415, "user_id": 2942945, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bc1cc84544b8dcbb2b5a89d82d294ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user2942945", "link": "https://stackoverflow.com/users/2942945/user2942945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466000316, "creation_date": 1465999220, "last_edit_date": 1495542698, "question_id": 37837673, "link": "https://stackoverflow.com/questions/37837673/php-pipe-huge-xml-to-c", "title": "PHP pipe huge xml to c++", "body": "<p>At the moment I write my xml data into a file and I pass the file path as parameter to the c++ program</p>\n\n<pre><code>$json = exec(\"/home/otf/a.out \".$file_path, $out);\n</code></pre>\n\n<p>This is working fine.</p>\n\n<p>But instead of writing the xml into a file than pass it to the c++ program</p>\n\n<p>I want to pipe directly the xml to the c++ program</p>\n\n<pre><code>$cmd = \"echo '\".$xml.\"' | /home/otf/a.out\";\n$json = exec($cmd);\n</code></pre>\n\n<p>this is not working</p>\n\n<p>but If I log the command $cmd and I execute it directly via the command line its working</p>\n\n<p>Note : the xml is ~400kB</p>\n\n<p>We are planning to call this program ~6millions time a day \nand I am a little scared of this answer : <a href=\"https://stackoverflow.com/a/10113714/2942945\">https://stackoverflow.com/a/10113714/2942945</a></p>\n\n<p>EDIT :</p>\n\n<p>If I run this command : </p>\n\n<pre><code>getconf ARG_MAX\n</code></pre>\n\n<p>I see the limit of the command line is 2097152 so, is there a limit to exec() ?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465999377, "post_id": 37837614, "comment_id": 63136359, "body": "Did you even listen to the leacture your professor should&#39;ve given you? Looks like you did not, so now you need to read a book on C++."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466000064, "post_id": 37837614, "comment_id": 63136892, "body": "@SergeyA Perhaps you overestimate them professors. Or maybe it&#39;s just me with all the bad experience..."}], "answers": [{"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": true, "score": 4, "last_activity_date": 1465999251, "creation_date": 1465999251, "answer_id": 37837684, "question_id": 37837614, "link": "https://stackoverflow.com/questions/37837614/passing-array-off-as-reference-in-c-without-using-pointer/37837684#37837684", "title": "Passing array off as reference in c++ without using pointer", "body": "<p><code>getPlayerInfo()</code> does not accept an array, it accepts a reference to a single <code>Player</code> object.</p>\n\n<p>You need to call <code>getPlayerInfo()</code> for each player in your array. Move your loop outside of <code>getPlayerInfo()</code> and into <code>main()</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1465999614, "creation_date": 1465999614, "answer_id": 37837827, "question_id": 37837614, "link": "https://stackoverflow.com/questions/37837614/passing-array-off-as-reference-in-c-without-using-pointer/37837827#37837827", "title": "Passing array off as reference in c++ without using pointer", "body": "<p>You've misunderstood the intent of these functions.</p>\n\n<p>Guessing from the information you've provided, <code>getPlayerInfo</code> is intended to get the information of an <em>individual</em> player, and <code>showPlayerInfo</code> is intended to show the information of an <em>individual</em> player.</p>\n\n<p>You're trying to use these functions to do something they aren't intended to do, so it's a good thing that you are having trouble figuring out how to call and how to implement them.</p>\n\n<p>Consider this experience as a object lesson in requirement gathering.</p>\n"}], "owner": {"reputation": 3, "user_id": 6304607, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154890845779741/picture?type=large", "display_name": "Jambvant Ramoutar", "link": "https://stackoverflow.com/users/6304607/jambvant-ramoutar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37837684, "answer_count": 2, "score": 0, "last_activity_date": 1465999614, "creation_date": 1465999087, "question_id": 37837614, "link": "https://stackoverflow.com/questions/37837614/passing-array-off-as-reference-in-c-without-using-pointer", "title": "Passing array off as reference in c++ without using pointer", "body": "<p>I have a quick question regarding an assignment I have to complete for C++. The teacher has required that I include the functions below:</p>\n\n<pre><code>void getPlayerInfo(Player &amp;);\nvoid showInfo(Player);\nint getTotalPoints(Player [], int);\n</code></pre>\n\n<p>But I'm having trouble working on the first function....I'm not sure if I'm calling the array of structures properly. Can someone look it over and see what I'm doing wrong? I fiddled with it a bit and I'm able to call the array and pass off a pointer to the array but the teacher requested the \"&amp;\" symbol be there so there must be another method I'm unaware of. Please help! Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// Structure to hold information about a player\nstruct Player\n{\n    string name;        // to hold the players name\n    int number;         // to hold players number\n    int points;         // to hold the points scored by the player\n};\n\n// Function prototypes\nvoid getPlayerInfo(Player &amp;); // function to get the players information       from the user\nvoid showInfo(Player);    // function to show the table\n\nint main()\n{\n    const int numPlayers = 12;  // Constant to hold the number of players\n    Player team[numPlayers];    // array to hold 12 structures\n\n                            // Gather information about all 12 players\n    getPlayerInfo(team);\n\n    showInfo(team);\n\n\n    return 0;\n}\n\n// Function to get the players info\nvoid getPlayerInfo(Player&amp; team)\n{\n   for (int count = 0; count &lt; 12; count++)\n{\n    cout &lt;&lt; \"PLAYER #\" &lt;&lt; (count + 1) &lt;&lt; endl;\n    cout &lt;&lt; \"----------\" &lt;&lt; endl;\n    cout &lt;&lt; \"Player name: \";\n    cin.ignore();\n    getline(cin, team[count].name);\n    cout &lt;&lt; \"Player's number: \";\n    cin &gt;&gt; team[count].number;\n    cout &lt;&lt; \"Points scored: \";\n    cin &gt;&gt; team[count].points;\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "while-loop", "infinite-loop"], "comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 6, "creation_date": 1465998712, "post_id": 37837434, "comment_id": 63135837, "body": "Why won&#39;t it be infinite?  <code>while(true)</code> makes it infinite."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 4, "creation_date": 1465998863, "post_id": 37837434, "comment_id": 63135954, "body": "@BatCoder please read the code careful. It&#39;s <code>while((true))</code> This is Super infinite."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465999124, "post_id": 37837434, "comment_id": 63136181, "body": "<code>fprintf(stdout, &quot;What would you like? (Press 6 for assistance): &quot;); std::cin &gt;&gt; userChoice;</code> is one of the most strange code I&#39;ve ever seen."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1465999214, "post_id": 37837434, "comment_id": 63136227, "body": "in the else statement you should <code>clear</code> and <code>getline</code> to clean <code>std::cin</code> for further input - better yet, you should accept input using <code>getline</code> and then parse that input, this also eats multiple space-separated inputs, allows outputting of parser error messages and would leave <code>std::cin</code> in working order automatically"}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466000223, "post_id": 37837434, "comment_id": 63137023, "body": "@SergeyA, Sorry kind of figuring it out as i go..."}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1466000242, "post_id": 37837434, "comment_id": 63137032, "body": "@BeyelerStudios, Thank you for the info :)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466001476, "post_id": 37837434, "comment_id": 63138005, "body": "You should pair <code>std::cout</code> with <code>std::cin</code> and <code>fprintf</code> with <code>scanf</code>.  Don&#39;t cross the streams."}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466001898, "post_id": 37837434, "comment_id": 63138341, "body": "@ThomasMatthews , assuming fscanf?, but what is the reasoning behind not crossing them (other than the not crossing streams joke) :P."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466005153, "post_id": 37837434, "comment_id": 63140712, "body": "Synchronization between input and output.  Also, console attributes - there may be differences in the console attributes between the two."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1465999283, "post_id": 37837573, "comment_id": 63136283, "body": "Why did you put actual answer as the last bullet point? I mean, your bullet points are OK, but I&#39;d rather put the answer first."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1465999611, "post_id": 37837573, "comment_id": 63136548, "body": "@SergeyA 1-4 are as introduction :)"}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "edited": false, "score": 0, "creation_date": 1465999766, "post_id": 37837573, "comment_id": 63136651, "body": "Thank you for the answer and input; - The if&#39;s instead of switch statements are part of the &quot;Learning&quot;.  Im brand new, the &quot;beginners challenge&quot; wanted it in if&#39;s, then change it to use a switch. - the parentheses, Code::Blocks was throwing compiler warnings so i added them... - using the different printf/scanf etc makes sense.  Maybe more specifically i should ask;  why is it that when i input a &quot;6&quot;, it properly breaks and returns to the top of the loop but when i input an &quot;a&quot; it repeatedly prints out the else statement as fast as possible"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1466000341, "post_id": 37837573, "comment_id": 63137107, "body": "As suggested, do not mix printf/cin. This makes the std library try to sync C I/O and C++ I(O, which can harm performance.I suggest using only cin/cout to get type safety. Sprintf and friends is another matter, those are OK. (snprintf is better than sprintf though)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1466001092, "post_id": 37837573, "comment_id": 63137695, "body": "@Erik: While I agree, the library will sync them whether you use <code>printf</code> or not. (however, you can fix this with <code>ios_base::sync_with_stdio(false);</code>"}], "tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 4, "last_activity_date": 1465998957, "creation_date": 1465998957, "answer_id": 37837573, "question_id": 37837434, "link": "https://stackoverflow.com/questions/37837434/char-type-cause-loop-explosion/37837573#37837573", "title": "char type cause loop explosion", "body": "<ol>\n<li><p>When you work with <code>*printf</code> it is better to combine with <code>scanf( \"%d\", &amp;userChoice )</code> instead of <code>cin</code>;</p></li>\n<li><p>Use <code>printf( &lt;format&gt;, &lt;arg )</code> instead of <code>fprintf( stdout, ...</code> - it is the same;</p></li>\n<li><p>There are many unnecessary parentheses: <code>while ((true))</code>, <code>if ((userChoice == x))</code>;</p></li>\n<li><p>For more readable syntax use <code>switch - case</code> instead of all these <code>if</code>-s;</p></li>\n<li><p>The infinite loop seems as expected with <code>while ( true )</code> and without <code>break</code> nor <code>return</code>.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1466001365, "post_id": 37838358, "comment_id": 63137916, "body": "I lament the fact that so many introductions to C and C++ I/O first teach people to do I/O without error checks. :("}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "edited": false, "score": 0, "creation_date": 1466001441, "post_id": 37838358, "comment_id": 63137987, "body": "Would have a resource for &quot;learning error checking&quot;, All i was aware of where compiler errors/warnings...  Marking as answer for &quot;Long answer since userChoice is of type int: std::cin &gt;&gt; userChoice; fails when it tries to parse a. It does nothing to the value of userChoice and sets the fail bit on std::cin.  Since userChoice retains the previous value, it simply repeats whatever the previous choice does.&quot;  Thank you."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1466001610, "post_id": 37838358, "comment_id": 63138100, "body": "One solution: initialization <code>int userChoice = 0</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": true, "score": 1, "last_activity_date": 1466001044, "creation_date": 1466001044, "answer_id": 37838358, "question_id": 37837434, "link": "https://stackoverflow.com/questions/37837434/char-type-cause-loop-explosion/37838358#37838358", "title": "char type cause loop explosion", "body": "<p>Short answer: if you did proper error checking, you'd already know the answer. (or, at least, be closer than you currently are)</p>\n\n<p>Long answer since <code>userChoice</code> is of type <code>int</code>: <code>std::cin &gt;&gt; userChoice;</code> <strong><em>fails</em></strong> when it tries to parse <code>a</code>. It does nothing to the value of <code>userChoice</code> and sets the fail bit on <code>std::cin</code>.</p>\n\n<p>Since <code>userChoice</code> retains the previous value, it simply repeats whatever the previous choice does.</p>\n\n<p>Furthermore, next time you execute <code>std::cin &gt;&gt; userChoice;</code>, you're doing it on a stream that's still in the fail state, and so the operation does nothing yet again.</p>\n\n<p>To fix: test for errors. And if your error handling decides to continue looping, make sure to clear the flags to put <code>std::cin</code> back in the good state.</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 3951733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b978c87a1a9309f04bd7c15c4266f5?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/3951733/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1466002993, "creation_date": 1466002993, "answer_id": 37839120, "question_id": 37837434, "link": "https://stackoverflow.com/questions/37837434/char-type-cause-loop-explosion/37839120#37839120", "title": "char type cause loop explosion", "body": "<p>The simple solution for your simple program:</p>\n\n<pre><code>std::cin &gt;&gt; userChoice;  // insert the following lines\nif (std::cin.fail())\n{\n  std::cin.clear(std::ios::goodbit);\n  char c;\n  std::cin &gt;&gt;c;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1473830194, "accepted_answer_id": 37838358, "answer_count": 3, "score": 1, "last_activity_date": 1466002993, "creation_date": 1465998615, "last_edit_date": 1466000514, "question_id": 37837434, "link": "https://stackoverflow.com/questions/37837434/char-type-cause-loop-explosion", "closed_reason": "Duplicate", "title": "char type cause loop explosion", "body": "<p>I was wondering if anyone could tell me why the following code;</p>\n\n<pre><code>int main ()\n{\n\n        while((true))\n        {\n            int userChoice;\n            //fprintf(stdout, \"Press 1 for Coke.\\nPress 2 for Sprite.\\nPress 3 for Dr. Pepper.\\nPress 4 for Mountain Dew.\\nPress 5 for Monster.\\nPress 6 for Help.\\n\\n\");\n\n            fprintf(stdout, \"What would you like? (Press 6 for assistance): \");\n            std::cin &gt;&gt; userChoice;\n            if ((userChoice == 1))\n            {\n                fprintf(stdout, \"\\nYou get a Coke and you get a Coke, EVERYONE GETS A COKE!\\n\\n\");\n            }\n            else if ((userChoice == 2))\n            {\n                fprintf(stdout, \"\\nDispensing Sprite.\\n\\n\");\n            }\n            else if ((userChoice == 3))\n            {\n                fprintf(stdout, \"\\nDropping the Dr. P!\\n\\n\");\n            }\n            else if ((userChoice == 4))\n            {\n                fprintf(stdout, \"\\nDo the Dew!\\n\\n\");\n            }\n            else if ((userChoice == 5))\n            {\n                fprintf(stdout, \"\\nHere's your Monster, but don't go crazy\\n\\n\");\n            }\n            else\n            {\n                fprintf(stdout, \"\\nPress 1 for Coke.\\nPress 2 for Sprite.\\nPress 3 for Dr. Pepper.\\nPress 4 for Mountain Dew.\\nPress 5 for Monster.\\nPress 6 for Help.\\n\\n\");\n            }\n        }\n\n}\n</code></pre>\n\n<p>causes an infinite loop instead of printing the \"else\" statement when a non-integer is recieved via std::cin.</p>\n\n<p>I'm assuming it is because userChoice is stored as an integer.  How would I prevent this from happening?  First guess would be to change it to a string or char but would like a better explanation...</p>\n\n<p>Thank you in advance.</p>\n\n<p>EDIT: From Comments;</p>\n\n<p>Thank you for the answer and input; </p>\n\n<ul>\n<li><p>The if's instead of switch statements are part of the \"Learning\". Im brand new, the \"beginners challenge\" wanted it in if's, then change it to use a switch. </p></li>\n<li><p>the parentheses, Code::Blocks was throwing compiler warnings so i added them... </p></li>\n<li><p>using the different printf/scanf etc makes sense. </p></li>\n</ul>\n\n<p>Maybe more specifically i should ask; why is it that when i input a \"6\", it properly breaks and returns to the top of the loop but when i input an \"a\" it repeatedly prints out the else statement as fast as possible</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1465998530, "post_id": 37837363, "comment_id": 63135707, "body": "Please format your code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1465998983, "post_id": 37837363, "comment_id": 63136061, "body": "The macro expands to <code>static LNA_FUNCTION&lt;cName&gt; </code>... which is a syntax error"}], "answers": [{"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": false, "score": 3, "last_activity_date": 1465999010, "creation_date": 1465999010, "answer_id": 37837589, "question_id": 37837363, "link": "https://stackoverflow.com/questions/37837363/compilation-error-c2143-syntax-error-missing-before/37837589#37837589", "title": "Compilation error C2143: syntax error : missing &#39;;&#39; before &#39;&lt;&#39;", "body": "<p>Without seeing all your code, you have probably not defined a template class called <code>LNA_FUNCTION</code>. Have you <code>#include</code>'d all of your dependencies?</p>\n\n<p>As a sidenote, I would strongly advise against writing a class and then defining a preprocessor macro with the same name. It will probably not do what you want it to do.</p>\n"}], "owner": {"reputation": 1, "user_id": 1330770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b266569493bb9159bdc4afcbe2b93ad8?s=128&d=identicon&r=PG", "display_name": "user1330770", "link": "https://stackoverflow.com/users/1330770/user1330770"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1465999010, "creation_date": 1465998478, "last_edit_date": 1465998641, "question_id": 37837363, "link": "https://stackoverflow.com/questions/37837363/compilation-error-c2143-syntax-error-missing-before", "title": "Compilation error C2143: syntax error : missing &#39;;&#39; before &#39;&lt;&#39;", "body": "<pre><code>using namespace std;\n\nclass cName\n{\npublic:\n    cName();\n    void fName(){};\n};\n\n#define LNA_FUNCTION(className, funcName) \\\n static LNA_FUNCTION&lt;className&gt; funcName##className##Func(#className, #funcName, className :: funcName)\n\nLNA_FUNCTION(cName, fName);\n\nint _tmain(int argc, _TCHAR* argv[])\n{   \n\n}\n</code></pre>\n\n<p>Can anyone please why this error is shown when compiled in VS 2008?</p>\n\n<blockquote>\n  <p>Compilation error C2143: syntax error : missing ';' before '&lt;'</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "edited": false, "score": 1, "creation_date": 1465998208, "post_id": 37837133, "comment_id": 63135457, "body": "This is a random code snippet. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and explain <i>what</i> you don&#39;t understand."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1465998463, "post_id": 37837133, "comment_id": 63135648, "body": "You should go through the function line by line, and think about what each line does. Pay particular attention to where each pointer points to."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1465998469, "post_id": 37837133, "comment_id": 63135656, "body": "Bring out paper and a pen(cil), draw a linked list, and see what happens when you draw <code>p-&gt;next=p-&gt;next-&gt;next;</code>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1465998717, "post_id": 37837133, "comment_id": 63135843, "body": "And it does not really delete it as much as loose it."}], "answers": [{"tags": [], "owner": {"reputation": 832, "user_id": 3939193, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb094ece8706efc178637c692fb93d2?s=128&d=identicon&r=PG&f=1", "display_name": "DrDonut", "link": "https://stackoverflow.com/users/3939193/drdonut"}, "is_accepted": false, "score": 1, "last_activity_date": 1465999067, "creation_date": 1465999067, "answer_id": 37837603, "question_id": 37837133, "link": "https://stackoverflow.com/questions/37837133/delete-node-from-linked-list-c/37837603#37837603", "title": "delete node from linked list (C++)", "body": "<p>Let's take a look at what the function does. It takes two arguments, the linked list, and the index of the item to be removed.</p>\n\n<p>First, it searches the right node:\np is the first item of the linked list. It starts stepping through the list, untill either, the right index is found (<code>i=S-1</code>) or untill the end of the list is reached (<code>p=NULL</code>).</p>\n\n<p>when it has found the right node, it sets the link to the next item: <code>p-&gt; next</code>, to the next item of the next item.</p>\n\n<p>And now, you can also see the problems in the function:</p>\n\n<ul>\n<li>When an item is removed, the item itself is still in the list, there\nis just no more pointer to it, this is a memory leak like molbdnilo said.</li>\n<li>When the end of the list is reached (p=NULL), you try to set p->next to NULL, this will cause the program to throw a nullpointerexception.</li>\n<li>If p itself is the last item in the list, p->Next will be null, and since you try to call 'Next' on this item, you will also get a nullpointerexception.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 1, "last_activity_date": 1465999104, "creation_date": 1465999104, "answer_id": 37837625, "question_id": 37837133, "link": "https://stackoverflow.com/questions/37837133/delete-node-from-linked-list-c/37837625#37837625", "title": "delete node from linked list (C++)", "body": "<p>The line does not actually delete the <code>Node</code> from the memory. It removes it from the linked list.</p>\n\n<p>The code makes your current <code>Node</code> (<code>p</code>) points to the second <code>Node</code> on the right instead of the first on the right.  </p>\n\n<p>Several issues with this code:</p>\n\n<ul>\n<li>Potential memory leak since the <code>Node</code> is not deleted from the memory </li>\n<li>you need to do some check before <code>p-&gt;next=p-&gt;next-&gt;next;</code> or you might have some undefined behaviour when <code>p</code> or <code>p-&gt;next</code> end up being <code>NULL</code>. e.g. <code>L</code> is NULL, <code>S</code> > size of the linked list...</li>\n</ul>\n"}], "owner": {"reputation": 20, "user_id": 6107788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281541fdcf2fa3ad159b69e68c3542ea?s=128&d=identicon&r=PG", "display_name": "h\u1ea3i ch\u1ebf vi\u1ebft", "link": "https://stackoverflow.com/users/6107788/h%e1%ba%a3i-ch%e1%ba%bf-vi%e1%ba%bft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1465999104, "creation_date": 1465997917, "question_id": 37837133, "link": "https://stackoverflow.com/questions/37837133/delete-node-from-linked-list-c", "title": "delete node from linked list (C++)", "body": "<p>I don't understand how this code can delete node, please help!!!</p>\n\n<pre><code> Node* del_place(Node* L, int S)\n{\n\n        int i=1;\n        Node *p=L;\n        while (p!=NULL&amp;&amp;i!=S-1)\n        {\n            p=p-&gt;next;\n            i++;\n        }\n        p-&gt;next=p-&gt;next-&gt;next;//why can this code delete node in L...\n              return L;\n      }\n</code></pre>\n"}, {"tags": ["c++", "node.js", "tensorflow"], "comments": [{"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 0, "creation_date": 1465997951, "post_id": 37837019, "comment_id": 63135257, "body": "Perhaps, this is what you want? <a href=\"http://devdocs.io/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">devdocs.io/cpp/language/reinterpret_cast</a>"}], "answers": [{"comments": [{"owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "edited": false, "score": 0, "creation_date": 1466411240, "post_id": 37844559, "comment_id": 63286478, "body": "I have another question as a follow up to this about c API. Can you please give an example for how to make a tensor with string data type. I have seen an example in Go API for this <a href=\"https://github.com/tensorflow/tensorflow/blob/go/tensorflow/contrib/go/tensor.go#L201\" rel=\"nofollow noreferrer\">here</a>. But I am not sure how to do it,in C++."}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": false, "score": 1, "last_activity_date": 1466020366, "creation_date": 1466020366, "answer_id": 37844559, "question_id": 37837019, "link": "https://stackoverflow.com/questions/37837019/equivalent-of-reinterpret-node-js-fii-in-c/37844559#37844559", "title": "Equivalent of reinterpret Node.js fii in C++", "body": "<p>I am assuming that you want to access the data in <code>readed = TF_TensorData(c)</code>. The way you handle this depends on the element type in tensor <code>c</code>.  Assuming it is a simple type (like <code>float</code>, <code>double</code>, or <code>int32</code>, but not <code>string</code>), you can simply cast the data to an array of that type. For example, assuming <code>c</code> is a <code>float</code> tensor:</p>\n\n<pre><code>float* tensor_data = static_cast&lt;float*&gt;(TF_TensorData(c));\n\nint64 total_elements = 1;\nfor (int i = 0; i &lt; dims; ++i) {\n    total_elements *= TF_Dim(c, i);\n}\n\n// Print every element of the tensor:\nfor (int i = 0; i &lt; total_elements; ++i) {\n    cout &lt;&lt; tensor_data[i];\n}\n</code></pre>\n\n<p>The TensorFlow codebase contains examples of using <code>TF_TensorData()</code> to access tensor contents in <a href=\"https://github.com/tensorflow/tensorflow/blob/b3cdbcf13659b8a6bfe83b61248ab0e429fd9273/tensorflow/python/client/tf_session_helper.cc\" rel=\"nofollow\"><code>tf_session_helper.cc</code></a>. However, note that these examples are intertwined with use of the Python C API, so they aren't the most readable code.</p>\n\n<p>You may find it easier to use the TensorFlow C++ API, rather than the C API. The file <a href=\"https://github.com/tensorflow/tensorflow/blob/b3cdbcf13659b8a6bfe83b61248ab0e429fd9273/tensorflow/cc/tutorials/example_trainer.cc\" rel=\"nofollow\"><code>example_trainer.cc</code></a> shows how to use the <a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/cc/ClassSession.html#class-tensorflow-session\" rel=\"nofollow\"><code>tensorflow::Session</code></a> class to run TensorFlow graphs and retrieve results as <a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/cc/ClassTensor.html#class-tensorflow-tensor\" rel=\"nofollow\"><code>tensorflow::Tensor</code></a> objects, which are easier to manipulate.</p>\n"}], "owner": {"reputation": 11, "user_id": 6469844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5fee1369ae690d4953f6e75bb43835?s=128&d=identicon&r=PG&f=1", "display_name": "oblek_girl", "link": "https://stackoverflow.com/users/6469844/oblek-girl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1466020366, "creation_date": 1465997635, "question_id": 37837019, "link": "https://stackoverflow.com/questions/37837019/equivalent-of-reinterpret-node-js-fii-in-c", "title": "Equivalent of reinterpret Node.js fii in C++", "body": "<p>I am trying to replicate <a href=\"https://medium.com/jim-fleming/loading-tensorflow-graphs-via-host-languages-be10fd81876f#.xhgxjwjqb\" rel=\"nofollow\">this</a> example in C++ and I am stuck at the absolute final step to read the data. </p>\n\n<pre><code>exports.TF_ReadTensorData = function(tensor, size, type) {\n  var ptr = libtensorflow.TF_TensorData(tensor);\n  ptr = ptr.reinterpret(size, 0);\n  ptr.type = type;\n  return ptr.deref();\n}\n</code></pre>\n\n<p>For C++ I have done this so far. </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n#include \"tf_session_helper.h\"\n#include \"tf_session_helper.cc\"\n#include \"tf_tensor_helper.cc\"\n#include \"tensorflow/core/public/tensor_c_api.h\"\nusing namespace std;\n\nmain()\n{ \n    TF_DataType::TF_UINT16;\n    auto status     = TF_NewStatus();\n    auto status_ops = TF_NewSessionOptions();\n    auto session    = TF_NewSession(status_ops, status);\n    std::ifstream in(\"graph.pb\");\n    std::string contents((std::istreambuf_iterator&lt;char&gt;(in)), \n    std::istreambuf_iterator&lt;char&gt;());\n    TF_ExtendGraph(session,contents.c_str(),contents.length(),status);\n    long long adims[] ={};\n    float aData[] ={3};\n    auto aTensor = tensorflow::TF_NewTensor_wrapper(TF_DataType::TF_FLOAT,adims,0,aData,(sizeof(aData)/sizeof(*aData)));\n    long long bdims[] ={};\n    float bData[] ={2};\n    auto bTensor = tensorflow::TF_NewTensor_wrapper(TF_DataType::TF_FLOAT,bdims,0,bData,(sizeof(bData)/sizeof(*bData)));\n    vector&lt;std::string&gt; input_names;\n    input_names.push_back(\"a\"); \n    input_names.push_back(\"b\"); \n    vector&lt;std::string&gt; output_names;\n    output_names.push_back(\"c\"); \n    vector&lt;std::string&gt; target_names;\n    std::vector&lt;TF_Tensor*&gt; inputs;\n    inputs.push_back(aTensor);inputs.push_back(bTensor);\n    std::vector&lt;TF_Tensor*&gt; output;\n\n    tensorflow::TF_Run_wrapper(session,input_names,inputs,output_names,output,target_names,status);\n    cout &lt;&lt; (TF_GetCode(status) == TF_Code::TF_OK) &lt;&lt; \"\\n\";\n    auto c = output[0];\n    auto type = TF_TensorType(c);\n    auto dims = TF_NumDims(c);\n    auto size = TF_TensorByteSize(c);\n    auto readed = TF_TensorData(c);\n    cout &lt;&lt; type &lt;&lt; \" \" &lt;&lt; dims  &lt;&lt; \" \" &lt;&lt; size &lt;&lt; \" \" &lt;&lt; \"\\n\";\n\n} \n</code></pre>\n\n<p>I am not really an expert in C++ and I would like to know how to replicate ptr = ptr.reinterpret(size, 0) in C++. \nAlso I am using a shared library to compile this.</p>\n"}]