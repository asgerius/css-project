[{"tags": ["c++", "visual-studio", "compiler-optimization", "code-readability"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1545868157, "post_id": 53938279, "comment_id": 94716587, "body": "What is the reason for wanting to change the code?"}, {"owner": {"reputation": 141, "user_id": 4503763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aUs9.jpg?s=128&g=1", "display_name": "Lorand", "link": "https://stackoverflow.com/users/4503763/lorand"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545868242, "post_id": 53938279, "comment_id": 94716606, "body": "@PaulMcKenzie I have written the code a long time ago, put in a lot of unnecessary equations and even though it is compiling it is very hard to read."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1545869320, "post_id": 53938279, "comment_id": 94716770, "body": "Do you want it to handle <code>const</code> values and/or <code>#define</code>s too? If not, it would be possible to design a plugin that uses a regex to search for simple constant equations and then evaluate it. If so, though, you&#39;d probably need to write a compiler module..."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 2, "creation_date": 1545869339, "post_id": 53938279, "comment_id": 94716771, "body": "Even if you could it isn&#39;t what you really want, in all likelihood. Consider <code>days = 3600 * 24 * 7 * 52 &#47; 2</code> What you&#39;d really want is symbolic values like <code>days = hour_seconds * day_hours * week_days * year_weeks &#47; 2</code> Or something."}, {"owner": {"reputation": 141, "user_id": 4503763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aUs9.jpg?s=128&g=1", "display_name": "Lorand", "link": "https://stackoverflow.com/users/4503763/lorand"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1545870184, "post_id": 53938279, "comment_id": 94716900, "body": "@Ken Y-N I do not want it to handle defines and constant variables preferably. Just the numbers mixed with them."}, {"owner": {"reputation": 141, "user_id": 4503763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aUs9.jpg?s=128&g=1", "display_name": "Lorand", "link": "https://stackoverflow.com/users/4503763/lorand"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1545870234, "post_id": 53938279, "comment_id": 94716905, "body": "@ZanLynx I do not need variables. My code is something like:   <code>back.setPosition(sf::Vector2f(160 * 2, 90 * 11)); play.setPosition(sf::Vector2f(160 * 5, 90 * 11)); name.setPosition(sf::Vector2f(160 * 1.5f, 90 * 1.2f + settings.screenWidth()&#47;2));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1545950246, "post_id": 53951550, "comment_id": 94741829, "body": "Let this perhaps be a lesson about using magic numbers everywhere."}], "tags": [], "owner": {"reputation": 141, "user_id": 4503763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aUs9.jpg?s=128&g=1", "display_name": "Lorand", "link": "https://stackoverflow.com/users/4503763/lorand"}, "is_accepted": true, "score": 0, "last_activity_date": 1545950006, "creation_date": 1545950006, "answer_id": 53951550, "question_id": 53938279, "link": "https://stackoverflow.com/questions/53938279/how-to-replace-math-equations-in-visual-studio-2017-ide/53951550#53951550", "title": "How to replace math equations in Visual Studio 2017 IDE?", "body": "<p>For the guys wondering how I resolved this problem. I installed Visual Studio Code and an extension called Calculate from Andrew Carreiro <a href=\"https://marketplace.visualstudio.com/items?itemName=acarreiro.calculate\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=acarreiro.calculate</a> , which can calculate and replace expressions for me.</p>\n"}], "owner": {"reputation": 141, "user_id": 4503763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aUs9.jpg?s=128&g=1", "display_name": "Lorand", "link": "https://stackoverflow.com/users/4503763/lorand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53951550, "answer_count": 1, "score": -1, "last_activity_date": 1545950006, "creation_date": 1545867955, "question_id": 53938279, "link": "https://stackoverflow.com/questions/53938279/how-to-replace-math-equations-in-visual-studio-2017-ide", "title": "How to replace math equations in Visual Studio 2017 IDE?", "body": "<p>I have a simple question. Is there an addon and/or built-in function in visual studio which can replace long (constant) equations with their fixed value?</p>\n\n<p>For example:</p>\n\n<pre><code>int test = 123;\nstd::cout &lt;&lt; 1 + (11 * 10) + test &lt;&lt; std::endl;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>int test = 123;\nstd::cout &lt;&lt; 111 + test &lt;&lt; std::endl;\n</code></pre>\n\n<p>I know this could be changed manually but I have a lot of code I have to apply this to with a lot of decimals, and it would take weeks to do it manually. Also sorry if the question was asked before, I personally didn't find anything.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 1, "last_activity_date": 1545865638, "creation_date": 1545865638, "answer_id": 53938086, "question_id": 53937998, "link": "https://stackoverflow.com/questions/53937998/i-cant-do-filing-in-my-program-i-want-to-store-my-bus-data-in-a-file-but-want-t/53938086#53938086", "title": "I can&#39;t do filing in my program i want to store my bus data in a file but want to get the data when start the program so i can work on it", "body": "<ol>\n<li><p>start program.</p>\n\n<p>2a. If \"mydatafile.data\" exists, open it and read the data from it.</p>\n\n<p>2b. If \"mydatafile.data\" doesn't exist, create it.</p></li>\n<li><p>run rest of program.</p></li>\n<li>Before program exits, write data back to \"mydatafile.data\"</li>\n</ol>\n\n<p>side note: your question is quite difficult to read. I suggest breaking that long run-on sentence into readable chunks.</p>\n"}], "owner": {"reputation": 1, "user_id": 10836811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2345722918989022/picture?type=large", "display_name": "Zeeshan Yousafzai", "link": "https://stackoverflow.com/users/10836811/zeeshan-yousafzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "closed_date": 1545865849, "answer_count": 1, "score": -3, "last_activity_date": 1545865638, "creation_date": 1545864852, "question_id": 53937998, "link": "https://stackoverflow.com/questions/53937998/i-cant-do-filing-in-my-program-i-want-to-store-my-bus-data-in-a-file-but-want-t", "closed_reason": "Needs details or clarity", "title": "I can&#39;t do filing in my program i want to store my bus data in a file but want to get the data when start the program so i can work on it", "body": "<p>I want automatically input data from my file which i saved previously in it\nI stored the data as simple by fstream but i dont know how to used it again my is bus ticketing system so my bus data should be save and wanted read again and again as passengers and reserving the seats</p>\n"}, {"tags": ["c++", "oop", "c++11"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545865055, "post_id": 53937992, "comment_id": 94716003, "body": "<i>My current implementation calls the print() method of base class</i> -- Strange why you would ask this, seeing that you made the destructor in <code>base</code> virtual (as it should be).  Were you not aware of what <code>virtual</code> means?"}, {"owner": {"reputation": 47, "user_id": 8679582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfff8ec1d6b5b3e70cab10279a27484?s=128&d=identicon&r=PG&f=1", "display_name": "sam91", "link": "https://stackoverflow.com/users/8679582/sam91"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545865412, "post_id": 53937992, "comment_id": 94716076, "body": "Apologies. Yes, I forgot about the virtual. I want the generic class to return the object of one of the child classes depending on the input."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1545865582, "post_id": 53937992, "comment_id": 94716114, "body": "It is not possible to do what you&#39;re asking for, unless you want to ride the <code>if()</code> train, checking to see what type it is or use <code>dynamic_cast</code>, again, checking to see if it matches a type.  Otherwise, trying to do what you&#39;re asking for sounds like a design flaw.  The part of the code you&#39;re making the call to <code>print</code> calls for generic usage, but at the same time you want non-generic usage.  Design flaw (IMO)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545865952, "post_id": 53937992, "comment_id": 94716196, "body": "You could use a design pattern, such as the <a href=\"https://stackoverflow.com/questions/10116057/visitor-pattern-explanation\">visitor pattern</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1545867504, "post_id": 53937992, "comment_id": 94716490, "body": "Alternatively: <code>std::variadic</code>"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8679582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfff8ec1d6b5b3e70cab10279a27484?s=128&d=identicon&r=PG&f=1", "display_name": "sam91", "link": "https://stackoverflow.com/users/8679582/sam91"}, "edited": false, "score": 0, "creation_date": 1545865468, "post_id": 53938017, "comment_id": 94716090, "body": "Sorry, I forgot about the virtual. I want the generic class to return the object of one of the child classes depending on the input. I want to call the method of child2 class hello(), which is exclusively in the derived class."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1545865649, "post_id": 53938017, "comment_id": 94716129, "body": "If you have a base pointer and want to call a function that is only available in the derived class you would generally use <code>dynamic_cast</code> to cast to the proper type of pointer then call the function with that pointer if it is not null."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 47, "user_id": 8679582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfff8ec1d6b5b3e70cab10279a27484?s=128&d=identicon&r=PG&f=1", "display_name": "sam91", "link": "https://stackoverflow.com/users/8679582/sam91"}, "edited": false, "score": 1, "creation_date": 1545867555, "post_id": 53938017, "comment_id": 94716499, "body": "@st91 if you have a different question ask it; but don&#39;t edit an existing valid question to invalidate existing answers.  When asking the new question you should both include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <b>and</b> describe the actual concrete problem you are solving, unless you want &quot;what you ask for cannot be done&quot;.  With both the abstract and concrete, people can solve the concrete problem in a way you do not anticipate.  Without it, they would have to flail randomly."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1545865012, "creation_date": 1545865012, "answer_id": 53938017, "question_id": 53937992, "link": "https://stackoverflow.com/questions/53937992/c-dynamic-return-type-for-function/53938017#53938017", "title": "c++ dynamic return type for function", "body": "<p>Make <code>print</code> virtual in <code>base</code>.</p>\n\n<p>Non virtual methods do not behave polymorphically.</p>\n"}], "owner": {"reputation": 47, "user_id": 8679582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfff8ec1d6b5b3e70cab10279a27484?s=128&d=identicon&r=PG&f=1", "display_name": "sam91", "link": "https://stackoverflow.com/users/8679582/sam91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545867364, "creation_date": 1545864817, "last_edit_date": 1545867364, "question_id": 53937992, "link": "https://stackoverflow.com/questions/53937992/c-dynamic-return-type-for-function", "title": "c++ dynamic return type for function", "body": "<p>I am trying to have a generic class which could return the object of the other class depending on the input to generic class. </p>\n\n<p>From the main function, if I pass in '1' as an argument to the constructor of generic class, i want to be able to get object of child1 class using getType(). My question is: is there a way to change the return type of getType() dynamically or any other way to accomplish this behavior?</p>\n\n<p>My current implementation calls the print() method of base class, even though I create an object of child classes in generic constructor as m_type is a base type.</p>\n\n<pre><code>class base {\n\n    public:\n        void print(){\n            cout &lt;&lt; \"base\\n\";\n        }\n        virtual ~base() {}\n};\n\nclass child1 : public base {\n    public:\n        void print(){\n            cout &lt;&lt; \"child1\\n\";\n        }\n};\n\nclass child2 : public base {\n    public:\n        void print(){\n            cout &lt;&lt; \"child2\\n\";\n        }\n        void hello(){\n            cout &lt;&lt; \"hello from child 2\\n\";\n        }\n};\n\nclass generic{\n\n    public:\n        generic(int b){\n            if(b==1) {\n                m_type = new child1();\n            }\n            else if(b==2) \n                m_type = new child2();\n        }\n\n    // Somehow return the object of one of the child class based on input \n    // to constructor.\n    base *getType(){\n        return m_type;\n    }\n\n    base *m_type;\n};\n\nint main()\n{\n    generic *g1 = new generic(1);\n    // call the method from child1 class instead of base class.\n    g1-&gt;getType()-&gt;print();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "constructor", "member"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1545863648, "creation_date": 1545863648, "answer_id": 53937860, "question_id": 53937832, "link": "https://stackoverflow.com/questions/53937832/is-there-a-way-to-initialize-a-member-object-of-a-class-within-the-constructors/53937860#53937860", "title": "Is there a way to initialize a member object of a class within the constructors code instead of the initializer list?", "body": "<p>Initializer lists are there to use another constructor than the default constructor.</p>\n\n<p>But nothing impedes you for creating a custom function that will initialize <code>b</code>:</p>\n\n<pre><code>class A {\npublic:\n    A():b(init()) {\n    }\nprivate:\n    B b; //Wants to be a member but can not\n\n    static B init()\n    {\n        if(!wrapped_library_init()) {\n            exit(CRITICAL_ERROR);\n        }\n        ptr_to_some_library_metadata *a = library_function(); /*Needs to\n        be called after wrapped_library_init() or needs a pointer to some\n        wrapped object created inside this constructor */\n\n        return B(a);\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545865244, "post_id": 53937913, "comment_id": 94716041, "body": "For case 2, <code>std::optional</code> instead of the union to have free rule of 5/3/0 (else creating a class &quot;<code>delayed_construct&lt;T&gt;</code>&quot; to avoid the overhead of <code>optional</code>)."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545865681, "post_id": 53937913, "comment_id": 94716143, "body": "@Jarod42: I&#39;d not be willing to pay for <code>std::optional</code>s need to indicate whether it is set or not. I do agree, however, that the delayed construction can reasonably be factored into a class template. On the other hand, my experience is that wrapper classes become resource managers anyway as they typically need special initialization as well as destruction."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1545866409, "post_id": 53937913, "comment_id": 94716296, "body": "My primary point was to underline that there is not just the destructor to implement, but also the --copy--/assignment/move. As I found it was not clear in your post (might be included in <code>&#47;&#47;...</code>). So lazy people can pay the overhead :-)"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 3, "last_activity_date": 1545864123, "creation_date": 1545864123, "answer_id": 53937913, "question_id": 53937832, "link": "https://stackoverflow.com/questions/53937832/is-there-a-way-to-initialize-a-member-object-of-a-class-within-the-constructors/53937913#53937913", "title": "Is there a way to initialize a member object of a class within the constructors code instead of the initializer list?", "body": "<p>Member objects can only be constructed in the member initializer list. There are a few techniques which can be used to make it possible to initialize an object, though:</p>\n\n<ol>\n<li><p>Use a helper [lambda] function doing the necessary extra work before return a suitable object. For example:</p>\n\n<pre><code>A()\n      : B([]{\n          if (!wrapped_library_init()) {\n              exit(CRITICAL_ERROR);\n          }\n          return library_function();\n      }()) {\n}\n</code></pre></li>\n<li><p>You can delay construction by using a <code>union</code> with just the appropriate member. When using this technique the member needs to be explicitly destructed, for example:</p>\n\n<pre><code>class A {\n    union Bu { B b };\n    Bu b;\npublic:\n    A() {\n        if (!wrapped_library_init()) {\n            exit(CRITICAL_ERROR);\n        }\n        new(&amp;b.b) B(library_function());\n    }\n    ~A() {\n        b.b.~B();\n    }\n    // ...\n};\n</code></pre></li>\n</ol>\n\n<p>I'd personally use the first approach. However, there are cases when using a <code>union</code> to delay construction is helpful.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1545864928, "creation_date": 1545864928, "answer_id": 53938007, "question_id": 53937832, "link": "https://stackoverflow.com/questions/53937832/is-there-a-way-to-initialize-a-member-object-of-a-class-within-the-constructors/53938007#53938007", "title": "Is there a way to initialize a member object of a class within the constructors code instead of the initializer list?", "body": "<p>Wrap your library inside a class:</p>\n\n<pre><code>class LibraryWrapper\n{\npublic:\n    LibraryWrapper()\n    {\n        if(!wrapped_library_init()) {\n            exit(CRITICAL_ERROR);\n        }\n        lib_data.reset(library_function()); /*Needs to\n        be called after wrapped_library_init() or needs a pointer to some\n        wrapped object created inside this constructor */\n    }\n    //~LibraryWrapper() {/**/}\n    //LibraryWrapper(const LibraryWrapper&amp;) {/**/}            // =delete; ?\n    //LibraryWrapper&amp; operator=(const LibraryWrapper&amp;) {/**/} // =delete; ?\n\n//private: // and appropriate interface to hide internal\n    std::unique_ptr&lt;ptr_to_some_library_metadata, CustomDeleter&gt; lib_data;\n};\n\nclass B {\npublic:\n    explicit B(ptr_to_some_library_metadata *a);\n    // ...\n};\n</code></pre>\n\n<p>And use extra member or inheritance:</p>\n\n<pre><code>class A\n{\npublic:\n    A() : b(lib.lib_data.get()) {}\nprivate:\n    LibraryWrapper lib; // placed before B\n    B b;\n};\n</code></pre>\n"}], "owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1545864928, "creation_date": 1545863401, "question_id": 53937832, "link": "https://stackoverflow.com/questions/53937832/is-there-a-way-to-initialize-a-member-object-of-a-class-within-the-constructors", "title": "Is there a way to initialize a member object of a class within the constructors code instead of the initializer list?", "body": "<p>Consider I want to wrap some library code inside an object. That library needs to be set up and initialized by calling some function inside the constructor of that wrapper class.</p>\n\n<p>The librarie's \"objects\" then diverge into creating more, different \"objects\" that the wrapper class wraps in form of yet another wrapper object that should be a plain member of that class.</p>\n\n<p>But as far as I see it, members of classes can only be initialized or created by calling their constructor in the initalizer list of the constructor. The execution of these bits of code preceed the constructor of the actual class that does the initialization of the library and its environment, making it impossible for me to actually initialize that member object as a member and instead force me to initialize it as a pointer to the 2nd wrapper, because its constructor must be called manually within the first constructor's code.</p>\n\n<p>Example:</p>\n\n<pre><code>class A {\npublic:\n    A() {\n        if(!wrapped_library_init()) {\n            exit(CRITICAL_ERROR);\n        }\n        ptr_to_some_library_metadata *a = library_function(); /*Needs to\n        be called after wrapped_library_init() or needs a pointer to some\n        wrapped object created inside this constructor */\n        //initialize b\n    }\nprivate:\n    B b; //Wants to be a member but can not\n};\n\nclass B {\n    B(ptr_to_some_library_metadata *a);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1545862037, "post_id": 53937662, "comment_id": 94715365, "body": "What are you trying to achieve? Break your program?"}, {"owner": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545862051, "post_id": 53937662, "comment_id": 94715368, "body": "Just to learn...."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1545862086, "post_id": 53937662, "comment_id": 94715384, "body": "Learn what exactly? And where do statically allocated variables come in?"}, {"owner": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545862121, "post_id": 53937662, "comment_id": 94715393, "body": "Learn if there is such a feature that can unwind the stack manually"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1545862147, "post_id": 53937662, "comment_id": 94715400, "body": "Calling a destructor does not unwind the stack. Unwinding the stack calls the destructors of local variables, but not vice versa (that would be an infinite loop)."}, {"owner": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545862206, "post_id": 53937662, "comment_id": 94715421, "body": "This process of destroying local objects and calling destructors is called stack unwinding."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1545862244, "post_id": 53937662, "comment_id": 94715435, "body": "No, that&#39;s not what I call it."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 6, "creation_date": 1545862314, "post_id": 53937662, "comment_id": 94715446, "body": "The only time I know of where it makes sense to manually call the destructor is when using placement new."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1545862323, "post_id": 53937662, "comment_id": 94715449, "body": "I see no statics in this code whatsoever; only automatic and dynamic."}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1545863063, "post_id": 53937662, "comment_id": 94715615, "body": "<code>std::string::~string()</code> <i>is</i> called automatically even when you throw an exception."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "edited": false, "score": 0, "creation_date": 1545862349, "post_id": 53937689, "comment_id": 94715456, "body": "Hows to do this?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "edited": false, "score": 4, "creation_date": 1545862448, "post_id": 53937689, "comment_id": 94715475, "body": "@user10713170 You first: <i>why</i> do this ? You&#39;re not using placement-new, which frankly is the only time one really has cause to manually fire destructors (in fact, it&#39;s required if placement new is done correctly). If your answer is &quot;to learn&quot;, to learn <i>what</i> ?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545862451, "post_id": 53937689, "comment_id": 94715476, "body": "As @eerorika said, if you do it, your program behavior is undefined. It usually crashes."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1545862468, "post_id": 53937689, "comment_id": 94715484, "body": "<code>(&amp;s)-&gt;~std::string();</code>. But again: Don&#39;t do it. There&#39;s no valid reason to EVER do this to a class that you didn&#39;t create with placement-new"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545862615, "post_id": 53937689, "comment_id": 94715523, "body": "@MatthieuBrucher <code>It usually crashes</code> If you&#39;re lucky :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1545862617, "post_id": 53937689, "comment_id": 94715524, "body": "@MooingDuck <code>(&amp;foo)-&gt;</code> is a weird way to write <code>foo.</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545862649, "post_id": 53937689, "comment_id": 94715531, "body": "Indeed, if you are lucky."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545863236, "post_id": 53937689, "comment_id": 94715649, "body": "@melpomene I vaguely recall working with a compiler that considered <code>foo.~std::string();</code> to be an error, so I had to do it through a pointer. Or maybe I&#39;m misremembering."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1545864435, "post_id": 53937689, "comment_id": 94715883, "body": "@MooingDuck Not sure about the indirection, but I think the syntax should be <code>foo.std::string::~string()</code> or <code>foo.~basic_string()</code> to get the correct name lookup."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1545865157, "post_id": 53937689, "comment_id": 94716020, "body": "@user10605163 good point about name lookup. I&#39;ve added your examples and one another to the answer since it&#39;s not obvious."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "edited": false, "score": 1, "creation_date": 1545865371, "post_id": 53937689, "comment_id": 94716063, "body": "@user10713170 -- Let me say this -- you will hardly ever, if ever, run into a case where you need to do this.  Spend time learning C++ that is most often used, not the esoteric parts of the language that are only used <i>properly</i> by seasoned professionals and/or advanced C++ programmers."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1545865672, "last_edit_date": 1545865672, "creation_date": 1545862142, "answer_id": 53937689, "question_id": 53937662, "link": "https://stackoverflow.com/questions/53937662/manually-calling-the-destructor-for-statically-allocated-variables/53937689#53937689", "title": "Manually calling the destructor for statically allocated variables", "body": "<blockquote>\n  <p>Is it possible to manually call the destructor on the object std::string?</p>\n</blockquote>\n\n<p>Technically yes, it is possible to call the destructor of an automatic variable. But if the execution leaves the scope that has a destroyed automatic variable, the behaviour of the program would be undefined, so doing this is of little use in practice. You don't want your program to have undefined behaviour.</p>\n\n<p>Explicit call to destructor is typically used when you've reused storage (typically an array of <code>char</code> or <code>std::byte</code>) for an object or array of objects using the placement-new expression.</p>\n\n<blockquote>\n  <p>Hows to do this?</p>\n</blockquote>\n\n<p>You call the destructor just like you would call a member function. The name of the destructor is <code>~T</code> for a class named <code>T</code>. In the particular case of <code>std::string</code> and other type aliases within a namespace, you need to do some gymnastics to get around grammar limitations. All of below are correct:</p>\n\n<pre><code>s.std::string::~string();\n\ns.~basic_string();\n\nusing std::string;\ns.~string();\n</code></pre>\n\n<hr>\n\n<p>P.S. <code>s</code> has automatic storage, not static.</p>\n"}], "owner": {"reputation": 61, "user_id": 10713170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28fe30c3f2b9604d281c7601f0be3c?s=128&d=identicon&r=PG&f=1", "display_name": "user10713170", "link": "https://stackoverflow.com/users/10713170/user10713170"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1545865672, "creation_date": 1545861933, "question_id": 53937662, "link": "https://stackoverflow.com/questions/53937662/manually-calling-the-destructor-for-statically-allocated-variables", "title": "Manually calling the destructor for statically allocated variables", "body": "<pre><code>void func( int x )\n{\n    char* pleak = new char[1024]; // might be lost =&gt; memory leak\n    std::string s( \"hello world\" ); // will be properly destructed\n\n    if ( x ) throw std::runtime_error( \"boom\" );\n\n    delete [] pleak; // will only get here if x == 0. if x!=0, throw exception\n}\n</code></pre>\n\n<p>For the above code, s is destroyed at the end of the function scope.\nIs it possible to manually call the destructor on the object std::string?</p>\n"}, {"tags": ["c++", "file", "optimization", "fstream", "ofstream"], "comments": [{"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 1, "creation_date": 1545860498, "post_id": 53937427, "comment_id": 94714924, "body": "Nothing new, io streams are not really fast in C++. You should try the C counterpart if your only focus is performance. Give <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">{fmt}</a> a look too, AFAIK it&#39;s able to work with streams directly."}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1545860643, "post_id": 53937427, "comment_id": 94714967, "body": "Yeah, writing to files is expensive, esp. when you need high throughput. Not surprising the order of magnitude difference when writing something to the files."}, {"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 0, "creation_date": 1545860760, "post_id": 53937427, "comment_id": 94715004, "body": "Also can you try just outputting <code>outfile &lt;&lt; &#39;a&#39;</code>? If you get crazy higher numbers than without writing anything, I would suspect filesystem performance to be a culprit."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1545860996, "post_id": 53937427, "comment_id": 94715096, "body": "My guess is this is going as fast as the disk can handle. It is likely the disk alone that is slowing this down. In the first test it only needs to change the directory in one place on the disk. In the second one it has to visit each file on the disk to put information there."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1545861047, "post_id": 53937427, "comment_id": 94715112, "body": "<i>is there anything that I could optimize here for the program to create the files faster?</i> -- Be careful trying to optimize any code that has to do with file writing.  What may be optimal for your hardware may have no effect or worse, make things slower when run on different hardware."}, {"owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "reply_to_user": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 0, "creation_date": 1545861127, "post_id": 53937427, "comment_id": 94715134, "body": "@Asu <code>outfile &lt;&lt; &#39;a&#39;;</code> generates <code>10000</code> .txt files in <code>4.70</code> seconds."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545861225, "post_id": 53937427, "comment_id": 94715164, "body": "Try writing through unformatted input functions, such as &#39;std::ostream::write` and measure their performance (make sure to write the same amount of bytes). If it is significantly faster, your culprit is formatting, if it is the same, it is platform."}, {"owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "edited": false, "score": 0, "creation_date": 1545862557, "post_id": 53937427, "comment_id": 94715510, "body": "<code>ostream::write</code> gave even worse results D: +- 10%"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1545863445, "post_id": 53937427, "comment_id": 94715684, "body": "Try writing to a RAMdrive to see if mechanical disk performance is limiting you."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1545864591, "post_id": 53937427, "comment_id": 94715921, "body": "Which system are using? If you happen to use MSVC++ you are using an implementation which tried to prove that IOStreams are slow. Of course, it didn&#39;t really prove what it set out to prove but rather that one implementation can be made slow. For this particular implementation using <code>std::ios_base::sync_with_stdio(false);</code> as the first thing in <code>main()</code> had a rather large effect on performance when I tried it (which is, however, ~20 years ago)."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545864769, "post_id": 53937427, "comment_id": 94715955, "body": "Related? <a href=\"https://stackoverflow.com/questions/12997131/stdfstream-buffering-vs-manual-buffering-why-10x-gain-with-manual-buffering\" title=\"stdfstream buffering vs manual buffering why 10x gain with manual buffering\">stackoverflow.com/questions/12997131/&hellip;</a>"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1545864910, "post_id": 53937427, "comment_id": 94715981, "body": "Having thousands of files in one directory makes for slow lookups there as well."}, {"owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "edited": false, "score": 0, "creation_date": 1545867459, "post_id": 53937427, "comment_id": 94716483, "body": "Win10 x64, Code::Blocks, G++ with C++14 flag enabled."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1545897383, "post_id": 53940316, "comment_id": 94722274, "body": "Note this is also compiler dependent, Linux/gcc provides a default <code>IO_BUFSIZ</code> (I believe renamed <code>LIO_BUFSIZE</code> currently) of <code>8192</code> bytes while Windows VS provide only <code>512</code>. So &quot;increasing&quot; to a fixed <code>4096</code> as indicated in the linked answer would actually be cutting the default I/O buffer size in half on Linux. (well done on the testing and reporting)"}], "tags": [], "owner": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "is_accepted": true, "score": 4, "last_activity_date": 1545890233, "last_edit_date": 1592644375, "creation_date": 1545889836, "answer_id": 53940316, "question_id": 53937427, "link": "https://stackoverflow.com/questions/53937427/optimizing-txt-files-creation-speed/53940316#53940316", "title": "Optimizing .txt files creation speed", "body": "<p>The speed of creation of file is hardware dependent, faster the drive faster you can create the files.</p>\n<p>This is evident from the fact that <strong>I ran your code on an ARM processor</strong> (Snapdragon 636, on a Mobile phone using termux), now mobile phones have flash memory that are very fast when it comes to I/O. So <strong>it ran under 3 seconds most of the time and some time 5 second</strong>. This variation is expected as drive has to handle multi process read writes. <strong>You reported that it took 47 seconds for your hardware.</strong> <strong>Hence you can safely conclude that I/O speed is significantly dependent on Hardware.</strong></p>\n<hr />\n<p>None the less I thought to do some optimization to your code and I used 2 different approaches.</p>\n<ul>\n<li><p>Using a C counterpart for I/O</p>\n</li>\n<li><p>Using C++ but writing in a chunk in one go.</p>\n</li>\n</ul>\n<p>I ran the simulation on my phone. I ran it 50 times and here are the results.</p>\n<ul>\n<li><p>C was fastest taking 2.73928 second on average to write your word on 10000 text files, using fprintf</p>\n</li>\n<li><p>C++ writing with the complete line at one go took 2.7899 seconds. I used sprintf to get the complete line into a char[] then wrote using &lt;&lt; operator on ofstream.</p>\n</li>\n<li><p>C++ Normal (Your Code) took 2.8752 seconds</p>\n</li>\n</ul>\n<p>This behaviour is expected, writing in chunks is fasters. Read <a href=\"https://stackoverflow.com/a/41210655/7309666\">this</a> answer as to why. C was fastest no doubt.</p>\n<p>You may note here that The difference is not that significant but if you are on a hardware with slow I/O, this becomes significant.</p>\n<hr />\n<p>Here is the code I used for simulation. You can test it yourself but make sure to replace <code>std::system</code> argument with your own commands (different for windows).</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n\nvoid CreateFiles()\n{\n    int i = 1;\n    while (i &lt;= 10000) {\n       // int filename = i;\n        std::string string_i = std::to_string(i);\n        std::string file_dir = &quot;./results/&quot;+string_i+&quot;.txt&quot;;\n        std::ofstream outfile(file_dir);\n\n        // Here is the part where I am filling the .txt with some data\n        outfile &lt;&lt; i &lt;&lt; &quot; some &quot; &lt;&lt; i &lt;&lt; &quot; constant &quot; &lt;&lt; i &lt;&lt; &quot; text &quot; &lt;&lt; i &lt;&lt; &quot; . . . &quot; \n        &lt;&lt; i &lt;&lt; &quot; --more text-- &quot; &lt;&lt; i &lt;&lt; &quot; --even more-- &quot; &lt;&lt; i;\n        i++;\n    }\n}\n\nvoid CreateFilesOneGo(){\n    int i = 1;\n    while(i&lt;=10000){\n        std::string string_i = std::to_string(i);\n        std::string file_dir = &quot;./results3/&quot; + string_i + &quot;.txt&quot;;\n        char buffer[256];\n        sprintf(buffer,&quot;%d some %d constant %d text %d . . . %d --more text-- %d --even more-- %d&quot;,i,i,i,i,i,i,i);\n        std::ofstream outfile(file_dir);\n        outfile &lt;&lt; buffer;\n        i++;\n    }\n}\n        \nvoid CreateFilesFast(){\n    int i = 1;\n    while(i&lt;=10000){\n    // int filename = i;\n    std::string string_i = std::to_string(i);\n    std::string file_dir = &quot;./results2/&quot;+string_i+&quot;.txt&quot;;\n    FILE *f = fopen(file_dir.c_str(), &quot;w&quot;);\n    fprintf(f,&quot;%d some %d constant %d text %d . . . %d --more text-- %d --even more-- %d&quot;,i,i,i,i,i,i,i);\n    fclose(f);\n    i++;\n    }\n}\n\nint main()\n{\n    double normal = 0, one_go = 0, c = 0;\n    for (int u=0;u&lt;50;u++){\n        std::system(&quot;mkdir results results2 results3&quot;);\n        \n        clock_t tStart1 = clock();\n        CreateFiles();\n        //printf(&quot;\\nNormal : How long it took to make files: %.2fs\\n&quot;, (double)(clock() - tStart1)/CLOCKS_PER_SEC);\n        normal+=(double)(clock() - tStart1)/CLOCKS_PER_SEC;\n       \n        tStart1 = clock();\n        CreateFilesFast();\n        //printf(&quot;\\nIn C : How long it took to make files: %.2fs\\n&quot;, (double)(clock() - tStart1)/CLOCKS_PER_SEC);\n        c+=(double)(clock() - tStart1)/CLOCKS_PER_SEC;\n        \n        tStart1 = clock();\n        CreateFilesOneGo();\n        //printf(&quot;\\nOne Go : How long it took to make files: %.2fs\\n&quot;, (double)(clock() - tStart1)/CLOCKS_PER_SEC);\n        one_go+=(double)(clock() - tStart1)/CLOCKS_PER_SEC;\n        \n        std::system(&quot;rm -rf results results2 results3&quot;);\n        std::cout&lt;&lt;&quot;Completed &quot;&lt;&lt;u+1&lt;&lt;&quot;\\n&quot;;\n    }\n    \n    std::cout&lt;&lt;&quot;C on average took : &quot;&lt;&lt;c/50&lt;&lt;&quot;\\n&quot;;\n    std::cout&lt;&lt;&quot;Normal on average took : &quot;&lt;&lt;normal/50&lt;&lt;&quot;\\n&quot;;\n    std::cout&lt;&lt;&quot;One Go C++ took : &quot;&lt;&lt;one_go/50&lt;&lt;&quot;\\n&quot;;\n    \n    return 0;\n}\n</code></pre>\n<p>Also I used clang-7.0 as the compiler.</p>\n<p>If you have any other approach let me know, I will test that too. If you find a mistake do let me know, I will correct it as soon as possible.</p>\n"}], "owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 53940316, "answer_count": 1, "score": 1, "last_activity_date": 1545890233, "creation_date": 1545860252, "question_id": 53937427, "link": "https://stackoverflow.com/questions/53937427/optimizing-txt-files-creation-speed", "title": "Optimizing .txt files creation speed", "body": "<p>I've written the following simple testing code, that creates 10 000 empty .txt files in a subdirectory. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nvoid CreateFiles()\n{\n    int i = 1;\n    while (i &lt;= 10000) {\n        int filename = i;\n        std::string string_i = std::to_string(i);\n        std::string file_dir = \".\\\\results\\\\\"+string_i+\".txt\";\n        std::ofstream outfile(file_dir);\n        i++;\n    }\n}\n\nint main()\n{\n    clock_t tStart1 = clock();\n    CreateFiles();\n    printf(\"\\nHow long it took to make files: %.2fs\\n\", (double)(clock() - tStart1)/CLOCKS_PER_SEC);\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Everything works fine. All 10 000 .txt files are created within <code>~3.55</code> seconds. (using my PC)</p>\n\n<p><strong>Question 1:</strong> Ignoring the conversion from <code>int</code> to <code>std::string</code> etc., is there anything that I could optimize here for the program to create the files faster? I specifically mean the <code>std::ofstream outfile</code> usage - perhaps using something else would be relevantly faster?</p>\n\n<p>Regardless, <code>~3,55</code> seconds is satisfying compared to the following:</p>\n\n<p>I have modified the function so right now it would also fill the .txt files with some random <code>i</code> integer data and some constant text:</p>\n\n<pre><code>void CreateFiles()\n{\n    int i = 1;\n    while (i &lt;= 10000) {\n        int filename = i;\n        std::string string_i = std::to_string(i);\n        std::string file_dir = \".\\\\results\\\\\"+string_i+\".txt\";\n        std::ofstream outfile(file_dir);\n\n        // Here is the part where I am filling the .txt with some data\n        outfile &lt;&lt; i &lt;&lt; \" some \" &lt;&lt; i &lt;&lt; \" constant \" &lt;&lt; i &lt;&lt; \" text \" &lt;&lt; i &lt;&lt; \" . . . \" \n        &lt;&lt; i &lt;&lt; \" --more text-- \" &lt;&lt; i &lt;&lt; \" --even more-- \" &lt;&lt; i;\n        i++;\n    }\n}\n</code></pre>\n\n<p>And now everything (creating the .txt files and filling it with short data) executes within... <code>~37</code> seconds. That's a huge difference. And that's only 10 000 files.</p>\n\n<p><strong>Question 2:</strong> Is there anything I can optimize here? Perhaps there exist some alternative that would fill the .txt files quicker. Or perhaps I have forgotten about something very obvious that slows down the entire process?</p>\n\n<p>Or, perhaps I am exaggerating a little bit and <code>~37</code> seconds seems normal and optimized?</p>\n\n<p>Thanks for sharing your insights!</p>\n"}, {"tags": ["c++", "objective-c", "metal"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1545868028, "post_id": 53937141, "comment_id": 94716564, "body": "You can\u2019t <code>delete</code> a <code>void*</code>."}, {"owner": {"reputation": 1994, "user_id": 1678054, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c18ea7b56bd6d56ef6693921da87e585?s=128&d=identicon&r=PG", "display_name": "Bill Hollings", "link": "https://stackoverflow.com/users/1678054/bill-hollings"}, "edited": false, "score": 0, "creation_date": 1545872529, "post_id": 53937141, "comment_id": 94717210, "body": "Am I correct in assuming you are using C++ becuase you want platform portability? You also mention using Vulkan...presumably for the same reason? In that case it sounds like MoltenVK would be the way you might want to go on Metal platforms (<a href=\"https://github.com/KhronosGroup/MoltenVK\" rel=\"nofollow noreferrer\">github.com/KhronosGroup/MoltenVK</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 4060, "user_id": 763355, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dxAhW.jpg?s=128&g=1", "display_name": "MoDJ", "link": "https://stackoverflow.com/users/763355/modj"}, "edited": false, "score": 0, "creation_date": 1546022273, "post_id": 53938855, "comment_id": 94763420, "body": "This is a better design approach."}], "tags": [], "owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "is_accepted": false, "score": 2, "last_activity_date": 1545874645, "creation_date": 1545874645, "answer_id": 53938855, "question_id": 53937141, "link": "https://stackoverflow.com/questions/53937141/how-can-i-store-a-idmtlbuffer-inside-of-c-code/53938855#53938855", "title": "How can I store a id&lt;MTLBuffer&gt; inside of c++ code?", "body": "<p>It looks to me like you're using the wrong abstraction. This is often solved by using a base class that implements the things you want to do at a high level, and having a subclass for each platform that does the specific work. So in your case, you might have something like a Renderer base class:</p>\n\n<pre><code>class Renderer {\n    public:\n        Renderer();\n        ~Renderer();\n\n        virtual void* allocateBuffer(const size_t numBytes) = 0;\n        virtual void renderWorld() = 0;\n        ... etc.\n};\n</code></pre>\n\n<p>Then you would have 2 platform-specific classes: <code>VulkanRenderer</code> and <code>MetalRenderer</code>:</p>\n\n<pre><code>class VulkanRenderer: public Renderer {\n    public:\n        VulkanRenderer();\n        ~VulkanRenderer();\n\n        virtual void* allocateBuffer(const size_t numBytes);\n        virtual void renderWorld();\n        ... etc.\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class MetalRenderer: public Renderer {\n    public:\n        MetalRenderer();\n        ~MetalRenderer();\n\n        virtual void* allocateBuffer(const size_t numBytes);\n        virtual void renderWorld();\n        ... etc.\n};\n</code></pre>\n\n<p>Your implementation file for the <code>MetalRenderer</code> class would be a .mm file instead of a .cpp file, indicating that it's an Objective-C++ file and allowing the C++ object to contain Objective-C objects. </p>\n\n<p>None of your other code should deal with either <code>MetalRenderer</code> or <code>VulkanRenderer</code> but instead just <code>Renderer</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1550732918, "post_id": 53941484, "comment_id": 96379117, "body": "Good answer.  I am using Objective-C++ to subclass generic game-engine C++ types (Textures, Buffers, Pipelines, etc) and would like to use your approach of storing <code>id&lt;MTLWhatever&gt; whatever;</code> as instance variables and still use ARC if possible.  Are you able to point to examples of allocation and deallocation from within the C++ subclass implementation?"}, {"owner": {"reputation": 101, "user_id": 13225763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6ad2fa814b2dfa6ac778ccc72e7116?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre Camilleri", "link": "https://stackoverflow.com/users/13225763/alexandre-camilleri"}, "edited": false, "score": 0, "creation_date": 1610001588, "post_id": 53941484, "comment_id": 115996663, "body": "@Idoogy Any way to directly read from the MTLBuffer instead? Or convert the MTL buffer to an openGL/vtk buffer"}], "tags": [], "owner": {"reputation": 2529, "user_id": 373944, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3774c8233bdd5f0491629502b1b3ab27?s=128&d=identicon&r=PG", "display_name": "ldoogy", "link": "https://stackoverflow.com/users/373944/ldoogy"}, "is_accepted": true, "score": 5, "last_activity_date": 1545934484, "last_edit_date": 1545934484, "creation_date": 1545896576, "answer_id": 53941484, "question_id": 53937141, "link": "https://stackoverflow.com/questions/53937141/how-can-i-store-a-idmtlbuffer-inside-of-c-code/53941484#53941484", "title": "How can I store a id&lt;MTLBuffer&gt; inside of c++ code?", "body": "<p>There are several points you need to consider here:</p>\n\n<p><strong>Your MTLBuffer object pointer does <em>not</em> point to the object's contents</strong> </p>\n\n<p><code>MTLBuffer</code> is a Metal framework object that manages a memory buffer on the GPU. The address you have is just the address of that object. For some buffers, Metal provides a way to access the contents of the buffer from the CPU by using the <code>[MTLBuffer contents]</code> method. <code>contents</code> returns a <code>void *</code> that you can directly use to read and write from your buffer, with the following caveats:</p>\n\n<p><strong>Your MTLBuffer's contents may not always be accessible from the CPU</strong> </p>\n\n<p>It depends on which platform you're on. If you're solely on iOS/tvOS, just create your <code>MTLBuffer</code> with the <code>MTLStorageModeShared</code> storage mode, and you should be good to go -- Metal will ensure the data you see on the CPU is in sync with the GPU's view. On macOS it depends on which GPU you're using so there are some additional subtleties there. For now I'm assuming we're talking iOS/tvOS only.</p>\n\n<p><strong>There are several ways to combine Objective-C with C++ code</strong> </p>\n\n<p>One option is to create Objective-C++ files (.mm files), and put all your Metal-specific code in a subclass within those .mm files. That would allow you to have the benefit of Objective-C's ARC (Automatic Reference Counting) and still create nice, generic C++ wrappers. In the header file for your Objective-C++ class, you would do something like this:</p>\n\n<pre><code>class MetalBuffer : GenericBuffer\n{\n   private:\n#ifdef __OBJC__\n      id &lt;MTLBuffer&gt; metalBuffer;\n#else\n      void *internalMetalBuffer;\n#endif\n}\n</code></pre>\n\n<p>This would let your regular (non-Objective-C++) classes include the Objective-C++ header. I made the \"special\" managed pointer <code>private</code> to ensure no one tries to access it from outside the Objective-C++ class, as that would obviously be a bad idea. </p>\n\n<p>If this approach isn't suitable, you could just do everything in C++, but then you'd have to manually track references to your Objective-C objects:</p>\n\n<p><strong>If you must store your objects in your C++ code as void pointers, you will need manual reference counting</strong></p>\n\n<p>Objective-C uses ARC to track object usage and to automatically release objects as appropriate. If you're trying to manage the whole thing in C++, you will need to manually manage references to your objects (such as your <code>MTLBuffer</code> and beyond). This is done by telling ARC that you wish to type-cast the managed, Objective-C <code>id</code> objects to regular C pointers. </p>\n\n<p>After instantiating your <code>MTLBuffer</code>, you can use <code>CFBridgingRetain()</code> on your object, which now lets you store it as a <code>void *</code> (not to be confused with the <code>void *</code> you grabbed that points to the <em>contents</em> of your buffer!) in your C++ class. When you're done using the <code>MTLBuffer</code>, you can call <code>CFRelease()</code> on your <code>void *</code> to free it up. You do not need to worry about freeing the <code>contents</code> buffer -- the underlying memory will be freed automatically once the <code>MTLBuffer</code> object is released (such as when you call <code>CFRelease()</code>).</p>\n\n<p>Note that you can use <code>CFBridgingRelease()</code> when you need to invoke Objective-C functions that use your <code>MTLBuffer</code> object (such as <code>setFragmentBuffer</code>, etc.) Think of <code>CFBridgingRelease()</code> as a converter that hands your object back to ARC, but note that it includes a manual release, which means that once Metal is done with your object, it will automatically be released. </p>\n\n<p>If you want your object to live beyond the current Metal request, you should retain another pointer to it using <code>CFBridgingRetain()</code>. </p>\n\n<p>Again, this is a last resort -- I would not recommend taking this route. </p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1414, "user_id": 5183807, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/34e6711722a4f7d037a3b8ee8de5e491?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/5183807/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 1, "accepted_answer_id": 53941484, "answer_count": 2, "score": 2, "last_activity_date": 1545934484, "creation_date": 1545858207, "question_id": 53937141, "link": "https://stackoverflow.com/questions/53937141/how-can-i-store-a-idmtlbuffer-inside-of-c-code", "title": "How can I store a id&lt;MTLBuffer&gt; inside of c++ code?", "body": "<p>I am writing a cross-platform engine to do some rendering. I am trying to create a cross-platform structure that essentially manages a type of geometry that is drawn.</p>\n\n<p>The goal is that there is a c++ class that holds a void* to a block of memory allocated for a buffer and then that pointer is passed into a MTLBuffer or a Vulcan Buffer for use in rendering. As such one of the fields of this class is going to need to be a buffer but in a cross-platform sense.</p>\n\n<p>For a portion of my drawing, the code should look like</p>\n\n<pre><code>func draw() {\n   CrossPlatformBuffers* buffs = // preset list\n   for (buffer in buffs {\n      PlatformSpecificEngine.drawWith((PlatformSpecificBuffer)buffs-&gt;buffer)\n   }\n}\n</code></pre>\n\n<p>So essentially I need to be able to store my MTLBuffer as a void* within a c++ class. This is confusing to me as I am not exactly sure how c++ plays with objective-c ARC or exactly what id is supposed to mean.</p>\n\n<p>Would I encounter any issues if I just casted the id into a void* and passed it into a c++ class as and later called delete on it?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1545863920, "post_id": 53937054, "comment_id": 94715796, "body": "Perhaps you can confine the cursor? <a href=\"https://docs.microsoft.com/el-gr/windows/desktop/menurc/using-cursors#confining-a-cursor\" rel=\"nofollow noreferrer\">docs.microsoft.com/el-gr/windows/desktop/menurc/&hellip;</a>"}, {"owner": {"reputation": 221, "user_id": 4481876, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dedc3f9101eaa933cec2ab03a546d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "estw272", "link": "https://stackoverflow.com/users/4481876/estw272"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1545873487, "post_id": 53937054, "comment_id": 94717363, "body": "I guess I could confine it outside the window as the last resort, but I am looking for  something less intrusive for user experience"}], "owner": {"reputation": 221, "user_id": 4481876, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dedc3f9101eaa933cec2ab03a546d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "estw272", "link": "https://stackoverflow.com/users/4481876/estw272"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545857598, "creation_date": 1545857598, "question_id": 53937054, "link": "https://stackoverflow.com/questions/53937054/using-winapi-to-simulate-mouse-clicks-and-scroll-in-a-window-android-emulator", "title": "Using winapi to simulate mouse clicks and scroll in a window (android emulator)", "body": "<p>I am trying to simulate clicks (finger taps in my case) and scrolls in a window, android emulator specifically. The code is simple:</p>\n\n<pre><code>PostMessage(hwnd, WM_LBUTTONDOWN, MK_LBUTTON, MAKELPARAM(200, 400));\nstd::this_thread::sleep_for(std::chrono::milliseconds(50));\nPostMessage(hwnd, WM_MOUSEMOVE, MK_LBUTTON, MAKELPARAM(200, 500));\nstd::this_thread::sleep_for(std::chrono::milliseconds(50));\nPostMessage(hwnd, WM_LBUTTONUP, MK_LBUTTON, MAKELPARAM(200, 500));\nstd::this_thread::sleep_for(std::chrono::milliseconds(50));\n</code></pre>\n\n<p>And it works fine, except if the real mouse cursor is over that window it interferes with simulated mouse movement. \nSo if for example the code is supposed to scroll up and the mouse cursor is moving the opposite way of simulated movement, the application is trying to scroll both ways at the same time.</p>\n\n<p>Is there any way to block the real mouse input for a specific window while this code is executing? \nOr maybe any other way to stop the real mouse from interfering?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1545856400, "post_id": 53936848, "comment_id": 94713751, "body": "For some specific input, what is the expected and actual output (please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>)? And have you tried to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug</a> your program?"}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1545856402, "post_id": 53936848, "comment_id": 94713754, "body": "Which encoding are you using in your terminal?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1545856500, "post_id": 53936848, "comment_id": 94713785, "body": "Regarding debugging, I also recommend you add a <code>default</code> case to your <code>switch</code> statement, as it will make it easier to debug."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1545856646, "post_id": 53936848, "comment_id": 94713823, "body": "You have 2 variables <code>i</code> counter and loop."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1545856649, "post_id": 53936848, "comment_id": 94713824, "body": "Lastly, what happens in the case of <code>&#39;i&#39;</code> and <code>&#39;I&#39;</code>? How many variables named <code>i</code> do you have?"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1545856783, "post_id": 53936848, "comment_id": 94713863, "body": "Try adding <code>-Wshadow</code> to your compile command"}, {"owner": {"reputation": 1, "user_id": 9439227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5515530484dbee08e21f2927206ed211?s=128&d=identicon&r=PG&f=1", "display_name": "Lightning", "link": "https://stackoverflow.com/users/9439227/lightning"}, "edited": false, "score": 0, "creation_date": 1545856803, "post_id": 53936848, "comment_id": 94713871, "body": "Enter the string: Instruction There were 3 vowels in total. There were 0 As, 0 Is, 0 Os, 1 Us, and 0 Es."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9439227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5515530484dbee08e21f2927206ed211?s=128&d=identicon&r=PG&f=1", "display_name": "Lightning", "link": "https://stackoverflow.com/users/9439227/lightning"}, "edited": false, "score": 1, "creation_date": 1545857016, "post_id": 53936919, "comment_id": 94713926, "body": "Thank you, this solved my problem and I understand the mistake now."}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 5, "last_activity_date": 1545856660, "creation_date": 1545856660, "answer_id": 53936919, "question_id": 53936848, "link": "https://stackoverflow.com/questions/53936848/the-counter-doesnt-count-all-the-different-vowels/53936919#53936919", "title": "The counter doesn&#39;t count all the different vowels", "body": "<p>Your loop variable <code>i</code> is hiding the <code>i</code> in the outer scope. That results in <i>i</i>s not being counted correctly and in skipping characters (as every time you meet an <code>'i'</code> you increment <code>i</code> the loop variable).</p>\n\n<p>Change the loop variable name to something else. </p>\n"}], "owner": {"reputation": 1, "user_id": 9439227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5515530484dbee08e21f2927206ed211?s=128&d=identicon&r=PG&f=1", "display_name": "Lightning", "link": "https://stackoverflow.com/users/9439227/lightning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53936919, "answer_count": 1, "score": -1, "last_activity_date": 1545856660, "creation_date": 1545856285, "question_id": 53936848, "link": "https://stackoverflow.com/questions/53936848/the-counter-doesnt-count-all-the-different-vowels", "title": "The counter doesn&#39;t count all the different vowels", "body": "<p>The program is supposed to take a string as input and count the number of vowels but also which exact vowels they are. For some reason it seems to be able to count As but not other vowels.</p>\n\n<pre><code>int main()\n{\nstd::string inp;\nint counter = 0;\nint a = 0, i = 0, e = 0, o = 0, u = 0;\nstd::cout &lt;&lt; \"Enter the string: \";\nstd::cin &gt;&gt; inp;\nfor (int i = 0; i &lt; inp.length(); i++)\n{\n    switch(inp[i])\n    {\n        case 'A':\n        case 'a':\n            counter++;\n            a++;\n            break;\n        case 'E':\n        case 'e':\n            counter++;\n            e++;\n            break;\n        case 'i':\n        case 'I':\n            counter++;\n            i++;\n            break;\n        case 'u':\n        case 'U':\n            counter++;\n            u++;\n            break;\n        case 'o':\n        case 'O':\n            counter++;\n            o++;\n            break;\n    }\n} \nstd::cout &lt;&lt; \"There were \" &lt;&lt; counter &lt;&lt; \" vowels in total.\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"There were \" &lt;&lt; a &lt;&lt; \" As, \" &lt;&lt; i &lt;&lt; \" Is, \" &lt;&lt; o &lt;&lt; \" Os, \" &lt;&lt; u &lt;&lt; \" Us, and \" &lt;&lt; e &lt;&lt; \" Es.\" &lt;&lt; std::endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "warnings"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545855351, "post_id": 53936577, "comment_id": 94713501, "body": "Unrelated: if <code>SpamBannListArray</code> is a library container, odds are pretty good that you can use a range-based for loop: <code>for (const auto &amp; spamban: SpamBannListArray)</code> and eliminate a bunch of code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545855352, "post_id": 53936577, "comment_id": 94713502, "body": "Btw, <i>for range</i> is probably sufficient: <code>for (&#47;*const*&#47; auto&amp; e : SpamBannListArray)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 2943424, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/935a054be83a4997e3260a6ef30543d6?s=128&d=identicon&r=PG&f=1", "display_name": "kirikoumath", "link": "https://stackoverflow.com/users/2943424/kirikoumath"}, "edited": false, "score": 0, "creation_date": 1545855224, "post_id": 53936603, "comment_id": 94713463, "body": "You can also use auto to declare the loop variable"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 663, "user_id": 2943424, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/935a054be83a4997e3260a6ef30543d6?s=128&d=identicon&r=PG&f=1", "display_name": "kirikoumath", "link": "https://stackoverflow.com/users/2943424/kirikoumath"}, "edited": false, "score": 3, "creation_date": 1545855333, "post_id": 53936603, "comment_id": 94713495, "body": "@kirikoumath Not with that literal <code>0</code> actually. You have to write at least to write <code>auto i = 0u</code>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1545855379, "post_id": 53936603, "comment_id": 94713508, "body": "<code>size_t</code> is the more correct form. Leave the data model up to the implementation."}, {"owner": {"reputation": 663, "user_id": 2943424, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/935a054be83a4997e3260a6ef30543d6?s=128&d=identicon&r=PG&f=1", "display_name": "kirikoumath", "link": "https://stackoverflow.com/users/2943424/kirikoumath"}, "edited": false, "score": 0, "creation_date": 1545855521, "post_id": 53936603, "comment_id": 94713537, "body": "Of course, you\u2019re correct. And indeed size_t is best option"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1545876624, "post_id": 53936603, "comment_id": 94717732, "body": "@CinderBiscuits Depends what <code>SpamBannListArray</code> is."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545877525, "post_id": 53936603, "comment_id": 94717879, "body": "@LightnessRacesinOrbit The line comes from an open source game engine: <a href=\"https://github.com/nikita322/vanillacore_llvm6/blob/c2b10f6813f2999e397b0c05dbc4233863ac250f/vanilla/source/game/src/char.cpp\" rel=\"nofollow noreferrer\">github.com/nikita322/vanillacore_llvm6/blob/&hellip;</a> <code>std::list&lt;std::string&gt;</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1545877684, "post_id": 53936603, "comment_id": 94717900, "body": "@CinderBiscuits It doesn&#39;t though does it because that line already has <code>unsigned int i</code>. Anyway, with the suggestion as you&#39;ve phrased it, I think it would be safer if it clarified that it is contingent on the RHS operand also being a <code>size_t</code>, which may well be (probably is) the case here but isn&#39;t necessarily in general, and the question doesn&#39;t ask about a specific library. Ta"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545878626, "post_id": 53936603, "comment_id": 94718061, "body": "@LightnessRacesinOrbit It does though because that particular repo as stated in the description as updated for LLVM6, but to humor you, we will travel back in time to the original patches posted to a forum for the game: <a href=\"https://metin2dev.org/board/index.php?/topic/169-cadvanced-chat-spam-protection/\" rel=\"nofollow noreferrer\">metin2dev.org/board/index.php?/topic/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1545878748, "post_id": 53936603, "comment_id": 94718080, "body": "@CinderBiscuits I think you&#39;re missing my point, which is that unless the advice is clearly targeted at that specific library&#39;s code, or more generally attached to a disclaimer that it only applies when <code>.size()</code> returns a <code>size_t</code>, it&#39;s a false generalisation."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1545880418, "post_id": 53936603, "comment_id": 94718329, "body": "Well given we can deduce with almost guaranteed certainty the source of this line, by the unique spelling of the member name, by the line number, by the asker&#39;s history of asking questions about game programming, a disclaimer that some code doesn&#39;t conform to STL guidelines isn&#39;t necessary. You now know the context of the line and that the RHS evaluates to <code>size_t</code>. There&#39;s no need to generalize it."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 5, "last_activity_date": 1545856857, "last_edit_date": 1545856857, "creation_date": 1545854672, "answer_id": 53936603, "question_id": 53936577, "link": "https://stackoverflow.com/questions/53936577/how-can-i-edit-this-line-to-dont-be-a-warning-aymore/53936603#53936603", "title": "How can i edit this line to don&#39;t be a warning aymore", "body": "<p>You should use a <code>unsigned</code> type for the declaration of <code>i</code> in the <code>for()</code> loop header, since <code>SpamBannListArray.size()</code> most probably returns an <code>unsigned</code> type:</p>\n\n<pre><code> for (unsigned int i = 0; i &lt; SpamBannListArray.size(); i++)\n   // ^^^^^^^^\n</code></pre>\n\n<p>or </p>\n\n<pre><code> for (size_t i = 0; i &lt; SpamBannListArray.size(); i++)\n</code></pre>\n\n<p>Otherwise your code might be prone for <code>signed</code> value overflows / wraparounds when hitting negative values.</p>\n\n<hr>\n\n<p>As pointed out in comments using a range based <code>for()</code> loop, without need to specify an indexing variable should be preferred with the current c++ standard:</p>\n\n<pre><code>for (auto item : SpamBannListArray) {\n    // Do something with item\n}\n</code></pre>\n\n<p>In case you need to manipulate items inplace, use <code>auto &amp;</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 7127203, "user_type": "registered", "profile_image": "https://graph.facebook.com/981916035247593/picture?type=large", "display_name": "Dutz\u0173 Dutz\u0173", "link": "https://stackoverflow.com/users/7127203/dutz%c5%b3-dutz%c5%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 53936603, "answer_count": 1, "score": 0, "last_activity_date": 1545875627, "creation_date": 1545854503, "last_edit_date": 1545855115, "question_id": 53936577, "link": "https://stackoverflow.com/questions/53936577/how-can-i-edit-this-line-to-dont-be-a-warning-aymore", "title": "How can i edit this line to don&#39;t be a warning aymore", "body": "<p>The following line gives me a warning:</p>\n\n<pre><code>for (int i = 0; i &lt; SpamBannListArray.size(); i++)\n</code></pre>\n\n<blockquote>\n<pre><code>char.cpp: In member function 'bool CHARACTER::SpamListCheck(const char*)':\nchar.cpp:7280: warning: comparison between signed and unsigned integer expressions\n</code></pre>\n</blockquote>\n\n<p>What do I need to change in order to get rid of the warning above?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1545878017, "post_id": 53936828, "comment_id": 94717958, "body": "Thanks, so is it correct to say that all of these macros are mutually exclusive, and <code>#ifdef BOOST_ENDIAN_LITTLE_BYTE</code> should be the most common case (i.e. for intel/AMD desktops)?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1545920167, "post_id": 53936828, "comment_id": 94731279, "body": "@thc For intel/AMD desktops yes, BOOST_ENDIAN_LITTLE_BYTE would be the thing to see."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1545861077, "last_edit_date": 1545861077, "creation_date": 1545856151, "answer_id": 53936828, "question_id": 53936546, "link": "https://stackoverflow.com/questions/53936546/what-is-the-difference-between-boost-endian-big-byte-and-boost-endian-big-wor/53936828#53936828", "title": "What is the difference between `BOOST_ENDIAN_BIG_BYTE` and `BOOST_ENDIAN_BIG_WORD`?", "body": "<p><strong>Word-swapped</strong> endiannes refer to (now prehistoric) hardware which could be considered middle-endian: two halves of a word would be swapped, but byte-order in the half-word would be not. PDP-11 is probably the most famous architecture to have this. </p>\n\n<p>The reason for boost to support this endiannes is unclear, to be honest, as I am pretty sure boost is generally not supported well on those prehistoric architectures. For example, C++ standard makes do with <em>little</em> and <em>big</em> options: <a href=\"https://en.cppreference.com/w/cpp/types/endian\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/types/endian</a></p>\n\n<p>See more on middle endian: <a href=\"https://en.wikipedia.org/wiki/Endianness#Middle-endian\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Endianness#Middle-endian</a></p>\n"}], "owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 53936828, "answer_count": 1, "score": 1, "last_activity_date": 1545861077, "creation_date": 1545854308, "question_id": 53936546, "link": "https://stackoverflow.com/questions/53936546/what-is-the-difference-between-boost-endian-big-byte-and-boost-endian-big-wor", "title": "What is the difference between `BOOST_ENDIAN_BIG_BYTE` and `BOOST_ENDIAN_BIG_WORD`?", "body": "<p>In the latest release of boost, there are 4 endian macros defined:</p>\n\n<pre><code>* `BOOST_ENDIAN_BIG_BYTE`, byte-swapped big-endian.\n* `BOOST_ENDIAN_BIG_WORD`, word-swapped big-endian.\n* `BOOST_ENDIAN_LITTLE_BYTE`, byte-swapped little-endian.\n* `BOOST_ENDIAN_LITTLE_WORD`, word-swapped little-endian.\n</code></pre>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_69_0/boost/predef/other/endian.h\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/boost/predef/other/endian.h</a></p>\n\n<p>I'm unclear on the distinction between <code>_BYTE</code> and <code>_WORD</code> macros.  </p>\n"}, {"tags": ["c++", "arrays", "string-hashing"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10836311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6419e6c4ddb508768acc0da07357a61?s=128&d=identicon&r=PG&f=1", "display_name": "J.Sou", "link": "https://stackoverflow.com/users/10836311/j-sou"}, "edited": false, "score": 0, "creation_date": 1545943605, "post_id": 53936371, "comment_id": 94739895, "body": "I could not fully understand.Can you explain bit more?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 1, "user_id": 10836311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6419e6c4ddb508768acc0da07357a61?s=128&d=identicon&r=PG&f=1", "display_name": "J.Sou", "link": "https://stackoverflow.com/users/10836311/j-sou"}, "edited": false, "score": 0, "creation_date": 1545960847, "post_id": 53936371, "comment_id": 94744011, "body": "@J.Sou <code>FNVHash</code> returns an <code>unsigned int</code>, which appears to be at least a 32-bit number on your system.  The <code>words</code> array only has <code>INT16_MAX</code> elements, which would be only 16 bits.  Any number larger than 65535 would access out-of-bounds and likely cause the access violation."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1545853017, "creation_date": 1545853017, "answer_id": 53936371, "question_id": 53936309, "link": "https://stackoverflow.com/questions/53936309/memory-access-violation-error-while-compiling-hashing-algorithm/53936371#53936371", "title": "memory access violation error while compiling hashing algorithm", "body": "<p>You don't have anything to limit the value returned by <code>FNVHash</code> to the range of indexes used by <code>words</code>.  Either <code>FNVHash</code> needs to ensure the hash is within the range [0..NAX] or the user (<code>insert</code>) needs to do so.</p>\n"}], "owner": {"reputation": 1, "user_id": 10836311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6419e6c4ddb508768acc0da07357a61?s=128&d=identicon&r=PG&f=1", "display_name": "J.Sou", "link": "https://stackoverflow.com/users/10836311/j-sou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545853017, "creation_date": 1545852570, "question_id": 53936309, "link": "https://stackoverflow.com/questions/53936309/memory-access-violation-error-while-compiling-hashing-algorithm", "title": "memory access violation error while compiling hashing algorithm", "body": "<p>I am getting error while inserting strings to memory.\n0xC0000005 access violation error.I tried to change my array size which cause to bad allocation.\nint main part is only sending string words to insert function until file ends.</p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nconst unsigned int MAX = INT16_MAX;\nstring *words = new string[MAX];\nint* instances = new int[MAX];\n\n//int* alloc = new int[MAX];\nint ucounts = 0;\n\nstatic unsigned int FNVHash(string str) {\nconst unsigned int fnv_prime = 0x811C9DC5;\nunsigned int hash = 0;\nunsigned int i = 0;\nunsigned int len = str.length();\n\nfor (i = 0; i &lt; len; i++)\n{\n    hash *= fnv_prime;\n    hash ^= (str[i]);\n}\n\nreturn hash;\n}\n\nvoid insert(string input) {\n//check first, add if not present\n\nif (words[FNVHash(input)] != input) {  //&lt;-Compiler shows error here.\n    words[FNVHash(input)] = input;\n    instances[FNVHash(input)]=1;\n    ucounts++;\n}\nelse {\n\n    instances[FNVHash(input)]++;\n}   \n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "uwp"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1545852500, "post_id": 53936266, "comment_id": 94712691, "body": "Look on the &quot;modules&quot; tab (you may need to display it) to see why the PDB wasn&#39;t loaded."}, {"owner": {"reputation": 445, "user_id": 6175092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdf773adcd27bd609b94f9e7e1e355b?s=128&d=identicon&r=PG&f=1", "display_name": "doby", "link": "https://stackoverflow.com/users/6175092/doby"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1545856245, "post_id": 53936266, "comment_id": 94713720, "body": "@1201ProgramAlarm thank you for the reminder.  I have edited the post to note that there are no modules loaded."}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 6175092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdf773adcd27bd609b94f9e7e1e355b?s=128&d=identicon&r=PG&f=1", "display_name": "doby", "link": "https://stackoverflow.com/users/6175092/doby"}, "is_accepted": false, "score": 0, "last_activity_date": 1545868387, "creation_date": 1545868387, "answer_id": 53938330, "question_id": 53936266, "link": "https://stackoverflow.com/questions/53936266/debugger-fail-with-fresh-uwp-c-solution/53938330#53938330", "title": "Debugger fail with fresh UWP C++ solution", "body": "<p>Set the debugger type to native.  </p>\n"}], "owner": {"reputation": 445, "user_id": 6175092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdf773adcd27bd609b94f9e7e1e355b?s=128&d=identicon&r=PG&f=1", "display_name": "doby", "link": "https://stackoverflow.com/users/6175092/doby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545868387, "creation_date": 1545852313, "last_edit_date": 1545856944, "question_id": 53936266, "link": "https://stackoverflow.com/questions/53936266/debugger-fail-with-fresh-uwp-c-solution", "title": "Debugger fail with fresh UWP C++ solution", "body": "<p>I have installed Visual Studio twice to attempt to fix this.  </p>\n\n<p>Process:</p>\n\n<p>1) new solution for C++ UWP.<br>\n2) add a button and an event handler\n        to mainpage.xaml. </p>\n\n<p>3) include a line of code in the event handler\n        (int dum=0;) </p>\n\n<p>4) set a breakpoint for the line of code.<br>\n5) run in debug mode.</p>\n\n<p>Hitting the button on the page has no effect.  Hover over the breakpoint and the following message is displayed \"The breakpoint will not be hit.  No symbols have been loaded for this document.\"</p>\n\n<p>There are no modules loaded.  I tried to add the project's .pdb file to the Tools->Options->Debug->Symbols and that had no effect.  </p>\n\n<p>There are no modules loaded in the modules tab.  </p>\n\n<p>I have the same problem with two other solutions -- one of which is my working solution.  This is a work-stopping problem. </p>\n\n<p>Other ideas?  </p>\n"}, {"tags": ["c++", "iostream", "ostream"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545851835, "post_id": 53936151, "comment_id": 94712495, "body": "Look it up. It&#39;s easy to find."}, {"owner": {"reputation": 67, "user_id": 10829048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138f16c7efae685ea12f43828c927685?s=128&d=identicon&r=PG&f=1", "display_name": "Lai Yan Hui", "link": "https://stackoverflow.com/users/10829048/lai-yan-hui"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545852051, "post_id": 53936151, "comment_id": 94712563, "body": "Sorry? What does that mean?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1545852099, "post_id": 53936151, "comment_id": 94712580, "body": "The original stream buffer obtained through <code>cout.rdbuf()</code> can be saved in a variable. Is that the question?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1545852107, "post_id": 53936151, "comment_id": 94712584, "body": "It means <b>do some research</b>. You might start by looking up what <code>std::basic_ostream::rdbuf()</code> does. Hint: the first place I looked had an example that you could build from."}, {"owner": {"reputation": 67, "user_id": 10829048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138f16c7efae685ea12f43828c927685?s=128&d=identicon&r=PG&f=1", "display_name": "Lai Yan Hui", "link": "https://stackoverflow.com/users/10829048/lai-yan-hui"}, "edited": false, "score": 0, "creation_date": 1545883912, "post_id": 53936151, "comment_id": 94718821, "body": "Hey, I&#39;m not that kind of person who only ask questions and doesn&#39;t think or research before that. I simply ask this because I lack ideas, not because I don&#39;t want to think about it."}, {"owner": {"reputation": 67, "user_id": 10829048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138f16c7efae685ea12f43828c927685?s=128&d=identicon&r=PG&f=1", "display_name": "Lai Yan Hui", "link": "https://stackoverflow.com/users/10829048/lai-yan-hui"}, "edited": false, "score": 0, "creation_date": 1545883997, "post_id": 53936151, "comment_id": 94718829, "body": "Anyway, I&#39;ll try it out with your tip, thanks."}, {"owner": {"reputation": 67, "user_id": 10829048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138f16c7efae685ea12f43828c927685?s=128&d=identicon&r=PG&f=1", "display_name": "Lai Yan Hui", "link": "https://stackoverflow.com/users/10829048/lai-yan-hui"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1545909807, "post_id": 53936151, "comment_id": 94727154, "body": "OMG, I&#39;ve just tried out your method @PeteBecker and I&#39;ve found out my question is really stupid. Oops, sorry for bothering, LOL. Your suggestion about <b>[looking up what <code>std::basic_ostream::rdbuf()</code> does]</b> is really useful."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 6366151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x5LLl.png?s=128&g=1", "display_name": "Arnold Lai", "link": "https://stackoverflow.com/users/6366151/arnold-lai"}, "is_accepted": true, "score": 1, "last_activity_date": 1545970932, "creation_date": 1545970932, "answer_id": 53953655, "question_id": 53936151, "link": "https://stackoverflow.com/questions/53936151/how-to-reverse-the-redirecting-output-action-in-cpp/53953655#53953655", "title": "How to reverse the redirecting output action in CPP?", "body": "<p><a href=\"http://www.cplusplus.com/reference/ios/ios/rdbuf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/ios/ios/rdbuf/</a></p>\n\n<p><code>streambuf * some_name = cout.rdbuf();</code> to store your original address of the normal output stream.</p>\n\n<p><code>cout.rdbuf(some_name);</code> to <strong>restore</strong>.</p>\n\n<p>This also works on other types of stream. (Although it also works for the input stream, there's no reason to do that.)</p>\n"}], "owner": {"reputation": 67, "user_id": 10829048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138f16c7efae685ea12f43828c927685?s=128&d=identicon&r=PG&f=1", "display_name": "Lai Yan Hui", "link": "https://stackoverflow.com/users/10829048/lai-yan-hui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53953655, "answer_count": 1, "score": -1, "last_activity_date": 1545970932, "creation_date": 1545851456, "last_edit_date": 1545851949, "question_id": 53936151, "link": "https://stackoverflow.com/questions/53936151/how-to-reverse-the-redirecting-output-action-in-cpp", "title": "How to reverse the redirecting output action in CPP?", "body": "<p>This seems a bit funny to me when I see this problem: </p>\n\n<pre><code>cout.rdbuf(cerr.rdbuf());\n</code></pre>\n\n<p>Yeah, successfully redirected the normal output to error output stream. But here's the nightmare, I wanted to <code>REVERSE</code> this (stupid) action. But <code>cerr.rdbuf(cout.rdbuf());</code> doesn't help after the first command has ran. i.e. there's no change in the outputting stream.</p>\n\n<blockquote>\n  <p>How can that be done in C++?</p>\n</blockquote>\n\n<p>(\"that\" is redirecting the <code>normal output stream</code> back to itself (umm) and seperate it from the <code>error output stream</code>)</p>\n"}, {"tags": ["c++", "shared-ptr", "natvis"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "edited": false, "score": 0, "creation_date": 1546809776, "post_id": 54013047, "comment_id": 94965335, "body": "Thank you! After a few days of no answer I played with it a bit more, and got scary close to this answer - only overlooking PropModel expand tag. Also, thanks for the advice - I&#39;ll be sure to check code analysis before this code ever leaves my computer. I agree, I should handle an empty pointer, but if it ever is, that indicates a bigger problem. So at least for now, the default will do.   I&#39;ll include my final result as an answer, but marking yours as correct."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 3, "last_activity_date": 1546463058, "last_edit_date": 1546463058, "creation_date": 1546462462, "answer_id": 54013047, "question_id": 53936148, "link": "https://stackoverflow.com/questions/53936148/how-to-display-underlying-data-in-a-type-erasure-class-using-shared-ptr/54013047#54013047", "title": "How to display underlying data in a type erasure class using shared_ptr", "body": "<p>It is as easy as adding logic for <code>Prop::PropModel</code>:</p>\n\n<pre><code>&lt;Type Name=\"Prop::PropModel&amp;lt;*&amp;gt;\"&gt;\n  &lt;DisplayString&gt;{prop}&lt;/DisplayString&gt;\n  &lt;Expand&gt;\n    &lt;Item Name=\"prop\"&gt;prop&lt;/Item&gt;\n  &lt;/Expand&gt;\n&lt;/Type&gt;\n</code></pre>\n\n<p>I have tested with</p>\n\n<pre><code>Prop p1{};\nProp p2{ 42 };\nProp p3{ std::string{\"x\"} };\n</code></pre>\n\n<p>and the display is</p>\n\n<p><a href=\"https://i.stack.imgur.com/jArhh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jArhh.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see your code for type <code>Prop</code> is not optimal. It could check for an empty <code>shared_ptr</code> and have an extra display for that. My logic for <code>Prop::PropModel</code> can also be improved if you want some type to be displayed differently, for example <code>int</code>s being displayed decimal.</p>\n\n<p>By the way, you should enable MSVC code analysis. Your code triggers some warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "is_accepted": false, "score": 1, "last_activity_date": 1546810415, "creation_date": 1546810415, "answer_id": 54066148, "question_id": 53936148, "link": "https://stackoverflow.com/questions/53936148/how-to-display-underlying-data-in-a-type-erasure-class-using-shared-ptr/54066148#54066148", "title": "How to display underlying data in a type erasure class using shared_ptr", "body": "<p>I eventually got a lot closer to Werner Henze's answer, but said answer supplied the final info I needed. For completion's sake, below is my final natvis for this class, as well as a picture of how it appears in the debugger. In this case, the shared_ptr points to a <code>std::vector&lt;int&gt;</code></p>\n\n<pre><code>  &lt;Type Name=\"Prop\"&gt;\n    &lt;DisplayString&gt;{*prop}&lt;/DisplayString&gt;\n    &lt;Expand&gt;\n      &lt;ExpandedItem&gt;(*prop)&lt;/ExpandedItem&gt;\n    &lt;/Expand&gt;\n  &lt;/Type&gt;\n\n  &lt;Type Name=\"Prop::PropModel&amp;lt;*&amp;gt;\"&gt;\n    &lt;DisplayString&gt;{prop}&lt;/DisplayString&gt;\n    &lt;Expand&gt;\n      &lt;ExpandedItem&gt;prop&lt;/ExpandedItem&gt;\n    &lt;/Expand&gt;\n  &lt;/Type&gt;\n</code></pre>\n\n<p>Which results in this...\n<a href=\"https://i.stack.imgur.com/toQ4s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/toQ4s.png\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 54013047, "answer_count": 2, "score": 3, "last_activity_date": 1546810415, "creation_date": 1545851448, "last_edit_date": 1546460712, "question_id": 53936148, "link": "https://stackoverflow.com/questions/53936148/how-to-display-underlying-data-in-a-type-erasure-class-using-shared-ptr", "title": "How to display underlying data in a type erasure class using shared_ptr", "body": "<p>Ok, so I've got a pretty straightforward class making use of type erasure, using a shared pointer. </p>\n\n<pre><code>class Prop\n{\n    struct PropConcept\n    {\n        virtual ~PropConcept() {}\n    };\n    template&lt;typename T&gt;\n    struct PropModel : PropConcept\n    {\n        PropModel(const T&amp; t) : prop(t) { }\n        PropModel() {}\n        virtual ~PropModel() {}\n    private:\n        T prop;\n    };\n\n    std::shared_ptr&lt;PropConcept&gt; prop;\npublic:\n\n    template&lt;typename T&gt;\n    Prop(const T&amp; obj) : prop(new PropModel&lt;T&gt;(obj)) { }\n    Prop() {};\n};\n</code></pre>\n\n<p>No issues here, however due to how it works, the debugger shows the complete chain from Prop, to the std::shared_ptr(PropContent), to PropModel, and finally the underlying templated prop, which contains the actual data. </p>\n\n<p>What I'd like to do - is write a natvis rule to display that underlying data, instead of the entire chain. Unfortunately, the furthest I've gotten is to dereference the pointer, which just leaves me with the PropConcept struct that it points to. </p>\n\n<pre><code>&lt;Type Name=\"Prop\"&gt;\n   &lt;DisplayString&gt;{*prop}&lt;/DisplayString&gt;\n   &lt;Expand&gt;\n      &lt;Item Name=\"prop\"&gt;(*prop)&lt;/Item&gt;\n   &lt;/Expand&gt;\n&lt;/Type&gt;\n</code></pre>\n\n<p>So of course, my question is, how do I traverse the \"tree\" to get to the \"prop\" member of the PropModel struct? It doesn't matter if the class itself needs to be tweaked, or if it's just pure natvis - just as long as the type erasure remains, and I don't have to expand 4 items to get to the data. </p>\n\n<p>Thanks in advance for any help. </p>\n"}, {"tags": ["c++", "ubuntu", "opengl", "freeglut"], "comments": [{"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1545869631, "post_id": 53936105, "comment_id": 94716812, "body": "Um, I don&#39;t know how to say this, but: This is among the most convoluted ways to implement a GLUT display callback I&#39;ve seen so far. I mean, sure, it works. But calling <code>glutSwapBuffers</code> inside the drawing method of a class that&#39;s there to represent some kind of graphical primitive is just outright weird. In fact, why is it, that so many people seem to have this strong urge to wrap <i><b>everything</b></i> into classes?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545852030, "post_id": 53936172, "comment_id": 94712555, "body": "I&#39;ll look into that, but when I add glEnd(); the program produces a black screen. No shapes are drawn at all. I think the data isn&#39;t getting through successfully."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545852208, "post_id": 53936172, "comment_id": 94712615, "body": "@Kalkirin Weird, I can see a dark gray triangle."}, {"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545852290, "post_id": 53936172, "comment_id": 94712639, "body": "No that&#39;s my fault. forgot to add the color. it works now. Thanks!"}, {"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545852312, "post_id": 53936172, "comment_id": 94712641, "body": "Sorry for my oversight"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1545851609, "creation_date": 1545851609, "answer_id": 53936172, "question_id": 53936105, "link": "https://stackoverflow.com/questions/53936105/freeglut-similar-to-opengl-is-taking-picture-of-my-desktop-instead-of-drawing/53936172#53936172", "title": "FreeGlut (Similar to OpenGL) is taking picture of my desktop instead of drawing shapes", "body": "<p>You missed to finish the <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glBegin.xml\" rel=\"nofollow noreferrer\"><code>glBegin</code>/<code>glEnd</code></a> sequence with <code>glEnd</code>     </p>\n\n<pre><code>template &lt;class T&gt;\nvoid Box&lt;T&gt;::display( void )\n{\n    glClearColor( 0.0, 0.0, 0.0, 0.0 );       // black background\n    glClear( GL_COLOR_BUFFER_BIT );\n    glColor3f( 0.2, 0.2, 0.2 );\n    glBegin( GL_TRIANGLES );\n    glVertex2f( -0.5, -0.5 );\n    glVertex2f(  0.5, -0.5 );\n    glVertex2f(  0.0,  0.5 );\n    glEnd();  // &lt;-------------- add glEnd\n    glutSwapBuffers();\n}\n</code></pre>\n\n<hr>\n\n<p>Note, that drawing by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glBegin.xml\" rel=\"nofollow noreferrer\"><code>glBegin</code>/<code>glEnd</code></a> sequences is deprecated since decades.\nRead about <a href=\"https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline\" rel=\"nofollow noreferrer\">Fixed Function Pipeline</a> and see <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\" rel=\"nofollow noreferrer\">Vertex Specification</a> and <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a> for a state of the art way of rendering.</p>\n"}], "owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 53936172, "answer_count": 1, "score": 1, "last_activity_date": 1545851609, "creation_date": 1545851201, "question_id": 53936105, "link": "https://stackoverflow.com/questions/53936105/freeglut-similar-to-opengl-is-taking-picture-of-my-desktop-instead-of-drawing", "title": "FreeGlut (Similar to OpenGL) is taking picture of my desktop instead of drawing shapes", "body": "<p>Genpfault helped me tremendously is getting my code to compile. The code below is a reduced version of what I'm currently working with. However, Glut is not letting me draw shapes. The only thing that happens when I run the executable after compiling is that I see a screenshot of my desktop.</p>\n\n<p>How can I remedy this so that I can actually draw colorful triangles and polygons on a black screen? <a href=\"https://i.stack.imgur.com/jlTEd.jpg\" rel=\"nofollow noreferrer\">Screenshot of what the program looks like when it runs</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;GL/freeglut.h&gt;\n\nnamespace GameBoxes\n{\n    template&lt;class T&gt;\n    class Box\n    {\n        public:\n            void display( void );\n    };\n} //GameBoxes\n\nnamespace GameBoxes\n{\n    template &lt;class T&gt;\n    void Box&lt;T&gt;::display( void )\n    {\n        glClearColor( 0.0, 0.0, 0.0, 0.0 );       // black background\n        glClear( GL_COLOR_BUFFER_BIT );\n        glColor3f( 0.2, 0.2, 0.2 );\n        glBegin( GL_TRIANGLES );\n        glVertex2f( -0.5, -0.5 );\n        glVertex2f(  0.5, -0.5 );\n        glVertex2f(  0.0,  0.5 );\n        glutSwapBuffers();\n    }\n} // GameBoxes\n\nint main( int argc, char **argv )\n{\n    glutInit( &amp;argc, argv );\n\n    int windowPos1 = 0, windowPos2 = 0, windowSize1 = 400, windowSize2 = 400;\n    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );\n    glutInitWindowPosition( windowPos1, windowPos2 );\n    glutInitWindowSize( windowSize1, windowSize2 );\n    glutCreateWindow( \"square\" );\n\n    GameBoxes::Box&lt;double&gt; square;\n\n    glutSetWindowData( &amp;square );\n    glutDisplayFunc( []()\n    {\n        auto instance = static_cast&lt; GameBoxes::Box&lt;double&gt;* &gt;(    glutGetWindowData() );\n        instance-&gt;display();\n    } );\n    glutMainLoop();\n\n    return 0;\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545851962, "post_id": 53936100, "comment_id": 94712533, "body": "change <code>QQuickView view;</code> to <code>QQuickView *view = new QQuickView;</code> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 47, "user_id": 8070663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baa1390119caffff406f053a1b69115?s=128&d=identicon&r=PG&f=1", "display_name": "Gerico0889", "link": "https://stackoverflow.com/users/8070663/gerico0889"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545852617, "post_id": 53936100, "comment_id": 94712720, "body": "@eyllanesc already tried that without success. As for the post you mean that there is too much stuff or too few?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1545852702, "post_id": 53936100, "comment_id": 94712739, "body": "I already found where the error is, in a moment publish an answer."}, {"owner": {"reputation": 47, "user_id": 8070663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baa1390119caffff406f053a1b69115?s=128&d=identicon&r=PG&f=1", "display_name": "Gerico0889", "link": "https://stackoverflow.com/users/8070663/gerico0889"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545854322, "post_id": 53936100, "comment_id": 94713180, "body": "@eyllanesc ok thank you"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8070663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baa1390119caffff406f053a1b69115?s=128&d=identicon&r=PG&f=1", "display_name": "Gerico0889", "link": "https://stackoverflow.com/users/8070663/gerico0889"}, "edited": false, "score": 0, "creation_date": 1545857240, "post_id": 53936737, "comment_id": 94713980, "body": "Ok by using <code>mainwindow</code> as a model actually works and the model is seen by the QML file. Another error arises though <code>ReferenceError: artist is not defined</code> and also the other 2 (<code>album</code> and <code>date</code>)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 47, "user_id": 8070663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baa1390119caffff406f053a1b69115?s=128&d=identicon&r=PG&f=1", "display_name": "Gerico0889", "link": "https://stackoverflow.com/users/8070663/gerico0889"}, "edited": false, "score": 1, "creation_date": 1545857919, "post_id": 53936737, "comment_id": 94714182, "body": "@Gerico0889 You are right, I apologize for omitting a part of the solution, in the case of lists you must use modelData, for example, change <code>artist</code> to <code>modelData.artist</code>. I already update my solution adding the full qml"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1545857844, "last_edit_date": 1545857844, "creation_date": 1545855541, "answer_id": 53936737, "question_id": 53936100, "link": "https://stackoverflow.com/questions/53936100/connect-c-module-to-qml-referenceerror-blank-is-not-defined/53936737#53936737", "title": "Connect C++ module to QML - ReferenceError: &lt;blank&gt; is not defined", "body": "<p>The problem in your case is that you are creating a QQuickView unnecessarily thinking that this way you will get the QQmlContext but it is not correct, the QQuikWidget already has its own QQmlContext. On the other hand it is better that the list is a property and export the MainWindow so you can access that property.</p>\n\n<p><strong>*.h</strong></p>\n\n<pre><code>class MainWindow : public QMainWindow\n{\n    Q_OBJECT\n    Q_PROPERTY(QList&lt;QObject *&gt; albums READ getAlbums NOTIFY albumsChanged)\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n    QList&lt;QObject *&gt; getAlbums() const;\n    void updateAlbums();\nsignals:\n    void albumsChanged();\nprivate:\n    Ui::MainWindow *ui;\n    QList&lt;QObject *&gt; m_albums;\n    DatabaseManager databaseManager;\n};\n</code></pre>\n\n<p><strong>*.cpp</strong></p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    ui-&gt;albumGrid-&gt;rootContext()-&gt;setContextProperty(\"mainwindow\", this);\n    ui-&gt;albumGrid-&gt;setSource(QUrl{\"../Hallownest/Model/something.qml\"});\n    connect(&amp;databaseManager, &amp;DatabaseManager::albumAddedToDB, this, &amp;MainWindow::updateAlbums);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nQList&lt;QObject *&gt; MainWindow::getAlbums() const\n{\n    return m_albums;\n}\n\nvoid MainWindow::updateAlbums()\n{\n    qDeleteAll(m_albums);\n    m_albums.clear();\n    m_albums = databaseManager.getAlbumsFromDB();\n    emit albumsChanged();\n}\n</code></pre>\n\n<p><strong>*.qml</strong></p>\n\n<pre><code>import QtQuick 2.4\n\nRectangle {\n    width: 800; height: 600\n\n    Component {\n        id: albumDelegate\n        Item {\n            width: grid.cellWidth; height: grid.cellHeight\n            Column {\n                anchors.fill: parent\n                Text { text: modelData.artist; anchors.horizontalCenter:  parent.horizontalCenter }\n                Text { text: modelData.album; anchors.horizontalCenter:  parent.horizontalCenter }\n                Text { text: modelData.date; anchors.horizontalCenter:  parent.horizontalCenter }\n            }\n        }\n    }\n\n    GridView {\n        id: grid\n        anchors.fill: parent\n        cellWidth: 150; cellHeight: 150\n        model: mainwindow.albums\n        delegate: albumDelegate\n        highlight: Rectangle {color: \"lightsteelblue\"; radius: 5 }\n        focus: true;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 8070663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baa1390119caffff406f053a1b69115?s=128&d=identicon&r=PG&f=1", "display_name": "Gerico0889", "link": "https://stackoverflow.com/users/8070663/gerico0889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 53936737, "answer_count": 1, "score": 1, "last_activity_date": 1545857844, "creation_date": 1545851154, "question_id": 53936100, "link": "https://stackoverflow.com/questions/53936100/connect-c-module-to-qml-referenceerror-blank-is-not-defined", "title": "Connect C++ module to QML - ReferenceError: &lt;blank&gt; is not defined", "body": "<p>I have a database full of albums and i want to display these albums in a <code>GridView</code>. I created a qml file that takes a personalized module (<code>albumObject.h</code>) in order to get the data from the database. Since I already have a <code>MainWindow</code> in <code>main.cpp</code> i need to display the <code>GridView</code> in a <code>QQuickWidget</code> that is constructed inside the <code>mainwindow.cpp</code> file. Here's is the code:</p>\n\n<p><strong>albumObject.h</strong></p>\n\n<pre><code>class AlbumObject : public QObject {\n  Q_OBJECT\n\n  Q_PROPERTY(QString artist READ getArtist)\n  Q_PROPERTY(QString album READ getAlbum)\n  Q_PROPERTY(QString date READ getDate)\n  Q_PROPERTY(QString img READ getImg)\n\npublic:\n  AlbumObject(QObject* parent = nullptr);\n\n  const QString getArtist() const;\n  const QString getAlbum() const;\n  const QString getDate() const;\n  const QString getImg() const;\n\n  void setArtist(const QString&amp; artist);\n  void setAlbum(const QString&amp; album);\n  void setDate(const QString&amp; date);\n  void setImg(const QString&amp; img);\n\n\nprivate:\n  QString m_artist;\n  QString m_album;\n  QString m_date;\n  QString m_img;\n};\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<p>I use this connect inside the MainWindow constructor to update the UI when all the albums are added to the database</p>\n\n<pre><code>  connect(&amp;databaseManager, &amp;DatabaseManager::albumAddedToDB,\n          &amp;databaseManager, [&amp;]() {\n    QList&lt;QObject*&gt; albums = databaseManager.getAlbumsFromDB();\n\n    QQuickView view;\n    view.setResizeMode(QQuickView::SizeRootObjectToView);\n    QQmlContext *ctxt = view.rootContext();\n    ctxt-&gt;setContextProperty(\"albumModel\", QVariant::fromValue(albums));\n    ui-&gt;albumGrid-&gt;setSource(QUrl{\"../Hallownest/Model/something.qml\"});\n    ui-&gt;albumGrid-&gt;createWindowContainer(&amp;view, this);\n  });\n</code></pre>\n\n<p><strong>something.qml</strong></p>\n\n<pre><code>import QtQuick 2.4\n\nRectangle {\n    width: 800; height: 600\n\n    Component {\n        id: albumDelegate\n        Item {\n            width: grid.cellWidth; height: grid.cellHeight\n            Column {\n                anchors.fill: parent\n                Text { text: artist; anchors.horizontalCenter:  parent.horizontalCenter }\n                Text { text: album; anchors.horizontalCenter:  parent.horizontalCenter }\n                Text { text: date; anchors.horizontalCenter:  parent.horizontalCenter }\n            }\n        }\n    }\n\n    GridView {\n        id: grid\n        anchors.fill: parent\n        cellWidth: 150; cellHeight: 150\n\n        model: albumModel\n        delegate: albumDelegate\n        highlight: Rectangle {color: \"lightsteelblue\"; radius: 5 }\n        focus: true;\n    }\n}\n</code></pre>\n\n<p>When i launch the program i get this error:</p>\n\n<pre><code>ReferenceError: albumModel is not defined\n</code></pre>\n\n<p>In similar questions most of the users have this problem because they set the context after loading the qml file but this is not my case.</p>\n"}, {"tags": ["c++", "mingw"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1545852251, "post_id": 53936106, "comment_id": 94712628, "body": "Do you mind replacing the picture by actual text?"}, {"owner": {"reputation": 47, "user_id": 10830587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jb3WH.png?s=128&g=1", "display_name": "Evan Wild", "link": "https://stackoverflow.com/users/10830587/evan-wild"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1545856566, "post_id": 53936106, "comment_id": 94713799, "body": "Sorry, the IDE I am using does not let you copy the build text."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1545990756, "post_id": 53936106, "comment_id": 94750977, "body": "&quot;...does not let you copy the build text.&quot; Yes it does. Click <b>Select all</b> in the <b>Build</b> output tab, then <b>Copy</b>. Then paste in your question."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10849370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b4b3ed7cd57fa58b8cc0aa52f885e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yemor", "link": "https://stackoverflow.com/users/10849370/yemor"}, "is_accepted": false, "score": 1, "last_activity_date": 1546223620, "last_edit_date": 1546223620, "creation_date": 1546183659, "answer_id": 53978876, "question_id": 53936106, "link": "https://stackoverflow.com/questions/53936106/mingw-compile-error-off64-t-does-not-name-a-type/53978876#53978876", "title": "MinGW Compile Error - &#39;__off64_t&#39; does not name a type", "body": "<p>This may be a bug of gcc that occurs when applying c++11 or newer standards, ie adding parameter \"-std=c++11\" or \"-std=c++0x\". \nI fixed it by adding \"#include \"io.h\"\" in the file stdio.h. </p>\n\n<p>you can go to your include path: \"c:/mingw/include\" and edit the \"stdio.h\".</p>\n\n<p><code>    /*\n     * stdio.h\n     *\n     * Definitions of types and prototypes of functions for operations on\n     * standard input and standard output streams.\n     *\n     * $Id: stdio.h,v 8863016e809f 2018/12/04 19:00:29 keith $\n     *\n     * Written by Colin Peters \n     * Copyright (C) 1997-2005, 2007-2010, 2014-2018, MinGW.org Project.\n     *\n     *\n     * Permission is hereby granted, free of charge, to any person obtaining a\n     * copy of this software and associated documentation files (the \"Software\"),\n     * to deal in the Software without restriction, including without limitation\n     * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n     * and/or sell copies of the Software, and to permit persons to whom the\n     * Software is furnished to do so, subject to the following conditions:\n     *\n     * The above copyright notice, this permission notice, and the following\n     * disclaimer shall be included in all copies or substantial portions of\n     * the Software.\n     *\n     * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n     * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n     * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n     * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OF OR OTHER\n     * DEALINGS IN THE SOFTWARE.\n     *\n     * NOTE: The file manipulation functions provided by Microsoft seem to\n     * work with either slash (/) or backslash () as the directory separator;\n     * (this is consistent with Microsoft's own documentation, on MSDN).\n     *\n     */\n    <strong>#include     //include at here</strong>\n    #ifndef _STDIO_H\n    #pragma GCC system_header</p>\n\n<pre><code>/* When including &lt;wchar.h&gt;, some of the definitions and declarations\n * which are nominally provided in &lt;stdio.h&gt; must be duplicated.  Rather\n * than require duplicated maintenance effort, we provide for partial\n * inclusion of &lt;stdio.h&gt; by &lt;wchar.h&gt;; only when not included in\n * this partial fashion...\n */\n</code></pre>\n\n<p></code></p>\n\n<p>If there is any problems or a better solution, i would appreciate your feedback very gladly.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1545851204, "question_id": 1387898}, "owner": {"reputation": 47, "user_id": 10830587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jb3WH.png?s=128&g=1", "display_name": "Evan Wild", "link": "https://stackoverflow.com/users/10830587/evan-wild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546223620, "creation_date": 1545849731, "question_id": 53936106, "link": "https://stackoverflow.com/questions/53936106/mingw-compile-error-off64-t-does-not-name-a-type", "title": "MinGW Compile Error - &#39;__off64_t&#39; does not name a type", "body": "<p>I just reinstalled MinGW and the Codelite IDE on my Windows PC, however I'm now unable to compile/build a project. </p>\n\n<p>It is odd because every time I change a setting or make a new project, I am able to run it once, then it stops working. </p>\n\n<p>I've already tried reinstalling MinGW...</p>\n\n<p><a href=\"https://i.stack.imgur.com/oKOGj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oKOGj.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "encryption", "seal"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6626163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd0e2076a96241a0cbdf07aa91f6c57?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tiberg", "link": "https://stackoverflow.com/users/6626163/jeremy-tiberg"}, "edited": false, "score": 0, "creation_date": 1545928935, "post_id": 53942903, "comment_id": 94734825, "body": "Thank you for your help."}], "tags": [], "owner": {"reputation": 786, "user_id": 10212923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b200f1a25648a58376cc7d3bd1c926b?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Laine", "link": "https://stackoverflow.com/users/10212923/kim-laine"}, "is_accepted": true, "score": 1, "last_activity_date": 1545903865, "creation_date": 1545903865, "answer_id": 53942903, "question_id": 53935770, "link": "https://stackoverflow.com/questions/53935770/perform-addition-on-a-product-using-the-s-e-a-l-library/53942903#53942903", "title": "Perform Addition on a Product using the S.E.A.L. Library", "body": "<p>There are multiple ways of getting this to work. For example, suppose ciphertexts A, B, C all have the same scale Z. Then A * B will have scale Z^2. At this point you should also relinearize A * B unless you have a strong reason not to. </p>\n\n<p>To compute A * B + C, you could for instance:</p>\n\n<ul>\n<li>re-encode C (if you have the plaintext) with scale Z^2 and use that instead;</li>\n<li>use <code>multiply_plain</code> to multiply C with a scalar 1.0 plaintext with scale Z to increase the scale to Z^2 but keep the value the same (there is an overload for <code>CKKSEncoder::encode</code> for this);</li>\n<li>rescale A * B first so it has scale Z^2/q_k where q_k is the last prime in the <code>coeff_modulus</code>. Now, you could re-encode C to have scale exactly Z^2/q_k (if you have the plaintext), or multiply C with a scalar 1.0 plaintext as explained above to change the scale to exactly Z^2/q_k; </li>\n<li>if Z is close to q_k so that Z^2/q_k ~ Z, then after rescaling you might just be able to use <code>double &amp;Ciphertext::scale()</code> to set the scale of A * B to exactly <code>C.scale()</code> at the cost of a small multiplicative error ~ Z/q_k. For example, instead of scale 2^60 for A, B, C you could use <code>static_cast&lt;double&gt;(parms.coeff_modulus().back())</code>. Then Z^2/q_k = Z (exactly) and the addition works immediately without any scale switching. Of course, this doesn't work so well anymore after a second multiply+rescale as the second to last prime can no longer be equal to Z (all primes in <code>coeff_modulus</code> must be distinct).</li>\n</ul>\n"}], "owner": {"reputation": 17, "user_id": 6626163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd0e2076a96241a0cbdf07aa91f6c57?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Tiberg", "link": "https://stackoverflow.com/users/6626163/jeremy-tiberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 53942903, "answer_count": 1, "score": 1, "last_activity_date": 1545903865, "creation_date": 1545849205, "question_id": 53935770, "link": "https://stackoverflow.com/questions/53935770/perform-addition-on-a-product-using-the-s-e-a-l-library", "title": "Perform Addition on a Product using the S.E.A.L. Library", "body": "<p>I am trying to perform an operation that is of the form: (A * B) + C. The multiplication works fine, as all the numbers have the same scale at that point, but the product of A * B has a different scale than C. It makes sense that multiplication would change the scale, but I was wondering if there was a way to perform an operation like this using the SEAL library.</p>\n\n<p>Environment information:</p>\n\n<ol>\n<li>Language: C++</li>\n<li>Encryption Scheme: CKKS</li>\n<li>Small encoded doubles (eg. 0.4531)</li>\n<li>Scale used for encoding: pow(2.0, 60) like the example</li>\n</ol>\n\n<p>Thank you in advance and let me know if further information is needed.</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 2, "creation_date": 1545851156, "post_id": 53935725, "comment_id": 94712252, "body": "I don&#39;t see any error checking in your code (like <code>glGetError</code>, <code>GL_COMPILE_STATUS</code>, <code>GL_LINK_STATUS</code>, ...) so how do you know that there are no errors? I can&#39;t verify it right now but imho <code>GL_QUADS</code> is not a valid <code>mode</code> for <code>glDrawElements</code> or was at least removed at around <code>3.2</code>"}, {"owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1545855866, "post_id": 53935725, "comment_id": 94713626, "body": "I have changed to GL_TRIANGLES but haven&#39;t had good luck."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1545858509, "post_id": 53935725, "comment_id": 94714352, "body": "I don&#39;t see that you added any error checking to determine where the error occurs."}, {"owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1545859835, "post_id": 53935725, "comment_id": 94714726, "body": "I have now but its already answered bellow."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1546018698, "post_id": 53935725, "comment_id": 94762097, "body": "@JoeCool: If you want to show the answer you used, you post an answer. You don&#39;t put the answer in your question."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "edited": false, "score": 0, "creation_date": 1545858550, "post_id": 53935876, "comment_id": 94714366, "body": "thanks, I&#39;ll try to edit it work like the original program. :)"}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 2, "last_activity_date": 1545858222, "last_edit_date": 1545858222, "creation_date": 1545849910, "answer_id": 53935876, "question_id": 53935725, "link": "https://stackoverflow.com/questions/53935725/glfw-and-glew-not-rendering-gldrawelements-with-vao/53935876#53935876", "title": "glfw and glew not rendering (glDrawElements with VAO)", "body": "<p>A few issues:</p>\n\n<ul>\n<li><p>Even <em>Intel</em> supports OpenGL 3.3 Core contexts nowadays.  Request one:</p>\n\n<pre><code>glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n</code></pre></li>\n<li><p>Verify your shaders actually compile/link.  On my system the vertex shader failed with:</p>\n\n<pre><code>Vertex shader failed to compile with the following errors:\nERROR: 0:3: error(#12) Unexpected qualifier\nERROR: 0:4: error(#12) Unexpected qualifier\nERROR: error(#273) 2 compilation errors.  No code generated\n</code></pre>\n\n<p><code>layout()</code> should be placed before <code>in</code>:</p>\n\n<pre><code>layout(location = 0) in vec3 pos;\nlayout(location = 1) in vec3 color;\n</code></pre></li>\n<li><p>Unbind your <code>GL_ELEMENT_ARRAY_BUFFER</code> <em>after</em> you unbind the VAO.</p></li>\n<li><p><code>index_model</code> is indexing right off the end of <code>vertex_model</code>.  Don't do that unless you like access violations way down in the innards of your OpenGL driver :)</p></li>\n</ul>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bBqAA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bBqAA.png\" alt=\"screenshot\"></a>\n<br></p>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;GL/glew.h&gt;\n#include &lt;glfw/glfw3.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdarg&gt;\n\nstruct Program\n{\n    static GLuint Load( const char* shader, ... )\n    {\n        GLuint prog = glCreateProgram();\n        va_list args;\n        va_start( args, shader );\n        while( shader )\n        {\n            const GLenum type = va_arg( args, GLenum );\n            AttachShader( prog, type, shader );\n            shader = va_arg( args, const char* );\n        }\n        va_end( args );\n        glLinkProgram( prog );\n        CheckStatus( prog );\n        return prog;\n    }\n\nprivate:\n    static void CheckStatus( GLuint obj )\n    {\n        GLint status = GL_FALSE;\n        if( glIsShader( obj ) ) glGetShaderiv( obj, GL_COMPILE_STATUS, &amp;status );\n        if( glIsProgram( obj ) ) glGetProgramiv( obj, GL_LINK_STATUS, &amp;status );\n        if( status == GL_TRUE ) return;\n        GLchar log[ 1 &lt;&lt; 15 ] = { 0 };\n        if( glIsShader( obj ) ) glGetShaderInfoLog( obj, sizeof( log ), NULL, log );\n        if( glIsProgram( obj ) ) glGetProgramInfoLog( obj, sizeof( log ), NULL, log );\n        std::cerr &lt;&lt; log &lt;&lt; std::endl;\n        std::exit( EXIT_FAILURE );\n    }\n\n    static void AttachShader( GLuint program, GLenum type, const char* src )\n    {\n        GLuint shader = glCreateShader( type );\n        glShaderSource( shader, 1, &amp;src, NULL );\n        glCompileShader( shader );\n        CheckStatus( shader );\n        glAttachShader( program, shader );\n        glDeleteShader( shader );\n    }\n};\n\nconst char* vert = 1 + R\"GLSL(\n#version 330 core\n\nlayout(location = 0) in vec3 pos;\nlayout(location = 1) in vec3 color;\n\nout vec3 out_color;\n\nvoid main() {\n    gl_Position = vec4(pos, 1.0f);\n    out_color = color;\n}\n)GLSL\";\n\nconst char* frag = 1 + R\"GLSL(\n#version 330 core\n\nin vec3 out_color;\n\nout vec4 final_color;\n\nvoid main() {\n    final_color = vec4(out_color, 1.0f);\n}\n)GLSL\";\n\nGLFWwindow * window;\nint width;\nint height;\n\nunsigned int vertex_array_buffer;\nunsigned int vertex_buffer;\nunsigned int index_buffer;\n\nfloat vertex_model[] =\n{\n    -0.5f, -0.5f, 0.0f,     0.0f, 0.0f, 1.0f,\n    -0.5f,  0.5f, 0.0f,     0.0f, 1.0f, 1.0f,\n     0.5f,  0.5f, 0.0f,     1.0f, 1.0f, 1.0f,\n     0.5f, -0.5f, 0.0f,     1.0f, 0.0f, 1.0f,\n};\n\nunsigned int index_model[] =\n{\n    0, 1, 2,\n};\n\nunsigned int program;\n\nfloat ratio;\n\nint main()\n{\n    if( !glfwInit() )\n    {\n        exit( -1 );\n    }\n\n    glfwWindowHint( GLFW_CONTEXT_VERSION_MAJOR, 3 );\n    glfwWindowHint( GLFW_CONTEXT_VERSION_MINOR, 3 );\n    glfwWindowHint( GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE );\n    window = glfwCreateWindow( 640, 480, \"RenderEngine v0.0.0\", NULL, NULL );\n    if( !window )\n    {\n        exit( -1 );\n    }\n\n    glfwMakeContextCurrent( window );\n\n    if( glewInit() )\n    {\n        exit( -1 );\n    }\n\n    glfwSwapInterval( 1 );\n\n    GLuint program = Program::Load( vert, GL_VERTEX_SHADER, frag, GL_FRAGMENT_SHADER, NULL );\n    glUseProgram( program );\n\n    glGenVertexArrays( 1, &amp;vertex_array_buffer );\n    glBindVertexArray( vertex_array_buffer );\n\n    glGenBuffers( 1, &amp;vertex_buffer );\n    glBindBuffer( GL_ARRAY_BUFFER, vertex_buffer );\n    glBufferData( GL_ARRAY_BUFFER, sizeof( vertex_model ), vertex_model, GL_STATIC_DRAW );\n    glEnableVertexAttribArray( 0 );\n    glVertexAttribPointer( 0, 3, GL_FLOAT, GL_FALSE, sizeof( float ) * 6, (void*)0 );\n    glEnableVertexAttribArray( 1 );\n    glVertexAttribPointer( 1, 3, GL_FLOAT, GL_FALSE, sizeof( float ) * 6, (void*)( sizeof( float ) * 3 ) );\n    glBindBuffer( GL_ARRAY_BUFFER, 0 );\n\n    glGenBuffers( 1, &amp;index_buffer );\n    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, index_buffer );\n    glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof( index_model ), index_model, GL_STATIC_DRAW );\n\n    glBindVertexArray( 0 );\n    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 );\n\n    glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );\n\n    while( !glfwWindowShouldClose( window ) )\n    {\n        glfwGetFramebufferSize( window, &amp;width, &amp;height );\n        ratio = width / (float)height;\n\n        glViewport( 0, 0, width, height );\n        glClear( GL_COLOR_BUFFER_BIT );\n\n        glBindVertexArray( vertex_array_buffer );\n        glDrawElements( GL_TRIANGLES, 3, GL_UNSIGNED_INT, nullptr );\n        glBindVertexArray( 0 );\n\n        glfwSwapBuffers( window );\n        glfwPollEvents();\n    }\n\n    glfwDestroyWindow( window );\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "edited": false, "score": 0, "creation_date": 1545855820, "post_id": 53936212, "comment_id": 94713611, "body": "I took your advice but I have not seen anything different but a black window. Thanks anyway."}], "tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": false, "score": 1, "last_activity_date": 1545851898, "creation_date": 1545851898, "answer_id": 53936212, "question_id": 53935725, "link": "https://stackoverflow.com/questions/53935725/glfw-and-glew-not-rendering-gldrawelements-with-vao/53936212#53936212", "title": "glfw and glew not rendering (glDrawElements with VAO)", "body": "<p><code>glVertexAttribPointer</code> takes passed arguments and <strong>currently bound VBO</strong> and saves that information inside the state of <strong>currently</strong> bound VAO.</p>\n\n<p><code>glEnableVertexAttribArray</code> enables an attribute also just in <strong>currently</strong> bound VAO. You enable them too early.</p>\n\n<p>So, the correct order of doing things is:</p>\n\n<ol>\n<li>Bind VAO</li>\n<li>Bind VBO</li>\n<li>Call <code>glVertexAttribPointer</code> and <code>glEnableVertexAttribArray</code></li>\n<li>Now you can unbind the VBO or repeat 2-3 because 3. saved the state into VAO.</li>\n<li>Unbind VAO</li>\n</ol>\n\n<p>Index buffer should be placed anywhere between 1-5. Just take care to not accidentally unbind the index buffer too early - while VAO is still bound. Because VAO only remembers one index buffer.</p>\n\n<p>Other than those early calls, I did not find any more mistakes.</p>\n\n<p>This \"hidden\" capture of VBO has been \"revealed\" in OpenGL 4.5 by splitting the functionality of <code>glVertexAttribPointer</code> into <code>glVertexArrayAttribBinding</code>, <code>glVertexArrayAttribFormat</code> and <code>glBindVertexBuffer</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "edited": false, "score": 0, "creation_date": 1545857777, "post_id": 53936941, "comment_id": 94714136, "body": "I&#39;m no longer using quads, I recently updated but ill try anyway. EDIT: no luck yet but thanks."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "edited": false, "score": 1, "creation_date": 1545858094, "post_id": 53936941, "comment_id": 94714249, "body": "@JoeCool The indices have to be 0, 1, 2, 0, 2, 3. See the answer."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1545858382, "last_edit_date": 1545858382, "creation_date": 1545856816, "answer_id": 53936941, "question_id": 53935725, "link": "https://stackoverflow.com/questions/53935725/glfw-and-glew-not-rendering-gldrawelements-with-vao/53936941#53936941", "title": "glfw and glew not rendering (glDrawElements with VAO)", "body": "<p>The named <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Index_buffers\" rel=\"nofollow noreferrer\">index buffer</a> object is a state of the <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">vertex array object</a>s state vector.\nIf you do <code>glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0)</code>, when the vertex array object is bound, then the reference to the element buffer is broken.</p>\n\n<p>Delete <code>glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);</code>, to solve the issue:</p>\n\n<pre><code>glGenVertexArrays(1, &amp;vertex_array_buffer);\nglBindVertexArray(vertex_array_buffer);\n\n// [...]\n\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, index_buffer);\n\n// [...]\n\n//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); // &lt;---- skip this\nglBindVertexArray(0);\n</code></pre>\n\n<hr>\n\n<p>In the array of vertices there are 4 coordinates and color attributes, so the indices have to be in the range [0, 3]. The coordinates are arranged in a quad and a quad can be drawn by 2 triangles as follows: </p>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>1         2\n +-------+\n |     / |\n |   /   |\n | /     |\n +-------+\n0         3\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>unsigned int index_model[6] = {\n    0, 1, 2,\n    0, 2, 3\n};\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7428740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aqlza.jpg?s=128&g=1", "display_name": "Joe Cool", "link": "https://stackoverflow.com/users/7428740/joe-cool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 53935876, "answer_count": 3, "score": 2, "last_activity_date": 1546018673, "creation_date": 1545848988, "last_edit_date": 1546018673, "question_id": 53935725, "link": "https://stackoverflow.com/questions/53935725/glfw-and-glew-not-rendering-gldrawelements-with-vao", "title": "glfw and glew not rendering (glDrawElements with VAO)", "body": "<p>I'll dump all the information. I am using c++. No matter what I try, <code>glClear()</code> works and rendering a mesh doesn't. There are no errors.</p>\n\n<p>I have switched from freeglut to glfw. I had no problems before. I have the glfw3 dll and lib and the same for glew. I also have the OpenGL32 lib linked because of unresolved externals.</p>\n\n<p>I am using Visual Studio 2017 and the libraries are up to date with the latest. </p>\n\n<p>I got glfw from main glfw site and downloaded the 64 bit binaries. I got glew 32 and 64 bit binaries from <a href=\"https://glew.sourceforge.net/\" rel=\"nofollow noreferrer\">http://glew.sourceforge.net/</a>. I compile as 64 bit and run it on windows 10 64 bit. </p>\n\n<p>It currently compiles and runs without code errors. </p>\n\n<p>EDIT:\nI have taken some advice but still see no quad. Thanks for the input.</p>\n\n<p>The new code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nGLFWwindow * window;\nint width;\nint height;\n\nunsigned int vertex_array_buffer;\nunsigned int vertex_buffer;\nunsigned int index_buffer;\n\nfloat vertex_model[24] = {\n    -0.5f, -0.5f, 0.0f,\n    0.0f, 0.0f, 1.0f,\n\n    -0.5f, 0.5f, 0.0f,\n    0.0f, 1.0f, 1.0f,\n\n    0.5f, 0.5f, 0.0f,\n    1.0f, 1.0f, 1.0f,\n\n    0.5f, -0.5f, 0.0f,\n    1.0f, 0.0f, 1.0f\n};\n\nunsigned int index_model[6] = {\n    0, 1, 2,\n    0, 2, 3\n};\n\nunsigned int program;\n\nfloat ratio;\n\nint main() {\n    if (!glfwInit()) {\n        exit(-1);\n    }\n\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    window = glfwCreateWindow(640, 480, \"RenderEngine v0.0.0\", NULL, NULL);\n    if (!window)\n    {\n        exit(-1);\n    }\n\n    glfwMakeContextCurrent(window);\n\n    if (glewInit()) {\n        exit(-1);\n    }\n\n    glfwSwapInterval(1);\n\n    unsigned int vert_shader;\n    unsigned int frag_shader;\n\n    const char * vert_shader_text;\n    const char * frag_shader_text;\n\n    std::ifstream file;\n    std::string buffer;\n    size_t f_size;\n\n    file.open(\"shader.vert\", std::ifstream::in | std::ifstream::binary);\n\n    file.seekg(0, std::ios::end);\n    f_size = file.tellg();\n    buffer.resize(f_size);\n    file.seekg(0);\n    file.read(&amp;buffer[0], f_size);\n    file.close();\n\n    vert_shader_text = buffer.c_str();\n\n    buffer.clear();\n\n    file.open(\"shader.frag\", std::ifstream::in | std::ifstream::binary);\n\n    file.seekg(0, std::ios::end);\n    f_size = file.tellg();\n    buffer.resize(f_size);\n    file.seekg(0);\n    file.read(&amp;buffer[0], f_size);\n    file.close();\n\n    frag_shader_text = buffer.c_str();\n\n    vert_shader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vert_shader, 1, &amp;vert_shader_text, NULL);\n    glCompileShader(vert_shader);\n\n    int result = GL_FALSE;\n    int log_length;\n\n    glGetShaderiv(vert_shader, GL_COMPILE_STATUS, &amp;result);\n    glGetShaderiv(vert_shader, GL_INFO_LOG_LENGTH, &amp;log_length);\n    std::vector&lt;char&gt; vert_shader_error((log_length &gt; 1) ? log_length : 1);\n    glGetShaderInfoLog(vert_shader, log_length, NULL, &amp;vert_shader_error[0]);\n    std::cout &lt;&lt; &amp;vert_shader_error[0] &lt;&lt; '\\n';\n\n    result = GL_FALSE;\n\n    frag_shader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(frag_shader, 1, &amp;frag_shader_text, NULL);\n    glCompileShader(frag_shader);\n\n    glGetShaderiv(frag_shader, GL_COMPILE_STATUS, &amp;result);\n    glGetShaderiv(frag_shader, GL_INFO_LOG_LENGTH, &amp;log_length);\n    std::vector&lt;char&gt; frag_shader_error((log_length &gt; 1) ? log_length : 1);\n    glGetShaderInfoLog(frag_shader, log_length, NULL, &amp;frag_shader_error[0]);\n    std::cout &lt;&lt; &amp;frag_shader_error[0] &lt;&lt; '\\n';\n\n    program = glCreateProgram();\n    glAttachShader(program, vert_shader);\n    glAttachShader(program, frag_shader);\n\n    glBindAttribLocation(program, 0, \"pos\");\n    glBindAttribLocation(program, 1, \"color\");\n\n    glLinkProgram(program);\n\n    glDeleteShader(vert_shader);\n    glDeleteShader(frag_shader);\n\n    glGetProgramiv(program, GL_LINK_STATUS, &amp;result);\n    glGetProgramiv(program, GL_INFO_LOG_LENGTH, &amp;log_length);\n    std::vector&lt;char&gt; program_error((log_length &gt; 1) ? log_length : 1);\n    glGetProgramInfoLog(program, log_length, NULL, &amp;program_error[0]);\n    std::cout &lt;&lt; &amp;program_error[0] &lt;&lt; '\\n';\n\n    glUseProgram(program);\n\n    glGenVertexArrays(1, &amp;vertex_array_buffer);\n    glBindVertexArray(vertex_array_buffer);\n    glGenBuffers(1, &amp;vertex_buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_buffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertex_model), vertex_model, GL_STATIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 6, (void*)0);\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 6, (void*)(sizeof(float) * 3));\n    glGenBuffers(1, &amp;index_buffer);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, index_buffer);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(index_model), index_model, GL_STATIC_DRAW);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n\n    if (glGetError()) {\n        exit(-1);\n    }\n\n    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n\n    while (!glfwWindowShouldClose(window))\n    {\n        glfwGetFramebufferSize(window, &amp;width, &amp;height);\n        ratio = width / (float)height;\n\n        glViewport(0, 0, width, height);\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glBindVertexArray(vertex_array_buffer);\n\n        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, nullptr);\n\n        glBindVertexArray(0);\n\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n    }\n\n    glfwDestroyWindow(window);\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n\n<p>Also the shader files if you need them. The vertex shader:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#version 330\n\nin layout(location = 0) vec3 pos;\nin layout(location = 1) vec3 color;\n\nout vec3 out_color;\n\nvoid main() {\n    gl_Position = vec4(pos, 1.0f);\n    out_color = color;\n}\n</code></pre>\n\n<p>The fragment shader:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#version 330\n\nin vec3 out_color;\n\nout vec4 final_color;\n\nvoid main() {\n    final_color = vec4(out_color, 1.0f);\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "shader", "virtual"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545852008, "post_id": 53935433, "comment_id": 94712547, "body": "Reopened. The question is <b>not</b> why virtual functions don&#39;t act the way someone expected, which is what the purported duplicate addressed. The questions is <b>what to do instead</b>. Not that there&#39;s a good answer to that..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545852620, "post_id": 53935433, "comment_id": 94712721, "body": "@Pete <i>&quot;Not that there&#39;s a good answer to that...&quot;</i> Exactly. I could think of a <i>Factory Pattern</i> however."}], "answers": [{"tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": false, "score": 1, "last_activity_date": 1545853126, "creation_date": 1545853126, "answer_id": 53936385, "question_id": 53935433, "link": "https://stackoverflow.com/questions/53935433/virtual-method-in-constructor-c/53936385#53936385", "title": "Virtual method in constructor C++", "body": "<p>As far as I can see there are two options here:</p>\n\n<h3>1. Pass attributes to the constructor as a parameter</h3>\n\n<pre><code>Shader::Shader(const char* v, const char* f,\n    const std::vector&lt;std::pair&lt;int, std::string&gt;&gt; &amp;attrs)\n    /* Or some simpler type with the same functionality */\n{\n    ...\n    for (auto &amp;&amp;attr : attrs)\n        bindAttr(attr.first, attr.second);\n    ...\n}\n</code></pre>\n\n<h3>2. Move all the initialization from the constructor into a separate method</h3>\n\n<pre><code>bool Shader::initialize(const char* v, const char* f)\n{\n    // Here you actually can use virtual methods, yay!\n    // ...and even report errors via return value (unless you were planning to use exceptions)\n    return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 2, "last_activity_date": 1545853594, "creation_date": 1545853594, "answer_id": 53936458, "question_id": 53935433, "link": "https://stackoverflow.com/questions/53935433/virtual-method-in-constructor-c/53936458#53936458", "title": "Virtual method in constructor C++", "body": "<p>The issue is that your constructor is monolithic. Split it up into a \"pre-bake\" protected constructor and a \"finalize construction\" helper function that does the linking (also protected). That way you can customize what happens during construction but before linking.</p>\n\n<p>A more general approach would be a factory function.</p>\n"}], "owner": {"reputation": 121, "user_id": 6910960, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EoWzVvz0-Y0/AAAAAAAAAAI/AAAAAAAAAIE/Yfrt1YGTKF0/photo.jpg?sz=128", "display_name": "GPlayer", "link": "https://stackoverflow.com/users/6910960/gplayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53936458, "answer_count": 2, "score": -1, "last_activity_date": 1546016401, "creation_date": 1545847148, "last_edit_date": 1546016401, "question_id": 53935433, "link": "https://stackoverflow.com/questions/53935433/virtual-method-in-constructor-c", "title": "Virtual method in constructor C++", "body": "<p>I have a class <code>Shader</code>, in it's constructor there are statements to compile shader, bind attributes and then link the shader program.\nThe problem is I'd want a child class to have different attributes, but that must happen before the linking. Virtual methods don't work here. What should I do?</p>\n\n<pre><code>Shader::Shader(const char* v, const char* f) {\n    program = glCreateProgram();\n\n    const char* vsrc = nullptr;\n    const char* fsrc = nullptr;\n\n    tls::readTextFile(std::ifstream(v, std::ios::binary), vsrc);\n    tls::readTextFile(std::ifstream(f, std::ios::binary), fsrc);\n\n    m_vertShader = compile(vsrc, GL_VERTEX_SHADER);\n    m_fragShader = compile(fsrc, GL_FRAGMENT_SHADER);\n\n    glAttachShader(program, m_vertShader);\n    glAttachShader(program, m_fragShader);\n\n    bindAttribs(); // it must happen before linking, in child class too.\n\n    glLinkProgram(program);\n\n    getUniforms();\n    setUniforms();\n}\n</code></pre>\n\n<p>and child class:</p>\n\n<pre><code>void BasicShader::bindAttribs() {\n    bindAttribute(0, \"pos\");\n    bindAttribute(2, \"vt\");\n} // this method is not called\n</code></pre>\n"}, {"tags": ["c++", "vtable"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545845516, "post_id": 53935162, "comment_id": 94710511, "body": "<b>Minimal</b>, Complete and verifiable example, please. There could be several reasons for this behavior, only MCVE can pinpoint to a specific one."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1545845613, "post_id": 53935162, "comment_id": 94710541, "body": "Off-topic: Identifiers with a double underscore anywhere in them are reserved to the implementation for any use. You are risking nasal demons with <code>__enter</code> and <code>__exit</code>."}, {"owner": {"reputation": 49, "user_id": 9852094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu8XCTVNdck/AAAAAAAAAAI/AAAAAAAAADc/4m5GZFVcPfI/photo.jpg?sz=128", "display_name": "Jordan Sapida", "link": "https://stackoverflow.com/users/9852094/jordan-sapida"}, "edited": false, "score": 0, "creation_date": 1545853351, "post_id": 53935162, "comment_id": 94712897, "body": "Didn&#39;t know about that. I just used it because I tried writing exit and it glowed. Later I found out it is an existing function. I am fairly new at programming. Thanks for the tip"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546875286, "post_id": 53935162, "comment_id": 94987892, "body": "If you look at the disassembly, do you see symbols called &quot;vtable for blah&quot; being defined?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9852094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu8XCTVNdck/AAAAAAAAAAI/AAAAAAAAADc/4m5GZFVcPfI/photo.jpg?sz=128", "display_name": "Jordan Sapida", "link": "https://stackoverflow.com/users/9852094/jordan-sapida"}, "edited": false, "score": 0, "creation_date": 1545853491, "post_id": 53935356, "comment_id": 94712930, "body": "Oh. I understand what you are saying but do you maybe know the reason this error poped on the constructor? Is it the &quot;default&quot; thing to do?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 49, "user_id": 9852094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu8XCTVNdck/AAAAAAAAAAI/AAAAAAAAADc/4m5GZFVcPfI/photo.jpg?sz=128", "display_name": "Jordan Sapida", "link": "https://stackoverflow.com/users/9852094/jordan-sapida"}, "edited": false, "score": 0, "creation_date": 1545854067, "post_id": 53935356, "comment_id": 94713109, "body": "@JordanSapida, I don&#39;t have any specific source of information about this, just common sense, but it&#39;s probably because the virtual table pointer (which is typically a &quot;hidden&quot; member of the object) is initialized in the constructor (or, more accurately, a compiler-generated part of the constructor), but there is no virtual table to point to, hence the unresolved reference."}, {"owner": {"reputation": 49, "user_id": 9852094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu8XCTVNdck/AAAAAAAAAAI/AAAAAAAAADc/4m5GZFVcPfI/photo.jpg?sz=128", "display_name": "Jordan Sapida", "link": "https://stackoverflow.com/users/9852094/jordan-sapida"}, "edited": false, "score": 0, "creation_date": 1545854207, "post_id": 53935356, "comment_id": 94713153, "body": "Thank you. Really helpful feedback."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546798075, "post_id": 53935356, "comment_id": 94962028, "body": "That isn&#39;t completely correct. The compiler will generate a vtable with symbols of virtual functions, not the corresponding values; only during linking the symbols are resolved. Missing symbols for virtual function addresses will cause a link error obviously, but not because of a missing vtable: the error will be because of a non-missing vtable that refers to these symbols, and because the vtable is used because the constructor and destructor are used; if the class was never instantiated, you would probably be able to link without the virtual functions."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546857044, "post_id": 53935356, "comment_id": 94978018, "body": "@curiousguy, this makes sense but why then the error says <code>undefined reference to &#39;vtable for office&#39;</code> and not undefined reference to the missing function?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546875512, "post_id": 53935356, "comment_id": 94988017, "body": "@r3musn0x Probably because that vtable wasn&#39;t even generated in any TU (translation unit) because <b>one particular</b> (I don&#39;t know which but it&#39;s usually documented by the implementation) virtual function definition was not present on any TU. That&#39;s a trigger for the generation of the vtable symbol. If you look at the disassembly, you can see that the vtable references plenty of other symbols, not limited to regular virtual function code: also virtual thunks (for calls via another base class) and the <code>typeinfo</code> of the class."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546876921, "post_id": 53935356, "comment_id": 94988797, "body": "@curiousguy, I&#39;m confused, in your previous comment you said that there is a &quot;non-missing vtable that refers to these [missing] symbols&quot;, but now you&#39;re saying that it &quot;wasn&#39;t even generated&quot;, so which one is it?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546884430, "post_id": 53935356, "comment_id": 94992538, "body": "@r3musn0x 1) The fact that many virtual function definitions are missing cannot in itself prevent the generation of the vtable that refers to these symbols; but if the vtable symbol is used, then these virtual function symbols will be needed to complete the linking, just as a function F that call another function G that doesn&#39;t have a definition, as long as F isn&#39;t used. In fact you can simulate a vtable in C/C++ with a struct (not an array!) of function pointers of the appropriate types, with that same effect."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1546888260, "post_id": 53935356, "comment_id": 94994131, "body": "2) In this case, the error message <b>undefined reference to `vtable for office&#39;</b> indicates that vtable symbol was not generated in any TU. That cannot be caused by the fact that the vtable refers to other symbols. But the compiler never emitted the vtable because the definition of one designated virtual function was not found, and the vtable is only produced when <b>that virtual function</b> is defined. It&#39;s a convention."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 0, "last_activity_date": 1545847292, "last_edit_date": 1545847292, "creation_date": 1545846607, "answer_id": 53935356, "question_id": 53935162, "link": "https://stackoverflow.com/questions/53935162/undefined-reference-to-vtable-for/53935356#53935356", "title": "undefined reference to &#39;vtable for&#39;", "body": "<p>You are missing definitions for some of the virtual methods that you've declared in <code>office</code>, namely <code>search</code> and <code>get_capacity</code>.</p>\n\n<p>As a result, the compiler can't generate a virtual function table for <code>office</code> class because it doesn't have addresses for these virtual functions to put there. Hence a \"very useful\" error message, because, from compiler's perspective, the problem is that virtual table is missing and not <strong>why</strong> it's missing.</p>\n"}], "owner": {"reputation": 49, "user_id": 9852094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu8XCTVNdck/AAAAAAAAAAI/AAAAAAAAADc/4m5GZFVcPfI/photo.jpg?sz=128", "display_name": "Jordan Sapida", "link": "https://stackoverflow.com/users/9852094/jordan-sapida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 53935356, "answer_count": 1, "score": -2, "last_activity_date": 1545847292, "creation_date": 1545845283, "question_id": 53935162, "link": "https://stackoverflow.com/questions/53935162/undefined-reference-to-vtable-for", "title": "undefined reference to &#39;vtable for&#39;", "body": "<p>So this is part of a bigger project. I have 3 different files. The first one is a class from a previous project that is just being used as a type (visitor.h) so I won't include it as I know it works. Then I have written an abstract class and another abstract class which inherits from the first one in space.h like so:</p>\n\n<pre><code>class space{\n\npublic:\n    virtual int get_vis_count() const = 0;\n    virtual int __enter(Visitor *v) = 0;\n    virtual int search(Visitor *v) = 0;\n    virtual Visitor* __exit(int index) = 0;\n    virtual void print() const = 0;\n    virtual ~space() { };\n\n};\n\nclass capped_space: public space{\n\n    public:\n    virtual int get_capacity() const = 0;\n    virtual int has_space() const = 0;\n};\n</code></pre>\n\n<p>Now in my classes.h i have several classes and the error:</p>\n\n<pre><code>classes.o: In function `office::office(building*, int, int)':\nclasses.cpp:(.text+0x8fe): undefined reference to `vtable for office'\nclasses.o: In function `office::~office()':\n classes.cpp:(.text+0xe1a): undefined reference to `vtable for  office'\n</code></pre>\n\n<p>pops.\nclasses.h:</p>\n\n<pre><code>class office:public capped_space{\n\nprivate:\nint office_number, No;\nint  current_visitors;\nint _f;\nvector&lt;Visitor*&gt; visitors;\n\npublic:\noffice(building *b, int on, int m);\nint get_capacity() const;\nint has_space() const;\nint get_vis_count() const;\nint get_numb() const;\nint __enter(Visitor * visitor);\nint search(Visitor *v);\nVisitor* __exit(int index);\nVisitor* done();\nvoid print() const;\n~office();\n};\n</code></pre>\n\n<p>classes.cpp:</p>\n\n<pre><code>office::office(building *b, int on, int m): office_number(on),  current_visitors(0), _f(m){\n  No = b-&gt;get_space_size('o');\n  cout &lt;&lt; \"Office number: \" &lt;&lt; office_number &lt;&lt; \"\\thas been created\\n\";\n}\n\nint office::get_vis_count() const{\n  return current_visitors;\n}\n\nint office::has_space() const{\n  return (current_visitors &lt; No);\n}\n\nint office::get_numb() const{\n  return office_number;\n}\n\nint office::__enter(Visitor * visitor){\n  if(visitor == NULL) return -1;\n  if(has_space()){\n    if(!visitor-&gt;__done()){\n        if((visitor-&gt;get_office() == office_number)){\n            visitors.push_back(visitor);\n            cout &lt;&lt; \"Entering office \" &lt;&lt; _f &lt;&lt; \"-\" &lt;&lt; office_number &lt;&lt; \"\\t: \";\n            visitors[current_visitors]-&gt;print_v();\n            current_visitors++;\n            return 1;\n        }else{\n            return 0;\n        }\n    }else{\n        return 1;\n    }\n}else{\n    cout &lt;&lt; \"Please, wait outside for entrance in office number: \" &lt;&lt;   office_number &lt;&lt; endl;\n    return 0;\n  }\n}\n\nVisitor* office::__exit(int index){\n  if (visitors[index]-&gt;__done()){\n    Visitor *nav;\n    nav = visitors[index];\n    visitors.erase(visitors.begin() + index);\n    current_visitors--;\n    return nav;\n  }else{\n    return NULL;\n  }\n}\n\nVisitor* office::done(){\n  if(current_visitors){\n    int random;\n    random = rand() % current_visitors;\n    visitors[random]-&gt;__set_done();\n    cout &lt;&lt; \"Exiting office \" &lt;&lt; _f &lt;&lt; \"-\" &lt;&lt; office_number &lt;&lt; \"\\t: \";\n    visitors[random]-&gt;print_v();\n    return __exit(random);\n  }else{\n    return NULL;\n  }\n}\n\nvoid office::print() const{\n    if(current_visitors != 0){\n      cout &lt;&lt; \"Floor: \" &lt;&lt; _f &lt;&lt; endl;\n      cout &lt;&lt; \"Office: \" &lt;&lt; office_number &lt;&lt; endl;\n      for (int i = 0; i &lt; No; i++)\n      {\n        visitors[i]-&gt;print_v();\n      }\n      cout &lt;&lt; endl;\n}\n} \n\noffice::~office(){\n    cout &lt;&lt; \"End of the work!\\n\";\n }\n</code></pre>\n\n<p>The second error pops in class floor's functions but I hope that if I figure out the office error I will also figure out floor's.</p>\n\n<p>If any more code is needed please comment and I will edit. </p>\n\n<p>P.S. please ignore some ifs I may have left behind. The code was originally handling arrays of pointers and now I am trying to make it handle vectors of pointers so there may be some leftover checks</p>\n"}, {"tags": ["c++", "qt", "qmake"], "answers": [{"tags": [], "owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "is_accepted": false, "score": 0, "last_activity_date": 1545847702, "last_edit_date": 1545847702, "creation_date": 1545846710, "answer_id": 53935369, "question_id": 53935027, "link": "https://stackoverflow.com/questions/53935027/adding-json-file-to-plugin-qmake-project/53935369#53935369", "title": "Adding JSON file to plugin qmake project", "body": "<p><s>Well, you could just add the JSON file to resources: create some <code>*.qrc</code> file, add yours there and then write in the <code>.pro</code> file something like <code>RESOURCES += plugin_data.qrc</code>.-\nThere is also <code>DISTFILES</code> variable, but AFAIK it's Unix-only and does not solve your problem.</s></p>\n\n<p>Tried myself and it never worked, still the recipe from documentation works: <code>INCLUDEPATH += JSON_FILE_LOCATION_DIR</code>. It's true that <code>qmake</code> caches builds sometimes, but they say adding to include path should do the trick and make a proper build.</p>\n"}, {"tags": [], "owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "is_accepted": true, "score": 1, "last_activity_date": 1545867832, "creation_date": 1545867832, "answer_id": 53938270, "question_id": 53935027, "link": "https://stackoverflow.com/questions/53935027/adding-json-file-to-plugin-qmake-project/53938270#53938270", "title": "Adding JSON file to plugin qmake project", "body": "<p>I typically use the following to make the json file a dependency of the generated moc file that contains the corresponding code. Assuming the class where you specify <code>Q_PLUGIN_METADATA</code> is located in a header file called <code>myclass.h</code>, the qmake code is as follows:</p>\n\n<pre><code>DISTFILES += myclass.json\njson_target.target = moc_myclass.o\njson_target.depends += $$PWD/myclass.json\nQMAKE_EXTRA_TARGETS += json_target\n</code></pre>\n\n<p><strong>Note:</strong> You might have to use <code>json_target.target = $$OBJECTS_DIR/moc_myclass.o</code> instead, if OBJECTS_DIR has previously been defined. Check the generated <code>Makefile</code> to see if the path of the dependency matches the one of the corresponding target.</p>\n"}], "owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 53938270, "answer_count": 2, "score": 0, "last_activity_date": 1545867832, "creation_date": 1545844479, "last_edit_date": 1545844636, "question_id": 53935027, "link": "https://stackoverflow.com/questions/53935027/adding-json-file-to-plugin-qmake-project", "title": "Adding JSON file to plugin qmake project", "body": "<p>When writing plugin libraries with Qt one can attach a JSON file containing some meta data to it using the <code>Q_PLUGIN_METADATA</code> macro. This JSON file is then linked into the library, for later usage with <code>QPluginLoader::metaData()</code>.</p>\n\n<p>Unfortunately when building the plugin library the associated JSON file is not by default seen as a dependency for the library binary by <code>qmake</code>. When the JSON file is modified the plugin library project has to be rebuild (especially re-linked) manually to force the modified JSON file into the library binary.</p>\n\n<p>What would be the proper way to mention the JSON file in the <code>.pro</code> file so that it is automatically linked in when it is modified?</p>\n"}, {"tags": ["c++", "opengl", "compiler-errors"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1545843074, "post_id": 53934772, "comment_id": 94709717, "body": "You forgot <code>()</code> after <code>square.display</code>."}, {"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545843273, "post_id": 53934772, "comment_id": 94709775, "body": "square.display() still causes the error. Okay, I&#39;ll try to edit it down."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1545843284, "post_id": 53934772, "comment_id": 94709782, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/877523/error-request-for-member-in-which-is-of-non-class-type\">error: request for member &#39;..&#39; in &#39;..&#39; which is of non-class type</a>"}, {"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545843850, "post_id": 53934772, "comment_id": 94709943, "body": "I already looked at that question and was completely lost. Closing this question is going to leave me completely in the dark."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1545844246, "post_id": 53934772, "comment_id": 94710071, "body": "I suspect your intent is to use <code>GameBoxes::Box&lt;double&gt;::display</code> as the <code>glut</code> display function.  But <code>GameBoxes::Box&lt;double&gt;::display</code> is a non-static member of <code>GameBoxes::Box&lt;double&gt;</code> and, therefore, not convertible to a <code>void (*func)(void)</code> as required by <a href=\"https://www.opengl.org/resources/libraries/glut/spec3/node46.html\" rel=\"nofollow noreferrer\"><code>glutDisplayFunc</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545845513, "post_id": 53935054, "comment_id": 94710509, "body": "Thanks for helping me fix that bug. A lot of the advice is starting to make sense now. The error just changed to &quot;Improper use of void function&quot;"}, {"owner": {"reputation": 333, "user_id": 6168549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04203874c94da7b9bcd58f6096ae8375?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6168549/carlos"}, "reply_to_user": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "edited": false, "score": 0, "creation_date": 1545846618, "post_id": 53935054, "comment_id": 94710835, "body": "@Kalkirin, yes, you would have pass the appropriate function; however, genpfault seems to have a viable idea with the api&#39;s you are using.  You could also just have a function wrapper that will use your class; but now we get into a bigger design discussion."}], "tags": [], "owner": {"reputation": 333, "user_id": 6168549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04203874c94da7b9bcd58f6096ae8375?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6168549/carlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1545844984, "last_edit_date": 1545844984, "creation_date": 1545844609, "answer_id": 53935054, "question_id": 53934772, "link": "https://stackoverflow.com/questions/53934772/error-request-for-member-display-in-square-which-is-of-non-class-type-gam/53935054#53935054", "title": "Error: request for member &#39;display&#39; in &#39;square&#39;, which is of non-class type &#39;GameBoxes::Box&lt;double&gt;()&#39;", "body": "<p>Change the following line...</p>\n\n<pre><code>GameBoxes::Box&lt;double&gt; square();  // a func declaration, but I get it\n</code></pre>\n\n<p>To...</p>\n\n<pre><code>GameBoxes::Box&lt;double&gt; square; // calls the default constructor anyway.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 0, "last_activity_date": 1545864423, "last_edit_date": 1545864423, "creation_date": 1545845023, "answer_id": 53935116, "question_id": 53934772, "link": "https://stackoverflow.com/questions/53934772/error-request-for-member-display-in-square-which-is-of-non-class-type-gam/53935116#53935116", "title": "Error: request for member &#39;display&#39; in &#39;square&#39;, which is of non-class type &#39;GameBoxes::Box&lt;double&gt;()&#39;", "body": "<p>Even if you fix the bad <code>square</code> declaration (should be <code>GameBoxes::Box&lt;double&gt; square</code>, notice the lack of parenthesis) you're not going to be able to pass a C++ member-function pointer into an API that expects a C function pointer.</p>\n\n<p>You'll have to write a <a href=\"https://en.wikipedia.org/wiki/Thunk#Interoperability\" rel=\"nofollow noreferrer\">thunk</a> that's usable as a regular function pointer such as a <a href=\"https://stackoverflow.com/questions/50233484/c-glfw3-input-handling/50235276#50235276\">capture-less lambda</a> or a static member function.</p>\n\n<p>If you're using FreeGLUT you can use<a href=\"https://github.com/dcnieho/FreeGLUT/blob/git_master/freeglut/freeglut/include/GL/freeglut_ext.h#L176\" rel=\"nofollow noreferrer\"><code>glutSetWindowData()</code>/<code>glutGetWindowData()</code></a> to set which class instance to use on a per-window basis and grab+cast in the thunk:</p>\n\n<pre><code>glutSetWindowData( &amp;square );\nglutDisplayFunc( []()\n{\n    auto instance = static_cast&lt; GameBoxes::Box&lt;double&gt;* &gt;( glutGetWindowData() );\n    instance-&gt;display();\n} );\n</code></pre>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;GL/freeglut.h&gt;\n\nnamespace GameBoxes\n{\ntemplate&lt;class T&gt;\nclass Box\n{\npublic:\n    void display( void );\n};\n} //GameBoxes\n\nnamespace GameBoxes\n{\ntemplate &lt;class T&gt;\nvoid Box&lt;T&gt;::display( void )\n{\n    glClearColor( 0.0, 0.0, 0.0, 0.0 );       // black background\n    glClear( GL_COLOR_BUFFER_BIT );\n    glColor3f( 0.2, 0.2, 0.2 );\n    glBegin( GL_TRIANGLES );\n    glVertex2f( -0.5, -0.5 );\n    glVertex2f(  0.5, -0.5 );\n    glVertex2f(  0.0,  0.5 );\n    glEnd();\n    glutSwapBuffers();\n}\n} // GameBoxes\n\nint main( int argc, char **argv )\n{\n    glutInit( &amp;argc, argv );\n\n    int windowPos1 = 0, windowPos2 = 0, windowSize1 = 400, windowSize2 = 400;\n    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );\n    glutInitWindowPosition( windowPos1, windowPos2 );\n    glutInitWindowSize( windowSize1, windowSize2 );\n    glutCreateWindow( \"square\" );\n\n    GameBoxes::Box&lt;double&gt; square;\n\n    glutSetWindowData( &amp;square );\n    glutDisplayFunc( []()\n    {\n        auto instance = static_cast&lt; GameBoxes::Box&lt;double&gt;* &gt;( glutGetWindowData() );\n        instance-&gt;display();\n    } );\n    glutMainLoop();\n\n    return 0;\n};\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10542555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0cRFh9dJ7J8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmkdCZRnf4NELUIMC99wRWHRD5eQ/mo/photo.jpg?sz=128", "display_name": "Kalkirin", "link": "https://stackoverflow.com/users/10542555/kalkirin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 53935116, "answer_count": 2, "score": -1, "last_activity_date": 1545864423, "creation_date": 1545842938, "last_edit_date": 1545845268, "question_id": 53934772, "link": "https://stackoverflow.com/questions/53934772/error-request-for-member-display-in-square-which-is-of-non-class-type-gam", "title": "Error: request for member &#39;display&#39; in &#39;square&#39;, which is of non-class type &#39;GameBoxes::Box&lt;double&gt;()&#39;", "body": "<p>I'm trying to make the video game Snake using C++ and OpenGL so I can implement a machine learning algorithm to play it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;iostream&gt;\n\nnamespace GameBoxes\n{\n    template&lt;class T&gt;\n    class Box\n    {\n    public:\n        Box(); //Initialize with a square size of 10 in center and color white.\n\n        void display(void);\n\n    private:\n        T colorBlue;\n        T colorRed;\n        T colorGreen;\n        T vertex1Pos1;\n        T vertex1Pos2;\n        T thirdForm1;\n        T vertex2Pos1;\n        T vertex2Pos2;\n        T thirdForm2;\n        T vertex3Pos1;\n        T vertex3Pos2;\n        T thirdForm3;\n        T vertex4Pos1;\n        T vertex4Pos2;\n        T thirdForm4;\n\n    };\n} //GameBoxes\n\n\nnamespace GameBoxes\n{\n    template &lt;class T&gt;\n    Box&lt;T&gt;::Box() : colorBlue(0.0), colorRed(0.0), colorGreen(0.0), vertex1Pos1(2.0),\n                    vertex1Pos2(4.0), thirdForm1(0.0), vertex2Pos1(8.0), vertex2Pos2(4.0),\n                    thirdForm2(0.0), vertex3Pos1(8.0), vertex3Pos2(6.0), thirdForm3(0.0),\n                    vertex4Pos1(2.0), vertex4Pos2(6.0), thirdForm4(0.0)\n    {\n    }\n\n    template &lt;class T&gt;\n    void Box&lt;T&gt;::display(void)\n    {\n        glClear( GL_COLOR_BUFFER_BIT);\n        glColor3f(colorBlue, colorRed, colorGreen);\n        glBegin(GL_POLYGON);\n         glVertex3f(vertex1Pos1, vertex1Pos2, thirdForm1);\n         glVertex3f(vertex2Pos1, vertex2Pos2, thirdForm2);\n         glVertex3f(vertex3Pos1, vertex3Pos2, thirdForm3);\n         glVertex3f(vertex4Pos1, vertex4Pos2, thirdForm4);\n        glEnd();\n        glFlush();\n    }\n} // GameBoxes\n\nint main(int argc, char **argv)\n{\n    printf(\"Hello World\\n\");\n    glutInit(&amp;argc, argv);\n\n    int windowPos1, windowPos2, windowSize1, windowSize2;\n    std::cout &lt;&lt; \"Please enter WinPos1, WinPos2, WinSize1 and WinSize2\\n\";\n    std::cin  &gt;&gt; windowPos1 &gt;&gt; windowPos2 &gt;&gt; windowSize1, windowSize2;\n\n    glutInitDisplayMode ( GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);\n    glutInitWindowPosition(windowPos1, windowPos2);\n    glutInitWindowSize(windowSize1, windowSize2);\n    glutCreateWindow (\"square\");\n\n    glClearColor(0.0, 0.0, 0.0, 0.0);       // black background\n    glMatrixMode(GL_PROJECTION);        // setup viewing projection\n    glLoadIdentity();               // start with identity matrix\n    glOrtho(0.0, 10.0, 0.0, 10.0, -1.0, 1.0);   // setup 10x10x2 viewing world\n\n    GameBoxes::Box&lt;double&gt; square();\n    glutDisplayFunc(square.display);\n    glutMainLoop();\n\n    return 0;\n};\n</code></pre>\n\n<p>This gives me the error listed within the title.</p>\n\n<p>The code works perfectly when I hardcode in all of the variables and remove void display(void) from the class.</p>\n\n<p>I honestly don't understand why having the display function within the class causes so many problems. I'm going to try and make it a friend function.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1545849251, "post_id": 53934483, "comment_id": 94711660, "body": "<code>new inlineCallback</code> may I just say ick."}], "answers": [{"tags": [], "owner": {"reputation": 4096, "user_id": 3601321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/02ba00dbea1724976753357b4470760b?s=128&d=identicon&r=PG&f=1", "display_name": "Corristo", "link": "https://stackoverflow.com/users/3601321/corristo"}, "is_accepted": false, "score": 1, "last_activity_date": 1545843330, "last_edit_date": 1545843330, "creation_date": 1545841471, "answer_id": 53934535, "question_id": 53934483, "link": "https://stackoverflow.com/questions/53934483/how-to-use-expect-eq-and-other-google-mock-statement-in-an-inline-callback-funct/53934535#53934535", "title": "How to use EXPECT_EQ and other Google Mock statement in an inline callback function?", "body": "<p>One simple way to do it is to also capture a boolean by reference and to set that to true in the callback:</p>\n\n<pre><code>TEST_F(TestCase1, HappyCase) {\n    bool callback_called = false;\n\n    foo-&gt;doSomething(arg1, new inlineCallback([&amp;callback_called, =](bool success) {\n        callback_called = true;\n        EXPECT_TRUE(success);\n    }\n\n    EXPECT_TRUE(callback_called);\n}\n</code></pre>\n\n<p>If your callbacks all have a common (abstract) base class they inherit from (which the existence of the <code>inlineCallback</code> class strongly suggests) then you can also use Googlemock and its argument matchers instead:</p>\n\n<pre><code>// assuming this is the callback interface\nclass Callback {\npublic:\n     Callback() = default;\n     Callback(Callback const&amp;) = delete;\n     Callback(Callback&amp;&amp;) = delete;\n     Callback&amp; operator=(Callback const&amp;) = delete;\n     Callback&amp; operator=(Callback&amp;&amp;) = delete;\n     virtual ~Callback() = default;\n\n     virtual void operator()(bool) = 0;\n};\n\nclass MockCallback : public Callback {\npublic:\n    // since Googlemock can't mock operators directly we add one level \n    // of indirection\n    MOCK_METHOD1(calledWith, void(bool));\n\n    void operator()(bool const arg) override { \n      calledWith(arg);\n    }\n};\n\nTEST_F(TestCase1, HappyCase) {\n    auto callback = std::make_unique&lt;::testing::StrictMock&lt;MockCallback&gt;&gt;();\n\n    EXPECT_CALL(*callback, calledWith(true));\n\n    foo-&gt;doSomething(arg1, callback.release());\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9712336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5d578b6f65aef1b8ec96f217e01e71?s=128&d=identicon&r=PG&f=1", "display_name": "zfgo", "link": "https://stackoverflow.com/users/9712336/zfgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545843330, "creation_date": 1545841101, "question_id": 53934483, "link": "https://stackoverflow.com/questions/53934483/how-to-use-expect-eq-and-other-google-mock-statement-in-an-inline-callback-funct", "title": "How to use EXPECT_EQ and other Google Mock statement in an inline callback function?", "body": "<p>Say that I have this test case:</p>\n\n<pre><code>TEST_F(TestCase1, HappyCase){\n    foo-&gt;doSomething(arg1, new inlineCallback([=](bool success){\n        EXPECT_EQ(success, true);\n    }));\n}\n</code></pre>\n\n<p>But:</p>\n\n<pre><code>EXPECT_EQ(success, true)\n</code></pre>\n\n<p>will only be called when you actually call <strong>inlineCallback</strong> passing a boolean in the implementation of <strong>doSomething</strong> function of the foo class.</p>\n\n<p>But it could be that the implementation is very complex and there is chance that inlineCallback will never be called, then EXPECT_EQ(success, true) will not be called and this test case is pretty much useless.</p>\n\n<p>How can I always make sure that EXPECT_EQ(success, true) will always be evaluated?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545841126, "post_id": 53934469, "comment_id": 94709032, "body": "It&#39;s a lambda capture list. Do you know what lambdas are?"}, {"owner": {"reputation": 1940, "user_id": 5587350, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ad4f4ba9975d2c74a6bff6f56720a698?s=128&d=identicon&r=PG&f=1", "display_name": "Keselme", "link": "https://stackoverflow.com/users/5587350/keselme"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545841188, "post_id": 53934469, "comment_id": 94709048, "body": "@HolyBlackCat is it like anonymous class in Java?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1545841387, "post_id": 53934469, "comment_id": 94709117, "body": "You may want to grab <b><i>A Tour of C++</i></b> to get up to speed on modern C++ programming. Or maybe <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">another good book</a> as well."}], "owner": {"reputation": 1940, "user_id": 5587350, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ad4f4ba9975d2c74a6bff6f56720a698?s=128&d=identicon&r=PG&f=1", "display_name": "Keselme", "link": "https://stackoverflow.com/users/5587350/keselme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1545841123, "answer_count": 0, "score": 0, "last_activity_date": 1545841059, "creation_date": 1545841059, "question_id": 53934469, "link": "https://stackoverflow.com/questions/53934469/definition-of-in-cpp-syntax", "closed_reason": "Duplicate", "title": "Definition of [=] in cpp syntax", "body": "<p>I am looking at source code for android and came across the following code:</p>\n\n<pre><code>unique_fd local_end(sfd[0]);\nunique_fd remote_end(sfd[1]);\nsfd[0] = sfd[1] = -1;\n\n// dump blocks until completion, so spawn a thread..\nstd::thread dump_thread([=, remote_end { std::move(remote_end) }]() mutable {\n           int err = service-&gt;dump(remote_end.get(), args);\n\n           // It'd be nice to be able to close the remote end of the socketpair before the dump\n           // call returns, to terminate our reads if the other end closes their copy of the\n          // file descriptor, but then hangs for some reason. There doesn't seem to be a good\n          // way to do this, though.\n          remote_end.reset();\n\n          if (err != 0) {\n              aerr &lt;&lt; \"Error dumping service info: (\" &lt;&lt; strerror(err) &lt;&lt; \") \" &lt;&lt; service_name &lt;&lt; endl;\n          }\n});\n</code></pre>\n\n<p>Now, I don't understand what does this part mean: </p>\n\n<pre><code>[=, remote_end { std::move(remote_end) }]\n</code></pre>\n\n<p>Can someone please explain this?</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1545840580, "post_id": 53934342, "comment_id": 94708875, "body": "For polymorphic behaviours, you need to either use pointers or references, plus you need to use <code>virtual</code> functions"}, {"owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1545840917, "post_id": 53934342, "comment_id": 94708970, "body": "@Fureeish I make <code>computeArea</code> function virtual but I still get 0. I want to copy child object to parent object and run <code>computeArea</code> function on <code>Shape</code> class"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1545841038, "post_id": 53934342, "comment_id": 94709003, "body": "You forgot about &quot;<i>you need to either use pointers or references</i>&quot;. You cannot copy child object to parent object (you can, but the object will be <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">sliced</a> and that&#39;s <b>not</b> what you want). However, you can <i>have a reference or a pointer of a parent type poining to child object</i>. That, paired with <code>virtual</code> functions, will result in expected behaviour."}, {"owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1545841381, "post_id": 53934342, "comment_id": 94709115, "body": "@Fureeish Nice! Good point."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545840957, "post_id": 53934415, "comment_id": 94708978, "body": "I make <code>computeArea</code> function virtual but I still get 0. I want to copy child object to parent object and run <code>computeArea</code> function on Shape class"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841394, "post_id": 53934415, "comment_id": 94709121, "body": "@mshomali If you call <i>computeArea</i> on a <i>Shape</i> the result will always be 0, the fact you created (copy) the <i>Shape</i> from a child class is not relevant"}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841654, "post_id": 53934415, "comment_id": 94709218, "body": "@mshomali, I modified the <code>main()</code> function, so that you use pointers to the base class and not copy derived objects to a base-class object."}], "tags": [], "owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "is_accepted": false, "score": 0, "last_activity_date": 1545841578, "last_edit_date": 1545841578, "creation_date": 1545840828, "answer_id": 53934415, "question_id": 53934342, "link": "https://stackoverflow.com/questions/53934342/copy-child-object-to-parent-object/53934415#53934415", "title": "Copy child object to parent object", "body": "<p>You seem to be missing the <code>virtual</code> keyword.</p>\n\n<p>The destructor of the base class <em>Shape</em> needs to be virtual as well (in case you ever decide to manipulate any of the derived objects through a pointer to the base class).</p>\n\n<p>The function computeArea() must be declared virtual, like this <code>virtual double computeArea() { ... }</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Shape {\npublic:\n    Shape() {\n\n    }\n\n    virtual ~Shape() {\n\n    }\n\n    void set(float BORDER, string COLOR) {\n        border = BORDER;\n        color = COLOR;\n    }\n\n    virtual double computeArea() {\n        return 0;\n    }\n\nprivate:\n    float border;\n    string color;\n};\n\nclass Circle : public Shape {\npublic:\n    Circle() {\n\n    }\n\n    virtual ~Circle() {\n\n    }\n\n    void setRadius(float RADIUS) {\n        radius = RADIUS;\n    }\n\n    virtual double computeArea() {\n        return 3.14 * radius * radius;\n    }\n\nprivate:\n    float radius;\n};\n\n\nclass Rectangle : public Shape {\npublic:\n    Rectangle() {\n\n    }\n\n    virtual ~Rectangle() {\n\n    }\n\n    void setWidth(float w) {\n        width = w;\n    }\n\n    void setLength(float l) {\n        length = l;\n    }\n\n    virtual double computeArea() {\n        return width * length;\n    }\n\nprivate:\n    float width;\n    float length;\n};\n</code></pre>\n\n<p>Also if you are using C++11 or newer, you can add the <code>overrride</code> keyword at endd of the <code>computeArea</code> function definitions, like this</p>\n\n<pre><code>    virtual double computeArea() override {\n        return width * length;\n    }\n</code></pre>\n\n<p>and this,</p>\n\n<pre><code>    virtual double computeArea() override {\n        return 3.14 * radius * radius;\n    }\n</code></pre>\n\n<p>in the respective classes.</p>\n\n<p>And then modify the main function like this.</p>\n\n<pre><code>    int main() {\n    Circle c;\n    c.setRadius(3);\n    Rectangle r;\n    r.setWidth(4);\n    r.setLength(5);\n\n    Shape *sh1, *sh2;\n\n    sh1 = &amp;c;\n    sh2 = &amp;r;\n\n    cout &lt;&lt; sh1-&gt;computeArea() &lt;&lt; endl;\n    cout &lt;&lt; sh2-&gt;computeArea();\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: Also, as others have pointed out, you need pointers to the base class and don't need to copy your derived class objects to the base class object. See the modified main() function please.</p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841030, "post_id": 53934447, "comment_id": 94708999, "body": "If I do it, I can&#39;t create any object from <code>Shape</code> class"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841295, "post_id": 53934447, "comment_id": 94709081, "body": "@mshomali of course, this is the goal of an abstract class, that force you to define the operation in the child classes"}, {"owner": {"reputation": 1, "user_id": 10812880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0dfa193e146de54cd2ae4ff90885b9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Halloumi", "link": "https://stackoverflow.com/users/10812880/salma-halloumi"}, "edited": false, "score": 0, "creation_date": 1545841458, "post_id": 53934447, "comment_id": 94709142, "body": "I think you can declare it as virtual(without the =0) and then use pointers for example:     Shape* S(new Cercle());    double a=S-&gt;computeArea();"}, {"owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841553, "post_id": 53934447, "comment_id": 94709175, "body": "My purpose is compute area of all childs of <code>Shape</code> class one time on objects of <code>Shape</code> class."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "edited": false, "score": 0, "creation_date": 1545841797, "post_id": 53934447, "comment_id": 94709260, "body": "@mshomali in <code>Shape s1 = ...</code> <i>s1</i> is  a <i>Shape</i> and cannot be a child class instance. In <code>Shape * s2 = ...</code> that time s2 can point to an instance of a child class or a <i>Shape</i> because this is a pointer to, you do not create a new instance contrarily to <i>s1</i> which is a new instance os <i>Shape</i>"}], "tags": [], "owner": {"reputation": 1, "user_id": 10812880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0dfa193e146de54cd2ae4ff90885b9?s=128&d=identicon&r=PG&f=1", "display_name": "Salma Halloumi", "link": "https://stackoverflow.com/users/10812880/salma-halloumi"}, "is_accepted": false, "score": 0, "last_activity_date": 1545840973, "creation_date": 1545840973, "answer_id": 53934447, "question_id": 53934342, "link": "https://stackoverflow.com/questions/53934342/copy-child-object-to-parent-object/53934447#53934447", "title": "Copy child object to parent object", "body": "<p>In Shape class make    computeArea() an abstract(or purely virtual) method:</p>\n\n<pre><code>virtual double computeArea() =0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1545841134, "post_id": 53934474, "comment_id": 94709034, "body": "+1. Also worth to mention that usually when polymorphic behaviours are desired, it&#39;s good to declare destructors as <code>virtual</code> as well."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 3, "last_activity_date": 1545851221, "last_edit_date": 1545851221, "creation_date": 1545841069, "answer_id": 53934474, "question_id": 53934342, "link": "https://stackoverflow.com/questions/53934342/copy-child-object-to-parent-object/53934474#53934474", "title": "Copy child object to parent object", "body": "<p>To expand on what Fureeish said, change your code to this:</p>\n\n<pre><code>int main() {\n    Circle c;\n    c.setRadius(3);\n    Rectangle r;\n    r.setWidth(4);\n    r.setLength(5);\n\n    Shape *sh[2];\n\n    sh[0] = &amp;c;\n    sh[1] = &amp;r;\n\n    cout &lt;&lt; sh[0]-&gt;computeArea() &lt;&lt; endl;\n    cout &lt;&lt; sh[1]-&gt;computeArea();\n\n    return 0;\n}\n</code></pre>\n\n<p>and declare <code>computeArea</code> (and also <code>Shape</code>'s destructor, in case you destroy a derived object through a pointer to the base class) as <code>virtual</code>.</p>\n\n<p>Assigning a derived class to an object of the base class is known as 'object slicing' and usually leads to undesirable results.  Using pointers (or references) avoids this.</p>\n"}], "owner": {"reputation": 673, "user_id": 6148426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b54b8d4ccb1547546be81cff86ef4cc6?s=128&d=identicon&r=PG&f=1", "display_name": "mshomali", "link": "https://stackoverflow.com/users/6148426/mshomali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 53934474, "answer_count": 3, "score": 0, "last_activity_date": 1553850913, "creation_date": 1545840389, "question_id": 53934342, "link": "https://stackoverflow.com/questions/53934342/copy-child-object-to-parent-object", "title": "Copy child object to parent object", "body": "<p>I have three classes: <code>Shape</code>, <code>Rectangle</code> and <code>Circle</code>. <code>Shape</code> is parent of two other class. definition of this classes is in following code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Shape {\npublic:\n    Shape() {\n\n    }\n\n    ~Shape() {\n\n    }\n\n    void set(float BORDER, string COLOR) {\n        border = BORDER;\n        color = COLOR;\n    }\n\n    double computeArea() {\n        return 0;\n    }\n\nprivate:\n    float border;\n    string color;\n};\n\nclass Circle : public Shape {\npublic:\n    Circle() {\n\n    }\n\n    ~Circle() {\n\n    }\n\n    void setRadius(float RADIUS) {\n        radius = RADIUS;\n    }\n\n    double computeArea() {\n        return 3.14 * radius * radius;\n    }\n\nprivate:\n    float radius;\n};\n\n\nclass Rectangle : public Shape {\npublic:\n    Rectangle() {\n\n    }\n\n    ~Rectangle() {\n\n    }\n\n    void setWidth(float w) {\n        width = w;\n    }\n\n    void setLength(float l) {\n        length = l;\n    }\n\n    double computeArea() {\n        return width * length;\n    }\n\nprivate:\n    float width;\n    float length;\n};\n</code></pre>\n\n<p>I build two object from <code>Circle</code> and <code>Rectangle</code> classes. Then I copied this two object into <code>Shape</code> class. When I run <code>computeArea()</code> function in following order I get <code>0</code> result.</p>\n\n<pre><code>int main() {\n    Circle c;\n    c.setRadius(3);\n    Rectangle r;\n    r.setWidth(4);\n    r.setLength(5);\n\n    Shape sh[2];\n\n    sh[0] = c;\n    sh[1] = r;\n\n    cout &lt;&lt; sh[0].computeArea() &lt;&lt; endl;\n    cout &lt;&lt; sh[1].computeArea();\n\n    return 0;\n}\n</code></pre>\n\n<p>I want compute area of all shapes with correct function. How can I do that?</p>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["c++", "ice"], "comments": [{"owner": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1545843004, "post_id": 53934325, "comment_id": 94709693, "body": "Just to add I am using Ice-3.5.1 Visual Studio Add-in for C# file generation. Is there a separate addin for generating C++ file ?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1545948801, "post_id": 53934821, "comment_id": 94741442, "body": "Thanks @Cinder Biscuits, your post was very helpful. I could generate the cpp files from ICE files in my project. Just wanted to check if it is also possible to generate .lib file, so that I can use the functions present in C++ files generated in some other library ?  I tried specifying Configuration Properties-&gt; General-&gt; Target Extension to .dll and Configuration Type to Dynamic Library (.dll) on the properties window but apparently that doesn&#39;t work."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1545959842, "post_id": 53934821, "comment_id": 94743831, "body": "To do that, you may have to fall back to <code>slice2cpp</code> on the commandline and use the <code>--dll-export MACRO</code> flag: <a href=\"https://doc.zeroc.com/ice/3.6/language-mappings/c++-mapping/slice2cpp-command-line-options#id-.slice2cppCommand-LineOptionsv3.6---dll-exportMACRO\" rel=\"nofollow noreferrer\">doc.zeroc.com/ice/3.6/language-mappings/c++-mapping/&hellip;</a>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1545959913, "post_id": 53934821, "comment_id": 94743841, "body": "It looks like the Project Setting inside the VS extension is called &quot;Macro for exporting symbols from DLL&quot;"}, {"owner": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1546012235, "post_id": 53934821, "comment_id": 94759578, "body": "Thanks a lot @Cinder Biscuits, I could find the &quot;Macro for exporting symbol from DLL&quot; option in Ice Configuration (I am building it via Ice Addin). Do you know what field I have to enter in this box for exporting the dll. I tried  1. --dll-export WIDGET_API 2. --dll-export 3. __declspec(dllexport), but that doesn&#39;t seem to be working. Thanks a lot for your help in advance."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "edited": false, "score": 0, "creation_date": 1546016647, "post_id": 53934821, "comment_id": 94761360, "body": "I think you will just enter the name you&#39;ve chosen for your exports. It would be <code>WIDGET_API</code>. It could be <code>ICE_API</code>. It could be <code>ICE_ICE_BABY</code>. That&#39;s entirely up to you, but you only need enter the macro name there.  <code>slice2cpp</code> will then generate __declspec definitions with that name + <code>_EXPORT</code>"}], "tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": false, "score": 1, "last_activity_date": 1545844134, "last_edit_date": 1592644375, "creation_date": 1545843175, "answer_id": 53934821, "question_id": 53934325, "link": "https://stackoverflow.com/questions/53934325/converting-ice-files-to-c-using-icebuilder/53934821#53934821", "title": "Converting ICE files to C++ using ICEBuilder", "body": "<p>Specifics for using the VS Marketplace add-in can be found <a href=\"https://github.com/zeroc-ice/ice-builder-visualstudio/blob/master/README.md#c-usage\" rel=\"nofollow noreferrer\">here</a>. It appears that the VS adding handles both C++ and C#, but you must include the correct NuGet Package in your project. I'm not sure what Ice Configuration box you are referring to, but unless you are building with SCONS, you likely don't need that flag.</p>\n<p>Did you make sure to choose C++ Project not C# when you created your solution and added ICEBuilder to it?</p>\n<hr />\n<p>The following explains the process of generating C++ from slices without the VS add-in:</p>\n<p>In order to generate C++ code for ICE slices, you need to use the <code>slice2cpp</code> program included with the ICE distribution. If you are using Visual Studio for build system, <a href=\"https://doc.zeroc.com/ice/3.7/release-notes/using-the-windows-binary-distributions#id-.UsingtheWindowsBinaryDistributionsv3.7-InformationforC++Developers\" rel=\"nofollow noreferrer\">the documentation suggests you install the distribution using NuGet</a>:</p>\n<blockquote>\n<p>Once you've installed the Ice NuGet package into a C++ project as shown earlier, this project will find automatically all Ice C++ header files and import libraries. If you add zeroc.icebuilder.msbuild to this C++ project, Ice Builder will take care of compiling the Slice files in this project with slice2cpp (it uses the slice2cpp installed from the NuGet package).</p>\n<p>Moreover, the Debugger Path is set and you can run your application directly from Visual Studio - there is no need to set any additional environment variables.</p>\n</blockquote>\n<p>If you cannot use the NuGet Package, you can find the ice builder distribution on <a href=\"https://github.com/zeroc-ice/ice-builder-msbuild#installation\" rel=\"nofollow noreferrer\">ZeroC's GitHub</a>.</p>\n<p>If you require using <code>slice2cpp</code> outside of the Visual Studio environment, (if you're using CMake as a build system from the command line, for example) the documentation states, you will need to add ICE's bin/ folder to your <code>PATH</code>.</p>\n<p>Specifics on using <code>slice2cpp</code> from command line can be found <a href=\"https://doc.zeroc.com/ice/3.7/language-mappings/c++11-mapping/slice2cpp-command-line-options\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 9401924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aJd5babn9vg/AAAAAAAAAAI/AAAAAAAAAnQ/wFxHQDgUYBI/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9401924/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545844134, "creation_date": 1545840258, "last_edit_date": 1545843233, "question_id": 53934325, "link": "https://stackoverflow.com/questions/53934325/converting-ice-files-to-c-using-icebuilder", "title": "Converting ICE files to C++ using ICEBuilder", "body": "<p>I am new to Slice/ICE files conversion to C++ and C#. I have installed ZEROC->ICE 3.5.1 on my computer and I am currently using Vistual Studio 2013 for these file conversion.</p>\n\n<p>I have a bunch of .ice files that I want to convert to C++. The Ice Configuration box has the following files currently set up:         \"--underscore -DSCONS_ICE_BUILD\". With the current setting the Visual Studio generates C# files and not C++ files. Can someone please help me in figuring out what should be the fields for generating C++ files. Thanks in Advance!</p>\n\n<p>Just to add I am using Ice-3.5.1 Visual Studio Add-in for C# file generation. Is there a separate addin for generating C++ file?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "visual-studio-2017"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1545850128, "post_id": 53934281, "comment_id": 94711945, "body": "A little further up the page of your &quot;docs&quot; link, it says, &quot;A debugger expression cannot call an intrinsic or inlined function unless the function appears at least once as a normal function.&quot;  Try making your <code>operator+</code> a non-inline function."}, {"owner": {"reputation": 894, "user_id": 986007, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ebadd137dc78ae87f0bfc9b1850fa09?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/986007/adam"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1545852617, "post_id": 53934281, "comment_id": 94712719, "body": "I don&#39;t know what it means to &#39;appear as a normal function&#39;, but that sentence is why I have <code>v2 c = a + b</code> in the source shown in the question. And as I said it doesn&#39;t work as a top level function either (I didn&#39;t add inline to it). And just to be sure I added <code>__declspec(noinline)</code> to the member variant and it still doesn&#39;t work."}], "owner": {"reputation": 894, "user_id": 986007, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ebadd137dc78ae87f0bfc9b1850fa09?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/986007/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545852145, "creation_date": 1545840015, "last_edit_date": 1545852145, "question_id": 53934281, "link": "https://stackoverflow.com/questions/53934281/overloaded-operators-not-working-in-debugger-but-docs-say-they-should", "title": "Overloaded operators not working in debugger, but docs say they should", "body": "<p>I have a trivial test project that defines a class with an operator overload.</p>\n\n<pre><code>struct v2\n{\n    float x;\n    float y;\n\n    v2 operator+ (const v2&amp; rhs) const\n    {\n        return { x + rhs.x, y + rhs.y };\n    }\n};\n\nint main()\n{\n    v2 a = { 0, 1 };\n    v2 b = { 2, 3 };\n    v2 c = a + b;\n    return 0;\n}\n</code></pre>\n\n<p>If I place a breakpoint on the return statement and enter <code>a + b</code> in the Watch window I get the following error: <code>no operator \"+\" matches these operands</code> But <code>a.operator+(b)</code> will work so clearly the debugger is <em>capable</em> of evaluating the function.</p>\n\n<p>However, when I search through the <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/expressions-in-the-debugger?view=vs-2017\" rel=\"nofollow noreferrer\">documentation</a> for Visual Studio I can't find anything saying this isn't supported. In fact, I can find <a href=\"https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/0888kc6a%28v%3dvs.100%29#operator-functions\" rel=\"nofollow noreferrer\">docs</a> that <em>explicitly</em> say operator overloads are supported by the expression evaluator for native C++ as far back as VS 2010.</p>\n\n<p>I've run this in VS 2015 and VS 2017 and both fail to evaluate it. I've tried implementing the operator as both a member function and a top level function and again no joy.</p>\n\n<p>Does anyone have have or source or understand why using overloaded operators in the Watch window doesn't work? Should it work? Is there some subtle setting that needs to be changed?</p>\n"}, {"tags": ["c++", "language-lawyer", "lifetime"], "comments": [{"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1545839776, "post_id": 53934177, "comment_id": 94708614, "body": "Whats the concern? The initializer list holds whatever you put in it. So, if you place a pointer in it, it won&#39;t be responsible for managing what the pointer points to. On the other hand the tiny amount of memory that the pointer occupies (size_t) will be managed as any other variable."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 1, "creation_date": 1545839855, "post_id": 53934177, "comment_id": 94708639, "body": "@Mikhail this is not obvious. See <a href=\"http://eel.is/c++draft/initializer_list.syn\" rel=\"nofollow noreferrer\"><code>[initializer_list.syn]</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1545840127, "post_id": 53934296, "comment_id": 94708719, "body": "I was missing /6, shame on me. +1"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545840209, "post_id": 53934296, "comment_id": 94708753, "body": "Only that we are not initializing it from array, we are initializing it from another initializer list"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545840243, "post_id": 53934296, "comment_id": 94708772, "body": "@SergeyA: It is being initialized from a braced-init-list, not an <code>initializer_list</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1545840280, "post_id": 53934296, "comment_id": 94708790, "body": "@SergeyA &quot;The array&quot; in /6 refers to the &quot;prvalue of type array&quot; mentioned in /5"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1545840465, "post_id": 53934296, "comment_id": 94708847, "body": "@SergeyA: You&#39;re misunderstanding something. It&#39;s not creating an <code>initalizer_list</code> and then copying it into the <code>initializer_list</code> it is going to store. It is creating the <code>initializer_list</code> in the global object, initialized from the temporary array. When you use a braced-init-list to initialize an object, there&#39;s no &quot;create and copy&quot; nonsense."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1545840468, "post_id": 53934296, "comment_id": 94708850, "body": "@Igor, you could quote the example of /6: &quot;For [<code>std::initializer_list&lt;int&gt; i3 = { 1, 2, 3 };</code>], the initializer_&#173;list object is a variable, so the array persists for the lifetime of the variable.&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1545840590, "post_id": 53934296, "comment_id": 94708879, "body": "@NicolBolas I guess so. It is list-initializing initializer list, alright."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545868424, "post_id": 53934296, "comment_id": 94716632, "body": "@SergeyA: It would have been more problematic in pre c++17: <code>auto MyGlobalData = std::initializer_list&lt;ElemType&gt;{ {&quot;One&quot;,true}, {&quot;Two&quot;,false} };</code> :-/"}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 6, "last_activity_date": 1545840090, "creation_date": 1545840090, "answer_id": 53934296, "question_id": 53934177, "link": "https://stackoverflow.com/questions/53934177/lifetime-of-a-stdinitializer-list-global-static-object/53934296#53934296", "title": "Lifetime of a std::initializer list global/static object", "body": "<p>It's well defined.</p>\n\n<blockquote>\n  <p><strong>[dcl.init.list]/5</strong> An object of type <code>std::initializer_list&lt;E&gt;</code> is constructed from an initializer list as if the implementation generated and materialized (7.4) a prvalue of type \"array of <code>N</code> <code>const E</code>\", where <code>N</code> is the number of elements in the initializer list.</p>\n  \n  <p><strong>[dcl.init.list]/6</strong> The array has the same lifetime as any other temporary object (15.2), except that initializing an <code>initializer_list</code> object from the array <strong>extends the lifetime</strong> of the array exactly like binding a reference to a temporary.</p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n"}], "owner": {"reputation": 79, "user_id": 10835632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gd6P7.png?s=128&g=1", "display_name": "RedSoft", "link": "https://stackoverflow.com/users/10835632/redsoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 53934296, "answer_count": 1, "score": 4, "last_activity_date": 1545840230, "creation_date": 1545839398, "last_edit_date": 1545840230, "question_id": 53934177, "link": "https://stackoverflow.com/questions/53934177/lifetime-of-a-stdinitializer-list-global-static-object", "title": "Lifetime of a std::initializer list global/static object", "body": "<p>The <code>std::initializer_list</code> is mostly used as class constructors/functions argument in order to copy the list elements into another container. But what about creating a global object using <code>std::initializer_list</code>? E.g.:</p>\n\n<pre><code>struct ElemType {\n    const char* name;\n    bool        flag;\n};\n\nstd::initializer_list&lt;ElemType&gt; MyGlobalData = { {\"One\",true}, {\"Two\",false} };\n</code></pre>\n\n<p>If to look at the <code>std::initializer_list</code> template definition (checked in Visual Studio 2017), it contains only 2 data members: <code>const _Elem *_First</code> and <code>_Last</code>.\nIt means that the initializer list data should be stored in an automatic variable. <strong>What is its lifetime in this case?</strong></p>\n\n<p>Such example tested in Visual Studio 2017 looks working good. But I doubt whether this behaviour corresponds to the latest C++ standard.</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 583, "user_id": 8244162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d479d19f773c7128a475d899bf66beba?s=128&d=identicon&r=PG&f=1", "display_name": "J&#243;n&#225;s Bal&#225;zs", "link": "https://stackoverflow.com/users/8244162/j%c3%b3n%c3%a1s-bal%c3%a1zs"}, "is_accepted": false, "score": 0, "last_activity_date": 1546187859, "creation_date": 1546187859, "answer_id": 53979448, "question_id": 53934125, "link": "https://stackoverflow.com/questions/53934125/protobuf-dynamic-and-static-library/53979448#53979448", "title": "Protobuf dynamic and static library", "body": "<p>If a field is not set then it should return empty string. Please check the documentation <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp-generated#proto3_string\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>If you are using version 2 you can query whether the field is set by <code>has_name_x()</code>.</p>\n\n<p>By the way there are several ways to set a value:</p>\n\n<ul>\n<li>The simplest creates a copy: <code>void set_name_x(const string&amp; value)</code></li>\n<li>In case of <code>C++11</code> you can move a string value: <code>void set_name_x(string&amp;&amp; value)</code></li>\n<li>You can pass pointer: <code>void set_allocated_name_x(string* value)</code></li>\n<li>You can get the pointer to the stored string: <code>string* mutable_name_x()</code></li>\n</ul>\n\n<p>I would advice to get familiar with protobuf and let it manage memory and use <code>set_name_x</code>. If it is not sufficient you can optimize your code with manual memory management.</p>\n"}], "owner": {"reputation": 21, "user_id": 9635979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f1e03e5696667cfaf4943fc5398f1fb?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyY", "link": "https://stackoverflow.com/users/9635979/jimmyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546191182, "creation_date": 1545839082, "last_edit_date": 1546191182, "question_id": 53934125, "link": "https://stackoverflow.com/questions/53934125/protobuf-dynamic-and-static-library", "title": "Protobuf dynamic and static library", "body": "<p>I have two custom protobuf libraries. One is dynamic, other is static.\nStatic lib has a message:</p>\n\n<pre><code>message DataType\n{\n    int number = 1;\n    string name_1 = 2;\n    string name_2 = 3;\n    string name_3 = 4;\n}\n\n// The dynamic lib has a message:\nmessage MyMessage\n{\n    DataType type = 1;\n}\n</code></pre>\n\n<p>I build dynamic proto lib with linking static proto lib to it.\nThen I build exe application to which I link dynamic proto lib.</p>\n\n<p>The problem is that when I set one of name_1, name_2 or name_3, they all have this value. I think all these strings have same buffer.\nIf to convert dynamic lib to static, then problem disappears.\nCould anyone explain me what is wrong with it? Thank you. </p>\n"}, {"tags": ["c++", "opengl", "glut", "nurbs"], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1545843486, "creation_date": 1545843486, "answer_id": 53934868, "question_id": 53934033, "link": "https://stackoverflow.com/questions/53934033/opengl-nurbs-surfaces/53934868#53934868", "title": "OpenGL NURBS surfaces", "body": "<p><code>ctrlpoints</code> is a global variable. Once it is initialized it can be changed only by an assignment. There is no magic dynamic dependency on the variable <code>y</code>.</p>\n\n<p>You have to change the filed of <code>ctrlpoints</code> by an assignment. After changing the content of <code>ctrlpoints</code>, the  two-dimensional evaluator has to be redefined.</p>\n\n<p>The correct condition which is true, when the left mouse button is presse is <code>button == GLUT_LEFT_BUTTON &amp;&amp; state == GLUT_DOWN</code>.</p>\n\n<p>Note since <code>y</code> is a name of a formal parameter in the function signature of <code>myMouse(int button, int state, int x, int y)</code>,  <code>y ++</code> (inside <code>myMouse</code>) won't change the the vlaue of the globale variable <code>y</code>, but it will change the value of the parameter <code>y</code>. </p>\n\n<p>Add a function <code>initMap</code> and change the functions <code>myMouse</code> and <code>init</code> as folows:</p>\n\n<pre><code>void initMap(void)\n{\n    glMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 4, 0, 1, 12, 4, &amp;ctrlpoints[0][0][0]);\n    glEnable(GL_MAP2_VERTEX_3);\n    glMapGrid2f(20, 0.0, 1.0, 20, 0.0, 1.0);\n}\n\nvoid myMouse(int button, int state, int px, int py)\n{\n    if (button == GLUT_LEFT_BUTTON &amp;&amp; state == GLUT_DOWN)\n    {\n        ctrlpoints[1][1][1] -= 1.0f;\n        ctrlpoints[1][2][1] -= 1.0f;\n    }\n    initMap();\n    glutPostRedisplay();\n}\n\nvoid init(void)\n{ \n    //glClearColor(1.0, 1.0, 1.0, 0.0);\n    glEnable(GL_DEPTH_TEST);\n    glShadeModel(GL_FLAT);\n    initMap();\n} \n</code></pre>\n\n<p>Preview:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IBUBX.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IBUBX.gif\" alt=\"\"></a>  </p>\n"}], "owner": {"reputation": 33, "user_id": 8145725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/278aea9d838881b03035a8a317177d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Saadi", "link": "https://stackoverflow.com/users/8145725/saadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 53934868, "answer_count": 1, "score": 1, "last_activity_date": 1545843486, "creation_date": 1545838439, "last_edit_date": 1545842001, "question_id": 53934033, "link": "https://stackoverflow.com/questions/53934033/opengl-nurbs-surfaces", "title": "OpenGL NURBS surfaces", "body": "<p>I am implementing NURBS surfaces.  All I want is on each mouse click there is decrements on Y-axis, so it looks like there is a weight of Sun or other planets.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;glut.h&gt;\nint  PI = 3.145;\nint y = 0;\n</code></pre>\n\n<p>here i am trying to do the same thing but there is no change in output</p>\n\n<pre><code>void myMouse(int button, int state, int x, int y) {\n    if (state == GLUT_LEFT_BUTTON &amp;&amp; GLUT_DOWN) {\n        y++;\n    }\n    glutPostRedisplay();\n}\n</code></pre>\n\n<p>Code continue here</p>\n\n<pre><code>GLfloat ctrlpoints[4][4][3] = {\n    {{-3.5, 1.0, -4.5},  {-0.5, 1.0,-4.5 }, {0.5, 1.0, -4.5 },   {3.5, 1.0,-4.5}},\n    {{-3.5, 1.0, -0.5},  {-0.5, -2.0 - y,-0.5 }, {0.5, -2.0 - y, -0.5 }, {3.5, 1.0,-0.5}},\n    {{-3.5, 1.0,  0.5},  {-0.5, 1.0, 0.5 }, {0.5, 1.0,  0.5 },   {3.5, 1.0, 0.5}},\n    {{-3.5, 1.0,  4.5},  {-0.5, 1.0, 4.5 }, {0.5, 1.0,  4.5 },   {3.5, 1.0, 4.5}} \n};\n\nvoid Sun() {\n    glPushMatrix();\n    glTranslatef(0, 1, 0);\n    glRotatef(2*PI, 1, 0, 0);\n    glutSolidSphere(0.5, 20, 20);\n    glPopMatrix();\n}\n\nvoid display(void)\n{\n    int i, j;\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glColor3f(0.0, 1.0, 1.0);\n    glPushMatrix();\n    glRotatef(45.0, 1.0, 1.0, 1.0);\n    for (j = 0; j &lt;= 30; j++) {\n        glBegin(GL_LINE_STRIP);\n        for (i = 0; i &lt;= 100; i++)\n            glEvalCoord2f((GLfloat)i / 100.0, (GLfloat)j / 30.0);\n        glEnd();\n        glBegin(GL_LINE_STRIP);\n        for (i = 0; i &lt;= 100; i++)\n            glEvalCoord2f((GLfloat)j / 30.0, (GLfloat)i / 100.0);\n        glEnd();\n    }\n    glPopMatrix();\n\n    glPushMatrix();\n    glColor3f(1, 1, 0);\n    Sun();\n    glPopMatrix();\n    glFlush();\n}\n\nvoid init(void)\n{\n    glClearColor(1.0, 1.0, 1.0, 0.0);\n    glMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 4, 0, 1, 12, 4, &amp;ctrlpoints[0][0][0]);\n    glEnable(GL_MAP2_VERTEX_3);\n    glMapGrid2f(20, 0.0, 1.0, 20, 0.0, 1.0);\n    glEnable(GL_DEPTH_TEST);\n    glShadeModel(GL_FLAT);\n}\n\nvoid reshape(int w, int h)\n{\n    glViewport(0, 0, (GLsizei)w, (GLsizei)h);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    if (w &lt;= h)\n        glOrtho(-5.0, 5.0, -5.0*(GLfloat)h / (GLfloat)w, 5.0*(GLfloat)h / (GLfloat)w, -5.0, 5.0);\n    else\n        glOrtho(-5.0*(GLfloat)w / (GLfloat)h, 5.0*(GLfloat)w / (GLfloat)h, -5.0, 5.0, -5.0, 5.0);\n     glMatrixMode(GL_MODELVIEW);\n     glLoadIdentity();\n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowSize(500, 500);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(argv[0]);\n    init();\n    glutDisplayFunc(display);\n    glutReshapeFunc(reshape);\n    glutMouseFunc(myMouse);\n    Sun();\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>This is my current hardcoded output of this code i want this to decrements on y axis every time i click mouse button:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kPF2g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kPF2g.png\" alt=\"current output\"></a></p>\n"}, {"tags": ["c++", "computational-geometry", "cgal", "delaunay"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1545851054, "post_id": 53933967, "comment_id": 94712208, "body": "For exact details, the documentation is the code. For Vertex_handle, I would expect that it remains valid as long as the vertex exists in the triangulation. When you use an invalidated Vertex_handle, you get undefined behavior, so it may not be that interesting to try and figure out exactly what happens."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1545851901, "post_id": 53933967, "comment_id": 94712521, "body": "@MarcGlisse Welp. RTFM isn&#39;t a very helpful response. For example, in what I posted, <code>handle0</code> becomes invalid, despite pointing to a valid vertex."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1545863265, "post_id": 53933967, "comment_id": 94715655, "body": "I never said RTFM, at most I said that if the manual doesn&#39;t have the answer, RTFSource. Do you mean that handle2 (not handle0) becomes invalid? &quot;pointing to a valid vertex&quot; well no, as you said, the vertex was removed, the handle is dangling, you shouldn&#39;t use it anymore, <code>move</code> returns the new handle you should use instead."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1545926623, "post_id": 53933967, "comment_id": 94733864, "body": "handle0 is also invalid"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1545945513, "post_id": 53933967, "comment_id": 94740505, "body": "What makes you say that?"}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1546392303, "post_id": 53933967, "comment_id": 94837506, "body": "@MarcGlisse Welp, you can never move it back into a useful place."}], "answers": [{"tags": [], "owner": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1547120137, "creation_date": 1547120137, "answer_id": 54127839, "question_id": 53933967, "link": "https://stackoverflow.com/questions/53933967/lifecycle-for-cgal-vertex-handles/54127839#54127839", "title": "Lifecycle for CGAL vertex handles?", "body": "<p>In CGAL triangulations, iterators and handles are equivalent, and implemented as a pointer.</p>\n\n<p>When a vertex is removed from the triangulation, then one iterator or handle pointing to it is invalidated.</p>\n\n<p>When a vertex is moved, that is equivalent to insert and then remove. The <code>move</code> function returns the new (inserted) vertex handle.</p>\n\n<p>In the case of your move, you move one vertex (<code>handle2</code>) to the position of an existing one (<code>handle0</code>). The insertion will do nothing, and return <code>handle0</code>, and the vertex pointed by <code>handle2</code> will be removed. And thus <code>handle2</code> becomes invalid.</p>\n"}], "owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547120137, "creation_date": 1545838075, "last_edit_date": 1545838907, "question_id": 53933967, "link": "https://stackoverflow.com/questions/53933967/lifecycle-for-cgal-vertex-handles", "title": "Lifecycle for CGAL vertex handles?", "body": "<p>I'm a bit confused about the lifecycle of CGAL vertex handles in a Delaunay triangulation. Its not clear to me when the handles are invalidated.</p>\n\n<p>In my application I frequently need to move a single point, and was hoping I could do that without invalidating a structure that holds the vertex handles. (documentation mentions iterators being invalidated)</p>\n\n<p>For example:</p>\n\n<ol>\n<li>If a triangulation is rebuilt, are old handles invalidated? </li>\n<li>If a vertex is removed, what happens to the dangling handle to that vertex? </li>\n</ol>\n\n<p>In this example, a vertex in a triangulation is moved so that it duplicates, which removed the vertex. </p>\n\n<pre><code>//https://doc.cgal.org/latest/Triangulation_2/index.html#title42\n#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;\n#include &lt;CGAL/Delaunay_triangulation_2.h&gt;\n#include &lt;CGAL/Triangulation_vertex_base_2.h&gt;\n\ntypedef CGAL::Exact_predicates_inexact_constructions_kernel         K;\ntypedef CGAL::Triangulation_vertex_base_2&lt;K&gt;                        Vb;\ntypedef CGAL::Triangulation_data_structure_2&lt;Vb&gt;                    Tds;\ntypedef CGAL::Delaunay_triangulation_2&lt;K, Tds&gt;                      Delaunay;\ntypedef Delaunay::Point                                             Point;\nint main()\n{\n    Delaunay T;\n    auto handle0 = T.insert(Point(0, 0));\n    auto handle1 = T.insert(Point(1, 0));\n    auto handle2 = T.insert(Point(1, 1));\n    std::cout &lt;&lt; \"Beginning\" &lt;&lt; std::endl;\n    for (auto v = T.all_vertices_begin(); v != T.all_vertices_end(); ++v)\n    {\n        std::cout &lt;&lt; *v &lt;&lt; std::endl;\n    }\n    T.move(handle2, Point(0, 0));\n    std::cout &lt;&lt; \"Move to invalid will remove the vertex (expected)\" &lt;&lt; std::endl;\n    for (auto v = T.all_vertices_begin(); v != T.all_vertices_end(); ++v)\n    {\n        std::cout &lt;&lt; *v &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"Where does this handle point to?\" &lt;&lt; std::endl;\n    T.move(handle2, Point(1, 1));\n    std::cout &lt;&lt; \"Vertices\" &lt;&lt; std::endl;\n    for (auto v = T.all_vertices_begin(); v != T.all_vertices_end(); ++v)\n    {\n        std::cout &lt;&lt; *v &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Beginning\n-9.25596e+61 -9.25596e+61\n0 0\n1 0\n1 1\nMove to invalid will remove the vertex (expected)\n-9.25596e+61 -9.25596e+61\n0 0\n1 0\nWhere does this handle point to?\nVertices\n-9.25596e+61 -9.25596e+61\n0 0\n1 0\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtwebengine"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545838244, "post_id": 53933938, "comment_id": 94708127, "body": "What do you mean with <i>Messenger</i>? you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 383, "user_id": 3780331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adecfec9f953965ddc73a9b2ff7ae6a4?s=128&d=identicon&r=PG", "display_name": "RedZ", "link": "https://stackoverflow.com/users/3780331/redz"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545841002, "post_id": 53933938, "comment_id": 94708990, "body": "@eyllanesc by Messenger i meant Facebook&#39;s Messenger (www.messenger.com) , PS: i added my current code"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 3780331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adecfec9f953965ddc73a9b2ff7ae6a4?s=128&d=identicon&r=PG", "display_name": "RedZ", "link": "https://stackoverflow.com/users/3780331/redz"}, "edited": false, "score": 0, "creation_date": 1556205388, "post_id": 55832393, "comment_id": 98366996, "body": "so there is no way around this using Qt 5.12"}, {"owner": {"reputation": 366, "user_id": 11405014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22caec28175e0f7e001a4eacad0593e9?s=128&d=identicon&r=PG", "display_name": "Allan Jensen", "link": "https://stackoverflow.com/users/11405014/allan-jensen"}, "reply_to_user": {"reputation": 383, "user_id": 3780331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adecfec9f953965ddc73a9b2ff7ae6a4?s=128&d=identicon&r=PG", "display_name": "RedZ", "link": "https://stackoverflow.com/users/3780331/redz"}, "edited": false, "score": 0, "creation_date": 1556278700, "post_id": 55832393, "comment_id": 98393465, "body": "You could install some javascript to handle it with a webchannel connection, depending on what you need."}], "tags": [], "owner": {"reputation": 366, "user_id": 11405014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22caec28175e0f7e001a4eacad0593e9?s=128&d=identicon&r=PG", "display_name": "Allan Jensen", "link": "https://stackoverflow.com/users/11405014/allan-jensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1556115777, "creation_date": 1556115777, "answer_id": 55832393, "question_id": 53933938, "link": "https://stackoverflow.com/questions/53933938/receiving-notifications-with-qwebengine/55832393#55832393", "title": "Receiving Notifications with QWebEngine", "body": "<p>Web Notifications are only supported in Qt WebEngine from Qt 5.13</p>\n"}], "owner": {"reputation": 383, "user_id": 3780331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adecfec9f953965ddc73a9b2ff7ae6a4?s=128&d=identicon&r=PG", "display_name": "RedZ", "link": "https://stackoverflow.com/users/3780331/redz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556115777, "creation_date": 1545837848, "last_edit_date": 1545841102, "question_id": 53933938, "link": "https://stackoverflow.com/questions/53933938/receiving-notifications-with-qwebengine", "title": "Receiving Notifications with QWebEngine", "body": "<p>I'm trying to develop a small app that opens Messenger , and i need to notify the user when there is a new message</p>\n\n<p>I'm using Qt 5.10 , and i have developed pretty much all the other functionality , i only need to know how to receive notifications from Messenger and than ill handle the rest.\nI thought maybe Messenger uses some kind of a JavaScript call when there is a new message , but i'm not sure , i have no experience with this.</p>\n\n<p>PS: i would love to do the same with Discord and MEGA.nz as well , hoping the same principle goes for both Messenger , Discord &amp; MEGA.nz.</p>\n\n<p>This is the main code on MainWindow's constructor:</p>\n\n<pre><code>p_UISettings = new QSettings(\"UISettings.ini\" , QSettings::IniFormat);\nthis-&gt;resize(p_UISettings-&gt;value(\"Width\" , 776).toInt() , p_UISettings-&gt;value(\"Height\" , 508).toInt());\n\np_TrayIcon = new QSystemTrayIcon(QIcon(\":/new/prefix1/Res/Messenger.png\") , this);\nQAction *Exit_TrayAction = new QAction(QIcon(\":/new/prefix1/Res/1470421625_onebit_33.png\") , \"Close\" , 0);\nQObject::connect(p_TrayIcon , SIGNAL(activated(QSystemTrayIcon::ActivationReason)) , this , SLOT(showHide(QSystemTrayIcon::ActivationReason)));\nQObject::connect(Exit_TrayAction , SIGNAL(triggered(bool)) , this , SLOT(forceClose()));\nQMenu *Tray_Menu = new QMenu;\nTray_Menu-&gt;addAction(Exit_TrayAction);\np_TrayIcon-&gt;setContextMenu(Tray_Menu);\np_TrayIcon-&gt;show();\n\nQWebEngineProfile::defaultProfile()-&gt;setPersistentCookiesPolicy(QWebEngineProfile::ForcePersistentCookies);\nQWebEngineProfile::defaultProfile()-&gt;setPersistentStoragePath(QDir::currentPath() + \"/Storage/\");\n\nui-&gt;View_Widget-&gt;setUrl(QUrl(\"https://www.messenger.com\"));\n</code></pre>\n\n<p>Thats pretty much all , the other functions are just events to handle closing + resize thats all.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 6, "creation_date": 1545837094, "post_id": 53933634, "comment_id": 94707779, "body": "out of curiosity, why this Q is upvoted while linked-one is downvoted?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1545837272, "post_id": 53933634, "comment_id": 94707837, "body": "@appleapple Because this one is #1 well-formulated, #2 gives a short a suffisant context and #3 defines a <a href=\"https://en.wikipedia.org/wiki/SMART_criteria#Current_definitions\" rel=\"nofollow noreferrer\">precise (SMART) objective</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1545837379, "post_id": 53933634, "comment_id": 94707878, "body": "@appleapple - The OP over there started it out as a C/C++ question. It... didn&#39;t do the question any favors. Though they did clean it up since."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545837577, "post_id": 53933634, "comment_id": 94707937, "body": "The function must be at least static else there is no way allowing the compiler to know the argument at compile time."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 6, "creation_date": 1545837764, "post_id": 53933634, "comment_id": 94707992, "body": "@YSC well, this question <i>does not show any research effort</i>; it&#39;s unclear or <i>not useful</i>. I&#39;d give a downvote if I have to cast one."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1545837857, "post_id": 53933634, "comment_id": 94708017, "body": "@appleapple please feel free to downvote if you think the question is lacking necessary qualities"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1545838046, "post_id": 53933634, "comment_id": 94708064, "body": "@appleapple You don&#39;t have to cast one, but if you want to, feel free to do so. This is a matter of taste I guess. I find it useful (I never succeded at that task and  I think it would be nice to have an API making a value-related contract enforced by a compiler error)."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1545838111, "post_id": 53933634, "comment_id": 94708091, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18981752/c-compile-time-check-function-arguments\">c++ compile-time check function arguments</a>"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1545838166, "post_id": 53933634, "comment_id": 94708104, "body": "@YSC this Q does not meat my own requirement to do a cast, so I simply leave a comment."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1545838360, "post_id": 53933634, "comment_id": 94708158, "body": "@SergeyA It&#39;d be a better Q if include some (failed) attempt and their explain IMHO."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1545838726, "post_id": 53933634, "comment_id": 94708267, "body": "@appleapple I haven&#39;t attempted anything because I am out of ideas."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 4, "creation_date": 1545838773, "post_id": 53933634, "comment_id": 94708287, "body": "@I\u0142yaBursov - not a duplicate, suggested answer doesn&#39;t solve the problem."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1545839438, "post_id": 53933634, "comment_id": 94708510, "body": "@SergeyA Same here. I wonder if it is actually possible or not."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545840641, "post_id": 53933634, "comment_id": 94708899, "body": "If you use C++20&#39;s contracts, a sufficiently smart static analyzer should be able to detect this. For simple cases like this, it may be caught by the compiler."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545840780, "post_id": 53933634, "comment_id": 94708933, "body": "@Justin if you can provide a working example, I will gladly accept!"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545841864, "post_id": 53933634, "comment_id": 94709285, "body": "@SergeyA By &quot;working example,&quot; do you just mean the code which can hypothetically be detectable, or an actual piece of code which existing tools detect? AFAIK, no tool currently exists which can detect C++20 contract violations at compile time, especially since no compiler exists which can compile contracts."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545842138, "post_id": 53933634, "comment_id": 94709392, "body": "@Justin I mean the actual demonstration. Ok, may be this question will have to be aged until 2020 :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1545850998, "post_id": 53933634, "comment_id": 94712193, "body": "With <code>constexpr</code>, I got expected error with minor change to allow compilation <a href=\"http://coliru.stacked-crooked.com/a/8880c3f1afb2c6f8\" rel=\"nofollow noreferrer\">Demo</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1545839586, "post_id": 53934181, "comment_id": 94708562, "body": "No, it doesn&#39;t <i>work</i>. Behavior is dependent on programmer&#39;s discipline (making sure to provide template argument when it&#39;s known at compile time). Instead of this approach, if programmer is disciplined, I&#39;d simply have two functions - templated and not."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1545839658, "post_id": 53934181, "comment_id": 94708578, "body": "Fair, thank you for the comment. I totally agree that this does not actually solve the <i>entire</i> problem, but I will leave it as a neutral hint / information for future visitors :&gt;"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545862340, "post_id": 53934181, "comment_id": 94715452, "body": "You might add an additional runtime check that argument are equal or defaulted."}], "tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 0, "last_activity_date": 1545839443, "creation_date": 1545839443, "answer_id": 53934181, "question_id": 53933634, "link": "https://stackoverflow.com/questions/53933634/enforcing-function-contract-at-compile-time-when-possible/53934181#53934181", "title": "Enforcing function contract at compile time when possible", "body": "<p>It's not perfect <em>and it requires us to use arguments in two different places</em>, but it <em>'works'</em>:</p>\n\n<pre><code>template&lt;int N = 0&gt;\nint foo(int arg = 0) {\n    static_assert(N != 5, \"N cannot be 5!\");\n    int* parg;\n    if (arg != 5) {\n        parg = &amp;arg;\n    }\n\n    return *parg;\n}\n</code></pre>\n\n<p>We can call it like so:</p>\n\n<pre><code>foo&lt;5&gt;();   // does not compile\nfoo(5);     // UB\nfoo&lt;5&gt;(5);  // does not compile\nfoo&lt;5&gt;(10); // does not compile\nfoo&lt;10&gt;(5); // UB\nfoo();      // fine\nfoo&lt;10&gt;();  // fine\nfoo(10);    // fine\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545855461, "post_id": 53936239, "comment_id": 94713522, "body": "Constexpr version doesn&#39;t give me any diagnostic <a href=\"https://gcc.godbolt.org/z/ZCho3b\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/ZCho3b</a>  when it&#39;s result is not used to initialize constant expression variable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545855857, "post_id": 53936239, "comment_id": 94713623, "body": "I do understand that, and this is exactly what I am referring to - unless the function is called in constant expression, no diagnostics are provided"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545855985, "post_id": 53936239, "comment_id": 94713658, "body": "That&#39;s why I provide in my answer way to pass compile time argument (with <code>int_c</code>) which allows to check at compile time , as they call it in constant expression."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545856440, "post_id": 53936239, "comment_id": 94713768, "body": "Jarod, may be I am not making myself clear enough. The goal is to have a callable function, which would enforce contract in compile time when it possible (i.e. argument is known). Your solution effectively introduces two overloads, and successful compile-time check is predicated on developers discipline to call second overload."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545862037, "post_id": 53936239, "comment_id": 94715364, "body": "Found a way with built-in of gcc supported by clang (and so works on clang but not with g++ ;-) )"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545920379, "post_id": 53936239, "comment_id": 94731363, "body": "That&#39;s golden! Two small notes - you probably meant &#39;<b>is</b>_constexpr seems not possible...&#39; and also I believe you second half answers the question, but first does not, so may be putting the <code>__builtin_constant_p</code> solution first, and than reference other options as alternatives? Accepted regardless :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545920509, "post_id": 53936239, "comment_id": 94731418, "body": "Indeed, typo fixed."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1545920455, "last_edit_date": 1545920455, "creation_date": 1545852044, "answer_id": 53936239, "question_id": 53933634, "link": "https://stackoverflow.com/questions/53933634/enforcing-function-contract-at-compile-time-when-possible/53936239#53936239", "title": "Enforcing function contract at compile time when possible", "body": "<p>I got error with <code>constexpr</code> when used in <strong>constant expression</strong> for:</p>\n\n<pre><code>constexpr int foo(int arg) {\n    int* parg = nullptr;\n    if (arg != 5) {\n        parg = &amp;arg;\n    }\n    return *parg;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8880c3f1afb2c6f8\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>We cannot know that argument value is known at compile type, but we can use type representing value with <a href=\"https://en.cppreference.com/w/cpp/types/integral_constant\" rel=\"nofollow noreferrer\"><code>std::integral_constant</code></a></p>\n\n<pre><code>// alias to shorten name. \ntemplate &lt;int N&gt;\nusing int_c = std::integral_constant&lt;int, N&gt;;\n</code></pre>\n\n<p>Possibly with <a href=\"https://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">UDL</a> with <code>operator \"\" _c</code> to have <code>5_c</code>, <code>42_c</code>.</p>\n\n<p>and then, add overload with that:</p>\n\n<pre><code>template &lt;int N&gt;\nconstexpr auto foo(int_c&lt;N&gt;) {\n    return int_c&lt;foo(N)&gt;{};\n}\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>foo(int_c&lt;42&gt;{}); // OK\nfoo(int_c&lt;5&gt;{}); // Fail to compile\n\n// and with previous constexpr:\nfoo(5); // Runtime error, No compile time diagnostic\nconstexpr auto r = foo(5); // Fail to compile\n</code></pre>\n\n<p>As I said, arguments are not known to be constant inside the function, and <a href=\"https://stackoverflow.com/questions/13299394/is-is-constexpr-possible-in-c11\"><code>is_constexpr</code> seems not possible in standard</a> to allow dispatch, but some compiler provide built-in for that (<code>__builtin_constant_p</code>), so with MACRO, we can do the dispatch:</p>\n\n<pre><code>#define FOO(X) [&amp;](){ \\\n    if constexpr (__builtin_constant_p(X)) {\\\n        return foo(int_c&lt;__builtin_constant_p (X) ? X : 0&gt;{});\\\n    } else {\\\n        return foo(X); \\\n    } \\\n}()\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c98724133a97b2cd\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Note: Cannot use <code>foo(int_c&lt;X&gt;{})</code> directly, even in if constexpr, as there is still some syntax check.</p>\n"}, {"tags": [], "owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "is_accepted": false, "score": 2, "last_activity_date": 1545867993, "creation_date": 1545867993, "answer_id": 53938285, "question_id": 53933634, "link": "https://stackoverflow.com/questions/53933634/enforcing-function-contract-at-compile-time-when-possible/53938285#53938285", "title": "Enforcing function contract at compile time when possible", "body": "<p>gcc/clang/intel compilers support <a href=\"https://www.daemon-systems.org/man/__builtin_constant_p.3.html\" rel=\"nofollow noreferrer\">__builtin_constant_p</a>, so you can use something like that:</p>\n\n<pre><code>template &lt;int D&gt;\nint foo_ub(int arg) {\n    static_assert(D != 5, \"error\");\n    int* parg = nullptr;\n    if (arg != 5) {\n        parg = &amp;arg;\n    }\n\n    return *parg;\n}\n\n#define foo(e) foo_ub&lt; __builtin_constant_p(e) ? e : 0 &gt;(e)\n</code></pre>\n\n<p>these statements produce compile time error:</p>\n\n<ul>\n<li><code>foo(5)</code></li>\n<li><code>foo(2+3)</code></li>\n<li><code>constexpr int i = 5; foo(i);</code></li>\n</ul>\n\n<p>while all others - runtime segfault (or ub if no <code>nullptr</code> is used)</p>\n"}], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 8, "accepted_answer_id": 53936239, "answer_count": 3, "score": 13, "last_activity_date": 1545920455, "creation_date": 1545836004, "last_edit_date": 1545839046, "question_id": 53933634, "link": "https://stackoverflow.com/questions/53933634/enforcing-function-contract-at-compile-time-when-possible", "title": "Enforcing function contract at compile time when possible", "body": "<p>(this question was inspired by <a href=\"https://stackoverflow.com/questions/53932643/how-can-i-generate-a-compilation-error-to-prevent-certain-value-not-type-to-go\">How can I generate a compilation error to prevent certain VALUE (not type) to go into the function?</a>)</p>\n\n<p>Let's say, we have a single-argument <code>foo</code>, semantically defined as </p>\n\n<pre><code>int foo(int arg) {\n    int* parg;\n    if (arg != 5) {\n        parg = &amp;arg;\n    }\n\n    return *parg;\n}\n</code></pre>\n\n<p>The whole code above is used to illustrate a simple idea - function returns it's own argument unless the argument is equal to 5, in which case behavior is undefined.</p>\n\n<p>Now, the challenge - modify the function in such a way, that if it's argument is known at compile time, a compiler diagnostic (warning or error) should be generated, and if not, behavior remains undefined in runtime. Solution could be compiler-dependent, as long as it is available in either one of the big 4 compilers.</p>\n\n<p>Here are some potential routes which do not solve the problem:</p>\n\n<ul>\n<li>Making function a template which takes it's argument as a template parameter - this doesn't solve the problem because it makes function ineligible for run-time arguments</li>\n<li>Making function a <code>constexpr</code> - this doesn't solve the problem, because even when compilers see undefined behavior, they do not produce diagnostics in my tests - instead, gcc inserts <code>ud2</code> instruction, which is not what I want.</li>\n</ul>\n"}, {"tags": ["c++", "performance", "gmp", "bignum"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1545850762, "post_id": 53933516, "comment_id": 94712119, "body": "Your code looks fine. Parallelizing at such a low level wouldn&#39;t make sense, you only want to start threads when they have a BIG amount of work to do. Maybe check for optimizations at a higher level?"}], "owner": {"reputation": 253, "user_id": 1434083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da547bd6a4958636d61ba2bf44a2b31a?s=128&d=identicon&r=PG", "display_name": "akashnil", "link": "https://stackoverflow.com/users/1434083/akashnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545835368, "creation_date": 1545835368, "question_id": 53933516, "link": "https://stackoverflow.com/questions/53933516/3x3-matrix-vector-multiplication-using-gmp", "title": "3x3 matrix vector multiplication using GMP", "body": "<p>I have a vector of large (upto 2048 bits) signed integers (f.a, f.b, f.c) and a 3x3 matrix of signed int64_t (aa, ab, ac, ba, bb, bc, ca, cb, cc). I want to update (f.a, f.b, f.c) by multiplying with the said matrix. This happens many many times in my code, I have profiled and found out that the above steps take up a significant portion of my runtime.</p>\n\n<p>Currently my code is the following</p>\n\n<pre><code>mpz_mul_si(faa, f.a, aa);\nmpz_mul_si(fab, f.b, ab);\nmpz_mul_si(fac, f.c, ac);\n\nmpz_mul_si(fba, f.a, ba);\nmpz_mul_si(fbb, f.b, bb);\nmpz_mul_si(fbc, f.c, bc);\n\nmpz_mul_si(fca, f.a, ca);\nmpz_mul_si(fcb, f.b, cb);\nmpz_mul_si(fcc, f.c, cc);\n\nmpz_add(f.a, faa, fab);\nmpz_add(f.a, f.a, fac);\n\nmpz_add(f.b, fba, fbb);\nmpz_add(f.b, f.b, fbc);\n\nmpz_add(f.c, fca, fcb);\nmpz_add(f.c, f.c, fcc);\n</code></pre>\n\n<p>I have tried doing all the individual multiplications and additions in separate threads and joining them (using std::thread) but that unspeakably slows down the performance. I thought it would be better to use addmul_ui and submul_ui <a href=\"https://gmplib.org/manual/Integer-Arithmetic.html\" rel=\"nofollow noreferrer\">functions</a> from gmp. However they turn out to be slower overall, although I am not sure why. Even a few percent improvement will help. The target hardware is:</p>\n\n<p>Dell Inspiron 3670 64bit\ni5 -8400 @ 2.8GHz\n8GB ram\nGPU: Geforce GTX 1060 3GB</p>\n"}, {"tags": ["c++", "performance", "gmp", "bignum"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545835028, "post_id": 53933396, "comment_id": 94707114, "body": "I don&#39;t think that an appropriate <code>operator+()</code>overload would gain anything significant in performance of gmp."}, {"owner": {"reputation": 253, "user_id": 1434083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da547bd6a4958636d61ba2bf44a2b31a?s=128&d=identicon&r=PG", "display_name": "akashnil", "link": "https://stackoverflow.com/users/1434083/akashnil"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545841975, "post_id": 53933396, "comment_id": 94709324, "body": "Yeah, operator overloading would be just some syntactic sugar. The underlying algorithm could iterate the limbs on one pass vs the two pass is what I&#39;m thinking."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1545843194, "post_id": 53933396, "comment_id": 94709753, "body": "It is hard to answer without the context. Is x some new variable each time, or one that you reuse in a loop? Are all numbers as likely to be the same size / sign? Etc. I doubt there is much to gain from a 3-way adder, but who knows... Did you profiler specify which part of mpz_add is taking time?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1552537003, "post_id": 53933396, "comment_id": 97049683, "body": "People think that temporaries in evaluation are going to be a problem with C++, but the <a href=\"https://gmplib.org/manual/C_002b_002b-Class-Interface.html#C_002b_002b-Class-Interface\" rel=\"nofollow noreferrer\"><code>gmpxx</code></a> library is well-designed for such expressions, and employs modern techniques like move semantics."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 6515420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KyLg01QHJJI/AAAAAAAAAAI/AAAAAAAAAPA/2I8me1Z23K8/photo.jpg?sz=128", "display_name": "Byte11", "link": "https://stackoverflow.com/users/6515420/byte11"}, "is_accepted": false, "score": 0, "last_activity_date": 1546643135, "creation_date": 1546643135, "answer_id": 54047354, "question_id": 53933396, "link": "https://stackoverflow.com/questions/53933396/how-to-add-3-large-integers-efficiently-using-gmp/54047354#54047354", "title": "How to add 3 large integers efficiently using GMP", "body": "<p>I've used MPFR extensively and I've looked through nearly every part of the documentation. I'm almost certain that nothing like this exists in MPFR and as such, I'm almost certain nothing like this exists in GMP.</p>\n\n<p>One solution could be to switch to MPFR and use <a href=\"http://www.holoborodko.com/pavel/mpfr/#license\" rel=\"nofollow noreferrer\">Pavel Holoborodko's MPFR C++</a> which adds operators for MPFR functions. I can't imagine that this would help performance (although it probably wouldn't affect it much), it's under a GPL, and you'd have to install another library, but it would combine the operations. </p>\n\n<p>I don't know of any fast algorithms that when adding three numbers don't just add two of them and then add the last number in behind the scenes. I don't think that combining these two operations into one operation using any library in any language would help performance. Arbritrary precision is just slow, even using GNU MP. I've got a comparison of the speeds <a href=\"https://codereview.stackexchange.com/questions/177557/mandelbrot-render-speed-with-arbritary-precision-vs-double-precision\">here</a> on Code Review if that helps. </p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 6900011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a49a54000fd8921c0a2a44e2e4a7bf?s=128&d=identicon&r=PG&f=1", "display_name": "luisp", "link": "https://stackoverflow.com/users/6900011/luisp"}, "is_accepted": false, "score": 0, "last_activity_date": 1547058997, "creation_date": 1547058997, "answer_id": 54116348, "question_id": 53933396, "link": "https://stackoverflow.com/questions/53933396/how-to-add-3-large-integers-efficiently-using-gmp/54116348#54116348", "title": "How to add 3 large integers efficiently using GMP", "body": "<p>Calling twice the functions won't incur in a noticeable overhead. However, the reallocation of x, if needed, can be very slow. To avoid this, you can measure the sizes of a, b and c and make sure x has allocated the maximum size of the three numbers plus 2 (1 bit for addition, in the worst case). You can use </p>\n\n<pre><code>mpz_init2(x, maxsize+2);\n</code></pre>\n\n<p>or, if x was already initialized,</p>\n\n<pre><code>if (mpz_sizeinbase(x, 2) &lt; maxsize+2)\n  mpz_realloc2(x, maxsize+2);\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 1434083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da547bd6a4958636d61ba2bf44a2b31a?s=128&d=identicon&r=PG", "display_name": "akashnil", "link": "https://stackoverflow.com/users/1434083/akashnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547058997, "creation_date": 1545834645, "question_id": 53933396, "link": "https://stackoverflow.com/questions/53933396/how-to-add-3-large-integers-efficiently-using-gmp", "title": "How to add 3 large integers efficiently using GMP", "body": "<p>I want to do x = a + b + c on ~2048 bit signed integers. Currently my code looks like</p>\n\n<pre><code>mpz_add(x, a, b);\nmpz_add(x, x, c);\n</code></pre>\n\n<p>Is there a single function to do this? This happens many many times in my application. I have profiled my code and the 3-way add step is taking up a significant portion of the runtime. If there's an alternative way to do this in a single pass that might help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545833985, "post_id": 53933270, "comment_id": 94706803, "body": "What&#39;s the actual error message?"}, {"owner": {"reputation": 25, "user_id": 9766965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c0d66e119cf1c119b5bd55a9616ffb?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Kr&#243;l", "link": "https://stackoverflow.com/users/9766965/maciej-kr%c3%b3l"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545834127, "post_id": 53933270, "comment_id": 94706848, "body": "Debug assertion failed  Expression: list iterators incompatible"}, {"owner": {"reputation": 25, "user_id": 9766965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c0d66e119cf1c119b5bd55a9616ffb?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Kr&#243;l", "link": "https://stackoverflow.com/users/9766965/maciej-kr%c3%b3l"}, "edited": false, "score": 0, "creation_date": 1545834329, "post_id": 53933270, "comment_id": 94706915, "body": "it is from chrono library it says that actual time has to be in milliseconds"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9766965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c0d66e119cf1c119b5bd55a9616ffb?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Kr&#243;l", "link": "https://stackoverflow.com/users/9766965/maciej-kr%c3%b3l"}, "edited": false, "score": 0, "creation_date": 1545858225, "post_id": 53933347, "comment_id": 94714275, "body": "yeah this was so simple thank you very much it was so obvious ehh"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 25, "user_id": 9766965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c0d66e119cf1c119b5bd55a9616ffb?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Kr&#243;l", "link": "https://stackoverflow.com/users/9766965/maciej-kr%c3%b3l"}, "edited": false, "score": 0, "creation_date": 1545861851, "post_id": 53933347, "comment_id": 94715324, "body": "@MaciejKr&#243;l if this solved your problem you should mark the answer as accepted."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 1, "last_activity_date": 1545834322, "creation_date": 1545834322, "answer_id": 53933347, "question_id": 53933270, "link": "https://stackoverflow.com/questions/53933270/how-to-fix-problem-with-iterating-through-list-if-times-using-iterator/53933347#53933347", "title": "How to fix problem with iterating through list if times using iterator?", "body": "<p><code>get_times</code> returns by value, which means that every time you call it you get a new <code>list</code> object. This is what happens in your <code>for</code> loop. You call it 2 times and you get two objects. You can't compare iterators from two different objects. To fix this create one object by calling <code>get_times</code> just once:</p>\n\n<pre><code>auto times = road.get_times();\n\nfor (auto it = times.begin(); it != times.end(); ++it, z++)\n    //...\n</code></pre>\n\n<p>You also might want to pause and consider if returning by value is the right approach. I can't answer that for you since I don't know what <code>times</code> is and what is the structure of your program.</p>\n"}], "owner": {"reputation": 25, "user_id": 9766965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c0d66e119cf1c119b5bd55a9616ffb?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Kr&#243;l", "link": "https://stackoverflow.com/users/9766965/maciej-kr%c3%b3l"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1545847355, "accepted_answer_id": 53933347, "answer_count": 1, "score": -5, "last_activity_date": 1545834322, "creation_date": 1545833865, "question_id": 53933270, "link": "https://stackoverflow.com/questions/53933270/how-to-fix-problem-with-iterating-through-list-if-times-using-iterator", "closed_reason": "Not suitable for this site", "title": "How to fix problem with iterating through list if times using iterator?", "body": "<p>Debugger sais there is an incompatible iterator.\nHow i can solve this.\nWhat can cause the problem.\nHere is my main code</p>\n\n<pre><code>for (std::list&lt;std::chrono::duration&lt;double, std::milli&gt;&gt;\n::iterator it = road.get_times().begin()\n;it!= road.get_times().end();it++,z++) //error incompatible iterator\n            {\n                *road::file &lt;&lt; \"Samochod z drogi \" &lt;&lt; road.get_lane_number() &lt;&lt; \" pojechal \";\n                switch (road.get_direction())\n                {\n                case'S':\n                    *road::file &lt;&lt; \"prosto\" &lt;&lt; std::endl;\n                    break;\n                case'L':\n                    *road::file &lt;&lt; \"w lewo\" &lt;&lt; std::endl;\n                    break;\n                case'R':\n                    *road::file &lt;&lt; \"w prawo\" &lt;&lt; std::endl;\n                    break;\n                }\n                *road::file &lt;&lt; \"Jego czas stania w kolejce wyniosl \";\n                avarage_time += it-&gt;count() / 1000;\n                *road::file &lt;&lt; round(it-&gt;count() / 1000) &lt;&lt; std::endl;\n                }\n</code></pre>\n\n<p>function road.get_times ()</p>\n\n<pre><code>   std::list&lt; std::chrono::duration&lt;double, std::milli&gt;&gt; get_times()\n    {\n    return times;\n    }\n</code></pre>\n"}, {"tags": ["c++", "qt", "qgraphicsview", "qgraphicsscene"], "comments": [{"owner": {"reputation": 304, "user_id": 1905967, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/806b0fd09846afafb4e40881f22f0235?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/1905967/anonymous"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1546093850, "post_id": 53933098, "comment_id": 94778319, "body": "@eyllanesc, have added required minimum code."}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 1, "creation_date": 1546115047, "post_id": 53933098, "comment_id": 94783743, "body": "How are you determining which pixel you want the position for? Or do you want the positions of all of the pixels?"}, {"owner": {"reputation": 304, "user_id": 1905967, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/806b0fd09846afafb4e40881f22f0235?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/1905967/anonymous"}, "reply_to_user": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 0, "creation_date": 1546158031, "post_id": 53933098, "comment_id": 94789907, "body": "@WilliamMiller, I want thr position of pixel under mouse cursor - mouse_event-&gt;pos()"}], "answers": [{"tags": [], "owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1546496432, "creation_date": 1546496432, "answer_id": 54017241, "question_id": 53933098, "link": "https://stackoverflow.com/questions/53933098/how-to-get-image-pixel-position-loaded-in-qgraphicsview-strange-maptoscene-b/54017241#54017241", "title": "How to get Image pixel position loaded in QGraphicsView - Strange MapToScene() behaviour", "body": "<p>It may be better to use a custom graphics scene subclassed from <code>QGraphicsScene</code> as this makes extracting the necessary coordinates much simpler. The only snag is you have to have the <code>QGraphicsPixmapItem::pos</code> available in the custom <code>QGraphicsScene</code> class - I have included a full working example which uses <code>Graphics_view_zoom.h</code> and <code>Graphics_view_zoom.cpp</code> from the <a href=\"https://stackoverflow.com/questions/19113532/qgraphicsview-zooming-in-and-out-under-mouse-position-using-mouse-wheel?noredirect=1&amp;lq=1\">linked question</a>. The position of the <code>QGraphicsPixmapItem</code> is passed to a member of the <code>QGraphicsScene</code> subclass, <code>Frame</code>, in order to make the necessary correction. </p>\n\n<pre><code>#include &lt;QPixmap&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n#include &lt;QGraphicsTextItem&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsSceneMouseEvent&gt;\n#include &lt;QGraphicsView&gt;\n#include &lt;qfont.h&gt;\n#include \"Graphics_view_zoom.h\"\n\nclass Frame : public QGraphicsScene {\n    Q_OBJECT\npublic:\n    QGraphicsTextItem * coords;\n    QPointF pic_tl;\n    Frame::Frame(QWidget* parent)\n        : QGraphicsScene(parent) {\n        coords = new QGraphicsTextItem();\n        coords-&gt;setZValue(1);\n        coords-&gt;setFlag(QGraphicsItem::ItemIgnoresTransformations, true);\n        addItem(coords);\n    }\n\n    void Frame::tl(QPointF p) {\n        pic_tl = p;\n    }\n\nprotected:\n    void Frame::mouseMoveEvent(QGraphicsSceneMouseEvent* event) {\n        QPointF pos = event-&gt;scenePos();\n        coords-&gt;setPlainText(\"(\" + QString(\"%1\").arg(int(pos.x() - pic_tl.x())) + \", \" \n                       + QString(\"%1\").arg(int(pos.y() - pic_tl.y())) + \")\");\n        coords-&gt;setPos(pos);\n        coords-&gt;adjustSize();\n    }\n};\n\nint main(int argc, char *argv[]) {\n    QApplication a(argc, argv);\n    QMainWindow* main = new QMainWindow();\n\n    QGraphicsView* GraphicsView = new QGraphicsView(main);\n    Graphics_view_zoom* view_wrapper = new Graphics_view_zoom(GraphicsView);\n    Frame* frame = new Frame(main);\n    QGraphicsPixmapItem* pixmapItem = new QGraphicsPixmapItem();\n    frame-&gt;addItem(pixmapItem);\n    GraphicsView-&gt;setScene(frame);\n\n    // Loads a 497x326 pixel test image\n    pixmapItem-&gt;setPixmap(QPixmap(\":/StackOverflow/test\"));\n    // small offset to ensure it works for pictures which are not at \n    // (0,0). Larger offsets produce the same result but require manual\n    // adjustments of the view, I have neglected those for brevity as\n    // they are not in the scope of the question.\n    pixmapItem-&gt;setPos(-20, 20);\n    frame-&gt;tl(pixmapItem-&gt;pos());\n    GraphicsView-&gt;fitInView(QRectF(0, 0, 640, 320), Qt::KeepAspectRatio);\n    GraphicsView-&gt;centerOn(pixmapItem-&gt;pos());\n\n    main-&gt;resize(1920, 1080);\n    main-&gt;show();\n    GraphicsView-&gt;resize(main-&gt;width(), main-&gt;height());\n\n    return a.exec();\n}\n</code></pre>\n\n<p>This will display the image coordinates of the pixel under the mouse relative to <code>(0,0)</code> at the top left corner. </p>\n\n<p><img src=\"https://i.stack.imgur.com/gcUVh.png\" width=\"700\">\n<img src=\"https://i.stack.imgur.com/XiqKZ.png\" width=\"750\"></p>\n\n<p>The mouse is not visible in these screenshots but in the first it is in exactly the upper left corner and the second it is in exactly the lower right corner. If these coordinates are needed inside the <code>Graphics_view_zoom</code> object then you simply have to scope the <code>Frame</code> instance appropriately, or pass the value as needed. </p>\n\n<p><strong>Note</strong> - the exact coordinates displayed may not precisely represent the position of the mouse in this example since they are cast to <code>int</code>s for demonstration, but the floating point values can be easily accessed since <code>QGraphicsSceneMoveEvent::scenePos()</code> returns a <code>QPointF</code>. Additionally, note that in running this demonstration there may be some (hopefully very small) variation on where the mouse appears to be relative to it's 'actual' position - I recommend using <code>Qt::CrossCursor</code> to allay this. For example on my system the default cursor is off by about a pixel for certain areas on my smaller display, this is also affected by the zoom level - higher zoom will produce more accurate results, less zoom will be less accurate.</p>\n"}, {"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1546501951, "creation_date": 1546501951, "answer_id": 54018309, "question_id": 53933098, "link": "https://stackoverflow.com/questions/53933098/how-to-get-image-pixel-position-loaded-in-qgraphicsview-strange-maptoscene-b/54018309#54018309", "title": "How to get Image pixel position loaded in QGraphicsView - Strange MapToScene() behaviour", "body": "<p>Keep in mind that the scaling you use only scales the scene, not the items. Given this, the position of the pixel can be obtained, so the algorithm is:</p>\n\n<ul>\n<li>Obtain the mouse position with respect to the QGraphicsView</li>\n<li>Transform that position with respect to the scene using mapToScene</li>\n<li>Convert the coordinate with respect to the scene in relation to the item using mapFromScene of the QGraphicsItem.</li>\n</ul>\n\n<p>Considering the above, I have implemented the following example:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n#include &lt;random&gt;\n\nstatic QPixmap create_image(const QSize &amp; size){\n    QImage image(size, QImage::Format_ARGB32);\n    image.fill(Qt::blue);\n    std::random_device rd;\n    std::mt19937_64 rng(rd());\n    std::uniform_int_distribution&lt;int&gt; uni(0, 255);\n    for(int i=0; i&lt; image.width(); ++i)\n        for(int j=0; j &lt; image.height(); ++j)\n            image.setPixelColor(QPoint(i, j), QColor(uni(rng), uni(rng), uni(rng)));\n    return QPixmap::fromImage(image);\n}\n\nclass GraphicsView : public QGraphicsView\n{\n    Q_OBJECT\n    Q_PROPERTY(Qt::KeyboardModifiers modifiers READ modifiers WRITE setModifiers)\npublic:\n    GraphicsView(QWidget *parent=nullptr): QGraphicsView(parent){\n        setScene(new QGraphicsScene);\n\n        setModifiers(Qt::ControlModifier);\n        auto item = scene()-&gt;addPixmap(create_image(QSize(100, 100)));\n        item-&gt;setShapeMode(QGraphicsPixmapItem::BoundingRectShape);\n        item-&gt;setPos(40, 40);\n        fitInView(QRectF(0, 0, 640, 320),Qt::KeepAspectRatio);\n        resize(640, 480);\n    }\n    void setModifiers(const Qt::KeyboardModifiers &amp;modifiers){\n        m_modifiers = modifiers;\n    }\n    Qt::KeyboardModifiers modifiers() const{\n        return  m_modifiers;\n    }\nsignals:\n    void pixelChanged(const QPoint &amp;);\nprotected:\n    void mousePressEvent(QMouseEvent *event) override{\n        if(QGraphicsPixmapItem *item = qgraphicsitem_cast&lt;QGraphicsPixmapItem *&gt;(itemAt(event-&gt;pos()))){\n            QPointF p = item-&gt;mapFromScene(mapToScene(event-&gt;pos()));\n            QPoint pixel_pos = p.toPoint();\n            emit pixelChanged(pixel_pos);\n        }\n        QGraphicsView::mousePressEvent(event);\n    }\n    void wheelEvent(QWheelEvent *event) override{\n        if(event-&gt;modifiers() == m_modifiers){\n            double angle = event-&gt;orientation() == Qt::Vertical ? event-&gt;angleDelta().y(): event-&gt;angleDelta().x();\n            double factor = qPow(base, angle);\n            applyZoom(factor, event-&gt;pos());\n        }\n    }\nprivate:\n    void applyZoom(double factor, const QPoint &amp; fixedViewPos)\n    {\n        QPointF fixedScenePos = mapToScene(fixedViewPos);\n        centerOn(fixedScenePos);\n        scale(factor, factor);\n        QPointF delta = mapToScene(fixedViewPos) - mapToScene(viewport()-&gt;rect().center());\n        centerOn(fixedScenePos - delta);\n    }\n    Qt::KeyboardModifiers m_modifiers;\n    const double base = 1.0015;\n};\n\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    GraphicsView *view = new GraphicsView;\n    QLabel *label = new QLabel;\n    QObject::connect(view, &amp;GraphicsView::pixelChanged, label, [label](const QPoint &amp; p){\n        label-&gt;setText(QString(\"(%1, %2)\").arg(p.x()).arg(p.y()));\n    });\n    label-&gt;setAlignment(Qt::AlignCenter);\n    QWidget w;\n    QVBoxLayout *lay = new QVBoxLayout(&amp;w);\n    lay-&gt;addWidget(view);\n    lay-&gt;addWidget(label);\n    w.show();\n    return a.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 1905967, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/806b0fd09846afafb4e40881f22f0235?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/1905967/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 2, "accepted_answer_id": 54018309, "answer_count": 2, "score": 3, "last_activity_date": 1546501951, "creation_date": 1545832834, "last_edit_date": 1546501323, "question_id": 53933098, "link": "https://stackoverflow.com/questions/53933098/how-to-get-image-pixel-position-loaded-in-qgraphicsview-strange-maptoscene-b", "title": "How to get Image pixel position loaded in QGraphicsView - Strange MapToScene() behaviour", "body": "<p>I am originally loading image in <code>QGraphicsView</code> and using <a href=\"https://stackoverflow.com/questions/19113532/qgraphicsview-zooming-in-and-out-under-mouse-position-using-mouse-wheel/19114517#19114517\">this method</a> for basic zoom out and zoom in functionality. \nHowever, I am unable to retrieve actual image pixel position using <code>mapToScene</code> functionality in <code>eventFilter</code> function of <code>Graphics_view_zoom</code> class. The below code produces behaviour exactly as windows photo viewer zooming only selected region.</p>\n\n<p><code>MapToScene()</code> returns same <code>Point</code> as mouse event position.</p>\n\n<p>Here is the class which deals with zooming.</p>\n\n<pre><code>#include \"Graphics_view_zoom.h\"\n#include &lt;QMouseEvent&gt;\n#include &lt;QApplication&gt;\n#include &lt;QScrollBar&gt;\n#include &lt;qmath.h&gt;\n\nGraphics_view_zoom::Graphics_view_zoom(QGraphicsView* view)\n  : QObject(view), _view(view)\n{\n  _view-&gt;viewport()-&gt;installEventFilter(this);\n  _view-&gt;setMouseTracking(true);\n  _modifiers = Qt::ControlModifier;\n  _zoom_factor_base = 1.0015;\n}\n\nvoid Graphics_view_zoom::gentle_zoom(double factor) {\n  _view-&gt;scale(factor, factor);\n  _view-&gt;centerOn(target_scene_pos);\n  QPointF delta_viewport_pos = target_viewport_pos - QPointF(_view-&gt;viewport()-&gt;width() / 2.0,\n                                                             _view-&gt;viewport()-&gt;height() / 2.0);\n  QPointF viewport_center = _view-&gt;mapFromScene(target_scene_pos) - delta_viewport_pos;\n  _view-&gt;centerOn(_view-&gt;mapToScene(viewport_center.toPoint()));\n  emit zoomed();\n}\n\nvoid Graphics_view_zoom::set_modifiers(Qt::KeyboardModifiers modifiers) {\n  _modifiers = modifiers;\n\n}\n\nvoid Graphics_view_zoom::set_zoom_factor_base(double value) {\n  _zoom_factor_base = value;\n}\n\nbool Graphics_view_zoom::eventFilter(QObject *object, QEvent *event) {\n  if (event-&gt;type() == QEvent::MouseMove) {\n    QMouseEvent* mouse_event = static_cast&lt;QMouseEvent*&gt;(event);\n    QPointF delta = target_viewport_pos - mouse_event-&gt;pos();\n    // Here I want to get absolute image coordinates\n    if (qAbs(delta.x()) &gt; 5 || qAbs(delta.y()) &gt; 5) {\n      target_viewport_pos = mouse_event-&gt;pos();\n      target_scene_pos = _view-&gt;mapToScene(mouse_event-&gt;pos());\n    }\n  } else if (event-&gt;type() == QEvent::Wheel) {\n    QWheelEvent* wheel_event = static_cast&lt;QWheelEvent*&gt;(event);\n    if (QApplication::keyboardModifiers() == _modifiers) {\n      if (wheel_event-&gt;orientation() == Qt::Vertical) {\n        double angle = wheel_event-&gt;angleDelta().y();\n        double factor = qPow(_zoom_factor_base, angle);\n        gentle_zoom(factor);\n        return true;\n      }\n    }\n  }\n  Q_UNUSED(object)\n  return false;\n</code></pre>\n\n<p>In <em>mainwindow.cpp</em>,\nI am creating object of this class and loading an image as below:</p>\n\n<pre><code>   m_GraphicsScene = new QGraphicsScene();\n   pixmapItem = new QGraphicsPixmapItem();\n   m_GraphicsScene-&gt;addItem(multiview[i].pixmapItem);\n   view_wrapper = new Graphics_view_zoom(ui-&gt;GraphicsView);\n   ui-&gt;GraphicsView-&gt;setScene(multiview[i].m_GraphicsScene);\n\n   pixmapItem-&gt;setPixmap(QPixmap::fromImage(\"img.jpg\"));\n   multiview[view].m_GraphicsView-&gt;fitInView(QRectF(0,0,640,320),Qt::KeepAspectRatio);\n</code></pre>\n\n<p>Can anyone help with how do I achieve this ?</p>\n"}, {"tags": ["c++", "memory", "eigen", "gcc-warning", "eigen3"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1545850324, "post_id": 53933092, "comment_id": 94712004, "body": "That value is 2^64-4, which is surely relevant."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 2, "creation_date": 1545868960, "post_id": 53933092, "comment_id": 94716717, "body": "What version of Eigen are you using? (Check in <code>&#47;usr&#47;include&#47;eigen3&#47;Eigen&#47;src&#47;Core&#47;util&#47;Macros.h</code>) And can you give a one-line compiler command, instead of the CMakelist? (build with <code>VERBOSE=1</code>)"}, {"owner": {"reputation": 709, "user_id": 1763680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a875236b743b70b41a016d9b14528f83?s=128&d=identicon&r=PG", "display_name": "niosus", "link": "https://stackoverflow.com/users/1763680/niosus"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1545922399, "post_id": 53933092, "comment_id": 94732120, "body": "@chtz I have updated the question. Just for simplicity will double relevant info here. Version of Eigen: 3.3.4, a command to build the code to reproduce this: <code>g++ -I&#47;usr&#47;include&#47;eigen3 -O3 example.cpp</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": true, "score": 3, "last_activity_date": 1545928596, "creation_date": 1545928596, "answer_id": 53948141, "question_id": 53933092, "link": "https://stackoverflow.com/questions/53933092/eigen-with-o3-warning-argument-1-value-x-exceeds-maximum-object-size-y/53948141#53948141", "title": "Eigen with -O3 warning: argument 1 value \u2018X\u2019 exceeds maximum object size Y", "body": "<p>In the file <code>Eigen/src/Core/util/Memory.h</code> in the implementation of <code>Eigen::aligned_allocator</code> these lines can be found:</p>\n\n<pre><code>#if EIGEN_COMP_GNUC_STRICT &amp;&amp; EIGEN_GNUC_AT_LEAST(7,0)\n// In gcc std::allocator::max_size() is bugged making gcc triggers a warning:\n// eigen/Eigen/src/Core/util/Memory.h:189:12: warning: argument 1 value '18446744073709551612' exceeds maximum object size 9223372036854775807\n// See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=87544\nsize_type max_size() const {\n  return (std::numeric_limits&lt;std::ptrdiff_t&gt;::max)()/sizeof(T);\n}\n#endif\n</code></pre>\n\n<p>So, it seems that this is connected to <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=87544\" rel=\"nofollow noreferrer\">this GCC bug</a>.</p>\n\n<p>As far as I can see, the <a href=\"https://bitbucket.org/eigen/eigen/commits/90173cbfea144ccbbc7d687ffaa322e6e67a4e0e\" rel=\"nofollow noreferrer\">commit</a> fixing this appeared on 2018-10-07, and should be available in Eigen 3.3.6.</p>\n"}], "owner": {"reputation": 709, "user_id": 1763680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a875236b743b70b41a016d9b14528f83?s=128&d=identicon&r=PG", "display_name": "niosus", "link": "https://stackoverflow.com/users/1763680/niosus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 53948141, "answer_count": 1, "score": 4, "last_activity_date": 1545928596, "creation_date": 1545832810, "last_edit_date": 1545923476, "question_id": 53933092, "link": "https://stackoverflow.com/questions/53933092/eigen-with-o3-warning-argument-1-value-x-exceeds-maximum-object-size-y", "title": "Eigen with -O3 warning: argument 1 value \u2018X\u2019 exceeds maximum object size Y", "body": "<h2>What happens</h2>\n\n<p>When I try to add an <code>Eigen::Vector3f</code> into an <code>std::vector</code> following the tutorial <a href=\"https://eigen.tuxfamily.org/dox/group__TopicStlContainers.html\" rel=\"nofollow noreferrer\">on Eigen website</a> like this:</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n#include &lt;Eigen/StdVector&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class EigenT&gt;\nusing EigenStdVector = std::vector&lt;EigenT, Eigen::aligned_allocator&lt;EigenT&gt;&gt;;\n\nint main() {\n  EigenStdVector&lt;Eigen::Vector3f&gt; vec;\n  vec.emplace_back(1.0f, 1.0f, 1.0f);\n  std::cerr &lt;&lt; vec.back().transpose() &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>I get the following warning:</p>\n\n<pre><code>In file included from /usr/include/eigen3/Eigen/Core:349:0,\n                 from /home/igor/Code/eigen_example/example.cpp:3:\nIn function \u2018void* Eigen::internal::aligned_malloc(std::size_t)\u2019,\n    inlined from \u2018void std::vector&lt;_Tp, _Alloc&gt;::_M_realloc_insert(std::vector&lt;_Tp, _Alloc&gt;::iterator, _Args&amp;&amp; ...) [with _Args = {float, float, float}; _Tp = Eigen::Matrix&lt;float, 3, 1&gt;; _Alloc = Eigen::aligned_allocator&lt;Eigen::Matrix&lt;float, 3, 1&gt; &gt;]\u2019 at /usr/include/eigen3/Eigen/src/Core/util/Memory.h:742:76:\n/usr/include/eigen3/Eigen/src/Core/util/Memory.h:159:12: warning: argument 1 value \u201818446744073709551612\u2019 exceeds maximum object size 9223372036854775807 [-Walloc-size-larger-than=]\n     result = std::malloc(size);\n</code></pre>\n\n<h2>How to reproduce</h2>\n\n<p>I am on <strong>Ubuntu 18.04</strong> and have <strong>Eigen 3.3.4</strong> installed.</p>\n\n<p>You can build the code in this question with the following command if you have Eigen installed with the following command:</p>\n\n<pre><code>g++ -I/usr/include/eigen3 -O3 example.cpp\n</code></pre>\n\n<h2>What triggers the warning</h2>\n\n<ul>\n<li>The warning only shows when using <code>Vector2f</code>, <code>Vector3f</code>, etc. It is not shown for types like <code>Matrix2f</code>, <code>Matrix3f</code>, etc.</li>\n<li>The warning is shown whenever I have <code>-O[1-3]</code> enabled and does not happen with <code>-O0</code></li>\n</ul>\n\n<h2>Further info:</h2>\n\n<p><a href=\"https://stackoverflow.com/questions/47450718/gcc7-2-argument-range-exceeds-maximum-object-size-9-7-werror-alloc-size-larg\">This question</a> seems to be related, but I don't see how it could help me.</p>\n\n<p>I have made a small example for everyone who wants a ready-to-run example. You can find it on my <a href=\"https://github.com/niosus/eigen-warning-example\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n\n<p>Does anybody have an idea what might be wrong here? </p>\n"}, {"tags": ["c++", "opengl", "visual-studio-2017", "stb-image"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1545848513, "post_id": 53932895, "comment_id": 94711396, "body": "If you want to flip the v coordinate, the simply swap the v coordinates of the attributes. In the last column of the initialization of <code>mesh</code> swap 0 and 1."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10692448"}, "edited": false, "score": 0, "creation_date": 1545837949, "post_id": 53933052, "comment_id": 94708042, "body": "The texture is rotated 45 degrees this time. Also the result of not include stbi flip vertically and not including it with the original and your mesh data is the same, so I feel as if the problem is actually in the rest of the code but idk what it is."}, {"owner": {"reputation": 2067, "user_id": 4380321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/y8zaG.jpg?s=128&g=1", "display_name": "HMD", "link": "https://stackoverflow.com/users/4380321/hmd"}, "edited": false, "score": 0, "creation_date": 1545838615, "post_id": 53933052, "comment_id": 94708235, "body": "@BobTheTreeGod I edited the coordinates, hope this time works, I still believe your problem is in your coordinates. Tell me the results when you test it."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1545850692, "post_id": 53933052, "comment_id": 94712100, "body": "@BobTheTreeGod <i>&quot;The texture is rotated 45 degrees&quot;</i> are you sure about that!? Note, a full circle has 360 degrees."}], "tags": [], "owner": {"reputation": 2067, "user_id": 4380321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/y8zaG.jpg?s=128&g=1", "display_name": "HMD", "link": "https://stackoverflow.com/users/4380321/hmd"}, "is_accepted": true, "score": 1, "last_activity_date": 1545838538, "last_edit_date": 1545838538, "creation_date": 1545832547, "answer_id": 53933052, "question_id": 53932895, "link": "https://stackoverflow.com/questions/53932895/stb-image-wont-flip-vertically-when-image-loads-for-an-opengl-texture/53933052#53933052", "title": "stb_image wont flip vertically when image loads for an opengl texture", "body": "<p>You said <em>I tried to change the index and texture coordinates, that didn't work.</em> but I think your problem is exactly in your 2D to 3D coordinate mapping.</p>\n\n<p>90 degree rotation is expected with current mapped coordination you shared. I mean :</p>\n\n<pre><code>0.5f, 0.5f, 0.0f -&gt; 0.0f, 0.0f\n0.5f, -0.5f, 0.0f -&gt; 1.0f, 0.0f\n-0.5f, -0.5f, 0.0f -&gt; 1.0f, 1.0f\n-0.5f, 0.5f, 0.0f -&gt; 0.0f, 1.0f\n</code></pre>\n\n<p>If you don't want the 90 degree rotation it should be :</p>\n\n<pre><code>0.5f, 0.5f, 0.0f -&gt; 0.0f, 0.0f\n0.5f, -0.5f, 0.0f -&gt; 1.0f, 0.0f\n-0.5f, -0.5f, 0.0f -&gt; 0.0f, 1.0f\n-0.5f, 0.5f, 0.0f -&gt; 1.0f, 1.0f\n</code></pre>\n\n<p>So your <code>mesh</code> should be like this (didn't swap the colors, change it if you need):</p>\n\n<pre><code>Mesh mesh = {\n// Position         // Color                // Tex coords\n0.5f, 0.5f, 0.0f,   1.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f,\n0.5f, -0.5f, 0.0f,  0.0f, 1.0f, 0.0f, 1.0f, 1.0f, 0.0f,\n-0.5f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 0.0f, 1.0f,\n-0.5f, 0.5f, 0.0f,  0.0f, 0.0f, 0.5f, 1.0f, 1.0f, 1.0f,\n// Index\n0,1,2,2,3,0\n};\n</code></pre>\n\n<p><strong>EDITED</strong></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10692448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 53933052, "answer_count": 1, "score": 0, "last_activity_date": 1545838538, "creation_date": 1545831736, "question_id": 53932895, "link": "https://stackoverflow.com/questions/53932895/stb-image-wont-flip-vertically-when-image-loads-for-an-opengl-texture", "title": "stb_image wont flip vertically when image loads for an opengl texture", "body": "<p>The image I am trying to load is turned 90 degrees when rendered. I am using \"stbi flip image vertically on load\" but when the texture is rendered, the image is turned 90 degrees.</p>\n\n<p>I tried to change the index and tex coords, that didnt work.</p>\n\n<pre><code>//Mesh struct\nMesh mesh = {\n// Position         // Color                // Tex coords\n0.5f, 0.5f, 0.0f,   1.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f,\n0.5f, -0.5f, 0.0f,  0.0f, 1.0f, 0.0f, 1.0f, 1.0f, 0.0f,\n-0.5f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.0f, 1.0f,\n-0.5f, 0.5f, 0.0f,  0.0f, 0.0f, 0.5f, 1.0f, 0.0f, 1.0f,\n// Index\n0,1,2,2,3,0\n};\n\n//The other code\n/*Texture*/\nint width, height, bpp;\nunsigned char* image;\nstring path = \"res/textures/Brick.png\";\nunsigned int texture;\n\nstbi_set_flip_vertically_on_load(1);\nimage = stbi_load(path.c_str(), &amp;width, &amp;height, &amp;bpp, 4);\n\nglGenTextures(1, &amp;texture);\nglBindTexture(GL_TEXTURE_2D, texture);\n\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n\nglTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height, 0, GL_RGBA, \nGL_UNSIGNED_BYTE, image);\n\nif (image)\n    stbi_image_free(image);\n\nglActiveTexture(GL_TEXTURE0);\nglUniform1i(glGetUniformLocation(shader, \"Texture\"), 0);\n\n/*Position*/\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 9 * sizeof(float), \n(void*)0);\nglEnableVertexAttribArray(0);\n/*Color*/\nglVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 9 * sizeof(float), \n(void*)(3 * sizeof(float)));\nglEnableVertexAttribArray(1);\n/*Texture*/\nglVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 9 * sizeof(float), \n(void*)(7 * sizeof(float)));\nglEnableVertexAttribArray(2);\n\nglBindBuffer(GL_ARRAY_BUFFER, 0);\nglBindVertexArray(0);\n</code></pre>\n\n<p>The texture should apear as the image and not rotated 90 degrees.\nImage: <a href=\"https://opengameart.org/sites/default/files/oga-textures/brick_base.png\" rel=\"nofollow noreferrer\">https://opengameart.org/sites/default/files/oga-textures/brick_base.png</a></p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1545851982, "post_id": 53932669, "comment_id": 94712538, "body": "Oh right... Here&#39;s an issue which is why they switch to do while, which is solved by using <code>({ ... })</code>, now you can use it anywhere."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1545903977, "post_id": 53932669, "comment_id": 94724517, "body": "It would be nice to un-mark this question as a duplicate. Nonetheless, thanks. So, my empty macro is perfectly valid or should I use   <code>({...})</code>?"}], "owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "closed_date": 1545830533, "answer_count": 0, "score": 0, "last_activity_date": 1545831241, "creation_date": 1545830454, "last_edit_date": 1545831241, "question_id": 53932669, "link": "https://stackoverflow.com/questions/53932669/dowhile0-vs-an-empty-statement", "closed_reason": "Duplicate", "title": "do{}while(0) vs an empty statement", "body": "<p>Trying to make a logging system that only logs data when a certain macro is defined, I've done something like this:</p>\n\n<pre><code>#ifdef _DEBUG\n#define foo(a) std::cout &lt;&lt; a &lt;&lt; std::endl\n#else\n#define foo(a) \n#endif\n\nint main()\n{\n    foo(\"Hello!\");\n    return 0;\n}\n</code></pre>\n\n<p>The function <code>main</code>, after pre-processing, expands to:</p>\n\n<pre><code>int main()\n{\n    ;\n    return 0;\n}\n</code></pre>\n\n<p>However, on some places, I saw that people use <code>do{}while(0)</code> instead of an empty macro. I suppose that a compiler would optimize away both of these but I'm wondering is there an advantage that one has over another?</p>\n\n<p>I am aware of the need for both an empty statement and <code>do{}while(0)</code> but what I do not know is the difference between the two.</p>\n\n<p>I don't believe my question was fully read and compared to the ones that have been provided when marking as duplicate.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1545830577, "post_id": 53932651, "comment_id": 94705633, "body": "The &quot;For such a commonly needed container type...&quot; is incorrect.  Can your non-copyable-and-non-movable object be stored in a <code>std::shared_ptr</code>, and then the <code>std::shared_ptr</code> be stored in a <code>std::vector</code>?"}, {"owner": {"reputation": 39, "user_id": 5646362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d663d455dab88f1816161a58cfcb6dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Xiang", "link": "https://stackoverflow.com/users/5646362/tony-xiang"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545830728, "post_id": 53932651, "comment_id": 94705696, "body": "@Eljay Thanks for the comment. The objects then are not in continuous memory. Actually that&#39;s what the program is doing now (using <code>std::vector&lt;std::unique_ptr&gt;</code>). Maybe I should not say &quot;such a commonly needed container type&quot;."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545832840, "post_id": 53932651, "comment_id": 94706438, "body": "Do the non-copyable-and-non-movable objects need to be in continuous memory?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545838575, "post_id": 53932651, "comment_id": 94708220, "body": "Why not simply wrap a <code>std::vector</code> that is resized to the maximum needed, and keep track of how many elements are actually in use?   If that vector is a private member of your class, you can ensure it is never resized after initialisation, whatever the user of your class does.    After all, even if the user asks your class to <code>emplace_back()</code> something, your class (or the implementation of its member functions) does not need to turn that into calls of the vector&#39;s <code>emplace_back()</code>."}, {"owner": {"reputation": 39, "user_id": 5646362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d663d455dab88f1816161a58cfcb6dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Xiang", "link": "https://stackoverflow.com/users/5646362/tony-xiang"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545839509, "post_id": 53932651, "comment_id": 94708527, "body": "@Peter Actually that&#39;s the first thing I have thought about. But <code>std::vector&lt;T&gt;</code> will not compile if <code>T</code> is both not copyable and not movable."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545840442, "post_id": 53932651, "comment_id": 94708841, "body": "@TonyXiang - if using C++ before C++11 that is true (the element must be copy assignable and copy constructible).For C++11 and later, the element is only required to be Erasable (which essentially means <code>p-&gt;~T()</code> is valid if <code>p</code> is a pointer to a non-destructed <code>T</code>).   However, you need to be careful in choice of operations on the vector, since some member functions of <code>std::vector</code> have stricter requirements  (e.g. [from memory] vector&#39;s <code>emplace()</code> requires elements to be Move Assignable, Move Insertable, and Emplace Constructible - as distinct from copy assignable and copy constructible)."}, {"owner": {"reputation": 39, "user_id": 5646362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d663d455dab88f1816161a58cfcb6dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Xiang", "link": "https://stackoverflow.com/users/5646362/tony-xiang"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545843480, "post_id": 53932651, "comment_id": 94709834, "body": "@Peter I have just tried instantiating <code>std::vector&lt;T&gt;</code> for non-copyable-non-movable <code>T</code>. As you said, the instantiation itself can be compiled. However, non of the method can be used to add element to the vector. I thought <code>emplace_back</code> could be used since it does not require copy or move action if no reallocation is needed. But the compiler still complains of deleted copy constructor. Do you have any idea how to add element to the vector in this case?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1573524563, "post_id": 53932651, "comment_id": 103901374, "body": "Obviously, if a container can be resized after construction, then any function that add item might need to copy or move existing items"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1573524698, "post_id": 53932651, "comment_id": 103901397, "body": "While your code seems correct, I think it should be possible (and safer) to write it without that much casts."}], "answers": [{"comments": [{"owner": {"reputation": 2549, "user_id": 823321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrwbB.png?s=128&g=1", "display_name": "s\u0250un\u0131\u0254\u05df\u0250q\u0250p", "link": "https://stackoverflow.com/users/823321/s%c9%90un%c4%b1%c9%94%d7%9f%c9%90q%c9%90p"}, "edited": false, "score": 0, "creation_date": 1573521420, "post_id": 58810567, "comment_id": 103900768, "body": "From Review: Hi, while links are great way of sharing knowledge, they won&#39;t really answer the question if they get broken in the future. Add to your answer the essential content of the link which answers the question. In case the content is too complex or too big to fit here, describe the general idea of the proposed solution. Remember to always keep a link reference to the original solution&#39;s website. See: <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>"}], "tags": [], "owner": {"reputation": 89, "user_id": 3259214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c536d5e4a1ee4c2d573bb8bc41b2d8?s=128&d=identicon&r=PG&f=1", "display_name": "dshvets1", "link": "https://stackoverflow.com/users/3259214/dshvets1"}, "is_accepted": false, "score": 1, "last_activity_date": 1573561539, "last_edit_date": 1573561539, "creation_date": 1573520265, "answer_id": 58810567, "question_id": 53932651, "link": "https://stackoverflow.com/questions/53932651/c-vector-with-fixed-capacity-after-initialization/58810567#58810567", "title": "C++ vector with fixed capacity after initialization", "body": "<p>It probably does not answer the question completely but it seems like <em>fixed_capacity_vector</em> might be added into future C++ standard(s) according to the following paper:</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0843r1.html\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0843r1.html</a></p>\n\n<h1>Introduction</h1>\n\n<p>This paper proposes a modernized version of boost::container::static_vector [1]. That is, a dynamically-resizable vector with compile-time fixed capacity and contiguous embedded storage in which the elements are stored within the vector object itself.</p>\n\n<p>Its API closely resembles that of std::vector. It is a contiguous container with O(1) insertion and removal of elements at the end (non-amortized) and worst case O(size()) insertion and removal otherwise. Like std::vector, the elements are initialized on insertion and destroyed on removal. For trivial value_types, the vector is fully usable inside constexpr functions.</p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1573565291, "creation_date": 1573565291, "answer_id": 58819777, "question_id": 53932651, "link": "https://stackoverflow.com/questions/53932651/c-vector-with-fixed-capacity-after-initialization/58819777#58819777", "title": "C++ vector with fixed capacity after initialization", "body": "<blockquote>\n  <p>Why would I do this by hand? I could not find a standard container. Or maybe I did not look at the right place? Or because what I am trying to do is not conventional?</p>\n</blockquote>\n\n<p>This is not conventional. By convention, something that is <em>MoveConstructible</em> is also <em>MoveAssignable</em></p>\n\n<blockquote>\n  <p>Is the hand-written container correct implemented? How about the exception safety, memory safety, etc.?</p>\n</blockquote>\n\n<p><code>data</code> is problematic. Callers are likely to assume that they can increment that pointer to get at other elements, but that is strictly undefined. You don't actually have an array of <code>T</code>. The standard requires implementation-defined magic in <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 5646362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d663d455dab88f1816161a58cfcb6dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Xiang", "link": "https://stackoverflow.com/users/5646362/tony-xiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573565291, "creation_date": 1545830326, "last_edit_date": 1545843063, "question_id": 53932651, "link": "https://stackoverflow.com/questions/53932651/c-vector-with-fixed-capacity-after-initialization", "title": "C++ vector with fixed capacity after initialization", "body": "<p>I need a C++ container with the following requirements: </p>\n\n<ul>\n<li>The container can store non-copyable AND non-movable objects in continuous memory. For <code>std::vector</code> the object has to be either copyable or movable.</li>\n<li>The <code>capacity</code> of the container is known during the construction at run-time, and fixed until destruction. All the needed memory space is allocated during the construction. For <code>boost::static_vector</code> the capacity is known at compile time.</li>\n<li>The size of the container can increase over time when <code>emplace_back</code> more element in the container, but should never exceeds <code>capacity</code>.</li>\n<li>Since the object is not copyable or movable, reallocation is not allowed.</li>\n</ul>\n\n<p>It appears that neither STL nor BOOST has the container type I need. I have also searched in this side extensively but did not find an answer. So I have implemented one.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;memory&gt;\n\ntemplate&lt;class T&gt;\nclass FixedCapacityVector {\nprivate:\n    using StorageType = std::aligned_storage_t&lt;sizeof(T), alignof(T)&gt;;\n    static_assert(sizeof(StorageType) == sizeof(T));\npublic:\n    FixedCapacityVector(FixedCapacityVector const&amp;) = delete;\n    FixedCapacityVector&amp; operator=(FixedCapacityVector const&amp;) = delete;\n    FixedCapacityVector(size_t capacity = 0):\n        capacity_{ capacity },\n        data_{ std::make_unique&lt;StorageType[]&gt;(capacity) }\n    { }\n    ~FixedCapacityVector()\n    {\n        for (size_t i = 0; i &lt; size_; i++)\n            reinterpret_cast&lt;T&amp;&gt;(data_[i]).~T();\n    }\n    template&lt;class... Args&gt;\n    T&amp; emplace_back(Args&amp;&amp;... args) \n    {\n        if (size_ == capacity_)\n            throw std::bad_alloc{};\n        new (&amp;data_[size_]) T{ std::forward&lt;Args&gt;(args)... };\n        return reinterpret_cast&lt;T&amp;&gt;(data_[size_++]);\n    }\n    T&amp; operator[](size_t i) \n    { return reinterpret_cast&lt;T&amp;&gt;(data_[i]); }\n    T const&amp; operator[](size_t i) const \n    { return reinterpret_cast&lt;T const&amp;&gt;(data_[i]); }\n    size_t size() const { return size_; }\n    size_t capacity() const { return capacity_; }\n    T* data() { return reinterpret_cast&lt;T*&gt;(data_.get()); }\n    T const* data() const { return reinterpret_cast&lt;T const*&gt;(data_.get()); }\nprivate:\n    size_t const capacity_;\n    std::unique_ptr&lt;StorageType[]&gt; const data_;\n    size_t size_{ 0 };\n};\n</code></pre>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Why would I do this by hand? I could not find a standard container. Or maybe I did not look at the right place? Or because what I am trying to do is not conventional?</li>\n<li>Is the hand-written container correct implemented? How about the exception safety, memory safety, etc.?</li>\n</ul>\n"}, {"tags": ["c++", "file-io", "websocket", "binaryfiles", "boost-beast"], "comments": [{"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1545845620, "post_id": 53932592, "comment_id": 94710546, "body": "A great way to show respect for other peoples&#39; time is to follow the directions in the Beast documentation with respect to familiarity with Asio. These questions have nothing to do with Beast."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "reply_to_user": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1545982010, "post_id": 53932592, "comment_id": 94748197, "body": "Hi @VinnieFalco, I understand that it might feel cumbersome to teach a rookie about the concepts (which you have mastered). I can understand that my questions might fall off-track. I sincerely feel grateful for your help though. I will try to keep my posts limited henceforth. <i>PS: I&#39;m just a rookie trying to survive in technologically advanced world.</i>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "edited": false, "score": 0, "creation_date": 1545831829, "post_id": 53932688, "comment_id": 94706067, "body": "I have updated the question as per your suggestion. With these updates the program is not reaching at the point where the connection is being closed &quot;gracefully&quot;. Instead it is exiting with value <code>-1</code>. Is the calling function correctly written? <code>ws_.binary(true);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "edited": false, "score": 0, "creation_date": 1545833268, "post_id": 53932688, "comment_id": 94706597, "body": "I have updated the post. Please have a look. <code>(net::buffer(binarydata,sizeof(binarydata))</code> now the program exits with value <code>0</code>"}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": true, "score": 2, "last_activity_date": 1545845564, "last_edit_date": 1545845564, "creation_date": 1545830571, "answer_id": 53932688, "question_id": 53932592, "link": "https://stackoverflow.com/questions/53932592/sending-binary-data-through-beast-web-socket-in-c/53932688#53932688", "title": "Sending binary data through beast web-socket (in C++)", "body": "<p><strong>Answer 1:</strong></p>\n\n<p>With respect to the websocket portion of the question, you should make sure that you are sending binary messages by calling <code>websocket::stream::binary(true)</code>. See:</p>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/ref/boost__beast__websocket__stream/binary/overload1.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/ref/boost__beast__websocket__stream/binary/overload1.html</a></p>\n\n<p><strong>Answer 2:</strong></p>\n\n<p>From: <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/using_websocket/control_frames.html#beast.using_websocket.control_frames.close_frames\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/using_websocket/control_frames.html#beast.using_websocket.control_frames.close_frames</a></p>\n\n<p><em>\"When a close frame is received during a read operation, the implementation will automatically respond with a close frame and then shut down the underlying connection before returning. In this case, the read operation will complete with the code error::closed. This indicates to the caller that the connection has been closed cleanly.\"</em></p>\n\n<p><strong>Answer 3</strong> (Updated)</p>\n\n<p>You wrote:</p>\n\n<pre><code>vector&lt;char&gt; binarydata(istreambuf_iterator&lt;char {infile}, {});\n</code></pre>\n\n<p>You are using a local variable as the buffer for an asynchronous operation. The caller is responsible for ensuring that the lifetime of the buffers extends at least until the completion handler is invoked. Your code produces undefined behavior.</p>\n\n<p>The Beast documentation makes this clear:</p>\n\n<p><em>\"This library is for programmers familiar with Boost.Asio. Users who wish to use asynchronous interfaces should already know how to create concurrent network programs using callbacks or coroutines.\"</em></p>\n\n<p>(<a href=\"https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/introduction.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/introduction.html</a>)</p>\n\n<p>If you are not already proficient in working with Asio, then I suggest you put your current project on pause and study Asio so that you will be able to use Beast effectively. Otherwise you will encounter obstacles at every step of the path.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "edited": false, "score": 0, "creation_date": 1545832015, "post_id": 53932697, "comment_id": 94706146, "body": "I have updated the post. I have made changes as you&#39;d see. I have omitted the earlier file reading way <i>(the incorrect one)</i>. Thanks for the correction. Is there a way to see if the <code>binarydata</code> holds binary data?"}, {"owner": {"reputation": 6588, "user_id": 10524386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a1950a1d7e1eccd4cff228c5420ea?s=128&d=identicon&r=PG", "display_name": "grapes", "link": "https://stackoverflow.com/users/10524386/grapes"}, "edited": false, "score": 0, "creation_date": 1545833088, "post_id": 53932697, "comment_id": 94706537, "body": "What do you mean &quot;holds binary data&quot;? Any data can be binary, but not any - text. So whatever there is in <code>binarydata</code>, it is binary data. Sometimes you can make assumptions that the data is text, but they are not strict and depend on possible text encodings."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "edited": false, "score": 0, "creation_date": 1545833364, "post_id": 53932697, "comment_id": 94706624, "body": "Thanks for the clarification :)"}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 1, "creation_date": 1545845318, "post_id": 53932697, "comment_id": 94710445, "body": "<code>std::string</code> is more than capable of holding binary data, including nulls."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "edited": false, "score": 0, "creation_date": 1545986487, "post_id": 53932697, "comment_id": 94749509, "body": "I have used the char array to get the binary data. You can check how I have read the binary file in the updated post. This is working for me."}], "tags": [], "owner": {"reputation": 6588, "user_id": 10524386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a1950a1d7e1eccd4cff228c5420ea?s=128&d=identicon&r=PG", "display_name": "grapes", "link": "https://stackoverflow.com/users/10524386/grapes"}, "is_accepted": false, "score": -1, "last_activity_date": 1545830606, "creation_date": 1545830606, "answer_id": 53932697, "question_id": 53932592, "link": "https://stackoverflow.com/questions/53932592/sending-binary-data-through-beast-web-socket-in-c/53932697#53932697", "title": "Sending binary data through beast web-socket (in C++)", "body": "<p>You cannot use <code>string</code> to store binary data, use <code>char data[]</code> with <code>int length</code> or <code>std::vector&lt;char&gt;</code> or whatever.</p>\n\n<p>Reading binary data shouldn't be done with <code>getline()</code> as soon as there are not lines in binary files. </p>\n\n<p>You can use something like:</p>\n\n<pre><code>std::ifstream f(\"/home/rohan/TestFile.pcm\", std::ios::binary);\nstd::vector&lt;char&gt; v(std::istreambuf_iterator&lt;char&gt;{f}, {});\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10710089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 0, "accepted_answer_id": 53932688, "answer_count": 2, "score": 0, "last_activity_date": 1545986580, "creation_date": 1545829998, "last_edit_date": 1545986580, "question_id": 53932592, "link": "https://stackoverflow.com/questions/53932592/sending-binary-data-through-beast-web-socket-in-c", "title": "Sending binary data through beast web-socket (in C++)", "body": "<p>I want to send <strong>binary audio data</strong> to IBM watson STT service trhough websocket connection. I have successfully made the connection and now trying to send the data in following format:</p>\n\n<pre><code>{\n  \"action\":\"start\",\n  \"content-type\": \"audio/l16;rate=44100\"\n}\n&lt;binary audio data&gt;\n{\n  \"action\":\"stop\"\n}\n</code></pre>\n\n<p><strong>for this:</strong> I am reading a raw audio file (extn <em>.pcm</em>) as below</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nifstream fin;\nstring binarydata, bdataline;\n\nfin.open(\"/home/rohan/TestFile.pcm\", ios::binary | ios::in);\n\nwhile (fin) {\n    // Read a Line from File\n    getline(fin, bdataline);\n    binarydata = binarydata + bdataline;\n}\n</code></pre>\n\n<p><strong>Question 1:</strong> I am not sure if I am reading the binary data correctly. Should the datatype of the <code>binarydata</code> be <code>string</code>?</p>\n\n<p>Next to send the data on boost websocket (after handshake) I have followed this routine</p>\n\n<pre><code>void on_handshake(beast::error_code ec)\n    {\n         if(ec)\n             return fail(ec, \"handshake\");\n\n         // Send the Start message\n         ws_.async_write(net::buffer(\"{\\\"action\\\":\\\"start\\\",\\\"content-type\\\": \\\"audio/l16;rate=44100\\\"}\"), bind(&amp;session::on_start, shared_from_this(), placeholders::_1));\n    }\n\nvoid on_start(beast::error_code ec)\n    {\n        if(ec)\n            return fail(ec, \"write:start\");\n\n        ws_.async_write(net::buffer(binarydata), bind(&amp;session::on_binarysent, shared_from_this(), placeholders::_1));\n    }\n\nvoid on_binarysent(beast::error_code ec)\n    {\n        if(ec)\n            return fail(ec, \"write:Msg\");\n\n        ws_.async_write(net::buffer(\"{\\\"action\\\":\\\"stop\\\"}\"), bind(&amp;session::on_write, shared_from_this(), placeholders::_1));\n    }\n\n\nvoid on_write( beast::error_code ec) //,\n    {\n        if(ec)\n            return fail(ec, \"write:end\");\n\n        ws_.async_read(buffer_, bind(&amp;session::on_start, shared_from_this(), placeholders::_1));\n    }\n</code></pre>\n\n<p>The program does not show any output and exits with </p>\n\n<blockquote>\n  <p>write:start: The WebSocket stream was gracefully closed at both endpoints</p>\n</blockquote>\n\n<p><strong>Question 2:</strong> Whether the data is going correctly as expected? How to check that? (expected : <a href=\"https://console.bluemix.net/docs/services/speech-to-text/websockets.html#websockets\" rel=\"nofollow noreferrer\">See this link</a>)</p>\n\n<p>How is the websocket getting closed without sending close command?</p>\n\n<p><strong>UPDATED:</strong></p>\n\n<pre><code>void on_start(beast::error_code ec)\n    {\n        if(ec)\n            return fail(ec, \"write:start\");\n\n\n\nifstream infile(\"/home/rohan/TestFile.pcm\", ios::in | ios::binary);\n    streampos FileSize;\n\n    if (infile) {\n        // Get the size of the file\n        infile.seekg(0, ios::end);\n        FileSize = infile.tellg();\n        infile.seekg(0, ios::beg);\n    }\n    char binarydata[(size_t)FileSize];\n        ws_.binary(true);\n\n        // Send binary data\n        ws_.async_write(net::buffer(binarydata, sizeof(binarydata)), bind(&amp;session::on_binarysent, shared_from_this(), placeholders::_1));\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545837016, "post_id": 53932575, "comment_id": 94707749, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 the correct duplicates are <a href=\"https://stackoverflow.com/q/25678481/995714\">Why does pow(n,2) return 24 when n=5, with my compiler and OS?</a>, <a href=\"https://stackoverflow.com/q/22264236/995714\">Why does pow(5,2) become 24?</a>, <a href=\"https://stackoverflow.com/q/9704195/995714\">Why pow(10,5) = 9,999 in C++</a>, <a href=\"https://stackoverflow.com/q/39756656/995714\">Why a+=b*pow(10,c-i-1) == 99 c++?</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1545837270, "post_id": 53932575, "comment_id": 94707836, "body": "@phuclv Ty. I added as much links as possible."}, {"owner": {"reputation": 1, "user_id": 8189100, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CWyK0445b5A/AAAAAAAAAAI/AAAAAAAABJ8/JcTTk77BGQ8/photo.jpg?sz=128", "display_name": "Akash Karmakar", "link": "https://stackoverflow.com/users/8189100/akash-karmakar"}, "edited": false, "score": 0, "creation_date": 1545845244, "post_id": 53932575, "comment_id": 94710418, "body": "Thank you very much, sir, for taking time and helping me out. but my question is    double d=pow(5,2) then on printing d output is 25 but rather it should be 24.9999 or 25.00001"}], "owner": {"reputation": 1, "user_id": 8189100, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CWyK0445b5A/AAAAAAAAAAI/AAAAAAAABJ8/JcTTk77BGQ8/photo.jpg?sz=128", "display_name": "Akash Karmakar", "link": "https://stackoverflow.com/users/8189100/akash-karmakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1545829946, "answer_count": 0, "score": 0, "last_activity_date": 1545837107, "creation_date": 1545829904, "last_edit_date": 1545830020, "question_id": 53932575, "link": "https://stackoverflow.com/questions/53932575/value-stored-by-a-variable-of-type-double-doesnt-store-the-exact-value-as-retur", "closed_reason": "Duplicate", "title": "value stored by a variable of type double doesn&#39;t store the exact value as returned by pow()", "body": "<p><code>pow(5,2)</code> returns 24.9999 or 25.00001 depending on a compiler but when we assign it to a <code>double variable</code> then it becomes 25 how?<br>\n Ex </p>\n\n<pre><code>double d=pow(5,2);\n</code></pre>\n\n<p>here <code>pow()</code> returns 24.9999 or 25.0001 so <code>d</code> should store these values not 25</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "edited": false, "score": 0, "creation_date": 1545829299, "post_id": 53932370, "comment_id": 94705238, "body": "In the current design, you can&#39;t, because you&#39;d need virtual template member functions, which is not allowed. See this answer for more info: <a href=\"https://stackoverflow.com/q/7968023\">stackoverflow.com/q/7968023</a>"}], "answers": [{"comments": [{"owner": {"reputation": 312, "user_id": 10631085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfYp.jpg?s=128&g=1", "display_name": "tango-1", "link": "https://stackoverflow.com/users/10631085/tango-1"}, "edited": false, "score": 0, "creation_date": 1545829948, "post_id": 53932443, "comment_id": 94705443, "body": "I cant understand you well. Please explain with an example, How Can i implement this method in Collection interface, it does not have an member ? Thank you."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 312, "user_id": 10631085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfYp.jpg?s=128&g=1", "display_name": "tango-1", "link": "https://stackoverflow.com/users/10631085/tango-1"}, "edited": false, "score": 1, "creation_date": 1545831169, "post_id": 53932443, "comment_id": 94705844, "body": "@G.Akin You could iterate over the collection passed as an argument, then call the <code>contains</code> function for each element."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1545829149, "creation_date": 1545829149, "answer_id": 53932443, "question_id": 53932370, "link": "https://stackoverflow.com/questions/53932370/a-template-parameter-works-with-different-stl-containers/53932443#53932443", "title": "A template parameter works with different STL containers?", "body": "<p>You could make <code>containsAll</code> a template function:</p>\n\n<pre><code>template&lt;typename C&gt;\nbool containsAll(collection&lt;T, C&gt; const&amp;);\n</code></pre>\n\n<p>Since template member functions can't be <code>virtual</code> you have to implement it in the <code>collection</code> class, but it can be implemented to <em>call</em> some <code>protected</code> virtual function.</p>\n"}], "owner": {"reputation": 312, "user_id": 10631085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfYp.jpg?s=128&g=1", "display_name": "tango-1", "link": "https://stackoverflow.com/users/10631085/tango-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 53932443, "answer_count": 1, "score": 0, "last_activity_date": 1546020804, "creation_date": 1545828690, "last_edit_date": 1546020804, "question_id": 53932370, "link": "https://stackoverflow.com/questions/53932370/a-template-parameter-works-with-different-stl-containers", "title": "A template parameter works with different STL containers?", "body": "<p>I have an question and I cant find any solution about this. I am writing a Java Collection Hierarchy using c++ stl containers. And I have Templated class <strong>Collection</strong> which is base abstract class and <strong>List</strong> class that derives from <strong>Collecton</strong> and <strong>ArrayList</strong> Class which derives from List.</p>\n\n<p>Interfaces are :</p>\n\n<pre><code>template&lt;typename T,template &lt;typename...&gt; class Container&gt;\nclass collections\n{\npublic:\n    virtual gtuiterator&lt;T,Container&gt; iterator()=0;//my own iterator class\n    virtual bool contains(T e)=0;\n    virtual bool containsAll(collections&amp; c)=0;\n    //and other methods \n};\n</code></pre>\n\n<p>List.h same as the Collections.h</p>\n\n<pre><code>template&lt;typename T,template &lt;typename...&gt; class Container&gt;\nclass list : public collections&lt;T,Container&gt;\n{\npublic:\n    virtual gtuiterator&lt;T,Container&gt; iterator()=0;\n    virtual bool contains(T e)=0;\n    virtual bool containsAll(collections&lt;T,Container&gt;&amp; c)=0;        \n};\n</code></pre>\n\n<p>And ArrayList.h</p>\n\n<pre><code>template&lt;typename T,template &lt;typename...&gt; class Container&gt;\nclass ArrayList : public list&lt;T,Container&gt;\n{\npublic:\n    virtual gtuiterator&lt;T,Container&gt; iterator()override{\n        gtuiterator&lt;T,Container&gt; iter(&amp;array);\n        return iter;\n    }\npublic:\n    ...\n};\n</code></pre>\n\n<p>And In the main I call containsAll method : </p>\n\n<pre><code>ArrayList&lt;int,std::list&gt; test1;\nfor (int i = 0; i &lt; 5; i++)\n    test1.add(i);\n\nArrayList&lt;int,std::vector&gt; test2;\nfor (int i = 0; i &lt; 5; ++i)\n    test2.add(i);\n\ncout &lt;&lt; \"TESTED =\" &lt;&lt; test1.containsAll(test2) &lt;&lt; endl;\n</code></pre>\n\n<p>And compiler says that there is no conversion from bla bla..</p>\n\n<pre><code>        error: no matching function for call to \u2018collectionsgtu::ArrayList&lt;int, std::__cxx11::list&gt;::containsAll(collectionsgtu::ArrayList&lt;int, std::vector&gt;&amp;)\u2019\n      cout &lt;&lt; \"TESTED =\" &lt;&lt; test1.containsAll(test2) &lt;&lt; endl;\n                                                   ^\n    In file included from test.cpp:2:0:\n    arraylist.h:34:16: note: candidate: bool collectionsgtu::ArrayList&lt;T, Container&gt;::containsAll(collectionsgtu::collections&lt;T, Container&gt;&amp;) [with T = int; Container = std::__cxx11::list]\n       virtual bool containsAll(collections&lt;T,Container&gt;&amp; c)override{\narraylist.h:34:16: note:   no known conversion for argument 1 from \u2018collectionsgtu::ArrayList&lt;int, std::vector&gt;\u2019 to \u2018collectionsgtu::collections&lt;int, std::__cxx11::list&gt;&amp;\u2019\n</code></pre>\n\n<p>I know the reason of error, for example when I declare <code>test2&lt;int,std::vector&gt;,</code> Compiler puts std::vector by T, so containsAll function parameter becomes a std::vector parameter and does not accept other stl containers.\nIf the second parameter of the test1 and test2 is the same, code works.</p>\n\n<p>How Can I template theese classes that accepts some stl containers(set,list,vector) for function parameters like containAll ? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "adobe-pdf-library"], "comments": [{"owner": {"reputation": 1057, "user_id": 1669243, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78cf4fe32ac26c49d554366e4ec55dd2?s=128&d=identicon&r=PG", "display_name": "JosephA", "link": "https://stackoverflow.com/users/1669243/josepha"}, "edited": false, "score": 1, "creation_date": 1546274881, "post_id": 53932246, "comment_id": 100583298, "body": "Have you contacted our Support (tech_support@datalogics.com) department? What you&#39;re describing sounds like a regression however it&#39;s difficult to comment on without having the document in question. You could try using the recently added PDInsertDoNotResolveInvalidStructureParentReferences flag and see if that helps. If not please contact us and we will immediately get started with a formal investigation."}, {"owner": {"reputation": 11, "user_id": 10835039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bdea2b51a685d12e6b74db710bc6b93?s=128&d=identicon&r=PG&f=1", "display_name": "Shameer", "link": "https://stackoverflow.com/users/10835039/shameer"}, "reply_to_user": {"reputation": 1057, "user_id": 1669243, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78cf4fe32ac26c49d554366e4ec55dd2?s=128&d=identicon&r=PG", "display_name": "JosephA", "link": "https://stackoverflow.com/users/1669243/josepha"}, "edited": false, "score": 0, "creation_date": 1546864748, "post_id": 53932246, "comment_id": 100583299, "body": "Thanks Joseph.We have raised a query with Datalogics for this issue."}], "owner": {"reputation": 11, "user_id": 10835039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bdea2b51a685d12e6b74db710bc6b93?s=128&d=identicon&r=PG&f=1", "display_name": "Shameer", "link": "https://stackoverflow.com/users/10835039/shameer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546274881, "creation_date": 1545827999, "last_edit_date": 1545899936, "question_id": 53932246, "link": "https://stackoverflow.com/questions/53932246/pddocsave-takes-more-time-in-saving-the-files", "title": "PDDocSave takes more time in saving the files", "body": "<p>I found slowness in Inserting and saving the PDF files with the latest libraries (APDFL15.0.4PlusP4a and APDFL15.0.4PlusP2e). The slowness happens when the page count is more than 300.</p>\n\n<p>The below code saves a 450 pages document using PDDocSave by inserting a temporary(accumulated) document with 40 pages each.</p>\n\n<p>When replaced with an older version ( APDFL15.0.1PlusP1h) the performance was better.</p>\n\n<pre><code>  // Assemble accumulated files\n  for(int j=1;j&lt;=accumCount;j++)\n  {\n     sprintf(accumName,ACCUM_FILETEMPLATE, j);\n     TSTBUG1(1,\"Opening accumulator :%s\",accumName);\n     pdDoc2 = MyPDDocOpen(accumName);\n     if (!pdDoc2)\n     {\n        SYS_ERR \"Unable to open file %s \\n\",accumName);\n        return PDFASSEMBLY_FAILURE;\n     }\n     PDDocInsertPages (pdDoc1,PDLastPage,pdDoc2, 0, PDAllPages,PDInsertAll, NULL,NULL,NULL,NULL);\n     TSTBUG1(1,\"Inserting accumulator : %d\\n\",j);\n     PDDocRelease(pdDoc2);\n     PDDocClose(pdDoc2);\n     unlink (accumName);\n  }\n  TSTBUG1(20,\"Saving file =&gt;%s&lt;=\",ptrMasterPDFDocumentList-&gt;ptrHeader-&gt;strOutputPDFFile);\n  PDDocSave(pdDoc1,PDSaveFull|PDSaveLinearized,\n           ASPathFromPlatformPath(ptrMasterPDFDocumentList-&gt;ptrHeader-&gt;strOutputPDFFile),\n           ASGetDefaultFileSys(),NULL,NULL);\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "sdl-2"], "comments": [{"owner": {"reputation": 1097, "user_id": 9703830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d48ed2a2cf0e75c7355e044c71385202?s=128&d=identicon&r=PG&f=1", "display_name": "dedObed", "link": "https://stackoverflow.com/users/9703830/dedobed"}, "edited": false, "score": 4, "creation_date": 1545835967, "post_id": 53932222, "comment_id": 94707378, "body": "Using <code>using namespace std;</code> is usually not recommended, but it is a mortal sin in a header file. Might even cause your problem, since you do so before including third party header. Even more importantly: Judging from the error message, your problem is not really connected to SDL, so please prepare a <a href=\"https://stackoverflow.com/help/mcve\">minimal example</a>."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1545842185, "post_id": 53932222, "comment_id": 94709413, "body": "Can&#39;t repro the missing <code>traja</code>s on my Debian Stable system with GCC 6.3.  Instead it can&#39;t find <code>win</code> and <code>res</code> in <code>Igra()</code> and <code>~Igra()</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1545842551, "post_id": 53932222, "comment_id": 94709548, "body": "You have more than one file named &quot;game.h&quot; on your system, and you are not including the one you think you are."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1545842553, "post_id": 53932222, "comment_id": 94709550, "body": "Can&#39;t see your problem. For me all compiles ( if I remove SDL stuff which I have not on my system and change data types to common ones. What has your question todo with &quot;codeblocks&quot;?"}, {"owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "edited": false, "score": 0, "creation_date": 1545844329, "post_id": 53932222, "comment_id": 94710114, "body": "idk:1. I removed using namespace std-didn&#39;t work"}, {"owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "edited": false, "score": 0, "creation_date": 1545844481, "post_id": 53932222, "comment_id": 94710159, "body": "2.the only similar file near the project is SDL_gamecontroller.h, third might I ask if it is a problem that I have it on aUSB stick?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1545852623, "post_id": 53932222, "comment_id": 94712723, "body": "A simple check to see if your header is being included is to add an obvious compilation error (I typically add a line that is just <code>ugh;</code> at the top, before any include guards) then compile to see if you get the error.  If you don&#39;t then the wrong header file is being included or you have recursive includes."}, {"owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "edited": false, "score": 0, "creation_date": 1545897850, "post_id": 53932222, "comment_id": 94722411, "body": "when adding ugh; it removes all function and variable errors, but whines about ren and win- repro&#39;d genpfault&#39;s problem"}, {"owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "edited": false, "score": 0, "creation_date": 1545898911, "post_id": 53932222, "comment_id": 94722712, "body": "I give up- gonna do it in one file"}, {"owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "edited": false, "score": 0, "creation_date": 1545923906, "post_id": 53932222, "comment_id": 94732741, "body": "dd it in one file, works near perfect. Just asking how to close this thing?"}], "owner": {"reputation": 11, "user_id": 10834978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-omS09GQ9a-o/AAAAAAAAAAI/AAAAAAAAACo/Psqj8PanoWk/photo.jpg?sz=128", "display_name": "jan\u010di Zuletek", "link": "https://stackoverflow.com/users/10834978/jan%c4%8di-zuletek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545841974, "creation_date": 1545827826, "last_edit_date": 1545841974, "question_id": 53932222, "link": "https://stackoverflow.com/questions/53932222/a-class-in-a-header-does-not-include-all-variables-and-functions", "title": "A class in a header does not include all variables and functions?", "body": "<p>This .h file, that is included in the game file, doesn't recognize variables and a function \"as in scope\":</p>\n\n<pre><code>#ifndef GAME_H\n#define GAME_H\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n#include \"SDL2/SDL.h\"\n\nclass Igra\n    {\n    private:\n        SDL_Renderer *obl;\n        SDL_Window *okno;\n        bool traja;\n        Uint32 Takt_zac;\n    public:\n        Igra();\n        ~Igra();\n        void zanka();\n        void posodobi();\n        void vnos();\n        void oblikuj();\n    };\n#endif // GAME_H\n</code></pre>\n\n<p>The game.cpp that I made:</p>\n\n<pre><code>#include \"game.h\"\n\n#define fps 60\n\nIgra::Igra()\n{\n    SDL_Init(0);\n    SDL_CreateWindowAndRenderer(360,240,0,&amp;win,&amp;ren);\n    SDL_SetWindowTitle(win,\"Planet Saver\");\n    traja=true;\n    void loop();\n}\n\nIgra::~Igra()\n{\n    SDL_DestroyRenderer(ren);\n    SDL_DestroyWindow(win);\n    SDL_Quit();\n}\n\nvoid Igra::zanka()\n{\n    while(Igra::traja)\n    {\n        Takt_zac=SDL_GetTicks();\n        void kon30(Uint32 Takt_zac);\n        oblikuj();\n        vnos();\n        posodobi();\n\n    }\n}\nvoid kon30(Uint32 Takt_zac)\n{\n    if((1000/fps)&gt;SDL_GetTicks()-Takt_zac)\n        SDL_Delay(1000/fps-(SDL_GetTicks()-Takt_zac));\n}\nvoid Igra::oblikuj()\n{\n\n}\nvoid Igra::vnos()\n{\n\n}\nvoid Igra::posodobi()\n{\n\n}\n</code></pre>\n\n<p>Errors that the compiler makes:</p>\n\n<pre><code>    ||=== Build: Debug in g0.1 (compiler: GNU GCC Compiler) ===|\nG:\\SDL+igra\\g0.1\\game.cpp||In constructor 'Igra::Igra()':|\nG:\\SDL+igra\\g0.1\\game.cpp|10|error: 'traja' was not declared in this scope|\nG:\\SDL+igra\\g0.1\\game.cpp||In member function 'void Igra::zanka()':|\nG:\\SDL+igra\\g0.1\\game.cpp|23|error: 'traja' is not a member of 'Igra'|\nG:\\SDL+igra\\g0.1\\game.cpp|25|error: 'Takt_zac' was not declared in this scope|\nG:\\SDL+igra\\g0.1\\game.cpp|27|error: 'oblikuj' was not declared in this scope|\nG:\\SDL+igra\\g0.1\\game.cpp|38|error: no 'void Igra::oblikuj()' member function declared in class 'Igra'|\n||=== Build failed: 5 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545827614, "post_id": 53932157, "comment_id": 94704689, "body": "Curious why you think this is a failure to find the symbol. It&#39;s listed right there. The question is what &quot;NOTYPE&quot; in the shndx column signifies."}, {"owner": {"reputation": 21, "user_id": 8033845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d66748c4422fd45b8bf3f351ccd4d1?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8033845/daniel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545827666, "post_id": 53932157, "comment_id": 94704710, "body": "and also,you can find the _ZN7leveldb7OptionsC1Ev symbol in libleveldb.a,but seems that the link process doesn&#39;t find the symbol."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1545827857, "post_id": 53932157, "comment_id": 94704782, "body": "what does <code>ldd libTest.so</code> gives?"}, {"owner": {"reputation": 21, "user_id": 8033845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d66748c4422fd45b8bf3f351ccd4d1?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8033845/daniel"}, "edited": false, "score": 0, "creation_date": 1545828846, "post_id": 53932157, "comment_id": 94705093, "body": "daniel@daniel-MS-7A74:~/leveldb/test_zdn$ ldd libTest.so         linux-vdso.so.1 (0x00007ffe8e1fe000)         libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007ff44531e000)         libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007ff445106000)         libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff444d15000)         libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007ff444977000)         /lib64/ld-linux-x86-64.so.2 (0x00007ff4458ab000)"}, {"owner": {"reputation": 21, "user_id": 8033845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d66748c4422fd45b8bf3f351ccd4d1?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8033845/daniel"}, "edited": false, "score": 0, "creation_date": 1545828960, "post_id": 53932157, "comment_id": 94705134, "body": "the reason i think it&#39;s wrong is that,jni call  get output java.lang.UnsatisfiedLinkError, and i googled ,lead to UND symbol.so  do you mean UND symbol in *.so is alright?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8033845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d66748c4422fd45b8bf3f351ccd4d1?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8033845/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1545899949, "creation_date": 1545899949, "answer_id": 53942064, "question_id": 53932157, "link": "https://stackoverflow.com/questions/53932157/i-can-find-the-symbol-in-libleveldb-a-but-when-i-create-the-shared-library-faile/53942064#53942064", "title": "i can find the symbol in libleveldb.a,but when i create the shared library,failed to find the same symbol.what&#39;s wrong?", "body": "<blockquote>\n  <p>i misunderstand the link process,that's because static library has undefined symbol is alright.\n  static library is archive of object file,and obj is okay to have und symbol.\n  but,you have to add the dependency library when you use the static library(same with dynamic library).</p>\n  \n  <blockquote>\n    <p><a href=\"https://blog.csdn.net/tom06/article/details/80309864\" rel=\"nofollow noreferrer\">https://blog.csdn.net/tom06/article/details/80309864</a></p>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 8033845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d66748c4422fd45b8bf3f351ccd4d1?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8033845/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545899949, "creation_date": 1545827454, "last_edit_date": 1545827822, "question_id": 53932157, "link": "https://stackoverflow.com/questions/53932157/i-can-find-the-symbol-in-libleveldb-a-but-when-i-create-the-shared-library-faile", "title": "i can find the symbol in libleveldb.a,but when i create the shared library,failed to find the same symbol.what&#39;s wrong?", "body": "<p>I've created a leveldb's java client to fit YCSB and need to use JNI. So I built the shared library based on <code>libleveldb.a</code> but it generate some error.</p>\n\n<p>test.cpp:</p>\n\n<pre><code>#include &lt;leveldb/db.h&gt;\n#include &lt;iostream&gt;\nint main()\n{\n        leveldb::DB* db;\n        leveldb::Options options;\n        options.create_if_missing = true;\n        leveldb::Status status = \n        leveldb::DB::Open(options,\"/tmp/testdb\", &amp;db);\n        assert(status.ok());\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre><code>g++ test.cpp -fPIC -shared -o libTest.so\n</code></pre>\n\n<p>i expect i can find the <code>_ZN7leveldb7OptionsC1Ev</code> symbol in .so file.\nbut the symbol output is:</p>\n\n<pre><code>$ daniel@daniel-MS-7A74:~/leveldb/test_zdn$ readelf -s libTest.so|grep leveldb7Options\n10: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _ZN7leveldb7OptionsC1Ev\n63: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _ZN7leveldb7OptionsC1Ev\n\n$ daniel@daniel-MS-7A74:~/leveldb/test_zdn$ readelf -s test.o|grep leveldb7Options\n1882: 0000000000037dc4   183 FUNC    GLOBAL DEFAULT   14 _ZN7leveldb7OptionsC1Ev\n2628: 0000000000037dc4   183 FUNC    GLOBAL DEFAULT   14 _ZN7leveldb7OptionsC2Ev\n</code></pre>\n\n<p>the shndx column is UNDEFINED in libTest.so</p>\n"}, {"tags": ["c++", "types", "operator-overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1545825972, "post_id": 53931862, "comment_id": 94704094, "body": "Have you tried anything?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1545826550, "post_id": 53931862, "comment_id": 94704297, "body": "@\u03c0\u03ac\u03bd i&#39;m not sur where the dup answers the question."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545833001, "post_id": 53931862, "comment_id": 94706502, "body": "I have even a link in my question to the proposed duplicate. I read this. It does not answer my question. Therefore I have asked. @gsamaras, \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 . Maybe you ust read the header of the question."}], "answers": [{"comments": [{"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545833499, "post_id": 53931915, "comment_id": 94706667, "body": "Thank you for the answer. Good reference. That helped already, maybe not fully. Because it also works with pointers, for example with function pointers. Hm . . ."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545833818, "post_id": 53931915, "comment_id": 94706756, "body": "@Armin Could you give me an example? doesn&#39;t work for me: <a href=\"http://coliru.stacked-crooked.com/a/e6dc4a74caa36b4e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/e6dc4a74caa36b4e</a>."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545856248, "post_id": 53931915, "comment_id": 94713723, "body": "Something like (very sorry for bad format):    &quot;struct test{ bool operator != (bool(*)()) { return false; } };     test t;     bool checkSomething(){ return false; }     bool testop(){ return( t!= checkSomething); }&quot;. Compiled with gcc8.2 -Wall- Wextra -pedantic on RPI 3B+"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545862690, "post_id": 53931915, "comment_id": 94715540, "body": "@Armin, &quot;at least one of the parameters...&quot;. So yes, the other one can be anything, including a pointer. Your operator takes as first hidden parameter a reference to a class type (<code>test&amp;</code>)."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 0, "last_activity_date": 1545826444, "last_edit_date": 1592644375, "creation_date": 1545826114, "answer_id": 53931915, "question_id": 53931862, "link": "https://stackoverflow.com/questions/53931862/what-parameter-types-are-allowed-for-overloaded-function-in-a-class/53931915#53931915", "title": "What Parameter Types are allowed for overloaded != function in a class", "body": "<blockquote>\n<p>What type of parameter is allowed for overloaded operators, e.g. &quot;operator !=&quot; ?</p>\n</blockquote>\n<p>There are very few restrictions, the most important being: you cannot overload operators for builtin types. So one of the two types for binary operators must be a user-defined type.</p>\n<blockquote>\n<h3><a href=\"http://eel.is/c++draft/over.oper#6\" rel=\"nofollow noreferrer\"><code>[over.oper]/6</code></a></h3>\n<p>An operator function shall either be a non-static member function or be a non-member function that has <strong>at least one parameter whose type is a class, a reference to a class, an enumeration, or a reference to an enumeration</strong>. It is not possible to change the precedence, grouping, or number of operands of operators.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1545833697, "post_id": 53931935, "comment_id": 94706723, "body": "Thank you. Although, one could guess that the operand must be const and a reference. But also a int*** works. If we see T as int ***, then it is maybe a &quot;const int *** &amp;&quot;. It accepts also a int&amp;&amp;."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1545826178, "creation_date": 1545826178, "answer_id": 53931935, "question_id": 53931862, "link": "https://stackoverflow.com/questions/53931862/what-parameter-types-are-allowed-for-overloaded-function-in-a-class/53931935#53931935", "title": "What Parameter Types are allowed for overloaded != function in a class", "body": "<p>According to <a href=\"https://en.cppreference.com/w/cpp/language/operator_comparison\" rel=\"nofollow noreferrer\">cppreference</a>, the function signature (for a free function) is:</p>\n\n<pre><code>bool operator !=(const T &amp;a, const T2 &amp;b);\n</code></pre>\n\n<p>Where:</p>\n\n<blockquote>\n  <p>T2 can be any type including T</p>\n</blockquote>\n\n<p>Similar wording applies if <code>operator!=</code> is a class member function.  Plus what YSC said.</p>\n"}], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1545826265, "accepted_answer_id": 53931915, "answer_count": 2, "score": 0, "last_activity_date": 1545857503, "creation_date": 1545825849, "last_edit_date": 1545857503, "question_id": 53931862, "link": "https://stackoverflow.com/questions/53931862/what-parameter-types-are-allowed-for-overloaded-function-in-a-class", "closed_reason": "Duplicate", "title": "What Parameter Types are allowed for overloaded != function in a class", "body": "<p>Just for learning purposes and if I would really like to compare apples with pies. And ignoring for the moment <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading/4421708#4421708\">rules and idioms</a></p>\n\n<p>What type of parameter is allowed for overloaded operators, e.g. \"operator !=\" ? </p>\n\n<p>Ok, it is expecting exactly one parameter, but what type?. Having read <a href=\"https://en.cppreference.com/w/cpp/language/function\" rel=\"nofollow noreferrer\">'functions'</a>, <a href=\"https://en.cppreference.com/w/cpp/language/declarations\" rel=\"nofollow noreferrer\">'declarations'</a>, <a href=\"https://en.cppreference.com/w/cpp/language/type\" rel=\"nofollow noreferrer\">'types'</a> and <a href=\"https://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">'operator overloading'</a>, I still do not know it. Any restriction? Maybe the same as any other function? Can somebody confirm that?</p>\n\n<p>Any help appreciated</p>\n\n<p>Edit:</p>\n\n<p>In my post I even linked the proposed dup. So, why mark it as dup. I read that thread before. My question is nowhere answered in the post. I am not sure how to rephrase the question. It is about the \"C++ type\" of the parameter in the overloaded operator function. A \"C++ type\" is something like described in <a href=\"https://en.cppreference.com/w/cpp/language/type\" rel=\"nofollow noreferrer\">types</a>. For example, I think that the type must be complete. Any other restrictions or requirements?</p>\n"}, {"tags": ["c++", "stl", "stdvector", "c++-standard-library", "stdset"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1545825060, "post_id": 53931615, "comment_id": 94703791, "body": "If you want to insert at the end of the container, you can use <code>container.insert(container.cend(), element)</code>."}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545825197, "post_id": 53931615, "comment_id": 94703832, "body": "You miss the point of the question. Please read carefully. I ask why they don&#39;t have the same signatures so that I can use them conveniently in templates. <code>set::insert</code> accepts one argument, <code>vector::insert</code> accepts two arguments."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1545825201, "post_id": 53931615, "comment_id": 94703836, "body": "Maybe there isn&#39;t an <code>add</code> operation that makes sense for all the different container types."}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545825311, "post_id": 53931615, "comment_id": 94703870, "body": "That&#39;s a good point, however set and vector are close enough to have some common API, like for example in Java."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545825322, "post_id": 53931615, "comment_id": 94703881, "body": "@sam <code>vector.insert</code> and <code>set.insert</code> both accept 2 arguments. <code>set.insert</code> also accepts 1 argument."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1545825505, "post_id": 53931615, "comment_id": 94703942, "body": "C++ is about gleaning as much performance from your program as possible. It&#39;s fact of life that different containers have vastly different performance guarantees. A template <i>should</i> be aware of it, and not blindly compile for a vector and a multiset. As such, different interfaces."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545825547, "post_id": 53931615, "comment_id": 94703958, "body": "@sam For reference, you can read more about them <a href=\"https://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\">here (<code>set.insert</code>)</a> and <a href=\"https://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\">here (<code>vector.insert</code>)</a>"}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1545825916, "post_id": 53931615, "comment_id": 94704079, "body": "@StoryTeller when calling a method on a template I already take the risk of not knowing the underlying implementation and efficiency. I think template will be considered to be somewhat aware of efficiency if the method was named something like <code>insert_in_constant_time</code> or <code>insert_in_logarithmic_time</code>. Otherwise the template is not really aware of it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1545827029, "post_id": 53931615, "comment_id": 94704466, "body": "@samvel1024 - And so all the containers will have a bloated interface? How is that better?"}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545827432, "post_id": 53931615, "comment_id": 94704626, "body": "I don&#39;t ask for all containers, obviously map and vector cannot have the same interface. My example is about <code>vector::insert</code> aliasing <code>vector::push_back</code>. How does that make the interface bloated ?"}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545827552, "post_id": 53931615, "comment_id": 94704667, "body": "@L.F. If they accept 2 arguments, that does not mean that I can use them the same way. The first argument, which is an iterator, will have to point to different places. In case of set, it is begin, and for vector it is end. However, my question was not about that in any case."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545827978, "post_id": 53931615, "comment_id": 94704812, "body": "@sam The versions of <code>vector.insert</code> and <code>set.insert</code> that take 2 arguments work the same way. See the links I posted. The second argument is not an iterator; instead, it is the value you are inserting. For <code>set</code>, you can use any iterator, including <code>begin</code> and <code>end</code>. Therefore, you can use <code>end</code> for both <code>vector</code> and <code>set</code>. This gives you to some extent genericity. I hope my explanation can help you. Try not to hurry, do it carefully. We are always willing to offer you help."}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1545828398, "post_id": 53931615, "comment_id": 94704956, "body": "@L.F. simply change to <code>container.insert(container.end(), element)</code> and see that the set will always have size 0 no matter how many inserts you perform."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1545828603, "post_id": 53931615, "comment_id": 94705011, "body": "vector::insert inserts at a given place. vector::push_back inserts at back. vector::push_front inserts at front. Why do you think push_back deserves special treatment and push_front does not?"}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1545828904, "post_id": 53931615, "comment_id": 94705119, "body": "@n.m. I could not find any docs about vector::push_front. I suppose there is no such method. Even if it existed, It would not be the default insertion method for that collection, since it is linear time. In my approach insert would be the most efficient insertion into the collection."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545833224, "post_id": 53931615, "comment_id": 94706584, "body": "In C++, the different containers have an interface that is appropriate for the container.  In Java the different containers implements the same interface abstraction.  C++ is not Java.  Stepanov&#39;s STL for C++ was ground-breaking in many ways, and Java had the luxury of being inspired by his work."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545836728, "post_id": 53931615, "comment_id": 94707658, "body": "Java containers only implement the <b>same</b> interface in an abstract sense. Some containers do not, in fact, support all of the operations defined by their interface, and throw a runtime exception if you try to use them."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1545839709, "post_id": 53931615, "comment_id": 94708591, "body": "My bad, there&#39;s list::push_front and deque::push_front."}], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545829640, "post_id": 53932238, "comment_id": 94705351, "body": "From the 3 points you mentioned, I got only the third one which is &quot;They did not assume that you will treat all collections in the same way&quot;. My suggestion was to have a method insert in non-associative containers (where it makes sense), which would be documented as &quot;insert the most efficient way you can&quot;. I don&#39;t see how it adds up complexity, hurts efficiency or clarity of the API. For erasing I think there already exists uniform API dealing with iterators."}, {"owner": {"reputation": 21, "user_id": 8836531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a7cfc9f082f2c9d3f3a028e6c1b484?s=128&d=identicon&r=PG", "display_name": "wpfman", "link": "https://stackoverflow.com/users/8836531/wpfman"}, "reply_to_user": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545850830, "post_id": 53932238, "comment_id": 94712141, "body": "&quot;My suggestion was to have a method insert in non-associative containers (where it makes sense), which would be documented as &quot;insert the most efficient way you can&quot;.&quot;"}, {"owner": {"reputation": 21, "user_id": 8836531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a7cfc9f082f2c9d3f3a028e6c1b484?s=128&d=identicon&r=PG", "display_name": "wpfman", "link": "https://stackoverflow.com/users/8836531/wpfman"}, "reply_to_user": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545851226, "post_id": 53932238, "comment_id": 94712278, "body": "&quot;My suggestion was to have a method insert in non-associative containers (where it makes sense), which would be documented as &quot;insert the most efficient way you can&quot;.&quot; How such insert with one parameter should behave in case of list or deque? Adding it there would be ambiguous as there is no one &quot;most efficient way&quot;. Then what is left in non-associative - vector, array, forward_list? I think that points 2 and 3 covers your question."}, {"owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "edited": false, "score": 0, "creation_date": 1545851982, "post_id": 53932238, "comment_id": 94712536, "body": "Well, my point is to make the class more friendly for being used as a template. Don&#39;t get me wrong I don&#39;t suggest to replace the existing descriptive names with insert. My question is &quot;Why c++ containers don&#39;t let me treat them through the same uniform API, <i>If I just want to insert an element regardless of the underlying algorithm</i>&quot;. I don&#39;t really believe that they did not think about that scenario since removal, iteration are almost always very template friendly, so why insertion is exceptional ?"}], "tags": [], "owner": {"reputation": 21, "user_id": 8836531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a7cfc9f082f2c9d3f3a028e6c1b484?s=128&d=identicon&r=PG", "display_name": "wpfman", "link": "https://stackoverflow.com/users/8836531/wpfman"}, "is_accepted": false, "score": 1, "last_activity_date": 1545827938, "creation_date": 1545827938, "answer_id": 53932238, "question_id": 53931615, "link": "https://stackoverflow.com/questions/53931615/why-methods-in-c-containers-dont-have-uniform-signatures/53932238#53932238", "title": "Why methods in C++ containers don&#39;t have uniform signatures", "body": "<p>You may consider insert and erase as similar interface in case of std containers.</p>\n\n<p>It is not kept the same for all containers as it would bring additional penalty in performance/memory or even would make no sense in case of some container. For example forward_list::insert_after instead of insert, because insert does not make sense there.</p>\n\n<p>Limiting interface on the other hand (as you suggested with vector::insert with one argument) wouldn't be clear. Actually it would introduce some behavior that is not related to container type structure. Maybe you want your one parameter insert to put data in front of you vector, not back? Well not to argue about vector, how should it work in case of deque?</p>\n\n<p>Extending interface would also make no sense - how should insert with two parameters work in case of stack or forward_list?</p>\n\n<p>Also worth to mention that C++ std provides minimal implementation for containers and algorithms. Assumption is that you may extend this minimal implementation on your own.</p>\n\n<p>So I would say:</p>\n\n<ol>\n<li>performance</li>\n<li>interface/container operation clarity</li>\n<li>providing minimum implementation only, without unnecessary assumptions</li>\n</ol>\n"}], "owner": {"reputation": 997, "user_id": 2374651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tBTbI.jpg?s=128&g=1", "display_name": "samvel1024", "link": "https://stackoverflow.com/users/2374651/samvel1024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1545847621, "answer_count": 1, "score": -3, "last_activity_date": 1545827938, "creation_date": 1545824511, "question_id": 53931615, "link": "https://stackoverflow.com/questions/53931615/why-methods-in-c-containers-dont-have-uniform-signatures", "closed_reason": "Opinion-based", "title": "Why methods in C++ containers don&#39;t have uniform signatures", "body": "<p>I want to write a method which adds an item to a container regardless of that containers type. To make my intention clear I am attaching a Java snippet doing the same thing.</p>\n\n<pre><code>public static &lt;T&gt; void add(Collection&lt;T&gt; collection, T element){\n    collection.add(element);\n}\n\npublic static void main (String[] args) {\n    Set&lt;Integer&gt; s = new TreeSet&lt;&gt;();\n    List&lt;Integer&gt; l = new ArrayList&lt;&gt;();\n    add(s, 1);\n    add(l, 1);\n}\n</code></pre>\n\n<p>This is possible in Java since all collections implement a common interface. Let's say for performance reasons designers of C++ decided not to have virtual methods in containers. However IMHO considering the way c++ templates work it makes sense to have an alias method<code>vector::insert</code> for <code>vector::push_back</code>. The absence of that method is the reason why the following code does not compile.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;set&gt;\n\n\ntemplate&lt;typename T, typename E&gt;\nvoid insert(T container, E element) {\n    container.insert(element);\n}\n\nint main() {\n    std::vector&lt;int&gt; v;\n    std::set&lt;int&gt; s;\n    insert(v, 1);\n    insert(s, 1);\n    return 0;\n} \n</code></pre>\n\n<p>There can be many solutions to this issue. However I would like to know the reason why designers of C++ did not care about this, or did not add that in subsequent releases of the language ? Was it something done on purpose ?</p>\n"}, {"tags": ["c++", "tensorflow"], "comments": [{"owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1545831927, "post_id": 53931263, "comment_id": 94706103, "body": "Thank you for your supporting. The downvote nearly let me down. And do you know how to get the size? And I search the tensorflow source code in github, and didn&#39;t find useful answer."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1545973164, "creation_date": 1545973164, "answer_id": 53953855, "question_id": 53931263, "link": "https://stackoverflow.com/questions/53931263/how-to-get-placeholder-size-in-tensorflow-c-api/53953855#53953855", "title": "How to get placeholder size in TensorFlow C++ API?", "body": "<p>OK\uff0cafter many times attempts. I have find a workaround solution, It maybe tricky but works well.</p>\n\n<p>At first, we can get the placeholder node using following code:</p>\n\n<pre><code>GraphDef mygd = graph_def.graph_def();\nfor (int i = 0; i &lt; mygd.node_size(); i++)\n{\n    if (mygd.node(i).name() == input_name)\n    {\n        auto node = mygd.node(i);\n    }\n}\n</code></pre>\n\n<p>Then through the NodeDef.pd.h(tensorflow/core/framework/node_def.pb.h), we can get AttrValue through code like below:</p>\n\n<pre><code>auto attr = node.attr();\n</code></pre>\n\n<p>Then through the attr_value.cc(tensorflow/core/framework/attr_value.cc), we can get the shape attr value through code like below:</p>\n\n<pre><code>tensorflow::AttrValue shape = attr[\"shape\"];\n</code></pre>\n\n<p>and the shape AttrValue is the structure used to store shape information. We can get the detail information through the function SummarizeAttrValue in tensorflow/core/framework/attr_value_util.h</p>\n\n<pre><code>string size_summary = SummarizeAttrValue(shape);\n</code></pre>\n\n<p>And then we can get the string format of shape like below:</p>\n\n<pre><code>[?,1024]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545973164, "creation_date": 1545822617, "question_id": 53931263, "link": "https://stackoverflow.com/questions/53931263/how-to-get-placeholder-size-in-tensorflow-c-api", "title": "How to get placeholder size in TensorFlow C++ API?", "body": "<p>I want to use C++ to load TensorFlow model. And I want to know size of model's input, which is the placeholder in the model.</p>\n\n<p>I google this problem, but I just find this link in stackoverflow :</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/39378657/c-equivalent-of-python-tf-graph-get-tensor-by-name-in-tensorflow\">C++ equivalent of python: tf.Graph.get_tensor_by_name() in Tensorflow?</a></p>\n</blockquote>\n\n<p>Although I can get node, but tensorflow document don't tell me how to access the size of the node. So is there anyone know something about this?</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["c++", "undefined-behavior", "unions"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1545821653, "post_id": 53931021, "comment_id": 94702616, "body": "I have seen this exact structure multiple times today. What makes this question different from your other ones?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1545821676, "post_id": 53931021, "comment_id": 94702628, "body": "And C++ does not allow <i>type-punning</i> using unions."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 2, "creation_date": 1545824300, "post_id": 53931021, "comment_id": 94703550, "body": "Interesting point here: You are declaring a type, nested in the union, but the union doesn&#39;t contain a subobject of that declared type!"}], "answers": [{"comments": [{"owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 4, "creation_date": 1545822199, "post_id": 53931022, "comment_id": 94702821, "body": "There is no endianess to worry about! Endianess will not affect unsigned chars."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 0, "creation_date": 1545822387, "post_id": 53931022, "comment_id": 94702888, "body": "@purpletentacle When reading data you have to worry about rgb pixel order"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 0, "creation_date": 1545822415, "post_id": 53931022, "comment_id": 94702904, "body": "@purpletentacle All I am saying is <code>r</code> might be <code>[0]</code> not <code>[2]</code>"}, {"owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 4, "creation_date": 1545822424, "post_id": 53931022, "comment_id": 94702908, "body": "Yes, RGB order is important! but that is not endianess"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 0, "creation_date": 1545822542, "post_id": 53931022, "comment_id": 94702953, "body": "@purpletentacle that is what I mean by endianness - byte order"}, {"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 1, "creation_date": 1545823553, "post_id": 53931022, "comment_id": 94703299, "body": "@user3728501: neither the order of the array, nor the order of the three RGB values is implementation defined. If there was an <code>unsigned int</code> alias this would come into it, but not in this case."}, {"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 0, "creation_date": 1545905400, "post_id": 53931022, "comment_id": 94725085, "body": "Also won&#39;t this approach produce  a far larger struct, rendering it useless for the likely intended use of representing an image through an array of pixels?"}], "tags": [], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "is_accepted": false, "score": 0, "last_activity_date": 1545821478, "creation_date": 1545821478, "answer_id": 53931022, "question_id": 53931021, "link": "https://stackoverflow.com/questions/53931021/c-i-think-my-union-may-be-producing-undefined-behaviour/53931022#53931022", "title": "C++ I think my union may be producing undefined behaviour", "body": "<p>Apparently the assumption may be compiler dependent. Therefore I have found this as an alternative solution:</p>\n\n<pre><code>class PixelRGB\n{\n\n    public:\n\n    unsigned char array[3];\n    unsigned char &amp;r;\n    unsigned char &amp;g;\n    unsigned char &amp;b;\n\n    PixelRGB()\n        : r{array[2]}\n        , g{array[1]}\n        , b{array[0]}\n    {\n    }\n}\n</code></pre>\n\n<p>You may have to watch your endian-ness. Such an obvious solution. It is essentially a software union. The disadvantage is this struct uses significantly more memory (unless the compiler can somehow optimize away the references?) - but this isn't a problem. Store data as <code>unsigned char[]</code> and then only use this for manipulation, which is what my intended purpose was.</p>\n"}, {"comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1545823179, "post_id": 53931212, "comment_id": 94703172, "body": "I&#39;d rather <code>static_assert(&amp;pixel.array[0] == &amp;pixel.r)</code> and the same for the other two colours, so it at least fails to compile on platforms where this fails."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545823681, "post_id": 53931212, "comment_id": 94703345, "body": "@UlrichEckhardt Compilers are much stricter about UB at compile time. I would expect that to fail even when this will work in practice."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545823877, "post_id": 53931212, "comment_id": 94703419, "body": "@UlrichEckhardt I just <a href=\"https://godbolt.org/z/bDLsps\" rel=\"nofollow noreferrer\">tried it</a>; GCC doesn&#39;t allow the <code>static_assert</code> even though it does explicitly allow type punning through unions as a language extension."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1545824415, "post_id": 53931212, "comment_id": 94703582, "body": "Check out <a href=\"https://godbolt.org/z/6Oiuds\" rel=\"nofollow noreferrer\">godbolt.org/z/6Oiuds</a>. You copied a bug from the original question (no instance of <code>PixelRGB::rgb</code> nested in the union). Also, you need to compare addresses, not values."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545826108, "post_id": 53931212, "comment_id": 94704136, "body": "@UlrichEckhardt The problem is not just one of address overlapping. The problem is one of optimizations the compiler is allowed to perform. It seems to me that the compiler can assume a value will never change through a different member so it could keep a value in a register and fail to re-read its updated value from memory if it was written through a different member (for example)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545906327, "post_id": 53931212, "comment_id": 94725517, "body": "@UlrichEckhardt it&#39;s guaranteed that those two things occupy the same memory location, so such a static assert would be pointless (even if it were legal)"}], "tags": [], "owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "is_accepted": false, "score": 2, "last_activity_date": 1545822368, "creation_date": 1545822368, "answer_id": 53931212, "question_id": 53931021, "link": "https://stackoverflow.com/questions/53931021/c-i-think-my-union-may-be-producing-undefined-behaviour/53931212#53931212", "title": "C++ I think my union may be producing undefined behaviour", "body": "<p>It's undefined behaviour, explicitly so in the standard. You can't write a union in one and read in another (expections apply) and get defined behaviour in C++.</p>\n\n<p>However, it will also work on any compiler you're likely to come across, and if you are doing stuff with RGB values and pixels your code is likely tied to platform anyway so my advice is not to worry about it.</p>\n"}, {"comments": [{"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545862177, "post_id": 53932469, "comment_id": 94715415, "body": "Conversely, <a href=\"http://eel.is/c++draft/basic.lval#11\" rel=\"nofollow noreferrer\">&#91;basic.lval&#93;/11</a>: &quot;If a program attempts to access the stored value of an object through a glvalue of other than one of the following types the behavior is undefined:[...] <a href=\"http://eel.is/c++draft/basic.lval#11.6\" rel=\"nofollow noreferrer\">(11.6)</a> -- an aggregate or union type that includes one of the aforementioned types among its elements or non-static data members (including, recursively, an element or non-static data member of a subaggregate or contained union)&quot;. Conspicuously missing is a requirement to access unions <i>using</i> the member matching the access type."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545862629, "post_id": 53932469, "comment_id": 94715526, "body": "... Further, I&#39;m unclear on how <a href=\"http://eel.is/c++draft/basic.life#7\" rel=\"nofollow noreferrer\">&#91;basic.life&#93;/7</a> applies here, as the object in question is the <i>aggregate or union</i>, not its active member, and I know of nothing in the standard which states that an <i>access</i>, whether valid or invalid, should end an objects lifetime. Further still, <a href=\"http://eel.is/c++draft/class.union#1\" rel=\"nofollow noreferrer\">&#91;class.union&#93;/1</a> immediately defines &quot;active member&quot; as referring to which type of data is <i>stored</i> in the union. No mention is made to which types of data can be accessed, therefore leading back to [basic.lval]/11."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545864550, "post_id": 53932469, "comment_id": 94715908, "body": "I did read it, several times, and again while writing this comment. I was indeed incorrect about the particulars of which object was &quot;live&quot;. However, perhaps you could cite the verbiage which states that accessing a non-active member of a union ends the lifetime of the active member? Clearly such access cannot be <i>before</i> said lifetime, as otherwise said member wouldn&#39;t <i>be</i> active. In the absence of such verbiage, clearly [basic.life]/7 <b>cannot</b> apply as it explicitly refers to the periods between allocation and the lifetime beginning, and between the lifetime ending and reuse/release."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545865437, "post_id": 53932469, "comment_id": 94716080, "body": "Further, <a href=\"http://eel.is/c++draft/basic.lval#6\" rel=\"nofollow noreferrer\">&#91;basic.lval&#93;/6</a> would appear to apply to type-punning via <i>access</i> through a union: &quot;Whenever a glvalue appears as an operand of an operator that expects a prvalue for that operand, the lvalue-to-rvalue, array-to-pointer, or function-to-pointer standard conversions are applied to convert the expression to a prvalue.&quot; ..."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545865444, "post_id": 53932469, "comment_id": 94716084, "body": "... Thus we look to <a href=\"http://eel.is/c++draft/conv.lval\" rel=\"nofollow noreferrer\">&#91;[conv.lval&#93;</a>, particularly <a href=\"http://eel.is/c++draft/conv.lval#3.1\" rel=\"nofollow noreferrer\">(3.1)</a> as the access in question appears not to run afoul of any of the restrictions in this section: &quot;If T is cv std::nullptr_&#173;t, the result is a null pointer constant ([conv.ptr]). [\u2009Note: Since the conversion does not access the object to which the glvalue refers, there is no side effect even if T is volatile-qualified ([intro.execution]), and <b>the glvalue can refer to an inactive member of a union</b> ([class.union]). \u2014\u2009end note\u2009]&quot; (emphasis added)."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545865813, "post_id": 53932469, "comment_id": 94716168, "body": "So why make an explicit note that an otherwise-unsafe access <i>is</i> safe in one specific form if that particular form invokes UB in all contexts?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545904943, "post_id": 53932469, "comment_id": 94724909, "body": "@pandorafalters I&#39;ve added an explanation. Does it answer your questions?"}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545925218, "post_id": 53932469, "comment_id": 94733290, "body": "I understand, yet still disagree, with both your reasoning and your conclusions."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545925295, "post_id": 53932469, "comment_id": 94733319, "body": "@pando then please write an answer ;)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1545942370, "post_id": 53932469, "comment_id": 94739478, "body": "I don&#39;t think any versions of the C nor C++ Standard has ever made any reasonable effort to define accesses to aggregate members.  The early standards date to a time when it was easier for compilers to process some corner cases in useful fashion than to do anything else, and nobody thought it would really matter whether or not the Standard <i>actually</i> defined their behavior.  In your union example, the assignment to <code>u.a</code> uses a glvalue  of type <code>unsigned </code>to access the stored values of <code>u</code> and also e..g <code>u.b[0]</code>, and there is no circumstance when an <code>unsigned</code> lvalue is allowed..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1545942587, "post_id": 53932469, "comment_id": 94739552, "body": "...to be used to access an object of type <code>union u</code>.  This wouldn&#39;t be a problem if the rules that were intended to say when things may alias were applied only for that purpose, and recognized that an access to via pointer/reference/glvalue that is freshly derived from another one <i>is</i> a reference to the latter glvalue, but for some reason compiler writers seem to prefer adding more complicated rules that still fail to allow for even the most basic scenarios like the <code>u.a</code> above."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 4, "last_activity_date": 1545907809, "last_edit_date": 1592644375, "creation_date": 1545829259, "answer_id": 53932469, "question_id": 53931021, "link": "https://stackoverflow.com/questions/53931021/c-i-think-my-union-may-be-producing-undefined-behaviour/53932469#53932469", "title": "C++ I think my union may be producing undefined behaviour", "body": "<blockquote>\n<p>I've read through this and it does appear to indicate that if I read from a member which was not the last member to be written, then the result is UB...</p>\n<p>My question is why?</p>\n</blockquote>\n<p><strong>Because the Standard says so<sup>1</sup></strong>. The Standard sometimes imposes on us (C++ developers) rules which allow implementations (compilers) to ignore edge cases and allow them to optimize for the nominal case. This is such a rule.</p>\n<p>Some compiler may build a binary working as you expect. Some may produce a crashing executable. Some may do anything in between or seemingly random. <em>Undefined behavior is undefined</em><sup>2</sup>.</p>\n<hr />\n<p><sup>1)</sup></p>\n<blockquote>\n<h3><a href=\"http://eel.is/c++draft/class.union#1\" rel=\"nofollow noreferrer\"><code>[class.union]/1</code></a></h3>\n<p>In a union, a non-static data member is active if its name refers to an object whose lifetime has begun and has not ended ([basic.life]). At most one of the non-static data members of an object of union type can be active at any time, that is, the value of at most one of the non-static data members can be stored in a union at any time.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<h3><a href=\"http://eel.is/c++draft/basic.life#7\" rel=\"nofollow noreferrer\"><code>[basic.life]/7</code></a></h3>\n<p>Similarly, before the lifetime of an object has started but after the storage which the object will occupy has been allocated or, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any glvalue that refers to the original object may be used but only in limited ways. [...] <strong>The program has undefined behavior if</strong>:</p>\n<ul>\n<li>the glvalue is used to access the object, or</li>\n<li>[...]</li>\n</ul>\n</blockquote>\n<p>To make it easier to parse for humans, with the following context:</p>\n<pre><code>union { unsigned a; char b[sizeof(unsigned)]; } u;\nu.a = 0;       // (1)\n(void) u.b[0]; // (2) UB\n</code></pre>\n<p>On line marked <code>(1)</code>, <code>u.a</code> is now the active member of <code>u</code>. Per <code>[class.union]/1</code>, since only one non-static member of a union can be active at the same time, <code>u.b</code> is <em>not</em> active.</p>\n<p>This means on line marked <code>(2)</code>, we access the value of an object whose lifetime has either not yet begun or already ended in a way making it undefined behavior per <code>[basic.life]/7</code>.</p>\n<hr />\n<p><sup>2)</sup></p>\n<blockquote>\n<h3><a href=\"http://eel.is/c++draft/defns.undefined\" rel=\"nofollow noreferrer\"><code>[defns.undefined]</code></a></h3>\n<p><strong>undefined behavior</strong><br />\nbehavior for which this document imposes no requirements</p>\n</blockquote>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548330209, "creation_date": 1545821478, "last_edit_date": 1548330209, "question_id": 53931021, "link": "https://stackoverflow.com/questions/53931021/c-i-think-my-union-may-be-producing-undefined-behaviour", "title": "C++ I think my union may be producing undefined behaviour", "body": "<p>I am using a union to represent rgb pixel data, so it can be accessed as a continual array of <code>uint8_t</code> or as individual rgb elements. (I think this is probably one of the few uses for unions.)</p>\n\n<p>Something like this:</p>\n\n<pre><code>union PixelRGB\n{\n    uint8_t array[3];\n    struct rgb\n    {\n        uint8_t b;\n        uint8_t g;\n        uint8_t r;\n    };\n};\n</code></pre>\n\n<p>I actually picked this code up from somewhere else online which suggested this as a potential use.</p>\n\n<p>I asked a question a few minutes ago about a seperate issue but was told my union may produced UB.</p>\n\n<p>I've read through <a href=\"http://www.modernescpp.com/index.php/c-core-guidelines-rules-for-unions\" rel=\"nofollow noreferrer\">this</a> and it does appear to indicate that if I read from a member which was not the last member to be written, then the result is UB...</p>\n\n<p>My question is why?</p>\n\n<p>My assumption (perhaps wrong?) is that in memory the union would be represented as:</p>\n\n<pre><code>b = array[0]\ng = array[1]\nr = array[2]\n</code></pre>\n\n<p>ie; each of these variables occupies exactly the same bytes (space/location/address) in memory, and therefore I would assume the line</p>\n\n<pre><code>g = 0xff;\n</code></pre>\n\n<p>would change the value of <code>array[1]</code> to be <code>0xff</code>.</p>\n\n<p>Am I wrong? Why?</p>\n\n<p>For arguments sake: C++ 14</p>\n\n<p>Duplicate question is not duplicate: Linked question asks whether two structs inside a union is UB - not quite what I am asking here.</p>\n"}, {"tags": ["c++", "class", "c++11"], "comments": [{"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1545837210, "post_id": 53930889, "comment_id": 94707817, "body": "Did you try printing out the value? Like using <code>cout &lt;&lt; testObject.foo</code>"}, {"owner": {"reputation": 340, "user_id": 7556145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6576454e9d158fb6c0358750d6c992a?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/7556145/francesco"}, "reply_to_user": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1545903606, "post_id": 53930889, "comment_id": 94724361, "body": "Yes, it prints 0"}], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 7556145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6576454e9d158fb6c0358750d6c992a?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/7556145/francesco"}, "is_accepted": false, "score": 0, "last_activity_date": 1546073034, "last_edit_date": 1546073034, "creation_date": 1546071532, "answer_id": 53967886, "question_id": 53930889, "link": "https://stackoverflow.com/questions/53930889/class-with-separated-header-can-see-only-initialization-value-of-member-variabl/53967886#53967886", "title": "Class with separated header: can see only initialization value of member variable", "body": "<p>I found the problem. In main() I added a separated thread that launches Test::someMethod(). When I stop the execution inside main() I can't see local thread's variable of testObject</p>\n"}], "owner": {"reputation": 340, "user_id": 7556145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6576454e9d158fb6c0358750d6c992a?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/7556145/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1546073058, "creation_date": 1545820801, "last_edit_date": 1546073058, "question_id": 53930889, "link": "https://stackoverflow.com/questions/53930889/class-with-separated-header-can-see-only-initialization-value-of-member-variabl", "title": "Class with separated header: can see only initialization value of member variable", "body": "<p>I have a Test class defined in its own header, test.h, that is included on main.cpp file. Basically this is the situation:</p>\n\n<p><strong>test.h</strong></p>\n\n<pre><code>class Test\n{\n    ...\n    ...\n    ...\n\npublic:\n    long foo;\n};\n</code></pre>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>// Constructor\nTest::Test()\n{\n    foo = 0\n}\n\nvoid Test::someMethod()\n{\n    // Here foo variable is changed\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"test.h\"\n\nusing namespace std;\n\nint main()\n{\n    Test testObject;\n    ...\n    // Do something with testObject\n    ...\n\n    return 0;\n}\n</code></pre>\n\n<p>During debug on Visual Studio 2017 if I stop the execution inside main's code I can't see tha actual value of foo, I see its initialization value:</p>\n\n<pre><code>testObject.foo --&gt; 0\n</code></pre>\n\n<p>Why this happens? If I stop the execution inside class I see its actual value.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I found the problem. In main() I added a separated thread that launches Test::someMethod(). When I stop the execution inside main I can't see local thread's variable of testObject.</p>\n\n<p>Is there a way to see a thread's local variables?</p>\n"}, {"tags": ["c++", "class", "compiler-errors"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545820332, "post_id": 53930789, "comment_id": 94702171, "body": "Did you mean having <code>#include &quot;controller.hpp&quot;</code> in main.cpp?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545820355, "post_id": 53930789, "comment_id": 94702177, "body": "No, I think he really includes the source files, which is the source of the error."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1545820382, "post_id": 53930789, "comment_id": 94702182, "body": "Voting to close as typo. @OP replace <code>#include &quot;controller.cpp&quot;</code> by <code>#include &quot;controller.hpp&quot;</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545820415, "post_id": 53930789, "comment_id": 94702196, "body": "@MatthieuBrucher I never doubt they do so, and yes, that&#39;s the source of the error."}, {"owner": {"reputation": 77, "user_id": 5708789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50ad72238a186a90cd47f54ea41c530?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Mihailescu", "link": "https://stackoverflow.com/users/5708789/andrei-mihailescu"}, "edited": false, "score": 0, "creation_date": 1545820434, "post_id": 53930789, "comment_id": 94702200, "body": "I did that and I get the same errors. Should I do it everywhere?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1545820566, "post_id": 53930789, "comment_id": 94702249, "body": "There are also <i>other</i> <code>#include</code> directives where you include the <i>source</i> files instead of the header files. Don&#39;t do that!"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545820605, "post_id": 53930789, "comment_id": 94702266, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I know, sorry, didn&#39;t mean to!"}, {"owner": {"reputation": 77, "user_id": 5708789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50ad72238a186a90cd47f54ea41c530?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Mihailescu", "link": "https://stackoverflow.com/users/5708789/andrei-mihailescu"}, "edited": false, "score": 0, "creation_date": 1545820628, "post_id": 53930789, "comment_id": 94702272, "body": "Should the header file contain the source code then?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545820708, "post_id": 53930789, "comment_id": 94702307, "body": "@AndreiMihailescu <i>&quot;Should the header file contain the source code then?&quot;</i> No. You already know how to link the compiled object files together, don&#39;t you?"}, {"owner": {"reputation": 77, "user_id": 5708789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50ad72238a186a90cd47f54ea41c530?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Mihailescu", "link": "https://stackoverflow.com/users/5708789/andrei-mihailescu"}, "edited": false, "score": 0, "creation_date": 1545820882, "post_id": 53930789, "comment_id": 94702373, "body": "Is that using -o?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545821224, "post_id": 53930789, "comment_id": 94702481, "body": "@AndreiMihailescu Read this please: <a href=\"https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\" title=\"how does the compilation linking process work\">stackoverflow.com/questions/6264249/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1545821210, "creation_date": 1545821210, "answer_id": 53930969, "question_id": 53930789, "link": "https://stackoverflow.com/questions/53930789/multiple-definitions-of-error-only-in-codeblocks/53930969#53930969", "title": "&quot;Multiple definitions of&quot; error only in CodeBlocks", "body": "<p>The problem is two-fold:</p>\n\n<ul>\n<li><p>First, as mentioned, you <code>#include</code> your source files instead of the header files.</p></li>\n<li><p>Secondly your IDE (CodeBlocks) project already lists the source files (it must, or you would not get the errors).</p></li>\n</ul>\n\n<p>Before explaining why the above two points work together to cause the problem you have, you need to learn how C++ is used to build applications. To make a C++ application you need to perform three steps:</p>\n\n<ol>\n<li>Edit one or more source files</li>\n<li>Compile the source files into object files</li>\n<li>Link the object files into a single executable file.</li>\n</ol>\n\n<p>Even if you do not explicitly create object files (as with the <code>g++ -std=c++11 main.cpp</code> command) the object files are created implicitly by the <code>g++</code> front-end program.</p>\n\n<p>Now going back to the problems you have...</p>\n\n<p>Because your CodeBlocks project lists <em>all</em> the source files, they will explicitly be built into object files, and then linked into the final executable program. The problem is that many of the symbols have already been defined in the single <code>main.o</code> object file because you <code>#include</code> source files. So (for example) the symbol <code>Controller::single_game</code> will be defined in both the object file <code>main.o</code> <strong><em>and</em></strong> the object file <code>controller.o</code>. That is not allowed.</p>\n\n<p>You solve that by only including the header files, everywhere. The source code in the <code>.cpp</code> files will be built and linked by CodeBlocks for you.</p>\n"}], "owner": {"reputation": 77, "user_id": 5708789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50ad72238a186a90cd47f54ea41c530?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Mihailescu", "link": "https://stackoverflow.com/users/5708789/andrei-mihailescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1545938139, "answer_count": 1, "score": -2, "last_activity_date": 1545821210, "creation_date": 1545820253, "last_edit_date": 1545820295, "question_id": 53930789, "link": "https://stackoverflow.com/questions/53930789/multiple-definitions-of-error-only-in-codeblocks", "closed_reason": "Not suitable for this site", "title": "&quot;Multiple definitions of&quot; error only in CodeBlocks", "body": "<p>I am building a Tic Tac Toe game using MVC. The code is the following:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"controller.cpp\"\n\nint main()\n{\n    Controller controller;\n    controller.start_game();\n}\n</code></pre>\n\n<p>controller.hpp:</p>\n\n<pre><code>#ifndef controllerTTT\n#define controllerTTT\n\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;string&gt;\n#include \"common.hpp\"\n#include \"model.cpp\"\n#include \"view.cpp\"\n#define BOARD_SIZE 3\n\nclass Controller\n{\n    private:\n        Model model;\n        View view;\n        bool player_interaction(Player);\n        void single_game();\n    public:\n        void start_game();\n};\n\n#endif\n</code></pre>\n\n<p>controller.cpp:</p>\n\n<pre><code>#include \"controller.hpp\"\n\nbool Controller::player_interaction(Player player){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid Controller::single_game(){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid Controller::start_game(){\n    //code eliminated in order to not post 300 lines of code\n}\n</code></pre>\n\n<p>model.hpp:</p>\n\n<pre><code>#ifndef modelTTT\n#define modelTTT\n\n#include &lt;array&gt;\n#include \"common.hpp\"\n#define BOARD_SIZE 3\n\nclass Model\n{\n    private:\n        Player board[BOARD_SIZE][BOARD_SIZE];\n    public:\n        Model();\n        void do_move(Move_input, Player);\n        bool legal_move(Move_input);\n        Outcome outcome();\n        std::array&lt;Player, BOARD_SIZE*BOARD_SIZE&gt; get_board();\n        void reset();\n};\n\n#endif\n</code></pre>\n\n<p>model.cpp:</p>\n\n<pre><code>#include \"model.hpp\"\n\nModel::Model()\n{\n    for(int row=0; row&lt;BOARD_SIZE; ++row)\n    {\n        for(int column=0; column&lt;BOARD_SIZE; ++column)\n        {\n            this-&gt;board[row][column]=Player::none;\n        }\n    }\n}\n\nvoid Model::do_move(Move_input move_input , Player player)\n{\n    //code eliminated in order to not post 300 lines of code\n}\n\nbool Model::legal_move(Move_input move_input)\n{\n    //code eliminated in order to not post 300 lines of code\n}\n\nOutcome Model::outcome()\n{\n    //code eliminated in order to not post 300 lines of code\n}\n\nstd::array&lt;Player, BOARD_SIZE*BOARD_SIZE&gt; Model::get_board(){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid Model::reset(){\n    //code eliminated in order to not post 300 lines of code\n}\n</code></pre>\n\n<p>view.hpp:</p>\n\n<pre><code>#ifndef viewTTT\n#define viewTTT\n\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;windows.h&gt;\n#include &lt;string&gt;\n#include \"common.hpp\"\n#define BOARD_SIZE 3\n\nclass View\n{\n    public:\n        void output_board(std::array&lt;Player, BOARD_SIZE*BOARD_SIZE&gt;);\n        void output_message(std::string);\n        void output_outcome(Outcome);\n        void wait(int miliseconds);\n        void reset();\n        Move_input get_move();\n        std::string get_message();\n};\n\n#endif\n</code></pre>\n\n<p>view.cpp:</p>\n\n<pre><code>#include \"view.hpp\"\n\nvoid View::output_board(std::array&lt;Player, BOARD_SIZE*BOARD_SIZE&gt; board){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid View::output_message(std::string message){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid View::output_outcome(Outcome outcome){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid View::wait(int miliseconds){\n    //code eliminated in order to not post 300 lines of code\n}\n\nvoid View::reset(){\n    //code eliminated in order to not post 300 lines of code\n}\n\nMove_input View::get_move(){\n    //code eliminated in order to not post 300 lines of code\n}\n\nstd::string View::get_message(){\n    //code eliminated in order to not post 300 lines of code\n}\n</code></pre>\n\n<p>common.hpp:</p>\n\n<pre><code>#pragma once\n\nenum class Player\n{\n    none='-',\n    player1='X',\n    player2='O'\n};\n\nenum class Outcome\n{\n    none,\n    win1='X',\n    win2='O',\n    draw\n};\n\nstruct Move_input{\n    int row,column;\n};\n</code></pre>\n\n<p>And I get the following errors when compiled in Code::Blocks: </p>\n\n<p><img src=\"https://i.imgur.com/jCQo84I.jpg\" alt=\"\"></p>\n\n<p>However, when I build it in a console with this command <code>g++ -std=c++11 main.cpp</code> it works just fine. So what is wrong with my code?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1545819461, "post_id": 53930575, "comment_id": 94701874, "body": "This is not C++"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545819599, "post_id": 53930575, "comment_id": 94701935, "body": "Would you mind to give us a more complete example (ideally a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). We need to know how exactly the string literal is stored in <code>class A</code>, etc. to give you a correct answer."}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "edited": false, "score": 0, "creation_date": 1545819716, "post_id": 53930575, "comment_id": 94701978, "body": "this is not c++ syntax but the question is how c++ reacts in kind of this situation when it gets &quot;char array&quot; from the function param into a pointer"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1545819800, "post_id": 53930575, "comment_id": 94702002, "body": "You question doesn&#39;t make much sense: &quot;a char array which was set on class A&quot; does a poor job as describing <i>something</i>. This is why we need an example, and we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to help you."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1545819856, "post_id": 53930575, "comment_id": 94702023, "body": "You wrote <i>&quot;the static map&quot;</i>; I ask <b>which map</b>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 2, "creation_date": 1545819924, "post_id": 53930575, "comment_id": 94702037, "body": "<code>&quot;param_name&quot;</code> is a string literal in your example, it will live until the end of the program and a pointer to it may therefore be safely saved in a map. Is that your question? If it is, your pseudo-code doesn&#39;t make sense though, as <code>func</code> is part of class <code>B</code> but called in <code>A</code>."}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "edited": false, "score": 0, "creation_date": 1545820197, "post_id": 53930575, "comment_id": 94702118, "body": "I reshaped the question hope its better. yes this was my question, thank you very much. I was worried that in some point after class A is destroyed &quot;param_name&quot; will be freed"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1545820385, "post_id": 53930575, "comment_id": 94702185, "body": "Your example still doesn&#39;t make much sense. If you want to call <code>funcEx</code> in <code>A</code>, you must use a qualified name to look it up, e.g. <code>B::funcEx</code>. Furthermore the string literal cannot be passed as <code>char*</code>, only <code>const char*</code>. Also note that my previous comment only holds for string literals, not char arrays. Additionally of course the <code>map</code> declaration, access specifiers and an enclosing function for the call in <code>A</code> are missing. (and <code>Class</code> should be <code>class</code>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1545820533, "post_id": 53930575, "comment_id": 94702233, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2579874/lifetime-of-a-string-literal-returned-by-a-function\">Lifetime of a string literal returned by a function</a>"}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "edited": false, "score": 0, "creation_date": 1545821432, "post_id": 53930575, "comment_id": 94702546, "body": "Thanks again. I fixed the example above. yes I used a const char* in the code to point to the string, so it now seems to me that the map will point to the string which be allocated in memory till the end of the program"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545821478, "post_id": 53930575, "comment_id": 94702563, "body": "What is the reason you don&#39;t use <code>std::string</code> and just not have to worry about it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545821743, "post_id": 53930575, "comment_id": 94702660, "body": "@15412s <i>&quot;I fixed the example above&quot;</i> Your now edited example is still far from valid c++. Also you still left the question open how the <code>const char*</code> is stored within &#39;class A&#39;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545821959, "post_id": 53930575, "comment_id": 94702732, "body": "@15412s Even if I fix the most basic syntax, your code won&#39;t compile: <a href=\"http://coliru.stacked-crooked.com/a/3d3f908eb5d0d26b\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3d3f908eb5d0d26b</a>"}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "edited": false, "score": 0, "creation_date": 1545821979, "post_id": 53930575, "comment_id": 94702738, "body": "const char* is not stored in class a, const char* is the type of input from B::funcEx. what would be the difference from using std::string instead of const char* to point to the string?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1545822429, "post_id": 53930575, "comment_id": 94702909, "body": "If you use <code>std::string</code> instead of <code>const char*</code> the class will automatically copy the string (literal) and you don&#39;t need to worry about lifetime of the original anymore."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1545822881, "last_edit_date": 1545822881, "creation_date": 1545821922, "answer_id": 53931122, "question_id": 53930575, "link": "https://stackoverflow.com/questions/53930575/when-its-safe-to-use-char-array-from-a-different-class/53931122#53931122", "title": "When its safe to use char array from a different class?", "body": "<p>As it was said a literal string like \"param_name\" is immortal.</p>\n\n<p>To try to answer you :</p>\n\n<pre><code>#include &lt;map&gt;\n\nclass B {\n  public:\n    static void funcEx(const char * param) {\n      map[param] = 8;\n    }\n  private:\n    static std::map&lt;const char *, int&gt; map;\n};\n\nstd::map&lt;const char *, int&gt; B::map;\n\nclass A {\n  public:\n    A(char c) { member[0] = c; member[1] = 0; }\n    void f() { B::funcEx(\"param_name\"); }\n    void g() { B::funcEx(member); }\n    void h(char * s) { B::funcEx(s); }\n  private:\n    char member[2];\n};\n\nint main(int, char **)\n{\n   A * x = new A('x');\n   {\n     A y('y');\n\n     {\n       char s[] = \"ab\";\n\n       x-&gt;f(); // nothing change with y-&gt;f()\n       x-&gt;g();\n       y.g();\n       x-&gt;h(s); // x can be y\n\n       // here all the keys/pointers into the map still exist\n\n       delete x;\n\n       // here x is deleted\n       // =&gt; x-&gt;member has an unknown value\n       // =&gt; \"x\" used as a key in the map is an invalid pointer, may be it is not anymore the string \"x\"\n     }\n\n     // here 's' does not exist anymore\n     // the key \"ab\" in the map is an invalid pointer, may it is not anymore the string \"ab\"\n   }\n\n   // here 'y' does not exist\n   // =&gt; y.member has an unknown value\n   // =&gt; \"y\" used as a key in the map is an invalid pointer, may be it is not anymore the string \"y\"\n\n   return 0;\n}\n</code></pre>\n\n<p>Because all is static in B that class has no real interest</p>\n"}], "owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1545822881, "creation_date": 1545819226, "last_edit_date": 1545821258, "question_id": 53930575, "link": "https://stackoverflow.com/questions/53930575/when-its-safe-to-use-char-array-from-a-different-class", "title": "When its safe to use char array from a different class?", "body": "<p>I have two classes, class B comtains a static function \"funcEx\" which has a pointer as param. funcEx should insert the param data into a map.</p>\n\n<p>Class A uses this funx in order to keep params inside the static map.\nWhat would happen after class A is destroyed.\nWill the memory allocation of \"param_name\" will be released?</p>\n\n<pre><code>class A{\nB::funcEx(\"param_name\");\n}\n\nclass B{\nstatic map&lt;const char*, int, cmp_str&gt; *Map1 ;\nstatic Map1 = new std::map&lt;const char *, int, cmp_str&gt;();\n\nstatic funcEx(const char * param){\nMap1.insert(param,8)\n}\n\n}\n</code></pre>\n"}, {"tags": ["c++", "composition", "gameobject", "virtual-inheritance"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1545818559, "post_id": 53930173, "comment_id": 94701535, "body": "4- cache misses. Are you sure you want to iterate over a <i>list</i> of <i>pointers</i>? Lookup data locality."}, {"owner": {"reputation": 179, "user_id": 9776963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013ad09d1e3844ceeccb0ef6ec84ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Saleh", "link": "https://stackoverflow.com/users/9776963/saleh"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1545853387, "post_id": 53930173, "comment_id": 94712905, "body": "while I mentioned that this is just an example to show that the gameobject holds a list of some kind of components. It could be a set, vector, or any other implementation that could be optimized for a better behavior like getting the components.  And I am aware of the ECS system, and it&#39;s Cache efficiency over the old way of doing things. My focus here is on how components should be implemented."}], "owner": {"reputation": 179, "user_id": 9776963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013ad09d1e3844ceeccb0ef6ec84ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Saleh", "link": "https://stackoverflow.com/users/9776963/saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1545817202, "creation_date": 1545817202, "question_id": 53930173, "link": "https://stackoverflow.com/questions/53930173/usage-of-composition-or-virtual-inheritance-in-cases-like-components-of-a-gameob", "title": "Usage of Composition or Virtual Inheritance in cases like Components of a GameObject", "body": "<p>So development of games using the Object Oriented Paradigm in C++ generally involves the idea of GameObjects and their Components. \nNow first and foremost, a GameObject would be a list of components like in the following: </p>\n\n<pre><code>class GameObject {\n    list&lt;Component*&gt; m_components;\n    Component* getComponent(component){}\n}\n</code></pre>\n\n<p>Now of course, there are many other ways to implement the gameobject in a better and more efficient way, but that's irrelevant because my focus is going to be on the components. The way gameobjects is composed of components is the classic example of composition through the component based architecture as each component represents a behavior for the GameObject.</p>\n\n<p>The components themselves could be composed of multiple \"features\" or behaviors that may be needed. For instance, we could have a component that relies on multiple other classes with behavior, such as clickables, drag and drop, and other classes.\nTaking into account that each sub component does have everything necessary to function, they don't depend on calling their parent class constructor, and that concrete classes would implement a virtual method from one of the parent classes to perform actions as a result of a behavior occurring. I find it that using virtual inheritance in this case seems like a better solution than having another layer of composition. I'd end up with the following:</p>\n\n<pre><code>class Component {}\n\nclass clickable : virtual Component {\n    virtual onClick();\n}\n\nclass draggable : virtual Component {\n    virtual onDrop();\n}\n</code></pre>\n\n<p>Each class does what it needs without interfering with the base class. Each would add a functionality that can be inherited. all the concrete classes need to do is override the provided virtual. These can't be purely interfaces because each class has to do it's own stuff. A concrete class would look like:\n    class ConcreteComponent : public Component, public Clickable, public Dragable {} </p>\n\n<p>Problems that need a solution: </p>\n\n<p>1- static_casting is disabled, thus i'd be relying on dynamic_cast, and due to their costly nature, I am going to be forced to only call these during instantiation of a component and add pointers as member variables if any cross behavioral stuff is needed. Am I truly confined to this? would the direct attachment to the base component atleast alleviate part of the problem by allowing static casting to any concrete even if they have parent classes that are virtual base classes? </p>\n\n<p>2- Speed-wise, how much worse would the reliance on virtual classes be than a straight forward inheritance implementation.</p>\n\n<p>3- is there an actual viable composition based implementation on this sort of problem instead? isn't heavy reliance on composition a bad code smell especially when it's used on various levels?  </p>\n"}, {"tags": ["c++", "pointers", "avr-gcc", "avrdude"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545817276, "post_id": 53930091, "comment_id": 94701090, "body": "The problem is first you give us a non valid C++ code ..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545817327, "post_id": 53930091, "comment_id": 94701106, "body": "<code>std::vector&lt;s1, std::allocator&lt;alloc1&gt;&gt; vect1; std::vector&lt;s1&gt;::iterator it = vect1.begin();</code> -- This compiled?  The iterator is for a different <code>vector</code> type.  That&#39;s one reason why <code>auto</code> was introduced in C++ 11."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545817429, "post_id": 53930091, "comment_id": 94701134, "body": "What is <i>String</i> definition ? What is doPrint definition ? What do you execute before to call <code>myPublicMethod2()</code> ?"}, {"owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545818492, "post_id": 53930091, "comment_id": 94701512, "body": "Hi @bruno, thanks for being curious ! The stack trace is the following: 1. myPublicMethod(). 2. myPublicMethod2().         doPrint() - that is a kind of printBMP(), as far as arr1 &amp; arr2 are encoded bitmaps."}, {"owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545818981, "post_id": 53930091, "comment_id": 94701677, "body": "@paulmckenzie, thanks! Could you give an example what is wrong and how do I use auto here. The code is compiled with iterator"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545839931, "post_id": 53930091, "comment_id": 94708660, "body": "@Sergio <code>std::vector&lt;s1, std::allocator&lt;alloc1&gt;&gt; vect1; auto it = vect1.begin();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "edited": false, "score": 0, "creation_date": 1545819199, "post_id": 53930444, "comment_id": 94701772, "body": "1. myPublicMethod(\u201cA\u201d); 2. myPublicMethod2();  this is how it\u2019s executed"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "edited": false, "score": 0, "creation_date": 1545819354, "post_id": 53930444, "comment_id": 94701827, "body": "<b>what is the definition of String</b> ? We use (better to say <i>lost</i>) time for you, can you have the politeness to answer to our question ?"}, {"owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "edited": false, "score": 0, "creation_date": 1545977914, "post_id": 53930444, "comment_id": 94747083, "body": "dude, honestly I never require your precious time, neither someones else. I guess is a free will to answer and spend your time helping someone when his/her stack overflowed. So if this is not your job to answer on noobs&#39; questions I have had my politeness. Mery Christmas anyways. \u2013 Sergio yesterday"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1545818627, "creation_date": 1545818627, "answer_id": 53930444, "question_id": 53930091, "link": "https://stackoverflow.com/questions/53930091/store-pointer-to-const-into-vector-of-structs/53930444#53930444", "title": "Store pointer to const into vector of structs", "body": "<p>You give us a non valid C++ code, it contains plenty of errors.</p>\n\n<p>You miss to give us the definition of String and alloc1</p>\n\n<p>You miss to give us the execution you did, typically the argument of <em>myPublicMethod</em></p>\n\n<p>So to answer you we need to use a magic crystal ball</p>\n\n<p>One possibility is <code>(arrName == \"A\")</code> and <code>(arrName == \"B\")</code> are false so you do not initialize ptr. These tests returns false for instance when the definition of String is <code>typedef const char * String;</code> </p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "is_accepted": false, "score": 0, "last_activity_date": 1545878469, "creation_date": 1545878469, "answer_id": 53939190, "question_id": 53930091, "link": "https://stackoverflow.com/questions/53930091/store-pointer-to-const-into-vector-of-structs/53939190#53939190", "title": "Store pointer to const into vector of structs", "body": "<p>So, I do figured this out. The following code is close to reality example which I was posting earlier.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;vector&gt;\n\nconst uint8_t arr1[] = {0x00, 0x00, 0x03, 0x00};\nconst uint8_t arr2[] = {0xA1, 0x00, 0xFF, 0x00};\n\nclass A {\npublic:\n    struct s1 {\n        std::string name;\n        uint8_t const * arr;\n    };\n    std::vector&lt;s1, std::allocator&lt;s1&gt;&gt; vect1;\n\n    void myPublicMethod(std::string arrName, std::string name) {\n        uint8_t const * ptr;\n        if(arrName == \"A\") {\n            ptr = arr1;\n        } else if(arrName == \"B\") {\n            ptr = arr2;\n        }\n        privateMethod1(ptr, name);\n    }\n\n    void myPublicMethod2() {\n        auto i = vect1.begin();\n        for(; i &lt; vect1.end(); i++) {\n            doPrint(i-&gt;arr, i-&gt;name);\n            // here the link between pointers broken,\n            // doPrint() shows me random characters\n        }\n    }\n\nprivate:\n    void privateMethod1(uint8_t const * ptr, std::string name) {\n        // this method receives pointer correctly, so I can doPrint(ptr)\n        s1 myStruct;\n        myStruct.name = name;\n        myStruct.arr = ptr;\n        vect1.push_back(myStruct);\n    }\n\n    void doPrint(const uint8_t arr[], std::string name) {\n        for(uint16_t i = 0; i &lt; sizeof(*arr); i++) {\n            if(name.length() &gt; 0) {\n                std::cout &lt;&lt; arr[i] &lt;&lt; '\\n';\n            } else {\n                std::cout &lt;&lt; \"No name\\n\";\n            }\n        }\n    }\n};\n\n\nint main() {\n    A ca;\n    ca.myPublicMethod(\"A\", \"\");\n    ca.myPublicMethod(\"B\", \"image\");\n    ca.myPublicMethod2();\n    return 0;\n}\n</code></pre>\n\n<p>This code is just a small part of a project (main code). I found imposible / unnecessary to post whole project because there are lots of unnecessary stuffs that definitely will require a bunch of time to understand. </p>\n\n<p>Initially I thought there were a problem with a pointers, particularly in A::myPublicMethod, that creates *ptr, that then being transferred to A::privateMethod1 to store in vect1. I was wrong thinking there is a mistake while saving / transferring to vect1. Lately I didn't find any changes for vect1 in a main code. \nVector vas created well, the problem was in method doPrint, particularly in if(name.length() > 0)... So again, I had to stick to the logic of main code without inventing an example which was a lil far from reality.</p>\n\n<p>In conclusion thanks to @paulmckenzie who indirectly gave me a reason to stop thinking in pointers. It would help me a lot if someone just confirmed that following my first example, pointers are logically correct.</p>\n\n<p>Cheers,</p>\n"}], "owner": {"reputation": 5, "user_id": 1513180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44001bf9ea778f43c418418329328916?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/1513180/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1545879351, "creation_date": 1545816805, "last_edit_date": 1545879351, "question_id": 53930091, "link": "https://stackoverflow.com/questions/53930091/store-pointer-to-const-into-vector-of-structs", "title": "Store pointer to const into vector of structs", "body": "<p>I have an issue doing the following:</p>\n\n<p><strong>Class \"A\":</strong></p>\n\n<pre><code>    const uint8_t arr1[] = {0x00, 0x00, 0x03, 0x00, ...};\n    const uint8_t arr2[] = {0xA1, 0x00, 0xFF, 0x00, ...};    \n\n    struct s1 {\n         String name;\n         uint8_t const * arr;\n    };\n    std::vector&lt;s1, std::allocator&lt;alloc1&gt;&gt; vect1;\n    std::vector&lt;s1&gt;::iterator it = vect1.begin();\n\n   privateMethod1(uint8_t const * ptr) {\n      // this method receives pointer correctly, so I can doPrint(ptr)\n      s1 myStruct;\n      myStruct.name = \"name\";\n      myStruct.arr = ptr;\n      vect1.push_back(myStruct);\n   }\n\n    myPublicMethod(String arrName) {\n        uint8_t const * ptr;\n        if(arrName == \"A\") {\n              ptr = arr1;\n        } else if(arrName == \"B\") {\n              ptr = arr2;\n        }\n        privateMethod1(ptr);\n    }\n</code></pre>\n\n<p><strong>Few moments later...</strong></p>\n\n<pre><code>  myPublicMethod2() {\n      for(; it &lt; vect1.end(); it++) {\n         doPrint(it-&gt;arr);\n         // here the link between pointers broken, \n         // doPrint() shows me random characters\n      }\n   }\n</code></pre>\n\n<p>Apparently the problem is to store arr1 or arr2 correctly in myStruct.\nAnyone has an idea where I am wrong using pointers?\nThanks</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545817214, "post_id": 53930047, "comment_id": 94701062, "body": "How can anything that needs to be done on multiple elements be constant time?"}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545817559, "post_id": 53930047, "comment_id": 94701182, "body": "@UlrichEckhardt You can get a pointer to the start of a <code>std::vector</code> in constant time. For example, <a href=\"https://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/data</a>"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545817856, "post_id": 53930047, "comment_id": 94701277, "body": "That&#39;s not an operation on multiple elements."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545818291, "post_id": 53930047, "comment_id": 94701428, "body": "@UlrichEckhardt Sure. That&#39;s not my question. It ends up that the functions I could find that give you access to elements inside a QGraphicsScene appear to perform some sorting operation. Which is undesired. Do you happen to know of a way to access the items in constant time?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1545818897, "post_id": 53930047, "comment_id": 94701649, "body": "That contradicts the title of your question. Please <a href=\"https://stackoverflow.com/posts/53930047/edit\">edit</a> your question to clarify what exactly you want to know."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1545821756, "post_id": 53930047, "comment_id": 94702665, "body": "Okay, now that makes sense!"}], "owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545818961, "creation_date": 1545816600, "last_edit_date": 1545818961, "question_id": 53930047, "link": "https://stackoverflow.com/questions/53930047/access-qgraphicsitems-in-a-qgraphicsscene-in-constant-time", "title": "Access QGraphicsItems in a QGraphicsScene in constant time?", "body": "<p>I'm trying to interoperate a <code>QAbstractTableModel</code> and <code>QGraphicsScene</code>. Its not very fun.</p>\n\n<p>I'm thinking of keeping the data in the table as userData in <code>QGraphicsItem</code>. Is there a constant time way to get the <code>GraphicsItems</code> in a scene?</p>\n\n<p>For example, this function appears to sort the items?</p>\n\n<p><code>QList&lt;QGraphicsItem *&gt; QGraphicsScene::items(Qt::SortOrder order = Qt::DescendingOrder) const</code></p>\n"}, {"tags": ["c++", "boost-geometry"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1545859924, "post_id": 53929528, "comment_id": 94714756, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29056414/id-field-intermittently-lost-in-custom-point-class\">ID field intermittently lost in custom point class</a>"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3438230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff0fb8a019de5e16284f141c8398379?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Ziegler", "link": "https://stackoverflow.com/users/3438230/andreas-ziegler"}, "edited": false, "score": 0, "creation_date": 1545838054, "post_id": 53933059, "comment_id": 94708068, "body": "Is there a way to inherit and/or modify operations like union to add support?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1545849880, "post_id": 53933059, "comment_id": 94711863, "body": "No. The algorithms assume the concept of a points to be creatable (this is documented) and also that two points with equivalent coordinates are equivalent. If you would have an algorithm that only copies (some of the) input points, you might have room for a &quot;copy point&quot; trait, but no such distinction exists in the library. In practice things would be far too complicated soon (when doing an intersection, do we copy points from the source regions, if possible? If you intersect to equivalent geometries with each other, which metadata will be present in the points of the resulting geometry?)."}], "tags": [], "owner": {"reputation": 967, "user_id": 398201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf0a01023090505d0b38d0890748acb?s=128&d=identicon&r=PG", "display_name": "Barend Gehrels", "link": "https://stackoverflow.com/users/398201/barend-gehrels"}, "is_accepted": false, "score": 1, "last_activity_date": 1545832595, "creation_date": 1545832595, "answer_id": 53933059, "question_id": 53929528, "link": "https://stackoverflow.com/questions/53929528/id-field-intermittently-lost-in-custom-point-class-when-using-boostgeometrya/53933059#53933059", "title": "ID field intermittently lost in custom point class when using boost::geometry::append", "body": "<p>Indeed Boost.Geometry currently does not support transferring custom attributes to output geometries.</p>\n\n<p>I cannot answer why the ids are 4, based on the snippets you give. Output points are either copied (from input) or created from default constructor, depending on geometry configuration of both input polygons.</p>\n"}], "owner": {"reputation": 147, "user_id": 3438230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff0fb8a019de5e16284f141c8398379?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Ziegler", "link": "https://stackoverflow.com/users/3438230/andreas-ziegler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545859934, "creation_date": 1545813570, "last_edit_date": 1545859934, "question_id": 53929528, "link": "https://stackoverflow.com/questions/53929528/id-field-intermittently-lost-in-custom-point-class-when-using-boostgeometrya", "title": "ID field intermittently lost in custom point class when using boost::geometry::append", "body": "<p>My question is very similar to the one asked in <a href=\"https://stackoverflow.com/questions/29056414/id-field-intermittently-lost-in-custom-point-class/53924028#53924028\">ID field intermittently lost in custom point class</a>.</p>\n\n<p>In my case, I have two polygons (each with points that have a type represented by an int attribute) on which I want to perform a union operation which results in a new polygon. I'm hoping that there is a way in which the points in the union polygon that come from an existing polygon keep their type. Is there any way to achieve this?</p>\n\n<p>If it is not possible, I could of course work around this by using ids.</p>\n\n<p>I already tried to use a polygon with customized points but it seems that not even the append operation works.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n//#define BOOST_GEOMETRY_DEBUG_HAS_SELF_INTERSECTIONS\n#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;boost/geometry/geometries/polygon.hpp&gt;\n\n#include &lt;boost/foreach.hpp&gt;\n\nnamespace bg = boost::geometry;\n\nclass QPoint\n{\npublic:\n  double x;\n  double y;\n\n  int id;\n  QPoint() { }\n  QPoint(double x, double y) : x(x), y(y), id(0) { }\n  QPoint(double x, double y, int id) : x(x), y(y), id(id) { }\n  QPoint(const QPoint&amp; p) : x(p.x), y(p.y), id(p.id) { }\n};\n\nnamespace boost {\nnamespace geometry {\nnamespace traits {\n// Adapt QPoint to Boost.Geometry\n\ntemplate &lt;&gt;\nstruct tag&lt;QPoint&gt;\n{\n  typedef point_tag type;\n};\n\ntemplate &lt;&gt;\nstruct coordinate_type&lt;QPoint&gt;\n{\n  typedef double type;\n};\n\ntemplate &lt;&gt;\nstruct coordinate_system&lt;QPoint&gt;\n{\n  typedef cs::cartesian type;\n};\n\ntemplate &lt;&gt;\nstruct dimension&lt;QPoint&gt; : boost::mpl::int_&lt;2&gt;\n{\n};\n\ntemplate &lt;&gt;\nstruct access&lt;QPoint, 0&gt;\n{\n  static double get(QPoint const&amp; p) { return p.x; }\n\n  static void set(QPoint&amp; p, double const&amp; value) { p.x = value; }\n};\n\ntemplate &lt;&gt;\nstruct access&lt;QPoint, 1&gt;\n{\n  static double get(QPoint const&amp; p) { return p.y; }\n\n  static void set(QPoint&amp; p, double const&amp; value) { p.y = value; }\n};\n\ntemplate &lt;&gt;\nstruct access&lt;QPoint, 2&gt;\n{\n  static int get(QPoint const&amp; p) { return p.id; }\n\n  static void set(QPoint&amp; p, int const&amp; value) { p.id = value; }\n};\n} // namespace traits\n} // namespace geometry\n} // namespace boost\n\nint main()\n{\n  //using point = bg::model::point&lt;float, 2, bg::cs::cartesian&gt;;\n  using polygon = bg::model::polygon&lt;QPoint, true, false&gt;; // cw, open polygon\n\n  polygon green;\n\n  bg::append(green.outer(), QPoint(0.0, 0.0));\n  bg::append(green.outer(), QPoint(10.0, 0.0));\n  bg::append(green.outer(), QPoint(10.0, 10.0));\n  bg::append(green.outer(), QPoint(0.0, 10.0));\n\n  std::cout &lt;&lt; \"Points polygon green:\" &lt;&lt; std::endl;\n  for (auto&amp; p : green.outer())\n  {\n    std::cout &lt;&lt; \"x: \" &lt;&lt; p.x &lt;&lt; \", y: \" &lt;&lt; p.y &lt;&lt; \", id: \" &lt;&lt; p.id &lt;&lt; \n  std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The output I get is:</p>\n\n<pre><code>Points polygon green:\nx: 0, y: 10, id: 4\nx: 10, y: 10, id: 4\nx: 10, y: 0, id: 4\nx: 0, y: 0, id: 4\n</code></pre>\n\n<p>I'm wondering why my ids are suddenly 4?</p>\n"}, {"tags": ["c++", "tensorflow", "bazel"], "comments": [{"owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "edited": false, "score": 0, "creation_date": 1545811725, "post_id": 53929089, "comment_id": 94699302, "body": "When run ./configure in tensorflow repo, I don&#39;t set cuda option. Then the compile is ok. And It works well. What is the problem..."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1546930821, "creation_date": 1546930821, "answer_id": 54086700, "question_id": 53929089, "link": "https://stackoverflow.com/questions/53929089/when-using-bazel-to-build-tensorflow-c-call-model-so-file-doesnt-work/54086700#54086700", "title": "When using bazel to build TensorFlow C++ call model, .so file doesn&#39;t work", "body": "<p>You should reference libtensorflow_frameowork.so in your makefile. Just like code below:</p>\n\n<pre><code>g++ -std=c++11 test_so.cpp -L./ -lmy_helper -ltensorflow_framework -I./ -o my_helper\n</code></pre>\n\n<p>I guess bazel misses some source code in tensorflow into .so when compile my code.</p>\n"}], "owner": {"reputation": 25, "user_id": 7117856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2db800e6e638950c64532f3b3ef6014?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/7117856/danny-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546930821, "creation_date": 1545810776, "last_edit_date": 1545816019, "question_id": 53929089, "link": "https://stackoverflow.com/questions/53929089/when-using-bazel-to-build-tensorflow-c-call-model-so-file-doesnt-work", "title": "When using bazel to build TensorFlow C++ call model, .so file doesn&#39;t work", "body": "<p>I want to use TensorFlow C++ api to call model and predict answers.\nAt fisrt, I clone the tensorflow repo </p>\n\n<blockquote>\n  <p>git clone --recursive <a href=\"https://github.com/tensorflow/tensorflow\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow</a></p>\n</blockquote>\n\n<p>Then I write the C++ code like below:</p>\n\n<p>One code is a class to call TensorFlow api, the header file is like:</p>\n\n<pre><code>#ifndef _DEEPMODEL_H_\n#define _DEEPMODEL_H_\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"tensorflow/core/public/session.h\"\n#include \"tensorflow/core/protobuf/meta_graph.pb.h\"\n#include \"tensorflow/cc/client/client_session.h\"\n#include \"tensorflow/cc/ops/standard_ops.h\"\n#include \"tensorflow/core/framework/tensor.h\"\n\nusing namespace std;\nusing namespace tensorflow;\n\nclass DeepModel{\npublic:\n    DeepModel(const string graph_path, const string checkpoint_path);\n    virtual ~DeepModel();\n\n    bool onInit();\n    void unInit();\n    vector&lt;float&gt; predict(vector&lt;vector&lt;float&gt;&gt;&amp; x, string input_name, string output_name);\nprivate:\n    string graph_path;\n    string checkpoint_path;\n    MetaGraphDef graph_def;\n    Session* my_sess;\n};\n\n#endif\n</code></pre>\n\n<p>After this, I write a simple encapsulation code. I want to compile a .so, and use the .so without tensorflow source code in the future. And my encapsulation code is like below:</p>\n\n<pre><code>#ifndef _MODEL_HELPER_H_\n#define _MODEL_HELPER_H_\n\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass ModelHelper{\npublic:\n    ModelHelper(const string graph_path, const string checkpoint_path);\n    virtual ~ModelHelper();\n\n    vector&lt;float&gt; predict(vector&lt;vector&lt;float&gt; &gt;&amp; x, string input_name, string output_name);\nprivate:\n    string graph_path;\n    string checkpoint_path;\n};\n\n#endif\n</code></pre>\n\n<p>I have write code to test above code, it works well. Then I want to compile .so using bazel.</p>\n\n<p>My BUILD file is like below:</p>\n\n<pre><code>load(\"//tensorflow:tensorflow.bzl\", \"tf_cc_binary\")\n\ntf_cc_binary(\n    name = \"my_helper.so\",\n    srcs = [\"model_helper.cc\", \"model_helper.h\", \"deepmodel.cc\", \"deepmodel.h\"],\n    linkshared = 1,\n    deps = [\n        \"//tensorflow/cc:cc_ops\",\n        \"//tensorflow/cc:client_session\",\n        \"//tensorflow/core:tensorflow\"\n        ],\n)\n</code></pre>\n\n<p>then I rename model_helper.so to libmodel_helper.so, and write cpp code to test the .so file. And I want to compile the code, command is like this</p>\n\n<pre><code>g++ -std=c++11 test_so.cpp -L./ -lmy_helper -I./ -o my_helper\n</code></pre>\n\n<p><strong>Then I meet the error:</strong></p>\n\n<pre><code>.//libmy_helper.so: undefined reference to `stream_executor::cuda::ScopedActivateExecutorContext::~ScopedActivateExecutorContext()'\n.//libmy_helper.so: undefined reference to `stream_executor::cuda::ScopedActivateExecutorContext::ScopedActivateExecutorContext(stream_executor::StreamExecutor*)'\n.//libmy_helper.so: undefined reference to `tensorflow::DeviceName&lt;Eigen::GpuDevice&gt;::value[abi:cxx11]'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I really don't know why. I can't use the .so alone?</p>\n"}, {"tags": ["c++", "sockets", "terminal"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1545815592, "post_id": 53929036, "comment_id": 94700442, "body": "What about TCP? A TCP server socket would <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow noreferrer\">accept</a> normal TCP sockets, and you could forward data streams just as are from UART to socket(s?) and vice versa."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1545816013, "post_id": 53929036, "comment_id": 94700583, "body": "That&#39;s probably the solution."}], "owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545810406, "creation_date": 1545810406, "question_id": 53929036, "link": "https://stackoverflow.com/questions/53929036/c-terminal-server-for-existing-terminal-client-protocol", "title": "C++ terminal server for existing terminal client protocol", "body": "<p>I want to communicate with a C++ simulated UART which is communicating with a (simulated) guest Linux system terminal.</p>\n\n<p>What I have is a callback called when receiving character outputs from the UART, and a method I can call to send characters to this same UART.</p>\n\n<p>I'd like to be able to connect to this UART with my host terminal, implementing a server socket communicating using an existing protocol.</p>\n\n<p>What protocol should I use to keep a high compatibility? I'm thinking about telnet. Are there existing frameworks in C++ or C to implement that quick and easy?</p>\n"}, {"tags": ["c++", "c++11", "namespaces", "enum-class"], "comments": [{"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 6, "creation_date": 1545810927, "post_id": 53928978, "comment_id": 94699089, "body": "Why don&#39;t you just use an enum instead of an enum class? An enum class works like a class so <code>eDays</code> is not a namespace but a class name, and you just can&#39;t not mention the class name to use its static members."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1545812728, "creation_date": 1545812728, "answer_id": 53929394, "question_id": 53928978, "link": "https://stackoverflow.com/questions/53928978/c11-enum-class-namespace-block/53929394#53929394", "title": "C++11 enum class namespace block", "body": "<p>With enum classes, you cannot.</p>\n\n<p>As Benjamin Barrois put it, \"An enum class works like a class so <code>eDays</code> is not a namespace but a class name\"; <a href=\"https://en.cppreference.com/w/cpp/keyword/using\" rel=\"noreferrer\">using directives</a> may not apply.</p>\n\n<p>If you want to be able to write the following, there are other solutions.</p>\n\n<pre><code>std::vector&lt;eDays&gt; vec = { Monday, Tuesday, /*...*/  };\n</code></pre>\n\n<hr>\n\n<h3>Actual namespace + <code>enum</code></h3>\n\n<pre><code>namespace eDays\n{\n    enum t { Monday, Tuesday, /*...*/ };\n}\n</code></pre>\n\n<h3>Actual namespace + (static) constants</h3>\n\n<pre><code>namespace eDays\n{\n    static const int Monday  = 0;\n    static const int Tuesday = 1;\n    // ...\n}\n</code></pre>\n\n<hr>\n\n<p>Both will let you write:</p>\n\n<pre><code>{\n    using namespace eDays;\n    std::vector&lt;int&gt; vec = { Monday, Tuesday, /*...*/  }; // or &lt;t&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 666, "user_id": 1788702, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f03cebcc66a47a156a3bf0af1d13541?s=128&d=identicon&r=PG", "display_name": "igor", "link": "https://stackoverflow.com/users/1788702/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53929394, "answer_count": 1, "score": 0, "last_activity_date": 1545895956, "creation_date": 1545810083, "last_edit_date": 1545895956, "question_id": 53928978, "link": "https://stackoverflow.com/questions/53928978/c11-enum-class-namespace-block", "title": "C++11 enum class namespace block", "body": "<p>I have an <code>enum class</code> in C++11:</p>\n\n<pre><code>enum class eDays{ SUNDAY, MONDAY, /*...*/ };\n</code></pre>\n\n<p>The <code>enum class</code> sets the namespace for the values so it has to be used like:</p>\n\n<pre><code>eDays::SUNDAY\n</code></pre>\n\n<p>I want to set an namespace block so I won't need to specify the namespace each time something like:</p>\n\n<pre><code>namespace eDays {\n    vector&lt;eDays&gt; vec = { MONDAY, SUNDAY, /*...*/ };\n}\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>vector&lt;eDays&gt; vec = { eDays::MONDAY, eDays::SUNDAY, /*...*/ };\n</code></pre>\n\n<p>What am I missing? </p>\n"}, {"tags": ["c++", "qt", "qml", "qtstylesheets"], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "reply_to_user": {"reputation": 27, "user_id": 10834137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4feef1b202011ec0fe97f9dedb897bb?s=128&d=identicon&r=PG&f=1", "display_name": "   Denis Cutcher", "link": "https://stackoverflow.com/users/10834137/denis-cutcher"}, "edited": false, "score": 0, "creation_date": 1545811285, "post_id": 53929124, "comment_id": 94699189, "body": "@DenisCutcher Yes, they do."}], "tags": [], "owner": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1545811347, "last_edit_date": 1545811347, "creation_date": 1545810934, "answer_id": 53929124, "question_id": 53928885, "link": "https://stackoverflow.com/questions/53928885/what-are-qt-style-sheets-for-and-how-they-work/53929124#53929124", "title": "What are Qt style sheets for and how they work?", "body": "<p>In accordance with <a href=\"http://doc.qt.io/qt-5/qwidget.html#native-widgets-vs-alien-widgets\" rel=\"nofollow noreferrer\">Qt documentations</a> QWidgets are not system widgets  by default since Qt 4.4. They calls it <em>Alien Widgets</em>. So all widgets in modern Qt are rendered by Qt itself. Therefore they can be rendered with any style you want. </p>\n"}, {"tags": [], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "is_accepted": false, "score": 1, "last_activity_date": 1545820737, "creation_date": 1545820737, "answer_id": 53930877, "question_id": 53928885, "link": "https://stackoverflow.com/questions/53928885/what-are-qt-style-sheets-for-and-how-they-work/53930877#53930877", "title": "What are Qt style sheets for and how they work?", "body": "<p>And to answer your question 3: </p>\n\n<p>Have a look at <a href=\"https://wiki.qt.io/Qml_Styling\" rel=\"nofollow noreferrer\">https://wiki.qt.io/Qml_Styling</a> for setting QML styles. Basically, everything can be done with QML, no need for extra .qss style sheet as for Qt Widgets. </p>\n"}], "owner": {"reputation": 27, "user_id": 10834137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4feef1b202011ec0fe97f9dedb897bb?s=128&d=identicon&r=PG&f=1", "display_name": "   Denis Cutcher", "link": "https://stackoverflow.com/users/10834137/denis-cutcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1545820737, "creation_date": 1545809548, "last_edit_date": 1545813195, "question_id": 53928885, "link": "https://stackoverflow.com/questions/53928885/what-are-qt-style-sheets-for-and-how-they-work", "title": "What are Qt style sheets for and how they work?", "body": "<p>I know that there is Qt Widgets that works natively (a button is an OS button) and there is QtQuick/QML items that are rendered by Qt (a button is a shape rendered in OpenGL context). And now I see there are Qt Style Sheets that work with QPushButton and other types, so I'm a little bit confused:</p>\n\n<ol>\n<li><p>How to Qt Style Sheets work inside?</p></li>\n<li><p>How can they affect they way a native button is rendered?</p></li>\n<li><p>Do you need it at all when there's QML?</p></li>\n</ol>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "mysql", "mfc"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1545812116, "post_id": 53928792, "comment_id": 94699439, "body": "MSVC 6.0 - seriously? That&#39;s 20 years of age now, totally outdated (and was well-known for very poor standard conformance even then). You should really switch to a <a href=\"https://visualstudio.microsoft.com/downloads/\" rel=\"nofollow noreferrer\">more modern version</a>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1545812155, "post_id": 53928792, "comment_id": 94699459, "body": "Apart from, you should at provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Have a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> as well."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10819204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936d3ae195f6551063e564993030864?s=128&d=identicon&r=PG&f=1", "display_name": "K KIM", "link": "https://stackoverflow.com/users/10819204/k-kim"}, "edited": false, "score": 0, "creation_date": 1545868628, "post_id": 53930772, "comment_id": 94716662, "body": "thank you for your comment i try that and if i don&#39;t know that, i will ask later thank you!"}], "tags": [], "owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "is_accepted": true, "score": 0, "last_activity_date": 1545820514, "last_edit_date": 1545820514, "creation_date": 1545820163, "answer_id": 53930772, "question_id": 53928792, "link": "https://stackoverflow.com/questions/53928792/how-to-export-mysql-resultselect-data-in-mfc/53930772#53930772", "title": "How to export mysql result(select data) in MFC", "body": "<p>Here is an example, using MFC way (CString/CStringList, CArchive, etc.) :</p>\n\n<pre><code>    void PrintListCSV( CArchive &amp;archiveContent, CStringList &amp; strList, CString szSeparator ){\n\n            if( strList.IsEmpty() )\n                    return;\n\n            CString strOneRecord;\n\n            POSITION posTail = GetTailPosition();\n            POSITION pos;\n\n            for( pos = strList.GetHeadPosition(); pos != posTail; )\n            {\n                    CString str = strList.GetNext( pos );\n                    strOneRecord += str;\n                    strOneRecord += szSeparator;\n            }\n\n            strOneRecord += strList.GetNext( postTail );\n            strOneRecord += _T(\"\\r\\n\"); // windows change a line\n            archiveContent.WriteString(strOneRecord);\n    }\n\n\n    BOOL ExportCSV( CString strFileName, MYSQL_RES * mysql_res )\n    {\n            CFile filePersistent;\n            if( !filePersistent.Open( strFileName, CFile::modeCreate | CFile::modeWrite))\n            {\n                    //Error log, message box, etc.\n                    return FALSE;\n            }\n\n            CArchive archiveContent( &amp;filePersistent, CArchive::store);\n            CString strSeparator(_T(\";\"));\n\n            MYSQL_FIELD *field;\n\n            //print column name - optional \n            CStringList fieldList;\n            unsigned int num_fields = mysql_num_fields(mysql_res);\n\n            while((field = mysql_fetch_field(mysql_res)) != NULL )\n            {\n                    fieldList.AddTail( field-&gt;name );\n            }\n\n            PrintListCSV( archiveContent, fieldList, strSeparator );\n\n            //print each record set\n            while ((row = mysql_fetch_row(mysql_res)))\n            {\n                    CStringList recordList;\n                    for(i = 0; i &lt; num_fields; i++)\n                    {\n                            recordList.AddTail( row[i] ? row[i] : \"NULL\" );\n                    }\n\n                    PrintListCSV( archiveContent, recordList, strSeparator );\n            }\n\n            archiveContent.Close();\n            filePersistent.Close();\n\n            return TRUE;\n    }\n</code></pre>\n\n<p><strong>How to use:</strong></p>\n\n<pre><code>    //some where in your main function ...\n    //Open mysql connection, execute SQL commande ...\n    // ...\n\n    MYSQL_RES *m_res = mysql_store_result(&amp;mysql);\n    CString szFileName(\"C:\\\\SOME_PATH\\\\FILENAME.csv\");\n\n    if( !ExportCSV( szFileName, m_res ) ){\n            //Cannot export to CSV file ...\n            //Error message, log, etc.\n    }\n\n    //free the SQL result\n    mysql_free_result( m_res );\n\n    //...\n</code></pre>\n\n<p><strong>Warning:</strong> This code can contain compiler errors. Hope that my memory serves me right.</p>\n"}], "owner": {"reputation": 45, "user_id": 10819204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936d3ae195f6551063e564993030864?s=128&d=identicon&r=PG&f=1", "display_name": "K KIM", "link": "https://stackoverflow.com/users/10819204/k-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 53930772, "answer_count": 1, "score": 1, "last_activity_date": 1545820514, "creation_date": 1545809089, "last_edit_date": 1545812941, "question_id": 53928792, "link": "https://stackoverflow.com/questions/53928792/how-to-export-mysql-resultselect-data-in-mfc", "title": "How to export mysql result(select data) in MFC", "body": "<p>I export .csv after executing select query using MFC</p>\n\n<p>I use MFC via Visual C++ 6.0 and MySQL Server 5.X </p>\n\n<pre><code>MYSQL_RES m_res = mysql_store_result(&amp;mysql);\n</code></pre>\n\n<p>I don't know how to use m_res connecting exporting .csv</p>\n\n<p>Is it possible to export data?\nIf it is not, I will export data by .csv after displaying gridview.</p>\n"}, {"tags": ["c++", "arrays", "generics", "printing"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545821029, "post_id": 53928723, "comment_id": 94702415, "body": "Why do you think you would need to create a <code>Print</code> class that prints other things?   Rather than a function - or set of functions - that prints things?   Printing is an action, and an action does not need to be represented as an object."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1546012419, "post_id": 53928723, "comment_id": 94759664, "body": "Not trying to be rude, but if templates didn&#39;t immediately come to mind when asked this question then, before applying for another C++ job, I recommend reading a good book to get a better grasp on some of the basics of the language. Here&#39;s a list: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 336, "user_id": 10289212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936ca5a5253f75c7c9ac8035bd8de9d8?s=128&d=identicon&r=PG&f=1", "display_name": "prakasht", "link": "https://stackoverflow.com/users/10289212/prakasht"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1546344506, "post_id": 53928723, "comment_id": 94827931, "body": "@LightnessRacesinOrbit Thanks a lot! I was actually planning to do some online programming courses in the next six months to strengthen my concepts. But I feel lost in the vast number of options.:("}], "answers": [{"comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 2, "creation_date": 1545809204, "post_id": 53928785, "comment_id": 94698595, "body": "<code>std::begin(arr)</code>, <code>std::end(arr)</code> (or <code>std::array</code>) would have impressed me when used"}], "tags": [], "owner": {"reputation": 493, "user_id": 1438832, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8b417c263cd0c1d211ed896ba1cc94f1?s=128&d=identicon&r=PG", "display_name": "user1438832", "link": "https://stackoverflow.com/users/1438832/user1438832"}, "is_accepted": true, "score": 2, "last_activity_date": 1545809373, "last_edit_date": 1545809373, "creation_date": 1545809049, "answer_id": 53928785, "question_id": 53928723, "link": "https://stackoverflow.com/questions/53928723/write-a-generic-print-function-to-print-an-array/53928785#53928785", "title": "Write a generic print function to print an array", "body": "<p>You can use template function as,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\ntemplate &lt;class InputIterator&gt;\nvoid print(InputIterator start,InputIterator end)\n{\n    for(auto itr=start;itr!=end;++itr)\n    {\n        cout&lt;&lt;*itr&lt;&lt;\" \";\n    }\n    cout&lt;&lt;endl;\n}\n\nint main() {\n    int arr[]={1,2,3,4,5};\n    print(std::begin(arr),std::end(arr));\n    vector&lt;int&gt; in={1,2,6,7};\n    print(in.begin(),in.end());\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1545810690, "creation_date": 1545810690, "answer_id": 53929073, "question_id": 53928723, "link": "https://stackoverflow.com/questions/53928723/write-a-generic-print-function-to-print-an-array/53929073#53929073", "title": "Write a generic print function to print an array", "body": "<p>For 1, it looks like:</p>\n\n<pre><code>namespace printing {\n  template&lt;class T&gt;\n  void print(std::ostream&amp; os, T const&amp; t){\n    os&lt;&lt;t;\n  }\n  template&lt;class It&gt;\n  void print_range( std::ostream&amp; os, It b, It e );\n\n  template&lt;class T,std::size_t N&gt;\n  void print( std::ostream&amp; os, T const(&amp;arr)[N] ){\n    print_range(os, std::begin(arr), std::end(arr) );\n  }\n\n  template&lt;class T,std::size_t N&gt;\n  void print( std::ostream&amp; os, std::array&lt;T, N&gt; const&amp; arr ){\n    print_range(os, std::begin(arr), std::end(arr) );\n  }\n  template&lt;class T, class A&gt;\n  void print( std::ostream&amp; os, std::vector&lt;T, A&gt; const&amp; arr ){\n    print_range(os, std::begin(arr), std::end(arr) );\n  }\n  // etc\n\n  template&lt;class It&gt;\n  void print_range( std::ostream&amp; os, It b, It e ){\n    for(auto it=b; it!=e; ++it)\n      print(os, *it);\n  }\n}\n</code></pre>\n\n<p>now, to improve you add SFINAE detection of iterability instead of individual overloads.</p>\n\n<p>For 2, write SFINAE detection of a <code>.print(std::ostream&amp;)</code> method for both pointer and instance types (via decltype and <code>-&gt;</code> and <code>.</code>).  Then write  <code>print</code> overload that only works for <code>-&gt;print</code> and <code>.print</code>-able types, and have it be a better match than the <code>os&lt;&lt;t;</code> version, but worse than any <code>print</code> free function in the type's namespace.</p>\n\n<p>Doing it right takes a few dozen lines of boilerplate, and I'd want to test the overload order a few times in an actual compiler.  In the end <code>os&lt;&lt;t</code> function probably won't be called <code>print</code> or won't be in non-detail namespace.</p>\n"}], "owner": {"reputation": 336, "user_id": 10289212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936ca5a5253f75c7c9ac8035bd8de9d8?s=128&d=identicon&r=PG&f=1", "display_name": "prakasht", "link": "https://stackoverflow.com/users/10289212/prakasht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 53928785, "answer_count": 2, "score": 0, "last_activity_date": 1545810690, "creation_date": 1545808683, "question_id": 53928723, "link": "https://stackoverflow.com/questions/53928723/write-a-generic-print-function-to-print-an-array", "title": "Write a generic print function to print an array", "body": "<p>I want to ask two questions here:</p>\n\n<ol>\n<li>To make a <strong>generic print function</strong> which is capable of printing an array(or vector) of any datatype (eg. int, char, string etc.)</li>\n<li>To make a print function which takes input an <strong>array(or vector) of objects</strong> of a class and invokes the print function (already present in class definition) of that class to print contents of each object.</li>\n</ol>\n\n<p>I was asked this question in placement interview for Zillingo. The interviewer first asked me question 1 but after a very bad attempt of mine, he further complicated it and asked question 2.</p>\n\n<p>The solution I gave for question 1 was that I would make a <strong>Print</strong> class that has several functions by the name <em>print</em> but each takes an array of different datatype as an argument(one function for every existing datatype). I was completely blank after that.:(</p>\n"}, {"tags": ["c++", "visual-studio", "gcc", "linear-algebra", "eigen"], "comments": [{"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1545804175, "post_id": 53927920, "comment_id": 94697254, "body": "Where is the file Dense located (full path)? <code>C:\\Users\\aqils\\Documents\\C++\\Eigen\\Dense</code> or <code>C:\\Users\\aqils\\Documents\\C++\\Eigen\\Eigen\\Dense</code>?"}, {"owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1545817923, "post_id": 53927920, "comment_id": 94701294, "body": "Your include path looks incorrect.  Try just <code>g++ -I C:\\Users\\aqils\\Documents\\C++\\Eigen Matrixbasics.cpp -o Matrixbasics.exe</code>."}, {"owner": {"reputation": 1, "user_id": 10833681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8c79420c592d9d0e54a2fafea6a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aqil", "link": "https://stackoverflow.com/users/10833681/aqil"}, "edited": false, "score": 0, "creation_date": 1545837215, "post_id": 53927920, "comment_id": 94707818, "body": "Thanks for both responses.   1. The path for the Dense file is C:\\Users\\aqils\\Documents\\C++\\Eigen\\Dense    2. I have also tried     g++ -I C:\\Users\\aqils\\Documents\\C++\\Eigen Matrixbasics.cpp -o Matrixbasics.exe  but still get the same error i.e. &quot;Eigen/Dense: no such file or directory&quot;"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1545869307, "post_id": 53927920, "comment_id": 94716767, "body": "Since <code>Eigen&#47;Dense</code> is explicitly given in the code, you must only pass <code>-I C:\\Users\\aqils\\Documents\\C++</code> to <code>g++</code>."}, {"owner": {"reputation": 1, "user_id": 10833681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8c79420c592d9d0e54a2fafea6a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aqil", "link": "https://stackoverflow.com/users/10833681/aqil"}, "edited": false, "score": 0, "creation_date": 1545922787, "post_id": 53927920, "comment_id": 94732288, "body": "That works! I tried g++ -I C:\\Users\\aqils\\Documents\\C++ Matrixbasics.cpp -o Matrixbasics.exe and it worked. Alternatively, if I use  #include &lt;Dense&gt; and stick to  g++ -I C:\\Users\\aqils\\Documents\\C++\\Eigen Matrixbasics.cpp -o Matrixbasics.exe that also does the trick.  Thanks for all the help."}], "owner": {"reputation": 1, "user_id": 10833681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8c79420c592d9d0e54a2fafea6a6b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aqil", "link": "https://stackoverflow.com/users/10833681/aqil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 958, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545832351, "creation_date": 1545803212, "last_edit_date": 1545832351, "question_id": 53927920, "link": "https://stackoverflow.com/questions/53927920/getting-error-including-eigen-library-in-c", "title": "Getting error including eigen library in c++", "body": "<p>I am trying to use eigen for linear algebra but can't get it to include the eigen library. It keeps on giving me an error even though I am following all the instructions to include the eigen folder while compiling the program. I have tried this in both visual studio 2017 and the MinGW version of gcc. I am giving the relevant part of my code and what I am doing to include the Eigen library. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include     &lt;fstream&gt;  \nusing namespace std;\n\n#include &lt;Eigen/Dense&gt;\nusing Eigen::MatrixXd;\n\nint main()\n{\nMatrixXd m(2,2);\nm(0,0) = 3;\nm(1,0) = 2.5;\nm(0,1) = -1;\nm(1,1) = m(1,0) + m(0,1);\nstd::cout &lt;&lt; m &lt;&lt; std::endl;\n} \n</code></pre>\n\n<p>To run this in g++, I am using the command</p>\n\n<pre><code>g++ -I /C:\\Users\\aqils\\Documents\\C++\\Eigen/ Matrixbasics.cpp -o Matrixbasics.exe\n</code></pre>\n\n<p>Here C:\\Users\\aqils\\Documents\\C++\\Eigen\nis the path for the unzipped Eigen package.\nMatrixbasics.cpp is the name of the c++ file and it's located in the folder\nC:\\Users\\aqils\\Documents\\C++</p>\n\n<p>The error I get is\n\"Fatal error: Eigen/Dense: no such file or directory\"</p>\n\n<p>To run this in Visual Studio 2017, I have followed these steps to add a folder to a project:\n1. Right click on the project name in the solution explorer and hit properties\n2. Then look for c++ and find the option for adding a folder.\n3. Select the Eigen package folder in the tree view, hit ok and then apply.\n4. Run the program. It should now work.</p>\n\n<p>I have spent several frustrating days trying to make this work and have read all related questions on stack overflow as well as several other websites. The answers don't go beyond the above instructions which I am already following. Will be really grateful if someone can help me fix the problem. </p>\n"}, {"tags": ["android", "c++", "select", "android-room"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1545804875, "post_id": 53927649, "comment_id": 94697409, "body": "Show the relevant C++ code too."}, {"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1545808251, "post_id": 53927649, "comment_id": 94698316, "body": "@Shawn i have added c++ parts"}, {"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1545978909, "post_id": 53927649, "comment_id": 94747327, "body": "@yigit please se the above problem?"}], "owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545970496, "creation_date": 1545800901, "last_edit_date": 1545970496, "question_id": 53927649, "link": "https://stackoverflow.com/questions/53927649/why-room-select-query-is-not-working-via-c", "title": "Why Room select query is not working via c++?", "body": "<p>I create the database via Room and gave the path to C++ developers via JNI. All data are inserting from C++ side by using <code>sqlpp</code>, then i am executing SQL query and not getting fresh datas. If i kill app then start again, SQL query is returning all datas.</p>\n\n<pre><code>@Provides\n@Singleton\nLocalDatabase provideLocalDatabase(@DatabaseInfo String dbName, Context context) {\n    return Room.databaseBuilder(context, LocalDatabase.class, dbName)\n          .setJournalMode(RoomDatabase.JournalMode.WRITE_AHEAD_LOGGING)\n          .build();\n}\n</code></pre>\n\n<p>MessageDao</p>\n\n<pre><code>@Dao\npublic abstract class MessageDao implements BaseDao&lt;Message&gt; {\n\n    @Query(\"SELECT * FROM messages\")\n    public abstract Flowable&lt;Message&gt; getMessage();\n}\n</code></pre>\n\n<p>Sending db path to C++</p>\n\n<pre><code>String uiDbPath = MyApp.applicationContext.getDatabasePath(AppConstants.DB_NAME).getAbsolutePath();\nsend_db_path_to_c_plus_plus(uiDbPath);\n</code></pre>\n\n<p>We are using JournalMode.WRITE_AHEAD_LOGGING mode, after inserting data to database i am checking the database to make sure all data are exits. As a result i am seeing all data, but select query is not returning. How can i solve the issue please help? Thanks in advance.</p>\n\n<p><strong>EDIT 1</strong> C++ parts</p>\n\n<pre><code>int64_t insert(manager::db::connection &amp; conn, int64_t conv_id, int64_t author_id, const std::string &amp; data)\n{\n   auto conn_guard = manager::db::make_connection_guard(conn);\n   {\n       LOG_TRACE(\"db::insert(in_msg) - BEGIN conv_id={0} author_id={1}\", conv_id, author_id);\n\n   const auto tab_in_msg = manager::db::tables::InMsgs{};\n\n   auto tx = start_transaction(conn_guard.native());\n   conn_guard.native()(insert_into(tab_in_msg).set(tab_in_msg.conversationId = conv_id, tab_in_msg.authorId = author_id, tab_in_msg.data = data));\n   int64_t rowid = conn_guard.native().last_insert_id();\n   tx.commit();\n\n   LOG_TRACE(\"db::insert(in_msg) - END rowid={0}\", rowid);\n   return rowid;\n   }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 91, "user_id": 4646963, "user_type": "registered", "profile_image": "https://graph.facebook.com/656181874509580/picture?type=large", "display_name": "Taeyeong Jeong", "link": "https://stackoverflow.com/users/4646963/taeyeong-jeong"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545800802, "post_id": 53927571, "comment_id": 94696554, "body": "What I expect is just unique container of pointers, so comparing raw address is enough for me. I know I can use std::unordered_map for that, but anyway I should add hash function in that case"}, {"owner": {"reputation": 91, "user_id": 4646963, "user_type": "registered", "profile_image": "https://graph.facebook.com/656181874509580/picture?type=large", "display_name": "Taeyeong Jeong", "link": "https://stackoverflow.com/users/4646963/taeyeong-jeong"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545800956, "post_id": 53927571, "comment_id": 94696579, "body": "Yes. I think answer below solved my problem"}], "answers": [{"comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1545800736, "post_id": 53927594, "comment_id": 94696539, "body": "I was wondering why <code>&lt;</code> cannot compare pointers to elements to different arrays. Why can&#39;t it just compare the memory address like <code>std::less</code>"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1545800950, "post_id": 53927594, "comment_id": 94696576, "body": "@GauravSehgal If I had to guess, I&#39;d suspect it has something to do with <a href=\"https://en.wikipedia.org/wiki/Memory_segmentation\" rel=\"nofollow noreferrer\">segmented memory</a> architectures that were prevalent at the time C++ was being standardized."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1545800963, "post_id": 53927594, "comment_id": 94696583, "body": "@GauravSehgal different objects could have different storage and address schemes."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 10, "last_activity_date": 1545800421, "creation_date": 1545800421, "answer_id": 53927594, "question_id": 53927571, "link": "https://stackoverflow.com/questions/53927571/is-is-valid-to-construct-stdset-of-pointer-type/53927594#53927594", "title": "Is is valid to construct std::set of pointer type?", "body": "<p>While it is true that built-in operator <code>&lt;</code> only works for pointers into the same array, <code>std::set</code> and <code>std::map</code> don't use that operator - they use <code>std::less</code>. This, in turn, is guaranteed to impose a total order on all pointers:</p>\n\n<blockquote>\n  <p><strong>[comparisons]/2</strong> For templates <code>less</code>, <code>greater</code>, <code>less_equal</code>, and <code>greater_equal</code>, the specializations for any pointer type yield a strict total order that is consistent among those specializations and is also consistent with the partial order imposed by the built-in operators <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 91, "user_id": 4646963, "user_type": "registered", "profile_image": "https://graph.facebook.com/656181874509580/picture?type=large", "display_name": "Taeyeong Jeong", "link": "https://stackoverflow.com/users/4646963/taeyeong-jeong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 53927594, "answer_count": 1, "score": 6, "last_activity_date": 1545800663, "creation_date": 1545800107, "last_edit_date": 1545800663, "question_id": 53927571, "link": "https://stackoverflow.com/questions/53927571/is-is-valid-to-construct-stdset-of-pointer-type", "title": "Is is valid to construct std::set of pointer type?", "body": "<p>I want to store some pointers into std::set, but the standard guide says it's invalid.</p>\n\n<blockquote>\n  <p>If two pointers p and q of the same type point to different objects that are > not members of the same object or elements of the same array or to different > functions, or if only one of them is null, the results of pq, p&lt;=q, and  > p>=q are unspecified.</p>\n</blockquote>\n\n<p>It seems the &lt;, > operators are not supported by naive pointer type, as below.</p>\n\n<pre><code>Object * a = new Object;\nObject * b = new Object;\na == b; // valid\na &lt; b; //invalid\nObject * arr = new Object[10];\n&amp;arr[3] == &amp;arr[4]; // valid\n&amp;arr[3] &lt; &amp;arr[4]; // valid\n</code></pre>\n\n<p>How can I put pointers into std::set or key of std::map? Should I define some  comparison-supporting wrapper </p>\n\n<p><em>Edit 1</em></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1418068/what-are-the-operations-supported-by-raw-pointer-and-function-pointer-in-c-c/1418152#1418152\">Some other questions</a> say that even though &lt;, > are not directly supported by C++ pointers, std::less works fine with pure pointers(without any extra information). But I can't find any reference for that.</p>\n"}, {"tags": ["python", "c++", "proto"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10833611, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5D5BzOVY2EQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZv6puTqW7AthOgaSo6VPkwOPB02A/mo/photo.jpg?sz=128", "display_name": "zhihao xu", "link": "https://stackoverflow.com/users/10833611/zhihao-xu"}, "is_accepted": false, "score": 1, "last_activity_date": 1545806606, "creation_date": 1545806606, "answer_id": 53928362, "question_id": 53927308, "link": "https://stackoverflow.com/questions/53927308/how-to-write-text-for-a-protobuf-file-which-with-include-other-protobuf/53928362#53928362", "title": "how to write text for a protobuf file which with include other protobuf", "body": "<p>i figure it out</p>\n\n<p>in your python code</p>\n\n<pre><code>fc = open('params_common.txt', 'r')\nf = open('test.txt', 'r')\nconfig = text_format.Parse(f.read()+fc.read(), test_config)\n</code></pre>\n\n<p>in <code>test.txt</code></p>\n\n<pre><code>enable: true\n</code></pre>\n\n<p>in <code>params_common.txt</code></p>\n\n<pre><code>common {\nelement : 2\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10833611, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5D5BzOVY2EQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZv6puTqW7AthOgaSo6VPkwOPB02A/mo/photo.jpg?sz=128", "display_name": "zhihao xu", "link": "https://stackoverflow.com/users/10833611/zhihao-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545806674, "creation_date": 1545797140, "last_edit_date": 1545806674, "question_id": 53927308, "link": "https://stackoverflow.com/questions/53927308/how-to-write-text-for-a-protobuf-file-which-with-include-other-protobuf", "title": "how to write text for a protobuf file which with include other protobuf", "body": "<p>i'm new to protobuf, and i'm trying to write a <code>.proto</code> file with initial parameters parse reading from text files.</p>\n\n<p>here is my test.proto</p>\n\n<pre><code>syntax = \"proto2\";\nimport \"params_common.proto\";\nmessage TestConfig {\n    required bool enable = 1 [default = true];\n    required common.Common common = 2;\n}\n</code></pre>\n\n<p>then, i cannot figure out how to write <code>test.text</code> files for the param <code>common</code> </p>\n\n<p>the <code>text_format.Parse</code> seems like could not support input several text at once</p>\n\n<p>here is <code>params_common.common</code></p>\n\n<pre><code>syntax = \"proto2\";\npackage common;\nmessage Common {\n    required int element = 1 [default = 1];\n}\n</code></pre>\n\n<p>thanks advance</p>\n"}, {"tags": ["c++", "regex", "macos"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1545795198, "post_id": 53927158, "comment_id": 94695814, "body": "<code>memset(pattern, 0, sizeof(regex) * 2);</code> -- Why are you doing this?  You don&#39;t initialize objects this way (C++ is not C).  Also, the declaration of the <code>regex</code> array already default initializes those two elements.  Remove that line and try again."}, {"owner": {"reputation": 491, "user_id": 3759377, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3gAWy.jpg?s=128&g=1", "display_name": "partida", "link": "https://stackoverflow.com/users/3759377/partida"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545795381, "post_id": 53927158, "comment_id": 94695833, "body": "@PaulMcKenzie Oh yes, delete this line it can print the result."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 3, "last_activity_date": 1545795792, "last_edit_date": 1545795792, "creation_date": 1545795468, "answer_id": 53927184, "question_id": 53927158, "link": "https://stackoverflow.com/questions/53927158/simple-c-regex-got-run-time-error-in-osx-but-windows/53927184#53927184", "title": "simple C++ regex got run-time error in OSX but windows", "body": "<p>This line:</p>\n\n<p><code>memset(pattern, 0, sizeof(regex) * 2);</code></p>\n\n<p>corrupts each of the <code>regex</code> objects in the <code>pattern</code> array.  </p>\n\n<p>Do not use <code>memset</code> to initialize non-POD objects such as <code>regex</code>.  Using <code>memset</code> here leads to <em>undefined behavior</em>.  </p>\n\n<p>The simplest solution is to just remove that line.  The array itself automatically default initializes the <code>regex</code> entries, so there is no need to (faultily) attempt to \"zero-initialize\" a <code>regex</code> object.</p>\n"}], "owner": {"reputation": 491, "user_id": 3759377, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3gAWy.jpg?s=128&g=1", "display_name": "partida", "link": "https://stackoverflow.com/users/3759377/partida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 53927184, "answer_count": 1, "score": 0, "last_activity_date": 1545796108, "creation_date": 1545795049, "last_edit_date": 1545796108, "question_id": 53927158, "link": "https://stackoverflow.com/questions/53927158/simple-c-regex-got-run-time-error-in-osx-but-windows", "title": "simple C++ regex got run-time error in OSX but windows", "body": "<p>This is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\nusing namespace std;\n\nint main() \n{\n    string str = \"hello_2019\";\n    regex pattern[2];\n    memset(pattern, 0, sizeof(regex) * 2);\n    pattern[0] = regex(\".*_\\\\d+\");\n    pattern[1] = regex(\"[a-z]+_.*\");\n    for (int i = 0; i &lt; 2; i++)\n        cout &lt;&lt; regex_match(str, pattern[i]) &lt;&lt; endl;\n    return 1;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kyPjy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kyPjy.png\" alt=\"enter image description here\"></a></p>\n\n<p>But same code in OSX can't run:</p>\n\n<p><a href=\"https://i.stack.imgur.com/e49J9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e49J9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Even using g++ can compile it, it results the run-time error.</p>\n\n<pre><code>g++ main.cpp\n./a.out\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://i.stack.imgur.com/kyPjy.png\" rel=\"nofollow noreferrer\">1</a>    11669 segmentation fault  ./a.out</p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1545796757, "post_id": 53927136, "comment_id": 94695972, "body": "Apart from typos (<code>Derived</code> constructor not being properly defined, missing <code>;</code>, etc), the problem is because <code>std::unique_ptr</code> has an explicitly <code>delete</code>d copy constructor, and the offending error is because of an attempt to copy construct a <code>std::unique_ptr&lt;Data&gt;</code>.    Without knowing WHY you expect copy constructing a <code>std::unique_ptr</code> to work - since by design it does not - nobody can really help you."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1545797972, "post_id": 53927136, "comment_id": 94696125, "body": "Your program boils down to <code>std::unique_ptr&lt;Data&gt; data; auto derived = data;</code> The failure has nothing to do with <code>static_unique_ptr_cast</code>. After fixing numerous obvious typos, <a href=\"https://ideone.com/W6Ds0p\" rel=\"nofollow noreferrer\">this code compiles</a>"}, {"owner": {"reputation": 368, "user_id": 7493225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e371dea6eb4a6932864dbb51f287e362?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/7493225/foo"}, "edited": false, "score": 0, "creation_date": 1545798342, "post_id": 53927136, "comment_id": 94696187, "body": "@ Igor Tandetnik Thank you. I see."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1545799820, "creation_date": 1545799820, "answer_id": 53927544, "question_id": 53927136, "link": "https://stackoverflow.com/questions/53927136/downcasting-unique-ptrbase-to-unique-ptrderived-with-unique-ptrdata-in-d/53927544#53927544", "title": "\u201cDowncasting\u201d unique_ptr&lt;Base&gt; to unique_ptr&lt;Derived&gt; with unique_ptr&lt;Data&gt; in Derived", "body": "<p>The online documentation states this about <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>unique_ptr</code></a>:</p>\n\n<blockquote>\n  <p>The class satisfies the requirements of MoveConstructible and MoveAssignable, but not the requirements of either CopyConstructible or CopyAssignable.</p>\n</blockquote>\n\n<p>So you cannot copy construct or copy assign a <code>unique_ptr</code> as you are trying to do in the line:</p>\n\n<pre><code>auto derived = static_unique_ptr_cast&lt;Derived&gt;(std::move(base))-&gt;data; // compile error\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 7493225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e371dea6eb4a6932864dbb51f287e362?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/7493225/foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1545799820, "creation_date": 1545794770, "last_edit_date": 1545799352, "question_id": 53927136, "link": "https://stackoverflow.com/questions/53927136/downcasting-unique-ptrbase-to-unique-ptrderived-with-unique-ptrdata-in-d", "title": "\u201cDowncasting\u201d unique_ptr&lt;Base&gt; to unique_ptr&lt;Derived&gt; with unique_ptr&lt;Data&gt; in Derived", "body": "<p><a href=\"https://stackoverflow.com/questions/21174593/downcasting-unique-ptrbase-to-unique-ptrderived\">\u201cDowncasting\u201d unique_ptr&lt; Base > to unique_ptr&lt; Derived ></a> offer an elegent solution to downcasting unique_ptr. It works in most of time. But when the Derived contains unique_ptr, something go wrong:</p>\n\n<pre><code>template&lt;typename Derived, typename Base, typename Del&gt;\nstd::unique_ptr&lt;Derived, Del&gt; \nstatic_unique_ptr_cast( std::unique_ptr&lt;Base, Del&gt;&amp;&amp; p )\n{\n    auto d = static_cast&lt;Derived *&gt;(p.release());\n    return std::unique_ptr&lt;Derived, Del&gt;(d, std::move(p.get_deleter()));\n} \n\nstruct Data\n{\n   int data;\n};\n\nstruct Base\n{\n};\n\nstruct Derived : public Base\n{\n    Derived() \n        : data(std::make_unique&lt;Data&gt;())\n\n    std::unique_ptr&lt;Data&gt; data;\n};\n\nint main()\n{\n    std::unique_ptr&lt;Base&gt; base = std::make_unique&lt;Derived&gt;();\n\n    auto data = static_unique_ptr_case&lt;Derived&gt;(std::move(base))-&gt;data; // compile error\n\n    return 0;\n}\n</code></pre>\n\n<p>Is there a better way to fix the problem?</p>\n\n<p><strong>Eidt:</strong></p>\n\n<p>fix the typos and</p>\n\n<p><strong>@Igor Tandetnik</strong> give a solution</p>\n\n<pre><code>std::unique_ptr&lt;Base&gt; base = std::make_unique&lt;Derived&gt;();\n\n//auto&amp; data = static_unique_ptr_case&lt;Derived&gt;(std::move(base))-&gt;data; // compile error\n\nauto derived = static_unique_ptr_case&lt;Derived&gt;(std::move(base));\n\nauto&amp; data = derived-&gt;data;\n\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "graphics", "c++builder", "magnification"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1547552482, "post_id": 53927122, "comment_id": 95222945, "body": "Mmm, this deals specifically with Embarcadero&#39;s C++, huh? Might be hard to find people who can work with this."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1547553281, "post_id": 53927122, "comment_id": 95223347, "body": "@BartekBanachewicz some of us here are still active in BCB/BDS/etc....  builder (even professionally) related questions tend to get good answers quite fast in comparison to other tags I scan... This one was wrongly tagged that is why no answers where here... I only found this due to duplication with <a href=\"https://stackoverflow.com/q/54185017/2521214\">stackoverflow.com/q/54185017/2521214</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1547636465, "post_id": 53927122, "comment_id": 95256776, "body": "You can write the magnification your self in the same way I did the Blending in your other question you just implement nearest neighbor (fastest) or bilinear filtering or higher order polynomial ..."}, {"owner": {"reputation": 35, "user_id": 7700685, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ec5fd665e8bfe2bc4e3c3f39ec379237?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/7700685/jim"}, "edited": false, "score": 0, "creation_date": 1547698073, "post_id": 53927122, "comment_id": 95283130, "body": "There is some confusion regarding these questions...  Note the date...  I resolved most of this stuff a while ago...  The Scanline does solve the problem when implemented correctly but I really don&#39;t yet understand how to use it...  The use of pointers and certain types, structs and so on are outside my experience...  I have been doing C for about a year on and off...  I also have limited time and when something looks like Chinese to me I tend to move on to something I know until I have a lot of time to play with."}], "owner": {"reputation": 35, "user_id": 7700685, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ec5fd665e8bfe2bc4e3c3f39ec379237?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/7700685/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1547544401, "creation_date": 1545794611, "last_edit_date": 1547544401, "question_id": 53927122, "link": "https://stackoverflow.com/questions/53927122/speeding-up-drawing-bitmap-magnification-within-second-bitmap-with-blend", "title": "Speeding up drawing bitmap magnification within second bitmap with blend", "body": "<p>The following code stretches a bitmap, blends it with an existing background, maintains transparent area of primary graphic and then displays the blend within a window (imgScreen).  This works fine when the level of stretch is not large or when it is actually shrinking the initial bitmap. However when stretching the graphic it is very slow.  </p>\n\n<p>I have limited experience with C++ and this kind of graphics so perhaps there is another more efficient way to do this.  The primary bitmap to be sized is always square.  Any ideas are much appreciated..!  </p>\n\n<p>I was going to try not displaying clipping area but from tests it seems the initial stretch is causing the slowdown... Also having trouble seeing how to calculate non clipped area...  Drawing to controls seems a waste but seems only way to use built in functions like stretchdraw and the alpha draw option.</p>\n\n<pre><code>std::auto_ptr&lt;Graphics::TBitmap&gt; bmap(new Graphics::TBitmap);\nstd::auto_ptr&lt;Graphics::TBitmap&gt; bmap1(new Graphics::TBitmap);\n\nint s = newsize;\nTRect sR = Rect(X,Y,X+s,Y+s);\nTRect tR = Rect(0,0,s,s); \nbmap-&gt;SetSize(s,s);\nbmap-&gt;Canvas-&gt;StretchDraw(Rect(0, 0, s, s), Form1-&gt;Image4-&gt;Picture- \n&gt;Bitmap); // scale\nbmap1-&gt;SetSize(s,s);\nbmap1-&gt;Canvas-&gt;CopyRect(tR, Form1-&gt;imgScreen-&gt;Canvas, sR);  //background\nbmap1-&gt;Canvas-&gt;Draw(0,0,bmap.get()); // combine\nForm1-&gt;imgTemp-&gt;Picture-&gt;Assign(bmap1.get());\nForm1-&gt;imgScreen-&gt;Canvas-&gt;Draw(X,Y, Form1-&gt;imgTemp-&gt;Picture-&gt;Bitmap, \nalpha);\n</code></pre>\n\n<p>Displays correctly but as graphic gets larger draw rate slows down quickly...</p>\n"}, {"tags": ["c++", "compiler-errors", "g++", "hazelcast"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 9408111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyEIx.png?s=128&g=1", "display_name": "sheucm", "link": "https://stackoverflow.com/users/9408111/sheucm"}, "edited": false, "score": 0, "creation_date": 1545901296, "post_id": 53942224, "comment_id": 94723529, "body": "<code>OS</code>: Arch Linux 4.18.12 64bit   <code>Hazelcast C++ Client version</code>: 3.10.1"}], "tags": [], "owner": {"reputation": 92, "user_id": 5004083, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9rAy8I83yXU/AAAAAAAAAAI/AAAAAAAAGC4/l7d9AjtEfr4/photo.jpg?sz=128", "display_name": "ihsan demir", "link": "https://stackoverflow.com/users/5004083/ihsan-demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1545900720, "creation_date": 1545900720, "answer_id": 53942224, "question_id": 53927110, "link": "https://stackoverflow.com/questions/53927110/how-can-i-compile-hazelcast-c-client-with-the-compiler-g-8-2/53942224#53942224", "title": "How can I compile Hazelcast C++ Client with the compiler g++-8.2", "body": "<p>Thanks for reporting this problem. We did not test with the g++-8.2 compiler. I opened an issue to solve the problems: <a href=\"https://github.com/hazelcast/hazelcast-cpp-client/issues/494\" rel=\"nofollow noreferrer\">https://github.com/hazelcast/hazelcast-cpp-client/issues/494</a></p>\n\n<p>Can you tell me also your OS environment? What distribution and version is it?</p>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 9408111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyEIx.png?s=128&g=1", "display_name": "sheucm", "link": "https://stackoverflow.com/users/9408111/sheucm"}, "is_accepted": true, "score": 1, "last_activity_date": 1545979357, "last_edit_date": 1545979357, "creation_date": 1545977796, "answer_id": 53954434, "question_id": 53927110, "link": "https://stackoverflow.com/questions/53927110/how-can-i-compile-hazelcast-c-client-with-the-compiler-g-8-2/53954434#53954434", "title": "How can I compile Hazelcast C++ Client with the compiler g++-8.2", "body": "<p>I finally solved it by upgrading the library from 3.10 to 3.11.\nThe 3.11 library is built manually using <code>g++-8.2</code> from <a href=\"https://github.com/hazelcast/hazelcast-cpp-client#table-of-contents\" rel=\"nofollow noreferrer\">Hazelcast source code</a>  in Github.</p>\n\n<p>Because there is no <code>make install</code> after building <em>hazelcast-cpp-clienet</em> package, so I use some scripts to arrange header files together in one directory (<code>hazelcast-cpp-client/include</code>) so that a program can easily link the library and headers.</p>\n\n<p>Build script:</p>\n\n<pre><code>#!/bin/bash\n\n# Package Requirements:\n#   - asio\n\nmkdir hazelcast-cpp-client ; cd hazelcast-cpp-client\n\n# Build\ngit clone https://github.com/hazelcast/hazelcast-cpp-client.git\nmv hazelcast-cpp-client tmp\ncd tmp\ngit checkout v3.11\nmkdir release ; cd release\ncmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_BUILD_TYPE=Release ..\nmake\n\n\n# Back to 'hazelcast-cpp-client' directory\ncd ../..\n\n# Copy .a library out from tmp/\ncp tmp/release/*.a .\n\n# Arrange all header files in an one directory  \ncp -r tmp/hazelcast/include .\ncp -r tmp/hazelcast/generated-sources/include/hazelcast/client/protocol ./include/hazelcast/client\nrm tmp/external/include/*.md # We don't need readme file\ncp -r tmp/external/include/* ./include\n\n# Delete tmp directory\nrm -rf tmp\n</code></pre>\n\n<p>Compilation command is like: </p>\n\n<pre><code>g++ -std=c++11 \\\n    -I/path/to/hazelcast-cpp-client/include \\\n    hz_test.cpp \\\n    /path/to/hazelcast-cpp-client/libHazelcastClient3.11_64.a \\\n    -lpthread\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 9408111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyEIx.png?s=128&g=1", "display_name": "sheucm", "link": "https://stackoverflow.com/users/9408111/sheucm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 53954434, "answer_count": 2, "score": 0, "last_activity_date": 1545979357, "creation_date": 1545794466, "last_edit_date": 1545977674, "question_id": 53927110, "link": "https://stackoverflow.com/questions/53927110/how-can-i-compile-hazelcast-c-client-with-the-compiler-g-8-2", "title": "How can I compile Hazelcast C++ Client with the compiler g++-8.2", "body": "<p>Is there any solution to make compilation with <code>g++-8.2</code> for the project using <a href=\"https://hazelcast.org/clients/cplusplus/\" rel=\"nofollow noreferrer\"><em>Hazelcast C++ client library</em></a> ?</p>\n\n<p>If I compile it with <em>g++-8.2</em>, it shows a lot of errors \"undefined reference ...\". </p>\n\n<p>While using <em>g++-4.9</em>, it works well. </p>\n\n<p>The issue is a bit like the discussion in this <a href=\"https://groups.google.com/forum/#!searchin/hazelcast/undefined%7Csort:date/hazelcast/6kYc_mQGQwA/SL8TmR1RaD0J\" rel=\"nofollow noreferrer\">google group forum</a>, which indicated the compilation errors are because of the wrong version of a compiler.</p>\n\n<p>However, the compiler <em>g++-4.9</em> is too old for me to build my big project. </p>\n\n<p>The sample code can be found in the <a href=\"https://hazelcast.org/\" rel=\"nofollow noreferrer\">official org website</a>, if someone needs to give it a try.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1545793719, "post_id": 53927034, "comment_id": 94695634, "body": "Make the move operations <code>noexcept</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545793912, "post_id": 53927034, "comment_id": 94695652, "body": "Are you running an optimized build, or a &quot;debug&quot;, unoptimized build?  What compiler options did you use to build the code?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1545793913, "post_id": 53927034, "comment_id": 94695653, "body": "Try with <a href=\"https://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>std::vector::reserve</code></a>."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1545793922, "post_id": 53927034, "comment_id": 94695657, "body": "A vector will make copies when it has to reallocate its internal storage, which should happen less often as it gets bigger. How big did you let it go before you reached your conclusion?"}, {"owner": {"reputation": 29, "user_id": 10809754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8724014ce47f8e20bbf84a1934545dd?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/10809754/charles"}, "edited": false, "score": 0, "creation_date": 1545802292, "post_id": 53927034, "comment_id": 94696841, "body": "Thanks everyone. I got the points! I think I need to study the STL more precisely."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 6, "last_activity_date": 1545793929, "creation_date": 1545793929, "answer_id": 53927068, "question_id": 53927034, "link": "https://stackoverflow.com/questions/53927034/c-11-stdvector-push-back-method-calls-copy-dest-so-many-times/53927068#53927068", "title": "C++ 11 std::vector push_back method calls copy/dest so many times?", "body": "<p>Not resorts, but reallocates. A vector is required, by contract, to store its values contiguously, like a plain array. The only way to guarantee contiguous storage is to allocate one chunk of memory. Once you got it, you're done. You can't make it bigger. All you can do is allocate a larger chunk and copy everything over and then delete the older smaller block of memory. That's what you're seeing.</p>\n\n<p>A vector typically reserves some additional extra space, to accomodate new elements that might get added (so that this copying doesn't happen with every push_back), but when the vector is small, initially, only a little bit of extra space gets reserved for future growth, and this reallocation still happens quite often. But as the vector grows in size, more and more extra space gets reserved, and the reallocation happens less often.</p>\n\n<p>If you know in advance how much values you are going to <code>push_back</code>(), you can use <code>reserve()</code> up front to preallocate the additional space up front, and minimize the reallocation.</p>\n\n<p>If you know you're going to add ten more values to the vector:</p>\n\n<pre><code>vec.reserve(vec.size()+10);\n</code></pre>\n\n<p>If the vector already has at least ten more values it can accept without reallocating, then this does nothing. Otherwise the vector gets reallocated with enough extra space for at least ten additional values. The next ten push_backs are guaranteed not to cause reallocation.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1545800164, "creation_date": 1545800164, "answer_id": 53927575, "question_id": 53927034, "link": "https://stackoverflow.com/questions/53927034/c-11-stdvector-push-back-method-calls-copy-dest-so-many-times/53927575#53927575", "title": "C++ 11 std::vector push_back method calls copy/dest so many times?", "body": "<p>You need to make your move ctor <code>noexcept(false)</code>; otherwise in many cases it cannot safely be used.</p>\n\n<p>Imagine having a vector of 10 elements in a buffer that fits 10.  We resize it to fit 15, and move the first 3 of them.</p>\n\n<p>Moving the 4th throws.  How are we supposed to return the vector to a sane state?</p>\n\n<p>Instead, the C++ standard demands that throwing move not be used, and it copies the 10 elements to the new buffer.  When that succeeds, it can then destroy the old buffer.</p>\n\n<p>With noexcept move, it can without fail move the 10 elements to the new buffer.</p>\n"}], "owner": {"reputation": 29, "user_id": 10809754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8724014ce47f8e20bbf84a1934545dd?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/10809754/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1545800164, "creation_date": 1545793470, "question_id": 53927034, "link": "https://stackoverflow.com/questions/53927034/c-11-stdvector-push-back-method-calls-copy-dest-so-many-times", "title": "C++ 11 std::vector push_back method calls copy/dest so many times?", "body": "<p>I am currently optimising my code and I have a question regarding the std::vector</p>\n\n<p>I have a class MyClass which I have rewritten the copy/move constructor and their corresponding operators. </p>\n\n<pre><code>MyClass(const std::string&amp; id, int x);\nMyClass(const MyClass&amp; other);\nMyClass(MyClass&amp;&amp; other);\n~MyClass();\nMyClass&amp; operator=(const MyClass&amp; other);\nMyClass&amp; opratror*(MyClass&amp;&amp; other);\n</code></pre>\n\n<p>I created a vector and tried the following</p>\n\n<pre><code>std::vector&lt;MyClass&gt; vec;\nMyClass a(\"A\", 1);\nvec.push_back(a);    //#1\nvec.emplace_back(\"B\", 2);    //#2\nvec.push_back(MyClass(\"C\", 3));    //#3\n</code></pre>\n\n<p>in #1 the copy constructor is called (which I know vector store by values so it copies a)\nin #2 it saves a copy constructor call only calls the constructor\nin #3 it calls the constructor and move constructor</p>\n\n<p>But what I found is that, at #2, #3 where the vector is not empty, every push back / emplace / emplace_back triggers the copy/destroy of existing items.</p>\n\n<p>in #2, it copies \"A\" and destroyed the existing \"A\"\nin #3, it does the same to \"A\" and \"B\"</p>\n\n<p>it seems the vector resorts all the items whenever the array changes.\nDoes it mean that using a class vector could make things inefficient?\nIs that the best solution to use a vector storing pointers so that there's not copies / destructors calls during resorting, only pointer copying?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "gdb", "opencl"], "comments": [{"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 2, "creation_date": 1545803152, "post_id": 53926749, "comment_id": 94697006, "body": "Well, according to the stack trace your problem is in the portion of your code which was omitted &quot;for brevity&quot;, specifically the function <code>CreateProgramFromBinary</code>. In addition you&#39;re passing a <i>global work size</i> of 0 (<code>cl::NullRange</code>), so even if compilation worked your kernel wouldn&#39;t actually run. OpenCL provides a fairly robust error reporting mechanism, using which you can even retrieve the output log - including warnings and errors - from runtime compilation. In general, and <i>particularly</i> when tracking a failure, error values should be checked for every OpenCL operation."}, {"owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "reply_to_user": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545860335, "post_id": 53926749, "comment_id": 94714874, "body": "@pandorafalters my mistake, I thought I included that portion. I just added it  Also, I was playing with changing various variables. Just updated to give it a global work size of 10 and local work size of 2. Also included the line on which it does fail and the function. I think I do check for compilation errors but maybe I&#39;m not doing it correctly?"}, {"owner": {"reputation": 336, "user_id": 6253527, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VZ7EvbSCdoM/AAAAAAAAAAI/AAAAAAAAAFQ/kHvxW2qWYLA/photo.jpg?sz=128", "display_name": "Arthur Moraes Do Lago", "link": "https://stackoverflow.com/users/6253527/arthur-moraes-do-lago"}, "edited": false, "score": 2, "creation_date": 1545860562, "post_id": 53926749, "comment_id": 94714941, "body": "A program that segfaults and when run under gdb runs normally, usually is due to uninitialized variables or race conditions. I would recommend first, compiling your program with -g3 to get lines that problems occurred. second, use Valgrind and check for errors. Valgrind will tell if any memory address is used without being set. third, if Valgrind still leaves you with doubts, you can use Valgrind gdb server to stop the program when a memory error occurs and debug it."}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545860928, "post_id": 53926749, "comment_id": 94715070, "body": "@cjds Are you perhaps calling the wrong function? You&#39;ve added (twice) <code>CreateBinaryFromProgram</code> which appears to do what you <i>want</i>, but still not <code>CreateProgramFromBinary</code> where your error originates."}, {"owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "reply_to_user": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545864331, "post_id": 53926749, "comment_id": 94715868, "body": "@pandorafalters I&#39;m an idiot. Copypasta&#39;d the wrong thing. Re-copied the right one"}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545883484, "post_id": 53926749, "comment_id": 94718757, "body": "On a further note, the vector returned from <code>cl::Program::getInfo&lt;CL_PROGRAM_BINARIES&gt;</code> is <i>also</i> filled with dynamically-allocated memory. You&#39;ll need to iterate over that vector to <code>delete[]</code> each element to avoid another memory leak. For such reasons I tend to avoid OpenCL&#39;s C++ interface. The OpenCL 2.0 version uses <code>vector&lt;vector&lt;unsigned char&gt;&gt;</code> instead, which is much safer, but cl2.hpp has a number of issues with Nvidia&#39;s OpenCL implementation."}], "answers": [{"comments": [{"owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "edited": false, "score": 0, "creation_date": 1545871173, "post_id": 53938492, "comment_id": 94717025, "body": "If you&#39;re up for it I have a similar problem with the next step on the chain <a href=\"https://stackoverflow.com/questions/53938591/opencl-load-program-from-binary\" title=\"opencl load program from binary\">stackoverflow.com/questions/53938591/&hellip;</a>"}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "reply_to_user": {"reputation": 4673, "user_id": 594456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7ebb047e22fdfa1d3002655d0824079a?s=128&d=identicon&r=PG", "display_name": "Trass3r", "link": "https://stackoverflow.com/users/594456/trass3r"}, "edited": false, "score": 0, "creation_date": 1545880351, "post_id": 53938492, "comment_id": 94718320, "body": "@Trass3r Although that doesn&#39;t work too well when you need a C string."}, {"owner": {"reputation": 4673, "user_id": 594456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7ebb047e22fdfa1d3002655d0824079a?s=128&d=identicon&r=PG", "display_name": "Trass3r", "link": "https://stackoverflow.com/users/594456/trass3r"}, "edited": false, "score": 0, "creation_date": 1545911563, "post_id": 53938492, "comment_id": 94727864, "body": "Why wouldn&#39;t it?"}, {"owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "edited": false, "score": 0, "creation_date": 1545929084, "post_id": 53938492, "comment_id": 94734901, "body": "Hm, you&#39;re right. I was still focused on cases like <code>cl::Program::getInfo&lt;CL_PROGRAM_BINARIES&gt;</code> where the callee creates and allocates the string(s) into a container."}], "tags": [], "owner": {"reputation": 164, "user_id": 10543689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d45d64b685f4992f102e1809728b12e?s=128&d=identicon&r=PG&f=1", "display_name": "pandorafalters", "link": "https://stackoverflow.com/users/10543689/pandorafalters"}, "is_accepted": true, "score": 1, "last_activity_date": 1545870063, "creation_date": 1545870063, "answer_id": 53938492, "question_id": 53926749, "link": "https://stackoverflow.com/questions/53926749/opencl-segfaults-but-gives-different-error-with-gdb/53938492#53938492", "title": "OpenCL segfaults but gives different error with GDB", "body": "<p>You're passing an uninitialized pointer (<code>err</code>) to <code>cl::Program</code>'s constructor, <em>and</em> then in your error test you're not dereferencing it. Either initialize it, dereference in your test, and delete it:</p>\n\n<pre><code>cl_int *err = new cl_int; // &lt;-- initialize pointer\ncl::Program program = cl::Program{context, devices, bin, &amp;binaryStatus, err};\n\nif(*err != CL_SUCCESS) { // &lt;-- dereference pointer\n    // ....\n}\ndelete err; // &lt;-- release memory\n</code></pre>\n\n<p>or use a non-pointer object and pass the address to <code>cl::Program</code>:</p>\n\n<pre><code>cl_int err; // &lt;-- not pointer\ncl::Program{context, devices, bin, &amp;binaryStatus, &amp;err}; // &lt;-- pass address\n\nif(err != CL_SUCCESS) {\n    // ....\n}\n</code></pre>\n\n<hr>\n\n<p>Also, <code>buffer</code> needs to be released in both <code>CreateProgramFromBinary</code> and <code>CreateBinaryFromProgram</code>:</p>\n\n<pre><code>delete[] buffer; // &lt;-- note `[]`\n</code></pre>\n\n<p>As a general rule, add a matching <code>delete</code> <em>immediately</em> when you write <code>new</code>. It's much easier to find an improperly-placed <code>delete</code> than to find a <em>missing</em> one.</p>\n"}], "owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 53938492, "answer_count": 1, "score": 0, "last_activity_date": 1545870063, "creation_date": 1545788986, "last_edit_date": 1545864290, "question_id": 53926749, "link": "https://stackoverflow.com/questions/53926749/opencl-segfaults-but-gives-different-error-with-gdb", "title": "OpenCL segfaults but gives different error with GDB", "body": "<p>I have a very simple OpenCL kernel that I'm trying to run </p>\n\n<pre><code>void kernel point_within(global const int* pointsX, global const int* pointsY, global int* center, global int* extents, global bool* output) {\n   output[get_global_id(0)] = (abs(pointsX[get_global_id(0)] - center[0]) &lt;= extents[0]) &amp;&amp; \\\n                              (abs(pointsY[get_global_id(0)] - center[1]) &lt; extents[1]);\n};\n</code></pre>\n\n<p>This is what I'm trying to run it with in C++</p>\n\n<pre><code>///\n//  Attempt to create the program object from a cached binary.  Note that\n//  on first run this will fail because the binary has not yet been created.\n//\ninline cl::Program CreateProgramFromBinary(cl::Context context,const std::vector&lt;cl::Device&gt; devices, const char* fileName)\n{\n    std::ifstream file(fileName, std::ios::binary | std::ios::ate | std::ios::in);\n\n    uint32_t size = file.tellg();\n    file.seekg(0, std::ios::beg);\n    char* buffer = new char[size];\n    file.read(buffer, size);\n    file.close();\n\n    cl::Program::Binaries bin{{buffer, size}};\n\n    std::vector&lt;cl_int&gt; binaryStatus;\n    cl_int *err;\n    cl::Program program = cl::Program{context, devices, bin, &amp;binaryStatus, err};\n\n    if(err != CL_SUCCESS) {\n       std::cout&lt;&lt;\" Error building: \"&lt;&lt;program.getBuildInfo&lt;CL_PROGRAM_BUILD_LOG&gt;(devices[0])&lt;&lt;\"\\n\";\n        exit(1);\n    }\n\n    return program;\n}\n\n///\n//  Create an OpenCL program from the kernel source file\n//\ninline cl::Program CreateBinaryFromProgram(const cl::Context context,const std::vector&lt;cl::Device&gt; devices, const char* readFileName, const char* writeFileName)\n{\n    std::ifstream file(readFileName, std::ios::binary | std::ios::ate | std::ios::in);\n\n    uint32_t size = file.tellg();\n    file.seekg(0, std::ios::beg);\n    char* buffer = new char[size];\n\n    file.read(buffer, size);\n    file.close();\n\n    cl::Program::Sources sources;\n\n    // kernel calculates for each element C=A+B\n    std::string kernel_code(buffer);\n    sources.push_back({kernel_code.c_str(),kernel_code.length()});\n    cl::Program program{context,sources};\n    if(program.build(devices)!=CL_SUCCESS){\n       std::cout&lt;&lt;\" Error building: \"&lt;&lt;program.getBuildInfo&lt;CL_PROGRAM_BUILD_LOG&gt;(devices[0])&lt;&lt;\"\\n\";\n        exit(0);\n    }\n    std::vector&lt;char*&gt; output = program.getInfo&lt;CL_PROGRAM_BINARIES&gt;();\n    std::vector&lt;size_t&gt; output_sizes = program.getInfo&lt;CL_PROGRAM_BINARY_SIZES&gt;();\n    std::ofstream outFile (writeFileName, std::ios::out | std::ios::binary);\n    outFile.write(output[0], output_sizes[0]);\n    outFile.close();\n    return program;\n}\n\ndevices = loadDevices();\ncontext = cl::Context{devices};\ncl::Program program = CreateProgramFromBinary(context, devices, \"HelloWorld.cl.bin\");\n\ncl::Buffer buffer_PointsX(context,CL_MEM_READ_WRITE,sizeof(int)*10);\ncl::Buffer buffer_PointsY(context,CL_MEM_READ_WRITE,sizeof(int)*10);\ncl::Buffer buffer_Center(context,CL_MEM_READ_WRITE,sizeof(int)*10);\ncl::Buffer buffer_Extends(context,CL_MEM_READ_WRITE,sizeof(int)*10);\ncl::Buffer buffer_Output(context,CL_MEM_READ_WRITE,sizeof(bool)*10);\n\nint PointsX[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\nint PointsY[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\nint Center[] = {0, 0};\nint Extends[] = {1, 2};\nbool output[]{false, false, false, false, false, false, false, false, false, false};\n\n//create queue to which we will push commands for the device.\ncl::CommandQueue queue(context,devices[0]);\n\n//write arrays A and B to the device\nqueue.enqueueWriteBuffer(buffer_PointsX,CL_TRUE,0,sizeof(int)*10,PointsX);\nqueue.enqueueWriteBuffer(buffer_PointsY,CL_TRUE,0,sizeof(int)*10,PointsY);\nqueue.enqueueWriteBuffer(buffer_Center,CL_TRUE,0,sizeof(int)*10,Center);\nqueue.enqueueWriteBuffer(buffer_Extends,CL_TRUE,0,sizeof(int)*10,Extends);\n\n\n//run the kernel\ncl::Kernel kernel_add=cl::Kernel(program,\"point_within\");\nkernel_add.setArg(0,buffer_PointsX);\nkernel_add.setArg(1,buffer_PointsY);\nkernel_add.setArg(2,buffer_Center);\nkernel_add.setArg(3,buffer_Extends);\nkernel_add.setArg(4,buffer_Output);\nqueue.enqueueNDRangeKernel(kernel_add, cl::NullRange, cl::NDRange(10),  cl::NDRange(2));\nqueue.finish();\n</code></pre>\n\n<p>This is the output that I get </p>\n\n<p><code>\nUsing platform: Intel(R) OpenCL\nUsing device: Intel(R) Core(TM) i5-4590S CPU @ 3.00GHz\nRunning program...\nSegmentation fault\n</code></p>\n\n<p>So I ran it through GDB </p>\n\n<p><code>\n3 errors generated.\n Error building: Compilation started\n1:5:1: error: unknown type name 'opt'\n1:5:4: error: expected identifier or '('\n1:5:16: error: source file is not valid UTF-8\nCompilation failed\n</code></p>\n\n<p>I get a very different output signaling an error compiling (which was never the case with just plain running the program)</p>\n\n<p>I'm not sure how to debug this any further. I removed the compiling from GDB and directly ran from the binary and this was the line giving me trouble</p>\n\n<pre><code>0  0x00000000004034c9 in cl::Program::Program(cl::Context const&amp;, std::vector&lt;cl::Device, std::allocator&lt;cl::Device&gt; &gt; const&amp;, std::vector&lt;std::pair&lt;void const*, unsigned long&gt;, std::allocator&lt;std::pair&lt;void const*, unsigned long&gt; &gt; &gt; const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt;*, int*) ()\n1  0x0000000000403c10 in CreateProgramFromBinary(cl::Context, std::vector&lt;cl::Device, std::allocator&lt;cl::Device&gt; &gt;, char const*) ()\n2  0x0000000000401ed6 in main ()\n</code></pre>\n\n<p>How would I go about debugging this issue/ What is the issue?</p>\n"}, {"tags": ["c++", "pointers", "struct", "dynamic-memory-allocation", "doubly-linked-list"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1545786915, "post_id": 53926640, "comment_id": 94694780, "body": "Individual objects that are instantiated in dynamic scope using <code>new</code> are destroyed using <code>delete</code> and not <code>delete[]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10833239, "user_type": "registered", "profile_image": "https://graph.facebook.com/2229437657327665/picture?type=large", "display_name": "TOCHANGE", "link": "https://stackoverflow.com/users/10833239/tochange"}, "edited": false, "score": 0, "creation_date": 1545826606, "post_id": 53926705, "comment_id": 94704318, "body": "thank you for taking  your time to correct me :) <code>afficheList</code> now works well :). if u can feel free to tell me about those <b>other  odd/wrong things</b> with this code @WhozCraig"}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 2, "last_activity_date": 1545788107, "creation_date": 1545788107, "answer_id": 53926705, "question_id": 53926640, "link": "https://stackoverflow.com/questions/53926640/tryi-to-implement-by-my-self-a-doubly-linked-list-calling-affichelist-twice-i/53926705#53926705", "title": "tryi to implement by my self a doubly linked list; calling afficheList() twice i get an infinity-loop?", "body": "<p>First, C++ is not Java or C#, et'al. Keep that in mind. That said, you're allocating a new node with this code, then <em>immediately</em> leaking that allocation with the very next line:</p>\n\n<pre><code>Element *el = new Element; // el points to new node\nel = l-&gt;first; // el points to head sentinal, node from above leaked\n</code></pre>\n\n<p>Then, you use <code>el</code> to  walk down the linked list, eventually reaching what you hope is the last node. Once that happens, you break the loop, but then you do this:</p>\n\n<pre><code>delete el; // delete last node in the list\n</code></pre>\n\n<p>At this point you've deleted a node from the actual list, The initial allocation made on the first line is long-gone (leaked), and now you've deleted a node from the list (the last node), but the pointer <em>in the list</em> that referred to that node still retains the original address (which is now defunct; it is a <em>dangling pointer</em>).</p>\n\n<p>Executing the function again will reach that defunct dangling pointer, attempt to follow it, and invoke undefined behavior in the process.</p>\n\n<p>Two things to correct this. First, this function shouldn't be modifying the list in the first place, so don't let it. Be <code>const</code> correct and pass the <code>List</code> pointer as <code>const</code>. Second, don't allocate, or delete, memory in this function <em>at all</em>. </p>\n\n<pre><code>void afficheList(List const *l) {\n\n    Element const *el = l-&gt;first;\n    cout &lt;&lt; \" {\" &lt;&lt; el-&gt;val &lt;&lt; \"} \";\n    while (el-&gt;next != nullptr) \n    {\n        el = el-&gt;next;\n        cout &lt;&lt; \" {\" &lt;&lt; el-&gt;val &lt;&lt; \"} \";\n    }\n    cout &lt;&lt; \" {\" &lt;&lt; el-&gt;next &lt;&lt; \"} \";\n}\n</code></pre>\n\n<p>That's it. there is still plenty of other things odd/wrong with this code, but this is the biggest problem with <code>afficheList</code></p>\n"}], "owner": {"reputation": 21, "user_id": 10833239, "user_type": "registered", "profile_image": "https://graph.facebook.com/2229437657327665/picture?type=large", "display_name": "TOCHANGE", "link": "https://stackoverflow.com/users/10833239/tochange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545788677, "creation_date": 1545786747, "last_edit_date": 1545788677, "question_id": 53926640, "link": "https://stackoverflow.com/questions/53926640/tryi-to-implement-by-my-self-a-doubly-linked-list-calling-affichelist-twice-i", "title": "tryi to implement by my self a doubly linked list; calling afficheList() twice i get an infinity-loop?", "body": "<p>would u like to read my code and tell me where i messed up ( i expect afficheList(List list) to print elements of list ) ? on the very right of my implemenation i wrotte how i understand my code tell me if i think wrong  i was told often there are difference between wht u want the computer to do and wht u tell it to do \nalso i wonder if i should keep \"trying and error\". i am afraid of memory leak ! as i use dynamic memory allocation</p>\n\n<p>watching video and reading on how to do doubly linked list haven't helped me so far; their implemetation seems to be too sophisticated for my little brain to understand</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n/* dans ce fichier je tente de creer une structure d'une liste doublement chain\u00e9 avec quelques methodes de base que j'y associe\ntel que creer une liste, la supprimer, cree un element la suppremer, ajouter un element \u00e0 la liste et afficher la liste.\nles commentation aux dessus de chaque implementation sont les eventuels documentation quan d\u00e0  ceux sur les c\u00f4tes ;  ma vision\nde l'implemetation : ceux \u00e0  quoi je m'attends qu elle fasse !\n*/\n\n\n\n\n// je renome structure Element en elt\n// ca me set dans la declaration des structures, elle m'eviter de re\u00e9crire  \" struct Element\" et aussis\n//ca m'aide personnellement dans la comprehension des structures !\ntypedef struct Element elt;\n\n//declaration de la structure Element\nstruct Element{\n    int val;\n    elt* next;                                          // pointeur vers l'element d'apres\n    elt* prev;                                          //  - -    -   -    -    - d'avant\n};\n\n//declaration de la structure list\nstruct List{\n    elt* first;                                         //un pointeur vers un elemnt qui\n                                                        // qui saure  le premier element de\n                                                        // de la liste\n};\n/**cree un element \u00e0 partir d'un entier\n*@param un entier\n*@return un pointeur \u00e0 un element\n**/\nelt* creeElement(int nb){\n    Element *res= new Element;                           // j'allou  une memoire pouvant contenir un\n                                                         // un element, j'y accede avec le pointer res\n    res-&gt;val = nb;                                       // ds la memoire, ds la partie val j'y met le param nb\n    res-&gt;next = nullptr;                                 // dans next je met null\n    res-&gt;prev = nullptr;                                 // dans prev je met null\n    return res;                                          // je retourne l'adress point\u00e9 par le pointeur *res\n}\n/* libere la memoire d'un pointeur  passe en param*/\nvoid deleElement(Element *el){\n    delete[] el;                                         // soit un pointeur *el,je lib\u00e8re l'addr m\u00e9mo point\u00e9\n}\n/**cree une liste\n*@param un pointeur \u00e0 un element\n**/\n\n\nList* creeList(Element *el){\n    List *res = new List;\n                                                       // vers un element (first)) je pointe cette m\u00e9mo avec *res\n    res-&gt;first = el;                                   // je fais point\u00e9 first vers l'adresse du pointeur *el\n    return res;                                        // je retourne l'addr m\u00e9mo du pointeur  *res;\n}\n\n/** affiche une liste\n*@param un pointeur \u00e0 une list\n**/\nvoid afficheList(List *l){\n\n    Element *el = new Element;                        // pointeur *el pointe vers une m\u00e9mo dispo\u00e9 \u00e0 contenir un elememnt\n    el = l-&gt;first;                                    // je pointe \u00e0 first par le pointeur *el\n    cout &lt;&lt; \" {\"&lt;&lt;el-&gt;val&lt;&lt;\"} \";                      // j'affiche le champs val de *el\n    while (el-&gt;next != nullptr){                      // tant que le pointeur *next de l'element actuel n'est pas null;\n        el = el-&gt;next;                                // l'elemnt next devient l'element actuel ( par le pointeur el )\n        cout &lt;&lt; \" {\"&lt;&lt;el-&gt;val &lt;&lt;\"} \";                 // j'affiche l'element actuel\n    }\n    cout &lt;&lt; \" {\"&lt;&lt;el-&gt;next &lt;&lt;\"} \";\n    delete el;                                        // je lib\u00e8re le memoire occup\u00e9 par le pointeur *el;\n}\n/** ajoute un element sur une liste\n*@param un pointeur \u00e0 un element et un ptr \u00e0 une liste\n*/\nvoid ajouteElement(List *l, Element *el){\n    Element *tempo = l-&gt;first;\n    while (tempo-&gt;next != nullptr){\n        tempo = tempo-&gt;next;\n    }\n    el-&gt;prev = tempo;\n    tempo-&gt;next = el;\n}\n\n//debut d'echecs\nvoid deleteList( List *l){\n    Element *actuel=nullptr;\n    Element *next=nullptr;\n    actuel = l-&gt;first;\n\n    //ca me fait une boucle infini :(\n    while(actuel-&gt;next != nullptr){\n        next = actuel-&gt;next;\n        delete[] actuel;\n        actuel = next;\n\n    }\n\n    delete[] next;\n\n}\n\nvoid pop_back_List(List *l){\n    Element *cible;\n    cible = l-&gt;first;\n    while(cible-&gt;next != nullptr){\n        cible = cible-&gt;next;\n    }\n    delete[] cible;\n}\n\n\n\nint main()\n{\n    cout &lt;&lt; \"Hello List!\" &lt;&lt; endl;\n    Element *el = creeElement(10);\n    List *l = creeList(el);\n    ajouteElement(l, creeElement(-2));\n    ajouteElement(l, creeElement(12));\n\n\n    cout &lt;&lt;\" list :  \" ;\n    afficheList(l);\n    cout &lt;&lt;\" list 1:  \" ;\n    afficheList(l);\n\n    return 0;\n}\n</code></pre>\n\n<p>i expected <br/>\nlist : {10} {-2} {12}  <br/>\nlist1 : {10} {-2} {12} <br/>\ninstead i got an infinity loop :(</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545802006, "post_id": 53926623, "comment_id": 94696784, "body": "While syntactically correct (compiles without error), odds are good that the compiler will emit a warning over <code>t +50;</code> because it does absolutely nothing. Warnings are very helpful. They are the first line of defense against logic errors so turn them on and turn them up <b><i>LOUD</i></b> so you can&#39;t ignore them."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 7982776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7c41O.jpg?s=128&g=1", "display_name": "SC0RP10N.MY7H", "link": "https://stackoverflow.com/users/7982776/sc0rp10n-my7h"}, "is_accepted": false, "score": 1, "last_activity_date": 1545786762, "creation_date": 1545786762, "answer_id": 53926642, "question_id": 53926623, "link": "https://stackoverflow.com/questions/53926623/basic-arithmetic-on-variables/53926642#53926642", "title": "Basic arithmetic on variables", "body": "<p>t + 50 will add 50 to the variable t and the result is gone forever unless you assigned it to another value.</p>\n\n<p>You need to study programming with C++ from the beginning mate!</p>\n\n<p>I recommend Big C++ refrence</p>\n"}, {"tags": [], "owner": {"reputation": 2153, "user_id": 3582996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RSJ4v.jpg?s=128&g=1", "display_name": "Mohamed Elsayed", "link": "https://stackoverflow.com/users/3582996/mohamed-elsayed"}, "is_accepted": true, "score": 3, "last_activity_date": 1545786830, "creation_date": 1545786830, "answer_id": 53926645, "question_id": 53926623, "link": "https://stackoverflow.com/questions/53926623/basic-arithmetic-on-variables/53926645#53926645", "title": "Basic arithmetic on variables", "body": "<blockquote>\n  <p>Does the 2nd line work the same as as t+=50?</p>\n</blockquote>\n\n<p>No. the statement <code>t + 50;</code> is not an assignment statement, it is an expression whose result is ignored because it is not assigned to any variable.</p>\n\n<p><code>t+=50;</code> is simply equivalent to <code>t = t + 50;</code></p>\n\n<p>so the output here will still be <code>0</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 10833317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bYLUiQnuqIg/AAAAAAAAAAI/AAAAAAAAANM/Af0YbDUAYlA/photo.jpg?sz=128", "display_name": "MadCap", "link": "https://stackoverflow.com/users/10833317/madcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53926645, "answer_count": 2, "score": -4, "last_activity_date": 1545789385, "creation_date": 1545786479, "last_edit_date": 1545789385, "question_id": 53926623, "link": "https://stackoverflow.com/questions/53926623/basic-arithmetic-on-variables", "title": "Basic arithmetic on variables", "body": "<p>So I have a doubt as to what the following piece of code does to the variable.</p>\n\n<pre><code>int t=0;\n\n\nt +50;\n\n\ncout&lt;&lt;t;\n</code></pre>\n\n<p>Does the 2nd line work the same as as t+=50? I came across this is in a question and quite didn't know what it did. </p>\n"}, {"tags": ["c++", "gtk3", "gtkmm"], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1545824006, "post_id": 53927146, "comment_id": 94703455, "body": "I&#39;ll test this out when I get to my desktop! Sounds hopeful"}, {"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1545828650, "post_id": 53927146, "comment_id": 94705034, "body": "How do I add the label to the row? I can&#39;t find any documentation about ListBoxRow, and the header file listboxrow.h is hard to read."}, {"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1545865938, "post_id": 53927146, "comment_id": 94716193, "body": "unfortunately that doesn&#39;t seem to work. I can&#39;t find any Gtkmm (C++) documentation for the ListBoxRow, unfortunately, but I feel like if I could that would help a lot. Do you know of any?"}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1545876064, "post_id": 53927146, "comment_id": 94717673, "body": "You are right, the official Gtk documentation for ListBox in Gtkmm does not exist."}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 1, "creation_date": 1545876090, "post_id": 53927146, "comment_id": 94717675, "body": "Maybe... <a href=\"https://fossies.org/linux/gtkmm/docs/reference/html/classGtk_1_1ListBoxRow.html\" rel=\"nofollow noreferrer\">fossies.org/linux/gtkmm/docs/reference/html/&hellip;</a>"}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 1, "creation_date": 1545876722, "post_id": 53927146, "comment_id": 94717749, "body": "You may want to take a peek at this third party <a href=\"https://github.com/GNOME/gtkmm-documentation/tree/master/examples/book/listbox\" rel=\"nofollow noreferrer\">example</a>."}, {"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1546373043, "post_id": 53927146, "comment_id": 94834125, "body": "none of this seems to be working :( Is there any trick to it, like updating the listbox once a row has been added, or perhaps do I have to add everything to the listbox <i>before</i> adding the listbox to the window? Thanks for all the help."}, {"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1546373480, "post_id": 53927146, "comment_id": 94834208, "body": "I&#39;ve found something in the documentation about a sort function. Do I need one of these for the insert and append functions to work?"}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1546457162, "post_id": 53927146, "comment_id": 94860828, "body": "Are you using gtk_show_all for sure at the end? See @pan-mroku <a href=\"https://stackoverflow.com/a/54009170/6150775\">answer</a>."}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1546457232, "post_id": 53927146, "comment_id": 94860855, "body": "No, the sort feature is to sort your entries. For example, turn <code>B, A, C</code> to <code>A, B, C</code>."}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": false, "score": 2, "last_activity_date": 1545861889, "last_edit_date": 1545861889, "creation_date": 1545794837, "answer_id": 53927146, "question_id": 53926523, "link": "https://stackoverflow.com/questions/53926523/gtkmm-label-not-successfully-being-inserted-into-a-listbox/53927146#53927146", "title": "Gtkmm label not successfully being inserted into a ListBox", "body": "<p>You have to insert a <a href=\"https://developer.gnome.org/gtk3/stable/GtkListBox.html#GtkListBoxRow\" rel=\"nofollow noreferrer\">ListBoxRow</a> and then add the Label to the Row.</p>\n\n<p>Alternatively, the <a href=\"https://developer.gnome.org/gtk3/stable/GtkListBox.html#GtkListBox.description\" rel=\"nofollow noreferrer\">docs</a> list <a href=\"https://developer.gnome.org/gtk3/stable/GtkContainer.html#gtk-container-add\" rel=\"nofollow noreferrer\">gtk_container_add()</a> as a solution.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I am not good at C++, but something like this should do the trick:</p>\n\n<pre><code>Gtk::ListBoxRow* list_box_row;\nlist_box_row.add(l); //add label widget to row\nlistbox_serverlist.add(list_box_row);  //add row to listbox\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "edited": false, "score": 0, "creation_date": 1546461545, "post_id": 54009170, "comment_id": 94862567, "body": "Thank you <i>so</i> much! You are a life saver. I was missing the show_all() call. The project which I&#39;m using this code for is due pretty soon, and as such if I could upvote this answer 100 times I would!"}], "tags": [], "owner": {"reputation": 698, "user_id": 1981374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afd547bb1f448490439e0093eba3a70?s=128&d=identicon&r=PG", "display_name": "pan-mroku", "link": "https://stackoverflow.com/users/1981374/pan-mroku"}, "is_accepted": true, "score": 2, "last_activity_date": 1546443763, "creation_date": 1546443763, "answer_id": 54009170, "question_id": 53926523, "link": "https://stackoverflow.com/questions/53926523/gtkmm-label-not-successfully-being-inserted-into-a-listbox/54009170#54009170", "title": "Gtkmm label not successfully being inserted into a ListBox", "body": "<p>Since \"it works for me\":</p>\n\n<pre><code>#include &lt;gtkmm.h&gt;\n\nint main()\n{\n    auto Application = Gtk::Application::create();\n    Gtk::Window window;\n    Gtk::ListBox listbox;\n    window.add(listbox);\n    Gtk::Label label, label2;\n    label.set_text(\"asdf\");\n    label2.set_text(\"qwer\");\n    listbox.add(label);\n    listbox.insert(label2, -1);\n    window.show_all();\n    return Application-&gt;run(window);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/J0lHn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J0lHn.png\" alt=\"enter image description here\"></a></p>\n\n<p>my guess would be: are you using <a href=\"https://developer.gnome.org/gtkmm/3.20/classGtk_1_1Widget.html#a4fab2509c3afe1952a408494561295c0\" rel=\"nofollow noreferrer\">Gtk::Widget::show_all()</a>? I have found that for some reason Gtk::Widget::show() was not enough for some hierarchies of widgets. Also I can't find it in <a href=\"https://developer.gnome.org/gtkmm/3.91/classGtk_1_1Widget.html\" rel=\"nofollow noreferrer\">3.91 reference</a>, so maybe that will change?</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9376723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e09e7a66bd19b71b43b00bc5e7b781?s=128&d=identicon&r=PG&f=1", "display_name": "KermitTheFrogger", "link": "https://stackoverflow.com/users/9376723/kermitthefrogger"}, "is_accepted": false, "score": 0, "last_activity_date": 1602604859, "creation_date": 1602604859, "answer_id": 64338903, "question_id": 53926523, "link": "https://stackoverflow.com/questions/53926523/gtkmm-label-not-successfully-being-inserted-into-a-listbox/64338903#64338903", "title": "Gtkmm label not successfully being inserted into a ListBox", "body": "<p>For anyone else experiencing this issue, I recommend to add\n<code>Gtk::manage(WIDGET);</code></p>\n<p>Example:</p>\n<pre><code>class MyListRow : public Gtk::ListBoxRow {\n  private:\n    Gtk::Label label;\n    Gtk::Box box;\n\n  public:\n    MyListRow(char const *appID) {\n        label.set_label(appID);\n        box.pack_start(label, Gtk::PACK_START, 0);\n        add(box);\n        show_all();\n        Gtk::manage(this);\n    }\n};\n</code></pre>\n<p>In main:</p>\n<p><code>listBox-&gt;append(*new MyListRow(&quot;title&quot;));</code></p>\n"}], "owner": {"reputation": 613, "user_id": 6796396, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-tWDEXS7vRzs/AAAAAAAAAAI/AAAAAAAAABY/8JP3JW96EBI/photo.jpg?sz=128", "display_name": "Jacob Garby", "link": "https://stackoverflow.com/users/6796396/jacob-garby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 54009170, "answer_count": 3, "score": 2, "last_activity_date": 1602604859, "creation_date": 1545784352, "question_id": 53926523, "link": "https://stackoverflow.com/questions/53926523/gtkmm-label-not-successfully-being-inserted-into-a-listbox", "title": "Gtkmm label not successfully being inserted into a ListBox", "body": "<p>From a Gtk::Builder I've retried a pointer to a Gtk::ListBox from a glade file, called <code>listbox_serverlist</code>.</p>\n\n<p>Here is a minimal piece of code that I belive sums it up:</p>\n\n<pre><code>Gtk::ListBox* listbox_serverlist;\nbuilder-&gt;get_widget(\"listbox_serverlist\", listbox_serverlist);\n\nGtk::Label l;\nl.set_text(\"Test\");\nlistbox_serverlist-&gt;insert(l, -1)\n</code></pre>\n\n<p>Immediately after this, I run the main window, which the listbox is in.</p>\n\n<p>My issue is that, although the listbox results in not being empty, there certainly isn't any text in it. I was hoping for my label to appear as an item in the list box, but instead there seems to be one selectable item, but it's completely blank.</p>\n\n<p>Is there any code I must write to perhaps update the actual text in the label, or something to this effect?</p>\n\n<p>I hope my question is clear, but I'd be happy to provide more information.</p>\n"}, {"tags": ["c++", "testing", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1545782191, "post_id": 53926366, "comment_id": 94694267, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1545782236, "post_id": 53926366, "comment_id": 94694272, "body": "The first three undefined symbols seem to be simply because you don&#39;t include &quot;lib/*.cpp&quot; in your compilation. I don&#39;t know enough about GTest to know what you need to add for the fourth undefined symbol."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1545782350, "post_id": 53926366, "comment_id": 94694285, "body": "In the future, please at least do a basic search for the error message before posting. It&#39;s highly unlikely you&#39;re the first one who has ever seen it. In this case, a simple search for <i>ld: symbol(s) not found for architecture x86_64</i> would have found many existing questions here."}, {"owner": {"reputation": 89, "user_id": 10548774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a7a21d3f381f8dfbefd009871b4b26?s=128&d=identicon&r=PG&f=1", "display_name": "dircrys", "link": "https://stackoverflow.com/users/10548774/dircrys"}, "edited": false, "score": 0, "creation_date": 1545782662, "post_id": 53926366, "comment_id": 94694320, "body": "Thank you both, I&#39;ve done what you suggested but I still get a linker error which I think is a googlemock issue..."}, {"owner": {"reputation": 89, "user_id": 10548774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a7a21d3f381f8dfbefd009871b4b26?s=128&d=identicon&r=PG&f=1", "display_name": "dircrys", "link": "https://stackoverflow.com/users/10548774/dircrys"}, "edited": false, "score": 0, "creation_date": 1545782808, "post_id": 53926366, "comment_id": 94694335, "body": "If either of you want to write an answer I&#39;ll accept it, thanks so much for pointing this out. Hard to get into the C++ mindset!"}], "answers": [{"tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": false, "score": 0, "last_activity_date": 1557757882, "creation_date": 1557757882, "answer_id": 56114512, "question_id": 53926366, "link": "https://stackoverflow.com/questions/53926366/c-googlemock-wont-compile-in-silly-example/56114512#56114512", "title": "C++ googlemock won&#39;t compile in silly example", "body": "<p>You are using parts from gmock but only linking gtest. Thats why InitGoogleMock() is undefined.</p>\n\n<p>Replacing -lgtest with <strong>-lgmock</strong> should make it.</p>\n\n<p>The reason: gtest is testing framework, gmock the mocking framework.\nIf you link gmock, its includes also gtest but not the other way round.</p>\n"}], "owner": {"reputation": 89, "user_id": 10548774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a7a21d3f381f8dfbefd009871b4b26?s=128&d=identicon&r=PG&f=1", "display_name": "dircrys", "link": "https://stackoverflow.com/users/10548774/dircrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557757882, "creation_date": 1545781993, "last_edit_date": 1545782627, "question_id": 53926366, "link": "https://stackoverflow.com/questions/53926366/c-googlemock-wont-compile-in-silly-example", "title": "C++ googlemock won&#39;t compile in silly example", "body": "<p>I'm very new to C++, and I'm trying to use googlemock and googletest. I can't seem to get them to work even in simple examples so I'm sure there must be something simple I'm missing. I would really appreciate some help on this. I have a class Foo which has another class Bar as a dependency so I'm trying to mock this dependency out in tests. I'm sorry in advance, this seems like the simplest Dependency Injection example to me but it still spreads across 9 files! This is Bar:</p>\n\n<pre><code>// lib/bar.h\n#ifndef BAR_H\n#define BAR_H\n\nclass Bar {\n  public:\n    Bar(int baz);\n    virtual ~Bar() {};\n    int _baz;\n};\n\n#endif\n</code></pre>\n\n<p>With implementation:</p>\n\n<pre><code>// lib/bar.cpp\n#include \"bar.h\"\n\nBar::Bar(int baz) : _baz(baz) {}\n</code></pre>\n\n<p>Here is the MockBar header:</p>\n\n<pre><code>// tests/mock_bar.h\n#ifndef MOCK_BAR_H\n#define MOCK_BAR_H\n#include &lt;gmock/gmock.h&gt;\n#include \"../lib/bar.h\"\n\nclass MockBar : public Bar {\n  public:\n    MockBar();\n    virtual ~MockBar() {};\n};\n\n#endif\n</code></pre>\n\n<p>And the implementation:</p>\n\n<pre><code>// tests/mock_bar.cpp\n#include \"mock_bar.h\"\n\nMockBar::MockBar() : Bar(0) {\n}\n</code></pre>\n\n<p>So MockBar is just Bar with baz set to 0. Here is Foo:</p>\n\n<pre><code>// lib/foo.h\n#ifndef FOO_H\n#define FOO_H\n#include \"bar.h\"\n\nclass Foo {\n  public:\n    Foo(Bar bar);\n    virtual ~Foo() {};\n    Bar _bar;\n    int getBaz();\n};\n\n#endif\n\n// lib/foo.cpp\n#include \"foo.h\"\n\nFoo::Foo(Bar bar) : _bar(bar) {\n}\n\nint Foo::getBaz() {\n  return _bar._baz;\n}\n</code></pre>\n\n<p>And here is my test:</p>\n\n<pre><code>// tests/test_foo.h\n\n#ifndef TEST_FOO_H\n#define TEST_FOO_H\n#include &lt;gtest/gtest.h&gt;\n#include \"../lib/foo.h\"\n#include \"mock_bar.h\"\n\nclass FooTest : public ::testing::Test {\n  public:\n    FooTest();\n    Foo subject;\n    MockBar mock_bar;\n    virtual ~FooTest() {};\n};\n\n#endif\n\n// tests/test_foo.cpp\n\n#include \"test_foo.h\"\n\nFooTest::FooTest() : mock_bar(), subject(mock_bar) {\n}\n\nTEST_F(FooTest, BazTest)\n{\n  ASSERT_TRUE(subject.getBaz() == 0);\n}\n</code></pre>\n\n<p>Finally, the main test function is:</p>\n\n<pre><code>// tests/main.cpp\n\n#include &lt;gtest/gtest.h&gt;\n#include &lt;gmock/gmock.h&gt;\n#include \"test_foo.h\"\n\nint main(int argc, char **argv) {\n  testing::InitGoogleMock(&amp;argc, argv);\n  testing::InitGoogleTest(&amp;argc, argv);\n  return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>When I compile this all together with:</p>\n\n<pre><code>g++ tests/main.cpp tests/test_*.cpp tests/mock_*.cpp lib/*.cpp -o test \n-lgtest -lpthread -std=c++11\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"testing::InitGoogleMock(int*, char**)\", referenced from:\n      _main in main-0b53fe.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1\n</code></pre>\n\n<p>I would really appreciate some help, please let me know if I can be more clear!</p>\n"}, {"tags": ["c++", "builder"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545780393, "post_id": 53926237, "comment_id": 94694037, "body": "Missing <code>#include &quot;HtmlElement.h&quot;</code> in HtmlBuilder.h, and both <code>#include &quot;HtmlElement.h #include &quot;HtmlBuilder.h&quot;</code> in HtmlElement.cpp"}, {"owner": {"reputation": 4338, "user_id": 1061193, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ffbfe3211751d0cfe8c9fcda306c2b?s=128&d=identicon&r=PG", "display_name": "drum", "link": "https://stackoverflow.com/users/1061193/drum"}, "edited": false, "score": 0, "creation_date": 1545780394, "post_id": 53926237, "comment_id": 94694038, "body": "Should it be <code>static HtmlBuilder HtmlElement::create()</code>?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1545780444, "post_id": 53926237, "comment_id": 94694051, "body": "If there is a dependency cycle, you have to use pointers."}, {"owner": {"reputation": 50, "user_id": 5361941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/803696d237fbd76eae01a5daa2b5ca3c?s=128&d=identicon&r=PG&f=1", "display_name": "panky", "link": "https://stackoverflow.com/users/5361941/panky"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545781121, "post_id": 53926237, "comment_id": 94694144, "body": "Thanks, @Jarod42 I missed to include &quot;HtmlBuilder.h&quot; in HtmlElement.cpp. This was causing the issue."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 4338, "user_id": 1061193, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ffbfe3211751d0cfe8c9fcda306c2b?s=128&d=identicon&r=PG", "display_name": "drum", "link": "https://stackoverflow.com/users/1061193/drum"}, "edited": false, "score": 0, "creation_date": 1545781143, "post_id": 53926237, "comment_id": 94694148, "body": "@drum It&#39;s already in class, so no. If you meant moving it to <code>HTMLBuilder</code>, then I&#39;d join you. It doesn&#39;t look to me if elements should be able to create builders (even though the function is static)."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1545781164, "post_id": 53926237, "comment_id": 94694152, "body": "@KamilCuk You don&#39;t <i>have</i> to use pointers, at least not in this situation."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1545781422, "post_id": 53926237, "comment_id": 94694185, "body": "@juanchopanza Right about pointers, still, there&#39;s a cyclic include and we have <code>HtmlElement HtmlBuilder::build()</code> <i>and</i> <code>HtmlBuilder HtmlElement::create()</code> - and we need to resolve at <i>some</i> point."}, {"owner": {"reputation": 50, "user_id": 5361941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/803696d237fbd76eae01a5daa2b5ca3c?s=128&d=identicon&r=PG&f=1", "display_name": "panky", "link": "https://stackoverflow.com/users/5361941/panky"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1545781449, "post_id": 53926237, "comment_id": 94694190, "body": "@Aconcagua what do you mean moving method to <code>HtmlBuilder</code>? Is it like to access the following way -  <code>HtlmElemnt e = HtmlBuilder::Build(). . .</code>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1545781628, "post_id": 53926237, "comment_id": 94694215, "body": "@panky Make it a function of class HtmlBuilder (<code>HtmlBuilder HtmlBuilder::create()</code>) - Probably even drop entirely - what would do the function a constructor could not?"}, {"owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "edited": false, "score": 0, "creation_date": 1545781803, "post_id": 53926237, "comment_id": 94694225, "body": "A nice example of builder pattern (with explanations) is given here: <a href=\"https://sourcemaking.com/design_patterns/builder/cpp/1\" rel=\"nofollow noreferrer\">sourcemaking.com/design_patterns/builder/cpp/1</a> Maybe you can fix your code accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545854699, "post_id": 53926406, "comment_id": 94713296, "body": "<i>&quot;<code>HtmlBuilder create(); &#47;&#47; requires complete definition of HtmlBuilder</code>&quot;</i>. Wrong, forward declaration is enough, even if it might look strange."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 0, "last_activity_date": 1545782588, "creation_date": 1545782588, "answer_id": 53926406, "question_id": 53926237, "link": "https://stackoverflow.com/questions/53926237/incomplete-type-error-in-builder-pattern-implementation/53926406#53926406", "title": "Incomplete Type error in Builder pattern implementation", "body": "<p>You got into trouble:</p>\n\n<pre><code>class HtmlElement\n{\npublic:\n    static HtmlBuilder create(); // requires complete definition of HtmlBuilder\n                                 // -&gt; include HtmlBuilder.h\n};\n\nclass HtmlBuilder\n{\npublic:\n    HtmlElement build();         // requires complete definition of HtmlElement\n                                 // -&gt; include HtmlBuilder.h\n};\n</code></pre>\n\n<p>i. e. HtmlElement needs to include HtmlBuilder and vice versa, which is a cyclic include (unavoidable due to cyclic type dependency).</p>\n\n<p>You need to break this dependency by whatever suitable means. One way could be letting <code>create</code> function return a pointer:</p>\n\n<pre><code>HtmlBuilder* HtmlElement::create();\n// possibly better a smart pointer:\nstd::unique_ptr&lt;HtmlBuilder&gt; HtmlElement::create();\n</code></pre>\n\n<p>Question, though, is: Why do you need a static creator function at all? What could that function do more than a constructor? If you need to be able to distinguish different construction types, you might do so via tag types (similar to the <a href=\"https://en.cppreference.com/w/cpp/experimental/parallelism\" rel=\"nofollow noreferrer\">execution policies</a> used e. g. in <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">std::for_each</a>).</p>\n"}], "owner": {"reputation": 50, "user_id": 5361941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/803696d237fbd76eae01a5daa2b5ca3c?s=128&d=identicon&r=PG&f=1", "display_name": "panky", "link": "https://stackoverflow.com/users/5361941/panky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53926406, "answer_count": 1, "score": 1, "last_activity_date": 1545782588, "creation_date": 1545779964, "last_edit_date": 1545780605, "question_id": 53926237, "link": "https://stackoverflow.com/questions/53926237/incomplete-type-error-in-builder-pattern-implementation", "title": "Incomplete Type error in Builder pattern implementation", "body": "<p>I'm playing around the Builder pattern. And, I come across the 'incomplete return type' issue. What should be the correct way to implement it? </p>\n\n<pre><code>// HtmlElement.h\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass HtmlBuilder;\nclass HtmlElement\n{\n  string name, text;\n  HtmlElement()\n    {\n      cout &lt;&lt; \"HtmlElement created\\n\";\n    }\n public:\n  ~HtmlElement()\n    {\n      cout &lt;&lt; \"HtmlElement destroyed\\n\";\n    }\n\n  static HtmlBuilder create();\n\n  friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const HtmlElement&amp; obj)\n  {\n    return os\n      &lt;&lt; \"name: \" &lt;&lt; obj.name\n      &lt;&lt; \" text: \" &lt;&lt; obj.text &lt;&lt; endl;\n  }\n\n  friend class HtmlBuilder;\n\n};\n\n// HtmlBuilder.h\n\n#include \"HtmlElement.h\"\n\nusing namespace std;\nclass HtmlBuilder\n{\n  HtmlElement root;\n public:\n  HtmlBuilder()\n    {\n      root.name = \"root\";\n      root.text = \"dummy\";\n    }\n  ~HtmlBuilder()\n    {\n\n    }\n  HtmlElement build() { return root; }\n};\n\n// HtmlElement.cpp\n\n    HtmlBuilder HtmlElement::create()\n    {\n      return HtmlBuilder();\n    }\n</code></pre>\n\n<p>the compiler is throwing error related to incomplete type.</p>\n\n<pre><code>HtmlElement.cpp:4:33: error: return type 'class HtmlBuilder' is incomplete\n4 | HtmlBuilder HtmlElement::create()\n  |                                 ^\nHtmlElement.cpp: In static member function 'static void HtmlElement::create()':\nHtmlElement.cpp:6:22: error: invalid use of incomplete type 'class HtmlBuilder'\n6 |   return HtmlBuilder();\n  |                      ^\nIn file included from HtmlElement.cpp:1:\nHtmlElement.h:7:7: note: forward declaration of 'class HtmlBuilder'\n7 | class HtmlBuilder;\n</code></pre>\n\n<p>I also tried to have a pointer to HtmlElement class in builder object. But, there was still the same error.</p>\n"}, {"tags": ["c++", "sld"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545779520, "post_id": 53926189, "comment_id": 94693911, "body": "The current directory when your program is run is not necessarily the directory containing your binary.  You can get this via <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulefilenamea\" rel=\"nofollow noreferrer\"><code>GetModuleFileName (NULL)</code></a>"}, {"owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545780416, "post_id": 53926189, "comment_id": 94694044, "body": "So the path to the asset should be relative to the binary or to the result of   GetModuleFileName?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545780581, "post_id": 53926189, "comment_id": 94694080, "body": "You can derive the <i>directory</i> containing the binary from the result of calling <code>GetModuleFileName</code>"}, {"owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545780944, "post_id": 53926189, "comment_id": 94694127, "body": "So the path is the same as the one I assumed, now that this matter is solved - how do I pass a correct path to an asset?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545781121, "post_id": 53926189, "comment_id": 94694143, "body": "Once you have the name of the directory containing your binary, you can append the same path as you were using before."}, {"owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545781289, "post_id": 53926189, "comment_id": 94694166, "body": "I can&#39;t use relative paths?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545781356, "post_id": 53926189, "comment_id": 94694176, "body": "No, unless perhaps you set the current directory first, but that is fragile and I would not recommend it."}, {"owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1545782041, "post_id": 53926189, "comment_id": 94694253, "body": "Then how can I distribute the program if the asset path is a constant dependent on my folder structure?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "edited": false, "score": 0, "creation_date": 1545784184, "post_id": 53926413, "comment_id": 94694515, "body": "Hey thanks for your input, but from what I see SLD&#39;s IMG_Load doesn&#39;t work with any path when used from an .exe"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "edited": false, "score": 0, "creation_date": 1545825313, "post_id": 53926413, "comment_id": 94703874, "body": "Updated my answer"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1545825839, "last_edit_date": 1545825839, "creation_date": 1545782673, "answer_id": 53926413, "question_id": 53926189, "link": "https://stackoverflow.com/questions/53926189/asset-folder-path-for-c-program-windows/53926413#53926413", "title": "Asset folder path for c++ program [windows]", "body": "<p>You are relying on the current directory being the directory containing your binary, but this is not always true.  Instead, you can do this (error and range checking omitted for brevity):</p>\n\n<pre><code>WCHAR buf = new WCHAR [32768];   // allow for long path names\nGetModuleFileNameW (NULL, buf, 32768);\nWCHAR sep = wcsrchr (buf, '\\\\');\nwcscpy (sep + 1, L\"..\\\\content\\\\sprites\\\\asset.png\");\n...\ndelete [] buf;\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>If you are calling code that depends on the current directory being the one containing your binary, then you can do this instead somewhere in your initialisation code:</p>\n\n<pre><code>WCHAR buf = new WCHAR [32768];   // allow for long path names\nGetModuleFileNameW (NULL, buf, 32768);\nWCHAR sep = wcsrchr (buf, '\\\\');\n*sep = 0;\nSetCurrentDirectoryW (buf);\ndelete [] buf;\n</code></pre>\n\n<p>Again, I have omitted error and range checking for brevity.</p>\n"}], "owner": {"reputation": 19, "user_id": 10833155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nM_-RlYKqOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbuRAXqhiD37bich6KX2zHB3Y6xxQ/mo/photo.jpg?sz=128", "display_name": "user10833155", "link": "https://stackoverflow.com/users/10833155/user10833155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545825839, "creation_date": 1545779350, "question_id": 53926189, "link": "https://stackoverflow.com/questions/53926189/asset-folder-path-for-c-program-windows", "title": "Asset folder path for c++ program [windows]", "body": "<p>The structure of my Release version of my c++program is </p>\n\n<pre><code> | bin\n | | game.exe\n | content\n | | sprites\n | | | asset.png\n</code></pre>\n\n<p>Within the code I pass the path to the asset as \"../content/sprites/asset.png\", but it is not found by the program. What am I doing wrong?</p>\n\n<p>Extra info: I am using SLD2 as a supporting library.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1545779532, "post_id": 53926186, "comment_id": 94693913, "body": "You can&#39;t have declaration in a definition statement"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545779621, "post_id": 53926186, "comment_id": 94693925, "body": "<code>std::vector&lt;std::vector&lt;std::string&gt;&gt; foo = {{&quot;hello&quot;, &quot;world&quot;}, {&quot;foobar&quot;}};</code> ?"}, {"owner": {"reputation": 186, "user_id": 7982776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7c41O.jpg?s=128&g=1", "display_name": "SC0RP10N.MY7H", "link": "https://stackoverflow.com/users/7982776/sc0rp10n-my7h"}, "edited": false, "score": 0, "creation_date": 1545783978, "post_id": 53926186, "comment_id": 94694484, "body": "<a href=\"https://stackoverflow.com/a/28565907/7982776\">stackoverflow.com/a/28565907/7982776</a> this answer might help."}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 1, "last_activity_date": 1545779551, "creation_date": 1545779551, "answer_id": 53926206, "question_id": 53926186, "link": "https://stackoverflow.com/questions/53926186/initialize-a-vector-of-vector-of-strings-in-c/53926206#53926206", "title": "Initialize a vector of vector of strings in C++", "body": "<p>Drop the names in the initialiser list:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n\nint main() {\n    std::vector&lt;std::vector&lt;std::string&gt;&gt; foo =\n    {\n        std::vector&lt;std::string&gt;{}, // &lt;- no name + added curly braces\n        std::vector&lt;std::string&gt;{}  // &lt;- no comma\n    };\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1545780243, "post_id": 53926235, "comment_id": 94694021, "body": "Or just <code>std::vector&lt;std::vector&lt;std::string&gt;&gt; foo(2);</code>"}, {"owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1545780430, "post_id": 53926235, "comment_id": 94694048, "body": "huh, yes! fixed"}], "tags": [], "owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "is_accepted": false, "score": 3, "last_activity_date": 1545780425, "last_edit_date": 1545780425, "creation_date": 1545779924, "answer_id": 53926235, "question_id": 53926186, "link": "https://stackoverflow.com/questions/53926186/initialize-a-vector-of-vector-of-strings-in-c/53926235#53926235", "title": "Initialize a vector of vector of strings in C++", "body": "<p>another way:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  std::vector&lt;std::vector&lt;std::string&gt;&gt; foo(2);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10833152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b02b1976ce926b8859068cc3092a98?s=128&d=identicon&r=PG&f=1", "display_name": "iamnotpredictable", "link": "https://stackoverflow.com/users/10833152/iamnotpredictable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 53926206, "answer_count": 2, "score": -3, "last_activity_date": 1545780425, "creation_date": 1545779328, "question_id": 53926186, "link": "https://stackoverflow.com/questions/53926186/initialize-a-vector-of-vector-of-strings-in-c", "title": "Initialize a vector of vector of strings in C++", "body": "<p>I'm trying to do a vector of vectors of strings in C++ and I'm not getting it; this is what my code looks like:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\nint main() {\n    std::vector&lt;std::vector&lt;std::string&gt;&gt; foo =\n        {\n            std::vector&lt;std::string&gt; ex,\n            std::vector&lt;std::string&gt; bar,\n        };\n    }\n</code></pre>\n\n<p>When trying to compile it with GCC, the following output is given to me:</p>\n\n<pre><code>example.cpp: In function \u2018int main()\u2019:\nexample.cpp:6:28: error: expected primary-expression before \u2018ex\u2019\n std::vector&lt;std::string&gt; ex,\n                        ^~\nexample.cpp:6:28: error: expected \u2018}\u2019 before \u2018ex\u2019\nexample.cpp:5:2: note: to match this \u2018{\u2019\n{\n^\nexample.cpp:6:28: error: could not convert \u2018{&lt;expression error&gt;}\u2019 from                                                            \u2018&lt;brace-enclosed initializer list&gt;\u2019 to \u2018std::vector&lt;std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt;\u2019\nstd::vector&lt;std::string&gt; ex,\n                        ^~\nexample.cpp: At global scope:\nexample.cpp:9:1: error: expected declaration before \u2018}\u2019 token\n}\n^\n</code></pre>\n\n<p>Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["c++", "function", "struct", "singly-linked-list"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1545779239, "post_id": 53926142, "comment_id": 94693876, "body": "use <code>std::list</code> ?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1545779247, "post_id": 53926142, "comment_id": 94693877, "body": "<code>template &lt;class T&gt; void DeleteFirst(T*&amp; pHead)</code>? Though honestly this entire code looks very C-ish"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1545780042, "post_id": 53926142, "comment_id": 94693991, "body": "If you really want singly linked list (e. g. for efficiency), then there&#39;s <code>std::forward_list</code> as well. Generally, there&#39;s little use in re-inventing the wheel - unless it is requested explicitly in a task for exercise (to gain better understanding)."}, {"owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "edited": false, "score": 1, "creation_date": 1545780242, "post_id": 53926142, "comment_id": 94694020, "body": "I am not allowed to use any STL containers (teacher&#39;s guidelines). This code is just a part of my project, that is already working, I am just trying to optimalize it."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 3, "creation_date": 1545780503, "post_id": 53926142, "comment_id": 94694066, "body": "Then a template function is the way to go. Actually, I&#39;d already make the node classes templates."}, {"owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545780508, "post_id": 53926142, "comment_id": 94694068, "body": "@UnholySheep Wow, this works amazingly fine. I cannot accept your post because your reply is a comment."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1545780750, "post_id": 53926142, "comment_id": 94694100, "body": "<i>&#39;looks very C-ish&#39;</i> - the point about this is that you have poor encapsulation. <i>Anybody</i> (or <i>any code</i>) could modify the list from anywhere, possibly doing harm to it. The very least thing you could do is making the <code>next</code> pointer private and give only those functions that shall modify the list access to by making them friends."}], "owner": {"reputation": 657, "user_id": 8974764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ac9ae2eef2b628028f15b4d70a521?s=128&d=identicon&r=PG&f=1", "display_name": "weno", "link": "https://stackoverflow.com/users/8974764/weno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545778871, "creation_date": 1545778871, "question_id": 53926142, "link": "https://stackoverflow.com/questions/53926142/simplifying-code-merging-two-functions-into-one-passing-struct-as-a-parameter", "title": "Simplifying code: merging two functions into one - passing struct as a parameter?", "body": "<p>I have the following (singly-linked list) two different structs:</p>\n\n<pre><code>struct Main {\n    int data1;\n    std::string some_data;\n    Main *next;\n}\nstruct Side {\n    int data2;\n    int data3;\n    Side *next;\n}\n</code></pre>\n\n<p>And the following two functions to remove only the first node from specific linked list <code>Main</code> or <code>Side</code>:</p>\n\n<pre><code>void DeleteFirstMain(Main *&amp;pHeadMain)\n{\n    Main *MainToBeDeleted;\n\n    if (pHeadMain == nullptr)\n        std::cout &lt;&lt; \"List is already empty.\";\n    else\n    {\n        MainToBeDeleted = pHeadMain;\n        pHeadMain = pHeadMain-&gt;next;\n\n        /* Clears the memory occupied by first node*/\n        delete MainToBeDeleted;\n    }\n}\n\nvoid DeleteFirstSide(Side *&amp;pHeadSide)\n{\n    Side *SideToBeDeleted;\n\n    if (pHeadSide == nullptr)\n        std::cout &lt;&lt; \"List is already empty.\";\n    else\n    {\n        SideToBeDeleted = pHeadSide;\n        pHeadSide = pHeadSide-&gt;next;\n\n        /* Clears the memory occupied by first node*/\n        delete SideToBeDeleted;\n    }\n}\n</code></pre>\n\n<p>And everything works great. </p>\n\n<p>However, I believe that the two functions could be merged into one and thus tidy up the code a little bit -- both functions do essentially the same thing, but with a different struct. This is pretty basic stuff, but in C++ I have no idea how to properly pass a \"template\" struct into a function as an argument. </p>\n\n<p>As always, help is appreciated. Thank you.</p>\n"}, {"tags": ["c++", "scope", "curly-braces"], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1545777790, "creation_date": 1545777790, "answer_id": 53926067, "question_id": 53926056, "link": "https://stackoverflow.com/questions/53926056/what-is-the-scope-of-a-for-loop-without-braces-in-c/53926067#53926067", "title": "What is the scope of a for loop without braces in C++", "body": "<p>The scope for the visibility of <code>i</code> is the <code>for()</code> loops body.</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) continue;\n</code></pre>\n\n<p>is just equivalent to </p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) { continue; }\n</code></pre>\n\n<p>If the braces are omitted, the body is just the statement following the <code>for()</code> loop header.</p>\n"}, {"comments": [{"owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "edited": false, "score": 1, "creation_date": 1545778069, "post_id": 53926082, "comment_id": 94693707, "body": "Does that have anything to do with the fact that {} also has its own scope (not necessarily in control structures)?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "edited": false, "score": 2, "creation_date": 1545778537, "post_id": 53926082, "comment_id": 94693777, "body": "@AbrahamMurcianoBenzadon \u2014 no. Note that the definition of <code>I</code> is <b>not</b> inside the curly braces. The rule is essentially what this answer says: the scope of a variable defined in a control structure ends at the end of the controlled statement. The controlled statement can be a simple statement or it can be a compound statement enclosed in curly braces."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 6, "last_activity_date": 1545777959, "creation_date": 1545777959, "answer_id": 53926082, "question_id": 53926056, "link": "https://stackoverflow.com/questions/53926056/what-is-the-scope-of-a-for-loop-without-braces-in-c/53926082#53926082", "title": "What is the scope of a for loop without braces in C++", "body": "<p>Any control structure (<code>if</code>, <code>for</code>, <code>while</code>, etc.) without braces applies <em>only to the next statement</em>. The second example is equivalent to the following:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) {\n    continue;\n}\ncout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>Note that it's often considered bad style to have control structures without braces, because people can forget to add the braces if they add another line, and it can lead to the <a href=\"https://en.wikipedia.org/wiki/Dangling_else\" rel=\"noreferrer\">dangling else</a> problem.</p>\n"}], "owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 53926082, "answer_count": 2, "score": -5, "last_activity_date": 1545778788, "creation_date": 1545777631, "question_id": 53926056, "link": "https://stackoverflow.com/questions/53926056/what-is-the-scope-of-a-for-loop-without-braces-in-c", "title": "What is the scope of a for loop without braces in C++", "body": "<p>I understand that <code>{...}</code> introduces a new scope, which is why the following would not work:</p>\n\n<pre><code>for(int i = 0; i &lt; 10; i++) {\n    // Do something...\n}\n\ncout &lt;&lt; i &lt;&lt; endl;  // Error: i is not defined in this scope\n</code></pre>\n\n<p>However, I'm getting the same error when I try the same thing without braces. </p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) continue;\ncout &lt;&lt; i &lt;&lt; endl;  // Same error, not sure why\n</code></pre>\n\n<p>I expected <code>i</code> to be defined in the 2nd example, because there are no <code>{...}</code> to introduce a new scope.</p>\n"}, {"tags": ["c++", "v8", "webassembly"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1545811738, "post_id": 53925972, "comment_id": 94699308, "body": "I guess you need to query some environment for the &quot;value&quot; of the <code>add</code> symbol. But I have no ideas about how that should be done"}, {"owner": {"reputation": 28742, "user_id": 318752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/v3hRK.jpg?s=128&g=1", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/318752/jeroen"}, "edited": false, "score": 0, "creation_date": 1569782887, "post_id": 53925972, "comment_id": 102698893, "body": "Because the V8 api changes all the time: updated this example to run in V8 version 7.7: <a href=\"https://gist.github.com/jeroen/c5303beb63e478330507c17c66a4632f\" rel=\"nofollow noreferrer\">gist.github.com/jeroen/c5303beb63e478330507c17c66a4632f</a>"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10829442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPJ-9w-2lQk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcarNere7_BBVVKYA1WTpdan5nhiUQ/mo/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/10829442/mhk"}, "edited": false, "score": 0, "creation_date": 1545833462, "post_id": 53929545, "comment_id": 94706657, "body": "Thank you @liliscent, that was exactly what I was looking for. I knew that it would not work without using a bit of JS glue code so this is perfect acceptable. I added your answer to the <i>solution</i> section with some fixes for <code>error: taking address of temporary array</code> compile errors."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 103, "user_id": 10829442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPJ-9w-2lQk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcarNere7_BBVVKYA1WTpdan5nhiUQ/mo/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/10829442/mhk"}, "edited": false, "score": 0, "creation_date": 1545839560, "post_id": 53929545, "comment_id": 94708548, "body": "Actually that <code>error</code> is a long-standing GCC bug, the syntax in my answer is valid both for compile and runtime. Clang correctly accepts. <a href=\"https://stackoverflow.com/questions/15458883/using-array-init-list-as-temporary-in-c11#comment24292271_15458897\" title=\"using array init list as temporary in c11%23comment24292271_15458897\">stackoverflow.com/questions/15458883/&hellip;</a> But it&#39;s good to make gcc happy..."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 3, "last_activity_date": 1545813691, "creation_date": 1545813691, "answer_id": 53929545, "question_id": 53925972, "link": "https://stackoverflow.com/questions/53925972/call-webassembly-from-embedded-v8-without-js/53929545#53929545", "title": "Call webassembly from embedded v8 without JS", "body": "<p>You can construct a WebAssembly module directly from C++ via <code>v8::WasmCompiledModule</code> class (it will be renamed to <code>v8::WasmModuleObject</code> in next version):</p>\n\n<pre><code>    Local&lt;WasmCompiledModule&gt; module = WasmCompiledModule::DeserializeOrCompile(isolate,\n            WasmCompiledModule::BufferReference(0, 0),\n            WasmCompiledModule::BufferReference(wasmbin.data(), wasmbin.size())\n        ).ToLocalChecked();\n</code></pre>\n\n<p>But AFAIK, v8 doesn't expose its webassembly api directly, you have to get them from JS global context. The following code creates a module instance, and gets the <code>exports</code> of the instance:</p>\n\n<pre><code>    using args_type = Local&lt;Value&gt;[];\n\n    Local&lt;Object&gt; module_instance_exports = context-&gt;Global()\n        -&gt;Get(context, String::NewFromUtf8(isolate, \"WebAssembly\"))\n        .ToLocalChecked().As&lt;Object&gt;()\n        -&gt;Get(context, String::NewFromUtf8(isolate, \"Instance\"))\n        .ToLocalChecked().As&lt;Object&gt;()\n        -&gt;CallAsConstructor(context, 1, args_type{module})\n        .ToLocalChecked().As&lt;Object&gt;()\n        -&gt;Get(context, String::NewFromUtf8(isolate, \"exports\"))\n        .ToLocalChecked().As&lt;Object&gt;()\n        ;\n</code></pre>\n\n<p>Then you can get the <code>add</code> function from <code>exports</code> object and call it:</p>\n\n<pre><code>    Local&lt;Int32&gt; adder_res = module_instance_exports\n        -&gt;Get(context, String::NewFromUtf8(isolate, \"add\"))\n        .ToLocalChecked().As&lt;Function&gt;()\n        -&gt;Call(context, context-&gt;Global(), 2, args_type{Int32::New(isolate, 77), Int32::New(isolate, 88)})\n        .ToLocalChecked().As&lt;Int32&gt;();\n\n    std::cout &lt;&lt; \"77 + 88 = \" &lt;&lt; adder_res-&gt;Value() &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 10829442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPJ-9w-2lQk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcarNere7_BBVVKYA1WTpdan5nhiUQ/mo/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/10829442/mhk"}, "edited": false, "score": 0, "creation_date": 1545849159, "post_id": 53935453, "comment_id": 94711627, "body": "Awesome, I came across your project while searching for the answer definitively interesting. I still have to figure out how you interact with v8."}], "tags": [], "owner": {"reputation": 31189, "user_id": 1097780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f01ad795c29c3d05ad26ee47ea6069?s=128&d=identicon&r=PG", "display_name": "Andreas Rossberg", "link": "https://stackoverflow.com/users/1097780/andreas-rossberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1545847238, "creation_date": 1545847238, "answer_id": 53935453, "question_id": 53925972, "link": "https://stackoverflow.com/questions/53925972/call-webassembly-from-embedded-v8-without-js/53935453#53935453", "title": "Call webassembly from embedded v8 without JS", "body": "<p>You might be interested in the <a href=\"https://github.com/rossberg/wasm-c-api\" rel=\"nofollow noreferrer\">Wasm C/C++ API proposal</a>, which allows using a Wasm engine directly from C/C++. The design of this API is independent of any particular engine, but the proposal contains a more or less complete prototype implementation on top of V8.</p>\n\n<p>Sample snippet (see e.g. <a href=\"https://github.com/rossberg/wasm-c-api/blob/master/example/hello.cc\" rel=\"nofollow noreferrer\">hello.cc</a>):</p>\n\n<pre><code>// ...\nauto engine = wasm::Engine::make();\nauto store = wasm::Store::make(engine.get());\nauto module = wasm::Module::make(store.get(), binary);\nauto instance = wasm::Instance::make(store.get(), module.get(), imports);\nauto exports = instance-&gt;exports();\nexports[0]-&gt;func()-&gt;call();\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10829442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPJ-9w-2lQk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcarNere7_BBVVKYA1WTpdan5nhiUQ/mo/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/10829442/mhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1635, "favorite_count": 1, "accepted_answer_id": 53929545, "answer_count": 2, "score": 4, "last_activity_date": 1545847238, "creation_date": 1545776349, "last_edit_date": 1545833240, "question_id": 53925972, "link": "https://stackoverflow.com/questions/53925972/call-webassembly-from-embedded-v8-without-js", "title": "Call webassembly from embedded v8 without JS", "body": "<p>I would like to use webassembly directly from my embedded v8 without the detour via JavaScript. I used the provided <a href=\"https://github.com/v8/v8/blob/master/samples/hello-world.cc\" rel=\"nofollow noreferrer\">hello-world example</a> and the <a href=\"https://github.com/v8/v8/blob/master/include/v8.h#L4522\" rel=\"nofollow noreferrer\">WasmModuleObjectBuilderStreaming</a> class from <code>v8.h</code>. However, I am stuck at how to extract the <code>add</code> function. Help would be appreciated. </p>\n\n<pre><code>#include &lt;include/v8.h&gt;\n\n#include &lt;include/libplatform/libplatform.h&gt;\n\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nusing v8::HandleScope;\nusing v8::Isolate;\nusing v8::Local;\nusing v8::Promise;\nusing v8::WasmModuleObjectBuilderStreaming;\n\nint main(int argc, char* argv[]) {\n  v8::V8::InitializeICUDefaultLocation(argv[0]);\n  v8::V8::InitializeExternalStartupData(argv[0]);\n  std::unique_ptr&lt;v8::Platform&gt; platform = v8::platform::NewDefaultPlatform();\n  v8::V8::InitializePlatform(platform.get());\n  v8::V8::Initialize();\n  Isolate::CreateParams create_params;\n  create_params.array_buffer_allocator = v8::ArrayBuffer::Allocator::NewDefaultAllocator();\n  Isolate* isolate = Isolate::New(create_params);\n  Isolate::Scope isolate_scope(isolate);\n  HandleScope scope(isolate);\n\n  WasmModuleObjectBuilderStreaming stream(isolate);\n\n  // Use the v8 API to generate a WebAssembly module.\n  //\n  // |bytes| contains the binary format for the following module:\n  //\n  //     (func (export \"add\") (param i32 i32) (result i32)\n  //       get_local 0\n  //       get_local 1\n  //       i32.add)\n  //\n  // taken from: https://github.com/v8/v8/blob/master/samples/hello-world.cc#L66\n  std::vector&lt;uint8_t&gt; wasmbin {\n          0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01,\n          0x60, 0x02, 0x7f, 0x7f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07,\n          0x07, 0x01, 0x03, 0x61, 0x64, 0x64, 0x00, 0x00, 0x0a, 0x09, 0x01,\n          0x07, 0x00, 0x20, 0x00, 0x20, 0x01, 0x6a, 0x0b\n  };\n\n  // write bytes and finish\n  stream.OnBytesReceived(wasmbin.data(), wasmbin.size());\n  stream.Finish();\n  Local&lt;Promise&gt; promise = stream.GetPromise();\n\n  // TODO: Get exports, extract `add` &amp; call `add`\n}\n</code></pre>\n\n<p><strong>Build setup:</strong></p>\n\n<p>Follow the instruction in <em>Run the example</em> from the official <a href=\"https://v8.dev/docs/embed#run-the-example\" rel=\"nofollow noreferrer\">Getting started with embedding V8</a>. Save the code to <em>sample/wasm.cc</em> and execute following commands:</p>\n\n<pre><code>$ g++ -I. -O2 -Iinclude samples/wasm.cc -o wasm  -lv8_monolith -Lout.gn/x64.release.sample/obj/ -pthread -std=c++17`\n$ ./wasm`\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>Thanks <a href=\"https://stackoverflow.com/a/53929545\">@liliscent</a>, I adapted my example accordingly. Because we all like, working code:</p>\n\n<pre><code>#include &lt;include/v8.h&gt;\n\n#include &lt;include/libplatform/libplatform.h&gt;\n\nusing v8::HandleScope;\nusing v8::Isolate;\nusing v8::Local;\nusing v8::Promise;\nusing v8::WasmModuleObjectBuilderStreaming;\nusing v8::WasmCompiledModule;\nusing v8::Context;\nusing v8::Local;\nusing v8::Value;\nusing v8::String;\nusing v8::Object;\nusing v8::Function;\nusing v8::Int32;\nusing args_type = Local&lt;Value&gt;[];\n\nint main(int argc, char* argv[]) {\n  v8::V8::InitializeICUDefaultLocation(argv[0]);\n  v8::V8::InitializeExternalStartupData(argv[0]);\n  std::unique_ptr&lt;v8::Platform&gt; platform = v8::platform::NewDefaultPlatform();\n  v8::V8::InitializePlatform(platform.get());\n  v8::V8::Initialize();\n  Isolate::CreateParams create_params;\n  create_params.array_buffer_allocator = v8::ArrayBuffer::Allocator::NewDefaultAllocator();\n  Isolate* isolate = Isolate::New(create_params);\n  Isolate::Scope isolate_scope(isolate);\n  HandleScope scope(isolate);\n  Local&lt;Context&gt; context = Context::New(isolate);\n  Context::Scope context_scope(context);\n\n  WasmModuleObjectBuilderStreaming stream(isolate);\n\n  // Use the v8 API to generate a WebAssembly module.\n  //\n  // |bytes| contains the binary format for the following module: //\n  //     (func (export \"add\") (param i32 i32) (result i32)\n  //       get_local 0\n  //       get_local 1\n  //       i32.add)\n  //\n  // taken from: https://github.com/v8/v8/blob/master/samples/hello-world.cc#L66\n  std::vector&lt;uint8_t&gt; wasmbin {\n          0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01,\n          0x60, 0x02, 0x7f, 0x7f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07,\n          0x07, 0x01, 0x03, 0x61, 0x64, 0x64, 0x00, 0x00, 0x0a, 0x09, 0x01,\n          0x07, 0x00, 0x20, 0x00, 0x20, 0x01, 0x6a, 0x0b\n  };\n\n  // same as calling:\n  // let module = new WebAssembly.Module(bytes);\n  Local&lt;WasmCompiledModule&gt; module = WasmCompiledModule::DeserializeOrCompile(isolate,\n      WasmCompiledModule::BufferReference(0, 0),\n      WasmCompiledModule::BufferReference(wasmbin.data(), wasmbin.size())\n      ).ToLocalChecked();\n\n  // same as calling:\n  // let module_instance_exports = new WebAssembly.Instance(module).exports;\n  args_type instance_args{module};\n  Local&lt;Object&gt; module_instance_exports = context-&gt;Global()\n    -&gt;Get(context, String::NewFromUtf8(isolate, \"WebAssembly\"))\n    .ToLocalChecked().As&lt;Object&gt;()\n    -&gt;Get(context, String::NewFromUtf8(isolate, \"Instance\"))\n    .ToLocalChecked().As&lt;Object&gt;()\n    -&gt;CallAsConstructor(context, 1, instance_args)\n    .ToLocalChecked().As&lt;Object&gt;()\n    -&gt;Get(context, String::NewFromUtf8(isolate, \"exports\"))\n    .ToLocalChecked().As&lt;Object&gt;()\n    ;\n\n  // same as calling:\n  // module_instance_exports.add(77, 88)\n  args_type add_args{Int32::New(isolate, 77), Int32::New(isolate, 88)};\n  Local&lt;Int32&gt; adder_res = module_instance_exports\n    -&gt;Get(context, String::NewFromUtf8(isolate, \"add\"))\n    .ToLocalChecked().As&lt;Function&gt;()\n    -&gt;Call(context, context-&gt;Global(), 2, add_args)\n    .ToLocalChecked().As&lt;Int32&gt;();\n\n  printf(\"77 + 88 = %d\\n\", adder_res-&gt;Value());\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1545775892, "post_id": 53925934, "comment_id": 94693375, "body": "Valid indices in c++ go from <i>0 - size - 1</i>. Your <code>for()</code> loop header is wrong."}, {"owner": {"reputation": 133, "user_id": 7186287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f78fb99dc15046f60b6aa586a285706b?s=128&d=identicon&r=PG&f=1", "display_name": "gultu", "link": "https://stackoverflow.com/users/7186287/gultu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545775947, "post_id": 53925934, "comment_id": 94693385, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I did not understand. Could you please explain?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545775990, "post_id": 53925934, "comment_id": 94693393, "body": "Yoiu should replace <code>for(int j=1; j&lt;=ts.size(); j++){</code> with <code>for(int j=0; j&lt;ts.size(); j++){</code>"}, {"owner": {"reputation": 133, "user_id": 7186287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f78fb99dc15046f60b6aa586a285706b?s=128&d=identicon&r=PG&f=1", "display_name": "gultu", "link": "https://stackoverflow.com/users/7186287/gultu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545776043, "post_id": 53925934, "comment_id": 94693402, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 But I already defined the newts[0] before the for loop"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545776112, "post_id": 53925934, "comment_id": 94693413, "body": "<code>j&lt;=ts.size()</code> would be still wrong though."}, {"owner": {"reputation": 133, "user_id": 7186287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f78fb99dc15046f60b6aa586a285706b?s=128&d=identicon&r=PG&f=1", "display_name": "gultu", "link": "https://stackoverflow.com/users/7186287/gultu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545776173, "post_id": 53925934, "comment_id": 94693422, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 and according to your suggestion, even if I enter the newts[0] member inside the for loop, it gives me wrong result"}, {"owner": {"reputation": 186, "user_id": 7982776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7c41O.jpg?s=128&g=1", "display_name": "SC0RP10N.MY7H", "link": "https://stackoverflow.com/users/7982776/sc0rp10n-my7h"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545784411, "post_id": 53925934, "comment_id": 94694540, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Note that he has defined newts with size = ts.size() + 1 ...  so looping through j = 1 to j &lt;= ts.size() is still correct"}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1545790338, "post_id": 53926089, "comment_id": 94695175, "body": "How is this a solution?  You still access the vector out of bounds here: <code>else if(j&lt;= newts.size()){ nnewts[j]= newts[j]-newts[j-1];</code>.  Accessing a vector out-of-bounds is <i>undefined behavior</i> meaning anything can happen. Adding <code>T</code> does nothing except mask the existing bug you have now.  If you need to be convinced, change <code>nnewts[j]= newts[j]-newts[j-1];</code> to <code>nnewts.at(j) = newts.at(j) - newts.at(j-1);</code>. When <code>j</code> is <code>newts.size()</code>, an <code>out_of_range</code> exception will be thrown."}], "tags": [], "owner": {"reputation": 133, "user_id": 7186287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f78fb99dc15046f60b6aa586a285706b?s=128&d=identicon&r=PG&f=1", "display_name": "gultu", "link": "https://stackoverflow.com/users/7186287/gultu"}, "is_accepted": false, "score": -1, "last_activity_date": 1545902456, "last_edit_date": 1545902456, "creation_date": 1545778084, "answer_id": 53926089, "question_id": 53925934, "link": "https://stackoverflow.com/questions/53925934/last-member-of-vector-does-not-give-proper-result-in-rcpp/53926089#53926089", "title": "Last member of vector does not give proper result in Rcpp", "body": "<p>Alright, I found the solution. Just entered the double \"T\" inside the \"ts\" vector. </p>\n\n<pre><code>cppFunction(\"\n std::vector&lt;double&gt; res (std::vector&lt;double&gt; ts, double T ){\n\n          std::vector&lt;double&gt; newts(ts.size()+1);\n          newts=ts;\n          newts.insert(newts.end(),T);\n          std::vector&lt;double&gt; nnewts(newts.size());\n          for(int j=0; j&lt;newts.size(); j++){\n            if(j==0){\n              nnewts[j]=0.0;\n            }\n            else if(j&lt; newts.size()){\n            nnewts[j]= newts[j]-newts[j-1];\n            }\n\n             else{\n                nnewts[j]=0.0;\n             }\n          }\n\n        return nnewts;\n        }\n        \")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 7982776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7c41O.jpg?s=128&g=1", "display_name": "SC0RP10N.MY7H", "link": "https://stackoverflow.com/users/7982776/sc0rp10n-my7h"}, "is_accepted": false, "score": 0, "last_activity_date": 1545785677, "creation_date": 1545785677, "answer_id": 53926597, "question_id": 53925934, "link": "https://stackoverflow.com/questions/53925934/last-member-of-vector-does-not-give-proper-result-in-rcpp/53926597#53926597", "title": "Last member of vector does not give proper result in Rcpp", "body": "<p>It's better to start from the tail of the vector</p>\n\n<pre><code>std::vector&lt;double&gt; res(std::vector&lt;double&gt; ts, double T) {\n\n    std::vector&lt;double&gt; newts(ts.size() + 1);\n    newts[0] = 0.0;\n    int n = ts.size();\n    for (int j = n - 1; j &gt; 0; j--) {\n        newts[j] = ts[j] - ts[j - 1];\n    }\n\n    newts[newts.size() - 1] = T - ts[n - 1];\n\n    return newts;\n}\n</code></pre>\n\n<p>And here's the derived program</p>\n\n<pre><code>int main() {\n    std::vector&lt;double&gt; ts{ 1.061786, 1.201682, 1.265509, 1.372124, 1.572853, 1.629114, 1.660798, 1.898390, 1.908208, 1.944675 };\n    double T = 2;\n    std::vector&lt;double&gt; result = res(ts, T);\n\n    for (auto x : result)\n        std::cout &lt;&lt; x &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7186287, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f78fb99dc15046f60b6aa586a285706b?s=128&d=identicon&r=PG&f=1", "display_name": "gultu", "link": "https://stackoverflow.com/users/7186287/gultu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1545902456, "creation_date": 1545775828, "last_edit_date": 1545776364, "question_id": 53925934, "link": "https://stackoverflow.com/questions/53925934/last-member-of-vector-does-not-give-proper-result-in-rcpp", "title": "Last member of vector does not give proper result in Rcpp", "body": "<p>I have a vector named :</p>\n\n<pre><code>ts&lt;- c(1.061786, 1.201682, 1.265509, 1.372124, 1.572853, 1.629114, 1.660798, 1.898390, 1.908208, 1.944675)\n</code></pre>\n\n<p>. Now I want to make another vector from this one which gives the difference between consecutive members. And for the last value (ts[10]); the difference would be from a double \"T\". </p>\n\n<p>The code is as follows:</p>\n\n<pre><code>cppFunction(\"\n std::vector&lt;double&gt; res (std::vector&lt;double&gt; ts, double T ){\n\n          std::vector&lt;double&gt; newts(ts.size()+1);\n          newts[0]=0.0;\n          for(int j=1; j&lt;=ts.size(); j++){\n            if(j&lt; ts.size()){\n            newts[j]= ts[j]-ts[j-1];\n            }\n             else if (j== ts.size()){\n            newts[j]= T -ts[j];\n             }\n             else{\n                newts[j]=0.0;\n             }\n          }\n\n        return newts;\n        }\n        \")\n</code></pre>\n\n<p>.\nThe actual result for res(ts,T=2) should be like:</p>\n\n<pre><code>    [1] 0.000000000 0.139895661 0.063826732 0.106615236 0.200729464 0.056260681 0.031683749 0.237591892\n    [9] 0.009818105 0.036467479 0.05532473\n</code></pre>\n\n<p>. But it is giving me the result: </p>\n\n<pre><code> [1] 0.000000000 0.139895661 0.063826732 0.106615236 0.200729464 0.056260681 0.031683749 0.237591892\n [9] 0.009818105 0.036467479 2.000000000\n</code></pre>\n\n<p>That is the last member of the new vector is not correct. Why is this happening? Any suggestion?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Even if I use the following code :</p>\n\n<pre><code>cppFunction(\"\n std::vector&lt;double&gt; res (std::vector&lt;double&gt; ts, double T ){\n\n          std::vector&lt;double&gt; newts(ts.size()+1);\n\n          for(int j=0; j&lt;=ts.size(); j++){\n            if(j==0){\n              newts[j]=0.0;\n            }\n            else if(j&lt; ts.size()){\n            newts[j]= ts[j]-ts[j-1];\n            }\n             else if (j== ts.size()){\n            newts[j]= T -ts[j];\n             }\n             else{\n                newts[j]=0.0;\n             }\n          }\n\n        return newts;\n        }\n        \")\n</code></pre>\n\n<p>, it still gives me the wrong result.</p>\n"}, {"tags": ["c++", "boost", "c++14", "boost-asio"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 2, "last_activity_date": 1545783207, "creation_date": 1545783207, "answer_id": 53926452, "question_id": 53925852, "link": "https://stackoverflow.com/questions/53925852/translating-boost-asio-error-messages-to-natural-language/53926452#53926452", "title": "Translating boost (asio) error messages to natural language", "body": "<p>You should probably just use <code>system::error_code::message()</code>:</p>\n\n<pre><code>void foo(boost::system::error_code ec) {\n     std::cout &lt;&lt; \"foo called (\" &lt;&lt; ec.message() &lt;&lt; \")\\n\";\n}\n</code></pre>\n\n<p>The operator&lt;&lt; must work for all categories - which is open-ended by design, so that's why only the category name is displayed.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1545827951, "creation_date": 1545827951, "answer_id": 53932241, "question_id": 53925852, "link": "https://stackoverflow.com/questions/53925852/translating-boost-asio-error-messages-to-natural-language/53932241#53932241", "title": "Translating boost (asio) error messages to natural language", "body": "<p>I use something like this in my projects to make error reporting more informative:</p>\n\n<pre><code>#include &lt;boost/system/error_code.hpp&gt;\n#include &lt;ostream&gt;\n#include &lt;iostream&gt;\n\n\nstruct report\n{\n    report(boost::system::error_code ec) : ec(ec) {}\n\n    void operator()(std::ostream&amp; os) const\n    {\n        os &lt;&lt; ec.category().name() &lt;&lt; \" : \" &lt;&lt; ec.value() &lt;&lt; \" : \" &lt;&lt; ec.message();\n    }\n\n    boost::system::error_code ec;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, report rep)\n    {\n        rep(os);\n        return os;\n    }\n};\n\n\n\nint main()\n{\n    auto ec = boost::system::error_code(EINTR, boost::system::system_category());\n    std::cout &lt;&lt; \"the error is : \" &lt;&lt; report(ec) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>example output:</p>\n\n<pre><code>the error is : system : 4 : Interrupted system call\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/91c02689f2ca74b2\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/91c02689f2ca74b2</a></p>\n"}], "owner": {"reputation": 3037, "user_id": 833300, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4412dcb48f59881af2f24d3656770906?s=128&d=identicon&r=PG", "display_name": "jma", "link": "https://stackoverflow.com/users/833300/jma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 53932241, "answer_count": 2, "score": 0, "last_activity_date": 1545827951, "creation_date": 1545774937, "question_id": 53925852, "link": "https://stackoverflow.com/questions/53925852/translating-boost-asio-error-messages-to-natural-language", "title": "Translating boost (asio) error messages to natural language", "body": "<p>The <code>boost::system::error_code</code> has a conversion to string function that handily gives me something to print.  Unfortunately, it's typically something like \"system:9\", which isn't overly useful.  It appears, from reading source, that the numbers are established in enums, so I can test for specific conditions, but less easily know which condition has been encountered.</p>\n\n<p>It appears that passing <code>error_condition.value()</code> to <code>perror()</code> / <code>strerror()</code> happens to work, but I've not found documentation that specs that this is guaranteed.  Did I miss this?  Should I be more suspicious?</p>\n\n<p>I'm suspicious mostly because I don't understand why the string printed by <code>operator&lt;&lt;()</code> doesn't just use <code>strerror()</code> if that is guaranteed to work.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 0, "last_activity_date": 1545776620, "creation_date": 1545776620, "answer_id": 53925996, "question_id": 53925835, "link": "https://stackoverflow.com/questions/53925835/vector-2d-erase-element-and-keeping-the-field-empty/53925996#53925996", "title": "Vector 2D erase element and keeping the field empty", "body": "<p>Don't simply <code>erase</code> elements of a vector that are of a pointer types. You will cause a memory leak.</p>\n\n<p>If you want to represent an <em>empty value</em> in a <code>std::vector</code> of pointers, there is a language feature created specifically for that purpose - a <code>nullptr</code>. Instead of erasing elements, like so:</p>\n\n<pre><code>board[0].erase(board[0].begin() + 1);\n</code></pre>\n\n<p>simply <code>delete</code> it (to safely overwrite it and cause no memory leaks) and overwrite it with <code>nullptr</code>:</p>\n\n<pre><code>delete board[0][1];\nboard[0][1] = nullptr;\n</code></pre>\n\n<p>When you need to overwrite that <em>empty value</em>, you can simply do so safely:</p>\n\n<pre><code>board[0][1] = new int(10);\n</code></pre>\n\n<p>This way, you effectively remove the unwanted element from the index <code>[0][1]</code>, mark it as an <em>empty value</em> and the overwrite it with new, actual value.</p>\n"}], "owner": {"reputation": 43, "user_id": 10826247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20771edf0a097c2594af9d36e4cab1b6?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Michaan", "link": "https://stackoverflow.com/users/10826247/isaac-michaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53925996, "answer_count": 1, "score": 2, "last_activity_date": 1559676472, "creation_date": 1545774601, "last_edit_date": 1559676472, "question_id": 53925835, "link": "https://stackoverflow.com/questions/53925835/vector-2d-erase-element-and-keeping-the-field-empty", "title": "Vector 2D erase element and keeping the field empty", "body": "<p>I know I should use int instead of int*, but is just to emphasize the case, my case is a bit more complex than that.</p>\n\n<p>Let say I have as follows:</p>\n\n<pre><code>std::vector &lt; std::vector &lt;int*&gt; &gt; board;\nboard.resize(1);\nboard[0].resize(3);\nboard[0][0] = new int(5);\nboard[0][1] = new int(6);\nboard[0][2] = new int(7);\nboard[0].erase(board[0].begin() + 1);\nstd::swap(board[0][0], board[0][1]);\n</code></pre>\n\n<p>However I want to keep board[0][1] empty, so I can insert a new int(8) instead.</p>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545774833, "post_id": 53925830, "comment_id": 94693216, "body": "That error (<a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/compiler-errors-1/fatal-error-c1189?view=vs-2017\" rel=\"nofollow noreferrer\">C1189</a>) is caused by a preprocessor definition. Can you take a look at the offending file &quot;chartype.h&quot; to see why it is caused (the IDE should help color the correct preprocessor definitions)"}, {"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545775331, "post_id": 53925830, "comment_id": 94693296, "body": "@UnholySheep the error is in a #if which references a #define. As far as I can tell this constant represents whether wchar_t can be found. None of the definitions of it in the wxWidgets library are actually used as they are all found in #ifndef blocks and it seems to be already defined, maybe it is built into c++?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545775437, "post_id": 53925830, "comment_id": 94693315, "body": "Looking at the <a href=\"https://github.com/wxWidgets/wxWidgets/blob/master/include/wx/chartype.h\" rel=\"nofollow noreferrer\">source</a> this is using a custom define <code>wxUSE_WCHAR_T</code> which is definitely not built into C++. <i>Something</i>  must be setting it to <code>0</code>, either through a <code>#define</code> or possibly a definition in your project settings"}, {"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1545776317, "post_id": 53925830, "comment_id": 94693447, "body": "I changed the target to x64 and I got the same errors, except now the compiler &#39;can&#39;t open wxprec.h&#39; even though the file exists"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1545779963, "post_id": 53925830, "comment_id": 94693978, "body": "@HDSQ.mid, you said that all samples are compiled and run fine. Can you open the minimal workspace and see what it defines and what are its project properties it defines. Then look at the properties of your own project. Fix any inconsistencies. Build and run. Enjoy. BTW, it is recommended to copy the project files to the new place in order to start your own. Starting with the 3.1.1 there is a template to start a new project."}, {"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1545780258, "post_id": 53925830, "comment_id": 94694023, "body": "@Igor I just copied the project files to my source directory and they stopped working. I got the same errors as in hello world"}, {"owner": {"reputation": 92, "user_id": 5326381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea052a5d28766260d70c65a189df74b?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Versoiu", "link": "https://stackoverflow.com/users/5326381/tudor-versoiu"}, "edited": false, "score": 0, "creation_date": 1545783077, "post_id": 53925830, "comment_id": 94694382, "body": "Have you tried usnig the wxUSE_WCHAR_T definition right after the inclusion of your wx headers? I&#39;m skeptical, because the wx headers are supposed to define it regardless of your configuration in the setup header. I know it won&#39;t compile, but I hope IntelliSense will help us with that."}, {"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "reply_to_user": {"reputation": 92, "user_id": 5326381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea052a5d28766260d70c65a189df74b?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Versoiu", "link": "https://stackoverflow.com/users/5326381/tudor-versoiu"}, "edited": false, "score": 0, "creation_date": 1545783262, "post_id": 53925830, "comment_id": 94694410, "body": "@TudorVersoiu makes no difference."}, {"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "edited": false, "score": 0, "creation_date": 1545783340, "post_id": 53925830, "comment_id": 94694417, "body": "Tried rebuilding the library and I got the same error while building it :/"}, {"owner": {"reputation": 92, "user_id": 5326381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea052a5d28766260d70c65a189df74b?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Versoiu", "link": "https://stackoverflow.com/users/5326381/tudor-versoiu"}, "edited": false, "score": 0, "creation_date": 1545783663, "post_id": 53925830, "comment_id": 94694443, "body": "@HDSQ.mid I asked that because I wanted to know whether the macro definition was undefined, defined to zero, or just defined before the code that raises the error. Thanks."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1545803501, "post_id": 53925830, "comment_id": 94697086, "body": "@HDSQ.mid, you said that you copied the project files over. Did you change the properties of the project, such as &quot;Include directories&quot; and &quot;Library directories&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "edited": false, "score": 0, "creation_date": 1545781210, "post_id": 53926302, "comment_id": 94694158, "body": "When I define _UNICODE, I get a warning about redefining a declaration, so it must already be defined. same with UNICODE"}], "tags": [], "owner": {"reputation": 92, "user_id": 5326381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea052a5d28766260d70c65a189df74b?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Versoiu", "link": "https://stackoverflow.com/users/5326381/tudor-versoiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1545780975, "creation_date": 1545780975, "answer_id": 53926302, "question_id": 53925830, "link": "https://stackoverflow.com/questions/53925830/wxwidgets-hello-world-fails-to-compile-wchar-t-must-be-available/53926302#53926302", "title": "WxWidgets Hello World fails to compile: &quot;wchar_t must be available&quot;", "body": "<p>After some searching I found out that wxWidgets doesn't define wxUSE_WCHAR_T, but it does define SIZEOF_WCHAR_T. It seems odd to me.\nHowever, after some more searching I found this page:\n<a href=\"https://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide\" rel=\"nofollow noreferrer\">https://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide</a></p>\n\n<p>What seems important from here is:\nPreprocessor definitions:</p>\n\n<ul>\n<li>_UNICODE - Add this if you are using Unicode (note that this definition may be inherited from a project default - see note below)</li>\n</ul>\n\n<p>This also reminded me how stupid I am because at some point in time I read an introductory tutorial on Windows Api and it said clearly do define UNICODE if you plan on using it.</p>\n\n<pre><code>#define UNICODE // Controls the windows library definitions\n#define _UNICODE // Controls the C library definitions\n</code></pre>\n\n<p>I am not 100% sure, but I suspect that this would be the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "edited": false, "score": 0, "creation_date": 1545957170, "post_id": 53933088, "comment_id": 94743395, "body": "I installed v3.1.2 and used the .props file and then it worked perfectly! Thanks!"}], "tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": true, "score": 0, "last_activity_date": 1545832783, "creation_date": 1545832783, "answer_id": 53933088, "question_id": 53925830, "link": "https://stackoverflow.com/questions/53925830/wxwidgets-hello-world-fails-to-compile-wchar-t-must-be-available/53933088#53933088", "title": "WxWidgets Hello World fails to compile: &quot;wchar_t must be available&quot;", "body": "<p>How are you compiling the hello world example? Your image shows errors like <code>E0020</code> and <code>E0070</code> which are not standard MSVC compiler errors <em>at</em> <em>all</em> (those would be of <code>Cnnnn</code> form). You need to create a new \"Win32 application\" project and change the settings as explained in <a href=\"https://github.com/wxWidgets/wxWidgets/blob/v3.0.4/docs/msw/install.txt#L458\" rel=\"nofollow noreferrer\">the documentation</a> (as you're using MSVC, last paragraph applies to your case).</p>\n\n<p>Alternatively, download the more recent v3.1.2 and just reference the new <code>wxwidgets.props</code> file from your project as <a href=\"http://wxwidgets.org/blog/2018/11/using-wxwidgets-with-msvs/\" rel=\"nofollow noreferrer\">explained here</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6335363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c90f57b1bde535722ddc961e921f03?s=128&d=identicon&r=PG&f=1", "display_name": "HDSQ.mid", "link": "https://stackoverflow.com/users/6335363/hdsq-mid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 53933088, "answer_count": 2, "score": 0, "last_activity_date": 1545832783, "creation_date": 1545774414, "last_edit_date": 1545777763, "question_id": 53925830, "link": "https://stackoverflow.com/questions/53925830/wxwidgets-hello-world-fails-to-compile-wchar-t-must-be-available", "title": "WxWidgets Hello World fails to compile: &quot;wchar_t must be available&quot;", "body": "<p>When I try to compile the hello world application from wxWidgets in MS Visual Studio 2017 Community Edition, I get a large number of errors. I believe the key error is <code>#error: \"wchar_t must be available\"</code>. As far as I have looked there is only one other person I have found with this error, and when they asked, they didn't get any useful answers. [<a href=\"http://www.cplusplus.com/forum/windows/197245/]\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/windows/197245/]</a></p>\n\n<p>What can I do to make this program compile successfully, and how can I ensure that I don't get the same error on future (real) projects?</p>\n\n<p>I just started learning wxWidgets and I installed version 3.0.4 on my laptop. I downloaded the installer then used Visual Studio to compile the libraries as instructed. I believe the installation completed successfully as all the sample projects compiled and ran successfully. however when I tried to compile the provided hello world application in its own project, I got the aforementioned errors. I have ensured that the wxWidgets headers are being linked, although since I am new to using non-built-in libraries, I may have made a mistake. I am unsure why the sample projects would work when hello world doesn't.</p>\n\n<pre><code>// wxWidgets \"Hello World\" Program\n// For compilers that support precompilation, includes \"wx/wx.h\".\n#include &lt;wx/wxprec.h&gt;\n#ifndef WX_PRECOMP\n#include &lt;wx/wx.h&gt;\n#endif\nclass MyApp : public wxApp\n{\npublic:\n    virtual bool OnInit();\n};\nclass MyFrame : public wxFrame\n{\npublic:\n    MyFrame();\nprivate:\n    void OnHello(wxCommandEvent&amp; event);\n    void OnExit(wxCommandEvent&amp; event);\n    void OnAbout(wxCommandEvent&amp; event);\n};\nenum\n{\n    ID_Hello = 1\n};\nwxIMPLEMENT_APP(MyApp);\nbool MyApp::OnInit()\n{\n    MyFrame *frame = new MyFrame();\n    frame-&gt;Show(true);\n    return true;\n}\nMyFrame::MyFrame()\n    : wxFrame(NULL, wxID_ANY, \"Hello World\")\n{\n    wxMenu *menuFile = new wxMenu;\n    menuFile-&gt;Append(ID_Hello, \"&amp;Hello...\\tCtrl-H\",\n        \"Help string shown in status bar for this menu item\");\n    menuFile-&gt;AppendSeparator();\n    menuFile-&gt;Append(wxID_EXIT);\n    wxMenu *menuHelp = new wxMenu;\n    menuHelp-&gt;Append(wxID_ABOUT);\n    wxMenuBar *menuBar = new wxMenuBar;\n    menuBar-&gt;Append(menuFile, \"&amp;File\");\n    menuBar-&gt;Append(menuHelp, \"&amp;Help\");\n    SetMenuBar(menuBar);\n    CreateStatusBar();\n    SetStatusText(\"Welcome to wxWidgets!\");\n    Bind(wxEVT_MENU, &amp;MyFrame::OnHello, this, ID_Hello);\n    Bind(wxEVT_MENU, &amp;MyFrame::OnAbout, this, wxID_ABOUT);\n    Bind(wxEVT_MENU, &amp;MyFrame::OnExit, this, wxID_EXIT);\n}\nvoid MyFrame::OnExit(wxCommandEvent&amp; event)\n{\n    Close(true);\n}\nvoid MyFrame::OnAbout(wxCommandEvent&amp; event)\n{\n    wxMessageBox(\"This is a wxWidgets Hello World example\",\n        \"About Hello World\", wxOK | wxICON_INFORMATION);\n}\nvoid MyFrame::OnHello(wxCommandEvent&amp; event)\n{\n    wxLogMessage(\"Hello world from wxWidgets!\");\n}\n</code></pre>\n\n<p>This is an exact replica of the code available at <a href=\"https://docs.wxwidgets.org/trunk/overview_helloworld.html\" rel=\"nofollow noreferrer\">https://docs.wxwidgets.org/trunk/overview_helloworld.html</a>\nI have included the code here in case the code on the website is updated.</p>\n\n<p>As you can imagine I would expect the program to compile and run normally, but instead, I have gotten a large number of errors, all of which are listed in this image:\n<a href=\"https://media.discordapp.net/attachments/452995181667418119/527236184326275113/unknown.png\" rel=\"nofollow noreferrer\">https://media.discordapp.net/attachments/452995181667418119/527236184326275113/unknown.png</a></p>\n\n<p>Here are some interesting observations I made:</p>\n\n<ul>\n<li><p>The majority of the errors stem from the compiler not being able to find the definition of class wxFrame</p></li>\n<li><p>The class wxApp is still defined and I can inherit the class myApp from it.</p></li>\n<li><p><code>chartype.h</code> gives an error that wchar_t must be available, even though according to <a href=\"http://www.cplusplus.com/reference/cwchar/wchar_t/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cwchar/wchar_t/</a> it is built-in to c++ and I don't need to include any other headers.</p></li>\n<li><p>The error in <code>chartype.h</code> is found in this code snippet:</p></li>\n</ul>\n\n<pre><code>\n/* Unicode support requires wchar_t */\n#if !wxUSE_WCHAR_T\n    #error \"wchar_t must be available\"\n#endif /* Unicode */\n</code></pre>\n\n<ul>\n<li>As far as I can tell, the #define is never actually set in any source files I can find, but it represents whether the wchar_t type exists. I added a small variable into my code of this type and it was created fine</li>\n</ul>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "vector", "binary-data", "stdcopy"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1545774646, "post_id": 53925819, "comment_id": 94693179, "body": "Is changing the design that terrible? How much time would it take to fix a bug because of this faulty design?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1545774694, "post_id": 53925819, "comment_id": 94693190, "body": "@JVApen It&#39;s not ideal and will probably introduce a lot more bugs, since there&#39;s loads of code which depends on manipulating the BMP data at binary level"}], "answers": [{"comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545775303, "post_id": 53925883, "comment_id": 94693291, "body": "He&#39;s using <code>unsigned char</code> not <code>uint8_t</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545775537, "post_id": 53925883, "comment_id": 94693329, "body": "Also, I am sure a lot of code probably assumes this but can it be absolutely relied upon that each field of the struct will follow directly from the previous field with no padding? And can we be certain that <code>sizeof(i_head)</code> will not contain padding?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545776394, "post_id": 53925883, "comment_id": 94693459, "body": "@Galik IIRC those structures are are designed and laid out to avoid padding, since they are (and have always been) used to read and write raw binary from and to files."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545778856, "post_id": 53925883, "comment_id": 94693825, "body": "@Galik Good question: the struct actually has: <code>__attribute__((packed))</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1545824295, "post_id": 53925883, "comment_id": 94703547, "body": "Source and destination of std::cooy need not be similar, they just both need to be iterators."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1545775231, "creation_date": 1545775231, "answer_id": 53925883, "question_id": 53925819, "link": "https://stackoverflow.com/questions/53925819/binary-copy-data-from-struct-to-stdvector/53925883#53925883", "title": "binary copy data from struct to std::vector", "body": "<p>Three problems:</p>\n\n<ol>\n<li><p>You want to copy <em>bytes</em>, but the <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> function is provided a pointer to a <code>BITMAPFILEHEADER</code> (or <code>BITMAPINFOHEADER</code>) structure. You need to convert the pointers to <em>bytes</em>, like <code>reinterpret_cast&lt;uint8_t*&gt;(&amp;f_head)</code>.</p></li>\n<li><p>The previous leads to other problems with the end of the data, the expression <code>&amp;f_head + sizeof(f_head)</code> which really is equal to <code>(&amp;f_head)[sizeof(f_head)]</code>, and is way beyond the end of the structure. You need to use bytes here as well, as in <code>reinterpret_cast&lt;uint8_t*&gt;(&amp;f_head) + sizeof f_head</code>.</p></li>\n<li><p>The last problem is the destination for the <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> call, as it needs to be a similar type as the source, i.e. a pointer to <code>uint8_t</code> (in the case of my casts). You can easily get that by doing e.g. <code>&amp;memory[0]</code>. And for the second call <code>&amp;memory[sizeof f_head]</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546017091, "creation_date": 1545774262, "last_edit_date": 1545823066, "question_id": 53925819, "link": "https://stackoverflow.com/questions/53925819/binary-copy-data-from-struct-to-stdvector", "title": "binary copy data from struct to std::vector", "body": "<p>I am using a lib which can load BMP images from memory.</p>\n\n<p>I have a class which represents a BMP.</p>\n\n<p>To load from memory I have to supply a pointer to some BMP formatted data in memory and a variable for the size of that data. <code>(void* data, size_t length)</code></p>\n\n<p>I want to store my data in a <code>std::vector</code>. (Avoids manual memory management)</p>\n\n<p>I've attempted to write a function to return a <code>std::vector&lt;unsigned char&gt;</code>, but I don't think what I've got is very good.</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; BMP::BITMAP::SaveMem() const\n{\n\n    // memory storage\n    std::vector&lt;unsigned char&gt; memory;\n\n\n    BITMAPFILEHEADER f_head;\n    f_head.bfType = ushort_rev(((WORD)'B' &lt;&lt; 0x08) | ((WORD)'M' &lt;&lt; 0x00));\n    f_head.bfSize = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + m_width_memory * m_height;\n    f_head.bfReserved1 = 0;\n    f_head.bfReserved2 = 0;\n    f_head.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n\n    // build standard bitmap file header\n    BITMAPINFOHEADER i_head;\n    i_head.biSize = sizeof(BITMAPINFOHEADER);\n    i_head.biWidth = m_width;\n    i_head.biHeight = m_height;\n    i_head.biPlanes = 1;\n    i_head.biBitCount = m_bit_count;\n    i_head.biCompression = 0;\n    i_head.biSizeImage = m_width_memory * m_height;\n    i_head.biXPelsPerMeter = 0;\n    i_head.biYPelsPerMeter = 0;\n    i_head.biClrUsed = 0;\n    i_head.biClrImportant = 0;\n\n\n    // alloc\n    memory.resize(f_head.bfSize);\n\n    std::copy(&amp;f_head, &amp;f_head + sizeof(f_head), memory.at(0));\n    std::copy(&amp;i_head, &amp;i_head + sizeof(i_head), memory.at(0) + sizeof(f_head));\n\n\n    // write data\n    for(unsigned int y = 0; y &lt; m_height; ++ y)\n    {\n        std::copy(&amp;m_data[y * m_width_memory], m_data[y * m_width_memory + 3 * m_size_x], memory.at(0) + sizeof(f_head) + sizeof(i_head));\n    }\n\n}\n</code></pre>\n\n<p>Clearly this doesn't compile. I can't think of any alternative to <code>std::copy</code>. Is this really the right tool for the job?</p>\n\n<p>To make it compile I think I should change <code>memory.at(x)</code> to <code>memory.data() + x</code>... By doing this I would be using raw pointers - which is why I don't think <code>std::copy</code> is any better than <code>memcpy</code>.</p>\n\n<p>Could I have some advice on this? It's somewhat an illogical task and had I known about this requirement earlier I would have stored my pixel data in an <code>unsigned char</code> with the bitmap file headers preceeding the data. Unfortunatly it will be a lot of work to change the design now, so I'd rather not touch it.</p>\n"}, {"tags": ["c++", "gcc", "g++", "mingw", "eclipse-cdt"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545773421, "post_id": 53925699, "comment_id": 94692987, "body": "Path of least resistance is to add the mingw bin folder to the system path and then rebooting the computer. There are likely less intrusive ways to get Eclipse to detect mingw, but brute force has  always worked for me in the past"}, {"owner": {"reputation": 11, "user_id": 10833010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YIRpNHhCZAI/AAAAAAAAAAI/AAAAAAAAAaU/mCLwEFKVC44/photo.jpg?sz=128", "display_name": "Kshitij Varshney", "link": "https://stackoverflow.com/users/10833010/kshitij-varshney"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545799081, "post_id": 53925699, "comment_id": 94696302, "body": "@user4581301 Actually Eclipse does detects the MinGW as before changing the path environment variable, it gave a make not found error which got resolved after I added the path for its binaries in the variable, and yes I did reboot my system after doing that..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545800065, "post_id": 53925699, "comment_id": 94696445, "body": "My apologies. <code>make</code> not found. <code>make</code> is not a part of gcc. For <code>make</code> you will have to install <code>msys2</code> or a similar toolkit."}, {"owner": {"reputation": 11, "user_id": 10833010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YIRpNHhCZAI/AAAAAAAAAAI/AAAAAAAAAaU/mCLwEFKVC44/photo.jpg?sz=128", "display_name": "Kshitij Varshney", "link": "https://stackoverflow.com/users/10833010/kshitij-varshney"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545800360, "post_id": 53925699, "comment_id": 94696486, "body": "@user4581301 Msys Installation did came with MinGW developer toolkit bin ...I actually installed the whole basic setup and it does includes Msys :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545800609, "post_id": 53925699, "comment_id": 94696517, "body": "Can you run <code>make</code> from a regular command prompt?"}, {"owner": {"reputation": 11, "user_id": 10833010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YIRpNHhCZAI/AAAAAAAAAAI/AAAAAAAAAaU/mCLwEFKVC44/photo.jpg?sz=128", "display_name": "Kshitij Varshney", "link": "https://stackoverflow.com/users/10833010/kshitij-varshney"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545801240, "post_id": 53925699, "comment_id": 94696635, "body": "@user4581301 Well if I change the directory to that of msys then yes...however it will just show makefile not found (plus I may not have understood what you said as I am very new to this, i don&#39;t have much knowledge of setting up compilers)"}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1545807347, "post_id": 53925699, "comment_id": 94698078, "body": "I haven&#39;t used Windows in a long time, but my recollection is that MSYS has its own <code>PATH</code> distinct from the Windows system <code>PATH</code>, so the problem may be that the directory containing <code>g++.exe</code> is not in the MSYS <code>PATH</code>."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1545807392, "post_id": 53925699, "comment_id": 94698091, "body": "(Note: based on the error message, it&#39;s <code>g++</code> that can&#39;t be found, not <code>make</code>. The <code>make: *** [src&#47;TEST2.o] Error 127</code> part was likely on a separate line, and gets output any time an error occurs while running a makefile.)"}, {"owner": {"reputation": 11, "user_id": 10833010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YIRpNHhCZAI/AAAAAAAAAAI/AAAAAAAAAaU/mCLwEFKVC44/photo.jpg?sz=128", "display_name": "Kshitij Varshney", "link": "https://stackoverflow.com/users/10833010/kshitij-varshney"}, "reply_to_user": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1545807649, "post_id": 53925699, "comment_id": 94698144, "body": "@HighCommander4 Yess...it is in a separate line and the problem is I don&#39;t know why there&#39;s a  g++ command not found error even after installing and setting everything up exactly as described by eclipse forum itself"}], "owner": {"reputation": 11, "user_id": 10833010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YIRpNHhCZAI/AAAAAAAAAAI/AAAAAAAAAaU/mCLwEFKVC44/photo.jpg?sz=128", "display_name": "Kshitij Varshney", "link": "https://stackoverflow.com/users/10833010/kshitij-varshney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545822301, "creation_date": 1545772949, "last_edit_date": 1545822301, "question_id": 53925699, "link": "https://stackoverflow.com/questions/53925699/eclipse-cpp-g-command-not-found-mingw-cdt-installed", "title": "Eclipse Cpp g++ command not found (MinGW &amp; CDT Installed)", "body": "<p>I am very new in using Eclipse as an IDE and I am facing many problems in configuring it. I may also be asking a few problems that may already be on forum but believe me I've tried almost all that I could have. SO coming towards the problem, I made a simple Hello World program for C++ to test out my config and YES I have installed MinGW and CDT. I have also edited the path environment variable for MinGW, and I chose MinGW GCC as toolchain while creating it and still my simple HELLO WORLD is giving me the error:</p>\n\n<blockquote>\n  <p>/bin/sh: g++: command not found  make: *** [src/TEST2.o] Error 127</p>\n</blockquote>\n\n<p>I have no idea what I have missed in between and it would be very helpful if someone would help me out correctly config my Eclipse :)</p>\n\n<p>PS: I don't know if changing the tool(compiler) in Tool chain editor affects the process but I tried it as well...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545771144, "post_id": 53925543, "comment_id": 94692671, "body": "Your code has <i>undefined behavior</i>, so each little change might lead to different behavior."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1545771306, "post_id": 53925543, "comment_id": 94692698, "body": "<code>int n = 0;     int num[n];</code> is invalid, and even with VLA extension, array of size 0... use <code>std::vector</code> instead."}, {"owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545772237, "post_id": 53925543, "comment_id": 94692825, "body": "@Jarod42 works!!! Thank you so much."}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1545772296, "creation_date": 1545772296, "answer_id": 53925650, "question_id": 53925543, "link": "https://stackoverflow.com/questions/53925543/c-why-cout-is-so-important-here/53925650#53925650", "title": "c++ why cout is so important here?", "body": "<p>Problem is:int n = 0; int num[n]\nUsing vector solved problem. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main(int argc, const char * argv[])\n{\n    int n = 0;\n    //int num[n];\n    vector&lt;int&gt; v;\n\n\n\n    cout &lt;&lt; \"Enter a set of integers: \"&lt;&lt; endl;\n    cin &gt;&gt; n;\n    int num;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt; num;\n        v.push_back(num);\n    }\n    cout &lt;&lt; \"num of arrays: \"&lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; v[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n\n\n    for(int i = 0; i &lt; n; i++)\n    {\n        int numOfOnes = 0;\n        int reminder = 0;\n\n        if(v[i] &lt;= 0)\n        {\n            numOfOnes = 0;\n        }\n\n            while (v[i] &gt; 0)\n            {\n                reminder = v[i] % 2;\n                v[i] = v[i] / 2;\n                //cout &lt;&lt;\" Reminder = \"&lt;&lt; reminder&lt;&lt;endl;\n\n                if( reminder == 1)\n                {\n                    numOfOnes++;\n                }\n            }\n        cout &lt;&lt;\"Number of ones= \"&lt;&lt; numOfOnes &lt;&lt; endl;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545773264, "post_id": 53925662, "comment_id": 94692959, "body": "Method 2 is not supported by Standard C++ (at least as of the 2017 revision) and is not guaranteed to work on all C++ compilers. For example, <code>int num[n];</code> will be rejected by Visual Studio."}, {"owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545776200, "post_id": 53925662, "comment_id": 94693429, "body": "It is working now! @user4581301 So I shouldn&#39;t use this method then"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545776790, "post_id": 53925662, "comment_id": 94693510, "body": "I prefer not to, but if your compiler supports variable length arrays by extension, use them with caution. The user can easily specify a value that causes <code>num</code> to exceed the space left on the stack for weird and sometimes difficult to spot results. <code>vector</code> will generate a an exception to warn you if you ask for too much. Variable length array leaves you to find out the hard way."}, {"owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545854065, "post_id": 53925662, "comment_id": 94713108, "body": "@user4581301 got it! Thank you so much"}], "tags": [], "owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "is_accepted": true, "score": 0, "last_activity_date": 1545772504, "creation_date": 1545772504, "answer_id": 53925662, "question_id": 53925543, "link": "https://stackoverflow.com/questions/53925543/c-why-cout-is-so-important-here/53925662#53925662", "title": "c++ why cout is so important here?", "body": "<p>Method 2:\nJust change the  position of: int num[n];</p>\n\n<p>#include \n    using namespace std;</p>\n\n<pre><code>int main(int argc, const char * argv[])\n{\n\n    // method 1:\n\n    int n;\n    cout &lt;&lt; \"Enter a set of integers: \"&lt;&lt; endl;\n    cin &gt;&gt; n;\n    int num[n];\n    for (int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt; num[i];\n    }\n    cout &lt;&lt; \"num of arrays: \"&lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; num[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n    for(int i = 0; i &lt; n; i++)\n    {\n        int reminder = 0;\n        int numOfOnes = 0;\n        if(num[i] &lt;= 0)\n        {\n            numOfOnes = 0;\n        }\n        else\n        {\n            while (num[i] &gt; 0)\n            {\n                reminder = num[i] % 2;\n                num[i] = num[i] / 2;\n                //cout &lt;&lt;\" Reminder = \"&lt;&lt; reminder&lt;&lt;endl;\n\n                if( reminder == 1)\n                {\n                    numOfOnes++;\n                }\n            }\n        }\n        cout &lt;&lt;\"Number of ones= \"&lt;&lt; numOfOnes &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 8288930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-SmqxOAXJUsM/AAAAAAAAAAI/AAAAAAAAAAk/Qk6rSvChE0U/photo.jpg?sz=128", "display_name": "XIAOLONG LI", "link": "https://stackoverflow.com/users/8288930/xiaolong-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 53925662, "answer_count": 2, "score": -7, "last_activity_date": 1545772504, "creation_date": 1545770997, "question_id": 53925543, "link": "https://stackoverflow.com/questions/53925543/c-why-cout-is-so-important-here", "title": "c++ why cout is so important here?", "body": "<p>Given a decimal integer N, find the number of 1 in the corresponding binary number.\nI am trying to find out how many 1 in a binary number from a integer.\nHowever I stuck here with or without cout.</p>\n\n<p>So I want to know what is role does ' cout &lt;&lt;\" Reminder = \"&lt;&lt; reminder&lt;\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(int argc, const char * argv[])\n{\n    int n = 0;\n    int num[n];\n\n\n\n    cout &lt;&lt; \"Enter a set of integers: \"&lt;&lt; endl;\n    cin &gt;&gt; n;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt; num[i];\n    }\n    cout &lt;&lt; \"num of arrays: \"&lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; num[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n    for(int i = 0; i &lt; n; i++)\n    {\n         int reminder = 0;\n         int numOfOnes = 0;\n        if(num[i] &lt;= 0)\n        {\n            numOfOnes = 0;\n        }\n        else\n        {\n            while (num[i] &gt; 0)\n            {\n                reminder = num[i] % 2;\n                num[i] = num[i] / 2;\n                cout &lt;&lt;\" Reminder = \"&lt;&lt; reminder&lt;&lt;endl;\n\n                if( reminder == 1)\n                {\n                    numOfOnes++;\n                }\n            }\n        }\n        cout &lt;&lt;\"Number of ones= \"&lt;&lt; numOfOnes &lt;&lt; endl;\n    }\n\n\n}\n</code></pre>\n\n<p>Print:</p>\n\n<pre><code>num of arrays: \n2 100 1000 66 0 \n Reminder = 0\n Reminder = 1\nNumber of ones= 1\n Reminder = 0\n Reminder = 0\n Reminder = 1\n Reminder = 0\n Reminder = 0\n Reminder = 1\n Reminder = 1\nNumber of ones= 3\n Reminder = 0\n Reminder = 0\n Reminder = 0\n Reminder = 1\n Reminder = 0\n Reminder = 1\n Reminder = 1\n Reminder = 1\n Reminder = 1\n Reminder = 1\nNumber of ones= 6\n Reminder = 0\n Reminder = 1\n Reminder = 0\n Reminder = 0\n Reminder = 0\n Reminder = 0\n Reminder = 1\nNumber of ones= 2\nNumber of ones= 0\n</code></pre>\n\n<p>However if I don't have 'cout &lt;&lt;\" Reminder = \"&lt;&lt; reminder&lt;\n\n<pre><code>Number of ones= 1\nNumber of ones= 3\nNumber of ones= 0\nNumber of ones= 15\nNumber of ones= 0\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "fstream", "codeguard"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1545770633, "post_id": 53925488, "comment_id": 94692593, "body": "Are you sure that the file is actually opened? And if you provide flags of any kind when opening the file, you actually need to add the open-mode as well (<code>in</code> or <code>out</code>)."}, {"owner": {"reputation": 75, "user_id": 2508647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f194f421c788ac21b32b2957402da22b?s=128&d=identicon&r=PG", "display_name": "Ig_M", "link": "https://stackoverflow.com/users/2508647/ig-m"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1545775926, "post_id": 53925488, "comment_id": 94693381, "body": "Yes, I am sure. Data was written to file. Changing to: ofstream myfile(&quot;d:/output.txt&quot;, std::ofstream::binary | std::ofstream::out); didn&#39;t help."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1545776531, "post_id": 53925488, "comment_id": 94693478, "body": "Unrelated to your problem, but what use is the <code>buffer</code> pointer and the memory you allocate dynamically? Why not simply write out the <code>data</code> array directly?"}, {"owner": {"reputation": 75, "user_id": 2508647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f194f421c788ac21b32b2957402da22b?s=128&d=identicon&r=PG", "display_name": "Ig_M", "link": "https://stackoverflow.com/users/2508647/ig-m"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1545777087, "post_id": 53925488, "comment_id": 94693552, "body": "It is only to simulate filling the buffer with data. But even if write out the data array directly, CodeGuard still generates these 2 errors. If you have installed the C++Builder, please check this code with CodeGuard enabled."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1545961126, "post_id": 53925488, "comment_id": 94744070, "body": "@Someprogrammerdude <code>ofstream</code> sets the <code>out</code> flag automatically, no need to set it manually."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545961183, "post_id": 53925488, "comment_id": 94744082, "body": "@IgorMarchenko the code is fine, except that you are not checking if the file is actually open before you write to it. Apparently that is failing, that is what the error is complaining about. For instance, you might not have write access to the root of <code>d:</code>, so the file fails to be created. You need to add a check for open failure before calling <code>write()</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545996009, "post_id": 53925488, "comment_id": 94753004, "body": "@RemyLebeau It&#39;s set as the default argument for the mode in the constructor. But is it specified that the <code>std::ofstream</code> constructor always will set it even if the default argument is overridden (as in the OP&#39;s example)?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546020024, "post_id": 53925488, "comment_id": 94762632, "body": "@Someprogrammerdude yes, it is. <code>ofstream</code> OR&#39;s the <code>out</code> flag with whatever the caller passes in. Same with <code>ifstream</code> and the <code>in</code> flag"}, {"owner": {"reputation": 75, "user_id": 2508647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f194f421c788ac21b32b2957402da22b?s=128&d=identicon&r=PG", "display_name": "Ig_M", "link": "https://stackoverflow.com/users/2508647/ig-m"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1546089470, "post_id": 53925488, "comment_id": 94777241, "body": "@RemyLebeau, see upd-1. It is look like CodeGuard&#39;s bug."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1546105402, "post_id": 53925488, "comment_id": 94781348, "body": "@IgorMarchenko doesn&#39;t surprise me. CodeGuard is notoriously buggy, I stopped using it years ago"}, {"owner": {"reputation": 75, "user_id": 2508647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f194f421c788ac21b32b2957402da22b?s=128&d=identicon&r=PG", "display_name": "Ig_M", "link": "https://stackoverflow.com/users/2508647/ig-m"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1546110887, "post_id": 53925488, "comment_id": 94782755, "body": "@RemyLebeau, OK. Is there an alternative tool for C++ Builder to replace the CodeGuard?"}], "owner": {"reputation": 75, "user_id": 2508647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f194f421c788ac21b32b2957402da22b?s=128&d=identicon&r=PG", "display_name": "Ig_M", "link": "https://stackoverflow.com/users/2508647/ig-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546089364, "creation_date": 1545770288, "last_edit_date": 1546089364, "question_id": 53925488, "link": "https://stackoverflow.com/questions/53925488/writing-data-to-file-and-codeguard-error-notifications", "title": "Writing data to file and CodeGuard error notifications", "body": "<p>While writing data to the file and closing the file, CodeGuard generates errors.</p>\n\n<pre><code>char *buffer = new char[10];\nchar data[] = \"abcdefghij\";\nmemcpy(&amp;buffer[0], &amp;data[0], 10);\n\n//create file\nofstream myfile(\"d:/output.txt\", std::ofstream::binary);\n\n//write data\nmyfile.write(&amp;buffer[0], 10);//at this line the CodeGuard throws an ERROR-1\n\ndelete []buffer;\n\nmyfile.close();//at this line the CodeGuard throws an ERROR-2\n</code></pre>\n\n<blockquote>\n  <p>ERROR-1: Bad parameter in process: Project1.exe(3916)  - c:\\program files (x86)\\embarcadero\\studio\\15.0\\include\\dinkumware\\fstream#246\n    A bad file or pipe stream (0x320D096C) has been passed to the function.\n    0x0040AC80 Call to fputc(0x61 ['a'], 0x320D096C)</p>\n  \n  <p>ERROR-2: Bad parameter in process: Project1.exe(3916)  - c:\\program files (x86)\\embarcadero\\studio\\15.0\\include\\dinkumware\\fstream#180\n    A bad file stream (0x320D096C) has been passed to the function.\n    0x32088358 Call to [via 0x0040D030] fclose(0x320D096C)</p>\n</blockquote>\n\n<p>How to fix it?</p>\n\n<p><strong>Upd-1:</strong></p>\n\n<pre><code>ofstream myfile(\"d:/output.txt\", std::ofstream::binary | std::ofstream::out);\nchar buffer[] = \"abcdefghij\";\n\n    // \n    if(myfile.is_open())\n    {\n    myfile.write(reinterpret_cast&lt;char*&gt;(&amp;buffer[0]), 11);//+1 for \\0\n    }\n\nmyfile.close();\n</code></pre>\n\n<p>But result is still the same.</p>\n\n<p>I tried to use sample code from <a href=\"http://www.cplusplus.com/reference/ostream/ostream/write/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/ostream/ostream/write/</a></p>\n\n<p>And now CodeGuard throws next errors:</p>\n\n<blockquote>\n  <p>ERROR-1: Bad parameter in process:\n  Project1.exe(5908) A bad file or pipe stream (0x3224096C) has been\n  passed to the function. 0x0040DE48 Call to fseek(0x3224096C, 0x0 [0],\n  0x2 [2])</p>\n  \n  <p>ERROR-2: Bad parameter in process: Project1.exe(5908) A bad file or pipe stream\n  (0x3224096C) has been passed to the function. 0x0040DE48 Call to\n  fgetpos(0x3224096C, 0x0018F294)</p>\n  \n  <p>ERROR-3: Bad parameter in process: Project1.exe(5908) A bad file or pipe stream\n  (0x3224096C) has been passed to the function. 0x0040DE48 Call to\n  fsetpos(0x3224096C, 0x0018F28C)</p>\n  \n  <p>ERROR-4: Bad parameter in process: Project1.exe(5908) A bad file or pipe stream\n  (0x3224096C) has been passed to the function. 0x0040DE48 Call to\n  fgetc(0x3224096C)</p>\n  \n  <p>ERROR-5: Bad parameter in process: Project1.exe(5908) A bad file or pipe stream\n  (0x32240984) has been passed to the function. 0x0040DE48 Call to\n  fputc(0x78 ['x'], 0x32240984)</p>\n  \n  <p>ERROR-6: Bad parameter in process: Project1.exe(5908) A bad file stream\n  (0x32240984) has been passed to the function. 0x321F832C Call to [via\n  0x0041177E] fclose(0x32240984)</p>\n</blockquote>\n\n<p>I have tested this code on C++Builder XE7, XE8 and \u0421++Builder 10.1 Berlin. And in all cases CodeGuard detected these errors.</p>\n"}, {"tags": ["c++", "c++17", "assignment-operator", "any", "noexcept"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1545793572, "last_edit_date": 1545793572, "creation_date": 1545770648, "answer_id": 53925511, "question_id": 53925450, "link": "https://stackoverflow.com/questions/53925450/why-stdany-operator-for-valuetype-is-not-conditionally-noexcept/53925511#53925511", "title": "Why std::any &amp; operator= for ValueType is not conditionally noexcept?", "body": "<p>The literal answer is that such a specification would be recursive (you're saying the assignment should be <code>noexcept</code> if the assignment is <code>noexcept</code>).</p>\n\n<p>But the probably more useful answer is that since <code>any</code> may have to allocate, you could only really have <code>noexcept</code> assignment in the case that <code>decay_t&lt;ValueType&gt;</code> is</p>\n\n<ul>\n<li>sufficiently small (so as to not need allocation), and</li>\n<li>nothrow move constructible, and</li>\n<li>nothrow constructible from <code>ValueType</code></li>\n</ul>\n\n<p>The only way to specify the <code>noexcept</code> condition would require you to also specify what \"sufficiently small\" means - which would limit implementation freedom, for questionable gain.</p>\n\n<p>The standard library doesn't typically use conditional noexcept - so why would this be the... exception?</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1545771218, "post_id": 53925537, "comment_id": 94692685, "body": "I feel like this doesn&#39;t really answer the question. Yes, it is true that <code>decay_t&lt;ValueType&gt;</code> has to be copy constructible. So?"}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1545771469, "post_id": 53925537, "comment_id": 94692716, "body": "Can an operator be defined <code>noexcept</code> even if the effect of it is to throw whatever throws the copy constructor of <code>T</code> ?"}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 1, "last_activity_date": 1545776071, "last_edit_date": 1592644375, "creation_date": 1545770882, "answer_id": 53925537, "question_id": 53925450, "link": "https://stackoverflow.com/questions/53925450/why-stdany-operator-for-valuetype-is-not-conditionally-noexcept/53925537#53925537", "title": "Why std::any &amp; operator= for ValueType is not conditionally noexcept?", "body": "<blockquote>\n<p><code>template&lt;class T&gt; any&amp; operator=(T&amp;&amp; rhs);</code></p>\n<p><strong><a href=\"http://eel.is/c++draft/any#assign-12\" rel=\"nofollow noreferrer\">[any.assign]/12</a></strong> - Throws: Any exception thrown by the selected constructor of VT.</p>\n</blockquote>\n<p>The overload you showed only participate in overload resolution if <code>ValueType</code> is copy constructible, which leave the door open for the copy construction of <code>ValueType</code> to throw during the <code>std::any</code> assignment.</p>\n<p>Note that you're also showing a <code>noexcept</code> specification defined in terms of the same operation being defined.</p>\n"}], "owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 53925511, "answer_count": 2, "score": 3, "last_activity_date": 1545793572, "creation_date": 1545769906, "last_edit_date": 1545775358, "question_id": 53925450, "link": "https://stackoverflow.com/questions/53925450/why-stdany-operator-for-valuetype-is-not-conditionally-noexcept", "title": "Why std::any &amp; operator= for ValueType is not conditionally noexcept?", "body": "<p>The question is quite simple.</p>\n\n<p>This is the declaration of templated operator= for <code>std::any</code>:</p>\n\n<pre><code>template&lt;typename ValueType&gt;\nany&amp; operator=( ValueType&amp;&amp; rhs );\n</code></pre>\n\n<p>I would expect it to be:</p>\n\n<pre><code>template&lt;typename ValueType&gt;\nany&amp; operator=( ValueType&amp;&amp; rhs ) noexcept(noexcept(std::declval&lt;std::any&gt;() = std::forward&lt;ValueType&gt;(std::declval&lt;ValueType&gt;()));\n</code></pre>\n\n<p>Namely, if you can copy-assign ValueType to any in a noexcept fashion, then you should be able to have noexcept. </p>\n\n<p>Maybe I am missing something.</p>\n"}, {"tags": ["c++", "templates", "virtual-functions", "static-polymorphism", "static-dispatch"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545769985, "post_id": 53925448, "comment_id": 94692468, "body": "Look at the <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a> how to do that."}, {"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545770025, "post_id": 53925448, "comment_id": 94692477, "body": "I wrote quite clearly that CRTP would not suffice for the reasons provided in the post. Namely, I cannot have a pointer to a MessageSubscriber&lt;MessageTypeA&gt; and a pointer to a MessageSubscriber&lt;MessageTypeB&gt; coexist in the subscribers vector."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545770249, "post_id": 53925448, "comment_id": 94692519, "body": "The usual CRTP implementation uses a <code>static_cast&lt;Derived*&gt;(this)</code> an I cannot see why that can&#39;t be used in your implementation. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which shows the problems that would give you please."}, {"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545770331, "post_id": 53925448, "comment_id": 94692539, "body": "Sure, but how does that address the main problem with having different types in the same vector? That problem will still exist under your proposed solution, no? Casting to Derived before putting into the subscribers vector would create different types in the vector which is not allowed. The other alternative would require some way of doing the cast inside OnMessage(), but since there is no way to know the derived types (there are many), then that also fails."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545770926, "post_id": 53925448, "comment_id": 94692637, "body": "You may still have a non-template common base class to store pointers in that vector."}, {"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545771104, "post_id": 53925448, "comment_id": 94692663, "body": "How would that work with the the need to overload OnMessage() for the MessageSubscribers? Maybe I&#39;m being an idiot but I don&#39;t see how that would work. Could you provide an example please?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545771239, "post_id": 53925448, "comment_id": 94692690, "body": "Still  the same <code>static_cast&lt;Derived*&gt;(this)</code> idiom I mentioned above."}, {"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545771533, "post_id": 53925448, "comment_id": 94692722, "body": "Where? How? When you suggested this earlier I wrote that of the two places where the cast would be performed, neither would be sufficient."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "edited": false, "score": 0, "creation_date": 1545771870, "post_id": 53925551, "comment_id": 94692776, "body": "Thanks for your suggestion, Paul, but I am really trying to do everything with templates if possible."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "edited": false, "score": 1, "creation_date": 1545772045, "post_id": 53925551, "comment_id": 94692788, "body": "I don&#39;t see how you can, since some of the decisions you need to make are only known at runtime (if I understand the question correctly)."}, {"owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "edited": false, "score": 0, "creation_date": 1545772181, "post_id": 53925551, "comment_id": 94692813, "body": "I am sufficiently stumped indeed. Do you have any insight as to why my attempt at specializing/overloading the member function templates does not work as intended?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "edited": false, "score": 1, "creation_date": 1545772444, "post_id": 53925551, "comment_id": 94692843, "body": "For the reason I just gave?  Templates evaluate types known at compile time only."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1545771161, "creation_date": 1545771161, "answer_id": 53925551, "question_id": 53925448, "link": "https://stackoverflow.com/questions/53925448/c-static-polymorphism-referencing-specialized-template-methods-overloaded-in/53925551#53925551", "title": "C++ Static Polymorphism\u2013\u2013Referencing Specialized Template Methods Overloaded In Derived Class From Base Class Pointer", "body": "<p>You can cut out one level of indirection by using C-style function pointers in place of virtual functions.  Thus, in the declaration of your base class you might have something like:</p>\n\n<pre><code>void (*) OnMessage (BaseClass *self, MessageType *message);\n</code></pre>\n\n<p>You then initialise this instance variable in each of your derived classes' constructors to point to the appropriate static member function, which in turn allows you to call it via a single indirect call (as opposed to two if you went via the vtable).</p>\n\n<p>Finally, sadly, you will need to cast <code>self</code> in each of the target functions in the derived classes, which is the price you pay for all this trickery.  Either that or cast the function signature when assigning the function pointer.  I will post a fuller example if interested - let me know.</p>\n"}], "owner": {"reputation": 9, "user_id": 10832815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8b2920bd677852504eea6bd7014fd1?s=128&d=identicon&r=PG&f=1", "display_name": "photon19", "link": "https://stackoverflow.com/users/10832815/photon19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545771161, "creation_date": 1545769898, "question_id": 53925448, "link": "https://stackoverflow.com/questions/53925448/c-static-polymorphism-referencing-specialized-template-methods-overloaded-in", "title": "C++ Static Polymorphism\u2013\u2013Referencing Specialized Template Methods Overloaded In Derived Class From Base Class Pointer", "body": "<p>I am implementing a variation of the observer pattern in C++. However, because of the nature of the nature of my project, it <strong>CANNOT USE ANY VIRTUAL MEMBER FUNCTIONS</strong>, as the aggregate overhead from vtable lookups and cache misses is unacceptable.</p>\n\n<p>Were I to create interfaces via virtual member functions, I would trivially write the following:</p>\n\n<pre><code>template &lt;class MessageType&gt;\nclass MessageSubscriber {\npublic:\n  virtual void OnMessage(MessageType *message) = 0;\n};\n\ntemplate &lt;class MessageType&gt;\nclass MessagePublisher {\npublic:\n  void AddSubscriber(MessageSubscriber&lt;MessageType&gt; *subscriber) {\n    subscribers.push_back(subscriber);\n  } \n\nprotected:\n  void Publish(MessageType *message) {\n    for (auto subscriber : subscribers)\n      subscriber.OnMessage(message);\n  }\n\nprivate:\n  std::vector&lt;MessageSubscriber&lt;MessageType&gt;*&gt; subscribers;\n};\n</code></pre>\n\n<p>Then, for example, I could have classes that implement <code>MessageSubscriber</code> for some <code>MessageType</code>, <code>SafetyMessage</code>, like so:  </p>\n\n<pre><code>class SafetyMessageSubscriberA : public MessageSubscriber&lt;SafetyMessage&gt; {\npublic:\n  virtual void OnMessage(SafetyMessage *message) override {\n    /* process message */\n  }\n};\n\nclass SafetyMessageSubscriberB : public MessageSubscriber&lt;SafetyMessage&gt; {\npublic:\n  virtual void OnMessage(SafetyMessage *message) override {\n    /* process message */\n  }\n};\n\nclass SafetyMessagePublisher : public MessagePublisher&lt;SafetyMessage&gt; {\npublic:\n  void Run {\n    /* manipulate message data */\n    this-&gt;Publish(&amp;message);\n  }\nprivate:\n  SafetyMessage message;\n};\n</code></pre>\n\n<p>This would get the job done, but, as emphasized earlier, the vtable lookup overhead is unacceptable in the context of the application despite the polymorphic convenience that it provides and is also needed for the application. Naturally, then, I tried several approaches centering around the static polymorphism that can be leveraged through templates.</p>\n\n<p>I first tried to utilize CTRP, but it fails in this case because the pointers contained in <code>MessagePublisher::subscribers</code> must point to the same base class when <code>MessagePublisher::Publish(MessageType *message)</code> is called. Ergo, you could not have some CTRP pattern along the lines of  <code>MessageSubscriber&lt;SafetyMessageSubscriberA&gt;</code>, <code>MessageSubscriber&lt;SafetyMessageSubscriberB&gt;</code>, as the template arguments would need to be the same for both objects to legally be allowed in <code>MessagePublisher::subscribers</code>.</p>\n\n<p>My most recent attempt at the problem has lead me to try some variations of member function template specialization, albeit unsuccessfully. I have tried the following variation on the pattern interface:</p>\n\n<pre><code>class MessageSubscriber {\npublic:\n  template &lt;class MessageType&gt;\n  void OnMessage(MessageType *message);\n};\n\nclass MessagePublisher {\npublic:\n  template &lt;class MessageType&gt;\n  void Publish(MessageType *message) {\n    for (auto subscriber: subscribers)\n      subscriber-&gt;OnMessage&lt;MessageType&gt;(message);   \n  }\n\nprivate:\n  std::vector&lt;MessageSubscriber*&gt; subscribers;\n};\n\ntemplate&lt;class MessageType&gt; \nvoid MessageSubscriber::OnMessageOnMessage(MessageType *message) {\n  /* \"interface\" call; do nothing */\n}\n</code></pre>\n\n<p>With implementations such as:</p>\n\n<pre><code>class SafetyMessageSubscriberA : public MessageSubscriber {\npublic:\n  // declare for legal overload\n  template &lt;class MessageType&gt;\n  void OnMessage(MessageType *message);\n};\n\nclass SafetyMessageSubscriberB : public MessageSubscriber {\npublic:  \n  // declare for legal overload\n  template &lt;class MessageType&gt;\n  void OnMessage(MessageType *message);  \n};\n\ntemplate&lt;&gt;\nvoid SafetyMessageSubscriberA::OnMessage&lt;SafetyMessage*&gt;OnMessage(SafetyMessage *message) {\n  /* process message */\n}\n\ntemplate&lt;&gt; \nvoid SafetyMessageSubscriberB::OnMessage&lt;SafetyMessage*&gt;OnMessage(SafetyMessage *message) {\n  /* process message */\n}\n</code></pre>\n\n<p>When I tried this, however, <code>MessagePublisher::Publish(SafetyMessage *message)</code> would always call the generic <code>MessageSubscriber::OnMessage(MessageType *m)</code>implementation for the base class, not the ones that were implemented for the derived classes specific to <code>SafetyMessage*</code>.</p>\n\n<p>Am I incorrectly specializing the function templates as intended, or is there another more efficient solution? I apologize in advance for any imprecise wording as it relates to the concepts of overloading and member template specialization.</p>\n"}, {"tags": ["c++", "operators", "union"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545768587, "post_id": 53925316, "comment_id": 94692180, "body": "I suspect the way you are using a union is undefined behavior."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545768718, "post_id": 53925316, "comment_id": 94692203, "body": "<code>struct rgb {...};</code> seems to be a typo. If you replace it with <code>struct {...} rgb;</code> then you indeed get UB."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545770206, "post_id": 53925316, "comment_id": 94692512, "body": "@HolyBlackCat why is it UB?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545770353, "post_id": 53925316, "comment_id": 94692547, "body": "More precisely, it&#39;s doesn&#39;t give you UB immediately, but rather when you try to access an inactive union member: <a href=\"https://stackoverflow.com/questions/11373203/accessing-inactive-union-member-and-undefined-behavior\" title=\"accessing inactive union member and undefined behavior\">stackoverflow.com/questions/11373203/&hellip;</a>"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545770578, "post_id": 53925316, "comment_id": 94692586, "body": "@HolyBlackCat I&#39;m confused, so in my example code above, if I access a different member other than the last one set it <i>is</i> UB? (C++11/14/17 ?)"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545770747, "post_id": 53925316, "comment_id": 94692608, "body": "If you <i>read</i> from a member different than the one that was last written to, then yes, you get UB. In all C++ standards."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545770898, "post_id": 53925316, "comment_id": 94692633, "body": "@HolyBlackCat Ok I&#39;ll ask a new question about this"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545771793, "post_id": 53925316, "comment_id": 94692766, "body": "@HolyBlackCat Asked my question - it got immediatly closed, but the linked duplicate which imo isn&#39;t duplicate suggests this is NOT UB. What do you think? <a href=\"https://stackoverflow.com/questions/53925554/c-i-think-my-union-may-be-producing-undefined-behaviour?noredirect=1#comment94692703_53925554\" title=\"c i think my union may be producing undefined behaviour\">stackoverflow.com/questions/53925554/&hellip;</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545773966, "post_id": 53925316, "comment_id": 94693079, "body": "The linked <a href=\"https://stackoverflow.com/a/36080743/2752075\">answer</a> doesn&#39;t say it&#39;s not UB. That answer provides a standard quote that would&#39;ve made it well-defined if it was applicable, but the answer says that the quote doesn&#39;t apply in that case."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545769010, "post_id": 53925364, "comment_id": 94692261, "body": "Worth noting that the compiler error received was likely because the asker left out the operator&#39;s return type."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545769053, "post_id": 53925364, "comment_id": 94692271, "body": "@user4581301 It&#39;s very likely"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1545769183, "post_id": 53925364, "comment_id": 94692302, "body": "@user4581301 - the OP&#39;s code as shown did not even declare the operator within the class definition, but tried to define it outside.   That would not work."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1545770192, "post_id": 53925364, "comment_id": 94692505, "body": "Yeah it was just pseduocode guys - but what I have in my actual code is quite similar"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 1, "creation_date": 1545770421, "post_id": 53925364, "comment_id": 94692562, "body": "@user3728501 Try to be as exact as possible otherwise you will get answers focused on the minutia that the example gets wrong that may have been right in the original code."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 3, "last_activity_date": 1545768909, "creation_date": 1545768909, "answer_id": 53925364, "question_id": 53925316, "link": "https://stackoverflow.com/questions/53925316/can-i-declare-operators-inside-a-union/53925364#53925364", "title": "Can I declare operators inside a union?", "body": "<p>You can define the operator inside the union, it's possible</p>\n\n<pre><code>union PixelRGB {\n    ...\n    PixelRGB&amp; operator&amp;=(const PixelRGB&amp; other) {\n        return *this;\n    }\n};\n</code></pre>\n\n<p>or outside</p>\n\n<pre><code>PixelRGB&amp; operator&amp;=(PixelRGB&amp; self, const PixelRGB&amp; other) {\n    return self;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545770212, "post_id": 53925427, "comment_id": 94692513, "body": "Handy reading: <a href=\"https://stackoverflow.com/questions/2253878/why-does-c-disallow-anonymous-structs\">Why does C++ disallow anonymous structs?</a>"}], "tags": [], "owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1545771656, "last_edit_date": 1545771656, "creation_date": 1545769628, "answer_id": 53925427, "question_id": 53925316, "link": "https://stackoverflow.com/questions/53925316/can-i-declare-operators-inside-a-union/53925427#53925427", "title": "Can I declare operators inside a union?", "body": "<p>The problem is not with the operator, but with way you access the union. You can try this combination:</p>\n\n<pre><code>union PixelRGB\n{\n    uint8_t array[3];\n    struct {\n        uint8_t b;\n        uint8_t g;\n        uint8_t r;\n    };\n};\n\n\nPixelRGB&amp; operator&amp;=(PixelRGB&amp; self, const PixelRGB&amp; other) {\n    self.r = other.r;\n    self.g = other.g;\n    self.b = other.b;\n\n    return self;\n}\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>union PixelRGB\n{\n    uint8_t array[3];\n    struct {\n        uint8_t b;\n        uint8_t g;\n        uint8_t r;\n    };\n\n    PixelRGB&amp; operator&amp;=( const PixelRGB&amp; other) {\n        r = other.r;\n        g = other.g;\n        b = other.b;\n\n        return *this;\n    }\n};\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>union PixelRGB\n{\n    uint8_t array[3];\n    struct {\n        uint8_t b;\n        uint8_t g;\n        uint8_t r;\n    };\n\n    PixelRGB&amp; operator&amp;=( const PixelRGB&amp; other);\n};\n\n\nPixelRGB&amp; PixelRGB::operator&amp;=( const PixelRGB&amp; other) {\n    r = other.r;\n    g = other.g;\n    b = other.b;\n\n    return *this;\n}\n</code></pre>\n\n<p>Note:\nanonymous struct has been introduced in C11</p>\n\n<p><a href=\"https://en.cppreference.com/w/c/language/struct\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/language/struct</a></p>\n\n<p>but it is not standard in C++ even though it is supported by multiple compilers.</p>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1549132999, "creation_date": 1545768381, "last_edit_date": 1549132999, "question_id": 53925316, "link": "https://stackoverflow.com/questions/53925316/can-i-declare-operators-inside-a-union", "title": "Can I declare operators inside a union?", "body": "<p>Question about unions, since I rarely use them.</p>\n\n<p>I am using a union to represent rgb pixel data, so it can be accessed as a continual array of <code>uint8_t</code> or as individual rgb elements. (I think this is probably one of the few uses for unions.)</p>\n\n<p>Something like this:</p>\n\n<pre><code>union PixelRGB\n{\n    uint8_t array[3];\n    struct rgb\n    {\n        uint8_t b;\n        uint8_t g;\n        uint8_t r;\n    };\n};\n</code></pre>\n\n<p>I've realized it would be nice to be able to apply operations like \"and\" and \"or\" on my pixel data. I'd like to do something like</p>\n\n<pre><code>PixelRGB::operator&amp;=(const PixelRGB other)\n{\n    this-&gt;rgb.r = other.r;\n    this-&gt;rgb.g = other.g;\n    this-&gt;rgb.b = other.b;\n}\n</code></pre>\n\n<p>I tried putting an operator like this in the union but as far as I'm aware that's not allowed in C++. (I also got a compiler error when compiling - so from this I assume it is not allowed.)</p>\n\n<p>One possible solution I've considered is wrapping the union in a class and then adding operators to that class. This is somewhat unpleasant with namespace/name-scope however.</p>\n\n<p>Are there any other solutions?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1545773811, "post_id": 53925130, "comment_id": 94693053, "body": "Two consecutive calls of <code>setPixmap</code> won&#39;t make the trick. It&#39;s either you implement your own <code>paintEvent()</code> or just use QGraphicsScene (possible overkill, depending on what you make the drawing for)"}, {"owner": {"reputation": 436, "user_id": 2562173, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/8qCQm.png?s=128&g=1", "display_name": "Angel.Risteski", "link": "https://stackoverflow.com/users/2562173/angel-risteski"}, "edited": false, "score": 0, "creation_date": 1545814309, "post_id": 53925130, "comment_id": 94700038, "body": "One way is to merge 2 images into 1: <a href=\"https://stackoverflow.com/questions/18998850/how-to-merge-two-images-into-one-using-qimage-and-qpainter-in-qt\" title=\"how to merge two images into one using qimage and qpainter in qt\">stackoverflow.com/questions/18998850/&hellip;</a>  And other way is to add second QLabel and set pixmap of the car in the separate QLabel"}, {"owner": {"reputation": 3, "user_id": 4281235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1LN-U8_H9qA/AAAAAAAAAAI/AAAAAAAAACE/nceGMrUnkGo/photo.jpg?sz=128", "display_name": "Sanket Mahajan", "link": "https://stackoverflow.com/users/4281235/sanket-mahajan"}, "reply_to_user": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1546511374, "post_id": 53925130, "comment_id": 94876872, "body": "Thanks for the reply!!  As per @MasterAler I have implemented my own way paintevent() using <b>Qpainter</b>."}, {"owner": {"reputation": 3, "user_id": 4281235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1LN-U8_H9qA/AAAAAAAAAAI/AAAAAAAAACE/nceGMrUnkGo/photo.jpg?sz=128", "display_name": "Sanket Mahajan", "link": "https://stackoverflow.com/users/4281235/sanket-mahajan"}, "reply_to_user": {"reputation": 436, "user_id": 2562173, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/8qCQm.png?s=128&g=1", "display_name": "Angel.Risteski", "link": "https://stackoverflow.com/users/2562173/angel-risteski"}, "edited": false, "score": 0, "creation_date": 1546511379, "post_id": 53925130, "comment_id": 94876876, "body": "@Angel.Risteski the Link you provided helped. I used <b>setCompositionMode</b> and after that <b>drawImage</b>."}], "owner": {"reputation": 3, "user_id": 4281235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1LN-U8_H9qA/AAAAAAAAAAI/AAAAAAAAACE/nceGMrUnkGo/photo.jpg?sz=128", "display_name": "Sanket Mahajan", "link": "https://stackoverflow.com/users/4281235/sanket-mahajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545768641, "creation_date": 1545766469, "last_edit_date": 1545768641, "question_id": 53925130, "link": "https://stackoverflow.com/questions/53925130/how-to-move-one-image-on-background-image-in-qt", "title": "how to move one image on background image in Qt", "body": "<p>I'm trying to load 2 images in Qlabel. I want overlay car image</p>\n\n<p><img src=\"https://i.stack.imgur.com/1YThj.png\" alt=\"\"></p>\n\n<p>on background image</p>\n\n<p><img src=\"https://i.stack.imgur.com/gGNbk.png\" alt=\"\"></p>\n\n<p>at a specific location lets say (x,y). I'm using Qt5.5.1. I'm calculating displacement of the car. Now I want to update the displacement of car on background image. This is how I load the images on button clicked</p>\n\n<pre><code>void MainWindow::on_pushButtonLdImg_clicked()\n{\n    QPixmap pixmap(imagePath);\n    QPixmap pixmapcar(imagePathCar);\n    ui-&gt;labelMainImg-&gt;setPixmap(pixmap);\n    ui-&gt;labelMainImg-&gt;setPixmap(pixmapcar);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++17"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 4, "creation_date": 1545765848, "post_id": 53925056, "comment_id": 94691620, "body": "That quote you quoted continues with <code>, see copy elision.</code>"}, {"owner": {"reputation": 3375, "user_id": 1977182, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0329819d1cfd8d00c4bddc535abe1c94?s=128&d=identicon&r=PG", "display_name": "B M", "link": "https://stackoverflow.com/users/1977182/b-m"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1545776603, "post_id": 53925056, "comment_id": 94693488, "body": "My first question might be partially covered by <code>copy elision</code>, but the second one is not."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1545778609, "post_id": 53925056, "comment_id": 94693785, "body": "@BM: The reasoning is &quot;copy elision is good&quot;. Do you need another reasoning? Why would you <i>want</i> to waste runtime performance copying something that doesn&#39;t need to be copied?"}], "owner": {"reputation": 3375, "user_id": 1977182, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0329819d1cfd8d00c4bddc535abe1c94?s=128&d=identicon&r=PG", "display_name": "B M", "link": "https://stackoverflow.com/users/1977182/b-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "closed_date": 1545766134, "answer_count": 0, "score": 2, "last_activity_date": 1545765743, "creation_date": 1545765743, "question_id": 53925056, "link": "https://stackoverflow.com/questions/53925056/why-does-c17-never-move-construct-with-prvalues", "closed_reason": "Duplicate", "title": "Why does C++17 never move construct with prvalues?", "body": "<p>The <a href=\"https://en.cppreference.com/w/cpp/language/move_constructor\" rel=\"nofollow noreferrer\">cppreference</a> says that</p>\n\n<blockquote>\n  <p>When the initializer is a prvalue, the move constructor call is often optimized out (until C++17) / never made (since C++17).</p>\n</blockquote>\n\n<p>I have two questions:</p>\n\n<p>1) Does this mean that construction with literals (e.g. integer <code>10</code>) will never move construct?</p>\n\n<p>2) What's the reasoning for this rule?</p>\n"}, {"tags": ["c++", "memory-alignment", "struct-member-alignment"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1545766275, "post_id": 53925039, "comment_id": 94691741, "body": "there is no such way. Use a non-inherited struct with <code>char pBuf[]</code> as the last member and allocate it with corresponding sizes when needed."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1545767007, "post_id": 53925039, "comment_id": 94691889, "body": "IMHO, use a buffer, such as <code>uint8_t</code>, to transfer data.  Write methods that load a <code>class</code> / <code>struct</code> from the buffer.  Don&#39;t use classes or structures for direct transfer, due to padding, alignment, and vtable issues (among other possibilities)."}, {"owner": {"reputation": 1178, "user_id": 1406668, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/T4b1f.jpg?s=128&g=1", "display_name": "Dave M.", "link": "https://stackoverflow.com/users/1406668/dave-m"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1545802470, "post_id": 53925039, "comment_id": 94696865, "body": "Thanks, @Serge.  After more digging around, I think you&#39;re right: there&#39;s no language-guaranteed way to do this.  (Of course, you can get it to work with any particular compiler, and maybe with a good range of compilers, but it&#39;s not required by the spec.) . So although it pains me to include <code>memcpy()</code> in the &quot;prepare for transmission&quot; code path, the alternative (custom assembly?) is worse.  And CPUs are faster than networks these days anyway."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1545838524, "post_id": 53925039, "comment_id": 94708206, "body": "@DaveM you can use unions for array mapping."}], "owner": {"reputation": 1178, "user_id": 1406668, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/T4b1f.jpg?s=128&g=1", "display_name": "Dave M.", "link": "https://stackoverflow.com/users/1406668/dave-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1545765536, "creation_date": 1545765536, "question_id": 53925039, "link": "https://stackoverflow.com/questions/53925039/is-there-a-guaranteed-way-to-avoid-padding-between-base-and-derived-class", "title": "Is there a guaranteed way to avoid padding between base and derived class?", "body": "<p>I'm working on a network program that will deal with packets having a header portion and a payload portion.  The header is variable-length, with extension segments added or removed depending on network conditions.  The user data portion is a plain byte buffer, although it may be treated as some sort of structure or other during packet construction or use.</p>\n\n<p>I would like to have a base class that builds &amp; manipulates the header, with the header bytes (possibly) shifted forwards or backwards if necessary to insert an extension field, and a derived class containing the user data.  For example:</p>\n\n<pre><code>class hdr {\n    public:\n        const void *start( void ) { return uint8_t(pBuf) + sizeof(pBuf) - SIZEOF_HEADER - pExtBytes; }\n    private:\n        size_t   pExtBytes;\n        uint32_t pBuf[16]; // header data goes here, shifted to the END of the buffer, adjacent the beginning of the derived class\n        // NO PADDING HERE!\n} ;\n\nclass payload1 : public hdr {\n    public:\n    private:\n        uint8_t pData[128];\n} ;\n\nclass payload2 : public hdr {\n    public:\n    private:\n        uint16_t pData[12];\n} ;\n</code></pre>\n\n<p>Is there a standard way to <em>guarantee</em> that there's no padding between <code>hdr</code> and <code>payload1</code> or <code>payload2</code>, so that I can pass <code>start()</code> to <code>write()</code> and have the header and contiguous payload transmitted out the network?  For example, if <code>(sizeof(hdr) % BIG_STANDARD_ALIGNMENT) == 0)</code> then derived classes of <code>hdr</code> will start without any extra padding?</p>\n\n<p>An alternative is to use scatter/gather I/O, but that seems like a complicated setup, and I'm not sure it works to gather packet-fragments together for transmission in a single UDP packet.</p>\n"}]