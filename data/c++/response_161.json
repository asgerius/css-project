[{"tags": ["c++", "sockets", "networking", "udp", "p2p"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1518050721, "post_id": 48675267, "comment_id": 84349893, "body": "I&#39;m pretty sure the double-NAT is killing you."}, {"owner": {"reputation": 11, "user_id": 8174216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b4ea60dd2b8bf7ad4fcd4e125cb38e?s=128&d=identicon&r=PG&f=1", "display_name": "SmallSharky", "link": "https://stackoverflow.com/users/8174216/smallsharky"}, "reply_to_user": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1518050985, "post_id": 48675267, "comment_id": 84349967, "body": "@RonMaupin, yes, you&#39;re right. Solution:  make port forwarding in home router before trying to accept data."}], "answers": [{"comments": [{"owner": {"reputation": 34798, "user_id": 1362755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97aa8c37ffa60c4262955aefae56e605?s=128&d=identicon&r=PG", "display_name": "the8472", "link": "https://stackoverflow.com/users/1362755/the8472"}, "edited": false, "score": 0, "creation_date": 1518120763, "post_id": 48675896, "comment_id": 84386437, "body": "you should look into hole punching"}], "tags": [], "owner": {"reputation": 11, "user_id": 8174216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b4ea60dd2b8bf7ad4fcd4e125cb38e?s=128&d=identicon&r=PG&f=1", "display_name": "SmallSharky", "link": "https://stackoverflow.com/users/8174216/smallsharky"}, "is_accepted": false, "score": 1, "last_activity_date": 1518059096, "last_edit_date": 1518059096, "creation_date": 1518051952, "answer_id": 48675896, "question_id": 48675267, "link": "https://stackoverflow.com/questions/48675267/udp-over-nat-fail/48675896#48675896", "title": "UDP over NAT fail", "body": "<p>Problem is in double NAT. Home routers (from network diagram) rejecting packets if you have no configured port forwarding.</p>\n\n<p>Follow this steps to work over double NAT:</p>\n\n<ol>\n<li><p>select local port to receive packets.</p></li>\n<li><p>try to bind port. (if failed then return to step 1)</p></li>\n<li><p>configure port forwarding in home router using NAT-PMP or UPnP IGD.</p></li>\n<li><p>use STUN to get your external IP and port</p></li>\n<li><p>share data from step 4 to another program instance</p></li>\n<li><p>send and/or receive UDP packets</p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8174216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b4ea60dd2b8bf7ad4fcd4e125cb38e?s=128&d=identicon&r=PG&f=1", "display_name": "SmallSharky", "link": "https://stackoverflow.com/users/8174216/smallsharky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518059096, "creation_date": 1518047574, "last_edit_date": 1518047881, "question_id": 48675267, "link": "https://stackoverflow.com/questions/48675267/udp-over-nat-fail", "title": "UDP over NAT fail", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;cstdio&gt;\n#include &lt;cerrno&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;string&gt;\n\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\n#include &lt;thread&gt;\n#include \"STUN.h\"\n\nbool do_work = true;\nusing namespace std;\n\nvoid receiver(int sock) {\n    //boost::asio::io_service&amp; s\n    sockaddr_in from_adr;\n    std::cout &lt;&lt; \"START: receiver\\n\";\n    size_t blen = 2048;\n    char * buf = new char[blen];\n    unsigned slen = sizeof(from_adr);\n\n    if (recvfrom(sock, (void *) buf, blen, 0, (sockaddr*) &amp;from_adr, &amp;slen)\n            &lt; 0) {\n        std::cout &lt;&lt; \"Recv problem\\n\";\n        exit(0);\n    }\n    do_work = false;\n    std::cout &lt;&lt; \"STOP: receiver\\n\";\n}\n\nvoid sender(sockaddr_in * to, int sock) {\n    std::cout &lt;&lt; \"START: sender\\n\";\n\n    while (do_work) {\n        if (sendto(sock, \"OK\", 3, 0, (sockaddr*) to, sizeof(sockaddr)) &lt; 0) {\n            std::cout &lt;&lt; \"SEND PROBLEM\\n\";\n            return;\n        }\n        sleep(1);\n    }\n    std::cout &lt;&lt; \"RECEIVED!!!\\n\\n\\n\";\n    exit(0);\n}\n\nint main(int argc, char* argv[]) {\n    if (argc != 2) {\n        std::cerr &lt;&lt; \"Usage: udp-flood-test &lt;port&gt;\\n\";\n        return 1;\n    }\n    ippd stun_adr;\n    stun_adr.addr = \"64.233.161.127\";\n    stun_adr.port = 19302;\n    STUN stun(stun_adr);\n\n    std::string eip;\n    uint16_t epp;\n\n    uint16_t lp = std::atoi(argv[1]);\n\n    ippd sti = stun.getSTUN(lp);\n    std::cout &lt;&lt; \"External address: \" &lt;&lt; sti.addr &lt;&lt; \":\" &lt;&lt; sti.port &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Internal address: \" &lt;&lt; \"127.0.0.1:\" &lt;&lt; lp &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Write external ip: \";\n    std::cin &gt;&gt; eip;\n    std::cout &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Write external port: \";\n    std::cin &gt;&gt; epp;\n    std::cout &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"OK. I'll send data to \" &lt;&lt; eip &lt;&lt; \":\" &lt;&lt; epp &lt;&lt; \"\\n\";\n\n    int m_sock;                     // \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0440 \u0441\u043e\u043a\u0435\u0442\u0430\n    sockaddr_in m_addr;             // \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0430\u0434\u0440\u0435\u0441\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\n    std::string my_addr = \"0.0.0.0\";             // \u0410\u0434\u0440\u0435\u0441 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\n\n    /* \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043a\u0435\u0442\u0430 \u0438 \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0440\u0443 \u0441\u043e\u043a\u0435\u0442\u0430 \u0434\u043b\u044f UDP \u043f\u0430\u043a\u0435\u0442\u043e\u0432\n     * PF_INET    - IP protocol family\n     * SOCK_DGRAM - Raw protocol interface */\n    if ((m_sock = socket(PF_INET, SOCK_DGRAM, 0)) &lt; 0) {\n        perror(\"socket\");\n        return -1;\n    }\n\n    /* \u041e\u0431\u043d\u0443\u043b\u044f\u0435\u043c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e m_addr \u0438 \u0437\u0430\u0431\u0438\u0432\u0430\u0435\u043c \u0435\u0451 \u043d\u0443\u0436\u043d\u044b\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 */\n    memset(&amp;m_addr, 0, sizeof(m_addr));\n    m_addr.sin_family = AF_INET;  // \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e AF_INET!\n    m_addr.sin_port = htons(lp); // 0 - \u0432\u044b\u0434\u0430\u0442\u044c \u043f\u043e\u0440\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c\n    /* \u041f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u043c \u0430\u0434\u0440\u0435\u0441 \u0432 \u043d\u0443\u0436\u043d\u044b\u0439 \u043d\u0430\u043c \u0444\u043e\u0440\u043c\u0430\u0442 */\n    if (inet_aton(my_addr.c_str(), &amp;m_addr.sin_addr) == 0) {\n        perror(\"inet_aton\");\n        close(m_sock);\n        return -1;\n    }\n\n    /* \u0411\u0438\u043d\u0434\u0438\u043c \u0441\u043e\u043a\u0435\u0442 */\n    if (bind(m_sock, (struct sockaddr*) &amp;m_addr, sizeof(m_addr)) &lt; 0) {\n        perror(\"bind\");\n        close(m_sock);\n        return -1;\n    }\n    sockaddr_in to_addr;\n    memset(&amp;to_addr, 0, sizeof(to_addr));\n    to_addr.sin_family = AF_INET;\n    to_addr.sin_port = htons(epp);\n    if (inet_aton(eip.c_str(), &amp;to_addr.sin_addr) == 0) {\n        perror(\"inet_aton\");\n        close(m_sock);\n        return -1;\n    }\n\n    std::thread inp(receiver, m_sock);\n    std::thread oup(sender, &amp;to_addr, m_sock);\n\n    oup.detach();\n    inp.detach();\n    while (1) {\n        sleep(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It's a simple test program to get external ip and port over STUN and send data from peer A to peer B (and from B to A).</p>\n\n<p>So program works fine if I set IPs and ports as 127.0.0.1:port or local_network_ip:port.</p>\n\n<p>If I set IP received from STUN server peer A will send UDP packets to peer B. And B will send packets to A. But A and B haven't any incoming packets. In Wireshark I can see outgoing packets too, but no incoming.</p>\n\n<p>Network connection diagram:</p>\n\n<p>A (pc with active test program) - NAT (home router) - ... - NAT (internet provider) - internet - NAT (another internet provider) - ... - NAT (another home router) - B (another pc with active test program)</p>\n\n<p>Maybe I'm doing something wrong?..</p>\n\n<p>Where can I find a problem?</p>\n"}, {"tags": ["c++", "visual-studio-2017", "wxwidgets", "propertysheet"], "comments": [{"owner": {"reputation": 5668, "user_id": 1430705, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9506189ea17aabbf0e847fe365e8054f?s=128&d=identicon&r=PG", "display_name": "Karlovsky120", "link": "https://stackoverflow.com/users/1430705/karlovsky120"}, "edited": false, "score": 3, "creation_date": 1518048184, "post_id": 48675210, "comment_id": 84349189, "body": "How the hell is it not clear what I&#39;m asking?"}], "answers": [{"comments": [{"owner": {"reputation": 5668, "user_id": 1430705, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9506189ea17aabbf0e847fe365e8054f?s=128&d=identicon&r=PG", "display_name": "Karlovsky120", "link": "https://stackoverflow.com/users/1430705/karlovsky120"}, "edited": false, "score": 0, "creation_date": 1518117474, "post_id": 48675567, "comment_id": 84384708, "body": "It&#39;s a step in the right direction, but I can&#39;t really do anythin here. I tried to compile wxWidgets with the sln provided, and I still got an error though, making me believe that this is a problem with my system setup, not solution setup..."}, {"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1538962231, "post_id": 48675567, "comment_id": 92315365, "body": "This is the right answer. Also check <a href=\"https://stackoverflow.com/a/6617068/4743275\">this</a> out. It&#39;s easy. Basically the properties from the property sheet that is located towards the top are those of the project properties (unless the project has specific properties). It will work. Good feature of MSVS actually (once you get to know it). If that doesn&#39;t work for you then you&#39;ve probably made manual adjustments to project/solution xml-like files or there might be something else entirely."}], "tags": [], "owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "is_accepted": true, "score": 5, "last_activity_date": 1518049666, "creation_date": 1518049666, "answer_id": 48675567, "question_id": 48675210, "link": "https://stackoverflow.com/questions/48675210/vs2017-property-sheet-ordering/48675567#48675567", "title": "VS2017 Property sheet ordering", "body": "<p>Disclaimer: I haven't got a clue about your issue ,just trying to help you (the OP) !</p>\n\n<p>In the IDE ,under menu <strong>View</strong> ,select <strong>other windows</strong>. \nThere select <strong>Property Manager</strong> ,which let you manipulate property sheets in your projects.\nRight-click on a property-sheet. Some sheets have a menu which let you move the sheet up or down.</p>\n\n<p>I suggest to play around with that. It might just solve your issue.\nI could be completely wrong of course.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 1843689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815415144936052399ad31359b38a15b?s=128&d=identicon&r=PG", "display_name": "marcelloptr", "link": "https://stackoverflow.com/users/1843689/marcelloptr"}, "is_accepted": false, "score": 1, "last_activity_date": 1520987589, "creation_date": 1520987589, "answer_id": 49268035, "question_id": 48675210, "link": "https://stackoverflow.com/questions/48675210/vs2017-property-sheet-ordering/49268035#49268035", "title": "VS2017 Property sheet ordering", "body": "<p>I had the same problem, with  a different library though.</p>\n\n<p>The cause for me was that in the project that I converted, the configuration that I was compiling with was not present in the props file</p>\n\n<p><em>C:\\Users\\\\AppData\\Local\\Microsoft\\MSBuild\\v4.0\\Microsoft.Cpp.x64.user.props</em></p>\n\n<p>For example, in the vcxproj file I had</p>\n\n<pre><code>&lt;ProjectConfiguration Include=\"DLL Release|x64\"&gt;\n  &lt;Configuration&gt;DLL Release&lt;/Configuration&gt;\n  &lt;Platform&gt;x64&lt;/Platform&gt;\n&lt;/ProjectConfiguration&gt;\n</code></pre>\n\n<p>but in the props file I only had:</p>\n\n<pre><code>  &lt;ItemDefinitionGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|x64'\"&gt;\n    &lt;ClCompile&gt;\n      &lt;PreprocessorDefinitions&gt;MYMACRO1;MYMACRO2;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;\n    &lt;/ClCompile&gt;\n  &lt;/ItemDefinitionGroup&gt;\n</code></pre>\n\n<p>I just added a similar entry for 'DLL Release|x64' and that fixed it.</p>\n\n<p>Definitely the warning message is not very helpful in this case.</p>\n"}], "owner": {"reputation": 5668, "user_id": 1430705, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9506189ea17aabbf0e847fe365e8054f?s=128&d=identicon&r=PG", "display_name": "Karlovsky120", "link": "https://stackoverflow.com/users/1430705/karlovsky120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "accepted_answer_id": 48675567, "answer_count": 2, "score": 2, "last_activity_date": 1520987589, "creation_date": 1518047060, "last_edit_date": 1518048553, "question_id": 48675210, "link": "https://stackoverflow.com/questions/48675210/vs2017-property-sheet-ordering", "title": "VS2017 Property sheet ordering", "body": "<p>So, I have a project in VS2017, and VS2017 has recently received an update. I have then added all the wxWidgets modules as projects to my initial solution and have dealt with build order so they're built in the proper order.</p>\n\n<p>However, I always get this error:</p>\n\n<pre><code>C:\\Programs\\Visual Studio 2017\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.Common.props(144,5): warning\nMSB4211: The property \"WindowsTargetPlatformVersion\" is being set to a value for the first time, but it was already consumed at\n\"C:\\Programs\\Visual Studio 2017\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.WindowsSDK.props (29,5)\".\n</code></pre>\n\n<p>I've found this thread and the article linked in it: <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/e7dd9b64-f3a1-4647-b084-025dabc8c1ec/warning-msb4211-the-property-windowstargetplatformversion-is-being-set-to-a-value-for-the-first?forum=msbuild\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>but it doesn't tell me how to fix it. From what I can tell, the properties for individual project are not evaluated in an order they should be evaluated.</p>\n\n<p>How do I define the property sheet ordering? What exactly do I need to change?</p>\n\n<p>Also not that I cannot change the project files or anything connected to wxWidgets since it's a submodule in my repository and any changes done cannot be saved to the repo.</p>\n"}, {"tags": ["c++", "function", "arguments", "user-input", "parking"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1518047187, "post_id": 48675202, "comment_id": 84348947, "body": "<code>cin&gt;&gt;entry_time</code> won&#39;t compile. You&#39;re missing the semicolon and <code>entry_time</code> is never declared. Please show us code that we can compile."}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1518047307, "post_id": 48675202, "comment_id": 84348984, "body": "Okay, thanks for pointing that out. I added an &#39;int entry_time = 0;&#39; and &#39;int exit_time = 0;&#39; to the main function. I had a function that used entry_time and exit_time as arguments. I am confused when it comes to the whole function and argument things."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1518047715, "post_id": 48675202, "comment_id": 84349066, "body": "Write and test one function at a time. Right now you&#39;ve got a mess of syntax and logic errors that are going to play off one another and force you to do way more work than is necessary to untangle them all. Write a few lines, compile, fix errors. Repeat until you have a function done. Test the function. Do not proceed until you&#39;ve proved that there are no errors in the function. Rush and maybe you save a bit of time, but it&#39;s more likely that waste time instead."}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518048107, "post_id": 48675202, "comment_id": 84349167, "body": "Okay, thanks. I&#39;ve got a question that may help. Can I call a function I&#39;ve already defined? Like how I&#39;ve defined the &quot;elapsed_time&quot; function. I am wanting to use the information there inside &quot;parking_charge&quot;. I did &quot;int total = elapsed_time()&quot;, which is showing that it does not work. How would I go about that?"}, {"owner": {"reputation": 673, "user_id": 2051953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ad063b5c79e2eda7ed0bb429bedb73?s=128&d=identicon&r=PG", "display_name": "agbinfo", "link": "https://stackoverflow.com/users/2051953/agbinfo"}, "edited": false, "score": 0, "creation_date": 1518048501, "post_id": 48675202, "comment_id": 84349275, "body": "@Trev.Drumm Yes you can call elapsed_time(). In parking_charge(), the second test should be &quot;else if (total &lt; 120)&quot;"}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518048693, "post_id": 48675202, "comment_id": 84349335, "body": "When I try to call it, I am getting an error saying &quot;error: no matching function for call to to &#39;elapsed_time&#39;"}, {"owner": {"reputation": 673, "user_id": 2051953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ad063b5c79e2eda7ed0bb429bedb73?s=128&d=identicon&r=PG", "display_name": "agbinfo", "link": "https://stackoverflow.com/users/2051953/agbinfo"}, "edited": false, "score": 0, "creation_date": 1518048754, "post_id": 48675202, "comment_id": 84349346, "body": "elapased_time() takes 2 parameters. You provided none."}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518048907, "post_id": 48675202, "comment_id": 84349389, "body": "Like I said earlier, im very confused when it comes to the functions and its parameters. How do I know what two parameters to use when calling it? do I use entry and exit time again?"}, {"owner": {"reputation": 673, "user_id": 2051953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ad063b5c79e2eda7ed0bb429bedb73?s=128&d=identicon&r=PG", "display_name": "agbinfo", "link": "https://stackoverflow.com/users/2051953/agbinfo"}, "edited": false, "score": 0, "creation_date": 1518049173, "post_id": 48675202, "comment_id": 84349458, "body": "In main(), you call print_results() with 2 arguments. You need to calculate these values before calling print_results. To do so, just before calling print_results, you can add 2 lines : &quot;int total_minutes = elapsed_time(entry_time, exit_time);&quot; and &quot;double charge = parking_charge(total_minutes);&quot;"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1518053894, "post_id": 48675202, "comment_id": 84350681, "body": "Do you have a constraint that people cannot park there for more than a day? Otherwise your time keeping methodology is broken due to wrap around at 24h marker.  <code>time_t</code> is guaranteed to be an arithmetic type and can keep track of any reasonable amount of time someone would park there."}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518061596, "post_id": 48675202, "comment_id": 84352515, "body": "Justin, we are assuming that the person is only parking there for one day. Thanks for that tip though, it will be useful in future programs!"}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "reply_to_user": {"reputation": 673, "user_id": 2051953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ad063b5c79e2eda7ed0bb429bedb73?s=128&d=identicon&r=PG", "display_name": "agbinfo", "link": "https://stackoverflow.com/users/2051953/agbinfo"}, "edited": false, "score": 0, "creation_date": 1518062141, "post_id": 48675202, "comment_id": 84352627, "body": "@Agbinfo, I did what you said and now my only error is saying: error: invalid operands to binary expression (&#39;ostream&#39; (aka &#39;basic_ostream&lt;char&gt;&#39;) and &#39;void&#39;)&quot; Would you know what this means?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518060607, "post_id": 48676846, "comment_id": 84352299, "body": "Hey, thanks for your help. It looks like your code is having far less errors than mine. But I am getting an error on line 44, which is the  &quot;cout&lt;&lt; print_results(charge). The compiler is telling me &quot;error: invalid operands to binary expression (&#39;ostream&#39; (aka &#39;basic_ostream&lt;char&gt;&#39;) and &#39;void&#39;)&quot;"}, {"owner": {"reputation": 114, "user_id": 7377028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UX8h2.jpg?s=128&g=1", "display_name": "Sarmad Ali", "link": "https://stackoverflow.com/users/7377028/sarmad-ali"}, "reply_to_user": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518061867, "post_id": 48676846, "comment_id": 84352575, "body": "The remaining error was happened because the function cout&lt;&lt; print_results(charge) is in the cout statement. Remove the cout statement and only call print_results() function."}, {"owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "edited": false, "score": 0, "creation_date": 1518062860, "post_id": 48676846, "comment_id": 84352781, "body": "Thank you, this has fixed it and my program now runs smoothly!!"}], "tags": [], "owner": {"reputation": 114, "user_id": 7377028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UX8h2.jpg?s=128&g=1", "display_name": "Sarmad Ali", "link": "https://stackoverflow.com/users/7377028/sarmad-ali"}, "is_accepted": true, "score": -2, "last_activity_date": 1518061741, "last_edit_date": 1518061741, "creation_date": 1518058971, "answer_id": 48676846, "question_id": 48675202, "link": "https://stackoverflow.com/questions/48675202/c-creating-a-parking-charge/48676846#48676846", "title": "C++ Creating a parking charge", "body": "<p>Your are almost done, You have need to call functions properly in main function. Declare two variables in main function <code>totalTime</code> and <code>totalCharge</code>then call the function </p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n\n    int elapsed_time(int entry_time, int exit_time)\n    {\n    int total = 0;\n    total = (exit_time / 100) * 60 + (exit_time % 100) - (entry_time / 100) * 60\n            + (entry_time % 100);\n    return total;\n    } // returns elapsed time in total minutes\n\n    double parking_charge(int total_minutes)\n    {\n      int charge;\n\n      if (total_minutes &lt;= 30)\n        charge = 0;\n\n      else if (120 &gt; total_minutes &lt; 30)\n        charge = (3 + (0.05 * total_minutes));\n\n      else\n        charge = (8 + (0.10 * total_minutes));\n\n    } // returns parking charge\n    void print_results(double charge)\n    {\n       cout &lt;&lt; \"The charge of parking was: \" &lt;&lt; charge;\n    }\n\n    int main()\n    {  \n      double charge,minutes;\n        int entry_time,exit_time;   \n      cout &lt;&lt; \"What was the entry time? (Enter in 24 hour time with no colon) \";\n      cin &gt;&gt; entry_time;\n\n      cout &lt;&lt; \"What was the exit time? (Enter in 24 hour time with no colon) \";\n      cin &gt;&gt; exit_time;\n\n     minutes=elapsed_time(entry_time,exit_time);\n\n     charge=parking_charge(minutes);  \n\n     print_results( charge);\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8922713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dfe8ffb3cb87a08282d56ecf9b588?s=128&d=identicon&r=PG&f=1", "display_name": "Trev.Drumm", "link": "https://stackoverflow.com/users/8922713/trev-drumm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4035, "favorite_count": 1, "accepted_answer_id": 48676846, "answer_count": 1, "score": -5, "last_activity_date": 1518061741, "creation_date": 1518047019, "last_edit_date": 1518061536, "question_id": 48675202, "link": "https://stackoverflow.com/questions/48675202/c-creating-a-parking-charge", "title": "C++ Creating a parking charge", "body": "<p>I am having to create a program that reads from the user what time they entered a parking garage and what time they left. The program uses this information to then figure out how much it costed the person to park there. For under 30 minutes, it's free. After 30 minutes and up to 2 hours, it is a $3 base charge, plus 5 cents every minute in excess of 30 minutes. Beyond 2 hours, it is an $8 base charge, plus 10 cents every minute in excess of 2 hours. I have so far got to convert the time the user inputted into all minutes. I am now stuck on what to do for the rest of my functions. I am new to programming, and the arguments in a function still confuse me. If you are able to help or provide any feedback, please tell in the comment section how the arguments were implemented to get the code to run correctly. Here is my code thus far:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint elapsed_time(int entry_time, int exit_time)\n{\n    int total = 0;\n    total = (exit_time / 100) * 60 + (exit_time % 100) - (entry_time / 100) * 60\n            + (entry_time % 100);\n    return total;\n} // returns elapsed time in total minutes\n\ndouble parking_charge(int total_minutes) {\n    double total = 0;\n    double cents = 0;\n\nif(total_mins &lt; 30){\n    return 0;\n}\nelse if (total_mins &lt;= 120){\n    cents = (total_mins - 30) * 0.05;\n    return total = 3 + cents;\n}\nelse{\n    cents = (total_mins - 120) * 0.10;\n    return total = 4.5 + 8 + cents;\n}\n} // returns parking charge    \n\nvoid print_results(total_minutes, double charge)\n{\n    cout &lt;&lt; \"The charge of parking was: \" &lt;&lt; parking_charge(total_minutes)\n}\n\nint main() {\nint entry_time = 0;\nint exit_time = 0;\n\n    cout &lt;&lt; \"What was the entry time? (Enter in 24 hour time with no colon) \";\n    cin &gt;&gt; entry_time;\n\n    cout &lt;&lt; \"What was the exit time? (Enter in 24 hour time with no colon) \";\n    cin &gt;&gt; exit_time;\n\n    cout &lt;&lt; print_results(total_minutes, charge);\n}\n</code></pre>\n\n<p>I have updated my code with a working parking charge function. I am now aiming to get the print_results function working correctly and finding out how to get all of this to work together in the main function. Thanks to all for the help so far.</p>\n"}, {"tags": ["c++", "optimization"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1518047148, "post_id": 48675193, "comment_id": 84348932, "body": "Pointer comparison between different objects is undefined. The optimizer is allowed to assume that undefined behavior never occurs."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1518047193, "post_id": 48675193, "comment_id": 84348952, "body": "<i>pA should be equal to pB + sizeof(int) bytes</i> Why? Why should it be? If the compiler see it fit, it doesn&#39;t have to store these values in the stack frame."}, {"owner": {"reputation": 213, "user_id": 6744877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvR_Yz77NzA/AAAAAAAAAAI/AAAAAAAAA-M/lxhdXBp-oKA/photo.jpg?sz=128", "display_name": "Hunter Mueller", "link": "https://stackoverflow.com/users/6744877/hunter-mueller"}, "edited": false, "score": 0, "creation_date": 1518047590, "post_id": 48675193, "comment_id": 84349044, "body": "That was an assumption on my part. I understand it&#39;s undefined behaviour now. Apparently it&#39;s undefined unless they&#39;re pointers to members of the same object or elements of the same array."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518047782, "post_id": 48675193, "comment_id": 84349079, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4909766/is-it-unspecified-behavior-to-compare-pointers-to-different-arrays-for-equality\">Is it unspecified behavior to compare pointers to different arrays for equality?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518051225, "post_id": 48675193, "comment_id": 84350023, "body": "@Barmar <code>==</code> and <code>!=</code> for pointers is not undefined in C++"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1518051285, "post_id": 48675193, "comment_id": 84350049, "body": "@M.M True, it&#39;s just unspecified when they point to different objects."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518051655, "post_id": 48675193, "comment_id": 84350141, "body": "@Barmar in fact it&#39;s guaranteed <code>false</code> for pointers to different objects, except the special case of a one-past-the-end pointer from one object and a start pointer for another object which is unspecified"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1518053325, "post_id": 48675193, "comment_id": 84350552, "body": "Not sure why this is downvoted, it seems like a good question to me and written well"}], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 6744877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvR_Yz77NzA/AAAAAAAAAAI/AAAAAAAAA-M/lxhdXBp-oKA/photo.jpg?sz=128", "display_name": "Hunter Mueller", "link": "https://stackoverflow.com/users/6744877/hunter-mueller"}, "edited": false, "score": 0, "creation_date": 1518049461, "post_id": 48675468, "comment_id": 84349529, "body": "Fascinating. So it was the compiler guarding against undefined behaviour, rather than allowing the outcome to vary from run to run? The sophistication of compiler optimizations never ceases to blow my mind."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 213, "user_id": 6744877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvR_Yz77NzA/AAAAAAAAAAI/AAAAAAAAA-M/lxhdXBp-oKA/photo.jpg?sz=128", "display_name": "Hunter Mueller", "link": "https://stackoverflow.com/users/6744877/hunter-mueller"}, "edited": false, "score": 1, "creation_date": 1518052057, "post_id": 48675468, "comment_id": 84350258, "body": "@HunterMueller It&#39;s less that the behavior would vary from run to run and more that it&#39;s faster to just ignore the check since the language doesn&#39;t specify what should happen."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 1, "last_activity_date": 1518052187, "last_edit_date": 1518052187, "creation_date": 1518049025, "answer_id": 48675468, "question_id": 48675193, "link": "https://stackoverflow.com/questions/48675193/stack-pointer-comparison-anomaly-when-optimization-enabled/48675468#48675468", "title": "Stack pointer comparison anomaly when optimization enabled", "body": "<p>This result has nothing to do with how the stack is laid out and everything to do with the fact that the result of comparison between unrelated pointers is unspecified.</p>\n\n<p>Lets look at the assembly GCC generates for just the first little bit of your <code>result</code> function:</p>\n\n<pre><code>.LC0:\n  .string \"false\"\n.LC1:\n  .string \", \"\n.LC2:\n  .string \"a: \"\n.LC3:\n  .string \" b: \"\nresult(int, int):\n  push rbx\n  mov edx, 5\n  sub rsp, 32\n  mov DWORD PTR [rsp+12], edi\n  mov DWORD PTR [rsp+8], esi\n  mov edi, OFFSET FLAT:std::cout\n  mov esi, OFFSET FLAT:.LC0\n  call std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::__ostream_insert&lt;char, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*, long)\n</code></pre>\n\n<p>As you can see, there is no branch at all.  A pointer to the string <code>\"false\"</code> is loaded into <code>esi</code> and used as the argument to <code>std::__ostream_insert</code> unconditionally.  Since the behavior of the pointer comparison is not specified by the language, the compiler has simply assumed that the <code>true</code> case can never happen and removed it entirely.</p>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 6744877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvR_Yz77NzA/AAAAAAAAAAI/AAAAAAAAA-M/lxhdXBp-oKA/photo.jpg?sz=128", "display_name": "Hunter Mueller", "link": "https://stackoverflow.com/users/6744877/hunter-mueller"}, "edited": false, "score": 0, "creation_date": 1518070983, "post_id": 48675822, "comment_id": 84355013, "body": "Thanks for the excellent citation and explanation. It&#39;s laid out so plainly in the spec, and the retroactivity of the &quot;Defect&quot; state explains why this behaviour is present at least as far back as C++98. I&#39;m choosing this as the answer, as the spec couldn&#39;t be clearer. Cheers!"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1518052095, "last_edit_date": 1518052095, "creation_date": 1518051454, "answer_id": 48675822, "question_id": 48675193, "link": "https://stackoverflow.com/questions/48675193/stack-pointer-comparison-anomaly-when-optimization-enabled/48675822#48675822", "title": "Stack pointer comparison anomaly when optimization enabled", "body": "<p>From C++17 (N4659) [expr.eq]/2 (Equality operators):</p>\n\n<blockquote>\n  <p>Comparing pointers is defined as follows:</p>\n  \n  <ul>\n  <li>If one pointer represents the address of a complete object, and another pointer represents the address one past the last element of a different complete object, the result of the comparison is unspecified.</li>\n  <li>[...]</li>\n  </ul>\n</blockquote>\n\n<p>This means comparison of <code>&amp;a</code> and <code>&amp;b+1</code> is <em>unspecified</em>. (It is not undefined, as claimed in other answers and comments; in fact equality comparison for pointers never undefined behaviour in C++).</p>\n\n<p>So your code may observe either <code>true</code> or <code>false</code> as the result of the comparison; and the optimizer could , at its whim, insert either result instead of actually doing any comparison at runtime.</p>\n\n<hr>\n\n<p><em>Historical note:</em> This change came from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1652\" rel=\"nofollow noreferrer\">CWG Defect 1652</a>, filed against C++11 and granted Defect status, meaning it applies retroactively.  The original C++11 text said that pointers should compare equal \"if they represent the same address\" , but this was changed both because it hinders optimization, and because equality comparison is allowed in <code>constexpr</code> which can't do a runtime address check obviously.</p>\n\n<p>I believe g++ always performed this optimization in defiance of the apparent C++11 requirement to not perform it. </p>\n"}], "owner": {"reputation": 213, "user_id": 6744877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvR_Yz77NzA/AAAAAAAAAAI/AAAAAAAAA-M/lxhdXBp-oKA/photo.jpg?sz=128", "display_name": "Hunter Mueller", "link": "https://stackoverflow.com/users/6744877/hunter-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 48675822, "answer_count": 2, "score": -2, "last_activity_date": 1518052187, "creation_date": 1518046981, "last_edit_date": 1518048413, "question_id": 48675193, "link": "https://stackoverflow.com/questions/48675193/stack-pointer-comparison-anomaly-when-optimization-enabled", "title": "Stack pointer comparison anomaly when optimization enabled", "body": "<p>This is doing my head in! I was doing some experiments with the stack during function calls, and I came across this little anomaly. Compiler is GCC 4.9.2, and -O1, -O2, or -O3 optimization flags. The problem is not present when  optimizations are disabled (-O0). The result is the same whether compiling under C++98, C++11 or C++14.</p>\n\n<p>In the example below, I assume that the CDECL calling convention is used for the call to result(), so args should get pushed on the stack from right to left.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid result(int a, int b) {\n    int* pA = &amp;a;\n    int* pB = &amp;b;\n\n    // pA should be equal to pB + sizeof(int) bytes, why does this report \"false\" \n    // when optimizations are on?\n    std::cout &lt;&lt; (pA == pB + 1 ? \"true\" : \"false\") &lt;&lt; '\\n';\n\n    // this appears to be true if we dump the pointer addresses.\n    std::cout &lt;&lt; pA &lt;&lt; \", \" &lt;&lt; pB + 1 &lt;&lt; '\\n';\n\n    // and still holds water when getting values through indirection.\n    std::cout &lt;&lt; \"a: \" &lt;&lt; *(pB + 1) &lt;&lt; \" b: \" &lt;&lt; *pB &lt;&lt; '\\n';\n}\n\nint main(int argc, char** argv)\n{\n    result(10, 20);\n    return 0;\n}\n</code></pre>\n\n<p>Sample output with optimizations enabled:</p>\n\n<pre><code>false // why?\n0x704eca3c088c, 0x704eca3c088c // clearly they're equal\na: 10 b: 20 // and point to the correct arguments on the stack\n</code></pre>\n\n<p>Sample output with optimizations disabled:</p>\n\n<pre><code>true\n0x7e5bd5f34fdc, 0x7e5bd5f34fdc\na: 10 b: 20\n</code></pre>\n\n<p>What about the compiler optimizations would cause a stack pointer comparison to fail, when their equality can be compared visually and found to be true, optimizations or no?</p>\n\n<p>Edit: I believe this question differs from the suggested duplicate (<a href=\"https://stackoverflow.com/questions/4909766/is-it-unspecified-behavior-to-compare-pointers-to-different-arrays-for-equality\">Is it unspecified behavior to compare pointers to different arrays for equality?</a>) as stacks are traditionally implemented as a contiguous array (obviously with exceptions -- case in point), and the proposed duplicate gives an example of two distinct arrays.</p>\n"}, {"tags": ["python", "c++", "python-3.x", "shared-libraries", "ctypes"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518068686, "post_id": 48675152, "comment_id": 84354259, "body": "In PyCharm, what is the result of <code>os.getcwd()</code>?  Is your .so in that path?  When specifying the full path, did you use a a raw string <code>r&#39;c:\\path&#39;</code> or forward slashes <code>c:&#47;path</code> where a backslash can&#39;t be misinterpreted as an escape?  As an aside, in your <code>foo_bar_function</code>, <code>sizeof(a)</code> is the size of <code>float*</code>, not the size of the <code>py_a</code> array passed in."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518070700, "post_id": 48675152, "comment_id": 84354902, "body": "@MarkTolonen Yes, the .py and the .so reside in the same folder and printing the os.getcwd() points to that. I tried forward slashes and double backward. By now I&#39;m sure its the about including valarray.. When I&#39;m not #including anything it works like a (py)charm..  Ah thanks for pointing that out, that came from quickly reducing the sample, in the code I pass another int with the array size."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518071166, "post_id": 48675152, "comment_id": 84355093, "body": "A tool like SysInternals procmon.exe can help track down where PyCharm is looking for your library and any dependencies."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518071687, "post_id": 48675152, "comment_id": 84355311, "body": "Thanks, I will take a look! Any way I could directly bundle valarray into the .so or compile a seperate shared library out of it and include that one in my code?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518072467, "post_id": 48675152, "comment_id": 84355653, "body": "FWIW I used MSVC++ here at home and compiling your extern &quot;C&quot; function  with a valarray &quot;just worked&quot; linking to the shared C++ runtime and using ctypes."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518073409, "post_id": 48675152, "comment_id": 84356104, "body": "sorry im farily new to c++ and compiling such, what exactly do you mean by &quot;linking to the shared c++ runtime&quot;? can you share the commands you used to compile and create the shared library with msvc++?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518073649, "post_id": 48675152, "comment_id": 84356202, "body": "<code>cl &#47;EHsc &#47;W4 &#47;MD &#47;LD test.cpp</code>.  The flags enable C++ exception handling, maximize warnings, dynamic link to the runtime, and create a DLL.  Note the output is <code>test.dll</code> not <code>test.so</code>.  Maybe that works with <code>g++</code> on Windows, but to me .so is a Linux library."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518074219, "post_id": 48675152, "comment_id": 84356505, "body": "I did a quick check and renaming <code>test.dll</code> to <code>test.so</code> and using <code>ctypes.CDLL(&#39;test.so&#39;)</code> did still load for me."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518538714, "post_id": 48675152, "comment_id": 84543390, "body": "thank you, that helped a lot! though I have to admit using a shared library did not gave me the speed up I expected (at least mutlicore), thus I used jit&#39;s no python."}], "owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518070789, "creation_date": 1518046728, "last_edit_date": 1518070789, "question_id": 48675152, "link": "https://stackoverflow.com/questions/48675152/python-ctypes-cdlllibrary-so-specified-modul-not-found", "title": "Python: ctypes CDLL(&#39;library.so&#39;) Specified Modul not found", "body": "<p>I am trying to use a simple C++ function within python3.\nFollowing a tutorial I built a shared libray (\".so\") and tried to call the funktion within python with the ctypes.CDLL() function.</p>\n\n<p>Compiling the .cpp and executing the .py went well on the command line, but when I copied all files into an IDE (PyCharm in my case) and run the code from there I get the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \".../test/wrapper.py\", line 26, in &lt;module&gt;\n    test = ctypes.CDLL('library.so').foo_bar_function(a, b)\n  File \"...\\AppData\\Local\\Programs\\Python\\Python36\\lib\\ctypes\\__init__.py\", line 348, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] The specified module was not found\n</code></pre>\n\n<p>I already tried specifying the full path to the library.so, without luck.</p>\n\n<p>I'm aware that there are toolsets as the Boost.Python Library which can help extending python with c/c++ functions. But as the functions do not require anything special, are only \"static\" methods and are quite simple, I thought I would not have to go through that hassle. All my function should do is getting some arrays from python, manipulating the array with simple  operations and returning an int.</p>\n\n<p>What I did:</p>\n\n<ul>\n<li><p>Created two files:</p>\n\n<p>.../test/function.cpp\n.../test/wrapper.py</p></li>\n</ul>\n\n<p>function.cpp:</p>\n\n<pre><code>#include &lt;valarray&gt;\n\nbool foo_function(const std::valarray&lt;float&gt; &amp;a, const int b) {\n    float f = 0.0;\n    std::valarray&lt;float&gt; above = a[a &lt; f];\n    return above.size() &gt;= b;\n}\n\nint bar_function(const std::valarray&lt;float&gt; &amp;a, const int b) {\n    bool b = foo_function(a,b[0]);\n    ... SOME OTHER CODE ...\n    return 0;\n}\n\nextern \"C\" int foo_bar_function(float *a, int *b, int c) {\n    std::valarray&lt;float&gt; v (a, c);\n    ... SOME OTHER CODE ...\n    int i = bar_function(v, b);\n    return i;\n}\n</code></pre>\n\n<p>and wrapper.py</p>\n\n<pre><code>import ctypes\n\npy_a = [10,5,6,2,1,1,1,6,3,1]\nc_a = (ctypes.c_float * len(py_a))(*py_a)\n\npy_b = [1,1,2]\nc_b = (ctypes.c_int * len(py_b))(*py_b)\n\ntest = ctypes.CDLL('library.so').foo_bar_function(c_a, c_b)\n\nprint(test)\n</code></pre>\n\n<p>then I ran:</p>\n\n<pre><code>...\\test&gt; g++ -shared -c -fPIC function.cpp -o function.o\n...\\test&gt; g++ -shared -Wl,-soname,library.so -o library.so function.o\n...\\test&gt; python wrapper.py\n0 (expected output from c++ function)\n</code></pre>\n\n<p>So within the cmd all went as expected.</p>\n\n<p>What else could I try?</p>\n"}, {"tags": ["c++", "dictionary", "boost", "struct"], "answers": [{"tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1518059734, "creation_date": 1518059734, "answer_id": 48676960, "question_id": 48675001, "link": "https://stackoverflow.com/questions/48675001/boost-interprocess-cout-a-string-variable-when-iterating-through-a-map-that-ref/48676960#48676960", "title": "Boost interprocess: cout a string variable when iterating through a map that references an object from a struct", "body": "<blockquote>\n  <p>But for some reason the client executable throws a segmentation fault if I try to access a string rather than a float or an integer in the client.</p>\n</blockquote>\n\n<p>It looks like you are using <code>std::string</code> in your structure within the shared memory map. You cannot do this, since <code>std::string</code> allocates it's own memory which goes out of scope with <code>boost::interprocess</code>.  You should try using the <code>boost::interprocess::basic_string</code> type in place of <code>std::string</code>.  There is an example of how to use this in an interprocess map <a href=\"http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/allocators_containers.html#interprocess.allocators_containers.containers_explained.containers_of_containers\" rel=\"nofollow noreferrer\">in the Boost documentation</a></p>\n\n<pre><code>#include &lt;boost/interprocess/containers/string.hpp&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1518133337, "creation_date": 1518133337, "answer_id": 48696596, "question_id": 48675001, "link": "https://stackoverflow.com/questions/48675001/boost-interprocess-cout-a-string-variable-when-iterating-through-a-map-that-ref/48696596#48696596", "title": "Boost interprocess: cout a string variable when iterating through a map that references an object from a struct", "body": "<p>Like Justin mentioned, <code>std::string</code> is itself a container that dynamically allocates.</p>\n\n<p>Just using Interprocess's <code>string</code> is not enough. In fact, that's just <code>boost::container::basic_string&lt;&gt;</code> really.</p>\n\n<p><em>The important thing is using the allocator.</em></p>\n\n<p>However, using a map with an allocator, and passing the allocator whenever you need to construct the contained containers (ad nauseam) is annoying.</p>\n\n<h2>Enter Scoped Allocators</h2>\n\n<p>These make it so that you don't have to <em>know</em> the allocator, any container that knows how to use scoped allocators will pass the allocator onto the nested container.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/248ea5f1163ffbb5\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong> \u00b9</p>\n\n<pre><code>#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n\n#include &lt;boost/interprocess/containers/map.hpp&gt;\n#include &lt;boost/interprocess/containers/string.hpp&gt;\n\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n#include &lt;boost/container/scoped_allocator.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nnamespace bip = boost::interprocess;\n\nnamespace Shared {\n    using Segment = bip::managed_shared_memory;\n    using Manager = Segment::segment_manager;\n\n    template &lt;typename T&gt; using Alloc \n        = boost::container::scoped_allocator_adaptor&lt;bip::allocator&lt;T, Manager&gt; &gt;;\n\n    using String = bip::basic_string&lt;char, std::char_traits&lt;char&gt;, Alloc&lt;char&gt; &gt;;\n\n    template &lt;typename K, typename V, typename Cmp = std::less&lt;K&gt; &gt; using Map \n        = bip::map&lt;K, V, Cmp, Alloc&lt;std::pair&lt;K const, V&gt; &gt; &gt;;\n\n    struct Order {\n        using allocator_type = Alloc&lt;char&gt;;\n\n        template &lt;typename S, typename Alloc&gt;\n        Order(int i, S const&amp; s, Alloc alloc = {}) : i(i), s(s, alloc) {}\n\n        int    i;\n        String s;\n    };\n}\n\nint main() {\n    try {\n        using namespace Shared;\n        Segment segment(bip::open_or_create, \"095540a3-ceaa-4431-828d-df21d5e384ae\", 65536);\n\n        auto&amp; pmap = *segment.find_or_construct&lt;Map&lt;int, Order&gt;&gt;(\"MySHMMapName\")(segment.get_segment_manager());\n\n        if (pmap.empty()) {\n            std::cout &lt;&lt; \"Inserting data\\n\";\n            auto insert = [&amp;pmap](int i, auto&amp;&amp; s) {\n                using namespace std;\n                pmap.emplace(piecewise_construct, tie(i), tie(i, s));\n            };\n\n            insert(1, \"one\");\n            insert(2, \"two\");\n            insert(3, \"three\");\n        } else {\n            std::cout &lt;&lt; \"Existing data:\\n\";\n            for (auto&amp; [k,v] : pmap) {\n                std::cout &lt;&lt; k &lt;&lt; \" \" &lt;&lt; v.i &lt;&lt; \" \" &lt;&lt; v.s &lt;&lt; \"\\n\";\n            }\n        }\n    } catch (std::exception &amp;e) {\n        std::cout &lt;&lt; \" error  \" &lt;&lt; e.what() &lt;&lt; std::endl;\n        bip::shared_memory_object::remove(\"095540a3-ceaa-4431-828d-df21d5e384ae\");\n    }\n}\n</code></pre>\n\n<h2>Making It More Elegant</h2>\n\n<p>I notice that the map is <code>Map&lt;int, Order&gt;</code>: the key seems to duplicate the integer value inside <code>Order</code>. </p>\n\n<h3>Option 1: <code>Map&lt;int, String&gt;</code></h3>\n\n<p>You could either make it <code>Map&lt;int, String&gt;</code> and get a much more streamlined experience (because there's no need for <code>std::piecewise_construct</code>):</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/067ece5dea37fd31\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>auto&amp; pmap = *segment.find_or_construct&lt;Map&lt;int, String&gt;&gt;(\"MySHMMapName\")(segment.get_segment_manager());\n\nif (pmap.empty()) {\n    std::cout &lt;&lt; \"Inserting data\\n\";\n\n    pmap.emplace(1, \"one\");\n    pmap.emplace(2, \"two\");\n    pmap.emplace(3, \"three\");\n}\n</code></pre>\n\n<h3>Option 2: Multi Index</h3>\n\n<p>Alternatively, you should consider using Multi-Index which is able to index <code>Order</code> directly by a member of the type:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/642230f51c329f8d\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>namespace bmi = boost::multi_index;\nusing Table = bmi::multi_index_container&lt;Order,\n    bmi::indexed_by&lt;\n        bmi::ordered_unique&lt; bmi::member&lt;Order, int, &amp;Order::i&gt; &gt;\n    &gt;,\n    Alloc&lt;Order&gt;\n&gt;;\n</code></pre>\n\n<p>Sadly, Multi Index doesn't quite play as well with nested types using allocators, so you'll have to pass it along again:</p>\n\n<pre><code>if (pmap.empty()) {\n    std::cout &lt;&lt; \"Inserting data\\n\";\n\n    pmap.emplace(1, \"one\", pmap.get_allocator());\n    pmap.emplace(2, \"two\", pmap.get_allocator());\n    pmap.emplace(3, \"three\", pmap.get_allocator());\n} else {\n    std::cout &lt;&lt; \"Existing data:\\n\";\n    for (Order const&amp; o : pmap) {\n        std::cout &lt;&lt; o.i &lt;&lt; \" \" &lt;&lt; o.s &lt;&lt; \"\\n\";\n    }\n\n    // demonstrate lookup:\n    std::cout &lt;&lt; \"Finding element 2:\" &lt;&lt; pmap.find(2)-&gt;s &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Existing data:\n1 one\n2 two\n3 three\nFinding element 2:two\n</code></pre>\n\n<hr>\n\n<p>\u00b9 using mapped files on Coliru instead. The refactored code makes this a 1-line change.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9330225"}, "is_accepted": true, "score": 1, "last_activity_date": 1518549661, "creation_date": 1518549661, "answer_id": 48774139, "question_id": 48675001, "link": "https://stackoverflow.com/questions/48675001/boost-interprocess-cout-a-string-variable-when-iterating-through-a-map-that-ref/48774139#48774139", "title": "Boost interprocess: cout a string variable when iterating through a map that references an object from a struct", "body": "<p>Some great info from previous posters led me to a simple answer of my own. Use a char array in the struct, then read it into a string as follows:</p>\n\n<pre><code>std::cout&lt;&lt;iter-&gt;first&lt;&lt;\" \"&lt;&lt;iter-&gt;second.ORDERTYPE&lt;&lt;\" \"&lt;&lt;string(iter-&gt;second.MYID)&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>here is the struct I speak of:</p>\n\n<pre><code>struct order {\n    char MYID[100];\n    int ORDERTYPE;\n    char DATE_UPDATED[64];\n};\norder o\n</code></pre>\n\n<p>here is how i passed the struct into memory:</p>\n\n<pre><code>m_pmap-&gt;insert(std::pair&lt;const int, order&gt;(i, (order)o));\n</code></pre>\n\n<p>now i am able to write a map of structs containing various types including strings, to memory, and retrieve them from memory.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9330225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 48774139, "answer_count": 3, "score": 5, "last_activity_date": 1518549661, "creation_date": 1518045864, "last_edit_date": 1518045905, "question_id": 48675001, "link": "https://stackoverflow.com/questions/48675001/boost-interprocess-cout-a-string-variable-when-iterating-through-a-map-that-ref", "title": "Boost interprocess: cout a string variable when iterating through a map that references an object from a struct", "body": "<p>I'm using boost::interprocess to share objects between processes.\nI have two files, a \"server.cpp\" that generates a struct object and passes the object into a map with an int index; and a \"client.cpp\" file that retrieves the memory data and iterates through the data, outputting to console.</p>\n\n<p>The struct looks like this:</p>\n\n<pre><code>    struct mydata o {\n    string MY_STRING;\n    int MY_INT; \n};\n</code></pre>\n\n<p>And the object:</p>\n\n<pre><code>mydata o;\no.MY_STRING = \"hello\";\no.MY_INT = 45;\n</code></pre>\n\n<p>Both server and client compile correctly.\nBut for some reason the client executable throws a segmentation fault if I try to access a string rather than a float or an integer in the client.\nFor example the below second.MY_INT will cout to console, but second.MY_STRING throws this error when running.</p>\n\n<pre><code>#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;boost/interprocess/containers/map.hpp&gt;\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n#include &lt;functional&gt;\n#include &lt;utility&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"objects.cpp\" //definitions for objects\nusing std::string;\nusing namespace boost::interprocess;\n\n    int main ()\n{\n\n    try\n    {\n            managed_shared_memory segment(open_or_create, \"SharedMemoryName\",65536);\n\n            //Again the map&lt;Key, MappedType&gt;'s value_type is std::pair&lt;const Key, MappedType&gt;, so the allocator must allocate that pair.\n            typedef int    KeyType;\n            typedef order  MappedType;\n            typedef std::pair&lt;const int, order&gt; ValueType;\n\n            //Assign allocator \n            typedef allocator&lt;ValueType, managed_shared_memory::segment_manager&gt; ShmemAllocator;\n\n            //The map\n            typedef map&lt;KeyType, MappedType, std::less&lt;KeyType&gt;, ShmemAllocator&gt; MySHMMap;\n\n            //Initialize the shared memory STL-compatible allocator\n            ShmemAllocator alloc_inst (segment.get_segment_manager());\n\n            //access the map in SHM through the offset ptr                                                         \n            MySHMMap :: iterator iter;\n            offset_ptr&lt;MySHMMap&gt; m_pmap = segment.find&lt;MySHMMap&gt;(\"MySHMMapName\").first;\n\n            iter=m_pmap-&gt;begin();\n            for(; iter!=m_pmap-&gt;end();iter++)\n            {\n                   //std::cout&lt;&lt;\"\\n \"&lt;&lt;iter-&gt;first&lt;&lt;\" \"&lt;&lt;iter-&gt;second;\n                   std::cout&lt;&lt;iter-&gt;first&lt;&lt;\" \"&lt;&lt;iter-&gt;second.MYINT&lt;&lt;\" \"&lt;&lt;iter-&gt;second.MYSTRING&lt;&lt;\"\\n\";\n            }\n    }catch(std::exception &amp;e)            \n    {\n            std::cout&lt;&lt;\" error  \" &lt;&lt; e.what() &lt;&lt;std::endl;\n           shared_memory_object::remove(\"SharedMemoryName\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>the error when running:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>I'm pretty sure the server is passing the entire object to memory, and the client can retrieve it (as i can access some of the objects attributes), and that its just a formatting issue.</p>\n"}, {"tags": ["c++", "memcpy"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518045554, "post_id": 48674908, "comment_id": 84348361, "body": "What do you mean &quot;pointerOfHeader is 36&quot;? It should be <code>header + 10</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1518045579, "post_id": 48674908, "comment_id": 84348371, "body": "You&#39;ll want to be careful about endian issues when importing binary data."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1518045616, "post_id": 48674908, "comment_id": 84348384, "body": "How long is the <code>char* header</code> you&#39;re passing in?  Are you overshooting it? If your environment defines <code>unsigned long</code> as 64 bits you are."}, {"owner": {"reputation": 5498, "user_id": 1228887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbfa9c3ff51140d2e1a5ff553725a07?s=128&d=identicon&r=PG", "display_name": "twain249", "link": "https://stackoverflow.com/users/1228887/twain249"}, "edited": false, "score": 0, "creation_date": 1518045622, "post_id": 48674908, "comment_id": 84348387, "body": "You should be using <code>sizeof()</code> in you increment lines rather than hardcoded numbers"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518045958, "post_id": 48674908, "comment_id": 84348517, "body": "The 4 bytes you are trying to read into <code>bfOffBits</code> are <code>36 00 00 00</code>, which is decimal <code>54</code> (which is a correct offset for a BMP file). <code>bfOffBits</code> is declared as a <code>DWORD</code>, which shouldn&#39;t be able to hold a value of <code>7950260717192478774</code> (0x6E55000000000036) if it is a 32bit type. But, as a 64bit type, it can, but then 4 of the bytes will be undefined, as they will be read from memory that follows the header you are reading from."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1518046111, "post_id": 48674908, "comment_id": 84348577, "body": "Why not just <code>std::memcpy(&amp;bfReserved1, pointerOfHeader, sizeof(bfReserved1));</code> so if you change the type for <code>bfReserved1</code> you don&#39;t have to fix it in the <code>memcopy</code> call?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518047080, "post_id": 48674908, "comment_id": 84348902, "body": "You increment the pointer by the same <code>sizeof</code> in the <code>memcpy</code>."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518045864, "post_id": 48674993, "comment_id": 84348486, "body": "or <code>unsigned int</code>, if the compiler treats <code>int</code> as a 4-byte type."}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1518046044, "post_id": 48674993, "comment_id": 84348550, "body": "True, but that&#39;s still an <i>if</i>. Using <code>uint32_t</code> is either the correct size or doesn&#39;t compile at all - no possibility of getting it wrong."}, {"owner": {"reputation": 13, "user_id": 8154448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb1bccb2d5b41db1ce001a5703d89a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yavuz", "link": "https://stackoverflow.com/users/8154448/yavuz"}, "edited": false, "score": 0, "creation_date": 1518046456, "post_id": 48674993, "comment_id": 84348690, "body": "I am using Ubuntu and bfSize(unsigned long) variable take true value. What do you suggest?"}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "reply_to_user": {"reputation": 13, "user_id": 8154448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb1bccb2d5b41db1ce001a5703d89a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yavuz", "link": "https://stackoverflow.com/users/8154448/yavuz"}, "edited": false, "score": 0, "creation_date": 1518046623, "post_id": 48674993, "comment_id": 84348762, "body": "@Yavuz: Your correct value for <code>bfSize</code> can be explained by: (a) the four trailing 00 bytes after the 32-bit <code>bfSize</code> value (which would get loaded into the upper 32 bits of a 64-bit value), and (b) your manual incrementing of the pointer by 4, when the compiler actually generated code to read 8 bytes."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 13, "user_id": 8154448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb1bccb2d5b41db1ce001a5703d89a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yavuz", "link": "https://stackoverflow.com/users/8154448/yavuz"}, "edited": false, "score": 0, "creation_date": 1518046906, "post_id": 48674993, "comment_id": 84348858, "body": "@Yavuz we suggest you accept Greg&#39;s answer to fix this. <code>uint32_t</code> can be found in <code>#include &lt;cstdint&gt;</code> if you are using C++11 or newer."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 1, "creation_date": 1518046908, "post_id": 48674993, "comment_id": 84348861, "body": "I&#39;d say it not only <i>appears</i>: BYTE, WORD and DWORD are by definition 8-, 16- and 32-bit types, respectively. Anything except <code>typedef uint8_t BYTE; typedef uint16_t WORD; typedef uint32_t DWORD;</code> is just wrong."}, {"owner": {"reputation": 13, "user_id": 8154448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb1bccb2d5b41db1ce001a5703d89a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yavuz", "link": "https://stackoverflow.com/users/8154448/yavuz"}, "edited": false, "score": 0, "creation_date": 1518047687, "post_id": 48674993, "comment_id": 84349060, "body": "Yes, thank you @GregHewgill and of course thank you everyone in this post. I fix my code"}], "tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 3, "last_activity_date": 1518045792, "creation_date": 1518045792, "answer_id": 48674993, "question_id": 48674908, "link": "https://stackoverflow.com/questions/48674908/memcpy-copied-wrong-data-from-tail-of-array/48674993#48674993", "title": "memcpy copied wrong data from tail of array", "body": "<p>It appears as though your compiler is treating <code>unsigned long</code> as a 64-bit quantity, but the Win32 API defines <code>DWORD</code> as an unsigned 32-bit value. Try:</p>\n\n<pre><code>typedef uint32_t DWORD;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8154448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb1bccb2d5b41db1ce001a5703d89a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yavuz", "link": "https://stackoverflow.com/users/8154448/yavuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 48674993, "answer_count": 1, "score": 1, "last_activity_date": 1518048488, "creation_date": 1518045307, "last_edit_date": 1518048488, "question_id": 48674908, "link": "https://stackoverflow.com/questions/48674908/memcpy-copied-wrong-data-from-tail-of-array", "title": "memcpy copied wrong data from tail of array", "body": "<p>I have a problem with memcpy function. I tried copy part of data from array of char but I was not success.</p>\n\n<pre><code>// Types\ntypedef unsigned char BYTE;\ntypedef unsigned short WORD;\ntypedef unsigned long DWORD;\n\n// My variables\nWORD bfType;\nDWORD bfSize;\nWORD bfReserved1;\nWORD bfReserved2;\nDWORD bfOffBits;\n\n// My Func\nvoid BmpFileHeader::setFileHeader(char* header)\n{\n    // header -&gt; 42 4D BB E6 00 00 00 00 00 00 36 00 00 00\n    char* pointerOfHeader = header;\n    std::memcpy(&amp;bfType, header, sizeof(WORD));\n    pointerOfHeader+=2;\n    std::memcpy(&amp;bfSize, pointerOfHeader, sizeof(DWORD));\n    pointerOfHeader+=4;\n    std::memcpy(&amp;bfReserved1, pointerOfHeader, sizeof(WORD));\n    pointerOfHeader+=2;\n    std::memcpy(&amp;bfReserved2, pointerOfHeader, sizeof(WORD));\n    pointerOfHeader+=2;\n    // This point, pointerOfHeader is 36(catched with debugging)\n    std::memcpy(&amp;bfOffBits, pointerOfHeader, sizeof(DWORD));\n }\n</code></pre>\n\n<p>All of my variables take true value except <code>bfOffBits</code> (example 7950260717192478774). I tried to change size but I was not succeed. What is the point I am missing?</p>\n"}, {"tags": ["c++", "c++11", "enums"], "comments": [{"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "edited": false, "score": 2, "creation_date": 1518045170, "post_id": 48674842, "comment_id": 84348229, "body": "What results did you get when you measured the performance of each method?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1518045249, "post_id": 48674842, "comment_id": 84348258, "body": "Strong enums (<code>enum class</code>) were specifically added to C++ for the case where you <i>don&#39;t</i> want them to convert to integers. If you want the conversion, you can use &quot;C style enums&quot; in C++ too."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518045468, "post_id": 48674842, "comment_id": 84348328, "body": "the binary code when you use <code>enum class</code> absolute the same if you use old style enum. <code>i = static_cast&lt;int&gt;(mytype::typeX)</code> not produce any additional binary code. binary code will be as for <code>i = mytype::typeX</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1518045488, "post_id": 48674842, "comment_id": 84348335, "body": "There are no performance difference between <code>enum class</code> and regular enum. the first has &quot;stronger&quot; type."}, {"owner": {"reputation": 286, "user_id": 3566633, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0jlZR.jpg?s=128&g=1", "display_name": "ajax_velu", "link": "https://stackoverflow.com/users/3566633/ajax-velu"}, "reply_to_user": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "edited": false, "score": 0, "creation_date": 1518046692, "post_id": 48674842, "comment_id": 84348793, "body": "@GregHewgill I haven&#39;t run performance by itself (I would want to do it, still thinking what would be the right approach to it )  Based on the compile errors I saw on enum classes I understood they were not raw integers like enums, hence I was wondering about the performance"}, {"owner": {"reputation": 286, "user_id": 3566633, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0jlZR.jpg?s=128&g=1", "display_name": "ajax_velu", "link": "https://stackoverflow.com/users/3566633/ajax-velu"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1518046699, "post_id": 48674842, "comment_id": 84348795, "body": "@BoPersson I understand , its about project conformity, most places use enum classes"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1518091396, "post_id": 48674842, "comment_id": 84367257, "body": "@ajax_velu Just a note, these are referred to as <i>scoped</i> and <i>unscoped</i> enums."}], "owner": {"reputation": 286, "user_id": 3566633, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0jlZR.jpg?s=128&g=1", "display_name": "ajax_velu", "link": "https://stackoverflow.com/users/3566633/ajax-velu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 782, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1518044976, "creation_date": 1518044976, "question_id": 48674842, "link": "https://stackoverflow.com/questions/48674842/performance-of-enum-class-vs-c-style-enum", "title": "performance of enum class vs c style enum", "body": "<p>I am currently using enum class to \n- create an array with the number of elements in the enum \n- and index into the right values into the array at the time of usage </p>\n\n<pre><code>enum class mytype {type1, type2, type3, numoftypes};\n\nclass1 myarr [numoftypes];\n</code></pre>\n\n<p>unlike c style enums I have observed cpp enum classes are not native integers, I need to use static cast to make them integers </p>\n\n<p>\"I understand static casts are compile time replacement \"</p>\n\n<p>so when I use an enum class to index into my array at any time is there a performance hit? I was experimenting with the enum classes code and based on the compiler errors I could see they do not behave like c style enums. </p>\n\n<p>Is there a performance hit I am taking to using enum classes over enums?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1518045170, "post_id": 48674805, "comment_id": 84348230, "body": "@BoPersson I think <a href=\"https://stackoverflow.com/q/13238050/6525260\">this</a> is a good duplicate as well."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518046543, "post_id": 48674849, "comment_id": 84348729, "body": "Per the question, you will also need <code>&quot;extern &quot;C&quot;</code>.  As-is, it is not a &quot;standard C function&quot; and its address cannot be passed to a C library."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518046622, "post_id": 48674849, "comment_id": 84348761, "body": "@BenVoigt, good call. Thanks for the suggestion."}, {"owner": {"reputation": 405, "user_id": 3508805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5383e212c3dccbf1053a18ad314d7f?s=128&d=identicon&r=PG", "display_name": "thewoz", "link": "https://stackoverflow.com/users/3508805/thewoz"}, "edited": false, "score": 0, "creation_date": 1518083845, "post_id": 48674849, "comment_id": 84362117, "body": "Thanks for the answer. This solution is correct also in case of a multi threads application?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1518046599, "last_edit_date": 1518046599, "creation_date": 1518045003, "answer_id": 48674849, "question_id": 48674805, "link": "https://stackoverflow.com/questions/48674805/convert-a-member-function-pointer-to-standard-c-function-with-multiple-arguments/48674849#48674849", "title": "Convert a member function pointer to standard C function with multiple arguments", "body": "<blockquote>\n  <p>I am trying to convert a member function pointer to standard C function pointer without success.</p>\n</blockquote>\n\n<p>Short answer: You cannot.</p>\n\n<p>Longer answer: Create a wrapper function to be used as a C function pointer and call the member function from it. Remember that you will need to have an object to be able make that member function call.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>void setFunction(void(*cbfun)(float*,int,int,int,int)){ ... }\n\nclass base_t;\nbase_t* current_base_t = nullptr;\nextern \"C\" void callback_wrapper(float * a, int b, int c, int d, int e);\n\nclass base_t {\n\n  public:\n\n    void setCallback(){   \n       current_base_t = this;\n       setFunction(&amp;callback_wrapper);   \n    }\n\n  private:\n\n    void _callback(float * a, int b, int c, int d, int e) { ... }\n\n};    \n\nvoid callback_wrapper(float * a, int b, int c, int d, int e)\n{\n   if ( current_base_t != nullptr )\n   {\n      current_base_t-&gt;_callback(a, b, c, d, e);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 3508805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5383e212c3dccbf1053a18ad314d7f?s=128&d=identicon&r=PG", "display_name": "thewoz", "link": "https://stackoverflow.com/users/3508805/thewoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1518045029, "answer_count": 1, "score": 0, "last_activity_date": 1518046599, "creation_date": 1518044771, "question_id": 48674805, "link": "https://stackoverflow.com/questions/48674805/convert-a-member-function-pointer-to-standard-c-function-with-multiple-arguments", "closed_reason": "Duplicate", "title": "Convert a member function pointer to standard C function with multiple arguments", "body": "<p>I am trying to convert a member function pointer to standard C function pointer without success.</p>\n\n<p>I tried different methods but I miss something.</p>\n\n<p>My problem is that I need to call a library's function that takes as argument a functor:</p>\n\n<pre><code>void setFunction(void(*cbfun)(float*,int,int,int,int)){ ... }\n</code></pre>\n\n<p>inside a class in this way:</p>\n\n<pre><code>class base_t {\n\n  public:\n\n    void setCallback(){\n\n      setFunction(&amp;_callback);\n\n    }\n\n  private:\n\n    void _callback(float * a, int b, int c, int d, int e) { ... }\n\n};    \n</code></pre>\n\n<p>Unfortunately, the _callback() function cannot be static.</p>\n\n<p>I'm also tried to use std::bind but without fortune.</p>\n\n<p>Is there any way I can pass the member to the function?</p>\n"}, {"tags": ["c++", "winapi", "semaphore"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1518079815, "post_id": 48674760, "comment_id": 84359390, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518048793, "post_id": 48674844, "comment_id": 84349356, "body": "In the latest versions of C++, you could just replace &quot;static&quot; with &quot;inline&quot;. No definition in a .cpp file required."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1518044984, "creation_date": 1518044984, "answer_id": 48674844, "question_id": 48674760, "link": "https://stackoverflow.com/questions/48674760/releasesemaphore-returns-error-6-invalid-handle/48674844#48674844", "title": "ReleaseSemaphore returns error 6 (Invalid Handle)", "body": "<p>You declare <code>semaphore</code> as a <code>static HANDLE</code> in <code>header.h</code>.  That means that every source module that includes <code>\"header.h\"</code> will have its own copy of that variable.  Thus, the <code>semaphore</code> in main.cpp that holds the Windows semaphore handle is a different variable than the <code>semaphore</code> referenced in <code>server.cpp</code>.</p>\n\n<p>Remove the <code>static</code> from the declaration in <code>header.h</code>, replace it with <code>extern</code>, and add a definition for it in <code>main.cpp</code>.</p>\n"}], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1518048642, "creation_date": 1518044517, "last_edit_date": 1518048642, "question_id": 48674760, "link": "https://stackoverflow.com/questions/48674760/releasesemaphore-returns-error-6-invalid-handle", "title": "ReleaseSemaphore returns error 6 (Invalid Handle)", "body": "<p>I'm trying to use two threads to run a server and a client.\nI use a <strong>semaphore</strong> to block the client thread from doing too much before the server has been set up (<code>ListenSocket</code>, etc.).</p>\n\n<p>When The server gets far enough, I use <code>ReleaseSemaphore()</code> but it returns an <code>Invalid Handle</code> error.\nI've read that there are many possible issues which can be the source of this error.</p>\n\n<p>The exact line is <code>if (ReleaseSemaphore(semaphore, 1, NULL)){}</code> which can be found about 55% of the way into the <code>Server.cpp</code> file</p>\n\n<p><strong>Header.h</strong>:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n\n#include &lt;Windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;process.h&gt;\n\nunsigned int __stdcall servermain(void*);\n\nunsigned int __stdcall clientmain(void*);\n\nstatic HANDLE semaphore;\n</code></pre>\n\n<p><strong>Source.cpp</strong>:</p>\n\n<pre><code>#include \"Header.h\"\n\nint main(int argc, char* argv[])\n{\n    HANDLE serverHandle, clientHandle;\n\n    semaphore = CreateSemaphore(\n        NULL,\n        0,  //initial count\n        1,  //max count\n        NULL);\n\n    if (semaphore == NULL){\n        printf(\"CreateSemaphore error: %d\\n\", GetLastError());\n        return 1;\n    }\n\n\n    /*call to the methods in the Client and Server files*/\n    serverHandle = (HANDLE)_beginthreadex(0, 0, &amp;servermain, 0, 0, 0);\n    clientHandle = (HANDLE)_beginthreadex(0, 0, &amp;clientmain, 0, 0, 0);\n\n    WaitForSingleObject(serverHandle, INFINITE);\n    WaitForSingleObject(clientHandle, INFINITE);\n\n    CloseHandle(serverHandle);\n    CloseHandle(clientHandle);\n    CloseHandle(semaphore);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Server.cpp</strong>:</p>\n\n<pre><code>#include \"Header.h\"\n\n#pragma comment(lib, \"Ws2_32.lib\")\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"27015\"\n\nunsigned int __stdcall servermain(void* data)\n{\n    printf(\"SERVER STARTED. Thread: %i\\n\", GetCurrentThreadId());\n\n    WSADATA wsaData;\n    int iResult;\n\n    SOCKET ListenSocket = INVALID_SOCKET;\n    SOCKET ClientSocket = INVALID_SOCKET;\n\n    struct addrinfo\n        *result = NULL,\n        hints;\n\n    int iSendResult;\n    char recvbuf[DEFAULT_BUFLEN];\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData); //initiates the use of the Winsock DLL\n    if (iResult != 0) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n\n    //////////////////////////////////////\n    // Creating a Socket for the Server //\n    //////////////////////////////////////\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    hints.ai_flags = AI_PASSIVE;\n\n    // Resolve the local address and port to be used by the server\n    iResult = getaddrinfo(NULL, DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n\n    // Create a SOCKET for the server to listen for client connections\n    ListenSocket = socket(result-&gt;ai_family, result-&gt;ai_socktype, result-&gt;ai_protocol);\n    if (ListenSocket == INVALID_SOCKET) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n        freeaddrinfo(result);\n        WSACleanup();\n        return 1;\n    }\n\n\n    //////////////////////\n    // Binding a Socket //\n    //////////////////////\n\n    // Setup the TCP listening socket\n    iResult = bind(ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"bind failed with error: %d\\n\", WSAGetLastError());\n        freeaddrinfo(result);\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    char answer = 'y'; // char answer[8]; // char *answer = \"\";\n    do{\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n\n        printf(\"Would you like to wait for client?(Y/N)\\t\");\n\n        answer = getchar(); // fgets(answer, 1, stdin);\n        printf(\"%c\\n\", answer);\n    } while (answer != 'y' &amp;&amp; answer != 'n'); // double quotes \"\" are for c-strings. single quotes '' are for chars.\n\n    if (answer == 'n'){\n        return 1;\n    }\n    else printf(\"%i Server:\\tListening for a client...\\n\", GetCurrentThreadId());\n\n    freeaddrinfo(result);\n\n    printf(\"Semaphore value: %i\\n\", semaphore);\n\n    //Now that the server is running, signal the semaphore to allow client to connect.\n    if (ReleaseSemaphore(semaphore, 1, NULL)) //ReleaseSemaphore() returns a bool value\n    {\n        printf(\"%i Server: Semaphore Released\\n\", GetCurrentThreadId());\n    }\n    else\n    {\n        printf(\"Server Release Semaphore error: %d\\n\", GetLastError());\n        printf(\"Server Semaphore value: %i\\n\", semaphore);\n        return 1;\n    }\n\n\n    ///////////////////////////\n    // Listening on a Socket //\n    ///////////////////////////\n\n    iResult = listen(ListenSocket, SOMAXCONN);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"Listen failed with error: %ld\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    ////////////////////////////\n    // Accepting a Connection //\n    ////////////////////////////\n\n    // Accept a client socket\n    ClientSocket = accept(ListenSocket, NULL, NULL);\n    if (ClientSocket == INVALID_SOCKET) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"accept failed: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // No longer need server socket\n    closesocket(ListenSocket); // This will need to be changed if multiple clients shall be allowed\n\n    //////////////////////////////////////////////\n    // Receiving and Sending Data on the Server //\n    //////////////////////////////////////////////\n\n    // Receive until the peer shuts down the connection\n    do {\n\n        iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);\n        if (iResult &gt; 0) {\n            printf(\"%i Server:\\t\", GetCurrentThreadId());\n\n            printf(\"Bytes received: %d\\n\", iResult);\n\n            // Echo the buffer back to the sender\n            iSendResult = send(ClientSocket, recvbuf, iResult, 0);\n            if (iSendResult == SOCKET_ERROR) {\n                printf(\"send failed: %d\\n\", WSAGetLastError());\n                closesocket(ClientSocket); //why close a socket if something doesn't send correctly?\n                WSACleanup();\n                return 1; //kills main()\n            }\n            printf(\"Bytes sent: %d\\n\", iSendResult);\n        }\n        else if (iResult == 0)\n            printf(\"Connection closing...\\n\");\n        else {\n            printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ClientSocket);\n            WSACleanup(); //function terminates use of the Winsock 2 DLL (Ws2_32.dll)\n            return 1;\n        }\n\n    } while (iResult &gt; 0);\n\n    // shutdown the send half of the connection since no more data will be sent\n    iResult = shutdown(ClientSocket, SD_SEND);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"%i Server:\\t\", GetCurrentThreadId());\n        printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ClientSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // cleanup\n    closesocket(ClientSocket);\n    WSACleanup();\n\n    _endthreadex(0); //end thread within the thread.\n    return 0;\n}\n</code></pre>\n\n<p><strong>Client.cpp</strong>:</p>\n\n<pre><code>#include \"Header.h\"\n\n#pragma comment (lib, \"Ws2_32.lib\")\n#pragma comment (lib, \"Mswsock.lib\")\n#pragma comment (lib, \"AdvApi32.lib\")\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"27015\"\n\nunsigned int __stdcall clientmain(void* data)\n{\n    printf(\"CLIENT STARTED. Thread: %i\\n\", GetCurrentThreadId());\n\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n        *ptr = NULL,\n        hints;\n    char *sendbuf = \"this is a test\";\n    char recvbuf[DEFAULT_BUFLEN];\n    int iResult;\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    // Validate the parameters\n    /*if (argc != 2) {\n        printf(\"usage: %s server-name\\n\", argv[0]);\n        return 1;\n    }*/\n\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"%i Client:\\t\", GetCurrentThreadId());\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    printf(\"Client winsock initialized\\n\");\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    // Resolve the server address and port\n    /*iResult = getaddrinfo(argv[1], DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0) {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }*/\n\n\n    printf(\"%i Client: before semaphore\\n\", GetCurrentThreadId());\n    //Wait for Server to be up and running\n\n    bool cont = TRUE;\n    while (cont)\n    {\n        DWORD returnval = WaitForSingleObject(semaphore, 0L); // 0 vs 0L ?\n\n        //printf(\"Semaphore value: %i\\n\", semaphore);\n\n        switch (returnval)\n        {\n            // The semaphore object was signaled.\n            case WAIT_OBJECT_0:\n                printf(\"Thread %d: wait succeeded\\n\", GetCurrentThreadId());\n\n                break;\n\n                // The semaphore was nonsignaled, so a time-out occurred.\n            case WAIT_TIMEOUT:\n                printf(\"Thread %d: wait timed out\\n\", GetCurrentThreadId());\n                break;\n        }\n    }\n\n    printf(\"%i Client: after semaphore\\n\", GetCurrentThreadId());\n\n    // Attempt to connect to an address until one succeeds\n    for (ptr = result; ptr != NULL; ptr = ptr-&gt;ai_next) {\n\n        // Create a SOCKET for connecting to server\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET) {\n            printf(\"%i Client:\\t\", GetCurrentThreadId());\n            printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n            WSACleanup();\n            return 1;\n        }\n\n        // Connect to server.\n        iResult = connect(ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n        if (iResult == SOCKET_ERROR) {\n            closesocket(ConnectSocket);\n            ConnectSocket = INVALID_SOCKET;\n            continue;\n        }\n        break;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET) {\n        printf(\"%i Client:\\t\", GetCurrentThreadId());\n        printf(\"Unable to connect to server!\\n\");\n        WSACleanup();\n        return 1;\n    }\n\n    // Send an initial buffer\n    iResult = send(ConnectSocket, sendbuf, (int)strlen(sendbuf), 0);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"%i Client:\\t\", GetCurrentThreadId());\n        printf(\"send failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ConnectSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    printf(\"Bytes Sent: %ld\\n\", iResult);\n\n    // shutdown the connection since no more data will be sent\n    iResult = shutdown(ConnectSocket, SD_SEND);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"%i Client:\\t\", GetCurrentThreadId());\n        printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ConnectSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // Receive until the peer closes the connection\n    do {\n        printf(\"%i Client:\\t\", GetCurrentThreadId());\n\n        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n        if (iResult &gt; 0)\n            printf(\"Bytes received: %d\\n\", iResult);\n        else if (iResult == 0)\n            printf(\"Connection closed\\n\");\n        else\n            printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n\n    } while (iResult &gt; 0);\n\n    // cleanup\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n    printf(\"%i Client:\\t\", GetCurrentThreadId());\n    printf(\"\\nReturn to close.\\n\");\n    getchar(); //allow user to do see screen before shutting down\n\n    _endthreadex(0);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "eigen"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1518099969, "post_id": 48674702, "comment_id": 84373331, "body": "Are you sure that you are using the same version of Eigen on both systems?"}], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1518070112, "creation_date": 1518070112, "answer_id": 48678689, "question_id": 48674702, "link": "https://stackoverflow.com/questions/48674702/mac-vs-windows-eigenvector3f0-0-0-normalized/48678689#48678689", "title": "Mac vs Windows: Eigen::Vector3f(0,0,0).normalized()", "body": "<p>Check your compiler flags. You probably have fast math enabled (<code>-ffast-math</code> in gcc). This enables <code>-ffinite-math-only</code> (again, gcc) which, and I <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">quote</a>:</p>\n\n<blockquote>\n  <p>Allow optimizations for floating-point arithmetic that assume that arguments and results are not NaNs or +-Infs.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 1991373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73996acdbcf5201cb13f378b09fe2c6c?s=128&d=identicon&r=PG", "display_name": "Craig Reynolds", "link": "https://stackoverflow.com/users/1991373/craig-reynolds"}, "edited": false, "score": 0, "creation_date": 1518366783, "post_id": 48720025, "comment_id": 84466494, "body": "Thanks, that solves the mystery! When I first tried Googling for the answer I got to that <a href=\"http://eigen.tuxfamily.org/bz/show_bug.cgi?id=977\" rel=\"nofollow noreferrer\">discussion page</a> but must not have read all the way to the bottom."}], "tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 2, "last_activity_date": 1518260603, "creation_date": 1518260603, "answer_id": 48720025, "question_id": 48674702, "link": "https://stackoverflow.com/questions/48674702/mac-vs-windows-eigenvector3f0-0-0-normalized/48720025#48720025", "title": "Mac vs Windows: Eigen::Vector3f(0,0,0).normalized()", "body": "<p>My suspicion is that you got a newer Eigen version on macOS. The behavior of <code>normalize()</code> had been changed some time ago:\n<a href=\"https://bitbucket.org/eigen/eigen/commits/12f866a746\" rel=\"nofollow noreferrer\">https://bitbucket.org/eigen/eigen/commits/12f866a746</a></p>\n\n<p>There was a discussion about the expected behavior here: <a href=\"http://eigen.tuxfamily.org/bz/show_bug.cgi?id=977\" rel=\"nofollow noreferrer\">http://eigen.tuxfamily.org/bz/show_bug.cgi?id=977</a></p>\n"}], "owner": {"reputation": 442, "user_id": 1991373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73996acdbcf5201cb13f378b09fe2c6c?s=128&d=identicon&r=PG", "display_name": "Craig Reynolds", "link": "https://stackoverflow.com/users/1991373/craig-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 48720025, "answer_count": 2, "score": 1, "last_activity_date": 1518260603, "creation_date": 1518044209, "question_id": 48674702, "link": "https://stackoverflow.com/questions/48674702/mac-vs-windows-eigenvector3f0-0-0-normalized", "title": "Mac vs Windows: Eigen::Vector3f(0,0,0).normalized()", "body": "<p><strong>Why am I seeing different results for this simple 3d vector operation using Eigen on Mac and Windows?</strong></p>\n\n<p>I wrote some simulation code on my MacBook Pro (macOS 10.12.6) and tested it extensively. As soon as my colleague tried using it on Windows, he had problems. He gave me a specific failing case. It worked for me. As we dug in, <strong>it came down to an attempt to normalize a 3d zero vector, so an attempt to divide by zero. He got (nan, nan, nan) while I got (0, 0, 0)</strong>. In the context where it happened, the zero result was a soft/harmless fail, which is why I had not noticed it in my testing. </p>\n\n<p>Clearly the vector-of-nans is the right answer. I tried it in an Ubuntu build running under Vagrant and got (-nan, -nan, -nan).</p>\n\n<p><strong>Does anyone know why I get (0, 0, 0) on macOS? I think by default Xcode is using LLVM. The Ubuntu build used clang.</strong></p>\n"}, {"tags": ["c#", "c++", "dll", "utf-8", "dllimport"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1518043526, "post_id": 48674515, "comment_id": 84347607, "body": "You need to start using a proper text encoding. A Unicode encoding UTF8 is generally preferred. UTF16 may be more convenient."}, {"owner": {"reputation": 7, "user_id": 6081292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c748fd94ebb6907026ee12b02dd4e8?s=128&d=identicon&r=PG&f=1", "display_name": "tiblop", "link": "https://stackoverflow.com/users/6081292/tiblop"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518070727, "post_id": 48674515, "comment_id": 84354916, "body": "can you please explan how to do? thank you"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518077291, "post_id": 48674515, "comment_id": 84357946, "body": "There are plenty of examples around. Try some research."}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518101134, "post_id": 48680738, "comment_id": 84374161, "body": "No. This is a memory leak. And the C++ code doesn&#39;t yield UTF8 encoded data."}, {"owner": {"reputation": 7, "user_id": 6081292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c748fd94ebb6907026ee12b02dd4e8?s=128&d=identicon&r=PG&f=1", "display_name": "tiblop", "link": "https://stackoverflow.com/users/6081292/tiblop"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518624081, "post_id": 48680738, "comment_id": 84584665, "body": "it works for me, i successfuly get my accents.  also i thought stackoverflow was about helping people not just telling them they are wrong.  I&#39;ve spend hours looking for a solution so  no &quot;There are NOT  plenty of examples around&quot; that do what i want to do. So thanks for not helping , i hope my answer will help someone"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518628192, "post_id": 48680738, "comment_id": 84587556, "body": "It won&#39;t help anybody."}], "tags": [], "owner": {"reputation": 7, "user_id": 6081292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c748fd94ebb6907026ee12b02dd4e8?s=128&d=identicon&r=PG&f=1", "display_name": "tiblop", "link": "https://stackoverflow.com/users/6081292/tiblop"}, "is_accepted": true, "score": -1, "last_activity_date": 1518078095, "creation_date": 1518078095, "answer_id": 48680738, "question_id": 48674515, "link": "https://stackoverflow.com/questions/48674515/c-to-csharp-string-passing-with-dllimport-lost-accents/48680738#48680738", "title": "c++ to csharp string passing with dllimport , lost accents", "body": "<p>Solved the problem thanks to this link (that state that the problem is much more complicated that some persons may think .... ) : </p>\n\n<p><a href=\"http://blog.kutulu.org/2012/04/marshaling-utf-8-harder-than-it-ought.html\" rel=\"nofollow noreferrer\">http://blog.kutulu.org/2012/04/marshaling-utf-8-harder-than-it-ought.html</a></p>\n\n<p>c++ code: </p>\n\n<pre><code>extern \"C\" {\n    DLL_API char* __cdecl getResults(char* entry);\n}\nchar* getResults(char* entry)\n{\n   std::string Stringresult= \"h\u00e0\u00e9\";\n   char *cstr = new char[Stringresult.length() + 1];\n   strcpy(cstr, Stringresult.c_str());\n   return cstr;\n}\n</code></pre>\n\n<p>c# code: </p>\n\n<pre><code>[DllImport(\"libface.dll\" , EntryPoint = \"getResults\")]\nprivate static extern IntPtr getResults([MarshalAs(UnmanagedType.LPStr)] string entry);\n\nstatic void Main()\n{\n  var data = new List&lt;byte&gt;();\n var ptr = getResults(\"p\");\n var off = 0;\n while (true)\n { \n    var ch = Marshal.ReadByte(ptr, off++);\n    if (ch == 0)\n    {\n      break;\n    }\n    data.Add(ch);\n }\n  string sptr = Encoding.UTF8.GetString(data.ToArray());\n  Console.WriteLine(sptr);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6081292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c748fd94ebb6907026ee12b02dd4e8?s=128&d=identicon&r=PG&f=1", "display_name": "tiblop", "link": "https://stackoverflow.com/users/6081292/tiblop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 48680738, "answer_count": 1, "score": -1, "last_activity_date": 1518078095, "creation_date": 1518043208, "question_id": 48674515, "link": "https://stackoverflow.com/questions/48674515/c-to-csharp-string-passing-with-dllimport-lost-accents", "title": "c++ to csharp string passing with dllimport , lost accents", "body": "<p>I am trying to send a message from c++ to csharp but some of my accents are lost in the way ( not all of them?? ) ps: writing from italian </p>\n\n<p>Here is what I do : \nc++: </p>\n\n<pre><code>#ifdef DLL_EXPORTS\n#define DLL_API __declspec(dllexport)\n#else\n#define DLL_API __declspec(dllimport)\n#endif\n\nextern \"C\" {\n    DLL_API void __cdecl getResults(char* entry, wchar_t* result);\n} \n\n[...]\n\nvoid getResults(char* entry,wchar_t* result)\n{\nstd::string str(entry);\nstd::string Stringresult= \"h\u00e9\u00e0\" ;\nstd::wstring wsTmp(Stringresult.begin(), Stringresult.end());\nconst wchar_t* constChar = wsTmp.c_str();\nswprintf(result, Stringresult.length(), constChar);\n</code></pre>\n\n<p>c# :</p>\n\n<pre><code>    [DllImport(\"libface.dll\", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.Cdecl)]\n    public static extern void getResults([MarshalAs(UnmanagedType.LPStr)] string entry, StringBuilder res);\n\n\n\n    static void Main()\n    {\n        StringBuilder result = new StringBuilder(2000);\n\n\n        string entry = Console.ReadLine();\n        getResults( entry,result);\n        Console.WriteLine(result);\n</code></pre>\n"}, {"tags": ["c++", "sfinae", "enable-if"], "comments": [{"owner": {"reputation": 10448, "user_id": 1405560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89713245814986078240c73bca26916b?s=128&d=identicon&r=PG", "display_name": "Maximus", "link": "https://stackoverflow.com/users/1405560/maximus"}, "edited": false, "score": 1, "creation_date": 1518043231, "post_id": 48674248, "comment_id": 84347493, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/q/15427667/1405560\">stackoverflow.com/q/15427667/1405560</a>"}, {"owner": {"reputation": 10448, "user_id": 1405560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89713245814986078240c73bca26916b?s=128&d=identicon&r=PG", "display_name": "Maximus", "link": "https://stackoverflow.com/users/1405560/maximus"}, "edited": false, "score": 1, "creation_date": 1518043331, "post_id": 48674248, "comment_id": 84347531, "body": "A common mistake is to declare two function templates that differ only in their default template arguments. This is illegal because default template arguments are not part of function template&#39;s signature, and declaring two different function templates with the same signature is illegal <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/enable_if</a>"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1518043723, "post_id": 48674248, "comment_id": 84347683, "body": "For the struct-based version, you need to have a base template (probably an empty struct in this case) which is then <i>specialized</i> for your cases."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1518044126, "post_id": 48674248, "comment_id": 84347820, "body": "SFINAE aside, you are not correctly implementing <b>template specialization</b>.  Learn how to do template specialization first, and then try adding SFINAE to your specializations."}, {"owner": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1518077783, "post_id": 48674248, "comment_id": 84358199, "body": "@DrewDormann, I think I had some kind of blackout yesterday when it comes to class template specialization :|"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "edited": false, "score": 0, "creation_date": 1518075847, "post_id": 48674527, "comment_id": 84357266, "body": "Thank you! I have no idea why I&#39;ve started to try to override base template instead of focusing on partial specialization. The methods though are still a mystery to me - the solution below works, but I&#39;m not sure why I have to do it like that. More in the comment below."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "edited": false, "score": 0, "creation_date": 1518076497, "post_id": 48674527, "comment_id": 84357587, "body": "In solution below, the enable_if_t becomes a non-type template parameter, thus 2 function have essentially different template parameters. Your original solution enable_if_t is only a default a argument, the template parameter are the same (both an anonymous type parameter)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "edited": false, "score": 0, "creation_date": 1518081087, "post_id": 48674527, "comment_id": 84360211, "body": "@wrealcon: see <a href=\"https://stackoverflow.com/questions/38305222/default-template-argument-when-using-stdenable-if-as-templ-param-why-ok-wit\">default-template-argument-when-using-stdenable-if-as-templ-p&zwnj;&#8203;aram</a>"}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 2, "last_activity_date": 1518043269, "creation_date": 1518043269, "answer_id": 48674527, "question_id": 48674248, "link": "https://stackoverflow.com/questions/48674248/how-does-sfinae-exactly-work/48674527#48674527", "title": "How does SFINAE exactly work?", "body": "<p>The error for your class template is because you can't redefine a class template, it has nothing to do with SFINAE.</p>\n\n<pre><code>template&lt;class A = int&gt; struct foo {};\ntemplate&lt;class A = double&gt; struct foo {};\n</code></pre>\n\n<p>This code can't compile even without instantiation.</p>\n\n<p>The error for your function is because default template argument is <strong>not</strong> part of a function's template parameter signature.</p>\n\n<pre><code>template&lt;class A, class B = int&gt; void bar() {}\ntemplate&lt;class A, class B = double&gt; void bar() {}\n</code></pre>\n\n<p>This code can't compile even without instantiation, because their template parameter signature are the same:</p>\n\n<pre><code>template&lt;class A, class B&gt; void bar() {}\n</code></pre>\n\n<p>thus redefinition.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "edited": false, "score": 0, "creation_date": 1518077403, "post_id": 48674872, "comment_id": 84358004, "body": "Thank you! I think I understand my mistake in both cases."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1518045150, "creation_date": 1518045150, "answer_id": 48674872, "question_id": 48674248, "link": "https://stackoverflow.com/questions/48674248/how-does-sfinae-exactly-work/48674872#48674872", "title": "How does SFINAE exactly work?", "body": "<p>Fixed versions:</p>\n\n<pre><code>template&lt;typename T, typename Enabler = void&gt; struct to_my_string;\n\ntemplate &lt;typename T&gt;\nstruct to_my_string&lt;T, std::enable_if_t&lt;\n                std::is_integral&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             || std::is_floating_point&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             &gt;&gt;\n{\n    std::string operator()(T numerical) const\n    {\n        return std::to_string(numerical);\n    }\n};\n\ntemplate&lt;typename T&gt;\nstruct to_my_string&lt;T, std::enable_if_t&lt;std::is_same&lt;T, std::string&gt;::value&gt;&gt;\n{\n    std::string operator()(const T&amp; str) const\n    {\n        return \"'\" + str + \"'\";\n    }\n};\n\n\n// version with template method\ntemplate&lt;typename T, std::enable_if_t&lt;\n                std::is_integral&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             || std::is_floating_point&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             , void*&gt; = nullptr\n         &gt;\nstd::string to_string_method(T numerical)\n{\n    return std::to_string(numerical);\n}\n\ntemplate&lt;typename T, std::enable_if_t&lt; std::is_same&lt;T, std::string&gt;::value, void*&gt; = nullptr&gt;\nstd::string to_string_method(T str)\n{\n    return \"'\" + str + \"'\";\n}\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1518045150, "creation_date": 1518042108, "question_id": 48674248, "link": "https://stackoverflow.com/questions/48674248/how-does-sfinae-exactly-work", "title": "How does SFINAE exactly work?", "body": "<p>I have a problem with SFINAE. I'm missing something important and reading other issues do not help :(</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\n// version with template class\n\ntemplate&lt;typename T, typename = std::enable_if_t&lt;\n                std::is_integral&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             || std::is_floating_point&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             &gt;\n         &gt;\nstruct to_my_string\n{\n    std::string operator()(T numerical)\n    {\n        return std::to_string(numerical);\n    }\n};\n\ntemplate&lt;typename T, typename = std::enable_if_t&lt; std::is_same&lt;T, std::string&gt;::value &gt; &gt;\nstruct to_my_string\n{\n    std::string operator()(T str)\n    {\n        return \"'\" + str + \"'\";\n    }\n};\n\n\n// version with template method\n\ntemplate&lt;typename T, typename = std::enable_if_t&lt;\n                std::is_integral&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             || std::is_floating_point&lt;std::remove_reference_t&lt;T&gt;&gt;::value\n             &gt;\n         &gt;\nstd::string to_string_method(T numerical)\n{\n    return std::to_string(numerical);\n}\n\ntemplate&lt;typename T, typename = std::enable_if_t&lt; std::is_same&lt;T, std::string&gt;::value &gt; &gt;\nstd::string to_string_method(T str)\n{\n    return \"'\" + str + \"'\";\n}\n\nint main()\n{\n    std::cout &lt;&lt; \"start\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I have pasted two approaches - a class and a method approach. Both yields similar errors:\nHere are errors for g++ (clang gives similar errors):</p>\n\n<pre><code>g++ --std=c++14 sfinae_failure.cpp\n\nsfinae_failure.cpp:21:12: error: redefinition of default argument for \u2018class&lt;template-parameter-1-2&gt;\u2019\n struct to_my_string\n        ^\nsfinae_failure.cpp:7:26: note: original definition appeared here\n template&lt;typename T, typename = std::enable_if_t&lt;\n                      ^\nsfinae_failure.cpp:43:17: error: redefinition of \u2018template&lt;class T, class&gt; std::__cxx11::string to_string_method(T)\u2019\n std::string to_string_method(T str)\n             ^\nsfinae_failure.cpp:37:17: note: \u2018template&lt;class T, class&gt; std::__cxx11::string to_string_method(T)\u2019 previously declared here\n std::string to_string_method(T numerical)\n             ^\n</code></pre>\n\n<p>My main question is why it does not work, even when I'm using T type in enable_if_t. What am I missing?</p>\n\n<p>Additional side question is - I thought that template classes/methods are instantiated, when they are used. As you can see in the main method - they are not.</p>\n\n<p>I would really appreciate some help here even if that topic was touched many many times...</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 3, "creation_date": 1518041790, "post_id": 48674163, "comment_id": 84346829, "body": "<code>x</code> must never be incremented, which means that condition defining whether or not it runs must never be true. You&#39;ll need to do some debugging."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1518041912, "post_id": 48674163, "comment_id": 84346891, "body": "<i>I can&#39;t figure out what it could be</i> check your <code>while</code> and <code>for</code> loops, because if done wrong they can run indefinitely!"}, {"owner": {"reputation": 3063, "user_id": 5075720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNyMGvaELDs/AAAAAAAAAAI/AAAAAAAAVnw/P1Rt8TFE2gc/photo.jpg?sz=128", "display_name": "PaSTE", "link": "https://stackoverflow.com/users/5075720/paste"}, "edited": false, "score": 0, "creation_date": 1518042007, "post_id": 48674163, "comment_id": 84346939, "body": "Your problem is mathematical, not algorithmic.  The first five square triangular numbers are 0, 1, 36, 1225, and 41616.  With <code>y</code> stopping at 511, you will never reach the 6th square triangular number 1413721, so <code>x</code> will never be greater than 4.  Try <code>while (x &lt; HOW_MANY)</code>, or increase the upper limit on the loop over <code>y</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1518042070, "post_id": 48674163, "comment_id": 84346970, "body": "Unrelated: <code>pow</code> is designed for really nasty stuff like pi to the power of e. Using it to square an integer is massive overkill and probably very slow. Just use multiplication here. Due to floating point imprecision it can also give you the wrong number."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518042305, "post_id": 48674163, "comment_id": 84347066, "body": "Look into learning to use your development environment&#39;s debugger. It often makes investigating errant loops staggeringly easy. Make a comment on what compiler/ environment you are using and no doubt someone will tell you what debugger you should be using."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1518043093, "post_id": 48674163, "comment_id": 84347430, "body": "You cannot test float equality and expect any sensible results."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 0, "last_activity_date": 1518042538, "last_edit_date": 1592644375, "creation_date": 1518041939, "answer_id": 48674221, "question_id": 48674163, "link": "https://stackoverflow.com/questions/48674163/my-program-doesnt-end/48674221#48674221", "title": "My program doesn&#39;t end", "body": "<p><code>x</code> begins at <code>0</code>. Every time you find and print a number it gets incremented. You'll continue this, so long as <code>x&lt;=HOW_MANY</code>.</p>\n<p>You say your program finds 4 numbers but keeps running. After 4 hits, <code>x</code> will be 4. Is <code>4 &lt;= 4</code>? The answer is yes, so your program keeps running.</p>\n<p>Either change the condition to <code>x &lt; HOW_MANY</code>, or initialize <code>x</code> to <code>1</code>.</p>\n<hr />\n<h1>EDIT</h1>\n<p>Did a little leg work, it turns out the sum of all the numbers in the range [1,512] is <strong>131328</strong>. The 5th <a href=\"https://en.wikipedia.org/wiki/Square_triangular_number\" rel=\"nofollow noreferrer\">square triangle number</a> is <strong>1413721</strong>.</p>\n<p>This means after you find the fourth triangle number, you will <strong>never</strong> sum high enough to find the next one. This will result in the infinite loop you're seeing.</p>\n<p>The answer above is still the correct fix, but this is the reason you end up with an infinite loop.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 8204841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/884rc.png?s=128&g=1", "display_name": "Micha\u0142 Kalinowski", "link": "https://stackoverflow.com/users/8204841/micha%c5%82-kalinowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1518041974, "creation_date": 1518041974, "answer_id": 48674224, "question_id": 48674163, "link": "https://stackoverflow.com/questions/48674163/my-program-doesnt-end/48674224#48674224", "title": "My program doesn&#39;t end", "body": "<p>If <code>x = 0</code> then instead of <code>while (x&lt;=HOW_MANY)</code> you need write <code>while (x&lt;HOW_MANY)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "is_accepted": false, "score": 0, "last_activity_date": 1518050257, "creation_date": 1518050257, "answer_id": 48675658, "question_id": 48674163, "link": "https://stackoverflow.com/questions/48674163/my-program-doesnt-end/48675658#48675658", "title": "My program doesn&#39;t end", "body": "<p><code>for</code> should be used for iteration and <code>while</code> should be used for condition testing.</p>\n\n<p>The problem, as has been noted, is that your <code>x</code> condition variable is never being incremented to get you out of the outer loop. That's a logic error that can be avoided by using the appropriate control structure for the job.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9319233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518050257, "creation_date": 1518041655, "question_id": 48674163, "link": "https://stackoverflow.com/questions/48674163/my-program-doesnt-end", "title": "My program doesn&#39;t end", "body": "<p>I'm new too c++ and I had to design a program that determines the first four triangular square numbers and the output is exactly how I want it to be, but it wont quit after its printed the first four. I can't figure out what it could be. I can't CTRL C because I will get points taken off. What is the issue here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main()\n{\n    //Prints name line\n    cout&lt;&lt;\"*********** BY: ********\"&lt;&lt;endl;\n\n    //Initializing\n    const int HOW_MANY=4;\n    int num=1;\n    int tsn=0;\n    int z=1;\n    int x=0;\n    //How many TSN it will find and be printed\n    while (x&lt;=HOW_MANY)\n    { \n        //\n        int sum=0;\n        for (int y=0;y&lt;512;y++)\n        {\n                sum+=y;\n                tsn=pow(num,2);\n                //Tests if the numbers are TSN\n                if ((sum==tsn) || (num+1)/sqrt(num)==sqrt(num))\n                {\n\n                    //Prints 1-HOW_MANY TSN and what they are\n                    cout&lt;&lt;\"Square Triangular Number \"&lt;&lt; z &lt;&lt;\" is: \"&lt;&lt; tsn &lt;&lt;endl;\n                    z++;\n                    x++;\n                }\n        }\n        num++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "using", "using-directives", "using-declaration"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1518042075, "post_id": 48674158, "comment_id": 84346974, "body": "Don&#39;t use <code>using namespace xxxx</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518042170, "post_id": 48674158, "comment_id": 84347013, "body": "<code>using foo::var</code> makes <code>var</code> accessible without namespace qualifiers.  If other declarations have made <code>var</code> accessible without namespace qualifiers such as (<code>using namespace bar</code>) it does nothing to pick this one as the default or anything."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1518042689, "post_id": 48674158, "comment_id": 84347230, "body": "And while I don&#39;t agree with @NathanOliver, I am 1) outvoted by programmers who are probably better than me, and 2) I would <i>never</i> use namespace composition that could possibly have to be resolved like you are trying to do.  (Even if it was possible, which it may be, although I doubt)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1518043584, "post_id": 48674158, "comment_id": 84347636, "body": "@zzxyz I&#39;ve encountered a few bugs/errors when using <code>using namespace xxxx</code>.  One was very unintuitive.  After getting burned a couple of times I&#39;ve just decide that fully qualifying the names is just safer.  You can alias namespace names to make it less typing."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518044084, "post_id": 48674158, "comment_id": 84347801, "body": "@NathanOliver - I do the big bad:  <code>using namespace std;</code> all the time.  I can&#39;t <i>stand</i> how STL code looks without it.  I haven&#39;t been burned yet <i>crosses fingers</i>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1518045516, "post_id": 48674158, "comment_id": 84348344, "body": "@zzxyz: <code>using std::string; using std::vector;</code> (etc.) makes STL code just as nice, and doesn&#39;t lead to name clashes you weren&#39;t aware of."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518066229, "post_id": 48674158, "comment_id": 84353527, "body": "@BenVoigt <code>std::unordered_map&lt;int, std::unordered_map&lt;&lt;std::string, std::vector&lt;std::string&gt;&gt;&gt;</code> is honestly basically visually incomprehensible to me, where <code>unordered_map&lt;int, unordered_map&lt;string, vector&lt;string&gt;&gt;&gt;</code> I can immediately comprehend.  (I find <code>typedef</code> distasteful for some purposes)...And forget about starting to wrap stuff in <code>std::shared_ptr</code>)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1518066282, "post_id": 48674158, "comment_id": 84353541, "body": "@zzxyz: So use the second.  <code>using</code> is not evil unless it appears in global scope and is followed by <code>namespace</code>."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518066508, "post_id": 48674158, "comment_id": 84353605, "body": "@BenVoigt - Thank you.  Somehow that alternative had not occurred to me...What about global scope in a single compilation unit?  (a .cpp/.c file vs .h)?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518067172, "post_id": 48674158, "comment_id": 84353802, "body": "@zzxyz: A lesser evil.  Have you ever tried listing the names you use from the library?  You might find that list more useful than you think... and it makes the code more portable, because you aren&#39;t pulling in an unknown list of extra names."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518067356, "post_id": 48674158, "comment_id": 84353861, "body": "@BenVoigt - It&#39;s pretty short, I think.  4 or 5 items that I use regularly.  It&#39;s a good plan."}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 2, "last_activity_date": 1518046526, "last_edit_date": 1518046526, "creation_date": 1518043619, "answer_id": 48674601, "question_id": 48674158, "link": "https://stackoverflow.com/questions/48674158/namespace-composition-and-selection/48674601#48674601", "title": "namespace composition and selection", "body": "<pre><code>using foo::var;\n</code></pre>\n\n<p>The line above basically does nothing except make the your function call more ambiguous. The first <code>using namespace foo</code> makes anything in namespace <code>foo</code> available without <code>foo::</code> (So <code>var</code>). The next line does the same thing for namespace <code>bar</code>. The last line, the one shown above, tells the compiler to specifically remove the namespace qualifier for <code>foo::var</code> <em>only inside baz</em>. Thus, in your if statement, the compiler is given 3 candidates to choose from, and can pick none. The exact error GCC 7.2 gives is:</p>\n\n<blockquote>\n  <p>prog.cc: In function 'void qux(int)':</p>\n  \n  <p>prog.cc:24:14: error: reference to 'var' is ambiguous\n       if (n == var) {</p>\n  \n  <p>prog.cc:4:9: note: candidates are: int foo::var\n       int var = 0;</p>\n  \n  <p>prog.cc:9:9: note:                 int bar::var\n       int var = 1;</p>\n  \n  <p>prog.cc:4:9: note:                 int foo::var\n       int var = 0;</p>\n</blockquote>\n\n<p><a href=\"https://wandbox.org/permlink/9a2yKvKBM6H1Tes1\" rel=\"nofollow noreferrer\">See it live</a></p>\n\n<p>To avoid this ambiguity, it is best you avoid statements of the sort <code>using namespace a;</code> and instead fully qualify all names.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 8204841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/884rc.png?s=128&g=1", "display_name": "Micha\u0142 Kalinowski", "link": "https://stackoverflow.com/users/8204841/micha%c5%82-kalinowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1518076565, "last_edit_date": 1518076565, "creation_date": 1518043681, "answer_id": 48674615, "question_id": 48674158, "link": "https://stackoverflow.com/questions/48674158/namespace-composition-and-selection/48674615#48674615", "title": "namespace composition and selection", "body": "<p>So problem is when you use variable name that can go from both namespaces. When you have multiple candidates at a specific level, then that is an ambiguity.\nYou have <code>foo::var</code> and <code>bar::var</code>, and you make <code>\n    using namespace foo;\n    using namespace bar;</code></p>\n\n<p>Now when compiler see var, he can't know which <code>var</code> you want use.\nIf you really want use that <code>using namespace</code>, then you need make an exception for these variables and say what you mean f.e:</p>\n\n<pre><code>if (n == foo::var) \n{\n    std::cout &lt;&lt; \"baz: var \" &lt;&lt; std::endl;\n} \nelse if(n == bar::var) \n{\n    std::cout &lt;&lt; \"baz: \" &lt;&lt; n &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 2, "last_activity_date": 1518066339, "last_edit_date": 1518066339, "creation_date": 1518045423, "answer_id": 48674931, "question_id": 48674158, "link": "https://stackoverflow.com/questions/48674158/namespace-composition-and-selection/48674931#48674931", "title": "namespace composition and selection", "body": "<blockquote>\n<pre><code>// I thought that the following line would resolve the name clash\nusing foo::var;   \n</code></pre>\n</blockquote>\n\n<p>Well, it does resolve the name clash <em>for the current namespace, which is <code>baz</code></em>.</p>\n\n<p>If you move <code>qux</code> into <code>baz</code>, it will prefer <code>foo::var</code>.</p>\n\n<p>But for <code>::qux</code> (outside any namespace), there is no reason to prefer <code>baz::var</code> (the alias for <code>foo::var</code>) over <code>bar::var</code> or <code>foo::var</code>, since all of them are in the current namespace search path.</p>\n\n<p>Even though only <code>using namespace baz;</code> was seen at global level.</p>\n"}], "owner": {"reputation": 295, "user_id": 1150514, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/895988069e2e13797a29ec23e88484f0?s=128&d=identicon&r=PG", "display_name": "carlo", "link": "https://stackoverflow.com/users/1150514/carlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 48674931, "answer_count": 3, "score": 1, "last_activity_date": 1518079153, "creation_date": 1518041630, "last_edit_date": 1592644375, "question_id": 48674158, "link": "https://stackoverflow.com/questions/48674158/namespace-composition-and-selection", "title": "namespace composition and selection", "body": "<p>After reading <em>The C++ Programming Language 4th edition</em> (section 14.4.4 -\nComposition and Selection) I thought that the following program would compile correctly:</p>\n<pre><code>#include &lt;iostream&gt;\n\nnamespace foo {\n    int var = 0;\n    // more declarations\n}\n\nnamespace bar {\n    int var = 1;\n    // more declarations\n}\n\nnamespace baz {\n    // composition of namespaces foo and bar\n    using namespace foo;\n    using namespace bar;\n    // I thought that the following line would resolve the name clash\n    using foo::var;   \n}\n\nusing namespace baz;\n\nvoid qux(int n) {\n    if (n == var) {\n        std::cout &lt;&lt; &quot;baz: var &quot; &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; &quot;baz: &quot; &lt;&lt; n &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    qux(0);\n    qux(1);\n}\n</code></pre>\n<p>The expected output should be</p>\n<blockquote>\n<p>baz: var</p>\n<p>baz: 1</p>\n</blockquote>\n<p>When I try to compile the code above I get an error saying that the reference to 'var' is ambiguous. Using <code>foo::var</code> eliminates the compilation error but I would like to better understand this problem.</p>\n<p>What is wrong in my code?</p>\n<p>How can I resolve the name clash in a way that the namespace baz contains <code>foo::var</code>?</p>\n<p>Thanks!</p>\n<p><strong>EDIT</strong></p>\n<p>As suggested in the answers below, moving the definition of <code>qux</code> inside the namespace <code>baz</code> makes it valid. Therefore, the following code compiles as expected</p>\n<pre><code>#include &lt;iostream&gt;\n\nnamespace foo {\n    int end = 0;\n}\n\nnamespace bar {\n    int end = 1;\n}\n\nnamespace baz {\n    using namespace foo;\n    using namespace bar;\n    using foo::end;\n    void qux(int n) {\n        if (n == end) {\n            std::cout &lt;&lt; &quot;baz: end &quot; &lt;&lt; std::endl;\n        } else {\n            std::cout &lt;&lt; &quot;baz: &quot; &lt;&lt; n &lt;&lt; std::endl;\n        }\n    }\n}\n\nint main() {\n    baz::qux(baz::end);\n    baz::qux(1);\n}\n</code></pre>\n<p>There is still one thing which is not completely clear to me. I thought that adding <code>using namespace baz</code> would make everything in <code>baz</code> available also in the current scope without using <code>baz::</code>. In other words, I would have expected that since &quot;everything works in the namespace baz&quot; this would be true also in the current scope after adding <code>using namespace baz</code>.</p>\n"}, {"tags": ["python", "c++", "opencv", "image-processing", "ocr"], "comments": [{"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525302876, "post_id": 48674106, "comment_id": 87307771, "body": "<a href=\"http://www.rroij.com/open-access/fast-moving-vehicle-number-plate-detection.php?aid=43702\" rel=\"nofollow noreferrer\">rroij.com/open-access/&hellip;</a> also seminal paper by Gull and Skilling (MaxEnt method)"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525302950, "post_id": 48674106, "comment_id": 87307784, "body": "I have some ideas but nothing concrete / yet"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525303107, "post_id": 48674106, "comment_id": 87307825, "body": "Also <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.458.2634&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">citeseerx.ist.psu.edu/viewdoc/&hellip;</a>"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525303606, "post_id": 48674106, "comment_id": 87307910, "body": "<a href=\"https://dsp.stackexchange.com/questions/tagged/blind-deconvolution\">dsp.stackexchange.com/questions/tagged/blind-deconvolution</a>"}, {"owner": {"reputation": 393, "user_id": 2090474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11713f9728e4c82b9f17950858be307?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/2090474/artur"}, "reply_to_user": {"reputation": 329, "user_id": 4959345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRsLH.jpg?s=128&g=1", "display_name": "Luis Felipe", "link": "https://stackoverflow.com/users/4959345/luis-felipe"}, "edited": false, "score": 1, "creation_date": 1567073877, "post_id": 48674106, "comment_id": 101858074, "body": "@LuisFelipe - no. We were looking for something quite fast, but nothing from aforementioned methods matched our expectations. We decided to check sharpness of the image. If the sharpness is not good enough, user is informed about it and he should take another picture."}, {"owner": {"reputation": 2822, "user_id": 11048887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kE8NR.jpg?s=128&g=1", "display_name": "Yunus Temurlenk", "link": "https://stackoverflow.com/users/11048887/yunus-temurlenk"}, "edited": false, "score": 0, "creation_date": 1605614922, "post_id": 48674106, "comment_id": 114698942, "body": "You can also check <a href=\"https://docs.opencv.org/master/de/d3c/tutorial_out_of_focus_deblur_filter.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1605618823, "post_id": 48674106, "comment_id": 114700722, "body": "I think he has already tried deconvolution with Wiener filter."}], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 12728244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c78c8562e372b261de8c24c9b6a55a?s=128&d=identicon&r=PG&f=1", "display_name": "eldesgraciado", "link": "https://stackoverflow.com/users/12728244/eldesgraciado"}, "edited": false, "score": 0, "creation_date": 1583547844, "post_id": 60569643, "comment_id": 107165134, "body": "That&#39;s some pretty insane reconstruction. Powered by CNN, huh? That&#39;s super cool, but I wonder about the resources needed (both computational power and complexity) to carry this processing out as close as real-time as possible."}, {"owner": {"reputation": 834, "user_id": 9696715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3RrU1.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9696715/ali"}, "reply_to_user": {"reputation": 2061, "user_id": 12728244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c78c8562e372b261de8c24c9b6a55a?s=128&d=identicon&r=PG&f=1", "display_name": "eldesgraciado", "link": "https://stackoverflow.com/users/12728244/eldesgraciado"}, "edited": false, "score": 0, "creation_date": 1583761439, "post_id": 60569643, "comment_id": 107214341, "body": "@eldesgraciado Yes, I agree about the reconstruction. The blind deconvolution is an expensive algorithm and I doubt it is possible to do it in real time. However, it is possible to minimize computational complexity by carrying the task at frequency domain."}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 0, "creation_date": 1614149714, "post_id": 60569643, "comment_id": 117293871, "body": "Does anyone have a tutorial on how I can implement this with python?"}], "tags": [], "owner": {"reputation": 834, "user_id": 9696715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3RrU1.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9696715/ali"}, "is_accepted": false, "score": 15, "last_activity_date": 1583524162, "last_edit_date": 1583524162, "creation_date": 1583518929, "answer_id": 60569643, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr/60569643#60569643", "title": "Deblur image with text to be recognized by OCR", "body": "<p>Are you aware of <a href=\"https://en.wikipedia.org/wiki/Blind_deconvolution\" rel=\"noreferrer\">Blind deconvolution</a>? </p>\n\n<p>Blind deconvolution is a well-known technique in restoring astronomical images. This is specially useful for your application, where finding a PSF is difficult.</p>\n\n<p><a href=\"https://github.com/s-hironobu/Blind-Deblurring\" rel=\"noreferrer\">Here</a> is one C++ implementation of this technique. This <a href=\"http://www.fit.vutbr.cz/~ihradis/CNN-Deblur/\" rel=\"noreferrer\">paper</a> is also very related to what you are looking for. Here is a sample output of their algorithm:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bGNO3.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bGNO3.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 14396037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cdcee3c4c953fe4a5c26b6d5874aa3e?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem Nayman", "link": "https://stackoverflow.com/users/14396037/kerem-nayman"}, "edited": false, "score": 1, "creation_date": 1606505792, "post_id": 64843044, "comment_id": 114989927, "body": "Hello, have you been actually test the method @Ali shared on a real image? First, on the original page Python script is for Python 2.7 and there&#39;s a lot to change, two, I haven&#39;t been able to run the code you&#39;ve provided due to this error: &quot;module &#39;caffemodel2pytorch&#39; has no attribute &#39;Net&#39;&quot;"}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 0, "creation_date": 1613810319, "post_id": 64843044, "comment_id": 117195412, "body": "I&#39;m so lost with Caffe implementation. Any help would be appreciated."}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1613810573, "post_id": 64843044, "comment_id": 117195475, "body": "I didn&#39;t further go with that Caffe implementation, it has many limitations. Check <a href=\"https://stackoverflow.com/questions/64808986/scene-text-image-super-resolution-for-ocr\">my question</a> on the <b>update 2</b> section. In my case, surprisingly <a href=\"https://github.com/microsoft/Bringing-Old-Photos-Back-to-Life\" rel=\"nofollow noreferrer\">this mechanism</a> improves the visual quality of the text image as well."}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1613810718, "post_id": 64843044, "comment_id": 117195507, "body": "During my experimenting time, that mechanism didn&#39;t publish their training code, and so if they are now, we can re-train their model on this specific text de-blur case. A <a href=\"https://github.com/microsoft/Bringing-Old-Photos-Back-to-Life/issues/57\" rel=\"nofollow noreferrer\">discussion</a>."}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 1, "creation_date": 1613811999, "post_id": 64843044, "comment_id": 117195791, "body": "Thanks. I&#39;ll probably forgo the RealSR because I couldn&#39;t install CUDA on my 2013 Macbook Air. The MSFT one seems plausible. I&#39;ve had some luck with <code>https:&#47;&#47;github.com&#47;ys-koshelev&#47;nla_deblur</code> and DPSR."}], "tags": [], "owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "is_accepted": false, "score": 9, "last_activity_date": 1605784286, "last_edit_date": 1605784286, "creation_date": 1605433887, "answer_id": 64843044, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr/64843044#64843044", "title": "Deblur image with text to be recognized by OCR", "body": "<p>I've also encountered this issue recently and raise a similar <a href=\"https://stackoverflow.com/questions/64808986/scene-text-image-super-resolution-for-ocr\">question</a> with more details and with a recent approach. It seems to be an unsolved problem until now. There are some recent research works that try to address such problems with deep learning. Unfortunately, none of the works reach our expectations. However, I'm sharing the info in case it may come helpful to anyone.</p>\n<h2>1. Scene Text Image Super-Resolution in the Wild</h2>\n<p>In our case, it may be our last choice; comparatively, perform well enough. It's a recent research work (<a href=\"https://arxiv.org/abs/2005.03341\" rel=\"noreferrer\">TSRN</a>) mainly focuses on such cases. The main intuitive of it is to introduce super-resolution (SR) techniques as pre-processing. This <a href=\"https://github.com/JasonBoy1/TextZoom\" rel=\"noreferrer\">implementation</a> looks by far the most promising. Here is the illustration of their achievement, improve blur to clean image.</p>\n<p><img src=\"https://i.stack.imgur.com/N0vc5.jpg\" alt=\"\" /></p>\n<h2>2. Neural Enhance</h2>\n<p>From their <a href=\"https://github.com/alexjc/neural-enhance\" rel=\"noreferrer\">repo</a> demonstration, It's appearing that It may have some potential to improve blur text either. However, the author probably doesn't maintain the repo for about 4 years.</p>\n<p><img src=\"https://i.stack.imgur.com/PDPIL.jpg\" alt=\"\" /></p>\n<h2>3. Blind Motion Deblurring with GAN</h2>\n<p>The attractive part is the <strong>Blind Motion Deblurring</strong> mechanism in it, named <a href=\"https://github.com/KupynOrest/DeblurGAN\" rel=\"noreferrer\">DeblurGAN</a>. It looks very promising.</p>\n<p><a href=\"https://i.stack.imgur.com/SBsow.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SBsow.gif\" alt=\"enter image description here\" /></a></p>\n<h2>4. Real-World Super-Resolution via Kernel Estimation and Noise Injection</h2>\n<p>An interesting fact about <a href=\"https://openaccess.thecvf.com/content_CVPRW_2020/papers/w31/Ji_Real-World_Super-Resolution_via_Kernel_Estimation_and_Noise_Injection_CVPRW_2020_paper.pdf\" rel=\"noreferrer\">their work</a> is that unlike other literary works they first design a novel <strong>degradation framework</strong> for realworld images by <strong>estimating various blur kernels</strong> as well as real <strong>noise distributions</strong>. Based on that they acquire <strong>LR</strong> images sharing a common domain with real-world images. Then, they propose a realworld super-resolution model aiming at better <strong>perception</strong>. From their article:</p>\n<p><a href=\"https://i.stack.imgur.com/nQjLJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nQjLJ.png\" alt=\"enter image description here\" /></a> <a href=\"https://i.stack.imgur.com/hWEqX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hWEqX.png\" alt=\"enter image description here\" /></a></p>\n<p>However, in my observation, I couldn't get the expected results. I've raised an <a href=\"https://github.com/jixiaozhong/RealSR/issues/29\" rel=\"noreferrer\">issue on github</a> and until now didn't get any response.</p>\n<hr />\n<h2>Convolutional Neural Networks for Direct Text Deblurring</h2>\n<p>The <a href=\"http://www.fit.vutbr.cz/%7Eihradis/CNN-Deblur/\" rel=\"noreferrer\">paper</a> that was shared by @Ali looks very interesting and the outcomes are extremely good. It's nice that they have shared the pre-trained weight of their trained model and also shared python scripts for easier use. However, they've experimented with the <strong>Caffe</strong> library. I would prefer to convert into <strong>PyTorch</strong> to better control. Below are the provided python scripts with <strong>Caffe</strong> imports. Please note, I couldn't port it completely until now because of a lack of Caffe knowledge, please correct me if you are aware of it.</p>\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import print_function\nimport numpy as np\nimport os, sys, argparse, glob, time, cv2, Queue, caffe\n\n# Some Helper Functins \ndef getCutout(image, x1, y1, x2, y2, border):\n    assert(x1 &gt;= 0 and y1 &gt;= 0)\n    assert(x2 &gt; x1 and y2 &gt;y1)\n    assert(border &gt;= 0)\n    return cv2.getRectSubPix(image, (y2-y1 + 2*border, x2-x1 + 2*border), (((y2-1)+y1) / 2.0, ((x2-1)+x1) / 2.0))\n\ndef fillRndData(data, net):\n    inputLayer = 'data'\n    randomChannels = net.blobs[inputLayer].data.shape[1]\n    rndData = np.random.randn(data.shape[0], randomChannels, data.shape[2], data.shape[3]).astype(np.float32) * 0.2\n    rndData[:,0:1,:,:] = data\n    net.blobs[inputLayer].data[...] = rndData[:,0:1,:,:]\n\ndef mkdirp(directory):\n    if not os.path.isdir(directory):\n        os.makedirs(directory)\n\n</code></pre>\n<p>The main function start here</p>\n<pre class=\"lang-py prettyprint-override\"><code>def main(argv):\n    pycaffe_dir = os.path.dirname(__file__)\n\n    parser = argparse.ArgumentParser()\n    # Optional arguments.\n    parser.add_argument(\n        &quot;--model_def&quot;,\n        help=&quot;Model definition file.&quot;,\n        required=True\n    )\n    parser.add_argument(\n        &quot;--pretrained_model&quot;,\n        help=&quot;Trained model weights file.&quot;,\n        required=True\n    )\n    parser.add_argument(\n        &quot;--out_scale&quot;,\n        help=&quot;Scale of the output image.&quot;,\n        default=1.0,\n        type=float\n    )\n    parser.add_argument(\n        &quot;--output_path&quot;,\n        help=&quot;Output path.&quot;,\n        default=''\n    )\n    parser.add_argument(\n        &quot;--tile_resolution&quot;,\n        help=&quot;Resolution of processing tile.&quot;,\n        required=True,\n        type=int\n    )\n    parser.add_argument(\n        &quot;--suffix&quot;,\n        help=&quot;Suffix of the output file.&quot;,\n        default=&quot;-deblur&quot;,\n    )\n    parser.add_argument(\n        &quot;--gpu&quot;,\n        action='store_true',\n        help=&quot;Switch for gpu computation.&quot;\n    )\n    parser.add_argument(\n        &quot;--grey_mean&quot;,\n        action='store_true',\n        help=&quot;Use grey mean RGB=127. Default is the VGG mean.&quot;\n    )\n    parser.add_argument(\n        &quot;--use_mean&quot;,\n        action='store_true',\n        help=&quot;Use mean.&quot;\n    )\n    parser.add_argument(\n        &quot;--adversarial&quot;,\n        action='store_true',\n        help=&quot;Use mean.&quot;\n    )\n    args = parser.parse_args()\n\n    mkdirp(args.output_path)\n\n    if hasattr(caffe, 'set_mode_gpu'):\n        if args.gpu:\n            print('GPU mode', file=sys.stderr)\n            caffe.set_mode_gpu()\n        net = caffe.Net(args.model_def, args.pretrained_model, caffe.TEST)\n    else:\n        if args.gpu:\n            print('GPU mode', file=sys.stderr)\n        net = caffe.Net(args.model_def, args.pretrained_model, gpu=args.gpu)\n\n\n    inputs = [line.strip() for line in sys.stdin]\n\n    print(&quot;Classifying %d inputs.&quot; % len(inputs), file=sys.stderr)\n\n\n    inputBlob = net.blobs.keys()[0] # [innat]: input shape \n    outputBlob = net.blobs.keys()[-1]\n\n    print( inputBlob, outputBlob)\n    channelCount = net.blobs[inputBlob].data.shape[1]\n    net.blobs[inputBlob].reshape(1, channelCount, args.tile_resolution, args.tile_resolution)\n    net.reshape()\n\n    if channelCount == 1 or channelCount &gt; 3:\n        color = 0\n    else:\n        color = 1\n\n    outResolution = net.blobs[outputBlob].data.shape[2]\n    inResolution = int(outResolution / args.out_scale)\n    boundary = (net.blobs[inputBlob].data.shape[2] - inResolution) / 2\n\n    for fileName in inputs:\n        img = cv2.imread(fileName, flags=color).astype(np.float32)\n        original = np.copy(img)\n        img = img.reshape(img.shape[0], img.shape[1], -1)\n        if args.use_mean:\n            if args.grey_mean or channelCount == 1:\n                img -= 127\n            else:\n                img[:,:,0] -= 103.939\n                img[:,:,1] -= 116.779\n                img[:,:,2] -= 123.68\n        img *= 0.004\n\n        outShape = [int(img.shape[0] * args.out_scale) ,\n                    int(img.shape[1] * args.out_scale) ,\n                    net.blobs[outputBlob].channels]\n        imgOut = np.zeros(outShape)\n\n        imageStartTime = time.time()\n        for x, xOut in zip(range(0, img.shape[0], inResolution), range(0, imgOut.shape[0], outResolution)):\n            for y, yOut in zip(range(0, img.shape[1], inResolution), range(0, imgOut.shape[1], outResolution)):\n\n                start = time.time()\n\n                region = getCutout(img, x, y, x+inResolution, y+inResolution, boundary)\n                region = region.reshape(region.shape[0], region.shape[1], -1)\n                data = region.transpose([2, 0, 1]).reshape(1, -1, region.shape[0], region.shape[1])\n\n                if args.adversarial:\n                    fillRndData(data, net)\n                    out = net.forward()\n                else:\n                    out = net.forward_all(data=data)\n\n                out = out[outputBlob].reshape(out[outputBlob].shape[1], out[outputBlob].shape[2], out[outputBlob].shape[3]).transpose(1, 2, 0)\n\n                if imgOut.shape[2] == 3 or imgOut.shape[2] == 1:\n                    out /= 0.004\n                    if args.use_mean:\n                        if args.grey_mean:\n                            out += 127\n                        else:\n                            out[:,:,0] += 103.939\n                            out[:,:,1] += 116.779\n                            out[:,:,2] += 123.68\n\n                if out.shape[0] != outResolution:\n                    print(&quot;Warning: size of net output is %d px and it is expected to be %d px&quot; % (out.shape[0], outResolution))\n                if out.shape[0] &lt; outResolution:\n                    print(&quot;Error: size of net output is %d px and it is expected to be %d px&quot; % (out.shape[0], outResolution))\n                    exit()\n\n                xRange = min((outResolution, imgOut.shape[0] - xOut))\n                yRange = min((outResolution, imgOut.shape[1] - yOut))\n\n                imgOut[xOut:xOut+xRange, yOut:yOut+yRange, :] = out[0:xRange, 0:yRange, :]\n                imgOut[xOut:xOut+xRange, yOut:yOut+yRange, :] = out[0:xRange, 0:yRange, :]\n\n                print(&quot;.&quot;, end=&quot;&quot;, file=sys.stderr)\n                sys.stdout.flush()\n\n\n        print(imgOut.min(), imgOut.max())\n        print(&quot;IMAGE DONE %s&quot; % (time.time() - imageStartTime))\n        basename = os.path.basename(fileName)\n        name = os.path.join(args.output_path, basename + args.suffix)\n        print(name, imgOut.shape)\n        cv2.imwrite( name, imgOut)\n\nif __name__ == '__main__':\n    main(sys.argv)\n</code></pre>\n<p>To run the program:</p>\n<blockquote>\n<p>cat fileListToProcess.txt | python processWholeImage.py --model_def\n./BMVC_nets/S14_19_200.deploy --pretrained_model\n./BMVC_nets/S14_19_FQ_178000.model --output_path ./out/\n--tile_resolution 300 --suffix _out.png --gpu --use_mean</p>\n</blockquote>\n<p>The weight files and also the above scripts can be download from <a href=\"http://www.fit.vutbr.cz/%7Eihradis/CNN-Deblur/\" rel=\"noreferrer\">here (BMVC_net)</a>. However, you may want to convert <a href=\"https://github.com/vadimkantorov/caffemodel2pytorch\" rel=\"noreferrer\">caffe2pytorch</a>. In order to do that, here is the basic starting point:</p>\n<ul>\n<li>install <a href=\"http://google.github.io/proto-lens/installing-protoc.html\" rel=\"noreferrer\">proto-lens</a></li>\n<li>clone <a href=\"https://github.com/vadimkantorov/caffemodel2pytorch\" rel=\"noreferrer\">caffemodel2pytorch</a></li>\n</ul>\n<p>Next,</p>\n<pre class=\"lang-py prettyprint-override\"><code># BMVC_net, you need to download it from authors website, link above\nmodel = caffemodel2pytorch.Net(\n    prototxt = './BMVC_net/S14_19_200.deploy', \n    weights = './BMVC_net/S14_19_FQ_178000.model',\n    caffe_proto = 'https://raw.githubusercontent.com/BVLC/caffe/master/src/caffe/proto/caffe.proto'\n)\n\nmodel.cuda()\nmodel.eval()\ntorch.set_grad_enabled(False)\n</code></pre>\n<p>Run-on a demo tensor,</p>\n<pre class=\"lang-py prettyprint-override\"><code># make sure to have right procedure of image normalization and channel reordering\nimage = torch.Tensor(8, 3, 98, 98).cuda()\n\n# outputs dict of PyTorch Variables\n# in this example the dict contains the only key &quot;prob&quot;\n#output_dict = model(data = image)\n\n# you can remove unneeded layers:\n#del model.prob\n#del model.fc8\n\n# a single input variable is interpreted as an input blob named &quot;data&quot;\n# in this example the dict contains the only key &quot;fc7&quot;\noutput_dict = model(image)\n# print(output_dict)\nprint(output_dict.keys())\n</code></pre>\n<p>Please note, there are some basic things to consider; the networks expect text at DPI 120-150, reasonable orientation, and reasonable black and white levels. The networks expect to mean [103.9, 116.8, 123.7] to be subtracted from inputs. The inputs should be further multiplied by 0.004.</p>\n"}], "owner": {"reputation": 393, "user_id": 2090474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11713f9728e4c82b9f17950858be307?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/2090474/artur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 8, "answer_count": 2, "score": 20, "last_activity_date": 1605883951, "creation_date": 1518041361, "last_edit_date": 1605883951, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr", "title": "Deblur image with text to be recognized by OCR", "body": "<p>I have an image which is blurred:<br />\n<img src=\"https://i.stack.imgur.com/gAQlO.png\" alt=\"1\" />\nThis is a part of the business card and it is one of the frames taken by the camera and without proper focus.</p>\n<p>The clear image looks like this\n<img src=\"https://i.stack.imgur.com/Kp124.png\" alt=\"2\" />\nI'm looking for the method which could give me an image of better quality, so that image could be recognized by OCR, but also should be quite fast. Image is not blurred too much (I think so) but isn't good for OCR. I tried:</p>\n<ul>\n<li>different kinds of HPF,</li>\n<li>Laplacian,</li>\n<li>Canny detector,</li>\n<li>combinations of morphological operations (opening, closing).</li>\n</ul>\n<p>I also tried:</p>\n<ul>\n<li>deconvolution with Wiener filter,</li>\n<li>deconvolution and Lucy-Richardson method.</li>\n</ul>\n<p>But it was not easy to find the right PSF (Point Spread Function). These methods are considered effective, but not so fast enough. I also tried FFT and then IFFT with a Gaussian mask, but results were not satisfactory. I'm looking for some kind general method of deblurring images with text, not only this image. Could someone help me with this problem? I'll be grateful for any advice. I'm working with OpenCV 3 (C++ and sometimes Python).</p>\n"}, {"tags": ["c++", "openssl", "g++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518042102, "post_id": 48674005, "comment_id": 84346988, "body": "This is expected. <code>ed25519.c</code> is not a complete program you can run."}, {"owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518042225, "post_id": 48674005, "comment_id": 84347039, "body": "@n.m. My goal is to use it as a library in Java jni project, what can I do?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518042574, "post_id": 48674005, "comment_id": 84347177, "body": "The command you have used builds an executable. To build a library you need different command line arguments. I&#39;m not familiar with JNI so I won&#39;t try and guess what exactly you need. I only suggest you use a C compiler, because it&#39;s a C library, not a C++ one."}, {"owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518042692, "post_id": 48674005, "comment_id": 84347233, "body": "Sorry, I have no experience with C, can you please link me to how I need to compile a library with C?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518043236, "post_id": 48674005, "comment_id": 84347497, "body": "Perhaps asking a question like &quot;how do I compile an OpenSSL based C library for use with JNI&quot; and using appropriate tags will attract the right crowd."}, {"owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518043553, "post_id": 48674005, "comment_id": 84347621, "body": "@n.m. Oh wow, I got it, tnx!"}], "answers": [{"tags": [], "owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "is_accepted": false, "score": 0, "last_activity_date": 1518043523, "creation_date": 1518043523, "answer_id": 48674582, "question_id": 48674005, "link": "https://stackoverflow.com/questions/48674005/add-openssl-dependency-using-g/48674582#48674582", "title": "Add openssl dependency using g++", "body": "<p>Thanks to n.m <a href=\"https://stackoverflow.com/questions/48674005/add-openssl-dependency-using-g?noredirect=1#comment84347177_48674005\">comment</a> pointing out that it should be a library, I found a solution:</p>\n\n<pre><code>g++ -Wall -g -c Core/src/main/jni/ed25519/ed25519.c -I C:/OpenSSL/include -o Core/out/jni/ed25519.o\n</code></pre>\n"}], "owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518043523, "creation_date": 1518040909, "last_edit_date": 1518041061, "question_id": 48674005, "link": "https://stackoverflow.com/questions/48674005/add-openssl-dependency-using-g", "title": "Add openssl dependency using g++", "body": "<p>I got Windows 10 64 bit laptop</p>\n\n<p>I am trying to build <a href=\"https://github.com/floodyberry/ed25519-donna\" rel=\"nofollow noreferrer\">ed25519-donna</a> by executing:</p>\n\n<pre><code>g++ -o ed25519 Core/src/main/jni/ed25519/ed25519.c -I C:/OpenSSL/include -L C:/OpenSSL/lib/  \n</code></pre>\n\n<p>But I am getting the below error:</p>\n\n<blockquote>\n  <p>...ed25519.c:(.text+0x120b0): undefined reference to `RAND_bytes'\n  c:/mingw/bin/../lib/gcc/mingw32/6.3.0/../../../libmingw32.a(main.o):(.text.startup+0xa0): undefined reference to 'WinMain@16'</p>\n</blockquote>\n\n<p>It complains about missing open ssl crypto files, but I don't know how to solve this. Also been trying to append: <code>-lssl -lcrypto</code> but it didn't help</p>\n"}, {"tags": ["c++", "multithreading", "asynchronous", "udp", "boost-asio"], "comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1518074769, "post_id": 48673998, "comment_id": 84356767, "body": "The <code>io_service</code> is processed by two threads ? Why ? Or do you mean two threads access the object ? Please post a <a href=\"https://stackoverflow.com/help/mcve\"><code>MCVE</code></a>."}, {"owner": {"reputation": 45, "user_id": 3851038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13c5315aef5a18b9b5a17dad5e53bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3851038", "link": "https://stackoverflow.com/users/3851038/user3851038"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1518076226, "post_id": 48673998, "comment_id": 84357442, "body": "Hi I update the post to give you a better insight about what I mean with process with two threads. I skip the part how the threads are stopped but this not necessary for my question."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1518076534, "post_id": 48673998, "comment_id": 84357605, "body": "I see. Have you heard of <a href=\"http://www.boost.org/doc/libs/1_66_0/doc/html/boost_asio/reference/io_context__strand.html\" rel=\"nofollow noreferrer\"><code>strand</code></a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 673, "user_id": 1737859, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0fe8fff85cb4f0b76025c8a4b6e6a225?s=128&d=identicon&r=PG", "display_name": "Aman", "link": "https://stackoverflow.com/users/1737859/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1518082857, "creation_date": 1518082857, "answer_id": 48682166, "question_id": 48673998, "link": "https://stackoverflow.com/questions/48673998/boost-asio-async-receive-from-buffer-messages-in-multi-thread-scenario/48682166#48682166", "title": "boost asio async_receive_from buffer messages in multi thread scenario", "body": "<p>Isn't it a better idea to use collection of buffers - something like <code>std::vector&lt;std::array&lt;char, 6000&gt;&gt; bufferCollection</code> and then protect it using locks in <code>start_receive()</code>. This way, you can keep filling it safely. You may use <code>std::map</code> if you want to distinguish buffers with some key.</p>\n"}], "owner": {"reputation": 45, "user_id": 3851038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13c5315aef5a18b9b5a17dad5e53bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3851038", "link": "https://stackoverflow.com/users/3851038/user3851038"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518082857, "creation_date": 1518040874, "last_edit_date": 1518076029, "question_id": 48673998, "link": "https://stackoverflow.com/questions/48673998/boost-asio-async-receive-from-buffer-messages-in-multi-thread-scenario", "title": "boost asio async_receive_from buffer messages in multi thread scenario", "body": "<pre><code>class UDP_Receiver\n{\npublic:\n    udp_receiver((boost::asio::io_service&amp; io_service) :\n    idle_work_(io_service_),\n    socket_(new boost::asio::ip::udp::socket(io_service))\n    {\n    }\n\n    void start_receive()\n    {\n        socket_.async_receive_from(boost::asio::buffer(buffer, buffer.size()), \n                                    remote_endpoint_,\n                                    [&amp;](boost::system::error_code const&amp; ec, std::size_t N) \n        {\n            if (!ec.value())\n            {\n                std::unique_ptr&lt;char[]&gt; custom_buffer_ptr(new char[N], std::default_delete&lt;char[]&gt;());\n                std::memcopy(custom_buffer, &amp;buffer.data(), N);\n\n                do_custom_stuff(std::move(custom_buffer), N);\n            }\n        }\n    }\n\nprivate:\n    std::array&lt;char, 6000&gt; buffer;\n    boost::asio::ip::udp::socket socket_;\n    boost::asio::io_service::work idle_work_;\n};\n\nint main()\n{\n  std::size_t numberOfThreads = 2;\n  std::vector&lt;std::thread&gt; workerThreads;\n\n  boost::asio::io_service io_service_;\n\n  UDP_Receiver udp_receiver(io_service_);\n\n  for(size_t i = 0; i &lt; numberOfThreads; i++) {\n    workerThreads.push_back(std::thread([&amp;] { io_service().run(); }));\n  }\n\n  for(auto &amp;thread : workerThreads){\n    thread.join();\n  }\n}\n</code></pre>\n\n<p>The io_service in my scenario is processed by two threads. Now I investigate the problem that if for example two udp messages are received directly on after another the buffer only holds the last message. </p>\n\n<p>So one message is dropped. Is there a thread-safe way which guarantees \nthat all received udp packets are buffered and memcopyed individually\nwithout messages losses?</p>\n\n<p>Is for example stream_buffer the solution? </p>\n"}, {"tags": ["c++", "switch-statement", "conceptual"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1518040396, "post_id": 48673830, "comment_id": 84346193, "body": "&quot;<i>I&#39;m looking for guidance on the best practices and principles</i>&quot; this question may be better suited for <a href=\"https://softwareengineering.stackexchange.com/help/on-topic\">SoftwareEngineering.se</a>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1518041116, "post_id": 48673830, "comment_id": 84346531, "body": "Well you will reach the break statement once your program accepts an exit command of some sort (Unless you do something like <code>exit()</code> which is not recommended). No matter how much you burrow, once the function most recently called ends, each of the functions called before will also end. The only way you will never reach the break is if you <code>exit</code> or if your program just keeps going deeper and deeper, never stopping."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518041153, "post_id": 48673830, "comment_id": 84346548, "body": "Yes, you are destined for maintenance hell, unless you consider placing the data into a table and using a table driven system.  In a table driven system, you could add or remove rows without changing the code (engine)."}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1518042174, "post_id": 48673830, "comment_id": 84347017, "body": "Read about <i>fallthrough</i> (reaching the next case label without a break) <a href=\"http://en.cppreference.com/w/cpp/language/switch\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1518041150, "creation_date": 1518041150, "answer_id": 48674058, "question_id": 48673830, "link": "https://stackoverflow.com/questions/48673830/c-concepts-use-of-switches-for-console-menu/48674058#48674058", "title": "C++ concepts: Use of switches for console menu", "body": "<blockquote>\n  <p>I am burrowing into lays of these switches?</p>\n</blockquote>\n\n<p>Yes, and this is bad.</p>\n\n<blockquote>\n  <p>Will this ever impact anything?</p>\n</blockquote>\n\n<p>Yes, it will make your program unmanageable.</p>\n\n<p>You absolutely need to find a way for your submenu to return, once they're done. Build you program in a hierarchic way. Menu into submenu, then return back to main menu.</p>\n\n<p>If your flow becomes more modular, then you should have a</p>\n\n<pre><code>Switch (user_input)\n{\n case 1:\n      nextMenu = Submenu1;\n      Break;\n...\n}\n\n// later on, in a way that doesn't nest\n\nnextMenu.display();\n</code></pre>\n\n<p>Where your menus are classes, or functors, or something. But for now, find a way to use <code>return</code>;</p>\n"}], "owner": {"reputation": 116, "user_id": 9329935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6cba1e917891ac9e9edc17bf4bd3c5?s=128&d=identicon&r=PG&f=1", "display_name": "rumble_bumbles", "link": "https://stackoverflow.com/users/9329935/rumble-bumbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518041150, "creation_date": 1518040178, "last_edit_date": 1518040610, "question_id": 48673830, "link": "https://stackoverflow.com/questions/48673830/c-concepts-use-of-switches-for-console-menu", "title": "C++ concepts: Use of switches for console menu", "body": "<p>First off, new to c++.  </p>\n\n<p>Background:\nI am using a series of switches for a simple console menu like this:</p>\n\n<pre><code>...\nSwitch (user_input)\n\n{\n\n     case 1:\n\n          Submenu1();\n\n          Break;\n\n      ...\n</code></pre>\n\n<p>The submenu1 function lives in a different .cpp file.  The submenus each have a similar case to get back to the main menu, and other cases for utility programs, manipulating large data files.  The solution compiles and I can navigate back and forth from the menu to the submenus and back.  </p>\n\n<p>Questions:\nEach time I make a new menu selection, am I correct in thinking I am burrowing into lays of these switches?  It doesn't seem like I'll ever get to the break statements since the console is still running the next function.  Will this ever impact anything?  Independent of the specific performance of this instance, I'm looking for guidance on the best practices and principles and not just fudging it.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1518040513, "post_id": 48673856, "comment_id": 84346255, "body": "It doesn&#39;t find all of the header files in all of the subdirectories. I would have to do <code>-Iinclude&#47;subfolder</code> for every subfolder."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 1, "creation_date": 1518040941, "post_id": 48673856, "comment_id": 84346451, "body": "@MuhammadYojer Well, that&#39;s what you have to do. The alternative is to put the folder in the <code>#include</code> statement itself. Like <code>#include &quot;subfolder&#47;file.h&quot;</code>, and only use <code>-Iinclude</code> as the compiler switch."}, {"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518041088, "post_id": 48673856, "comment_id": 84346516, "body": "@NikosC. There&#39;s no other alternative?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1518041241, "post_id": 48673856, "comment_id": 84346586, "body": "Yes, use a complete full featured build system, like <a href=\"https://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html\" rel=\"nofollow noreferrer\">autotools</a> or <a href=\"https://cmake.org/\" rel=\"nofollow noreferrer\">cmake</a>. That way you don&#39;t need to worry about passing the values to the compiler yourself. And it&#39;s a lot easier to change and fix them (<i>it&#39;s more maintainable</i>)."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1518041350, "post_id": 48673856, "comment_id": 84346626, "body": "@MuhammadYojer Well, if you&#39;re writing makefiles by hand, you have to deal with this stuff by hand too. The alternative is to use a build system like Meson or CMake instead, and they will automate much of this. You&#39;ll still have to tell them the directories the headers are in, but they will take care of the compiler flags."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518042085, "post_id": 48673856, "comment_id": 84346984, "body": "Perhaps <code>#include &lt;myheader.h&gt;</code> --&gt; <code>#include &quot;myheader.h&quot;</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1518042771, "post_id": 48673856, "comment_id": 84347275, "body": "@MuhammadYojer If you learn something like <i>cmake</i> you can then, use wildcards for subfolders."}, {"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1518042852, "post_id": 48673856, "comment_id": 84347310, "body": "@IharobAlAsimi Maybe I&#39;ll try it."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1518040342, "last_edit_date": 1518040342, "creation_date": 1518040256, "answer_id": 48673856, "question_id": 48673829, "link": "https://stackoverflow.com/questions/48673829/find-all-header-files-in-all-sub-directories/48673856#48673856", "title": "Find all header files in all sub-directories", "body": "<p>Simple, just use</p>\n\n<pre><code>#include &lt;myheader.h&gt;\n</code></pre>\n\n<p>and pass the relevant directory to the compiler through the <code>-I</code> switch.</p>\n\n<p>For instance, if <em>myheader.h</em> was in <em>include/subfolder</em> then,\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$(CC) -Iinclude/subfolder\n</code></pre>\n\n<p>will work.</p>\n\n<p>Note that you must also <em>include</em> the subfolder in the <code>-I</code> argument because only the top level directory is scanned for headers.</p>\n"}, {"tags": [], "owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "is_accepted": true, "score": 1, "last_activity_date": 1518043454, "last_edit_date": 1518043454, "creation_date": 1518043058, "answer_id": 48674480, "question_id": 48673829, "link": "https://stackoverflow.com/questions/48673829/find-all-header-files-in-all-sub-directories/48674480#48674480", "title": "Find all header files in all sub-directories", "body": "<p>You can auto-generate the include dir flags simply enough:</p>\n\n<pre><code> INC_DIRS := $(shell find include -type d)\n C_INC_FLAGS := $(addprefix -I,$(INC_DIRS))\n\n %.o: %.c $(HEADERS)\n    $(CC) $(CFLAGS) $(C_INC_FLAGS) -c $&lt; -o $@\n</code></pre>\n\n<p>Note, that most systems have a maximum line length (usually around 64k), so if you have LOTS of directories, you may have to worry that you exceed the max line length (at which point you pipe the dirs to a file and include with <code>@file</code>...)</p>\n\n<p>Also, this doesn't work if you autogenerate new directories in your include directory through your make rules, as those directories will not be there when you populate <code>INC_DIRS</code> the first time around.</p>\n"}], "owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 48674480, "answer_count": 2, "score": 0, "last_activity_date": 1518043454, "creation_date": 1518040174, "last_edit_date": 1518040351, "question_id": 48673829, "link": "https://stackoverflow.com/questions/48673829/find-all-header-files-in-all-sub-directories", "title": "Find all header files in all sub-directories", "body": "<p>I am trying to use any header from my <code>include</code> folder in any source file in my <code>src</code> folder. Right now, I am doing <code>\"#include ../../include/subfolder/file.h\"</code> or <code>#include \"../include/otherfile.h\"</code>to get access to my header files, but this is very verbose, and anytime I do a directory restructure, I have to go back and change every reference to the affected header files. I would like to just be able to do <code>#include \"file.h\"</code> from any source file, but I can't seem to do it. Doing <code>-Iinclude</code> or <code>-Iinclude/</code> can't find the headers in <code>subfolder</code> for some reason. Changing my include statement to <code>#include &lt;file.h&gt;</code> also doesn't work. What can I do to fix this?</p>\n\n<p>I have a project layout that looks like this:</p>\n\n<pre><code>Makefile\n\ninclude\n    subfolder\n        file.h\n    otherfile.h\n\nsrc\n    subfolder\n        file.c\n    otherfile.c\n</code></pre>\n\n<p>My Makefile looks like this:</p>\n\n<pre><code>TARGET = program\nLIBS = -llibs\nCC = gcc\nCFLAGS = -Wall -g -Iinclude/\n\n.PHONY: default all clean\n\ndefault: $(TARGET)\nall: default\n\nOBJECTS = $(patsubst %.c, %.o, $(shell find . -name '*.c'))\nHEADERS = $(shell find . -name '*.h')\n\n%.o: %.c $(HEADERS)\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n\n.PRECIOUS: $(TARGET) $(OBJECTS)\n\n$(TARGET): $(OBJECTS)\n    $(CC) $(OBJECTS) -Wall $(LIBS) -o $@\n\nclean:\n    find . -type f -name '*.o' -exec rm {} +\n    find . -type f -name $(TARGET) -exec rm {} +\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing"], "owner": {"reputation": 11, "user_id": 9329918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea27ac6f6b3c4b08a9bf85465a0f156b?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed K. AS", "link": "https://stackoverflow.com/users/9329918/ahmed-k-as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518071042, "creation_date": 1518039961, "last_edit_date": 1518071042, "question_id": 48673783, "link": "https://stackoverflow.com/questions/48673783/how-to-close-the-edge-of-an-object-near-the-end-of-picture-open-cv", "title": "how to close the edge of an object near the end of picture (open cv)", "body": "<p>I am working on a code to detect the edges of boxes in a picture, but the boxes attached to the edge of the picture have missing lines.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8aDyj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8aDyjm.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>as seen in the previous above the first square have only 2 lines appears.\nI am using open cv C++ \nhere is my code</p>\n\n<pre><code>cv::Mat src;\ncv::Mat gray;\ncv::Mat dst;\nstd::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours;\nstd::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours2;\nstd::vector&lt;cv::Point&gt; approx;\nMat img = imread(\"shapes-noisy.jpg\", CV_LOAD_IMAGE_COLOR);\nMat _color = img.clone();\nthreshold(img, img, 250, 255, 0);\nsrc = img;\ncv::cvtColor(src, gray, CV_BGR2GRAY);\nMat img6, img7, img8, img9, img10;\ncv::threshold(gray, img6, 250, 255.0, THRESH_BINARY);\nMat element = getStructuringElement( MORPH_RECT,Size(3, 3 ), Point( 1, 1 ) );\ndilate( img6, img6, element);\nLaplacian(img6, img7, CV_16S, 3, 1, 0, BORDER_DEFAULT);\nconvertScaleAbs(img7, img8);\nvector&lt;Vec4i&gt; hierarchy;\nRNG rng(0);\nScalar value;\ncv::findContours(img8.clone(), contours, hierarchy,CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);\nMat drawing,drawing2;\nmedianBlur(img8, drawing, 3);\nthreshold(drawing, drawing, 255, 0, 1);\nthreshold(drawing, drawing2, 255, 0, 1);\ncv::findContours(img8.clone(), contours2, hierarchy,CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);\nfor( int i = 0; i&lt; contours.size(); i++ )\n {\n       cv::approxPolyDP(cv::Mat(contours[i]), approx, 10, true);\n       if(approx.size() &gt; 3){\n       Scalar color = Scalar( rng.uniform(0, 255), rng.uniform(0,255), rng.uniform(0,255) );\n       drawContours( drawing2, contours2, i, color, 2, 8, hierarchy, 0, Point(0,0) );\n       }\n}\n\nimshow(\"approx\", drawing2);\n</code></pre>\n"}, {"tags": ["python", "c++", "numpy", "eigen3", "tensor"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1518043632, "creation_date": 1518043632, "answer_id": 48674604, "question_id": 48673775, "link": "https://stackoverflow.com/questions/48673775/eigen-contraction-vs-numpy-dot/48674604#48674604", "title": "Eigen Contraction vs Numpy Dot", "body": "<p>I can't help you with the c++ code, but I can identify, in numpy terms, what is going on:</p>\n\n<pre><code>In [1]: A=np.arange(1,28).reshape(3,3,3)\nIn [3]: A\nOut[3]: \narray([[[ 1,  2,  3],\n        [ 4,  5,  6],\n        [ 7,  8,  9]],\n\n       [[10, 11, 12],\n        [13, 14, 15],\n        [16, 17, 18]],\n\n       [[19, 20, 21],\n        [22, 23, 24],\n        [25, 26, 27]]])\nIn [5]: B=np.repeat([[1,2]],3, axis=0)\nIn [6]: B\nOut[6]: \narray([[1, 2],\n       [1, 2],\n       [1, 2]])\n</code></pre>\n\n<p>Your dot - remember last of A with 2nd to the last of B:</p>\n\n<pre><code>In [7]: A.dot(B)\nOut[7]: \narray([[[  6,  12],\n        [ 15,  30],\n        [ 24,  48]],\n\n       [[ 33,  66],\n        [ 42,  84],\n        [ 51, 102]],\n\n       [[ 60, 120],\n        [ 69, 138],\n        [ 78, 156]]])\n</code></pre>\n\n<p>With <code>einsum</code> index this is clear (at least to me):</p>\n\n<pre><code>In [8]: np.einsum('ijk,kl',A,B)    # notice the k pair\nOut[8]: \narray([[[  6,  12],\n        [ 15,  30],\n        [ 24,  48]],\n\n       [[ 33,  66],\n        [ 42,  84],\n        [ 51, 102]],\n\n       [[ 60, 120],\n        [ 69, 138],\n        [ 78, 156]]])\n</code></pre>\n\n<p>But if I change the <code>einsum</code> to use the 2nd to the last of both, I get your c++ results (I think):</p>\n\n<pre><code>In [9]: np.einsum('ijk,jl',A,B)    # notice the j pair\nOut[9]: \narray([[[ 12,  24],\n        [ 15,  30],\n        [ 18,  36]],\n\n       [[ 39,  78],\n        [ 42,  84],\n        [ 45,  90]],\n\n       [[ 66, 132],\n        [ 69, 138],\n        [ 72, 144]]])\n</code></pre>\n"}], "owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518043632, "creation_date": 1518039906, "question_id": 48673775, "link": "https://stackoverflow.com/questions/48673775/eigen-contraction-vs-numpy-dot", "title": "Eigen Contraction vs Numpy Dot", "body": "<p>Hi all I have the following tensor dot product in Numpy:</p>\n\n<pre><code>import numpy as np\n\ntensorA = np.array([[[1,2,3],\n                  [4,5,6],\n                  [7,8,9]],\n                 [[10,11,12],\n                  [13,14,15],\n                  [16,17,18]],\n                 [[19,20,21],\n                  [22,23,24],\n                  [25,26,27]]])\n\ntensorB = np.array([[1,2],\n                       [1,2],\n                       [1,2]])\n\nprint tensorA.dot(tensorB)\n</code></pre>\n\n<p>It gives the following answer:</p>\n\n<pre><code>[[[  6  12]\n  [ 15  30]\n  [ 24  48]]\n\n [[ 33  66]\n  [ 42  84]\n  [ 51 102]]\n\n [[ 60 120]\n  [ 69 138]\n  [ 78 156]]]\n</code></pre>\n\n<p>However, when I do the same thing in C++ Eigen:</p>\n\n<pre><code>Eigen::Tensor&lt;float, 3&gt; tensorA(3,3,3);\ntensorA.setValues({{{1,2,3},\n              {4,5,6},\n              {7,8,9}},\n\n             {{10,11,12},\n              {13,14,15},\n              {16,17,18}},\n\n             {{19,20,21},\n              {22,23,24},\n              {25,26,27}}});\n\nEigen::Tensor&lt;float, 2&gt; tensorB(3,2);\ntensorB.setValues({{1,2},\n                   {1,2},\n                   {1,2}});\n\n// Compute the traditional matrix product\nEigen::array&lt;Eigen::IndexPair&lt;float&gt;, 1&gt; product_dims = { Eigen::IndexPair&lt;float&gt;(0, 1) };\nEigen::Tensor&lt;float, 3&gt; AB = tensorA.contract(tensorB, product_dims);\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>D: 3 R: 3 C: 2\n[[12.000     24.000     ]\n[15.000     30.000     ]\n[18.000     36.000     ]\n]\nR: 3 C: 2\n[[39.000     78.000     ]\n[42.000     84.000     ]\n[45.000     90.000     ]\n]\nR: 3 C: 2\n[[66.000     132.000     ]\n[69.000     138.000     ]\n[72.000     144.000     ]\n]\n</code></pre>\n\n<p>Why is this happening. I want a tensor dot product that is equivalent to what numpy is giving me. Is it something to do with the product_dims parameter in c++? Or is there some other bug involved? Basically, it needs to multiply the depth component 3 times.</p>\n"}, {"tags": ["c++", "friend"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 5, "creation_date": 1518039490, "post_id": 48673640, "comment_id": 84345773, "body": "<code>friend void testFriend(A in);</code> is unrelated to <code>B::testFriend</code>"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1518039677, "post_id": 48673640, "comment_id": 84345870, "body": "You befriended a lone function <code>void testFriend(A in)</code> and not the one from B"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1518039668, "creation_date": 1518039668, "answer_id": 48673720, "question_id": 48673640, "link": "https://stackoverflow.com/questions/48673640/friend-function-accessibility-issue/48673720#48673720", "title": "Friend Function Accessibility Issue", "body": "<p><code>friend void testFriend(A in);</code> is unrelated to <code>B::testFriend</code>.</p>\n\n<p>You can make the whole class friend instead:</p>\n\n<pre><code>class A {\n   private:\n      int x;\n   public:\n      A(int x) : x(x) {}\n      friend class B;\n};\n\nclass B {\npublic:\n   void testFriend(A a) { std::cout &lt;&lt; a.x; }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 1939991, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10c51aa23c9b3f4c988a3726e4830bbb?s=128&d=identicon&r=PG", "display_name": "user1939991", "link": "https://stackoverflow.com/users/1939991/user1939991"}, "edited": false, "score": 0, "creation_date": 1518040064, "post_id": 48673741, "comment_id": 84346020, "body": "Gotcha, that makes sense. Is there any way to make just testFriend(A in) a friend instead of the whole class?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 187, "user_id": 1939991, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10c51aa23c9b3f4c988a3726e4830bbb?s=128&d=identicon&r=PG", "display_name": "user1939991", "link": "https://stackoverflow.com/users/1939991/user1939991"}, "edited": false, "score": 0, "creation_date": 1518040127, "post_id": 48673741, "comment_id": 84346057, "body": "@user1939991, yes you can but then the definition of <code>B</code> has to be visible to <code>A</code>. See <a href=\"https://stackoverflow.com/a/48673745/434551\">the answer by @schoe001</a> for that. You cannot forward declare a member function of a class."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1518039763, "creation_date": 1518039763, "answer_id": 48673741, "question_id": 48673640, "link": "https://stackoverflow.com/questions/48673640/friend-function-accessibility-issue/48673741#48673741", "title": "Friend Function Accessibility Issue", "body": "<p>The declaration</p>\n\n<pre><code>friend void testFriend(A in);\n</code></pre>\n\n<p>makes a non-member function named <code>testFriend</code> a <code>friend</code> of the class. It does not make <code>B::testFriend</code> a <code>friend</code> of class A.</p>\n\n<p>You can solve the problem by making <code>B</code> a <code>friend</code> of <code>A</code>. This will require only a forward declaration.</p>\n\n<pre><code>#ifndef CLASSA\n#define CLASSA\n\n// No need for this.\n// #include \"ClassB.h\"\nclass B;\n\nclass A {\n   private:\n      int x;\n   public:\n      A(int x) {\n          this-&gt;x = x;\n      }\n\n      // This does not work.\n      // friend void testFriend(A in);\n\n      // Make B a friend of the class.\n      friend B;\n};\n\n#endif\n</code></pre>\n\n<p>Now,</p>\n\n<pre><code>class B {\npublic:\n   void testFriend(A in) {\n       printf(\"%d\", in.x);\n   }\n};\n</code></pre>\n\n<p>should work just fine.</p>\n"}, {"comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 1, "creation_date": 1518041248, "post_id": 48673745, "comment_id": 84346593, "body": "The only correct answer here right on the money. If I could I&#39;d upvote it again"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 3, "last_activity_date": 1518041376, "last_edit_date": 1518041376, "creation_date": 1518039778, "answer_id": 48673745, "question_id": 48673640, "link": "https://stackoverflow.com/questions/48673640/friend-function-accessibility-issue/48673745#48673745", "title": "Friend Function Accessibility Issue", "body": "<p><code>void testFriend(A in);</code> refers to a function in the global scope. What you need is <code>void B::testFriend(A in);</code>. However, this will require <code>B</code> to already be declared and implemented.</p>\n\n<p>But to implement <code>testFriend</code> in <code>B</code>, <code>A</code> must be declared so that you can use an <code>A</code> as a parameter. Plus, <code>A</code> must be implemented for you to use <code>A.in</code>. If you have separate headers and implementations for your classes this shouldn't be a problem.</p>\n\n<p>However, if you decide to do this in one file, you'll need to declare and implement in this order:</p>\n\n<pre><code>class A;\n\nclass B {\n  public:\n    void testFriend(A in);\n};\n\nclass A {\n private:\n    int x;\n public:\n    A(int x) {\n        this-&gt;x = x;\n    }\n    friend void B::testFriend(A in);\n};\n\nvoid B::testFriend(A in) {\n    printf(\"%d\", in.x);\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 1939991, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10c51aa23c9b3f4c988a3726e4830bbb?s=128&d=identicon&r=PG", "display_name": "user1939991", "link": "https://stackoverflow.com/users/1939991/user1939991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48673741, "answer_count": 3, "score": 2, "last_activity_date": 1518041376, "creation_date": 1518039354, "question_id": 48673640, "link": "https://stackoverflow.com/questions/48673640/friend-function-accessibility-issue", "title": "Friend Function Accessibility Issue", "body": "<p>I am trying to make a friend function for another class, but my current layout is causing access issues and header-include issues.</p>\n\n<p>In my project I have two files: Class A and Class B. For the sake of brevity, everything is inlined in the header file, as it still demonstrates my issue.</p>\n\n<pre><code>#ifndef CLASSA\n#define CLASSA\n\n#include \"ClassB.h\"\n\nclass A {\n   private:\n      int x;\n   public:\n      A(int x) {\n          this-&gt;x = x;\n      }\n      friend void testFriend(A in);\n};\n\n#endif\n\n#pragma once\n#ifndef CLASSB\n#define CLASSB\n#include &lt;cstdio&gt;\n#include \"ClassA.h\"\n\nclass B {\npublic:\n   void testFriend(A in) {\n       printf(\"%d\", in.x);\n   }\n};\n#endif\n</code></pre>\n\n<p>However, with this setup, Visual Studio thinks that class A's private member elements are inaccessible despite it being a member function. Furthermore, they are including each other which will cause errors eventually. This setup works fine when these two classes are in the same header file, though. How can I achieve a setup like this, where one class has a member function that needs to be a friend with another class, and while having the two classes be in separate header files.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 3, "creation_date": 1518039224, "post_id": 48673601, "comment_id": 84345678, "body": "Try placing <code>setprecision(1)</code> before <code>shootp</code> not after"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 3, "last_activity_date": 1518039209, "creation_date": 1518039209, "answer_id": 48673614, "question_id": 48673601, "link": "https://stackoverflow.com/questions/48673601/i-cant-get-the-set-precision-to-work-in-c/48673614#48673614", "title": "I can&#39;t get the set precision to work in C++", "body": "<p>You need to set the precision <strong>before</strong> you perform the output.</p>\n\n<pre><code>cout &lt;&lt; \"\\nThe Shooting Percentage is \" &lt;&lt; setprecision(1) &lt;&lt; shootp &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 4, "last_activity_date": 1518041164, "last_edit_date": 1518041164, "creation_date": 1518040736, "answer_id": 48673969, "question_id": 48673601, "link": "https://stackoverflow.com/questions/48673601/i-cant-get-the-set-precision-to-work-in-c/48673969#48673969", "title": "I can&#39;t get the set precision to work in C++", "body": "<p>You need to use both <a href=\"http://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"nofollow noreferrer\">std::fixed</a> manipulator and <a href=\"http://en.cppreference.com/w/cpp/io/manip/setprecision\" rel=\"nofollow noreferrer\">std::setprecision</a> object prior to outputting the floating point variable:</p>\n\n<pre><code>std::cout &lt;&lt; \"The Percentage is \" &lt;&lt; std::fixed &lt;&lt; setprecision(1) &lt;&lt; shootp &lt;&lt; '\\n';\n</code></pre>\n\n<p>This will result in the output of <code>21.9</code>. Using <code>std::setprecision</code> alone will result in <code>2e+01</code> on standard output.</p>\n"}], "owner": {"reputation": 11, "user_id": 9329909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b3ff5e82c16833556340290fe04adc?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda Chasteen", "link": "https://stackoverflow.com/users/9329909/amanda-chasteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518041164, "creation_date": 1518039136, "question_id": 48673601, "link": "https://stackoverflow.com/questions/48673601/i-cant-get-the-set-precision-to-work-in-c", "title": "I can&#39;t get the set precision to work in C++", "body": "<p>I can't get the set precision to work in C++. I keep getting 3 decimal places instead of 1. If I out 7 and 32 in, shootp comes out as 21.875. I need it to come out as 21.9. I am fairly new at this and I could use any help! Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing  namespace std;\n\nint main()\n{\n    int scored, attmp;\n\n    cout&lt;&lt;\"Enter the number of goals that were scored: \";\n    cin&gt;&gt; scored;                                                   \n\n    if( scored &lt; 0 )\n    {\n        cout&lt;&lt;\"Error: The number of goals must be greater than 0. Try Again: \n        \";\n        cin&gt;&gt; scored; \n    }\n\n    if( scored &gt; 0 )\n    {\n\n    }\n    cout&lt;&lt;\"\\nEnter the number of shots that were attempted: \";\n    cin&gt;&gt;attmp;                                                     \n\n    if( attmp &lt; 0 )\n    {\n        cout&lt;&lt;\"Error: The number of goal must be greater that 0. Try again: \n        \";\n        cin&gt;&gt; attmp;\n    }\n\n    if( attmp &gt;0 )\n    {\n\n    }\n\n    double shootp= ((double)scored) / (attmp) * 100.0;      \n\n    cout&lt;&lt;\"\\nThe Shooting Percentage is \"&lt;&lt; shootp &lt;&lt; setprecision(1) &lt;&lt; \nendl;   \nreturn 0;       \n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1518039075, "post_id": 48673572, "comment_id": 84345601, "body": "But but <code>p</code> isn&#39;t pointing to anything then!"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 4, "creation_date": 1518039151, "post_id": 48673572, "comment_id": 84345635, "body": "There are really too many such questions under c++ tag. Please read textbook and search before asking."}, {"owner": {"reputation": 347, "user_id": 1293477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/714f0329fb50d8d08967cd9b8db790a4?s=128&d=identicon&r=PG", "display_name": "Jeff Melton", "link": "https://stackoverflow.com/users/1293477/jeff-melton"}, "edited": false, "score": 0, "creation_date": 1518039448, "post_id": 48673572, "comment_id": 84345747, "body": "You need to take the <b>address</b> of <code>i</code>  and assign it to <code>p</code> like so <code>p = &amp;i</code>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1518039771, "post_id": 48673572, "comment_id": 84345907, "body": "Turn your compiler&#39;s warnings on and read them!  Your compiler is very capable of telling you what&#39;s wrong in this code."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518040050, "post_id": 48673572, "comment_id": 84346012, "body": "<i>In my opinion</i> -- The address-of operator is discussed in any good C++ book.  Don&#39;t code based on your opinion."}], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 7, "last_activity_date": 1518039119, "creation_date": 1518039119, "answer_id": 48673596, "question_id": 48673572, "link": "https://stackoverflow.com/questions/48673572/pointer-behaviors-in-c/48673596#48673596", "title": "pointer behaviors in c++", "body": "<p>This dereferences an uninitialized pointer, resulting in UB:</p>\n\n<pre><code>*p = i;\n</code></pre>\n\n<p>You probably want this instead:</p>\n\n<pre><code>p = &amp;i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 3, "last_activity_date": 1518042716, "last_edit_date": 1518042716, "creation_date": 1518039524, "answer_id": 48673687, "question_id": 48673572, "link": "https://stackoverflow.com/questions/48673572/pointer-behaviors-in-c/48673687#48673687", "title": "pointer behaviors in c++", "body": "<p>The program invokes undefined behavior because <code>p</code> is uninitialized. If it were initialized with:</p>\n\n<pre><code>int* p = new int;\n// the rest of the code\ndelete p;\n</code></pre>\n\n<p>the <code>i</code> would still be the same no matter how you deference the pointer. The pointer does not modify the value of <code>i</code> in any way. This:</p>\n\n<pre><code>*p = i;\n</code></pre>\n\n<p>does not mean \"from now on, whatever I do to <code>*p</code> will be reflected to the value of <code>i</code>.\" It simply means assign the value of <code>i</code> to a value pointed to by <code>p</code>.</p>\n\n<p>You would need to initialize <code>p</code> with a reference to <code>x</code> using the <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_address-of_operator\" rel=\"nofollow noreferrer\">address-of</a> operator <code>&amp;</code>:</p>\n\n<pre><code>int* p = &amp;i;\n</code></pre>\n\n<p>Now <code>p</code> <em>references</em> <code>i</code>. Now you have two names for the same object, one is <code>*p</code> and the other is <code>i</code>. They both mean the same thing and modify the same object. Changes made to one of them are <em>reflected</em> to the other one.</p>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 7377028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UX8h2.jpg?s=128&g=1", "display_name": "Sarmad Ali", "link": "https://stackoverflow.com/users/7377028/sarmad-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1518061215, "creation_date": 1518061215, "answer_id": 48677156, "question_id": 48673572, "link": "https://stackoverflow.com/questions/48673572/pointer-behaviors-in-c/48677156#48677156", "title": "pointer behaviors in c++", "body": "<p>Your question was what's wrong with this code</p>\n\n<pre><code>int *p;\nint i = 30;\n*p = i;\n*p = 100;\ncout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>in here <code>*p=i</code> you are trying to assign the value of <code>i</code> to <code>*p</code> but pointer variable can store the address of the variable rather than variable value that you are doing. So, there are two methods to solve this. One is allocate memory using <code>new</code> operator and the other is assign address of <code>i</code> to <code>p</code> <code>p=&amp;i</code></p>\n"}], "owner": {"reputation": 153, "user_id": 5646101, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0c51ea5990aca49fcac37bc616695412?s=128&d=identicon&r=PG&f=1", "display_name": "xsx", "link": "https://stackoverflow.com/users/5646101/xsx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 48673596, "answer_count": 3, "score": -6, "last_activity_date": 1518061215, "creation_date": 1518039013, "last_edit_date": 1518040226, "question_id": 48673572, "link": "https://stackoverflow.com/questions/48673572/pointer-behaviors-in-c", "title": "pointer behaviors in c++", "body": "<p>So I've got a code here:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(void){\nint *p;\nint i = 30;\n*p = i;\n*p = 100;\ncout &lt;&lt; i &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>Could someone point out what's wrong with this code? </p>\n\n<p>I don't think you need to do things like</p>\n\n<pre><code>int *p = new int; \n</code></pre>\n\n<p>because it's ok to point to a stack variable.</p>\n\n<p>Current update: I should've figured out this basic common sense stuff long ago...\nfix: </p>\n\n<pre><code>int *p;\nint i = 30;\np = &amp;i;     //this stores the address of i. Then we can reach the value of i by calling *p\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1518042510, "post_id": 48673558, "comment_id": 84347142, "body": "Tried to make the callback <code>static void readCallback</code> or use <code>bind</code> to bind <code>this</code>? The error message in the question is not complete"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 1, "creation_date": 1518043028, "post_id": 48673558, "comment_id": 84347390, "body": "Pass <code>boost::bind(&amp;networkUDPClient::readCallback, this,     boost::asio::placeholders::error,     boost::asio::placeholders::bytes_transferred</code> instead of just <code>readCallback</code>"}, {"owner": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "reply_to_user": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1518061058, "post_id": 48673558, "comment_id": 84352397, "body": "The error message is exactly what Visual Studio provided me with. I would like to know why the function needs to be binded, while all the examples out there (including Torjo book) don&#39;t require that."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 1, "creation_date": 1518069170, "post_id": 48673558, "comment_id": 84354404, "body": "The non-static member functions have a <i>hidden</i> <code>this</code> parameter but the handler prototype has no such parameter. So you can pass only normal functions, static member functions or lambdas. Otherwise you have to bind the first parameter to this and get a function taking only 2 parameters as reqired."}, {"owner": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "reply_to_user": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1518106899, "post_id": 48673558, "comment_id": 84378300, "body": "Thanks. Wish I could give you the kudos for the right answer. The book actually mentions why it doesn&#39;t work, but it&#39;s not very clear."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 1, "creation_date": 1518118479, "post_id": 48673558, "comment_id": 84385262, "body": "I have no experience with <code>boost::asio</code> and couldn&#39;t answer the bonus question, without further research :) I&#39;m glad I could help"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "edited": false, "score": 0, "creation_date": 1518145588, "post_id": 48679634, "comment_id": 84395003, "body": "Thanks. Incorrectly placed flag argument definitely was one of the issues. Does the binding work for callback functions that do not take (const boost::system::error_code &amp; err, std::size_t read_bytes) arguments? Lets say I want to pass a function pointer into the class, so that the callback executes whatever random function I desire. What do I need for that?"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "edited": false, "score": 0, "creation_date": 1518154081, "post_id": 48679634, "comment_id": 84397076, "body": "@AdmiralFishHead Always stick to the required parameters when binding, or you&#39;ll get most likely an error. <i>In theory</i> you can pass any function signature to <code>std::bind</code>. Else I&#39;m not quite sure what you mean, you might want to post another question."}, {"owner": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "edited": false, "score": 0, "creation_date": 1518157453, "post_id": 48679634, "comment_id": 84398281, "body": "Sure thing, once I stumble upon an error I cannot debug I will bring it up."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "edited": false, "score": 0, "creation_date": 1518161755, "post_id": 48679634, "comment_id": 84400032, "body": "@AdmiralFishHead Please remember to accept an answer if it helped. Also on your old questions. <a href=\"https://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a>"}], "tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": false, "score": 2, "last_activity_date": 1518074062, "creation_date": 1518074062, "answer_id": 48679634, "question_id": 48673558, "link": "https://stackoverflow.com/questions/48673558/boost-asio-async-receive-from-function-overload-issue-dynamic-pointer/48679634#48679634", "title": "Boost-ASIO async_receive_from function overload issue (+ dynamic pointer)", "body": "<p>First off, your parameters seem to be a little mixed up. <a href=\"http://www.boost.org/doc/libs/1_66_0/doc/html/boost_asio/reference/basic_datagram_socket/async_receive_from/overload2.html\" rel=\"nofollow noreferrer\"><code>async_receive_from</code></a> has the <code>flags</code> parameter as the <strong>third parameter</strong> while you have it as the <strong>second</strong>.</p>\n\n<p>For the second part, you will have to either make the function static for all instances in order to pass it as handler, or bind it with <code>this</code> so the correct instance is called.</p>\n\n<p>Bind it:</p>\n\n<pre><code>socket.async_receive_from\n(\n    boost::asio::buffer(buffer.data(), buffer.size()),\n    senderEndpoint,\n    0,\n    std::bind(&amp;readCallback, this, std::placeholders::_1, std::placeholders::_2)\n);\n</code></pre>\n\n<p>or if you make your <code>readCallback</code> static:</p>\n\n<pre><code>socket.async_receive_from\n(\n    boost::asio::buffer(buffer.data(), buffer.size()),\n    senderEndpoint,\n    0,\n    readCallback\n);\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3261589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z6JJQ.jpg?s=128&g=1", "display_name": "AdmiralFishHead", "link": "https://stackoverflow.com/users/3261589/admiralfishhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518074062, "creation_date": 1518038954, "question_id": 48673558, "link": "https://stackoverflow.com/questions/48673558/boost-asio-async-receive-from-function-overload-issue-dynamic-pointer", "title": "Boost-ASIO async_receive_from function overload issue (+ dynamic pointer)", "body": "<p>I am trying to create a simple asynchronous receiver using the Boost library. I followed the examples as well as books, and this is what I was able to cook up so far:</p>\n\n<pre><code>class networkUDPClient {\npublic:\n    utilityTripleBuffer * buffer;\n\n    char testBuffer[20] = { 0 };\n\n    const char * hostAddress;\n    unsigned int port;\n\n    boost::asio::io_service service;\n    boost::asio::ip::udp::socket socket;\n    boost::asio::ip::udp::endpoint listenerEndpoint;\n    boost::asio::ip::udp::endpoint senderEndpoint;\n\n    // Function Definitions\n    void readCallback(const boost::system::error_code &amp; err, std::size_t read_bytes) {\n\n    }\n\n    // Constructors\n    networkUDPClient(const char * hostAddress, unsigned int port, unsigned int bufferSize) :\n            socket(service),\n            listenerEndpoint(boost::asio::ip::address_v4::from_string(hostAddress), port)\n        {\n            this-&gt;buffer = new utilityTripleBuffer(bufferSize, nullptr);\n\n            this-&gt;hostAddress = hostAddress;\n            this-&gt;port = port;\n\n            socket.open(this-&gt;listenerEndpoint.protocol());\n            socket.set_option(boost::asio::ip::udp::socket::reuse_address(true));\n            socket.bind(this-&gt;listenerEndpoint);\n            socket.async_receive_from(boost::asio::buffer(this-&gt;buffer-&gt;currentBufferAddr, this-&gt;buffer-&gt;bufferSize), 0, senderEndpoint, readCallback);\n            service.run();\n        };\n    ~networkUDPClient()\n        {\n            service.stop();\n\n            delete this-&gt;buffer;\n        };\n};\n</code></pre>\n\n<p>The problem is that <strong>async_receive_from</strong> function causes an error:</p>\n\n<p>Severity    Code    Description Project File    Line    Suppression State\nError (active)      no instance of overloaded function \"boost::asio::basic_datagram_socket::async_receive_from [with Protocol=boost::asio::ip::udp, DatagramSocketService=boost::asio::datagram_socket_service</p>\n\n<p>I double checked the reference website as well as all my books, I believe I pass correct arguments and initialize them properly. What could be causing the issue?</p>\n\n<p>BONUS QUESTION:</p>\n\n<p>While I'm here, I would like to know whether using a dynamic pointer is acceptable in this case. I need to double buffer the data I receive, to give myself some time to process the previous frame. In this case <strong>this->buffer->currentBufferAddr</strong> will be changing after each time I receive data, pointing at different buffer every time. </p>\n\n<p>Is this an acceptable way of doing things?</p>\n"}, {"tags": ["c++", "time", "timestamp", "unix-timestamp"], "comments": [{"owner": {"reputation": 673, "user_id": 2051953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ad063b5c79e2eda7ed0bb429bedb73?s=128&d=identicon&r=PG", "display_name": "agbinfo", "link": "https://stackoverflow.com/users/2051953/agbinfo"}, "edited": false, "score": 0, "creation_date": 1518043747, "post_id": 48673531, "comment_id": 84347692, "body": "Look here : <a href=\"http://www.cplusplus.com/reference/ctime/strftime/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/ctime/strftime</a>"}], "answers": [{"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 1, "last_activity_date": 1518056572, "creation_date": 1518056572, "answer_id": 48676468, "question_id": 48673531, "link": "https://stackoverflow.com/questions/48673531/extract-date-timestamp-from-a-timestamp-in-c/48676468#48676468", "title": "Extract date timestamp from a timestamp in C++", "body": "<p>If you are willing to use this <a href=\"https://howardhinnant.github.io/date/tz.html\" rel=\"nofollow noreferrer\">free, open-source time zone library</a>, this can be done like so:</p>\n\n<pre><code>#include \"date/tz.h\"\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace std::chrono;\n    using date::operator&lt;&lt;;\n\n    // set up the timestamp\n    date::sys_time&lt;milliseconds&gt; ts{1518038663000ms};\n\n    // create a zoned_time by pairing the timestamp with a time_zone\n    auto zt = date::make_zoned(\"America/New_York\", ts);\n\n    // confirm what you have by printing out the timestamp and the local time\n    std::cout &lt;&lt; zt.get_sys_time().time_since_epoch() &lt;&lt; '\\n';\n    std::cout &lt;&lt; date::format(\"%A, %e %B %Y %T (%z)\", zt) &lt;&lt; \"\\n\\n\";\n\n    // Truncate the zoned_time to the beginning of the local day\n    zt = date::floor&lt;date::days&gt;(zt.get_local_time());\n\n    // confirm what you have by printing out the timestamp and the local time\n    std::cout &lt;&lt; zt.get_sys_time().time_since_epoch() &lt;&lt; '\\n';\n    std::cout &lt;&lt; date::format(\"%A, %e %B %Y %T (%z)\", zt) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The comments in the code above describe what each line of code is doing.  The single line of code in the middle is the actual answer to this question:</p>\n\n<pre><code>    // Truncate the zoned_time to the beginning of the local day\n    zt = date::floor&lt;date::days&gt;(zt.get_local_time());\n</code></pre>\n\n<p>This program outputs:</p>\n\n<pre><code>1518038663000ms\nWednesday,  7 February 2018 16:24:23.000 (-0500)\n\n1517979600000ms\nWednesday,  7 February 2018 00:00:00.000 (-0500)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1518102749, "post_id": 48687682, "comment_id": 84375343, "body": "If the input to your program is 1518038663000, is the output 1517979600000?  If not, what is the nature of the discrepancy between what you output, and what the OP reports?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1518103987, "post_id": 48687682, "comment_id": 84376266, "body": "@HowardHinnant Since you know more about this library than I do, I assume you are pointing out a potential pitfall with depending simply upon the standard. My clamp to days is absolute, it doesn&#39;t consider a GMT offset. If such an offset needs to be preserved it will need to be added back in. That&#39;s really as simple as doing <code>+ chrono::hours(5)</code>, so your <code>result</code> calculation would become: <code>const auto result = chrono::duration_cast&lt;chrono::milliseconds&gt;(chrono::floor&lt;ch&zwnj;&#8203;rono::duration&lt;int, ratio&lt;86400&gt;&gt;&gt;(ts)) + chrono::hours(5)</code>: <a href=\"http://coliru.stacked-crooked.com/a/27ae602bdae9004d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/27ae602bdae9004d</a>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1518104718, "last_edit_date": 1518104718, "creation_date": 1518099578, "answer_id": 48687682, "question_id": 48673531, "link": "https://stackoverflow.com/questions/48673531/extract-date-timestamp-from-a-timestamp-in-c/48687682#48687682", "title": "Extract date timestamp from a timestamp in C++", "body": "<p>Obviously random numbers said to be timestamps only have value if they also have units. For the number \"1518038663000\" to equate to \"Wednesday, 7 February 2018 16:24:23\" it implies that we are working in milliseconds since the epoch. Given such units we can convert the timestamp to <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>'s <a href=\"http://en.cppreference.com/w/cpp/chrono/duration\" rel=\"nofollow noreferrer\"><code>chrono::duration</code></a>: <code>const chrono::milliseconds ts(1518038663000);</code></p>\n\n<p>From <code>chrono::milliseconds</code> we'll need to cast to a <code>chrono::duration</code> representing days. Unfortunately the chrono library's convenience function with the longest <code>period</code> is <code>hours</code> thus we'll need to define our own <code>chrono::duration</code>. Since the <code>period</code> is defined as:</p>\n\n<blockquote>\n  <p>The number of seconds per tick</p>\n</blockquote>\n\n<p>We'll need to calculate the number of seconds in a day, <a href=\"https://stackoverflow.com/q/28548634/2642059\">unfortunately that's not defined in the standard</a>, but we can calculate it: <code>ratio&lt;86400&gt;</code> (or to be more explicit: <code>ratio_multiply&lt;chrono::hours::period, ratio&lt;24&gt;&gt;</code>). </p>\n\n<p>Next we'll need to decide the rounding we want to use: <a href=\"https://stackoverflow.com/questions/48468068/whats-the-difference-between-floor-and-duration-cast\">What&#39;s the Difference Between floor and duration_cast?</a> But it's probably <a href=\"http://en.cppreference.com/w/cpp/chrono/duration/floor\" rel=\"nofollow noreferrer\"><code>chrono::floor</code></a>. So we'll truncate to days then convert back to milliseconds to store the value:</p>\n\n<pre><code>const auto result = chrono::duration_cast&lt;chrono::milliseconds&gt;(chrono::floor&lt;chrono::duration&lt;int, ratio&lt;86400&gt;&gt;&gt;(ts))\n</code></pre>\n\n<p>As far as output formatting for <code>result</code> you'll want to use <a href=\"http://en.cppreference.com/w/cpp/io/manip/put_time\" rel=\"nofollow noreferrer\"><code>put_time</code></a> which means you'll need to convert as follows:</p>\n\n<pre><code>const auto time = chrono::system_clock::to_time_t(chrono::system_clock::time_point(result));\n\ncout &lt;&lt; put_time(localtime(&amp;time), \"%A,%e %B %Y\");\n</code></pre>\n\n<p>The timestamp that you'll want to store will be: <code>result.count()</code>.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1da564671cfda22c\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 33, "user_id": 9329932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7111f98c8e83d2ec2529cba1cb725c?s=128&d=identicon&r=PG&f=1", "display_name": "Zatt", "link": "https://stackoverflow.com/users/9329932/zatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 0, "accepted_answer_id": 48676468, "answer_count": 2, "score": 1, "last_activity_date": 1518104718, "creation_date": 1518038838, "question_id": 48673531, "link": "https://stackoverflow.com/questions/48673531/extract-date-timestamp-from-a-timestamp-in-c", "title": "Extract date timestamp from a timestamp in C++", "body": "<p>How can I extract a date (YYYY-MM-DD) from a timestamp and save it as a timestamp?<br>\nWe know that <code>1518038663000</code> is <code>Wednesday, 7 February 2018 16:24:23</code>(GTM -5 hours) yet I would like to keep just <code>Wednesday, 7 February 2018</code>(GTM -5 hours) and save it as <code>1517979600000</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1518037993, "post_id": 48673332, "comment_id": 84345053, "body": "Firstly: <code>const char* test = &quot;HELLO&quot;;</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1518038058, "post_id": 48673332, "comment_id": 84345069, "body": "<code>memcpy</code>/<code>strcpy</code> as C-arrays are not copy-able."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1518038148, "post_id": 48673332, "comment_id": 84345109, "body": "<code>char test2[6] = {test[0], test[1], test[2], test[3], test[4], test[5]}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 427293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655a584cebec20a61fbcf369816020cf?s=128&d=identicon&r=PG", "display_name": "N0b1ts", "link": "https://stackoverflow.com/users/427293/n0b1ts"}, "edited": false, "score": 0, "creation_date": 1518038210, "post_id": 48673368, "comment_id": 84345149, "body": "Why convert it? It is already an array of chars."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518038283, "post_id": 48673368, "comment_id": 84345184, "body": "It should be <code>const char* test</code>. Non-const is not valid, since it points to a literal."}, {"owner": {"reputation": 172, "user_id": 427293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655a584cebec20a61fbcf369816020cf?s=128&d=identicon&r=PG", "display_name": "N0b1ts", "link": "https://stackoverflow.com/users/427293/n0b1ts"}, "edited": false, "score": 0, "creation_date": 1518038367, "post_id": 48673368, "comment_id": 84345236, "body": "True, but the question was about how to convert it."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518038405, "post_id": 48673368, "comment_id": 84345260, "body": "You can&#39;t convert something that&#39;s not legal to have in the first place :-) It&#39;s undefined behavior."}, {"owner": {"reputation": 172, "user_id": 427293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655a584cebec20a61fbcf369816020cf?s=128&d=identicon&r=PG", "display_name": "N0b1ts", "link": "https://stackoverflow.com/users/427293/n0b1ts"}, "edited": false, "score": 0, "creation_date": 1518038649, "post_id": 48673368, "comment_id": 84345370, "body": "Right. I was lost in thoughts about the conversion of char * test into an array of chars i.e test[i] and the assumption that it was a difference. :-)"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 0, "last_activity_date": 1518038227, "last_edit_date": 1518038227, "creation_date": 1518038125, "answer_id": 48673368, "question_id": 48673332, "link": "https://stackoverflow.com/questions/48673332/convert-char-to-array-of-chars/48673368#48673368", "title": "Convert char to array of chars", "body": "<p>You can't copy arrays in C++, at least not without a little help. In this case the function you need is <code>strcpy</code></p>\n\n<pre><code>char* test = \"HELLO\";\nchar test2[6];\nstrcpy(test2, test);\n</code></pre>\n\n<p>Also note that an array of chars is <code>char[]</code> not <code>char*[]</code> (which is an array of char pointers).</p>\n"}, {"tags": [], "owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1518038534, "last_edit_date": 1518038534, "creation_date": 1518038195, "answer_id": 48673385, "question_id": 48673332, "link": "https://stackoverflow.com/questions/48673332/convert-char-to-array-of-chars/48673385#48673385", "title": "Convert char to array of chars", "body": "<p>You can only initialize an array with a string literal:</p>\n\n<blockquote>\n  <p>8.5.2 <strong>Character arrays</strong> [dcl.init.string]<br>\n  1 An array of narrow character type (3.9.1), char16_t array, char32_t array, or wchar_t array can be initialized\n  by a narrow string literal, char16_t string literal, char32_t string literal, or wide string literal,\n  respectively, or by an appropriately-typed string literal enclosed in braces (2.13.5). Successive characters of\n  the value of the string literal initialize the elements of the array. [ Example:    </p>\n</blockquote>\n\n<pre><code>char msg[] = \"Syntax error on line %s\\n\";\n</code></pre>\n\n<p>I don't know the rationale for this but I'll take a guess and say that that it is meant to guarantee that direct initializations do not overflow the array (when the size is specified).</p>\n"}], "owner": {"reputation": 91, "user_id": 6423814, "user_type": "registered", "profile_image": "https://graph.facebook.com/917009535015091/picture?type=large", "display_name": "Kirill", "link": "https://stackoverflow.com/users/6423814/kirill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4276, "favorite_count": 0, "closed_date": 1518038311, "accepted_answer_id": 48673368, "answer_count": 2, "score": 0, "last_activity_date": 1518038534, "creation_date": 1518037945, "question_id": 48673332, "link": "https://stackoverflow.com/questions/48673332/convert-char-to-array-of-chars", "closed_reason": "Duplicate", "title": "Convert char to array of chars", "body": "<p>I'm doing something like that:</p>\n\n<pre><code>char* test = \"HELLO\";\nchar* test2[6] = test; //\n</code></pre>\n\n<p>But it is not working, how can I achieve that?</p>\n"}, {"tags": ["c++", "hash", "cryptoapi", "cng"], "comments": [{"owner": {"reputation": 939, "user_id": 1246117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e7ff09de72724c2415872886fc1f9bf?s=128&d=identicon&r=PG", "display_name": "Timothy John Laird", "link": "https://stackoverflow.com/users/1246117/timothy-john-laird"}, "edited": false, "score": 0, "creation_date": 1518108011, "post_id": 48673289, "comment_id": 84379051, "body": "I may have been using the wrong function to do this (or re-inventing the wheel). CryptCreateKeyIdentifierFromCSP  looks like a better fit, but I don&#39;t see an equivalent CNG function. Maybe they just haven&#39;t written one yet. Does anyone know how I would know if I used incorrect subject key identifiers? What exactly would break and where? What should I look for?"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5138617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9585748df5dbe818f5393d5201b88d?s=128&d=identicon&r=PG&f=1", "display_name": "geniuss99", "link": "https://stackoverflow.com/users/5138617/geniuss99"}, "is_accepted": true, "score": 2, "last_activity_date": 1530803626, "last_edit_date": 1530803626, "creation_date": 1530802575, "answer_id": 51194439, "question_id": 48673289, "link": "https://stackoverflow.com/questions/48673289/how-to-calculate-subject-key-identifier-in-cng/51194439#51194439", "title": "How to calculate Subject Key Identifier in CNG?", "body": "<p>Here you go: both CNG and CAPI variants.</p>\n\n<pre><code>HRESULT capiCreateKeyIdentifierFromPublicKey(NCRYPT_KEY_HANDLE hCngKey, CRYPT_DATA_BLOB* outHash)\n{\n    HRESULT                 hr         = S_OK;\n    BOOL                    bResult    = FALSE;\n\n    PCERT_PUBLIC_KEY_INFO   pCertInfo  = NULL;\n    DWORD                   cbCertInfo = 0;\n\n    outHash-&gt;pbData = NULL;\n    outHash-&gt;cbData = 0;\n\n\n    /* STEP1: Extract public key. */\n    bResult = CryptExportPublicKeyInfo(hCngKey, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, NULL, &amp;cbCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n    pCertInfo = (PCERT_PUBLIC_KEY_INFO)HeapAlloc(GetProcessHeap(), 0, cbCertInfo);\n    if (NULL == pCertInfo) {\n        hr = HRESULT_FROM_WIN32(ERROR_OUTOFMEMORY);\n        goto Cleanup;\n    }\n\n\n    bResult = CryptExportPublicKeyInfo(hCngKey, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, pCertInfo, &amp;cbCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n\n\n    /* STEP2: Make hash. */\n    bResult = CryptHashPublicKeyInfo(NULL, CALG_SHA1, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, pCertInfo, NULL, &amp;outHash-&gt;cbData);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n    outHash-&gt;pbData = (BYTE*)HeapAlloc(GetProcessHeap(), 0, outHash-&gt;cbData);\n\n    bResult = CryptHashPublicKeyInfo(NULL, CALG_SHA1, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, pCertInfo, outHash-&gt;pbData, &amp;outHash-&gt;cbData);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n\nCleanup:\n    if (!SUCCEEDED(hr) &amp;&amp; NULL != outHash-&gt;pbData) {\n        HeapFree(GetProcessHeap(), 0, outHash-&gt;pbData);\n        outHash-&gt;pbData = NULL;\n        outHash-&gt;cbData = 0;\n    }\n\n    if (NULL != pCertInfo) {\n        HeapFree(GetProcessHeap(), 0, pCertInfo);\n        pCertInfo = 0;\n    }\n\n    return hr;\n}\n\n\nHRESULT cngCreateKeyIdentifierFromPublicKey(NCRYPT_KEY_HANDLE hCngKey, CRYPT_DATA_BLOB* outHash)\n{\n    // @see https://docs.microsoft.com/en-us/windows/desktop/seccng/creating-a-hash-with-cng\n    HRESULT                 hr           = S_OK;\n    BOOL                    bResult      = FALSE;\n\n    BCRYPT_ALG_HANDLE       hAlg         = NULL;\n    BCRYPT_HASH_HANDLE      hHash        = NULL;\n    NTSTATUS                status       = 0;\n\n    DWORD                   cbData       = 0;\n    DWORD                   cbHashObject = 0;\n    PBYTE                   pbHashObject = NULL;\n\n    PCERT_PUBLIC_KEY_INFO   pCertInfo    = NULL;\n    DWORD                   cbCertInfo   = 0;\n\n    BYTE*                   pbEncodedCertInfo = NULL;\n    ULONG                   cbEncodedCertInfo = 0;\n\n    outHash-&gt;pbData = NULL;\n    outHash-&gt;cbData = 0;\n\n    /* STEP1: Extract public key. */\n    bResult = CryptExportPublicKeyInfo(hCngKey, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, NULL, &amp;cbCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n    pCertInfo = (PCERT_PUBLIC_KEY_INFO)HeapAlloc(GetProcessHeap(), 0, cbCertInfo);\n    if (NULL == pCertInfo) {\n        hr = HRESULT_FROM_WIN32(ERROR_OUTOFMEMORY);\n        goto Cleanup;\n    }\n\n\n    bResult = CryptExportPublicKeyInfo(hCngKey, 0, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, pCertInfo, &amp;cbCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n\n\n    /* STEP2: Encode the public key. */\n    bResult = CryptEncodeObject(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, X509_PUBLIC_KEY_INFO, pCertInfo, pbEncodedCertInfo, &amp;cbEncodedCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n    pbEncodedCertInfo = (BYTE*)HeapAlloc(GetProcessHeap(), 0, cbEncodedCertInfo);\n\n    bResult = CryptEncodeObject(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, X509_PUBLIC_KEY_INFO, pCertInfo, pbEncodedCertInfo, &amp;cbEncodedCertInfo);\n    if (!bResult) {\n        hr = HRESULT_FROM_WIN32(GetLastError());\n        goto Cleanup;\n    }\n\n\n\n    /* STEP3: Open an algorithm handle. */\n    status = BCryptOpenAlgorithmProvider(\n        &amp;hAlg,\n        BCRYPT_SHA1_ALGORITHM,\n        NULL,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP4: Calculate the size of the buffer to hold the hash object. */\n    status = BCryptGetProperty(\n        hAlg,\n        BCRYPT_OBJECT_LENGTH,\n        (PBYTE)&amp;cbHashObject,\n        sizeof(DWORD),\n        &amp;cbData,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP5: Allocate the buffer for hash object on the heap. */\n    pbHashObject = (PBYTE)HeapAlloc(GetProcessHeap(), 0, cbHashObject);\n    if (NULL == pbHashObject) {\n        hr = HRESULT_FROM_WIN32(ERROR_OUTOFMEMORY);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP6: Create a hash object (get handle to CNG hash object). */\n    status = BCryptCreateHash(\n        hAlg,\n        &amp;hHash,\n        pbHashObject,\n        cbHashObject,\n        NULL,\n        0,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP7: Calculate the length of buffer for result hash. */\n    status = BCryptGetProperty(\n        hAlg,\n        BCRYPT_HASH_LENGTH,\n        (PBYTE)&amp;outHash-&gt;cbData,\n        sizeof(DWORD),\n        &amp;cbData,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP8: Allocate buffer for result hash on the heap. */\n    outHash-&gt;pbData = (PBYTE)HeapAlloc(GetProcessHeap(), 0, outHash-&gt;cbData);\n    if (NULL == outHash-&gt;pbData) {\n        hr = HRESULT_FROM_WIN32(ERROR_OUTOFMEMORY);\n        goto Cleanup;\n    }\n\n\n\n    /* STEP9: Hash data. */\n    status = BCryptHashData(\n        hHash,\n        (PBYTE)pbEncodedCertInfo,\n        cbEncodedCertInfo,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\n\n    /* STEP10: Close hash object and get result value. */\n    status = BCryptFinishHash(\n        hHash,\n        outHash-&gt;pbData,\n        outHash-&gt;cbData,\n        0\n    );\n\n    if (!NT_SUCCESS(status)) {\n        hr = HRESULT_FROM_NT(status);\n        goto Cleanup;\n    }\n\nCleanup:\n    if (!SUCCEEDED(hr) &amp;&amp; NULL != outHash-&gt;pbData) {\n        HeapFree(GetProcessHeap(), 0, outHash-&gt;pbData);\n        outHash-&gt;pbData = NULL;\n        outHash-&gt;cbData = 0;\n    }\n\n    if (NULL != hHash) {\n        BCryptDestroyHash(hHash);\n        hHash = NULL;\n    }\n\n    if (NULL != pbHashObject) {\n        HeapFree(GetProcessHeap(), 0, pbHashObject);\n        pbHashObject = NULL;\n    }\n\n    if (NULL != hAlg) {\n        BCryptCloseAlgorithmProvider(hAlg, 0);\n        hAlg = NULL;\n    }\n\n    if (NULL != pbEncodedCertInfo) {\n        HeapFree(GetProcessHeap(), 0, pbEncodedCertInfo);\n        pCertInfo = 0;\n    }\n\n    if (NULL != pCertInfo) {\n        HeapFree(GetProcessHeap(), 0, pCertInfo);\n        pCertInfo = 0;\n    }\n\n    return hr;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>CRYPT_DATA_BLOB subjectKeyIdentifier = { 0 };\nNCRYPT_KEY_HANDLE hCngKey = NULL;\n\nHRESULT hr = NCryptOpenStorageProvider(&amp;hProvider, MS_KEY_STORAGE_PROVIDER, 0);\nif (hr) {\n    hr = NCryptOpenKey(hProvider, &amp;hCngKey, wszKeyName, 0, 0);\n    if (ERROR_SUCCESS == hr) {\n        hr = cngCreateKeyIdentifierFromPublicKey(hCngKey, &amp;subjectKeyIdentifier);\n        if (hr) {\n            // do smth with data\n            // clear the memory\n            HeapFree(GetProcessHeap(), 0, subjectKeyIdentifier.pbData);\n            subjectKeyIdentifier.pbData = NULL;\n            subjectKeyIdentifier.cbData = 0;\n        }\n\n    }\n}\n\n......\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 1246117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e7ff09de72724c2415872886fc1f9bf?s=128&d=identicon&r=PG", "display_name": "Timothy John Laird", "link": "https://stackoverflow.com/users/1246117/timothy-john-laird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 51194439, "answer_count": 1, "score": 0, "last_activity_date": 1530803626, "creation_date": 1518037770, "question_id": 48673289, "link": "https://stackoverflow.com/questions/48673289/how-to-calculate-subject-key-identifier-in-cng", "title": "How to calculate Subject Key Identifier in CNG?", "body": "<p>My goal is to populate the Subject Key Identifier Extension (2.5.29.14) for a certificate using Microsoft CNG. I did it previously with Microsoft CAPI but the function I used:</p>\n\n<p>CryptHashPublicKeyInfo</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380204(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa380204(v=vs.85).aspx</a></p>\n\n<p>Is now depreciated. CNG has no such method. However, the descripion for CryptHashPublicKeyInfo in the link above says that they do a SHA1 hash of the public key information. So I did a SHA1 hash of the public key bytes in CNG on the same data in CryptHashPublicKeyInfo (CAPI) and the two hashes are different. I need to resolve this difference. To be clear, my logic is running on the same public key from the same CSR.</p>\n\n<p>Details in RFC 5280 seem to confirm what Microsoft says:\n<a href=\"https://tools.ietf.org/html/rfc5280#section-4.2.1.2\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc5280#section-4.2.1.2</a></p>\n\n<blockquote>\n  <p>(1) The keyIdentifier is composed of the 160-bit SHA-1 hash of the\n             value of the BIT STRING subjectPublicKey (excluding the tag,\n             length, and number of unused bits).</p>\n  \n  <p>Cooper, et al.              Standards Track                    [Page\n  28]   RFC 5280            PKIX Certificate and CRL Profile<br>\n  May 2008</p>\n\n<pre><code>  (2) The keyIdentifier is composed of a four-bit type field with\n       the value 0100 followed by the least significant 60 bits of\n       the SHA-1 hash of the value of the BIT STRING\n       subjectPublicKey (excluding the tag, length, and number of\n       unused bits).\n</code></pre>\n</blockquote>\n\n<p>^I'm guessing Microsoft is doing case #1.</p>\n\n<p>Here is my CAPI code:</p>\n\n<pre><code>//depreciated (CAPI)\n//get data for subject key identifier\n//get length\nHCRYPTPROV hHashProv = NULL;\nif (!CryptHashPublicKeyInfo(\n    hHashProv,\n    CALG_SHA1, //sha1\n    0,\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    &amp;serverCertInfo.SubjectPublicKeyInfo,\n    NULL,\n    &amp;dwSubjectKeyIdentifier\n))\n{\n    throw std::runtime_error(\"Unable to get length of public key info hash\");\n}\n\n//alocate data buffer\npbSubjectKeyIdentifier = (LPBYTE)LocalAlloc(0, dwSubjectKeyIdentifier);\n//fill data buffer with subject key identifier\nif (!CryptHashPublicKeyInfo(\n    hHashProv,\n    CALG_SHA1, //sha1\n    0,\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    &amp;serverCertInfo.SubjectPublicKeyInfo,\n    pbSubjectKeyIdentifier,\n    &amp;dwSubjectKeyIdentifier\n))\n{\n    throw std::runtime_error(\"Unable to fill public key info hash\");\n}\n\nCRYPT_DATA_BLOB skiBlob;\nskiBlob.cbData = dwSubjectKeyIdentifier;\nskiBlob.pbData = pbSubjectKeyIdentifier;\n\n//encode subject key identifier extension\nLPBYTE pbEncodeSKI = NULL;\nDWORD dwEncodedSKI;\nif (!CryptEncodeObject(\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    szOID_SUBJECT_KEY_IDENTIFIER,\n    (void*)&amp;skiBlob,\n    NULL,\n    &amp;dwEncodedSKI\n))\n{\n    throw std::runtime_error(\"Unable to get length to encode extension: subject key identifier\");\n}\n\npbEncodeSKI = (LPBYTE)LocalAlloc(0, dwEncodedSKI);\nif (!CryptEncodeObject(\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    szOID_SUBJECT_KEY_IDENTIFIER,\n    (void*)&amp;skiBlob,\n    pbEncodeSKI,\n    &amp;dwEncodedSKI\n))\n{\n    throw std::runtime_error(\"Unable to encode extension: subject key identifier\");\n}\n</code></pre>\n\n<p>This produces this value in the extension (same public key in certificate request): 9d77f29e4fa15e46237d59a7c00efde9d286b9dc</p>\n\n<p>This is my CNG code:</p>\n\n<pre><code>NTSTATUS statusBCryptOpenAlgorithmProvider;\nNTSTATUS statusBCryptHash;\nBCRYPT_ALG_HANDLE hHashAlg;\nLPBYTE pbHash;\nDWORD dwHash = 20;\nLPSTR lpstrPublicKeyEncoded;\nDWORD dwPublicKeyEncoded;\nCRYPT_DATA_BLOB skiBlob;\n\nif (!CryptBinaryToStringA(\n    infoPublicKey.PublicKey.pbData,\n    infoPublicKey.PublicKey.cbData,\n    CRYPT_STRING_BINARY,\n    NULL,\n    &amp;dwPublicKeyEncoded\n))\n{\n    throw std::runtime_error(\"Error getting length of encoded binary string (CryptBinaryToString)\");\n}\n\nlpstrPublicKeyEncoded = (LPSTR)LocalAlloc(0, dwPublicKeyEncoded);\nif (!CryptBinaryToStringA(\n    infoPublicKey.PublicKey.pbData,\n    infoPublicKey.PublicKey.cbData,\n    CRYPT_STRING_BINARY,\n    lpstrPublicKeyEncoded,\n    &amp;dwPublicKeyEncoded\n))\n{\n    LocalFree(lpstrPublicKeyEncoded);\n    throw std::runtime_error(\"Error encoding binary string (CryptBinaryToString)\");\n}\n\nstatusBCryptOpenAlgorithmProvider = BCryptOpenAlgorithmProvider(\n    &amp;hHashAlg,\n    BCRYPT_SHA1_ALGORITHM,\n    MS_PRIMITIVE_PROVIDER,\n    0\n);\n\nif (0 != statusBCryptOpenAlgorithmProvider)\n{\n    LocalFree(lpstrPublicKeyEncoded);\n    throw std::runtime_error(\"Error opening SHA1 algorithm provider (BCryptOpenAlgorithmProvider)\");\n}\n\npbHash = (LPBYTE)LocalAlloc(0, dwHash);\nstatusBCryptHash = BCryptHash(\n    hHashAlg,\n    NULL,\n    0,\n    (BYTE*)lpstrPublicKeyEncoded,\n    dwPublicKeyEncoded,\n    pbHash,\n    dwHash\n);\n\nif (0 != statusBCryptHash)\n{\n    LocalFree(lpstrPublicKeyEncoded);\n    BCryptCloseAlgorithmProvider(hHashAlg, 0);\n    LocalFree(pbHash);\n    throw std::runtime_error(\"Error hashing public key (BCryptHash)\");\n}\n\nskiBlob.pbData = pbHash;\nskiBlob.cbData = dwHash;\n\nBCryptCloseAlgorithmProvider(hHashAlg, 0);\nLocalFree(pbHash);\nLocalFree(lpstrPublicKeyEncoded);\n\n//encode subject key identifier extension\nLPBYTE pbEncodeSKI = NULL;\nDWORD dwEncodedSKI;\nif (!CryptEncodeObject(\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    szOID_SUBJECT_KEY_IDENTIFIER,\n    (void*)&amp;skiBlob,\n    NULL,\n    &amp;dwEncodedSKI\n))\n{\n    throw std::runtime_error(\"Unable to get length to encode extension: subject key identifier\");\n}\n\npbEncodeSKI = (LPBYTE)LocalAlloc(0, dwEncodedSKI);\nif (!CryptEncodeObject(\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    szOID_SUBJECT_KEY_IDENTIFIER,\n    (void*)&amp;skiBlob,\n    pbEncodeSKI,\n    &amp;dwEncodedSKI\n))\n{\n    throw std::runtime_error(\"Unable to encode extension: subject key identifier\");\n}\n</code></pre>\n\n<p>This produces this SKI value (different): 210816297e8e76879f99ec4762452b5d38967b5b</p>\n\n<p>Any clue what I am doing wrong in the CNG code sample? There is apparently a magic sequence of calls but I don't know what it is.</p>\n"}, {"tags": ["c++", "qt", "barcode", "barcode-printing", "escpos"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1518037539, "post_id": 48673200, "comment_id": 84344806, "body": "Why are you using <code>char</code> arrays instead of <code>std::string</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518037571, "post_id": 48673200, "comment_id": 84344837, "body": "You didn&#39;t add an extra byte for the null terminator in C-style strings."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518037910, "post_id": 48673200, "comment_id": 84345015, "body": "What is the incorrect encoding that you&#39;re getting from <code>00</code>?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1518038357, "post_id": 48673200, "comment_id": 84345230, "body": "You turn <code>00</code> into a single zero byte aka NUL aka <code>&#39;\\0&#39;</code>. <code>strncat</code> treats it as a string terminator."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518038929, "post_id": 48673200, "comment_id": 84345523, "body": "<code>char* printerCodBarras = new char[ tamanhoComando ];</code> -- Hopefully the caller figures out to <code>delete[]</code> this memory.  Better just to use <code>std::string</code> and not have memory-leak issues."}, {"owner": {"reputation": 1, "user_id": 8049312, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ryG2M59JZg/AAAAAAAAAAI/AAAAAAAAAAs/xNamtPDlSFc/photo.jpg?sz=128", "display_name": "Kielson Zinn da Silva", "link": "https://stackoverflow.com/users/8049312/kielson-zinn-da-silva"}, "edited": false, "score": 0, "creation_date": 1518039317, "post_id": 48673200, "comment_id": 84345706, "body": "I will make the adjustments as you said, this part of the conversion to \\ 00 and the char * understand how null it makes sense, I will check (I will use std :: string also to test, thanks already)"}, {"owner": {"reputation": 1, "user_id": 8049312, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ryG2M59JZg/AAAAAAAAAAI/AAAAAAAAAAs/xNamtPDlSFc/photo.jpg?sz=128", "display_name": "Kielson Zinn da Silva", "link": "https://stackoverflow.com/users/8049312/kielson-zinn-da-silva"}, "edited": false, "score": 0, "creation_date": 1518041849, "post_id": 48673200, "comment_id": 84346866, "body": "So, after encoding the text that I need to send to print, the method that writes the data uses const char*, ie even though I work with std::string when sending the same to the method, it will be lost, so the problem is actually at 00 which is understood as terminator NULL :/"}], "owner": {"reputation": 1, "user_id": 8049312, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ryG2M59JZg/AAAAAAAAAAI/AAAAAAAAAAs/xNamtPDlSFc/photo.jpg?sz=128", "display_name": "Kielson Zinn da Silva", "link": "https://stackoverflow.com/users/8049312/kielson-zinn-da-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518037417, "creation_date": 1518037417, "question_id": 48673200, "link": "https://stackoverflow.com/questions/48673200/difficulty-implementing-code-128-c-rule", "title": "Difficulty implementing code 128 C rule", "body": "<p>Code related to text encoding:</p>\n\n<pre><code>const char* toCode128C( const char* texto ) {\n\n    int tamanhoTexto = strlen( texto );\n    int tamanhoComando = strlen( \"{C\" ) + tamanhoTexto;\n\n    char* printerCodBarras = new char[ tamanhoComando ];\n    memcpy( printerCodBarras, \"{C\", tamanhoComando );\n\n    for ( int i = 0; i &lt; tamanhoTexto; i += 2 )  {\n        int num = QString( texto ).mid( i, 2 ).toInt();\n        QString vl = QString( static_cast&lt;char&gt;( num ) );\n\n        strncat( printerCodBarras, vl.toStdString().c_str(), 1 );\n    }\n\n    return printerCodBarras;\n\n}\n</code></pre>\n\n<p>Encoding occurs successfully, except when it contains a \"00\" for example code 59900001, the transformation occurs from two characters to two characters, or error occurs when encoding the value \"00\", thus making the (00) is not printed.</p>\n"}, {"tags": ["c++", "arrays", "dynamic-allocation", "static-allocation"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1518037509, "post_id": 48673197, "comment_id": 84344784, "body": "why not use <code>std::vector</code>?"}, {"owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1518037551, "post_id": 48673197, "comment_id": 84344816, "body": "I must not use it as well.I have to use arrays and pointers. It&#39;s a challenge."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1518037607, "post_id": 48673197, "comment_id": 84344858, "body": "So the sizes of the array are compile time constants? otherwise you cannot avoid dynamic memory allocations"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1518037764, "post_id": 48673197, "comment_id": 84344943, "body": "<i>&quot;I must not use it as well.I have to use arrays and pointers. It&#39;s a challenge.&quot;</i> More of a waste if time than a challenge if you ask me."}, {"owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "edited": false, "score": 0, "creation_date": 1518037775, "post_id": 48673197, "comment_id": 84344947, "body": "UnholySheep Now you raise me another question: is declaring an array of a dynamic size a dynamic allocation? I thought dynamic allocation is only using <code>new</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1518037851, "post_id": 48673197, "comment_id": 84344986, "body": "<i>&quot; is declaring an array of a dynamic size&quot;</i> it is not valid C++, it is VLA extension."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1518037855, "post_id": 48673197, "comment_id": 84344988, "body": "Declaring arrays with non-compile time constant sizes isn&#39;t even standard C++. It&#39;s an extension that <i>some</i> compilers provide"}, {"owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "edited": false, "score": 0, "creation_date": 1518037905, "post_id": 48673197, "comment_id": 84345012, "body": "Baum not Augen, In my country, the school system of learning c++ is not so developed so if you are training for a contest (as in my case) you are not allowed to use anything that is out of the scholar programme."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1518037961, "post_id": 48673197, "comment_id": 84345040, "body": "You already noticed that you&#39;re getting <i>garbage</i>, think about what happens to <code>row</code> at the end of the loop body and what that implies when you dereference one of those rows outside the loop..."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1518037963, "post_id": 48673197, "comment_id": 84345041, "body": "Not related, but use <code>@username</code> when replying to people not under their own posts. Otherwise they might not get a notification and not reply."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1518037998, "post_id": 48673197, "comment_id": 84345055, "body": "In order to do a static allocation, you&#39;ll need to be able to provide all of the necessary array-sizes at compile-time.  Assuming that&#39;s doable, then int triangle[n][p] (where p is the maximum size of a row) would do the trick."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518039106, "post_id": 48673197, "comment_id": 84345612, "body": "@StefanOctavian <i>you are not allowed to use anything that is out of the scholar programme</i> -- So your school teaches to use illegal / invalid C++?  Or maybe you should thank the commenters for pointing out to you that <code>int* triangle[n]; </code> is not valid, and you may have had points taken away from you by your teacher if you kept that code in place."}, {"owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518074522, "post_id": 48673197, "comment_id": 84356650, "body": "@PaulMcKenzie That is not something my teacher taught me. I saw that it works in Code::Blocks, used it once, my teacher said nothing about that and I thought it is perfectly ok to use it. Yes, I should thank them for that. Also, there are no points, only grades."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518075218, "post_id": 48673197, "comment_id": 84356975, "body": "@StefanOctavian -- This is the reason why I wish that <code>gcc</code> (the compiler that is used in Code::Blocks) would turn <b>off</b> this option by default.  Your post is one of many each day where the new programmer is led down the wrong track by writing invalid code.   Your code will <i>not</i> compiler if given to a compile such as Visual C++, or even <code>gcc</code> when given the correct flags."}], "answers": [{"tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": false, "score": 3, "last_activity_date": 1518037982, "creation_date": 1518037982, "answer_id": 48673339, "question_id": 48673197, "link": "https://stackoverflow.com/questions/48673197/replace-dynamic-allocation-with-a-static-one/48673339#48673339", "title": "Replace dynamic allocation with a static one", "body": "<p>So, if you want \"array of arrays\" simplified, your choice is array linearization. It means that instead of 7 arrays of 10 items each you should declare single array of 70 elements. Then, just change nested indexes with a function that calculates resulting shift in linearized array, and viola!</p>\n\n<p>Here you can find one of such examples: <a href=\"https://stackoverflow.com/questions/14015556/how-to-map-the-indexes-of-a-matrix-to-a-1-dimensional-array-c\">How to map the indexes of a matrix to a 1-dimensional array (C++)?</a></p>\n\n<p>In case you don't know in advance how long is your array, it may be a tough choice to determine preliminary reservation size (for example, STL containers like vector etc. do the same trick: they allocate a chunk of memory then grow the container until free capacity left, then re-allocate bigger chunk moving the data from old to new buffer, and again, and again, and again...)</p>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "is_accepted": false, "score": 0, "last_activity_date": 1518038161, "creation_date": 1518038161, "answer_id": 48673375, "question_id": 48673197, "link": "https://stackoverflow.com/questions/48673197/replace-dynamic-allocation-with-a-static-one/48673375#48673375", "title": "Replace dynamic allocation with a static one", "body": "<p>As @BeyelerStudios pointed out in the comments, at the end of the for loop, the memory allocated for the <code>row</code> array gets freed. When I am trying to print out the contents, I am dereferencing pointers to this freed up memory, so I am getting garbage. Thank you!</p>\n"}], "owner": {"reputation": 514, "user_id": 6799857, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/655947921228309/picture?type=large", "display_name": "Stefan Octavian", "link": "https://stackoverflow.com/users/6799857/stefan-octavian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518038161, "creation_date": 1518037408, "last_edit_date": 1518037600, "question_id": 48673197, "link": "https://stackoverflow.com/questions/48673197/replace-dynamic-allocation-with-a-static-one", "title": "Replace dynamic allocation with a static one", "body": "<p>I have a project and I have to define an array of arrays of different dimensions (like a triangle) because I am not allowed to use std::vector or other container class. For this, I am using an array of pointers. Normally, I would do this:</p>\n\n<pre><code>int* triangle[n]; \nfor(int i = 0; i &lt; n; i++) {\n    triangle[i] = new int[i + 1];\n    for(int j = 0; j &lt;= i; j++) cin &gt;&gt; triangle[i][j];\n}\n</code></pre>\n\n<p>But I must not use dynamic memory! I thought that doing</p>\n\n<pre><code>int* triangle[n];\nfor(int i = 0; i &lt; n; i++) {\n    int row[i + 1];\n    triangle[i] = row;\n    for(int j = 0; j &lt;= i; j++) cin &gt;&gt; triangle[i][j];\n}\n</code></pre>\n\n<p>would do the trick. But it didn't. Instead, when I iterate over the arrays and print the contents, I get garbage. So, how can I replace a dynamic allocation with a static one?</p>\n"}, {"tags": ["c#", "python", "c++", "opencv", "object-detection"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518554569, "post_id": 48678366, "comment_id": 84552249, "body": "I wanted to recognize covers of a books then use that recognition area for extracting book covers and save it. Right now I am just training the haar classifier using images of book covers as positive images and non-book cover images as negatives."}, {"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518573092, "post_id": 48678366, "comment_id": 84558622, "body": "And is it even possible to use SURF or ORB with Haar cascades in this scenario?"}, {"owner": {"reputation": 170, "user_id": 7466822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e93c12b64237cc74b6920113abac2?s=128&d=identicon&r=PG&f=1", "display_name": "giobatta912", "link": "https://stackoverflow.com/users/7466822/giobatta912"}, "reply_to_user": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518575141, "post_id": 48678366, "comment_id": 84559108, "body": "Do you want to recognize covers of &quot;ALL&quot; books or only a set of books that is represented in your training data?"}, {"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518644141, "post_id": 48678366, "comment_id": 84595705, "body": "All book preferably."}], "tags": [], "owner": {"reputation": 170, "user_id": 7466822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e93c12b64237cc74b6920113abac2?s=128&d=identicon&r=PG&f=1", "display_name": "giobatta912", "link": "https://stackoverflow.com/users/7466822/giobatta912"}, "is_accepted": false, "score": 2, "last_activity_date": 1518068401, "creation_date": 1518068401, "answer_id": 48678366, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/48678366#48678366", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>What features are you using to detect your books? Are you training a CNN and deploying it with OpenCV? In that case adding rotation image augmentation to your training would make it easy to detect rotated books. </p>\n\n<p>If you are using traditional computer vision techniques instead, you can try to use some rotation invariant feature extractors like SURF, however, the results will not be as good as using CNNs which are now the state of the art for this kind of problems. </p>\n"}, {"tags": [], "owner": {"reputation": 869, "user_id": 5252807, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c450edfed672155562bf4ee91a8c71bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ozlu", "link": "https://stackoverflow.com/users/5252807/ozlu"}, "is_accepted": false, "score": 1, "last_activity_date": 1518182153, "creation_date": 1518182153, "answer_id": 48706753, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/48706753#48706753", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>Firstly, you should get the main theoritical ideas of <a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_calib3d/py_pose/py_pose.html\" rel=\"nofollow noreferrer\"><strong>pose estimation</strong></a> and <a href=\"https://docs.opencv.org/3.0-beta/modules/cudawarping/doc/warping.html\" rel=\"nofollow noreferrer\"><strong>image warping</strong></a>.</p>\n\n<p>You should define some important points of the books (some special and strong features that valid for each types of books) and then you can estimate the pose of the book by using this points. After getting the pose angles, you should warp the image to align books. After book alignment you should perform feature extraction so you can improve the success of book detection by this way. </p>\n\n<p>As a summary, <strong>pose estimation</strong> and <strong>warping (alignment)</strong> are important for these kinf of rotation problems.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9428221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Xun Victor", "link": "https://stackoverflow.com/users/9428221/xun-victor"}, "is_accepted": false, "score": 2, "last_activity_date": 1519900862, "creation_date": 1519900862, "answer_id": 49047866, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/49047866#49047866", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>Your problem can be perfectly solved using OpenCV and keypoint matching algorithms such as SURF or ORB. You don't really need a classifier. To my experience, such solution using unmodified openCv can scale up to recognize around 10.000 images.</p>\n\n<p>What I would do is:\nOffline: Loop over your book images to generate a database of keypoint descriptors matching each descriptor to the id of the book in which it comes from.\nOnline: Compute the keypoints of the query image and try to match (using  BF, FLANN, or LSH) each of them to a keypoint of the pre-computed database.\nVote for the database book cover which has matched with the most query keypoints.\nTry to compute an homography matrix between selected db book cover and query image to validate match.</p>\n\n<p>ORB, BRISK, SURF, SIFT feature descriptors are all usable for this task, and rotation invariant. ORB and BRISK are faster and a bit less performant.</p>\n\n<p>See this link for simple example:\n<a href=\"https://docs.opencv.org/3.3.0/dc/dc3/tutorial_py_matcher.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.3.0/dc/dc3/tutorial_py_matcher.html</a></p>\n"}], "owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4498, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1519900862, "creation_date": 1518037061, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>I have been training OpenCV classifier for recognition of books.The requirement is recognize book from an image. I have used 1000+ images and OpenCV is able to detect books with no rotation. However, when I try to detect books with rotations it does not work properly.So I am wondering if their anyway to detect objects with rotations in images using OpenCV? </p>\n"}, {"tags": ["c++", "class", "pointers", "dynamic-memory-allocation", "static-memory-allocation"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1518036768, "post_id": 48673013, "comment_id": 84344371, "body": "The first option doesn&#39;t allocate anything except for the pointer itself. Where that storage is located depends on usage. I think you may have an extra <code>*</code> in your first example."}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518036877, "post_id": 48673013, "comment_id": 84344434, "body": "Stack and Heap are implementation details that the language doesn&#39;t care about. What you&#39;re asking about is automatic vs dynamic storage duration."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1518036895, "post_id": 48673013, "comment_id": 84344440, "body": "Can i point you at the book list: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518037685, "post_id": 48673013, "comment_id": 84344900, "body": "The stack is limited, sometimes a few kB, sometimes 2-8MB, so if you have large images, or dynamically growing lists, you may need to use the heap. The stack also disappears when you return from a function, which is a problem for things you want to keep."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518039043, "post_id": 48673013, "comment_id": 84345584, "body": "Also <a href=\"https://stackoverflow.com/questions/32514923/why-did-heap-memory-come-into-existence\">possible duplicate</a>."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1518040353, "post_id": 48673013, "comment_id": 84346173, "body": "The first option you listed is incorrect. The second option violates current design principles. This question would have made sense several years ago, if you had gotten it right. The answer depends on scope and ownership, but you didn&#39;t give enough info on either."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518045763, "post_id": 48674380, "comment_id": 84348442, "body": "Hi, thanks for the nice answer. &quot;but doesn&#39;t allocate space for any object for the pointer to point to&quot;  Oh, I see, I was probably confused : Does <code>int* ptr;</code> also just alocate space for the pointer itself or also for the int it is going to point to? (Maybe for this I got confused).  &quot;Traditionally you&#39;d use the second object when you need the object to remain valid for longer than the scope of the calling code&quot;  I just tried to do this :  <code>void foo() {         Dog* myDog = new(Dog); } int main() {         foo();         myDog.bark();         return 0; }</code>"}, {"owner": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518045970, "post_id": 48674380, "comment_id": 84348519, "body": "Oh, I just notice there is no newline. I&#39;m not sure this is the right way to answer an answer..."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518048411, "post_id": 48674380, "comment_id": 84349252, "body": "For any type, any time you just declare a pointer (e.g. X* x;) you are only allocating space for the pointer itself.  Allocating space for an actual object of type X must be done separately (e.g. X* x = new X(); ... or equivalent, X * x; x = new X();)"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 1, "creation_date": 1518048502, "post_id": 48674380, "comment_id": 84349276, "body": "In your longer-scope example in your comment, you might do it more like this:  `Dog * foo() { Dog* myDog = new Dog; return myDog; } int main() { Dog * d = foo(); d-&gt;bark(); delete d; }"}, {"owner": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518088265, "post_id": 48674380, "comment_id": 84365273, "body": "Okay, makes sense"}, {"owner": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518088664, "post_id": 48674380, "comment_id": 84365514, "body": "So when you return the pointer, you can still point to the object it points to because this one exists on the heap, whereas for the code bellow : <code>Dog* foo() {Dog myDog(3); Dog* ptr = &amp;myDog; return ptr;} int main() { Dog* d = foo(); d-&gt;bark(); cout &lt;&lt; d-&gt;age &lt;&lt; endl; return 0;} </code>  (I just added a attribute for the age) the pointer is return but dereferencing it gives undefined behaviour since  the object it points was destroyed because was on the stack. Is this it? I am now going to inform myself about unique_ptr and shared_ptr :)"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "edited": false, "score": 0, "creation_date": 1518108878, "post_id": 48674380, "comment_id": 84379662, "body": "Yes, that&#39;s correct.  Returning a pointer to a stack object is always a mistake, for that reason :)"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 4, "last_activity_date": 1518048703, "last_edit_date": 1518048703, "creation_date": 1518042626, "answer_id": 48674380, "question_id": 48673013, "link": "https://stackoverflow.com/questions/48673013/what-are-the-reasons-to-allocate-a-pointer-on-the-heap/48674380#48674380", "title": "What are the reasons to allocate a pointer on the heap?", "body": "<blockquote>\n  <p>I understand that the first option allocates a space on the stack and\n  makes the pointer point to it while the second allocates a space on\n  the heap and make a pointer point to it.</p>\n</blockquote>\n\n<p>The above is incorrect -- the first option allocates space <strong>for the pointer itself</strong> on the stack, but doesn't allocate space for any object for the pointer to point to.  That is, the pointer isn't pointing to anything in particular, and thus isn't useful to use (unless/until you set the pointer to point to something)</p>\n\n<p>In particular, it's only pure blind luck that this code appears to \"work\" at all:</p>\n\n<pre><code>Dog* myDog;\nmyDog-&gt;bark();   // ERROR, calls a method on an invalid pointer!\n</code></pre>\n\n<p>... the above code is invoking <em>undefined behavior</em>, and in an ideal world it would simply crash, since you are calling a method on an invalid pointer.  But C++ compilers typically prefer maximizing efficiency over handling programmer errors gracefully, so they typically don't put in a check for invalid-pointers, and since your <code>bark()</code> method doesn't actually use any data from the <code>Dog</code> object, it is able to execute without any obvious crashing.  Try making your <code>bark()</code> method virtual, OTOH, and you will probably see a crash from the above code.</p>\n\n<blockquote>\n  <p>the second allocates a space on the heap and make a pointer point to\n  it.</p>\n</blockquote>\n\n<p>That is correct.</p>\n\n<blockquote>\n  <p>But I read also that the second option is tedious because you have to\n  deallocate the space with delete.</p>\n</blockquote>\n\n<p>Not only tedious, but error-prone -- it's very easy (in a non-trivial program) to end up with a code path where you forgot to call delete, and then you have a memory leak.  Or, alternatively, you could end up calling delete twice on the same pointer, and then you have undefined behavior and likely crashing or data corruption.  Neither mistake is much fun to debug.</p>\n\n<blockquote>\n  <p>So why would one ever use the second option.</p>\n</blockquote>\n\n<p>Traditionally you'd use dynamic allocation when you need the object to remain valid for longer than the scope of the calling code -- for example, if you needed the object to stick around even after the function you created the object in has returned.  Contrast that with a stack allocation:</p>\n\n<pre><code>myClass someStackObject;\n</code></pre>\n\n<p>... in which <code>someStackObject</code> is guaranteed to be destroyed when the calling function returns, which is usually a good thing -- but not if you need <code>someStackObject</code> to remain in existence ever after your function has returned.</p>\n\n<p>These days, most people would avoid using raw/C-style pointers entirely, since they are so dangerously error-prone.  The modern C++ way to allocate an object on the heap would look like this:</p>\n\n<pre><code>std::shared_ptr&lt;myClass&gt; pointer = std::make_shared&lt;myClass&gt;();\n</code></pre>\n\n<p>... and this is preferred because it gives you a heap-allocated myClass object whose pointed-to-object will continue to live for as long as there is at least one std::shared_ptr pointing to it (good), but also will automagically be deleted the moment there are no std::shared_ptr's pointing to it (even better, since that means no memory leak and no need to explicitly call <code>delete</code>, which means no potential double-deletes)</p>\n"}], "owner": {"reputation": 241, "user_id": 6360521, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/77ae41fb5e17c162690ef65a2aa5db99?s=128&d=identicon&r=PG&f=1", "display_name": "roi_saumon", "link": "https://stackoverflow.com/users/6360521/roi-saumon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 48674380, "answer_count": 1, "score": -2, "last_activity_date": 1518048703, "creation_date": 1518036680, "last_edit_date": 1518042066, "question_id": 48673013, "link": "https://stackoverflow.com/questions/48673013/what-are-the-reasons-to-allocate-a-pointer-on-the-heap", "title": "What are the reasons to allocate a pointer on the heap?", "body": "<p>Probably this question was already asked but I couldn't find it. Please redirect me if you you saw something.\n<strong>Question :</strong>\nwhat is the benefit of using :</p>\n\n<pre><code>myClass* pointer;\n</code></pre>\n\n<p>over</p>\n\n<pre><code>myClass* pointer = new(myClass);\n</code></pre>\n\n<p>From reading on other topics, I understand that the first option allocates a space on the stack and makes the pointer point to it while the second allocates a space on the heap and make a pointer point to it.\nBut I read also that the second option is tedious because you have to deallocate the space with delete.\nSo why would one ever use the second option.\nI am kind of a noob so please explain in details.</p>\n\n<p><strong>edit</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Dog\n{\n        public:\n                void bark()\n                {\n                        cout &lt;&lt; \"wouf!!!\" &lt;&lt; endl;\n                }\n\n};\n\n\nint main()\n{\n\n        Dog* myDog = new(Dog);\n        myDog-&gt;bark();\n        delete myDog;\n        return 0;\n\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Dog\n{\n        public:\n                void bark()\n                {\n                        cout &lt;&lt; \"wouf!!!\" &lt;&lt; endl;\n                }\n\n};\n\n\nint main()\n{\n\n        Dog* myDog;\n        myDog-&gt;bark();\n        return 0;\n\n}\n</code></pre>\n\n<p>both compile and give me \"wouf!!!\". So why should I use the \"new\" keyword?</p>\n"}, {"tags": ["c++", "c", "xc16"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 5, "creation_date": 1518037352, "post_id": 48672996, "comment_id": 84344695, "body": "Why don\u2019t you compile it as C on MSVC?"}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1518049216, "post_id": 48672996, "comment_id": 84349466, "body": "How are you building for Windows? VisualStudio?, MSBuild?"}, {"owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "edited": false, "score": 0, "creation_date": 1518049787, "post_id": 48672996, "comment_id": 84349629, "body": "In the Windows environment, the code is encapsulated in a class (so it needs to be built with C++). This is not possible when compiled as C with a 16-bit microprocessor target."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1518049932, "post_id": 48672996, "comment_id": 84349676, "body": "Don&#39;t know about XC16, but MSVC has options to build as C or C++ with any extension. <a href=\"https://msdn.microsoft.com/en-us/library/032xwy55.aspx\" rel=\"nofollow noreferrer\">Specify Source File Type</a>"}, {"owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1518050253, "post_id": 48672996, "comment_id": 84349762, "body": "@BoPersson Thanks. We found a similar solution (see my answer). Unfortunately this does not seem to be an option for XC16. More specifically, I think the problem lies with MPLABX, which dynamically builds the makefile."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1518050919, "post_id": 48672996, "comment_id": 84349949, "body": "You should compile C code as C in both cases; in the C++ app you could have a wrapper that wraps the C code without requiring modification of the C code"}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "is_accepted": true, "score": 0, "last_activity_date": 1518050430, "last_edit_date": 1518050430, "creation_date": 1518050097, "answer_id": 48675632, "question_id": 48672996, "link": "https://stackoverflow.com/questions/48672996/building-foo-cpp-as-c-code-with-microchip-xc16-compiler/48675632#48675632", "title": "Building foo.cpp as C code with Microchip XC16 compiler", "body": "<p>We discovered a flag in one of our Windows build environments (Embarcadero CBuilder) that forces compiling <code>foo.c</code> as C++. We'll therefore rename to <code>foo.c</code>. Problem solved. (EDIT: Others have commented that similar flags exist in VC)</p>\n\n<p>We could not find a comparable flag in XC16 (based on gcc 4.5.1) to treat <code>foo.cpp</code> as a C source file. The -x flag (<a href=\"https://stackoverflow.com/questions/4216247/forcing-gcc-to-compile-cpp-file-as-c\">Forcing gcc to compile .cpp file as C</a>) does not seem to work under MPLABX.</p>\n"}], "owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 48675632, "answer_count": 1, "score": 0, "last_activity_date": 1518050430, "creation_date": 1518036615, "question_id": 48672996, "link": "https://stackoverflow.com/questions/48672996/building-foo-cpp-as-c-code-with-microchip-xc16-compiler", "title": "Building foo.cpp as C code with Microchip XC16 compiler", "body": "<p>I have some code that is shared between a C++ Windows application and an XC16 C application. The source is written in such a way that it compiles cleanly under MSVC and XC16 (with appropriate use of the <code>__cplusplus</code> macro).</p>\n\n<p>The problem is that XC16 refuses to build <code>foo.cpp</code>. I have to copy the file to <code>foo.c</code> and back again. This is wreaking havoc on revision control, and making code edits within the ide problematic when the copying functions are automated in the build process.</p>\n\n<p>Is there a way to get XC16 to build (as C) a file with the extension cpp? (note that the header file is <code>foo.h</code>, so it is not an issue).</p>\n"}, {"tags": ["c++", "arm", "simd", "armv8", "sve"], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 4183260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0a9c774a5d112cd7a0eb387626ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Guillermo", "link": "https://stackoverflow.com/users/4183260/guillermo"}, "is_accepted": true, "score": 2, "last_activity_date": 1518961214, "creation_date": 1518961214, "answer_id": 48852307, "question_id": 48672941, "link": "https://stackoverflow.com/questions/48672941/arm-v-8-with-scalable-vector-extension-sve/48852307#48852307", "title": "ARM V-8 with Scalable Vector Extension (SVE)", "body": "<p>The Scalable Vector Extension is a module for the aarch64 execution state that extends the A64 Instruction Set and is focused on High-Performance Computing and not on media, for that you have NEON.</p>\n\n<p>The registers width will be decided by the Hardware designer/manufacturer depending on what that implementation is trying to solve/do. The possible vector length are: 128 256 384 512 640 768 896 1024 1152 1280 1408 1536 1664 1792 1920 2048.</p>\n\n<p>From the programmers' point of view, the programming model is Vector Length Agnostic, meaning that the same application will work on implementations with different registers width (Vector lengths).</p>\n\n<p>The specification is out, however, there is no hardware available with SVE implemented. For the time being, you can use the ARM Instruction Emulator (<a href=\"https://developer.arm.com/products/software-development-tools/hpc/arm-instruction-emulator/getting-started\" rel=\"nofollow noreferrer\">armie</a>) to run your programs.</p>\n\n<p>So answering your question, unless you are manufacturing hardware, you need not select any specific vector length, as that would vary from one implementation to another.\nNow if you are testing using armie, then you can select whichever your want.</p>\n"}, {"tags": [], "owner": {"reputation": 2565, "user_id": 9160762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/70rjI.gif?s=128&g=1", "display_name": "Ciro Santilli", "link": "https://stackoverflow.com/users/9160762/ciro-santilli"}, "is_accepted": false, "score": 1, "last_activity_date": 1540277876, "last_edit_date": 1540277876, "creation_date": 1540223012, "answer_id": 52933101, "question_id": 48672941, "link": "https://stackoverflow.com/questions/48672941/arm-v-8-with-scalable-vector-extension-sve/52933101#52933101", "title": "ARM V-8 with Scalable Vector Extension (SVE)", "body": "<p>SVE essentially implicitly increments loop indices for you based on the hardware defined vector width, so you don't have to worry about it.</p>\n\n<p>Check out the worked out <code>Daxpy</code> example at: <a href=\"https://www.rico.cat/files/ICS18-gem5-sve-tutorial.pdf\" rel=\"nofollow noreferrer\">https://www.rico.cat/files/ICS18-gem5-sve-tutorial.pdf</a> to understand what that means in more detail, and this <a href=\"https://github.com/cirosantilli/arm-assembly-cheat/blob/99182b42762a86e0f1ad70f81413ff23726f31fd/v8/sve.S\" rel=\"nofollow noreferrer\">minimal runnable example with an assertion</a>.</p>\n"}], "owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 1, "accepted_answer_id": 48852307, "answer_count": 2, "score": 3, "last_activity_date": 1540306302, "creation_date": 1518036328, "last_edit_date": 1540306302, "question_id": 48672941, "link": "https://stackoverflow.com/questions/48672941/arm-v-8-with-scalable-vector-extension-sve", "title": "ARM V-8 with Scalable Vector Extension (SVE)", "body": "<p>I come across this point that ARMv8 is now supporting variable length vector register from <strong><code>128 bits to 2048 bits</code></strong> (<code>scalable vector extension SVE</code>).\nIt is always good to have bigger width of register to achieve the data level parallelism. But on what basis we need to select the size of register from 128 bits to 2048 bits for achieving maximum performance?</p>\n\n<p>For example I want to do Sobel filtering with 3x3 mask on 1920 X 1080 Y image. What register width do I need to select?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1518036100, "post_id": 48672845, "comment_id": 84344053, "body": "why not use <code>std::string</code>?"}, {"owner": {"reputation": 23, "user_id": 9329631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/242b394a50ed26ffd3f210f5ca746ab3?s=128&d=identicon&r=PG&f=1", "display_name": "dk15", "link": "https://stackoverflow.com/users/9329631/dk15"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1518036148, "post_id": 48672845, "comment_id": 84344080, "body": "@EdHeal It&#39;s an assignment, so c-strings are required :("}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518036238, "post_id": 48672845, "comment_id": 84344120, "body": "<code>texting</code> only gets access to its own <code>word</code>. Otherwise you could write <code>struct Break_protected : word { void do_bad_things(word *w); };</code> to render <code>protected</code> completely useless."}, {"owner": {"reputation": 23, "user_id": 9329631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/242b394a50ed26ffd3f210f5ca746ab3?s=128&d=identicon&r=PG&f=1", "display_name": "dk15", "link": "https://stackoverflow.com/users/9329631/dk15"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518036339, "post_id": 48672845, "comment_id": 84344163, "body": "@Slava would I then have to use down casting to make the word pointer into a texting pointer? The next pointer is guaranteed to be pointing to a texting object"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518036519, "post_id": 48672845, "comment_id": 84344254, "body": "It is simpler to make <code>texting</code> a friend of <code>word</code> and I am not sure why it needs to inherit, just to get access? That is a wrong reason then."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1518036755, "post_id": 48672845, "comment_id": 84344358, "body": "<code>checkPhrase</code> seems to be confused as to which <code>word</code> it&#39;s operating on.  As it&#39;s written, every recursive call will be comparing against the same text.  It should probably either operate on <code>this</code> and not take its <code>curr</code> argument, or be static and operate only on its <code>curr</code> argument."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518037254, "post_id": 48672845, "comment_id": 84344649, "body": "@nwp actually, if you static_cast <code>word *</code> to <code>Break_protected *</code> it would render it useless. Though it is UB I doubt it will break anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518036893, "post_id": 48673040, "comment_id": 84344439, "body": "&quot; the checkPhrase method can access its own members from the base class, but not the members of another object, even if this object is from the same class.&quot; actually is this really true?"}, {"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518037010, "post_id": 48673040, "comment_id": 84344504, "body": "@Slava if they are private definitely not. I have edited the answer."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518037079, "post_id": 48673040, "comment_id": 84344538, "body": "I mean protected members from another object of the same class, they are actually accessible."}], "tags": [], "owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "is_accepted": true, "score": 0, "last_activity_date": 1518038453, "last_edit_date": 1518038453, "creation_date": 1518036781, "answer_id": 48673040, "question_id": 48672845, "link": "https://stackoverflow.com/questions/48672845/c-inheritance-accessing-protected-data-members/48673040#48673040", "title": "C++ inheritance accessing protected data members", "body": "<blockquote>\n  <p>Can a child of a class access the data members of an object of the\n  derived class?</p>\n</blockquote>\n\n<p>Yes, but its own members, not other object members. What you are accessing is the protected member of the object passed as parameter, and this object is from the base class, not the same class that this object, i.e., the <code>checkPhrase</code> method can access its own members from the base class if they are public or protected, but not the protected or private members of another object of the base class, even if this object is from the base class of this object. </p>\n\n<p>As an example:  </p>\n\n<pre><code>word * texting::checkPhrase(char * token, word * curr)\n  {\n      // this object\n      this-&gt;next = nullptr; // this is valid\n      next = nullptr; // this too\n\n      // curr object\n      curr-&gt;next = nulltr; // we are talking about an object of a different class and the variable has protected access.\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1518037322, "creation_date": 1518037322, "answer_id": 48673175, "question_id": 48672845, "link": "https://stackoverflow.com/questions/48672845/c-inheritance-accessing-protected-data-members/48673175#48673175", "title": "C++ inheritance accessing protected data members", "body": "<p>You can't do that. You only have access to protected members of objects of your own class. This is an object of a base class, so no access.</p>\n\n<p>The simplest solution here is to add a public getter function in the <code>word</code> class:</p>\n\n<pre><code>public:\n    word* get_next() const\n    { return next; }\n</code></pre>\n\n<p>and use it:</p>\n\n<pre><code>return checkPhrase(token, curr-&gt;get_next());\n</code></pre>\n\n<p>Also, you should make your current protected members in <code>word</code> private. Protected member variables are almost never a good idea. Protected function members are fine, but protected member variables are usually not.</p>\n"}], "owner": {"reputation": 23, "user_id": 9329631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/242b394a50ed26ffd3f210f5ca746ab3?s=128&d=identicon&r=PG&f=1", "display_name": "dk15", "link": "https://stackoverflow.com/users/9329631/dk15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 48673040, "answer_count": 2, "score": 2, "last_activity_date": 1518038453, "creation_date": 1518035923, "last_edit_date": 1518036659, "question_id": 48672845, "link": "https://stackoverflow.com/questions/48672845/c-inheritance-accessing-protected-data-members", "title": "C++ inheritance accessing protected data members", "body": "<p>Can a child of a class access the data members of an object of the derived class?</p>\n\n<p>For example, I have this code.</p>\n\n<pre><code>class word\n{\nprotected:\n    char * a_word;\n    word * next;\n};\n\nclass texting : public word\n{\npublic:\n    word * checkPhrase(char * token, word * curr);\n};\n\nword * texting::checkPhrase(char * token, word * curr)\n{\n    if (curr)\n    {\n        if (strcmp(token, a_word) == 0)\n            return curr;\n        else\n            return checkPhrase(token, curr-&gt;next);\n    }\n    else\n        return NULL;\n  }\n</code></pre>\n\n<p>I expect this to be able to compile and work fine, but when I try to compile it, it tells me that <code>word * next</code> is a protected variable and I can't access it, referring to the line </p>\n\n<pre><code>return checkPhrase(token, curr-&gt;next);\n</code></pre>\n"}, {"tags": ["c++", "bitmap", "gdi+"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1518035784, "post_id": 48672748, "comment_id": 84343882, "body": "Padding would be my guess. See <code>Pixel Storage</code> on this page <a href=\"https://en.m.wikipedia.org/wiki/BMP_file_format\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/BMP_file_format</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1518035850, "post_id": 48672748, "comment_id": 84343911, "body": "You&#39;ll have to learn about <i>stride</i>, the scan lines of a bitmap must be aligned to 4.  <a href=\"https://stackoverflow.com/a/2186454/17034\">stackoverflow.com/a/2186454/17034</a>"}], "owner": {"reputation": 81, "user_id": 4392835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIUcs.jpg?s=128&g=1", "display_name": "Dipen", "link": "https://stackoverflow.com/users/4392835/dipen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518039285, "creation_date": 1518035529, "question_id": 48672748, "link": "https://stackoverflow.com/questions/48672748/why-does-the-gdiplusbitmap-create-sheared-images-for-image-widths-which-are-no", "title": "Why does the Gdiplus::Bitmap create sheared images for image widths which are not multiples of 4?", "body": "<p>I have a utility method which takes in unsigned char array as argument and converts it in to a *.png image</p>\n\n<p>Here is the method:</p>\n\n<pre><code>#define MIME_TYPE_PNG L\"image/png\"\n#define RED 253\n#define GREEN 254\n#define BLUE 255\n#define MAX_GRAY 252\n\n/// &lt;summary&gt;\n/// Helper methods for dealing with images\n/// &lt;/summary&gt;\nclass ImageUtils\n{\nprivate:\n    static int GetEncoderClsid(const WCHAR* format, CLSID* pClsid);\n    static void Internal_SaveAsPNG(BITMAPINFO *gdiBitmapInfo, void *gdiBitmapData, char* imageFilePath);\npublic:\n    static void SaveAsPNG(int displayXSize, int displayYSize, char* imageFilePath, unsigned char* imageData);\n};\n\n/// &lt;summary&gt;\n/// Writes an 8-bit PNG file at the given filePath using the imageData and imageDimensions\n/// &lt;/summary&gt;\nvoid ImageUtils::SaveAsPNG(int displayXSize, int displayYSize, char* imageFilePath, unsigned char* imageData)\n{\n    // Create the info header and add custom color table to it\n    const int COLORNUM = 256;\n    BITMAPINFOHEADER infoHeader;\n    infoHeader.biSize = sizeof(BITMAPINFOHEADER);   // bytes in structure\n    infoHeader.biWidth = displayXSize;              // width in pixels\n    infoHeader.biHeight = -displayYSize;            // negative height indicates top-down DIB(Device Independent Bitmap)\n    infoHeader.biPlanes = 1;                        // must be 1\n    infoHeader.biBitCount = 8;                      // bits per pixel\n    infoHeader.biCompression = BI_RGB;              // uncompressed RGB\n    infoHeader.biSizeImage = displayXSize * displayYSize;   // size of image in bytes\n    infoHeader.biXPelsPerMeter = 2500;              // pixels per meter X (probably exact number doesn't matter)\n    infoHeader.biYPelsPerMeter = 2500;              // pixels per meter Y (probably exact number doesn't matter)\n    infoHeader.biClrUsed = COLORNUM;                // number of color indices actually used by the bitmap\n    infoHeader.biClrImportant = 0;                  // all colors are important\n\n    BITMAPINFO *petBitmapInfo = (BITMAPINFO *)(new char[sizeof(BITMAPINFOHEADER) + (COLORNUM * sizeof(RGBQUAD))]);\n    petBitmapInfo-&gt;bmiHeader = infoHeader;\n\n    // First 253/256 colors are grays\n    for (int i = 0; i &lt; COLORNUM-3; i++)\n    {\n        petBitmapInfo-&gt;bmiColors[i].rgbBlue = (BYTE)i;\n        petBitmapInfo-&gt;bmiColors[i].rgbGreen = (BYTE)i;\n        petBitmapInfo-&gt;bmiColors[i].rgbRed = (BYTE)i;\n        petBitmapInfo-&gt;bmiColors[i].rgbReserved = 0;\n    }\n\n    // Last three colors are pure red, green and blue respectively\n    petBitmapInfo-&gt;bmiColors[RED].rgbRed = 255;\n    petBitmapInfo-&gt;bmiColors[RED].rgbGreen = 0;\n    petBitmapInfo-&gt;bmiColors[RED].rgbBlue = 0;\n    petBitmapInfo-&gt;bmiColors[RED].rgbReserved = 0;\n\n    petBitmapInfo-&gt;bmiColors[GREEN].rgbRed = 0;\n    petBitmapInfo-&gt;bmiColors[GREEN].rgbGreen = 255;\n    petBitmapInfo-&gt;bmiColors[GREEN].rgbBlue = 0;\n    petBitmapInfo-&gt;bmiColors[GREEN].rgbReserved = 0;\n\n    petBitmapInfo-&gt;bmiColors[BLUE].rgbRed = 0;\n    petBitmapInfo-&gt;bmiColors[BLUE].rgbGreen = 0;\n    petBitmapInfo-&gt;bmiColors[BLUE].rgbBlue = 255;\n    petBitmapInfo-&gt;bmiColors[BLUE].rgbReserved = 0;\n\n    Internal_SaveAsPNG(petBitmapInfo, imageData, imageFilePath);\n}\n\n/// &lt;summary&gt;\n/// Combines the BITMAPINFO and bitMapData into an image and saves it as PNG at the given location\n/// &lt;/summary&gt;\nvoid ImageUtils::Internal_SaveAsPNG(BITMAPINFO *gdiBitmapInfo, void *gdiBitmapData, char* imageFilePath)\n{\n    // Initialize GDI+.\n    Gdiplus::GdiplusStartupInput gdiplusStartupInput;\n    ULONG_PTR gdiplusToken;\n    Gdiplus::GdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);\n\n    // Get the CLSID of the PNG encoder.\n    CLSID encoderClsid;\n    int clsidResult = GetEncoderClsid(L\"image/png\", &amp;encoderClsid);\n\n    // Convert filepath to wide char\n    size_t filePathSize = strlen(imageFilePath) + 1;\n    wchar_t * imageFilePath_w = new wchar_t[filePathSize];\n    size_t numCharsConverted = 0;\n    mbstowcs_s(&amp;numCharsConverted, imageFilePath_w, filePathSize, imageFilePath, _TRUNCATE);\n\n    // Create a bitmap object from the given header and image data, and save it as png (Bitmap class handles the compression internally)\n    Gdiplus::Bitmap* image = new Gdiplus::Bitmap(gdiBitmapInfo, gdiBitmapData);\n    Gdiplus::Status stat = image-&gt;Save(imageFilePath_w, &amp;encoderClsid, NULL);\n\n    delete image;\n    Gdiplus::GdiplusShutdown(gdiplusToken);\n\n    if (stat != Gdiplus::Ok)\n    {\n        string message = \"Unable to save \";\n        message.append(imageFilePath);\n\n        throw new exception(message.c_str());\n    }\n}\n\n/// &lt;summary&gt;\n/// Queries all the available image encoders and sets pClsid to the CLSID of the requested encoder\n/// &lt;/summary&gt;\nint ImageUtils::GetEncoderClsid(const WCHAR* format, CLSID* pClsid)\n{\n    UINT  numEncoders = 0;\n    UINT  sizeImageEncoder = 0;\n\n    // How many codecs are available and what's the total size?\n    Gdiplus::GetImageEncodersSize(&amp;numEncoders, &amp;sizeImageEncoder);\n\n    // Fail if no encoders are found\n    if (sizeImageEncoder == 0)\n        return -1;\n\n    // Information of all available codecs\n    Gdiplus::ImageCodecInfo* codecInfo = (Gdiplus::ImageCodecInfo*)(malloc(sizeImageEncoder));\n    if (codecInfo == NULL)\n        return -1;\n\n    Gdiplus::GetImageEncoders(numEncoders, sizeImageEncoder, codecInfo);\n\n    // Find out the CLSID of the requested encoder\n    for (UINT j = 0; j &lt; numEncoders; ++j)\n    {\n        if (wcscmp(codecInfo[j].MimeType, format) == 0)\n        {\n            *pClsid = codecInfo[j].Clsid;\n            free(codecInfo);\n            return j;\n        }\n    }\n\n    free(codecInfo);\n    return -1;\n}\n</code></pre>\n\n<p>Problem is that images which should look like this:\n<a href=\"https://i.stack.imgur.com/VzybG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VzybG.png\" alt=\"Original\"></a></p>\n\n<p>.. end up looking like this:\n<a href=\"https://i.stack.imgur.com/VPQ0Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VPQ0Q.png\" alt=\"Sheared\"></a></p>\n\n<p>After some trial and error, I found out that any image with a width which is a </p>\n\n<blockquote>\n  <p>multiple of 4</p>\n</blockquote>\n\n<p>will render correctly, whereas all others will be sheared, as is the case in the example above where the width is 50.</p>\n\n<p>Can anyone shed light on this behavior and how to resolve it?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1518034957, "post_id": 48672594, "comment_id": 84343430, "body": "Post real, compilable code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1518035398, "post_id": 48672594, "comment_id": 84343680, "body": "What has the address of the vector to to with the address of the contained data? You assign a vector to a vector. What do you think happens?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518035512, "post_id": 48672721, "comment_id": 84343742, "body": "And the reason the addresses alternate is that after the old vector is destructed, its memory becomes available, and by coincidence the next vector uses that memory."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518035771, "post_id": 48672721, "comment_id": 84343876, "body": "@Barmar good point. I&#39;ve added that to the answer with my own wording."}, {"owner": {"reputation": 303, "user_id": 9329592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TiRxKNiMBQc/AAAAAAAAAAI/AAAAAAAAAEg/T1Y8kwlG-qA/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/9329592/rob"}, "edited": false, "score": 0, "creation_date": 1518039687, "post_id": 48672721, "comment_id": 84345874, "body": "Would changing foo to const vector&lt;double&gt;foo(); force a copy assignment, hence preserving the address of the elements of x?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 303, "user_id": 9329592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TiRxKNiMBQc/AAAAAAAAAAI/AAAAAAAAAEg/T1Y8kwlG-qA/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/9329592/rob"}, "edited": false, "score": 0, "creation_date": 1518042995, "post_id": 48672721, "comment_id": 84347375, "body": "@Rob Yes, it would force copy assignment. Whether the address of the elements of x are preserved, depends on what <code>foo</code> returns. Is the vector greater than capacity of <code>x</code>? Are the allocator instances equivalent (they are if you use the default one for both)? In those cases the addresses cannot be preserved. Otherwise, the behaviour seems to be unspecified by the standard: <a href=\"https://stackoverflow.com/questions/24260717/does-a-vector-assignment-invalidate-the-reserve\" title=\"does a vector assignment invalidate the reserve\">stackoverflow.com/questions/24260717/&hellip;</a>"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1518035734, "last_edit_date": 1518035734, "creation_date": 1518035416, "answer_id": 48672721, "question_id": 48672594, "link": "https://stackoverflow.com/questions/48672594/c-return-vector-at-address-changes/48672721#48672721", "title": "C++ return vector.at() address changes", "body": "<p>The <code>foo</code> function returns a new vector. Since the result is an r-value, it will be move-assigned to <code>x</code>. Since each new vector had their distinct buffers, so too will the buffers of <code>x</code> be distinct after each move assignment.</p>\n\n<p>A buffer cannot share its address with another existing buffer, and both the returned r-value and <code>x</code> have overlapping lifetimes, so the buffer address has to change. But a distinct buffer can have an address of a previously destroyed buffer which is why the repetition that you observed is possible.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 0, "last_activity_date": 1518037824, "last_edit_date": 1518037824, "creation_date": 1518035535, "answer_id": 48672751, "question_id": 48672594, "link": "https://stackoverflow.com/questions/48672594/c-return-vector-at-address-changes/48672751#48672751", "title": "C++ return vector.at() address changes", "body": "<p><code>x=foo()</code> is assigning a <code>std::vector&lt;double&gt;</code> to <code>x</code>. According to <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">this documentation</a>, <code>operator=</code> always invalidates pointers, references and iterators to it's elements. It's expected that the address of the elements will change. That these addresses \"ping-pong\" is just the behavior you happened to observe. It's not something that can be relied on.</p>\n\n<p>Consider what assigning to a <code>std::vector</code> means in this case. The move assignment operator will replace the underlying data of <code>x</code> with the underlying data of the <code>std::vector</code> being returned by <code>foo()</code>. The new array couldn't have had the same address as the one that it's replacing.</p>\n"}], "owner": {"reputation": 303, "user_id": 9329592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TiRxKNiMBQc/AAAAAAAAAAI/AAAAAAAAAEg/T1Y8kwlG-qA/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/9329592/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1518037824, "creation_date": 1518034885, "last_edit_date": 1518036812, "question_id": 48672594, "link": "https://stackoverflow.com/questions/48672594/c-return-vector-at-address-changes", "title": "C++ return vector.at() address changes", "body": "<p>Why does the address of the element ping-pong?</p>\n\n<p>I have something like this:</p>\n\n<pre><code>std::vector&lt;double&gt; foo(...);\n\nint main(){\n    std::vector&lt;double&gt; x;\n    x.assign(1,0.0);\n    x = foo(...);\n    print &amp;x.at(0); // 0x607210\n\n    x = foo(...);\n    print &amp;x.at(0); // 0x607240\n\n    x = foo(...);\n    print &amp;x.at(0); // 0x607210\n}\n</code></pre>\n\n<p>Why does the address of the element ping-pong? The base address of <code>x</code> remains the same, and the value <code>x.at(0)</code> is always correct. There's a subtlety here that I do not understand.</p>\n"}, {"tags": ["c#", "c++", "native", "long-integer", "ulong"], "comments": [{"owner": {"reputation": 8940, "user_id": 3346583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1c10fae65fb338a8d62f4ba464a6db?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/3346583/christopher"}, "edited": false, "score": 1, "creation_date": 1518034861, "post_id": 48672565, "comment_id": 84343384, "body": "You <b>want</b> an overflow error? Because that is what the C++ example is, a error. The .NEt Long is a 64 bit signed integer. So the maximum is 9,223,372,036,854,775,807 (<a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/long\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/csharp/language-reference/&hellip;</a>&zwnj;&#8203;) As opposed to native C++ Long is only 32 bit"}], "answers": [{"comments": [{"owner": {"reputation": 8940, "user_id": 3346583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1c10fae65fb338a8d62f4ba464a6db?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/3346583/christopher"}, "edited": false, "score": 1, "creation_date": 1518035061, "post_id": 48672618, "comment_id": 84343494, "body": "Maybe we should be using the int[binarity] here, rather then the type alias &quot;int&quot; and &quot;ulong&quot;? The width of the type in memory seems to be a important feature. For whatever wierd reason."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 8940, "user_id": 3346583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1c10fae65fb338a8d62f4ba464a6db?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/3346583/christopher"}, "edited": false, "score": 0, "creation_date": 1518035163, "post_id": 48672618, "comment_id": 84343556, "body": "@Christopher You are right, showing the proper size is more descriptive. Thank you!"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 8, "last_activity_date": 1518035135, "last_edit_date": 1518035135, "creation_date": 1518034982, "answer_id": 48672618, "question_id": 48672565, "link": "https://stackoverflow.com/questions/48672565/c-date-types-convertion-same-as-c/48672618#48672618", "title": "C# date types convertion same as c++", "body": "<p>C++'s <code>long</code> is often a 32-bit data type. It looks like in your system it does not have enough bits to represent <code>3633091313</code>, so the result is negative. This behavior is undefined in C++ (<a href=\"https://stackoverflow.com/a/16188846/335858\">relevant Q&amp;A</a>).</p>\n\n<p>In C# that corresponds to converting to <code>int</code>:</p>\n\n<pre><code>UInt64 ul = 3633091313UL;\nInt32 l = (int)ul;\nConsole.WriteLine(l); // prints -661875983\n</code></pre>\n\n<p><a href=\"https://ideone.com/kdjiBO\" rel=\"noreferrer\">Demo.</a></p>\n"}], "owner": {"reputation": 389, "user_id": 2758359, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d76bb18b109dfe5484c38fa23b7aca5f?s=128&d=identicon&r=PG&f=1", "display_name": "Teamol", "link": "https://stackoverflow.com/users/2758359/teamol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 48672618, "answer_count": 1, "score": 4, "last_activity_date": 1518035135, "creation_date": 1518034789, "question_id": 48672565, "link": "https://stackoverflow.com/questions/48672565/c-date-types-convertion-same-as-c", "title": "C# date types convertion same as c++", "body": "<p>How do I convert ulong to long with same result as I get in c++.</p>\n\n<p><strong>C++</strong></p>\n\n<pre><code>unsigned long ul = 3633091313;\nlong l = (long)ul;\nl is -661875983\n</code></pre>\n\n<p><strong>C#</strong></p>\n\n<pre><code>ulong ul = 3633091313;\nlong l = (long)ul;\nl is 3633091313\n</code></pre>\n"}, {"tags": ["c++", "arrays", "function", "struct"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1518034260, "post_id": 48672425, "comment_id": 84343062, "body": "What are the errors?  Have you stepped through your program with a debugger?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518034376, "post_id": 48672425, "comment_id": 84343130, "body": "Why are you reassigning <code>accounts[index]</code> in the second loop? Where do the <code>AccountNumber</code>, <code>Balance</code>, <code>DaysSinceDebited</code> arrays come from?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518034456, "post_id": 48672425, "comment_id": 84343185, "body": "There&#39;s no declaration of <code>CalcInterest()</code>."}, {"owner": {"reputation": 21, "user_id": 8920867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159599980290646/picture?type=large", "display_name": "Laura Violet", "link": "https://stackoverflow.com/users/8920867/laura-violet"}, "edited": false, "score": 0, "creation_date": 1518034463, "post_id": 48672425, "comment_id": 84343198, "body": "from the struct Accounts.  I&#39;m really new to this and struggling a bit."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518034514, "post_id": 48672425, "comment_id": 84343223, "body": "You can&#39;t use structure members as ordinary variables. <code>AccountNumber[index]</code> is not the same as <code>accounts[index].AccountNumber</code>."}, {"owner": {"reputation": 21, "user_id": 8920867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159599980290646/picture?type=large", "display_name": "Laura Violet", "link": "https://stackoverflow.com/users/8920867/laura-violet"}, "edited": false, "score": 0, "creation_date": 1518034538, "post_id": 48672425, "comment_id": 84343233, "body": "I just need it to show the account that generated the highest amount of interest"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 21, "user_id": 8920867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159599980290646/picture?type=large", "display_name": "Laura Violet", "link": "https://stackoverflow.com/users/8920867/laura-violet"}, "edited": false, "score": 0, "creation_date": 1518035233, "post_id": 48672527, "comment_id": 84343583, "body": "You have a typo in the last <code>cout</code> line, you wrote <code>accountNumber</code> instead of <code>AccountNumber</code>. Didn&#39;t you get an error message pointing that out?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 21, "user_id": 8920867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159599980290646/picture?type=large", "display_name": "Laura Violet", "link": "https://stackoverflow.com/users/8920867/laura-violet"}, "edited": false, "score": 0, "creation_date": 1518035275, "post_id": 48672527, "comment_id": 84343620, "body": "Once I fixed that it compiled without errors and works."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1518035183, "last_edit_date": 1518035183, "creation_date": 1518034648, "answer_id": 48672527, "question_id": 48672425, "link": "https://stackoverflow.com/questions/48672425/how-can-i-get-the-highest-value-generated-from-within-a-function-using-struct-c/48672527#48672527", "title": "How can I get the highest value generated from within a function using struct C++", "body": "<p>Get rid of these lines:</p>\n\n<pre><code>    accounts[index] = { AccountNumber[index], Balance[index], DaysSinceDebited[index] };\n    double increment = CalcInterest(accounts[index]);\n</code></pre>\n\n<p>You already filled in <code>accounts[index]</code> when you initialized it at the beginning of <code>main()</code>. There are no arrays named <code>AccountNumber</code>, <code>Balance</code>, or <code>DaysSinceDebited</code>, those are only members of the <code>Account</code> struct. </p>\n\n<p>And there's no function <code>CalcInterest()</code>, the interest is already in the structures.  So you can change that second line to simply:</p>\n\n<pre><code>double increment = accounts[index].Interest;\n</code></pre>\n\n<p>You also have a typo: <code>accounts[highestInterestAccountIndex].accountNumber</code> in the last <code>cout</code> line should be <code>accounts[highestInterestAccountIndex].AccountNumber</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 8920867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159599980290646/picture?type=large", "display_name": "Laura Violet", "link": "https://stackoverflow.com/users/8920867/laura-violet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48672527, "answer_count": 1, "score": 0, "last_activity_date": 1518035183, "creation_date": 1518034152, "question_id": 48672425, "link": "https://stackoverflow.com/questions/48672425/how-can-i-get-the-highest-value-generated-from-within-a-function-using-struct-c", "title": "How can I get the highest value generated from within a function using struct C++", "body": "<p>So I'm trying to display the account with the highest generated interest but for some reason it isn't working? Any help is much appreciated.  The errors I'm getting are to do with the if statement at the bottom.</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nconst int MAXACCOUNTS = 8;\n\nstruct Account\n{\n    int AccountNumber;\n    double Balance;\n    int DaysSinceDebited;\n    double Interest;\n};\n\nint main()\n\n{\n    double highestInterest = 0;\n    int highestInterestAccountIndex;\n\n    Account accounts[MAXACCOUNTS] = { {1001,4254,40,20},{7940,27006.25,35},{4382,123.50,2},{2651,85326.92,14},{3020,657.0,5},{7168,7423.34,360},{6245,4.99,1},{9342,107864.44,45} };\n\n    for (int index = 0; index &lt; MAXACCOUNTS; index++)\n    {\n        if (accounts[index].Balance &gt; 10000 || accounts[index].DaysSinceDebited &gt; 30)\n        {\n            accounts[index].Interest = accounts[index].Balance * 0.06;\n        }\n        else\n        {\n            accounts[index].Interest = accounts[index].Balance * 0.03;\n        }\n\n        cout &lt;&lt; \"Account number: \" &lt;&lt; accounts[index].AccountNumber &lt;&lt; \" Balance: \" &lt;&lt; accounts[index].Balance &lt;&lt; \" Interest Paid: \" &lt;&lt; accounts[index].Interest &lt;&lt; endl;\n\n    }\n\n    for (unsigned int index = 0; index &lt; MAXACCOUNTS; index++)\n    {\n        accounts[index] = { AccountNumber[index], Balance[index], DaysSinceDebited[index] };\n\n        double increment = CalcInterest(accounts[index]);\n\n        if (increment &gt;= highestInterest)\n        {\n            highestInterest = increment;\n            highestInterestAccountIndex = index;\n        }\n    }\n\n    std::cout &lt;&lt; \"The account that generated the greatest interest was account \" &lt;&lt; accounts[highestInterestAccountIndex].accountNumber &lt;&lt; \" With a total interest of \" &lt;&lt; highestInterest;\n\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I have to do it in this format as well, using the struct but I cant figure out where I'm going wrong.</p>\n"}, {"tags": ["c++", "sdl", "smart-pointers", "sdl-2", "unique-ptr"], "comments": [{"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518034960, "post_id": 48672399, "comment_id": 84343432, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29424877/couple-of-questions-about-sdl-window-and-unique-ptr\">Couple of questions about SDL_Window and unique_ptr</a>"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518035217, "post_id": 48672399, "comment_id": 84343576, "body": "@lcs Edited question"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1518035448, "post_id": 48672399, "comment_id": 84343705, "body": "<code>struct SDLWindowDestroyer { void operator()(SDL_Window* w) { SDL_DestroyWindow(w); } }; using SDLWindowPtr = std::unique_ptr&lt;SDLWindow, SDLWindowDestroyer&gt;;</code>"}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518035516, "post_id": 48672399, "comment_id": 84343744, "body": "@user3728501 The answer to that question has the syntax in it."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518035646, "post_id": 48672399, "comment_id": 84343809, "body": "@lcs They use a different syntax using structs. In which case my question becomes &quot;what&#39;s wrong with my attempt&quot;."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1518035788, "post_id": 48672399, "comment_id": 84343884, "body": "@lcs ie; see the screenshot which I attached at the bottom of the question - there&#39;s a comment in the linked reference which isn&#39;t obvious"}], "answers": [{"comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 2, "creation_date": 1518036013, "post_id": 48672483, "comment_id": 84344002, "body": "Which also means you don&#39;t use <code>make_unique</code> in this case."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1518034442, "creation_date": 1518034442, "answer_id": 48672483, "question_id": 48672399, "link": "https://stackoverflow.com/questions/48672399/is-it-possible-to-use-sdl2-with-smart-pointers/48672483#48672483", "title": "Is it possible to use SDL2 with smart pointers?", "body": "<p>Those structures are <a href=\"https://en.wikipedia.org/wiki/Opaque_data_type\" rel=\"nofollow noreferrer\"><em>opaque data structures</em></a>, you don't have the full definition of them. That means, among other things, that the default <code>std::unique_ptr</code> deleter don't know how to \"delete\" the structures.</p>\n\n<p>You need to provide your own custom deleter. For <code>SDL_Window</code> it's the <a href=\"https://wiki.libsdl.org/SDL_DestroyWindow\" rel=\"nofollow noreferrer\"><code>SDL_DestroyWindow</code></a> function.</p>\n"}, {"tags": [], "owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "is_accepted": false, "score": 0, "last_activity_date": 1518034467, "creation_date": 1518034467, "answer_id": 48672492, "question_id": 48672399, "link": "https://stackoverflow.com/questions/48672399/is-it-possible-to-use-sdl2-with-smart-pointers/48672492#48672492", "title": "Is it possible to use SDL2 with smart pointers?", "body": "<p>A SDL Windows is destroyed using SDL_DestroyWindow, not plain delete, like the unique_ptr's default deleter does. You need to supply a custom deleter to unique_ptr, which will call SDL_DestroyWindow.</p>\n"}, {"comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1518038514, "post_id": 48673341, "comment_id": 84345304, "body": "A custom deleter is what you want, but note that your code can be improved further: <a href=\"http://coliru.stacked-crooked.com/a/adc9e7f6bf45e0ca\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/adc9e7f6bf45e0ca</a>"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1518038585, "post_id": 48673341, "comment_id": 84345341, "body": "@milleniumbug How? That doesn&#39;t look like an improvement to me"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1518038647, "post_id": 48673341, "comment_id": 84345367, "body": "Refer to the link. Using a stateless function object reduces the size of the smart pointer, and you don&#39;t need to pass in the function to the constructor of <code>std::unique_ptr</code>"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518038984, "post_id": 48673341, "comment_id": 84345552, "body": "Note that you don&#39;t need the constructor initializer. You can inline-initialize <code>_window_</code> directly: <code>std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; _window_{nullptr, SDL_DestroyWindow};</code>"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1518039672, "post_id": 48673341, "comment_id": 84345865, "body": "@milleniumbug Apologies. I missed the point here (size reduction.)"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518039774, "post_id": 48673341, "comment_id": 84345908, "body": "@NikosC. No I can&#39;t due to the nature of how SDL works - if the same class calls <code>SDL_Init</code> then this won&#39;t work."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518039930, "post_id": 48673341, "comment_id": 84345956, "body": "You&#39;re initializing to <code>nullptr</code>, so it will be fine. (Btw, I&#39;m only refering to the member initializer list, not the <code>.reset()</code> call in the ctor body. That stays as-is, obviously.)"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518040071, "post_id": 48673341, "comment_id": 84346023, "body": "Oh, btw, in case it wasn&#39;t obvious, this is simply based on the fact that <code>unique_ptr</code> will not actually call the deleter if the managed pointer is null."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1518040297, "post_id": 48673341, "comment_id": 84346145, "body": "@NikosC. Oh, right I&#39;ve just realized what you mean - thanks"}], "tags": [], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "is_accepted": true, "score": 9, "last_activity_date": 1518038425, "last_edit_date": 1518038425, "creation_date": 1518037998, "answer_id": 48673341, "question_id": 48672399, "link": "https://stackoverflow.com/questions/48672399/is-it-possible-to-use-sdl2-with-smart-pointers/48673341#48673341", "title": "Is it possible to use SDL2 with smart pointers?", "body": "<h1>Solution</h1>\n\n<p>Finally figured out the answer with a lot of trial and error, so will explain the solution here.</p>\n\n<p>This is the correct syntax:</p>\n\n<pre><code>// first define the unique_ptr as member of class\nstd::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; _window_;\n\n// second, initialize in the member initialization list of class constructor\n// probably don't need to do this if not embedding as member of class\nclass_name()\n    : _window_(nullptr, SDL_DestroyWindow)\n{\n    // blaa blaa SDL code etc\n    _window_.reset(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, WIDTH, HEIGHT, SDL_WINDOW_SHOWN));\n}\n\n// finally we need to be able to delete\n// but this is handled automatically\n</code></pre>\n\n<h1>Explanation</h1>\n\n<p>When we add the unique_ptr as a data member, we need to give both the type <code>SDL_Window</code> and the \"deleter function format / syntax\", becuase an ordinary <code>delete</code> call is not correct. We use <code>decltype</code> to automatically construct the correct deleter format from the deleter function. (Perhaps not the most accurate explanation.) In a way, <code>decltype</code> is somewhat like auto...</p>\n\n<pre><code>std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; _window_;\n</code></pre>\n\n<p>This object must be initialized. We do this in the constructor. We set the pointer to <code>nullptr</code> (because we do not want to initialize it before initializing SDL2) and we also set the deleter function.</p>\n\n<pre><code>: _window_(nullptr, SDL_DestroyWindow)\n</code></pre>\n\n<p>After initializing SDL, we then want to create a window. This is done most easily by calling the smart pointer <code>reset()</code> function. We pass it a new pointer returned by the function which creates the window.</p>\n\n<pre><code>_window_.reset(SDL_CreateWindow(...));\n</code></pre>\n\n<p>Done. Took a long time to figure out but makes sense now. References</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/memory/unique_ptr</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/22915631/why-does-my-unique-ptr-think-is-has-a-null-function-pointer-deleter\">Why does my unique_ptr think is has a null function pointer deleter?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/28853309/whats-wrong-with-this-initialization-of-unique-ptr\">What&#39;s wrong with this initialization of unique_ptr?</a></p>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2210, "favorite_count": 2, "accepted_answer_id": 48673341, "answer_count": 3, "score": 4, "last_activity_date": 1518038561, "creation_date": 1518034047, "last_edit_date": 1518038561, "question_id": 48672399, "link": "https://stackoverflow.com/questions/48672399/is-it-possible-to-use-sdl2-with-smart-pointers", "title": "Is it possible to use SDL2 with smart pointers?", "body": "<p>I have this line of code</p>\n\n<pre><code>//std::unique_ptr&lt;SDL_Window&gt; _window_; // this is somewhere else...\n_window_ = std::make_unique&lt;SDL_Window&gt;(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, _WIDTH_, _HEIGHT_, SDL_WINDOW_SHOWN));\n</code></pre>\n\n<p>it produces the following compiler error</p>\n\n<pre><code>In file included from /usr/include/c++/6/memory:81:0,\n                 from /home/user/prj/src/main.cpp:4:\n/usr/include/c++/6/bits/unique_ptr.h: In instantiation of \u2018typename \nstd::_MakeUniq&lt;_Tp&gt;::__single_object std::make_unique(_Args&amp;&amp; ...) [with _Tp = SDL_Window; _Args = {SDL_Window*}; typename \nstd::_MakeUniq&lt;_Tp&gt;::__single_object = std::unique_ptr&lt;SDL_Window&gt;]\u2019:\n/home/user/prj/src/main.cpp:36:170:   required from here\n/usr/include/c++/6/bits/unique_ptr.h:791:30: error: invalid use of incomplete type \u2018struct SDL_Window\u2019\n     { return unique_ptr&lt;_Tp&gt;(new _Tp(std::forward&lt;_Args&gt;(__args)...)); }\n</code></pre>\n\n<p>why? (It works fine without smart pointers, so my guess is I didn't understand the syntax and this is trivial to fix. Will add source and <code>CMakeLists.txt</code> below.)</p>\n\n<p><strong>CMakeLists.txt</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(prj)\n\nfind_package(SDL2 REQUIRED)\ninclude_directories(prj ${SDL2_INCLUDE_DIRS})\n\nadd_executable(prj main.cpp)\ntarget_link_libraries(prj ${SDL2_LIBRARIES})\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"SDL.h\"\n#include &lt;memory&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdint&gt;\n\nclass Window\n{\n\n    public:\n\n    Window()\n        : _window_{nullptr}\n        , _surface_{nullptr}\n    {\n        if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n        {\n            std::cerr &lt;&lt; SDL_GetError() &lt;&lt; std::endl;\n        }\n        else\n        {\n            _window_ = std::make_unique&lt;SDL_Window&gt;(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, _WIDTH_, _HEIGHT_, SDL_WINDOW_SHOWN));\n\n            if(_window_ == nullptr)\n            {\n                std::cerr &lt;&lt; SDL_GetError() &lt;&lt; std::endl;\n            }\n            else\n            {\n                _surface_ = std::make_unique&lt;SDL_Surface&gt;(SDL_GetWindowSurface(_window_.get()));\n                SDL_FillRect(_surface_.get(), nullptr, SDL_MapRGB(_surface_-&gt;format, 0xFF, 0xFF, 0xFF));\n                SDL_UpdateWindowSurface(_window_.get());\n                SDL_Delay(1000);\n            }\n        }\n    }\n\n    ~Window()\n    {\n        SDL_DestroyWindow(_window_.get());\n        SDL_Quit();\n    }\n\n    private:\n\n    const int32_t _WIDTH_{600};\n    const int32_t _HEIGHT_{400};\n\n    std::unique_ptr&lt;SDL_Window&gt; _window_;\n    std::unique_ptr&lt;SDL_Surface&gt; _surface_;\n\n};\n\n\nint main(int argc, char* argv[])\n{\n    Window window;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1518033896, "post_id": 48672345, "comment_id": 84342878, "body": "<code>bool solve(string proposed_solution)</code> isn&#39;t a member function."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518033977, "post_id": 48672345, "comment_id": 84342922, "body": "You may want to use a header file naming convention to differentiate C header files from C++ header files."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1518034042, "post_id": 48672345, "comment_id": 84342949, "body": "Looks like you forgot <code>puzzle::</code> before the definitions of <code>solve</code> and <code>to_string</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518034070, "post_id": 48672345, "comment_id": 84342964, "body": "Your <code>to_string</code> function is constant.  Git rid of it.  Replace all calls by <code>&quot;&quot;</code>.  The <code>len</code> variable is not used."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1518034038, "creation_date": 1518034038, "answer_id": 48672397, "question_id": 48672345, "link": "https://stackoverflow.com/questions/48672345/c-i-keep-getting-was-not-declared-in-this-scope-error/48672397#48672397", "title": "C++ I keep getting &quot;was not declared in this scope error&quot;", "body": "<p>Your function <code>bool solve(string proposed_solution)</code> does not define a member function of <code>puzzle</code> but a \"plain\" function; Hence, <code>get_solution();</code> within its body is not recognized as a member of <code>puzzle</code>, too. You'll have to write <code>bool puzzle::solve(string proposed_solution) { ...</code> and it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 3, "last_activity_date": 1518034047, "creation_date": 1518034047, "answer_id": 48672398, "question_id": 48672345, "link": "https://stackoverflow.com/questions/48672345/c-i-keep-getting-was-not-declared-in-this-scope-error/48672398#48672398", "title": "C++ I keep getting &quot;was not declared in this scope error&quot;", "body": "<p>It looks like you've forgotten to make <code>solve</code> and <code>to_string</code> member functions:</p>\n\n<p>Change</p>\n\n<pre><code>string to_string(){ ...\nbool solve(string proposed_solution){ ...\n    ^^^\n</code></pre>\n\n<p>To</p>\n\n<pre><code>string puzzle::to_string(){ ...\nbool puzzle::solve(string proposed_solution){ ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 2, "last_activity_date": 1518034082, "creation_date": 1518034082, "answer_id": 48672410, "question_id": 48672345, "link": "https://stackoverflow.com/questions/48672345/c-i-keep-getting-was-not-declared-in-this-scope-error/48672410#48672410", "title": "C++ I keep getting &quot;was not declared in this scope error&quot;", "body": "<p><code>solve</code> and <code>to_string</code> are supposed to be methods, so you need to prefix them with the class' name followed by two colons (i.e., <code>puzzle::</code>):</p>\n\n<pre><code>bool puzzle::solve(string proposed_solution){\n    // Code ...\n}\n\nstring puzzle::to_string(){\n    // Code ...\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9319151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6e7467132190d1ef3d6cc30d8eb827?s=128&d=identicon&r=PG&f=1", "display_name": "R. S", "link": "https://stackoverflow.com/users/9319151/r-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 48672398, "answer_count": 3, "score": 2, "last_activity_date": 1518042760, "creation_date": 1518033812, "last_edit_date": 1518042760, "question_id": 48672345, "link": "https://stackoverflow.com/questions/48672345/c-i-keep-getting-was-not-declared-in-this-scope-error", "title": "C++ I keep getting &quot;was not declared in this scope error&quot;", "body": "<p>So, I have a header file and a class file. But when I compile <code>puzzle.cpp</code>, I keep getting <code>get_solution</code> was not declared in this scope. I don't get why that error occurs since its inside the same class so I can call any function inside the same class. Can anyone please help me on this? Thanks!</p>\n\n<p><strong>puzzle.h</strong></p>\n\n<pre><code>#ifndef PUZZLE_H\n#define PUZZLE_H\n\n#include&lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass puzzle{\nprivate:\n    std::string _solution;\n    std::vector&lt;bool&gt; _guesses;\npublic:\n    puzzle(std::string solution);\n    std::string get_solution(){return _solution;}\n    bool guess(char c);\n    bool solve(std::string proposed_solution);\n    std::string to_string();\n};\n\n#endif\n</code></pre>\n\n<p><strong>puzzle.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"puzzle.h\"\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\npuzzle::puzzle(std::string solution) {\n    _solution = solution;\n   for(int i = 0; i &lt; 256; i++)\n      _guesses.push_back(false);\n}\n\nbool puzzle::guess(char c){\n    int num = c;\n    if(c&lt;='z' || c&gt;='a')\n        if(_guesses.at(c) == false){\n          _guesses.at(c) == true;\n           return true;\n       }\n    return false;\n}\n\nbool solve(string proposed_solution){\n    string test = get_solution();\n    if(proposed_solution.compare(test) == 0)\n       return true;\n    return false;\n}\n\nstring to_string(){\n   int len = get_solution().length();\n   return \"\";\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1518033491, "post_id": 48672195, "comment_id": 84342689, "body": "You can work with anyone, with whom you feel more comfortable, your question is based on opinions and it seems that you have not done any serious research. QML is a declarative language that I believe Qt. You can use one of them or you can use both together."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518033657, "post_id": 48672195, "comment_id": 84342776, "body": "C++ and QML serve different purposes and different audiences but also interoperate quite well. So use whatever you need; one or the other or both.  Mix and match as you please."}, {"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 3, "creation_date": 1518033687, "post_id": 48672195, "comment_id": 84342788, "body": "Is existing of QML disturbing you? I&#39;ve worked in Qt for ~10 years and still don&#39;t know anything about QML. Nobody is making you to use it."}, {"owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "edited": false, "score": 0, "creation_date": 1518034738, "post_id": 48672195, "comment_id": 84343323, "body": "I may be wrong and it is a little bit out of topic but if you want a good working cooperation example between a &quot;descriptive Xml&quot; and a &quot;imperative&quot; language have a look to Xaml and C# (with data binding in mvvm methodology for example). imho I do not know any equivalent in C++ and I should say it is a pity especially when building simple(?) GUI"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1518035679, "post_id": 48672195, "comment_id": 84343831, "body": "QML allows UI interfaces to be <b>described</b> - declarative . Yes it is <i>JUST</i> a <i>Front End</i>,  mainly for <i>mobile</i> applications. QWidgets are not designed for mobile apps .. while it just works, most widgets are almost useless in mobile apps where you need flexibility of lightweight components incorporating JS/Json .. you never design a backend <i>heavy</i> application with QML, you do it with Qt c++ .. almost independently on any UI, while QtQuick is centric to qml"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1518036276, "post_id": 48672195, "comment_id": 84344134, "body": "Well, widget forms are declarative too, it is just that the language is XML-like rather than JSON-like."}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1518037701, "post_id": 48672195, "comment_id": 84344911, "body": "@dtech, true, but you never call that xml-like: a <i>code</i> as its auto created from designer, while QML (java script like) code is accessible either. my primary intention was to highlight what others didn&#39;t mention, namely: mobile apps."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1518038195, "post_id": 48672195, "comment_id": 84345140, "body": "QML also has a form generator / graphical designer. I know people who have been writing widget forms too ;) To each his own. And it is XML-like, in fact it is generic XML..."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1518083630, "post_id": 48672195, "comment_id": 84361968, "body": "@dtech rather it&#39;s looks like json + js, not xml."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1518086633, "post_id": 48672195, "comment_id": 84364150, "body": "@DmitrySazonov we are talking about widget forms, not qml."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1518101238, "post_id": 48672195, "comment_id": 84374234, "body": "@dtech yeah, it was my misunderstood. Thought that you are talking about qml :)"}], "answers": [{"tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 2, "last_activity_date": 1518035406, "creation_date": 1518035406, "answer_id": 48672718, "question_id": 48672195, "link": "https://stackoverflow.com/questions/48672195/why-do-i-need-qml-when-i-have-c-in-qt/48672718#48672718", "title": "Why do i need QML when i have C++ in Qt?", "body": "<p>Well, with C++ you can only use the old QtWidgets API GUI-wise. That's pretty much a done deal, aside from bug fixes it is no longer actively developed. All GUI stuff since Qt 5.0 relies on the QML language. </p>\n\n<p>QML is very good for rapid prototyping, and is overall much faster to develop in. It has stuff like dynamic scoping and property bindings which make certain tasks trivial, whereas implementing them in C++ is actually quite tedious, and not always possible. Bugs usually cause error messages rather than crashes and are much easier to catch than in C++, and it really helps to iron things out when you don't have to wait for recompilation on every little change. It also employs JS, where you can use the extra level of dynamism to get even more development speed up. Last but not least, it is really quick and easy to make \"cool GUI\" with it, another thing that's rather tedious to do in C++.</p>\n\n<p>Its advantages unfortunately and understandably come with shortcomings too. Performance is much lower, so it is not suitable for critical tasks, it is a memory hog, there are certain limitations due to the reliance on high level abstractions you don't have control over, although granted this sort of stuff happens when using the C++ APIs, in many cases you can extend and override some aspects of the behavior to an extent. The GUI types are less mature and there are still some things missing. Last but not least, you are cut off from most of the Qt libraries, if you want to utilize the existing C++ functionality you have to interface it manually.</p>\n\n<p>You don't have to use QML if you don't want to. Unless your boss makes you or something like that. You can definitely do more in C++, although it is harder and slower to do. The two API layers are not in competition, they are complimentary. QML is much easier to learn as well, although some of the design paradigms it enables tend to feel alien to C++ developers initially. But once you get it, it becomes a valuable tool in the skill set. I myself enjoy a 5-10x boost in productivity from using QML.</p>\n"}], "owner": {"reputation": 15, "user_id": 9183033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86fb2c1adc7e08b11521d88f764800be?s=128&d=identicon&r=PG&f=1", "display_name": "Rasuljon", "link": "https://stackoverflow.com/users/9183033/rasuljon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "closed_date": 1518039182, "answer_count": 1, "score": -2, "last_activity_date": 1518035406, "creation_date": 1518033229, "question_id": 48672195, "link": "https://stackoverflow.com/questions/48672195/why-do-i-need-qml-when-i-have-c-in-qt", "closed_reason": "Opinion-based", "title": "Why do i need QML when i have C++ in Qt?", "body": "<p>I have been working in Qt for nearly 4 - 5 month and now i found QML. First i thought that QML is front-end of your project while c++ is back-end. And if it is really so why the hack i learned QWidgets, QTreeView, QTableWidget...etc if i don`t use them in my project as QML comes here!!! I feel very \"annoyance\". What i mean that why Qt created QML as it has above widgets and C++ (the best language for me:)? In some QML books i found that it is completaly a language which has everything in c++, i mean network, class, function so on... and which one should i use when working in Qt c++ or QML?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1518033287, "post_id": 48672192, "comment_id": 84342593, "body": "Maybe figure out what single negation does first?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1518033473, "post_id": 48672192, "comment_id": 84342677, "body": "Related: <a href=\"https://stackoverflow.com/questions/9229601/what-is-in-c-code\">stackoverflow.com/questions/9229601/what-is-in-c-code</a> (I swear there was a better question like this but can&#39;t find it at the moment..)"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 7, "creation_date": 1518034008, "post_id": 48672192, "comment_id": 84342931, "body": "you are confusing <code>!</code> and <code>~</code>"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1518034188, "post_id": 48672192, "comment_id": 84343021, "body": "First <code>!</code> turns any non-zero value into <code>false</code>, second <code>!</code> makes it <code>true</code> (and vice versa)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518042462, "post_id": 48672192, "comment_id": 84347120, "body": "In C, &quot;double negation force values to become a bool&quot; is not quite correct.  <code>!</code> result is an <code>int</code>, not a <code>bool</code>, with a value of 0 or 1."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 12073, "user_id": 1447296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3556ac502bba7118253d5e4240a5a4?s=128&d=identicon&r=PG&f=1", "display_name": "adjan", "link": "https://stackoverflow.com/users/1447296/adjan"}, "edited": false, "score": 0, "creation_date": 1518033707, "post_id": 48672222, "comment_id": 84342796, "body": "@Adrian I scrapped the c#. Perhaps you can answer for that one."}, {"owner": {"reputation": 12073, "user_id": 1447296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3556ac502bba7118253d5e4240a5a4?s=128&d=identicon&r=PG&f=1", "display_name": "adjan", "link": "https://stackoverflow.com/users/1447296/adjan"}, "edited": false, "score": 0, "creation_date": 1518033813, "post_id": 48672222, "comment_id": 84342840, "body": "The question does not really apply to c# anyway. C# does not have implicit integer to bool conversion."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 12073, "user_id": 1447296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3556ac502bba7118253d5e4240a5a4?s=128&d=identicon&r=PG&f=1", "display_name": "adjan", "link": "https://stackoverflow.com/users/1447296/adjan"}, "edited": false, "score": 1, "creation_date": 1518033964, "post_id": 48672222, "comment_id": 84342916, "body": "@Adrian Saved by the retagging!"}, {"owner": {"reputation": 16696, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1590967545, "post_id": 48672222, "comment_id": 109873638, "body": "Why would you not simply do <code>(bool)x</code> or <code>(_Bool)x</code>?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16696, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1590991222, "post_id": 48672222, "comment_id": 109878097, "body": "@Ayxan: That changes the type of the expression."}, {"owner": {"reputation": 16696, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1591003284, "post_id": 48672222, "comment_id": 109882449, "body": "@Bat <code>!!x</code> does too in C++. Also, does it ever matter in C?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 7, "last_activity_date": 1518033679, "last_edit_date": 1518033679, "creation_date": 1518033297, "answer_id": 48672222, "question_id": 48672192, "link": "https://stackoverflow.com/questions/48672192/why-does-double-negation-force-values-to-become-a-bool/48672222#48672222", "title": "Why does double negation force values to become a bool?", "body": "<p>In C, <code>!x</code> is either 1 or 0, So <code>!!x</code> is a \"collapse to 0 or 1 operator\" in the sense that any non-zero number is mapped to 1, and 0 stays as it is. This <em>can</em> be useful on occasions.</p>\n\n<p>In C++, <code>!x</code> is a <code>bool</code> type, So <code>!!x</code> is a \"collapse to false or true operator\" in the sense that any non-zero number is mapped to <code>true</code>, and zero is mapped to <code>false</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518042313, "post_id": 48672242, "comment_id": 84347069, "body": "In C (as post is dual tagged - sigh), <code>!</code> result is not a <code>bool</code>, but an <code>int</code>."}, {"owner": {"reputation": 750, "user_id": 8649828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UL1aa.png?s=128&g=1", "display_name": "qjnr", "link": "https://stackoverflow.com/users/8649828/qjnr"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518104535, "post_id": 48672242, "comment_id": 84376671, "body": "Yes, in C there are no <code>bool</code>s (not like <code>true</code>/<code>false</code>) but it&#39;s an <code>int</code> value. (either <code>0</code> or <code>1</code>) but in C++ and C# it is a <code>bool</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518104900, "post_id": 48672242, "comment_id": 84376940, "body": "Disagree with &quot;in C there are no bools (not like true/false)&quot;. Since C99, C has a boolean type <code>_Bool</code> (aka <code>bool</code> via <code>&lt;stdbool.h&gt;</code>).  The C return type of <code>!</code> still remains <code>int</code>."}, {"owner": {"reputation": 750, "user_id": 8649828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UL1aa.png?s=128&g=1", "display_name": "qjnr", "link": "https://stackoverflow.com/users/8649828/qjnr"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518105294, "post_id": 48672242, "comment_id": 84377212, "body": "Sorry, didn&#39;t know that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518105381, "post_id": 48672242, "comment_id": 84377259, "body": "Posts tagged C <i>and</i> C++ unfortunately create issues like this - not your fault."}], "tags": [], "owner": {"reputation": 750, "user_id": 8649828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UL1aa.png?s=128&g=1", "display_name": "qjnr", "link": "https://stackoverflow.com/users/8649828/qjnr"}, "is_accepted": false, "score": 2, "last_activity_date": 1518034101, "last_edit_date": 1518034101, "creation_date": 1518033369, "answer_id": 48672242, "question_id": 48672192, "link": "https://stackoverflow.com/questions/48672192/why-does-double-negation-force-values-to-become-a-bool/48672242#48672242", "title": "Why does double negation force values to become a bool?", "body": "<p><code>!</code> is a boolean operator, so it will convert the number into a bool (any non-zero value is <code>true</code>, zero is always <code>false</code>). That other <code>!</code> inverts the bool.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1518033959, "post_id": 48672331, "comment_id": 84342913, "body": "I think C&#39;s <code>!</code> can be better described as a &quot;!=0&quot; operator.  When applied to logical values it negates them, but it may also be applied to other types such as floating-point values or pointers."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1518033723, "creation_date": 1518033723, "answer_id": 48672331, "question_id": 48672192, "link": "https://stackoverflow.com/questions/48672192/why-does-double-negation-force-values-to-become-a-bool/48672331#48672331", "title": "Why does double negation force values to become a bool?", "body": "<p>The <code>!</code> operator performs logical negation.  If its argument is non-zero, it results in 0.  If its argument is 0, it results in 1.</p>\n\n<p>What you're describing is the <strong>bitwise complement operator</strong>, denoted by <code>~</code>.</p>\n\n<p>These are both described in section 6.5.3.3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><em>4</em> The result of the <code>~</code> operator is the bitwise complement of its (promoted) operand (that is, each bit in the result is set if and only\n  if the corresponding bit in the converted operand is not set). The\n  integer promotions are performed on the operand, and the result has\n  the promoted type. If the promoted type is an unsigned type, the\n  expression <code>~E</code> is equivalent to the maximum value representable in\n  that type minus <code>E</code>.</p>\n  \n  <p><em>5</em> The result of the logical negation operator <code>!</code> is 0 if the value of its operand compares unequal to 0, 1 if the value of its operand\n  compares equal to 0. The result has type <code>int</code>. The expression <code>!E</code> is\n  equivalent to <code>(0==E)</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 9329596, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HZX1Nr1OdDc/AAAAAAAAAAI/AAAAAAAAAHk/JRYkkpL8U-o/photo.jpg?sz=128", "display_name": "Jonathan Fermin", "link": "https://stackoverflow.com/users/9329596/jonathan-fermin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1518034101, "creation_date": 1518033218, "last_edit_date": 1518033863, "question_id": 48672192, "link": "https://stackoverflow.com/questions/48672192/why-does-double-negation-force-values-to-become-a-bool", "title": "Why does double negation force values to become a bool?", "body": "<p>If x was a 4 bit word like 1010, and you did the operation !!x,</p>\n\n<ul>\n<li>Wouldn't the first !x return 0101, </li>\n<li>And the second !(!x) return 1010?</li>\n</ul>\n\n<p>Rather it returns ...0001 or ...0000. Why is this?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 61, "user_id": 8215913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e2fb7663fd4fcb49198d86ba691539b0?s=128&d=identicon&r=PG&f=1", "display_name": "Oley", "link": "https://stackoverflow.com/users/8215913/oley"}, "edited": false, "score": 0, "creation_date": 1518033020, "post_id": 48672111, "comment_id": 84342438, "body": "Look at this old question, hope it helps. <a href=\"https://stackoverflow.com/questions/18147038/passing-object-by-reference-in-c\" title=\"passing object by reference in c\">stackoverflow.com/questions/18147038/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 9329547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8a391c66ee040e0b1e02598e6dedea?s=128&d=identicon&r=PG&f=1", "display_name": "bn4365", "link": "https://stackoverflow.com/users/9329547/bn4365"}, "reply_to_user": {"reputation": 61, "user_id": 8215913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e2fb7663fd4fcb49198d86ba691539b0?s=128&d=identicon&r=PG&f=1", "display_name": "Oley", "link": "https://stackoverflow.com/users/8215913/oley"}, "edited": false, "score": 0, "creation_date": 1518033955, "post_id": 48672111, "comment_id": 84342911, "body": "Sorry, it doesn&#39;t clarify/answer my question."}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "is_accepted": false, "score": 1, "last_activity_date": 1518036108, "creation_date": 1518036108, "answer_id": 48672887, "question_id": 48672111, "link": "https://stackoverflow.com/questions/48672111/passing-reference-as-object-in-c/48672887#48672887", "title": "Passing reference as object in C++?", "body": "<blockquote>\n  <p>Then while calling from foo(), should I have bar(double &amp;) or\n  bar(double)? Based on double &amp;v1 = x1, shouldn't there be bar(double)?</p>\n</blockquote>\n\n<p>In this case it doesn't matter, <code>v1</code> is a reference and if you change it inside of bar, the variable that was used to initialized it will also change, regardless if the parameter of <code>bar</code> is declared as <code>double</code> or <code>double&amp;</code>.</p>\n\n<p>Have in mind that a reference is like a synonym to a variable. Even though the C++ standard does not specify how a compiler must implement references, every C++ compiler I know implements references as pointers. So basically, you are passing the memory address of the variable to the function anyway.</p>\n"}], "owner": {"reputation": 31, "user_id": 9329547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8a391c66ee040e0b1e02598e6dedea?s=128&d=identicon&r=PG&f=1", "display_name": "bn4365", "link": "https://stackoverflow.com/users/9329547/bn4365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518037119, "creation_date": 1518032932, "last_edit_date": 1518037119, "question_id": 48672111, "link": "https://stackoverflow.com/questions/48672111/passing-reference-as-object-in-c", "title": "Passing reference as object in C++?", "body": "<p>I know that C++ references are not objects, but seems that I can pass references as objects. </p>\n\n<p>In the code below, <code>v1</code> and <code>v2</code> are references, and are assigned as <code>double &amp;v1 = x1</code> through the constructor. Then, while calling from <code>foo()</code>, should I have <code>bar(double &amp;)</code> or <code>bar(double)</code>? Based on <code>double &amp;v1 = x1</code>, shouldn't there be <code>bar(double)</code>?</p>\n\n<p>This looks confusing to me. Can someone explain it? </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass FooBar\n{\nprivate:\n    double &amp;v1, &amp;v2;\npublic:\n    FooBar(double &amp;, double &amp;);\n    void foo();\n    void bar(double &amp;);\n};\n\nFooBar::FooBar (double &amp;x, double &amp;y): v1(x), v2(y) {}\n\nvoid FooBar::foo()\n{\n    bar(v1);\n    bar(v2);\n}\n\nvoid FooBar::bar(double &amp;x)\n{\n    std::cout &lt;&lt; x &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    double x1 = {0.5}, x2 = {1.5};\n    FooBar f(x1, x2);\n    f.foo();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1518033025, "post_id": 48672090, "comment_id": 84342441, "body": "How are you trying to compile this? Can you give us what you pass to <code>g++</code>? (also your header guards are doing nothing at the moment, you should put the <code>#endif</code> at the end of the file)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1518033029, "post_id": 48672090, "comment_id": 84342442, "body": "Are you sure you&#39;re linking your .cpp file? Also, #endif is normally the last line in the file although that will have a benign effect here."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1518033049, "post_id": 48672090, "comment_id": 84342454, "body": "You are implementing a multiple-inclusion guard wrongly in your header.  The <code>#endif</code> should go all the way at the end, so that the whole content of the file is within the scope of the <code>#ifdef</code>.  But that&#39;s not what&#39;s causing the problem."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518033053, "post_id": 48672090, "comment_id": 84342459, "body": "The <code>#endif</code> in your .h file is wrongly located. It should be at the very end of the file."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1518033073, "post_id": 48672090, "comment_id": 84342471, "body": "You have obvious typos (no open quote on one include), misused include guards (the <code>endif</code> goes after the body of the include file), and you don&#39;t provide your compile line (which is probably the source of the problem, forgetting to compile <code>my.cpp</code> into the final result)."}, {"owner": {"reputation": 347, "user_id": 1293477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/714f0329fb50d8d08967cd9b8db790a4?s=128&d=identicon&r=PG", "display_name": "Jeff Melton", "link": "https://stackoverflow.com/users/1293477/jeff-melton"}, "edited": false, "score": 0, "creation_date": 1518033145, "post_id": 48672090, "comment_id": 84342514, "body": "You are not using the include guard properly.  The <code>#endif</code> should be the last line of the file.  [<a href=\"https://en.wikipedia.org/wiki/Include_guard]\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Include_guard]</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518035083, "post_id": 48672090, "comment_id": 84343510, "body": "Off-topic:  You should get in the habit of providing variable names in your parameters.  If your really nice, you add comments describing the functions purpose and requirements of the parameters."}, {"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518035942, "post_id": 48672090, "comment_id": 84343960, "body": "@ThomasMatthews hey there, so I should get red of the a,b in the parameters section? But then how would one supply values to it? (Sorry again for trivial questions)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518041400, "post_id": 48672090, "comment_id": 84346653, "body": "You should have parameters in your prototype or declaration: <code>int sum (int a, int b);</code>, not <code>int sum(int, int);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034069, "post_id": 48672172, "comment_id": 84342962, "body": "Alright, I&#39;m feeling dumb, where does this go exactly? Is there a change I must do in the compiler settings? I&#39;m using Code:: Blocks. Sorry for the really trivial questions"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9232447"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034230, "post_id": 48672172, "comment_id": 84343047, "body": "@Barcanjo I don&#39;t use Code::Blocks, but you can open a shell in the directory of your source code and execute the above commands to compile your code. Code::Blocks is probably compiling the current open file alone..."}, {"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034795, "post_id": 48672172, "comment_id": 84343348, "body": "I added the files to the project (from the IDE interface) and it fixed it. Thank you for helping :) Another question, is code:: Blocks bad or something alike? just wondering since you don&#39;t use it and from the research, I&#39;ve done I got the impression it was a good IDE."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9232447"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518035514, "post_id": 48672172, "comment_id": 84343743, "body": "@Barcanjo Glad to help :). It&#39; really just about taste - I prefer Visual Studio on Windows or Jetbrains CLion on Linux."}, {"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518035987, "post_id": 48672172, "comment_id": 84343992, "body": "I see, I tried visual studio but found it quite slow :( thanks again for the help :D"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9232447"}, "is_accepted": true, "score": 4, "last_activity_date": 1518033141, "creation_date": 1518033141, "answer_id": 48672172, "question_id": 48672090, "link": "https://stackoverflow.com/questions/48672090/c-using-h-and-cpp-files/48672172#48672172", "title": "C++ using .h and .cpp files", "body": "<p>It seems that you are not linking the my.cpp object with main.cpp.</p>\n\n<p>The following should solve the problem:</p>\n\n<pre><code>$ g++ main.cpp my.cpp -o my\n$ ./my\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518033966, "post_id": 48672270, "comment_id": 84342917, "body": "Hey there, changed it to pragma since it&#39;s way more practical! About the build error, I believe it is in my project, at least in my IDE it appears in the same file (sources) as the main.cpp."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034213, "post_id": 48672270, "comment_id": 84343038, "body": "@Barcanjo Make sure you actually added the file to the project. Many IDEs will allow you to open and edit files that are actually not part of the project. Which means you can edit them, but they won&#39;t get compiled."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034380, "post_id": 48672270, "comment_id": 84343133, "body": "@Barcanjo I haven&#39;t used code::blocks in a long time, but IIRC, right-click the project name, then select &quot;Add files&quot; and then select myMath.h and myMath.cpp and then confirm with OK."}, {"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034395, "post_id": 48672270, "comment_id": 84343148, "body": "Ohh, so even though the file is in the same folder in the IDE (I&#39;m using code:: Blocks), I need to actually add it to the project. Just did this and it fixed it, thank you for helping (and all the others as well). Just a final question, it&#39;s bad practice to use .cpp files in headers, right?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518034667, "post_id": 48672270, "comment_id": 84343288, "body": "@Barcanjo Yes. Never include .cpp files in headers. This will result in multiple definitions when the header file that includes a cpp file is used by several other files. In fact, never <code>#include</code> a .cpp file ever, period. There&#39;s some rare cases where this is done, but in general, don&#39;t do it."}, {"owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518036019, "post_id": 48672270, "comment_id": 84344007, "body": "Alright, thanks again for the fix and tips :D have a great night!"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "edited": false, "score": 0, "creation_date": 1518037970, "post_id": 48672270, "comment_id": 84345045, "body": "@Barcanjo Thanks. Don&#39;t forget to mark the answer that solved your problem as &quot;accepted&quot; (click the checkmark under the answer score). Otherwise, your question will remain as unsolved on the site."}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1518034106, "last_edit_date": 1518034106, "creation_date": 1518033462, "answer_id": 48672270, "question_id": 48672090, "link": "https://stackoverflow.com/questions/48672090/c-using-h-and-cpp-files/48672270#48672270", "title": "C++ using .h and .cpp files", "body": "<p>You header is wrong. You need:</p>\n\n<pre><code>#ifndef MYMATH_H_INCLUDED\n#define MYMATH_H_INCLUDED\n\nint sum (int,int);\n\n#endif // MYMATH_H_INCLUDED\n</code></pre>\n\n<p>In your current code, the include guard doesn't actually guard anything.</p>\n\n<p>Or even better, just use this:</p>\n\n<pre><code>#pragma once\n\nint sum (int,int);\n</code></pre>\n\n<p>(Random people will jump in and say this is not standard C++, but you can safely ignore them. <code>#pragma once</code> is the de-facto standard way to protect header files against multiple inclusion.)</p>\n\n<p>Now to the build error. It would seem to me that you are not building the <code>myMath.cpp</code> file at all. Make sure you have added that file to your project in your IDE, since it's the file that actually implements the <code>sum()</code> function.</p>\n\n<p>If you are not using an IDE and you are building manually, then either build all your source files at once:</p>\n\n<pre><code>g++ main.cpp myMath.cpp\n</code></pre>\n\n<p>Or compile the files into object files and link them at the end:</p>\n\n<pre><code>g++ -c main.cpp\ng++ -c myMath.cpp\ng++ main.o myMath.o\n</code></pre>\n\n<p>You can use the <code>-o</code> flag to specify the name of the resulting executable. By default, it's <code>a.out</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 9329524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec0f53cde985391f0066c3c48674dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Barcanjo", "link": "https://stackoverflow.com/users/9329524/barcanjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "closed_date": 1518044777, "accepted_answer_id": 48672172, "answer_count": 2, "score": 1, "last_activity_date": 1518034106, "creation_date": 1518032853, "question_id": 48672090, "link": "https://stackoverflow.com/questions/48672090/c-using-h-and-cpp-files", "closed_reason": "Duplicate", "title": "C++ using .h and .cpp files", "body": "<p>I am completely new to C++ and wanted to get a hang on the using my functions in programs by extracting them from an organized file. I do not understand why my code (see below) does not work, I tried to find an answer but really couldn't. Anyway, here's the code, hope it helps.</p>\n\n<p>My .h file:</p>\n\n<pre><code>#ifndef MYMATH_H_INCLUDED\n#define MYMATH_H_INCLUDED\n#endif // MYMATH_H_INCLUDED\n\nint sum (int,int);\n</code></pre>\n\n<p>My.cpp file: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"myMath.h\"\n\nint sum(int a, int b){\nreturn a+b;\n}\n</code></pre>\n\n<p>My main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"myMath.h\"\n\nusing namespace std;\n\nint main()\n{\n   int a, b;\n   cin &gt;&gt; a;\n   cin &gt;&gt; b;\n   cout &lt;&lt; sum(a,b);\n}\n</code></pre>\n\n<p>and finally the error block:</p>\n\n<pre><code>||=== Build: Debug in using my functions (compiler: GNU GCC Compiler) ===|\nobj\\Debug\\main.o||In function `main':|\nC:\\Users\\Barcanjo\\Desktop\\Coding\\using my functions\\main.cpp|11|undefined \nreference to `sum(int, int)'|\n||error: ld returned 1 exit status|\n||=== Build failed: 2 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1518032643, "post_id": 48671993, "comment_id": 84342196, "body": "Related <a href=\"https://stackoverflow.com/q/30114397/1708801\">\u201cconstructing\u201d a trivially-copyable object with memcpy</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518032663, "post_id": 48671993, "comment_id": 84342206, "body": "That quote is not relevant, and this has been discussed what feels like 1 million times. Hang on, I&#39;ll look for a dupe."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1518032745, "post_id": 48671993, "comment_id": 84342265, "body": "Maybe duplicate <a href=\"https://stackoverflow.com/q/36024325/1708801\">At what point does memory allocated by malloc get a type?</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1518033397, "post_id": 48671993, "comment_id": 84342638, "body": "Don&#39;t use <code>malloc</code>/<code>free</code> in C++. Use <code>new</code>/<code>delete</code>. Or better yet; don&#39;t. Use RAII, automatic objects, containers and smart pointers and avoid manual memory management."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1518034455, "post_id": 48671993, "comment_id": 84343184, "body": "I assume there&#39;s a good reason the standard committee changed &quot;non-trivial initialization&quot; to &quot;non-vacuous initialization&quot;, but I sure don&#39;t like the new term.  I thought that &quot;vacuous&quot; on that link might have come from some computer-based language translation or something, but I see it&#39;s in C++17."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1518039721, "post_id": 48671993, "comment_id": 84345885, "body": "@MichaelBurr: It&#39;s getting around the fact that a &quot;trivial&quot; copy or move constructor does a bitwise image of a valid object.  &quot;vacuous&quot; in contrast means <i>nothing</i> is done."}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": -2, "last_activity_date": 1518032641, "creation_date": 1518032641, "answer_id": 48672038, "question_id": 48671993, "link": "https://stackoverflow.com/questions/48671993/can-stdmalloc-create-an-object-is-placement-new-always-required/48672038#48672038", "title": "Can std::malloc create an object? Is placement new always required?", "body": "<p>Your object has type <code>int</code>, which doesn't require non-trivial initialization, so both bullet points are satisfied just by calling <code>std::malloc</code>.</p>\n\n<p>If the object requires a non-trivial constructor call, then <code>new</code> is the  way to satisfy (1.2) and if you want to use an allocator other than <code>operator new()</code> then placement new is the right approach.</p>\n"}], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "closed_date": 1518033122, "answer_count": 1, "score": 1, "last_activity_date": 1518032909, "creation_date": 1518032473, "question_id": 48671993, "link": "https://stackoverflow.com/questions/48671993/can-stdmalloc-create-an-object-is-placement-new-always-required", "closed_reason": "Duplicate", "title": "Can std::malloc create an object? Is placement new always required?", "body": "<p>Does this code have undefined behavior in C++?</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n\nint main() {\n    int *ip = static_cast&lt;int *&gt;(std::malloc(sizeof *ip));\n    *ip = 42; //is this accessing an object that has not started its lifetime?\n    free(ip);\n}\n</code></pre>\n\n<p>Notes:<br>\n<a href=\"http://eel.is/c++draft/c.malloc#2\" rel=\"nofollow noreferrer\"><code>std::malloc</code> has the semantics that it has in C</a>. In C <code>std::malloc</code> creates valid <code>int</code>s, so it should be valid?</p>\n\n<blockquote>\n  <p>The lifetime of an object or reference is a runtime property of the\n  object or reference. An object is said to have non-vacuous\n  initialization if it is of a class or aggregate type and it or one of\n  its subobjects is initialized by a constructor other than a trivial\n  default constructor. [\u2009Note: Initialization by a trivial copy/move\n  constructor is non-vacuous initialization. \u2014\u2009end note \u2009] The lifetime\n  of an object of type T begins when:</p>\n  \n  <p>(1.1)\n      storage with the proper alignment and size for type T is obtained, and<br>\n     (1.2)\n      if the object has non-vacuous initialization, its initialization is complete,</p>\n  \n  <p>except that if the object is a union member or subobject thereof ...</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/basic.life\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p>I'm fairly sure this quote answers my question but I don't understand it well enough to tell if it is saying yes or no.</p>\n"}, {"tags": ["c++", "double", "precision"], "comments": [{"owner": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 1, "creation_date": 1518032480, "post_id": 48671930, "comment_id": 84342109, "body": "I don&#39;t think it&#39;s an issue with cout, it&#39;s an issue with how float/doubles work within computers."}, {"owner": {"reputation": 381, "user_id": 4650415, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3dbdb1710ef8e4553f40f6699464ab09?s=128&d=identicon&r=PG&f=1", "display_name": "M-R", "link": "https://stackoverflow.com/users/4650415/m-r"}, "reply_to_user": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 0, "creation_date": 1518034636, "post_id": 48671930, "comment_id": 84343275, "body": "Any chance you can reopen the question please?"}, {"owner": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 1, "creation_date": 1518043534, "post_id": 48671930, "comment_id": 84347611, "body": "I&#39;m pretty sure it&#39;s the same issue. The more operations the CPU does on the floating point, the more the small mistakes build up. The CPU made a mistake on the first calculation (by 0.00...01%), and as you do more operations the mistakes builds up and it doesn&#39;t care to correct them (because it&#39;s difficult to represent it).  In most cases, your application will perform as usual. Modern compilers have floating point precision levels, so you can play with those if you really need it (example: <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/fp-specify-floating-point-behavior\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a>)"}, {"owner": {"reputation": 381, "user_id": 4650415, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3dbdb1710ef8e4553f40f6699464ab09?s=128&d=identicon&r=PG&f=1", "display_name": "M-R", "link": "https://stackoverflow.com/users/4650415/m-r"}, "reply_to_user": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 0, "creation_date": 1518045281, "post_id": 48671930, "comment_id": 84348265, "body": "This is also the conclusion I came to. If you write up an answer, I&#39;ll be happy to accept it. :)"}, {"owner": {"reputation": 381, "user_id": 4650415, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3dbdb1710ef8e4553f40f6699464ab09?s=128&d=identicon&r=PG&f=1", "display_name": "M-R", "link": "https://stackoverflow.com/users/4650415/m-r"}, "reply_to_user": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 0, "creation_date": 1518045477, "post_id": 48671930, "comment_id": 84348331, "body": "@FrznFlms, how would the CPU know how to correct the error though, should it wish? Not that I need it, I have enough precision. Just wondering."}, {"owner": {"reputation": 408, "user_id": 6577032, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/320d02d14d771abb30d693a57d264536?s=128&d=identicon&r=PG&f=1", "display_name": "Frzn Flms", "link": "https://stackoverflow.com/users/6577032/frzn-flms"}, "edited": false, "score": 0, "creation_date": 1518049123, "post_id": 48671930, "comment_id": 84349448, "body": "I don&#39;t think the CPU can fix the issue without jumping to 128-bits or your language&#39;s chosen Big-Floating-Point library/structure (example: <a href=\"https://gmplib.org\" rel=\"nofollow noreferrer\">gmplib.org</a>). In that case, there&#39;s physically not enough information to store 0.1125, so your CPU takes the next closest thing (kinda). Sometimes, your CPU can intentionally make larger errors, like in a floating point precision level of fast,where it intentionally sacrifices accuracy for speed. But if you have it set to precise, it might just be better to allocate more memory using libraries."}], "owner": {"reputation": 381, "user_id": 4650415, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3dbdb1710ef8e4553f40f6699464ab09?s=128&d=identicon&r=PG&f=1", "display_name": "M-R", "link": "https://stackoverflow.com/users/4650415/m-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1518032474, "answer_count": 0, "score": 0, "last_activity_date": 1518038117, "creation_date": 1518032248, "last_edit_date": 1518038117, "question_id": 48671930, "link": "https://stackoverflow.com/questions/48671930/double-precision-increasing-error", "closed_reason": "Duplicate", "title": "Double precision increasing error", "body": "<p>I understand that a calculation such as <code>0.0375 + 0.0375 + 0.0375</code> results in <code>0.11249999999999999</code>.</p>\n\n<p>If I were to continually add '0.0375' to a double variable in a for loop (x times), would you find that the result at each iteration gradually becomes more and more inaccurate due to the issues with floating point precision?</p>\n\n<p>I can tolerate an approximation such as the one shown above, but can't have a result which continues to deviate from the actual result as the number of iterations increases.</p>\n\n<p>EDIT:</p>\n\n<p>I've run the following test (with several values):</p>\n\n<pre><code>std::cout.precision(17);\n\ndouble t = 0.42300*783698177;\n    std::cout &lt;&lt; std::fixed &lt;&lt; t &lt;&lt; std::endl;\n\ndouble g = 0;\nfor (int y = 0; y &lt; 783698177; y ++){\n    g = g + 0.42300;\n}\n\nstd::cout &lt;&lt; std::fixed &lt;&lt; g &lt;&lt; std::endl;\n</code></pre>\n\n<p>As I suspected, as the number of iterations increases, the more likely (or simply the more) the result deviates from the actual value. </p>\n\n<p>Has anybody else observed this?</p>\n\n<p>Although I feel I understand why this is happening, could somebody provide an intuitive (or basic mathematical) explanation for why this occurs?</p>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1518033075, "post_id": 48671858, "comment_id": 84342473, "body": "I understand by &quot;Screen&quot; you mean a window. The <code>Close()</code> function is available to all wxWindow-derived controls and it does close the window, removes its children, its pointer and other clean-up. Using <code>Destroy()</code> is very rare. See <a href=\"http://docs.wxwidgets.org/trunk/overview_windowdeletion.html\" rel=\"nofollow noreferrer\">docs</a>. Have you taken a look at <i>samples/minimal</i>?"}, {"owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1518033696, "post_id": 48671858, "comment_id": 84342791, "body": "Yes I mean a window, and yes I read the docs that is why I am a bit confused. It is simply deleting an object and still can&#39;t seem to find why it is giving a segmentation fault. My guess was that deleting the mpWindow (Mathplot) needed a process but can&#39;t seem to make it work."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1518033978, "post_id": 48671858, "comment_id": 84342923, "body": "Compile wx and your app with debugging symbols (pass <code>-g</code> to the compiler or set it at C:B project settings). Then <code>gdb</code> can understand it and so offer break points, stack trace, running step by step, etc."}, {"owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1518034232, "post_id": 48671858, "comment_id": 84343049, "body": "I&#39;ll try that thanks I appreciate the time"}], "owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518031941, "creation_date": 1518031941, "question_id": 48671858, "link": "https://stackoverflow.com/questions/48671858/how-to-properly-delete-wxwidgets-window", "title": "How to properly delete wxWidgets Window?", "body": "<p>Sorry if my question is a bit off base, I am kinda new to developing software, I got a project to develop a native Windows application that will be cross-platform later on. They told me to work with wxWidgets but I have been having trouble with the usage of mpWindows.</p>\n\n<p>The issue right now being that I am creating a new Screen when I press a button, and that Screen contains a Mathplot, when I go and close the screen it give me a segmentation fault. I tried using the gdb to find the problem but no luck so far, I am not that experienced using it for this type of development. In the screen I literally only have the declaration of the mpWindow and the setting up of the margins. Would you need pictures to have a better idea? In the close event I am calling this->Destroy(); because this->Close fails to terminate the screen</p>\n\n<p>Thank you in advance and sorry for the long post.</p>\n\n<p>Btw I am using Code::Blocks, GCC 7.2, and wxWidgets 3.1.0</p>\n"}, {"tags": ["c++", "directory"], "comments": [{"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1518031371, "post_id": 48671729, "comment_id": 84341450, "body": "Try <code>boost::filesystem</code>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 3, "creation_date": 1518031696, "post_id": 48671729, "comment_id": 84341670, "body": "It should be <code>int main()</code>, not just <code>main</code>. You need to study more! By the way, boost is not necessary."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518031710, "post_id": 48671729, "comment_id": 84341682, "body": "If you&#39;re just getting started learning, <a href=\"http://en.cppreference.com/w/cpp/filesystem\" rel=\"nofollow noreferrer\">you may as well learn up-to-date C++</a>. Note: This may screw with your instructor&#39;s head. Odds are way too good they&#39;ve never even heard of C++&#39;s filesystem library."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1518031936, "post_id": 48671729, "comment_id": 84341802, "body": "Check if your compiler supports C++17 <code>#include &lt;filesystem&gt;</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1518031989, "post_id": 48671729, "comment_id": 84341831, "body": "You can try writing <i>less code</i> before compiling so you know when you get a piece of syntax wrong and you only have one error to fix at a time."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518032168, "post_id": 48671729, "comment_id": 84341933, "body": "Looking the code over, you&#39;re mostly missing grammar <code>int main</code>-&gt;<code>int main()</code> and <code>stat(path,&amp;info)</code>-&gt;<code>stat(path,&amp;info);</code>, and you need to get <code>char *</code>s from your <code>string</code>s with <code>c_str()</code>. Reccomend removing most of the <code>char*</code>, by the way., You can use <code>string</code> everywhere except <code>stat(path.c_str(),&amp;info)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": true, "score": 2, "last_activity_date": 1518033414, "creation_date": 1518033414, "answer_id": 48672253, "question_id": 48671729, "link": "https://stackoverflow.com/questions/48671729/how-to-open-a-directory-with-c/48672253#48672253", "title": "How to open a Directory with C++", "body": "<p>You're on Linux right? Why are you complicating things? There is something called \"file tree walk\" that will do exactly what you want with minimal effort. Here is a quick example. Do <code>man ftw</code> for more information on the input parameters.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ftw.h&gt;\n#include &lt;fnmatch.h&gt;\n\nstatic int explore( const char *fpath,\n                    const struct stat *sb,\n                    int typeflag )\n{\n    if (typeflag == FTW_F)  ///&lt; it's a file\n    {\n        if (fnmatch(\"*.txt\", fpath, FNM_CASEFOLD) == 0) ///&lt; it's a .txt file\n        {\n            std::cout &lt;&lt; \"found txt file: \" &lt;&lt; fpath &lt;&lt; std::endl;\n        }\n    }\n    return 0;\n}\n\nint main()\n{\n    ftw(\".\", explore, 8);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8735793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38352a100196ef354174b4336fc8084a?s=128&d=identicon&r=PG&f=1", "display_name": "Mike J", "link": "https://stackoverflow.com/users/8735793/mike-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3804, "favorite_count": 0, "accepted_answer_id": 48672253, "answer_count": 1, "score": 0, "last_activity_date": 1518033414, "creation_date": 1518031318, "question_id": 48671729, "link": "https://stackoverflow.com/questions/48671729/how-to-open-a-directory-with-c", "title": "How to open a Directory with C++", "body": "<p>I am very new to C++, and for my first assignment I am asked to open a directory ( and all its subdirectories) and store ONLY the .txt file paths in an array. This is what I've done so far, but I've gotten multiple errors. Could anyone help?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/stat.h&gt;\n#include&lt;iostream&gt;\n#include&lt;string.h&gt;\n#include&lt;string&gt;\n#include&lt;dirent.h&gt;\n\nusing namespace std;\n\nvoid explore(char *dir_name){\n    DIR *dir; // pointer to directory\n    struct dirent *entry; // all stuff in the directory\n    struct stat info; // info about each entry\n\n    dir = opendir(dir_name);\n\n    if (!dir)\n    {\n        cout &lt;&lt; \"Directory not found\" &lt;&lt; endl;\n        return;\n    }\n\n    while ((entry = readdir(dir)) != NULL)\n    {\n        if (entry-&gt;d_name[0] != '.')\n        {\n            string path = string(dir_name) + \"/\" + string(entry-&gt;d_name);\n            cout &lt;&lt; \"Entry = \" &lt;&lt; path &lt;&lt; endl;\n            stat(path,&amp;info) //\n            if (S_ISDIR(info.st_mode))\n            {\n                explore(path);\n\n            }\n\n        }\n    }\n    closedir(dir);\n\n}\n\nint main{\n    explore(\".\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "template-meta-programming", "com+"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518031820, "post_id": 48671691, "comment_id": 84341744, "body": "fyi for learning this is ok.  For production code start with code generated from IDL or type libraries."}, {"owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518089604, "post_id": 48671691, "comment_id": 84366079, "body": "What do you mean about using code generated from IDL?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "edited": false, "score": 0, "creation_date": 1518095265, "post_id": 48671796, "comment_id": 84369878, "body": "Thank you Ben! I managed to solve my problem with your response!"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 2, "last_activity_date": 1518031652, "creation_date": 1518031652, "answer_id": 48671796, "question_id": 48671691, "link": "https://stackoverflow.com/questions/48671691/c-com-method-argument-deduction/48671796#48671796", "title": "C++ COM+ method argument deduction", "body": "<p>Open up the pointer-to-member type instead of making it opaque.</p>\n\n<pre><code>template&lt;typename COMRET, typename COM, typename A1&gt;\ncom_ptr&lt;COMRET&gt; _prv_com_comret(com_ptr&lt;COM&gt; This, COMRET (COM::* const Method)(A1, COMRET**), A1 Arg1)\n</code></pre>\n\n<p>This should be callable with no template args specified explicitly.</p>\n"}], "owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 48671796, "answer_count": 1, "score": 0, "last_activity_date": 1518031652, "creation_date": 1518031108, "question_id": 48671691, "link": "https://stackoverflow.com/questions/48671691/c-com-method-argument-deduction", "title": "C++ COM+ method argument deduction", "body": "<p>I'm facing some troubles on my quest on learning C++ template metaprogramming. I'm trying to create some COM+ wrappers so my life mixing them with C++ gets happier :)</p>\n\n<p>My first step was to <em>create</em> a smart pointer which managed COM+ objects through their <code>Release</code> method:</p>\n\n<pre><code>template &lt;typename COM&gt;\nusing com_ptr = std::shared_ptr&lt;COM&gt;;\n\ntemplate&lt;class COM&gt;\ncom_ptr&lt;COM&gt; make_com_ptr(COM **ppv)\n{\n    auto ret = com_ptr&lt;COM&gt;(*ppv, [](COM *p) { if (p) p-&gt;Release(); });\n    *ppv = NULL;\n    return ret;\n}\n</code></pre>\n\n<p>So far so good, now the tricky bit. (Almost) all COM+ methods which return another COM+ object will return the afore mentioned interface as a pointer to pointer on the method's argument list, like\n<code>HRESULT WINAPI IXMLDOMDocument::selectSingleNode(BSTR, IXMLDOMNode**)</code></p>\n\n<p>I want/need to call some (member)function which could give me that result pointer as its return value, something like this:</p>\n\n<pre><code>IXMLDOMDocument *prawDoc(nullptr);\nCoCreateInstance(..., reinterpret_cast&lt;LPVOID*&gt;(&amp;prawDoc));\nauto pDoc = make_com_ptr(&amp;prawDoc);\ncom_ptr&lt;IXMLDOMNode&gt; pNode = FX(pDoc, &amp;IXMLDOMDocument::selectSingleNode,_bstr_t(\"//xpath\"));\n^^(auto pNode = ...)         ^^ (the function)\n</code></pre>\n\n<p>Now, what I've got so far:</p>\n\n<pre><code>template&lt;typename COMRET, typename COM, typename METHOD, typename A1&gt;\ncom_ptr&lt;COMRET&gt; _prv_com_comret(com_ptr&lt;COM&gt; This, const METHOD &amp;Method, A1 Arg1)\n{\n    COMRET *ppv(nullptr);\n    ::SetLastError((*This.*Method)(Arg1, &amp;ppv));\n    return make_com_ptr(&amp;ppv);\n}\n\n#define com_comret( COM, This, Method, ... )\\\n    _prv_com_comret&lt;COM&gt;( This, &amp;decltype(This)::_Ptr_base::element_type::Method, __VA_ARGS__ )\n</code></pre>\n\n<p>So, with this template function and macro, I could write something like this:</p>\n\n<pre><code>auto pNode = com_comret(IXMLDOMNode, pDoc, selectSingleNode, _bstr_t(\"//xpath\"));\n</code></pre>\n\n<p>What bothers me about this <em>solution</em> is that I have to specify the return type (<code>IXMLDOMNode</code>) even though the compiler Does know its type (as everyone would agree, it's the last argument of the <code>IXMLDOMDocument::selectSingleNode</code> method)</p>\n\n<p>So, in the end, this long post is reduced to: is it posible with some sort of template metaproggraming+macro <em>sorcery</em> to deduce that argument type without having to specify it?</p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["c++", "class", "inheritance", "abstract"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1518030841, "post_id": 48671562, "comment_id": 84341151, "body": "<code>Dog dog; Cat cat; dog.Display(), cat.Display();</code> ?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1518030890, "post_id": 48671562, "comment_id": 84341185, "body": "<code>Animals* animal;</code> is an uninitialized pointer. Dereferencing it invokes <i>undefined behavior</i>"}, {"owner": {"reputation": 11, "user_id": 8652871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d16d2e7c9cd7cdfbc78d9edf301c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Benjan ", "link": "https://stackoverflow.com/users/8652871/benjan"}, "edited": false, "score": 0, "creation_date": 1518030941, "post_id": 48671562, "comment_id": 84341215, "body": "Is there a way to only call the base class and run the inherited classes too?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1518030980, "post_id": 48671562, "comment_id": 84341230, "body": "@Benjan: There&#39;s no implementation in the base class, so how would you call it? If there was, you could say Animal::Display() from within Dog::Display()"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1518030985, "post_id": 48671562, "comment_id": 84341233, "body": "By the way the code for <code>Zoo</code> wouldn&#39;t compile anyway - if you have errors please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and give the exact error message"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518031032, "post_id": 48671562, "comment_id": 84341263, "body": "I&#39;m afraid you misunderstand inheritance and virtual functions completely. What book do you use?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1518032190, "post_id": 48671562, "comment_id": 84341944, "body": "You need <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list?lq=1\">a good C++ book</a>. This question really doesn&#39;t make any sense."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "is_accepted": true, "score": 0, "last_activity_date": 1518031540, "last_edit_date": 1518031540, "creation_date": 1518031378, "answer_id": 48671741, "question_id": 48671562, "link": "https://stackoverflow.com/questions/48671562/how-to-run-abstract-class-functions-and-the-inherited-functions/48671741#48671741", "title": "How to run abstract class functions and the inherited functions?", "body": "<p>First off, there's a syntax error:</p>\n\n<pre><code> class Animals\n{\n public:\n    virtual void Display() = 0;\n};\n\nclass Dog : public Animals\n{\n    void Display()\n    {\n        cout &lt;&lt; \"This is Dog!\" &lt;&lt; endl;\n    }\n};\n\nclass Cat : public Animals\n{\n    void Display()\n    {\n        cout &lt;&lt; \"This is Cat!\" &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>Then if you want to create Dog and Cat instances you call new operators for these classes:</p>\n\n<pre><code>class Zoo : public Animals\n{\n   void Display() \n   {\n       Animals* animal1;\n       animal1 = new Cat();\n       animal1-&gt;Display();\n       delete animal1;\n\n       Animals* animal2;\n       animal2 = new Dog();\n       animal2-&gt;Display();\n       delete animal2;\n   }\n\n}\n</code></pre>\n\n<p>This should get your desired output.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518032019, "post_id": 48671744, "comment_id": 84341846, "body": "Why raw pointers and not <code>std::unique_ptr</code>? And where are the <code>delete</code>s? Teaching this stuff to a beginner and not even mentioning <code>delete</code> is a bad idea."}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 0, "creation_date": 1518032322, "post_id": 48671744, "comment_id": 84342024, "body": "You\u2019re leaking both the <code>Cat</code> and <code>Dog</code> instances. I highly recommend wrapping them in <code>unique_ptr</code>s or at the very least <code>delete</code>ing them at the end of <code>main()</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518032429, "post_id": 48671744, "comment_id": 84342077, "body": "Removed my downvote because <code>delete</code> is now mentioned."}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 0, "last_activity_date": 1518033181, "last_edit_date": 1518033181, "creation_date": 1518031402, "answer_id": 48671744, "question_id": 48671562, "link": "https://stackoverflow.com/questions/48671562/how-to-run-abstract-class-functions-and-the-inherited-functions/48671744#48671744", "title": "How to run abstract class functions and the inherited functions?", "body": "<blockquote>\n  <p>Is there a way to only call the base class and run the inherited classes too?</p>\n</blockquote>\n\n<p>I think you want this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass Animals\n{\npublic:\n    virtual void Display() = 0;\n    virtual ~Animals() = default;\n};\n\nclass Dog : public Animals\n{\n    void Display() override\n    {\n        std::cout &lt;&lt; \"This is Dog!\" &lt;&lt; std::endl;\n    }\n};\n\nclass Cat : public Animals\n{\n    void Display() override\n    {\n        std::cout &lt;&lt; \"This is Cat!\" &lt;&lt; std::endl;\n    }\n};\n\nclass Goat : public Animals\n{\n    void Display() override\n    {\n        std::cout &lt;&lt; \"This is Goat!\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Animals* animal = new Dog;\n    animal-&gt;Display();\n    delete animal; // delete at some point to avoid memory leak as Dog is allocated on the heap\n\n    Cat cat;\n    animal = &amp;cat;\n    animal-&gt;Display(); // no delete needed, as Cat is allocated on the stack and will cleared when goes out of scope\n\n    std::unique_ptr&lt;Animals&gt; animal2 = std::make_unique&lt;Goat&gt;();\n    animal2-&gt;Display(); // no delete needed, Goat is allocated on the heap but will be cleared when goes out of scope\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/yoVt4G\" rel=\"nofollow noreferrer\">https://ideone.com/yoVt4G</a></p>\n\n<p>Threw <code>std::unique_ptr</code> in the mix for variety</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1518032955, "last_edit_date": 1518032955, "creation_date": 1518031551, "answer_id": 48671765, "question_id": 48671562, "link": "https://stackoverflow.com/questions/48671562/how-to-run-abstract-class-functions-and-the-inherited-functions/48671765#48671765", "title": "How to run abstract class functions and the inherited functions?", "body": "<p><code>animal-&gt;Display();</code> results in undefined behaviour because <code>animal</code> is not initialized, so first initialized it as</p>\n\n<pre><code>    Cat my_cat;\n    Animals* animal = &amp;my_cat;\n    animal-&gt;Display();\n</code></pre>\n\n<p>OR </p>\n\n<pre><code> Animals* animal = new Cat();\n animal-&gt;Display();\n ....\n delete  animal; \n</code></pre>\n\n<p>Here is your Code, explanation is there in comments. </p>\n\n<pre><code>class Animals {\n        public:\n                virtual void Display() = 0;/*its a PVF , in every derived class it should be re-defined */\n};\n\nclass Dog : public Animals {\n        void Display() {\n                cout &lt;&lt; \"This is Dog!\" &lt;&lt; endl;\n        };\n};\nclass Cat : public Animals {\n        void Display() {\n                cout &lt;&lt; \"This is Cat!\" &lt;&lt; endl;\n        }\n};\n\nclass Zoo : public Animals {\n        public :\n                void Display() {\n                        #if 1\n                        Dog my_dog;\n                        Animals *animal = &amp;my_dog; /** Display() of Animal class will be invoked  bcz Display() is declared as  virtual */\n                        animal-&gt;Display();\n                        #endif\n                        #if 0\n                        Animals* animal = new Cat(); /** Display() of Cat class  eill be invoked */\n                        animal-&gt;Display();\n                        delete animal;\n                        #endif\n                }\n};\nint main() {\n        Zoo my_zoo;\n        my_zoo.Display();\n        return 0;\n}\n</code></pre>\n\n<p>I hope it helps you.</p>\n"}], "owner": {"reputation": 11, "user_id": 8652871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d16d2e7c9cd7cdfbc78d9edf301c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Benjan ", "link": "https://stackoverflow.com/users/8652871/benjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 48671741, "answer_count": 3, "score": -2, "last_activity_date": 1518033181, "creation_date": 1518030694, "question_id": 48671562, "link": "https://stackoverflow.com/questions/48671562/how-to-run-abstract-class-functions-and-the-inherited-functions", "title": "How to run abstract class functions and the inherited functions?", "body": "<p>I have just learnt about abstract class but I don't understand much. Is it possible to run abstract class functions and the inherited functions all at once?..</p>\n\n<p>For example,</p>\n\n<pre><code>class Animals\n{\n public:\n    virtual void Display() = 0;\n};\n\nclass Dog : public Animals\n{\n    void Display()\n    {\n        cout &lt;&lt; \"This is Dog!\" &lt;&lt; endl;\n};\n\nclass Cat : public Animals\n{\n    void Display()\n    {\n        cout &lt;&lt; \"This is Cat!\" &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>and I have another class called Zoo which will run the abstract function in class Animals</p>\n\n<pre><code>class Zoo : public Animals\n{\n   Animals* animal;\n   animal-&gt;Display();\n}\n</code></pre>\n\n<p>and the output I want is </p>\n\n<pre><code>This is Dog!\nThis is Cat!\n</code></pre>\n\n<p>When I run this, it has errors.. Is there any other ways to get this output? Thanks :)</p>\n"}, {"tags": ["c++", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1518030798, "post_id": 48671554, "comment_id": 84341123, "body": "You mean to do <code>list.printListRecur(list.head)</code> but then <code>head</code> is a private member so you should have an overload of <code>printListRecur</code> in your class that takes no arguments and simply forwards to <code>printListRecur(this-&gt;head)</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1518030834, "post_id": 48671554, "comment_id": 84341147, "body": "<code>_LINKEDLISTHEADER_</code> name is reserved for the implementation. By defining it, your program has undefined behaviour. Pick a different name that isn&#39;t reserved."}, {"owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "edited": false, "score": 1, "creation_date": 1518031964, "post_id": 48671554, "comment_id": 84341821, "body": "You can make a helper function that will pass private head to printListRecur and call it instead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1518032315, "post_id": 48671554, "comment_id": 84342023, "body": "In general you DON&#39;T recursively print a linked list. Get this working to get a good grade on the assignment, but in real-life code stick to iteration."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1518032914, "post_id": 48671554, "comment_id": 84342386, "body": "On a side note, <code>curr</code> and <code>temp</code> do not belong as members of the <code>List</code> class, they should be local variables inside of the methods that use them. And <code>addNode()</code> can be greatly simplified. And <code>deleteNode()</code> should not call <code>delete delPtr;</code> when <code>curr</code> is <code>NULL</code>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1518034799, "post_id": 48671554, "comment_id": 84343354, "body": "Yeah, with recursion, you always need to consider iteration depth. Recursing through linked list uses stack space <i>k N</i>, where <i>N</i> is list length (unless using language which <i>quarantees</i> tail recursion). To use recursion, you generally want algorithm to use stack space <i>k log N</i> or something like that (examples, merge sort or quick sort). So, keep that in mind for &quot;real&quot; applications."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1518036455, "last_edit_date": 1518036455, "creation_date": 1518032845, "answer_id": 48672087, "question_id": 48671554, "link": "https://stackoverflow.com/questions/48671554/how-do-you-print-a-linked-list-recursively-in-c/48672087#48672087", "title": "How do you print a linked list recursively in C++", "body": "<p><code>head</code> is a (private) member of the <code>List</code> class.  There is no variable named <code>head</code> in <code>main()</code>, that is why the compiler is complaining.</p>\n\n<p>I would suggest either:</p>\n\n<ul>\n<li><p>adding a method to <code>List</code> to return the <code>head</code> node, then you can pass it to <code>printListRecur()</code>:</p>\n\n<pre><code>class List {\n    ...\npublic:\n    ...\n    nodePtr getHead() { return head; }\n    ...\n    void printListRecur(nodePtr node);\n    ...\n};\n\nlist.printListRecur(list.getHead());\n</code></pre></li>\n<li><p>remove the input parameter from <code>printListRecur()</code>, and then define a private method for <code>printListRecur()</code> to call recursively, passing it the <code>head</code> node:</p>\n\n<pre><code>class List {\nprivate:\n    ...\n    void internalPrintListRecur(nodePtr node);\n    ...\npublic:\n    ...\n    void printListRecur();\n    ...\n};\n\nvoid List::internalPrintListRecur(nodePtr node)\n{\n    if (node)\n    {\n        cout &lt;&lt; node-&gt;data &lt;&lt;endl;\n        internalPrintListRecur(node-&gt;next);\n    }\n}\n\nvoid List::printListRecur()\n{\n    internalPrintListRecur(head);\n}\n</code></pre></li>\n</ul>\n\n<p>But, as others stated in comments, iterating through the list recursively is not usually desired due to the fact that data may have to be pushed onto the call stack on each iteration. Using recursion to iterate a large list is subject to a stack overflow error, unless the code is written in a way that allows the compiler to apply tail call optimization to avoid the stack error.</p>\n\n<p>In this example, it is better to just use a simple iterative loop instead, like your <code>printList()</code> is already using.  Don't use recursion.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518034488, "post_id": 48672265, "comment_id": 84343211, "body": "&quot;<i>To use recursion, you need to have the passed and returned data to be the same type</i>&quot; - recursion does not require a return type. It technically doesn&#39;t require an input parameter, either. In its simplest form, recursion is just a function calling itself, nothing more. I like your use of a method on the <code>node</code> struct, though. It makes the implementation cleaner."}, {"owner": {"reputation": 61, "user_id": 8925700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6c5127dbde7dad96816049989172c6?s=128&d=identicon&r=PG&f=1", "display_name": "hijackhi77", "link": "https://stackoverflow.com/users/8925700/hijackhi77"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518035470, "post_id": 48672265, "comment_id": 84343719, "body": "Thanks for fixing my buggy code and you are absolutely correct. Recursive function calls do not require functions to have parameters and return values. The &quot;passed/returned&quot; in my answer do not refer to &quot;parameter/return value&quot;,  I should have used better wording."}], "tags": [], "owner": {"reputation": 61, "user_id": 8925700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6c5127dbde7dad96816049989172c6?s=128&d=identicon&r=PG&f=1", "display_name": "hijackhi77", "link": "https://stackoverflow.com/users/8925700/hijackhi77"}, "is_accepted": true, "score": 0, "last_activity_date": 1518034335, "last_edit_date": 1518034335, "creation_date": 1518033453, "answer_id": 48672265, "question_id": 48671554, "link": "https://stackoverflow.com/questions/48671554/how-do-you-print-a-linked-list-recursively-in-c/48672265#48672265", "title": "How do you print a linked list recursively in C++", "body": "<p>To use recursion, you need to have the passed and returned data to be the same type, i.e, the function should consume a <code>Node</code> and then return a <code>Node</code>, recursion call will not be formed if function consumes a <code>List</code> but return a <code>Node</code>.</p>\n\n<p>From my understanding, <code>List</code> can be a wrapper class for <code>Node</code>. To give you a very simple example:</p>\n\n<pre><code>class List {\n    struct Node {\n        int data; \n        Node *next;\n\n        void print();\n        ...\n    };\n\n    Node *head;\n\npublic:\n    void print();\n    ...\n};\n\nvoid List::Node::print() {\n    std::cout &lt;&lt; data &lt;&lt; endl;\n    if (next) next-&gt;print();\n}\n\nvoid List::print() {\n    if (head) head-&gt;print();\n}\n</code></pre>\n\n<p><code>List</code> will have all the interface methods that a client might need, but the actual work is done by the methods of <code>Node</code>, <strong>if you want to go with the recursion way</strong> (iteration is more frequently used since recursion consumes much more memory space).</p>\n"}], "owner": {"reputation": 11, "user_id": 4946149, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0e8f8330adc0b6290910420604b7fa23?s=128&d=identicon&r=PG&f=1", "display_name": "JonathanL", "link": "https://stackoverflow.com/users/4946149/jonathanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 48672265, "answer_count": 2, "score": 0, "last_activity_date": 1518036455, "creation_date": 1518030666, "last_edit_date": 1518031608, "question_id": 48671554, "link": "https://stackoverflow.com/questions/48671554/how-do-you-print-a-linked-list-recursively-in-c", "title": "How do you print a linked list recursively in C++", "body": "<p>I followed a guide on youtube by Paul Programming to create this linked list. Now I want to expand on it. I am trying to learn how to do recursive functions. </p>\n\n<p>The error I am getting is that <code>head</code> isn't declared in main.cpp. I was wondering if anyone could shed some light on the issue I am having.</p>\n\n<p>Code:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include \"linkedlist.h\"\n\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n\n    List list;\n    list.addNode(1);\n    list.addNode(2);\n    list.addNode(3);\n    list.addNode(4);\n    list.addNode(5);\n\n    cout &lt;&lt; \"Printing list\" &lt;&lt; endl;\n    list.printList();\n\n    cout &lt;&lt; \"Printing list recursively\" &lt;&lt; endl;\n    list.printListRecur(head);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>linkedlist.h:</p>\n\n<pre><code>#ifndef _LINKEDLISTHEADER_\n#define _LINKEDLISTHEADER_\n\nclass List{\nprivate:\n\n    typedef struct node{\n            int data;\n            node* next;\n    }* nodePtr;\n\n    nodePtr head;\n    nodePtr curr;\n    nodePtr temp;\n\npublic:\n\n    List();\n\n    void addNode(int addData);\n    void deleteNode(int delData);\n    void printList();\n\n    void printListRecur(nodePtr head);\n    };\n\n#endif\n</code></pre>\n\n<p>linkedlist.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include \"linkedlist.h\"\n\nusing namespace std;\n\nList::List()\n{\n    head = NULL;\n    curr = NULL;\n    temp = NULL;\n}\n\nvoid List::addNode(int addData)\n{\n    nodePtr n = new node;\n    n-&gt;next = NULL;\n    n-&gt;data = addData;\n\n    if(head != NULL)\n    {\n            curr = head;\n\n            while(curr-&gt;next != NULL)\n            {\n                    curr = curr-&gt;next;\n            }\n\n            curr-&gt;next = n;\n    }\n    else\n    {\n            head = n;\n    }\n}\n\nvoid List::deleteNode(int delData)\n{\n    nodePtr delPtr = NULL;\n    temp = head;\n    curr = head;\n\n    while(curr != NULL &amp;&amp; curr-&gt;data != delData)\n    {\n            temp = curr;\n            curr = curr-&gt;next;\n    }\n\n    if(curr == NULL)\n    {\n            cout &lt;&lt; delData &lt;&lt; \" was not in the list.\" &lt;&lt; endl;\n            delete delPtr;\n    }\n    else\n    {\n            delPtr = curr;\n            curr = curr-&gt;next;\n            temp-&gt;next = curr;\n            if(delPtr == head)\n            {\n                    head = head-&gt;next;\n                    temp = NULL;\n            }\n            delete delPtr;\n\n            cout &lt;&lt; \"The value \" &lt;&lt; delData &lt;&lt; \" was deleted\" &lt;&lt; endl;\n\n    }\n}\n\nvoid List::printList()\n{\n    curr = head;\n\n    while(curr != NULL)\n    {\n            cout &lt;&lt; curr-&gt;data &lt;&lt; endl;\n            curr = curr-&gt;next;\n    }\n}\n\nvoid List::printListRecur(nodePtr head)\n{\n    if(head == NULL)\n    {\n            return;\n    }\n\n    cout &lt;&lt; head-&gt;data &lt;&lt;endl;\n\n    printListRecur(head-&gt;next);\n}   \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1518030483, "post_id": 48671489, "comment_id": 84340960, "body": "Because <code>n</code> isn&#39;t sized appropriately."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518030692, "post_id": 48671489, "comment_id": 84341065, "body": "<i>&quot;When I do this the cout end up outputting nothing.&quot;</i> - it&#39;s undefined behaviour; that it ends up printing nothing on your machine with your compiler settings and one particular test run is just a coincidence. It could also crash or do other, completely unrelated things."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1518030694, "post_id": 48671489, "comment_id": 84341067, "body": "make some space <code>n.resize(5)</code>;"}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518030849, "post_id": 48671501, "comment_id": 84341158, "body": "No, using <code>at</code> is not recommended. It throws an exception, and that&#39;s almost always the wrong error handling strategy at such a low level. You cannot <code>catch</code> such an exception and &quot;handle&quot; it in any meaningful way. Just use <code>[]</code>. For debugging, a debug runtime can be used which detects out-of-bounds access and crashes immediately."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518031132, "post_id": 48671501, "comment_id": 84341315, "body": "@ChristianHackl I disagree. I&#39;d argue that there are two cases where your string index goes out of bounds: either you&#39;re expecting it (in which case you either do bounds checking yourself and never run the <code>.at</code>, so no exception is thrown, or you have a try/catch) or you&#39;re NOT expecting it, in which case having an exception and a program crash is a godsend for someone unaware of their bug. (furthermore, if this gets passed the developer and into the field, I&#39;d prefer a program crash on the exception over continuing to run in a bad state with UB)."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518031547, "post_id": 48671501, "comment_id": 84341568, "body": "An out-of-bounds access in such a low-level container, which is hopefully wrapped by your own higher-level program components, must be a bug in your code. Exceptions are <i>not</i> for bugs but for designed behaviour in rare situations. Use <code>assert</code>s for your <code>operator[]</code> calls instead and make the application crash immediately if a precondition fails; this also avoids someone catching the exception and continuing execution."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1518031698, "post_id": 48671501, "comment_id": 84341673, "body": "P.S.: You will notice that <code>at</code> is an anomaly in the standard library. Other standard container classes or algorithms normally don&#39;t throw if preconditions are violated. For example, no exceptions are thrown if you use invalid iterators in some function."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 5, "last_activity_date": 1518030611, "last_edit_date": 1518030611, "creation_date": 1518030462, "answer_id": 48671501, "question_id": 48671489, "link": "https://stackoverflow.com/questions/48671489/how-do-i-take-a-characters-and-turn-it-into-a-string-c/48671501#48671501", "title": "How do I take a characters and turn it into a string? C++", "body": "<p>Your issue here is that <code>n</code> is an empty string, meaning you're trying to access indexes that don't exist.</p>\n\n<p>To add characters to the string, you could use the string member function, <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/push_back\" rel=\"noreferrer\"><code>push_back</code></a></p>\n\n<pre><code>n.push_back(Alphabet[10]);\nn.push_back(alphabet[4]);\n...\n</code></pre>\n\n<p>Alternatively, <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D\" rel=\"noreferrer\">the <code>+=</code> operator</a> would also work:</p>\n\n<pre><code>n += Alphabet[10];\nn += alphabet[4];\n...\n</code></pre>\n\n<p>Furthermore, I'd suggest using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/at\" rel=\"noreferrer\"><code>.at()</code></a> over the subscript operator (<code>[]</code>) with your strings, as <code>.at()</code> will do bounds checking for you (which would have made this issue a little more obvious).</p>\n"}, {"tags": [], "owner": {"reputation": 207, "user_id": 9271064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfb4229520d6be6d0af22f2aac6cb250?s=128&d=identicon&r=PG&f=1", "display_name": "rain city", "link": "https://stackoverflow.com/users/9271064/rain-city"}, "is_accepted": false, "score": 0, "last_activity_date": 1518030828, "creation_date": 1518030828, "answer_id": 48671611, "question_id": 48671489, "link": "https://stackoverflow.com/questions/48671489/how-do-i-take-a-characters-and-turn-it-into-a-string-c/48671611#48671611", "title": "How do I take a characters and turn it into a string? C++", "body": "<p>When you create a string with <code>string n;</code>, an empty string is created. It has length zero, therefore trying to access character positions within the string with <code>n[0]</code> etc. does not work. These simply do not exist at that point.</p>\n\n<p>As said in another answer, you can use the member function <code>push_back</code> to add a character to a string, increasing its length by one.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1518032373, "creation_date": 1518032373, "answer_id": 48671965, "question_id": 48671489, "link": "https://stackoverflow.com/questions/48671489/how-do-i-take-a-characters-and-turn-it-into-a-string-c/48671965#48671965", "title": "How do I take a characters and turn it into a string? C++", "body": "<p>When you define <code>n</code> as <code>string n;</code>, then <code>n</code> will be an empty string (zero size and unspecified capacity), and accessing a string with an index beyond its size is undefined behaviour. </p>\n\n<p>There are two principal ways to overcome this:</p>\n\n<p>(1) Use operator <code>+=</code> like in <code>n += Alphabet[10];</code>, such that the string object will adapt its size accordingly. Note that this may lead to <code>realloc</code>-operations internally from time to time.</p>\n\n<p>(2) if you know the size in advance, with <code>string n(5, ' ')</code> you may reserve enough space in advance (and fill the string up with blanks in this case), such that <code>realloc</code>-operations will not have to occur. </p>\n"}], "owner": {"reputation": 3, "user_id": 9306490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b965fd17566c4b11a4271a41e9d28283?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin.C", "link": "https://stackoverflow.com/users/9306490/kevin-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 48671501, "answer_count": 3, "score": 0, "last_activity_date": 1518032373, "creation_date": 1518030401, "question_id": 48671489, "link": "https://stackoverflow.com/questions/48671489/how-do-i-take-a-characters-and-turn-it-into-a-string-c", "title": "How do I take a characters and turn it into a string? C++", "body": "<p>I'm just trying to use the alphabet to try and make words/names. When I do this the cout end up outputting nothing.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\nint main() {\n    char Alphabet[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    char alphabet[] = \"abcdefghijklmnopqrstuvwxyz\";\n    string n;\n\n    n[0] = Alphabet[10];\n    n[1] = alphabet[4];\n    n[2] = alphabet[21];\n    n[3] = alphabet[8];\n    n[4] = alphabet[13];\n    cout &lt;&lt; n &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "variant", "c++17"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1518029977, "post_id": 48671300, "comment_id": 84340684, "body": "i.e. <a href=\"http://en.cppreference.com/w/cpp/utility/variant/holds_alternative\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/variant/holds_alternative</a>"}, {"owner": {"reputation": 1038, "user_id": 7252179, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/bkNb0.jpg?s=128&g=1", "display_name": "Th&#233;o Champion", "link": "https://stackoverflow.com/users/7252179/th%c3%a9o-champion"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1518030347, "post_id": 48671300, "comment_id": 84340905, "body": "@EdHeal <code>holds_alternative</code> checks if a variant currently holds a given type  (which is nice), but does not return the underlying type directly :/"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1518030568, "post_id": 48671300, "comment_id": 84341008, "body": "depending of what you want, <code>std::visit</code> might help."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1518031537, "post_id": 48671300, "comment_id": 84341556, "body": "In the case of <code>std::variant&lt;int,float&gt;</code> there is very little advantage over just using a <code>double</code>, which can hold all <code>int</code>s exactly and all <code>float</code>s exactly. Also, GCC reports that <code>sizeof(std::variant&lt;int,float&gt;) == sizeof(double)</code> so there also isn&#39;t any extra memory used for storing <code>double</code>s. Of course, this doesn&#39;t mean the question is invalid since you may have just simplified your use case for the sake of the question."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1518030467, "creation_date": 1518030467, "answer_id": 48671505, "question_id": 48671300, "link": "https://stackoverflow.com/questions/48671300/get-the-underlying-type-of-a-stdvariant/48671505#48671505", "title": "Get the underlying type of a std::variant", "body": "<blockquote>\n  <p>Is it possible to get the underlying type used by a std::variant at runtime ?</p>\n</blockquote>\n\n<p>Yes it definitely is</p>\n\n<blockquote>\n  <p>Any idea of how I can achieve that ?</p>\n</blockquote>\n\n<p>Your try to achieve something very different than \"get the underlying type used by a std::variant at runtime\", as define <code>std::vector</code> type at runtime. This is very different issue and definitely not possible in this form as template instantiation happens at compile time. Closest solution would be to use <code>std::variant&lt;std::vector&lt;int&gt;, std::vector&lt;float&gt;&gt;</code> and use different vector based on runtime information from your variable <code>v</code></p>\n"}], "owner": {"reputation": 1038, "user_id": 7252179, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/bkNb0.jpg?s=128&g=1", "display_name": "Th&#233;o Champion", "link": "https://stackoverflow.com/users/7252179/th%c3%a9o-champion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 48671505, "answer_count": 1, "score": 0, "last_activity_date": 1518030467, "creation_date": 1518029698, "last_edit_date": 1518030208, "question_id": 48671300, "link": "https://stackoverflow.com/questions/48671300/get-the-underlying-type-of-a-stdvariant", "title": "Get the underlying type of a std::variant", "body": "<p>Quick question:</p>\n\n<p>Is it possible to get the underlying type used by a <code>std::variant</code> at runtime ?</p>\n\n<p>My first guess was to use <code>decltype()</code> like this:</p>\n\n<pre><code>    std::variant&lt;int, float&gt; v;\n    v = 12;\n    std::vector&lt;decltype(v)&gt; vec;\n</code></pre>\n\n<p>But the declared type for my vector is <code>std::vector&lt;std::variant&lt;int, float&gt;&gt;</code> not <code>std::vector&lt;int&gt;</code>.</p>\n\n<p>Any idea of how I can achieve that ? :)</p>\n"}, {"tags": ["c++", "macos", "opengl", "cmake", "glfw"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1518029654, "post_id": 48671188, "comment_id": 84340494, "body": "In a core profile, it is impossible to draw with glBegin/glEnd."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6515092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-53IhNdRCU2I/AAAAAAAAAAI/AAAAAAAAACk/EY98L-S-5Mw/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/6515092/james"}, "edited": false, "score": 0, "creation_date": 1518032201, "post_id": 48671338, "comment_id": 84341952, "body": "Perfect thank you! Because it\u2019s new to me. I wanted to check things were behaving before I got too involved with shaders etc. But following your advice I will persevere!"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 2, "last_activity_date": 1518029811, "creation_date": 1518029811, "answer_id": 48671338, "question_id": 48671188, "link": "https://stackoverflow.com/questions/48671188/homebrew-glfw-glew-on-mac/48671338#48671338", "title": "Homebrew GLFW/GLEW on Mac", "body": "<p>You are mixing old fixed-pipeline way and modern (with shaders) way.</p>\n\n<p><p>All lines between and including <code>glBegin</code> - <code>glEnd</code> are <em>only</em> for old OpenGL.</p>\n\n<p><p><code>GLFW_OPENGL_FORWARD_COMPAT</code> should not have any effect on OSX. Anyhow, remember it's not compatible with <code>GLFW_OPENGL_CORE_PROFILE</code>.</p>\n\n<p><p>My advise is that you write shaders stuff code (compilation, etc), even it's long and hard for the first time.</p>\n\n<p>BTW, <code>glew</code> is not needed in Mac. OSX provides the gl-functions, so you don't need to retrive the function pointers to them. It's harmless to use it though.</p>\n"}], "owner": {"reputation": 87, "user_id": 6515092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-53IhNdRCU2I/AAAAAAAAAAI/AAAAAAAAACk/EY98L-S-5Mw/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/6515092/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2228, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1518030888, "creation_date": 1518029263, "last_edit_date": 1518030888, "question_id": 48671188, "link": "https://stackoverflow.com/questions/48671188/homebrew-glfw-glew-on-mac", "title": "Homebrew GLFW/GLEW on Mac", "body": "<p>I have so far installed GLFW and GLEW through Homebrew on MacOs. These are installed in the following directory (usr/local/Cellar/).</p>\n\n<p>I have taken the following script from a tutorial, and added some legacy OpenGL, in the hope that I can test the OpenGL all linked and working. (The reason I am doing this is because I am still learning OpenGL, and I do not yet under shaders etc).</p>\n\n<p><strong>CMakeList.txt</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(Lib_Test)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nset(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -framework Cocoa -framework OpenGL -framework IOKit\")\n\nset(SOURCE_FILES src/main.cpp CMakeLists.txt)\n\n# add extra include directories\ninclude_directories(/usr/local/include)\n\n# add extra lib directories\nlink_directories(/usr/local/lib)\n\nadd_executable(Lib_Test main.cpp)\ntarget_link_libraries(Lib_Test glfw)\ntarget_link_libraries(Lib_Test glew)\nfind_package (GLM REQUIRED)\ninclude_directories(include)\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\n// Include GLEW. Always include it before gl.h and glfw.h, since it's a bit magic.\n\n#include &lt;GL/glew.h&gt;\n\n// Include GLFW\n#include &lt;GLFW/glfw3.h&gt;\n\n\n// Include GLM\n\n#include &lt;glm/glm.hpp&gt;\n\nusing namespace glm;\n\n\nint main(){\n\n// Initialise GLFW\nif( !glfwInit() )\n{\n    fprintf( stderr, \"Failed to initialize GLFW\\n\" );\n    return -1;\n}\n\n\nglfwWindowHint(GLFW_SAMPLES, 4); // 4x antialiasing\nglfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // We want OpenGL 3.3\nglfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 2);\nglfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE); // To make MacOS happy; should not be needed\nglfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); // We don't want the old OpenGL\n\n// Open a window and create its OpenGL context\nGLFWwindow* window; // (In the accompanying source code, this variable is global for simplicity)\nwindow = glfwCreateWindow( 800, 600, \"My App\", NULL, NULL);\nif( window == NULL ){\n    fprintf( stderr, \"Failed to open GLFW window.\\n\" );\n    glfwTerminate();\n    return -1;\n}\n\nglfwMakeContextCurrent(window); // Initialize GLEW\nglewExperimental=true; // Needed in core profile\nif (glewInit() != GLEW_OK) {\n    fprintf(stderr, \"Failed to initialize GLEW\\n\");\n    return -1;\n}\n\n\n// Ensure we can capture keys being pressed below\nglfwSetInputMode(window, GLFW_STICKY_KEYS, GL_TRUE);\n\ndo{\n\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glBegin(GL_TRIANGLES);\n    glVertex2f(-0.5f, -0.5f);\n    glVertex2f(0.0f, -0.5f);\n    glVertex2f(0.5f, -0.5f);\n    glEnd();\n\n    // Swap buffers\n    glfwSwapBuffers(window);\n    glfwPollEvents();\n\n} // Check if the ESC key was pressed or the window was closed\nwhile( glfwGetKey(window, GLFW_KEY_ESCAPE ) != GLFW_PRESS &amp;&amp; \nglfwWindowShouldClose(window) == 0 );\n\n\n\n}\n</code></pre>\n\n<p>Everything compiles, and runs. But nothing is ever drawn. I can even change the background colour (using glClear). My problem is, if something isn't working, I'm not even sure what that something is.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "boost", "boost-spirit"], "answers": [{"comments": [{"owner": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "edited": false, "score": 0, "creation_date": 1518038500, "post_id": 48672668, "comment_id": 84345296, "body": "Unfortunately this is not a viable option for me since I am stuck with the <code>boost::optional&lt;boost::variant&lt;...&gt;&gt;</code> pattern."}, {"owner": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "edited": false, "score": 0, "creation_date": 1518038626, "post_id": 48672668, "comment_id": 84345355, "body": "Side question, does the order of the rules in your <code>start_</code> matter? I was under the impression (quite possibly incorrectly so) that the first sub-rule corresponded to the first type-possibility in the variant, and then the second and so on (in other words, I&#39;d have written: <code>start_ = &quot;(unset)&quot; | string_ | bsk::int_</code>). But your code doesn&#39;t follow that pattern, so I guess order is unimportant and Karma/C++ will pick whichever rule works best?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "edited": false, "score": 0, "creation_date": 1518038804, "post_id": 48672668, "comment_id": 84345448, "body": "The order doesn&#39;t strictly matter unless perhaps a branch caters to several attribute types at the same time. I&#39;m having a hard time coming up with an example of that so maybe it&#39;s not applicable on the Karma side of Spirit. The point is that the attribute compatibility rules are type-based"}, {"owner": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "edited": false, "score": 0, "creation_date": 1518105556, "post_id": 48672668, "comment_id": 84377396, "body": "I&#39;ve been able to reduce this problem to something similar that seems more related to optional and variant. I am going to post another question since your answer does address the question here as asked."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "edited": false, "score": 1, "creation_date": 1518105698, "post_id": 48672668, "comment_id": 84377492, "body": "Oh yeah, I got the problem. I&#39;m just rarely motivated to fight really hard to get past the hurdles :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1518035161, "creation_date": 1518035161, "answer_id": 48672668, "question_id": 48671117, "link": "https://stackoverflow.com/questions/48671117/boost-karma-generate-default-text-when-boostoptional-is-unset/48672668#48672668", "title": "Boost Karma: generate default text when boost::optional is unset", "body": "<p>I agree that this seems not to work as you'd hope. Maybe a pragmatic simplification is to express \"Nil\" as a variant element type:</p>\n\n<pre><code>struct Nil final {};\n\nusing FooVariant = boost::variant&lt;Nil, std::string, int&gt;;\n</code></pre>\n\n<p>Now a default-contructed <code>FooVariant</code> will contain <code>Nil</code>. And the rule simply becomes:</p>\n\n<pre><code>    start_  = string_ | bsk::int_ | \"(unset)\";\n</code></pre>\n\n<h2>Demo</h2>\n\n<p><strong><kbd><a href=\"https://wandbox.org/permlink/drcIFJ4c5PPTHRhl\" rel=\"nofollow noreferrer\">Live On Wandbox</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/karma.hpp&gt;\n\nstruct Nil final {};\n\nusing FooVariant = boost::variant&lt;Nil, std::string, int&gt;;\n\ntemplate&lt;typename OutputIt = boost::spirit::ostream_iterator&gt;\nstruct FooGenerator : boost::spirit::karma::grammar&lt;OutputIt, FooVariant()&gt;\n{\n    FooGenerator()\n        : FooGenerator::base_type(start_)\n    {\n        namespace bsk = boost::spirit::karma;\n\n        string_ = '\"' &lt;&lt; *('\\\\' &lt;&lt; bsk::char_(\"\\\\\\\"\") | bsk::print | \"\\\\x\" &lt;&lt; bsk::right_align(2, '0')[bsk::hex]) &lt;&lt; '\"';\n        start_  = string_ | bsk::int_ | \"(unset)\";\n    }\n\n    boost::spirit::karma::rule&lt;OutputIt, std::string()&gt; string_;\n    boost::spirit::karma::rule&lt;OutputIt, FooVariant()&gt; start_;\n};\n\nint main() {\n    for (auto fo : { FooVariant{}, {FooVariant{42}}, {FooVariant{\"Hello\\r\\nWorld!\"}} }) {\n        std::cout &lt;&lt; boost::spirit::karma::format(FooGenerator&lt;&gt;(), fo) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>(unset)\n42\n\"Hello\\x0d\\x0aWorld!\"\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 1, "accepted_answer_id": 48672668, "answer_count": 1, "score": 1, "last_activity_date": 1518035161, "creation_date": 1518029006, "last_edit_date": 1518032183, "question_id": 48671117, "link": "https://stackoverflow.com/questions/48671117/boost-karma-generate-default-text-when-boostoptional-is-unset", "title": "Boost Karma: generate default text when boost::optional is unset", "body": "<p>Consider the following program:</p>\n\n<pre><code>using FooVariant = boost::variant&lt;std::string, int&gt;;\nusing FooOptional = boost::optional&lt;FooVariant&gt;;\n\ntemplate&lt;typename OutputIt = boost::spirit::ostream_iterator&gt;\nstruct FooGenerator\n    : boost::spirit::karma::grammar&lt;OutputIt, FooOptional()&gt;\n{\n    FooGenerator()\n        : FooGenerator::base_type(start_)\n    {\n        namespace bsk = boost::spirit::karma;\n\n        foovar_ = bsk::auto_;\n        start_ = -foovar_;\n    }\n\n    boost::spirit::karma::rule&lt;OutputIt, FooVariant()&gt; foovar_;\n    boost::spirit::karma::rule&lt;OutputIt, FooOptional()&gt; start_;\n};\n\nint main()\n{\n    FooVariant fv = \"foo\";\n    FooOptional fo = fv;\n    std::cout &lt;&lt; boost::spirit::karma::format(FooGenerator&lt;&gt;(), fo) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>As expected this will print <code>foo</code>. Likewise if I initialize <code>fo</code> simply with:</p>\n\n<pre><code>FooOptional fo;\n</code></pre>\n\n<p>Then the program will print nothing, again as expected. But instead of printing nothing, I would like to print <code>-</code> instead. So, I changed my rule for <code>start_</code> to:</p>\n\n<pre><code>start_ = (foovar_ | '-');\n</code></pre>\n\n<p>But this leads to a compilation error:</p>\n\n<blockquote>\n  <p>alternative_function.hpp:127:34: error: no member named\n  'is_compatible' in\n        'boost::spirit::traits::compute_compatible_component,\n  int>,\n        boost::optional, int> >, boost::spirit::karma::domain>'\n              if (!component_type::is_compatible(spirit::traits::which(attr_)))\n                   ~~~~~~~~~~~~~~~~^</p>\n</blockquote>\n\n<p>I also noticed that if I remove the <code>FooVariant</code> and instead make <code>FooOptional = boost::optional&lt;int&gt;</code> and update my generator, I can produce a crash if I pass it an unset optional. For example:</p>\n\n<pre><code>int main()\n{\n    FooOptional fo;\n    std::cout &lt;&lt; boost::spirit::karma::format(FooGenerator&lt;&gt;(), fo) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Which leads me to believe I'm using the optional generation incorrectly. What is the right way to do this?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Investigating a little more I discovered something interesting. My modified code is:</p>\n\n<pre><code>using FooVariant = boost::variant&lt;std::string, int&gt;;\nusing FooOptional = boost::optional&lt;int&gt;;\n\ntemplate&lt;typename OutputIt = boost::spirit::ostream_iterator&gt;\nstruct FooGenerator\n    : boost::spirit::karma::grammar&lt;OutputIt, FooOptional()&gt;\n{\n    FooGenerator()\n        : FooGenerator::base_type(start_)\n    {\n        namespace bsk = boost::spirit::karma;\n\n        foovar_ = bsk::int_;\n        start_ = (bsk::int_ | '-');\n    }\n\n    boost::spirit::karma::rule&lt;OutputIt, int()&gt; foovar_;\n    boost::spirit::karma::rule&lt;OutputIt, FooOptional()&gt; start_;\n};\n\nint main()\n{\n    FooOptional fo;\n    std::cout &lt;&lt; boost::spirit::karma::format(FooGenerator&lt;&gt;(), fo) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This works in that it will print the <code>-</code> or an integer value if one is assigned (which is not in the code pasted). However when I change my <code>start_</code> rule to this:</p>\n\n<pre><code>start_ = (foovar_ | '-');\n</code></pre>\n\n<p>I get a crash on an empty value.</p>\n"}, {"tags": ["c++", "c++11", "thread-local-storage"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518029363, "post_id": 48671113, "comment_id": 84340330, "body": "Taking the address is <i>odr-use</i> but I&#39;m concerned about potentially permitted optimisations, given that I literally never do anything with the object, despite the side effects of construction and destruction (let&#39;s face it, there are examples of exceptions to that in the language)"}, {"owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "edited": false, "score": 0, "creation_date": 1518029431, "post_id": 48671113, "comment_id": 84340363, "body": "Since the constructor of Bar gets called, there&#39;s no way any optimizer will remove that statement."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "edited": false, "score": 1, "creation_date": 1518029494, "post_id": 48671113, "comment_id": 84340397, "body": "@WouterHuysentruit: It&#39;s a little more complicated than just looking at the declaration and saying the constructor gets called: remove <code>(void)&amp;b</code> and you&#39;ll find that it isn&#39;t. The guarantee I&#39;m looking for is that adding <code>(void)&amp;b</code> back in ensures that it <i>is</i>."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 3, "creation_date": 1518029841, "post_id": 48671113, "comment_id": 84340610, "body": "I asked something similar <a href=\"https://stackoverflow.com/questions/24253584/when-is-a-thread-local-global-variable-initialized\">here</a>. The standard guarantees that a thread-local is initialized before its first odr-use, and <code>&amp;bar</code> is indeed an ODR-use. Am I missing something?"}, {"owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "edited": false, "score": 0, "creation_date": 1518029909, "post_id": 48671113, "comment_id": 84340648, "body": "I was indeed referring to the <code>(void)&amp;bar</code> statement, which you shouldn&#39;t remove of course."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1518037003, "post_id": 48671113, "comment_id": 84344499, "body": "@sbabbi: If that&#39;s so, then I don&#39;t think you&#39;re missing anything :)"}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 1, "closed_date": 1518037035, "answer_count": 0, "score": 3, "last_activity_date": 1518028976, "creation_date": 1518028976, "question_id": 48671113, "link": "https://stackoverflow.com/questions/48671113/is-this-a-valid-way-to-guarantee-thread-local-initialisation", "closed_reason": "Duplicate", "title": "Is this a valid way to guarantee thread_local initialisation?", "body": "<p>Consider the below testcase:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nthread_local struct Bar\n{\n     Bar() { std::cout &lt;&lt; '*' &lt;&lt; std::endl; }\n    ~Bar() { std::cout &lt;&lt; '~' &lt;&lt; std::endl; }\n} bar;\n\nstruct Foo\n{\n    void baz()\n    {\n        (void)&amp;bar;\n    }\n};\n\nint main()\n{\n    Foo f;\n    f.baz();\n\n    std::thread t(&amp;Foo::baz, &amp;f);\n    t.join();\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/73bb48a84bb19ebd\" rel=\"nofollow noreferrer\">On Coliru</a> it works as I intend, with the seemingly useless statement <code>(void)&amp;bar</code> apparently counting as \"use\" and ensuring that <code>bar</code> is constructed in any thread that invokes <code>baz()</code>.</p>\n\n<p><strong>Is this guaranteed, or should I do something more?</strong></p>\n\n<p>I'm hoping to use a class like <code>Bar</code> to wrap some per-thread initialisation required by a C library I'm going to use, with a minimum of boilerplate. <code>baz()</code> is already a function that any thread will call to do work with the C library, so this could effectively be a transparent solution.</p>\n"}, {"tags": ["c++", "regex", "qt"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518028749, "post_id": 48670995, "comment_id": 84339952, "body": "Related: <a href=\"https://stackoverflow.com/questions/36903985/email-validation-in-c\" title=\"email validation in c\">stackoverflow.com/questions/36903985/email-validation-in-c</a> (if not a dupe)."}, {"owner": {"reputation": 1049, "user_id": 9050579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1kU4v.jpg?s=128&g=1", "display_name": "Mohammad Javad Noori", "link": "https://stackoverflow.com/users/9050579/mohammad-javad-noori"}, "edited": false, "score": 0, "creation_date": 1518028812, "post_id": 48670995, "comment_id": 84339984, "body": "what about <code>[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\\\.[A-Za-z]{2,64}</code> for email <a href=\"http://emailregex.com/\" rel=\"nofollow noreferrer\">More</a>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1518029694, "post_id": 48670995, "comment_id": 84340517, "body": "Use <code>const QString Phone = &quot;^\\\\+?(\\\\d.*){3,}$&quot;;</code> and <code>const QString Email = &quot;^.+@.+$&quot;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1518030153, "creation_date": 1518030153, "answer_id": 48671427, "question_id": 48670995, "link": "https://stackoverflow.com/questions/48670995/using-regex-to-validate-email-and-phone-fields-qt/48671427#48671427", "title": "Using regex to validate email and phone fields Qt", "body": "<p>You have to remove surrounding <code>/</code>.<br>\nYou have to fix escaping, using raw string might help:</p>\n\n<pre><code>const QString Phone = R\"(^\\+?(\\d.*){3,}$)\";\nconst QString Email = R\"(^.+@.+$)\";\n</code></pre>\n\n<p>There exist more correct regexps to validate phone/mail btw.</p>\n"}, {"tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": false, "score": 0, "last_activity_date": 1518097170, "creation_date": 1518097170, "answer_id": 48686861, "question_id": 48670995, "link": "https://stackoverflow.com/questions/48670995/using-regex-to-validate-email-and-phone-fields-qt/48686861#48686861", "title": "Using regex to validate email and phone fields Qt", "body": "<p>I have created the following expressions to validate it:</p>\n\n<pre><code>// ((\\\\+?(\\\\d{2}))\\\\s?)? Matches for example +55 or 55 (optional) and an optional whitespace\n// ((\\\\d{2})|(\\\\((\\\\d{2})\\\\))\\\\s?)? Matches for example 11 or (11) (optional) and an optional whitespace\n// (\\\\d{3,15}) Matches at least 3 digits and at most 15 digits (required)\n// (\\\\-(\\\\d{3,15}))? Matches exactly a dash and at least 3 digits and at most 15 digits (optional)\n// E.g.: 1234-5678\n// E.g.: 11 1234-5678\n// E.g.: 11 91234-5678\n// E.g.: (11) 1234-5678\n// E.g.: +55 11 91234-5678\n// E.g.: +55 (11) 91234-5678\n// E.g.: 5511912345678\nconst QString Phone = \"^((\\\\+?(\\\\d{2}))\\\\s?)?((\\\\d{2})|(\\\\((\\\\d{2})\\\\))\\\\s?)?(\\\\d{3,15})(\\\\-(\\\\d{3,15}))?$\";\n\n// [A-Z0-9a-z._-]{1,} Matches one or more occurrences of that digits (including ., _ and -)\n// @ Matches exactly one @ character\n// (\\\\.(\\\\w+)) Matches exactly one dot and one or more word character (e.g. \".com\")\n// (\\\\.(\\\\w+))? Matches one dot and one or more word character (e.g. \".br\") (optional)\n// E.g.: user@email.com\n// E.g.: user_468@email.com.br\nconst QString Email = \"^[A-Z0-9a-z._-]{1,}@(\\\\w+)(\\\\.(\\\\w+))(\\\\.(\\\\w+))?(\\\\.(\\\\w+))?$\";\n</code></pre>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518097170, "creation_date": 1518028513, "question_id": 48670995, "link": "https://stackoverflow.com/questions/48670995/using-regex-to-validate-email-and-phone-fields-qt", "title": "Using regex to validate email and phone fields Qt", "body": "<p>I'm trying to use regex to validate email and phone fields (the fields are <code>QLineEdit</code>). </p>\n\n<p>I'm using the following example:</p>\n\n<pre><code>QString expression = \"[1-9]\\\\d{0,3}\";\nQRegularExpression rx(expression);\nQValidator *validator = new QRegularExpressionValidator(rx, this);\n\nQLineEdit *edit = new QLineEdit(this);\nedit-&gt;setValidator(validator);\n</code></pre>\n\n<p>I'm using the following expressions to validate it:</p>\n\n<pre><code>const QString Phone = \"/^\\+?(\\d.*){3,}$/\";\nconst QString Email = \"/^.+@.+$/\";\n</code></pre>\n\n<p>These expressions were obtained from this web site: <a href=\"https://projects.lukehaas.me/regexhub/\" rel=\"nofollow noreferrer\">https://projects.lukehaas.me/regexhub/</a></p>\n\n<p>But it does not work as expected, since it is 'blocking' any input to the email and phone fields.</p>\n\n<p>What regular expressions should I use to validate these fields?</p>\n\n<p>Note that I don't need a much precise validation. I need basically this:</p>\n\n<p><strong>Email</strong>: any content, an @ mark, any content, dot, any content. For example: <strong>user@email.com</strong> or <strong>user_123@email.com.br</strong></p>\n\n<p><strong>Phone</strong>: any number and the following characters \")(+- \".</p>\n"}, {"tags": ["c++", "adobe", "libtiff", "dng"], "comments": [{"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1554909192, "post_id": 48670841, "comment_id": 97925386, "body": "I would like to note here that this will fail if you need to preserve EXIF or other metadata that resides in places other than IDF0."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1574594367, "post_id": 48670841, "comment_id": 104280618, "body": "To save time of others who try to use this code as a base for their own DNG writer: the bpp=8 here is wrong: it&#39;s not bits per pixel, but samples (see where it&#39;s used), so it should be 1 (one photosite in the Bayer matrix is one pixel and has one sample), not 8."}], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 4627737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5f5f8408ceca1773fd142cba4bc6a97?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel R.", "link": "https://stackoverflow.com/users/4627737/daniel-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1540411251, "creation_date": 1540411251, "answer_id": 52977094, "question_id": 48670841, "link": "https://stackoverflow.com/questions/48670841/how-to-produce-an-adobe-dng-image-from-scratch-with-libtiff/52977094#52977094", "title": "How to produce an Adobe DNG image from scratch with LibTiff", "body": "<p>The example program works as expected. I did a mistake on the bayer pattern which is actually GRGB and </p>\n\n<pre><code>TIFFSetField(tif, TIFFTAG_CFAPATTERN, \"\\001\\000\\001\\002\");\n</code></pre>\n"}], "owner": {"reputation": 724, "user_id": 4627737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5f5f8408ceca1773fd142cba4bc6a97?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel R.", "link": "https://stackoverflow.com/users/4627737/daniel-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 4, "accepted_answer_id": 52977094, "answer_count": 1, "score": 3, "last_activity_date": 1540411251, "creation_date": 1518027907, "question_id": 48670841, "link": "https://stackoverflow.com/questions/48670841/how-to-produce-an-adobe-dng-image-from-scratch-with-libtiff", "title": "How to produce an Adobe DNG image from scratch with LibTiff", "body": "<p>I am trying to generate an Adobe DNG file using libTiff from scratch for my specfic camera RAW files. For this I wrote an example to generate a DNG which should be completely black. However, i cannot open my result and i am suspecting that there is something wrong or something i missed in my code.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys\\stat.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n#include &lt;errno.h&gt;  \n#include &lt;tiffio.h&gt;\n\n#define HPIXELS 2048            // number of horizontal pixels on PointGrey Grasshopper3 GS3-U3-41C6C sensor\n#define VPIXELS 2048            // number of vertical pixels on PointGrey Grasshopper3 GS3-U3-41C6C sensor\n\nint main(int argc, char **argv) {\n\n    static const short CFARepeatPatternDim[] = { 2,2 }; // 2x2 CFA\n\n    static const float cam_xyz[] = { \n        2.005, -0.771, -0.269, \n        -0.752, 1.688, 0.064, \n        -0.149, 0.283, 0.745 }; // xyz\n\n    static const double sRGB[] = {\n        3.6156, -0.8100, -0.0837,\n        -0.3094, 1.5500, -0.5439,\n        0.0967, -0.4700, 1.9805 }; // sRGB profile\n\n    static const float neutral[] = { 0.807133, 1.0, 0.913289 };\n\n    const int bpp = 8;\n    const char* fname = \"C:\\\\tmp\\\\dngTest\\\\output.DNG\";\n\n    long sub_offset = 0;\n    long white = 0xffff;\n\n    struct stat st;\n    struct tm tm;\n    char datetime[64];\n\n    FILE *ifp;\n    TIFF *tif;\n\n    // ============================================================================\n    stat(fname, &amp;st);\n    gmtime_s(&amp;tm, &amp;st.st_mtime);\n    sprintf(datetime, \"%04d:%02d:%02d %02d:%02d:%02d\",\n        tm.tm_year + 1900, tm.tm_mon + 1, tm.tm_mday, tm.tm_hour, tm.tm_min, tm.tm_sec);\n\n    if (!(tif = TIFFOpen(\"C:\\\\tmp\\\\dngTest\\\\output.dng\", \"w\"))) {\n        fclose(ifp);\n        exit(-1);\n    }\n\n    // Set meta data\n    TIFFSetField(tif, TIFFTAG_SUBFILETYPE, 1);\n    TIFFSetField(tif, TIFFTAG_IMAGEWIDTH,   HPIXELS &gt;&gt; 4);\n    TIFFSetField(tif, TIFFTAG_IMAGELENGTH,  VPIXELS &gt;&gt; 4);\n    TIFFSetField(tif, TIFFTAG_BITSPERSAMPLE, 8);\n    TIFFSetField(tif, TIFFTAG_COMPRESSION, COMPRESSION_NONE);\n    TIFFSetField(tif, TIFFTAG_PHOTOMETRIC, PHOTOMETRIC_RGB);\n    TIFFSetField(tif, TIFFTAG_MAKE, \"PointGrey\");\n    TIFFSetField(tif, TIFFTAG_MODEL, \"Grasshopper3 GS3-U3-41C6C\");\n    TIFFSetField(tif, TIFFTAG_ORIENTATION, ORIENTATION_TOPLEFT);\n    TIFFSetField(tif, TIFFTAG_SAMPLESPERPIXEL, 3);\n    TIFFSetField(tif, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG);\n    TIFFSetField(tif, TIFFTAG_SOFTWARE, \"primus_dng\");\n    TIFFSetField(tif, TIFFTAG_DATETIME, datetime);\n    TIFFSetField(tif, TIFFTAG_SUBIFD, 1, &amp;sub_offset);\n    TIFFSetField(tif, TIFFTAG_DNGVERSION, \"\\001\\001\\0\\0\");\n    TIFFSetField(tif, TIFFTAG_DNGBACKWARDVERSION, \"\\001\\0\\0\\0\");\n    TIFFSetField(tif, TIFFTAG_UNIQUECAMERAMODEL, \"PointGrey Grasshopper3 GS3-U3-41C6C\");\n    TIFFSetField(tif, TIFFTAG_COLORMATRIX1, 9, cam_xyz);\n    TIFFSetField(tif, TIFFTAG_ASSHOTNEUTRAL, 3, neutral);\n    TIFFSetField(tif, TIFFTAG_CALIBRATIONILLUMINANT1, 21);\n    // TIFFSetField(tif, TIFFTAG_ORIGINALRAWFILENAME, fname); TODO enable when clear not to crash\n\n    // All Black Thumbnail\n    {\n        unsigned char *buf = (unsigned char *)malloc((int)HPIXELS &gt;&gt; 4);\n        memset(buf, 0, (int)HPIXELS &gt;&gt; 4);\n        for (int row = 0; row &lt; (int)VPIXELS&gt;&gt; 4; row++)\n            TIFFWriteScanline(tif, buf, row, 0); // just leave it black, no software uses the built-in preview, builds off real image.\n    }\n\n    TIFFWriteDirectory(tif);\n\n\n    // fprintf(stderr, \"Writing TIFF header for main image...\\n\");\n    TIFFSetField(tif, TIFFTAG_SUBFILETYPE, 0);          // image\n    TIFFSetField(tif, TIFFTAG_IMAGEWIDTH, HPIXELS);     // in pixels\n    TIFFSetField(tif, TIFFTAG_IMAGELENGTH, VPIXELS);    // in pixels\n    TIFFSetField(tif, TIFFTAG_BITSPERSAMPLE, 16);       // int\n    TIFFSetField(tif, TIFFTAG_PHOTOMETRIC, PHOTOMETRIC_CFA);\n    TIFFSetField(tif, TIFFTAG_SAMPLESPERPIXEL, bpp);\n    TIFFSetField(tif, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG);\n    TIFFSetField(tif, TIFFTAG_CFAREPEATPATTERNDIM, CFARepeatPatternDim);\n    TIFFSetField(tif, TIFFTAG_CFAPATTERN, \"\\000\\001\\001\\002\"); // RGGB // 0 = Red, 1 = Green, 2 = Blue, 3 = Cyan, 4 = Magenta, 5 = Yellow, 6 = White \n    //TIFFSetField(tif, TIFFTAG_LINEARIZATIONTABLE, 256, curve); set it off for now\n    TIFFSetField(tif, TIFFTAG_WHITELEVEL, 1, &amp;white);\n\n    fprintf(stderr, \"Processing RAW data...\\n\");\n\n    // bit depth\n    unsigned char *pLine = (unsigned char*)malloc(sizeof(unsigned char) * HPIXELS);\n    memset(pLine, 0, sizeof(unsigned char) * HPIXELS);\n    for (int row = 0; row &lt; VPIXELS; row++)\n    {\n        TIFFWriteScanline(tif, pLine, row, 0); // this writes a single complete row\n    }\n    free(pLine);\n    TIFFClose(tif);\n    return 0;\n}\n</code></pre>\n\n<p>The minimal complete example is <a href=\"https://lab.apertus.org/T759\" rel=\"nofollow noreferrer\">leaned on this.</a> I am using a RGGB bayer battern. Switching to the Adobe DNG SDK is something I really want to avoid since building the libraries is a mess using VS2015 or higher.</p>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 347, "user_id": 1293477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/714f0329fb50d8d08967cd9b8db790a4?s=128&d=identicon&r=PG", "display_name": "Jeff Melton", "link": "https://stackoverflow.com/users/1293477/jeff-melton"}, "edited": false, "score": 0, "creation_date": 1518028248, "post_id": 48670837, "comment_id": 84339679, "body": "Hello!  Welcome to stack overflow.  Please <a href=\"https://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 4170, "user_id": 1349916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b9479ea48b3af72d671cea50ab01bdb?s=128&d=identicon&r=PG", "display_name": "JohannesAndersson", "link": "https://stackoverflow.com/users/1349916/johannesandersson"}, "edited": false, "score": 0, "creation_date": 1518207034, "post_id": 48670837, "comment_id": 84425792, "body": "I think this link will provide the answer you are looking for <a href=\"https://forums.unrealengine.com/community/work-in-progress/9147-solar-system-simulator-wip\" rel=\"nofollow noreferrer\">https://forums.unrealengine.com/community/work-in-progress/9&zwnj;&#8203;147-solar-system-sim&zwnj;&#8203;ulator-wip</a>"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 6575837, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ur3Wv.jpg?s=128&g=1", "display_name": "Rolthar", "link": "https://stackoverflow.com/users/6575837/rolthar"}, "is_accepted": false, "score": 1, "last_activity_date": 1520110224, "creation_date": 1520110224, "answer_id": 49089076, "question_id": 48670837, "link": "https://stackoverflow.com/questions/48670837/ue4-c-rotation-speed/49089076#49089076", "title": "UE4 C++ Rotation Speed", "body": "<p>You could model your planets with them on a root a certain distance away from the sun, then make a timeline that has a track from 0-360 degrees over a set amount of time (revolution time for example).</p>\n\n<p>Parent your planets to the sun,then set relative Rotation of your planets root with the float value that your timeline returns.</p>\n\n<p>Hope this helped.</p>\n"}], "owner": {"reputation": 19, "user_id": 7313677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f367c9b43d7c83fe244923aeaff081b?s=128&d=identicon&r=PG&f=1", "display_name": "Paris Jackson - Newman", "link": "https://stackoverflow.com/users/7313677/paris-jackson-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520110224, "creation_date": 1518027886, "question_id": 48670837, "link": "https://stackoverflow.com/questions/48670837/ue4-c-rotation-speed", "title": "UE4 C++ Rotation Speed", "body": "<p>I want to make a solar system model in Unreal Engine 4. I am a complete novice and this will be my second ever project. I was wandering how I could set the rotation path of a 'planet' and change its speed. For example the rotation of Jupiter around the sun would be slower than the roation speed of Earth around the sun.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "c++", "cmake", "swig", "distutils"], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 1935424, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/28b385c0f4cce74f68935b9c13178444?s=128&d=identicon&r=PG", "display_name": "JohnA", "link": "https://stackoverflow.com/users/1935424/johna"}, "is_accepted": false, "score": 0, "last_activity_date": 1605718994, "creation_date": 1605718994, "answer_id": 64897798, "question_id": 48670816, "link": "https://stackoverflow.com/questions/48670816/packaging-and-installing-python-bindings-with-cmake/64897798#64897798", "title": "Packaging and installing python bindings with CMake", "body": "<p>Looks like an old question, but here goes anyway.</p>\n<p>See this example <a href=\"https://bitbucket.org/arrizza-public/swig_examples_cpp/src/master/\" rel=\"nofollow noreferrer\">swig_examples_cpp</a> showing simple C++ functions wrapped by SWIG, using CMake and CLion to build it. The C version is <a href=\"https://bitbucket.org/arrizza-public/swig_examples/src/master/\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Here's the full Python Cmake file:</p>\n<pre><code>project(python_example)\n\nfind_package(SWIG REQUIRED)\ninclude(${SWIG_USE_FILE})\n\nfind_package(PythonLibs)\ninclude_directories(${PYTHON_INCLUDE_PATH})\ninclude_directories(${CMAKE_CURRENT_SOURCE_DIR})\nset(CMAKE_SWIG_FLAGS &quot;&quot;)\n\nset_source_files_properties(../src/example.i PROPERTIES CPLUSPLUS ON)\n\nswig_add_library(python_example\n        TYPE MODULE\n        LANGUAGE python\n        OUTPUT_DIR ../../py_out   # move the .so to py_out\n        OUTFILE_DIR .             # leave the .cpp in cmake-build-debug\n        SOURCES ../src/example.i\n        ../src/example.cpp ../src/example.h\n        )\n\nset_target_properties(python_example PROPERTIES\n        LIBRARY_OUTPUT_DIRECTORY ../../py_out  # must match dir in OUTPUT_DIR\n        )\n</code></pre>\n<p>After building it, run python test.py to see it go. Note it's all in bash/Ubuntu, so MacOs should be ok, but windows may cause you some churn.</p>\n<p>See the README for the full details.</p>\n"}], "owner": {"reputation": 131, "user_id": 2399185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/582ea5fca3fd2afddaf2eb9f3adde908?s=128&d=identicon&r=PG", "display_name": "dirtshell", "link": "https://stackoverflow.com/users/2399185/dirtshell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 999, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1605718994, "creation_date": 1518027812, "question_id": 48670816, "link": "https://stackoverflow.com/questions/48670816/packaging-and-installing-python-bindings-with-cmake", "title": "Packaging and installing python bindings with CMake", "body": "<p>I have a C++ project that I have generated Python bindings for using SWIG. I am now trying to finish the CMake file for the project by adding an install operation. But whenever I finish the install and try to call my functions, I get an error stating <code>foo has no attribute bar()</code>.</p>\n\n<p>It has to do with the fact that Python doesn't know where the <code>.so</code> file that the bindings rely on is. If both <code>foo.py</code> and <code>_foo.so</code> are in the same directory I can use the bindings perfectly. I am struggling with figuring out how I am supposed to \"install\" both the Python bindings and the <code>.so</code> they depend on, all in a portable manner.</p>\n\n<p>Obviously I could just export the install path of the <code>.so</code> to <code>LD_LIBRARY_PATH</code>, but this seems like a hacky work around for what must have a proper solution.</p>\n\n<p>My <code>CMakeLists.txt</code>. I have cut out the bits related to compiling of my C++ lib <code>RTK</code>:</p>\n\n<pre><code># Project\n##\n\n# TODO this actually needs 3.3+\ncmake_minimum_required(VERSION 2.6)\nproject(RTKLIB)\n\nFIND_PACKAGE(SWIG REQUIRED)\nINCLUDE(${SWIG_USE_FILE})\n\nFIND_PACKAGE(PythonLibs 3 REQUIRED)\nINCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})\n\nfind_program(PYTHON \"python3\" REQUIRED)\ninclude(GNUInstallDirs)\n\n\n# Variable declarations\n##\n# Define this directory \nset(RTKLIB_ROOT ${CMAKE_CURRENT_SOURCE_DIR})\n\n# Define the build dir\nset(RTKLIB_BIN_DIR \"${RTKLIB_ROOT}/build\")\n\nlist(APPEND CMAKE_MODULE_PATH \"${RTKLIB_ROOT}/cmake\")\n\n# Setup python vars\nset(SETUP_PY_IN \"${RTKLIB_ROOT}/setup.py.in\")  # initial version of setup.py\nset(SETUP_PY    \"${RTKLIB_BIN_DIR}/setup.py\")     # cmake generated setup.py\nset(OUTPUT      \"${RTKLIB_BIN_DIR}/python_timestamp\") # Timestamp used as dep\nset(RTKLIB_PY  \"rtk_lib\")  # name of the python lib\n\n\n# Set the output dir for SWIG\nset(CMAKE_SWIG_OUTDIR ${RTKLIB_BIN_DIR}/${RTKLIB_PY})\n\n\n# Generate Python bindings\n##\n# SWIG Config\nSET_PROPERTY(SOURCE include/rtk_lib.i PROPERTY CPLUSPLUS ON)\nSWIG_ADD_MODULE(${RTKLIB_PY} python include/rtk_lib.i)           # Generate C-Python bindings\nSWIG_LINK_LIBRARIES(${RTKLIB_PY} RTK ${PYTHON_LIBRARIES})    # Link the bindings with python\n\n# Generate the setup.py file\nconfigure_file(${SETUP_PY_IN} ${SETUP_PY}) \n\n# Build command that depends on the SWIG output files and updates the timestamp\nadd_custom_command(OUTPUT ${OUTPUT}\n                COMMAND ${PYTHON} ${SETUP_PY} build\n                COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}\n                DEPENDS ${RTKLIB_BIN_DIR}\\${SWIG_MODULE_${RTKLIB_PY}_REAL_NAME})\n\n# Custom target that depends on the timestamp file generated by the custom command\nadd_custom_target(ALL DEPENDS ${OUTPUT})\n\n# Install the shared library\ninstall(TARGETS ${SWIG_MODULE_${RTKLIB_PY}_REAL_NAME}\n    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}\n    PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})\n\n# Install to user's packages\ninstall(CODE \"execute_process(COMMAND ${PYTHON} ${SETUP_PY} install --user)\")\n</code></pre>\n\n<p>And here is my <code>setup.py.in</code> if its any help:</p>\n\n<pre><code>from distutils.core import setup\n\nsetup(name='rtk_lib',\n        version='${PACKAGE_VERSION}',\n        description=\"\"\"Python bindings for rtk_lib, allowing for serial and\n                and file interfaces with RTK messages.\"\"\",\n        packages=['${RTKLIB_PY}'])\n</code></pre>\n\n<p>Quick Summary of the code: It generates wrapper classes for the C++ that are Python compatible, then it compiles and links the wrapper classes with the Python libs and the original RTK C++ library. After that you have a directory called <code>rtk_lib</code> which has both your wrapper classes and the <code>rtk_lib.py</code> module. Outside of this <code>rtk_lib</code> directory is the outputted <code>_rtk_lib.so</code> shared library that the <code>rtk_lib.py</code> relies on. So in order to get the bindings to work, I copy <code>_rtk_lib.so</code> in to that <code>rtk_lib</code> directory and call <code>python3</code>. Then I can import the lib and everything is great.</p>\n\n<p>I try to install the shared lib, but even then I still get the same <code>rtk_lib has no attribute blablabla()</code>.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1518027080, "post_id": 48670602, "comment_id": 84339020, "body": "Unrelated to your question and problem, but IMO throwing an exception is maybe not the right choice here? Or is the use-case of not finding the name actually exceptional? And if it is, then it&#39;s not really <i>out of bounds</i> is it?"}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 4, "creation_date": 1518027220, "post_id": 48670602, "comment_id": 84339106, "body": "Your lambda is missing the return keyword."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518027351, "post_id": 48670602, "comment_id": 84339190, "body": "In your case I would just stick with the range based for loop.  It is simple, easier to understand and is less code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518027354, "post_id": 48670602, "comment_id": 84339191, "body": "I can only second some programmer dude, there is nothing &quot;out of range&quot; here and not finding an element is also nothing exceptional"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518027472, "post_id": 48670602, "comment_id": 84339269, "body": "Probably remnants of Java programming, where everything under the sun that goes wrong is worthy of throwing an exception."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1518028147, "post_id": 48670602, "comment_id": 84339625, "body": "<code>compare</code> method returns <code>int</code> <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/compare\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/compare</a>, I dont see how your other function &quot;works just fine of course&quot; if when composer names match it returns 0, thus going to the next name in the loop"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1518033513, "post_id": 48670602, "comment_id": 84342701, "body": "@Someprogrammerdude the interface was specified by the example I was working to; is there some other manner or idiom of indicating an error when the return type is a reference?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1518034066, "post_id": 48670602, "comment_id": 84342960, "body": "@Toby You got a point there. The only thing might be to return a sentinel object, similar to how the <code>end</code> iterator works. Especially if you&#39;re not allowed to change the signature."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1518029183, "last_edit_date": 1518029183, "creation_date": 1518027749, "answer_id": 48670804, "question_id": 48670602, "link": "https://stackoverflow.com/questions/48670602/how-to-search-by-member-accessor-value-with-stdfind-if/48670804#48670804", "title": "How to search by member accessor value with std::find_if()?", "body": "<p>You are on the right track, your lambda needs return statement. Also in such case you do not have to specify it's return type explicitly, it can be deduced:</p>\n\n<pre><code>find_if(composers.begin(), composers.end(), \n            [last_name](const Composer&amp; c) { return c.get_last_name() == last_name);});\n</code></pre>\n\n<p>you original code should not compile or at least emit warning(s), you should pay attention to them.</p>\n\n<p>Note: it is not clear how your original code worked if you tested it, it should be:</p>\n\n<pre><code>if (c.get_last_name().compare(last_name) == 0 ) \n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>if (c.get_last_name() == last_name ) \n</code></pre>\n\n<p>as <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/compare\" rel=\"nofollow noreferrer\"><code>std::string::compare()</code></a> returns <code>int</code> -1 0 or 1, so your code searches for string that does not match variable <code>last_name</code></p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1518029970, "creation_date": 1518029970, "answer_id": 48671375, "question_id": 48670602, "link": "https://stackoverflow.com/questions/48670602/how-to-search-by-member-accessor-value-with-stdfind-if/48671375#48671375", "title": "How to search by member accessor value with std::find_if()?", "body": "<p>With <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">range-v3</a>, you may use <em>projection</em>:</p>\n\n<pre><code>auto it = ranges::find(composers, last_name, &amp;composers::get_last_name);\n</code></pre>\n"}], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 48670804, "answer_count": 2, "score": 0, "last_activity_date": 1518029970, "creation_date": 1518026873, "question_id": 48670602, "link": "https://stackoverflow.com/questions/48670602/how-to-search-by-member-accessor-value-with-stdfind-if", "title": "How to search by member accessor value with std::find_if()?", "body": "<p>I am learning C++ at the moment and have an example program implemented with an array of objects data store. To make some other operations easier, I have changed the store to a vector. With this change I am now not sure of the best way to search the store to find an object based on a member accessor value.</p>\n\n<p>Initially I used a simple loop:</p>\n\n<pre><code>vector&lt;Composer&gt; composers; // where Composer has a member function get_last_name() that returns a string\n\nComposer&amp; Database::get_composer(string last_name)\n{\n    for (Composer&amp; c : composers)\n        if (c.get_last_name().compare(last_name))\n            return c;\n\n    throw std::out_of_range(\"Composer not found\");\n}\n</code></pre>\n\n<p>This works just fine of course, but to experiment I wanted to see if there were vector specific functions that could also do the job. So far I have settled on trying to use <code>find_if()</code> (if there is a better function, please suggest).</p>\n\n<p>However, I am not sure exactly the correct way to use <code>find_if()</code>. Based on code seen in online research I have replaced the above with the following:</p>\n\n<pre><code>vector&lt;Composer&gt; composers; // where Composer has a member function get_last_name() that returns a string\n\nComposer&amp; Database::get_composer(string last_name)\n{\n    auto found = find_if(composers.begin(), composers.end(), \n                [last_name](Composer&amp; c) -&gt; bool {c.get_last_name().compare(last_name);});\n\n    if (found == composers.end())\n        throw out_of_range(\"Composer not found\");\n    else\n        return *found;\n}\n</code></pre>\n\n<p>This does not work. It does find a result, but it is the incorrect one. If an argument that matches, say the third composer's last name the function always returns the <em>first</em> item from the vector (if I pass an argument that doesn't match <em>any</em> last name the function correctly throws an exception)... what am I doing wrong?</p>\n"}, {"tags": ["android", "c++", "delphi", "android-ndk"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518027159, "post_id": 48670592, "comment_id": 84339065, "body": "You could call it, but what are you going to pass in for <code>JavaVM*</code> ?"}, {"owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518027363, "post_id": 48670592, "comment_id": 84339198, "body": "@RichardCritten , latter on i&#39;ll save  JNIEnv* env as global variable to use it in some procedures and functions within my native lib"}, {"owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "edited": false, "score": 0, "creation_date": 1518029411, "post_id": 48670592, "comment_id": 84340359, "body": "Just wondering why JNI_OnLoad is not being invoked , i can\u2019t see any log about"}, {"owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1518030766, "post_id": 48670592, "comment_id": 84341103, "body": "@pskink , i\u2019ve no java code just my native Lib and Delphi as a consumer App only"}, {"owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518038379, "post_id": 48670592, "comment_id": 84345248, "body": "@RemyLebeau , thank you so there&#39;s no other option / solution than calling <code>JNI_OnLoad</code> function within my delphi code ?"}, {"owner": {"reputation": 2661, "user_id": 3164070, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5woQK.jpg?s=128&g=1", "display_name": "Dave Nottage", "link": "https://stackoverflow.com/users/3164070/dave-nottage"}, "edited": false, "score": 0, "creation_date": 1518040584, "post_id": 48670592, "comment_id": 84346288, "body": "You could perhaps try actually using System.loadLibrary, however you would need to use an import for the System class for at least that method, e.g: <a href=\"https://pastebin.com/giM3fEda\" rel=\"nofollow noreferrer\">pastebin.com/giM3fEda</a>"}, {"owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "edited": false, "score": 0, "creation_date": 1518041385, "post_id": 48670592, "comment_id": 84346647, "body": "if i call the <code>JNI_OnLoad() </code> in my delphi code as follows :  <code>function JNI_OnLoad(VM: PJavaVM; reserved: pointer): JInt; cdecl; begin   &#47;&#47; should i intialize my VM pointer here or what ? end;</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518045093, "post_id": 48670592, "comment_id": 84348201, "body": "@bodam: See the answer I just posted."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1518045068, "creation_date": 1518045068, "answer_id": 48674859, "question_id": 48670592, "link": "https://stackoverflow.com/questions/48670592/invoke-jni-onload-from-delphi/48674859#48674859", "title": "Invoke JNI_OnLoad from Delphi", "body": "<blockquote>\n  <p>Just wondering why <code>JNI_OnLoad</code> is not being invoked</p>\n</blockquote>\n\n<p><code>JNI_OnLoad()</code> is normally called by the Java JVM if it is the one loading your native library (ie, when Java code calls <a href=\"https://developer.android.com/reference/java/lang/System.html#loadLibrary(java.lang.String)\" rel=\"nofollow noreferrer\"><code>System.loadLibrary()</code></a>).</p>\n\n<p>Since that is not the case in your example, that is why your <code>JNI_OnLoad()</code> is not being called. You are directly loading the library yourself, so you will have to call <code>JNI_OnLoad()</code> yourself.</p>\n\n<p>Embarcadero declares a <code>TJNI_OnLoad</code> function pointer type in the <code>Embarcadero.Jni</code> unit. Use <code>GetProcAddress()</code> to get a pointer to the library's exported <code>JNI_OnLoad()</code> function, and assign that pointer to a <code>TJNI_OnLoad</code> variable. Then you can call <code>JNI_OnLoad()</code> like any other function.</p>\n\n<blockquote>\n  <p>latter on i'll save <code>JNIEnv* env</code> as global variable to use it in some procedures and functions within my native lib</p>\n</blockquote>\n\n<p><code>JNI_OnLoad()</code> takes a <code>JavaVM*</code> pointer as input. Whoever calls <code>JNI_OnLoad()</code> must pass in a pointer to a valid <code>JavaVM</code> object.</p>\n\n<p>The Java JVM would normally handle that for you.  But, since you are loading the library yourself, and thus have to call <code>JNI_OnLoad()</code> yourself, you have to provide a <code>JavaVM</code> object from your Delphi code.  Rather than call <code>JNI_CreateJavaVM()</code> yourself, you <em>should</em> be able to use the same <code>JavaVM</code> object that Delphi's RTL uses internally - the <code>JavaMachine</code> pointer in the RTL's <code>System</code> unit (just typecast it to <code>PJavaVM</code>, which is also declared in the <code>Embarcadero.Jni</code> unit).</p>\n\n<p>Try this:</p>\n\n<pre><code>uses\n   ..., Embarcadero.Jni\n\nconst\n  LIBNAME = 'libtest.so';\n\nfunction try_load_dll: THandle;\nvar\n  libPath: string;\n  OnLoadFunc: TJNI_OnLoad;\n  hlib: THandle;\nbegin\n  Result := 0;\n  libPath := TPath.Combine(TPath.GetLibraryPath, libname);\n  hlib := LoadLibrary(PChar(libPath));\n  if hlib = 0 then Exit;\n  @OnLoadFunc := GetProcAddress(hlib, 'JNI_OnLoad');\n  if not Assigned(OnLoadFunc) then\n  begin\n    FreeLibrary(hlib);\n    Exit;\n  end;\n  OnLoadFunc(PJavaVM(System.JavaMachine), nil);\n  Result := hlib;\nend;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8746363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a5d01a461c5580620bc54711237e49?s=128&d=identicon&r=PG&f=1", "display_name": "bodam", "link": "https://stackoverflow.com/users/8746363/bodam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 48674859, "answer_count": 1, "score": 1, "last_activity_date": 1518045068, "creation_date": 1518026847, "last_edit_date": 1518027462, "question_id": 48670592, "link": "https://stackoverflow.com/questions/48670592/invoke-jni-onload-from-delphi", "title": "Invoke JNI_OnLoad from Delphi", "body": "<p>i've a native c++ library that i wantto use in my delphi android project; \nHere's the important part that i want to invoke it from Delphi code part:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;android/log.h&gt;\n\n#define  LOG_TAG    \"EmbJniTest\"\n#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)\n\n\nJavaVM* gJavaVM = NULL;\n//------------------------------------------------------------------------\njint JNI_OnLoad(JavaVM* aVm, void* aReserved)\n{\n // cache java VM\n gJavaVM = aVm;\n JNIEnv* env;// latter on it'll be used as global var\n LOGI(\"JVM INIT\");\n if (aVm-&gt;GetEnv(reinterpret_cast&lt;void**&gt;(&amp;env), JNI_VERSION_1_6) != JNI_OK)\n {\n  LOGI(\"Failed to get the environment\");\n  return -1;\n }\n return JNI_VERSION_1_6;\n}\n</code></pre>\n\n<p>and here's my delphi code part to load mylibrary :</p>\n\n<pre><code>LIBNAME = 'libtest.so';\n\n\nfunction try_load_dll:integer;\nvar libPath:system.string;\nbegin\n  _status:= 0 ;\n  libPath:=TPath.Combine(tpath.GetLibraryPath,libname);\n  _status := LoadLibrary(PChar(libPath));\n  result:=_Status;\n  if( _status= 0 )then exit;\nend;\n</code></pre>\n\n<p>The problem is that the </p>\n\n<pre><code>JNI_OnLoad\n</code></pre>\n\n<p>Is never invoked ; i can't see any log about it in the logcat .</p>\n\n<p>And i've read that The invocation of JNI_OnLoad is done by System.loadLibrary().  If \nyou're not using that to load the library, JNI_OnLoad won't happen. </p>\n\n<p>from <a href=\"https://groups.google.com/forum/m/#!topic/android-ndk/cKZRjSMUemw\" rel=\"nofollow noreferrer\">here</a>\nSo please is there anyway i can invoke it from my delphi code .</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "c", "midi", "arduino-uno"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518028148, "post_id": 48670539, "comment_id": 84339627, "body": "Not sure I get this. You say it works fine for one pair of LDRs but doesn&#39;t work when you add a second. Do you mean a second pair, i.e. 4 LDRs in total?"}, {"owner": {"reputation": 55, "user_id": 6435659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63c79f7731b8dc972c41f66a24b599e0?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/6435659/tyler"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518028926, "post_id": 48670539, "comment_id": 84340048, "body": "yes, there are 4 LDRs total"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518028991, "post_id": 48670539, "comment_id": 84340086, "body": "In <code>talkMIDI()</code> you test <code>cmd &amp; 0xF0 &lt;= 0xB0</code> . Should that actually be <code>&gt;=</code>?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518029268, "post_id": 48670539, "comment_id": 84340272, "body": "What are you actually playing it through, btw?"}, {"owner": {"reputation": 55, "user_id": 6435659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63c79f7731b8dc972c41f66a24b599e0?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/6435659/tyler"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518030038, "post_id": 48670539, "comment_id": 84340725, "body": "I just tested with &gt;= and it didn&#39;t play any sound. It is a simple amplifier"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518031230, "post_id": 48670539, "comment_id": 84341373, "body": "I can&#39;t find any amplifiers with MIDI inputs..."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1518031699, "post_id": 48670539, "comment_id": 84341674, "body": "I would have thought you would want to immediately do 4 <code>analogRead()s</code> at the start of each loop and then decide what to do when you have them all. Otherwise you read <code>val[0]</code> only and then decide what to do partially based on <code>val[1]</code> through <code>val[3]</code> which you have yet to read."}], "owner": {"reputation": 55, "user_id": 6435659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63c79f7731b8dc972c41f66a24b599e0?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/6435659/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518026662, "creation_date": 1518026662, "question_id": 48670539, "link": "https://stackoverflow.com/questions/48670539/arduino-uno-midi-notes-playing-incorrectly", "title": "Arduino-uno midi notes playing incorrectly", "body": "<p>I am designing an arduino-uno based electronic harp using LDRs as the strings (when the LDR is pressed the note plays). It is midi based. It currently has four LDRs that play the correct notes when pressed. I am trying to make it play a different note when two LDRs are pressed to expand the range. This works when I have the code for one pair of LDRs but when I add code for a second it sounds extremely wrong, playing a growling sound. </p>\n\n<p>This is the code for one pair of LDRs:</p>\n\n<pre><code>for (nt=0;nt&lt;notes;nt++) \n  {\n      val[nt]=analogRead(Det[nt]);\n      delay(1);\n\n      if (val[0]&lt;threshold[1]&amp;&amp;val[1]&lt;threshold[1]){\n            if(prev_nts[nt] == false) {\n              digitalWrite(LED[0], HIGH);  //TURN led ON if value below threshold\n              digitalWrite(LED[1], HIGH);\n              noteOn(0, music[0], vol[nt]); //note (middle number) 40-62, (channel, pitch, volume from array)\n              prev_nts[nt] = true;\n            }}\n      else {\n          digitalWrite(LED[0], LOW);\n          digitalWrite(LED[1], LOW);\n          //TURN led OFF if value below threshold\n          noteOff(0, music[0], 0); //note (middle number) 40-62\n          prev_nts[nt] = false;\n        }\n}\n</code></pre>\n\n<p>This is my code for two pairs of LDRs:</p>\n\n<pre><code>for (nt=0;nt&lt;notes;nt++) \n  {\n      val[nt]=analogRead(Det[nt]);\n      delay(1);\n\n      if (val[0]&lt;threshold[1]&amp;&amp;val[1]&lt;threshold[1]){\n            if(prev_nts[nt] == false) {\n              digitalWrite(LED[0], HIGH);  //TURN led ON if value below threshold\n              digitalWrite(LED[1], HIGH);\n              noteOn(0, music[0], vol[nt]); //note (middle number) 40-62, (channel, pitch, volume from array)\n              prev_nts[nt] = true;\n            }}\n      else {\n          digitalWrite(LED[0], LOW);\n          digitalWrite(LED[1], LOW);\n          //TURN led OFF if value below threshold\n          noteOff(0, music[0], 0); //note (middle number) 40-62\n          prev_nts[nt] = false;\n        }\n\n\n      if (val[2]&lt;threshold[2]&amp;&amp;val[3]&lt;threshold[3]){\n            if(prev_nts[nt] == false) {\n              digitalWrite(LED[2], HIGH);  //TURN led ON if value below threshold\n              digitalWrite(LED[3], HIGH);\n              noteOn(0, music[1], vol[nt]); //note (middle number) 40-62, (channel, pitch, volume from array)\n              prev_nts[nt] = true;\n            }}\n      else {\n          digitalWrite(LED[2], LOW);\n          digitalWrite(LED[3], LOW);\n          //TURN led OFF if value below threshold\n          noteOff(0, music[1], 0); //note (middle number) 40-62\n          prev_nts[nt] = false;\n        }\n</code></pre>\n\n<p>}</p>\n\n<p>This is my whole code:</p>\n\n<pre><code>// 4 channel photodetector and LED indicator. \n// Kate Sugden, August 2017\n\n#include &lt;SoftwareSerial.h&gt;\nSoftwareSerial mySerial(2, 3); // RX, TX\n\n//  pins for photodetectors and LED indicators\n  byte ledPin = 13; //MIDI traffic inidicator\n\n  int Det[] = {A0,A1,A2,A3};  // defines Detecotr pins\n  int LED[] = {11,10,9,8};  // defines LED indicator pins\n  int notes = 4;              //number of notes in harp\n  int val []  = {0,0,0,0};   // sets all the values of the detector readings to zero - need as many as notes\n  int threshold []  = {0,0,0,0}; \n  boolean prev_nts[] = {false,false,false,false};\n  int music[] = {48,50,52,53};\n  boolean notePressed = false;\n\n\n// defined delays and thresholds\n  int nt = 0;   // note number\n  int timer = 10;  // delay option\n\n\n//MIDI\n  byte note = 0; //The MIDI note value to be played\n  byte resetMIDI = 4; //Tied to VS1053 Reset line\n // int  instrument = 118; //Harp is 47, 80 Ocarina, 46 Pizzicato strings (most convincing) percussion 36, 118 synth drum\n int instrument[] = {118,117,49,115};\n int definst=46; //default instrument\n int vol[]={100,100,100,100}; //sets volume (127 is max)\n\nvoid setup()\n{\n  Serial.begin(9600);\n  // Serial.begin(31250);\n\n  // we make all the declarations at once\n  for (nt=0;nt&lt;notes;nt++) \n    {\n      pinMode(Det[nt], INPUT);   //declares detectors\n      pinMode(LED[nt], OUTPUT);  //declares indicators\n      val[nt]=analogRead(Det[nt]); //this reads the LDR values once\n      threshold[nt]=val[nt]-20; // this then calculates a threshold value for each channel based on starting ambient light and sets the threshold X below this. .\n    }\n\n  //this bit configures the midi\n  mySerial.begin(31250);\n  pinMode(resetMIDI, OUTPUT);\n  digitalWrite(resetMIDI, LOW);\n  delay(100);\n  digitalWrite(resetMIDI, HIGH);\n  delay(100);\n  talkMIDI(0xB0, 0x07, vol[0]); //0xB0 is channel message, set channel volume (3rd number) to near max (127)\n  talkMIDI(0xB0, 0, 0x79);\n  talkMIDI(0xC0, definst, 0);\n}\n\nvoid loop()\n\n{   \n  for (nt=0;nt&lt;notes;nt++) \n  {\nval[nt]=analogRead(Det[nt]);\n      delay(1);\n\n      if (val[0]&lt;threshold[1]&amp;&amp;val[1]&lt;threshold[1]){\n            if(prev_nts[nt] == false) {\n              digitalWrite(LED[0], HIGH);  //TURN led ON if value below threshold\n              digitalWrite(LED[1], HIGH);\n              noteOn(0, music[0], vol[nt]); //note (middle number) 40-62, (channel, pitch, volume from array)\n              prev_nts[nt] = true;\n            }}\n      else {\n          digitalWrite(LED[0], LOW);\n          digitalWrite(LED[1], LOW);\n          //TURN led OFF if value below threshold\n          noteOff(0, music[0], 0); //note (middle number) 40-62\n          prev_nts[nt] = false;\n        }\n\n\n      if (val[2]&lt;threshold[2]&amp;&amp;val[3]&lt;threshold[3]){\n            Serial.println(notePressed); //never reaching here\n            if(prev_nts[nt] == false) {\n              digitalWrite(LED[2], HIGH);  //TURN led ON if value below threshold\n              digitalWrite(LED[3], HIGH);\n              noteOn(0, music[1], vol[nt]); //note (middle number) 40-62, (channel, pitch, volume from array)\n              prev_nts[nt] = true;\n            }}\n      else {\n          digitalWrite(LED[2], LOW);\n          digitalWrite(LED[3], LOW);\n          //TURN led OFF if value below threshold\n          noteOff(0, music[1], 0); //note (middle number) 40-62\n          prev_nts[nt] = false;\n        }\n}\n}\n\nvoid noteOn(byte channel, byte note, byte attack_velocity) {\n  talkMIDI( (0x90 | channel), note, attack_velocity);\n}\n//Send a MIDI note-off message.  Like releasing a piano key\nvoid noteOff(byte channel, byte note, byte release_velocity) {\n  talkMIDI( (0x80 | channel), note, release_velocity);\n}\nvoid talkMIDI(byte cmd, byte data1, byte data2) {\n  digitalWrite(ledPin, HIGH);\n  mySerial.write(cmd);\n  mySerial.write(data1);\n//Some commands only have one data byte. All cmds less than 0xBn have 2 data bytes \n//(sort of: http://253.ccarh.org/handout/midiprotocol/)\n  if( (cmd &amp; 0xF0) &lt;= 0xB0)\n    mySerial.write(data2);\n  digitalWrite(ledPin, LOW);\n}\n</code></pre>\n\n<p>This is also my first time programming using arduino, so I may not be aware of simple mistakes. I usually program in Java and Python.</p>\n"}, {"tags": ["c++", "cuda", "thrust"], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 1, "last_activity_date": 1518030501, "creation_date": 1518030501, "answer_id": 48671517, "question_id": 48670284, "link": "https://stackoverflow.com/questions/48670284/cuda9-thrust-sort-by-key-overlayed-with-h2d-copy-using-streams/48671517#48671517", "title": "cuda9 + thrust sort_by_key overlayed with H2D copy (using streams)", "body": "<p>thrust sort operations do a memory allocation \"under the hood\".  This should be discoverable using <code>nvprof --print-api-trace ...</code> - you should see a <code>cudaMalloc</code> operation associated with each sort.   This device memory allocation is synchronizing and may prevent expected overlap.  If you want to work around this, you could explore using a <a href=\"https://github.com/thrust/thrust/blob/master/examples/cuda/custom_temporary_allocation.cu\" rel=\"nofollow noreferrer\">thrust custom allocator</a>.</p>\n\n<p>Here is a worked example, borrowing heavily from the above link:</p>\n\n<pre><code>$ cat t44.cu\n#include &lt;cuda_runtime.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/sort.h&gt;\n#include &lt;random&gt;\n#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;thrust/system/cuda/vector.h&gt;\n#include &lt;thrust/system/cuda/execution_policy.h&gt;\n#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/generate.h&gt;\n#include &lt;thrust/pair.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;cassert&gt;\n\n\n// This example demonstrates how to intercept calls to get_temporary_buffer\n// and return_temporary_buffer to control how Thrust allocates temporary storage\n// during algorithms such as thrust::sort. The idea will be to create a simple\n// cache of allocations to search when temporary storage is requested. If a hit\n// is found in the cache, we quickly return the cached allocation instead of\n// resorting to the more expensive thrust::cuda::malloc.\n//\n// Note: this implementation cached_allocator is not thread-safe. If multiple\n// (host) threads use the same cached_allocator then they should gain exclusive\n// access to the allocator before accessing its methods.\n\n\n// cached_allocator: a simple allocator for caching allocation requests\nclass cached_allocator\n{\n  public:\n    // just allocate bytes\n    typedef char value_type;\n\n    cached_allocator() {}\n\n    ~cached_allocator()\n    {\n      // free all allocations when cached_allocator goes out of scope\n      free_all();\n    }\n\n    char *allocate(std::ptrdiff_t num_bytes)\n    {\n      char *result = 0;\n\n      // search the cache for a free block\n      free_blocks_type::iterator free_block = free_blocks.find(num_bytes);\n\n      if(free_block != free_blocks.end())\n      {\n        std::cout &lt;&lt; \"cached_allocator::allocator(): found a hit\" &lt;&lt; std::endl;\n\n        // get the pointer\n        result = free_block-&gt;second;\n\n        // erase from the free_blocks map\n        free_blocks.erase(free_block);\n      }\n      else\n      {\n        // no allocation of the right size exists\n        // create a new one with cuda::malloc\n        // throw if cuda::malloc can't satisfy the request\n        try\n        {\n          std::cout &lt;&lt; \"cached_allocator::allocator(): no free block found; calling cuda::malloc\" &lt;&lt; std::endl;\n\n          // allocate memory and convert cuda::pointer to raw pointer\n          result = thrust::cuda::malloc&lt;char&gt;(num_bytes).get();\n        }\n        catch(std::runtime_error &amp;e)\n        {\n          throw;\n        }\n      }\n\n      // insert the allocated pointer into the allocated_blocks map\n      allocated_blocks.insert(std::make_pair(result, num_bytes));\n\n      return result;\n    }\n\n    void deallocate(char *ptr, size_t n)\n    {\n      // erase the allocated block from the allocated blocks map\n      allocated_blocks_type::iterator iter = allocated_blocks.find(ptr);\n      std::ptrdiff_t num_bytes = iter-&gt;second;\n      allocated_blocks.erase(iter);\n\n      // insert the block into the free blocks map\n      free_blocks.insert(std::make_pair(num_bytes, ptr));\n    }\n\n  private:\n    typedef std::multimap&lt;std::ptrdiff_t, char*&gt; free_blocks_type;\n    typedef std::map&lt;char *, std::ptrdiff_t&gt;     allocated_blocks_type;\n\n    free_blocks_type      free_blocks;\n    allocated_blocks_type allocated_blocks;\n\n    void free_all()\n    {\n      std::cout &lt;&lt; \"cached_allocator::free_all(): cleaning up after ourselves...\" &lt;&lt; std::endl;\n\n      // deallocate all outstanding blocks in both lists\n      for(free_blocks_type::iterator i = free_blocks.begin();\n          i != free_blocks.end();\n          ++i)\n      {\n        // transform the pointer to cuda::pointer before calling cuda::free\n        thrust::cuda::free(thrust::cuda::pointer&lt;char&gt;(i-&gt;second));\n      }\n\n      for(allocated_blocks_type::iterator i = allocated_blocks.begin();\n          i != allocated_blocks.end();\n          ++i)\n      {\n        // transform the pointer to cuda::pointer before calling cuda::free\n        thrust::cuda::free(thrust::cuda::pointer&lt;char&gt;(i-&gt;first));\n      }\n    }\n\n};\n\n\n\n\nint main() {\n    cached_allocator alloc;\n    // size of arrays\n    const int n = 300000000;\n\n    // random number generator\n    std::mt19937 rng;\n\n    // key/val on host\n    uint32_t * key = new uint32_t[n];\n    uint32_t * val = new uint32_t[n];\n\n    // fill key val\n    for(int i = 0; i &lt; n; i++) {\n        key[i] = rng();\n        val[i] = i;\n    }\n\n   // key/val on device\n   uint32_t * dev_key;\n   uint32_t * dev_val;\n\n   // allocate memory on GPU for key/val\n   cudaMalloc((void**)&amp;dev_key, n*sizeof(uint32_t));\n   cudaMalloc((void**)&amp;dev_val, n*sizeof(uint32_t));\n\n   // copy key/val onto the device\n   cudaMemcpy(dev_key, key, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n   cudaMemcpy(dev_val, val, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n\n   // get thrust device pointers to key/val on device\n   thrust::device_ptr&lt;uint32_t&gt; dev_key_ptr = thrust::device_pointer_cast(dev_key);\n   thrust::device_ptr&lt;uint32_t&gt; dev_val_ptr = thrust::device_pointer_cast(dev_val);\n\n   // data on host\n   uint32_t * data;\n\n   // allocate pinned memory for data on host\n   cudaMallocHost((void**)&amp;data, n*sizeof(uint32_t));\n\n   // fill data with random numbers\n   for(int i = 0; i &lt; n; i++) {\n       data[i] = rng();\n   }\n\n   // data on device\n   uint32_t * dev_data;\n\n   // allocate memory for data on the device\n   cudaMalloc((void**)&amp;dev_data, n*sizeof(uint32_t));\n\n   // for timing\n   struct timeval t1, t2;\n\n   // two streams\n   cudaStream_t stream1;\n   cudaStream_t stream2;\n\n   // create streams\n   cudaStreamCreate(&amp;stream1);\n   cudaStreamCreate(&amp;stream2);\n\n   for(int i = 0; i &lt; 10; i++) {\n\n       // Copy data into dev_data on stream 1 (nothing happening on stream 2 for now)\n       gettimeofday(&amp;t1, NULL);\n           cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_copy = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n\n       // Sort_by_key on stream 2 (nothing hapenning on stream 1 for now)\n       gettimeofday(&amp;t1, NULL);\n           thrust::sort_by_key(thrust::cuda::par(alloc).on(stream2), dev_key_ptr, dev_key_ptr + n, dev_val_ptr);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_sort = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n       // Overlap both operations\n       gettimeofday(&amp;t1, NULL);\n           thrust::sort_by_key(thrust::cuda::par(alloc).on(stream2), dev_key_ptr, dev_key_ptr + n, dev_val_ptr);\n           cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_both = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n       std::cout &lt;&lt; \"t_copy: \" &lt;&lt; t_copy &lt;&lt; \", t_sort: \" &lt;&lt; t_sort &lt;&lt; \", t_both1: \" &lt;&lt; t_both &lt;&lt; std::endl;\n\n   }\n\n   // clean up\n   cudaStreamDestroy(stream1);\n   cudaStreamDestroy(stream2);\n   cudaFreeHost(data);\n   cudaFree(dev_data);\n   cudaFree(dev_key);\n   cudaFree(dev_val);\n   delete [] key;\n   delete [] val;\n\n}\n$ nvcc -arch=sm_60 -std=c++11 -o t44 t44.cu\n$ ./t44\ncached_allocator::allocator(): no free block found; calling cuda::malloc\ncached_allocator::allocator(): found a hit\nt_copy: 100.329, t_sort: 110.122, t_both1: 109.585\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.441, t_sort: 106.454, t_both1: 109.692\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.595, t_sort: 106.507, t_both1: 109.436\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.35, t_sort: 106.463, t_both1: 109.517\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.486, t_sort: 106.473, t_both1: 109.6\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.324, t_sort: 106.385, t_both1: 109.551\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.4, t_sort: 106.549, t_both1: 109.692\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.521, t_sort: 106.445, t_both1: 109.719\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.362, t_sort: 106.413, t_both1: 109.762\ncached_allocator::allocator(): found a hit\ncached_allocator::allocator(): found a hit\nt_copy: 100.349, t_sort: 106.37, t_both1: 109.52\ncached_allocator::free_all(): cleaning up after ourselves...\n$\n</code></pre>\n\n<p>CentOS 7.4, CUDA 9.1, Tesla P100</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 9328952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee2deb3ebe1e3b0855e780f3861b7b4?s=128&d=identicon&r=PG&f=1", "display_name": "tdoublep", "link": "https://stackoverflow.com/users/9328952/tdoublep"}, "is_accepted": false, "score": 1, "last_activity_date": 1518082788, "creation_date": 1518082788, "answer_id": 48682145, "question_id": 48670284, "link": "https://stackoverflow.com/questions/48670284/cuda9-thrust-sort-by-key-overlayed-with-h2d-copy-using-streams/48682145#48682145", "title": "cuda9 + thrust sort_by_key overlayed with H2D copy (using streams)", "body": "<p>Thank you very much. I tested your code and it indeed solves the problem. I also found an alternate solution using CUB (see below). The main difference is you have to allocate all the necessary memory for the radix sort upfront (rather than using a cached allocator).</p>\n\n<pre><code>$ cat main_cub.cu \n#include &lt;cuda_runtime.h&gt;\n#include &lt;random&gt;\n#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;cub/device/device_radix_sort.cuh&gt;\n\nint main() {\n\n    // size of arrays\n    const int n = 300000000;\n\n    // random number generator\n    std::mt19937 rng;\n\n    // key/val on host\n    uint32_t * key = new uint32_t[n];\n    uint32_t * val = new uint32_t[n];\n\n    // fill key val\n    for(int i = 0; i &lt; n; i++) {\n        key[i] = rng();\n        val[i] = i;\n    }\n\n    // key/val on device\n    uint32_t * dev_key_in;\n    uint32_t * dev_val_in;\n\n    // allocate memory on GPU for key/val\n    cudaMalloc((void**)&amp;dev_key_in, n*sizeof(uint32_t));\n    cudaMalloc((void**)&amp;dev_val_in, n*sizeof(uint32_t));\n\n    // copy key/val onto the device\n    cudaMemcpy(dev_key_in, key, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n    cudaMemcpy(dev_val_in, val, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n\n    // sorted key/val on device\n    uint32_t * dev_key_out;\n    uint32_t * dev_val_out;\n\n    // allocate memory on device for sorted key/val\n    cudaMalloc((void**)&amp;dev_key_out, n*sizeof(uint32_t));\n    cudaMalloc((void**)&amp;dev_val_out, n*sizeof(uint32_t));\n\n    // determine how much temp storage cub needs\n    void * dev_temp_storage = NULL;\n    size_t temp_storage_bytes = 0;\n    cub::DeviceRadixSort::SortPairs(dev_temp_storage, temp_storage_bytes, dev_key_in, dev_key_out, dev_val_in, dev_val_out, n);\n\n    // allocate the temp storage for cub\n    cudaMalloc((void**)&amp;dev_temp_storage, temp_storage_bytes);\n\n    // data on host\n    uint32_t * data;\n\n    // allocate pinned memory for data on host\n    cudaMallocHost((void**)&amp;data, n*sizeof(uint32_t));\n\n    // fill data with random numbers\n    for(int i = 0; i &lt; n; i++) {\n        data[i] = rng();\n    }\n\n    // data on device\n    uint32_t * dev_data;\n\n    // allocate memory for data on the device\n    cudaMalloc((void**)&amp;dev_data, n*sizeof(uint32_t));\n\n    // for timing\n    struct timeval t1, t2;\n\n    // two streams\n    cudaStream_t stream1;\n    cudaStream_t stream2;\n\n    // create streams\n    cudaStreamCreate(&amp;stream1);\n    cudaStreamCreate(&amp;stream2);\n\n    for(int i = 0; i &lt; 10; i++) {\n\n        // Copy data into dev_data on stream 1 (nothing happening on stream 2 for now)\n        gettimeofday(&amp;t1, NULL);\n            cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n            cudaDeviceSynchronize();\n        gettimeofday(&amp;t2, NULL);\n        double t_copy = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n\n        // Sort_by_key on stream 2 (nothing hapenning on stream 1 for now)\n        gettimeofday(&amp;t1, NULL);\n            cub::DeviceRadixSort::SortPairs(dev_temp_storage, temp_storage_bytes, dev_key_in, dev_key_out, dev_val_in, dev_val_out, n, 0, sizeof(uint32_t)*8, stream2);\n            cudaDeviceSynchronize();\n        gettimeofday(&amp;t2, NULL);\n        double t_sort = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n        // Overlap both operations\n        gettimeofday(&amp;t1, NULL);\n            cub::DeviceRadixSort::SortPairs(dev_temp_storage, temp_storage_bytes, dev_key_in, dev_key_out, dev_val_in, dev_val_out, n, 0, sizeof(uint32_t)*8, stream2);\n            cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n            cudaDeviceSynchronize();\n        gettimeofday(&amp;t2, NULL);\n        double t_both = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n        std::cout &lt;&lt; \"t_copy: \" &lt;&lt; t_copy &lt;&lt; \", t_sort: \" &lt;&lt; t_sort &lt;&lt; \", t_both: \" &lt;&lt; t_both &lt;&lt; std::endl;\n\n    }\n\n    // clean up\n    cudaStreamDestroy(stream1);\n    cudaStreamDestroy(stream2);\n    cudaFreeHost(data);\n    cudaFree(dev_data);\n    cudaFree(dev_key_in);\n    cudaFree(dev_val_in);\n    cudaFree(dev_key_out);\n    cudaFree(dev_val_out);\n    delete [] key;\n    delete [] val;\n\n\n}\n</code></pre>\n\n<p>You need to include the CUB header library at compile time:</p>\n\n<pre><code> $ nvcc -arch=sm_60 -std=c++11 main_cub.cu -I./cub-1.7.4 -o cub-test\n</code></pre>\n\n<p>This code gives me the following (CUDA 9.0, Tesla P100, NVLINK, RHEL7):</p>\n\n<pre><code>$ ./cub-test \nt_copy: 40.79, t_sort: 97.305, t_both: 99.603\nt_copy: 40.809, t_sort: 96.363, t_both: 99.378\nt_copy: 40.816, t_sort: 96.46, t_both: 99.347\nt_copy: 40.747, t_sort: 96.473, t_both: 99.429\nt_copy: 40.766, t_sort: 96.33, t_both: 99.398\nt_copy: 40.947, t_sort: 96.426, t_both: 99.394\nt_copy: 40.848, t_sort: 96.445, t_both: 99.406\nt_copy: 40.843, t_sort: 96.395, t_both: 99.484\nt_copy: 40.833, t_sort: 96.303, t_both: 99.381\nt_copy: 40.831, t_sort: 96.356, t_both: 99.292\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9328952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee2deb3ebe1e3b0855e780f3861b7b4?s=128&d=identicon&r=PG&f=1", "display_name": "tdoublep", "link": "https://stackoverflow.com/users/9328952/tdoublep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 48671517, "answer_count": 2, "score": 0, "last_activity_date": 1518082788, "creation_date": 1518025713, "question_id": 48670284, "link": "https://stackoverflow.com/questions/48670284/cuda9-thrust-sort-by-key-overlayed-with-h2d-copy-using-streams", "title": "cuda9 + thrust sort_by_key overlayed with H2D copy (using streams)", "body": "<p>I would like to overlap a thrust::sort_by_key operation with a host-to-device copy. Despite taking a cudaStream_t as an argument, my experiments seem to show that thrust::sort_by_key is a blocking operation. Below I attach a full code example in which first I measure the time to copy the data (from pinned memory), then I measure the time to do the sort_by_key. Finally, I try to overlap the two operations. I would expect to the see the copy time hidden by the sort_by_key operation. Instead, I find that the overlayed operation take more than the sum of the two standalone operations.</p>\n\n<p>Can anyone see a problem with the code? Or am I misunderstanding the support in thrust for cuda streams? </p>\n\n<pre><code>#include &lt;cuda_runtime.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/sort.h&gt;\n#include &lt;random&gt;\n#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n\nint main() {\n\n    // size of arrays\n    const int n = 300000000;\n\n    // random number generator\n    std::mt19937 rng;\n\n    // key/val on host\n    uint32_t * key = new uint32_t[n];\n    uint32_t * val = new uint32_t[n];\n\n    // fill key val\n    for(int i = 0; i &lt; n; i++) {\n        key[i] = rng();\n        val[i] = i;\n    }\n\n   // key/val on device\n   uint32_t * dev_key;\n   uint32_t * dev_val;\n\n   // allocate memory on GPU for key/val\n   cudaMalloc((void**)&amp;dev_key, n*sizeof(uint32_t));\n   cudaMalloc((void**)&amp;dev_val, n*sizeof(uint32_t));\n\n   // copy key/val onto the device\n   cudaMemcpy(dev_key, key, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n   cudaMemcpy(dev_val, val, n*sizeof(uint32_t), cudaMemcpyHostToDevice);\n\n   // get thrust device pointers to key/val on device\n   thrust::device_ptr&lt;uint32_t&gt; dev_key_ptr = thrust::device_pointer_cast(dev_key);\n   thrust::device_ptr&lt;uint32_t&gt; dev_val_ptr = thrust::device_pointer_cast(dev_val);\n\n   // data on host\n   uint32_t * data;\n\n   // allocate pinned memory for data on host\n   cudaMallocHost((void**)&amp;data, n*sizeof(uint32_t));\n\n   // fill data with random numbers\n   for(int i = 0; i &lt; n; i++) {\n       data[i] = rng();\n   }\n\n   // data on device\n   uint32_t * dev_data;\n\n   // allocate memory for data on the device\n   cudaMalloc((void**)&amp;dev_data, n*sizeof(uint32_t));\n\n   // for timing\n   struct timeval t1, t2;\n\n   // two streams\n   cudaStream_t stream1;\n   cudaStream_t stream2;\n\n   // create streams\n   cudaStreamCreate(&amp;stream1);\n   cudaStreamCreate(&amp;stream2);\n\n   for(int i = 0; i &lt; 10; i++) {\n\n       // Copy data into dev_data on stream 1 (nothing happening on stream 2 for now)\n       gettimeofday(&amp;t1, NULL);\n           cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_copy = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n\n       // Sort_by_key on stream 2 (nothing hapenning on stream 1 for now)\n       gettimeofday(&amp;t1, NULL);\n           thrust::sort_by_key(thrust::cuda::par.on(stream2), dev_key_ptr, dev_key_ptr + n, dev_val_ptr);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_sort = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n       // Overlap both operations\n       gettimeofday(&amp;t1, NULL);\n           thrust::sort_by_key(thrust::cuda::par.on(stream2), dev_key_ptr, dev_key_ptr + n, dev_val_ptr);\n           cudaMemcpyAsync(dev_data, data, n*sizeof(uint32_t), cudaMemcpyHostToDevice, stream1);\n           cudaDeviceSynchronize();\n       gettimeofday(&amp;t2, NULL);\n       double t_both = double(t2.tv_sec-t1.tv_sec)*1000.0 + double(t2.tv_usec-t1.tv_usec)/1000.0;\n\n       std::cout &lt;&lt; \"t_copy: \" &lt;&lt; t_copy &lt;&lt; \", t_sort: \" &lt;&lt; t_sort &lt;&lt; \", t_both1: \" &lt;&lt; t_both &lt;&lt; std::endl;\n\n   }\n\n   // clean up\n   cudaStreamDestroy(stream1);\n   cudaStreamDestroy(stream2);\n   cudaFreeHost(data);\n   cudaFree(dev_data);\n   cudaFree(dev_key);\n   cudaFree(dev_val);\n   delete [] key;\n   delete [] val;\n\n}\n</code></pre>\n\n<p>Here is the results obtained when running on a GTX 1080 TI and compiling using CUDA toolkit (V9.0.176):</p>\n\n<pre><code>t_copy: 99.972,  t_sort: 215.597, t_both: 393.861\nt_copy: 100.769, t_sort: 225.234, t_both: 394.839\nt_copy: 100.489, t_sort: 221.44,  t_both: 397.042\nt_copy: 100.047, t_sort: 214.231, t_both: 403.371\nt_copy: 100.167, t_sort: 222.031, t_both: 393.143\nt_copy: 100.255, t_sort: 209.191, t_both: 374.633\nt_copy: 100.179, t_sort: 208.452, t_both: 374.122\nt_copy: 100.038, t_sort: 208.39,  t_both: 375.454\nt_copy: 100.072, t_sort: 208.468, t_both: 376.02\nt_copy: 100.069, t_sort: 208.426, t_both: 377.759\n</code></pre>\n\n<p>Furthermore, profiling using nvprof reveals that all operations are being carried out in two separate, non-default streams. </p>\n\n<p>I would be extremely grateful if anyone can reproduce this, or suggest a fix. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1518025690, "post_id": 48670239, "comment_id": 84338206, "body": "Why not just use <a href=\"http://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\">std::all_of, std::any_of, std::none_of</a> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 1, "creation_date": 1518025707, "post_id": 48670239, "comment_id": 84338215, "body": "<i>&quot;Though, the string inside the for loop is also &quot;birdsfliesbutfishswim&quot;.&quot;</i> What? Which string? <i><code>words[i]</code></i> still contains one of the individual strings."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "edited": false, "score": 0, "creation_date": 1518025725, "post_id": 48670239, "comment_id": 84338227, "body": "Alright, I&#39;ll see if that works. Also, why is every (And I mean every) single question I ask on this page always disliked? I have never experienced this rudeness from any other webpage in my life."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1518025746, "post_id": 48670239, "comment_id": 84338240, "body": "&quot;... I want to check if all these elements combined...&quot; you dont combine the strings. you compare each single element to the full string, but there is no &quot;birdsfliesbutfishswim&quot; in the vector"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518025844, "post_id": 48670239, "comment_id": 84338301, "body": "@spec not my downvote, but if was to guess, I&#39;d say: because your questions don&#39;t include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, nor indicate much effort into research on your own."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1518025852, "post_id": 48670239, "comment_id": 84338306, "body": "One loop to concatenate each string in the vector into one large string, and then one comparison to the generated string? The first part, the loop, could be replaced by e.g. <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1518025910, "post_id": 48670239, "comment_id": 84338343, "body": "Or, you know, create a second vector containing the exact strings you want compare with, and then just compare the two vectors?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518025914, "post_id": 48670239, "comment_id": 84338344, "body": "@spec <i>&quot;Also, why is every (And I mean every) single question I ask on this page always disliked?&quot;</i> Before investing time into start to complain  about that, you might better use it to improve your <a href=\"http://idownvotedbecau.se/nodebugging\" rel=\"nofollow noreferrer\">debugging skills</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1518025933, "post_id": 48670239, "comment_id": 84338357, "body": "<i>why is every</i> if they are all like this one ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518026101, "post_id": 48670239, "comment_id": 84338461, "body": "@JesperJuhl thanks for the link, I will make sure to check it out. I am actually a pretty experienced forum user in mathematics, and I haven&#39;t gotten critized by how I ask questions on other pages. But nonetheless, I just wanna learn. I&#39;ve been stuck with trying to make grammar for my C++ code for a very long time now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "edited": false, "score": 0, "creation_date": 1518026224, "post_id": 48670239, "comment_id": 84338540, "body": "@TheDude it&#39;s a genuine question and not even a complaint. I am not trying to offend any of you. I just want to know why I got so much rep on other forums. But once I got over to StackOverflow I get dislikes on everything I write?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518026261, "post_id": 48670239, "comment_id": 84338563, "body": "@spec Did you read the link?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "edited": false, "score": 0, "creation_date": 1518026387, "post_id": 48670239, "comment_id": 84338637, "body": "@TheDude yeah, it&#39;s very useful. Thank you!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518026442, "post_id": 48670239, "comment_id": 84338668, "body": "@spec You also may have noticed the URL. Thus you know why now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "edited": false, "score": 0, "creation_date": 1518026526, "post_id": 48670239, "comment_id": 84338713, "body": "@TheDude yeah precisely, I appreciate it"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518026596, "post_id": 48670239, "comment_id": 84338753, "body": "btw downvotes are not necessarily about likes or dislikes. There are many quite objective measures for the quality of a question. For example you would need to change only little to turn your snippet into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which is something that every question should contain"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518026758, "post_id": 48670239, "comment_id": 84338853, "body": "@user463035818 what do you feel would be the cause of the dislike in this situation?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518026899, "post_id": 48670239, "comment_id": 84338916, "body": "@spec please read my comment again carefully. I said downvotes are <b>not</b> necessarily about likes or dislikes. There is nothing subjective in the fact that you didnt include a mcve, when it would take you minor effort to provide one. (btw I am not complaining here, in this particular case the example is rather clear even without being complete, just trying to explain...)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518027125, "post_id": 48670239, "comment_id": 84339041, "body": "@user463035818 I think I see it now, thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518026380, "post_id": 48670378, "comment_id": 84338632, "body": "<code>std::reduce</code> seems more appropriate."}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 1, "last_activity_date": 1518026063, "creation_date": 1518026063, "answer_id": 48670378, "question_id": 48670239, "link": "https://stackoverflow.com/questions/48670239/checking-if-all-elements-in-a-vector-equals-one-string-with-a-for-loop/48670378#48670378", "title": "Checking if all elements in a vector equals one string with a for loop", "body": "<p>If you want to check if all of the strings combined equals your string, use the following:</p>\n\n<pre><code>string totalWord;\nfor (const auto&amp; word : words)\n{\n    totalWord += word;\n}\n</code></pre>\n\n<p>This combines all of the strings into one string. You could even do this one line using <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a>:</p>\n\n<pre><code>string totalWord = std::accumulate(words.begin(), words.end(), std::string{});\n</code></pre>\n\n<p>After this, just check if the new string equals what you want to check:</p>\n\n<pre><code>if (totalWord == \"birdsfliesbutfishswim\")\n{\n    sentenceCorrect = true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1518026353, "creation_date": 1518026353, "answer_id": 48670451, "question_id": 48670239, "link": "https://stackoverflow.com/questions/48670239/checking-if-all-elements-in-a-vector-equals-one-string-with-a-for-loop/48670451#48670451", "title": "Checking if all elements in a vector equals one string with a for loop", "body": "<p>If you want to compare \"birdsfliesbutfishswim\" to all the strings in the vector combined you actually need to combine them. You dont need to write the loop yourself, but you can use an algorithm to do that:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;numeric&gt; \n#include &lt;string&gt;\n#include &lt;iostream&gt;\nint main() {\n    std::vector&lt;std::string&gt; words = { \"birds\", \"flies\", \"but\", \"fish\", \"swim\" };\n    std::string sentence = std::accumulate(words.begin(),words.end(),std::string());\n    if (sentence == \"birdsfliesbutfishswim\") std::cout &lt;&lt; \"dogscanswimtoo\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 0, "last_activity_date": 1518039970, "creation_date": 1518039970, "answer_id": 48673785, "question_id": 48670239, "link": "https://stackoverflow.com/questions/48670239/checking-if-all-elements-in-a-vector-equals-one-string-with-a-for-loop/48673785#48673785", "title": "Checking if all elements in a vector equals one string with a for loop", "body": "<p>Good old way without constructing new strings.</p>\n\n<pre><code>#include&lt;vector&gt;\n#include&lt;string&gt;\n#include &lt;iostream&gt;\n\nbool isSentenceCorrect(const char* sentence, const std::vector&lt;std::string&gt;&amp; words) {\n    for(const auto&amp; word : words){\n        auto word_size = word.size();\n        if(word.compare(0, word_size, sentence, word_size) != 0) {\n            return false;\n        }\n        sentence += word_size;\n    }\n    return *sentence == '\\0';\n}\n\nint main() {\n    std::vector&lt;std::string&gt; words = {\"birds\", \"flies\", \"but\", \"fish\", \"swim\"};\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; isSentenceCorrect(\"birdsfliesbutfishswim\", words);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9213929"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 48670378, "answer_count": 3, "score": 1, "last_activity_date": 1518039970, "creation_date": 1518025557, "question_id": 48670239, "link": "https://stackoverflow.com/questions/48670239/checking-if-all-elements-in-a-vector-equals-one-string-with-a-for-loop", "title": "Checking if all elements in a vector equals one string with a for loop", "body": "<p>I want to check if all words in a string vector equals one single string. Say I have the vector <code>vector&lt;string&gt; words = { \"birds\", \"flies\", \"but\", \"fish\", \"swim\" };</code> and I want to check if all these elements combined equals a string with a for loop.</p>\n\n<pre><code>for (int i = 0; i &lt; words.size(); ++i) {\n    cout &lt;&lt; words[i];\n    if (words[i] == \"birdsfliesbutfishswim\") {\n        sentenceCorrect = true;\n    }\n}\n</code></pre>\n\n<p>Right now, the code will print out <code>words[i]</code> as \"<em>birdsfliesbutfishswim</em>\" but it will not equal the string inside the for loop. Though, the string inside the for loop is also \"<em>birdsfliesbutfishswim</em>\". Why is that? Why can I not compare <code>words[i]</code> to a string as the example above? And what would make it work?</p>\n"}, {"tags": ["c++", "linker", "visual-studio-2017", "vulkan"], "comments": [{"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 2, "creation_date": 1518025062, "post_id": 48670021, "comment_id": 84337825, "body": "Do include the VulkanBase.h file in multiple cpp files? If yes You shouldn&#39;t add the mentioned #define. It should (probably) be placed only in one cpp file just before the VMA header is included."}, {"owner": {"reputation": 449, "user_id": 6701490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PreUH.jpg?s=128&g=1", "display_name": "EkBumYe", "link": "https://stackoverflow.com/users/6701490/ekbumye"}, "reply_to_user": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 0, "creation_date": 1518025603, "post_id": 48670021, "comment_id": 84338157, "body": "But my VMA implementation exists in both .cpp file. Is there other solution?"}, {"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 0, "creation_date": 1518028385, "post_id": 48670021, "comment_id": 84339759, "body": "You can include the vk_mem_alloc.h file in many cpp files. But only in one of these cpp files You should place the #define VMA_IMPLEMENTATION. At least that&#39;s how many of the single-header libraries work. I didn&#39;t use the VMA but I think it should be used in a similar way."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6629676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561d46cfe915ce557fd572fc59717081?s=128&d=identicon&r=PG&f=1", "display_name": "Senthuran", "link": "https://stackoverflow.com/users/6629676/senthuran"}, "is_accepted": false, "score": 2, "last_activity_date": 1518194415, "creation_date": 1518194415, "answer_id": 48710350, "question_id": 48670021, "link": "https://stackoverflow.com/questions/48670021/linker-error-lnk2005-when-using-amds-vulkan-memory-allocator/48710350#48710350", "title": "Linker error (LNK2005) when using AMD&#39;s Vulkan Memory Allocator", "body": "<p>the best thing to do is \nin you VulkanBase.h file  include the vma header file \nand in your VulkanBase.cpp file before you include your VulkanBase.h file define the #define VMA_IMPLEMENTATION. This way you only have one implementation of vma exist and it is compiled in your VulkanBase.cpp. You can Include VulkanBase.h file in other .cpp/.h files which only has VMA declarations. Hope that helps </p>\n"}], "owner": {"reputation": 449, "user_id": 6701490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PreUH.jpg?s=128&g=1", "display_name": "EkBumYe", "link": "https://stackoverflow.com/users/6701490/ekbumye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518194415, "creation_date": 1518024856, "last_edit_date": 1518062252, "question_id": 48670021, "link": "https://stackoverflow.com/questions/48670021/linker-error-lnk2005-when-using-amds-vulkan-memory-allocator", "title": "Linker error (LNK2005) when using AMD&#39;s Vulkan Memory Allocator", "body": "<p>I have just started using AMD's VMA by including <code>vk_mem_alloc.h</code> in my header file with <code>#define VMA_IMPLEMENTATION</code> before it. But when I build the project, a lot of <code>LNK2005</code> error appear.</p>\n\n<p>My file structure is like</p>\n\n<p><code>VulkanBase</code>( .h + .cpp ) -(Base class of)-> <code>ExApp</code> (.cpp)</p>\n\n<p>I have declared this library in <code>VulkanBase.h</code> file. The errors are like all the members in <code>vk_mem_alloc.h</code> have already defined in <code>ExApp.cpp</code>. At the end of the error list, it showed that <code>one or more multiply defined symbols found</code>.</p>\n\n<p>Does anyone have an idea? Thank you in advance.</p>\n"}, {"tags": ["c++", "constants", "slice", "member-functions", "valarray"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1518028374, "creation_date": 1518028374, "answer_id": 48670968, "question_id": 48669897, "link": "https://stackoverflow.com/questions/48669897/why-is-stdslice-arrayoperator-const/48670968#48670968", "title": "Why is std::slice_array::operator= const?", "body": "<p>For the first question, <code>slice_array</code> is just a proxy class. It has reference semantics, so none of its actual members are modified by any operation, so marking everything <code>const</code> gives you more usability.</p>\n\n<p>For the second question, all of the operators <em>are</em> declared <code>const</code> (per the <a href=\"http://eel.is/c++draft/template.slice.array.overview\" rel=\"nofollow noreferrer\">current working draft</a> and back to <a href=\"https://timsong-cpp.github.io/cppwp/n3337/template.slice.array.overview\" rel=\"nofollow noreferrer\">C++11</a>). For the same reason that the assignment operators are <code>const</code>. This is just a bug in cppreference misidentifying them. Happens. </p>\n"}], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 48670968, "answer_count": 1, "score": 3, "last_activity_date": 1518028374, "creation_date": 1518024481, "question_id": 48669897, "link": "https://stackoverflow.com/questions/48669897/why-is-stdslice-arrayoperator-const", "title": "Why is std::slice_array::operator= const?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/numeric/valarray/slice_array/operator%3D\" rel=\"nofollow noreferrer\">All overloads of assignment operators</a> of <code>std::slice_array</code> are const member functions, but why is it designed so?</p>\n\n<p>Maybe the reason is that <code>std::slice_array</code> is designed to be a proxy class, and these assignment operators just modify the referred elements without modifying the proxy class itself, so they are reasonable to be const member functions. However, why are <a href=\"http://en.cppreference.com/w/cpp/numeric/valarray/slice_array/operator_arith\" rel=\"nofollow noreferrer\">those compound operators</a> of <code>std::slice_array</code> <strong>not</strong> const member functions?</p>\n"}, {"tags": ["c++", "file", "jpeg"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1518024366, "post_id": 48669812, "comment_id": 84337420, "body": "Unless the image files are copies of each other, JPEG compression might lead to two seemingly equal images not being equal at all at the byte level. Not even uncompressed. Unless, of course, you want to get the JPEG file meta-data?"}, {"owner": {"reputation": 190, "user_id": 9328831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f76b09f12db55b17aabe2710267b5bf?s=128&d=identicon&r=PG&f=1", "display_name": "luco5826", "link": "https://stackoverflow.com/users/9328831/luco5826"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1518025435, "post_id": 48669812, "comment_id": 84338038, "body": "@Someprogrammerdude Yeah understood, but I read that all jpegs files have, at some point in their hex dump, that same header which starts with FF C0 and which contains the image&#39;s dimensions in pixels. I don&#39;t know if I explained myself enough. Anyway thank you for your answer!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1518025561, "post_id": 48669812, "comment_id": 84338126, "body": "The JPEG file format is an open format, there should be no problem finding references about its file-format, including the structure of all its meta-data like the file-header. There are also a few libraries that exist to read JPEG files, and which can extract the exact data you need, instead of you attempting to make your own loader."}, {"owner": {"reputation": 424, "user_id": 6417527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b8872b39c0da12993c80aece9a672a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6417527/michael-smith"}, "edited": false, "score": 0, "creation_date": 1518029162, "post_id": 48669812, "comment_id": 84340207, "body": "If you want to read the file byte-wise, just open it like a binary file and read it byte by byte.  You could then put together a state machine to determine the region of interest and read it out that way.  Is that more along the lines of what you want?"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1518053946, "post_id": 48669812, "comment_id": 84350687, "body": "It&#39;s not enough to search for <code>FF C0</code> since an earlier part of the file might contain it by pure coincidence. You really need to parse the file from the beginning, piece by piece. A pre-existing library is the easiest way to do that; I&#39;d check out <a href=\"http://www.ijg.org/\" rel=\"nofollow noreferrer\">IJG</a>."}], "answers": [{"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 1, "last_activity_date": 1518052253, "last_edit_date": 1518052253, "creation_date": 1518029082, "answer_id": 48671138, "question_id": 48669812, "link": "https://stackoverflow.com/questions/48669812/how-do-i-read-and-compare-single-bytes-from-jpeg-file-in-c/48671138#48671138", "title": "How do I read and compare single bytes from .jpeg file in C++?", "body": "<p>Please avoid voting on this post as this is not meant to be an actual answer to the question: this is only acting as a reference page. If you know of any other references in regards of the details of writing a JPG / JPEG loader feel free to edit this post and add the links below...</p>\n\n<hr>\n\n<blockquote>\n  <h3> Images </h3>\n  \n  <p><a href=\"https://i.stack.imgur.com/xutkq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xutkq.jpg\" alt=\"JPEG Format 1\"></a> </p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <h3> Links </h3>\n  \n  <p><ol> <a href=\"http://vip.sugovica.hu/Sardi/kepnezo/JPEG%20File%20Layout%20and%20Format.htm\" rel=\"nofollow noreferrer\">Sardi : JPEG Format</a></ol>\n     <ol> <a href=\"http://www.w3.org/Graphics/JPEG/jfif3.pdf\" rel=\"nofollow noreferrer\">W3 : JPEG Format</a> </ol></p>\n</blockquote>\n"}], "owner": {"reputation": 190, "user_id": 9328831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f76b09f12db55b17aabe2710267b5bf?s=128&d=identicon&r=PG&f=1", "display_name": "luco5826", "link": "https://stackoverflow.com/users/9328831/luco5826"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518052253, "creation_date": 1518024211, "question_id": 48669812, "link": "https://stackoverflow.com/questions/48669812/how-do-i-read-and-compare-single-bytes-from-jpeg-file-in-c", "title": "How do I read and compare single bytes from .jpeg file in C++?", "body": "<p>I need to read single bytes from a jpeg file. In other words, i have this hex dump from a jpg file: <a href=\"https://i.stack.imgur.com/8R64Z.png\" rel=\"nofollow noreferrer\">The Yellow circled part is the one i need to read</a> and I need to write a simple C++ code that could read all the bytes until it gets to the interesting part. How can I, once I read one byte, compare it with a value I give to it?</p>\n\n<p>I need this because after 5 bytes from that \"FF\" byte, it says my jpeg's dimensions in pixels and i need to retrieve them.</p>\n\n<p>I'm sorry if I made some language mistakes but I'm not mother tongue.</p>\n"}, {"tags": ["c++", "c++11", "vector", "stl"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1518024210, "post_id": 48669781, "comment_id": 84337347, "body": "<code>v</code> is not a <code>std::vector</code>. It&#39;s a pointer. Pointers also happen to support <code>[index]</code> syntax, but to do it properly you better dereference the pointer first."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1518024210, "post_id": 48669781, "comment_id": 84337348, "body": "change: <code>vector &lt;int&gt; *v</code> --&gt; <code>vector &lt;int&gt; &amp;v</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518024229, "post_id": 48669781, "comment_id": 84337360, "body": "You passing <code>vector &lt;int&gt; *</code> as a pointer parameter, sou you must defeference it to call the <code>operator[]()</code> function."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1518025427, "post_id": 48669781, "comment_id": 84338035, "body": "<code>v[node][it]</code>: here <code>it</code> is an <i>iterator</i>. It is not an index. You cannot put it inside square brackets."}, {"owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "edited": false, "score": 0, "creation_date": 1518025602, "post_id": 48669781, "comment_id": 84338155, "body": "Its working now. I have changed it to  v[ node ] [*it ] . Thanks."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521715676, "post_id": 48669781, "comment_id": 85854234, "body": "Why are you mixing <code>std::vector</code> with C style arrays? <code>std::array&lt;std::vector&lt;int&gt;, 5&gt;</code> is less error prone. A <code>std::multi_map&lt;int, int&gt;</code> does it in one container"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "edited": false, "score": 0, "creation_date": 1518024899, "post_id": 48669847, "comment_id": 84337738, "body": "Isn&#39;t that one of the possible ways to pass arrays as arguments ?. Link : <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cplusplus/&hellip;</a>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "edited": false, "score": 0, "creation_date": 1518024994, "post_id": 48669847, "comment_id": 84337787, "body": "Yes, but it isn&#39;t the best way since arrays decay to pointers at the first opportunity and lose knowledge of their size. Using a <code>vector</code> is a much better idea."}, {"owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "edited": false, "score": 0, "creation_date": 1518025145, "post_id": 48669847, "comment_id": 84337867, "body": "But why am i getting an error message for this ? What&#39;s the syntactical error in this ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518025333, "post_id": 48669847, "comment_id": 84337983, "body": "OP has a C-style <i>array</i> of vectors."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518025669, "post_id": 48669847, "comment_id": 84338193, "body": "@n.m. Fixed explanation"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 0, "last_activity_date": 1518025579, "last_edit_date": 1518025579, "creation_date": 1518024309, "answer_id": 48669847, "question_id": 48669781, "link": "https://stackoverflow.com/questions/48669781/no-match-for-operator-stdvector/48669847#48669847", "title": "no match for operator [ ] (std::vector)", "body": "<p>In your code, <code>v</code> is a <em>pointer</em> (Which represents an array) to a vector. To access the subscript operator, you have to access the C Style Array first using <code>v[first_index]</code>. Then you have to index whatever returned object you get from the first indexing. However, you shouldn't even be using pointers for vectors. If you want to modify a container, then pass it by reference. If you want to store an array of vectors, then I recommend that you just nest them (Although this may be bad for memory, so you can create a 1D vector and compute indices).</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 1, "last_activity_date": 1521713911, "creation_date": 1521713911, "answer_id": 49426034, "question_id": 48669781, "link": "https://stackoverflow.com/questions/48669781/no-match-for-operator-stdvector/49426034#49426034", "title": "no match for operator [ ] (std::vector)", "body": "<p>The variable <code>it</code> is an iterator.</p>\n\n<pre><code>vector &lt;int&gt; :: iterator it;\n</code></pre>\n\n<p>This can not be used to index into an array like this:</p>\n\n<pre><code>search(v,v[node][it]); // Expecting an index not an iterator.\n</code></pre>\n\n<p>I think what you want is to de-reference the iterator.</p>\n\n<pre><code>search(v, *it);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7961312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1e162d18fe9f1430700769668ba137?s=128&d=identicon&r=PG&f=1", "display_name": "tujiaw", "link": "https://stackoverflow.com/users/7961312/tujiaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1521741511, "last_edit_date": 1521741511, "creation_date": 1521736760, "answer_id": 49434032, "question_id": 48669781, "link": "https://stackoverflow.com/questions/48669781/no-match-for-operator-stdvector/49434032#49434032", "title": "no match for operator [ ] (std::vector)", "body": "<p>You have to check if the node is not out of bounds.</p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nvoid search(vector&lt;int&gt; *v, int count, int node)\n    {\n       if (node == 4)\n       {\n        cout &lt;&lt; \"found 4\";\n       return;\n    }\n\n    if (node &lt; count &amp;&amp; !v[node].empty())\n    {\n        for (auto it = v[node].begin(); it != v[node].end(); it++)\n        {\n            search(v, count, *it);\n        }\n    }\n}\n\nint main()\n{\n   vector&lt;int&gt; v[5];\n   v[1].push_back(2);\n   v[1].push_back(3);\n   v[2].push_back(4);\n   v[2].push_back(5);\n\n   search(v, sizeof(v) / sizeof(v[0]), 1);\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 49426034, "answer_count": 3, "score": 0, "last_activity_date": 1521741511, "creation_date": 1518024131, "question_id": 48669781, "link": "https://stackoverflow.com/questions/48669781/no-match-for-operator-stdvector", "title": "no match for operator [ ] (std::vector)", "body": "<p>So , i have made a graph using adjacency list , and i am trying to search it by using recursion. Got an awkward error message saying 'no match for operator []'. Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nvoid search(vector &lt;int&gt; *v,int node)\n{\n    if (node==4)\n    {\n        cout&lt;&lt;\"found 4\";\n        return;\n    }\n\n    vector &lt;int&gt; :: iterator it;\n    if (!v[node].empty())\n    {\n        for (it=v[node].begin() ; it!=v[node].end() ; it++)\n        {\n            search(v,v[node][it]);\n        }\n    }\n}\n\nint main()\n{\n    vector &lt;int&gt; v[5];\n    v[1].push_back(2);\n    v[1].push_back(3);\n    v[2].push_back(4);\n    v[2].push_back(5);\n    search (v,1);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 1, "creation_date": 1518023620, "post_id": 48669567, "comment_id": 84337000, "body": "And where is your main()? Also have you heard about std::cin and std::cout?"}, {"owner": {"reputation": 3699, "user_id": 375399, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ee1c857b767375e1fc848279f64584b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/375399/nick"}, "edited": false, "score": 0, "creation_date": 1518023692, "post_id": 48669567, "comment_id": 84337035, "body": "See: <a href=\"https://stackoverflow.com/questions/7944861/getting-user-input-in-c\" title=\"getting user input in c\">stackoverflow.com/questions/7944861/getting-user-input-in-c</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1518023738, "post_id": 48669567, "comment_id": 84337059, "body": "Consider using <code>switch&#47;case</code> instead of <code>if&#47;else if</code>."}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "edited": false, "score": 0, "creation_date": 1518023759, "post_id": 48669567, "comment_id": 84337074, "body": "Use <code>switch</code> , instead of <code>if else if</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518024012, "post_id": 48669567, "comment_id": 84337219, "body": "@user7716102 And what&#39;s your problem with just using <a href=\"http://en.cppreference.com/w/cpp/io/cin\" rel=\"nofollow noreferrer\"><code>std::cin</code></a> to proceed?"}, {"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1518024026, "post_id": 48669567, "comment_id": 84337230, "body": "@user7716102 Use std::cin. Follow link given by Nick"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1518030511, "post_id": 48669567, "comment_id": 84340972, "body": "As it&#39;s already been pointed out you need to use <code>std::cin</code> to get users input. Check out <a href=\"https://stackoverflow.com/questions/48669567/vending-machine-c/48671355#48671355\">my answer</a> for some examples and other considerations. As far as product descriptions, it seems like you might need a <code>VendingMachine</code> class that can contain your inventory of <code>Products</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "edited": false, "score": 0, "creation_date": 1518031158, "post_id": 48671355, "comment_id": 84341332, "body": "I would like to use classes, but thank you very much for your time to answer, it was really helpful."}], "tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": true, "score": 0, "last_activity_date": 1518029896, "creation_date": 1518029896, "answer_id": 48671355, "question_id": 48669567, "link": "https://stackoverflow.com/questions/48669567/vending-machine-c/48671355#48671355", "title": "Vending Machine c++", "body": "<p>A vending machine has a restricted input. It shouldn't take a user's money unless the user enters a valid address. Most vending machines I've used take a letter that designates the row, followed by a number that designates the column i.e. upper left hand corner would typically be <code>A0</code>. The item to the right of that might be <code>A1</code> or <code>A2</code> etc. Each <code>Product</code> in the vending machine needs to be mapped to one of these addresses.  The user will likely input money (or credit?) and then input their selection. You will have to validate their selection i.e. the address they specified is valid for a particular product, and that they have enough credit to purchase that product. To better visualize your requirements you can refer to this picture.<a href=\"https://i.stack.imgur.com/A81yV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A81yV.jpg\" alt=\"vending machine input\"></a></p>\n\n<p>You should familiarize yourself with <code>std::cin</code> and obtaining user input. You could store the input as a <code>std::string</code> to make it easy to validate and lookup the associated <code>Product</code> to vend.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n    double credits;       ///&lt; user input for credits\n    std::string selection;  ///&lt; user input for vending address\n\n    std::cout &lt;&lt; \"Welcome to vending machine!\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Please input credits to purchase an item ex. 1.00 or 5.00\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Ready -&gt; \" &lt;&lt; std::flush;\n\n    // we need to enforce that the user entered a number here\n    while(!(std::cin &gt;&gt; credits))\n    {\n        std::cout &lt;&lt; \"Invalid value!\\nPlease input credits to purchase an item! ex. 5.00\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Ready -&gt; \" &lt;&lt; std::flush;\n        std::cin.clear();\n        std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    }\n\n    // (optional) format output stream for displaying credits i.e. 1.00\n    std::cout &lt;&lt; std::fixed;\n    std::cout &lt;&lt; std::setprecision(2);\n\n    std::cout &lt;&lt; \"Please make a selection (A-J,0-8) ex. B6 or A2\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Ready (cr. \" &lt;&lt; credits &lt;&lt; \") -&gt; \" &lt;&lt; std::flush;\n    // any input can be a std::string so we will need to post-process to make sure\n    // it's a valid input (format is correct and the product exists to vend)\n    std::cin &gt;&gt; selection;\n    // TODO: validate the users selection!\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 1, "accepted_answer_id": 48671355, "answer_count": 1, "score": 1, "last_activity_date": 1518029896, "creation_date": 1518023474, "last_edit_date": 1518025894, "question_id": 48669567, "link": "https://stackoverflow.com/questions/48669567/vending-machine-c", "title": "Vending Machine c++", "body": "<p>I am currently working on a vending machine program. However, I am not able to figure out how to ask the user for input and also print out the options and prices. This is a part of my code, my question is : How can i ask the user for an input in main() and get the options from the Base subclass.</p>\n\n<p>Thank you in advance.</p>\n\n<pre><code>class Product\n{\n  protected:\n    string product_description;\n    int itemCost = 0;\n\n  public:\n    virtual void consume(void)\n    {\n    }\n\n    virtual int cost(void) { return this-&gt;itemCost; }\n    virtual string description(void) { return product_description; }\n    virtual Product* ReturnHighestCostItem(void)\n    {\n      return this;\n    }\n    virtual void RemoveHighestCostItem(void)\n    {\n      return;\n    }\n};\n\nclass Base : public Product\n{\n   public:\n     Base(int option)\n     {\n       if (option == 1)\n       {\n         this-&gt;product_description = \"Plain\";\n         this-&gt;itemCost = 100;\n       }\n       else if (option == 2)\n       {\n         this-&gt;product_description = \"Spicy\";\n         this-&gt;itemCost = 150;\n       }\n       else if (option == 4)\n       {\n         this-&gt;product_description = \"Chocolate\";\n         this-&gt;itemCost = 200;\n       }\n       else if (option == 8)\n       {\n         this-&gt;product_description = \"Coconut\";\n         this-&gt;itemCost = 200;\n       }\n       else if (option == 16)\n       {\n         this-&gt;product_description = \"Fruity\";\n         this-&gt;itemCost = 200;\n       }\n    }\n};\n\nint main()\n{\n   Product obj; \n   cout &lt;&lt; \"The Available descriptions are:\" &lt;&lt; obj.description()&lt;&lt; endl;\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "c++14"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1518023351, "post_id": 48669413, "comment_id": 84336852, "body": "You really can&#39;t do this generically.  <code>std::string</code> knows it is storing <code>char</code>&#39;s so it can be built to take advantage of this.  In something like a vector could have a type where a single element is larger the a buffer it could have."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1518023599, "post_id": 48669413, "comment_id": 84336987, "body": "<code>std::vector</code> implementation cannot employ small buffer optumization, since <code>swap</code> would invalidate iterators, which is forbidden by the Standard."}, {"owner": {"reputation": 545, "user_id": 8654234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ffdff2f2d5422e6f5b150fa7ff73308?s=128&d=identicon&r=PG&f=1", "display_name": "suresh m", "link": "https://stackoverflow.com/users/8654234/suresh-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518023618, "post_id": 48669413, "comment_id": 84336999, "body": "oh ok, got it, thank you for the information, @NathanOliver :)"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1518023767, "post_id": 48669413, "comment_id": 84337078, "body": "There&#39;s another problem with using something like SSO with <code>vector</code>: you can&#39;t meet exception safety requirements if (for example) copying or moving an item might throw. <code>string</code> just says you can&#39;t instantiate it over a type that might throw, but <code>vector</code> can&#39;t do that."}, {"owner": {"reputation": 545, "user_id": 8654234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ffdff2f2d5422e6f5b150fa7ff73308?s=128&d=identicon&r=PG&f=1", "display_name": "suresh m", "link": "https://stackoverflow.com/users/8654234/suresh-m"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1518023799, "post_id": 48669413, "comment_id": 84337103, "body": "Thank you @Daniel Langr :)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1518024057, "post_id": 48669413, "comment_id": 84337254, "body": "Correct me if I&#39;m wrong, but I think <code>std::function</code> can use &quot;SSO&quot; (small functor optimization?) to store its callable."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518024118, "post_id": 48669413, "comment_id": 84337293, "body": "@BaummitAugen AFAIK, at least <i>gcc</i> implementation does it."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518024202, "post_id": 48669413, "comment_id": 84337340, "body": "Of course, <code>std::function</code> isn&#39;t a container, so not sure if OP would let that count anyways."}, {"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 0, "creation_date": 1518033916, "post_id": 48669413, "comment_id": 84342890, "body": "std::function is required to use that optimization, at least to hold a function pointer.  More details in [ <a href=\"http://eel.is/c++draft/func.wrap.func.con#4\" rel=\"nofollow noreferrer\">func.wrap.func.con#4</a>]"}], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 3004735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc92c25a247ebeca284cb5ef9fc23cce?s=128&d=identicon&r=PG&f=1", "display_name": "bladzio", "link": "https://stackoverflow.com/users/3004735/bladzio"}, "edited": false, "score": 0, "creation_date": 1561370474, "post_id": 48670571, "comment_id": 100027299, "body": "Do you know how it is possible that after move, iter remains valid ? I mean when you move all elements from v to the new location (here is new_v if it&#39;s big enough) then memory reserved on heap by v is deleted, so how it is possible that iter knows that it should point to the new location ?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 286, "user_id": 3004735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc92c25a247ebeca284cb5ef9fc23cce?s=128&d=identicon&r=PG&f=1", "display_name": "bladzio", "link": "https://stackoverflow.com/users/3004735/bladzio"}, "edited": false, "score": 0, "creation_date": 1561383699, "post_id": 48670571, "comment_id": 100034448, "body": "@bladzio &quot;then memory reserved on heap by <code>v</code> is deleted&quot; It is not deleted. Its ownership is transfered to <code>new_v</code>. The memory that <code>new_v</code> had owned is the one that&#39;s deleted."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 9, "last_activity_date": 1518028934, "last_edit_date": 1518028934, "creation_date": 1518026763, "answer_id": 48670571, "question_id": 48669413, "link": "https://stackoverflow.com/questions/48669413/is-sso-used-in-any-other-standard-library-containers-other-than-stdstring/48670571#48670571", "title": "Is sso used in any other standard library containers other than std::string?", "body": "<p>The broader term is SBO - small buffer optimization. SSO is string specific.</p>\n\n<p>Anyway, most of the other containers in the standard library cannot make use of SBO due to iterator invalidation rules. The standard guarantees that an iterator into a container remains valid through a move. That is:</p>\n\n<pre><code>std::vector&lt;T&gt; v = ...;\nauto iter = v.begin(); // assume v is non-empty\nstd::vector&lt;T&gt; new_v = std::move(v);\nfoo(*iter); // *must* be okay\n</code></pre>\n\n<p>This guarantee is impossible to meet with SBO - since <code>iter</code> could point into the automatic storage of <code>vs</code>, which cannot magically transfer into <code>new_v</code>. <code>std::string</code> does not have this kind of guarantee, so it's okay.</p>\n\n<p>On the other hand, something like <code>std::function&lt;&gt;</code> <em>can</em> (and typically does) implement SBO, since there is no such move guarantee. That's not really a container in the containers sense. </p>\n"}], "owner": {"reputation": 545, "user_id": 8654234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ffdff2f2d5422e6f5b150fa7ff73308?s=128&d=identicon&r=PG&f=1", "display_name": "suresh m", "link": "https://stackoverflow.com/users/8654234/suresh-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 48670571, "answer_count": 1, "score": 3, "last_activity_date": 1518040886, "creation_date": 1518022986, "last_edit_date": 1518040886, "question_id": 48669413, "link": "https://stackoverflow.com/questions/48669413/is-sso-used-in-any-other-standard-library-containers-other-than-stdstring", "title": "Is sso used in any other standard library containers other than std::string?", "body": "<p>SSO (small/short string optimization) can be used for <code>std::string</code>. But is it allowed to be used in other standard library containers (e.g. <code>std::vector</code>)? Does the answer depend on whether or not the template parameters of the containers are builtin types or user-defined types?</p>\n"}, {"tags": ["c++", "c", "makefile", "cmake", "linker"], "comments": [{"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 0, "creation_date": 1518023290, "post_id": 48669411, "comment_id": 84336808, "body": "What does your Makefile look like?"}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "reply_to_user": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 0, "creation_date": 1518023552, "post_id": 48669411, "comment_id": 84336964, "body": "The makefile is generated by cmake."}], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518023514, "post_id": 48669542, "comment_id": 84336944, "body": "But why does it work when building the sub directory? It also links the library"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "reply_to_user": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518023604, "post_id": 48669542, "comment_id": 84336990, "body": "In the sub directory you have <code>add_library(subdir_lib</code>. That allows the library to be added by the name subdir_lib."}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518023724, "post_id": 48669542, "comment_id": 84337053, "body": "Yes, I have that: In the subdirectory: add_library(subdir_lib files/Test.cpp files/Test.h) target_link_libraries(subdir_lib         triangle), in the main directory add_executable(cmake_problem main.cpp)    target_link_libraries(cmake_problem         subdir_lib         triangle)"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "reply_to_user": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518023998, "post_id": 48669542, "comment_id": 84337211, "body": "Define triangle. You know it as the built file, but CMake doesn&#39;t know what it is. If you add the downloaded source as a sub directory, there is an add_library call naming the library &quot;triangle&quot;. Short of that, you have to tell CMake where the library is. Either you have to find it, or explicitly say where the built library exists."}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518024910, "post_id": 48669542, "comment_id": 84337744, "body": "Even if I add <code>find_package(Triangle REQUIRED)</code> to both the CMakeLists.txt files it doesn&#39;t work. But Cmake does not stop the preocessing, which means it finds the packages.."}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "reply_to_user": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518028385, "post_id": 48669542, "comment_id": 84339760, "body": "I&#39;m not sure how it found it. Are there any variables filled in when it&#39;s found?"}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518033509, "post_id": 48669542, "comment_id": 84342700, "body": "Unfortunately not. None of the neither for the following is filled ${TRIANGLE_LIBRARIES}, ${TRIANGLE_LIBRARY}"}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518036764, "post_id": 48669542, "comment_id": 84344368, "body": "These are the set variables after find_package(Triangle REQUIRED): ` -- Triangle_CONFIG=/usr/local/lib/cmake/Triangle/TriangleConfig&zwnj;&#8203;.cmake -- Triangle_CONSIDERED_CONFIGS=/usr/local/lib/cmake/Triangle/Tr&zwnj;&#8203;iangleConfig.cmake -- Triangle_CONSIDERED_VERSIONS=1.7.0 -- Triangle_DIR=/usr/local/lib/cmake/Triangle -- Triangle_FOUND=1 -- Triangle_VERSION=1.7.0 -- Triangle_VERSION_COUNT=3 -- Triangle_VERSION_MAJOR=1 -- Triangle_VERSION_MINOR=7 -- Triangle_VERSION_PATCH=0 -- Triangle_VERSION_TWEAK=0`"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "reply_to_user": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518036984, "post_id": 48669542, "comment_id": 84344490, "body": "My opinion is that you should take the folder as downloaded and include it in your project as an add_subdirectory, unless you want to mess with the package lookup. I can&#39;t say what may be the problem there."}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518037876, "post_id": 48669542, "comment_id": 84344998, "body": "Unfortunately, adding the source directory as sub directory did not work either."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1518088318, "post_id": 48669542, "comment_id": 84365316, "body": "@Ben &quot;It seems that you tried to link a library that doesn&#39;t exist&quot;. It doesn&#39;t. If the linker cannot find a library it gives an error of the form <code>cannot find -lfoo</code>. It does not ignore this fact and proceed to give undefined reference errors to symbols in the missing library."}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 0, "creation_date": 1518091625, "post_id": 48669542, "comment_id": 84367406, "body": "That&#39;s assuming that CMake told the linker to use the library in the first place. He could verify by building with VERBOSE=1."}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1518102610, "post_id": 48669542, "comment_id": 84375224, "body": "As @MikeKinghan said, I don&#39;t get the &quot;cannot find&quot; message: <code>subdir&#47;libsubdir_lib.a(Test.cpp.o): In function </code>Test::run()&#39;: Test.cpp:(.text+0xca): undefined reference to <code>triangle_context_create&#39; Test.cpp:(.text+0xf5): undefined reference to </code>triangle_context_options&#39; Test.cpp:(.text+0x12c): undefined reference to <code>triangle_mesh_create&#39; Test.cpp:(.text+0x159): undefined reference to </code>triangle_context_destroy&#39; collect2: error: ld returned 1 exit status make[2]: *** [cmake_problem] Error 1 make[1]: *** [CMakeFiles/cmake_problem.dir/all] Error 2 make: *** [all] Error 2`"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 0, "creation_date": 1518107954, "post_id": 48669542, "comment_id": 84379008, "body": "My point is that there&#39;s a difference between the linker not finding the library and CMake not finding it. CMake has to tell the linker about it in the first place or you won&#39;t ever get the <code>-lfoo</code> on the command line in the first place. Run <code>make VERBOSE=1</code> and see what the linker is told."}, {"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518113451, "post_id": 48669542, "comment_id": 84382433, "body": "it is linking -ltriangle. here is a gist with the full output: <a href=\"https://gist.github.com/mimre25/b5f2258a57a4a76c9f5f3693bafc23fd\" rel=\"nofollow noreferrer\">gist.github.com/mimre25/b5f2258a57a4a76c9f5f3693bafc23fd</a> It seems like include files are missing... I&#39;ve also updated the cmakelists (see github link in first post)"}], "tags": [], "owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1518023386, "creation_date": 1518023386, "answer_id": 48669542, "question_id": 48669411, "link": "https://stackoverflow.com/questions/48669411/make-cmake-subdirectory-linking-to-external-library-fails/48669542#48669542", "title": "Make/Cmake subdirectory linking to external library fails", "body": "<p>It seems that you tried to link a library that doesn't exist (where CMake can find it).</p>\n\n<p>You either need to create a find_library, or when you link to triangle, give a full path with name.</p>\n\n<p>Alternatively, you can leave the source in a sub directory which you can call then link to the name.</p>\n"}, {"comments": [{"owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518454376, "post_id": 48737424, "comment_id": 84503576, "body": "Unfortunately I run into the same problem. It works all fine when building subdir_lib, but once I&#39;m in the upper most directory, I get <code>undefined reference to &#39;triangulate(char*, triangulateio*, triangulateio*, triangulateio*)&#39; collect2: error: ld returned 1 exit status</code>.. triangle is in a subdirector of subdir (I&#39;ve update the github repository)"}, {"owner": {"reputation": 126, "user_id": 6824382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moX9K.jpg?s=128&g=1", "display_name": "Hashimoto", "link": "https://stackoverflow.com/users/6824382/hashimoto"}, "reply_to_user": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "edited": false, "score": 0, "creation_date": 1518455530, "post_id": 48737424, "comment_id": 84504322, "body": "Oh you should include the library like this: extern &quot;C&quot;{ #include &lt;triangle.h&gt; } if you are using it in C++."}], "tags": [], "owner": {"reputation": 126, "user_id": 6824382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moX9K.jpg?s=128&g=1", "display_name": "Hashimoto", "link": "https://stackoverflow.com/users/6824382/hashimoto"}, "is_accepted": true, "score": 1, "last_activity_date": 1518390253, "creation_date": 1518390253, "answer_id": 48737424, "question_id": 48669411, "link": "https://stackoverflow.com/questions/48669411/make-cmake-subdirectory-linking-to-external-library-fails/48737424#48737424", "title": "Make/Cmake subdirectory linking to external library fails", "body": "<p>I would have written this as a comment but I don't have enough reputation for that. Is this a situation where you need to use this Triangle (<a href=\"https://github.com/wo80/Triangle\" rel=\"nofollow noreferrer\">https://github.com/wo80/Triangle</a>), rather than the original Triangle (<a href=\"https://www.cs.cmu.edu/~quake/triangle.html\" rel=\"nofollow noreferrer\">https://www.cs.cmu.edu/~quake/triangle.html</a>)? If you can use the latter, I know from experience that its is very easy to link to. I just put it in a subdirectory in my code with this CMakeLists.txt. </p>\n\n<pre><code>## This only works for linux. Use an if statement to handle all architectures.\nSET(CMAKE_C_FLAGS\n  \"${CMAKE_C_FLAGS} -O -DLINUX -DTRILIBRARY -w -DANSI_DECLARATORS\"\n  )\n\nSET(FILES_SOURCE\n  triangle.h triangle.c\n  )\n\nADD_LIBRARY( my_local_name_for_triangle_library STATIC ${FILES_SOURCE} )\n</code></pre>\n\n<p>And then I can link to the triangle library I have created like this:</p>\n\n<pre><code>include_directories(my_local_triangle_dir)\ntarget_link_libraries(my_local_name_for_triangle_library)\n</code></pre>\n\n<p>However, some of the #define macros are missing in triangle.h, so you need to copy them from triangle.c to triangle.h.</p>\n"}], "owner": {"reputation": 82, "user_id": 7162326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72fc7b706882b2bbb80c30ac26cb9654?s=128&d=identicon&r=PG&f=1", "display_name": "mimre", "link": "https://stackoverflow.com/users/7162326/mimre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 48737424, "answer_count": 2, "score": 0, "last_activity_date": 1518390253, "creation_date": 1518022981, "question_id": 48669411, "link": "https://stackoverflow.com/questions/48669411/make-cmake-subdirectory-linking-to-external-library-fails", "title": "Make/Cmake subdirectory linking to external library fails", "body": "<p>I'm currently having trouble in the following setup:</p>\n\n<p>My main project has a subdirector that is a library. This library depends on a system library \"triangle\" (installed from source). The main project does use a file from the subdirectory.\nCmake of the main project (and the library) work fine.</p>\n\n<p>Building the library works just fine.\n(Either in it's own directory or after cmake in the main directory with \nmake subdir_lib compiles without problems)</p>\n\n<p>This is where the problems starts.\nBuilding the main project with make project fails. It happens during linking:</p>\n\n<pre><code>subdir/libsubdir_lib.a(Test.cpp.o): In function `Test::run()':\n/home/mimre/workspace/tmp/cmake-problem/subdir/files/Test.cpp:34: undefined reference to `triangle_context_create'\n/home/mimre/workspace/tmp/cmake-problem/subdir/files/Test.cpp:35: undefined reference to `triangle_context_options'\n/home/mimre/workspace/tmp/cmake-problem/subdir/files/Test.cpp:42: undefined reference to `triangle_mesh_create'\n/home/mimre/workspace/tmp/cmake-problem/subdir/files/Test.cpp:50: undefined reference to `triangle_context_destroy'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/cmake_problem.dir/build.make:95: recipe for target 'cmake_problem' failed\nmake[3]: *** [cmake_problem] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/cmake_problem.dir/all' failed\nmake[2]: *** [CMakeFiles/cmake_problem.dir/all] Error 2\nCMakeFiles/Makefile2:79: recipe for target 'CMakeFiles/cmake_problem.dir/rule' failed\nmake[1]: *** [CMakeFiles/cmake_problem.dir/rule] Error 2\nMakefile:118: recipe for target 'cmake_problem' failed\nmake: *** [cmake_problem] Error 2\n</code></pre>\n\n<p>To avoid having a wall of code in here, I uploaded a minimal example onto github: <a href=\"https://github.com/mimre25/cmake_problem\" rel=\"nofollow noreferrer\">https://github.com/mimre25/cmake_problem</a></p>\n\n<p>Also, this is the library I'm using, installed with cmake &amp; sudo make install: <a href=\"https://github.com/wo80/Triangle\" rel=\"nofollow noreferrer\">https://github.com/wo80/Triangle</a></p>\n\n<p>I've tried the solutions from various similar threads but to no avail.</p>\n\n<p>Thanks in advance for any help!</p>\n"}, {"tags": ["c++", "unit-testing", "templates", "testing", "googletest"], "comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518023829, "post_id": 48669279, "comment_id": 84337123, "body": "I guess you can still create a template class which expects types defining a <code>static constexpr T value</code> as its template parameters ? That might be a bit tedious, but it should work at least. ( <a href=\"https://ideone.com/4l4H7y\" rel=\"nofollow noreferrer\">ideone.com/4l4H7y</a> )"}], "answers": [{"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 5, "last_activity_date": 1518369482, "last_edit_date": 1518369482, "creation_date": 1518363173, "answer_id": 48733150, "question_id": 48669279, "link": "https://stackoverflow.com/questions/48669279/create-gtest-value-parametrized-test-for-a-template-class/48733150#48733150", "title": "Create gtest value parametrized test for a template class", "body": "<p>Googletest has no ready-to-wear solution for generating tests over a\ntemplate for a set of non-type template parameters, as you want.</p>\n\n<p>Assuming C++11 or later, you can take advantage of <a href=\"http://en.cppreference.com/w/cpp/types/integral_constant\" rel=\"noreferrer\"><code>std::integral_constant&lt;T,N&gt;</code></a>\nto create a class that uniquely represents each of the range of <code>std::size_t</code>\nparameters <code>N</code> for which you want tests covering <code>Line&lt;N&gt;</code>, and use <code>std::integral_constant&lt;std::size_t,N&gt;</code>\nas a proxy for <code>N</code> to construct a <code>TYPED_TEST_CASE</code> and associated <code>TYPED_TEST</code>s. Like so:</p>\n\n<p>A toy <code>Line</code> class for illustration:</p>\n\n<p><strong>Line.h</strong></p>\n\n<pre><code>#ifndef LINE_H\n#define LINE_H\n#include &lt;cstddef&gt;\n\ntemplate &lt;std::size_t N&gt;\nclass Line {\npublic:\n    static constexpr std::size_t capacity() {\n        return N;\n    }\n    explicit Line(std::size_t n)\n    : _length{n &lt; N ? n : N}{};\n\n    std::size_t length() const {\n        return _length;\n    }\n\nprivate:\n    std::size_t _length = 0;\n\n};\n\n#endif\n</code></pre>\n\n<p>Googletest test runner:</p>\n\n<p><strong>line_test.cpp</strong></p>\n\n<pre><code>#include &lt;gtest/gtest.h&gt;\n#include &lt;type_traits&gt;\n#include \"line.h\"\n\ntemplate &lt;typename T&gt;\nclass line_tester : public ::testing::Test{};\n\nusing test_types = ::testing::Types&lt;\n    std::integral_constant&lt;std::size_t,2&gt;,\n    std::integral_constant&lt;std::size_t,3&gt;, \n    std::integral_constant&lt;std::size_t,5&gt;&gt;;\n\nTYPED_TEST_CASE(line_tester, test_types);\n\nTYPED_TEST(line_tester, get_capacity) {\n    static constexpr std::size_t n = TypeParam::value;\n    ASSERT_EQ(n,Line&lt;n&gt;::capacity());\n}\n\nTYPED_TEST(line_tester, set_length_preserved) {\n    Line&lt;TypeParam::value&gt; line{1};\n    ASSERT_EQ(line.length(),1);\n}\n\nTYPED_TEST(line_tester, set_length_trunctated) {\n    static constexpr std::size_t n = TypeParam::value;\n    Line&lt;n&gt; line{999};\n    ASSERT_EQ(line.length(),Line&lt;n&gt;::capacity());\n}\n\nint main(int argc, char **argv) {\n  ::testing::InitGoogleTest(&amp;argc, argv);\n  return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>Which runs like:</p>\n\n<pre><code>$ ./line_tester \n[==========] Running 9 tests from 3 test cases.\n[----------] Global test environment set-up.\n[----------] 3 tests from line_tester/0, where TypeParam = std::integral_constant&lt;unsigned long, 2ul&gt;\n[ RUN      ] line_tester/0.get_capacity\n[       OK ] line_tester/0.get_capacity (0 ms)\n[ RUN      ] line_tester/0.set_length_preserved\n[       OK ] line_tester/0.set_length_preserved (0 ms)\n[ RUN      ] line_tester/0.set_length_trunctated\n[       OK ] line_tester/0.set_length_trunctated (0 ms)\n[----------] 3 tests from line_tester/0 (1 ms total)\n\n[----------] 3 tests from line_tester/1, where TypeParam = std::integral_constant&lt;unsigned long, 3ul&gt;\n[ RUN      ] line_tester/1.get_capacity\n[       OK ] line_tester/1.get_capacity (0 ms)\n[ RUN      ] line_tester/1.set_length_preserved\n[       OK ] line_tester/1.set_length_preserved (0 ms)\n[ RUN      ] line_tester/1.set_length_trunctated\n[       OK ] line_tester/1.set_length_trunctated (0 ms)\n[----------] 3 tests from line_tester/1 (0 ms total)\n\n[----------] 3 tests from line_tester/2, where TypeParam = std::integral_constant&lt;unsigned long, 5ul&gt;\n[ RUN      ] line_tester/2.get_capacity\n[       OK ] line_tester/2.get_capacity (0 ms)\n[ RUN      ] line_tester/2.set_length_preserved\n[       OK ] line_tester/2.set_length_preserved (0 ms)\n[ RUN      ] line_tester/2.set_length_trunctated\n[       OK ] line_tester/2.set_length_trunctated (0 ms)\n[----------] 3 tests from line_tester/2 (0 ms total)\n\n[----------] Global test environment tear-down\n[==========] 9 tests from 3 test cases ran. (1 ms total)\n[  PASSED  ] 9 tests.\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9328809, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JdCWfFPtbdI/AAAAAAAAAAI/AAAAAAAAi4I/TNsBEg31q14/photo.jpg?sz=128", "display_name": "Luis Manuel Diaz Angulo", "link": "https://stackoverflow.com/users/9328809/luis-manuel-diaz-angulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 1, "accepted_answer_id": 48733150, "answer_count": 1, "score": 5, "last_activity_date": 1518369482, "creation_date": 1518022635, "last_edit_date": 1518098000, "question_id": 48669279, "link": "https://stackoverflow.com/questions/48669279/create-gtest-value-parametrized-test-for-a-template-class", "title": "Create gtest value parametrized test for a template class", "body": "<p>I have a template class of type</p>\n\n<pre><code>&lt;size_t N&gt;\nclass Line {\n   ...\n};\n</code></pre>\n\n<p>How could I could I create a test for several instances of this class? e.g. Line&lt;1>, Line&lt;2>, ...</p>\n\n<p>I have checked the documentation and there are:</p>\n\n<ul>\n<li><p>Value-Parametrized tests, for run-time values</p></li>\n<li><p>Type-Parametrized tests, which allow you to change the typename at compile time.</p></li>\n</ul>\n\n<p>However, I do not find anything to change values at compile-time. </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 3, "creation_date": 1518023043, "post_id": 48669182, "comment_id": 84336638, "body": "<code>std::conditional</code> isn&#39;t &quot;lazy&quot;. To instantiate a template <code>V&lt;T, U&gt;</code> you need to instantiate <code>T</code> and <code>U</code> first, even if they don&#39;t end up being used. You could solve that with something like this <a href=\"https://ideone.com/urMBjB\" rel=\"nofollow noreferrer\">ideone.com/urMBjB</a> (but that requires you to create new templates for each choice). In that specific case, you could also just use <code>i &lt; 8 ? i : i - 8</code>"}], "owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518022368, "creation_date": 1518022368, "question_id": 48669182, "link": "https://stackoverflow.com/questions/48669182/static-assert-in-stdconditional", "title": "static_assert in std::conditional", "body": "<p>In the following reduced SSCCE why does the static assertion fail?</p>\n\n<p>Obviously this is because the compiler attempts to instantiate <code>Assert&lt;i - 8&gt;</code>, which for unsigned <code>size_t</code> results in an astronomical <code>index</code> template argument. But why does it try to instantiate this and what can I do about it?</p>\n\n<pre><code>#include &lt;utility&gt;\n\nstruct Struct {\n    template&lt;size_t index&gt;\n    struct Assert {\n        static_assert(index &lt; 8, \"xxx\");\n        using Type = int;\n    };\n};\n\n\ntemplate&lt;size_t i&gt;\nusing Test = typename std::conditional&lt;\n    (i &lt; 8),\n    typename Struct::template Assert&lt;i&gt;::Type,\n    typename Struct::template Assert&lt;i - 8&gt;::Type\n&gt;::type;\n\nTest&lt;0&gt; t;\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "opencv3.0"], "comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518023329, "post_id": 48669181, "comment_id": 84336831, "body": "Define &quot;blob&quot;.  ..."}, {"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518023633, "post_id": 48669181, "comment_id": 84337006, "body": "I have edited the question. I hope it&#39;s clear enough."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518024044, "post_id": 48669181, "comment_id": 84337249, "body": "Not really. Connectivity has to do with zeros, right? Does diagonal adjacency of non-zero points constitute connection?  Or must a connection be side-to-side?"}, {"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518024896, "post_id": 48669181, "comment_id": 84337734, "body": "Zeros are background. I mean connectivity among all non-zero elements."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518025086, "post_id": 48669181, "comment_id": 84337830, "body": "From the image, it appears that diagonals count as connections.  There was no example of that in the original."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518025317, "post_id": 48669181, "comment_id": 84337970, "body": "OpenCV is available in C++.  It&#39;s not terribly hard to use either."}, {"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518025668, "post_id": 48669181, "comment_id": 84338190, "body": "Yes, I know. I am not able to code it in C++. I binarized the input image and applied connectedComponentsWithStats(). This gives me labels. I don&#39;t know how to code the rest (as I did in Python)."}, {"owner": {"reputation": 424, "user_id": 6417527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b8872b39c0da12993c80aece9a672a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6417527/michael-smith"}, "edited": false, "score": 0, "creation_date": 1518029833, "post_id": 48669181, "comment_id": 84340607, "body": "Is the connectivity only for the immediately adjacent numbers?  Or does it go on to be all things connected given 8-way connectivity?  If it&#39;s only the numbers immediately adjacent, I would suggest looking into a 2D Convolution, because it looks like that&#39;s what you&#39;re trying to achieve."}, {"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "edited": false, "score": 0, "creation_date": 1518030932, "post_id": 48669181, "comment_id": 84341208, "body": "(I have edited the question) The connectivity is only for 8-adjacency. I&#39;m sorry I didn&#39;t understand how a 2D convolution will help here. FYI: the matrix is actually an image of size 1000x1000 pixels; for simplicity I have explained it using a small 10x10 matrix."}], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "edited": false, "score": 0, "creation_date": 1518101781, "post_id": 48678018, "comment_id": 84374625, "body": "Thanks for the detailed answer!  You are right, I know the functions to be used too, but I just can&#39;t figure out how to code it (I&#39;m new to C++).   This is exactly what I want, except that I&#39;d prefer to use OpenCV. This is only a small part of a bigger code which uses OpenCV. I&#39;ll use your answer, it may help me :) Thanks!"}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": false, "score": 2, "last_activity_date": 1518066741, "creation_date": 1518066741, "answer_id": 48678018, "question_id": 48669181, "link": "https://stackoverflow.com/questions/48669181/remove-connected-components-from-image-which-have-a-sum-of-pixel-values-thresh/48678018#48678018", "title": "Remove connected components from image which have a sum of pixel values &lt; threshold", "body": "<p>You've already implemented this in Python, so you know how to solve the problem. I guess being able to implement it in C++ is a matter of knowing the library you want to use.</p>\n\n<p>Your Python implementation is very inefficient: you iterate over the labels, and for each label visit each image pixel (<code>idx = np.where(labels.copy() == cnt)</code>). This can get really expensive if you have more than a handful of labels.</p>\n\n<p>In the code below, I loop over the image once to accumulate the sum of the image intensities for each of the labels, then once to paint the image with the computed sum (for each pixel with a label, look up the sum for that label), and then one more time to threshold this image. This thresholded image I then use as a mask to set to 0 the pixels in the input image that you don't want to keep.</p>\n\n<p>I use <a href=\"https://github.com/DIPlib/diplib\" rel=\"nofollow noreferrer\">DIPlib</a> here. Though I'm sure you can replicate this using OpenCV in some way if you really want to use it.</p>\n\n<pre><code>#include \"diplib.h\"\n#include \"dipviewer.h\"\n#include \"diplib/file_io.h\"\n#include \"diplib/regions.h\"\n#include \"diplib/measurement.h\"\n\nint main() {\n   // Create a test image with similar properties to your example\n   dip::Image input = -dip::ImageReadICS( \"/Users/cris/newdip/examples/cermet.ics\" );\n   input.At( input &lt; 120 ) = 0;\n   // Display\n   dip::viewer::ShowSimple( input, \"input image\" );\n   // Threshold and label\n   dip::Image label = dip::Label( input &gt; 0 );\n   // Obtain sum of pixels per label\n   dip::MeasurementTool measurementTool;\n   auto msr = measurementTool.Measure( label, input, { \"Mass\" } );\n   // Paint each label with the measured value\n   dip::Image feature = dip::ObjectToMeasurement( label, msr[ \"Mass\" ] );\n   // Create output as a copy of the input, with low feature values set to 0\n   dip::Image output = input.Copy();\n   output.At( feature &lt; 100000 ) = 0;\n   // Display\n   dip::viewer::ShowSimple( output, \"output image\" );\n   dip::viewer::Spin();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/avE9e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/avE9e.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "edited": false, "score": 0, "creation_date": 1520014115, "post_id": 49058167, "comment_id": 85155752, "body": "I was trying to code it in C or C++, and got stuck there (I could easily do it in Python cuz it&#39;s simple)"}], "tags": [], "owner": {"reputation": 1596, "user_id": 1195198, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/OPfUr.png?s=128&g=1", "display_name": "Mercury", "link": "https://stackoverflow.com/users/1195198/mercury"}, "is_accepted": false, "score": 0, "last_activity_date": 1519936036, "creation_date": 1519936036, "answer_id": 49058167, "question_id": 48669181, "link": "https://stackoverflow.com/questions/48669181/remove-connected-components-from-image-which-have-a-sum-of-pixel-values-thresh/49058167#49058167", "title": "Remove connected components from image which have a sum of pixel values &lt; threshold", "body": "<p>If you would like to stick with opencv, you can use <code>cv::calcHist</code>  to count the number of occurrences of each label, and filrerout values which corresponds to bin values smaller than 10.\nThe resulting labeld image should then be binarized, and element-wise multiplied by the source in order to get you desired result.</p>\n"}], "owner": {"reputation": 580, "user_id": 2897029, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/0839c6fc468522c775e7346628749038?s=128&d=identicon&r=PG&f=1", "display_name": "Saania", "link": "https://stackoverflow.com/users/2897029/saania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1519936036, "creation_date": 1518022365, "last_edit_date": 1518030793, "question_id": 48669181, "link": "https://stackoverflow.com/questions/48669181/remove-connected-components-from-image-which-have-a-sum-of-pixel-values-thresh", "title": "Remove connected components from image which have a sum of pixel values &lt; threshold", "body": "<p>In simple words, this is an example of input available and the corresponding output I want: </p>\n\n<pre><code>In: [ 0 0 0 0 0 0 1 0 1 0\n      0 6 6 0 0 0 0 1 1 0\n      0 8 9 0 0 0 0 0 1 1\n      8 0 0 0 9 9 0 0 0 0\n      0 0 0 0 8 8 0 0 0 0\n      0 0 0 0 0 0 0 0 0 0\n      9 9 7 0 0 0 0 0 1 0\n      0 6 8 0 0 0 0 3 2 0\n      0 0 0 0 0 0 0 2 1 0\n      0 0 0 0 0 0 0 0 0 0 ]\n</code></pre>\n\n<p>After binarizing and obtaining labelled image using <strong>cv2.connectedComponents()</strong>:</p>\n\n<pre><code>labels: [ 0 0 0 0 0 0 1 0 1 0\n          0 2 2 0 0 0 0 1 1 0\n          0 2 2 0 0 0 0 0 1 1\n          2 0 0 0 3 3 0 0 0 0\n          0 0 0 0 3 3 0 0 0 0\n          0 0 0 0 0 0 0 0 0 0\n          4 4 4 0 0 0 0 0 5 0\n          0 4 4 0 0 0 0 5 5 0\n          0 0 0 0 0 0 0 5 5 0\n          0 0 0 0 0 0 0 0 0 0 ]\n</code></pre>\n\n<p>From here, I want the following output:</p>\n\n<pre><code>Out: [0 0 0 0 0 0 0 0 0 0\n      0 6 6 0 0 0 0 0 0 0\n      0 8 9 0 0 0 0 0 0 0\n      8 0 0 0 9 9 0 0 0 0\n      0 0 0 0 8 8 0 0 0 0\n      0 0 0 0 0 0 0 0 0 0\n      9 9 7 0 0 0 0 0 0 0\n      0 6 8 0 0 0 0 0 0 0\n      0 0 0 0 0 0 0 0 0 0\n      0 0 0 0 0 0 0 0 0 0 ]\n</code></pre>\n\n<p>There are many connected components present (in this case: 5 components of 8-connectivity). The components (of <strong>In</strong>) which have their sum of pixels &lt; 10 (a threshold) are removed in <strong>Out</strong>. </p>\n\n<p>How do I implement this in C++ (possibly using OpenCV)?</p>\n\n<p>I have already done it on Python using  OpenCV but not able to implement on C++. </p>\n\n<p>This is a part of my Python code, if useful (<strong>labels</strong> is the output of <strong>cv2.connectedComponents()</strong> ):</p>\n\n<pre><code>for cnt in range(1, labels.max()+1): \n        idx = np.where(labels.copy() == cnt)\n        valMat = In[idx]\n        sum_valMat = sum(valMat)\n        if sum_valMat &gt; 3000:\n            fingerNodes[idx] = 0\n</code></pre>\n\n<p>Input is a simple 2D matrix. This is an example of connected component:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RdT8N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RdT8N.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 0, "creation_date": 1518022748, "post_id": 48669138, "comment_id": 84336418, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42451175/entry-point-not-found-when-running-exe-c\">Entry point not found when running exe - C++</a>"}, {"owner": {"reputation": 1, "user_id": 9328630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a31c7ecbbbfb6905e9816dfec2c113?s=128&d=identicon&r=PG", "display_name": "user189636", "link": "https://stackoverflow.com/users/9328630/user189636"}, "reply_to_user": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 0, "creation_date": 1518023573, "post_id": 48669138, "comment_id": 84336972, "body": "@VishaalShankar , no, it is not, please see my edit."}, {"owner": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 0, "creation_date": 1518024027, "post_id": 48669138, "comment_id": 84337233, "body": "The issue is the same and there is an accepted solution in that post. Did you try to add -static-libstdc++ to your linking options as asked to in the accepted answer ?"}, {"owner": {"reputation": 1, "user_id": 9328630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a31c7ecbbbfb6905e9816dfec2c113?s=128&d=identicon&r=PG", "display_name": "user189636", "link": "https://stackoverflow.com/users/9328630/user189636"}, "reply_to_user": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 0, "creation_date": 1518107484, "post_id": 48669138, "comment_id": 84378714, "body": "@VishaalShankar , I am assuming that giving a path variable as a folder directory links it to all `.exe.s in the directory."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518162651, "post_id": 48669138, "comment_id": 84400414, "body": "You may have an older, incompatible library called libstdc++-6.dll somewhere in your system, which happens to be in the PATH and thus preempt loading the right one. Search and remove all of those, only leave the one from your MinGW install."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518297133, "post_id": 48669138, "comment_id": 84450224, "body": "@n.m. Since (according to your comment) I obviously don&#39;t understand.anything and should keep my comments unpublished I suggest you either publish yours as an answer or delete my account.  Technically you are supposed to answer the OP&#39;s questions and not post condescending comments like that one."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518299986, "post_id": 48669138, "comment_id": 84451005, "body": "@n.m. But being rude to me is acceptable somehow.  Good on you."}], "owner": {"reputation": 1, "user_id": 9328630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a31c7ecbbbfb6905e9816dfec2c113?s=128&d=identicon&r=PG", "display_name": "user189636", "link": "https://stackoverflow.com/users/9328630/user189636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518107295, "creation_date": 1518022238, "last_edit_date": 1592644375, "question_id": 48669138, "link": "https://stackoverflow.com/questions/48669138/cannot-execute-a-compiled-file-with-classes-entry-point-not-found", "title": "Cannot execute a compiled file with classes: Entry Point Not Found", "body": "<blockquote>\n<p>A possible duplicate of <a href=\"https://stackoverflow.com/questions/42451175/entry-point-not-found-when-running-exe-c\">Entry point not found when running exe</a></p>\n</blockquote>\n<p>Recently, I installed <a href=\"http://mingw.org\" rel=\"nofollow noreferrer\">MinGW</a> and I was following some examples shown in &quot;<a href=\"https://g.co/kgs/fRcfk7\" rel=\"nofollow noreferrer\">C++ in Easy Steps</a>&quot;. I was working through it, and I got on to the section about classes.</p>\n<p>It told me to enter this code so here it is:</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass Dog\n{\n  int age, weight ;\n  string color ;\n\n  public:\n    void bark() { cout &lt;&lt; &quot;WOOF!&quot; &lt;&lt; endl ; }\n\n    void setAge( int yrs ) { age = yrs ; }\n    void setWeight( int lbs ) { weight = lbs ; }\n    void setColor( string hue ) { color = hue ; }\n    \n    int getAge() { return age; }\n    int getWeight() { return weight; }\n    string getColor() { return color; }\n} ;\n\nint main()\n{\n  Dog fido ;\n\n  fido.setAge( 3 ) ;\n  fido.setWeight( 15 ) ;\n  fido.setColor( &quot;brown&quot; ) ;\n\n  cout &lt;&lt; &quot;Fido is a &quot; &lt;&lt; fido.getColor() &lt;&lt; &quot; dog&quot; &lt;&lt; endl ;\n  cout &lt;&lt; &quot;Fido is &quot; &lt;&lt; fido.getAge() &lt;&lt; &quot; years old&quot; &lt;&lt; endl ;\n  cout &lt;&lt; &quot;Fido weighs &quot; &lt;&lt; fido.getWeight() &lt;&lt; &quot; pounds&quot; &lt;&lt; endl ;\n\n  fido.bark() ;\n\n  return 0 ;\n}\n</code></pre>\n<p>I compiled it successfully (cmd: <code>c++ object.cpp -o object.exe</code>)</p>\n<p>And I executed (cmd: <code>object</code>) it and came up with this error message:</p>\n<p><a href=\"https://i.stack.imgur.com/VG0Qw.png\" rel=\"nofollow noreferrer\">The Error Message</a></p>\n<p>What did I do wrong?</p>\n<p>I've noticed that it is just programs with classes that have this problem, because I can run programs without classes, just with them is the issue.</p>\n<h2>Edit:</h2>\n<p>It is different from the above question, because I already have my <code>PATH</code> Environmental Variable set to <code>C:\\MinGW\\bin</code>:</p>\n<p>The accepted answer says:</p>\n<blockquote>\n<p>Locate the directory containing libstdc++-6.dll and add it to your PATH variable.</p>\n<ul>\n<li>Open command prompt</li>\n<li>Run set PATH=%PATH%;YOUR_PATH_HERE</li>\n</ul>\n</blockquote>\n<p>So am I doing it right?</p>\n"}, {"tags": ["c++", "matlab", "mex"], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1518027543, "post_id": 48670684, "comment_id": 84339301, "body": "Wicked, thanks man! Out of curiosity, does the [x &#39; &#39; y &#39; &#39;] syntax create a character array with the variables / const char arrays? I&#39;m not really sure as to why that works, but passing in a variable to the mex command directly does not."}, {"owner": {"reputation": 21283, "user_id": 796085, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/o27aB.png?s=128&g=1", "display_name": "Tommaso Belluzzo", "link": "https://stackoverflow.com/users/796085/tommaso-belluzzo"}, "reply_to_user": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 1, "creation_date": 1518028469, "post_id": 48670684, "comment_id": 84339803, "body": "Well its purpose is to concatenate character arrays, yes. It is very useful when dealing with parametrized strings."}], "tags": [], "owner": {"reputation": 21283, "user_id": 796085, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/o27aB.png?s=128&g=1", "display_name": "Tommaso Belluzzo", "link": "https://stackoverflow.com/users/796085/tommaso-belluzzo"}, "is_accepted": true, "score": 3, "last_activity_date": 1518027205, "creation_date": 1518027205, "answer_id": 48670684, "question_id": 48668913, "link": "https://stackoverflow.com/questions/48668913/how-to-pass-filepath-variables-to-mex-command/48670684#48670684", "title": "How to pass filepath variables to mex command?", "body": "<p>This should do the trick:</p>\n\n<pre><code>input = 'src/helloworld.cpp';\noutput = '/mexFiles';\n\neval(['mex ' input ' -outdir ' output]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1518205594, "post_id": 48712586, "comment_id": 84425192, "body": "I&#39;ll upvote it here, cause apparently the other one was two days ago."}], "tags": [], "owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "is_accepted": false, "score": 2, "last_activity_date": 1518203460, "creation_date": 1518203460, "answer_id": 48712586, "question_id": 48668913, "link": "https://stackoverflow.com/questions/48668913/how-to-pass-filepath-variables-to-mex-command/48712586#48712586", "title": "How to pass filepath variables to mex command?", "body": "<p>When executing a command of the form</p>\n\n<pre><code>func arg1 arg2 arg3\n</code></pre>\n\n<p>MATLAB treats this the same as</p>\n\n<pre><code>func('arg1', 'arg2', 'arg3')\n</code></pre>\n\n<p>Contrariwise, when you do something like</p>\n\n<pre><code>input = ' -outdir C:/Users/ian/mexTesting/mexFiles'\nmex('src/helloworld.cpp', input)\n</code></pre>\n\n<p>It's the same as if you had run</p>\n\n<pre><code>mex src/helloworld.cpp ' -outdir C:/Users/ian/mexTesting/mexFiles'\n</code></pre>\n\n<p>Which is <em>not</em> the same as </p>\n\n<pre><code>mex src/helloworld.cpp -outdir C:/Users/ian/mexTesting/mexFiles\n</code></pre>\n\n<p>If you wanted to parameterize the arguments to MEX, you need to keep each space-delimited argument in a separate string. So, for example, you could use</p>\n\n<pre><code>outdirArg = 'C:/Users/ian/mexTesting/mexFiles';\nmex('src/helloworld.cpp', '-outdir', outdirArg);\n</code></pre>\n\n<p>If you want to batch a bunch of arguments in a single variable, you could use a cell array and comma-separated list expansion, which would look like this:</p>\n\n<pre><code>args = {'-outdir', 'C:/Users/ian/mexTesting/mexFiles'};\nmex('src/helloworld.cpp', args{:});\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 2, "accepted_answer_id": 48670684, "answer_count": 2, "score": 2, "last_activity_date": 1518203460, "creation_date": 1518021494, "last_edit_date": 1518021851, "question_id": 48668913, "link": "https://stackoverflow.com/questions/48668913/how-to-pass-filepath-variables-to-mex-command", "title": "How to pass filepath variables to mex command?", "body": "<p>Currently trying to create a minimal example of scripted mex file generation.</p>\n\n<p>I have a MATLAB .m script that I am running to generate mex files. I would like to pass in all the arguments as variables so that I can automate a bunch of mex file construction when given a list of filenames/paths.</p>\n\n<pre><code>#1 : unknown argument -outdir\ninput = ' -outdir C:/Users/ian/mexTesting/mexFiles'\nmex('src/helloworld.cpp', input)\n\n#2 : unknown filepath / can't find location (interprets entire string as path to mex file)\ninput = 'src/helloworld.cpp -outdir C:/Users/ian/mexTesting/mexFiles'\nmex(input)\n\n#3 : same issue as #2\nmex input\n\n#4 : Works, but no variables included, so no easy way to automate\nmex src/helloworld.cpp -outdir /mexFiles\n</code></pre>\n\n<p>All of these (except #4) get either unknown argument -outdir or it interprets the input char arr as a path to a mex file.</p>\n\n<p>Does anyone know how to pass variables into the mex command?</p>\n\n<p>There are no questions that have actually answered this issue that I could find. Any help would be appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1518022105, "post_id": 48668858, "comment_id": 84335999, "body": "The requirement is unclear. The suggestion of piping the output through std::cout seems to conflict with &quot;Filename should stay the same...&quot; Which is it?"}], "answers": [{"tags": [], "owner": {"reputation": 279, "user_id": 2591551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05e9c453e82590beb1484edd10ac0ab?s=128&d=identicon&r=PG", "display_name": "Stefan Seibert", "link": "https://stackoverflow.com/users/2591551/stefan-seibert"}, "is_accepted": false, "score": -1, "last_activity_date": 1518044620, "last_edit_date": 1518044620, "creation_date": 1518021654, "answer_id": 48668970, "question_id": 48668858, "link": "https://stackoverflow.com/questions/48668858/c-remove-empty-lines-from-cin-and-save-to-same-file/48668970#48668970", "title": "C++ remove empty lines from cin and save to same file", "body": "<p>Are you sure that the requirement is to use the pipe command? I think what you want is to use command line arguments. Maybe this article here helps:</p>\n\n<p><a href=\"http://www.cplusplus.com/articles/DEN36Up4/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/articles/DEN36Up4/</a></p>\n\n<p>You can define your main function as: </p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n...\n}\n</code></pre>\n\n<p>and then argc is the amount of commandline arguments were given and argv is the arguments. The first argument is always the name of your program. So if you execute <code>myprogram.exe ./pg_rmv_empty_lines</code>, argv[0] would be <em>myprogram.exe</em> and argv[1] would be <em>./pg_rmv_empty_lines</em></p>\n\n<p>You can then use this to dynamically read from that file in your code but you first need to open the file. For example something along the lines of:</p>\n\n<pre><code>std::ifstream myFile;\nstd::string lineAsString;\nmyFile.open(argv[1]);\nstd::getline(myFile, lineAsString);\n\n... do things with the line\n\nmyFile.close(); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3635, "user_id": 3477070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170877f680edb71f1fafb6001c46e4f0?s=128&d=identicon&r=PG&f=1", "display_name": "isp-zax", "link": "https://stackoverflow.com/users/3477070/isp-zax"}, "is_accepted": false, "score": 2, "last_activity_date": 1518021916, "creation_date": 1518021916, "answer_id": 48669039, "question_id": 48668858, "link": "https://stackoverflow.com/questions/48668858/c-remove-empty-lines-from-cin-and-save-to-same-file/48669039#48669039", "title": "C++ remove empty lines from cin and save to same file", "body": "<p>To get the filename you need to <a href=\"https://www.geeksforgeeks.org/command-line-arguments-in-c-cpp/\" rel=\"nofollow noreferrer\">parse command line arguments</a>. Once you've done that, examples you referred to will work to read the lines from the file. Assuming file isn't big, you can read it into the memory, skipping the empty lines using <code>if</code> statement.</p>\n\n<p>Once you've read the file into memory, you should either close it and re-open for writing or reset to the beginning and write the buffer out.</p>\n\n<p>If the file is large and couldn't be read into the memory buffer, you only can pull this out by doing one line (or limited number of lines) at a time and save the results into a temporary file with a different name. After that you'd have to delete the old file and rename the new file. Of course, the other way (first rename original file and then save new one with the old name) works as well.</p>\n"}, {"tags": [], "owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "is_accepted": false, "score": 1, "last_activity_date": 1518022605, "creation_date": 1518022605, "answer_id": 48669270, "question_id": 48668858, "link": "https://stackoverflow.com/questions/48668858/c-remove-empty-lines-from-cin-and-save-to-same-file/48669270#48669270", "title": "C++ remove empty lines from cin and save to same file", "body": "<p>Getting the filename from the command line is easy.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt; // Because why not.\n\nint main(int argc, char** argv) {\n    if (argc != 2) {\n        return -1; // Indicates error\n    }\n    std::string filename = argv[1];\n    std::ifstream input(filename);\n\n    // Do your stuff...\n\n    return 0;\n}\n</code></pre>\n\n<p>No more hints :-)</p>\n"}], "owner": {"reputation": 315, "user_id": 6420620, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/3aae0ee492102f5ffd870ed7968aaed1?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6420620/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518044620, "creation_date": 1518021328, "question_id": 48668858, "link": "https://stackoverflow.com/questions/48668858/c-remove-empty-lines-from-cin-and-save-to-same-file", "title": "C++ remove empty lines from cin and save to same file", "body": "<p>A part of my assignment is to make a program that reads a file that is passed from command line like this: <code>inputfile.cpp | ./pg_rmv_empty_lines</code>.\nThis (I guess) is for that reason that later on I can pipe(?) the same file to multiple programs.</p>\n\n<p>I know I can read lines in that file with:</p>\n\n<pre><code>int main()\n{\n    string line;\n    while(getline(cin, line))\n    {\n        cout &lt;&lt; line &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What I need to do, is to remove all empty lines in the file that the program receives, remove those lines and then save the modified file.</p>\n\n<ol>\n<li>I don't know the name of the file that needs modification, it's passed from the command line by \"client\"</li>\n<li>Filename should stay the same after the modifications.</li>\n</ol>\n\n<p>This is confusing me because every example I find, people suggests something that includes hardcoding filename into the source code like <code>outfile.open(\"movieList.txt\",ios_base::app);</code>. In my case I don't know the name of the input file.</p>\n\n<p>Bear in mind that I'm using C++ first time and it's already making me lose my faith in humanity.</p>\n"}, {"tags": ["c++", "testing", "googletest", "stress-testing", "gmock"], "comments": [{"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1518042847, "post_id": 48668841, "comment_id": 84347308, "body": "Do you have seen this: <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#teaching-google-test-how-to-print-your-values\" rel=\"nofollow noreferrer\">github.com/google/googletest/blob/master/googletest/docs/&hellip;</a> ?"}, {"owner": {"reputation": 121, "user_id": 4215636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553bf3e7977c739c89ce920c3c27e203?s=128&d=identicon&r=PG&f=1", "display_name": "Young_Torso", "link": "https://stackoverflow.com/users/4215636/young-torso"}, "reply_to_user": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1518085595, "post_id": 48668841, "comment_id": 84363340, "body": "@TobiasWollgam Yes I had seen that but I can&#39;t see how I can get that to edit the summary test result output? Don&#39;t suppose you would know how?"}, {"owner": {"reputation": 121, "user_id": 4215636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553bf3e7977c739c89ce920c3c27e203?s=128&d=identicon&r=PG&f=1", "display_name": "Young_Torso", "link": "https://stackoverflow.com/users/4215636/young-torso"}, "reply_to_user": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1518086011, "post_id": 48668841, "comment_id": 84363673, "body": "Found the answer! <a href=\"https://stackoverflow.com/questions/15191004/customise-actual-expected-value-of-string-in-google-test-failure-output-messag\" title=\"customise actual expected value of string in google test failure output messag\">stackoverflow.com/questions/15191004/&hellip;</a>"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1519557160, "post_id": 48668841, "comment_id": 84950524, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15191004/customise-actual-expected-value-of-string-in-google-test-failure-output-messag\">Customise actual/expected &quot;Value of&quot; string in Google Test failure output messages</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1989031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0299a8ae8f72fb3cacbb9a8a92dbc3?s=128&d=identicon&r=PG", "display_name": "ivan fajardo", "link": "https://stackoverflow.com/users/1989031/ivan-fajardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577395996, "creation_date": 1577395996, "answer_id": 59493693, "question_id": 48668841, "link": "https://stackoverflow.com/questions/48668841/gtest-change-output-of-failure/59493693#59493693", "title": "GTest change output of failure", "body": "<p>You have to override the \"operator &lt;&lt;\", for example</p>\n\n<pre><code>struct Row\n{\n  int window;\n  int osmap;\n  friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Row&amp; bar) {\n  return os &lt;&lt; \"w = \" &lt;&lt; bar.window &lt;&lt; \", opsmap= \" &lt;&lt; bar.osmap;  // whatever needed to print\n  }\n};\n</code></pre>\n\n<p>Look this for more info <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#teaching-googletest-how-to-print-your-values\" rel=\"nofollow noreferrer\">https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#teaching-googletest-how-to-print-your-values</a></p>\n"}], "owner": {"reputation": 121, "user_id": 4215636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553bf3e7977c739c89ce920c3c27e203?s=128&d=identicon&r=PG&f=1", "display_name": "Young_Torso", "link": "https://stackoverflow.com/users/4215636/young-torso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1079, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577395996, "creation_date": 1518021277, "question_id": 48668841, "link": "https://stackoverflow.com/questions/48668841/gtest-change-output-of-failure", "title": "GTest change output of failure", "body": "<p>I have written a Parameterized Gtest using a struct I made as the parameter value. When the test fails it writes a byte object of the struct like so:</p>\n\n<pre><code>[  FAILED  ] RulesNoProcessing/StressTest.MainTest/2, where GetParam() = \n             40-byte object &lt;01-12 00-00 02-00 00-00 F4-01 00-00 ...&gt;.\n</code></pre>\n\n<p>Is there anyway way that I can customize the output? I know that there is predicate formats for assertions but I need to do something similar with the actual outcome of the test. If anyone can I help I would really appreciate it!</p>\n"}, {"tags": ["python", "c++", "numpy", "armadillo"], "answers": [{"comments": [{"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1518110647, "post_id": 48673765, "comment_id": 84380869, "body": "Considering the effort that goes into this it almost feels to me that its better to work with 2d matrices itself. Thats why I just converted my 3d slicing operations to 2d itself."}], "tags": [], "owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "is_accepted": true, "score": 1, "last_activity_date": 1518039861, "creation_date": 1518039861, "answer_id": 48673765, "question_id": 48668706, "link": "https://stackoverflow.com/questions/48668706/how-do-i-convert-an-armadillo-matrix-to-cube/48673765#48673765", "title": "How do I convert an Armadillo matrix to cube?", "body": "<p>Since armadillo uses column major ordering of data (in contrast to numpy which relies on row major ordering), simply putting the matrix into a cube with 1 slice and reshaping it will produce different result (the matrix <code>B</code> below). An alternative might be to construct the slices manually:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;armadillo&gt;\n\nint main(){\n\n    const arma::uword N = 2;\n    const arma::uword num_rows = 4;\n    const arma::uword num_cols = 3;\n\n    arma::mat A(num_rows, num_cols, arma::fill::randu);\n\n    std::cout &lt;&lt; A;\n\n    arma::cube B(num_rows, num_cols, 1);\n    B.slice(0) = A;\n    B.reshape(num_rows/N, num_cols, N);\n    std::cout &lt;&lt; B;\n\n    arma::cube C(num_rows/N, num_cols, N);\n    for(arma::uword i = 0; i &lt; N; ++i){\n        C.slice(i) = A.rows(i*N, (i+1)*N-1);\n    }\n    std::cout &lt;&lt; C;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "edited": false, "score": 0, "creation_date": 1518082587, "post_id": 48674919, "comment_id": 84361229, "body": "using the constructor is tempting, but I think that it won&#39;t be applicable in this case - <code>data.reshape(N, num_rows&#47;N, num_cols)</code> essentially creates <code>N</code> slices by dividing the rows of <code>data</code> into <code>N</code> groups. Since armadillo stores data in column-major fashion, such slices won&#39;t be contiguous in memory, one needs to do some &quot;reshuffling&quot;. The constructor approach would be applicable for something like <code>data.reshape(N, num_rows, num_cols&#47;N)</code>, i.e., splitting the matrix in &quot;column&quot; space..."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "reply_to_user": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1518118426, "post_id": 48674919, "comment_id": 84385237, "body": "@tangy That was the point of my last comment. You&#39;d need to work with the transpose of the original array, because Armadillo uses column-major ordering and NumPy uses row-major. But if you know how to slice to get what you want, this constructor will be significantly faster."}, {"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1518128104, "post_id": 48674919, "comment_id": 84390048, "body": "I did try that - I transposed the matrix and then applied the code from above - it still did not work. In fact based on some other answers related to armadillo I had tried this method earlier both with and without transpose- didnt work"}], "tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": false, "score": 2, "last_activity_date": 1518045352, "creation_date": 1518045352, "answer_id": 48674919, "question_id": 48668706, "link": "https://stackoverflow.com/questions/48668706/how-do-i-convert-an-armadillo-matrix-to-cube/48674919#48674919", "title": "How do I convert an Armadillo matrix to cube?", "body": "<p>The <em>fastest</em> way to construct such a cube is to use one of the <a href=\"http://arma.sourceforge.net/docs.html#Cube\" rel=\"nofollow noreferrer\">advanced constructors</a>. These allow you to directly create a new object from an arbitrary section of memory, even without copying any of the data. This is closest in spirit to the way NumPy does reshaping, in which a <em>view</em> of the original data is returned, rather than a copy.</p>\n\n<p>You'd use the constructor like so:</p>\n\n<pre><code>// Assuming a is an arma::mat.\nint N = 4;\narma::cube c(a.memptr(), N, a.n_rows / N, a.n_cols, false);\n</code></pre>\n\n<p>This takes the memory directly from <code>a</code>, without copying, and uses it as <code>c</code>'s data.</p>\n\n<p>Of course, this is fast, but dangerous. You are responsible for guaranteeing that the pointed-to memory is valid as long as <code>c</code> is around. This means that the lifetime of <code>c</code> must be strictly nested in the lifetime of <code>a</code>. This can be hard to ensure, especially when <code>a</code> and <code>c</code> are both created on the heap.</p>\n\n<p>You can also allow <code>c</code> to <em>copy</em> <code>a</code>'s data, by leaving off the last argument or setting it to <code>true</code>. This takes more time than the no-copy constructor, but probably less than assigning each slice from <code>a</code>'s data, since this constructor does a single bulk <code>memcpy</code> of the underlying data.</p>\n\n<p>All of this is subject to the row- vs. column-major point brought up by @ewcz's answer. Make sure you know what you get when you reshape, especially if you're using the advanced constructors.</p>\n"}], "owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 48673765, "answer_count": 2, "score": 4, "last_activity_date": 1518045352, "creation_date": 1518020892, "question_id": 48668706, "link": "https://stackoverflow.com/questions/48668706/how-do-i-convert-an-armadillo-matrix-to-cube", "title": "How do I convert an Armadillo matrix to cube?", "body": "<p>I'm trying to recreate the following Python numpy code:</p>\n\n<pre><code>num_rows, num_cols = data.shape\nN = 4\ndata = data.reshape(N, num_rows/N, num_cols)\n</code></pre>\n\n<p>in C++ using Armadillo matrices and cubes? How can this be done most efficiently. I dont think the resize/reshape operations are supported directly for moving from a 2d matrix to 3d cube?</p>\n"}, {"tags": ["c++", "r", "c++11", "rcpp", "r-package"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1518020620, "post_id": 48668357, "comment_id": 84334972, "body": "You cannot change the fact that win-builder uses <code>g++ 4.9.3</code>.  Which has incomplete C++11 support, particularly on the library side.  End of story."}, {"owner": {"reputation": 65, "user_id": 4938478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9488436b5db90560db5e69dc322a05?s=128&d=identicon&r=PG&f=1", "display_name": "MOzSalles", "link": "https://stackoverflow.com/users/4938478/mozsalles"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1518021527, "post_id": 48668357, "comment_id": 84335606, "body": "Thanks, @DirkEddelbuettel! any idea why my test compiles differently?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1518021668, "post_id": 48668357, "comment_id": 84335708, "body": "You should have linked more prominently to your source repo. At a first glance you are missing the <code>src&#47;Makevars.win</code> file -- which would not happen if you used a proper package creation helper for which we document two different ones."}, {"owner": {"reputation": 65, "user_id": 4938478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9488436b5db90560db5e69dc322a05?s=128&d=identicon&r=PG&f=1", "display_name": "MOzSalles", "link": "https://stackoverflow.com/users/4938478/mozsalles"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1518023339, "post_id": 48668357, "comment_id": 84336841, "body": "Thanks again @DirkEddelbuettel. I&#39;m looking into it. I didn&#39;t know those existed. Might I ask who is &quot;we&quot; in this context and where can I look for this documentation?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1518023492, "post_id": 48668357, "comment_id": 84336938, "body": "Well how did you find Rcpp, and how did you manage not to find <i>e.g.</i> its vignettes?"}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1518023594, "post_id": 48668808, "comment_id": 84336984, "body": "C++11 support on Windows is not &quot;shaky&quot; and I never said so. You get what <code>g++-4.9.3</code> provides.  No more, no less.  We once had to backport something its C++11 library lacks.  As for adding the C++11 declaration in <code>DESCRIPTION</code>, I have always maintained that I prefer the <code>src&#47;Makevars{,.win}</code> approach but preferences differ, and both work."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1518023903, "post_id": 48668808, "comment_id": 84337159, "body": "@DirkEddelbuettel revised. Sorry about that. Typing quickly in the union."}, {"owner": {"reputation": 65, "user_id": 4938478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9488436b5db90560db5e69dc322a05?s=128&d=identicon&r=PG&f=1", "display_name": "MOzSalles", "link": "https://stackoverflow.com/users/4938478/mozsalles"}, "edited": false, "score": 0, "creation_date": 1518032304, "post_id": 48668808, "comment_id": 84342017, "body": "Thanks for the idea @coatless, I was looking for a solution like that. Also, it seems to work, where my attempts with Makevars and Makevars.win hadn&#39;t worked yet. My build report now shows the -std=gnu++11 option and the warnings are gone!"}], "tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": true, "score": 1, "last_activity_date": 1518023884, "last_edit_date": 1518023884, "creation_date": 1518021156, "answer_id": 48668808, "question_id": 48668357, "link": "https://stackoverflow.com/questions/48668357/how-to-make-sure-win-builder-builds-my-package-with-c11/48668808#48668808", "title": "How to make sure win-builder builds my package with c++11?", "body": "<p>Try adding in <code>DESCRIPTION</code></p>\n\n<pre><code>SystemRequirements: C++11\n</code></pre>\n\n<p>This avoids the need of having to specify a custom <code>Makevars</code> for different platforms (e.g. <code>Makevars</code> for Unix + Solaris + macOS, <code>Makevars.win</code> for windows). </p>\n\n<p>However, as @DirkEddelbuettel said, C++11 support on Windows exist; but, the completeness of the <code>C++11</code> implementation with <code>gcc-4.9.3</code> is problematic on the library side</p>\n"}], "owner": {"reputation": 65, "user_id": 4938478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9488436b5db90560db5e69dc322a05?s=128&d=identicon&r=PG&f=1", "display_name": "MOzSalles", "link": "https://stackoverflow.com/users/4938478/mozsalles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 48668808, "answer_count": 1, "score": 0, "last_activity_date": 1518023884, "creation_date": 1518019872, "last_edit_date": 1518022851, "question_id": 48668357, "link": "https://stackoverflow.com/questions/48668357/how-to-make-sure-win-builder-builds-my-package-with-c11", "title": "How to make sure win-builder builds my package with c++11?", "body": "<p>I'm trying to make my package (<a href=\"https://github.com/Lobz/facilitation\" rel=\"nofollow noreferrer\">code available here</a>) pass <a href=\"https://win-builder.r-project.org\" rel=\"nofollow noreferrer\">win-builder</a> tests so I can upload to cran. The package relies heavily in Rcpp and I use some things that require C++11 standard. But the <a href=\"https://win-builder.r-project.org/yoSLgCXpexPu/00install.out\" rel=\"nofollow noreferrer\">win-builder test results</a> keep showing a number of warnings like the following:</p>\n\n<pre><code>warning: delegating constructors only available with -std=c++11 or -std=gnu++11\nwarning: extended initializer lists only available with -std=c++11 or -std=gnu++11\n</code></pre>\n\n<p>I tried to make a minimal test with the <code>Rcpp.package.skeleton()</code> example package, adding a few extended initializer list uses, and a Makevars file containig just the one line:</p>\n\n<pre><code>CXX_STD = CXX11\n</code></pre>\n\n<p>but the minimal test works fine. You can see in the win-builder test results for the minimal test that it's compiling with <code>-std=gnu++11</code>, whereas my package is being compiled without that option:</p>\n\n<p>Minimal test:</p>\n\n<pre><code>*** arch - i386\nd:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11 -I\"D:/RCompile/recent/R/include\" -DNDEBUG  -I\"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include\"   -I\"d:/Compiler/gcc-4.9.3/local330/include\"     -O2 -Wall  -mtune=core2 -c RcppExports.cpp -o RcppExports.o\n</code></pre>\n\n<p>My package:</p>\n\n<pre><code>*** arch - i386\nd:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -I\"D:/RCompile/recent/R/include\" -DNDEBUG  -I\"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include\"   -I\"d:/Compiler/gcc-4.9.3/local330/include\"     -pedantic -O2 -Wall  -mtune=core2 -c Individual.cpp -o Individual.o\n</code></pre>\n\n<p>Why are they compiled with different options? I'm using the exact same <code>Makevars</code> file. Just in case it's relevant, I have these lines on my <code>DESCRIPTION</code>:</p>\n\n<pre><code>Imports:\n    Rcpp (&gt;= 0.12.14),\n    Matrix,\n    grid,\n    animation\nLinkingTo: Rcpp\nSuggests:\n    knitr,\n    rmarkdown\nDepends:\n    R (&gt;= 3.1.0)\nLicense: GPL-2\nLazyData: true\nRoxygenNote: 6.0.1\nURL: https://github.com/Lobz/facilitation\nVignetteBuilder: knitr\n</code></pre>\n\n<p>EDIT: I copied the above into the minimal test package's <code>DESCRIPTION</code> file to make them more similar, and the minimal test file still compiles properly with <code>-std=gnu++11</code>.</p>\n\n<p>Note: I upload the packages to win-builder via <code>devtools::build_win()</code>.</p>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 10406, "user_id": 33987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9915b127729c73da8b0b253f6c867e45?s=128&d=identicon&r=PG", "display_name": "Joris Timmermans", "link": "https://stackoverflow.com/users/33987/joris-timmermans"}, "edited": false, "score": 3, "creation_date": 1518019984, "post_id": 48668304, "comment_id": 84334542, "body": "Please post a minimal, complete and verifiable example - <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> ."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1518020019, "post_id": 48668304, "comment_id": 84334563, "body": "<code>return_val = HKEY_CLASSES_ROOT, REGISTRY_KEY_FM, 0, KEY_QUERY_VALUE, &amp;register_key);</code> does not make sense to me. I assume you are missing some part of that line."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1518020297, "post_id": 48668304, "comment_id": 84334764, "body": "The <code>T</code> stuff like <code>LPTSTR</code> and <code>_T</code> is in support for Windows 9x in the 1990s. Apart from the fact that your tools can&#39;t produce executables for those archaic Windows versions, the <code>T</code> stuff was obsolete already in the year 2000, with the introduction of Layer for Unicode. So you&#39;re using 17 years obsolete technology, that now is completely pointless since your tools can&#39;t create such executables. There are <b>costs</b> for using this stuff: more verbose code, and more brittle code. So don&#39;t."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1518020548, "post_id": 48668304, "comment_id": 84334921, "body": "Re &quot;not getting the message in VS 2010&quot;, since you have <b>unmatched parenthesis</b> it can&#39;t compile with VS 2010. It appears that you&#39;re missing a function call. Is that your real code you&#39;re presenting?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518020754, "post_id": 48668304, "comment_id": 84335068, "body": "Guys, yes there are mismatched parens in the question, but it doesn&#39;t matter because an assignment operator for a primitive type such as long evaluates to a reference to the left-hand-side.  Only the left operand matters here."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1518023655, "post_id": 48668304, "comment_id": 84337019, "body": "Last line looks like part of a function call, propably <code>RegOpenKeyEx(</code> missing."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1518024075, "post_id": 48668304, "comment_id": 84337268, "body": "Also, <a href=\"https://stackoverflow.com/q/8356223/7571258\">string literals shouldn&#39;t be assigned to non-const pointer</a> (<code>LPTSTR</code> is typedef for <code>TCHAR*</code>). So you should write <code>LPCTSTR REGISTRY_KEY_FM =</code> (note the &quot;C&quot; in the type that indicates constness of the data pointed to) or even better <code>LPCWSTR REGISTRY_KEY_FM</code> and replace <code>_T(&quot;string&quot;)</code> by <code>L&quot;string&quot;</code> as explained by Cheers."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3758867, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b1658620994d4b859e9b94ebcd1947cd?s=128&d=identicon&r=PG&f=1", "display_name": "user3758867", "link": "https://stackoverflow.com/users/3758867/user3758867"}, "edited": false, "score": 0, "creation_date": 1518021871, "post_id": 48668604, "comment_id": 84335856, "body": "Thanks, you are right.. I was missing an <code>else</code> statement."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1518020644, "creation_date": 1518020644, "answer_id": 48668604, "question_id": 48668304, "link": "https://stackoverflow.com/questions/48668304/convert-lptstr-to-long/48668604#48668604", "title": "Convert LPTSTR to long", "body": "<p>Your preprocessor dispatch is missing an <code>#else</code>.  When the library version isn't recognized, this is what you get:</p>\n\n<pre><code>LPTSTR REGISTRY_KEY_FM = return_val = /* something */;\n</code></pre>\n\n<p>and that tries to initialize an <code>LPTSTR</code> with a value of type <code>long</code>.</p>\n\n<p>When you add the typeid for the new library version, also add these lines to prevent such problems in the future:</p>\n\n<pre><code>#else\n#error Unsupported FDK_LIBRARY_VERSION\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3758867, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b1658620994d4b859e9b94ebcd1947cd?s=128&d=identicon&r=PG&f=1", "display_name": "user3758867", "link": "https://stackoverflow.com/users/3758867/user3758867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1518026603, "accepted_answer_id": 48668604, "answer_count": 1, "score": -4, "last_activity_date": 1518020644, "creation_date": 1518019683, "last_edit_date": 1518019933, "question_id": 48668304, "link": "https://stackoverflow.com/questions/48668304/convert-lptstr-to-long", "closed_reason": "Not suitable for this site", "title": "Convert LPTSTR to long", "body": "<p>I am getting a compile error while I am trying to initialize a long variable.</p>\n\n<pre><code>long return_val;\n\nHKEY register_key;\nLPTSTR REGISTRY_KEY_FM = \n#if FDK_LIBRARY_VERSION==0x13000000\n            _T(\"RL13.FR.Document\");\n#elif FDK_LIBRARY_VERSION==0x09000000\n            _T(\"RL9.FR.Document\");\n#elif FDK_LIBRARY_VERSION==0x08000000\n            _T(\"RL80.FR.Document\");\n#endif\n\n\nreturn_val = HKEY_CLASSES_ROOT, REGISTRY_KEY_FM, 0, KEY_QUERY_VALUE, &amp;register_key);\n</code></pre>\n\n<p>The error message in the last line is \"value of type \"long\" cannot be used to initialize an entity of type LPTSTR\"</p>\n\n<p>I am using Visual studio 2017 and also tried with visual studio 2013, but the error is same. However not getting the message in VS 2010. is there some type casting issue with the compiler of VS 2013 and VS2017? How to overcome this issue?</p>\n"}, {"tags": ["c++", "boost-asio"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 3, "creation_date": 1518020042, "post_id": 48668261, "comment_id": 84334580, "body": "What does <code>s.error().message()</code> say?"}, {"owner": {"reputation": 1, "user_id": 9328519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc7020a59eeee435909930f174f44d0?s=128&d=identicon&r=PG&f=1", "display_name": "Lui Panni", "link": "https://stackoverflow.com/users/9328519/lui-panni"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1518020445, "post_id": 48668261, "comment_id": 84334860, "body": "Could not connect to www.a.com HTTP/1.1 400 Bad Request Date: Wed, 07 Feb 2018 16:15:35 GMT Server: Apache Accept-Ranges: bytes Vary: Accept-Encoding,User-Agent Connection: close Content-Type: text/html"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1518021701, "post_id": 48668261, "comment_id": 84335729, "body": "What if you use a <i>valid</i> address?"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1518024018, "post_id": 48668261, "comment_id": 84337224, "body": "Please post the url you are trying to connect to."}], "answers": [{"comments": [{"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 1, "creation_date": 1518023217, "post_id": 48669447, "comment_id": 84336752, "body": "&quot;works on my machine&quot; usually not the best answer.. also, it seems that OP is getting stuck in the first <code>if (!s)</code> - he doesn&#39;t get to the <code>s &lt;&lt;..</code> code."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1518023548, "post_id": 48669447, "comment_id": 84336963, "body": "Hi, @Default, in his comment he says he is getting a: 400 Bad Request"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1518023980, "post_id": 48669447, "comment_id": 84337202, "body": "Ok @Default, if it is his message, I&#39;m baffled and will delete my answer. He should show the url he is trying to connect to."}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 1, "creation_date": 1518024467, "post_id": 48669447, "comment_id": 84337487, "body": "I agree with you. I voted to close the question for that reason. There&#39;s too little information for a proper response. (The fact that he&#39;s not using any brackets seems to me that the code may not be complete either.) Keep or delete your answer is up to you. I was just noting that the fact that it works on your machine will probably not help the OP."}, {"owner": {"reputation": 1, "user_id": 9328519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc7020a59eeee435909930f174f44d0?s=128&d=identicon&r=PG&f=1", "display_name": "Lui Panni", "link": "https://stackoverflow.com/users/9328519/lui-panni"}, "edited": false, "score": 0, "creation_date": 1518034553, "post_id": 48669447, "comment_id": 84343241, "body": "I couldn&#39;t post the url for security reasons since the website is still under construction, anyways thanks @lakeweb for the answer it worked now. Sorry I can&#39;t accept since i&#39;m new to the community and i don&#39;t have enough reputation points."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1518038421, "post_id": 48669447, "comment_id": 84345267, "body": "Ok Lui, glad it works for you now. Thanks for the check."}], "tags": [], "owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "is_accepted": true, "score": 0, "last_activity_date": 1518023110, "creation_date": 1518023110, "answer_id": 48669447, "question_id": 48668261, "link": "https://stackoverflow.com/questions/48668261/reading-from-a-file-online-c/48669447#48669447", "title": "Reading from a file online c++", "body": "<p>You must get your request formatted correctly. For google:</p>\n\n<pre><code>int main()\n{\n    boost::asio::ip::tcp::iostream s(\"www.google.com\", \"http\");\n    if(!s)\n        std::cout &lt;&lt; \"Could not connect to www.a.com\\n\";\n    s  &lt;&lt; \"GET / HTTP/1.0\\r\\n\"\n        &lt;&lt; \"Host: www.google.com\\r\\n\"\n        &lt;&lt; \"User-Agent: Boost\\r\\n\"\n        &lt;&lt; \"Accept: */*\\r\\n\"\n        &lt;&lt; \"Connection: close\\r\\n\\r\\n\" ;\n    for(std::string line; getline(s, line); )\n        std::cout &lt;&lt; line &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Note, there is no colon after the <code>GET</code>. The <code>/</code> is the root path to just about any website. Did you also set your <code>Host:</code> ?</p>\n\n<p>The above code gets me a 200 OK from google.</p>\n"}], "owner": {"reputation": 1, "user_id": 9328519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc7020a59eeee435909930f174f44d0?s=128&d=identicon&r=PG&f=1", "display_name": "Lui Panni", "link": "https://stackoverflow.com/users/9328519/lui-panni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 48669447, "answer_count": 1, "score": -2, "last_activity_date": 1518023110, "creation_date": 1518019540, "question_id": 48668261, "link": "https://stackoverflow.com/questions/48668261/reading-from-a-file-online-c", "title": "Reading from a file online c++", "body": "<p>I'm using this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/asio.hpp&gt;\nint main()\n{\n    boost::asio::ip::tcp::iostream s(\"www.a.com\", \"http\");\n    if(!s)\n        std::cout &lt;&lt; \"Could not connect to www.a.com\\n\";\n    s  &lt;&lt; \"GET /b.txt HTTP/1.0\\r\\n\"\n       &lt;&lt; \"Host: www.a.com\\r\\n\"\n       &lt;&lt; \"Accept: */*\\r\\n\"\n       &lt;&lt; \"Connection: close\\r\\n\\r\\n\" ;\n    for(std::string line; getline(s, line); )\n         std::cout &lt;&lt; line &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>of course  i use a proper website instead of \"a.com\" \nBut i always get the \"Could not connect to www.a.com\" \nAny idea why? </p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1518019424, "post_id": 48668197, "comment_id": 84334134, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/namespace_alias\" rel=\"nofollow noreferrer\">Kinda sorta</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1518019458, "post_id": 48668197, "comment_id": 84334161, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\"><code>using hrtcp = std::chrono::high_resolution_clock::time_point;</code></a>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1518019530, "post_id": 48668197, "comment_id": 84334211, "body": "In C++ aliasing is different for types and functions and namespaces. <code>time_point</code> is a type, so you can define an alias with <code>using</code>. <code>now</code> is a static function, you can define an alias as a reference."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1518019910, "post_id": 48668197, "comment_id": 84334493, "body": "@legends2k : He already <i>says</i> he knows how to rename namespaces!  The point is he wants to rename a type and a function."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1518019944, "post_id": 48668197, "comment_id": 84334520, "body": "@legends2k: With a reference you can&#39;t ordinarily see any difference so it&#39;s pretty much a genuine alias. But with a <code>typedef</code> or <code>using</code> the defined name can&#39;t be used to define a destructor or constructor, and it can be used in a pseudo-destructor call, so it&#39;s not quite a genuine alias. Other than that I think it depends on one&#39;s definition of &quot;genuine&quot; :)"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1518020274, "post_id": 48668197, "comment_id": 84334751, "body": "@Fran&#231;oisAndrieux I think that would make a good answer. If you commented back that you wrote it up, I&#39;d give you a +1 ;)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1518020510, "post_id": 48668197, "comment_id": 84334891, "body": "@JonathanMee That comment is incomplete. It doesn&#39;t answer how to alias functions."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518021167, "post_id": 48668197, "comment_id": 84335373, "body": "@MartinBonner My bad. Retracted the vote."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518020412, "post_id": 48668500, "comment_id": 84334832, "body": "Except that <code>now</code> is a function, and you can&#39;t use <code>using</code> to define an alias for a function."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518020494, "post_id": 48668500, "comment_id": 84334882, "body": "@MartinBonner Fixed"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 2, "last_activity_date": 1518020448, "last_edit_date": 1518020448, "creation_date": 1518020322, "answer_id": 48668500, "question_id": 48668197, "link": "https://stackoverflow.com/questions/48668197/what-is-the-c-equivalent-of-pythons-import-as/48668500#48668500", "title": "What is the C++ equivalent of python&#39;s import as?", "body": "<p>If you want to define an alias, use a <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\"><code>using</code></a> directive. That means this would work:</p>\n\n<pre><code>using hrctp = std::chrono::high_resolution_clock::time_point;\n</code></pre>\n\n<p>For the function, you could use something like this:</p>\n\n<pre><code>const auto hrcn = std::chrono::high_resolution_clock::now;\n</code></pre>\n\n<p>This creates a function pointer to the static function.</p>\n"}, {"comments": [{"owner": {"reputation": 2375, "user_id": 201436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/X3cdl.jpg?s=128&g=1", "display_name": "Roger Heathcote", "link": "https://stackoverflow.com/users/201436/roger-heathcote"}, "edited": false, "score": 0, "creation_date": 1518024144, "post_id": 48668507, "comment_id": 84337307, "body": "Great answer Martin, thanks. And thanks for the style tip too!"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1518020690, "last_edit_date": 1518020690, "creation_date": 1518020336, "answer_id": 48668507, "question_id": 48668197, "link": "https://stackoverflow.com/questions/48668197/what-is-the-c-equivalent-of-pythons-import-as/48668507#48668507", "title": "What is the C++ equivalent of python&#39;s import as?", "body": "<p>This is more complex than it looks.  As <a href=\"https://stackoverflow.com/users/464581/cheers-and-hth-alf\">Cheers and hth</a> says, aliasing is different for types and functions and namespaces.</p>\n\n<p>For a simple type like <code>std::chrono::high_resolution_clock::time_point</code>, you can either use <code>typedef</code> or <code>using</code>:</p>\n\n<pre><code>using hrctp = std::chrono::high_resolution_clock::time_point;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>typedef std::chrono::high_resolution_clock::time_point hrctp;\n</code></pre>\n\n<p>The advantage of <code>using</code> is that you can use it for template classes too.</p>\n\n<p>For a static member function or a stand-alone function embedded in a namespace, you can just use a pointer to the function:</p>\n\n<pre><code>const auto hrcn = std::chrono::high_resolution_clock::now;\n</code></pre>\n\n<p>You can't do this for non-static member functions (a pointer-to-member-function is a completely different beast), but fortunately you don't need to (because you invoke non-static member functions on an object of the appropriate type).</p>\n\n<hr>\n\n<p>The options for <code>time_point</code> are purely done at compile time.  However the function alias may impose a run-time penalty (because you are calling the function through a pointer, rather than jumping there directly).  However, write your code for clarity first, and speed second.  (OTOH, the C++ way would probably be:</p>\n\n<pre><code>using hrc =std::chrono::high_resolution_clock;\n</code></pre>\n\n<p>and then use <code>hrc::time_point</code> and <code>hrc::now</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "is_accepted": false, "score": 2, "last_activity_date": 1518020980, "last_edit_date": 1518020980, "creation_date": 1518020635, "answer_id": 48668601, "question_id": 48668197, "link": "https://stackoverflow.com/questions/48668197/what-is-the-c-equivalent-of-pythons-import-as/48668601#48668601", "title": "What is the C++ equivalent of python&#39;s import as?", "body": "<p>It's simple.  Short answer... It's different for types and functions.</p>\n\n<pre><code>// Alias the type...\nusing hr_time_point = std::chrono::high_resolution_clock::time_point;\n\n// Create reference (like an alias) for the function\nauto &amp;hr_now = std::chrono::high_resolution_clock::now;\n</code></pre>\n\n<p>The compiler will undoubtedly optimize away the reference, and call the referent directly.</p>\n\n<p>This would work equally well:</p>\n\n<pre><code>inline auto hr_now() { return std::chrono::high_resolution_clock::now(); }\n</code></pre>\n\n<p>Again, the optimizer will optimize out the indirection.</p>\n"}], "owner": {"reputation": 2375, "user_id": 201436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/X3cdl.jpg?s=128&g=1", "display_name": "Roger Heathcote", "link": "https://stackoverflow.com/users/201436/roger-heathcote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 48668507, "answer_count": 3, "score": 3, "last_activity_date": 1518020980, "creation_date": 1518019377, "question_id": 48668197, "link": "https://stackoverflow.com/questions/48668197/what-is-the-c-equivalent-of-pythons-import-as", "title": "What is the C++ equivalent of python&#39;s import as?", "body": "<p>I've tried several variations of this with no joy...</p>\n\n<pre><code>auto&amp; hrctp = std::chrono::high_resolution_clock::time_point;\nauto&amp; hrcn = std::chrono::high_resolution_clock::now;\n</code></pre>\n\n<p>I know I can use...</p>\n\n<pre><code>use namespace std::chrono::high_resolution_clock;\n</code></pre>\n\n<p>And I understand one shouldn't try too hard to replicate the paradigms of one language in another but I'm just curious. Is there an equivalent?</p>\n"}, {"tags": ["c++", "qt", "mfc", "event-loop"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1518020749, "post_id": 48668171, "comment_id": 84335064, "body": "M... Except creating Qt application instance on its own new thread and spinning the event loop I cannot clearly see the other way. How that will talk to MFC UI thread is the other matter and interesting effects as well."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1518025822, "post_id": 48668171, "comment_id": 84338289, "body": "You basically just disable the owner window before showing your dialog. E. g. <code>EnableWindow(hWndOwner, FALSE);</code> and after the modality ends, enable it again."}], "answers": [{"tags": [], "owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "is_accepted": false, "score": 0, "last_activity_date": 1518077221, "creation_date": 1518077221, "answer_id": 48680494, "question_id": 48668171, "link": "https://stackoverflow.com/questions/48668171/qt-dll-in-mfc-app-how-to-make-qdialog-really-modal/48680494#48680494", "title": "Qt DLL in MFC app - How to make QDialog *really* modal?", "body": "<p>Although I don't have a real answer to your question, there too much stuff wrong with your code to be properly explained in a comment. Therefore I am writing this as an answer.</p>\n\n<p><code>QApplication::exec()</code>: I strongly recommend revising the decision against it. If you want the window to be modal, why would it be wrong to \"block the entire application\" until it is closed? Note that you will not block the Qt part of the application, only the one that calls exec.</p>\n\n<p><code>QTimer</code>: A timer can only run inside an event loop. So the <code>m_app-&gt;processEvents()</code> either never executes, or you already have an event loop running. Either way, there is no use for the timer.</p>\n\n<p><code>w.setModal()</code>: If what this does is not correct for you, check out <code>setWindowModality()</code>.</p>\n\n<p><code>w.exec()</code>: Ignores the value of <code>setModal()</code>. Read the documentation of <code>setModal()</code> and <code>exec()</code> to find out more.</p>\n\n<p><code>w.exec()</code>: Executes an event loop. If this somewhat does what you want, <code>QApplication::exec()</code> should work too. Just make sure to exit the main event loop when done.</p>\n\n<p><code>w.exec()</code>: Is not executed after the dialog was closed. It is executes <em>while</em> the dialog is shown. It blocks until the dialog is closed. So you will start executing it, show the dialog, close the dialog, and then return from it. Read the documentation of <code>exec()</code> to find out more.</p>\n"}], "owner": {"reputation": 677, "user_id": 7181607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-zWEyfhw7itM/AAAAAAAAAAI/AAAAAAAAAEg/ETHZRlGuvt4/photo.jpg?sz=128", "display_name": "FlKo", "link": "https://stackoverflow.com/users/7181607/flko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518077221, "creation_date": 1518019283, "last_edit_date": 1518045430, "question_id": 48668171, "link": "https://stackoverflow.com/questions/48668171/qt-dll-in-mfc-app-how-to-make-qdialog-really-modal", "title": "Qt DLL in MFC app - How to make QDialog *really* modal?", "body": "<p>At the moment I am developing a Windows DLL with <strong>Qt 5.9.2</strong> (MSVC 2015 compiler), which should be loaded by an existing, commercial MFC application. Upon request of this application a modal instance of <code>QDialog</code> should be displayed.\nSince <code>QApplication::exec()</code> would block the entire application, I \"simulate\" the event loop using the following code:</p>\n\n<pre><code>void Core::createQApplicationInstance()\n{\n    // Check, if there's already a 'QApplication' instance running (unlikely)\n    if (!QApplication::instance())\n    {\n        int argc = 1;\n\n        // Create a new 'QApplication' instance\n        m_app = new QApplication(argc, nullptr);\n\n        // Create a 'QTimer' instance to call 'processEvents' periodically:\n        // We can't run 'm_app-&gt;exec()' because it would block everything,\n        // so we'll use this 'hacky-whacky' method here\n        m_timer = new QTimer;\n\n        // Connect the timer's timeout to the app's 'processEvents' via a lambda\n        QObject::connect(\n            m_timer,\n            &amp;QTimer::timeout,\n            [&amp;]()\n            {\n                m_app-&gt;processEvents();\n            }\n        );\n\n        // Start the timer with the fixed 'message' interval\n        m_timer-&gt;start(kMsgInterval);\n    }\n}\n</code></pre>\n\n<p>If my DLL should now display a modal dialog, it works (partially) with the following code:</p>\n\n<pre><code>{...}\n        case eUserIGeneral:\n        {\n            qDebug() &lt;&lt; \"&lt;&lt; eUserIGeneral\";\n\n            QDialog w;\n\n            w.setModal(true);\n\n            w.exec();\n\n            // --&gt; Code here is executed AFTER the dialog has been closed\n        }\n        break;\n        //-------------------------------------------------------------------\n\n{...}\n</code></pre>\n\n<p>The code after <code>w.exec()</code> will actually be executed AFTER the dialog was closed (as intended). However, the main application still remains responsive and is not affected by the modality of my dialog, which Is not as I expected it to behave.</p>\n\n<p>How can I make sure that inputs in the main application are locked when calling a modal DLL dialog?</p>\n"}, {"tags": ["c++", "qt", "qstylesheet"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1518020057, "post_id": 48668128, "comment_id": 84334595, "body": "You could show an image that shows the error. Its code is difficult to reproduce. could activate the flat: <code>setFlat(true)</code>"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1518020210, "post_id": 48668128, "comment_id": 84334699, "body": "If you can&#39;t fix it, I recommend (as a workaround) to override paintEvent and  draw the button yourself, with QStyle and QStyleOptionButton. Just draw only the background and the text afterwards yourself."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1518020589, "post_id": 48668128, "comment_id": 84334947, "body": "As a random guess, have you tried the <code>:pressed</code> pseudo-state with a negative left padding value? That sounds like it should undo the jumping if the button is pressed down."}, {"owner": {"reputation": 130, "user_id": 5356887, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d8d4ba09c575aee3a278dce4275389?s=128&d=identicon&r=PG&f=1", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/5356887/claudiu"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1518020950, "post_id": 48668128, "comment_id": 84335195, "body": "@eyllanesc Now uploaded the images as well. setFlat(true) doesn&#39;t do it unfortunatelly."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1518021042, "post_id": 48668128, "comment_id": 84335274, "body": "the image is not very descriptive, I do not see the displacement, to be able to help I need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and its code is not."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1518021112, "post_id": 48668128, "comment_id": 84335321, "body": "I&#39;m even thinking that it&#39;s the visual effect of changing colors, an optical illusion."}, {"owner": {"reputation": 130, "user_id": 5356887, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d8d4ba09c575aee3a278dce4275389?s=128&d=identicon&r=PG&f=1", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/5356887/claudiu"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1518021166, "post_id": 48668128, "comment_id": 84335372, "body": "@eyllanesc If you open the two images in two separate browser tabs and switch between them, you should see the displacement."}, {"owner": {"reputation": 130, "user_id": 5356887, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d8d4ba09c575aee3a278dce4275389?s=128&d=identicon&r=PG&f=1", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/5356887/claudiu"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1518022093, "post_id": 48668128, "comment_id": 84335992, "body": "@JohannesSchaub-litb Your suggestion helped me fix it! I started playing around with the padding values of the :pressed state of the qpushbutton and noticed it was making a difference. I then asked myself what would happen if I&#39;d set the same padding for both the enabled and the checked states. I set them both to 0 and the problem went away completely. I believe this is because the default padding values are different; that&#39;s probably how the displacement is achieved by default."}], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 5356887, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d8d4ba09c575aee3a278dce4275389?s=128&d=identicon&r=PG&f=1", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/5356887/claudiu"}, "is_accepted": true, "score": 0, "last_activity_date": 1518022348, "creation_date": 1518022348, "answer_id": 48669176, "question_id": 48668128, "link": "https://stackoverflow.com/questions/48668128/qpushbutton-dont-use-text-displacement-on-button-checked/48669176#48669176", "title": "QPushButton Don&#39;t Use Text Displacement on Button Checked", "body": "<p>Setting both the m_styleSheetEnabledTemplate's and the m_styleSheetCheckedTemplate's <strong>padding</strong> properties to 0 fixes my problem. I believe the default padding values are different and that's how the text displacement is actually achieved. Thank you @JohannesSchaub-litb for the suggestion to try the <strong>padding</strong> property.</p>\n"}], "owner": {"reputation": 130, "user_id": 5356887, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d8d4ba09c575aee3a278dce4275389?s=128&d=identicon&r=PG&f=1", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/5356887/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 48669176, "answer_count": 1, "score": 0, "last_activity_date": 1518022348, "creation_date": 1518019165, "last_edit_date": 1518020837, "question_id": 48668128, "link": "https://stackoverflow.com/questions/48668128/qpushbutton-dont-use-text-displacement-on-button-checked", "title": "QPushButton Don&#39;t Use Text Displacement on Button Checked", "body": "<p>I'm creating my own QPushButton and styling it up. What I've noticed happening is the text slightly displacing if the button is pushed and checked (hardly surprising, as this is making it look like a button). I don't want this to happen though. I've tried looking through the style-sheet properties I can change to suppress this behaviour, but with no luck. Is there a way in which I can achieve this?</p>\n\n<p>Here is the button in the two states. If superimposed or viewed one after the other in an image viewer, you can see the text displacement.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qlQrH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qlQrH.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/km1Xe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/km1Xe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>#include \"ModeButton.h\"\n\n// The RGB colour codes that we use to help create our dynamic stylesheets. Longer term the colour codes may be moved to a global colour file\nconst QString ModeButton::m_rgbModeButtonEnabledBorder     = QString(\"rgb(102, 102, 102)\");\nconst QString ModeButton::m_rgbModeButtonEnabledBackground = QString(\"rgb(153, 153, 153)\");\nconst QString ModeButton::m_rgbModeButtonEnabledText       = QString(\"rgb(102, 102, 102)\");\nconst QString ModeButton::m_rgbModeButtonDisabledBorder    = QString(\"rgb(82, 82, 82)\");\nconst QString ModeButton::m_rgbModeButtonDisabledText      = QString(\"rgb(82, 82, 82)\");\nconst QString ModeButton::m_rgbModeButtonCheckedText       = QString(\"rgb(0, 0, 0)\");\nconst QString ModeButton::m_rgbModeButtonCheckedBackGround = QString(\"rgb(255, 153, 51)\");\n\n// We dynamically create our stylesheets so that we can separate out the colour from the rest of the styling\nconst QString ModeButton::m_styleSheetEnabledTemplate  = QString(\"QPushButton { color: TEXT_RGB; border: 0px solid BORDER_RGB; border-radius: 7px; background-color: BACKGROUND_RGB; }\");\nconst QString ModeButton::m_styleSheetDisabledTemplate = QString(\"QPushButton:disabled { border: 0px solid BORDER_RGB; color: TEXT_RGB; }\");\nconst QString ModeButton::m_styleSheetCheckedTemplate  = QString(\"QPushButton:checked { color: TEXT_RGB; border: 0px solid BORDER_RGB; border-radius: 7px; background-color: BACKGROUND_RGB; }\");\n\nModeButton::ModeButton(OperatingModeButtonType a_OperatingModeButtonType, ChannelContainerWidget* ParentContainer, bool DoubleChanneled, int RowSpan)\n  : QPushButton(GetOperatingModeButtonLabel(a_OperatingModeButtonType), (QWidget*)ParentContainer),\n  m_OperatingModeButtonType(a_OperatingModeButtonType),\n  m_DoubleChanneled(DoubleChanneled),\n  m_RowSpan(RowSpan)\n{\n    ModifyStyle();\n    setCheckable(true);\n    setFixedWidth(-1);\n}\n\n//-----------------------------------------------------------------------------\n\nQString ModeButton::GetEnabledStyleSheetString()\n{\n    QString styleSheetString = m_styleSheetEnabledTemplate;\n\n    styleSheetString.replace(\"TEXT_RGB\", m_rgbModeButtonEnabledText);\n    styleSheetString.replace(\"BORDER_RGB\", m_rgbModeButtonEnabledBorder);\n    styleSheetString.replace(\"BACKGROUND_RGB\", m_rgbModeButtonEnabledBackground);\n\n    return styleSheetString;\n}\n\n//-----------------------------------------------------------------------------\n\nQString ModeButton::GetDisabledStyleSheetString()\n{\n    QString styleSheetString = m_styleSheetDisabledTemplate;\n\n    styleSheetString.replace(\"TEXT_RGB\", m_rgbModeButtonDisabledText);\n    styleSheetString.replace(\"BORDER_RGB\", m_rgbModeButtonDisabledBorder);\n\n    return styleSheetString;\n}\n\n//-----------------------------------------------------------------------------\n\nQString ModeButton::GetCheckedStyleSheetString()\n{\n    QString styleSheetString = m_styleSheetCheckedTemplate;\n\n    styleSheetString.replace(\"TEXT_RGB\", m_rgbModeButtonCheckedText);\n    styleSheetString.replace(\"BORDER_RGB\", m_rgbModeButtonEnabledBorder);\n    styleSheetString.replace(\"BACKGROUND_RGB\", m_rgbModeButtonCheckedBackGround);\n\n    return styleSheetString;\n}\n\n//-----------------------------------------------------------------------------\n\nvoid ModeButton::ModifyStyle()\n{\n    setStyleSheet(GetEnabledStyleSheetString() + GetDisabledStyleSheetString() + GetCheckedStyleSheetString());\n}\n\n///////////////////////////////////////////////////////////////////////////////\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 4, "creation_date": 1518018497, "post_id": 48667859, "comment_id": 84333493, "body": "This is the default behaviour for <code>std::cin</code>, you may consider using <code>std::getline</code> instead."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1518018676, "post_id": 48667859, "comment_id": 84333635, "body": "Also, to avoid the risk of undefined behavior, you need to make sure the <code>char</code>&#39;s from the string are converted to <code>unsigned char</code> before feeding them to <code>toupper</code> (which you should be referring to as <code>std::toupper</code>, after properly including <code>cctype</code>)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518026145, "post_id": 48667859, "comment_id": 84338491, "body": "@DenisSheremet -- it&#39;s not the behavior of <code>std::cin</code>. It&#39;s the behavior of <code>operator&gt;&gt;</code> on any input stream. It stops reading when it encounters training whitespace."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 113, "user_id": 9288772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a370bffe07c62d7dfc773c467af21f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nico van Bentum", "link": "https://stackoverflow.com/users/9288772/nico-van-bentum"}, "edited": false, "score": 1, "creation_date": 1518020546, "post_id": 48667919, "comment_id": 84334917, "body": "@NicovanBentum If this solves your problem please don&#39;t forget to accept!"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 7, "last_activity_date": 1518018527, "creation_date": 1518018527, "answer_id": 48667919, "question_id": 48667859, "link": "https://stackoverflow.com/questions/48667859/string-replace-breaks-on-space-in-c/48667919#48667919", "title": "string replace breaks on space in C++", "body": "<p>You need to use <code>getline</code> instead of <code>cin &gt;&gt; s</code> to grab the whole line, otherwise it stops at whitespace:</p>\n\n<pre><code>getline(cin, s);\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/uiQnQdBZoCcjSjBf\" rel=\"noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 113, "user_id": 9288772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a370bffe07c62d7dfc773c467af21f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nico van Bentum", "link": "https://stackoverflow.com/users/9288772/nico-van-bentum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 48667919, "answer_count": 1, "score": 0, "last_activity_date": 1518019029, "creation_date": 1518018409, "last_edit_date": 1518019029, "question_id": 48667859, "link": "https://stackoverflow.com/questions/48667859/string-replace-breaks-on-space-in-c", "title": "string replace breaks on space in C++", "body": "<p>If I input \"we are going to have fun in school\" when executing the following code, it seems to break after the first word and only prints \"W3\". Does anyone know what I did wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n  {\n  string s;\n  cout &lt;&lt; \"Invoer: \";\n  cin &gt;&gt; s;\n\n  replace( s.begin(), s.end(), 'e', '3' );\n  replace( s.begin(), s.end(), 'o', '0' );\n  replace( s.begin(), s.end(), 't', '7' );\n  replace( s.begin(), s.end(), 'l', '1' );\n  transform( s.begin(), s.end(), s.begin(), ::toupper);\n\n  cout &lt;&lt; s &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "unit-testing", "googletest", "gmock"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1518018460, "post_id": 48667817, "comment_id": 84333475, "body": "Split your initialization in sub functions and mock only the one you want ?"}, {"owner": {"reputation": 578, "user_id": 5945089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6a32dbdb795aea85f857496071b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory Prescott", "link": "https://stackoverflow.com/users/5945089/gregory-prescott"}, "edited": false, "score": 0, "creation_date": 1518678999, "post_id": 48667817, "comment_id": 84606025, "body": "Care to share some code samples of what exactly are you trying to achieve?"}], "owner": {"reputation": 11, "user_id": 4396467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62bed399e2f247951854ce21dfac9b5?s=128&d=identicon&r=PG&f=1", "display_name": "kreso", "link": "https://stackoverflow.com/users/4396467/kreso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518871449, "creation_date": 1518018235, "last_edit_date": 1518871449, "question_id": 48667817, "link": "https://stackoverflow.com/questions/48667817/mocking-only-one-variable-inside-function-with-gtest", "title": "Mocking only one variable inside function with gtest", "body": "<p>I'm coding in C and using gtest for C++ for unit testing.</p>\n\n<p>I'd like to test situation where some variable gets integer overflow but incrementing that variable takes too long in UT. This variable is counter being written to directly only during initialization and is incremented on some events. My idea is to mock the counter to the maximum integer value during initialization, but I don't want to mock the function where counter is initialized because various other data important for UT is initialized in this function.</p>\n\n<p>Is something like this possible with gtest or do I need to implement a stub which will have all the functionalities of real function and initialize wanted counter value to counter?</p>\n\n<p>I cannot share the code since it's copyrighted, but here is excerpt showing general idea:</p>\n\n<pre><code>typedef struct {\n    some_variable;\n    another_variable;\n    counter;\n} data_structure_defined_only_in_this_file;\n\n...\n\n// check_some_parameters() isn't exported in header files\nvoid check_some_parameters(data_structure_defined_only_in_this_file *container) {\n    if (something == true)\n        container-&gt;counter++;\n}\n\n...\n\n// initialization() isn't exported in header files\nvoid initialization() {\n    data_structure_defined_only_in_this_file *container;\n    ...\n    container = (struct data_structure_defined... *)calloc(1, sizeof(struct data_structure_defined...));\n}\n</code></pre>\n\n<p>I made another function during initialization after allocating memory to container. This function returned value which was assigned to counter as initial value.</p>\n\n<p>source_file.c</p>\n\n<pre><code>// init_counter_val() IS exported to header file included in UT\nint init_counter_val() { return 0; }\n\nvoid initialization() {\n    data_structure_defined_only_in_this_file *container;\n    ...\n    container = (struct data_structure_defined... *)calloc(1, sizeof(struct data_structure_defined...));\n    container-&gt;counter = init_counter_val();\n}\n</code></pre>\n\n<p>unit_test.cc</p>\n\n<pre><code>...\nON_CALL(mockObj, init_counter_val()).WillByDefault(Return(INT_MAX));\n...\n</code></pre>\n\n<p>I mocked that function for unit test to return max integer value on function call but that solution wasn't accepted since production code would be changed to enable unit testing. But since neither data structure type nor functions where counter is written to aren't exported from source file, I believe mocking is impossible.</p>\n"}, {"tags": ["c++", "algorithm", "boost", "graph"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1518136669, "post_id": 48667616, "comment_id": 84392843, "body": "You merely show the approach you <i>don&#39;t want to have</i> and don&#39;t provide enough code (<code>tag_relation_mat</code>?, <code>rel_marker_pose</code>?) that would enable us to understand how your existing data structures work."}, {"owner": {"reputation": 1, "user_id": 6494779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c2b9a2ead454ac68051c1683bb6c68?s=128&d=identicon&r=PG&f=1", "display_name": "spungia123", "link": "https://stackoverflow.com/users/6494779/spungia123"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1519718849, "post_id": 48667616, "comment_id": 85012160, "body": "@sehe sorry for the delay! I was currently working on another project and did not have the time for this one.... So I tried to edit my post, I hope it is clearer now?Yes I show the approach I don&#39;t want to have, so you first see that I already tried some stuff and second since the code works to get an idea what I am doing. What I wand is to make the code more elegant by including all information into the graph so I do not need to look up the info from the martix."}], "owner": {"reputation": 1, "user_id": 6494779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c2b9a2ead454ac68051c1683bb6c68?s=128&d=identicon&r=PG&f=1", "display_name": "spungia123", "link": "https://stackoverflow.com/users/6494779/spungia123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519718651, "creation_date": 1518017688, "last_edit_date": 1519718651, "question_id": 48667616, "link": "https://stackoverflow.com/questions/48667616/using-defined-classes-as-edge-weight-for-an-undirected-graph-in-graph-boost-libr", "title": "Using defined classes as edge weight for an undirected graph in graph boost library", "body": "<p>I am new to <em>Boost Graph Library</em> and have questions concerning undirected graphs. </p>\n\n<p>My problem is, a 2D space, in which several landmarks are positioned. At the beginning one <code>Master-landmark</code> is defined and the goal is to compute the relative poses from the <code>Master-landmark</code> to all other landmarks. Since the grid is to big to see it all at once, I get only local information meaning the relative connection/pose between two or more landmarks (the <code>Master-landmark</code> does not have to be in every image). Given these local information I need to build a tree in order to get the paths from the <code>Master-landmark</code> to the other landmarks. So far so good.\nSince the landmark observation is done by another program, I build a matrix, where the information about the landmark relations are encoded (were two landmarks seen together? if yes, relative pose if not 0). This matrix is the so-called <code>tag_relation_mat</code> matrix of size <code>N\u00d7N</code>. <code>N</code> defines the number of landmarks and both rows and columns of the matrix represent all <code>N</code> landmarks to encode their relation. Each element (if there is a connection between two landmarks otherwise it is <code>0</code>) is a <code>rel_marker_pose</code> consisting of: 2D pose (x- and y-values) and an error value (high value is bad). In other words, the <code>tag_relation_mat</code> is a matrix which encodes all valid connections between the landmarks.\nBased on this matrix I'd like to generate an undirected graph and compute relative poses from the <code>Master-landmark</code> to all others given the best error value. </p>\n\n<p>So what I am basically doing (with the help of <a href=\"http://www.boost.org/doc/libs/1_46_1/libs/graph/example/dijkstra-example.cpp\" rel=\"nofollow noreferrer\">this link</a>) right now is </p>\n\n<ul>\n<li>to build up a undirected graph and</li>\n<li>solve it with the <code>dijkstra_shortest_paths</code> algorithm </li>\n</ul>\n\n<p>The outcome is the combined weight (from master-landmark to landmark) and the parent of the landmark. </p>\n\n<p>Given this information, I am recursively generating the paths from each landmark to the master-landmark by combining the transformations given by the <code>N\u00d7N</code> matrix:</p>\n\n<p>.h file:</p>\n\n<pre><code>// Edge weight.\ntypedef boost::property&lt;boost::edge_weight_t, double&gt; EdgeWeightProperty;\n\ntypedef adjacency_list &lt; boost::setS, boost::vecS, boost::undirectedS,\n    boost::no_property, EdgeWeightProperty &gt; Graph; //graph type\n\ntypedef typename boost::graph_traits&lt;Graph&gt;::vertex_descriptor Vertex; //vertex descriptor\ntypedef typename boost::graph_traits&lt;Graph&gt;::edge_descriptor Edge; //edge descriptor\ntypedef std::pair&lt;int, int&gt; _edge;\n\nclass GraphTree {\n\npublic:\n    GraphTree(int no_of_tags) {\n        this-&gt;num_vertices = no_of_tags;\n\n        //generate vertices\n        for(int i = 0; i &lt; no_of_tags; i++) {\n            Vertex v  = boost::add_vertex(this-&gt;undirected_graph);\n            idx_to_vertex.insert({i, v});\n        }\n    }\n\n    /**\n     * @brief generateTree generates tree graph with tags as edges and \n     */\n    void generateTree();\n\n    /**\n     * @brief solveTree thin tree based on chosen solver\n     */\n    std::vector&lt;rel_marker_pose&gt; solveTree(tree_solver solver, int master_vertex_idx);\n\n    /**\n     * @brief getRelPosesToMaster given a master tag (either defined or automatically chosen) rel. poses to the other existing tags are computed\n     */\n    void getRelPosesToMaster(int master_node, std::vector&lt;Vertex&gt; parent_vec, int start_node, rel_marker_pose* rel_m_pose);\n\nprivate:\n    // declare a graph object\n    Graph undirected_graph;\n\n    std::map&lt;int, Vertex&gt; idx_to_vertex;\n\n    int num_vertices;//    const int num_vertices = N;\n    int num_edges;//int num_edges = sizeof(edge_array)/sizeof(edge_array[0]);\n\n    std::vector&lt;Edge&gt; edge_vec;\n\n};\n</code></pre>\n\n<p>.cpp file:</p>\n\n<pre><code>void GraphTree::generateTree() {\n\nfor(int i = 0; i &lt; this-&gt;num_vertices; ++i) { //iterate over rows (landmark_from)\n    for(int j = 0; j &lt; this-&gt;num_vertices; ++j) { //iterate over columns (landmark_to)\n        double weight = this-&gt;tag_relation_mat.at(i).at(j).rel_pose.quality;\n\n        //check if tags have been seen together -&gt; add only relevant edges\n        if(this-&gt;tag_relation_mat.at(i).at(j).landmark_from != 0 &amp;&amp; this-&gt;tag_relation_mat.at(i).at(j).landmark_to != 0) {\n\n            boost::add_edge(this-&gt;idx_to_vertex[i], this-&gt;idx_to_vertex[j], EdgeWeightProperty(weight), this-&gt;undirected_graph);\n\n            }\n        }\n    }\n}\n\nstd::vector&lt;rel_marker_pose&gt; GraphTree::solveTree(tree_solver solver, int master_vertex_idx) {\n\n    std::vector&lt;rel_marker_pose&gt; master_to_vertex_vec;\n\n    if(solver == tree_solver::Dijkstra) { //http://www.boost.org/doc/libs/1_46_1/libs/graph/example/dijkstra-example.cpp\n\n        //create vectors to store the predecessors (p) and the distances from the root (d)\n        std::vector&lt;Vertex&gt; p(boost::num_vertices(this-&gt;undirected_graph));\n        std::vector&lt;double&gt; d(boost::num_vertices(this-&gt;undirected_graph));\n        //create a descriptor for the source node\n        Vertex master_vertex = vertex(master_vertex_idx, this-&gt;undirected_graph);\n\n        //evaluate dijkstra on graph g with source s, predecessor_map p and distance_map d\n        boost::dijkstra_shortest_paths(this-&gt;undirected_graph, master_vertex, boost::predecessor_map(&amp;p[0]).distance_map(&amp;d[0]));\n\n        boost::graph_traits &lt; Graph &gt;::vertex_iterator vi, vend;\n        for (boost::tie(vi, vend) = boost::vertices(this-&gt;undirected_graph); vi != vend; ++vi) {\n\n            rel_marker_pose r_m_p;\n\n            this-&gt;getRelPosesToMaster(master_vertex_idx, p, *vi, &amp;r_m_p);\n\n            master_to_vertex_vec.push_back(r_m_p);\n        }\n    }\n    return master_to_vertex_vec;\n}\n\nvoid GraphTree::getRelPosesToMaster(int master_node, std::vector&lt;Vertex&gt; parent_vec, int start_node, rel_marker_pose* rel_m_pose ) {\n    rel_m_pose-&gt;rel_pose.quality += this-&gt;tag_relation_mat.at(start_node).at(parent_vec[start_node]).rel_pose.quality;\n\n    // ...\n    // combine the transformations\n    // ...\n\n    rel_m_pose-&gt;landmark_from = parent_vec[start_node];\n\n    if(parent_vec[start_node] == master_node) {\n        return;\n    }\n    else {\n        this-&gt;getRelPosesToMaster(master_node, parent_vec, parent_vec[start_node], rel_m_pose);\n    }\n}\n</code></pre>\n\n<p>Well, it works, but is definitely not the most elegant way! I was wondering:</p>\n\n<ol>\n<li>If there is any possibility to add all relevant information directly into the undirected graph (landmark name to the vertices; pose and quality to the edges). So far, it is just the quality, which is then used to solve the graph. So that after generating the graph, I would only need the graph and not merge informations between graph and matrix after solving the graph? </li>\n<li>Is there an implemented way (in the boost lib) to obtain all visited edges from master-landmark to landmark?</li>\n</ol>\n\n<p>Thanks a lot for your help!</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1518017714, "post_id": 48667564, "comment_id": 84332876, "body": "If you had read <a href=\"https://stackoverflow.com/a/388282/440558\">any good beginners book</a> you should know about <i>references</i>. Think about that for a while, and go back to your books to read about it."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1518017715, "post_id": 48667564, "comment_id": 84332879, "body": "Read about member functions. Instead of <code>int LLSize(LL *head)</code> you should put <code>int size() const</code> into the <code>struct LL</code> block. Also getting the size should not create new lists."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1518017792, "post_id": 48667564, "comment_id": 84332937, "body": "It looks like you never initialized A. Your insert and delete pass by value."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1518017798, "post_id": 48667564, "comment_id": 84332942, "body": "Hint: <code>LL *current = new LL; current = head;</code> is just like <code>int x = 2; x = 8;</code>. There are many other issues. Read your C++ text book."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518017893, "post_id": 48667564, "comment_id": 84332997, "body": "You are also supposed to <code>delete</code> everything you get from <code>new</code> and you don&#39;t do that. Luckily for you you don&#39;t need to and should instead read about  and use <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> which takes care of that for you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518019300, "post_id": 48667564, "comment_id": 84334055, "body": "You should research &quot;C++ linked list example&quot; and compare the results to yours."}], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1518022149, "creation_date": 1518022149, "answer_id": 48669110, "question_id": 48667564, "link": "https://stackoverflow.com/questions/48667564/linked-list-program-error-in-c/48669110#48669110", "title": "Linked List Program error in C++", "body": "<p>Don't use <code>using namespace</code>.</p>\n\n<p>Create a type for the list and a type for the nodes</p>\n\n<pre><code>struct LL {\n    LL* next;\n    int data;\n};\n\nstruct L {\n    LL* head;\n};\n</code></pre>\n\n<p>Use references and don't allocate new memory in each function</p>\n\n<pre><code>int LLSize(L&amp; list) {\nLL *current = list.head;\n</code></pre>\n\n<p>Check if the head of the list is set and use <code>nullptr</code></p>\n\n<pre><code>if (list.head == nullptr) {\n</code></pre>\n\n<p>Use an instance of the list and not a pointer</p>\n\n<pre><code>int main() {\n    int choice;\n    L A;\n</code></pre>\n\n<p>Use a debugger like gdb to analyze your program.</p>\n\n<p>Clean up at the end. Delete memory you allocated with <code>new</code>. One <code>delete</code> for each <code>new</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 9328240, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-azdgxUpEsAc/AAAAAAAAAAI/AAAAAAAAAeo/JYRcsQ-pXbs/photo.jpg?sz=128", "display_name": "Ashish Puttaa", "link": "https://stackoverflow.com/users/9328240/ashish-puttaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518022149, "creation_date": 1518017566, "question_id": 48667564, "link": "https://stackoverflow.com/questions/48667564/linked-list-program-error-in-c", "title": "Linked List Program error in C++", "body": "<p>I tried implementing Linked List using C++ using a structure. \nI've included three functions - Size, Insertion and Deletion from the end.\nThe program compiled successfully. During execution, when I tried to give input for the LLInsert() function, there was just a cursor blinking on my execution window. I don't know if the function returned to main.\nAlso the LLSize() doesn't return 0 when I try to find the Size of a empty list.\nI can't seem to figure out what I'm doing wrong. Here is my code. </p>\n\n<pre><code>    #include&lt;iostream&gt;\n\n    using namespace std;\n\n    struct LL {\n        LL *next = NULL;\n        int data;\n    };\n\n    int LLSize(LL *head) {\n        LL *current = new LL;\n        current = head;\n        int count = 0;\n\n        while(current != NULL) {\n            current = current -&gt; next;\n            count ++;\n        }\n\n        return count;\n    }\n\n    void LLInsert(LL *head,int value) {\n        LL *current = new LL;\n        current = head;\n        LL *Newnode = new LL;\n        Newnode -&gt; data = value;\n        Newnode -&gt; next = NULL;\n\n        if(head == NULL) {\n            head = Newnode;\n            return;\n        }\n\n        while(current-&gt;next != NULL) {\n            current = current-&gt;next;\n        }\n        current-&gt;next = Newnode;\n\n        return;\n    }\n\n    int LLDelete(LL *head) {\n        LL *current = new LL;\n        current = head;\n        int deleteddata;\n\n        while(current-&gt;next-&gt;next != NULL) {\n            current = current-&gt;next;\n        }\n        current-&gt;next-&gt;data = deleteddata;\n        current-&gt;next = NULL;\n\n        return deleteddata;\n    }\n\n    int main() {\n        int choice;\n        LL *A;\n\n        while(1) {\n        cout &lt;&lt; \"1. Size\\n2. Insert\\n3. Delete\\n4. Exit\" &lt;&lt; endl;\n        cout &lt;&lt; \"Enter a choice : \";\n        cin &gt;&gt; choice;\n\n        switch(choice) {\n            case 1 : {\n                cout &lt;&lt; \"\\nLength = \" &lt;&lt; LLSize(A) &lt;&lt; endl;\n                break;\n            }\n            case 2 : {\n                int value;\n                cout &lt;&lt; \"\\nEnter the element to insert : \";\n                cin &gt;&gt; value;\n                LLInsert(A,value);\n                break;\n            }\n            case 3 : {\n                cout &lt;&lt; LLDelete(A);\n                break;\n            }\n            case 4 : {\n                exit(0);\n            }\n            default : {\n                cout &lt;&lt; \"\\nInvalid choice. Enter a valid choice \" &lt;&lt; endl;\n                break;\n            }\n        }\n        }\n    } \n</code></pre>\n"}, {"tags": ["c++", "logging", "logstash", "log4cplus"], "comments": [{"owner": {"reputation": 1024, "user_id": 4164901, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49fdcd344d77f958bc7864b6c5d86bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Durgesh", "link": "https://stackoverflow.com/users/4164901/durgesh"}, "edited": false, "score": 0, "creation_date": 1520331074, "post_id": 48667214, "comment_id": 85260996, "body": "After facing above issue, used SysLogAppender with which I could transfer the log messages. But with this appender, message is changed according to the format of syslogs. But SysLogAppender served my purpose."}], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 4164901, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49fdcd344d77f958bc7864b6c5d86bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Durgesh", "link": "https://stackoverflow.com/users/4164901/durgesh"}, "edited": false, "score": 0, "creation_date": 1518600180, "post_id": 48680212, "comment_id": 84568532, "body": "I&#39;m new to log4cplus.. Is there any example for creating custome appender ? Also I have tried SyslogAppender. Eventhough it&#39;s sending the message, It is prepending certain predefined format before every message. So logstash is unable to parse the json"}], "tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": true, "score": 0, "last_activity_date": 1518076191, "creation_date": 1518076191, "answer_id": 48680212, "question_id": 48667214, "link": "https://stackoverflow.com/questions/48667214/c-how-to-use-socketappender-of-log4cplus-to-send-logs-to-logstash-server/48680212#48680212", "title": "C++ : How to use SocketAppender of log4cplus to send logs to logstash server?", "body": "<p><code>log4cplus::SocketAppender</code> is specific to Log4cplus. If you want to log into Logstash, you will have to create your own appender to do that.</p>\n"}], "owner": {"reputation": 1024, "user_id": 4164901, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49fdcd344d77f958bc7864b6c5d86bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Durgesh", "link": "https://stackoverflow.com/users/4164901/durgesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 1, "accepted_answer_id": 48680212, "answer_count": 1, "score": 2, "last_activity_date": 1518076191, "creation_date": 1518016580, "question_id": 48667214, "link": "https://stackoverflow.com/questions/48667214/c-how-to-use-socketappender-of-log4cplus-to-send-logs-to-logstash-server", "title": "C++ : How to use SocketAppender of log4cplus to send logs to logstash server?", "body": "<p>I'm trying to send logs of my C++ application to logstash using log4cplus library.\nI have read the log4cplus documentation and used below configurations to configure SocketAppender.</p>\n\n<pre><code>log4cplus.rootLogger=INFO, SA\nlog4cplus.appender.SA=log4cplus::SocketAppender\nlog4cplus.appender.SA.port=5044  \nlog4cplus.appender.SA.host=127.0.0.1  \nlog4cplus.appender.SA.serverName=MyServer\nlog4cplus.appender.SA.layout=log4cplus::PatternLayout\nlog4cplus.appender.SA.layout.ConversionPattern=%m%n\n</code></pre>\n\n<p>In the code i have initialized the logger and tried to send the message to the logger.</p>\n\n<pre><code>PropertyConfigurator config(configFile);\nconfig.configure();\nstd::string msg = \"test msg\";\nLogger root = Logger::getRoot();\nLOG4CPLUS_INFO(root,msg);\n</code></pre>\n\n<p>But i was not getting the expected message on logstash server. I was getting some garbage data as shown below.</p>\n\n<blockquote>\n  <p>{\n        \"@version\" => \"1\",\n            \"host\" => \"localhost\",\n         \"message\" => \"\\u0000\\u0000\\u0000q\\u0003\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0004root\\u0000\\u0000N\n  \\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\btest\n  msg\\u0000\\u0000\\u0000\\u000F140382836238144Z{\\u0014N\\u0000\\u0004\\u0003\\xC0\\u0000\\u0000\\u0000\\u0013../src/property.cpp\\u0000\\u0000\\u00002\\u0000\\u0000\\u0000\\u0015int\n  main(int, char**)\",\n      \"@timestamp\" => 2018-02-07T14:59:26.284Z,\n            \"port\" => 47148 }</p>\n</blockquote>\n\n<p>I have read the documentation of log4cplus and tried several configuration changes and nothing worked. I could send the log to logstash server using netcat command. So atleast im sure that my logstash configurations are correct. I have configured the logstash with below conf file.</p>\n\n<pre><code>input {\n  tcp {\n    port =&gt; 5044\n  }\n}\n\nfilter{\n}\n\noutput {\n  stdout {\n    codec =&gt; rubydebug\n  }\n}\n</code></pre>\n\n<p>Can anyone tell me what i'm doing wrong with log4cplus ? Is it possible to use log4cplus for sending logs to logstash server ?</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1518016656, "post_id": 48667188, "comment_id": 84332120, "body": "What do you mean by &quot;compatible&quot;?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518016672, "post_id": 48667188, "comment_id": 84332130, "body": "Compatible in what sense? Without further qualifiers, this doesn&#39;t mean anything."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9224744"}, "edited": false, "score": 0, "creation_date": 1518016825, "post_id": 48667188, "comment_id": 84332238, "body": "Compatibility between types? Like the compatibility between derived class and their base classes"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1518016826, "post_id": 48667188, "comment_id": 84332242, "body": "do you mean when can one type be converted to another?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9224744"}, "edited": false, "score": 0, "creation_date": 1518016871, "post_id": 48667188, "comment_id": 84332272, "body": "Let me find an example in the standard..."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1518016919, "post_id": 48667188, "comment_id": 84332304, "body": "What @UKMonkey mentions would be called &quot;convertible&quot; and is clearly defined in the standard."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518017209, "post_id": 48667188, "comment_id": 84332510, "body": "N3690 is some intermediate standard draft. It would be more helpful if you quoted something close to an actual standard, like N3337, N4141 or N4659. I, for one, don&#39;t have that draft lying around."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9224744"}, "edited": false, "score": 0, "creation_date": 1518017374, "post_id": 48667370, "comment_id": 84332637, "body": "So can two types in C++ be said to be &quot;compatible&quot; if the 4 four points are true?"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518018065, "post_id": 48667370, "comment_id": 84333130, "body": "@asd Depends on where you want to use the word... For example, in this question you mentioned it without explanation, then people in comments were confused of what you were saying..."}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 1, "last_activity_date": 1518017725, "last_edit_date": 1518017725, "creation_date": 1518017028, "answer_id": 48667370, "question_id": 48667188, "link": "https://stackoverflow.com/questions/48667188/when-is-a-type-compatible-with-another/48667370#48667370", "title": "When is a type compatible with another?", "body": "<p>C++ does not have the concept of \"compatible type\" while C does.</p>\n\n<p>In C, two declarations for the same entity must declare compatible types, while in C++, this constraint is replaced by <a href=\"http://www.eel.is/c++draft/basic.link#10\" rel=\"nofollow noreferrer\">[basic.link]/10</a>:</p>\n\n<blockquote>\n  <p>After all adjustments of types (during which typedefs are replaced by their definitions), the types specified by all declarations referring to a given variable or function shall be identical, except that declarations for an array object can specify array types that differ by the presence or absence of a major array bound ([dcl.array]). A violation of this rule on type identity does not require a diagnostic.</p>\n</blockquote>\n\n<p>The wording you quoted is a description of <code>&lt;cstdarg&gt;</code> header, which comes from corresponding C header. So you can regard \"compatible\" here as the same concept in C.</p>\n"}, {"comments": [{"owner": {"reputation": 224, "user_id": 5777863, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--vrHZ2F77QM/AAAAAAAAAAI/AAAAAAAABD0/gBTuFJ7GG_I/photo.jpg?sz=128", "display_name": "Darshan Thakkar", "link": "https://stackoverflow.com/users/5777863/darshan-thakkar"}, "edited": false, "score": 0, "creation_date": 1519800885, "post_id": 48667427, "comment_id": 85051890, "body": "To, whomsoever downvoted, now this answer might seem wrong as question is edited, when I ansered question, it was &quot;When is a type compatible with another type in C++? I have looked in the standard and cannot find a definition of type compatibility.&quot;."}], "tags": [], "owner": {"reputation": 224, "user_id": 5777863, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--vrHZ2F77QM/AAAAAAAAAAI/AAAAAAAABD0/gBTuFJ7GG_I/photo.jpg?sz=128", "display_name": "Darshan Thakkar", "link": "https://stackoverflow.com/users/5777863/darshan-thakkar"}, "is_accepted": false, "score": -1, "last_activity_date": 1518017160, "creation_date": 1518017160, "answer_id": 48667427, "question_id": 48667188, "link": "https://stackoverflow.com/questions/48667188/when-is-a-type-compatible-with-another/48667427#48667427", "title": "When is a type compatible with another?", "body": "<p>When RHS variable can be assigned to LHS variable, then RHS variable's type is comparable for <b> type conversation</b>.\nYou can read more about type conversation <a href=\"http://www.edugrabs.com/type-conversion-and-type-casting-in-c/\" rel=\"nofollow noreferrer\"> here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9224744"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518018249, "creation_date": 1518016471, "last_edit_date": 1518018249, "question_id": 48667188, "link": "https://stackoverflow.com/questions/48667188/when-is-a-type-compatible-with-another", "title": "When is a type compatible with another?", "body": "<p>When is a type compatible with another type in C++? I have looked in the standard and cannot find a definition of type compatibility.</p>\n\n<p>Example of usage in the standard (n3690): Section 18.10 runtime support:</p>\n\n<blockquote>\n  <p>If the parameter parmN is of a reference type, or of a type that is\n  not compatible with the type that results when passing an argument for\n  which there is no parameter, the behavior is undefined.</p>\n</blockquote>\n\n<p>Are types simply \"compatible\" with each other if they can be implicitly converted to each other?</p>\n"}, {"tags": ["c++", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 455741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/321bbdae94099af056b60fb08634cd41?s=128&d=identicon&r=PG", "display_name": "Rob Yart", "link": "https://stackoverflow.com/users/455741/rob-yart"}, "edited": false, "score": 2, "creation_date": 1518074185, "post_id": 48667266, "comment_id": 84356485, "body": "Unfortunately, it does not show the data, that program outputs to cout. Just the gdb data. And debugging works correctly - it stops on breakpoints, etc. Maybe it is not possible to achieve printing program output with gdb?"}, {"owner": {"reputation": 163, "user_id": 455741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/321bbdae94099af056b60fb08634cd41?s=128&d=identicon&r=PG", "display_name": "Rob Yart", "link": "https://stackoverflow.com/users/455741/rob-yart"}, "edited": false, "score": 0, "creation_date": 1518095409, "post_id": 48667266, "comment_id": 84369978, "body": "Thanks, I found the terminal window."}, {"owner": {"reputation": 301, "user_id": 8813267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b04da5e56cc5c45b2aa2d464a5fe9855?s=128&d=identicon&r=PG&f=1", "display_name": "Jatin Sharma", "link": "https://stackoverflow.com/users/8813267/jatin-sharma"}, "edited": false, "score": 0, "creation_date": 1575249014, "post_id": 48667266, "comment_id": 104491006, "body": "Why does it give output in the debug console? How do I shift it to the integrated one? Also, how do I handle input(cin) for debugging? I don&#39;t think i can give input in the debug console"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 301, "user_id": 8813267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b04da5e56cc5c45b2aa2d464a5fe9855?s=128&d=identicon&r=PG&f=1", "display_name": "Jatin Sharma", "link": "https://stackoverflow.com/users/8813267/jatin-sharma"}, "edited": false, "score": 0, "creation_date": 1575251845, "post_id": 48667266, "comment_id": 104491473, "body": "@JatinSharma You can. Don&#39;t think, just try."}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1518016732, "creation_date": 1518016732, "answer_id": 48667266, "question_id": 48667038, "link": "https://stackoverflow.com/questions/48667038/vs-code-does-not-show-output-from-a-program/48667266#48667266", "title": "VS Code does not show output from a program", "body": "<p>You config is correct. The program output should be in the <strong>DEBUG CONSOLE</strong>.</p>\n\n<p><strong>Menu | Debug Console</strong> or <strong>Ctrl+Shift+Y</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1518097578, "post_id": 48686278, "comment_id": 84371576, "body": "Is such behavior on Windows?"}, {"owner": {"reputation": 163, "user_id": 455741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/321bbdae94099af056b60fb08634cd41?s=128&d=identicon&r=PG", "display_name": "Rob Yart", "link": "https://stackoverflow.com/users/455741/rob-yart"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1518103103, "post_id": 48686278, "comment_id": 84375625, "body": "No, I&#39;m using Ubuntu with Unity. Did not try in Windows."}, {"owner": {"reputation": 1744, "user_id": 1538095, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/22d28ad41036bb932e7c9a0b187ac546?s=128&d=identicon&r=PG", "display_name": "JulienFr", "link": "https://stackoverflow.com/users/1538095/julienfr"}, "edited": false, "score": 0, "creation_date": 1528707473, "post_id": 48686278, "comment_id": 88593751, "body": "can you elaborate ? how did you access your config ? what parameters had you have to change ?"}], "tags": [], "owner": {"reputation": 163, "user_id": 455741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/321bbdae94099af056b60fb08634cd41?s=128&d=identicon&r=PG", "display_name": "Rob Yart", "link": "https://stackoverflow.com/users/455741/rob-yart"}, "is_accepted": false, "score": 1, "last_activity_date": 1518095376, "creation_date": 1518095376, "answer_id": 48686278, "question_id": 48667038, "link": "https://stackoverflow.com/questions/48667038/vs-code-does-not-show-output-from-a-program/48686278#48686278", "title": "VS Code does not show output from a program", "body": "<p>The program was launched in external terminal and due to the configuration of my screen I didn't see it. Everything works fine. </p>\n"}], "owner": {"reputation": 163, "user_id": 455741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/321bbdae94099af056b60fb08634cd41?s=128&d=identicon&r=PG", "display_name": "Rob Yart", "link": "https://stackoverflow.com/users/455741/rob-yart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17849, "favorite_count": 0, "accepted_answer_id": 48667266, "answer_count": 2, "score": 7, "last_activity_date": 1518095376, "creation_date": 1518016068, "question_id": 48667038, "link": "https://stackoverflow.com/questions/48667038/vs-code-does-not-show-output-from-a-program", "title": "VS Code does not show output from a program", "body": "<p>I've created a c++ project on ubuntu in visual studio code.\nIt launches the program using gdb mode, but does not show anything in Output. When I launch program from console, the output is present. I tried inserting \"console\" property, but vscode tells me, that it is forbidden (from similar issue with node <a href=\"https://github.com/Microsoft/vscode/issues/30842\" rel=\"noreferrer\">https://github.com/Microsoft/vscode/issues/30842</a>). </p>\n\n<p>How can I enable vscode to show the output from my program?</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"(gdb) Launch\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${workspaceFolder}/a.out\",\n            \"args\": [],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${workspaceFolder}\",\n            \"environment\": [],\n            \"externalConsole\": true,\n            \"MIMode\": \"gdb\",            \n            \"setupCommands\": [\n                {\n                    \"description\": \"Enable pretty-printing for gdb\",\n                    \"text\": \"-enable-pretty-printing\",\n                    \"ignoreFailures\": true\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "constants"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1518015965, "post_id": 48666947, "comment_id": 84331610, "body": "The STL uses the convention that calling <code>const</code> member functions is thread-safe. Your <code>start</code> is not. If you should follow that convention is debatable."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1518016269, "post_id": 48666947, "comment_id": 84331827, "body": "I recall reading Scott Myers discussing the difference between what he deemed logical const-ness and physical const-ness. That was about introducing <code>mutable</code> members (such as a mutex). His point was about justifying the modifiable member, because the logical state of the object remained unchanged, so the member function was justifiably const. I think similar reasoning applies here. The logical state changes, so omitting const may be justifiable."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 1, "creation_date": 1518016283, "post_id": 48666947, "comment_id": 84331836, "body": "Callers usually expect the <code>const</code> to refer to the logical state of the object and not it&#39;s representation. So it&#39;s best to not mark such cases as const. Conversely, member variables that do not express the logical state (such as caching mechanisms) are commonly declared <code>mutable</code> to allow for functions to be <code>const</code> even though the do alter the representation of the object."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1518016689, "post_id": 48666947, "comment_id": 84332137, "body": "It&#39;s probably worthwhile to mention the Principle of Least Astonishment here -- in this case, if it would surprise the user of your class to find that the start() method is marked const, then that&#39;s a good argument for not marking the method const.  <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Principle_of_least_astonishment</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1518016351, "creation_date": 1518016351, "answer_id": 48667134, "question_id": 48666947, "link": "https://stackoverflow.com/questions/48666947/mark-a-member-function-as-const-when-it-is-conceptually-not/48667134#48667134", "title": "Mark a member function as const when it is conceptually not", "body": "<p>In your case compiler allows you to make <code>start()</code> const due to imperfect propagation of constness through pointers. If you replace your pointer with object of type <code>Engine</code> your question will disappear. So answer is no, it should not be <code>const</code> in this case as using <code>Engine</code> as a smart pointer or instance is internal details and should not affect public interface of class <code>Car</code>. </p>\n\n<blockquote>\n  <p>As far as I read here and there, const should be used when possible.</p>\n</blockquote>\n\n<p>This statement is way too generic, and as with any generic suggestion should not be used formally in every case.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1518017939, "post_id": 48667151, "comment_id": 84333035, "body": "Suppose <code>Type</code> is a <code>int&amp;</code>.  Then your code (replacing <code>some_func</code> with a mutating operation on the underlying <code>int</code>) can fail.  Reference semantic types (views) can be <code>const</code> even if the operation modifies the underying referred-to object, and <code>==</code> may compare the underlying objects and not the identity the the reference refers to.  Or, in short <code>std::reference_wrapper&lt;T&gt;</code>."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1518022949, "post_id": 48667151, "comment_id": 84336564, "body": "@Yakk which member of <code>std::reference_wrapper&lt;T&gt;</code> marked <code>const</code> modifies the underying referred-to object?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518030306, "post_id": 48667151, "comment_id": 84340884, "body": "@xskxzr <code>get()</code> returns a <code>T&amp;</code> and is <code>const</code>.  Same with <code>operator T&amp;()</code>"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 14, "last_activity_date": 1518016377, "creation_date": 1518016377, "answer_id": 48667151, "question_id": 48666947, "link": "https://stackoverflow.com/questions/48666947/mark-a-member-function-as-const-when-it-is-conceptually-not/48667151#48667151", "title": "Mark a member function as const when it is conceptually not", "body": "<p>One simple metric for whether a function should be <code>const</code> is this:</p>\n\n<pre><code>Type a{...};\nType b{...};\n\nbool comp1 = a == b;\n\nb.some_func(...);\n\nbool comp2 = a == b;\n</code></pre>\n\n<p>If <code>comp1</code> and <code>comp2</code> can <em>ever</em> be different, then <code>some_func</code> is not <code>const</code>.</p>\n\n<p>Obviously, not every type has an <code>operator==</code> overload, but most have at least the conceptual idea of what you would test to see if they're equal. Different <code>Car</code> instances with different <code>engine</code> states would be unequal. Therefore, a function that changes the <code>engine</code> state is not <code>const</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1518026898, "post_id": 48667559, "comment_id": 84338915, "body": "Although it is not the core the problem that I am asking about, I really thank you for mentioning it! I was always wondering why there is no such thing."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 1, "creation_date": 1518029223, "post_id": 48667559, "comment_id": 84340245, "body": "Once <code>const</code>is propagated correctly, I have difficulty to see case of <code>const</code> methods which is conceptually not. With globals (of any kinds as static member or external file), but then I would say that your concern about constness would be surpassed by that design (issue)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1518017544, "creation_date": 1518017544, "answer_id": 48667559, "question_id": 48666947, "link": "https://stackoverflow.com/questions/48666947/mark-a-member-function-as-const-when-it-is-conceptually-not/48667559#48667559", "title": "Mark a member function as const when it is conceptually not", "body": "<p>In your example, you might want <a href=\"http://en.cppreference.com/w/cpp/experimental/propagate_const\" rel=\"nofollow noreferrer\">std::experimental::propagate_const</a>:</p>\n\n<pre><code>class Car{\npublic:\n   void start() { engine_-&gt;status = 1; }\nprivate:\n    std::experimental::propagate_const&lt;std::unique_ptr&lt;Engine&gt;&gt; engine_;\n};\n</code></pre>\n\n<p>Then your <code>start</code> can no longer be <code>const</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1518030591, "creation_date": 1518030591, "answer_id": 48671541, "question_id": 48666947, "link": "https://stackoverflow.com/questions/48666947/mark-a-member-function-as-const-when-it-is-conceptually-not/48671541#48671541", "title": "Mark a member function as const when it is conceptually not", "body": "<p>The meaning of <code>const</code> can vary.</p>\n\n<ul>\n<li><p>Something is <code>const</code> if it preserves <code>==</code>.</p></li>\n<li><p>Something is <code>const</code> if your type follows reference semantics and it doesn't change what is referred to.</p></li>\n<li><p>Something is <code>const</code> if it can be used on any rvalue or lvalue in sensible ways.</p></li>\n<li><p>Something is <code>const</code> if it is safe to use from multiple threads.</p></li>\n<li><p>Something is <code>const</code> if it compiles as <code>const</code>.</p></li>\n<li><p>Something is <code>const</code> if whatever state the object claims is internal is not mutated by it.</p></li>\n</ul>\n\n<p>All of these are reasonable rules to decide if a method or argument is or is not <code>const</code>.</p>\n\n<p>A thing to be extremely careful of is to know the difference between <code>T const*</code> and <code>T*const</code>, and don't accidentally hse top-level const as an internal const.  It isn;t <code>const iterator</code> it is <code>const_iterator</code>.  It isn't <code>const gsl::span&lt;int&gt;</code>, it is <code>gsl::span&lt;const int&gt;</code>.  It isn't <code>const unique_ptr&lt;T&gt;</code>, it is <code>unique_ptr&lt;T const&gt;</code>.</p>\n\n<p>On the other hand, <code>vector</code> is a value semantics typr; it pretends its buffer is a part of it (even though this is a lie).  It isn't <code>vector&lt;const T&gt;</code>, it is <code>const vector&lt;T&gt;</code>.</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 1, "accepted_answer_id": 48667134, "answer_count": 4, "score": 8, "last_activity_date": 1518030591, "creation_date": 1518015780, "question_id": 48666947, "link": "https://stackoverflow.com/questions/48666947/mark-a-member-function-as-const-when-it-is-conceptually-not", "title": "Mark a member function as const when it is conceptually not", "body": "<p>As far as I read here and there, <code>const</code> should be used when possible. However, I have a case that always bothers me.</p>\n\n<p>Should I mark a member function as <code>const</code> when it does not alter any member variable values but it is not conceptually a <code>const</code> function?</p>\n\n<p>For example:</p>\n\n<pre><code>class Engine{\npublic:\n    int status;\n};\n\nclass Car{\npublic:\n   void start() const{\n        engine_-&gt;status = 1;\n    }\nprivate:\n    std::unique_ptr&lt;Engine&gt; engine_;\n};\n</code></pre>\n\n<p>The compiler will accept the <strong>constness</strong> of <code>start()</code> since <code>engine_</code> as a pointer did not change. However, It seems so unrealistic, at least IMO, that a function called <code>start</code> in a class called <code>Car</code> is a <code>const</code> one!</p>\n\n<p>The example was just a quick one. Usually, some internal states of the <code>Car</code> class should be updated accordingly making <code>const</code> keyword non-feasible. However, the mini example was just to illustrate my idea.</p>\n"}, {"tags": ["c++", "windows", "mbr"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1518015291, "post_id": 48666733, "comment_id": 84331141, "body": "What did you pass to <code>OpenMbrFile</code> as <code>sPath</code>?"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518020880, "post_id": 48666733, "comment_id": 84335155, "body": "While calling OpenMbrFile, I called it with sPath as argument and sPath was of the datatype LPWSTR"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518020993, "post_id": 48666733, "comment_id": 84335236, "body": "And what was the value?"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518021172, "post_id": 48666733, "comment_id": 84335378, "body": "Filepath for the MBR File which I wanted to read."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518021361, "post_id": 48666733, "comment_id": 84335494, "body": "So what was the result? Did <code>OpenMbrFile</code> return false? Did <code>GetLastError</code> give you an error code? Which one?"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1518021766, "post_id": 48666733, "comment_id": 84335777, "body": "I&#39;m getting garbage value in my buffer which doesn&#39;t contain MBR data also the value of dwByteRead is 1. So, It&#39;s not reading the complete thing. Is something wrong with the buffer Initialization? I haven&#39;t tried GetLastError!"}], "owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545736279, "creation_date": 1518015116, "question_id": 48666733, "link": "https://stackoverflow.com/questions/48666733/how-to-read-mbr-data-on-windows-system", "title": "How to read MBR data on windows system", "body": "<p>I'm using a file that has MBR code at an offset of 54 bytes.\nIn the main() function, I'm calling OpenMBbrFile(), then ReadMbrData(). \nHowever, I'm not able to read MBR in my Buffer Properly. Please Help Me with the Issue..................................................................................................................................................................................................................................................................................................................................................................................................................</p>\n\n<pre><code>BOOL OpenMbrFile(LPWSTR sPath)\n{\n\n    cout &lt;&lt; \"OpenMBR: Create Handle\" &lt;&lt; endl;\n\n    m_hMbrFile = CreateFile(sPath\n        , GENERIC_READ\n        , FILE_SHARE_READ\n        , NULL\n        , OPEN_EXISTING\n        , FILE_ATTRIBUTE_NORMAL\n        , NULL);\n\n    if (m_hMbrFile == INVALID_HANDLE_VALUE) return FALSE;\n\n    return TRUE;\n}\n\nBOOL CloseMbrFile()\n{\n\n    cout &lt;&lt; \"CloseMBR: Closing Handle\" &lt;&lt; endl;\n\n    BOOL bReturn = TRUE;\n\n    if (m_hMbrFile != INVALID_HANDLE_VALUE)\n        bReturn = CloseHandle(m_hMbrFile);\n\n    m_hMbrFile = NULL;\n\n    cout &lt;&lt; \"Returning from CloseMBR\" &lt;&lt; endl;\n\n    return bReturn;\n}\n\n\nBOOL ReadMbrData()\n{\n\n    cout &lt;&lt; \"ReadMBR: Initialization\" &lt;&lt; endl;\n\n    BOOL bReturn = FALSE;\n    DWORD dwByteRead = 0;\n    LARGE_INTEGER filepointer;\n    filepointer.QuadPart = 54;  //MBR data in File at offset 54\n    BYTE* pBuff = NULL;\n    pBuff = new BYTE[512];\n    if (!pBuff) \n    {\n        cout &lt;&lt; \"ReadMBR: Cleaning Stuff up\" &lt;&lt; endl;\n        if (pBuff) delete[] pBuff;\n        CloseMbrFile();\n        ClosePhysicalDrive();\n        return bReturn;\n    }\n\n    if (m_hMbrFile == INVALID_HANDLE_VALUE) return FALSE;\n\n    cout &lt;&lt; \"ReadMBR: Setting fp\" &lt;&lt; endl;\n\n    if(!SetFilePointerEx(m_hMbrFile, filepointer, NULL, FILE_BEGIN))\n    {\n        cout &lt;&lt; \"Failed to SetFilePointer ( \" &lt;&lt; m_hMbrFile &lt;&lt; \", \" &lt;&lt; filepointer.QuadPart &lt;&lt; \", 0, FILE_BEGIN)\" &lt;&lt; endl;\n        cout &lt;&lt; \"ReadMBR: Cleaning Stuff up\" &lt;&lt; endl;\n        if (pBuff) delete[] pBuff;\n        CloseMbrFile();\n        ClosePhysicalDrive();\n        return bReturn;\n\n    }\n\n    cout &lt;&lt; \"ReadMBR: Starting to read File\" &lt;&lt; endl;\n\n    bReturn = ReadFile(m_hMbrFile, pBuff, sizeof(*pBuff), &amp;dwByteRead, 0);\n\n    if (bReturn)\n        bReturn = (sizeof(*pBuff) == dwByteRead);       //Need to check this condition? shd it be 512 or size of wud do??\n\n    cout &lt;&lt; \"ReadMBR: Cleaning Stuff up\" &lt;&lt; endl;\n    if (pBuff) delete[] pBuff;\n    CloseMbrFile();\n    ClosePhysicalDrive();\n\n    return bReturn;\n}\n</code></pre>\n"}, {"tags": ["c++", "flex-lexer"], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 918860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/864a0d3b9707a632fd69a9f1c31e1824?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. Alex RE", "link": "https://stackoverflow.com/users/918860/dr-alex-re"}, "is_accepted": false, "score": 0, "last_activity_date": 1555963956, "creation_date": 1555963956, "answer_id": 55800510, "question_id": 48666644, "link": "https://stackoverflow.com/questions/48666644/how-do-i-get-reflex-to-do-backtracking-when-generating-a-flex-scanner/55800510#55800510", "title": "How do I get reflex to do backtracking when generating a flex scanner?", "body": "<p>Backtracking reflex scanners require Boost in Perl mode.  Use <code>reflex -m=boost-perl</code> to switch to the Boost Perl regex engine.  See the RE/flex documentation section on POSIX versus Perl matching: <a href=\"https://www.genivia.com/doc/reflex/html/index.html#reflex-posix-perl\" rel=\"nofollow noreferrer\">https://www.genivia.com/doc/reflex/html/index.html#reflex-posix-perl</a>.</p>\n"}], "owner": {"reputation": 1827, "user_id": 187998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/003aa224fb6ca93a53bd2973a98e242e?s=128&d=identicon&r=PG", "display_name": "Clearer", "link": "https://stackoverflow.com/users/187998/clearer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555963956, "creation_date": 1518014906, "last_edit_date": 1518045071, "question_id": 48666644, "link": "https://stackoverflow.com/questions/48666644/how-do-i-get-reflex-to-do-backtracking-when-generating-a-flex-scanner", "title": "How do I get reflex to do backtracking when generating a flex scanner?", "body": "<p>I've come up with a backtracking regex that works out fine on <a href=\"https://regex101.com\" rel=\"nofollow noreferrer\">https://regex101.com</a>. When I compile a simple <code>flex</code>(ish) program with <code>reflex -u</code>, the expression doesn't capture the backtracking bit -- everything else works just fine.</p>\n\n<p>The documentation for <code>reflex</code> indicates that it <em>will</em> allow backtracking out of the box and I can't find anything in the documentation that tells me how to allow backtracking when using <code>reflex</code> as a replacement for <code>flex</code>.</p>\n\n<p>As far as I can tell from the documentation, I have to make <code>reflex</code> use <code>std::regex</code>, since that's the only engine that supports backtracking and it seems trivial to do in a regular C++ program.</p>\n\n<p>(*) Regular old flex is not an option, since it doesn't support unicode classes; specifically it doesn't support recognizing uppercase letters.</p>\n"}, {"tags": ["c++", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518017444, "post_id": 48666549, "comment_id": 84332698, "body": "Please provide a reference to <code>SetBody</code> method. <a href=\"https://sdk.amazonaws.com/cpp/api/0.12.9/df/da6/class_aws_1_1_s3_1_1_model_1_1_put_object_request.html\" rel=\"nofollow noreferrer\">First link in google</a> does not contain it."}, {"owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "reply_to_user": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518017706, "post_id": 48666549, "comment_id": 84332872, "body": "It&#39;s in the AWS SDK documentation, right here: <a href=\"https://sdk.amazonaws.com/cpp/api/0.12.9/dd/dd8/class_aws_1_1_amazon_streaming_web_service_request.html\" rel=\"nofollow noreferrer\">sdk.amazonaws.com/cpp/api/0.12.9/dd/dd8/&hellip;</a>  Sorry, I thought I made it clear that this was an AWS S3 PutObjectRequest."}, {"owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518018018, "post_id": 48666549, "comment_id": 84333095, "body": "It seems you can use something like <code>object_request.SetBody( std::istringstream( (char*) data ) );</code>, but I&#39;m unable to test it myself and not sure this is the best solution."}, {"owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "reply_to_user": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518031360, "post_id": 48666549, "comment_id": 84341444, "body": "Thank you for checking it. Unfortunately it doesn&#39;t compile: <code>error: no viable conversion from &#39;std::istringstream&#39; (aka &#39;basic_istringstream&lt;char&gt;&#39;) to &#39;const std::shared_ptr&lt;Aws::IOStream&gt;&#39;       (aka &#39;const shared_ptr&lt;basic_iostream&lt;char, std::char_traits&lt;char&gt; &gt; &gt;&#39;)</code>"}, {"owner": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518062560, "post_id": 48666549, "comment_id": 84352717, "body": "What if you replace <code>std::istringstream</code> with <code>std::make_shared&lt;std::istringstream&gt;</code>?"}, {"owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "reply_to_user": {"reputation": 2193, "user_id": 5512095, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/58e730dd5510436d080bb145d452a2e6?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Sheremet", "link": "https://stackoverflow.com/users/5512095/denis-sheremet"}, "edited": false, "score": 0, "creation_date": 1518185582, "post_id": 48666549, "comment_id": 84414069, "body": "That results in this: <code>address of overloaded function &#39;make_shared&#39; does not match required type &#39;std::__1::shared_ptr&lt;std::__1::basic_iostream&lt;char&gt; &gt;&#39;</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1518190463, "post_id": 48666549, "comment_id": 84417200, "body": "You need to actually call <code>make_shared</code>"}, {"owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1519215078, "post_id": 48666549, "comment_id": 84816773, "body": "@BenVoigt like this: <code>object_request.SetBody(std::make_shared&lt;std::istringstream&gt;( std::istringstream( (char*) data ) )&gt;);</code> ?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1519227855, "post_id": 48666549, "comment_id": 84825867, "body": "@ndtreviv: No, <code>make_shared&lt;T&gt;</code> doesn&#39;t take a parameter of type <code>T</code>, but those needed to create a <code>T</code> (the parameters for <code>T</code>&#39;s constructor)."}], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 1978816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/405852394bf130d02191654f17ec5379?s=128&d=identicon&r=PG", "display_name": "user1978816", "link": "https://stackoverflow.com/users/1978816/user1978816"}, "edited": false, "score": 0, "creation_date": 1569228626, "post_id": 48926299, "comment_id": 102514574, "body": "If you have a vector of user define struct/lass then the following works:                  auto data = Aws::MakeShared&lt;Aws::StringStream&gt;(&quot;PutObjectInputStream&quot;, std::stringstream::in | std::stringstream::out | std::stringstream::binary);         data-&gt;write((char*)&amp;vec[0], vec.size() * sizeof(MyData));         object_request.SetBody(data);"}], "tags": [], "owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "is_accepted": true, "score": 10, "last_activity_date": 1519299368, "last_edit_date": 1519299368, "creation_date": 1519298846, "answer_id": 48926299, "question_id": 48666549, "link": "https://stackoverflow.com/questions/48666549/upload-uint8-t-buffer-to-aws-s3-without-going-via-filesystem/48926299#48926299", "title": "Upload uint8_t* buffer to AWS S3 without going via filesystem", "body": "<p>And after <em>hours</em> of hacking, here is the answer:</p>\n\n<pre><code>    Aws::S3::Model::PutObjectRequest object_request;\n    object_request.WithBucket(output_bucket).WithKey(key_name);\n    auto data = Aws::MakeShared&lt;Aws::StringStream&gt;(\"PutObjectInputStream\", std::stringstream::in | std::stringstream::out | std::stringstream::binary);\n    data-&gt;write(reinterpret_cast&lt;char*&gt;(buffer), length);\n    object_request.SetBody(data);\n</code></pre>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/103167/ben-voigt\">Ben Voigt</a> for pointing out that when you <code>make_shared</code> (or <code>MakeShared</code> in my case), you're not actually passing it the data at that point. You're just telling it what <code>T</code> you're making shared.</p>\n\n<p>Also helped by nbubis' answer to this question: <a href=\"https://stackoverflow.com/questions/41448626/const-char-to-stdbasic-iostream\">const char * to std::basic_iostream</a></p>\n"}], "owner": {"reputation": 2984, "user_id": 498391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c9f5dbf1b3b93a4c53453f39c37f2457?s=128&d=identicon&r=PG", "display_name": "ndtreviv", "link": "https://stackoverflow.com/users/498391/ndtreviv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 2, "accepted_answer_id": 48926299, "answer_count": 1, "score": 6, "last_activity_date": 1519299368, "creation_date": 1518014599, "last_edit_date": 1519216939, "question_id": 48666549, "link": "https://stackoverflow.com/questions/48666549/upload-uint8-t-buffer-to-aws-s3-without-going-via-filesystem", "title": "Upload uint8_t* buffer to AWS S3 without going via filesystem", "body": "<p><strong>Disclaimers:</strong>\nI am not a c++ programmer, please save me from myself.</p>\n\n<p>I'm trying to create a PutObjectRequest in c++ using the AWS SDK.</p>\n\n<p>I have a 'uint8_t*' (in Java-land from whence I hail we call this a byte[], I believe on planet c++ this is a buffer), and I need to get it into an Aws::IOStream somehow.</p>\n\n<p>All of the examples show the data coming directly from the filesystem.</p>\n\n<p>I've seen a couple of similar-ish (but not really) questions with answers that point to another third party library called Boost, but <em>surely</em> this is a common usecase? Why would I need a third party library to do something that should just be possible using the AWS SDK?:</p>\n\n<p><em>\"I have data, I want to put it up on S3. No it's not in the filesystem, yes I created it in memory.\"</em></p>\n\n<pre><code>uint8_t* buf; //&lt;-- How do I get this...\n...\nAws::S3::Model::PutObjectRequest object_request;\nobject_request.WithBucket(output_bucket).WithKey(key_name);\n\nobject_request.SetBody(data); //&lt;-- ...into here\n</code></pre>\n\n<p>I really appreciate any help or pointers (no pun intended) here.</p>\n\n<p><strong>Update</strong> <br />\nI've tried everything in the comments, and this:</p>\n\n<pre><code>std::shared_ptr&lt;Aws::IOStream&gt; objectStream = Aws::MakeShared&lt;Aws::StringStream&gt;(\"PutObjectInputStream\");        \n*objectStream &lt;&lt; data;\nobjectStream-&gt;flush();\nobject_request.SetBody(objectStream);\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>std::shared_ptr&lt;Aws::IOStream&gt; objectStream = Aws::MakeShared&lt;Aws::StringStream&gt;(\"PutObjectInputStream\");        \nstd::istringstream is((char*) data);\n*objectStream &lt;&lt; is.rdbuf();\nobjectStream-&gt;flush();\nobject_request.SetBody(objectStream);\n</code></pre>\n\n<p>which compile, but each only uploads 2 bytes of data.</p>\n\n<p>Other thing I've tried that don't compile are:</p>\n\n<pre><code>auto input_data = Aws::MakeShared&lt;Aws::IOStream&gt;(\"PutObjectInputStream\", std::istringstream((char*) data), std::ios_base::in | std::ios_base::binary);\nobject_request.SetBody(input_data);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>object_request.SetBody(std::make_shared&lt;std::istringstream&gt;( std::istringstream( (char*) spn ) ));\n</code></pre>\n\n<p>and these ones creates the object on S3, but with 0 bytes:</p>\n\n<pre><code>    std::shared_ptr&lt;Aws::IOStream&gt; objectStream = Aws::MakeShared&lt;Aws::StringStream&gt;(\"PutObjectInputStream\");\n    objectStream-&gt;rdbuf()-&gt;pubsetbuf(static_cast&lt;char*&gt;(reinterpret_cast&lt;char*&gt;(data)), length);\n    objectStream-&gt;rdbuf()-&gt;pubseekpos(length);\n    objectStream-&gt;seekg(0);\n    object_request.SetBody(objectStream);\n\n\n    std::shared_ptr&lt;Aws::IOStream&gt; objectStream = Aws::MakeShared&lt;Aws::StringStream&gt;(\"PutObjectInputStream\");\n    objectStream-&gt;rdbuf()-&gt;pubsetbuf(reinterpret_cast&lt;char*&gt;(data), length);\n    objectStream-&gt;rdbuf()-&gt;pubseekpos(length);\n    objectStream-&gt;seekg(0);\n    object_request.SetBody(objectStream);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518014972, "post_id": 48666517, "comment_id": 84330878, "body": "The third option isn&#39;t possible with that syntax [edit: not completely true, c.f. Fran&#231;ois Andrieux&#39;s comment]. At best, you can have them return an union, a boost::variant, or something along those lines, or alternatively you could have <code>ResourceManager::getValue&lt;PLAYER_NAME&gt;()</code> (where PLAYER_NAME is a compile-time constant)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518014984, "post_id": 48666517, "comment_id": 84330887, "body": "Don&#39;t use return values; pass a reference parameter instead."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 1, "creation_date": 1518015061, "post_id": 48666517, "comment_id": 84330964, "body": "@Caninonos It can work, if <code>PLAYER_NAME</code> and <code>CONNETION_TIMEOUT</code> are instances of type tags. Then template arguments could be deduced. Though you might as well use template arguments directly in that case, it&#39;s not impossible to make the third option work with that syntax."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1518015199, "post_id": 48666517, "comment_id": 84331073, "body": "@Fran&#231;oisAndrieux oh right. I assumed they had the same type, but that&#39;s not necessarily the case."}, {"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 1, "creation_date": 1518015631, "post_id": 48666517, "comment_id": 84331383, "body": "You are essentially dealing with a seralization/deserialization problem. My suggestion would be to use a well supported format (for example JSON) instaed of reinventing the wheel yourself and use one of the available C++ libraries to interface with it (for example RapidJSON)."}, {"owner": {"reputation": 51, "user_id": 4855811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c764dc0f8fe8af0d74cda09fb859ad?s=128&d=identicon&r=PG&f=1", "display_name": "Leitos", "link": "https://stackoverflow.com/users/4855811/leitos"}, "reply_to_user": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1518016662, "post_id": 48666517, "comment_id": 84332124, "body": "@EmeraldWeapon yeah, that&#39;s another solution. nlohmann&#39;s JSON library is quite nice. I&#39;ve used it few times."}, {"owner": {"reputation": 51, "user_id": 4855811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c764dc0f8fe8af0d74cda09fb859ad?s=128&d=identicon&r=PG&f=1", "display_name": "Leitos", "link": "https://stackoverflow.com/users/4855811/leitos"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1518017872, "post_id": 48666517, "comment_id": 84332981, "body": "@Fran&#231;oisAndrieux Could you show me an example please?"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1518019124, "post_id": 48666517, "comment_id": 84333952, "body": "I think @Fran&#231;oisAndrieux was referring to this: <a href=\"https://ideone.com/yInXJY\" rel=\"nofollow noreferrer\">ideone.com/yInXJY</a> (when he said it was feasible) and to something which looks a bit like this <a href=\"https://ideone.com/jHb7rp\" rel=\"nofollow noreferrer\">ideone.com/jHb7rp</a> (when he said you might as well use template arguments directly, although I also removed the intermediate wrapper which is somewhat useless)"}], "owner": {"reputation": 51, "user_id": 4855811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c764dc0f8fe8af0d74cda09fb859ad?s=128&d=identicon&r=PG&f=1", "display_name": "Leitos", "link": "https://stackoverflow.com/users/4855811/leitos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518014512, "creation_date": 1518014512, "question_id": 48666517, "link": "https://stackoverflow.com/questions/48666517/return-different-types-from-different-classes-with-the-same-approach", "title": "Return different types from different classes with the same approach", "body": "<p>I am not sure if I named the title right, but i will describe, what I am thinking about:</p>\n\n<p>I am making a game and now I reached a point in which I want to refactor probably everything. The part which I want to refactor now is reading configuration and settings from file.  </p>\n\n<p>So far I used to store the information in a <code>std::map&lt;MY_ENUM,std::string&gt;</code> and then whenever I needed to read the value I returned from getter the string and parsed it in code(in a lot of places -> bad practice). By the way, the format of the config/settings file is simple: each line contains key and value.</p>\n\n<p>Now, i thought about several upgrades to this:</p>\n\n<ol>\n<li><p>Use template function which will return the type i need. Instead of parsing it everywhere I need the values, parse it in one place. The function would look something like <code>ResourceManager::Get&lt;int&gt;(CONNECTION_TIMEOUT_LIMIT)</code>. There is risk of wrong interpretation of the variable though. Someone could parse one variable as string, while it should be parsed as float.</p></li>\n<li><p>Friend proposed for the sake of simplicity to just make all the variables members of the class so they will be strongly typed and there would be no need to parse them, once they are stored.</p></li>\n</ol>\n\n<p>Finally, the third approach is one I would like to ask about, if it is even possible in c++ (I believe it is, but I cannot figure it out), and how it can be done.  </p>\n\n<p>Let's say, we have two entries in the config file:</p>\n\n<pre><code>PLAYER_NAME  John Doe\nCONNECTION_TIMEOUT 5\n</code></pre>\n\n<p>The way I imagine it would work is, i would have function, that would return some object representing the loaded entry, which would have function that would have specific type depending on the entry.</p>\n\n<pre><code>ResourceManager::get(PLAYER_NAME).getValue() // returns string\nResourceManager::get(CONNECTION_TIMEOUT).getValue() // returns int\n</code></pre>\n\n<p>I realize this won't work with simple inherited classes, since you cannot return different types from the same function.</p>\n"}]