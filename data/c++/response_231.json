[{"tags": ["c++", "windows", "boost", "mingw", "linker-errors"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11619539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b41bda2a77e7c499d1bc7bf891bce7?s=128&d=identicon&r=PG", "display_name": "komer", "link": "https://stackoverflow.com/users/11619539/komer"}, "edited": false, "score": 0, "creation_date": 1560436688, "post_id": 56575129, "comment_id": 99743861, "body": "wow, first answer and it worked! :-) Thank you. I was ignorant. I thought linker knows which one to pick for me. I was spoiled by Debian (my daily driver) which installed only &quot;the right version&quot;:"}], "tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": true, "score": 0, "last_activity_date": 1560409884, "creation_date": 1560409884, "answer_id": 56575129, "question_id": 56571745, "link": "https://stackoverflow.com/questions/56571745/mingw-w64-ld-exe-cannot-find-lboost-filesystem/56575129#56575129", "title": "\\mingw-w64\\ ... \\ld.exe: cannot find -lboost_filesystem", "body": "<p>I believe that your issue is caused by the complicated naming scheme of <code>boost</code> library files,<br>\nsee <a href=\"https://www.boost.org/doc/libs/1_70_0/more/getting_started/windows.html#library-naming\" rel=\"nofollow noreferrer\">Boost Getting Started on Windows: library naming</a>.</p>\n\n<p>In short, <code>boost</code> appends characters to library file names to specify (amongst other things):</p>\n\n<ul>\n<li>compiler version: <code>-mgw81</code>,</li>\n<li>multi-threading: <code>-mt</code>,</li>\n<li>machine architecture and address model: <code>-x64</code></li>\n<li>and boost version: <code>-1_70</code>.</li>\n</ul>\n\n<p>Therefore, <code>boost_filesystem</code> becomes: <code>boost_filesystem-mgw81-mt-x64-1_70</code> and <code>boost_system</code> becomes: <code>boost_system-mgw81-mt-x64-1_70</code>, so try:</p>\n\n<pre><code>gcc fs.cpp -o fs.exe -Lc:\\Boost\\lib -lboost_filesystem-mgw81-mt-x64-1_70 -lboost_system-mgw81-mt-x64-1_70\n</code></pre>\n\n<p>Note: build systems like <a href=\"https://cmake.org/\" rel=\"nofollow noreferrer\">cmake</a> simplify these issues, but they can introduce new ones, see: <a href=\"https://stackoverflow.com/questions/53943885/cmake-findboost-not-finding-boost-libraries-when-building-with-mingw-on-windows\">cmake FindBoost not finding Boost libraries when building with MinGW on Windows</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 11619539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b41bda2a77e7c499d1bc7bf891bce7?s=128&d=identicon&r=PG", "display_name": "komer", "link": "https://stackoverflow.com/users/11619539/komer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4825, "favorite_count": 0, "accepted_answer_id": 56575129, "answer_count": 1, "score": 2, "last_activity_date": 1560409884, "creation_date": 1560383936, "question_id": 56571745, "link": "https://stackoverflow.com/questions/56571745/mingw-w64-ld-exe-cannot-find-lboost-filesystem", "title": "\\mingw-w64\\ ... \\ld.exe: cannot find -lboost_filesystem", "body": "<p>I'm trying to compile simple c++ program with mingw on \"windows 7 64bit\" command prompt. Error I get is:</p>\n\n<pre><code>&gt;gcc fs.cpp -lboost_filesystem -lboost_system\nc:/Program Files/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lboost_filesystem\nc:/Program Files/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lboost_system\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>Maybe useful system variable information:</p>\n\n<pre><code>c:\\Boost\\lib&gt;echo %path%\nC:\\Boost\\boost-build\\bin;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Windows Live;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files (x86)\\Skype\\Phone\\;c:\\Program Files\\mingw-w64\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\mingw64\\bin\\;c:\\Boost\\lib\\\n\nc:\\Boost\\lib&gt;echo %library_path%\nc:\\Boost\\lib\n\nc:\\Boost\\lib&gt;echo %cplus_include_path%\nc:\\Boost\\include\\\n</code></pre>\n\n<p>and a content of boost/lib is:</p>\n\n<pre><code>c:\\Boost\\lib&gt;dir\n Volume in drive C is Acer\n Volume Serial Number is 62C5-4B7E\n\n Directory of c:\\Boost\\lib\n\n13.06.2019.  00:31    &lt;DIR&gt;          .\n13.06.2019.  00:31    &lt;DIR&gt;          ..\n13.06.2019.  00:28         5.608.426 libboost_filesystem-mgw81-mt-d-x32-1_70\n13.06.2019.  00:28         6.553.512 libboost_filesystem-mgw81-mt-d-x64-1_70\n13.06.2019.  00:28         3.713.979 libboost_filesystem-mgw81-mt-d-x64-1_70\n13.06.2019.  00:28            92.342 libboost_filesystem-mgw81-mt-d-x64-1_70\n13.06.2019.  00:28           344.104 libboost_filesystem-mgw81-mt-s-x32-1_70\n13.06.2019.  00:28           405.348 libboost_filesystem-mgw81-mt-s-x64-1_70\n13.06.2019.  00:28         5.608.426 libboost_filesystem-mgw81-mt-sd-x32-1_7\n13.06.2019.  00:28         6.553.512 libboost_filesystem-mgw81-mt-sd-x64-1_7\n13.06.2019.  00:28           344.104 libboost_filesystem-mgw81-mt-x32-1_70.a\n13.06.2019.  00:28           405.348 libboost_filesystem-mgw81-mt-x64-1_70.a\n13.06.2019.  00:28           239.395 libboost_filesystem-mgw81-mt-x64-1_70.d\n13.06.2019.  00:28            92.132 libboost_filesystem-mgw81-mt-x64-1_70.d\n13.06.2019.  00:28             2.822 libboost_system-mgw81-mt-d-x32-1_70.a\n13.06.2019.  00:28             3.118 libboost_system-mgw81-mt-d-x64-1_70.a\n13.06.2019.  00:28            49.550 libboost_system-mgw81-mt-d-x64-1_70.dll\n13.06.2019.  00:28             1.772 libboost_system-mgw81-mt-d-x64-1_70.dll\n13.06.2019.  00:28               730 libboost_system-mgw81-mt-s-x32-1_70.a\n13.06.2019.  00:28               924 libboost_system-mgw81-mt-s-x64-1_70.a\n13.06.2019.  00:28             2.822 libboost_system-mgw81-mt-sd-x32-1_70.a\n13.06.2019.  00:28             3.118 libboost_system-mgw81-mt-sd-x64-1_70.a\n13.06.2019.  00:28               730 libboost_system-mgw81-mt-x32-1_70.a\n13.06.2019.  00:28               924 libboost_system-mgw81-mt-x64-1_70.a\n13.06.2019.  00:28            47.834 libboost_system-mgw81-mt-x64-1_70.dll\n13.06.2019.  00:28             1.760 libboost_system-mgw81-mt-x64-1_70.dll.a\n</code></pre>\n\n<p>I've tried to include path manually with </p>\n\n<pre><code>gcc fs.cpp -o fs.exe -Lc:\\Boost\\lib -lboost_filesystem -lboost_system\n</code></pre>\n\n<p>or with</p>\n\n<pre><code>gcc fs.cpp -o fs.exe -L c:\\Boost\\lib -lboost_filesystem -lboost_system\n</code></pre>\n\n<p>or with</p>\n\n<pre><code>gcc fs.cpp -o fs.exe -L c:\\Boost\\lib -llibboost_filesystem -llibboost_system\n</code></pre>\n\n<p>and gotthe same output.</p>\n\n<p>To me it looks like a linker problem. But, I'm not experienced. Could this be a product of badly compiled library files?</p>\n\n<p>What options should I use when compiling c++ on Windows? Where did I go wrong?</p>\n"}, {"tags": ["c++", "winapi", "rust"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1560383906, "post_id": 56571553, "comment_id": 99722140, "body": "<code>_variant_t</code> is a c++ class so I suppose you must bind something to one of its constructor. Bindgen should be able to do it for you. How do you bind all this API so far ? Your question lack of detail."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1560384479, "post_id": 56571553, "comment_id": 99722236, "body": "<code>_variant_t</code> is just a C++ helper class that wraps a COM <code>VARIANT</code>, it automates memory management and reference counting for <code>VARIANT</code> values.  <code>_variant_t</code> doesn&#39;t exist in other languages, like Rust, so you will have to construct a <code>VARIANT</code> manually and populate it as needed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1560384496, "post_id": 56571553, "comment_id": 99722240, "body": "A COM <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/oaidl/ns-oaidl-tagvariant\" rel=\"nofollow noreferrer\"><code>VARIANT</code></a> is a tagged union, have a look at <a href=\"http://patshaughnessy.net/2018/3/15/how-rust-implements-tagged-unions\" rel=\"nofollow noreferrer\">How Rust Implements Tagged Unions</a> and <a href=\"https://tonyarcieri.com/a-quick-tour-of-rusts-type-system-part-1-sum-types-a-k-a-tagged-unions\" rel=\"nofollow noreferrer\">A quick tour of Rust\u2019s Type System Part 1: Sum Types (a.k.a. Tagged Unions)</a>"}, {"owner": {"reputation": 6319, "user_id": 647380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07709965ee03bbc0a25288dc62102114?s=128&d=identicon&r=PG&f=1", "display_name": "pocesar", "link": "https://stackoverflow.com/users/647380/pocesar"}, "edited": false, "score": 0, "creation_date": 1560462905, "post_id": 56571553, "comment_id": 99755685, "body": "to be completely clear: I&#39;m stuck and have not made any progress, there&#39;s no reproducible example because of this, and winapi::um must have <code>winuser</code> enabled in Cargo features.  <code>VARIANT_n1</code> is private and can&#39;t be used when using <code>VARIANT { n1: &#47;*...*&#47; }</code>."}, {"owner": {"reputation": 71, "user_id": 15413699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5694f9238be45aaa10774fb73b4eaa7c?s=128&d=identicon&r=PG&f=1", "display_name": "scrubjay55", "link": "https://stackoverflow.com/users/15413699/scrubjay55"}, "edited": false, "score": 0, "creation_date": 1617900778, "post_id": 56571553, "comment_id": 118445486, "body": "@pocesar did you ever find a solution? Im trying to create a scheduled task in windows with rust as well but no luck so far. Can you help?"}, {"owner": {"reputation": 1147, "user_id": 910227, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a4b3c15ceb1d27a05bd82954d1fb54c9?s=128&d=identicon&r=PG", "display_name": "Jannis Froese", "link": "https://stackoverflow.com/users/910227/jannis-froese"}, "reply_to_user": {"reputation": 71, "user_id": 15413699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5694f9238be45aaa10774fb73b4eaa7c?s=128&d=identicon&r=PG&f=1", "display_name": "scrubjay55", "link": "https://stackoverflow.com/users/15413699/scrubjay55"}, "edited": false, "score": 0, "creation_date": 1618944140, "post_id": 56571553, "comment_id": 118754734, "body": "@scrubjay55 if you&#39;re still stuck check out my new reply"}], "answers": [{"comments": [{"owner": {"reputation": 6319, "user_id": 647380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07709965ee03bbc0a25288dc62102114?s=128&d=identicon&r=PG&f=1", "display_name": "pocesar", "link": "https://stackoverflow.com/users/647380/pocesar"}, "edited": false, "score": 0, "creation_date": 1560488784, "post_id": 56591363, "comment_id": 99760452, "body": "<code>the trait &#39;std::default::Default&#39; is not implemented for &#39;*mut winapi::um::taskschd::ITaskService&#39;</code> and <code>the trait &#39;std::default::Default&#39; is not implemented for &#39;winapi::um::oaidl::VARIANT_n1&#39;</code>. while searching for those methods, it seems that they are defined in another external crate, called <code>oaidl</code> (that makes working with those variants less painful)"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1560523574, "post_id": 56591363, "comment_id": 99776835, "body": "But <code>_variant_t</code> is not an union. It&#39;s class or I miss something"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 6319, "user_id": 647380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07709965ee03bbc0a25288dc62102114?s=128&d=identicon&r=PG&f=1", "display_name": "pocesar", "link": "https://stackoverflow.com/users/647380/pocesar"}, "edited": false, "score": 0, "creation_date": 1560524030, "post_id": 56591363, "comment_id": 99777105, "body": "@pocesar <a href=\"https://docs.rs/winapi/0.3.7/winapi/um/oaidl/struct.VARIANT_n1.html#impl-Default\" rel=\"nofollow noreferrer\">Default</a> is implemented for VARIANT_N1."}, {"owner": {"reputation": 46065, "user_id": 234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463c0219a51a5d1fd08e1fa280811b57?s=128&d=identicon&r=PG", "display_name": "Francis Gagn&#233;", "link": "https://stackoverflow.com/users/234590/francis-gagn%c3%a9"}, "reply_to_user": {"reputation": 6319, "user_id": 647380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07709965ee03bbc0a25288dc62102114?s=128&d=identicon&r=PG&f=1", "display_name": "pocesar", "link": "https://stackoverflow.com/users/647380/pocesar"}, "edited": false, "score": 0, "creation_date": 1560567718, "post_id": 56591363, "comment_id": 99789837, "body": "@pocesar Make sure you&#39;re using winapi 0.3.7 or later. The <code>Default</code> implementations were added in 0.3.7. Use <code>cargo update</code> to update your dependencies."}], "tags": [], "owner": {"reputation": 46065, "user_id": 234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463c0219a51a5d1fd08e1fa280811b57?s=128&d=identicon&r=PG", "display_name": "Francis Gagn&#233;", "link": "https://stackoverflow.com/users/234590/francis-gagn%c3%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1582595947, "last_edit_date": 1582595947, "creation_date": 1560486356, "answer_id": 56591363, "question_id": 56571553, "link": "https://stackoverflow.com/questions/56571553/how-to-use-a-com-variant-in-rust-winapi-programming/56591363#56591363", "title": "How to use a COM VARIANT in Rust winapi programming?", "body": "<p>Initializing unions is explained in <a href=\"https://github.com/retep998/winapi-rs/blob/46aa861d606b21ded202a606b1351214ea899fa3/README.md#how-do-i-create-an-instance-of-a-union\" rel=\"nofollow noreferrer\"><code>winapi</code>'s README</a>:</p>\n\n<blockquote>\n  <h2>How do I create an instance of a union?</h2>\n  \n  <p>Use <code>std::mem::zeroed()</code> to create an instance of the union, and then\n  assign the value you want using one of the variant methods.</p>\n</blockquote>\n\n<p>For instance, for <a href=\"https://docs.rs/winapi/0.3.7/winapi/um/oaidl/struct.VARIANT_n1.html\" rel=\"nofollow noreferrer\"><code>VARIANT_n1</code></a>, the methods are <code>n2</code>, <code>n2_mut</code>, <code>decVal</code> and <code>decVal_mut</code>. You will naturally need to use a <code>_mut</code> method to assign a value.</p>\n\n<p>Note that, starting with winapi 0.3.7, you can also use <code>Default::default()</code> to obtain a zeroed union instead of using the unsafe <code>std::mem::zeroed()</code>. You need to enable the <code>impl-default</code> feature on the <code>winapi</code> crate for the <code>Default</code> trait to be implemented.</p>\n"}, {"tags": [], "owner": {"reputation": 1147, "user_id": 910227, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a4b3c15ceb1d27a05bd82954d1fb54c9?s=128&d=identicon&r=PG", "display_name": "Jannis Froese", "link": "https://stackoverflow.com/users/910227/jannis-froese"}, "is_accepted": false, "score": 0, "last_activity_date": 1618944077, "creation_date": 1618944077, "answer_id": 67184576, "question_id": 56571553, "link": "https://stackoverflow.com/questions/56571553/how-to-use-a-com-variant-in-rust-winapi-programming/67184576#67184576", "title": "How to use a COM VARIANT in Rust winapi programming?", "body": "<p>You can construct a variant with</p>\n<pre class=\"lang-rust prettyprint-override\"><code>use winapi::um::oaidl::VARIANT;\n\nfn doStuff() {\n  unsafe {\n    let mut variant: VARIANT = std::mem::zeroed();\n    // set values here\n  }\n}\n</code></pre>\n<p><code>variant.n1.n2().vt</code> contains the type (e.g. winapi::shared::wtypes::VT_BOOL or winapi::shared::wtypes::VT_EMPTY, <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wtypes/ne-wtypes-varenum\" rel=\"nofollow noreferrer\">msdn describes the possible values here</a>), the <code>variant.n1.n2().n3</code> union contains the value.</p>\n"}], "owner": {"reputation": 6319, "user_id": 647380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/07709965ee03bbc0a25288dc62102114?s=128&d=identicon&r=PG&f=1", "display_name": "pocesar", "link": "https://stackoverflow.com/users/647380/pocesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 56591363, "answer_count": 2, "score": 3, "last_activity_date": 1618944077, "creation_date": 1560381991, "last_edit_date": 1560464106, "question_id": 56571553, "link": "https://stackoverflow.com/questions/56571553/how-to-use-a-com-variant-in-rust-winapi-programming", "title": "How to use a COM VARIANT in Rust winapi programming?", "body": "<p>I'm trying to convert the <a href=\"https://technet.microsoft.com/pt-br/aa382113(v=vs.71)\" rel=\"nofollow noreferrer\">C++ COM code</a> for <code>TaskScheduler</code> to Rust and am stuck with the <code>VARIANT</code> argument of <code>ITaskService::Connect</code>:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>extern crate winapi;\nuse winapi::{\n    ctypes::c_void,\n    shared::{\n        guiddef::{GUID, REFCLSID, REFIID},\n        ntdef::{HRESULT, NULL},\n        rpcdce::{RPC_C_AUTHN_LEVEL_PKT_PRIVACY, RPC_C_IMP_LEVEL_IMPERSONATE},\n        winerror::FAILED,\n        wtypes::VARENUM,\n        wtypesbase::CLSCTX_INPROC_SERVER,\n    },\n    um::{\n        combaseapi::{CoCreateInstance, CoInitializeEx, CoInitializeSecurity, CoUninitialize},\n        oaidl,\n        objbase::COINIT_MULTITHREADED,\n        taskschd::{ITaskService, TaskScheduler},\n    },\n    Class, Interface,\n}; // 0.3.7\n\nfn main() {\n    //  Create an instance of the Task Service.\n    let mut p_service: *mut ITaskService = unsafe { std::mem::zeroed() };\n\n    let hr = unsafe {\n        CoCreateInstance(\n            &amp;TaskScheduler::uuidof(),\n            std::ptr::null_mut(),\n            CLSCTX_INPROC_SERVER,\n            &amp;ITaskService::uuidof(),\n            &amp;mut p_service as *mut *mut ITaskService as *mut *mut c_void,\n        )\n    };\n\n    // [...]\n    // //  Connect to the task service.\n    // let hr = pService-&gt;Connect(_variant_t(), _variant_t(),\n    //     _variant_t(), _variant_t());\n\n    let hr = unsafe {\n        (&amp;mut *p_service).Connect(\n            oaidl::VARIANT { /* VT_EMPTY HERE */ },\n            oaidl::VARIANT { /* VT_EMPTY HERE */ },\n            oaidl::VARIANT { /* VT_EMPTY HERE */ },\n            oaidl::VARIANT { /* VT_EMPTY HERE */ },\n        )\n    };\n}\n</code></pre>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/cpp/variant-t-variant-t?view=vs-2019#remarks\" rel=\"nofollow noreferrer\">The docs</a> say:</p>\n\n<blockquote>\n  <p><strong><code>_variant_t( )</code></strong> Constructs an empty <code>_variant_t</code> object, <code>VT_EMPTY</code>.</p>\n</blockquote>\n\n<p>I found no mention on how to use the variant as stated in the README:</p>\n\n<blockquote>\n  <p>Use <code>std::mem::zeroed()</code> to create an instance of the union, and then assign the value you want using one of the variant methods.</p>\n</blockquote>\n\n<p>When checking the docs for \"variant\", there's no <code>_variant_t</code> fn on the list, so not sure what it is called in Rust</p>\n\n<p>Errors </p>\n\n<pre><code>field `0` of struct `winapi::um::oaidl::VARIANT_n1` is private\n\nfield `0` is private\n</code></pre>\n\n<p>for </p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>  oaidl::VARIANT {\n    n1: oaidl::VARIANT_n1 {\n      0: [0, 0, 0]\n    }\n  }\n</code></pre>\n"}, {"tags": ["c#", "c++", ".net", "pinvoke", "unmanaged"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1560406224, "post_id": 56571410, "comment_id": 99726634, "body": "C++ string can&#39;t be used in a pinvoke. Use null terminated character arrays. As you need to keep the delegate alive so it doesn&#39;t get collected. Usual approach is to hold a reference in a static variable."}, {"owner": {"reputation": 55, "user_id": 5155266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf06791fb01d4eb399b5c1c97866893?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/5155266/davide"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1560413520, "post_id": 56571410, "comment_id": 99730180, "body": "Thank you very much @DavidHeffernan. I solved the problem. If you post the comment as an answer I will select it as the correct one."}], "answers": [{"comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1560414751, "post_id": 56576296, "comment_id": 99730856, "body": "Wrong CallingConvention on the delegate as well."}, {"owner": {"reputation": 55, "user_id": 5155266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf06791fb01d4eb399b5c1c97866893?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/5155266/davide"}, "edited": false, "score": 0, "creation_date": 1560423257, "post_id": 56576296, "comment_id": 99735559, "body": "Works like a charm!"}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 4, "last_activity_date": 1560416314, "last_edit_date": 1560416314, "creation_date": 1560414128, "answer_id": 56576296, "question_id": 56571410, "link": "https://stackoverflow.com/questions/56571410/c-delegate-callback-with-params-cause-accessviolation-when-calling-from-c-dll/56576296#56576296", "title": "C# delegate callback with params cause AccessViolation when calling from C++ DLL", "body": "<p>I've not looked at every detail of your code, but some commonly seen p/invoke issues just out immediately:</p>\n\n<ol>\n<li>You cannot use C++ strings as interop types. You should use null terminated character arrays on the C++ side. Obtain these using the <code>c_str()</code> method of <code>std::string</code>.</li>\n<li>The delegate likely has the wrong calling convention. The unmanaged code (probably) uses <code>cdecl</code> and so you need to use the <code>[UnmanagedFunctionPointer(CallingConvention.Cdecl)]</code> attribute when <a href=\"https://stackoverflow.com/a/5155224/505088\">declaring the delegate type in C#</a>.</li>\n<li>Your C# delegate is susceptible to being collected early (while your unmanaged code still holds a reference to it) because there are no managed references to it. Typically that would be solved by holding a reference to the delegate in a static variable in your C# code.</li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 5155266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf06791fb01d4eb399b5c1c97866893?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/5155266/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 56576296, "answer_count": 1, "score": 0, "last_activity_date": 1560416314, "creation_date": 1560380777, "question_id": 56571410, "link": "https://stackoverflow.com/questions/56571410/c-delegate-callback-with-params-cause-accessviolation-when-calling-from-c-dll", "title": "C# delegate callback with params cause AccessViolation when calling from C++ DLL", "body": "<p>I have an unmanaged C++ DLL and a .net application which communicate using P/Invoke  .\nI need to update a dictionary within the .net app from a C++ DLL.</p>\n\n<p>I tried to do that in the following way:</p>\n\n<pre><code>public delegate void MyDelegate(string address, string username);\n\n[DllImport(\"MyDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern void SaveMyDelegate(MyDelegate callback);\n\nprivate static SortedDictionary&lt;string, string&gt; dict = new SortedDictionary&lt;string, string&gt;();\n\npublic void save_delegate() {\n\n    SaveMyDelegate(delegate(string address, string username) {\n        if (username != \"\") {\n            dict.Add(address, username);\n        }\n     });\n }\n</code></pre>\n\n<p>On C++ side I have:</p>\n\n<pre><code>typedef void (*MANAGED_CALLBACK)(string user_address, string username);\n\n    extern \"C\" __declspec(dllexport) void SaveMyDelegate(MANAGED_CALLBACK callback);\n\n    MANAGED_CALLBACK my_callback;\n    void SaveMyDelegate(MANAGED_CALLBACK callback) {\n        my_callback = callback;\n    }\n\nextern \"C\" __declspec(dllexport) VOID start_collection();\nVOID start_collection() {\n    my_callback(\"test\", \"User\");\n}\n</code></pre>\n\n<p>On C# I do the following calls:</p>\n\n<pre><code>[DllImport(\"MyDLL.dll\")]\npublic static extern void start_collection();\n\nprivate void Button1_Click(object sender, EventArgs e) {\n    save_delegate();\n\n    start_collection();\n}\n</code></pre>\n\n<p>When I call <strong>start_collection</strong>() I get an <strong>AccessViolation</strong> exception.\nI tried to declare the delegate in the following way:</p>\n\n<pre><code>public delegate void MyDelegate(\n[MarshalAs(UnmanagedType.LPStr)]string address, \n[MarshalAs(UnmanagedType.LPStr)]string username);\n</code></pre>\n\n<p>I have also added this statement:</p>\n\n<pre><code>[UnmanagedFunctionPointer(CallingConvention.StdCall)]\npublic delegate void MyDelegate(...)\n</code></pre>\n"}, {"tags": ["c++", "clr"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560613928, "post_id": 56571402, "comment_id": 99798646, "body": "CComVariant(pAssembly.GetInterfacePtr()), probably."}], "owner": {"reputation": 1445, "user_id": 13677853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8109a798cab3a2c53568ee21cb8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "nop", "link": "https://stackoverflow.com/users/13677853/nop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560380743, "creation_date": 1560380743, "question_id": 56571402, "link": "https://stackoverflow.com/questions/56571402/convert-assembly-to-variant", "title": "Convert _Assembly to VARIANT", "body": "<p>I have a CLR hosting application that I'm trying to make it support WPF.</p>\n\n<p>I attempted to set a value of a field to <code>_Assembly</code> but the problem is that I have to pass a variable of type <code>VARIANT</code>.</p>\n\n<p>This is the C# code that I'm trying to convert to C++:</p>\n\n<pre><code>Assembly assembly = Assembly.Load(data);\n...\nfield.SetValue(null, assembly); // I'm attempting to do that in C++\n</code></pre>\n\n<p>Here is what I did:</p>\n\n<pre><code>_AssemblyPtr pAssembly = NULL;\n\n...\n\nhr = AppDomain-&gt;Load_3(sa, &amp;pAssembly);\n\n...\n\nCComVariant obj;\nBindingFlags bFlags = (BindingFlags)(BindingFlags_SetField | BindingFlags_NonPublic | BindingFlags_Static);\nhr = fieldInfo-&gt;SetValue(obj, CComVariant(pAssembly), bFlags, NULL, NULL);\n</code></pre>\n\n<p>It fails at <code>fieldInfo-&gt;SetValue</code> and more accurate at the 2nd argument which is supposed to be of type <code>VARIANT</code>. Error: <code>hr = E_INVALIDARG One or more arguments are invalid.</code></p>\n\n<p>If I set the second argument to <code>CComVariant(NULL)</code>, it doesn't fail but I need to put the <code>_Assembly</code> there.</p>\n\n<p>Any idea how I can deal with the problem?</p>\n"}, {"tags": ["c++", "windows", "mfc", "activex"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1560381074, "post_id": 56571382, "comment_id": 99721644, "body": "Why do you need the PID?"}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1560381190, "post_id": 56571382, "comment_id": 99721668, "body": "I want to control over the adobe process when it is displaying the pdf in active x control. For example, when the user right click the pdf in active x control, I can receive the event by the process id"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1560384734, "post_id": 56571382, "comment_id": 99722281, "body": "@beasone <code>LowLevelMouseProc</code> is a hook callback for <code>SetWindowsHookEx()</code>, which takes a <b>thread ID</b>, not a <b>process ID</b>.  In any case, your ActiveX control is embedded in the Adobe process, so look at things like <code>GetCurrentProcessId()</code> and <code>GetCurrentThreadId()</code>"}], "owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560381359, "creation_date": 1560380593, "last_edit_date": 1560381359, "question_id": 56571382, "link": "https://stackoverflow.com/questions/56571382/how-to-get-the-process-id-of-adobe-when-it-is-running-in-my-mfc-project", "title": "How to get the process id of adobe when it is running in my MFC project?", "body": "<p>I create a MFC project, this MFC project hosts an Adobe ActiveX control.</p>\n\n<p>When I start my MFC project, the adobe active control will launched the Adobe process under it.\n<a href=\"https://i.stack.imgur.com/j9LWj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j9LWj.png\" alt=\"enter image description here\"></a>\nThis is my task manager under windows 10, you can clearly see that Adobe process is launched by my project.\nBut how can I get the process id of the Adobe process which is launched by my project ?</p>\n\n<p>I am using the adobe active x control sample code from this link :\n<a href=\"https://www.codeproject.com/Articles/9537/Adobe-ActiveX-Control-with-MFC\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/9537/Adobe-ActiveX-Control-with-MFC</a> </p>\n\n<p>class CAcroAXDocShim\nThe reason why I need to get the pid is that I need to capture the mouse event over the pdf when it is displayed in active x control.\nIf I use the following function:</p>\n\n<pre><code>LowLevelMouseProc callback function  \n</code></pre>\n\n<p>I need to pass the process id of adobe into it. If I passed 0 as the id, then it will capture all mouse input event for whole system.</p>\n"}, {"tags": ["python", "c++", "multithreading", "tensorflow"], "comments": [{"owner": {"reputation": 534, "user_id": 8550160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6bbfb0b370c147dd9c1ad1c6320e586?s=128&d=identicon&r=PG&f=1", "display_name": "jman", "link": "https://stackoverflow.com/users/8550160/jman"}, "edited": false, "score": 0, "creation_date": 1560391718, "post_id": 56571368, "comment_id": 99723407, "body": "Unless you specify the resources Tensorflow will use multi-threading when available.  Also, why are you periodically training?  Might be best to export the model and use infrencers in the C++ app."}, {"owner": {"reputation": 413, "user_id": 4582142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GYIY6.jpg?s=128&g=1", "display_name": "mauriii", "link": "https://stackoverflow.com/users/4582142/mauriii"}, "reply_to_user": {"reputation": 534, "user_id": 8550160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6bbfb0b370c147dd9c1ad1c6320e586?s=128&d=identicon&r=PG&f=1", "display_name": "jman", "link": "https://stackoverflow.com/users/8550160/jman"}, "edited": false, "score": 0, "creation_date": 1560395662, "post_id": 56571368, "comment_id": 99724114, "body": "@jman, Sorry, no not periodically training, just predicting and evaluating. And I know TF will use multi-threading, that&#39;s not really the problem.."}], "owner": {"reputation": 413, "user_id": 4582142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GYIY6.jpg?s=128&g=1", "display_name": "mauriii", "link": "https://stackoverflow.com/users/4582142/mauriii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560534260, "creation_date": 1560380507, "last_edit_date": 1560534260, "question_id": 56571368, "link": "https://stackoverflow.com/questions/56571368/embedding-tensorflow-python-program-in-c", "title": "Embedding TensorFlow Python program in C++", "body": "<p>I'm stressing out and really need help at this point. I have a Python3.6 program that imports csv, tensorflow, numpy, and \"from tensorflow import keras\". This program (which I can't post) uses Estimators and its  eval and predict methods, which  makes use of multiple threads.</p>\n\n<p>I'm trying to embed Python into a C++ program that would then call the mentioned script multiple times at different points in the single threaded code. I got the Python program to run, but the problem comes when calling <code>Py_Finalize();</code>, which is causing this error:</p>\n\n<blockquote>\n  <p>Exception ignored in: Traceback (most recent call last):\n    File \"/usr/lib/python3.6/threading.py\", line 1289, in _shutdown\n      assert tlock.locked()</p>\n  \n  <p>SystemError: (built-in method locked of _thread.lock object at 0x7fa340764f08) returned a result with an error set</p>\n</blockquote>\n\n<p>Stepping through the code, I noticed when <code>PyRun_File()</code> returned, my single threaded C++ program added ~10 threads related to TensorFlow. Here's all the embeded python logic in my C++ code with commented out code of things I've tried/messed around with.</p>\n\n<pre><code>void run_python_script(string mode, string model, std::vector&lt;int&gt;* y_test = nullptr) {\nconst char* SCRIPT_PATH = \"../PATH\";\n\n/* Setup embedded Python*/\nPy_SetProgramName(Py_DecodeLocale(SCRIPT_PATH, NULL));\n\nPy_Initialize();\nPyEval_InitThreads();\n//  Py_DECREF(PyImport_ImportModule(\"tensorflow\"));\n//  PyThreadState* threadState = PyEval_SaveThread();\n//  PyGILState_STATE gstate = PyGILState_Ensure();\n//  PyObject* pGlobals = PyDict_New();\n//  PyDict_SetItemString(pGlobals, \"__builtins__\", PyEval_GetBuiltins());\n\nPyObject* m_pMainModule = PyImport_AddModule(\"__main__\");\nPyObject* pGlobals = PyModule_GetDict(m_pMainModule);\n\nconst wchar_t *script_args[] = { L\"REMOVED FROM SNIPPET\", NULL };\nconst wchar_t **_argv = script_args;\nint _argc = sizeof(script_args) / sizeof(script_args[0]) - 1;\nPySys_SetArgv(_argc, const_cast&lt;wchar_t **&gt;(_argv));\n\nFILE *file = _Py_fopen(SCRIPT_PATH, \"r+\");\nif (file != NULL) {\n    cout &lt;&lt; \"Running script...\" &lt;&lt; endl;\n    PyRun_File(file, SCRIPT_PATH, Py_file_input, pGlobals, pGlobals);\n    assert(!PyErr_Occurred());\n} else\n    cerr &lt;&lt; \"Couldn't find a python script to run\";\nfclose(file);\n//  PyGILState_Release(gstate);\n//  PyEval_RestoreThread(threadState);\nPy_Finalize();      //@TODO WHY DOES PROGRAM CRASH HERE ON SCRIPT COMPLETION\n/* End embedded Python*/\ncout &lt;&lt; \"Script and file closed.\" &lt;&lt; endl;\n</code></pre>\n\n<p>Thanks for the help! :)</p>\n"}, {"tags": ["c++", "protocol-buffers", "google-protocol-buffer"], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 5063632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696cd131d231e50680a8c1c256911522?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky Avina", "link": "https://stackoverflow.com/users/5063632/ricky-avina"}, "edited": false, "score": 0, "creation_date": 1560443087, "post_id": 56573413, "comment_id": 99747596, "body": "When I say reflection, I mean the Google Protocol Buffer Reflection APIs (<a href=\"https://developers.google.com/protocol-buffers/docs/reference/csharp/namespace/google/protobuf/reflection\" rel=\"nofollow noreferrer\">developers.google.com/protocol-buffers/docs/reference/cshar&zwnj;&#8203;p/&hellip;</a>) for grabbing messages from a descriptor pool and getting fields. Not looking for a native C++ solution."}], "tags": [], "owner": {"reputation": 620, "user_id": 8924129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc041e5ba3467df99d37319628ed9a6?s=128&d=identicon&r=PG&f=1", "display_name": "Bar Stool", "link": "https://stackoverflow.com/users/8924129/bar-stool"}, "is_accepted": false, "score": 0, "last_activity_date": 1560400398, "creation_date": 1560400398, "answer_id": 56573413, "question_id": 56571289, "link": "https://stackoverflow.com/questions/56571289/get-enum-values-using-reflection-google-protobuf/56573413#56573413", "title": "Get enum values using reflection google protobuf", "body": "<p>Do you mean you want to be able to do what <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#EnumDescriptor\" rel=\"nofollow noreferrer\">EnumDescriptor</a> does, without generating \"Reflection code/data\" at compile time to do so? I do not think there is a way to do this. Its a bit confusing what you mean by <strong>must use Reflection</strong>. Really, <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#EnumDescriptor\" rel=\"nofollow noreferrer\">EnumDescriptor</a> is using the C++ version of reflection. </p>\n\n<p>Reflection by default is not available in c++. So if you want it, you have to write your owner parser (like protobuf) or write some magical macro/template code (like this  <a href=\"https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application\">SO answer</a>) to generate the needed data for reflection. You just cant use reflection, you need the metadata about the class's/enums.  </p>\n\n<p>Perhaps I could add more if you clarify what you need to do and why?</p>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 5063632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696cd131d231e50680a8c1c256911522?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky Avina", "link": "https://stackoverflow.com/users/5063632/ricky-avina"}, "is_accepted": true, "score": 1, "last_activity_date": 1560449711, "creation_date": 1560449711, "answer_id": 56586395, "question_id": 56571289, "link": "https://stackoverflow.com/questions/56571289/get-enum-values-using-reflection-google-protobuf/56586395#56586395", "title": "Get enum values using reflection google protobuf", "body": "<p>What I as looking for was this:</p>\n\n<p><code>const EnumDescriptor* enum_desc = Pool-&gt;FindEnumTypeByName(custom_type);</code></p>\n\n<p>Where <code>Pool</code> is a <code>google::protobuf::DescripterPool</code> representing the definitions or all the message types and enum described by your protofiles. Once you have the <code>EnumDescriptor</code>, then you can use your reflection instance to say <code>reflection-&gt;Getint32()</code> (or whatever other type you expect) and say</p>\n\n<pre><code>const EnumValueDescriptor* enum_value_desc = enum_desc-&gt;FindValueByNumber(value);\n</code></pre>\n\n<p>This is give you the value of your enum. </p>\n"}], "owner": {"reputation": 689, "user_id": 5063632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696cd131d231e50680a8c1c256911522?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky Avina", "link": "https://stackoverflow.com/users/5063632/ricky-avina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 56586395, "answer_count": 2, "score": 1, "last_activity_date": 1560449711, "creation_date": 1560379751, "last_edit_date": 1560446877, "question_id": 56571289, "link": "https://stackoverflow.com/questions/56571289/get-enum-values-using-reflection-google-protobuf", "title": "Get enum values using reflection google protobuf", "body": "<p>Support I have an enum in a <code>.proto</code> file such as:</p>\n\n<pre><code>enum My_Types\n{\n  my_types_a = 0;\n\n  my_types_b = 1;\n\n  my_types_c = 2;\n\n}\n</code></pre>\n\n<p>I want to generate an <code>EnumDescriptor</code> so that I can can reference values from this enum, but I must use the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/csharp/namespace/google/protobuf/reflection\" rel=\"nofollow noreferrer\">Google Reflection APIs</a> . When using the protobuf compiled version of the .proto file, I would be able to say <code>My_Types_descriptor()</code> to get the <code>EnumDescriptor</code>, but how would I do this using reflection? The same would apply for <code>EnumValueDescriptor</code> which can describe a particular enum constant. </p>\n\n<p>Given a <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#DescriptorPool\" rel=\"nofollow noreferrer\">DescriptorPool</a>, how can I use reflection to achieve this? I believe <a href=\"https://developers.google.com/protocol-buffers/docs/reference/csharp/class/google/protobuf/reflection/enum-descriptor\" rel=\"nofollow noreferrer\">this API</a> could help, but I do not know how to use it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1560379845, "post_id": 56571272, "comment_id": 99721387, "body": "<code>Drow</code> or <code>Draw</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1560379874, "post_id": 56571272, "comment_id": 99721394, "body": "Are you sure that <code>VertexArray</code>, <code>IndexBuffer</code> and <code>Shader</code> are all defined?"}, {"owner": {"reputation": 76, "user_id": 9351021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbead6dd220e360541b70acb254ba434?s=128&d=identicon&r=PG&f=1", "display_name": "rafah mnjd", "link": "https://stackoverflow.com/users/9351021/rafah-mnjd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1560380534, "post_id": 56571272, "comment_id": 99721535, "body": "yes,These are classes that I have previously created @ tadman"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 3, "creation_date": 1560380755, "post_id": 56571272, "comment_id": 99721580, "body": "It might be that either your <code>VertexArray</code>, <code>IndexBuffer</code> or <code>Shader</code> header files are including this file and you have circular dependencies. Since you&#39;re only using references, you can just forward declare these types."}, {"owner": {"reputation": 76, "user_id": 9351021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbead6dd220e360541b70acb254ba434?s=128&d=identicon&r=PG&f=1", "display_name": "rafah mnjd", "link": "https://stackoverflow.com/users/9351021/rafah-mnjd"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1560381180, "post_id": 56571272, "comment_id": 99721664, "body": "How can I advertise these types? Can you explain it? I tried to do this <code>#include &lt;GL\\glew.h&gt; class Shader; class VertexArray; class IndexBuffer;</code> instead of include them but it did not make a difference @Tas"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 1, "creation_date": 1560381225, "post_id": 56571272, "comment_id": 99721678, "body": "BTW, you don&#39;t have to include headers in this case. You can use forward declaration and include headers to cpp file. It&#39;ll reduce headers dependency."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1560381243, "post_id": 56571272, "comment_id": 99721680, "body": "Yep that looks fine, assuming those classes were declare with <code>class</code> and not <code>struct</code>. Once forward declared you can remove the <code>#include &lt;Shader.h&gt;</code> etc"}, {"owner": {"reputation": 76, "user_id": 9351021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbead6dd220e360541b70acb254ba434?s=128&d=identicon&r=PG&f=1", "display_name": "rafah mnjd", "link": "https://stackoverflow.com/users/9351021/rafah-mnjd"}, "edited": false, "score": 0, "creation_date": 1560382368, "post_id": 56571272, "comment_id": 99721884, "body": "Thank you all for your help, it has come back to work again  ^__^"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1560382408, "post_id": 56571272, "comment_id": 99721892, "body": "If you can qualify what you did to fix it as a self-answer that&#39;d help explain better to other people in the same jam, and possibly even yourself in the future."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 9351021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbead6dd220e360541b70acb254ba434?s=128&d=identicon&r=PG&f=1", "display_name": "rafah mnjd", "link": "https://stackoverflow.com/users/9351021/rafah-mnjd"}, "is_accepted": true, "score": 1, "last_activity_date": 1560385130, "creation_date": 1560385130, "answer_id": 56571858, "question_id": 56571272, "link": "https://stackoverflow.com/questions/56571272/why-do-i-get-this-error-c2143-syntax-error-missing-before/56571858#56571858", "title": "Why do I get this error : C2143 syntax error: missing &#39;,&#39; before &#39;&amp;&#39;?", "body": "<p>the problem was that  VertexArray, IndexBuffer or Shader header files were including Rendered.h file so I had circular dependencies like this :</p>\n\n<p>Renderer.h </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include\"Shader.h\"\n#include\"VertexBuffer.h\"\n#include\"IndexBuffer.h\"\n\nclass Renderer{\npublic:\n// some code\n    void Drow(const VertexArray&amp; va, const IndexBuffer&amp; ib, const Shader&amp; shader)const;\n}\n</code></pre>\n\n<p>and Shader.h ,VertexBuffer.h,IndexBuffer.h files have this code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include\"Renderer.h\"\nclass className{\n//  code\n}\n</code></pre>\n\n<p>so I used the forward declaration and included the headers to cpp file and files have become this way\nRenderer.h </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\n#include &lt;GL\\glew.h&gt;\n\nclass Shader.h;\nclass VertexBuffer.h;\nclass IndexBuffer.h;\n\nclass Renderer{\n\npublic:\n\n//  code\n    void Drow(const VertexArray&amp; va, const IndexBuffer&amp; ib, const Shader&amp; shader)const;\n}\n</code></pre>\n\n<p>Renderer.cpp </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"Renderer.h\"\n#include&lt;iostream&gt;\n\n#include\"Shader.h\"\n#include\"VertexArray.h\"\n#include\"IndexBuffer.h\"\n\n// the rest of code\n</code></pre>\n\n<p>and Shader.h ,VertexBuffer.h,IndexBuffer.h files have this code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//still have\n#include \"Renderer.h\"\nclass className{\n//  code\n}\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 9351021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbead6dd220e360541b70acb254ba434?s=128&d=identicon&r=PG&f=1", "display_name": "rafah mnjd", "link": "https://stackoverflow.com/users/9351021/rafah-mnjd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 56571858, "answer_count": 1, "score": 0, "last_activity_date": 1560385130, "creation_date": 1560379639, "question_id": 56571272, "link": "https://stackoverflow.com/questions/56571272/why-do-i-get-this-error-c2143-syntax-error-missing-before", "title": "Why do I get this error : C2143 syntax error: missing &#39;,&#39; before &#39;&amp;&#39;?", "body": "<p>Everything was going well until I added the drow function into Renderer.h file</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Drow(const VertexArray&amp; va, const IndexBuffer&amp; ib, const Shader&amp; shader)const;\n</code></pre>\n\n<p>Renderer.h :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;GL\\glew.h&gt;\n#include\"Shader.h\"\n#include\"VertexArray.h\"\n#include\"IndexBuffer.h\"\n\n\n#define ASSERT(x) if(!(x))__debugbreak();\n#define GLCall(x) GLClearError();\\\n    x;\\\n    ASSERT(GLlogCall(#x, __FILE__, __LINE__))\n\n/*function to clear all last errors in opengl*/\nvoid GLClearError();\n\n/*function to print all errors */\nbool GLlogCall(const char* function, const char* file, int line);\n\nclass Renderer {\npublic:\n    void clear()const;\n    void Drow(const VertexArray&amp; va, const IndexBuffer&amp; ib, const Shader&amp; shader)const;\n\n};\n</code></pre>\n\n<p>When I try to build it I get this error in visual studio 2015 :</p>\n\n<pre><code>Error   C2143   syntax error: missing ',' before '&amp;'    \n\n</code></pre>\n\n<p>and this one </p>\n\n<pre><code>Error   C4430   missing type specifier - int assumed. Note: C++ does not support default-int        \n</code></pre>\n\n<p>I could not figure out why !</p>\n"}, {"tags": ["c++", "algorithm"], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4942129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8321bb2448594413dfd7e52f29ae9a46?s=128&d=identicon&r=PG&f=1", "display_name": "luizfls", "link": "https://stackoverflow.com/users/4942129/luizfls"}, "edited": false, "score": 0, "creation_date": 1617903667, "post_id": 56571298, "comment_id": 118446679, "body": "Just to be clear, <code>std::list::remove</code> and <code>std::list::remove_if</code> are still O(n)"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 366, "user_id": 4942129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8321bb2448594413dfd7e52f29ae9a46?s=128&d=identicon&r=PG&f=1", "display_name": "luizfls", "link": "https://stackoverflow.com/users/4942129/luizfls"}, "edited": false, "score": 1, "creation_date": 1617913595, "post_id": 56571298, "comment_id": 118450625, "body": "@luizfls What I was trying to say is that all member-function algorithms of <code>std::list</code> (even the ones you mentioned) take advantage of the fact that <code>std::list</code> allows O(1) insertion and removing. The algorithms themselves may not have O(1) complexity but that&#39;s irrelevant."}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 2, "last_activity_date": 1560381667, "last_edit_date": 1560381667, "creation_date": 1560379857, "answer_id": 56571298, "question_id": 56571235, "link": "https://stackoverflow.com/questions/56571235/why-does-stdlist-have-remove-and-remove-if-functions/56571298#56571298", "title": "Why does std::list have remove and remove_if functions", "body": "<p>The member functions in this case are more efficient and should be preferred over the more generic ones in <code>&lt;algorithm&gt;</code>, even though the generic functions do work on <code>std::list</code>.<br>\nThe reason is <code>std::list</code> allows O(1) complexity removing and insertion of a single element anywhere, and the member functions take advantage of that. </p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 4, "last_activity_date": 1560380255, "creation_date": 1560380255, "answer_id": 56571339, "question_id": 56571235, "link": "https://stackoverflow.com/questions/56571235/why-does-stdlist-have-remove-and-remove-if-functions/56571339#56571339", "title": "Why does std::list have remove and remove_if functions", "body": "<p>That's because given the nature of <code>std::list</code> (or more precisely - the likely implementation forced by the standard), standard algorithms like <code>std::remove</code> and <code>std::remove_if</code> are inefficient when used on it.</p>\n\n<p><code>std::list</code>'s implementation has to meet some requirements, which essentially force it to be node-based, linked with pointers structure.</p>\n\n<p>This very implementation has its cons. For example, it does not allow for random-access iterators, thus <code>std::sort</code> will simply not work for it, since it <em>requires</em> random-access. This is the extreme case. There are efficient algorithms which do work with the specific nature of <code>std::list</code> likely implementation and they are used in the member <code>std::list::sort</code>. While <code>std::sort</code> <em>could</em> use the same implementation, other scenarious would likely suffer a performance loss. </p>\n\n<p>The less extreme case is the <code>remove</code> case. Standard <code>std::remove</code>, paired with <code>erase</code> member function (erase-remove idiom) is a great way of dealing with removing elements... unless the internal implementation makes those operations costly. On <code>std::list</code>, <code>std::remove</code> paired with naive call to <code>erase</code> will require <code>O(n)</code> (where <code>n</code> is equal to the list's <code>size</code>) operations on average. This can be drastically simplified by taking advantage of the internal implementation (in this case - pointer manipulation in the likely implementation). If you have direct access to the element you wish to remove, this operation becomes <code>O(1)</code>.</p>\n\n<p>So - what's the thing about <code>std::find</code> and <code>std::find_if</code>? The thing is that there are no alternatives for <code>std::list</code> that would benefit from its internal implementation. There <em>could</em> be a member <code>find</code> and <code>find_if</code>, but they would be pretty much identical to their <code>&lt;algorithm&gt;</code> versions, thus there is no need to introduce them.</p>\n"}, {"tags": [], "owner": {"reputation": 2376, "user_id": 5343439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c855ea8e4c6ce40243ca96f30e893d18?s=128&d=identicon&r=PG&f=1", "display_name": "Kit.", "link": "https://stackoverflow.com/users/5343439/kit"}, "is_accepted": true, "score": 3, "last_activity_date": 1560383561, "last_edit_date": 1560383561, "creation_date": 1560380706, "answer_id": 56571398, "question_id": 56571235, "link": "https://stackoverflow.com/questions/56571235/why-does-stdlist-have-remove-and-remove-if-functions/56571398#56571398", "title": "Why does std::list have remove and remove_if functions", "body": "<p>First of all, they have different semantics. <code>std::list::remove_if</code> erases the removed elements, and <code>std::remove_if</code> doesn't. <code>std::remove_if</code> also requires the container elements to be MoveAssignable, while <code>std::list::remove_if</code> only requires them to be Erasable.</p>\n\n<p>There is actually no <em>complexity</em> differences between both (they both are O(n)), but <code>std::remove_if</code> could be about two times slower because of the need to do list traversal using two independent pointers instead of just one - and list traversal on most modern CPUs is a quite expensive operation. If the move operation for the container element type is expensive, this can additionally slow down <code>std::remove_if</code>.</p>\n"}], "owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 56571398, "answer_count": 3, "score": 4, "last_activity_date": 1560383561, "creation_date": 1560379304, "question_id": 56571235, "link": "https://stackoverflow.com/questions/56571235/why-does-stdlist-have-remove-and-remove-if-functions", "title": "Why does std::list have remove and remove_if functions", "body": "<p>Why does std::list have remove and remove_if functions? That seems to duplicate behavior with the algorithm functions of the same name. If remove and remove_if make sense, why not find and find_if?</p>\n"}, {"tags": ["c++", "segmentation-fault", "ada"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1560379880, "post_id": 56571231, "comment_id": 99721396, "body": "What&#39;s the point of that try/catch?"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1560381440, "post_id": 56571231, "comment_id": 99721717, "body": "&quot;<i>As with the C++ code, I want the Ada code to result in &quot;terminated by signal SIGSEGV&quot;</i>&quot; - why? The C++ code is neither required not particularly expected to throw the SIGSEGV. You&#39;re just invoking undefined behaviour and I have absolutely no idea what is the purpose of your <code>try-catch</code>. It will not catch the exception of dereferencing the null pointer, because there is no such exception. It&#39;s undefined behaviour, once again."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1560381658, "post_id": 56571231, "comment_id": 99721762, "body": "By the way - what&#39;s the question..?"}, {"owner": {"reputation": 595, "user_id": 3633054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2da0ead0133d4d0819cfe0de5171c38f?s=128&d=identicon&r=PG&f=1", "display_name": "jski", "link": "https://stackoverflow.com/users/3633054/jski"}, "edited": false, "score": 1, "creation_date": 1560399996, "post_id": 56571231, "comment_id": 99724881, "body": "You\u2019ve made my point. In interviews I\u2019ve asked the result of that C++ code to dozens of candidates and most tell me it\u2019s the cout print. They\u2019ve memorized every detail they can about that bloated beast, C++, and don\u2019t understand basic comp sci. They think an OS signal will be caught by an C++ exception handler."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1560674942, "post_id": 56571231, "comment_id": 99808473, "body": "It really depends on which architecture you are running the C++ code in.  On the older HPUX and IBM XLC compilers, assignment to NULL is allowed and you will not get an exception."}, {"owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "edited": false, "score": 0, "creation_date": 1561725572, "post_id": 56571231, "comment_id": 100168177, "body": "@jski As you now have two valid answers, would you mind choose one as accepted and close the question ?"}], "answers": [{"comments": [{"owner": {"reputation": 2330, "user_id": 7237062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/z4Nky.jpg?s=128&g=1", "display_name": "LoneWanderer", "link": "https://stackoverflow.com/users/7237062/lonewanderer"}, "edited": false, "score": 1, "creation_date": 1562493562, "post_id": 56575838, "comment_id": 100384693, "body": "To me, this is why Ada is way ahead of most languages for years, here you see : 1- \u201cpointers\u201d explicit called \u2019access\u2019 types (you can\u2019t \u2018++\u2019; BTW think of  \u2019access constant\u2019, or even the \u2019not null access\u2019, or combinations), 2- with a clear wording to handle its content (\u2018.all\u2019), 3- clear warning/error at compile time (99.9%). This kind of exercises enlightens one of the reasons Ada language exists in the first place: get rid of cryptic dark magic C/C++/exotic language stuff that needs complex coding rules, code checkers, and insane expertise/maintenance."}], "tags": [], "owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "is_accepted": false, "score": 6, "last_activity_date": 1560412552, "creation_date": 1560412552, "answer_id": 56575838, "question_id": 56571231, "link": "https://stackoverflow.com/questions/56571231/c-to-ada-with-pointers-and-exceptions/56575838#56575838", "title": "C++ to Ada with pointers and exceptions", "body": "<p>The corresponding code in Ada would be something like</p>\n\n<pre class=\"lang-ada prettyprint-override\"><code>with Ada.Text_IO; use Ada.Text_IO;\n\nprocedure SigSegV is\n   type Int_Ptr is access Integer;\n\n   W : Int_Ptr := null;\nbegin\n   W.all := 3;\nexception\n   when others =&gt;\n      Put_Line (\"default exception\");\nend SigSegV;\n</code></pre>\n\n<p>But it doesn't trigger a SIGSEGV signal and you get the message as expected.\nMoreover, the compiler already warned you :</p>\n\n<pre><code>sigsegv.adb:8:04: warning: null value not allowed here\nsigsegv.adb:8:04: warning: \"Constraint_Error\" will be raised at run time\n</code></pre>\n\n<p>So I am not sure that you can get the same behaviour than in C++ with Ada code... Apart from calling C++ from Ada :D</p>\n"}, {"comments": [{"owner": {"reputation": 1409, "user_id": 1677089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iohnm.jpg?s=128&g=1", "display_name": "Fr&#233;d&#233;ric Praca", "link": "https://stackoverflow.com/users/1677089/fr%c3%a9d%c3%a9ric-praca"}, "edited": false, "score": 0, "creation_date": 1561725412, "post_id": 56749011, "comment_id": 100168089, "body": "Love this one as it shows how weird it can be to mess up with pointers in Ada :D"}], "tags": [], "owner": {"reputation": 570, "user_id": 1400079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b808b05efc6c36bfbd6f6cca2e615f7?s=128&d=identicon&r=PG", "display_name": "OCTAGRAM", "link": "https://stackoverflow.com/users/1400079/octagram"}, "is_accepted": false, "score": 2, "last_activity_date": 1561448138, "creation_date": 1561448138, "answer_id": 56749011, "question_id": 56571231, "link": "https://stackoverflow.com/questions/56571231/c-to-ada-with-pointers-and-exceptions/56749011#56749011", "title": "C++ to Ada with pointers and exceptions", "body": "<pre class=\"lang-ada prettyprint-override\"><code>with Ada.Wide_Wide_Text_IO; use Ada.Wide_Wide_Text_IO;\nwith System;\n\nprocedure SigSegV is\n   W : Integer with Import, Address =&gt; System.Null_Address;\nbegin\n   W := 3;\nexception\n   when others =&gt;\n      Put_Line (\"default exception\");\nend SigSegV;\n</code></pre>\n\n<p>SIGSEGV is converted to Standard.Storage_Error</p>\n"}, {"tags": [], "owner": {"reputation": 595, "user_id": 3633054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2da0ead0133d4d0819cfe0de5171c38f?s=128&d=identicon&r=PG&f=1", "display_name": "jski", "link": "https://stackoverflow.com/users/3633054/jski"}, "is_accepted": false, "score": 1, "last_activity_date": 1562613652, "last_edit_date": 1562613652, "creation_date": 1562599417, "answer_id": 56938105, "question_id": 56571231, "link": "https://stackoverflow.com/questions/56571231/c-to-ada-with-pointers-and-exceptions/56938105#56938105", "title": "C++ to Ada with pointers and exceptions", "body": "<p>Having spent years working with C++ and only just recently Ada, I believe if given a choice of a plane with its avionics written in Ada or one with its avionics written C++, I'd jump on the Ada plane. I've watched C++ grow with every release of a new standard ever more complex and, consequently, ever more unmanageable. </p>\n\n<p>Ada is simple (compared to C++) and hence, much easier to manage. I'm not sure what C++ advantages exist vs Ada? None is the obvious answer.</p>\n\n<p>It's a shame the DoD completely mismanaged Ada when it was first introduced. If they'd only paid Borland to develop a \"Turbo Ada\" and then given it away.</p>\n"}], "owner": {"reputation": 595, "user_id": 3633054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2da0ead0133d4d0819cfe0de5171c38f?s=128&d=identicon&r=PG&f=1", "display_name": "jski", "link": "https://stackoverflow.com/users/3633054/jski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1562613652, "creation_date": 1560379229, "question_id": 56571231, "link": "https://stackoverflow.com/questions/56571231/c-to-ada-with-pointers-and-exceptions", "title": "C++ to Ada with pointers and exceptions", "body": "<p>I'm interviewing potential software engineering candidates and would like a translation into Ada of this piece of C++ code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n  int *W = NULL;\n  try { *W = 3; }\n  catch (...) { std::cout &lt;&lt; \"default exception\"; }\n}\n</code></pre>\n\n<p>As with the C++ code, I want the Ada code to result in \"terminated by signal SIGSEGV\".</p>\n\n<p>BTW, I'm using the latest GNAT (GNAT 9.1.1 20190503 (Red Hat 9.1.1-1)\n)</p>\n"}, {"tags": ["c++", "opencv", "dlib"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1560376901, "post_id": 56570804, "comment_id": 99720679, "body": "And you built your program with what compiler options?  Giving us timings means nothing if you are running an unoptimized build."}, {"owner": {"reputation": 63, "user_id": 10674763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EZL8j.jpg?s=128&g=1", "display_name": "ExsaNik", "link": "https://stackoverflow.com/users/10674763/exsanik"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1560378405, "post_id": 56570804, "comment_id": 99721063, "body": "I am sorry, I haven&#39;t thought about that. I have replaced debug library version with release version and now it take about 1.5 sec to recognize, thanks"}], "owner": {"reputation": 63, "user_id": 10674763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EZL8j.jpg?s=128&g=1", "display_name": "ExsaNik", "link": "https://stackoverflow.com/users/10674763/exsanik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560376065, "creation_date": 1560376065, "question_id": 56570804, "link": "https://stackoverflow.com/questions/56570804/too-slow-face-recognition-via-dlib", "title": "Too slow face recognition via dlib", "body": "<p>I am using this OpenCV exapmle <a href=\"https://github.com/opencv/opencv/blob/3.4.0/samples/dnn/resnet_ssd_face.cpp\" rel=\"nofollow noreferrer\">for face detection</a>. And then I am using <a href=\"http://dlib.net/dnn_face_recognition_ex.cpp.html\" rel=\"nofollow noreferrer\">this dlib example</a> for face recognition. First step is to detect face with OpenCV and save detected rectangular in jpg. Also I do the same for the second image. After that I load this faces to dlib model and it tries to recognize if there the same person. Everything is working and even correct but it takes about 1 min 30 sec on my i7 8550U and 16gb ram to recognize faces. So to my mind I am doing smth wrong.  There is some code how I try to compare faces:</p>\n\n<pre><code>anet_type dlibNet;\ndeserialize(\"dlib_face_recognition_resnet_model_v1.dat\") &gt;&gt; dlibNet;\n...\ncv::Mat img1 = cv::imread(\"img1.jpg\");\ncv::Mat img2 = cv::imread(\"img2.jpg\");\ncv::resize(img1, img1, cv::Size(150, 150));\ncv::resize(img2, img2, cv::Size(150, 150));\n\ncv_image&lt;bgr_pixel&gt; image1(img1);\nmatrix&lt;rgb_pixel&gt; matr1;\nassign_image(matr1, image1);\n\ncv_image&lt;bgr_pixel&gt; image2(img2);\nmatrix&lt;rgb_pixel&gt; matr2;\nassign_image(matr2, image2);\n\nstd::vector&lt;matrix&lt;rgb_pixel&gt;&gt; faces;\nfaces.push_back(matr1);\nfaces.push_back(matr2);\nstd::vector&lt;matrix&lt;float, 0, 1&gt;&gt; face_descriptors = dlibNet(faces);\nif (length(face_descriptors[0] - face_descriptors[1]) &lt; 0.6)\n        cout &lt;&lt; \"Same person\" &lt;&lt; endl;\nelse\n        cout &lt;&lt; \"Fail. Different people\" &lt;&lt; endl; \n</code></pre>\n"}, {"tags": ["c++", "escaping"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1560376315, "post_id": 56570778, "comment_id": 99720548, "body": "It depends on whether you need a character or a string. For output, I use single quotes, but most people seem to use double quotes. It&#39;s not a big deal either way."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1560379581, "post_id": 56570778, "comment_id": 99721331, "body": "Please do some research before asking. Your question as is doesn&#39;t even make much sense since double and single quotes achieve different things."}], "owner": {"reputation": 27, "user_id": 5113033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8uKQKFXBOe0/AAAAAAAAAAI/AAAAAAAAACA/ieH-9HbaXYM/photo.jpg?sz=128", "display_name": "sonnynomnom", "link": "https://stackoverflow.com/users/5113033/sonnynomnom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "closed_date": 1560376004, "answer_count": 0, "score": 0, "last_activity_date": 1560376626, "creation_date": 1560375919, "last_edit_date": 1560376626, "question_id": 56570778, "link": "https://stackoverflow.com/questions/56570778/single-quotes-or-double-quotes-around-the-n-newline-character-in-c", "closed_reason": "Duplicate", "title": "Single quotes or double quotes around the \\n newline character in C++?", "body": "<p>I'm currently rereading <em>Programming Principles and Practice Using C++</em> and I noticed that sometimes <code>\\n</code> is enclosed in single quotes and sometimes it's enclosed in double quotes. </p>\n\n<p>Is there a best practice?</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::cout &lt;&lt; a &lt;&lt; '\\n';\nstd::cout &lt;&lt; a &lt;&lt; \"blah\\n\";\n</code></pre>\n"}, {"tags": ["c++", "windows", "visual-studio", "header-files"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 5, "creation_date": 1560375633, "post_id": 56570681, "comment_id": 99720350, "body": "Don&#39;t use the <code>&#47;Zp</code> (structure packing) compiler option."}, {"owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1560376173, "post_id": 56570681, "comment_id": 99720506, "body": "@1201ProgramAlarm thanks that seems to work! Any drawbacks to that method?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1560376372, "post_id": 56570681, "comment_id": 99720565, "body": "The real question is why did you add <code>&#47;Zp</code> in the 1st place?"}, {"owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1560376474, "post_id": 56570681, "comment_id": 99720591, "body": "@RichardCritten Working off an SDK project template so it was enabled by default."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1560376605, "post_id": 56570681, "comment_id": 99720617, "body": "Most unusual; which one? I have never seen any of the builtin ones set that flag."}, {"owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1560377018, "post_id": 56570681, "comment_id": 99720718, "body": "@RichardCritten super specific, the Adobe After Effects Plugin SDK, Struct Member Alignment is set to <code>4 Byte (&#47;Zp4)</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1560377086, "post_id": 56570681, "comment_id": 99720747, "body": "@JustinTaylor -- Then whoever put together that package is woefully not paying attention.  There are ways to set the packing for custom structs in the source code itself (things like <code>pragma pack</code>), and not by a universal compiler switch that screws up your other structs."}, {"owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "edited": false, "score": 0, "creation_date": 1560377577, "post_id": 56570681, "comment_id": 99720875, "body": "Thanks for the heads up, will watch out for that in the future."}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 2150227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hDTqo.jpg?s=128&g=1", "display_name": "LilaQ", "link": "https://stackoverflow.com/users/2150227/lilaq"}, "edited": false, "score": 1, "creation_date": 1572893994, "post_id": 58173072, "comment_id": 103695211, "body": "Where exactly in MSVC can I disable this? I searched around, but did not find anything helpful yet :/"}, {"owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "reply_to_user": {"reputation": 382, "user_id": 2150227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hDTqo.jpg?s=128&g=1", "display_name": "LilaQ", "link": "https://stackoverflow.com/users/2150227/lilaq"}, "edited": false, "score": 2, "creation_date": 1572913586, "post_id": 58173072, "comment_id": 103701453, "body": "@LilaQ go to Project Settings &gt; C/C++ &gt; Code Generation &gt; Struct Member Alignment (change to Default)"}], "tags": [], "owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "is_accepted": true, "score": 9, "last_activity_date": 1569866827, "creation_date": 1569866827, "answer_id": 58173072, "question_id": 56570681, "link": "https://stackoverflow.com/questions/56570681/static-assertion-failed-with-windows-headers-require-the-default-packing-option/58173072#58173072", "title": "Static assertion failed with &quot;Windows headers require the default packing option...&quot;", "body": "<p>As 1201ProgramAlarm mentioned above, the solution was disabling the <code>/Zp</code> (structure packing) compiler option.</p>\n"}], "owner": {"reputation": 421, "user_id": 3985472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4242ea6edd5b086815769ab6e27dfeca?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Taylor", "link": "https://stackoverflow.com/users/3985472/justin-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10670, "favorite_count": 0, "accepted_answer_id": 58173072, "answer_count": 1, "score": 5, "last_activity_date": 1569866827, "creation_date": 1560375334, "question_id": 56570681, "link": "https://stackoverflow.com/questions/56570681/static-assertion-failed-with-windows-headers-require-the-default-packing-option", "title": "Static assertion failed with &quot;Windows headers require the default packing option...&quot;", "body": "<p>When I'm trying to compile my C++ project in Visual Studio, I keep getting the 2 following errors:</p>\n\n<pre><code>E1574: Static assertion failed with \"Windows headers require the default \npacking option. Changing this can lead to memory corruption. This diagnostic \ncan be disabled by building with WINDOWS_IGNORE_PACKING_MISMATCH defined.\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>C2338: Windows headers require the default packing option. Changing this can \nlead to memory corruption. This diagnostic can be disabled by building with \nWINDOWS_IGNORE_PACKING_MISMATCH defined.\n</code></pre>\n\n<p>I think the issue has to be something in my Visual Studio settings, cause the project compiles fine on my other PC, and I just installed Visual Studio on this PC.</p>\n\n<p>From doing some searches look like the issue stems from a mismatch of Windows packages, however when installing Visual Studio I tried to install all the C++ and Windows 10 modules I saw.</p>\n\n<p>Also, I'm only including <code>windows.h</code> in order to use <code>ShellExecute()</code>, so if there's a better way to use <code>ShellExecute()</code> I'm open to that. Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1560375374, "post_id": 56570675, "comment_id": 99720262, "body": "See: <a href=\"https://stackoverflow.com/q/5605125/253056\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1560375495, "post_id": 56570675, "comment_id": 99720305, "body": "Storing an unknown amount of values inside a container is what <code>std::vector</code> does best."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1560375847, "post_id": 56570675, "comment_id": 99720419, "body": "On that note, storing a string of <code>char</code>s of unknown size is what <code>std::string</code> does best. You generally shouldn&#39;t be using <code>malloc</code> in C++, or even raw pointers"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1560376717, "post_id": 56570675, "comment_id": 99720650, "body": "In short, you are trying to do too many new things at once. I advise you to try them one at a time."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1560377179, "post_id": 56570675, "comment_id": 99720774, "body": "You may want to use <code>std::list</code> instead of developing and debugging your own linked list."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1560457606, "creation_date": 1560457606, "answer_id": 56588116, "question_id": 56570675, "link": "https://stackoverflow.com/questions/56570675/read-undefined-number-of-variables-from-file-line/56588116#56588116", "title": "Read undefined number of variables from file line", "body": "<p>I do not fully understand what you want to do. There is missing information. Anyway. I will try to help. </p>\n\n<p>I guess that you are new to C++. You are using a lot of C functions. And your program looks completely like C, with some additional C++ features. That you should not do. You are especially using malloc and raw pointers. This you must not do at all.</p>\n\n<p>Try to learn C++ step by step.</p>\n\n<p>Let me first show you what I mean with C-Style programming. I took your program and added comments with hints.</p>\n\n<pre><code>\n// Do not pass arguments by pointer, pass by reference\n// For invariants, pass as const T&amp;\n// Do not use \"char *\". Should be at least const. But do not use at all\n// Use std::string (so pass \"const std::string&amp; dbname\") as argument\nvoid Table::LoadTableRows(Table::TableStruct *table,char *dbname) {\n    // Always initialize varibles. Use universal initialization, with {}\n    ifstream fp;\n    // Never use malloc. Use new.\n    // Do not use raw ptr. use std::unique_ptr. Initialize with std::make_unique\n    // Do not use C-Style cast. Use static_cast\n    Table::RowStruct *p = (Table::RowStruct*) malloc(sizeof(Table::RowStruct));\n    // Use std::string\n    char *filename;\n    int x;\n    // Again. No malloc, no C-Style cast\n    // Do not use C-Sytle string functions\n    filename = (char*) malloc((strlen(table-&gt;tablename)+strlen(dbname)+strlen(\"Data\"))*sizeof(char));\n    // Do not use C-Sytle string functions\n    strcpy(filename,dbname);\n    // Do not use C-Sytle string functions\n    strcat(filename,table-&gt;tablename);\n    // Do not use C-Sytle string functions\n    strcat(filename,\"Data\");\n    // Check, if open works, Open file through constructor, then it will be closed by destructor\n    fp.open(filename);\n\n    while(!fp.eof()) { //goes through all file lines\n        // Do not use malloc and C-Style cast\n        Table::RowStruct *newrow = (Table::RowStruct*) malloc(sizeof(Table::RowStruct)); //allocates space for a new row\n        //initializes element\n        // Do not use NULL, but nullptr\n        newrow-&gt;prev = NULL;\n        newrow-&gt;next = NULL;\n        // Do not use malloc and C-Style cast\n        newrow-&gt;data = (char**) malloc(table-&gt;ncols*30*sizeof(char)); //allocates space to store the row data\n        // Do not use x++ but ++x\n        for(x=0;x&lt;table-&gt;ncols;x++) {\n        // Do not use malloc and C-Style cast\n            newrow-&gt;data[x] = (char*) malloc(30*sizeof(char)); //allocates space for individual data element\n            // Check for out of bounds\n            fp &gt;&gt; newrow-&gt;data[x];\n        }\n        // Do not use selfmade linked list. Use STL container\n        for(p=table-&gt;rows;p-&gt;next!=NULL;p=p-&gt;next) {}\n        newrow-&gt;prev = p;\n        p-&gt;next = newrow;\n    }\n\n    fp.close();\n}\n</code></pre>\n\n<p>You see, there is a lot of C in it and not so much C++.</p>\n\n<p>The modern C++ makes much use of containers and algorithms.</p>\n\n<p>A full fledged example for C++ is below. It is hard to understand for beginners. But try to analyze and you will get a hang of it.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n\n\nusing AllWordsInOneLine = std::vector&lt;std::string&gt;;\nusing AllLines =std::vector&lt;AllWordsInOneLine&gt;;\n\nstruct Line      // ! This is a proxy for the input_iterator ! \n{   // Input function. Read on line of text file and split it in words\n    friend std::istream&amp; operator&gt;&gt;(std::istream&amp; is, Line&amp; line) {\n        std::string wholeLine;  std::getline(is, wholeLine); std::istringstream iss{ wholeLine }; line.allWordsInOneLine.clear(); \n        std::copy(std::istream_iterator&lt;std::string&gt;(iss), std::istream_iterator&lt;std::string&gt;(), std::back_inserter(line.allWordsInOneLine));\n        return is;\n    }\n    operator AllWordsInOneLine() const { return allWordsInOneLine; }  // cast to needed result\n    AllWordsInOneLine allWordsInOneLine{};  // Local storage for all words in line\n};\n\n\nint main()\n{\n    std::ifstream inFileStream{ \"r:\\\\input.txt\" };      // Open input file. Will be closed by destructor\n    if (!inFileStream) { // ! operator is overloaded\n        std::cerr &lt;&lt; \"Could not open input file\\n\";\n    }\n    else {\n        // Read complete input file into memory and organize it in words by lines\n        AllLines allLines{ std::istream_iterator&lt;Line&gt;(inFileStream), std::istream_iterator&lt;Line&gt;() };\n\n        // Make exact ncols entries. \n        const size_t ncols = 6; // whatever ncols may be. Empty cols will be filled with ___  (or whatever you like)\n        std::for_each(allLines.begin(), allLines.end(), [ncols](AllWordsInOneLine&amp; awil) {awil.resize(ncols, \"___\"); });\n\n        // copy result to std::cout\n        std::for_each(allLines.begin(), allLines.end(), [](AllWordsInOneLine &amp; awil) {std::copy(awil.begin(), awil.end(), std::ostream_iterator&lt;std::string&gt;(std::cout, \" \")); std::cout &lt;&lt; '\\n'; });\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please see especially that the whole file, with all lines split into words, will be read in one line of code in function main.</p>\n\n<p>An additional one-liner converts this into a vector with exactly ncols elements (words). This regardless if there were more or less than ncols words per line in the source file.</p>\n\n<p>Hope I could help at least a little bit.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1560458756, "creation_date": 1560458756, "answer_id": 56588345, "question_id": 56570675, "link": "https://stackoverflow.com/questions/56570675/read-undefined-number-of-variables-from-file-line/56588345#56588345", "title": "Read undefined number of variables from file line", "body": "<pre><code>char *filename;\nfilename = (char*) malloc((strlen(table-&gt;tablename)+strlen(dbname)+strlen(\"Data\"))*sizeof(char));\nstrcpy(filename,dbname);\nstrcat(filename,table-&gt;tablename);\nstrcat(filename,\"Data\");\n</code></pre>\n\n<p>Here's your first problem. You haven't allocated space for the terminating nul byte at the end of the string. I'm not sure why you're using C-style strings instead of <code>std::string</code>, but C-style strings use a zero byte at the end to mark the end of the string.</p>\n\n<pre><code>fp.open(filename);\n\nwhile(!fp.eof()) { //goes through all file lines\n</code></pre>\n\n<p>You are misusing <code>eof</code>. It can't predict that a future read will succeed, it's not a future-predicting function but a past reporting function.</p>\n\n<pre><code>    newrow-&gt;data = (char**) malloc(table-&gt;ncols*30*sizeof(char)); //allocates space to store the row data\n</code></pre>\n\n<p>This is puzzling. The type is <code>char **</code>, which means you're allocating a pointer to a pointer. Yet you allocate space for 30 characters. Why allocate 30 characters for a pointer?</p>\n\n<pre><code>        fp &gt;&gt; newrow-&gt;data[x];\n</code></pre>\n\n<p>You don't check if this read succeeds. That's never a good thing and makes your program impossible to debug.</p>\n\n<p>These are the major issues that immediately stand out.</p>\n"}], "owner": {"reputation": 1, "user_id": 11639203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FFXJpTyeaCM/AAAAAAAAAAI/AAAAAAAAIz0/euhVd1vkeng/photo.jpg?sz=128", "display_name": "Carlos Tojal", "link": "https://stackoverflow.com/users/11639203/carlos-tojal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1560458756, "creation_date": 1560375288, "question_id": 56570675, "link": "https://stackoverflow.com/questions/56570675/read-undefined-number-of-variables-from-file-line", "title": "Read undefined number of variables from file line", "body": "<p>I am making a simple database system in C++.\nThe table data is stored in a file, where each line represents a table row, where all data is separated by spaces.\nI want to read ncols elements in same line, where ncols is not always the same, and store each read value in data[x].\ndata variable declaration is char** data.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Table::LoadTableRows(Table::TableStruct *table,char *dbname) {\n    ifstream fp;\n    Table::RowStruct *p = (Table::RowStruct*) malloc(sizeof(Table::RowStruct));\n    char *filename;\n    int x;\n    filename = (char*) malloc((strlen(table-&gt;tablename)+strlen(dbname)+strlen(\"Data\"))*sizeof(char));\n    strcpy(filename,dbname);\n    strcat(filename,table-&gt;tablename);\n    strcat(filename,\"Data\");\n\n    fp.open(filename);\n\n    while(!fp.eof()) { //goes through all file lines\n        Table::RowStruct *newrow = (Table::RowStruct*) malloc(sizeof(Table::RowStruct)); //allocates space for a new row\n        //initializes element\n        newrow-&gt;prev = NULL;\n        newrow-&gt;next = NULL;\n        newrow-&gt;data = (char**) malloc(table-&gt;ncols*30*sizeof(char)); //allocates space to store the row data\n        for(x=0;x&lt;table-&gt;ncols;x++) {\n            newrow-&gt;data[x] = (char*) malloc(30*sizeof(char)); //allocates space for individual data element\n            fp &gt;&gt; newrow-&gt;data[x];\n        }\n        for(p=table-&gt;rows;p-&gt;next!=NULL;p=p-&gt;next) {}\n        newrow-&gt;prev = p;\n        p-&gt;next = newrow;\n    }\n\n    fp.close();\n}\n</code></pre>\n\n<p>I've tried this code, but it crashed as I expected.</p>\n"}, {"tags": ["c++", "templates", "linker-errors"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1560375655, "post_id": 56570648, "comment_id": 99720361, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/10535667/does-it-make-any-sense-to-use-inline-keyword-with-templates\" title=\"does it make any sense to use inline keyword with templates\">stackoverflow.com/questions/10535667/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1560375491, "creation_date": 1560375491, "answer_id": 56570695, "question_id": 56570648, "link": "https://stackoverflow.com/questions/56570648/how-to-link-nested-templated-specializations/56570695#56570695", "title": "How to link nested templated specializations?", "body": "<p>Whereas template functions doesn't require <code>inline</code> to avoid multiple definitions, specialization does as regular functions.</p>\n\n<p>You have to add it:</p>\n\n<pre><code>template &lt;&gt;\ninline int Utils::parse::fromString&lt;int&gt;(std::string s) { return 42; }\n\ntemplate&lt;&gt;\ninline float Utils::parse::fromString&lt;float&gt;(std::string s) { return 42.0; }\n</code></pre>\n"}], "owner": {"reputation": 1649, "user_id": 3516684, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5e55f57a1d9ea8a126a070aa68c060de?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkler", "link": "https://stackoverflow.com/users/3516684/sparkler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 56570695, "answer_count": 1, "score": 0, "last_activity_date": 1560375491, "creation_date": 1560375129, "question_id": 56570648, "link": "https://stackoverflow.com/questions/56570648/how-to-link-nested-templated-specializations", "title": "How to link nested templated specializations?", "body": "<p>I would like to be able to use a generic string parsing function as follows:</p>\n\n<pre><code>Utils::parse::fromString&lt;int&gt;(whatever)\nUtils::parse::fromString&lt;float&gt;(whatever)\n</code></pre>\n\n<p>Following the suggestion <a href=\"https://stackoverflow.com/a/495056\">here</a>, I moved template specialization to separate <code>*.ipp</code> files, which are <code>#include</code>ed from the <code>*.hpp</code>:</p>\n\n<p><strong><code>Utils.hpp</code></strong></p>\n\n<pre><code>#ifndef UTILS_HPP_\n#define UTILS_HPP_\n#include &lt;string&gt;\n\nnamespace Utils\n{\n    namespace parse\n    {\n        template&lt;typename T&gt;\n        T fromString(std::string s);\n    }\n}\n\n#include \"Utils.ipp\"\n#endif // UTILS_HPP_\n</code></pre>\n\n<p><strong><code>Utils.ipp</code></strong></p>\n\n<pre><code>#ifndef UTILS_IPP_\n#define UTILS_IPP_\n\ntemplate&lt;&gt;\nint Utils::parse::fromString&lt;int&gt;(std::string s) { return 42; }\n\ntemplate&lt;&gt;\nfloat Utils::parse::fromString&lt;float&gt;(std::string s) { return 42.0; }\n\n#endif // UTILS_IPP_\n</code></pre>\n\n<p>Now I have a class with a specialized method:</p>\n\n<p><strong><code>Foo.hpp</code></strong></p>\n\n<pre><code>#ifndef FOO_HPP_\n#define FOO_HPP_\n\n#include &lt;string&gt;\n#include \"Utils.hpp\"\n\nclass Foo\n{\npublic:\n    Foo();\n\n    template&lt;typename T&gt;\n    T get(std::string s);\n};\n\n#include \"Foo.ipp\"\n\n#endif // FOO_HPP_\n</code></pre>\n\n<p><strong><code>Foo.ipp</code></strong></p>\n\n<pre><code>#ifndef FOO_IPP_\n#define FOO_IPP_\n\n#include &lt;string&gt;\n\ntemplate&lt;typename T&gt;\nT Foo::get(std::string s)\n{\n    return Utils::parse::fromString&lt;T&gt;(s);\n}\n\n#endif // FOO_HPP_\n</code></pre>\n\n<p><strong><code>test.cpp</code></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"Utils.hpp\"\n#include \"Foo.hpp\"\n\n// Custom template specialization\ntemplate&lt;&gt;\nchar Utils::parse::fromString&lt;char&gt;(std::string s)\n{\n    return 'c';\n}\n\nint main()\n{\n    // Calling `fromString` directly - this works!\n    const std::string whatever = \"whatever\";\n    std::cout &lt;&lt; Utils::parse::fromString&lt;int&gt;(whatever) &lt;&lt; std::endl;\n    std::cout &lt;&lt; Utils::parse::fromString&lt;char&gt;(whatever) &lt;&lt; std::endl;\n\n    // Calling `fromString` via `Foo` - linking error!\n    Foo foo;\n    std::cout &lt;&lt; foo.get&lt;int&gt;(whatever) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>If I only use <code>fromString</code> directly, it works fine. However, if I use <code>Foo</code>, i get \"multiple definition\" linking errors:</p>\n\n<pre><code>g++ test.cpp Foo.cpp\n/tmp/cc7ACcVe.o: In function `int Utils::parse::fromString&lt;int&gt;(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)':\nFoo.cpp:(.text+0x0): multiple definition of `int Utils::parse::fromString&lt;int&gt;(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\n/tmp/ccrN171X.o:test.cpp:(.text+0x0): first defined here\n/tmp/cc7ACcVe.o: In function `float Utils::parse::fromString&lt;float&gt;(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)':\nFoo.cpp:(.text+0xf): multiple definition of `float Utils::parse::fromString&lt;float&gt;(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\n/tmp/ccrN171X.o:test.cpp:(.text+0xf): first defined here\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["python", "c++"], "answers": [{"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 2, "last_activity_date": 1560375223, "creation_date": 1560375223, "answer_id": 56570662, "question_id": 56570622, "link": "https://stackoverflow.com/questions/56570622/is-it-possible-to-access-c-headers-libraries-and-run-a-c-script-within-a-pyt/56570662#56570662", "title": "Is it possible to access C++ headers/libraries and run a C++ script within a python console?", "body": "<p>Check out <a href=\"https://www.boost.org/doc/libs/1_49_0/libs/python/doc/\" rel=\"nofollow noreferrer\">boost.python</a>\nHere is an intro:</p>\n\n<blockquote>\n  <p>The Boost Python Library is a framework for interfacing Python and\n  C++. It allows you to quickly and seamlessly expose C++ classes\n  functions and objects to Python, and vice-versa, using no special\n  tools -- just your C++ compiler. It is designed to wrap C++ interfaces\n  non-intrusively, so that you should not have to change the C++ code at\n  all in order to wrap it, making Boost.Python ideal for exposing\n  3rd-party libraries to Python. The library's use of advanced\n  metaprogramming techniques simplifies its syntax for users, so that\n  wrapping code takes on the look of a kind of declarative interface\n  definition language (IDL).</p>\n</blockquote>\n\n<p>It includes support for:</p>\n\n<ul>\n<li><p>References and Pointers</p>\n\n<p>Globally Registered Type Coercions</p>\n\n<p>Automatic Cross-Module Type Conversions</p>\n\n<p>Efficient Function Overloading</p>\n\n<p>C++ to Python Exception Translation</p>\n\n<p>Default Arguments</p>\n\n<p>Keyword Arguments</p>\n\n<p>Manipulating Python objects in C++</p>\n\n<p>Exporting C++ Iterators as Python Iterators</p>\n\n<p>Documentation Strings\nand many more.</p></li>\n</ul>\n"}], "owner": {"reputation": 55, "user_id": 11627529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8347e32e99a05c79d20520dd2ef1ff4b?s=128&d=identicon&r=PG&f=1", "display_name": "prpowers", "link": "https://stackoverflow.com/users/11627529/prpowers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1560375223, "creation_date": 1560375004, "question_id": 56570622, "link": "https://stackoverflow.com/questions/56570622/is-it-possible-to-access-c-headers-libraries-and-run-a-c-script-within-a-pyt", "title": "Is it possible to access C++ headers/libraries and run a C++ script within a python console?", "body": "<p>I need to access data via USB from a beam profiler. I've tried using the USB module in python to access it, but unfortunately the company who makes this device \"does not support development in Python\". The project I am working on is to eventually create a GUI (via Python) to automate a motor and pull data from the device. So it has to be done in Python, or I'm going to have to scrap the first half of the code and redo it in C++.</p>\n\n<p>I think the reason the device can only interface with C/C++ is because of the header and library files that come with the driver download.</p>\n\n<p>I've looked at Cython but am still very unsure how it can help me. I'm just trying to access the header files for the driver in python and somehow execute the C commands in python.</p>\n\n<p>BTW I am using Anaconda (if that matters).</p>\n\n<p>Thank-you for any clarification and help!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560375169, "post_id": 56570538, "comment_id": 99720190, "body": "You still have issue if <code>sum &gt; std::numerics_limits&lt;std::int32_t&gt;::max()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 10431634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4334fb41f1d618dffb8fdb68971f294e?s=128&d=identicon&r=PG&f=1", "display_name": "astrophobia", "link": "https://stackoverflow.com/users/10431634/astrophobia"}, "edited": false, "score": 0, "creation_date": 1560375645, "post_id": 56570693, "comment_id": 99720355, "body": "The idea is that sum contains the full 32 bits used to represent the value as an int32. So the most significant bit is the sign value if this is two&#39;s complement. So I would not want to remove that bit. By doing what you are suggesting above the sign bit would go away"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 461, "user_id": 10431634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4334fb41f1d618dffb8fdb68971f294e?s=128&d=identicon&r=PG&f=1", "display_name": "astrophobia", "link": "https://stackoverflow.com/users/10431634/astrophobia"}, "edited": false, "score": 0, "creation_date": 1560376038, "post_id": 56570693, "comment_id": 99720468, "body": "You cannot rely on two&#39;s complement representation in the target <code>sum</code>. If your array represents two&#39;s complement, you can simulate the <code>-</code>-information. See edited answer."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1560375988, "last_edit_date": 1560375988, "creation_date": 1560375451, "answer_id": 56570693, "question_id": 56570538, "link": "https://stackoverflow.com/questions/56570538/how-to-convert-a-list-of-uint8-to-their-corresponding-signed-value/56570693#56570693", "title": "How to convert a list of uint8 to their corresponding signed value?", "body": "<p>Good, but you get implementation defined behaviour if the unsigned value cannot be represented in the signed one (cf, for example, <a href=\"https://timsong-cpp.github.io/cppwp/n3337/conv.integral#3\" rel=\"nofollow noreferrer\">this</a> online c++ standard draft):</p>\n\n<blockquote>\n  <p><strong>4.7 Integral conversions</strong></p>\n  \n  <p>3) If the destination type is signed, the value is unchanged if it can\n  be represented in the destination type (and bit-field width);\n  otherwise, the value is implementation-defined.</p>\n</blockquote>\n\n<p>To overcome this, you could restrict the most significant byte to 7 bits:</p>\n\n<pre><code>sum = sum + (static_cast&lt;std::uint32_t&gt;(list[3]) &amp; 0x7F) &lt;&lt;24;\nif (static_cast&lt;std::uint32_t&gt;(list[3]) &amp; 0x80) {\n   sum = -sum;\n}\n</code></pre>\n\n<p>Note that only 31 bit can be used for the signed value's content.\nYou actually cannot rely on two's complement representations, but with the<code>sum = -sum</code>-notation you should be safe.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560430484, "post_id": 56571362, "comment_id": 99739731, "body": "That reinterpret_cast usage would probably break strict aliasing rules."}], "tags": [], "owner": {"reputation": 1570, "user_id": 1544015, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/5GvtW.jpg?s=128&g=1", "display_name": "Vlad Novakovsky", "link": "https://stackoverflow.com/users/1544015/vlad-novakovsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1560380415, "creation_date": 1560380415, "answer_id": 56571362, "question_id": 56570538, "link": "https://stackoverflow.com/questions/56570538/how-to-convert-a-list-of-uint8-to-their-corresponding-signed-value/56571362#56571362", "title": "How to convert a list of uint8 to their corresponding signed value?", "body": "<p>If you insist</p>\n\n<blockquote>\n  <p>to convert these to their <strong>corresponding</strong> signed value</p>\n</blockquote>\n\n<p>that is to int32_t\nthan following should be fast, safe, short, portable and easy because used boost code is header only (no need to build boost):</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;boost/numeric/conversion/cast.hpp&gt;\n\n#ifdef __linux__ \n    #include &lt;arpa/inet.h&gt;\n#elif _WIN32\n    #include &lt;winsock.h&gt;\n#else\n // ...\n#endif\n\nint main()\n{\n    using boost::numeric_cast;\n    using boost::numeric::bad_numeric_cast;\n    using boost::numeric::positive_overflow;\n    using boost::numeric::negative_overflow;\n\n    std::array&lt;uint8_t, 4&gt; a = { 1,2,3,4 }; // big-endian\n    uint32_t ui = ntohl(*reinterpret_cast&lt;uint32_t*&gt;(a.data())); // convert to host specific byte order\n    std::cout &lt;&lt; std::hex &lt;&lt; ui &lt;&lt; std::endl;\n\n    try\n    {\n        int32_t si = numeric_cast&lt;int32_t&gt;(ui); // This conversion succeeds (is in range)\n        std::cout &lt;&lt; std::hex &lt;&lt; si &lt;&lt; std::endl;\n    }\n    catch (negative_overflow&amp; e) {\n        std::cout &lt;&lt; e.what();\n    }\n    catch (positive_overflow&amp; e) {\n        std::cout &lt;&lt; e.what();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 10431634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4334fb41f1d618dffb8fdb68971f294e?s=128&d=identicon&r=PG&f=1", "display_name": "astrophobia", "link": "https://stackoverflow.com/users/10431634/astrophobia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 56571362, "answer_count": 2, "score": 0, "last_activity_date": 1560380415, "creation_date": 1560374560, "last_edit_date": 1560375890, "question_id": 56570538, "link": "https://stackoverflow.com/questions/56570538/how-to-convert-a-list-of-uint8-to-their-corresponding-signed-value", "title": "How to convert a list of uint8 to their corresponding signed value?", "body": "<p>Say that I have an array of bytes:</p>\n\n<pre><code>std::array&lt;std::uint8_t, 4&gt; list\n</code></pre>\n\n<p>and I want to convert these to their corresponding signed value after concatenating the bits contained in <code>list</code>. For the case of <code>list</code> for example, and since it is an array of size 4, this would translate to an <code>int32</code>. What is the \"correct\" way of doing this in C++ that would not result in undefined or compiler specific behavior? Would doing something like this be correct and not considered undefined or compiler specific?:</p>\n\n<pre><code>std::uint32_t sum = list[0];\nsum = sum + static_cast&lt;std::uint32_t&gt;(list[1])&lt;&lt;8;\nsum = sum + static_cast&lt;std::uint32_t&gt;(list[2])&lt;&lt;16;\nsum = sum + static_cast&lt;std::uint32_t&gt;(list[3])&lt;&lt;24;\nstd::int32_t sum_int32 = static_cast&lt;std::int32_t&gt;(sum);\n</code></pre>\n\n<p>In other words sum is meant to hold the 32bit representation of the value in two's complement.</p>\n"}, {"tags": ["c++", "libcurl"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1560375374, "post_id": 56570487, "comment_id": 99720263, "body": "Most likely the library now uses functions from a <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wincrypt/\" rel=\"nofollow noreferrer\">Windows library</a> that it didn&#39;t before, so you must link against it. The old projects miss this dependency."}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1560448102, "post_id": 56570487, "comment_id": 99749961, "body": "You should probably make sure that you build with the same TLS backend as you did before, to reduce the number of issues you might see in the upgrade process."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1560448275, "post_id": 56570487, "comment_id": 99750020, "body": "@DanielStenberg if only I knew <i>how</i> we built it before..."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1560450593, "post_id": 56570487, "comment_id": 99751080, "body": "@PeterA.Schneider you were completely right, linking against <code>crypt32.lib</code> solved this for me"}], "answers": [{"tags": [], "owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "is_accepted": true, "score": 1, "last_activity_date": 1560450639, "creation_date": 1560450639, "answer_id": 56586629, "question_id": 56570487, "link": "https://stackoverflow.com/questions/56570487/compiling-libcurl-7-61-1-from-source-on-windows-10/56586629#56586629", "title": "compiling libcurl 7.61.1 from source on Windows 10", "body": "<p>As Peter mentioned in a comment, I needed to link against windows libraries.  In this case, linking against <code>crypt32.lib</code> solved the issue for me.</p>\n"}], "owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 56586629, "answer_count": 1, "score": 0, "last_activity_date": 1560450639, "creation_date": 1560374282, "question_id": 56570487, "link": "https://stackoverflow.com/questions/56570487/compiling-libcurl-7-61-1-from-source-on-windows-10", "title": "compiling libcurl 7.61.1 from source on Windows 10", "body": "<p>I'm working on an existing C++ project. We include libcurl as a static library, which we build from source. I'm trying to upgrade us from version 7.38.0 to version 7.61.1. </p>\n\n<p>I downloaded <code>curl-7.61.1.zip</code> from here: <a href=\"https://curl.haxx.se/download/\" rel=\"nofollow noreferrer\">https://curl.haxx.se/download/</a>.</p>\n\n<p>I made no modifications to the source and did not run any scripts that came with curl 7.61.1.</p>\n\n<p>We have an existing VS solution we used for compiling curl 7.38.0, so I started from that and modified as needed for the new files in curl 7.61.1.</p>\n\n<p>Everything compiled fine, however, when I try to link the compiled result into my project, I get the following errors:</p>\n\n<pre><code>1&gt;libcurl.lib(schannel.obj) : error LNK2019: unresolved external symbol __imp_CertOpenStore referenced in function schannel_connect_step1\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2001: unresolved external symbol __imp_CertOpenStore\n1&gt;libcurl.lib(schannel.obj) : error LNK2019: unresolved external symbol __imp_CertCloseStore referenced in function schannel_connect_step1\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2001: unresolved external symbol __imp_CertCloseStore\n1&gt;libcurl.lib(schannel.obj) : error LNK2019: unresolved external symbol __imp_CertFindCertificateInStore referenced in function schannel_connect_step1\n1&gt;libcurl.lib(schannel.obj) : error LNK2019: unresolved external symbol __imp_CertFreeCertificateContext referenced in function pkp_pin_peer_pubkey\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2001: unresolved external symbol __imp_CertFreeCertificateContext\n1&gt;libcurl.lib(schannel.obj) : error LNK2019: unresolved external symbol  __imp_CryptStringToBinaryA referenced in function schannel_connect_step1\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertAddCertificateContextToStore referenced in function add_certs_to_store\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertGetNameStringA referenced in function verify_host\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CryptQueryObject referenced in function add_certs_to_store\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertCreateCertificateChainEngine referenced in function verify_certificate\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertFreeCertificateChainEngine referenced in function verify_certificate\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertGetCertificateChain referenced in function verify_certificate\n1&gt;libcurl.lib(schannel_verify.obj) : error LNK2019: unresolved external symbol __imp_CertFreeCertificateChain referenced in function verify_certificate\n1&gt;C:\\Users\\CoffeeTableEspresso\\project\\win64-vs15\\debug-mt\\executable.exe : fatal error LNK1120: 12 unresolved externals\n</code></pre>\n\n<p>Has anyone run into similar issues before? Please let me know if I need to edit this with more info as well.</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1560374252, "post_id": 56570452, "comment_id": 99719936, "body": "Do you question that it loses move semantics, or do you question that it&#39;s slower? Or both?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1560374322, "post_id": 56570452, "comment_id": 99719954, "body": "Take a look a the generated code to see. Or run each a couple of million times with random strings and measure."}, {"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1560374437, "post_id": 56570452, "comment_id": 99719992, "body": "@Barry does it lose move semantics?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1560374439, "post_id": 56570452, "comment_id": 99719993, "body": "Also, returning a <code>const</code> value or not doesn&#39;t really matter. It&#39;s what the caller assigns the result to that matters."}, {"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560374534, "post_id": 56570452, "comment_id": 99720022, "body": "@Someprogrammerdude That was my thought as well. But i&#39;m still curious if there is something to it which might apply indirectly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1560374563, "post_id": 56570452, "comment_id": 99720031, "body": "There is no point in returning a const value.  Just return by value."}, {"owner": {"reputation": 2342, "user_id": 1080633, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RieF7.jpg?s=128&g=1", "display_name": "fonZ", "link": "https://stackoverflow.com/users/1080633/fonz"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560375097, "post_id": 56570452, "comment_id": 99720169, "body": "Does it compile slower or run slower? I would assume that disabling move, assigment and copy because of the const will take some compile time but as @someprogrammerdude pointed out, there is no point in returning a const value."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 1, "creation_date": 1560377920, "post_id": 56570452, "comment_id": 99720950, "body": "Returning a const <i>value</i> (as opposed to a reference) <b>never</b> makes sense. Don&#39;t do it. Your compiler should have warned you, even."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1560647571, "post_id": 56570452, "comment_id": 99804997, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics\">What is move semantics?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1560377635, "post_id": 56570631, "comment_id": 99720885, "body": "Also <code>auto&amp;&amp; str = g()</code> is different than <code>= f()</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1560379293, "post_id": 56570631, "comment_id": 99721276, "body": "@Nikos Copy elision isnt affected by differences in cv-qualifications."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560379373, "post_id": 56570631, "comment_id": 99721291, "body": "Are you sure? I can&#39;t imagine a compiler being brave enough (pre-C++17) to copy-elide something that was <code>const</code> inside but non-<code>const</code> outside."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 12, "last_activity_date": 1560377115, "last_edit_date": 1560377115, "creation_date": 1560375041, "answer_id": 56570631, "question_id": 56570452, "link": "https://stackoverflow.com/questions/56570452/is-returning-a-const-stdstring-really-slower-than-non-const/56570631#56570631", "title": "is returning a const std::string really slower than non-const?", "body": "<p>Consider the following functions:</p>\n\n<pre><code>std::string f();\nstd::string const g();\n</code></pre>\n\n<p>There is no difference between:</p>\n\n<pre><code>std::string s1 = f();\nstd::string s2 = g();\n</code></pre>\n\n<p>We have guaranteed copy elision now, in both of these cases we're constructing directly into the resulting object. No copy, no move.</p>\n\n<p>However, there is a big difference between:</p>\n\n<pre><code>std::string s3, s4;\ns3 = f(); // this is move assignment\ns4 = g(); // this is copy assignment\n</code></pre>\n\n<p><code>g()</code> may be an rvalue, but it's a <em>const</em> rvalue. It cannot bind to the <code>string&amp;&amp;</code> argument that the move assignment operator takes, so we fall back to the <em>copy</em> assignment operator whose <code>string const&amp;</code> parameter can happily accept an rvalue.</p>\n\n<p>Copying is definitely slower than moving for types like <code>string</code>, where moving is constant time and copying is linear and may require allocation.</p>\n\n<p>Don't return const values. </p>\n\n<hr />\n\n<p>On top of that, for non-class types:</p>\n\n<pre><code>int f();\nint const g();\n</code></pre>\n\n<p>These two are actually the same, both return <code>int</code>. It's an odd quirk of the language that you <em>cannot</em> return a const prvalue of non-class type but you <em>can</em> return a const prvalue of class type. Easier to just pretend you can't do the latter either, since you shouldn't. </p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560379325, "post_id": 56570687, "comment_id": 99721286, "body": "Regarding your final paragraph, could you share some more light on that? It sounds... hinky."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1560375405, "creation_date": 1560375405, "answer_id": 56570687, "question_id": 56570452, "link": "https://stackoverflow.com/questions/56570452/is-returning-a-const-stdstring-really-slower-than-non-const/56570687#56570687", "title": "is returning a const std::string really slower than non-const?", "body": "<p>Without reading the specification or anything else, if we just think about it logically...</p>\n\n<p>For example, lets say you have</p>\n\n<pre><code>// Declare the function\nstd::string const my_function();\n\n// Initialize a non-constant variable using the function\nstd::string my_string = my_function();\n</code></pre>\n\n<p>The value returned by the function <em>could</em> be copied to a temporary object, the value from inside the function is then destructed. The temporary object (which is constant) is then copied to the <code>my_string</code> object, and then the temporary object is destructed. Two copies and two destructions. Sounds a little excessive, don't you think? Especially considering that both the value inside the function <em>and</em> the temporary object will be destructed, so they don't really need to keep their contents.</p>\n\n<p>Wouldn't it be better if the copying could be <em>elided</em>, perhaps both of them? Then what could happen is that the value from inside the function is moved directly into the <code>my_string</code> object. The <code>const</code> status of anything doesn't matter, since the objects being moved from will be destructed next anyway.</p>\n\n<p>The latter is what modern compiler do, they move even if the function is declared to return a <code>const</code> value. And even if the value or object inside the function is <code>const</code> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 235, "user_id": 4262263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72aea65f8ef4c3793765e3601271353?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Awadhiya", "link": "https://stackoverflow.com/users/4262263/vikas-awadhiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1560583732, "last_edit_date": 1560583732, "creation_date": 1560583173, "answer_id": 56608262, "question_id": 56570452, "link": "https://stackoverflow.com/questions/56570452/is-returning-a-const-stdstring-really-slower-than-non-const/56608262#56608262", "title": "is returning a const std::string really slower than non-const?", "body": "<p>Statements like this have certain meaning in terms of initialization,</p>\n\n<pre><code>std::string getString();\nconst std::string getConstantString();\n\nstd::string str = getString(); // 1\nconst std::string str = getConstantString(); //2\n</code></pre>\n\n<p>Both initialization statements <code>1</code> and <code>2</code> come under copy initialization. Now it depends on <code>cv-qualification</code> (const and volatile) of <code>return type</code>, there are two possibilities, if <code>return type</code> is <code>cv-unqualified</code> and <code>move constructor</code> available for class then object will be <code>move initialized</code> as in statement <code>1</code>, and if <code>return type</code> is <code>cv-qualified</code> then object will be <code>copy initialized</code> as in statement <code>2</code>.<br/>\nBut there is an optimization called <code>copy-elision</code>(ignores <code>cv-qualification</code>) and due to <code>copy-elision</code>, <strong>The objects are constructed directly into the storage where they would otherwise be copied/moved to.</strong><br/><br/>\nThere are two type of <code>copy-elision</code>, <code>NRVO, \"named return value optimization\"</code> and <code>RVO, \"return value optimization\"</code>, but from <code>c++17</code> Return value optimization is mandatory and no longer considered as copy elision.<br/>\nPlease see following link <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">copy-elision</a>\nfor more details.<br/></p>\n"}], "owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1560648624, "creation_date": 1560374121, "last_edit_date": 1560648624, "question_id": 56570452, "link": "https://stackoverflow.com/questions/56570452/is-returning-a-const-stdstring-really-slower-than-non-const", "title": "is returning a const std::string really slower than non-const?", "body": "<p>In another question a user made a comment that returning a const std::string loses move construction efficiency and is slower. </p>\n\n<p>Is it really true that assigning a string of return of this method:</p>\n\n<pre><code>const std::string toJson(const std::string &amp;someText);\n\nconst std::string jsonString = toJson(someText);\n</code></pre>\n\n<p>... is really slower than the non-const version:</p>\n\n<pre><code>std::string toJson(const std::string &amp;str);\n\nstd::string jsonString = toJson(someText);\n</code></pre>\n\n<p>And what is the meaning of move-construction efficiency in this context?</p>\n\n<p>I've never heard of that limitation before and do not remember having seen that in the profiler. But I'm curious. </p>\n\n<p>Edit: There is a suggested question asking: <a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics\">What is move semantics?</a>. While some of the explanations of course relate to efficiency, it explains <em>what</em> move semantics means, but does not address <em>why</em> returning a const value can have negative side effects regarding performance.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1560373396, "post_id": 56570266, "comment_id": 99719687, "body": "It&#39;s a compiler bug. Don&#39;t like compiler bugs? No problem! Just get a bug free compiler."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1560374437, "post_id": 56570266, "comment_id": 99719991, "body": "In VS2019, I&#39;d guess you need to look into settings related to &quot;C++ Core Guidelines warnings&quot; within the IDE.    Incidentally, most compilers treat warning about falling off the end of a function as a discretionary warning, that is disabled by default  (i.e. if you want that warning, you need to specifically enable it).   All sorts of history behind that - but ultimately developers lobbied compiler vendors to do it that way, and made their own nest."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1560375423, "post_id": 56570266, "comment_id": 99720283, "body": "Your code causes a &quot;error C4716: &#39;myClass::memberFunc&#39;: must return a value&quot; diagnostic on my VS2019 desktop and on <a href=\"https://godbolt.org/z/VvyrPd\" rel=\"nofollow noreferrer\">Compiler Explorer</a>. You might try repairing your Visual Studio installation."}], "owner": {"reputation": 29, "user_id": 11623233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e72638f60493e0e667b1d6de87846e19?s=128&d=identicon&r=PG&f=1", "display_name": "RoyGNEU", "link": "https://stackoverflow.com/users/11623233/roygneu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560373060, "creation_date": 1560373060, "question_id": 56570266, "link": "https://stackoverflow.com/questions/56570266/setting-to-improve-visual-studio-inscrutable-compile-build-error-msb6006-cl-e", "title": "Setting to improve Visual Studio inscrutable compile/build error: MSB6006: &quot;CL.exe&quot; exit code 2", "body": "<p>I recently (finally!) upgraded to VS2019 from VS2008 and I ran across a ridiculous error that I had never seen before - MSB6006: \"CL.exe\" exit code 2.</p>\n\n<p>After some searching, Microsoft suggested a screwed up Path variable. Nope! \nAnd then a lot of other people on the interweb had the same error for screwy and seemingly unrelated reasons.</p>\n\n<p>I finally found the problem by disabling sections of my code one-at-a-time.  It turned out I forgot to return a value in a non-void function. </p>\n\n<p>It was something like this:</p>\n\n<pre><code>class myClass{\n    int classMember;\n....\n    int memberFunc(int input){\n        int out = input * classMember;\n        //should have returned 'out' here but I didn't.\n    }\n};\n</code></pre>\n\n<p>My two questions are:</p>\n\n<p>1) What in the HOLY **** happened to the nice, user friendly compiler error in VS2008 that used to tell me I had forgotten to return a value?  (not that -ahem- I do that very often.)</p>\n\n<p>2) Is there a way to get the nice error message back?  Some setting buried somewhere?  Perhaps even some sort of default configuration VS2019 is using for my projects that I can dumb-down?</p>\n\n<p>And next, here's a thought for any others who are beating their heads against the MSB6006 wall:  The fact that I got this opaque build error when VS2019 SHOULD have caught a very simple and explainable compile-time error implies that others may be seeing it for similar reasons - that is, something simple that you would normally expect the compiler to catch for you isn't being caught...  Systematically disabling sections of code worked for me.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 7, "creation_date": 1560373208, "post_id": 56570237, "comment_id": 99719625, "body": "<a href=\"https://doc.qt.io/qt-5/qwidget.html#setParent\" rel=\"nofollow noreferrer\"><code>QWidget::setParent</code></a>?"}, {"owner": {"reputation": 399, "user_id": 10833151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105e1c301f6ff60de3fbd9ef73fd19cc?s=128&d=identicon&r=PG&f=1", "display_name": "James Ronald", "link": "https://stackoverflow.com/users/10833151/james-ronald"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1560375248, "post_id": 56570237, "comment_id": 99720218, "body": "@G.M. What in the world. How did I not find that. Thank you very much, that was what I was looking for...how did you find that? I Googled a bunch and looked through a bunch of different doc pages including that of QWidget"}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1560421696, "post_id": 56570237, "comment_id": 99734721, "body": "@G.M. I had the audacity to post your comment in the form of an answer. Drop me a note if you want to post it yourself, I&#39;ll just delete mine."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 0, "creation_date": 1560422008, "post_id": 56570237, "comment_id": 99734874, "body": "@CharonX Nope, that&#39;s fine.  Not a problem :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "is_accepted": true, "score": 2, "last_activity_date": 1560437869, "last_edit_date": 1560437869, "creation_date": 1560421611, "answer_id": 56578478, "question_id": 56570237, "link": "https://stackoverflow.com/questions/56570237/how-do-i-set-the-parent-of-a-widget-after-the-widget-has-already-been-initlized/56578478#56578478", "title": "How do I set the parent of a widget after the widget has already been initlized (ex. if the widget is a parameter to a function call)?", "body": "<p>(Disclaimer: Answer blatantly stolen from G.M.'s comment (with permission - see above ;))</p>\n\n<p>Simply use <a href=\"https://doc.qt.io/qt-5/qwidget.html\" rel=\"nofollow noreferrer\"><code>QWidget's</code></a> <a href=\"https://doc.qt.io/qt-5/qwidget.html#setParent\" rel=\"nofollow noreferrer\"><code>setParent(QWidget *parent)</code></a> method.</p>\n\n<p>Note: The new parent takes ownership of the <code>QWidget</code> (i.e. deallocating it when the parent is destroyed etc.) and you will need to call <code>show()</code> on the widget again to make it visible, as changing parents turns <code>QWidget</code>s invisible.</p>\n"}], "owner": {"reputation": 399, "user_id": 10833151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105e1c301f6ff60de3fbd9ef73fd19cc?s=128&d=identicon&r=PG&f=1", "display_name": "James Ronald", "link": "https://stackoverflow.com/users/10833151/james-ronald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 56578478, "answer_count": 1, "score": 0, "last_activity_date": 1560437869, "creation_date": 1560372935, "last_edit_date": 1560374532, "question_id": 56570237, "link": "https://stackoverflow.com/questions/56570237/how-do-i-set-the-parent-of-a-widget-after-the-widget-has-already-been-initlized", "title": "How do I set the parent of a widget after the widget has already been initlized (ex. if the widget is a parameter to a function call)?", "body": "<p>I know that usually parents are set by being given in the constructor argument, for example if you wanted to have a push button within a frame you could do: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QFrame frame = new QFrame();\nQPushButton* button = new QPushButton(frame);\n</code></pre>\n\n<p>But I already have the push button that I want to add as a child to a frame (it was received as an argument in the call to the function I'm working on). </p>\n\n<p>Is there any way to add an already existing widget as a child to another widget? Or add a new child to an existing or nonexistent parent?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560372946, "post_id": 56570194, "comment_id": 99719524, "body": "Why don&#39;t you specify lgamepad as a dependency in cmake? Than CMake will make sure correct placement is achieved."}, {"owner": {"reputation": 649, "user_id": 6826476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yROmV.png?s=128&g=1", "display_name": "Omid N", "link": "https://stackoverflow.com/users/6826476/omid-n"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560373430, "post_id": 56570194, "comment_id": 99719697, "body": "@SergeyA can you explain more on how I can do that?"}], "owner": {"reputation": 649, "user_id": 6826476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yROmV.png?s=128&g=1", "display_name": "Omid N", "link": "https://stackoverflow.com/users/6826476/omid-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1560373494, "answer_count": 0, "score": 0, "last_activity_date": 1560372704, "creation_date": 1560372704, "question_id": 56570194, "link": "https://stackoverflow.com/questions/56570194/how-to-insert-a-flag-at-the-end-of-the-execution-command-line-using-cmake", "closed_reason": "Duplicate", "title": "How to insert a flag at the end of the execution command line using CMake?", "body": "<p>I have the following files:</p>\n\n<pre><code>main.cpp\nlibgamepad\\libgamepad.so\nCMakeLists.txt\n</code></pre>\n\n<p>I can build the file using the following command:</p>\n\n<pre><code>c++ main.cpp -std=c++11 -L/projectDir/libgamepad -lgamepad -g\n</code></pre>\n\n<p>Below is the CMakeLists.txt content:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(DD2)\n\nset(CMAKE_VERBOSE_MAKEFILE TRUE)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(SOURCE_FILES main.cpp)\n\nadd_executable(DD2 ${SOURCE_FILES})\nset(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -L${CMAKE_CURRENT_SOURCE_DIR}/libgamepad -lgamepad\")\n</code></pre>\n\n<p>And I build the project with cmake the command which get executed is:</p>\n\n<pre><code>/usr/bin/c++    -std=c++11 -g   -L/projectDir/libgamepad -lgamepad CMakeFiles/DD2.dir/main.cpp.o  -o DD2\n</code></pre>\n\n<p>And it results in an error. I want to know if there is any way I can insert the two arguments (<code>-L/projectDir/libgamepad -lgamepad</code>) at the end of the execution command so the below command will be issued:</p>\n\n<pre><code>/usr/bin/c++    -std=c++11 -g   CMakeFiles/DD2.dir/main.cpp.o -L/projectDir/libgamepad -lgamepad -o DD2\n</code></pre>\n"}, {"tags": ["c++", "c++17", "template-meta-programming"], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560447277, "post_id": 56578723, "comment_id": 99749604, "body": "Thanks for explaining why my original implementation didn&#39;t work! Sometimes the error messages can be too confusing.   For now I decided to replace non-type template parameters with type ones, and stick to the implementation described it the question body.  Both your solution and this one have a major flaw: if your forget a) <code>using DerivedT = ...</code> b) not to use non-type template parameters, then you&#39;re doomed to debug some cryptic runtime errors, in my case it has even caused UB. But I believe that a) is easier to miss.  I would like to know if there is a solution without such flaw."}, {"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560447771, "post_id": 56578723, "comment_id": 99749817, "body": "&quot;I would also stay away from depending on <code>IsTemplateInstantiation</code>&quot;  I didn&#39;t intend to. It is just a safety mechanism: if one could have variadic both type and non-type in the same place, e.g <code>template &lt;template &lt;class..., auto...&gt; class DT, class... T, auto... params&gt; struct GetDeepest&lt;DT&lt;T..., params...&gt;&gt;</code>, then the example with <code>ParamBase&lt;Derived, false&gt;</code> would give a good answer, we just need to ensure using <code>IsTemplateInstantiation</code> that the order type--non-type hasn&#39;t been messed up"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560447937, "post_id": 56578723, "comment_id": 99749892, "body": "Well @NikitaPetrenko, I don&#39;t think there is any solution to forgetting to add this member type alias (you have to check that yourself periodically). In the end of the day, you need to have something to distinguish leaf-node types from other types up the hierarchy. Personally, I would choose adding a type alias like <code>DerivedT</code> (see for example the design of the standard library iterators, which is a bit similar in my opinion). Relying on &quot;A type is a leaf-type iff it is an instantiation of a class template&quot; is not always true (as I mentioned in my answer)."}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560448049, "post_id": 56578723, "comment_id": 99749937, "body": "If you choose to go that way, you lose both non-type template parameters (unless there is a solution that I can&#39;t see) and template leaf-types (like <code>Eigen::Matrix</code>). For these reasons, I find the member type alias solution to be much more flexible."}, {"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560448527, "post_id": 56578723, "comment_id": 99750136, "body": "No, I don&#39;t miss template leaf-types by using this solution. E.g., line 157 from here demonstrates my usage <a href=\"https://github.com/npetrenko/curse_dim/blob/fc60f8cf220aa3f7ee03addb079bd6d2e68fe427/src/kernel.hpp\" rel=\"nofollow noreferrer\">github.com/npetrenko/curse_dim/blob/&hellip;</a>"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560468433, "post_id": 56578723, "comment_id": 99756927, "body": "@NikitaPetrenko, hmm, I see, you are relying on <code>std::is_base_of</code> to filter out template parameters that are not derived classes. Looks good to me. I believe you can also wrap your non-type template arguments in an <code>std::integral_constant</code> to overcome the non-type template argument issue"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560468955, "post_id": 56578723, "comment_id": 99757021, "body": "and now I am starting to think that your template template parameter approach in <code>GetDeepest</code> might be more flexible :)"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560504108, "post_id": 56578723, "comment_id": 99766762, "body": "@NikitaPetrenko, btw, is there any advantage to making <code>B&lt;T&gt;</code> inherit from <code>A&lt;B&lt;T&gt;&gt;</code> instead of simply inheriting from <code>A&lt;T&gt;</code>? In this case, You can get rid of <code>GetDeepest</code> altogether."}, {"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560506910, "post_id": 56578723, "comment_id": 99768220, "body": "There are two advantages that I can come up with: 1) it allows <code>B&lt;T&gt;</code> to override methods from <code>A&lt;B&lt;T&gt;&gt;</code> 2) when inheriting from <code>B&lt;T&gt;</code> you only need to declare <code>friend class B&lt;T&gt;</code>, otherwise you also need <code>friend class A&lt;T&gt;</code>"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560517166, "post_id": 56578723, "comment_id": 99773331, "body": "@NikitaPetrenko, 1) I don&#39;t think I understand your point as you can <a href=\"https://wandbox.org/permlink/e4gWCAfut4Oa93uk\" rel=\"nofollow noreferrer\">always override the methods wherever you like</a> 2) Well, <a href=\"https://accu.org/index.php/journals/296\" rel=\"nofollow noreferrer\">proper encapsulation has always been a pain when using CRTP</a>."}, {"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560686173, "post_id": 56578723, "comment_id": 99810608, "body": "1) -- yes, you are right. I use CRTP to implement a pattern which is different from usual virtual finctions: <a href=\"https://pastebin.com/EwSeT8s5\" rel=\"nofollow noreferrer\">pastebin.com/EwSeT8s5</a>. Technically speaking, I could refactor my code not to use it, but I find it more readable this way"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1560687323, "post_id": 56578723, "comment_id": 99810856, "body": "hmm, I get your point, the base class is responsible to call the hiding function from the derived class. I haven&#39;t seen something like this before :) , but be careful not to forget to provide a hiding function in the derived when needed (or you&#39;ll get infinite recursion) :)"}], "tags": [], "owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1560447120, "last_edit_date": 1560447120, "creation_date": 1560422580, "answer_id": 56578723, "question_id": 56569771, "link": "https://stackoverflow.com/questions/56569771/traversing-crtp-inheritance-chain-for-template-base-classes-with-non-type-templa/56578723#56578723", "title": "Traversing CRTP inheritance chain for template base classes with non-type template parameters", "body": "<p>I would go back to the first solution you proposed in your original question (the one that assumes that each non-leaf class template declares a <code>DerivedT</code> type that aliases its derived class). Let's recall your first implementation:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct GetDeepest {\n    template &lt;class Test, class = typename Test::DerivedT&gt;\n    static std::true_type Helper(const Test&amp;);\n    static std::false_type Helper(...);\n\n    using HelperType = decltype(Helper(std::declval&lt;T&gt;()));\n    using Type = std::conditional_t&lt;std::is_same_v&lt;std::true_type, HelperType&gt;,\n                    GetDeepest&lt;typename T::DerivedT&gt;::Type,\n                    T&gt;;\n};\n</code></pre>\n\n<p>You seem to be missing that leaf classes also inherit the <code>DerivedT</code> member type declaration from their base class. Which means that calling <code>Helper(std::declval&lt;D&gt;())</code> will call the overload that returns <code>std::true_type</code>. In other words:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct A {\n    using DerivedT = T;\n};\n\nstruct D : A&lt;D&gt; {\n    using DerivedT = D; // inherited from A&lt;D&gt;\n};\n</code></pre>\n\n<p>As a result, when instantiating <code>GetDeepest&lt;D&gt;</code>, <code>GetDeepest&lt;D&gt;::Type</code> ends up aliasing <code>GetDeepest&lt;D::DerivedT&gt;::Type</code> which is <code>GetDeepest&lt;D&gt;::Type</code> and the compiler complains about <code>GetDeepest&lt;D&gt;::Type</code> not being a complete type since it is trying to be an alias to itself!</p>\n\n<p>Therefore, we need to change our recursion stopping condition. One solution that comes into mind is:</p>\n\n<blockquote>\n  <p>A type <code>T</code> is a leaf-node in the CRTP hierarchy iff its <code>DerivedT</code> member type is an alias to <code>T</code></p>\n</blockquote>\n\n<p>And the implementation is pretty straightforward:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\n// a type T is a leaf-node in the CRTP hierarchy iff:\n// its DerivedT member type is an alias to T\ntemplate &lt;typename T&gt;\ninline constexpr bool is_leaf_type_v = std::is_same_v&lt;T, typename T::DerivedT&gt;;\n\n// general case:\n// GetDeepest&lt;T&gt;::Type is an alias to GetDeepest&lt;T::DerivedT&gt;::Type\ntemplate &lt;typename T, typename = void&gt;\nstruct GetDeepest {\n    using Type = typename GetDeepest&lt;typename T::DerivedT&gt;::Type;\n};\n\n// base case: when T is a leaf type\n// We have reached a leaf node =&gt; GetDeepest&lt;T&gt;::Type is an alias to T\ntemplate &lt;typename T&gt;\nstruct GetDeepest&lt;T, std::enable_if_t&lt;is_leaf_type&lt;T&gt; &gt; &gt; {\n    using Type = T;\n};\n\n// tests\ntemplate &lt;class T&gt;\nstruct A {\n    using DerivedT = T;\n};\n\ntemplate &lt;class T&gt;\nstruct B : public A&lt;B&lt;T&gt; &gt; {\n    using DerivedT = T;\n};\n\nstruct C : B&lt;C&gt; {\n};\n\nstruct D : A&lt;D&gt; {\n};\n\nint main()\n{\n    static_assert(std::is_same&lt;GetDeepest&lt;A&lt;D&gt; &gt;::Type, D&gt;::value);\n    static_assert(std::is_same&lt;GetDeepest&lt;B&lt;C&gt; &gt;::Type, C&gt;::value);\n    static_assert(std::is_same&lt;GetDeepest&lt;A&lt;B&lt;C&gt; &gt; &gt;::Type, C&gt;::value);\n}\n</code></pre>\n\n<p>This approach does not require you to state the template arguments to your class in <code>GetDeepest</code> (which is the main issue in your 2nd questions If I understand correctly). I think that you can also implement <code>FindFirstMathing</code> in a similar manner.</p>\n\n<p>I would also stay away from depending on <code>IsTemplateInstantiation</code> to query whether a type is a leaf-type in the CRTP hierarchy or not (even if it is possible to implement). One counter-example that comes into mind is <code>Eigen::Matrix&lt;int, 3, 3&gt;</code> which is a class template CRTP leaf-type that inherits from <code>Eigen::PlainObjectBase&lt;Eigen::Matrix&lt;int, 3, 3&gt;&gt;</code>. Such a distinction between classes and class template instantiations is not what you are looking for.</p>\n"}], "owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1560447120, "creation_date": 1560370611, "last_edit_date": 1560374408, "question_id": 56569771, "link": "https://stackoverflow.com/questions/56569771/traversing-crtp-inheritance-chain-for-template-base-classes-with-non-type-templa", "title": "Traversing CRTP inheritance chain for template base classes with non-type template parameters", "body": "<p>This is a follow up to the question:\n<a href=\"https://stackoverflow.com/questions/56533399/get-deepest-class-in-crtp-inheritance-chain\">Get deepest class in CRTP inheritance chain</a></p>\n\n<p>The following code finds the first template argument which derives from the given instantiation of template CRTP base class and possibly recurses (this is just a more general solution to the previous question):</p>\n\n<pre><code>// Find the first type that matches the predicate\ntemplate &lt;template &lt;class T&gt; class Predicate, class... Args&gt;\nstruct FindFirstMatching {\n    using Type = ...; // Default NullType\n    static const bool has_match = ...; // whether there has been a match\n};\n\n// Utility class to get the deepest class in CRTP inheritance chain\ntemplate &lt;typename T&gt;\nstruct GetDeepest {\n    using Type = T;\n};\n\ntemplate &lt;template &lt;class...&gt; class DT, class... T&gt;\nstruct GetDeepest&lt;DT&lt;T...&gt;&gt; {\n    template &lt;class CLS&gt;\n    struct Predicate {\n        static const bool value = std::is_base_of_v&lt;DT&lt;T...&gt;, CLS&gt;;\n    };\n\n    static const bool HasCRTPDerived = FindFirstMatching&lt;Predicate, T...&gt;::has_match;\n    using DerivedT = typename FindFirstMatching&lt;Predicate, T...&gt;::Type;\n\n    using Type = std::conditional_t&lt;HasCRTPDerived, \n                                    typename GetDeepest&lt;DerivedT&gt;::Type, \n                                    DT&lt;T...&gt;&gt;;\n};\n</code></pre>\n\n<p>So I suppose that <code>DT&lt;T...&gt;</code> is in instantiation of CRTP base class. The problem is, it may have non-type template parameters as well, and I don't know how to cope with it in the most general way. </p>\n\n<p>For example:</p>\n\n<pre><code>template &lt;class DerivedT, bool param&gt;\nclass ParamBase {\n};\n\nclass Derived : public ParamBase&lt;Derived, false&gt; {\n};\n\nGetDeepest&lt;ParamBase&lt;Derived, false&gt;&gt;::Type == ParamBase&lt;Derived, false&gt;\n// instead of desirable\n// GetDeepest&lt;ParamBase&lt;Derived, false&gt;&gt;::Type == Derived\n</code></pre>\n\n<p>One of the possible solutions is to use something like type tags instead of non-type template parameters:</p>\n\n<pre><code>template &lt;class T&gt;\nA {};\n\nA&lt;TrueType&gt;;\nA&lt;FalseType&gt;;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>template &lt;bool param&gt;\nA{};\n</code></pre>\n\n<p>But I believe it is not a good solution.</p>\n\n<p>Also I could use something like <code>template &lt;class..., auto...&gt; DT</code>, but that would force me to use non-type template parameters in the end of parameter list. It is acceptable, but the problem is that it will fail disastrously if I forget about it.</p>\n\n<p>It would be ok if I could write something like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct GetDeepest {\n    static_assert(!IsTemplateInstantiation&lt;T&gt;::value);\n    using Type = T;\n};\n</code></pre>\n\n<p>My question is:</p>\n\n<p>How can I generalize the code to possible non-type template parameters?</p>\n\n<p>OR</p>\n\n<p>How can I implement <code>IsTemplateInstantiantion</code>?</p>\n\n<p>Edit:\nit seems like one cannot write <code>template &lt;class..., auto...&gt;</code> in C++17, so the latter is not an option.</p>\n"}, {"tags": ["c++", "recursion", "metaprogramming", "template-specialization", "template-variables"], "comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1560370463, "post_id": 56569685, "comment_id": 99718586, "body": "<i>Is there a way I can prevent the compiler from unrolling the recursion too far?</i> Yes, by adding a specialization for the base case that doesn&#39;t do a recursive instantiation."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1560371188, "post_id": 56569685, "comment_id": 99718865, "body": "@MilesBudnek I <i>don&#39;t</i> want this to be defined for <code>log2&lt;0&gt;</code> are you saying there&#39;s a better way to do this?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1560371258, "post_id": 56569685, "comment_id": 99718900, "body": "Never mind, I misread the base case as 0.  The <code>enable_if</code> makes sense."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1560371746, "post_id": 56569685, "comment_id": 99719092, "body": "Your template is recursive. For any recursion in our life we need a leaf case. In TMP the only way to provide a leaf case is with specialization. If you replace your TMP with constexpr function and constexpr if, you would be able to avoid specialization."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560372350, "post_id": 56569685, "comment_id": 99719296, "body": "@SergeyA that&#39;s a clever solution. I should tinker with that some."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1560372783, "post_id": 56569685, "comment_id": 99719464, "body": "@JonathanMee posted an answer to the same effect with some code."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1560373517, "post_id": 56570148, "comment_id": 99719725, "body": "So I do love your <code>log2</code> function there, but what if I wanted to prevent this from being called at runtime?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1560374421, "post_id": 56570148, "comment_id": 99719987, "body": "@JonathanMee the first one? None from the function itself. The second one is naturally compile-time only."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1560372463, "creation_date": 1560372463, "answer_id": 56570148, "question_id": 56569685, "link": "https://stackoverflow.com/questions/56569685/why-do-i-have-to-specialize-recursive-template-variables/56570148#56570148", "title": "Why do I have to specialize recursive template variables?", "body": "<p>You use recursion to calculate log2. Each and every recursive operation in our life needs the leaf case.</p>\n\n<p>In case of recursive leaf functions, the leaf case can be provided with non-recursive returns. However, with template variables the only way to provide the leaf case would be with specialization, there is no other way at all.</p>\n\n<p>I believe, that you can achieve the very same goals with constexpr function and no TMP:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nconstexpr int log2(int arg) {\n    if (arg == 0) return 0;\n    if (arg == 1) return 0;\n    return 1 + log2(arg / 2u);\n}\n\nconstexpr std::integral_constant&lt;int, log2(16)&gt; z; // z.value == 4\n</code></pre>\n\n<p>This works with both run-time and compile-time arguments and generally should be preferred over pure TMP solution, except for educational purposes.</p>\n\n<p>For educational or other undisclosed purposes, you can use exclusive compile-time like that:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;int arg&gt;\nconstexpr int log2(std::integral_constant&lt;int, arg&gt; ) {\n    static_assert(arg &gt; 0, \"Bad arg to log2!\");\n    if constexpr (arg == 1) {\n        return 0;\n    } else {\n        return 1 + log2(std::integral_constant&lt;int, arg / 2&gt; {});\n    }\n}\n\nint k = log2(std::integral_constant&lt;int, 16&gt;{});\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56570148, "answer_count": 1, "score": 1, "last_activity_date": 1560372463, "creation_date": 1560370167, "question_id": 56569685, "link": "https://stackoverflow.com/questions/56569685/why-do-i-have-to-specialize-recursive-template-variables", "title": "Why do I have to specialize recursive template variables?", "body": "<p>So I wrote an answer here: <a href=\"https://stackoverflow.com/a/56569397/2642059\">https://stackoverflow.com/a/56569397/2642059</a> which strives to compute <code>log2</code> at compile time like so:</p>\n\n<pre><code>template &lt;unsigned int x&gt;\nconstexpr enable_if_t&lt;x != 0U, int&gt; log2 = 1 + log2&lt;x / 2U&gt;;\n\ntemplate &lt;&gt;\nconstexpr int log2&lt;1U&gt; = 0;\n</code></pre>\n\n<p>This works fine but I didn't feel like I should have had to specialize:</p>\n\n<pre><code>template &lt;unsigned int x&gt;\nconstexpr enable_if_t&lt;x != 0U, int&gt; log2 = x &lt; 4U ? 1 : 1 + log2&lt;x / 2U&gt;;\n</code></pre>\n\n<p>But this <a href=\"https://ideone.com/mjPomf\" rel=\"nofollow noreferrer\">gives me the error</a>:</p>\n\n<blockquote>\n  <p>In substitution of <code>template&lt;bool _Cond, class _Tp&gt; using enable_if_t = typename std::enable_if::type [with bool _Cond = (0u != 0u); _Tp = int]</code>:<br>\n  prog.cpp:7:61:   recursively required from <code>constexpr std::enable_if_t&lt;true, int&gt; log2&lt;4u&gt;</code><br>\n  prog.cpp:7:61:   required from <code>constexpr std::enable_if_t&lt;true, int&gt; log2&lt;8u&gt;</code><br>\n  prog.cpp:10:11:   required from here\n  /usr/include/c++/6/type_traits:2523:61: error: no type named <code>type</code> in <code>struct std::enable_if&lt;false, int&gt;</code></p>\n</blockquote>\n\n<p>Is there a way I can prevent the compiler from unrolling the recursion too far?</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1560368407, "post_id": 56569247, "comment_id": 99717691, "body": "So what were the values of <code>i</code> and <code>j</code> when it crashed? You can see exactly what happened to cause a SEGV by running under a debugger, or by dumping a core file and opening <i>that</i> in the debugger."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 7, "creation_date": 1560368676, "post_id": 56569247, "comment_id": 99717791, "body": "Greater-or-equal violates the strict weak ordering required for <code>std::sort</code>. Therefore such a comparison will invoke undefined behavior when using that algorithm. You do not (and should not) need to test for direct or partial equivalence. All you should care about overall is <code>is-less-than</code> and return true in said condition."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1560429076, "post_id": 56569247, "comment_id": 99738792, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 5, "last_activity_date": 1560369026, "creation_date": 1560369026, "answer_id": 56569468, "question_id": 56569247, "link": "https://stackoverflow.com/questions/56569247/sorting-using-lambda-function-in-c/56569468#56569468", "title": "Sorting using lambda function in c++", "body": "<p>Your lambda does not provide a strict weak ordering, violating the contract the <code>std::sort</code> has.  This means the code has undefined behavior and a segmentation fault is a possible outcome of that.  With strict weak ordering if <code>a &lt; b</code> is <code>true</code> then <code>b &lt; a</code> must be <code>false</code>.  That doesn't happen here.  No matter what <code>i</code> and <code>j</code> are</p>\n\n<pre><code>w[0][i]&gt;w[0][j] || (w[0][i]==w[0][j] &amp;&amp; w[1][i]&gt;=w[1][j])\n</code></pre>\n\n<p>turns into</p>\n\n<pre><code>1 &gt; 1 || (1 == 1 &amp;&amp; 1 &gt;= 1)\n</code></pre>\n\n<p>which is</p>\n\n<pre><code>false || (true &amp;&amp; true)\n</code></pre>\n\n<p>which is just <code>true</code>.  If <code>i</code> and <code>j</code> (<code>a</code> and <code>b</code>) get swapped around, you still get the same result.  When you use <code>&gt;</code> instead of <code>&gt;=</code> then <code>1 &gt; 1</code> is <code>false</code> causing the lambda to return <code>false</code>and <code>sort</code> says that all of the items are equal.</p>\n"}], "owner": {"reputation": 41, "user_id": 11638737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d56760b45d2f41f0e5510f38d563228?s=128&d=identicon&r=PG&f=1", "display_name": "Carre", "link": "https://stackoverflow.com/users/11638737/carre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "closed_date": 1560429076, "answer_count": 1, "score": 2, "last_activity_date": 1560369026, "creation_date": 1560368180, "last_edit_date": 1560368381, "question_id": 56569247, "link": "https://stackoverflow.com/questions/56569247/sorting-using-lambda-function-in-c", "closed_reason": "Not suitable for this site", "title": "Sorting using lambda function in c++", "body": "<p>I don't understand what is wrong with the following simple sorting code. It compiles but produce a segmentation fault when I try to run it.</p>\n\n<p>I know there are other ways of doing the same kind of sorting, and the values that I'm using are all the same (so, there's nothing to sort), but I would like to understand why it produce a segmentation fault.</p>\n\n<p>There is no problem if I use <code>w[1][i]&gt;w[1][j]</code> instead of <code>w[1][i]&gt;=w[1][j]</code> in the comparator.</p>\n\n<pre><code>vector&lt;int&gt; a(100);\niota(a.begin(),a.end(),0);\nvector&lt;vector&lt;int&gt; &gt;  w(2,vector&lt;int&gt;(100,1));\nsort(a.begin(),a.end(),[&amp;w](const int i,const int j){return w[0][i]&gt;w[0][j] || (w[0][i]==w[0][j] &amp;&amp; w[1][i]&gt;=w[1][j]);});\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1560367112, "post_id": 56568976, "comment_id": 99717115, "body": "Maybe you could contribute a patch. There is already a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=50160\" rel=\"nofollow noreferrer\">defect report</a> on gcc&#39;s bugzilla."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1560367353, "post_id": 56568976, "comment_id": 99717205, "body": "<a href=\"https://isocpp.org/blog/2012/11/on-vectorbool\" rel=\"nofollow noreferrer\">Howard Hinnant wrote a piece that touches on this</a>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1560367460, "post_id": 56568976, "comment_id": 99717251, "body": "@user4581301 <a href=\"http://howardhinnant.github.io/onvectorbool.html\" rel=\"nofollow noreferrer\">The original</a> (with less weird picture of him, and better format)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 7, "creation_date": 1560368811, "post_id": 56568976, "comment_id": 99717856, "body": "Since almost everyone uniformly agrees that <code>std::vector&lt;bool&gt;</code> specialization was a spectacular fiasco, people are likely not to be interested in performance improvements."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1560373427, "post_id": 56568976, "comment_id": 99719695, "body": "<code>operator&lt;()</code> for all specialisations of <code>std::vector</code> is specified as being equivalent to using <code>std::lexicographical_compare</code>. Using a specialisation for <code>std::vector&lt;bool&gt;</code> that compares the underlying storage would add other requirements, like zeroing unused bits in the underlying representation (impost on all operations on a vector) versus <code>operator&lt;()</code> excluding those bits in the comparison, etc. A simpler explanation, however, is that <code>std::vector&lt;bool&gt;</code> is designed for SPACE efficiency not speed, so the gcc/clang developers probably didn&#39;t see the point of optimising for speed."}], "owner": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566471076, "creation_date": 1560366958, "last_edit_date": 1566471076, "question_id": 56568976, "link": "https://stackoverflow.com/questions/56568976/why-stdvectorbool-does-not-specialize-the-compare-function", "title": "Why std::vector&lt;bool&gt; does not specialize the compare function?", "body": "<p>I know that <code>std::vector&lt;bool&gt;</code> is a space-efficient specialization of <code>std::vector</code> for the type <code>bool</code>. I look up the clang and gcc  implementation and find that they  just use the underlying storage type <code>unsigned long</code> to store the 64 <code>bool</code> elements at once, but why they didn't specialize the compare function such as <code>operator&lt;</code>?</p>\n\n<p>As you see the following code, they just use <code>std::lexicographical_compare</code> to compare two <code>vector&lt;bool&gt;</code>, which is inefficient:</p>\n\n<pre><code>template &lt;class Allocator&gt;\nbool operator&lt; (const vector&lt;bool, Allocator&gt;&amp; x, const vector&lt;bool, Allocator&gt;&amp; y)\n{\n    return std::lexicographical_compare(x.begin(), x.end(), y.begin(), y.end());\n}\n</code></pre>\n\n<p>If you use the underlying storage type to store the 64 <code>bool</code> elements, why not compare them at once just according to the machine endianness?</p>\n"}, {"tags": ["c++", "c++17", "factory", "template-meta-programming"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1560366416, "post_id": 56568846, "comment_id": 99716809, "body": "For the first error I think you need to remove  <code>const</code> here:  <code>const auto&amp; gFactory = Factory&lt;Widget&gt;::getInstance();</code> you are modifying <code>gFactory</code> with <code>gFactory.registerType(protoType, 32u)</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1560366866, "post_id": 56568846, "comment_id": 99717001, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, with all the relevant code <i>in the question</i>."}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 1, "creation_date": 1560367423, "post_id": 56568846, "comment_id": 99717237, "body": "You should really fix all the unrelated compile errors (e.g. trying to copy a <code>unique_ptr</code> instead of moving it) before posting a question. I was going to write an answer, but with that many unrelated errors I can&#39;t even work on the problem you want to fix."}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560368352, "post_id": 56568846, "comment_id": 99717669, "body": "Thanks I just fixed the compilation issues and reworked the question to focus on the meta-programming aspects"}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560368466, "post_id": 56569295, "comment_id": 99717724, "body": "Thanks! I think I was fixing the code in the background after a const hint from @drescherjm - the question has been edited to focus on the real problem of meta programming now"}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 0, "creation_date": 1560368489, "post_id": 56569295, "comment_id": 99717733, "body": "This doesn&#39;t answer the original question though, how to constrain the <code>Factory</code> template parameter to types implementing <code>ICloneable</code>."}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560368612, "post_id": 56569295, "comment_id": 99717770, "body": "I agree - that is what I just commented"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 0, "creation_date": 1560369470, "post_id": 56569295, "comment_id": 99718165, "body": "@Pezo The question was edited as I was answering it."}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560373171, "post_id": 56569295, "comment_id": 99719610, "body": "@Yakk-AdamNevraumont yikes - your second example is a bit of black magic.  I&#39;m running down many rabbit holes trying to understand it.  I&#39;m not sure what the whole token thing is about (looks like a way of using unique ptr for the factory instance), and I am curious as to how to implemented the singleton via meta-programming as you indicated."}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560373727, "post_id": 56569295, "comment_id": 99719783, "body": "@Yakk-AdamNevraumont could you explain the line template &lt;typename T, std::enable_if_t &lt;can_clone&lt;T&gt;{}, bool&gt; = true&gt; how does it work - you can edit your answer and I&#39;ll accept it if you wish"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560377771, "post_id": 56569295, "comment_id": 99720917, "body": "@john it permits delegating right to construct to another spot without messing with friendship; yes, for make unique.  The second is a SFINAE technique; it is a substitution failure, or a template non-type parameter of type bool and value true, depending on can clone."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560377837, "post_id": 56569295, "comment_id": 99720934, "body": "@john singleton via templates, I&#39;d ask a SO question or search for one."}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 0, "creation_date": 1560404898, "post_id": 56569295, "comment_id": 99726202, "body": "You could also replace the <code>enable_if</code> with a static assertion to the same effect to improve the error message, now it says <code>error: no type named &#39;type&#39; in &#39;struct std::enable_if&lt;false, bool&gt;&#39;</code> for invalid types."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 0, "creation_date": 1560425783, "post_id": 56569295, "comment_id": 99736902, "body": "@pezo static assert means you cannot in turn SFINAE detect if a type can be passed to Factory.  The error from any SFINAE comes &quot;too late&quot;."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1560370284, "last_edit_date": 1560370284, "creation_date": 1560368347, "answer_id": 56569295, "question_id": 56568846, "link": "https://stackoverflow.com/questions/56568846/creating-a-template-constrained-c-factory/56569295#56569295", "title": "Creating a template constrained c++ factory", "body": "<p>The first problem is <code>gFactory</code> is a <code>const&amp;</code>.  <code>registerType</code> is a non-<code>const</code> method.</p>\n\n<pre><code>auto&amp; gFactory = Factory&lt;Widget&gt;::getInstance();\n</code></pre>\n\n<p>to fix that.</p>\n\n<pre><code>gFactory.registerType(protoType, 32u);\n</code></pre>\n\n<p><code>registerType</code> is expecting a <code>unique_ptr&lt;Widget&gt;</code>.  You are passing in a <code>unique_ptr&lt;Widget&gt;</code>, but you are trying to copy it.</p>\n\n<p>You cannot copy a <code>unique_ptr</code>.</p>\n\n<pre><code>gFactory.registerType(std::move(protoType), 32u);\n</code></pre>\n\n<p>Next, a missing argument and similar problem here:</p>\n\n<pre><code>  const auto&amp; [iter, inserted] = mFactoryRegInfo.try_emplace(rkey, std::move(protoType));\n</code></pre>\n\n<p>and you discard a nodiscard argument in <code>main</code>.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1fbd1f71ee2e23bb\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>Requiring <code>ICloneable&lt;T&gt;</code> is actually considered an anti-pattern in generic code.</p>\n\n<pre><code>template&lt;class T, class C=std::unique_ptr&lt;T&gt;&gt;\nstruct can_clone:std::false_type{};\n\ntemplate&lt;class T&gt;\nstruct can_clone&lt;T, decltype( std::declval&lt;T const&amp;&gt;().clone() )&gt;:std::true_type {};\n\ntemplate &lt;typename T,\n  std::enable_if_t&lt; can_clone&lt;T&gt;{}, bool &gt; = true\n&gt;\nclass Factory final {\npublic:\n    //! Thread safe singleton pattern\n    static Factory&amp; getInstance() {\n        static std::unique_ptr&lt;Factory&gt; pInstance = std::make_unique&lt;Factory&gt;(token{0});\n        return *pInstance;\n    }\n\n    //! Registers a new cloneable type in the factory.\n    [[nodiscard]] bool registerType(std::unique_ptr&lt;T&gt; protoType, const uint32_t rkey) {\n        // Critical Section\n        std::lock_guard&lt;std::mutex&gt; lock(MutexGuard);\n        const auto&amp; [iter, inserted] = mFactoryRegInfo.try_emplace(rkey, std::move(protoType));\n        return inserted;\n    }\n\n    //! Factory function - returns newly cloned unique_ptr&lt;T&gt;.\n    [[nodiscard]] std::unique_ptr&lt;T&gt; getClone(const uint32_t rkey) const {\n        // Critical Section\n        std::lock_guard&lt;std::mutex&gt; lock(MutexGuard);\n        const auto&amp; iter = mFactoryRegInfo.find(rkey);\n        if (iter != mFactoryRegInfo.end()) {\n            return iter-&gt;second-&gt;clone();\n        }\n        return nullptr;\n    }\n\n    //! C.67: A polymorphic class should suppress copying.\n    Factory(const Factory&amp;) = delete;\n    Factory(Factory&amp;&amp;) noexcept = delete;\n    Factory&amp; operator=(const Factory&amp;) = delete;\n    Factory&amp; operator=(Factory&amp;&amp;) noexcept = delete;\n\n    //! Defaulted destructor.\n    ~Factory() = default;\nprivate:\n    //! Singleton private constructor.\n    Factory() = default;\n    struct token { explicit token(int){} };\npublic:\n    explicit Factory(token):Factory() {}\nprivate:\n\n    // UUID (uint32_t) to T mapping\n    std::map&lt;uint32_t, std::unique_ptr&lt;T&gt;&gt; mFactoryRegInfo{};\n\n    mutable std::mutex MutexGuard;\n};\n</code></pre>\n\n<p>this simply requires <code>T</code> have a <code>T::clone() const</code> method that supports returns <code>unique_ptr&lt;T&gt;</code>.</p>\n\n<p>An improvement would be to require that it return a type <em>convertible to</em> <code>unique_ptr&lt;T&gt;</code>.</p>\n\n<p>Also note I cleaned up your singleton code.  As a note, you shouldn't mix singleton code with functional code; there can be plenty of reasons to have more than one <code>Factory&lt;Bob&gt;</code> in the same code base, from unit testing to wanting document-specific object factories.</p>\n\n<p>Singleton, if needed, can be implemented as a separate bit of template metaprogramming.</p>\n\n<p>This will save your life when you realize that singleton lifetime gets insanely more complex when you mix dynamic library loading in.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a0d74050f7a3527a\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560369500, "post_id": 56569488, "comment_id": 99718183, "body": "that works thanks, why the pointer semantics in the &#39;std::is_convertible&#39;?  It also works with &#39;std::is_convertible&lt;T, ICloneable&lt;T&gt;&gt;::value&#39;"}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "reply_to_user": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 1, "creation_date": 1560369847, "post_id": 56569488, "comment_id": 99718325, "body": "Because you do polymorphism by pointer or reference. Didn&#39;t work for me without the pointer..."}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560370222, "post_id": 56569488, "comment_id": 99718485, "body": "I stand corrected! I missed an error when I removed the pointers"}, {"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560389044, "post_id": 56569488, "comment_id": 99722986, "body": "actually, I think std::is_base_of might be a better choice as it exploits the &#39;is a&#39; relationship in which case the pointer trick is not necessary.  <a href=\"http://coliru.stacked-crooked.com/a/534fd9a282bf2740\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/534fd9a282bf2740</a>"}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "reply_to_user": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1560404594, "post_id": 56569488, "comment_id": 99726110, "body": "No it&#39;s not, I extended my answer accordingly (at least in the case of your original question). For checking that you passed the right template argument to <code>ICloneable</code> I&#39;m not quite sure, it may be more appropriate there."}], "tags": [], "owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "is_accepted": false, "score": 3, "last_activity_date": 1560404379, "last_edit_date": 1560404379, "creation_date": 1560369131, "answer_id": 56569488, "question_id": 56568846, "link": "https://stackoverflow.com/questions/56568846/creating-a-template-constrained-c-factory/56569488#56569488", "title": "Creating a template constrained c++ factory", "body": "<p>You can use a static assertion like this inside <code>Factory</code> to make sure <code>T</code> implements <code>ICloneable&lt;T&gt;</code>:</p>\n\n<pre><code>static_assert(std::is_convertible&lt;T*, ICloneable&lt;T&gt;*&gt;::value, \"T must implement ICloneable&lt;T&gt;\");\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/610dddef1e0debe8\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<p>Note that although there is the <code>std::is_base_of</code> trait, <code>std::is_convertible</code> is indeed the right type trait to use in this case. To quote <a href=\"https://en.cppreference.com/w/cpp/types/is_base_of#Notes\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p><code>std::is_base_of&lt;A, B&gt;::value</code> is true even if <code>A</code> is a private, protected, or ambiguous base class of <code>B</code>. In many situations, <code>std::is_convertible&lt;B*, A*&gt;</code> is the more appropriate test.</p>\n</blockquote>\n"}], "owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "closed_date": 1560425728, "answer_count": 2, "score": 2, "last_activity_date": 1560404379, "creation_date": 1560366291, "last_edit_date": 1560368308, "question_id": 56568846, "link": "https://stackoverflow.com/questions/56568846/creating-a-template-constrained-c-factory", "closed_reason": "Not suitable for this site", "title": "Creating a template constrained c++ factory", "body": "<p>I am fairly new to meta programming and I am trying to create a factory singleton that creates cloneable objects.  To this end I have the following code which I have also shared in <strong><a href=\"http://coliru.stacked-crooked.com/a/5e94bba24fc6d1fb\" rel=\"nofollow noreferrer\">live coliru</a></strong></p>\n\n<p>The thing I am trying to achieve (and it is not included in the code in the coliru link) is to constrain the factory to only allow its <code>typename T</code> to <code>ICloneable</code> interfaces.</p>\n\n<p>This <code>ICloneable</code> interface is defined as follows:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass ICloneable {\npublic:\n    virtual std::unique_ptr&lt;T&gt; clone() const = 0;\n};\n</code></pre>\n\n<p>The code to instantiate the factory is shown below.</p>\n\n<p>The closest answer that I can see is <a href=\"https://stackoverflow.com/questions/39792147/factory-of-templated-class\">factory of templated class</a>.  I was thinking that something along the lines of type traits would be helpful - like <code>std::is_same_v</code> - but I have no experience with these meta programming techniques.</p>\n\n<pre><code>int main()\n{\n    auto protoType = std::make_unique&lt;Widget&gt;(1,2);\n    const auto gpFactory = Factory&lt;Widget&gt;::getInstance();\n    gpFactory-&gt;registerType(std::move(protoType), 32u);\n    auto cloned = gpFactory-&gt;getClone(32u);\n    std::cout &lt;&lt; *cloned;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 2334, "user_id": 3374785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6s7hE.jpg?s=128&g=1", "display_name": "Andrei Cioara", "link": "https://stackoverflow.com/users/3374785/andrei-cioara"}, "edited": false, "score": 0, "creation_date": 1560435205, "post_id": 56569307, "comment_id": 99742886, "body": "Exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": true, "score": 3, "last_activity_date": 1560368383, "creation_date": 1560368383, "answer_id": 56569307, "question_id": 56568793, "link": "https://stackoverflow.com/questions/56568793/qt-qspinbox-accelerated-step-size/56569307#56569307", "title": "Qt QSpinBox accelerated step size", "body": "<p>As a first suggestion you should try the built-in functionality of the <code>QSpinBox</code>. </p>\n\n<pre><code>#include &lt;QSpinBox&gt;\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    auto w=new QSpinBox;\n    w-&gt;setAccelerated(true);\n    w-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 2334, "user_id": 3374785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6s7hE.jpg?s=128&g=1", "display_name": "Andrei Cioara", "link": "https://stackoverflow.com/users/3374785/andrei-cioara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 56569307, "answer_count": 1, "score": 2, "last_activity_date": 1560373806, "creation_date": 1560366074, "last_edit_date": 1560373806, "question_id": 56568793, "link": "https://stackoverflow.com/questions/56568793/qt-qspinbox-accelerated-step-size", "title": "Qt QSpinBox accelerated step size", "body": "<p>I have a <code>QSpinBox</code> in Qt. The widget comes with one increaseValue and one decreaseValue arrow. Clicking the arrow increases the value as determined by <code>singleStep</code>, while pressing and holding the arrow increases the value by <code>singleStep</code> every X milliseconds (depending on system settings).</p>\n\n<p>What is the best way to implement an experience where pressing and holding will increase / decrease the value faster as times goes on. I am thinking of either</p>\n\n<ul>\n<li><p>Start with <code>singleStep</code> increments for the first 2 seconds, then increment by <code>2 * singleStep</code>, then <code>4 * singleStep</code>, until released</p></li>\n<li><p>Increment by <code>singleStep</code> every X milliseconds, then after the first 2 seconds of holding the arrow pressed, increment by <code>singleStep</code> every X / 2 milliseconds, etc</p></li>\n</ul>\n\n<p>Whichever is easier.</p>\n"}, {"tags": ["c++", "image-processing", "itk"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560392058, "post_id": 56568626, "comment_id": 99723459, "body": "If you can do it in C, you can do it in C++ in exactly the same way."}], "answers": [{"tags": [], "owner": {"reputation": 2597, "user_id": 276168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c3737e23c60ee88122120ea1eff8017?s=128&d=identicon&r=PG", "display_name": "D\u017eenan", "link": "https://stackoverflow.com/users/276168/d%c5%beenan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560367539, "creation_date": 1560367539, "answer_id": 56569117, "question_id": 56568626, "link": "https://stackoverflow.com/questions/56568626/binomialblurimagefilter-apply-kernel-to-image/56569117#56569117", "title": "BinomialBlurImageFilter apply kernel to image", "body": "<p>It looks like you are missing <code>blurFilter-&gt;Update();</code></p>\n\n<p>If <code>BinomialBlurImageFilter</code> does not already implement what you want, you might want to examine <a href=\"https://itk.org/Doxygen/html/classitk_1_1ConvolutionImageFilter.html\" rel=\"nofollow noreferrer\"><code>ConvolutionImageFilter</code></a>.</p>\n"}], "owner": {"reputation": 533, "user_id": 7839759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b65e869f62a18de42a40546eb4806f2?s=128&d=identicon&r=PG&f=1", "display_name": "Habebit", "link": "https://stackoverflow.com/users/7839759/habebit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560367539, "creation_date": 1560365388, "question_id": 56568626, "link": "https://stackoverflow.com/questions/56568626/binomialblurimagefilter-apply-kernel-to-image", "title": "BinomialBlurImageFilter apply kernel to image", "body": "<p>Is it possible to apply a custom 3x3 kernel to the <code>BinomialBlurImageFilter()</code> function? I always see the term <code>repitions</code>. In python or c it's quite easy to apply a custom 3x3 kernel, but in c++ I have no clue if it is possible or not.</p>\n\n<blockquote>\n  <p>Example kernel (3x3): <br>\n  1 2 1 <br>\n  2 4 2 <br>\n  1 2 1</p>\n</blockquote>\n\n<p>I've created a <code>BinomialBlurImageFilter</code> with the following line of code: </p>\n\n<pre><code>typedef itk::BinomialBlurImageFilter&lt;InputImageType, OutputImageType&gt; BinomialFilterType;\nBinomialFilterType::Pointer blurFilter = BinomialFilterType::New();\nblurFilter-&gt;SetInput(inputImage);\n// here I want to apply a custom 3x3 kernel\nOutputImageType::Pointer binomImage = blurFilter-&gt;GetOutput();\n</code></pre>\n\n<p>The documentation doesn't help me either <a href=\"https://itk.org/Doxygen/html/classitk_1_1BinomialBlurImageFilter.html\" rel=\"nofollow noreferrer\">Documentation</a>. I've found an example with a kernel but I didn't get the concept of applying the kernel <a href=\"https://itk.org/Doxygen/html/SphinxExamples_2src_2Filtering_2Smoothing_2BlurringAnImageUsingABinomialKernel_2Code_8cxx-example.html#_a1\" rel=\"nofollow noreferrer\">Example</a>. I'm a total c++ beginner, but maybe someone of you could explain it to me in a understandable way. </p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1560364767, "post_id": 56568489, "comment_id": 99716108, "body": "I&#39;m not sure I understand. Do you want to sort your collection of <code>Sfere</code> by <code>volum</code>? What happened to <code>001</code> and <code>006</code> in your second output? Edit : It seems you want to find duplicate values of <code>volum</code>. Is this correct?"}, {"owner": {"reputation": 13, "user_id": 11638614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bcf49dce3ea50e95e0689c13de379ca?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/11638614/christian"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1560364888, "post_id": 56568489, "comment_id": 99716158, "body": "yes , but without using STL"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1560365272, "post_id": 56568489, "comment_id": 99716327, "body": "@Christian What is wrong with using the STL? It makes this job very easy, using <code>std::vector</code> and <code>std::sort()</code>, for instance."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1560365296, "post_id": 56568489, "comment_id": 99716337, "body": "The simplest fast way probably is to sort the array by volume which will put equivalent volumes next to each other. Then you could just scan the list looking for volumes that appear multiple times."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 3, "creation_date": 1560365316, "post_id": 56568489, "comment_id": 99716346, "body": "@bruno &quot;<i>(std::* are part of C++ since C++11)</i>&quot; - standard containers and algorithms have existed in C++ long before C++11 came along."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1560365393, "post_id": 56568489, "comment_id": 99716376, "body": "@RemyLebeau Probably some assignment requirements."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1560365417, "post_id": 56568489, "comment_id": 99716384, "body": "@bruno you are still mistaken"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1560365452, "post_id": 56568489, "comment_id": 99716405, "body": "@Christian what exactly do you not understand? Please be more specific."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1560365500, "post_id": 56568489, "comment_id": 99716429, "body": "@bruno yes, they were part of the C++ standard way before C++11, as Fran&#231;ois said."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1560366110, "post_id": 56568489, "comment_id": 99716671, "body": "Is this a significantly different question than <a href=\"https://stackoverflow.com/q/56531869/212858\">stackoverflow.com/q/56531869/212858</a> and <a href=\"https://stackoverflow.com/q/56547185/212858\">stackoverflow.com/q/56547185/212858</a> ? Are you creating new users each time deliberately, or having a hard time logging back in?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1560366633, "post_id": 56568489, "comment_id": 99716899, "body": "Please read <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">&quot;What Every Computer Scientist Should Know About Floating Point&quot;</a> before comparing floating point values for equality."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560370277, "post_id": 56568489, "comment_id": 99718512, "body": "Please stop creating new accounts."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1560370003, "last_edit_date": 1560370003, "creation_date": 1560369565, "answer_id": 56569569, "question_id": 56568489, "link": "https://stackoverflow.com/questions/56568489/display-same-values-of-a-member-of-structure-c/56569569#56569569", "title": "Display same values of a member of structure C++", "body": "<p>Let's give this another go:  </p>\n\n<pre><code>static const unsigned int ID_CAPACITY = 256;\nstatic const unsigned int MAX_UNIQUE_VOLUMES = 512;\n\nstruct Record\n{\n    double volume;\n    int    ids[ID_CAPACITY];\n    unsigned int ids_size;\n};\n\nRecord database[MAX_UNIQUE_VOLUMES];\n\nint main()\n{\n    double       volume;\n    int          id;\n    static const double epsilon = 1e-06;\n    unsigned int database_size = 0U;\n\n    std::ifstream input_file(\"data.txt\");\n    while (input_file &gt;&gt; id &gt;&gt; volume)\n    {\n       bool volume_is_duplicate(false);\n       // Find a duplicate volume\n       for (unsigned int i = 0U; i &lt; database_size; ++i)\n       {\n           const double volume_from_database = database[i].volume;\n           const double diff = std::abs(volume - volume_from_database);\n           if (diff &lt; epsilon)\n           {\n               unsigned int id_index = database[i].ids_size;\n               database[i].ids[id_index] = id;\n               ++(database[i].ids_size);\n               duplicate_volume = true;\n               break;\n           }\n       }\n       if (!duplicate_volume)\n       {\n           Record r;\n           r.volume = volume;\n           r.ids[0] = id;\n           r.ids_size = 1;\n           database[database_size] = r;\n           ++database;\n        }\n    }\n    std::cout &lt;&lt; \"\\n\\nPaused. Press ENTER to continue.\\n\";\n    std::cin.ignore(100000, '\\n');\n    return 0;\n}  \n</code></pre>\n\n<p>In the above program, the record is read in as two separate variables.  The database is searched for an equivalent volume.  If an equivalent volume exists, the new value is append to the ID container.  If the volume is unique, the record is appended to the database.  </p>\n\n<p>Printing of the database is left as an exercise for the OP (as well as boundary/range checking).</p>\n\n<p>The <em>trick</em> here is to organize the database by volume, not by ID.  Each database record will contain IDs of equivalent volumes:  </p>\n\n<pre><code>  vol.    IDs  \n+-------+-----+  \n| 213.1 | 001 |\n+-------+-----+-----+  \n| 414.7 | 002 | 004 |  \n+-------+-----+-----+  \n| 718.3 | 003 | 005 |  \n+-------+-----+-----+  \n| 114.5 | 006 |  \n+-------+-----+  \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11638614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bcf49dce3ea50e95e0689c13de379ca?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/11638614/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1560370247, "accepted_answer_id": 56569569, "answer_count": 1, "score": -2, "last_activity_date": 1560370003, "creation_date": 1560364677, "last_edit_date": 1560365118, "question_id": 56568489, "link": "https://stackoverflow.com/questions/56568489/display-same-values-of-a-member-of-structure-c", "closed_reason": "Duplicate", "title": "Display same values of a member of structure C++", "body": "<p>I have a list of geometric figures witch contains : code of figure and volume.\nFor example:</p>\n\n<blockquote>\n  <p>001 213.1</p>\n  \n  <p>002   414.7</p>\n  \n  <p>003   718.3</p>\n  \n  <p>004   414.7</p>\n  \n  <p>005   718.3</p>\n  \n  <p>006   114.5</p>\n</blockquote>\n\n<p>I need to find duplicate values of volume and display it,so at the exit i need to get:</p>\n\n<blockquote>\n  <p>002 414.7</p>\n  \n  <p>004 414.7</p>\n  \n  <p>003 718.3</p>\n  \n  <p>005 718.3</p>\n</blockquote>\n\n<p>Please help me</p>\n\n<pre><code>struct Sfere\n    {\n      char codsf[5];\n      float volum;\n    } sf[100];\n</code></pre>\n"}, {"tags": ["c++", "sorting", "vector"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1560364511, "post_id": 56568349, "comment_id": 99716006, "body": "Use <code>std::sort</code> with custom comparer."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1560365259, "post_id": 56568349, "comment_id": 99716324, "body": "You can make projections: <a href=\"http://coliru.stacked-crooked.com/a/1e4aa7971dd9fc2d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/1e4aa7971dd9fc2d</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11614354"}, "edited": false, "score": 0, "creation_date": 1560368433, "post_id": 56568349, "comment_id": 99717704, "body": "It seems ts ask about multiple sortings, that is array that sorted by criterion 1 taken separately. And simultaneously the same array at the same time  sorted by criterion 2. I.e. independently. And possible duplicate says about single sorting : by criterion 1 and within the same values of criterion 1 also sorted by criterion 2."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1560366160, "last_edit_date": 1560366160, "creation_date": 1560364590, "answer_id": 56568469, "question_id": 56568349, "link": "https://stackoverflow.com/questions/56568349/sorting-multiple-data-members/56568469#56568469", "title": "Sorting multiple data members", "body": "<p>Use <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">std::sort</a> and write a <code>Compare</code> functor for each of your cases. If you need to combine multiple fields, use <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"nofollow noreferrer\">std::tie</a>.</p>\n\n<p>Here's an example. You don't need to make the sorting functions <code>static</code> members like I've done here but it makes it possible to use <code>std::tie</code> with private members.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Vehicle {\npublic:\n    Vehicle(unsigned maxSpeed, unsigned short numberOfHorsePower,\n            unsigned short numberOfGears, unsigned short numberOfWheels,\n            unsigned weight) :\n        maxSpeed_(maxSpeed),\n        numberOfHorsePower_(numberOfHorsePower), numberOfGears_(numberOfGears),\n        numberOfWheels_(numberOfWheels), weight_(weight) {}\n\n    // you can use the accessor functions with loose sort statements if you don't\n    // need to tie many columns together\n\n    inline unsigned get_maxSpeed() const { return maxSpeed_; }\n    inline unsigned short get_numberOfHorsePower() const {\n        return numberOfHorsePower_;\n    }\n    inline unsigned short get_numberOfGears() const { return numberOfGears_; }\n    inline unsigned short get_numberOfWheels() const { return numberOfWheels_; }\n    inline unsigned get_weight() const { return weight_; }\n\n    // sorting functions\n\n    template&lt;typename It&gt;\n    static void sort_on_speed(It first, It last) {\n        std::sort(first, last,\n            // a lambda receiving references to two Vehicle objects to compare\n            [](const Vehicle&amp; a, const Vehicle&amp; b) {\n                // return true if a is less than b (using the field you want)\n                return a.maxSpeed_ &lt; b.maxSpeed_;\n            }\n       );\n    }\n\n    template&lt;typename It&gt;\n    static void sort_on_hp_plus_speed(It first, It last) {\n        std::sort(first, last,\n            // another lambda using std::tie to sort primarily on hp\n            // and secondary on speed\n            [](const Vehicle&amp; a, const Vehicle&amp; b) {\n                return std::tie(a.numberOfHorsePower_, a.maxSpeed_) &lt;\n                       std::tie(b.numberOfHorsePower_, b.maxSpeed_);\n        });\n    }\n\nprivate:\n    unsigned int maxSpeed_;\n    unsigned short numberOfHorsePower_;\n    unsigned short numberOfGears_;\n    unsigned short numberOfWheels_;\n    unsigned int weight_;\n};\n\nint main() {\n    std::vector&lt;Vehicle&gt; cars = {\n        {1, 2, 3, 4, 5}, {2, 3, 4, 5, 1}, {3, 4, 5, 1, 2}\n    };\n\n    // sort on speed\n    Vehicle::sort_on_speed(cars.begin(), cars.end());\n\n    // sort on hp + speed\n    Vehicle::sort_on_hp_plus_speed(cars.begin(), cars.end());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6101270"}, "is_accepted": false, "score": 0, "last_activity_date": 1560364964, "last_edit_date": 1560364964, "creation_date": 1560364836, "answer_id": 56568520, "question_id": 56568349, "link": "https://stackoverflow.com/questions/56568349/sorting-multiple-data-members/56568520#56568520", "title": "Sorting multiple data members", "body": "<p><a href=\"https://www.boost.org/doc/libs/1_55_0/libs/multi_index/doc/tutorial/basics.html\" rel=\"nofollow noreferrer\"><code>boost.multiindex</code></a> should be very useful.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9335104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1560364912, "accepted_answer_id": 56568469, "answer_count": 2, "score": 1, "last_activity_date": 1594040785, "creation_date": 1560364119, "last_edit_date": 1594040785, "question_id": 56568349, "link": "https://stackoverflow.com/questions/56568349/sorting-multiple-data-members", "closed_reason": "Duplicate", "title": "Sorting multiple data members", "body": "<p>What should be the best approach to make multiple sortings in vector of pointers (<code>std::vector&lt;SomeObject*</code>)? Should I make one sorting function for multiple data members and what would be the best way to do it? Or maybe I should make separate functions for each data member? Or maybe i should use some things from <code>std::sort()</code>?\nLet's say i have some class Vehicle with some data members</p>\n<pre><code>    class Vehicle{\n    private:\n        unsigned int _maxSpeed;\n        unsigned short _numberOfHorsePower;\n        unsigned short _numberOfGears;\n        unsigned short _numberOfWheels;\n        unsigned int _weight;\n    }\n</code></pre>\n<p>And I would like to have option to sort those objects by each data member e.g <code>SortByMaxSpeedAsc()</code>,<code>SortByWeightAsc()</code>,<code>SortByWeightDesc()</code>.</p>\n<p>sample sorting of one data member</p>\n<pre><code>    void Vehicles::sortVehiclesByWeightAsc()\n    {\n        Vehicle* tmp;\n        size_t n = _VehiclesCollection.size();\n        int i, j, minIndex;\n    \n        for (i = 0; i &lt; n - 1; i++) \n        {\n            minIndex = i;\n            for (j = i + 1; j &lt; n; j++) \n            {\n                if (_VehiclesCollection[j].weight &lt; _VehiclesCollection[minIndex].weight)\n                {\n                    minIndex = j;\n                }\n            }\n    \n            if (minIndex != i) \n            {\n                tmp = _VehiclesCollection[i];\n                _VehiclesCollection[i] = _VehicleCollection[minIndex];\n                _VehiclesCollection[minIndex] = tmp;\n            }\n    \n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "dynamic-programming", "recursive-backtracking"], "comments": [{"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1560365098, "post_id": 56568296, "comment_id": 99716255, "body": "First of all, why do you even need to store the optimal set of garments? The problem only asks for the maximum cost, so you only have to store that. In your case, you&#39;re using a global variable to keep track of the maximum cost that you&#39;ve seen instead of returning it from the function, so all you need to keep track of in your DP table is whether you&#39;ve already explored a state. If you reach a state that you&#39;ve already explored, you can immediately return without doing anything since you know that any optimal states from here on have already been explored previously."}, {"owner": {"reputation": 119, "user_id": 7421002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b407810cbca061af5b11f54b3253a9?s=128&d=identicon&r=PG&f=1", "display_name": "Primalr3d", "link": "https://stackoverflow.com/users/7421002/primalr3d"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1560373206, "post_id": 56568296, "comment_id": 99719624, "body": "@AlexanderZhang Yeah that true. I did that just because I thought it&#39;d be nice to know which choices lead to the optimal solution."}, {"owner": {"reputation": 119, "user_id": 7421002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b407810cbca061af5b11f54b3253a9?s=128&d=identicon&r=PG&f=1", "display_name": "Primalr3d", "link": "https://stackoverflow.com/users/7421002/primalr3d"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1560532265, "post_id": 56568296, "comment_id": 99781098, "body": "@AlexanderZhang I initially thought that your comment was only saying that &#39;garr&#39; was not required in the code. But on reading it again today, I realised it also tells how to go about writing the DP table. So, I implemented it and it works. Thanks for the help."}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 7421002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b407810cbca061af5b11f54b3253a9?s=128&d=identicon&r=PG&f=1", "display_name": "Primalr3d", "link": "https://stackoverflow.com/users/7421002/primalr3d"}, "is_accepted": true, "score": 0, "last_activity_date": 1560532049, "creation_date": 1560532049, "answer_id": 56602550, "question_id": 56568296, "link": "https://stackoverflow.com/questions/56568296/how-to-change-this-backtracking-code-into-a-dynamic-programming-code-by-using-me/56602550#56602550", "title": "How to change this backtracking code into a dynamic programming code by using memoization?", "body": "<p>Thanks to the very helpful comment by @AlexanderZhang, I have solved the question. Refer to his comment for the details if interested. Here is the code:</p>\n\n<pre><code>vector &lt;vector &lt;int&gt;&gt; dp(20, vector&lt;int&gt; (201, -1));\nvoid backtrack(vector &lt;int&gt; &amp;a, int k, int m)\n{\n    k++;\n    if (dp[k][m] != -1)\n    {\n        return;\n    }\n    else\n    {\n        dp[k][m]++;\n        vector &lt;int&gt; c;                     // this array stores the candidates for postion k.\n\n//        for (int kj : a) cout &lt;&lt; kj &lt;&lt; \" \";\n//        cout &lt;&lt; endl;\n\n        if (k == a.size() )              // if (is_a_soln) process_solution\n        {\n            if (m &lt; money)\n            {\n                b = true;\n                money = m;\n                garr = a;\n            }\n        }\n        else                                // else backtrack with updated parameters\n        {\n//            k++;\n            construct_candidates(a, k , m, c);\n            for (int i = 0; i &lt; c.size(); i++)\n            {\n                a[k] = c[i];\n                backtrack(a, k, m - c[i]);\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 7421002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b407810cbca061af5b11f54b3253a9?s=128&d=identicon&r=PG&f=1", "display_name": "Primalr3d", "link": "https://stackoverflow.com/users/7421002/primalr3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 56602550, "answer_count": 1, "score": 1, "last_activity_date": 1560532049, "creation_date": 1560363904, "question_id": 56568296, "link": "https://stackoverflow.com/questions/56568296/how-to-change-this-backtracking-code-into-a-dynamic-programming-code-by-using-me", "title": "How to change this backtracking code into a dynamic programming code by using memoization?", "body": "<p>I'm trying to learn dynamic programming and hence I'm trying to solve <a href=\"https://uva.onlinejudge.org/index.php?option=onlinejudge&amp;page=show_problem&amp;problem=2445\" rel=\"nofollow noreferrer\">UVA 11450</a>. Since I know I could solve this question using backtracking, I decided to solve it using backtracking and then add memoization to the code. However, I'm unable to do this. </p>\n\n<p>Here is the commented code without memoization:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\n\nbool b;                         // this tells us if a solution is found or not\nint c;                          // store input c\nvector &lt;vector &lt;int&gt;&gt; arr;     // declare a global array to store the type and cost of the garments\n\n\nint money = INT_MAX;           // these two fields store the most optimal solution found so far\nvector &lt;int&gt; garr;\n\n\n// this function fills 'c' - the candidates for the k'th postition\nvoid construct_candidates(vector &lt;int&gt; &amp;a, int k, int m, vector&lt;int&gt; &amp;c)        \n{\n    for (int i: arr[k])\n    {\n        if (i &lt;= m ) c.push_back(i);    // if cost of the model 'i' of garment 'k' is less than or equal to money remaining,\n    }                                   // put it in array 'c'.\n}\n\n\nvoid backtrack(vector &lt;int&gt; &amp;a, int k, int m)\n{\n    vector &lt;int&gt; c;                     // this array stores the candidates for postion k.\n\n    if (k == a.size() - 1)              // if (is_a_soln) process_solution\n    {\n        if (m &lt; money)\n        {\n            b = true;\n            money = m;\n            garr = a;\n        }\n    }\n    else                                // else backtrack with updated parameters\n    {\n        k++;\n        construct_candidates(a, k , m, c);\n        for (int i = 0; i &lt; c.size(); i++)\n        {\n            a[k] = c[i];\n            backtrack(a, k, m - c[i]);\n        }\n    }\n}\n\n\nint main()\n{\n\n    int n;\n    cin &gt;&gt; n;\n    while (n--)\n    {   \n        b = false;                              // initialising global variables\n        money = INT_MAX;\n        arr.clear();\n        int m;\n        cin &gt;&gt; m &gt;&gt; c;\n        arr = vector &lt;vector &lt;int&gt;&gt;(c);\n\n        for(int i = 0; i &lt; c; i++)              // storing the input in arr\n        {\n            int k;\n            cin &gt;&gt; k;\n            arr[i] = vector &lt;int&gt; (k);\n            for (int j = 0; j &lt; k; j++)\n            {\n                cin &gt;&gt; arr[i][j];\n            }\n        }\n\n        vector &lt;int&gt; a(c, -1);         // the backtracking code will attempt \n                                       //to fill this array with optimal garments\n\n        backtrack(a, -1, m);                      \n\n        if (b) cout &lt;&lt;m - money &lt;&lt; endl;\n        else cout &lt;&lt; \"no solution\" &lt;&lt; endl;\n    }\n\n    return 0;\n}\n\n</code></pre>\n\n<p>Now, to add memoization, I tried doing:</p>\n\n<pre><code>vector &lt;vector &lt;int&gt;&gt; dp(20, vector&lt;int&gt; (201, -1));\nvoid backtrack(vector &lt;int&gt; &amp;a, int k, int m)\n{\n    if (dp[k][m] != -1)                    // this is\n    {                                      // the \n        k++;                               // part\n        a[k] = dp[k][m];                   // that \n        backtrack(a, k, m - a[k]);         // is\n    }                                      // added\n    else\n    {\n        vector &lt;int&gt; c;                    \n\n        if (k == a.size() - 1)              \n        {\n            if (m &lt; money)\n            {\n                b = true;\n                money = m;\n                garr = a;\n            }\n        }\n        else                                \n        {\n            k++;\n            construct_candidates(a, k , m, c);\n            for (int i = 0; i &lt; c.size(); i++)\n            {\n                a[k] = c[i];\n                backtrack(a, k, m - c[i]);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But I don't know where or how to add the part that actually puts the optimal garment at position k in the DP table. Any help is much appreciated.</p>\n"}, {"tags": ["c++", "friend-class"], "comments": [{"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 3, "creation_date": 1560364054, "post_id": 56568242, "comment_id": 99715827, "body": "You might want to try moving the implementations of the B methods after the declaration of A."}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 5756943, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iEuHuh-ZEZM/AAAAAAAAAAI/AAAAAAAAABM/hdUJWtDjvk8/photo.jpg?sz=128", "display_name": "Shubham Agrawal", "link": "https://stackoverflow.com/users/5756943/shubham-agrawal"}, "is_accepted": false, "score": 3, "last_activity_date": 1560364673, "creation_date": 1560364673, "answer_id": 56568487, "question_id": 56568242, "link": "https://stackoverflow.com/questions/56568242/two-classes-befriending-each-other/56568487#56568487", "title": "Two Classes Befriending Each Other", "body": "<p>As @user888379 pointed out, moving the implementation of <code>showA</code> and <code>showB</code> methods after both classes have been completely declared will solve your problem. Following is working code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt; \n\nclass A;\n\nclass B\n{\nprivate:\n    int bVariable;\npublic:\n    B() :bVariable(9){}\n    void showA(A &amp;myFriendA);\n    friend class A;  // Friend Class \n};\n\nclass A\n{\nprivate:\n    int aVariable;\npublic:\n    A() :aVariable(7){}\n    void showB(B &amp;myFriendB);\n    friend class B;  // Friend Class \n};\n\nvoid B::showA(A &amp;myFriendA) {\n    std::cout &lt;&lt; \"A.aVariable: \" &lt;&lt; myFriendA.aVariable &lt;&lt; std::endl; // Since B is friend of A, it can access private members of A \n}\n\nvoid A::showB(B &amp;myFriendB) {\n    std::cout &lt;&lt; \"B.bVariable: \" &lt;&lt; myFriendB.bVariable &lt;&lt; std::endl; // Since A is friend of B, it can access private members of B\n}\n\nint main() {\n    A a;\n    B b;\n    b.showA(a);\n    a.showB(b);\n    return 0;\n}\n</code></pre>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/9119236/c-class-forward-declaration\">this answer</a> for more detailed analysis.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "is_accepted": true, "score": 3, "last_activity_date": 1560364756, "creation_date": 1560364756, "answer_id": 56568504, "question_id": 56568242, "link": "https://stackoverflow.com/questions/56568242/two-classes-befriending-each-other/56568504#56568504", "title": "Two Classes Befriending Each Other", "body": "<p>You can't access myFriendA.aVariable because the compiler doesn't know it exists.  All it knows is that a class A exists (because of the forward declaration on the second line), but it hasn't been fully defined so it has no idea what its members/methods are.</p>\n\n<p>If you wanted to make this work, showA() would have to be declared outside of the class scope.</p>\n\n<pre><code>class A;\nclass B\n{\nprivate:\n    int bVariable;\npublic:\n    B() :bVariable(9){}\n    void showA(A &amp;myFriendA);\n\n    friend class A;\n};\nclass A\n{\nprivate:\n    int aVariable;\npublic:\n    A() :aVariable(7){}\n    void showB(B &amp;myFriendB){\n        std::cout &lt;&lt; \"B.bVariable: \" &lt;&lt; myFriendB.bVariable &lt;&lt; std::endl;\n    }\n    friend class B;  // Friend Class \n};\n\n// Define showA() here\nvoid B::showA(A &amp;myFriendA)\n{\n    std::cout &lt;&lt; \"A.aVariable: \" &lt;&lt; myFriendA.aVariable &lt;&lt; std::endl;\n}\n\nint main() {\n    A a;\n    B b;\n    b.showA(a);\n    a.showB(b);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 10944850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MGdllAwiEcE/AAAAAAAAAAI/AAAAAAAAAF0/oOwn6Rtxwbw/photo.jpg?sz=128", "display_name": "\u0645\u062d\u0645\u062f \u062e\u064a\u0631 \u0627\u0644\u062e\u0644\u0642", "link": "https://stackoverflow.com/users/10944850/%d9%85%d8%ad%d9%85%d8%af-%d8%ae%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d9%84%d9%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56568504, "answer_count": 2, "score": 3, "last_activity_date": 1560364756, "creation_date": 1560363672, "question_id": 56568242, "link": "https://stackoverflow.com/questions/56568242/two-classes-befriending-each-other", "title": "Two Classes Befriending Each Other", "body": "<p>I'm trying to make two classes friend with each other, but I keep getting a \"Use of Undefined type A\" error message.</p>\n\n<p>Here is my code:</p>\n\n<p>I've tried to add class A; as shown on top but still the same.</p>\n\n<pre><code>#include &lt;iostream&gt; \nclass A;\nclass B\n{\nprivate:\n    int bVariable;\npublic:\n    B() :bVariable(9){}\n    void showA(A &amp;myFriendA)\n    {\n        std::cout &lt;&lt; \"A.aVariable: \" &lt;&lt; myFriendA.aVariable &lt;&lt; std::endl;// Since B is friend of A, it can access private members of A \n    }\n    friend class A;\n};\nclass A\n{\nprivate:\n    int aVariable;\npublic:\n    A() :aVariable(7){}\n    void showB(B &amp;myFriendB){\n        std::cout &lt;&lt; \"B.bVariable: \" &lt;&lt; myFriendB.bVariable &lt;&lt; std::endl;\n    }\n    friend class B;  // Friend Class \n};\nint main() {\n    A a;\n    B b;\n    b.showA(a);\n    a.showB(b);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to make class A access class B and vice versa via the friendship.</p>\n"}, {"tags": ["c++", "c++17", "constexpr", "cout"], "comments": [{"owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "reply_to_user": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 0, "creation_date": 1560363887, "post_id": 56568230, "comment_id": 99715758, "body": "Used gcc 9.1 on godbolt.org"}], "answers": [{"comments": [{"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 3, "creation_date": 1560364092, "post_id": 56568300, "comment_id": 99715847, "body": "Nice use of the comma operator :)"}, {"owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "edited": false, "score": 0, "creation_date": 1560364358, "post_id": 56568300, "comment_id": 99715942, "body": "And what about the lambda object? Does it have to compile? By what I understood from your answer, no."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "edited": false, "score": 1, "creation_date": 1560364402, "post_id": 56568300, "comment_id": 99715959, "body": "@Jo&#227;oPaulo It&#39;s the same there. It&#39;s an error, but compilers don&#39;t need to error out."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1560368731, "post_id": 56568300, "comment_id": 99717819, "body": "What is the significance of the comma(s) in the snippet above? A comma operator expression to enforce evaluation of the lhs?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1560369071, "post_id": 56568300, "comment_id": 99717969, "body": "@dfri I needed a way to force constant evaluation of the function and since it returns void, I can&#39;t assign it to a variable. So I used the comma operator inside the initializer of a constexpr variable so that the function is evaluated at compile time."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 8, "last_activity_date": 1560363912, "creation_date": 1560363912, "answer_id": 56568300, "question_id": 56568230, "link": "https://stackoverflow.com/questions/56568230/constexpr-and-stdcout-working-on-function-but-not-in-lambda/56568300#56568300", "title": "constexpr and std::cout working on function but not in lambda", "body": "<p>It doesn't. You need to use it to force a compile time error.</p>\n\n<pre><code>constexpr int a = f(), 0; // fails\nconstexpr int b = g(), 0; // fails\n</code></pre>\n\n<p><code>constexpr</code> functions that never produce a constant expression are ill-formed; no diagnostic required. This means that compilers do a best effort check to see if that is the case, but your program already has an error either way. Seems like gcc can't see that <code>printf</code> is not a constant expression. <a href=\"https://godbolt.org/z/unRcDe\" rel=\"noreferrer\">clang errors at the definition</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1560364424, "post_id": 56568305, "comment_id": 99715969, "body": "Ugh stuff like this really grinds my gears. It seems <i>so</i> arcane and hard to spot a bug like this. Meh to it all!"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1560366802, "post_id": 56568305, "comment_id": 99716971, "body": "@LightnessRacesinOrbit Practically speaking, it&#39;s really hard to generally diagnose &quot;you marked this <code>constexpr</code> but it&#39;s impossible&quot;. So it&#39;d be nice if compilers did, but like... it doesn&#39;t super matter. It definitely won&#39;t compile if you try to use it as a constant expression."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560368483, "post_id": 56568305, "comment_id": 99717732, "body": "I&#39;m complaining more about the language than about the compilers. It&#39;s utterly absurd that such &quot;simple&quot; code could be ill-formed in a manner that&#39;s so difficult for a compiler to diagnose, let alone for the programmer!"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1560368947, "post_id": 56568305, "comment_id": 99717911, "body": "@LightnessRacesinOrbit it&#39;s harder than hard. It&#39;s undecidable. In terms of Turing machines, this is closely related to the Halting Problem. <i>Meh to it all</i> indeed."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1560370177, "post_id": 56568305, "comment_id": 99718465, "body": "@alterigel It&#39;s undecidable in general. As the question shows, a diagnostic may be issued in certain cases. But that&#39;s my point: some of the most allegedly simple newer features of the language are almost entirely academic in scope and nature (read: a C++ degree required to use them safely)"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560370592, "post_id": 56568305, "comment_id": 99718644, "body": "@LightnessRacesinOrbit come to think of it, a license to practice (advanced) C++ doesn&#39;t sound like a bad idea"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 11, "last_activity_date": 1560363929, "creation_date": 1560363929, "answer_id": 56568305, "question_id": 56568230, "link": "https://stackoverflow.com/questions/56568230/constexpr-and-stdcout-working-on-function-but-not-in-lambda/56568305#56568305", "title": "constexpr and std::cout working on function but not in lambda", "body": "<p>Technically, it doesn't work with any of them.</p>\n\n<p>From <a href=\"http://eel.is/c++draft/dcl.constexpr#5\" rel=\"noreferrer\">[dcl.constexr]</a>:</p>\n\n<blockquote>\n  <p>For a constexpr function or constexpr constructor that is neither defaulted nor a template, if no argument values exist such that an invocation of the function or constructor could be an evaluated subexpression of a core constant expression, or, for a constructor, a constant initializer for some object ([basic.start.static]), <strong>the program is ill-formed, no diagnostic required</strong>.</p>\n</blockquote>\n\n<p><code>f()</code> and <code>g()</code> are never constant expressions (neither <code>std::cout &lt;&lt; x</code> nor <code>printf()</code> are constexpr functions), so the <code>constexpr</code> declaration is ill-formed. But the compiler isn't <em>required</em> to diagnose this (in this case, it may be easy, but in the general case... not so much). What you're seeing is that your compiler was able to diagnose one problem but not the other.</p>\n\n<p>But they're both wrong.</p>\n"}], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 4, "accepted_answer_id": 56568305, "answer_count": 2, "score": 8, "last_activity_date": 1560363929, "creation_date": 1560363628, "question_id": 56568230, "link": "https://stackoverflow.com/questions/56568230/constexpr-and-stdcout-working-on-function-but-not-in-lambda", "title": "constexpr and std::cout working on function but not in lambda", "body": "<p>Why <code>constexpr</code> does not work with <code>std::cout</code>, but works with <code>printf</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\nconstexpr void f() { std::cout &lt;&lt; \"\"; } //error\nconstexpr void g() { printf(\"\"); } //ok\n</code></pre>\n\n<p>And why <code>std::cout</code> works with lambdas <code>constexpr</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main () {\n    auto h = []() constexpr { std::cout &lt;&lt; \"\"; }; //ok\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1560363235, "post_id": 56568062, "comment_id": 99715477, "body": "If you don&#39;t intend to store the argument somewhere then I&#39;d say <code>const &amp;</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1560363653, "post_id": 56568062, "comment_id": 99715668, "body": "You may find this Herb Sutter blog post relevant: <a href=\"https://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow noreferrer\">herbsutter.com/2013/06/05/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1560363978, "post_id": 56568062, "comment_id": 99715792, "body": "You can&#39;t get a <code>unique_ptr</code> from a <code>weak_ptr</code> because a <code>weak_ptr</code> implies the object is already owned by one or more <code>shared_ptr</code>. An object can&#39;t be owned by both a <code>unique_ptr</code> and ` shared_ptr` at the same time."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1560364282, "last_edit_date": 1560364282, "creation_date": 1560363355, "answer_id": 56568154, "question_id": 56568062, "link": "https://stackoverflow.com/questions/56568062/when-to-use-weak-ptr-instead-of-call-by-reference/56568154#56568154", "title": "When to use weak_ptr instead of call by reference", "body": "<p><code>weak_ptr</code> is the companion to <code>shared_ptr</code>, and won't help you here.</p>\n\n<p>You can use the first overload, or pass the <code>unique_ptr</code> itself by reference.</p>\n\n<p>Even if you were using a <code>shared_ptr</code> rather than a <code>unique_ptr</code>, I'd advise the same. I've stored <code>weak_ptr</code>s in containers before (or captured them in lambdas), but if you're just passing into a function that needs to do some work, it seems like unnecessary overhead.</p>\n\n<p><a href=\"https://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow noreferrer\">Herb's opinion on the subject</a> may be of interest to you.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1560364944, "last_edit_date": 1560364944, "creation_date": 1560363761, "answer_id": 56568263, "question_id": 56568062, "link": "https://stackoverflow.com/questions/56568062/when-to-use-weak-ptr-instead-of-call-by-reference/56568263#56568263", "title": "When to use weak_ptr instead of call by reference", "body": "<p>You can't create a <code>std::shared_ptr</code> from a <code>std:::unique_ptr</code> (unless you <code>release()</code> its ownership first), and you can't create a <code>std::weak_ptr</code> from a <code>std::unique_ptr</code> at all, only from a <code>std::shared_ptr</code>.  So that leaves only one option:</p>\n\n<p><code>const std::string toJson(const Location &amp;obj);</code></p>\n\n<p>Which makes sense, as you don't need or want <code>toJson()</code> to take/share ownership of the <code>Location</code> object, just to use it as-is.</p>\n\n<p>To be honest, the other overloads don't really make much sense to have at all.  The caller should decide how it needs to obtain a reference to a <code>Location</code> object, and then pass the actual object to <code>toJson()</code> as needed, eg:</p>\n\n<pre><code>std::unique_ptr&lt;Location&gt; uniqueLocation = getLocation();\nstd::string s = toJson(*uniqueLocation);\n</code></pre>\n\n<p>But, if you want to keep the overloads, just have them delegate to the one overload that takes an object reference:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const std::string toJson(const Location &amp;obj)\n{\n    // do the actual work here...\n}\n\nconst std::string toJson(std::weak_ptr&lt;Location&gt; obj)\n{\n    std::shared_ptr&lt;Location&gt; sp = obj.lock();\n    return toJson(sp);\n}\n\nconst std::string toJson(const std::shared_ptr&lt;Location&gt; &amp;obj)\n{\n    std::string s;\n    if (obj)\n        s = toJson(*obj);\n    return s;\n}\n\nconst std::string toJson(const std::unique_ptr&lt;Location&gt; &amp;obj)\n{\n    std::string s;\n    if (obj)\n        s = toJson(*obj);\n    return s;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1560366320, "post_id": 56568654, "comment_id": 99716762, "body": "Can you explain why not to return const std::string?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 1, "creation_date": 1560367600, "post_id": 56568654, "comment_id": 99717314, "body": "@benjist Sure; it does nothing particularly useful, and can inhibit move construction.  It is true that it blocks some bad use of <code>operator=</code>, but the loss of move-construction efficiency far outweights that."}, {"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1560374138, "post_id": 56568654, "comment_id": 99719901, "body": "I&#39;ve created a new question here <a href=\"https://stackoverflow.com/questions/56570452/is-returning-a-const-stdstring-really-slower-than-non-const\" title=\"is returning a const stdstring really slower than non const\">stackoverflow.com/questions/56570452/&hellip;</a>"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1560365542, "creation_date": 1560365542, "answer_id": 56568654, "question_id": 56568062, "link": "https://stackoverflow.com/questions/56568062/when-to-use-weak-ptr-instead-of-call-by-reference/56568654#56568654", "title": "When to use weak_ptr instead of call by reference", "body": "<p>Smart pointers are about ownership.</p>\n\n<p>Ownership is about lifetime.</p>\n\n<pre><code>const std::string toJson(const Location &amp;obj);\n</code></pre>\n\n<p>This says \"you will pass an <code>obj</code> which is a valid <code>Location</code>, and this function promises not to change it\".</p>\n\n<p>The return value -- <code>const std::string</code> -- is a toxic anti-pattern.  Don't do that.  Return <code>std::string</code>.</p>\n\n<pre><code>std::string toJson(std::weak_ptr&lt;const Location&gt; obj);\n</code></pre>\n\n<p>This states \"I will take a possibly valid reference to an <code>obj</code>, which I will faithfully store somewhere.  At some unknown future point, I will check if that object still exists, and create a shared pointer to it.  Once you call this function, do not assume that the lifetime of the pointed to <code>obj</code> will end at any controlled spot; but usually I'll be polite, and not  hold onto a generated <code>shared_ptr</code> for more than a short bit\".</p>\n\n<pre><code>std::string toJson(std::shared_ptr&lt;const Location&gt; obj);\n</code></pre>\n\n<p>This says \"I want to participate in the shared management of the pointed to <code>obj</code>.  <code>obj</code> has and should have a complex lifetime which cannot be easily expressed through simple ownership.  I tried to use simpler ownership models, but they don't reflect the true essence of how long <code>obj</code> should survive, so I'm using reference counted pointers.\"</p>\n\n<pre><code>std::unique_ptr&lt;Location&gt; uniqueLocation = getLocation();\n</code></pre>\n\n<p>This says \"I want to have controlled ownership of this object, which has never been in a complex ownership situation.  If I could, I'd be a value (or maybe an optional), but some issues block me from being a value.  So I'll be a unique pointer to a value.\"</p>\n\n<blockquote>\n  <p>The serialization does not need to take ownership of the unique_ptr. Which method should it call? The toJson using weak_ptr, or the toJson by reference?</p>\n</blockquote>\n\n<p>A function that converts things to Json probably just needs the object being converted to be valid the length of the call.</p>\n\n<p><code>toJson(const Location&amp;)</code> is the one that means that.</p>\n"}], "owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 56568263, "answer_count": 3, "score": 2, "last_activity_date": 1560365542, "creation_date": 1560362923, "last_edit_date": 1560363200, "question_id": 56568062, "link": "https://stackoverflow.com/questions/56568062/when-to-use-weak-ptr-instead-of-call-by-reference", "title": "When to use weak_ptr instead of call by reference", "body": "<p>I have declared serialization class with the following methods, but did not implemented it yet:</p>\n\n<pre><code>    const std::string toJson(const Location &amp;obj);\n\n    const std::string toJson(std::weak_ptr&lt;const Location&gt; obj);\n\n    const std::string toJson(std::shared_ptr&lt;const Location&gt; obj);\n</code></pre>\n\n<p>The job of the serialization class is, no surprise, to convert between one representation to another, e.g. from Json to the C++ class and vice-versa.</p>\n\n<p>Now somewhere else in my code, I take unique ownership like this:</p>\n\n<pre><code>    std::unique_ptr&lt;Location&gt; uniqueLocation = getLocation();\n</code></pre>\n\n<p>Now my question is: The serialization does not need to take ownership of the unique_ptr. Which method should it call? The toJson using weak_ptr, or the toJson by reference?</p>\n"}, {"tags": ["c++", "linux", "named-pipes"], "comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1560362391, "post_id": 56567836, "comment_id": 99715094, "body": "I think sockets make more sense than pipes in this instance.  The driver process can listen on the loopback device, and the other processes can simply initiate a TCP connection when they need to talk to the driver."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1560362619, "post_id": 56567836, "comment_id": 99715200, "body": "I&#39;m using a raspberry pi 2B that runs raspbian lite. I might be wrong but I think TCP sockets would be a little overhead for that purpose."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 4, "creation_date": 1560363759, "post_id": 56567836, "comment_id": 99715712, "body": "@MrBit A <code>AF_UNIX&#47;AF_LOCAL</code> socket is not much more than a named pipe afaik and has all the nice features you&#39;d want iike <code>select</code> support to create a truly event based driver. If you later decide to make it possible for other machines to connect (perhaps a driver from another Pi), your framework will be ready for it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1560364518, "post_id": 56567836, "comment_id": 99716008, "body": "Yeah use a UNIX socket!"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560368074, "post_id": 56567836, "comment_id": 99717533, "body": "If you don&#39;t want full blown sockets, then you might look into <a href=\"https://en.wikipedia.org/wiki/Unix_domain_socket\" rel=\"nofollow noreferrer\">Unix Domain Sockets</a>. They are one of the fastest Linux IPC mechanisms, and lightweight like named pipes."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "edited": false, "score": 0, "creation_date": 1560370109, "post_id": 56567836, "comment_id": 99718439, "body": "If I chose to go with sockets, would I have to handle multiple clients or the OS would do that for me?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560435321, "post_id": 56567836, "comment_id": 99742948, "body": "@MrBit Your driver will need to monitor the socket/pipe where incomming connections are made. When a new connection is made you need to keep track of the client somehow. A single threaded application just adds the client socket/pipe_fd to the list of file descriptors to monitor. A threaded application spawns a new thread which only cares about one client and syncing with the <i>server</i> thread. A third option is to <code>fork</code> to separate the clients and server part completely. You need to choose one approach - and it&#39;ll be similar for sockets and pipes."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560811011, "post_id": 56567836, "comment_id": 99850180, "body": "@TedLyngmo, thank you very much for your comment. My driver won&#39;t have to track client&#39;s state. Every program will just send some packets to the driver and driver will carry out everything needs to be done. It will remain in an &quot;idle&quot; state unless a packet received."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560822695, "post_id": 56567836, "comment_id": 99852349, "body": "@MrBit Ok, just be aware of that you may get terrible performance if it can only serve one client at a time. If <code>N</code> clients tries to connect at the same time, the <code>N</code>:th client will have to want for the communication of the <code>N-1</code> first clients to be done becore your driver even accepts the connection / begins communicating."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560950020, "post_id": 56567836, "comment_id": 99904776, "body": "@TedLyngmo I&#39;m talking about multiple clients connected at the same time"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560950752, "post_id": 56567836, "comment_id": 99905231, "body": "@MrBit Ok, each connected client sends packets simultaneously. Will the driver be able to act on multiple packages at the same time before responding to the correct client?"}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560963592, "post_id": 56567836, "comment_id": 99912534, "body": "@TedLyngmo I&#39;m not sure about that. I don&#39;t know anything about socket programming."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560964140, "post_id": 56567836, "comment_id": 99912777, "body": "@MrBit It&#39;s a design descision you&#39;ll have to make. It doesn&#39;t matter if you use sockets or named pipes. If your driver should be able to handle incoming requests asynchronously, you&#39;ll need to keep track of which client to send the answer to somehow. It could be as simple as storing the file descriptor for the socket/pipe that you should send the response to together with the request. It also depends a little on if you go for a single thread, multithreaded or separate processes. Also note that with pipes, you&#39;ll have 2 file descriptors for each cllient. With sockets, only one."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560964621, "post_id": 56567836, "comment_id": 99913010, "body": "@TedLyngmo I found that piece of code very good example <a href=\"https://www.geeksforgeeks.org/socket-programming-in-cc-handling-multiple-clients-on-server-without-multi-threading/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a> and I&#39;m trying to learn a few things while I&#39;m looking at it. I managed to made a very basic version of what I want to do using threads. Just put that code into a thread and my driver into another and so far I&#39;m broadcasting some data to one client. Also, If I understood correctly I&#39;ll have to use <code>AF_UNIX&#47;AF_LOCAL</code> instead of <code>AF_INET</code>. But I&#39;m still strugling to gather the pieces of the puzzle togerther..."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560965488, "post_id": 56567836, "comment_id": 99913391, "body": "@MrBit Sounds great. Using <code>AF_UNIX</code> sockets makes communication potentially more effective, but I&#39;ve never bothered and have always used <code>AF_INET</code>. Connecting to the same machine via the loopback (127.0.0.1) should be fairly effective too. You could also look at <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/tutorial.htmlhttps://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/tutorial.html\" rel=\"nofollow noreferrer\">boost::asio / Introduction to Sockets</a> if you&#39;d like some solid abstractions from the raw C interface to sockets."}, {"owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1560968478, "post_id": 56567836, "comment_id": 99914743, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/195209/discussion-between-mrbit-and-ted-lyngmo\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 9103838, "user_type": "registered", "profile_image": "https://graph.facebook.com/874402469389389/picture?type=large", "display_name": "Fachtna Roe", "link": "https://stackoverflow.com/users/9103838/fachtna-roe"}, "is_accepted": false, "score": 5, "last_activity_date": 1560362644, "creation_date": 1560362644, "answer_id": 56568009, "question_id": 56567836, "link": "https://stackoverflow.com/questions/56567836/many-to-one-two-way-communication-of-separate-programs/56568009#56568009", "title": "Many-to-one two-way communication of separate programs", "body": "<p>In essence, what you've described is a server/client relationship between programs; what each program does on either side of the communications bridge is probably irrelevant.</p>\n\n<p>Even though these processes appear from the question to be intended to be on the same machine, networking is still available to you via localhost.</p>\n\n<p>If you're not wedded to pipes, why not use a port for the driver (server) known to each program (client), to which the server listens?</p>\n\n<p>That's pretty much the underlying philosophy of X-Windows, I believe.</p>\n\n<p>Plus, there should be lots of reliable code out there to get you started.</p>\n"}, {"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 3, "last_activity_date": 1560363962, "creation_date": 1560363962, "answer_id": 56568312, "question_id": 56567836, "link": "https://stackoverflow.com/questions/56567836/many-to-one-two-way-communication-of-separate-programs/56568312#56568312", "title": "Many-to-one two-way communication of separate programs", "body": "<p>I also think sockets may be a better solution, but if you really want named pipes, I'd do it this way:  </p>\n\n<p>The server opens a pipe named <code>channel_request</code> for reading.  Any new client opens it for writing and writes a unique ID. (PID should work).  The server reads this id and creates a named pipe called <code>channel_[id]</code>.  The client then opens <code>channel_[id]</code> for reading and can start receiving data.  </p>\n\n<p>Note that linux pipes are unidirectional, so if you want two-way communications as shown in your diagram, you will need to open both a <code>channel_[id]_out</code> and  a <code>channel_[id]_in</code>.</p>\n"}], "owner": {"reputation": 171, "user_id": 3829694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/53bd4f5f2ae782bad3fa0b0d364d286a?s=128&d=identicon&r=PG&f=1", "display_name": "MrBit", "link": "https://stackoverflow.com/users/3829694/mrbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 56568312, "answer_count": 2, "score": 2, "last_activity_date": 1560363962, "creation_date": 1560361863, "last_edit_date": 1560361974, "question_id": 56567836, "link": "https://stackoverflow.com/questions/56567836/many-to-one-two-way-communication-of-separate-programs", "title": "Many-to-one two-way communication of separate programs", "body": "<p>I'm trying to make two-way many-to-one communication between programs in Linux.</p>\n\n<p>My plan is the following: One program called \"driver\" that talks with the hardware needs to communicate with an unknown number of applications in Linux.\nI read that one of the most common ways for inter process communication is \"named pipes\".</p>\n\n<p>The question I haven't found yet is: How new programs should notify the driver that a new program is running so that one more connection (named pipe) between the new program and the driver enstablished?</p>\n\n<p>All programs will be written in C++</p>\n\n<p><a href=\"https://i.stack.imgur.com/JPVCv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JPVCv.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "linux"], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 1562041, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5939654a2de2ac8057bd9870489444c1?s=128&d=identicon&r=PG", "display_name": "nerd", "link": "https://stackoverflow.com/users/1562041/nerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1560448916, "creation_date": 1560448916, "answer_id": 56586201, "question_id": 56567818, "link": "https://stackoverflow.com/questions/56567818/debugging-of-python-script-launched-from-another-c-application-in-linux/56586201#56586201", "title": "Debugging of python script launched from another C++ application in Linux", "body": "<p>I used the following method to enable debugging of a python program from my application.</p>\n\n<p>execl(\"/bin/sh\",\"sh\",\"-c\",\"gnome-terminal -- python Sample.py\",(char*)NULL);</p>\n\n<p>However, with the above approach I was not able to wait for the python process to exit/terminate as execl creates gnome-terminal process and that in-turn creates Python process. To overcome that I am looking for a python process like a pslookup after execl and waiting for it to complete.</p>\n\n<p>Please suggest if there are any better ways of doing it.</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 199, "user_id": 1562041, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5939654a2de2ac8057bd9870489444c1?s=128&d=identicon&r=PG", "display_name": "nerd", "link": "https://stackoverflow.com/users/1562041/nerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560448916, "creation_date": 1560361790, "question_id": 56567818, "link": "https://stackoverflow.com/questions/56567818/debugging-of-python-script-launched-from-another-c-application-in-linux", "title": "Debugging of python script launched from another C++ application in Linux", "body": "<p>I have a C++ desktop application in linux and it executes a Python program. I am using execl to run the python program  as below:</p>\n\n<pre><code> execl(\"python3\", \"Sample.py\",NULL);\n</code></pre>\n\n<p>My query is with respect to debugging this python program. I am adding the following line to enable debugging in the python program:</p>\n\n<pre><code>   import pdb; pdb.set_trace();\n</code></pre>\n\n<p>However, I want this python program to be launched in some console/terminal so that I can input the debugging parameters(like c,n etc).</p>\n\n<p>So how can I achieve this using execl function or is there any other method for this? Please suggest.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "linux", "qt"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1560366035, "post_id": 56567334, "comment_id": 99716637, "body": "This question may be relevant (although it is written for the python version of Qt): <a href=\"https://stackoverflow.com/questions/2007103/how-can-i-disable-clear-of-clipboard-on-exit-of-pyqt-application\" title=\"how can i disable clear of clipboard on exit of pyqt application\">stackoverflow.com/questions/2007103/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 4496068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfd1971ae91f2a53dfa1b991e9eefb2b?s=128&d=identicon&r=PG&f=1", "display_name": "fremon", "link": "https://stackoverflow.com/users/4496068/fremon"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1560376580, "post_id": 56567334, "comment_id": 99720609, "body": "The suggested solution from your link is not working for me. I added <code>QEvent event = QEvent(QEvent::Clipboard); QApplication::sendEvent(clipboard, &amp;event);</code> to the Slot. I have klipper installed and running."}, {"owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 0, "creation_date": 1560409134, "post_id": 56567334, "comment_id": 99727907, "body": "The same source that states that clipboard operations in X11 require a running event loop also says: &quot;You should not store or retrieve the clipboard contents in response to timer or non-user-input events.&quot;"}], "owner": {"reputation": 85, "user_id": 4496068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfd1971ae91f2a53dfa1b991e9eefb2b?s=128&d=identicon&r=PG&f=1", "display_name": "fremon", "link": "https://stackoverflow.com/users/4496068/fremon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560359628, "creation_date": 1560359628, "question_id": 56567334, "link": "https://stackoverflow.com/questions/56567334/how-to-run-qclipboard-in-the-event-loop-and-then-quit-the-application-once-qclip", "title": "How to run QClipboard in the event loop and then quit the application once QClipboard finished copying something to the clipboard?", "body": "<p>I want to add text to my clipboard and then quit my application right after the text has been added to clipboard.</p>\n\n<p>QClipboard requires to run in the event loop, so I created QObject with a slot that does the clipboard copying for me and invoked the Slot with <code>QTimer::singleShot</code>. When the Slot is done it emits a signal <code>finished()</code> to <code>QApplication::quit()</code>.</p>\n\n<p>Now the problem is that the clipboard is empty if I emit the <code>finished()</code> signal and <code>QApplication::quit()</code> is invoked. Only when I don't quit the QApplication the clipboard text is added correctly. Why is that?</p>\n\n<p>Besides QTimer::singleShot I also tried to invoke my Slot with <code>QMetaObject::invokeMethod</code>, but it's the same result as above.</p>\n\n<p><code>main.cpp</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"controller.h\"\n#include \"worker.h\"\n\n#include &lt;QApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QTimer&gt;\n#include &lt;QtGlobal&gt;\n\nint main(int argc, char *argv[]) {\n    QApplication app(argc, argv);\n    qDebug() &lt;&lt; \"Starting executing...\\n\";\n    QString bn = QString::fromStdString(argv[1]);\n    Worker b;\n    // QTimer::singleShot(1, [&amp;] { b.onEventLoopStarted(bn); });\n    QMetaObject::invokeMethod(&amp;b, \"onEventLoopStarted\", Qt::QueuedConnection, Q_ARG(QString, bn));\n    QObject::connect(&amp;b, SIGNAL(finished()), &amp;app, SLOT(quit()));\n    return app.exec();\n}\n</code></pre>\n\n<p><code>worker.cpp</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"worker.h\"\n#include &lt;boost/format.hpp&gt;\n#include &lt;cstdio&gt;\n#include &lt;fstream&gt;\n#include &lt;ios&gt;\n#include &lt;iostream&gt;\n#include &lt;QApplication&gt;\n#include &lt;QClipboard&gt;\n#include &lt;QDebug&gt;\n#include &lt;QDir&gt;\n#include &lt;QMessageBox&gt;\n#include &lt;QtGui/QImage&gt;\n#include &lt;QTimer&gt;\n#include &lt;QThread&gt;\n#include &lt;regex&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n\n// Worker::Worker(): bn(\"\") {}\nWorker::Worker(QObject *parent) : QObject(parent) {}\n\nWorker::~Worker() {}\n\nvoid Worker::set_bn(const QString &amp;bn) {\n    this-&gt;bn = bn;\n}\n\nvoid Worker::doc_filename(std::string&amp; fn) {\n    FILE *p;\n    char line [1024];\n    // https://stackoverflow.com/a/671528\n    p = popen(\"ps aux | grep '[/]usr/share/typora/Typora /'\", \"r\");\n    if (!p) {\n        fprintf(stderr, \"Error.\");\n        exit(1);\n    }\n    while (fgets(line, sizeof(line) - 1, p)) {\n        std::string sline(line);\n        std::cout &lt;&lt; \"1 sline: \" &lt;&lt; sline &lt;&lt; std::endl;\n        static const std::regex re(\"(.*\\\\/usr\\\\/share\\\\/typora\\\\/Typora)\\\\ (\\\\/.*)\\n\");\n        std::smatch m;\n         if(std::regex_match(sline, m, re)) {\n            fn = m[2];\n            std::cout &lt;&lt; \"2. path: \" &lt;&lt; fn &lt;&lt; std::endl;\n        }\n        else {\n            std::cout &lt;&lt; \"2. not match\" &lt;&lt; std::endl;\n        }\n    }\n    pclose(p);\n}\n\nvoid Worker::onEventLoopStarted(QString bn) {\n    std::string fn = \"\";\n    this-&gt;doc_filename(fn);\n    if (fn == \"\") {\n        QMessageBox msgBox;\n        msgBox.setText(\"Open the typora document, where the image should be added to.\");\n        msgBox.exec();\n        emit finished();\n        // QApplication::quit();\n    }\n    // from paramater get pwd and fn\n    // move fn to assets of fn\n    std::cout &lt;&lt; \"fn: \" &lt;&lt; fn &lt;&lt; std::endl;\n    qDebug() &lt;&lt; QDir::currentPath();\n    QString img_fn = QDir::cleanPath(QDir::currentPath() + QDir::separator() + bn);\n    qDebug() &lt;&lt; \"img_fn\" &lt;&lt; img_fn;\n    /* moves\n    std::ifstream in(img_fn, std::ios::in | std::ios::binary);\n    std::ofstream out(new_img_fn, std::ios::out | std::ios::binary);\n    out &lt;&lt; in.rdbuf();\n    std::remove(img_fn);\n    */\n    // Calculate img height, e.g. *0.8. use 0.8, then adjust after test\n    QImage img;\n    img.load(img_fn);\n    QString new_width = QString::number(img.width() * 0.8);\n    QString html_line = QString(\"&lt;img src='%1' alt='' width='%2'&gt;\").arg(img_fn, new_width);\n    qDebug() &lt;&lt; html_line;\n    // copy html_line to qt clipboard\n\n    QClipboard *clipboard = QApplication::clipboard();\n    clipboard-&gt;clear();\n    clipboard-&gt;setText(html_line);\n\n    qDebug() &lt;&lt; \"test\";\n\n    //emit finished();\n    qDebug() &lt;&lt; \"finished Worker\\n\";\n    //QApplication::quit();\n}\n</code></pre>\n\n<p><code>worker.h</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef CHILD_OBJECT_H\n#define CHILD_OBJECT_H\n\n#include &lt;QObject&gt;\n#include &lt;QThread&gt;\n\nclass Worker : public QObject\n{\n    Q_OBJECT\n\npublic:\n    explicit Worker(QObject *parent = 0);\n    ~Worker();\n    void set_bn(const QString &amp;bn);\n    void doc_filename(std::string&amp;);\n\nsignals:\n    void finished();\n\npublic slots:\n    void onEventLoopStarted(QString);\n\nprivate:\n    QString bn;\n};\n\n#endif // CHILD_OBJECT_H\n</code></pre>\n"}, {"tags": ["c++", "qt", "dictionary", "qmap"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 3, "creation_date": 1560358698, "post_id": 56566958, "comment_id": 99713442, "body": "Without more code, I&#39;m going to speculate 1. map was cleared or 2. It&#39;s two different instance of <code>Something</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1560360089, "post_id": 56566958, "comment_id": 99714074, "body": "This is obviously not code you&#39;ve ever tried compiling (because it doesn&#39;t compile, I fixed some obvious mistakes). Please share an example that actually compiles and produces the behavior you described. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 399, "user_id": 10833151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105e1c301f6ff60de3fbd9ef73fd19cc?s=128&d=identicon&r=PG&f=1", "display_name": "James Ronald", "link": "https://stackoverflow.com/users/10833151/james-ronald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1560367195, "creation_date": 1560358097, "last_edit_date": 1560367195, "question_id": 56566958, "link": "https://stackoverflow.com/questions/56566958/qmap-is-returning-null-value-even-with-a-correct-key-the-key-has-the-same-addre", "title": "QMap is returning null value even with a correct key (the key has the same address: couldn&#39;t be incorrect?)", "body": "<p>I have a QMap and I insert a key-value pair into in one function, but when I try to access that value (using the same key) in a different function I get a null value.     </p>\n\n<p>I wanted to include all the code just to be safe (it's below), but really the question is boiled down to: why am I getting a null value when I access the map using the same key (I know that I'm using the same key because I print the key's address and it's the same both times). </p>\n\n<pre><code>class Something \n {\n      QMap&lt;QPushButton*,QWidget*&gt; map;\n\n };\n\n Something::exampleFunction()\n {\n      QPushButton* myButton = new QPushButton(someParent);\n      QWidget* widget = new QWidget(someParent);\n\n      connect(myButton,SIGNAL(clicked()),this,SLOT(onButtonPress()));\n      this-&gt;map[myButton] = widget;\n\n      cout&lt;&lt;\"Address of myButton: \" &lt;&lt; myButton &lt;&lt; \"\\n\";\n\n      cout&lt;&lt;\"Address of widget: \" &lt;&lt; this-&gt;map[myButton] &lt;&lt; \"\\n\";\n      //the above line outputs the address of the widget, which means\n      //the qmap is working just fine?\n }\n\n Something::onButtonPress()\n {\n      QPushButton* buttonInFunction = qobject_cast&lt;QPushButton*&gt;(sender());\n      QWidget* widgetInFunction = this-&gt;map[buttonInFunction];\n\n      cout&lt;&lt;\"Address of button within function: \" &lt;&lt; button;\n      //the above line prints the same address as \n      //was printed for the button in exampleFunction\n\n      cout &lt;&lt; \"Address of widget within function:\" &lt;&lt; widgetInFunction; \n      //the above line outputs 16 zeros, i.e. null\n }\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1560358446, "post_id": 56566845, "comment_id": 99713310, "body": "Use std::wcout instead."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1560359626, "post_id": 56566927, "comment_id": 99713886, "body": "To be clear, while this is the solution to make <code>FindFirstFileA</code> work, it is not the correct solution in general. It&#39;s 2019, write Unicode friendly code. As Hans said in the question comments, the correct solution is to use the <code>W</code> versions of the APIs (or the unsuffixed versions, but making sure your build environment defines <code>UNICODE</code>/<code>_UNICODE</code>, which it should by default on modern versions of Visual Studio), and just send your output to <code>std::wcout</code> which supports wide character output."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560466576, "post_id": 56566927, "comment_id": 99756541, "body": "<i>Or</i>, if the rest of your application is nice and UTF-8, convert to UTF-8 on the way out of this function so you can just use <code>std::cout</code> to stream the constituent bytes verbatim to your UTF-8 capable terminal."}], "tags": [], "owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "is_accepted": false, "score": 4, "last_activity_date": 1560358421, "last_edit_date": 1560358421, "creation_date": 1560357954, "answer_id": 56566927, "question_id": 56566845, "link": "https://stackoverflow.com/questions/56566845/how-to-use-findnextfile-call-in-windows-to-list-directory-contents/56566927#56566927", "title": "How to use FindNextFile call in Windows to list directory contents?", "body": "<p><code>FindNextFile</code> is a macro that resolves to either <code>FindNextFileA</code> (ANSI) or <code>FindNextFileW</code> (Unicode UTF16-LE) depending on whether <code>UNICODE</code> is defined (and <code>_UNICODE</code>).</p>\n\n<p>So you change <code>WIN32_FIND_DATA</code> to <code>WIN32_FIND_DATAA</code> as <code>FindFirstFileA</code> needs the ANSI version of the parameter.</p>\n\n<p>See <a href=\"https://devblogs.microsoft.com/oldnewthing/20040212-00/?p=40643\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/oldnewthing/20040212-00/?p=40643</a> for an explanation of the differences between defining <code>UNICODE</code> and <code>_UNICODE</code></p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560466522, "post_id": 56569003, "comment_id": 99756527, "body": "Good answer. OP needs to choose between char and wide-char, then settle on the same implementation across both the stdlib and WinAPI, rather than randomly mixing &amp; matching / guessing."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1560367706, "last_edit_date": 1560367706, "creation_date": 1560367071, "answer_id": 56569003, "question_id": 56566845, "link": "https://stackoverflow.com/questions/56566845/how-to-use-findnextfile-call-in-windows-to-list-directory-contents/56569003#56569003", "title": "How to use FindNextFile call in Windows to list directory contents?", "body": "<p>In your first code snippet, you are clearly compiling your project with <code>UNICODE</code> defined (as evident by you being able to pass a <code>WIN32_FIND_DATA</code> to <code>FindNextFileW()</code> without error).  When <code>UNICODE</code> is defined, <code>WIN32_FIND_DATA</code> maps to <code>WIN32_FIND_DATAW</code>.  But <code>FindFirstFileA()</code> wants a <code>WIN32_FIND_DATAA</code> instead.  So the <em>simpliest</em> solution to that error is to just change  <code>WIN32_FIND_DATA</code> to <code>WIN32_FIND_DATAA</code> to satisfy the call to <code>FindFirstFileA()</code>.  But then you will have a new error because you would be passing a <code>WIN32_FIND_DATAA</code> to <code>FindNextFileW()</code>, which wants a <code>WIN32_FIND_DATAW</code> instead.  So you will need to call <code>FindNextFileA()</code> instead to fix that error:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n\nint wmain() {\n\n    WIN32_FIND_DATAA data;\n    std::string dir = \"c:\\\\* \"; \n    HANDLE hFind = FindFirstFileA(dir.c_str(), &amp;data);      // DIRECTORY\n\n    if (hFind != INVALID_HANDLE_VALUE) {\n        do {\n            std::cout &lt;&lt; data.cFileName &lt;&lt; std::endl;\n        } while (FindNextFileA(hFind, &amp;data));\n        FindClose(hFind);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In your second code snippet, <code>std::cout</code> does not have an overloaded <code>operator&lt;&lt;</code> for <code>wchar_t</code> data, but it does have an overload for <code>void*</code>.  The <code>WIN32_FIND_DATAW::cFileName</code> field is a <code>wchar_t[]</code> array, which <em>decays</em> into a <code>wchar_t*</code> pointer to the 1st character, and all pointers are implicitly convertible to <code>void*</code>.  So that is why you are seeing memory addresses being printed.  You need to use <code>std::wcout</code> instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n\nint wmain()\n{\n    WIN32_FIND_DATAW data;\n    std::wstring dir = L\"c:\\\\*\";\n    HANDLE hFind = FindFirstFileW(dir.c_str(), &amp;data);\n\n    if (hFind != INVALID_HANDLE_VALUE) {\n        do {\n            std::wcout &lt;&lt; data.cFileName &lt;&lt; std::endl;\n        } while (FindNextFileW(hFind, &amp;data));\n        FindClose(hFind);\n    }\n}\n</code></pre>\n\n<p>Most Win32 APIs that deal with string data have <code>A</code> (ANSI) and <code>W</code> (Wide, Unicode) flavors, and provide generic <code>TCHAR</code>-based macros to map to one or the other based on the <code>UNICODE</code> conditional.  In this case, <code>FindFirstFile()</code> maps to either <code>FindFirstFileA()</code> or <code>FindFirstFileW()</code>, <code>FindNextFile()</code> maps to either <code>FindNextFileA()</code> or <code>FindNextFileW()</code>, <code>WIN32_FIND_DATA</code> map to either <code>WIN32_FIND_DATAA</code> or <code>WIN32_FIND_DATAW</code>, etc.</p>\n\n<p>So the general rule is, the suffix you explicitly state (or omit) in an API function call should also be repeated in any related variable declarations as needed.  If you call an <code>A</code> API function explicitly, use appropriate <code>A</code> variable types explicitly.  If you call a <code>W</code> API function explicitly, use appropriate <code>W</code> variable types explicitly.  If you omit <code>A</code>/<code>W</code> in an API function call, omit it in variable declarations (or replace with <code>T</code> for <code>TCHAR</code>, if needed).</p>\n"}], "owner": {"reputation": 932, "user_id": 1913137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae59b40d06a8b06c115b6f598bb4044?s=128&d=identicon&r=PG&f=1", "display_name": "learnerX", "link": "https://stackoverflow.com/users/1913137/learnerx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "accepted_answer_id": 56569003, "answer_count": 2, "score": -1, "last_activity_date": 1560367706, "creation_date": 1560357519, "question_id": 56566845, "link": "https://stackoverflow.com/questions/56566845/how-to-use-findnextfile-call-in-windows-to-list-directory-contents", "title": "How to use FindNextFile call in Windows to list directory contents?", "body": "<p>I have a small piece of code that is meant to list the contents of a directory using the Windows API.</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nint wmain() {\n\n    WIN32_FIND_DATA data;\n    std::string dir = \"c:\\\\* \"; \n    HANDLE hFind = FindFirstFileA(dir.c_str(), &amp;data);      // DIRECTORY\n\n    if (hFind != INVALID_HANDLE_VALUE) {\n        do {\n            std::cout &lt;&lt; data.cFileName &lt;&lt; std::endl;\n        } while (FindNextFileW(hFind, &amp;data));\n        FindClose(hFind);\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<p><code>Error  C2664    'HANDLE FindFirstFileA(LPCSTR,LPWIN32_FIND_DATAA)': cannot convert argument 2 from 'WIN32_FIND_DATA *' to 'LPWIN32_FIND_DATAA'</code></p>\n\n<p>The errors change depending on my attempts at fixes. I have tried the following:</p>\n\n<ul>\n<li>Tried to change <code>FindFirstFile</code> to <code>FindFirstFileW</code> / <code>FindNextFileA</code></li>\n<li>Tried to put an <code>L</code> in front of directory string <code>L\"C:\\\\*\"</code></li>\n</ul>\n\n<p>I have looked at the following related questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2314542/listing-directory-contents-using-c-and-windows\">Listing directory contents using C and Windows</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41404711/how-to-list-files-in-a-directory-using-the-windows-api\">How to list files in a directory using the Windows API?</a></li>\n</ul>\n\n<p>But did not get it to successfully list the contents. Closest I have got is this code which compiles without errors:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    WIN32_FIND_DATA data;\n    HANDLE hFind = FindFirstFileW(L\"C:\\\\*\", &amp;data);\n\n    if (hFind != INVALID_HANDLE_VALUE) {\n        do {\n            std::cout &lt;&lt; data.cFileName &lt;&lt; std::endl;\n        } while (FindNextFileW(hFind, &amp;data));\n        FindClose(hFind);\n    }\n}\n</code></pre>\n\n<p>This compiles but when I run the binary, it outputs this:</p>\n\n<blockquote>\n  <p>0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C\n  0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C\n  0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C\n  0000009A9DBAF32C 0000009A9DBAF32C 0000009A9DBAF32C</p>\n</blockquote>\n\n<p>While we are at it, what's the difference between <code>FindNextFile</code>, <code>FindNextFileA</code> and <code>FindNextFileW</code>? I feel like the issue is somehow related to these?</p>\n"}, {"tags": ["c++", "language-lawyer", "reference-binding"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1560355301, "post_id": 56566203, "comment_id": 99711856, "body": "Narrowing conversions are only ever mentioned in the standard in relation to <a href=\"http://eel.is/c++draft/dcl.init.list#7\" rel=\"nofollow noreferrer\">list initialization</a>. You aren&#39;t doing those so you won&#39;t get a narrowing conversion warning. See also <a href=\"https://stackoverflow.com/questions/52443036/why-doesnt-c-show-a-narrowing-conversion-error-when-casting-a-float-to-a-char/52443287\" title=\"why doesnt c show a narrowing conversion error when casting a float to a char\">stackoverflow.com/questions/52443036/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1560355273, "post_id": 56566227, "comment_id": 99711848, "body": "Is <code>-Wall -pedantic</code> not sufficient? I have that set (as mentioned in the question)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1560355345, "post_id": 56566227, "comment_id": 99711881, "body": "Nope. There&#39;s a separate one for narrowing conversions."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1560355346, "post_id": 56566227, "comment_id": 99711882, "body": "@R_Kapp <a href=\"https://stackoverflow.com/questions/52443036/why-doesnt-c-show-a-narrowing-conversion-error-when-casting-a-float-to-a-char/52443287\">Use <code>-Wconversion</code></a>"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 6, "creation_date": 1560355402, "post_id": 56566227, "comment_id": 99711918, "body": "I really wish gcc had a <code>-Wabsolutely-everything-and-if-i-complain-im-an-idiot</code> option. Does <code>-Wextra</code> give you <code>-Wconversion</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1560355453, "post_id": 56566227, "comment_id": 99711947, "body": "@Omnifarious: <code>warning: you are still using c++ [-Wfind-a-pub-instead]</code>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1560355471, "post_id": 56566227, "comment_id": 99711954, "body": "@Omnifarious Well, good luck: <a href=\"https://stackoverflow.com/questions/11714827/how-to-turn-on-literally-all-of-gccs-warnings\" title=\"how to turn on literally all of gccs warnings\">stackoverflow.com/questions/11714827/&hellip;</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 2, "creation_date": 1560355490, "post_id": 56566227, "comment_id": 99711967, "body": "@Omnifarious: If I ever managed to get onto the gcc development team (Heaven forbid!) that would be my first project."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560355576, "post_id": 56566227, "comment_id": 99712008, "body": "<code>-Wall -Wextra -pedantic</code> usually suffices for me. I don&#39;t think that combination has ever <i>seriously</i> let me down."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1560355743, "post_id": 56566227, "comment_id": 99712089, "body": "@MaxLanghof - The reasoning given misses one important case: I want to know what warnings there are so I can turn off the not-useful ones myself. The manual is not sufficient for a wide variety of reasons. Even if it were complete (which I suspect it frequently isn&#39;t) the explanations in the manual only go so far. Really, I want to know what kind of code triggers the warning, then go investigate and figure out if I actually care or not."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1560356012, "post_id": 56566227, "comment_id": 99712226, "body": "@Omnifarious <a href=\"https://quuxplusone.github.io/blog/2018/12/06/dont-use-weverything/\" rel=\"nofollow noreferrer\">you don&#39;t want that</a>."}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1560356031, "post_id": 56566227, "comment_id": 99712237, "body": "<code>-Wextra</code> does not add this either - we need to add <code>-Wconversion</code> separately, it seems."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1560357112, "post_id": 56566227, "comment_id": 99712738, "body": "@Omnifarious \u2022 For clang, I use <code>-Weverything</code> all the time.  It&#39;s great; you want it.  GCC should add that as a switch option."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1560359398, "post_id": 56566227, "comment_id": 99713786, "body": "@Omnifarious Such a proposition has already been declined for gcc. <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=31573\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1560364979, "post_id": 56566227, "comment_id": 99716203, "body": "@n.m. - I do, in fact, want that, for just the purpose mentioned in the post you link to. In order to discover interesting warning flags that I would like to enable everywhere."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1560495804, "post_id": 56566227, "comment_id": 99762965, "body": "@Bathsheba anyone can submit a gcc patch. BTW what other warnings for legal, correct code did you have in mind?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 8, "last_activity_date": 1560355445, "last_edit_date": 1560355445, "creation_date": 1560355124, "answer_id": 56566227, "question_id": 56566203, "link": "https://stackoverflow.com/questions/56566203/why-is-a-double-convertible-to-a-const-reference-of-seemingly-any-primitive/56566227#56566227", "title": "Why is a double convertible to a const-reference of seemingly any primitive?", "body": "<p>It is indeed standard.</p>\n\n<p><code>test1</code> and <code>test2</code> are converted to <em>anonymous temporary</em> <code>char</code> and <code>unsigned</code> types for which the <code>const</code> references in the function are appropriate bindings. If you set your compiler to warn you of narrowing conversions (e.g. -Wconversion), it would output a message.</p>\n\n<p>These bindings are not possible if the function parameters are non-<code>const</code> references, and your compiler is correctly issuing a diagnostic in that case.</p>\n\n<p>One fix is to <code>delete</code> a better overload match:</p>\n\n<pre><code>float func(double, double) = delete;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "is_accepted": false, "score": 4, "last_activity_date": 1560365533, "last_edit_date": 1560365533, "creation_date": 1560357779, "answer_id": 56566898, "question_id": 56566203, "link": "https://stackoverflow.com/questions/56566203/why-is-a-double-convertible-to-a-const-reference-of-seemingly-any-primitive/56566898#56566898", "title": "Why is a double convertible to a const-reference of seemingly any primitive?", "body": "<p>As a complement to the accepted answer, particularly the approach</p>\n\n<blockquote>\n  <p>One fix is to delete a better overload match:</p>\n\n<pre><code>float func(double, double) = delete;\n</code></pre>\n</blockquote>\n\n<p>one could also approach it from the other way around: namely deleting all overloads that are not exactly matching your intended types of parameters. If you want to avoid <strong>any</strong> implicit conversions (including promotions), you could define <code>func</code> as a deleted <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\"><strong>non-overloaded</strong></a> function template, and define explicit specializations of <code>func</code> only for the specific types of arguments you\u2019d like to have overloads for. E.g.:</p>\n\n<pre><code>// Do not overload the primary function template 'func'.\n// http://www.gotw.ca/publications/mill17.htm\ntemplate&lt; typename T, typename U &gt;\nfloat func(const T&amp; val1, const U&amp; val2) = delete;\n\ntemplate&lt;&gt;\nfloat func(char const&amp; val1, unsigned int const&amp; val2)\n{\n    return val1 + val2;\n}\n\nint main() {\n    double test1 = 0.2;\n    double test2 = 0.3;\n    char test3 = 'a';\n    unsigned int test4 = 4U;\n    signed int test5 = 5;\n\n    //(void)func(test1, test2); // error: call to deleted function 'func' (... [with T = double, U = double])\n    //(void)func(test2, test3); // error: call to deleted function 'func' (... [with T = double, U = char])\n    (void)func(test3, test4); // OK\n    //(void)func(test3, test5); // error: call to deleted function 'func' (... [with T = char, U = int])\n    return 0;\n}\n</code></pre>\n\n<p>Emphasizing again to take care if intending to overload the primary function template, as overload resolution for overloaded and explicitly specialized function templates <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">can be somewhat confusing</a>, as specializations do not participate in the first step of overload resolution. </p>\n"}], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 56566227, "answer_count": 2, "score": 4, "last_activity_date": 1560494609, "creation_date": 1560355024, "last_edit_date": 1560494609, "question_id": 56566203, "link": "https://stackoverflow.com/questions/56566203/why-is-a-double-convertible-to-a-const-reference-of-seemingly-any-primitive", "title": "Why is a double convertible to a const-reference of seemingly any primitive?", "body": "<p>Consider the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nfloat func(char const &amp; val1, unsigned int const &amp; val2)\n{\n    return val1 + val2;\n}\n\nint main() {\n    double test1 = 0.2;\n    double test2 = 0.3;\n\n    std::cout &lt;&lt; func(test1, test2) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This compiles and runs despite the fact that I am passing in a <code>double</code> to a function that takes a const-reference to types that are smaller than a <code>double</code> (on my system, <code>sizeof(double) == 8</code>, while <code>sizeof(unsigned int) == 4</code>, and <code>sizeof(char) == 1</code> by definition). If the reference isn't <code>const</code>, compilation fails (e.g.,  <code>float func(char &amp; val1, unsigned int &amp; val2)</code> instead of the current definition) with an error:</p>\n\n<blockquote>\n  <p>cannot bind non-const lvalue reference of type 'char&amp;' to an rvalue of type 'char'</p>\n</blockquote>\n\n<p>I get the exact same behavior when testing this with GCC, Clang, ICC, and MSVC on Godbolt, so it appears standard. What is it about const-references that causes this to be accepted, whereas a reference isn't? Also, I used <code>-Wall -pedantic</code> - why am I not getting a warning about a narrowing conversion? I do when the function passes by value instead of by reference...</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1560354519, "post_id": 56565987, "comment_id": 99711426, "body": "Simply call <code>init</code> in your factory?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560354601, "post_id": 56565987, "comment_id": 99711473, "body": "You might use private tag to allow use of <code>std::make_shared</code>."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560356281, "post_id": 56566458, "comment_id": 99712375, "body": "@Caleth: token is a little more tricky, as your allows construction from outside the class <a href=\"http://coliru.stacked-crooked.com/a/82c8f2f5ecf7b82a\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1560356643, "post_id": 56566458, "comment_id": 99712543, "body": "In this case you don&#39;t need to derive <code>enable_shared_from_this</code>."}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "edited": false, "score": 0, "creation_date": 1560356930, "post_id": 56566458, "comment_id": 99712663, "body": "but <code>Foo</code> ctor is now public ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1560356938, "post_id": 56566458, "comment_id": 99712667, "body": "@MaximEgorushkin: Not for this part indeed."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "edited": false, "score": 1, "creation_date": 1560357088, "post_id": 56566458, "comment_id": 99712727, "body": "@Scab: yes and no. It is public, so <code>make_shared</code> can use it, <b>but</b> <code>private_key</code> can only be constructed by <code>Foo</code>. If you dislike <a href=\"https://arne-mertz.de/2016/10/passkey-idiom/\" rel=\"nofollow noreferrer\">pass-key idiom</a>, you might still use shared_ptr with <code>new</code> as you did."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1560357615, "post_id": 56566458, "comment_id": 99712972, "body": "If you put code of <code>init</code> directly in factory (as the comment after <code>p-&gt;init()</code>), you might then remove <code>init</code> and you no longer use <code>shared_from_this</code>, and you might then remove the inheritance. (you might need it for other part of the code though)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1560356993, "last_edit_date": 1560356993, "creation_date": 1560355992, "answer_id": 56566458, "question_id": 56565987, "link": "https://stackoverflow.com/questions/56565987/how-to-build-a-class-in-one-call-if-initialization-need-shared-from-this/56566458#56566458", "title": "How to build a class in one call if initialization need shared_from_this?", "body": "<p>You might call <code>init</code> from your factory:</p>\n\n<pre><code>class Foo : public std::enable_shared_from_this&lt;Foo&gt;\n{\nprivate:\n    class private_key{\n    private:\n        friend class Foo;\n\n        private_key() {}\n    };\n\npublic:\n    static std::shared_ptr&lt;Foo&gt; create(int val) {\n        auto p = std::make_shared&lt;Foo&gt;(private_key{}, val);\n\n        p-&gt;init(); // Or directly globalInit(p, p-&gt;m_val);\n        return p;\n    }\n\nprivate:\n    void init() {\n        // during init, I need to call shared_from_this()\n        // and access private members\n        globalInit(shared_from_this(), m_val);\n    }\n\npublic: // But only callable internally thanks to private_key\n    Foo(private_key, int val) : m_val(val) {}\n\nprivate:\n    int m_val;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/80b3888acd1e6198\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1560358811, "last_edit_date": 1560358811, "creation_date": 1560358113, "answer_id": 56566962, "question_id": 56565987, "link": "https://stackoverflow.com/questions/56565987/how-to-build-a-class-in-one-call-if-initialization-need-shared-from-this/56566962#56566962", "title": "How to build a class in one call if initialization need shared_from_this?", "body": "<p>If you:</p>\n\n<ol>\n<li>don't need <code>std::week_ptr</code>,</li>\n<li>can use <code>boost</code> libraries,</li>\n</ol>\n\n<p>than <code>boost::intrusive_ptr</code> is all around a better choice than <code>std::shared_ptr</code> because:</p>\n\n<ol>\n<li><code>sizeof(boost::intrusive_ptr&lt;T&gt;) == sizeof(std::shared_ptr&lt;T&gt;) / 2</code>.</li>\n<li>You explicitly control whether the reference counter is atomic or not. Objects that never cross thread boundaries do not need the more expensive atomic increment/decrement. <code>std::shared_ptr</code> always uses two atomic counters (one for the object, another for the control block itself).</li>\n<li>No extra memory allocation (like with <code>std::make_shared</code>).</li>\n<li>You can pass around plain pointers and references to <code>T</code> and make <code>boost::intrusive_ptr&lt;T&gt;</code> when you need them. This may be dangerous because you must be sure that the object is heap allocated. Nevertheless, you can, if you need to, no factory is needed.</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;boost/smart_ptr/intrusive_ptr.hpp&gt;\n#include &lt;boost/smart_ptr/intrusive_ref_counter.hpp&gt;\n\n#include &lt;iostream&gt;\n\nstruct Foo;\nvoid globalInit(Foo*);\n\nstruct Foo : boost::intrusive_ref_counter&lt;Foo, boost::thread_unsafe_counter&gt; {\n    Foo() {\n        globalInit(this);\n    }\n};\n\nboost::intrusive_ptr&lt;Foo&gt; global_copy;\n\nvoid globalInit(Foo* foo) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    global_copy.reset(foo);\n}\n\nint main() {\n    boost::intrusive_ptr&lt;Foo&gt; a(new Foo);\n    std::cout &lt;&lt; (a == global_copy) &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56566458, "answer_count": 2, "score": 1, "last_activity_date": 1560358811, "creation_date": 1560354252, "last_edit_date": 1560355752, "question_id": 56565987, "link": "https://stackoverflow.com/questions/56565987/how-to-build-a-class-in-one-call-if-initialization-need-shared-from-this", "title": "How to build a class in one call if initialization need shared_from_this?", "body": "<p>I have a class that need to call <code>shared_from_this()</code> for its initialization. As it is not possible to directly call this function inside the ctor, then i have to do it in 2 steps :</p>\n\n<ol>\n<li>build the class using a static factory function</li>\n<li>call an init function of the class so that the object is ready to use</li>\n</ol>\n\n<p>It works however ideally, i would like the client code only to make one single call for it - and make the <code>init</code> function private as it is a part of the construction. </p>\n\n<p>Is this possible ?</p>\n\n<p>There is also a side note in the comments following <a href=\"https://stackoverflow.com/questions/33933550/exception-bad-weak-ptr-while-shared-from-this?rq=1\">exception: bad_weak_ptr while shared_from_this</a> because it does not work in my case ( but maybe it's another question )</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass Foo;\n\nvoid globalInit(std::shared_ptr&lt;Foo&gt; foo, int val)\n{\n    (void)foo;\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; val &lt;&lt;std::endl;\n}\n\nclass Foo : public std::enable_shared_from_this&lt;Foo&gt;\n{\npublic:\n    static std::shared_ptr&lt;Foo&gt; create(int val) {\n        return std::shared_ptr&lt;Foo&gt;(new Foo(val));\n        /*\n         * side note : if i use return std::make_shared&lt;Foo&gt;(val);\n         * then i have a compiler error with g++ (Debian 6.3.0-18)\n         * \"Foo::Foo(int) is private within this context\"\n         */\n    }\n\n    // it should not be public ..\n    void init() {\n        // during init, i need to call shared_from_this()\n        // and access private members\n        globalInit(shared_from_this(), m_val);\n    }\n\nprivate:\n    // i cannot call shared_from_this() in the ctor\n    explicit Foo(int val) : m_val(val) {}\n\nprivate:\n    int m_val;\n};\n\nint main(int argc, char *argv[])\n{\n    (void)argc;\n    (void)argv;\n\n    // create the object\n    std::shared_ptr&lt;Foo&gt; foo = Foo::create(0);\n    // initialize it\n    foo-&gt;init();\n\n    // now it's ready to use\n    // ...\n\n    return 0;\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 6, "creation_date": 1560354254, "post_id": 56565958, "comment_id": 99711270, "body": "Recommended reading: <a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\">Resolve build errors due to circular dependency amongst classes</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1560354356, "post_id": 56565958, "comment_id": 99711325, "body": "You have already gone in one possible direction: Refer to the comments only by index. A variation of that would be storing pointers to <code>Comment</code>s (which will require reading the linked article). As it stands, there is no need to include <code>Commentario.h</code> in <code>Article.h</code> though, so just don&#39;t do that and it will be fine."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560356458, "post_id": 56565958, "comment_id": 99712449, "body": "That&#39;s not &quot;spelling in code&quot;, that&#39;s vandalism: you removed the problem."}, {"owner": {"reputation": 11, "user_id": 11628493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gOAeP.jpg?s=128&g=1", "display_name": "Graceless Dummy", "link": "https://stackoverflow.com/users/11628493/graceless-dummy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560357293, "post_id": 56565958, "comment_id": 99712812, "body": "@LightnessRacesinOrbit I am sorry, I thought it would be helpful to let the readers look how my code was now and what was the new problem, And I didn&#39;t tag it as &quot;spelling in code&quot; StackOverflow did it for me"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1560357760, "post_id": 56565958, "comment_id": 99713016, "body": "The include file <code>Article.h</code> does not need to include <code>Comentario.h</code>.  The <code>Article.h</code> file only references <code>std::map</code> and <code>std::string</code>.  I recommend you using the <code>std::</code> prefix in header files rather than depending on some file having <code>using namespace std;</code>.  Try to make header files self sufficient and not rely on other headers (except Standard Library)."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1560421203, "post_id": 56565958, "comment_id": 99734454, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\">Resolve build errors due to circular dependency amongst classes</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 2, "last_activity_date": 1560365859, "creation_date": 1560365859, "answer_id": 56568725, "question_id": 56565958, "link": "https://stackoverflow.com/questions/56565958/how-do-i-implement-a-into-b-and-b-into-a-without-creating-a-loop/56568725#56568725", "title": "How do I implement A into B and B into A (without creating a loop)?", "body": "<p>You need to go one step back. </p>\n\n<p>You need first to analyze WHAT you want to do and then think of HOW you could do. Then you would do it (write the code) and then you would test it. In reality there are even more steps. </p>\n\n<p>So let's start with the WHAT. You have some entities that have a relation. So you have</p>\n\n<ul>\n<li>an \"online store\"</li>\n<li>\"articles\" and</li>\n<li>\"comments\" for the \"articles\"</li>\n</ul>\n\n<p>That are your entities or objects. These entities have a relation</p>\n\n<ul>\n<li>The online store has 0 or 1 or many articles</li>\n<li>An existing article can have 0 or 1 or many comments</li>\n</ul>\n\n<p>So, you want to store 0 or 1 or many \"somethings\". To store such \"somethings\", C++ offers containers in the STL. For example std::vector or std::list. You need to read about the properties of those containers and select the most fitting for you. In this case it would be most certainly a std::vector. It can contain 0 or more elements and can grow dynamically.</p>\n\n<p>For the relations in C++ and object oriented languages mostly so called \"has a\" or \"is a\" properties are used. \"is a\" relations are modelled with derivations and \"has a\" types are models via so called containment.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\n// \"Is a\"-relation. Done by deriving from base class Shape\nstruct Shape\n{\n  std::string name;\n};\n// A line is a shape\nstruct Line : public Shape\n{\n  int length;\n};\n\n// \"Has a\"-relation. Done by containment. Class online Shop contains articles\nstruct Article\n{\n  std::string articleName;\n};\nstruct OnlineShop\n{\n  std::string shopName;\n  std::vector&lt;Article&gt; article;\n};\n\n\nint main()\n{\n  Line line{ \"long line\",12345 };\n\n  std::string myShopName{ \"My Shop\" };\n  std::vector&lt;Article&gt; myArticles{ Article{ \"Apple\"}, Article{\"Banana\"} };\n  OnlineShop myOnlineShop{ myShopName, myArticles };\n\n  return 0;\n}\n</code></pre>\n\n<p>Now you may understand a little better.</p>\n\n<p>So for your solution, after thinking of the entities and the relations, you may come to a possible solution:</p>\n\n<ul>\n<li>You will create one class OnlineStore</li>\n<li>You will create a class Article</li>\n<li>And a class Comment</li>\n</ul>\n\n<p>Since there are possibly many Articles and many Comments, you will put those in a std::vector. And the class OnlineShop will conatin the class Article which will contain the class Comment.</p>\n\n<p>As a result there will be no circular dependencies. Circular references are in most cases an indicator for a design flaw.</p>\n\n<p>The below shows an skeleton of such implementation:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstruct Comment \n{\n   std::string commentText{};\n   std::string commentAuthor{};\n};\nstruct Article\n{\n   std::string articleName{};\n   std::vector&lt;Comment&gt; comment{};\n};\nstruct OnlineShop\n{\n   std::vector&lt;Article&gt; article{};\n};\n\nint main()\n{\n   OnlineShop onlineShop{};\n   return 0;\n}\n</code></pre>\n\n<p>Please define your classes based on this approach. Then add the needed functionality.</p>\n\n<p>Please also read about the principles of object oriented programming. </p>\n\n<p>Hope this helps a little . . .</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 7948788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agWaV.png?s=128&g=1", "display_name": "11 Equals", "link": "https://stackoverflow.com/users/7948788/11-equals"}, "is_accepted": false, "score": 2, "last_activity_date": 1560368610, "creation_date": 1560368610, "answer_id": 56569361, "question_id": 56565958, "link": "https://stackoverflow.com/questions/56565958/how-do-i-implement-a-into-b-and-b-into-a-without-creating-a-loop/56569361#56569361", "title": "How do I implement A into B and B into A (without creating a loop)?", "body": "<p>That's a great question! Using a reference to an article along with forward declaration is probably what you're trying to do, though I don't see much of a reason for Comment to know anything about Article, especially since Article will probably own all of its Comments using std::vector&lt; Comment>.</p>\n\n<p>Right now, your comentario.h file looks like this:</p>\n\n<pre><code>// comentario.h\nclass Comment {\npublic:\n  ...\nprivate:\n  Article article;\n  [other implementation details for an Article]\n}\n</code></pre>\n\n<p>Since your Comment definitely shouldn't own an Article, we can rewrite comentario.h this way:</p>\n\n<pre><code>// comentario.h\nclass Article; // this is a forward declaration in order to reference an Article\n\nclass Comment {\npublic:\n  Comment(Article&amp; article) // a Comment constructor--requires an Article\n  ... // other Comment implementation details\nprivate:\n  Article&amp; article;  // reference an existing Article\n  ...\n  // no need for Article implementation details at all in Comment\n}\n\n// comentario.cpp\n#include \"include/comentario.h\"\n\n#include \"include/article.h\" // we can include article.h now since we're outside the header\n\nComment::Comment(Article&amp; article)  // the Comment constructor\n: article(article) { // initialize the reference to an Article\n\n}\n</code></pre>\n\n<p>That's one way to do this. I wouldn't personally give Comment any knowledge of Article, but if I had to, I'd create a read-only wrapper for Article details like the title and then reference that in Comment.</p>\n\n<p>Side note: many programmers discourage \"using namespace xx\" in a header.</p>\n"}], "owner": {"reputation": 11, "user_id": 11628493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gOAeP.jpg?s=128&g=1", "display_name": "Graceless Dummy", "link": "https://stackoverflow.com/users/11628493/graceless-dummy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560721279, "creation_date": 1560354160, "last_edit_date": 1560721279, "question_id": 56565958, "link": "https://stackoverflow.com/questions/56565958/how-do-i-implement-a-into-b-and-b-into-a-without-creating-a-loop", "title": "How do I implement A into B and B into A (without creating a loop)?", "body": "<p>I am learning C++ and I am trying to create a \"Online store\" where you can publish articles and do comments about them, a comment belongs to an article and an article can have many comments but I don't now how to code it without creating a loop</p>\n\n<p>I have tried using Article.h -> #include \"Comment.h\" and vice versa, but when I try to compile it creates a loop where A imports B and B imports A</p>\n\n<h1>Comment.h</h1>\n\n<pre><code>#include &lt;string&gt;\n\n//This is what I've tried but it creates a loop\n#include \"Article.h\"\n\n\nusing namespace std;\n//Class\nclass Comment\n{\n    private:\n        Article article;\n        string description;\n        string rating;\n};\n</code></pre>\n\n<h1>Article.h</h1>\n\n<pre><code>\n#include &lt;string&gt;\n#include &lt;map&gt;\n\n//The other part of my buggy-loop\n#include \"Comentario.h\"\n\nclass Article\n{\n    private:\n        map&lt;string, int&gt; art_comments;\n        string name;\n        string rating;\n};\n</code></pre>\n\n<h1>Update</h1>\n\n<p>Thank you everyone, my problem was solved with the <a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\">Resolve build errors due to circular dependency amongst classes</a> you gave me</p>\n\n<p>As this question was solved ealier, shall I delete this post?</p>\n"}, {"tags": ["c++", "game-physics"], "comments": [{"owner": {"reputation": 1587, "user_id": 2079802, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e557e0909bd12533db6f43b8d6500b65?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/2079802/collin"}, "edited": false, "score": 1, "creation_date": 1560353742, "post_id": 56565724, "comment_id": 99711025, "body": "What is specifically the problem? Are you asking how to capture arrow key input? Also, I&#39;m not sure what you mean regarding the screen."}, {"owner": {"reputation": 21, "user_id": 11637773, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3O6-4A4dOVo/AAAAAAAAAAI/AAAAAAAADTw/jwNeV7XZZek/photo.jpg?sz=128", "display_name": "Superfire353", "link": "https://stackoverflow.com/users/11637773/superfire353"}, "reply_to_user": {"reputation": 1587, "user_id": 2079802, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e557e0909bd12533db6f43b8d6500b65?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/2079802/collin"}, "edited": false, "score": 0, "creation_date": 1560354139, "post_id": 56565724, "comment_id": 99711213, "body": "Im sorry my english so bad \ud83d\ude05 . What I mean is usually when we input a data using cin&gt;&gt; we need to press &quot;Enter&quot; button to proceed to the next command , but what I want is we only need to press the specific key example no &quot;1&quot; to proceed without pressing &quot;Enter&quot; button. And how to control the pacman( player ) using the arrow key in my coding. Sorry \ud83d\ude05"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1560356300, "post_id": 56566407, "comment_id": 99712378, "body": "Blimey those massive banner comments in every function!!"}], "tags": [], "owner": {"reputation": 453, "user_id": 11484423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYonn.jpg?s=128&g=1", "display_name": "05032 Mendicant Bias", "link": "https://stackoverflow.com/users/11484423/05032-mendicant-bias"}, "is_accepted": false, "score": 0, "last_activity_date": 1560355767, "creation_date": 1560355767, "answer_id": 56566407, "question_id": 56565724, "link": "https://stackoverflow.com/questions/56565724/move-using-arrow-key/56566407#56566407", "title": "Move Using Arrow Key", "body": "<p>What you want to do is to listen to keyboard events and update characters on the console output memory in a non-blocking way.</p>\n\n<p>One way to do it is to interface with your operating system API that provide such interface.</p>\n\n<p>If you use windows I did a <a href=\"https://github.com/OrsoEric/Windows-Console-Animation\" rel=\"nofollow noreferrer\">minimal game</a> to learn how to do this myself.</p>\n\n<p>If you use linux the API are different. You can also use cross platform IDE like QT or libraries, like the very old conio.h.</p>\n"}], "owner": {"reputation": 21, "user_id": 11637773, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3O6-4A4dOVo/AAAAAAAAAAI/AAAAAAAADTw/jwNeV7XZZek/photo.jpg?sz=128", "display_name": "Superfire353", "link": "https://stackoverflow.com/users/11637773/superfire353"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1560358105, "answer_count": 1, "score": 0, "last_activity_date": 1560355767, "creation_date": 1560353340, "last_edit_date": 1560354776, "question_id": 56565724, "link": "https://stackoverflow.com/questions/56565724/move-using-arrow-key", "closed_reason": "Duplicate", "title": "Move Using Arrow Key", "body": "<p>I was doing my coding and try to make the Pacman game using Dev c++  , but I had a problem to use my arrow key as control the pacman and  how to make the screen stayed while playing the game . please help mee thanks \ud83d\ude2d\ud83d\ude2d\ud83d\ude2d\ud83d\ude2d</p>\n"}, {"tags": ["c++", "stringstream"], "comments": [{"owner": {"reputation": 1587, "user_id": 2079802, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e557e0909bd12533db6f43b8d6500b65?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/2079802/collin"}, "edited": false, "score": 0, "creation_date": 1560354333, "post_id": 56565721, "comment_id": 99711314, "body": "I&#39;m not able to reproduce the bug locally. Have you been able to produce the bug using the code you posted above?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1560354635, "post_id": 56565721, "comment_id": 99711497, "body": "Be cautious of <code>#include &lt;bits&#47;stdc++.h&gt;</code> and <code>using namespace std;</code> as either can cause interesting problems. Using them together increases the likelihood of things going wrong."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1560356051, "post_id": 56565721, "comment_id": 99712250, "body": "<b>Recommended reading:</b> <a href=\"https://stackoverflow.com/q/31816095/560648\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1560356076, "post_id": 56565721, "comment_id": 99712263, "body": "<i>&quot;The above was the bare-bones example, and it does indeed work as expected&quot;</i> Then it&#39;s not a bare-bones example. Only post examples that actually reproduce the problem. Thanks."}, {"owner": {"reputation": 949, "user_id": 1015315, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/acc5cfe18423f43ae9692a71c4dea156?s=128&d=identicon&r=PG", "display_name": "Ilonpilaaja", "link": "https://stackoverflow.com/users/1015315/ilonpilaaja"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560375153, "post_id": 56565721, "comment_id": 99720185, "body": "@LightnessRacesinOrbit: I totally agree, but in my case it is a project involving several files, and it is hard to disentangle to present as an MWE. Thanks."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560378492, "post_id": 56565721, "comment_id": 99721084, "body": "Yep it can be difficult but it&#39;s still something you have to do first. In fact, the more difficult it is, the further your problem description is from the actual cause, and the less likely we are to be able to guess at the solution."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1560356378, "post_id": 56566386, "comment_id": 99712410, "body": "That&#39;s the AND operator (<code>&amp;&amp;</code>), not the bitwise-AND (<code>&amp;</code>). You should use the latter. Also, there&#39;s a function called <code>bad()</code> that does this check."}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1560362096, "post_id": 56566386, "comment_id": 99714955, "body": "Should use &amp; instead of &amp;&amp;."}], "tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": false, "score": 1, "last_activity_date": 1560361947, "last_edit_date": 1560361947, "creation_date": 1560355697, "answer_id": 56566386, "question_id": 56565721, "link": "https://stackoverflow.com/questions/56565721/istream-not-fully-recovering-what-has-been-put-to-stringstream/56566386#56566386", "title": "istream not fully recovering what has been put to stringstream", "body": "<p>You are not checking the state of your stream. There is an upper limit on how much you can fit in there - basically the max string size. This is discussed in detailed in this <a href=\"https://stackoverflow.com/questions/22025324/what-is-the-maximum-size-of-stdostringstream-buffer\">question</a></p>\n\n<p>Check for errors as you write to the stringstream?</p>\n\n<pre><code>stringstream ss;\nfor (int i = 0; i &lt; 100000000; ++i) //or some other massive number?\n{\n    ss &lt;&lt; rand() &lt;&lt; \" \" &lt;&lt; rand() &lt;&lt; \" \" &lt;&lt; rand() &lt;&lt; \"  \" &lt;&lt; rand() &lt;&lt; endl;\n    if (ss.rdstate() &amp; stringstream::badbit)\n        std::cerr &lt;&lt; \"Problem!\\n\";\n}\n</code></pre>\n\n<p>You <em>may</em> want to check specific writes of numbers. </p>\n"}, {"tags": [], "owner": {"reputation": 949, "user_id": 1015315, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/acc5cfe18423f43ae9692a71c4dea156?s=128&d=identicon&r=PG", "display_name": "Ilonpilaaja", "link": "https://stackoverflow.com/users/1015315/ilonpilaaja"}, "is_accepted": false, "score": 0, "last_activity_date": 1560425092, "creation_date": 1560425092, "answer_id": 56579383, "question_id": 56565721, "link": "https://stackoverflow.com/questions/56565721/istream-not-fully-recovering-what-has-been-put-to-stringstream/56579383#56579383", "title": "istream not fully recovering what has been put to stringstream", "body": "<p>Ultimately, I've used good old <code>FILE *</code> instead of <code>istream</code>s, and everything worked as expected. For some reason, the latter was reading only a part of the file (namely, a prefix thereof), and stopping prematurely with a <code>fail()</code> being true.\nI have no idea why.</p>\n"}], "owner": {"reputation": 949, "user_id": 1015315, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/acc5cfe18423f43ae9692a71c4dea156?s=128&d=identicon&r=PG", "display_name": "Ilonpilaaja", "link": "https://stackoverflow.com/users/1015315/ilonpilaaja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1560425092, "creation_date": 1560353330, "last_edit_date": 1560421378, "question_id": 56565721, "link": "https://stackoverflow.com/questions/56565721/istream-not-fully-recovering-what-has-been-put-to-stringstream", "title": "istream not fully recovering what has been put to stringstream", "body": "<p>I use the following set-up:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nclass foo {\n    public:\n        void bar( istream &amp;in, int n ) {\n            vector&lt;tuple&lt;int,int,int,int&gt;&gt; q;\n            int x,y,a,b;\n            for ( q.clear(); in &gt;&gt; x &gt;&gt; y &gt;&gt; a &gt;&gt; b; q.push_back(make_tuple(x,y,a,b)) );\n            assert( n == q.size() );\n        }\n};\n\nint main() {\n    stringstream ss;\n    for ( int i= 0; i &lt; 100; ++i )\n        ss &lt;&lt; rand() &lt;&lt; \" \" &lt;&lt; rand() &lt;&lt; \" \" &lt;&lt; rand() &lt;&lt; \" \" &lt;&lt; rand() &lt;&lt; endl;\n    ss.clear(), ss.seekg(0,std::ios::beg);\n    (new foo())-&gt;bar(ss,100);\n}\n</code></pre>\n\n<p>In fact, my code is more complex than this, but the idea is that I put stuff (<code>long long int</code>s to be exact) into a <code>stringstream</code> and call a function, supplying the created <code>stringstream</code> as <code>istream</code> object. The above example works fine, but in my particular case I put, say, <code>2 mln</code> tuples. And the problem is that the numbers are not fully recovered at the other end, inside the <code>foo</code> (I get less than <code>2000000</code> numbers). Can you envision a scenario when this might happen? Can this <code>in &gt;&gt; x &gt;&gt; y &gt;&gt; a &gt;&gt; b</code> somehow end sooner than the input is exhausted?</p>\n\n<p>EDIT: I have used this check:</p>\n\n<pre><code>if ( ss.rdstate() and std::stringstream::badbit ) {\n    std::cerr &lt;&lt; \"Problem in putting stuff into stringstream!\\n\";\n    assert( false );\n}\n</code></pre>\n\n<p>Somehow, everything was passing this check. </p>\n\n<p>EDIT: As I said, I do a sanity check inside <code>main()</code> by recovering the input-numbers using the <code>&gt;&gt;</code>-method, and indeed get back the <code>2 mln</code> (tuples of) numbers.\nIt is just when the <code>stringstream</code> object gets passed to the <code>foo</code>, it recovers only fraction of the numbers, not all of them.</p>\n\n<p>EDIT: For what it's worth, I am pasting the actual context here. Because of its dependencies, it won't compile, but at least we will be able to see the offending lines. It is the <code>run()</code> method that is not being able to recover the queries supplied by the <code>main()</code> method.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;chrono&gt;\n\nconst unsigned long long PERIOD= 0x1full;\n\nclass ExpRunnerJSONOutput : public ExperimentRunner {\n    std::string answers;\n    void set_name( std::string x ) {\n        this-&gt;answers= \"answers.\"+x+\".txt\";\n    }\npublic:\n    ExpRunnerJSONOutput( query_processor *p ) : ExperimentRunner(p) {\n        set_name(p-&gt;method_name);\n    }\n\n    ExperimentRunner *setProcessor( query_processor *p) override {\n        ExperimentRunner::setProcessor(p);\n        set_name(p-&gt;method_name);\n        return this;\n    }\n\n    // in: the stream of queries\n    // out: where to write the results to\n    virtual void run( std::istream &amp;in, std::ostream &amp;out ) override {\n\n        node_type x,y;\n        value_type a,b;\n        unsigned long long i,j,rep_period= (16383+1)*2-1;\n\n        auto n= tree-&gt;size();\n\n        std::vector&lt;std::tuple&lt;node_type,node_type,value_type,value_type&gt;&gt; queries;\n        for ( queries.clear(); in &gt;&gt; x &gt;&gt; y &gt;&gt; a &gt;&gt; b; queries.push_back(std::make_tuple(x,y,a,b)) ) ;\n\n        value_type *results= new value_type[queries.size()], *ptr= results;\n\n        /* results are stored in JSON */\n        nlohmann::json sel;\n\n        long double total_elapsed_time= 0.00;\n        std::chrono::time_point&lt;std::chrono::high_resolution_clock,std::chrono::nanoseconds&gt; start, finish;\n        long long int nq= 0, it= 0;\n\n        start= std::chrono::high_resolution_clock::now();\n        int batch= 0;\n        for ( auto qr: queries ) {\n            x= std::get&lt;0&gt;(qr), y= std::get&lt;1&gt;(qr);\n            a= std::get&lt;2&gt;(qr), b= std::get&lt;3&gt;(qr);\n            auto ans= processor-&gt;count(x,y,a,b); nq+= ans, nq-= ans, ++nq, *ptr++= ans;\n        }\n        finish = std::chrono::high_resolution_clock::now();\n        auto elapsed = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(finish-start);\n        total_elapsed_time= elapsed.count();\n        sel[\"avgtime_microsec\"]= total_elapsed_time/nq*(1e-3);\n\n        out &lt;&lt; sel &lt;&lt; std::endl;\n        out.flush();\n\n        delete[] results;\n\n    }\n    ~ExpRunnerJSONOutput() final {}\n};\n\nvoid runall( std::istream &amp;in, char *res_file, ExpRunnerJSONOutput *er ) {\n    in.clear(), in.seekg(0,std::ios::beg);\n    std::string results_file= std::string(res_file);\n    std::ofstream out;\n    try {\n        out.open(results_file,std::ios::app);\n    }\n    catch ( std::exception &amp;e ) {\n        throw e;\n    }\n    er-&gt;run(in,out), out.close();\n}\n\nusing instant= std::chrono::time_point&lt;std::chrono::steady_clock,std::chrono::nanoseconds&gt;;\n\nvoid sanity_check( std::istream &amp;in, size_type nq ) {\n    node_type x,y;\n    value_type a,b;\n    size_type r= 0;\n    for ( ;in &gt;&gt; x &gt;&gt; y &gt;&gt; a &gt;&gt; b; ++r ) ;\n    assert( r == nq );\n}\n\nint main( int argc, char **argv ) {\n    if ( argc &lt; 5 ) {\n        fprintf(stderr,\"usage: ./&lt;this_executable_name&gt; &lt;dataset_name&gt; &lt;num_queries&gt; &lt;result_file&gt; K\");\n        fflush(stderr);\n        return 1;\n    }\n    query_processor *processor;\n    std::string dataset_name= std::string(argv[1]);\n    auto num_queries= std::strtol(argv[2],nullptr,10);\n    auto K= std::strtol(argv[4],nullptr,10);\n    std::ifstream in;\n    std::ofstream logs;\n    try {\n        in.open(dataset_name+\".puu\");\n        logs.open(dataset_name+\".log\");\n    } catch ( std::exception &amp;e ) {\n        throw e;\n    }\n    std::string s; in &gt;&gt; s;\n    std::vector&lt;pq_types::value_type&gt; w;\n    w.clear();\n    pq_types::value_type maxw= 0;\n    for ( auto l= 0; l &lt; s.size()/2; ++l ) {\n        value_type entry;\n        in &gt;&gt; entry;\n        w.emplace_back(entry);\n        maxw= std::max(maxw,entry);\n    }\n    in.close();\n\n    const rlim_t kStackSize= s.size()*2;\n    struct rlimit r1{};\n    int result= getrlimit(RLIMIT_STACK,&amp;r1);\n    if ( result == 0 ) {\n        if ( r1.rlim_cur &lt; kStackSize ) {\n            r1.rlim_cur= kStackSize;\n            result= setrlimit(RLIMIT_STACK,&amp;r1);\n            if ( result != 0 ) {\n                logs &lt;&lt; \"setrlimit returned result = \" &lt;&lt; result &lt;&lt; std::endl;\n                assert( false );\n            }\n        }\n    }\n    logs &lt;&lt; \"stack limit successfully set\" &lt;&lt; std::endl;\n\n    instant start, finish;\n\n    remove(argv[3]);\n\n    auto sz= s.size()/2;\n    random1d_interval_generator&lt;&gt; rig(0,sz-1), wrig(0,maxw);\n\n    auto node_queries= rig(num_queries), weight_queries= wrig(num_queries,K);\n    assert( node_queries.size() == num_queries );\n    assert( weight_queries.size() == num_queries );\n    std::stringstream ss;\n    ss.clear(), ss.seekg(0,std::ios::beg);\n    for ( int i= 0; i &lt; num_queries; ++i )\n        ss &lt;&lt; node_queries[i].first &lt;&lt; \" \" &lt;&lt; node_queries[i].second &lt;&lt; \" \" &lt;&lt; weight_queries[i].first &lt;&lt; \" \" &lt;&lt; weight_queries[i].second &lt;&lt; \"\\n\";\n    ss.clear(), ss.seekg(0,std::ios::beg);\n    sanity_check(ss,num_queries);\n\n    start = std::chrono::steady_clock::now();\n    auto *er= new ExpRunnerJSONOutput(processor= new my_processor(s,w,dataset_name));\n    finish = std::chrono::steady_clock::now();\n    logit(logs,processor,start,finish);\n    runall(ss,argv[3],er), delete processor;\n\n    logs.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: I was wondering if this has to do with <a href=\"https://stackoverflow.com/questions/15034012/ifstream-eof-end-of-file-is-reached-before-the-real-end\">ifstream.eof() - end of file is reached before the real end</a>\nNow, how to confirm the hypothesis -- that reading stops once we reach a byte with value <code>26</code>?</p>\n\n<p>EDIT: One more update. After reading things inside the <code>foo</code>, the <code>rdstate()</code> returned <code>4</code>, <code>fail() == 1</code> and <code>eof() == 0</code>. So, apparently end-of-file has not been reached.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560353575, "post_id": 56565693, "comment_id": 99710921, "body": "What do you intend by fine? Same size regardless of screen resolution or size?"}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560353656, "post_id": 56565693, "comment_id": 99710972, "body": "Have you tried using <a href=\"https://doc.qt.io/qt-5/qdesktopwidget.html#screenNumber\" rel=\"nofollow noreferrer\">QDesktopWidget::screenNumber()</a>?"}, {"owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560354528, "post_id": 56565693, "comment_id": 99711430, "body": "question updated. I haven&#39;t tried  QDesktopWidget::screenNumber() yet."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560355494, "post_id": 56565693, "comment_id": 99711969, "body": "I&#39;ve noticed that <code>QDesktopWidget</code> is mostly deprecated, I suggest you use <a href=\"https://doc.qt.io/qt-5/qscreen.html\" rel=\"nofollow noreferrer\">QScreen</a> instead, that represents a single phisical screen, you can get an instance with <a href=\"https://doc.qt.io/qt-5/qguiapplication.html#primaryScreen-prop\" rel=\"nofollow noreferrer\">QGuiApplication::primaryScreen()</a> and then get its geometry with <a href=\"https://doc.qt.io/qt-5/qscreen.html#geometry-prop\" rel=\"nofollow noreferrer\">QScreen::geometry()</a>. Let me know if that works so I&#39;ll post this as an answer."}, {"owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560401709, "post_id": 56565693, "comment_id": 99725270, "body": "I have already tried <a href=\"https://doc.qt.io/qt-5/qscreen.html\" rel=\"nofollow noreferrer\">QScreen</a> before trying <code>QDesktopWidget </code>. It is working. I can get primary screen. But I am unable to get secondary screen.  <a href=\"https://doc.qt.io/qt-5/qdesktopwidget.html#screenNumber\" rel=\"nofollow noreferrer\">QDesktopWidget::screenNumber()</a> returns 0 in my case."}, {"owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 1, "creation_date": 1560409476, "post_id": 56565693, "comment_id": 99728081, "body": "There is no secondary screen if you select &#39;Duplicate display&#39; from window manager. The scaling is done by your OS."}, {"owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "reply_to_user": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 0, "creation_date": 1560849850, "post_id": 56565693, "comment_id": 99861549, "body": "@MartinHennings you are right. I realized that."}, {"owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "edited": false, "score": 0, "creation_date": 1560855419, "post_id": 56565693, "comment_id": 99864733, "body": "I have edited the question and changed almost everything. The old question may not be that helpful."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "is_accepted": true, "score": 0, "last_activity_date": 1560855883, "last_edit_date": 1560855883, "creation_date": 1560854607, "answer_id": 56647342, "question_id": 56565693, "link": "https://stackoverflow.com/questions/56565693/manage-multiple-displays/56647342#56647342", "title": "Manage multiple displays", "body": "<p>I dont know the exact solution to my problem. But this is what I am doing, for the time being.</p>\n\n<p>For this I need a secondary high resolution image \nsay \"splash@2x.png\"</p>\n\n<p>Refer: <a href=\"https://doc.qt.io/qt-5/scalability.html#loading-files-depending-on-platform\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/scalability.html#loading-files-depending-on-platform</a></p>\n\n<pre><code> QScreen *screen = QGuiApplication::primaryScreen();\n QRect  screen_geometry = screen-&gt;geometry();\n int DPR = static_cast&lt;int&gt;(screen-&gt;devicePixelRatio()); // 1 or 2\n int screen_width = screen_geometry.width();\n\n QString splash_screen_image= \"splash.png\";\n\n if(DPR == 2)\n {\n    //2K screen connected directly to PC\n    splash_screen_image= \"splash@2x.png\";\n    screen_width*=2;\n }\n\n if(DPR == 1 &amp;&amp; screen_width &gt;1920)\n {\n    //'Second screen only' selected when laptop is connected to 2K display\n    splash_screen_image= \"splash@2x.png\";\n    screen_width*=2;\n }\n\n if(DPR == 1 &amp;&amp; screen_width &lt;=1920)\n {\n    //'Duplicate display' or 'PC only' selected when laptop is connected to 2K display\n    // or Desktop PC connected to HD monitor\n    //Use \"splash.png\"\n }\n\n QPixmap pixmap(splash_screen_image);\n QSplashScreen splash(pixmap.scaledToWidth(screen_width*0.35,Qt::SmoothTransformation));\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10390361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa79a99809f04f5b5904df1cd1e5e0?s=128&d=identicon&r=PG", "display_name": "Ansal P A", "link": "https://stackoverflow.com/users/10390361/ansal-p-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 56647342, "answer_count": 1, "score": 0, "last_activity_date": 1560855883, "creation_date": 1560353206, "last_edit_date": 1560855295, "question_id": 56565693, "link": "https://stackoverflow.com/questions/56565693/manage-multiple-displays", "title": "Manage multiple displays", "body": "<p>I am using QSplashScreen to display a splash screen for my QtQuick 2 application. </p>\n\n<pre><code> QScreen *screen = QGuiApplication::primaryScreen();\n QRect  screen_geometry = screen-&gt;geometry();\n int screen_width = screen_geometry.width();\n\n QPixmap pixmap(\"splash.png\");\n QSplashScreen splash(pixmap.scaledToWidth(screen_width*0.35,Qt::SmoothTransformation));\n</code></pre>\n\n<p>screen_width is used to scale the image. My laptop is connected to a 2K monitor. </p>\n\n<p>The issue is, the image is shown differently for different 'Display management options', such as</p>\n\n<p>'PC only' , 'Duplicate Display' &amp; 'Second screen only'.</p>\n\n<p>My question is, how to manage both displays so that the image is displayed fine on both displays.</p>\n\n<p>All I need is, display the splash screen with 35% screen width. \nIt should be displayed with 35% screen width in both displays.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1560357941, "post_id": 56565665, "comment_id": 99713100, "body": "<b>Too many</b> questions in the single post. E.g. the difference between <code>include_directories</code> and <code>target_include_directories</code> can be found in that question: <a href=\"https://stackoverflow.com/questions/31969547/what-is-the-difference-between-include-directories-and-target-include-directorie\" title=\"what is the difference between include directories and target include directorie\">stackoverflow.com/questions/31969547/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 1, "creation_date": 1560357652, "post_id": 56565927, "comment_id": 99712987, "body": "Minor addendum: <code>find_package(Foo)</code> can also use files at locations such as <code>&#47;usr&#47;lib&#47;cmake&#47;Foo&#47;FooConfig.cmake</code> - such files are typically provided by the external package as opposed to <code>FindFoo.cmake</code> which would be provided by the project."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 14, "last_activity_date": 1594229695, "last_edit_date": 1594229695, "creation_date": 1560354044, "answer_id": 56565927, "question_id": 56565665, "link": "https://stackoverflow.com/questions/56565665/difference-between-target-link-libraries-and-target-include-directories/56565927#56565927", "title": "Difference between (target_)link_libraries and (target_)include_directories", "body": "<p><code>*include_directories</code> is used to supply a list of include directories to the compiler.  When a file is included using the pre-processor, these directories will be searched for the file.</p>\n<p><code>*link_libraries</code> is used to supply a list of libraries (object archives) to the linker. If the linked item is a cmake target, with specified include directories, they don't need to be specified separately with <code>*include_directories</code>.</p>\n<p>The <code>target_*</code> versions apply only to the target that is given as an operand. The non-target versions apply to all targets in the directory. The <code>target_*</code> versions should be used whenever possible (i.e. pretty much always).</p>\n<p><code>find_package</code> is used to search for cmake settings from external sources i.e. outside of the project. If you want to link with a library without including the source of the library in a sub directory of your project, then you use <code>find_package</code>. From a lower level point of view, <code>find_package(Foo)</code> looks for a cmake module <code>FindFoo.cmake</code> and executes the module. The purpose of the module is to generate cmake variables or targets that can be used to include the corresponding dependency.</p>\n<p><code>add_library</code> is similar to <code>add_executable</code>, except it adds a target for a library, rather rather than an executable. Library targets can be used as items in <code>link_libraries</code>, and their dependencies are transitive by default.</p>\n<blockquote>\n<p>I know it has something to do with header-only libraries and so on,</p>\n</blockquote>\n<p>All of these have to do with libraries in general. Except <code>*include_directories</code> are also used for specifying the include directory of the project's own header files, not only those of the libraries.</p>\n<hr />\n<blockquote>\n<p>The included library requires for example Boost, but the core project not. How can I avoid bloating up the entire CMakeLists.txt file and the binaries, and still use the precompiled library?</p>\n</blockquote>\n<p><strong>If</strong> the find_package module has created a cmake target for the library (using <code>add_library(... IMPORTED)</code>), which itself specifies the dependencies of the dependency, then simply link with it using <code>link_libraries</code>, and cmake takes care of linking with the dependencies. Same goes for the include directory of the target.</p>\n<p>Old cmake modules don't necessarily provide targets, in which case you may need to write your own module in order to avoid bloating the project configuration.</p>\n"}], "owner": {"reputation": 1178, "user_id": 7813847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a062c89573fcea80e00131ce14e0cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/7813847/dorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2489, "favorite_count": 3, "closed_date": 1560387889, "accepted_answer_id": 56565927, "answer_count": 1, "score": 1, "last_activity_date": 1594229695, "creation_date": 1560353110, "question_id": 56565665, "link": "https://stackoverflow.com/questions/56565665/difference-between-target-link-libraries-and-target-include-directories", "closed_reason": "Needs more focus", "title": "Difference between (target_)link_libraries and (target_)include_directories", "body": "<p>I'm struggling with a large C++ project that uses CMake. \nNow I'm trying to add a dependency (a pre-compiled and installed library), but I'm not sure where to add is, what to include, and where to link it.</p>\n\n<p>Particularly, I'd like to know the difference between the following commands:</p>\n\n<ul>\n<li><code>include_directories</code></li>\n<li><code>target_include_directories</code></li>\n<li><code>link_libraries</code></li>\n<li><code>target_link_libraries</code></li>\n</ul>\n\n<p>Also, when I need to use the following commands:</p>\n\n<ul>\n<li><code>find_package</code> and</li>\n<li><code>add_library</code></li>\n</ul>\n\n<p>I know it has something to do with header-only libraries and so on, but I couldn't find a comprehensible and condensed explanation. </p>\n\n<p>Also, how should I handle the following case: </p>\n\n<p>The included library requires for example Boost, but the core project not. How can I avoid bloating up the entire <code>CMakeLists.txt</code> file and the binaries, and still use the precompiled library? (I think this is also part of this question)</p>\n"}, {"tags": ["c++", "c", "visual-c++", "network-programming"], "comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1560352937, "post_id": 56565551, "comment_id": 99710513, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-connect\" rel=\"nofollow noreferrer\">&quot;If socket s, is unbound, unique values are assigned to the local association by the system, and the socket is marked as bound.&quot;</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1560353027, "post_id": 56565551, "comment_id": 99710575, "body": "You need to call <code>bind</code> if you want to specify which interface/port combination to use."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560353958, "post_id": 56565551, "comment_id": 99711115, "body": "&quot;<i>Let that be applications responsibility to decide on source port or IP to bind to</i>&quot; -- note that although there may indeed be reasons for taking this approach with a socket you are going to <code>connect()</code>, they are at best rare.  The source port for such a connection is not normally significant at the application level, and there are rarely many options for the source IP (unless the machine is connecting to itself)."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1560368084, "creation_date": 1560368084, "answer_id": 56569228, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56569228#56569228", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<blockquote>\n  <p>How can I tell the connect() function to use a particular source IP and source port values?</p>\n</blockquote>\n\n<p>Use the socket library's <code>bind()</code> function for that.  Yes, you can call <code>bind()</code> before <code>connect()</code> for an outgoing socket.  That is a perfectly legitimate operation for both UDP and TCP sockets.</p>\n"}, {"comments": [{"owner": {"reputation": 620, "user_id": 8924129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc041e5ba3467df99d37319628ed9a6?s=128&d=identicon&r=PG&f=1", "display_name": "Bar Stool", "link": "https://stackoverflow.com/users/8924129/bar-stool"}, "edited": false, "score": 0, "creation_date": 1560401934, "post_id": 56569711, "comment_id": 99725327, "body": "A couple of use cases off the top of my head: It is possible to bind a socket to an interface without binding to a port (here the port will be selected when connect is called.). Also, in P2P networking, explicit port allocation is needed before connect is called to enable NAT traversal."}], "tags": [], "owner": {"reputation": 427, "user_id": 9988199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWaFH.jpg?s=128&g=1", "display_name": "H4ze", "link": "https://stackoverflow.com/users/9988199/h4ze"}, "is_accepted": false, "score": 3, "last_activity_date": 1560370297, "creation_date": 1560370297, "answer_id": 56569711, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56569711#56569711", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p><code>bind()</code> requests port that is not in use so it can claim it and become a server, while <code>connect()</code> wants a port that is already in use, so it can connect to it and talk to the server.</p>\n\n<p>As user <em>stark</em> said, you need to call <code>bind</code> if you want to specify which interface/port combination to use, although if you want next call to bind it to a random available port number, you can opt out from <code>bind()</code> call because client doesn't necessarily has to have a fixed port number.</p>\n\n<p>It is possible to ask the kernel to select a specific port before calling <code>connect()</code>, but if I may ask - why you wouldn't want to kernel to allocate source ports, as far as I know it's not best practice.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1618904949, "last_edit_date": 1618904949, "creation_date": 1560489193, "answer_id": 56591732, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56591732#56591732", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p>Yes, you can.  <strong>Indeed there's a reason to do that:</strong>  In case your routing policy makes your connection to be established from an IP address which is not the one you want to use, you can force in a multihomed/routing host a specific IP address as source by means of <code>bind(2)</code> system call.  Another use is to specify a fixed source port for the connection, but this is not as usual as the previous case.</p>\n<p>But beware: you can select only one of the already configured IP addresses you have, not any address you can imagine.</p>\n"}], "owner": {"reputation": 59, "user_id": 9765204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9m7Vy6sCOio/AAAAAAAAAAI/AAAAAAAAB6Y/G6tOvYCtdN8/photo.jpg?sz=128", "display_name": "anup kataria", "link": "https://stackoverflow.com/users/9765204/anup-kataria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1618904949, "creation_date": 1560352721, "last_edit_date": 1560367994, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p>Just a curious question about networking socket programming in a Windows Application with C/C++: </p>\n\n<p>How can I tell the <code>connect()</code> function to use a particular source IP and source port values?</p>\n\n<ul>\n<li><p>After a socket is created, application calls <code>connect()</code> to remote IP and port by using the <code>sockaddr</code> structure.</p></li>\n<li><p>the <code>connect()</code> function internally selects the source IP and port for the connection. </p></li>\n</ul>\n\n<p>Rather than the system deciding the source IP and/or port for the <code>connect()</code>, let that be the application's responsibility to decide which source IP and/or port to bind to.</p>\n"}, {"tags": ["c++", "memory", "vector", "std"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1560352430, "post_id": 56565427, "comment_id": 99710219, "body": "<code>reserve</code> doesn&#39;t change the size of the vector."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560352634, "post_id": 56565452, "comment_id": 99710332, "body": "However, at least in debug, and at least on VS, the OP&#39;s result shows how slowing your program down with <code>.at()</code> (particularly in a little loop like this) is not always called for!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560352696, "post_id": 56565452, "comment_id": 99710370, "body": "@LightnessRacesInOrbit This might surprise you but in my shop I&#39;ve banned <code>[]</code> unless you can prove that not using it would materially degrade performance. It survives in very few places."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1560353056, "post_id": 56565452, "comment_id": 99710592, "body": "\ud83d\ude22\ud83d\ude22\ud83d\ude22\ud83d\ude22\ud83d\ude22\ud83d\ude22 Why not just swap to Java and be done with it :P"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560353095, "post_id": 56565452, "comment_id": 99710606, "body": "@LightnessRacesinOrbit Not sure if I misunderstand, but in my edition of VS, <code>.at</code> has zero additional overhead in debug builds compared to release (it always checks ranges). <code>[]</code> only does the range check with <code>_ITERATOR_DEBUG_LEVEL != 0</code>. So I don&#39;t quite get what you mean with &quot;at least in debug&quot;..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560353098, "post_id": 56565452, "comment_id": 99710608, "body": "@LightnessRacesinOrbit: Java is an extremely pernicious language in which to write quantitative code (no operator overloading, <code>==</code> comparing references, integer caching). I know you&#39;re joking!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1560353206, "post_id": 56565452, "comment_id": 99710692, "body": "@MaxLanghof That&#39;s exactly what I mean - in debug <i>you already get the benefits</i> and <i>at the same cost</i>, but without ruining your release build with pointless checks ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560353266, "post_id": 56565452, "comment_id": 99710721, "body": "@Bathsheba Only partially ;)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560353376, "post_id": 56565452, "comment_id": 99710787, "body": "@LightnessRacesinOrbit This is the obligatory moment where I cry about MSVC changing the complexity of one of my algorithms from linear to square with debug iterator checks on because of a (large) vector of iterators..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560353422, "post_id": 56565452, "comment_id": 99710813, "body": "A confession: I also have all iterator checking switched off in my MSVC builds. In debug too. Too slow even on machines with liquid cooled processors."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1560354689, "post_id": 56565452, "comment_id": 99711527, "body": "@MaxLanghof For the record, I would actually have voted against iterator checking if I could ;P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560354819, "post_id": 56565452, "comment_id": 99711607, "body": "I just use lots of assertions in my member functions and don&#39;t expose containers :D"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1560352416, "creation_date": 1560352416, "answer_id": 56565452, "question_id": 56565427, "link": "https://stackoverflow.com/questions/56565427/stdvectorstdvectorint-debug-assertion-failed-c-vector-subscript-out/56565452#56565452", "title": "std::vector&lt;std::vector&lt;int&gt;&gt;: Debug assertion failed. C++ vector subscript out of range reserving memory", "body": "<p><code>reserve</code> doesn't set the size, it sets the <em>capacity</em> (i.e. it's more concerned with memory management). In your case <code>mSectionsSubsets</code> still has a zero size after <code>mSectionsSubsets.reserve(count);</code>.</p>\n\n<p>Use <code>resize</code> to set the size of a vector.</p>\n\n<p>Note that using <code>.at</code> rather than <code>[]</code> is safer insofar that in the former case, a runtime exception will be thrown, rather than the program behaviour simply being undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560352745, "post_id": 56565458, "comment_id": 99710401, "body": "The second half of this answer contains very good advice indeed. Upped."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560352792, "post_id": 56565458, "comment_id": 99710432, "body": "@Lightness Races in Orbit its not &quot;square&quot;. I&#39;m making the &quot;edge&quot; for the content I could reach, but some elements can be lower. What I need is not to allocate memory at runtime. So I game in advance, and clear() and push during the time (allowing the correct size during the process)."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1560352948, "post_id": 56565458, "comment_id": 99710517, "body": "Exceptional C++ Chapter 1. Uses and Abuses of vector describes exactly that"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560352967, "post_id": 56565458, "comment_id": 99710534, "body": "@markzzz In terms of memory consumption your container is square, so you may as well have a square container for real. You don&#39;t have to fill every &quot;row&quot;. That&#39;ll help you <i>reduce</i> usage too because you don&#39;t need <code>count</code>*vector machinery. Although I concede it sounds like you&#39;ll need some way to track row utilization."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560353057, "post_id": 56565458, "comment_id": 99710593, "body": "So: any way to reserve memory for both dimension keeping size() = 0?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560353148, "post_id": 56565458, "comment_id": 99710650, "body": "@markzzz That makes no sense. push_back elements as you have them. Do you want holes in the vector?"}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1560353202, "post_id": 56565458, "comment_id": 99710688, "body": "@Ayxan I need to have empty arrays, but allocated. So later I can push element without allocate memory. <code>size()</code> and <code>capacity()</code> are different things."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560353230, "post_id": 56565458, "comment_id": 99710705, "body": "The only solution is to <code>.resize()</code> on both dimension and than <code>.clear()</code>..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1560353341, "post_id": 56565458, "comment_id": 99710766, "body": "As I said. Use a single vector. Map indices. Track utilisation if you need (a single other vector that contains &quot;cells used&quot; for each row will do it and still be cheaper in the long run, I think - but measure it to be sure!). You&#39;d wrap this in a class. You can give it <code>clearRow(i)</code> and <code>pushToRow(i, val)</code> as much as you like :) (Well, up to the &quot;max row length&quot; with which you constructed it!)"}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560353617, "post_id": 56565458, "comment_id": 99710951, "body": "@Lightness Races in Orbit and what if I need to compare another <code>std::vector&lt;int&gt;</code> vector with <code>mSectionsSubsets[i]</code>? Single vector will become a pain... at that point I manage raw pointers and manual indexes :P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560354343, "post_id": 56565458, "comment_id": 99711320, "body": "@markzzz <a href=\"https://coliru.stacked-crooked.com/a/5c1c058f0095f0db\" rel=\"nofollow noreferrer\">Here&#39;s a simple example to get you started</a>. That was 10 minutes. :) Writing something to compare rows with another vector would be pretty trivial."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1560410157, "post_id": 56565458, "comment_id": 99728440, "body": "@LightnessRacesinOrbit that&#39;s what I&#39;m looking for: <a href=\"http://coliru.stacked-crooked.com/a/6caba779e8c1b343\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/6caba779e8c1b343</a> - Can you show to me why this &quot;easy&quot; code would be poison to cache? (or should I open a new question?)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1560354577, "last_edit_date": 1560354577, "creation_date": 1560352423, "answer_id": 56565458, "question_id": 56565427, "link": "https://stackoverflow.com/questions/56565427/stdvectorstdvectorint-debug-assertion-failed-c-vector-subscript-out/56565458#56565458", "title": "std::vector&lt;std::vector&lt;int&gt;&gt;: Debug assertion failed. C++ vector subscript out of range reserving memory", "body": "<p>You wrote <code>mSectionsSubsets[i]</code> with <code>i</code> from <code>0</code> to <code>count</code>.</p>\n\n<p>Every single one of those accesses is illegal, because <code>mSectionsSubsets</code> has no elements in it.</p>\n\n<p>Reserving capacity, and resizing the vector, are two different things.</p>\n\n<p>In this particular case, perhaps:</p>\n\n<pre><code>mSectionsSubsets.resize(count);\nfor (int i = 0; i &lt; count; i++) {\n    mSectionsSubsets[i].reserve(NUM_SECTIONS);\n}\n</code></pre>\n\n<p>However, overall I would caution against vectors of vectors: they're poison for your cache and just generally not necessary when your dimensions are square.</p>\n\n<p>How about a nice <code>std::vector&lt;int&gt;</code> instead? If you need <code>count*NUM_SECTIONS</code> elements, then simply do that. You can always create a two-dimensional fa&ccedil;ade for its indexes:</p>\n\n<pre><code>i = x + width*y\n</code></pre>\n\n<hr>\n\n<p>Cache of a quick mockup from the comments:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt;\n#include &lt;cassert&gt;\n\n// Like a vector&lt;vector&lt;T&gt;&gt;, but *better*!\ntemplate &lt;typename T&gt;\nclass RowList\n{\npublic:\n    RowList(const std::size_t rowCount, const std::size_t maxRowLength)\n        : rowCount(rowCount)\n        , maxRowLength(maxRowLength)\n        , data(rowCount * maxRowLength)\n        , utilisation(rowCount)\n    {}\n\n    std::size_t getRowCount() const\n    {\n        return rowCount;\n    }\n\n    std::size_t getMaxRowLength() const\n    {\n        return maxRowLength;\n    }\n\n    // UB if you give an invalid row number\n    std::size_t getRowLength(const std::size_t rowNumber) const\n    {\n        assert(rowNumber &lt; rowCount);\n        return utilisation[rowNumber];\n    }\n\n    // UB if you give an invalid row number\n    void clearRow(const std::size_t rowNumber)\n    {\n        assert(rowNumber &lt; rowCount);\n        utilisation[rowNumber] = 0;\n\n        #ifdef NDEBUG\n            // Debug builds only - make all the dead values -1\n            // so we can maybe more easily spot misuse\n            const std::size_t start = rowNumber*maxRowLength;\n            const std::size_t end   = start + maxRowLength;\n\n            for (std::size_t i = start; i &lt; end; ++i)\n                data[i] = -1;\n        #endif\n    }\n\n    // UB if you give an invalid row number\n    // throws std::out_of_range if the row is full\n    void pushToRow(const std::size_t rowNumber, T value)\n    {\n        assert(rowNumber &lt; rowCount);\n\n        std::size_t&amp; columnNumber = utilisation[rowNumber];\n        if (columnNumber == maxRowLength)\n            throw std::out_of_range(\"Row is full!\");\n\n        data[rowNumber*maxRowLength + columnNumber] = std::move(value);\n        columnNumber++;\n    }\n\n    // UB if you give an invalid row or column number\n    T&amp; elementAt(const std::size_t rowNumber, const std::size_t columnNumber)\n    {\n        assert(rowNumber &lt; rowCount);\n        assert(columnNumber &lt; utilisation[rowNumber]);\n\n        return data[rowNumber*maxRowLength + columnNumber];\n    }\n\n    // UB if you give an invalid row or column number\n    const T&amp; elementAt(const std::size_t rowNumber, const std::size_t columnNumber) const\n    {\n        assert(rowNumber &lt; rowCount);\n        assert(columnNumber &lt; utilisation[rowNumber]);\n\n        return data[rowNumber*maxRowLength + columnNumber];\n    }\n\nprivate:\n    const std::size_t rowCount;\n    const std::size_t maxRowLength;\n\n    std::vector&lt;T&gt; data;\n    std::vector&lt;std::size_t&gt; utilisation;\n};\n\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const RowList&lt;T&gt;&amp; matrix)\n{\n    const auto height = matrix.getRowCount();\n    for (std::size_t y = 0; y &lt; height; ++y)\n    {\n        const auto width = matrix.getRowLength(y);\n        const auto remainder = matrix.getMaxRowLength() - width;\n\n        for (std::size_t x = 0; x &lt; width; ++x)\n            os &lt;&lt; matrix.elementAt(y, x) &lt;&lt; '\\t';\n\n        for (std::size_t i = 0; i &lt; remainder; ++i)\n            os &lt;&lt; \"?\\t\";\n\n        os &lt;&lt; '\\n';\n    }\n\n    return os;\n}\n\nint main()\n{\n    RowList&lt;int&gt; matrix(5, 5);\n\n    matrix.pushToRow(2, 100);\n    matrix.pushToRow(2, 101);\n    matrix.pushToRow(4, 102);\n    std::cerr &lt;&lt; matrix &lt;&lt; '\\n';\n\n    matrix.clearRow(2);\n    matrix.pushToRow(1, 103);\n    std::cerr &lt;&lt; matrix &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>g++ -std=c++17 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\n?   ?   ?   ?   ?   \n?   ?   ?   ?   ?   \n100 101 ?   ?   ?   \n?   ?   ?   ?   ?   \n102 ?   ?   ?   ?   \n\n?   ?   ?   ?   ?   \n103 ?   ?   ?   ?   \n?   ?   ?   ?   ?   \n?   ?   ?   ?   ?   \n102 ?   ?   ?   ?   \n</code></pre>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "closed_date": 1560352571, "answer_count": 2, "score": 3, "last_activity_date": 1560354577, "creation_date": 1560352304, "question_id": 56565427, "link": "https://stackoverflow.com/questions/56565427/stdvectorstdvectorint-debug-assertion-failed-c-vector-subscript-out", "closed_reason": "Duplicate", "title": "std::vector&lt;std::vector&lt;int&gt;&gt;: Debug assertion failed. C++ vector subscript out of range reserving memory", "body": "<p>What's wrong here?</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; mSectionsSubsets;\n\nint count = (int)powf(2, NUM_SECTIONS);\n\nmSectionsSubsets.reserve(count);\nfor (int i = 0; i &lt; count; i++) {\n    mSectionsSubsets[i].reserve(NUM_SECTIONS);\n}\n</code></pre>\n\n<p>On MSVC++ it says <code>vector subscript out of range</code> once I <code>mSectionsSubsets[i].reserve(NUM_SECTIONS);</code> at the first <code>i = 0</code>.</p>\n\n<p>Now sure what's wrong and how to fix it.</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "lambda", "stdlist"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11602239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S87rpEWQfDc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqQNayvE_WArfzxq50nkXsRg99gg/mo/photo.jpg?sz=128", "display_name": "lRinzu", "link": "https://stackoverflow.com/users/11602239/lrinzu"}, "edited": false, "score": 0, "creation_date": 1560381841, "post_id": 56565440, "comment_id": 99721798, "body": "E1738\tthe enclosing-function &#39;this&#39; cannot be referenced in a lambda body unless it is in the capture list"}, {"owner": {"reputation": 21, "user_id": 11602239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S87rpEWQfDc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqQNayvE_WArfzxq50nkXsRg99gg/mo/photo.jpg?sz=128", "display_name": "lRinzu", "link": "https://stackoverflow.com/users/11602239/lrinzu"}, "edited": false, "score": 0, "creation_date": 1560381856, "post_id": 56565440, "comment_id": 99721803, "body": "E1730\tmember &quot;MyClass::vID&quot; is not a variable"}, {"owner": {"reputation": 21, "user_id": 11602239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S87rpEWQfDc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqQNayvE_WArfzxq50nkXsRg99gg/mo/photo.jpg?sz=128", "display_name": "lRinzu", "link": "https://stackoverflow.com/users/11602239/lrinzu"}, "edited": false, "score": 0, "creation_date": 1560381933, "post_id": 56565440, "comment_id": 99721822, "body": "the second error exist when i put &quot;vID&quot; in the lambda"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 21, "user_id": 11602239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S87rpEWQfDc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqQNayvE_WArfzxq50nkXsRg99gg/mo/photo.jpg?sz=128", "display_name": "lRinzu", "link": "https://stackoverflow.com/users/11602239/lrinzu"}, "edited": false, "score": 1, "creation_date": 1560404553, "post_id": 56565440, "comment_id": 99726096, "body": "@lRinzu I assume there is a class where you have the above codes. Those are the error messages from the code you have not shown above. Please update or create a new question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal complete example which produces the above-mentioned errors</a>. Then can only someone help you better."}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": false, "score": 4, "last_activity_date": 1560353610, "last_edit_date": 1560353610, "creation_date": 1560352353, "answer_id": 56565440, "question_id": 56565342, "link": "https://stackoverflow.com/questions/56565342/how-to-search-in-stdlist-of-struct/56565440#56565440", "title": "How to search in `std::list` of struct?", "body": "<p><strong>First method</strong>: You did not capture the <code>vID</code> inside the lambda, that's what the error message complaining about.</p>\n\n<pre><code>const auto iter = std::find_if(MyList.begin(), MyList.end(), \n                  [vID](const VideoDetails&amp; VD) {return VD.VidID == vID; });\n         //        ^^^^\n</code></pre>\n\n<p>And do not forget to get the iterator returning from <code>std::find_if</code>, in case of further use. If you correct the above, your first method will work.</p>\n\n<p><strong>Second method</strong>: Has no big difference than the one. The lambda has the same problem as the above. In addition to that <em><a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find_if</code></a></em> required an unary predicate, not a value to be found in the container. Change to</p>\n\n<pre><code>auto pred = [vID](const VideoDetails &amp; ID) {   return ID.VidID == vID; }\n//           ^^^^\nif(std::find_if(Mylist.begin(), MyList.end(), pred ) != MyList.end())\n//                                            ^^^^\n{\n   // do something\n}\n</code></pre>\n\n<p>If you have made work with the <code>std::find_if</code> and lambda, you do not need to go for the third attempt.</p>\n"}], "owner": {"reputation": 21, "user_id": 11602239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S87rpEWQfDc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfqQNayvE_WArfzxq50nkXsRg99gg/mo/photo.jpg?sz=128", "display_name": "lRinzu", "link": "https://stackoverflow.com/users/11602239/lrinzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1560370848, "creation_date": 1560352049, "last_edit_date": 1560370848, "question_id": 56565342, "link": "https://stackoverflow.com/questions/56565342/how-to-search-in-stdlist-of-struct", "title": "How to search in `std::list` of struct?", "body": "<p>The problem is that I can not search in a <code>std::list</code>, according to the user-input <code>vID</code>.</p>\n\n<p>I have tried many different approaches but it did not work.</p>\n\n<pre><code>struct VideoDetails\n{\n  int VidID, Copies;\n  string MovieTitle, Genre, Production, FileName;\n\n};\nlist &lt;VideoDetails&gt; MyList;\nint vID;\ncin &gt;&gt; vID;\n</code></pre>\n\n<p><strong>First attempt</strong>:</p>\n\n<pre><code>find_if(MyList.begin(), MyList.end(), [](VideoDetails &amp; VD) {return VD.VidID == vID; });\n</code></pre>\n\n<p><strong>Second attempt</strong>:</p>\n\n<pre><code>auto pred = [](const VideoDetails &amp; ID) { return ID.VidID == vID;  };\nfind_if(Mylist.begin(), MyList.end(), vID) != MyList.end();\n</code></pre>\n\n<p><strong>Third attempt</strong>:</p>\n\n<pre><code>list &lt;VideoDetails&gt;::iterator iter;\nfor(iter = MyList.begin(); iter != MyList.end(); ++iter)\n{\n  if ((*iter).VidID == vID) {\n    //  \n  } else {\n    //\n  }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>First attempt error</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error (active) E1738 the enclosing-function 'this' cannot be referenced in a lambda body unless it is in the capture list mp 3      \n</code></pre>\n\n<p><strong>Third attempt error</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error C2678 binary '==': no operator found which takes a left-hand operand of type 'int' (or there is no acceptable conversion) mp 3\n</code></pre>\n"}, {"tags": ["c++", "syntax", "ros"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1560352011, "creation_date": 1560352011, "answer_id": 56565327, "question_id": 56565275, "link": "https://stackoverflow.com/questions/56565275/can-you-explain-this-syntax-rosrate-loop-rate10/56565327#56565327", "title": "Can you explain this syntax: ros::Rate loop_rate(10);", "body": "<p>It's nothing sinister.</p>\n\n<p>In fact, it's a pretty straightforward variable declaration.</p>\n\n<p>The type is <code>ros::Rate</code>, the name is <code>loop_rate</code>, and the sole constructor argument is <code>10</code>.</p>\n\n<p>It does look a bit like a function call, but it isn't one. (It also looks a bit like a function declaration, which <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"noreferrer\">can cause problems</a> if you're not careful!)</p>\n\n<p>It's like:</p>\n\n<pre><code>std::string str(\"Hi!\");\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>Rectangle rect(10, 5);\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>int x(42);\n</code></pre>\n\n<p>In the case of built-ins, many of us tend to use old-style copy-initialisation instead:</p>\n\n<pre><code>int x = 42;\n</code></pre>\n\n<p>&hellip; though this is not so feasible for most class types.</p>\n\n<p>Do you perhaps need to review declaration syntax in <a href=\"https://stackoverflow.com/q/388242/560648\">your C++ book</a>?</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 12243492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPehLdkbUNaxGy1HEyY6wJxzZvCw3hAkMqde6a-Q=k-s128", "display_name": "kaustubh patil", "link": "https://stackoverflow.com/users/12243492/kaustubh-patil"}, "is_accepted": false, "score": 2, "last_activity_date": 1582617518, "last_edit_date": 1582617518, "creation_date": 1582616469, "answer_id": 60389652, "question_id": 56565275, "link": "https://stackoverflow.com/questions/56565275/can-you-explain-this-syntax-rosrate-loop-rate10/60389652#60389652", "title": "Can you explain this syntax: ros::Rate loop_rate(10);", "body": "<p><code>Rate</code> is a type included in <code>ros/ros.h</code> which is used to give a specific time period for a task.</p>\n\n<p>Thus it has been written as:</p>\n\n<pre><code>ROS:: Rate variable_name(time_delay_HZ); \n</code></pre>\n\n<p>You can give any name to your variable they have given <code>loop_rate</code> and you can give any time delay in <code>HZ</code> (<code>10HZ=100ms</code>).</p>\n"}], "owner": {"reputation": 387, "user_id": 7725203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c6a243e01e63bc4a8efe01ced80888?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Winters", "link": "https://stackoverflow.com/users/7725203/alexis-winters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 56565327, "answer_count": 2, "score": 2, "last_activity_date": 1582617518, "creation_date": 1560351865, "question_id": 56565275, "link": "https://stackoverflow.com/questions/56565275/can-you-explain-this-syntax-rosrate-loop-rate10", "title": "Can you explain this syntax: ros::Rate loop_rate(10);", "body": "<p>I am trying to understand this line of code</p>\n\n<pre><code> ros::Rate loop_rate(10);\n</code></pre>\n\n<p>It seems to be creating some kind of object, however this looks like a function call and I don't see where the object is named. What is this line of code doing? I understand what loop_rate is in ros, but I am new to c++ and don't understand the syntax.</p>\n\n<pre><code>#include \"ros/ros.h\"\n#include \"std_msgs/String.h\"\n#include &lt;sstream&gt;\n\nint main(int argc, char **argv)\n{\n  ros::init(argc, argv, \"talker\");\n\n  ros::NodeHandle n;\n\n  ros::Publisher chatter_pub = n.advertise&lt;std_msgs::String&gt;(\"chatter\", 1000);\n\n  ros::Rate loop_rate(10);\n\n\n\n  int count = 0;\n  while (ros::ok())\n  {\n    std_msgs::String msg;\n\n    std::stringstream ss;\n    ss &lt;&lt; \"hello world \" &lt;&lt; count;\n    msg.data = ss.str();\n\n    ROS_INFO(\"%s\", msg.data.c_str());\n\n    chatter_pub.publish(msg);\n\n    ros::spinOnce();\n\n    loop_rate.sleep();\n    ++count;\n  }\n\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1560351757, "post_id": 56565161, "comment_id": 99709825, "body": "No. In general, informatiin about object type is not stored anywhere. There are exceptions to this but I do recommend to ignore this fact for now. As a new C++ prorammer, you should avoid casts like the plague."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1560352261, "post_id": 56565161, "comment_id": 99710137, "body": "As a general rule, if you discover that some <i>code</i> doesn&#39;t work like you think it should, and you want to ask about it here, you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Prefer a code example that can be tried to a general abstract formulation of your question."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1560352924, "post_id": 56565161, "comment_id": 99710505, "body": "Just to note that <code>qobject_cast</code> is specific to <code>Qt</code> and not part of <code>C++</code>."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 10833151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105e1c301f6ff60de3fbd9ef73fd19cc?s=128&d=identicon&r=PG&f=1", "display_name": "James Ronald", "link": "https://stackoverflow.com/users/10833151/james-ronald"}, "edited": false, "score": 0, "creation_date": 1560355815, "post_id": 56565397, "comment_id": 99712128, "body": "Thank you for the response! You mentioned that type casting always creates a new object, but that&#39;s exactly what I tested and found not to be a case. I used <code>cout</code> to see an object&#39;s address, type casted it to a different type and assigned that to a variable, then printed the address of that variable (in that order) and the same number (same address) was printed both times, which shows that the object was unchanged...I think? I am misunderstanding something? I&#39;ll copy paste my actual code here ASAP"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1560352221, "creation_date": 1560352221, "answer_id": 56565397, "question_id": 56565161, "link": "https://stackoverflow.com/questions/56565161/why-does-typecasting-an-object-not-change-its-address-where-is-information-abou/56565397#56565397", "title": "Why does typecasting an object not change its address? Where is information about the object&#39;s type stored?", "body": "<blockquote>\n  <p>Why does typecasting an object not change its address?</p>\n</blockquote>\n\n<p>Because typecasting has absolutely zero effect on the source object<sup>1</sup>. Type casting always produces a new object (of possibly different type) or a reference. Furthermore, there is no operation that could change the address of any object. An object is stored in one address throughout its entire lifetime.</p>\n\n<p>If the result of a type cast is a reference, then that reference may refer to another object in different address, in particular when converting to a reference to a type in same inheritance hierarchy.</p>\n\n<p><sup>1</sup> Technically, a converting constructor or a conversion operator <em>could</em> modify the source object, but that would be horribly non-conventional.</p>\n\n<blockquote>\n  <p>Where is information about the object's type stored?</p>\n</blockquote>\n\n<p>Type information is \"stored\" by the compiler while it is compiling the program. In <em>general</em>, the information does not need to be stored by the program itself.</p>\n\n<p>In <em>particular</em> case of polymorphic types, some information about the type of an object is stored in the memory of the program to support <code>dynamic_cast</code> and dynamic <code>typeid</code>. It is stored in whatever place the language implementation has chosen appropriate.</p>\n\n<blockquote>\n  <p>I just tested this out using qobject_cast</p>\n</blockquote>\n\n<p>There is no such thing as <code>qobject_cast</code> in C++. Perhaps you are using some library.</p>\n"}, {"tags": [], "owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "is_accepted": false, "score": 1, "last_activity_date": 1560356468, "last_edit_date": 1560356468, "creation_date": 1560353036, "answer_id": 56565645, "question_id": 56565161, "link": "https://stackoverflow.com/questions/56565161/why-does-typecasting-an-object-not-change-its-address-where-is-information-abou/56565645#56565645", "title": "Why does typecasting an object not change its address? Where is information about the object&#39;s type stored?", "body": "<p>In some cases, typecasting actually does change the apparent address of the source object. The original source object's address doesn't change, but the address of \"that same object\" (not a newly-constructed converted object) may be different if an object, reference, or pointer to a derived class is cast via <code>static_cast</code> or <code>dynamic_cast</code> to a reference or pointer to a base class, when the derived class inherits the base class in a multiple-inheritance hierarchy and the base classes either contain data or are polymorphic (or both). The \"different address\" is actually the address within the source object where the base class portion of the overall derived class resides.</p>\n"}], "owner": {"reputation": 399, "user_id": 10833151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105e1c301f6ff60de3fbd9ef73fd19cc?s=128&d=identicon&r=PG&f=1", "display_name": "James Ronald", "link": "https://stackoverflow.com/users/10833151/james-ronald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560356468, "creation_date": 1560351505, "question_id": 56565161, "link": "https://stackoverflow.com/questions/56565161/why-does-typecasting-an-object-not-change-its-address-where-is-information-abou", "title": "Why does typecasting an object not change its address? Where is information about the object&#39;s type stored?", "body": "<p>I just tested this out using qobject_cast (but I imagine it'd be the same for any other sort of type cast), and apparently casting an object to a different type does not change its address. This makes me think that information about the type of an object is stored elsewhere...is that correct? </p>\n\n<p>I'm still new to C++, so if this makes no sense at all feel free to tell me that as well. Any help is appreciated. </p>\n"}, {"tags": ["c++", "qt", "qml", "qt-quick"], "answers": [{"tags": [], "owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "is_accepted": true, "score": 3, "last_activity_date": 1560351816, "creation_date": 1560351816, "answer_id": 56565257, "question_id": 56564870, "link": "https://stackoverflow.com/questions/56564870/how-to-use-c-enum-in-qt-js-file/56565257#56565257", "title": "How to use C++ enum in Qt .js file?", "body": "<p>When you call <code>qmlRegisterType&lt;FileSystemModel&gt;(\"FileSystemModel\", 1, 0, \"FileSystemModel\")</code> you're registering a <code>FileSystemModel</code> QML module that contains a <code>FileSystemModel</code> type, so in your js when you write <code>.import FileSystemModel 1.0 as FileSystemModel</code> you're not actually importing your type but the QML module, that's why it's not working.</p>\n\n<p>In your js file try changing <code>FileSystemModel.TYPE_DIR</code> to <code>FileSystemModel.FileSystemModel.TYPE_DIR</code>, that should do the trick.</p>\n"}], "owner": {"reputation": 3287, "user_id": 964478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Md8qK.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/964478/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 56565257, "answer_count": 1, "score": 3, "last_activity_date": 1560351816, "creation_date": 1560350580, "last_edit_date": 1560350992, "question_id": 56564870, "link": "https://stackoverflow.com/questions/56564870/how-to-use-c-enum-in-qt-js-file", "title": "How to use C++ enum in Qt .js file?", "body": "<p>I need to create a file with several shared functions for multiple QML files.</p>\n\n<p>I tried to create a .js file, but seems like C++ enums don't work here. <code>FileSystemModel.TYPE_DIR</code> is undefined here, while in QML it works fine after <code>import FileSystemModel 1.0</code></p>\n\n<pre><code>.pragma library\n\n.import FileSystemModel 1.0 as FileSystemModel\n\nfunction fsItemTypeToImage(type) {\n    console.log(FileSystemModel.TYPE_DIR)\n    switch (type) {\n    case FileSystemModel.TYPE_DIR:\n        return \"/img/dir.png\"\n    case FileSystemModel.TYPE_FILE:\n        return \"/img/file.png\" \n    }\n    return null\n}\n</code></pre>\n\n<p>FileSystemModel.h:</p>\n\n<pre><code>class FileSystemModel : public QAbstractListModel {\n    Q_OBJECT \npublic:\n    enum Roles { NameRole = Qt::UserRole + 1, SizeRole, DateRole, TypeRole };\n\n    enum ItemType {\n        TYPE_UNKNOWN = 0,\n        TYPE_FILE,\n        TYPE_DIR, \n    };\n    Q_ENUM(ItemType)\n</code></pre>\n\n<p>registration in main.cpp:</p>\n\n<pre><code>qmlRegisterType&lt;FileSystemModel&gt;(\"FileSystemModel\", 1, 0, \"FileSystemModel\");\n</code></pre>\n"}, {"tags": ["c++", "qt", "qgraphicsitem"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5093083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a1f9d08dfc4d447a9fd0c63a38ff028?s=128&d=identicon&r=PG&f=1", "display_name": "Veera", "link": "https://stackoverflow.com/users/5093083/veera"}, "edited": false, "score": 0, "creation_date": 1560405545, "post_id": 56569979, "comment_id": 99726413, "body": "I am trying to rescale only few QGraphicsItems in the scene and not the entire graphics view."}], "tags": [], "owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "is_accepted": false, "score": 0, "last_activity_date": 1560429884, "last_edit_date": 1560429884, "creation_date": 1560371574, "answer_id": 56569979, "question_id": 56564499, "link": "https://stackoverflow.com/questions/56564499/how-to-rescale-graphicitems-without-disturbing-the-shape/56569979#56569979", "title": "How to rescale GraphicItems without disturbing the shape?", "body": "<p>Create <code>QGraphicsItemGroup</code> which is containing all your items and apply the transform on it.</p>\n\n<p>You just have to recenter the group according to the previous position.</p>\n\n<pre><code>QList&lt;QGraphicsItem*&gt; makeItems()\n{\n    return QList&lt;QGraphicsItem*&gt;() &lt;&lt; new QGraphicsLineItem(0, 0, 50, 0)\n                  &lt;&lt; new QGraphicsLineItem(50, 0, 50, 50)\n                  &lt;&lt; new QGraphicsLineItem(50, 50, 0, 50)\n             &lt;&lt; new QGraphicsLineItem(0, 50, 0, 0)\n                &lt;&lt; new QGraphicsRectItem(24, 24, 2, 2)\n             &lt;&lt; new QGraphicsEllipseItem(0, 0, 50, 50);\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n    QApplication app(argc, argv);\n\n\n    QGraphicsScene* scene = new QGraphicsScene(-500, -500, 1000, 1000);\n    auto* view = new QGraphicsView;\n    view-&gt;setScene(scene);\n\n\n    QList&lt;QGraphicsItem*&gt; items, originalItems;\n    originalItems = makeItems();\n    items = makeItems();\n\n    QGraphicsItemGroup* itemGroup = new QGraphicsItemGroup;\n\n    for (auto* item: originalItems)\n    {\n        scene-&gt;addItem(item);\n    }\n\n    for (auto* item: items)\n    {\n        itemGroup-&gt;addToGroup(item);\n    }\n\n    scene-&gt;addItem(itemGroup);\n\n\n    qreal scale = 1.75;\n    QPointF const beforeScale = itemGroup-&gt;mapToScene(itemGroup-&gt;boundingRect().center());\n    itemGroup-&gt;setScale(scale);\n    QPointF const afterScale = itemGroup-&gt;mapToScene(itemGroup-&gt;boundingRect().center());\n    QPointF const offset = beforeScale - afterScale;\n    itemGroup-&gt;moveBy(offset.x(), offset.y()); // The center will be the same than before the scaling\n    view-&gt;show();\n    return app.exec();\n}\n</code></pre>\n\n<p>Use <code>QPen::setCosmetic</code> to keep the look-and-feel before and after the transformation</p>\n"}], "owner": {"reputation": 171, "user_id": 5093083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a1f9d08dfc4d447a9fd0c63a38ff028?s=128&d=identicon&r=PG&f=1", "display_name": "Veera", "link": "https://stackoverflow.com/users/5093083/veera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1560429884, "creation_date": 1560349489, "last_edit_date": 1560351523, "question_id": 56564499, "link": "https://stackoverflow.com/questions/56564499/how-to-rescale-graphicitems-without-disturbing-the-shape", "title": "How to rescale GraphicItems without disturbing the shape?", "body": "<p>How to rescale GraphicItems without disturbing the shape?</p>\n\n<p>I am trying to rescale QGraphicsItems from a part of a scene. When I rescale the QGraphicsItem it transforms the shape.</p>\n\n<pre><code>QList&lt;QGraphicsItem*&gt; items;\n\n    for (auto it : items)\n    {\n        qreal scale = 1.75;\n\n        QPointF c = it-&gt;mapToScene(it-&gt;boundingRect().center());\n        it-&gt;setScale(scale);\n        QPointF cNew = it-&gt;mapToScene((it-&gt;boundingRect()).center());\n        QPointF offset = c - cNew;\n        it-&gt;moveBy(offset.x(), offset.y());\n\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xows4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xows4.png\" alt=\"Actual Image\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/g51Oj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g51Oj.png\" alt=\"Rescaled Image\"></a></p>\n"}, {"tags": ["c++", "inheritance", "protected"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1560349669, "post_id": 56564465, "comment_id": 99708551, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - put your second part of the question into code. <code>this-&gt;_name</code> should work in any <code>Lion</code> method.  <code>protected</code> inheritance has no effect on the inside visibility of  <code>protected</code> members."}, {"owner": {"reputation": 35, "user_id": 10639651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4651370af2163e5c58f6e4ea6aeae5e1?s=128&d=identicon&r=PG&f=1", "display_name": "sasha", "link": "https://stackoverflow.com/users/10639651/sasha"}, "edited": false, "score": 0, "creation_date": 1560349781, "post_id": 56564465, "comment_id": 99708623, "body": "this-&gt;_name will give me the name of the current lion.I want to get name of this lion mother/father."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1560349887, "post_id": 56564465, "comment_id": 99708694, "body": "@Alex\u02e2\u1d45\u02e2\u02b0\u1d45Druzina You can only do that if <code>_mother</code>/<code>_father</code> are a declared as a <code>Lion</code>, not as an <code>Animal</code>. As written, it would be legal (if nonsensical from a biological perspective) for <code>_mother</code> to be an <code>Ape</code> and <code>_father</code> to be a <code>Butterfly</code>, in which case a <code>Lion</code> (reasonably) does not have permission to access its inaccessible members. You could either use <code>get</code>/<code>set</code> methods for the name (easiest) or involve templating (probably too heavy for now)."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1560349946, "post_id": 56564465, "comment_id": 99708729, "body": "@Alex\u02e2\u1d45\u02e2\u02b0\u1d45Druzina Sorry, I missread the question, in that case the linked question is correct."}, {"owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "edited": false, "score": 0, "creation_date": 1560350077, "post_id": 56564465, "comment_id": 99708791, "body": "You can access <code>_mother</code> from Lion instance because of inheritance but <code>_mother-&gt;name</code> is not public so you can not access it this way."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "edited": false, "score": 0, "creation_date": 1560350190, "post_id": 56564465, "comment_id": 99708857, "body": "@muaz If <code>_mother</code> were a <code>Lion</code> everything would be fine. In C++ access is based on the type you are in, not the object you are in."}, {"owner": {"reputation": 35, "user_id": 10639651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4651370af2163e5c58f6e4ea6aeae5e1?s=128&d=identicon&r=PG&f=1", "display_name": "sasha", "link": "https://stackoverflow.com/users/10639651/sasha"}, "edited": false, "score": 0, "creation_date": 1560351776, "post_id": 56564465, "comment_id": 99709840, "body": "Thanks you all for making it clear!"}], "owner": {"reputation": 35, "user_id": 10639651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4651370af2163e5c58f6e4ea6aeae5e1?s=128&d=identicon&r=PG&f=1", "display_name": "sasha", "link": "https://stackoverflow.com/users/10639651/sasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1560349896, "answer_count": 0, "score": 1, "last_activity_date": 1560350100, "creation_date": 1560349396, "last_edit_date": 1560350100, "question_id": 56564465, "link": "https://stackoverflow.com/questions/56564465/how-to-access-protected-field-of-parent-class-from-child-class", "closed_reason": "Duplicate", "title": "How to access protected field of parent class from child class", "body": "<p>I'm new to C++. I have searched my question here, but did not find an answer..\nSo, I have parent and child classes:</p>\n\n<pre><code>class Animal {\nprotected:\n    Animal *_father;\n    Animal *_mother;\n    string _name;\n\npublic:\n  ...\n};\n\nclass Lion: protected Animal {\nprivate:\n...\npublic:\n...\n};\n</code></pre>\n\n<p>I have a method in Lion class that has to print the animal itself and its parents names.</p>\n\n<p>So I want to get the <code>_name</code> field of a parent.\nI have tried to do : <code>_mother-&gt;_name</code><br>\nAnd the error is: <code>'name' is a protected member of 'Animal'</code></p>\n\n<p>I'm pretty sure that inheritance should solve this...<br>\nI'll be glad for any help!Thanks you all</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1560349884, "post_id": 56564574, "comment_id": 99708692, "body": "A addition: As the (not inluded) error message should have stated the address is not an <code>lvalue</code> which means it is not an addressable object in memory but kind of &quot;hard coded&quot; into the programs code. The linker (i believe it was) will propably replace the object identifier from the compiler with the corresponding address of the array."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 5, "last_activity_date": 1560349715, "creation_date": 1560349715, "answer_id": 56564574, "question_id": 56564452, "link": "https://stackoverflow.com/questions/56564452/accessing-memory-for-iterating-through-an-array-in-line/56564574#56564574", "title": "Accessing memory for iterating through an array in-line", "body": "<p>The problem with all three of your last lines is that you are trying to increment a constant.</p>\n\n<p>The address of <code>someArray</code> is a constant. You can't change it. You have to assign it to a pointer variable first, and then you can change the pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 4, "last_activity_date": 1560350361, "last_edit_date": 1560350361, "creation_date": 1560349915, "answer_id": 56564647, "question_id": 56564452, "link": "https://stackoverflow.com/questions/56564452/accessing-memory-for-iterating-through-an-array-in-line/56564647#56564647", "title": "Accessing memory for iterating through an array in-line", "body": "<p>Arrays are implicitly convertible to a pointer to their first element.  That's why <code>int* location = someArray;</code> works.  Arrays are not themselves pointers though.</p>\n\n<p><code>*(++someArray)</code> is ill-formed because there is no <code>++</code> operator defined for arrays.  <code>++</code> is defined for pointers, but the result of the implicit conversion from array to pointer is a temporary (an rvalue), and the <code>++</code> operator is only defined for named objects (lvalues).</p>\n\n<p><code>*++&amp;someArray</code> and <code>*++(&amp;someArray)</code> are ill-formed, again, because the <code>&amp;</code> operator returns an unnamed temporary pointer to the array.  Again, the <code>++</code> operator is only defined for lvalues.  Additionally, the type of <code>&amp;someArray</code> is <code>int (*)[4]</code> (pointer to array of 4 <code>int</code>s), not <code>int*</code>.  Even for an lvalue, the <code>++</code> operator would not behave how you want on that type.</p>\n\n<hr>\n\n<p>What would work here is to use the <code>+</code> operator instead.  <code>*(someArray + 1)</code> is perfectly well defined.  <code>someArray</code> decays to an <code>int*</code>, is shifted by one position, and that value dereferenced.  In fact, the subscript operator is defined in terms of the <code>+</code> operator.  <code>someArray[n]</code> is defined to be equivalent to <code>*(someArray + n)</code>.</p>\n"}], "owner": {"reputation": 452, "user_id": 10434906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e886962346669a30c789a2c4b1778864?s=128&d=identicon&r=PG&f=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/10434906/solarflare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56564647, "answer_count": 2, "score": 1, "last_activity_date": 1560350361, "creation_date": 1560349372, "last_edit_date": 1560350256, "question_id": 56564452, "link": "https://stackoverflow.com/questions/56564452/accessing-memory-for-iterating-through-an-array-in-line", "title": "Accessing memory for iterating through an array in-line", "body": "<p>I want to access elements within arrays by traversing their memory locations. Since elements of any given array are stored sequentially, I'm using the <code>++</code> operator to increment through their memory locations.\nI can write some code like this:</p>\n\n<pre><code>    int someArray[4];\n    someArray[0] = 44;\n    someArray[1] = 55;\n    someArray[2] = 66;\n    someArray[3] = 77;\n\n    int *location = someArray;\n    cout &lt;&lt; *++location &lt;&lt; endl; // OUTPUT: 55\n    cout &lt;&lt; *++location &lt;&lt; endl; // OUTPUT: 66\n</code></pre>\n\n<p>However I receive errors when I try any of the following:</p>\n\n<pre><code>    cout &lt;&lt; *(++someArray) &lt;&lt; endl;\n    // error: lvalue required as increment operand cout &lt;&lt; *(++someArray) &lt;&lt; endl;\n\n    // OR\n\n    cout &lt;&lt; *++&amp;someArray &lt;&lt; endl;\n    // error: lvalue required as increment operand cout &lt;&lt; *++&amp;someArray &lt;&lt; endl;\n\n    // OR\n\n    cout &lt;&lt; *++(&amp;someArray) &lt;&lt; endl;\n    // error: lvalue required as increment operand cout &lt;&lt; *++(&amp;someArray) &lt;&lt; endl;\n\n</code></pre>\n\n<p>I'm quite new to c++ but from my understanding prefixing a variable with <code>&amp;</code> would retrieve its memory location.\nArrays, however, would return their memory location without the <code>&amp;</code>.\nWhether I use <code>&amp;</code> or not I receive errors. \nI'm wanting to increment through the array in-line, however I have to declare a variable, within which the location is stored first.</p>\n\n<p>I'm hoping for some clarification on my c++ understanding here :)</p>\n"}, {"tags": ["c++", "c++17", "rtti", "string-literals"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 10, "creation_date": 1560349051, "post_id": 56564321, "comment_id": 99708207, "body": "<code>&quot;&quot;</code> isn&#39;t a <code>const char*</code>, so they don&#39;t have matching types.  A <code>&quot;&quot;</code> is a <code>const char[]</code>, an array of const char."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1560349274, "post_id": 56564321, "comment_id": 99708338, "body": "@Eljay Question isn&#39;t whether they are or shouldn&#39;t be different types. That&#39;s a premise of the question. The question is why <code>std::any(&quot;&quot;).type()</code> is not array (A1_c)."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 4, "creation_date": 1560349298, "post_id": 56564321, "comment_id": 99708354, "body": "To add to @Eljay&#39;s comment: the 2nd line (<code>std::any</code>) is a pointer because the char array decays to a pointer when it&#39;s passed to the constructor."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1560352026, "post_id": 56564321, "comment_id": 99709997, "body": "@Timo it&#39;s passed by reference, so it doesn&#39;t decay when passed."}], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "edited": false, "score": 0, "creation_date": 1560349803, "post_id": 56564459, "comment_id": 99708638, "body": "So what I want is to apply <code>std::decay</code> before <code>typeid</code>?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "edited": false, "score": 2, "creation_date": 1560349931, "post_id": 56564459, "comment_id": 99708721, "body": "@val I don&#39;t really know what you want to do (not clear from your question), but if you create an object of type <code>std::decay_t&lt;T&gt;</code> from your object of type <code>T</code>, this should give you this behavior, similar to <code>std::any</code> behavior."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 18, "last_activity_date": 1560349520, "last_edit_date": 1560349520, "creation_date": 1560349383, "answer_id": 56564459, "question_id": 56564321, "link": "https://stackoverflow.com/questions/56564321/typeid-typeidconst-char/56564459#56564459", "title": "typeid(&quot;&quot;) != typeid(const char*)", "body": "<p>As others have mentioned, the type of the string literal <code>\"\"</code> is <code>const char[1]</code>, as explained by, e.g., <a href=\"https://stackoverflow.com/questions/12517983/what-is-the-datatype-of-string-literal-in-c\">What is the datatype of string literal in C++?</a>.</p>\n\n<p>The type stored in <code>std::any(\"\")</code> is <code>const char*</code> because you are using the following constructor (<a href=\"http://www.eel.is/c++draft/any.cons#8\" rel=\"noreferrer\">http://www.eel.is/c++draft/any.cons#8</a>):</p>\n\n<pre><code>// Effects: Constructs an object of type any that contains an object of \n// type std::decay_t&lt;T&gt; direct-initialized with std::forward&lt;T&gt;(value).\ntemplate&lt; class T&gt;\nany( T&amp;&amp; value );\n</code></pre>\n\n<p>In this case, <code>T</code> is <code>const char(&amp;)[1]</code> (the type of the string literal <code>\"\"</code>), and thus <a href=\"https://en.cppreference.com/w/cpp/types/decay\" rel=\"noreferrer\"><code>std::decay_t&lt;const char(&amp;)[1]&gt;</code></a> will give you <code>const char*</code>, which is why the <code>typeid()</code> of <code>std::any(\"\").type()</code> is the type ID of <code>const char*</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1560350881, "last_edit_date": 1560350881, "creation_date": 1560349448, "answer_id": 56564487, "question_id": 56564321, "link": "https://stackoverflow.com/questions/56564321/typeid-typeidconst-char/56564487#56564487", "title": "typeid(&quot;&quot;) != typeid(const char*)", "body": "<blockquote>\n  <p>Why do results for <code>std::any(\"\").type()</code> and <code>typeid(\"\")</code> differ?</p>\n</blockquote>\n\n<p>Accroding to the following <a href=\"https://en.cppreference.com/w/cpp/utility/any/any\" rel=\"nofollow noreferrer\">reference</a>:</p>\n\n<blockquote>\n<pre><code>template&lt; class ValueType &gt;\nany( ValueType&amp;&amp; value );\n</code></pre>\n  \n  <p>4) Constructs an object with initial content an object of type <code>std::decay_t&lt;ValueType&gt;</code>, direct-initialized from <code>std::forward&lt;ValueType&gt;(value)</code>.</p>\n</blockquote>\n\n<p><code>std::decay_t&lt;const char[1]&gt;</code> is <code>const char*</code>.</p>\n\n<hr>\n\n<p>Here is a quote from FrankHB1989 on the <a href=\"https://groups.google.com/a/isocpp.org/d/msg/std-proposals/cJD8urBWN7c/RHNaAThWDQAJ\" rel=\"nofollow noreferrer\">isocpp.org forum</a>, which I think is relevant in understanding <code>std::any</code>, in context of this question:</p>\n\n<blockquote>\n  <p>[<code>std::any</code>] is even not for \"any object\". As I have argued before, I have expect the word \"any\" being short for \"any first-class object type\" (i.e. cv-unqualified non-array object type), but <code>std::any</code> has additional refinement of CopyConstructible on the value type, so it is actually for \"any copyable cv-unqualified non-array object type\" instead.</p>\n</blockquote>\n\n<p>As such</p>\n\n<blockquote>\n  <p>Is there a way to get first behavior, i.e. make results for string literals consistent (I use type identification to call different type handlers)?</p>\n</blockquote>\n\n<p>There is no way of having <code>std::any</code> of array (you can have <code>std::any</code> of <code>std::array</code>, but string literal is not a <code>std::array</code>), and there is no way of making <code>typeid(\"\")</code> be a pointer. However, you can use <code>std::decay_t&lt;decltype(\"\")&gt;</code> to get the same type as stored in <code>std::any</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1560349565, "creation_date": 1560349565, "answer_id": 56564528, "question_id": 56564321, "link": "https://stackoverflow.com/questions/56564321/typeid-typeidconst-char/56564528#56564528", "title": "typeid(&quot;&quot;) != typeid(const char*)", "body": "<p>It is a common misconception that a string literal has type <code>const char*</code>.</p>\n\n<p>It doesn't. It has type <code>const char[&lt;size + 1&gt;]</code> (plus one for the null terminator).</p>\n\n<p>e.g. <code>\"\"</code> has type <code>const char[1]</code>.</p>\n\n<p>But we often assign a string literal to a <code>const char*</code>, out of convention (and also because otherwise we trigger special rules that result in <em>copying</em> the string).</p>\n\n<p>Furthermore, array name decay rules actually make it quite hard to observe the array-ness of a name in C (and, by extension, C++); that <code>std::any</code> works the way it does is an example of that.</p>\n"}], "owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 56564459, "answer_count": 3, "score": 15, "last_activity_date": 1560360910, "creation_date": 1560348949, "last_edit_date": 1560360910, "question_id": 56564321, "link": "https://stackoverflow.com/questions/56564321/typeid-typeidconst-char", "title": "typeid(&quot;&quot;) != typeid(const char*)", "body": "<p>I'm making a C++ library which relies heavily on RTTI (customizable bridge to another language) and is very confused about string literal type.</p>\n\n<p>This is a simple test I made to show the problem:</p>\n\n<pre><code>std::cout &lt;&lt; typeid(const char*).name() &lt;&lt; std::endl; // PKc\nstd::cout &lt;&lt; std::any(\"\").type().name() &lt;&lt; std::endl; // PKc\nstd::cout &lt;&lt; typeid(\"\").name() &lt;&lt; std::endl;          // A1_c\n</code></pre>\n\n<p>For me it looks like the first two print the type for <code>const char*</code>, but the last one is an array.</p>\n\n<p>Why do results for <code>std::any(\"\").type()</code> and <code>typeid(\"\")</code> differ? Is there a way to get the first behavior, i.e. make results for string literals consistent (I use type identification to call different type handlers)?</p>\n\n<p>P.S.: tests are done using Clang version 8.0.0-3 (tags/RELEASE_800/final) on Ubuntu 19.04.</p>\n"}, {"tags": ["c++", "cmake", "protocol-buffers", "protoc"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4374785, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kmUquX6f2BE/AAAAAAAAAAI/AAAAAAAABwE/FQdVTpLaCv8/photo.jpg?sz=128", "display_name": "Andrew Bouchard", "link": "https://stackoverflow.com/users/4374785/andrew-bouchard"}, "edited": false, "score": 0, "creation_date": 1560367561, "post_id": 56565134, "comment_id": 99717294, "body": "Thank you for not only giving me the answer, but taking the time to explain - that&#39;s exactly what the issue was!"}], "tags": [], "owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "is_accepted": true, "score": 1, "last_activity_date": 1560351426, "creation_date": 1560351426, "answer_id": 56565134, "question_id": 56564298, "link": "https://stackoverflow.com/questions/56564298/unexpected-output-path-for-compiled-protobuf-files/56565134#56565134", "title": "Unexpected output path for compiled protobuf files", "body": "<p>This might be related to your issue:\n<a href=\"https://github.com/protocolbuffers/protobuf/issues/3044\" rel=\"nofollow noreferrer\">https://github.com/protocolbuffers/protobuf/issues/3044</a></p>\n\n<p>Basically, the first import path you give is used as the root for the structure of proto files, and the output is generated with this relative structure in the output directory. So you just have to change your command to <code>COMMAND protoc --cpp_out=${PROTO_GEN_DIR}/include/${PROJECT_NAME} -I${PROTO_MAIN_DIR}/${PROJECT_NAME} ${PROTO_MAIN_DIR}/${PROJECT_NAME}/vehicle/${basename}.proto</code></p>\n"}], "owner": {"reputation": 59, "user_id": 4374785, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kmUquX6f2BE/AAAAAAAAAAI/AAAAAAAABwE/FQdVTpLaCv8/photo.jpg?sz=128", "display_name": "Andrew Bouchard", "link": "https://stackoverflow.com/users/4374785/andrew-bouchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 56565134, "answer_count": 1, "score": 0, "last_activity_date": 1560351426, "creation_date": 1560348884, "question_id": 56564298, "link": "https://stackoverflow.com/questions/56564298/unexpected-output-path-for-compiled-protobuf-files", "title": "Unexpected output path for compiled protobuf files", "body": "<p>I'm trying to compile several subfolders of .proto files using CMake, and I'd like the output to end up in a similar folder structure. I'm pretty new to CMake, so I expect that's an elegant way to do it, but right now I'm manually specifying the subfolders so that I can see what's going on. At this point, running the CMakeLists.txt I've shown below successfully reads the .proto files and generates the source, but instead of ending up in ./proto_gen/include/frontseat/vehicle like I expected they all end up in ./proto_gen/include/frontseat/vehicle/vehicle.</p>\n\n<p>I've tried printing out all the paths in the call to execute_process and none of them have this double-nesting \"vehicle/vehicle\" anywhere, so I'm assuming that this has something to do with how the protoc command is generating the filename. What's odd to me, though, is that previously I had all my proto files in one folder and everything seemed pretty clear about where the filenames were coming from. The only difference between this version and that is the places that I added the \"vehicle\" folder to the paths.</p>\n\n<pre><code># Define CMake requirements and project name\ncmake_minimum_required(VERSION 3.0)\nproject( frontseat )\n\n# Define directories for .proto files and compiled output\nGET_FILENAME_COMPONENT(PROTO_MAIN_DIR \"./proto\" ABSOLUTE)\nGET_FILENAME_COMPONENT(PROTO_GEN_DIR \"./proto_gen\" ABSOLUTE)\n\n# Get all the .proto files to be compiled from the first subfolder\nfile(GLOB PROTO_FILES ${PROTO_MAIN_DIR}/${PROJECT_NAME}/vehicle/*.proto)\n\n# Make directories needed for protobuf files\nfile(MAKE_DIRECTORY ${PROTO_GEN_DIR}/include/${PROJECT_NAME}/vehicle)\nfile(MAKE_DIRECTORY ${PROTO_GEN_DIR}/src/vehicle)\n\n# Iterate over the list of .proto files to compile\nFOREACH (proto ${PROTO_FILES})\n  get_filename_component(basename ${proto} NAME_WE)\n\n  # Generate proto file using protoc executable\n  message(\"   Processing vehicle proto file: \" ${basename})\n  execute_process(COMMAND protoc --cpp_out=${PROTO_GEN_DIR}/include/${PROJECT_NAME}/vehicle -I${PROTO_MAIN_DIR}/${PROJECT_NAME} ${PROTO_MAIN_DIR}/${PROJECT_NAME}/vehicle/${basename}.proto)\nENDFOREACH(proto)\n</code></pre>\n\n<p>Can anyone tell me where the extra layer of \"vehicle\" subfolder is coming from here and how to remove it?</p>\n"}, {"tags": ["c++", "arrays", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1560349661, "post_id": 56564159, "comment_id": 99708539, "body": "certainly one problem with your approach is the requirement in CUDA for natural alignment.  I suspect if you violated this, that such a violation would be discoverable by running your code with <code>cuda-memcheck</code>.  Not sure what you mean by &quot;without any errors&quot;.  Perhaps you are not checking for errors properly.  I&#39;m not sure that use of shared memory this way is what I would suggest.  Even if you get it working, there is a possibility of bank conflicts.  If you need a variable size scratchpad, my suggestion would be to use global memory, but arrange storage pattern for coalesced access."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1560349910, "post_id": 56564159, "comment_id": 99708711, "body": "You could also do something in shared memory in a roughly equivalent fashion, while attempting to avoid bank conflicts, with interleaved storage.  And I&#39;m not sure there is a widely acknowledged &quot;correct paradigm&quot; for this."}, {"owner": {"reputation": 4121, "user_id": 848292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ars6Y.png?s=128&g=1", "display_name": "Anti Earth", "link": "https://stackoverflow.com/users/848292/anti-earth"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1560351050, "post_id": 56564159, "comment_id": 99709376, "body": "Are you able to provide a quick code snippet for this (or a link to an example)?"}, {"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1560353221, "post_id": 56564159, "comment_id": 99710700, "body": "Shared memory is much slower than register. Store your arrays in global memory, read in coalesced manner  and use register shuffling for sharing purpose. That&#39;s much faster this way"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1560361325, "post_id": 56564159, "comment_id": 99714600, "body": "This sounds like a spectacularly poor idea, even if it could  be made to work"}, {"owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "edited": false, "score": 0, "creation_date": 1560757388, "post_id": 56564159, "comment_id": 99825839, "body": "Global functions can be templates."}], "answers": [{"comments": [{"owner": {"reputation": 4121, "user_id": 848292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ars6Y.png?s=128&g=1", "display_name": "Anti Earth", "link": "https://stackoverflow.com/users/848292/anti-earth"}, "edited": false, "score": 0, "creation_date": 1560417859, "post_id": 56569457, "comment_id": 99732531, "body": "This was a really fantastic explanation, thanks very much! Indeed I cannot upper-bound the memory per thread, so will have to use global memory."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1560377482, "last_edit_date": 1560377482, "creation_date": 1560368980, "answer_id": 56569457, "question_id": 56564159, "link": "https://stackoverflow.com/questions/56564159/cuda-per-thread-arrays-with-different-types/56569457#56569457", "title": "CUDA per-thread arrays with different types", "body": "<p><strong>Preliminaries</strong></p>\n\n<p>Usually, people are interested in GPU computing for performance reasons - to make their codes run faster.  So we'll keep performance as a guide when trying to make decisions about what to do.</p>\n\n<p>I think one of the problems the sketch you provided in your question would have is one of <a href=\"https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses\" rel=\"nofollow noreferrer\">natural alignment requirement in CUDA</a>.  Picking an arbitrary pointer and type-casting it to a different type may run afoul of this.  If you have such a problem in your code, the <code>cuda-memcheck</code> tool should be able to uncover it.</p>\n\n<p>The typical place to put thread-private arrays in C++ is <em>local</em> memory, and CUDA is no different in my opinion.  However CUDA C++, at least, does not support <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">variable-length arrays</a>.  In your question, you sketched out using shared memory as a proxy for this.  One of the implications of your thinking (I assume) is that although the size of these arrays are not known at compile time, there must be an upper bound to size, because shared memory may impose a limit of as low as 48KB per threadblock.  Therefore if you have 1024 threads in a threadblock, then the maximum combined array size per thread would be limited to 48 bytes.  With 512 threads per block you could conceivably have 96 bytes per thread.  These would be due to shared memory limits if you used shared memory.</p>\n\n<p>So an alternate approach (if you can adhere to these low limits)  would be to simply upper-bound the local memory needed, and statically define a local memory array of that size (or 3), per thread.  A single array would have to be partitioned among the various arrays, with attention paid to alignment as already mentioned.  But given the small sizes suggested by your approach (e.g. ~96 bytes total) it probably would be expedient just to use upper-bounded fixed-size local arrays (not shared memory).</p>\n\n<p>Local memory in CUDA is ultimately backed by the same physical resource -- GPU DRAM memory -- as global memory.  However the arrangement is such that if each thread is accessing a particular element in their own local memory, the effect across threads would be equivalent to coalesced access, should that access need to be serviced by DRAM.  This means the per-thread local storage is <strong>interleaved</strong>, in some fashion.  And this interleaving characteristic is also something we will want to pay attention to, for performance reasons, if we come up with our own variable-length array implementation.  It applies equally to a global memory proxy (to enable coalescing) or a shared memory proxy (to avoid bank conflicts).</p>\n\n<p>In addition to the desire to interleave access for performance reasons, a possible performance reason to <strong>not</strong> prefer a shared memory implementation is that extensive use of shared memory can have negative implications for occupancy, and therefore for performance.  This topic is covered in many other places, so I'll not drill into it further here.</p>\n\n<p><strong>Implementations</strong></p>\n\n<p><em>Local Memory</em></p>\n\n<p>As mentioned above, I believe one of the implicit assumptions about your suggestion to use shared memory is that there must be some (reasonably small) upper bound to the actual sizes of the arrays needed.  If that is the case, it may be expedient to use 3 arrays allocated with the upper bound size:</p>\n\n<pre><code>const int Max_aLen = 9;\nconst int Max_bLen = 5;\nconst int Max_cLen = 9;\n__global__ void mykernel() {\n    type1 a[Max_aLen];\n    type2 b[Max_bLen];\n    type3 c[Max_cLen];\n\n    ...\n}\n</code></pre>\n\n<p>Using up to e.g. 8kbytes per thread for local memory should not be a major concern, in my opinion, but it may depend on your GPU and memory size, and the <a href=\"https://stackoverflow.com/questions/28810365/amount-of-local-memory-per-cuda-thread/28841385#28841385\">analysis mentioned/linked below</a> should indicate any problems.  Certainly the low levels/limits e.g. ~96 bytes per thread should not be an issue.</p>\n\n<p><em>Global Memory</em></p>\n\n<p>I believe the simplest and most flexible approach would be to provide storage for such variable length arrays via global memory, and pointers passed to the kernel.  This allows us to allocate storage for each array via e.g. <code>cudaMalloc</code>, and we can handle separate arrays separately, and we need pay relatively little attention to alignment requirements.  Since we are pretending these global arrays will be used as if they were thread-private, we will want to arrange our indexing to create interleaved storage/access per thread, which will facilitate coalescing.  It could look like this for your 3-array example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef unsigned type1;\ntypedef char     type2;\ntypedef double   type3;\n\n__global__ void mykernel(type1 *a, type2 *b, type3 *c) {\n\n  size_t stride = (size_t)gridDim.x * blockDim.x;\n  size_t idx = (size_t)blockIdx.x*blockDim.x+threadIdx.x;\n  a[7*stride+idx] = 4;    // \"local\"  access to a\n  b[0*stride+idx] = '0';  // \"local\"  access to b\n  c[3*stride+idx] = 1.0;  // \"local\"  access to c\n}\n\nint main(){\n  // 1D example\n  type1 *d_a;\n  type2 *d_b;\n  type3 *d_c;\n  // some arbitrary choices to be made at run-time\n  size_t alen = 27;\n  size_t blen = 55;\n  size_t clen = 99;\n  int nTPB = 256;\n  int nBLK = 768;\n  size_t grid = (size_t)nBLK*nTPB;\n  // allocate\n  cudaMalloc(&amp;d_a, alen*grid*sizeof(type1));\n  cudaMalloc(&amp;d_b, blen*grid*sizeof(type2));\n  cudaMalloc(&amp;d_c, clen*grid*sizeof(type3));\n  // launch\n  mykernel&lt;&lt;&lt;nBLK, nTPB&gt;&gt;&gt;(d_a, d_b, d_c);\n  cudaDeviceSynchronize();\n}\n</code></pre>\n\n<p>A possible criticism of this approach is that it arguably may consume more device memory than the local memory approach would (it might also consume less, depending on <a href=\"https://stackoverflow.com/questions/28810365/amount-of-local-memory-per-cuda-thread/28841385#28841385\">grid size relative to GPU type</a>).  However this could possibly be managed by limiting the grid size via an approach such as <a href=\"https://devblogs.nvidia.com/cuda-pro-tip-write-flexible-kernels-grid-stride-loops/\" rel=\"nofollow noreferrer\">grid-stride looping</a>.</p>\n\n<p><em>Shared Memory</em></p>\n\n<p>Since we only have one pointer to shared memory for dynamically allocated shared memory, if we do something with shared memory, we're going to have to pay careful attention to alignment.  Here is an example of the type of calculations that are needed to allocate and position properly aligned pointers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef unsigned type1;\ntypedef char     type2;\ntypedef double   type3;\n\n__global__ void mykernel(int b_round_up, int c_round_up) {\n\n  extern __shared__ char sdata[];\n  type1 *a = (type1 *)sdata;\n  type2 *b = (type2 *)(sdata + b_round_up);\n  type3 *c = (type3 *)(sdata + c_round_up);\n  size_t stride = blockDim.x;\n  size_t idx = threadIdx.x;\n  a[7*stride+idx] = 4;    // \"local\"  access to a\n  b[0*stride+idx] = '0';  // \"local\"  access to b\n  c[3*stride+idx] = 1.0;  // \"local\"  access to c\n}\n\nint main(){\n  // 1D example\n  // some arbitrary choices to be made at run-time\n  int alen = 9;\n  int blen = 5;\n  int clen = 9;\n  int nTPB = 256;\n  int nBLK = 1;\n  // calculate aligned shared mem offsets\n  int b_round_up = (((nTPB*alen*sizeof(type1) + sizeof(type2)-1)/sizeof(type2))*sizeof(type2)); // round up\n  int c_round_up = (((b_round_up + nTPB*blen*sizeof(type2) + sizeof(type3)-1)/sizeof(type3))*sizeof(type3)); // round up\n  // allocate + launch\n  mykernel&lt;&lt;&lt;nBLK, nTPB, c_round_up + nTPB*clen*sizeof(type3)&gt;&gt;&gt;(b_round_up,c_round_up);\n  cudaDeviceSynchronize();\n}\n</code></pre>\n\n<p>I'm not suggesting that any of my codes are defect-free, but you can see from the relative code complexity standpoint, that the Local or Global options would be preferred.  I'm not readily able to imagine reasons or cases where the shared memory implementation would be preferred.</p>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 0, "last_activity_date": 1560375027, "last_edit_date": 1560375027, "creation_date": 1560371977, "answer_id": 56570055, "question_id": 56564159, "link": "https://stackoverflow.com/questions/56564159/cuda-per-thread-arrays-with-different-types/56570055#56570055", "title": "CUDA per-thread arrays with different types", "body": "<blockquote>\n  <p>Each instance of my CUDA kernel (i.e. each thread)</p>\n</blockquote>\n\n<p>Threads are not instances of a kernel. Threads are part of a block, blocks form a grid, a grid runs a kernel function.</p>\n\n<blockquote>\n  <p>Each [thread] of my CUDA kernel needs three private arrays</p>\n</blockquote>\n\n<p>Does it though? I doubt it. I'm guessing your computational problem can be reformulated so that many threads cooperate and work on a single such triplet of arrays (or perhaps several such triplets).</p>\n\n<blockquote>\n  <p>It's then the task for each thread to work out which partition of the shared memory is its private memory space</p>\n</blockquote>\n\n<p>Not necessarily. Even if you insist on your 3 private arrays, you could place them in \"local memory\" (which is really just thread-private global memory). If each thread uses just a small amount of local memory, it might all fit in the L2 cache, which - while slower than shared memory optimally - sometimes makes sense for various reasons (e.g. shared memory bank conflicts). </p>\n\n<p>Alternatively, and in the case the overall size of your small arrays is <em>really</em> small, you could consider sticking them into registers. That means you can't use indexed access to them (which is a very constrictive condition), but registers are super fast and there are lots of them - more than the shared memory size, for example.</p>\n\n<p>Whatever you memory space you choose - always <em>measure</em>, and use the profiler to determine whether that's your bottleneck; whether it impacts occupancy, or effective use of the GPU cores' functional units and so on. And if you're not happy with what you get, try one of the other options.</p>\n\n<blockquote>\n  <p>I organise the shared memory array to have structure:</p>\n\n<pre><code>[ thread0_a, thread0_b, thread0_c,  thread1_a, ...]\n</code></pre>\n</blockquote>\n\n<p>Yeah...  that might not be a good choice. You see, shared memory is arranged in banks; and if your warp's lanes (threads in a warp) try to access data from the <em>same</em> bank, these access get serialized. For example, suppose the size of each array is a multiple of 128 bytes. If all threads in a warp start their work by accessing <code>a[0]</code> (which very often happens) - they will all be trying to access the <em>same</em> bank, and you'll get a 32x slowdown.</p>\n\n<p>If the lanes in a warp tend to access the same indices in the arrays, it is a better idea to <em>interlace</em> the arrays, i.e. use the following arrangement (using your way of illustrating it):</p>\n\n<pre><code>[ thread_0_a[0], thread_1_a[0], thread_2_a[0], ... thread_n_a[0], thread_0_a[1], ... ]\n</code></pre>\n\n<p>this also has the added benefit that all you need to know is the maximum length of a thread's private array, and the number of threads, to determine exactly where each thread's arrays start. On the other hand, it means you can \"pack\" less arrays than you otherwise might. But that's not too bad! Use fewer warps per block and you should still be ok.</p>\n\n<p>I should mention that @RobertCrovella 's answer makes a similar point.</p>\n\n<p><em>Caveat</em>: Note I did say <em>if</em> at the beginning of this part of the answer. It may be the case that the threads' access pattern is different. If it is, interlacing may not help you. Again it is probably a good idea to <em>profile and measure</em> to check.</p>\n\n<hr>\n\n<p>Since my answer has suggested a more far-reaching change (and since I don't have the time) I won't go into more specific details. Feel free to comment if I've been unclear somewhere.</p>\n"}], "owner": {"reputation": 4121, "user_id": 848292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ars6Y.png?s=128&g=1", "display_name": "Anti Earth", "link": "https://stackoverflow.com/users/848292/anti-earth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 56569457, "answer_count": 2, "score": 1, "last_activity_date": 1560377482, "creation_date": 1560348429, "last_edit_date": 1560349958, "question_id": 56564159, "link": "https://stackoverflow.com/questions/56564159/cuda-per-thread-arrays-with-different-types", "title": "CUDA per-thread arrays with different types", "body": "<p>Each instance of my CUDA kernel (i.e. each <em>thread</em>) needs three private arrays, with different types.</p>\n\n<p>e.g.</p>\n\n<pre><code>__global__ void mykernel() {\n    type1 a[aLen];\n    type2 b[bLen];\n    type3 c[cLen];\n\n    ...\n}\n</code></pre>\n\n<p>The sizes of these types are not known before compile-time, and the lengths <code>aLen</code>, <code>bLen</code> and <code>cLen</code> are dynamic.</p>\n\n<p>Of course I must allocate a single instance of shared memory for the entire block.</p>\n\n<pre><code>void caller() {\n    int threadsPerCUDABlock = ...\n    int CUDABlocks = ...\n\n    int threadMemSize = \n        aLen*sizeof(type1) + bLen*sizeof(type2) + cLen*sizeof(type3);\n\n    int blockMemSize = threadsPerCUDABlock * threadMemSize;\n\n    mykernel &lt;&lt;&lt; CUDABlocks, threadsPerCUDABlock, blockMemSize &gt;&gt;&gt;();\n}\n</code></pre>\n\n<p>It's then the task for each thread to work out which partition of the shared memory is its private memory space, and how to delimit that into the sub-arrays of the 3 types. In this instance, I organise the shared memory array to have structure:</p>\n\n<pre><code>[ thread0_a, thread0_b, thread0_c,  thread1_a, ...]\n</code></pre>\n\n<p>I'm unsure how best to approach unpacking this structure in the kernel.\nI've experimented with passing on the number of bytes of each thread's private space and initially assuming the memory space is a 1-byte type like <code>char</code>:</p>\n\n<pre><code>mykernel &lt;&lt;&lt; CUDABlocks, threadsPerCUDABlock, blockMemSize &gt;&gt;&gt;(threadMemSize);\n</code></pre>\n\n<pre><code>__global__ void mykernel(int threadMemSize) {\n\n    extern __shared__ char sharedMem[];\n\n    char* threadMem = &amp;sharedMem[threadMemSize*threadIdx.x]\n    type1 *a = (type1*) threadMem;\n    type2 *b = (type2*) &amp;a[aLen];\n    type3 *c = (type3*) &amp;b[bLen];\n\n    ...\n}\n</code></pre>\n\n<p>This hasn't worked (though without any errors, it's hard to debug), but I'm not convinced it should even work in principle. I can't guarantee for example that the size of types <code>type1</code>, <code>type2</code> and <code>type3</code> strictly decrease.</p>\n\n<p>So what is the correct paradigm for doing this in general? That is, the established way for unpacking multiple per-thread arrays of varying type and size?</p>\n"}, {"tags": ["c++", "binary"], "comments": [{"owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1560350918, "post_id": 56564068, "comment_id": 99709309, "body": "@500 - Internal Server Error, slightly different i believe because I&#39;m dealing with signed integers, not unsigned"}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560352279, "post_id": 56564068, "comment_id": 99710150, "body": "Any of the bitshift operations in the linked question will work for you. But you also have to consider that the different platforms possibly have different signed integer representations, not just in terms of endian-ness (although there&#39;s a pretty high chance that it&#39;s 2&#39;s complement)."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "is_accepted": false, "score": -1, "last_activity_date": 1560362000, "last_edit_date": 1560362000, "creation_date": 1560353839, "answer_id": 56565873, "question_id": 56564068, "link": "https://stackoverflow.com/questions/56564068/c-how-to-convert-32bit-data-into-signed-integers/56565873#56565873", "title": "C++: How to convert 32bit data into Signed Integers", "body": "<p>Alright guys, so this is how I ended up doing it. Hope it helps anyone who likes to take a similar approach. Basically, bit by bit:</p>\n\n<pre><code>int16_t decode16(const int8_t* x) {\n    std::bitset&lt;8&gt; firstbyte(x[0]);\n    if (firstbyte[7] == 0) { // if positive integer, than treat as normal\n        return int16_t(x[1] + x[0] * 0x100); \n    } else { // if negative integer, I assumed it's in Signed 2's Complement form (http://www.cs.umd.edu/~meesh/cmsc411/local-notes/numbers/node5.html)\n        std::bitset&lt;8&gt; secondbyte(x[1]);\n        std::bitset&lt;16&gt; tempset;\n        // first copy all the bytes into a 16bit long bitset\n        for (int i = 0; i &lt; 16; i++) {\n            if (i &lt; 8) {\n                tempset[i] = secondbyte[i];\n            } else {\n                tempset[i] = firstbyte[i-8];\n            }\n        }\n        tempset.flip(); // then flip all bits\n\n        // then add 1\n        for (int i = 0; i &lt; 16; i++) {\n            if (tempset[i] == 0) {\n                tempset[i] = 1;\n                for (int j = (i-1); j&gt;=0; j--) {\n                    tempset[j] = 0;\n                }\n                break;\n            }\n        }\n\n        int16_t answer = 0;\n        for (int i = 0; i &lt; 16; i++) {\n            int16_t multiplier = 1;\n            for (int j = 0; j&lt;i; j++) {\n                multiplier = multiplier*2;\n            }\n            answer = answer + tempset[i]*multiplier;\n        }\n        return answer*(-1);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "closed_date": 1560421256, "answer_count": 1, "score": 0, "last_activity_date": 1560362000, "creation_date": 1560348107, "last_edit_date": 1560361975, "question_id": 56564068, "link": "https://stackoverflow.com/questions/56564068/c-how-to-convert-32bit-data-into-signed-integers", "closed_reason": "Duplicate", "title": "C++: How to convert 32bit data into Signed Integers", "body": "<p>In my personal C++ library, I code to handle working on different endian systems (little or big) by working with individual bytes. For example, I calculate a 16bit unsigned integer as follows by using a pointer, that points to the beginning of the uint16 data, as a parameter for my function:</p>\n\n<pre><code>constexpr uint16_t decode16(const uint8_t* x) {\n    return uint16_t(x[1] + x[0] * 0x100);\n}\n</code></pre>\n\n<p>As it is, this function doesn't work for a 16bit signed integer's byte data, and so 0xFF is decoded into -257. <strong>Can somebody please teach me how to write a similar function for signed integers that works?</strong> 0xFF should get decoded into -1.</p>\n\n<p>Edit: This is my temporary solution which is a workaround for a little endian system, but won't be transportable onto a big endian system. What I'm looking for is how to code for both.</p>\n\n<pre><code>int16_t decode16(const int8_t* x) {\n    int8_t temp8[2];\n    temp8[0] = x[1];\n    temp8[1] = x[0];\n    int16_t temp16 = *(uint16_t *)&amp;temp8[0];\n    return temp16;\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "bind"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1560348095, "post_id": 56563947, "comment_id": 99707572, "body": "Why do you need a templatized <code>operator()</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1560348152, "post_id": 56563947, "comment_id": 99707606, "body": "why dont you want to use lambdas? You can always write a lamda as functor class, for more boilerplate and (almost) nothing in return"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1560348162, "post_id": 56563947, "comment_id": 99707615, "body": "It clearly tells you that you need to use <code>&amp;Comparator::operator()</code> as the first parameter to <code>std::bind</code>."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 3, "creation_date": 1560348289, "post_id": 56563947, "comment_id": 99707692, "body": "Why not just use <code>std::map&lt;int, int, Comparator&gt;</code>?  What&#39;s the point of the <code>bind</code> here?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1560348430, "post_id": 56563947, "comment_id": 99707792, "body": "FWIW, there is <a href=\"https://en.cppreference.com/w/cpp/utility/functional/less_void\" rel=\"nofollow noreferrer\"><code>std::less&lt;&gt;</code></a> which does just this."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560348624, "post_id": 56563947, "comment_id": 99707915, "body": "Notice that <code>std::binary_function</code> has been removed since C++17."}], "answers": [{"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1560348392, "post_id": 56564108, "comment_id": 99707763, "body": "You can directly initialize <code>predict</code> with <code>Comparator()</code>, and actually you don&#39;t need <code>predict</code> at all."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1560348561, "post_id": 56564108, "comment_id": 99707877, "body": "Does <code>std::bind</code> keep the ownership of temporary object <code>Comparator()</code> passed as the first argument?"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 1, "creation_date": 1560348597, "post_id": 56564108, "comment_id": 99707900, "body": "@BiagioFesta It stores its copy."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 1, "creation_date": 1560348609, "post_id": 56564108, "comment_id": 99707905, "body": "@BiagioFesta Yes, all parameters to <code>std::bind</code> are copied into the bind object."}, {"owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "edited": false, "score": 0, "creation_date": 1560348909, "post_id": 56564108, "comment_id": 99708112, "body": "Is any alternative without use decltype. I would like to port this code in C++98 compiler using boost"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1560348938, "post_id": 56564108, "comment_id": 99708136, "body": "How? there is no <code>std::bind</code> in Cpp98."}, {"owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "edited": false, "score": 0, "creation_date": 1560349023, "post_id": 56564108, "comment_id": 99708184, "body": "I will use the boost::bind and boost::function"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "reply_to_user": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "edited": false, "score": 0, "creation_date": 1560350109, "post_id": 56564108, "comment_id": 99708806, "body": "@getsoubl To be frank, I don&#39;t know if it is possible to work under C++98. But you don&#39;t need to use <code>bind</code> here at all, as was mentioned in comments you can just pass <code>Comparator</code> as 3rd param of <code>map</code> , and should work."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 2, "last_activity_date": 1560348236, "creation_date": 1560348236, "answer_id": 56564108, "question_id": 56563947, "link": "https://stackoverflow.com/questions/56563947/pass-a-operator-to-a-function-object/56564108#56564108", "title": "Pass a operator = to a function object", "body": "<p>After binding you get functor which takes 2 params (int,int), signature of function <code>std::function&lt;bool(Comparator&amp;,int const &amp;, int const &amp;)&gt;</code> is wrong - <code>Comparator</code> is redundant, try this:</p>\n\n<pre><code>    std::function&lt;bool(int const &amp;, int const &amp;)&gt; predict = \n       std::bind( Comparator(), std::placeholders::_1, std::placeholders::_2);\n\n     std::map&lt;int, int, decltype(predict)&gt; x{predict};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 2, "last_activity_date": 1560348810, "creation_date": 1560348810, "answer_id": 56564270, "question_id": 56563947, "link": "https://stackoverflow.com/questions/56563947/pass-a-operator-to-a-function-object/56564270#56564270", "title": "Pass a operator = to a function object", "body": "<p>You don't need to use <code>std::bind</code> or a lambda here.  <code>Comparator</code> is a perfectly valid comparator, so you can just declare <code>x</code> as:</p>\n\n<pre><code>std::map&lt;int, int, Comparator&gt; x;\n</code></pre>\n\n<p>If your actual <code>Comparator</code> has some state that you need to initialize, you can pass a <code>Comparator</code> object to <code>std::map</code>'s constructor:</p>\n\n<pre><code>Comparator cmp{some, constructor, args};\nstd::map&lt;int, int, Comparator&gt; x{cmp};\n</code></pre>\n"}], "owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56564270, "answer_count": 2, "score": 1, "last_activity_date": 1560348810, "creation_date": 1560347794, "question_id": 56563947, "link": "https://stackoverflow.com/questions/56563947/pass-a-operator-to-a-function-object", "title": "Pass a operator = to a function object", "body": "<p>I try to pass a  bind an operator () with a function object. Then I would like to use this function object as a custom comparator in a map that I declare. But I get the following compile error</p>\n\n<blockquote>\n  <p>error C3867: 'Comparator::operator ()': non-standard syntax; use '&amp;'\n  to create a pointer to member\n  1>\n  error C2672: 'std::bind': no matching overloaded function found</p>\n  \n  <p>error C2923: 'std::map': 'predict' is not a valid template type\n  argument for parameter '_Pr'</p>\n</blockquote>\n\n<p>I do not want to use lamda expressions</p>\n\n<p>The code that I have written is the following</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\nstruct Comparator : std::binary_function&lt;int const &amp;, int const &amp;, bool&gt;\n{\n    template&lt;typename T&gt;\n    bool operator()(T const &amp; a, T const &amp; b)\n    {\n        return a &lt; b;\n    }\n};\nint main()\n{\n\n    std::cout &lt;&lt; \"Hello World!\\n\"; \n    std::function&lt;bool(Comparator&amp;,int const &amp;, int const &amp;)&gt; predict = \n    std::bind(Comparator::operator(), std::placeholders::_1, \n     std::placeholders::_2);\n    std::map&lt;int, int, predict&gt; x;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "math"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1560348192, "post_id": 56563902, "comment_id": 99707627, "body": "I assume on your platform an <code>int</code> is sufficiently large to hold 1,000,000,000,000,000,000."}, {"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1560348811, "post_id": 56563902, "comment_id": 99708059, "body": "i tried with long long also, but this naive approach is taking too much time"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 3, "creation_date": 1560349827, "post_id": 56563902, "comment_id": 99708654, "body": "Duplicate: <a href=\"https://stackoverflow.com/questions/56522649/algorithm-for-computing-round-integers\" title=\"algorithm for computing round integers\">stackoverflow.com/questions/56522649/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1560358957, "post_id": 56563902, "comment_id": 99713574, "body": "When manipulating digits of a number (or reading them), treat the number as a string.  You can fetch a digit with: <code>int digit = number_as_text[i] - &#39;0&#39;;</code>.  This may be more efficient than using division or remainder to extract the digits."}, {"owner": {"reputation": 54369, "user_id": 8221725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtaKm.jpg?s=128&g=1", "display_name": "dustbuster", "link": "https://stackoverflow.com/users/8221725/dustbuster"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1560453156, "post_id": 56563902, "comment_id": 99752229, "body": "The duplicate algorithm-for-computing-round-integers has a -6 and it&#39;s on hold @Damien"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "reply_to_user": {"reputation": 54369, "user_id": 8221725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtaKm.jpg?s=128&g=1", "display_name": "dustbuster", "link": "https://stackoverflow.com/users/8221725/dustbuster"}, "edited": false, "score": 1, "creation_date": 1560454117, "post_id": 56563902, "comment_id": 99752633, "body": "@dustbuster I know. At least I wanted to let people look at the answer there. It is clear that there is a risk that this duplicate question will be deleted. I don&#39;t know which position to adopt in such a situation. I noticed that the question here was not put on hold, despite the duplicate"}, {"owner": {"reputation": 54369, "user_id": 8221725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtaKm.jpg?s=128&g=1", "display_name": "dustbuster", "link": "https://stackoverflow.com/users/8221725/dustbuster"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 1, "creation_date": 1560454588, "post_id": 56563902, "comment_id": 99752833, "body": "@Damien Yes it&#39;s surely worth looking at. I don&#39;t think this question is likely to get voted down on dupe status though. I did not vote to remove this question, and that&#39;s how I wound up here. I suggest the author make this a more viable question than the other."}], "answers": [{"comments": [{"owner": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 2, "creation_date": 1560348160, "post_id": 56564032, "comment_id": 99707614, "body": "This should be a comment."}, {"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560348187, "post_id": 56564032, "comment_id": 99707625, "body": "i have tried this also, but the solution is not working fine."}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "reply_to_user": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 1, "creation_date": 1560348315, "post_id": 56564032, "comment_id": 99707709, "body": "@vivek_23 as the request was specifically not to post a complete solution, I don&#39;t think a more detailed answer is possible."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 0, "creation_date": 1560348328, "post_id": 56564032, "comment_id": 99707714, "body": "@vivek_23 Nope, this is a valid answer. Giving the details of such a patterns is giving too much help and anything less is no answer."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560348368, "post_id": 56564032, "comment_id": 99707749, "body": "@NitinSinghal Then obviously, you made some error(s). Try to avoid those and you will succeed!"}, {"owner": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 1, "creation_date": 1560348475, "post_id": 56564032, "comment_id": 99707827, "body": "@Bal&#225;zsKovacsics OP does ask <code>Please don&#39;t paste the whole solution I just want the approach to solve this.</code>. So you could show the pattern if you know."}, {"owner": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1560348505, "post_id": 56564032, "comment_id": 99707843, "body": "@Walter OP does ask for a pattern/approach but not the code."}, {"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560348642, "post_id": 56564032, "comment_id": 99707927, "body": "just give me some pattern hint at least, I already know this there&#39;s some pattern."}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560348762, "post_id": 56564032, "comment_id": 99708019, "body": "The second solution you posted only works until 190, because 199 doesn&#39;t satisfy the condition."}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560348808, "post_id": 56564032, "comment_id": 99708053, "body": "You have to consider separately cases where the sum of digits is 10, 20, 30, etc. They are in different series."}], "tags": [], "owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "is_accepted": false, "score": 2, "last_activity_date": 1560348014, "creation_date": 1560348014, "answer_id": 56564032, "question_id": 56563902, "link": "https://stackoverflow.com/questions/56563902/find-the-n-th-smallest-round-integer/56564032#56564032", "title": "Find the N-th smallest round integer", "body": "<p>Try to find some pattern in the numbers that fulfil this condition, and you can find a more efficient solution than just iterating over every number.</p>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 2, "last_activity_date": 1560350501, "last_edit_date": 1560350501, "creation_date": 1560350046, "answer_id": 56564686, "question_id": 56563902, "link": "https://stackoverflow.com/questions/56563902/find-the-n-th-smallest-round-integer/56564686#56564686", "title": "Find the N-th smallest round integer", "body": "<p>If you look at the numbers satisfying this criterion</p>\n\n<p>19, 28 ... 91, 109, 118 ... 190, 208, 217 ... 280, 299, 307 ... 370, 389, 398, 406 ... 460, 479 ... 497, 505 ... 550, 569 ... 596, 604 ... 640, 659 ... 695, 703 ... 730, 749 ... 794, 802 ... 820, 839 ... 893, 901, 910, 929 ... 992, 1009 ...</p>\n\n<p>you see that the distance between adjacent round numbers is most often 9 (whenever I printed '...' above). However, there are bigger (e.g. between 280 and 299) and smaller gaps (e.g. between 794 and 802). A close inspection reveals that the number <code>N(k)</code> of round numbers less than <code>k</code> satisfies:</p>\n\n<pre><code>N(100)   = 9;\nN(1000)  = 99;\nN(10000) = 999; etc.\n</code></pre>\n\n<p>You may want to verify this and find a pattern for arbitrary large numbers. Then you can use that result to find the inverse, i.e. <code>k(N)</code>, which is your answer, in at most <code>log(N)</code> steps.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560413137, "post_id": 56564971, "comment_id": 99729966, "body": "I have tried this approach also. Above is the code snippet. But this solution is also not correct."}, {"owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "reply_to_user": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560426458, "post_id": 56564971, "comment_id": 99737282, "body": "You need to create some test cases and run your code on them to see which cases your code fails."}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560439138, "post_id": 56564971, "comment_id": 99745485, "body": "You have integer overflows in multiple places."}, {"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "reply_to_user": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560487035, "post_id": 56564971, "comment_id": 99760033, "body": "Can you please suggest some case where it is failed. I have tried a lot, but i&#39;m not getting it.  @Bal&#225;zsKovacsics"}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1560501916, "post_id": 56564971, "comment_id": 99765625, "body": "In your code, <code>n</code> has a type of <code>int</code>, but it should be able to hold a number as high as 10^18, which only fits in a 64-bit integer (<code>long</code> or <code>long long</code>, depending on the platform)"}, {"owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "edited": false, "score": 0, "creation_date": 1560504604, "post_id": 56564971, "comment_id": 99767009, "body": "The solution was correct, only the problem is of range. Thanks"}], "tags": [], "owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "is_accepted": false, "score": 3, "last_activity_date": 1560446294, "last_edit_date": 1560446294, "creation_date": 1560350884, "answer_id": 56564971, "question_id": 56563902, "link": "https://stackoverflow.com/questions/56563902/find-the-n-th-smallest-round-integer/56564971#56564971", "title": "Find the N-th smallest round integer", "body": "<p>One important hint: If the first <code>n-1</code> digits of an <code>n</code>-digit integer are fixed, there exists exactly one digit that can be used as the last digit to satisfy the condition. In other words, there is exactly one integer that satisfies the required condition in every 10 integers (starting from 10). Based on this there is a very simple solution to the problem that generates the answer directly rather than enumerating integers one by one and verifying the condition.</p>\n"}], "owner": {"reputation": 43, "user_id": 7921279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65a07639de8f1ed2310adf8baddc847?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Singhal", "link": "https://stackoverflow.com/users/7921279/nitin-singhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1560446294, "creation_date": 1560347653, "last_edit_date": 1560407430, "question_id": 56563902, "link": "https://stackoverflow.com/questions/56563902/find-the-n-th-smallest-round-integer", "title": "Find the N-th smallest round integer", "body": "<p>An integer is round if it is greater than 0 and the sum of its digits in decimal representation is a multiple of 10.Find the N-th smallest round integer.</p>\n\n<p>1\u2264N\u226410^18</p>\n\n<p>I have tried the naive approach, but the solution is not working fine for large constraint.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt; \n using namespace std; \n\n int sumOfDigits(int n) \n { \n  int sum = 0; \n  while (n &gt; 0) { \n    sum += n % 10; \n    n /= 10; \n   } \n\n    return sum; \n } \n\n int findNum(int n) \n { \n   int c=0, num=0;\n\n    while (c != n) { \n    num++; \n    int sum = sumOfDigits(num); \n    if (sum % 10 == 0) \n        c++; \n } \n\n  return num; \n } \n\n int main() \n{ \n int t, n;\n cin&gt;&gt;t;\n while(t--){\n    cin&gt;&gt;n;\n    cout&lt;&lt;findNum(n)&lt;&lt;endl;\n }\n } \n</code></pre>\n\n<p>Is there any good approach to solve this problem. Please don't paste the whole solution I just want the approach to solve this.</p>\n\n<p>I have tried another approach also..but the solution is not working fine. </p>\n\n<pre><code>  public static long findNth(int n) \n  { \n    long nthElement = 19 + (n - 1) * 9; \n    int outliersCount = (int)Math.log10(nthElement) - 1; \n\n    nthElement += 9 * outliersCount; \n    return nthElement; \n  } \n</code></pre>\n\n<p>There will series form: 19, 28, 37, 46, 55, 64.....but remember to remove 100, 1000...so on.</p>\n\n<p>Considering this I have tried the solution above but it's not working. </p>\n\n<p>I'm using one of the approaches answered. But this is not working fine too..</p>\n\n<pre><code>int sumOfDigits(int n) \n{ \nint sum = 0; \nwhile (n &gt; 0) { \n    sum += n % 10; \n    n /= 10; \n} \nif(sum%10==0) return 0;\nelse if(sum&lt;10) return 10-sum;\nreturn 10-sum%10;\n} \n\nlong long findNum(int n) \n{ \nreturn n*10+sumOfDigits(n);\n} \n</code></pre>\n"}, {"tags": ["c++", "bit"], "comments": [{"owner": {"reputation": 49387, "user_id": 1428679, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3eba7f8f9195a30d49bdbbdd594b1e4?s=128&d=identicon&r=PG", "display_name": "LSerni", "link": "https://stackoverflow.com/users/1428679/lserni"}, "edited": false, "score": 0, "creation_date": 1560347588, "post_id": 56563836, "comment_id": 99707211, "body": "i&lt;&lt;32 is probably 1 again, as the variable &quot;rolls over&quot;. Try printing out 1&lt;&lt;32 and check what happens."}, {"owner": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "edited": false, "score": 2, "creation_date": 1560347599, "post_id": 56563836, "comment_id": 99707220, "body": "Try starting the loop from 31 instead of 32."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1560347611, "post_id": 56563836, "comment_id": 99707225, "body": "You are printing 33 bits. From 32 to 0 inclusively."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1560347667, "post_id": 56563836, "comment_id": 99707262, "body": "Shifting by <code>&gt;=</code> the number of bits in the int is undefined behavior."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1560347771, "post_id": 56563836, "comment_id": 99707346, "body": "Perhaps it&#39;s a machine with 32-bit <code>int</code>?  If so, <code>1&lt;&lt;32</code> causes Undefined Behaviour.  Try using a different type (e.g. <code>std::uint_fast64_t</code>)."}, {"owner": {"reputation": 1, "user_id": 11637213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad9bf51c3a8a1b15bcbf19f6eeac15f?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/11637213/user123"}, "edited": false, "score": 0, "creation_date": 1560347857, "post_id": 56563836, "comment_id": 99707395, "body": "in one what we call to first set bit ,is it 0 or 1 ,I am confused here because 2^0 is 1 so what we should call it as 0th bit or first bit ."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1560347925, "post_id": 56563836, "comment_id": 99707436, "body": "its the 1st bit with index <code>0</code>. Indexing always starts at <code>0</code>, such that the n-th element has index <code>n-1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1560347687, "creation_date": 1560347687, "answer_id": 56563916, "question_id": 56563836, "link": "https://stackoverflow.com/questions/56563836/showing-32th-bit-of-1-as-set/56563916#56563916", "title": "showing 32th bit of 1 as set", "body": "<p>32 till 0 both inclusive are 33 bits in total, you are off by one here:</p>\n\n<pre><code>for(int i=32;i&gt;=0;i--){\n     if(n&amp;(1&lt;&lt;i)) ans++;\n     std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>I added a <code>cout</code> that lets you verify that. Instead you should start the loop at 31, ie</p>\n\n<pre><code>for(int i=31;i&gt;=0;i--){\n</code></pre>\n\n<p>Note that <a href=\"https://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a> comes extremely handy whenever you care about the bit-representation of numbers.</p>\n\n<p>PS: Actually I wonder why you have the loop reversed. This kind of problems are less likely when you write the more common <code>for (int i=0;i&lt;32;++i)</code> </p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 11484423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYonn.jpg?s=128&g=1", "display_name": "05032 Mendicant Bias", "link": "https://stackoverflow.com/users/11484423/05032-mendicant-bias"}, "is_accepted": false, "score": 0, "last_activity_date": 1560347938, "creation_date": 1560347938, "answer_id": 56564004, "question_id": 56563836, "link": "https://stackoverflow.com/questions/56563836/showing-32th-bit-of-1-as-set/56564004#56564004", "title": "showing 32th bit of 1 as set", "body": "<p>The problem is in the first iteration. You shift the number 1 by 32 bits, which on my machine results in a 1. Since int are probably 32 bit, that's not defined behavior.</p>\n\n<pre><code>if(n&amp;(1&lt;&lt;32)!=0)\n</code></pre>\n\n<p>The fix is to start your for from 31.</p>\n\n<pre><code>for(int i=31;i&gt;=0;i--)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11637213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad9bf51c3a8a1b15bcbf19f6eeac15f?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/11637213/user123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560347938, "creation_date": 1560347449, "question_id": 56563836, "link": "https://stackoverflow.com/questions/56563836/showing-32th-bit-of-1-as-set", "title": "showing 32th bit of 1 as set", "body": "<p>when i was counting the number of set bits in a number, i gave input as 1\nand found ans was 2,\nwhen i debug the program the 32 bit was set,how can it be possible?\nBecause only first bit is set in 1</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n\nint main() {\n    int t;\n    cin&gt;&gt;t;\n    while(t--){\n        int n;\n        cin&gt;&gt;n;\n        int ans = 0;\n        for(int i=32;i&gt;=0;i--){\n            if(n&amp;(1&lt;&lt;i))\n               ans++;\n        }\n        cout&lt;&lt;ans&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "pragma", "precompiled-headers"], "comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 1, "creation_date": 1560347238, "post_id": 56563679, "comment_id": 99707000, "body": "What version of <code>g++</code> are you using? Have you found <a href=\"https://stackoverflow.com/questions/23135538/remove-pragma-once-warnings\">this post</a>"}, {"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "reply_to_user": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1560348040, "post_id": 56563679, "comment_id": 99707527, "body": "I tried with g++-5 to g++-9 and they all produce the warning."}], "answers": [{"comments": [{"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1599040090, "post_id": 56563878, "comment_id": 112647595, "body": "Also related: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=89808\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=89808</a>"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1560347569, "creation_date": 1560347569, "answer_id": 56563878, "question_id": 56563679, "link": "https://stackoverflow.com/questions/56563679/gcc-precompiled-header-pragma-once-in-main-file/56563878#56563878", "title": "gcc precompiled header: pragma once in main file", "body": "<p>You're not doing anything wrong; this is a quality of implementation issue that <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64117#c0\" rel=\"noreferrer\">has been mentioned on the issue tracker before</a> (but, to my knowledge, there are currently no plans to change the behaviour).</p>\n\n<p>In Clang, you could turn off the warning for that particular compiler invocation (with <code>-Wno-pragma-once-outside-header</code>); in GCC you'll just have to grin and bear it for now.</p>\n"}, {"tags": [], "owner": {"reputation": 1624, "user_id": 54013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4b23013c4d06e7fd92892232d60e5b6?s=128&d=identicon&r=PG", "display_name": "Johan Boul&#233;", "link": "https://stackoverflow.com/users/54013/johan-boul%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1615586215, "creation_date": 1615586215, "answer_id": 66607739, "question_id": 56563679, "link": "https://stackoverflow.com/questions/56563679/gcc-precompiled-header-pragma-once-in-main-file/66607739#66607739", "title": "gcc precompiled header: pragma once in main file", "body": "<p>The main source file used to generate a precompiled header is usually a made-up &quot;indirect&quot; header that contains only a bunch of #include for all the actual real headers you want to precompile.\nWhen you use the machinery this way, there is no need for a #pragma once (nor guard) in the main file, and hence it works as intended with no warning.</p>\n"}], "owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2640, "favorite_count": 1, "accepted_answer_id": 56563878, "answer_count": 2, "score": 9, "last_activity_date": 1615586215, "creation_date": 1560346936, "last_edit_date": 1560347085, "question_id": 56563679, "link": "https://stackoverflow.com/questions/56563679/gcc-precompiled-header-pragma-once-in-main-file", "title": "gcc precompiled header: pragma once in main file", "body": "<p>I created a header file. Something simple as follows.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nvoid say(T t) {\n    std::cout &lt;&lt; t &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and then use <code>g++</code> to create the <code>gch</code> pre-compiled header with <code>g++ hello.h</code>. It gives me this warning -></p>\n\n<pre><code>pch.h:2:9: warning: #pragma once in main file\n    2 | #pragma once\n      |         ^~~~\n</code></pre>\n\n<p>But the <code>gch</code> file created and the pre-compiled header works fine. This error goes away if I use header guards. </p>\n\n<p>Am I doing something wrong here?</p>\n"}, {"tags": ["c++", "computer-vision", "point-cloud-library", "flann"], "owner": {"reputation": 58, "user_id": 11504491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d6b756109d99ba90529922dfa7f11b?s=128&d=identicon&r=PG&f=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/11504491/elias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560349043, "creation_date": 1560346330, "last_edit_date": 1560349043, "question_id": 56563487, "link": "https://stackoverflow.com/questions/56563487/what-distance-measure-should-i-use-to-match-rift-descriptors", "title": "What distance measure should I use to match RIFT descriptors?", "body": "<p>I'm currently trying to find the nearest neighbours (NNs) of a point in its feature space, using the FLANN module from PCL library.</p>\n\n<p>The points that I'm trying to compare are RIFT descriptors, in the form of <code>pcl::Histogram&lt;32&gt;</code>, as I use 4 bins for the distance and 8 for the gradient (like in the original article).<br>\nI'm wondering what distance measure should I use, as the default one is the L2 norm, which seems kind of weak when matching points in a high dimensionnal feature space.<br>\nI use the <code>KdTreeMultiIndexCreator</code> index of FLANN to speed-up the search. </p>\n\n<p>I'm bound to use the flann module as below:  </p>\n\n<pre><code>// Useful types\ntypedef pcl::Histogram&lt;32&gt; FeatureT;\ntypedef flann::L2&lt;float&gt; DistanceT;\ntypedef pcl::search::FlannSearch&lt;FeatureT, DistanceT&gt; SearchT;\ntypedef typename SearchT::FlannIndexCreatorPtr CreatorPtrT;\ntypedef typename SearchT::KdTreeMultiIndexCreator IndexT;\ntypedef typename SearchT::PointRepresentationPtr RepresentationPtrT;\n// Instantiate search object with 4 randomized trees and 128 checks\nSearchT search (true, CreatorPtrT (new IndexT (4)));\nsearch.setPointRepresentation (RepresentationPtrT (new DefaultFeatureRepresentation&lt;FeatureT&gt;));\nsearch.setChecks (128); // The more checks the more precise the solution\n// search_cloud is filled with the keypoints to match\nsearch.setInputCloud (search_cloud);\nsearch.nearestKSearch(point_to_match, 1, indices, distances);\n</code></pre>\n\n<p>So, what is the best distance measure available in FLANN to fit my problem ?</p>\n"}, {"tags": ["c++", "generics"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1560347655, "post_id": 56563419, "comment_id": 99707252, "body": "Not relevant for this example, but beware that <code>Derived var</code> will not behave polymorphically (it will not do virtual method calls but resolve them at compile-time based on the static type) - you would need a pointer or reference for that."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 5, "last_activity_date": 1560346324, "creation_date": 1560346324, "answer_id": 56563482, "question_id": 56563419, "link": "https://stackoverflow.com/questions/56563419/how-can-i-call-parent-class-overloaded-function-from-derived-class-instance/56563482#56563482", "title": "How can I call parent class overloaded function from derived class instance?", "body": "<p>The name <code>some_function</code> in <code>Derived</code> hides the name <code>some_function</code> inherited from <code>Base</code>. You have to bring it back into scope with a <code>using</code> declaration:</p>\n\n<pre><code>class Derived final: public Base&lt;int&gt; {\npublic:\n    using Base&lt;int&gt;::some_function;\n    int some_function() {\n    // some code\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11636475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/846bb80a9696ed0590e2fa59d08ee99e?s=128&d=identicon&r=PG&f=1", "display_name": "theHoatzin", "link": "https://stackoverflow.com/users/11636475/thehoatzin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56563482, "answer_count": 1, "score": 2, "last_activity_date": 1560346324, "creation_date": 1560346119, "question_id": 56563419, "link": "https://stackoverflow.com/questions/56563419/how-can-i-call-parent-class-overloaded-function-from-derived-class-instance", "title": "How can I call parent class overloaded function from derived class instance?", "body": "<p>I have a base class with an implemented function and a pure virtual function which share a name, but not arguments. I can't call the function implemented in the base class from an instance of the derived class.</p>\n\n<p>I've tried adding the function to the derived class instead of the base class and it works, but that would mean I have to add the function to every derived class instead of implementing it once in the base class.\nI've also tried changing the functions name and it works. It seems to be due to a collision between the two overloaded functions.</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Base {\npublic:\n    virtual T some_function(int x) = 0;\n    T some_function() {\n    // some code\n    }\n}\n\nclass Derived final: public Base&lt;int&gt; {\n    int some_function() {\n    // some code\n    }\n}\n\nint main() {\n    Derived var = Derived();\n    var.some_function(3);// Compilation error\n} \n</code></pre>\n\n<p>The above code does not compile indicating that it doesn't find the function: some_function(int).</p>\n"}, {"tags": ["c++", "string", "special-characters"], "comments": [{"owner": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "edited": false, "score": 3, "creation_date": 1560345373, "post_id": 56563123, "comment_id": 99705789, "body": "The 4th group hasn&#39;t changed <code>numString[2]</code>. This only happens in the 5th group"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1560345411, "post_id": 56563123, "comment_id": 99705813, "body": "Cannot reproduce the output: <a href=\"https://godbolt.org/z/P3uo62\" rel=\"nofollow noreferrer\">godbolt</a>. (The second line)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1560345453, "post_id": 56563123, "comment_id": 99705843, "body": "Not sure if output of <code>\\n</code> would override displayed char."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1560345663, "post_id": 56563123, "comment_id": 99705972, "body": "Also note that on most consoles, <code>\\b</code> is a non-destructive backspace."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1560345686, "post_id": 56563123, "comment_id": 99705979, "body": "The actual output is not very clear in regards to your &quot;groups&quot;. Perhaps a second newline at the end of the string would make it clearer? Or printing a header, like <code>std::cout &lt;&lt; &quot;\\nGroup X\\n&quot; &lt;&lt; numString;</code> (where you replace <code>X</code> with the &quot;group&quot; number)."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1560345733, "post_id": 56563123, "comment_id": 99706005, "body": "Add some lines like &quot;std::cout &lt;&lt; &quot;this is group 4\\n&quot;; and you&#39;ll see :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "edited": false, "score": 0, "creation_date": 1560346259, "post_id": 56563123, "comment_id": 99706358, "body": "@DSC: <code>numString[3]</code> is <code>&#39;\\b&#39;</code> which the OP expects to effectively hide or erase <code>numString[2]</code> in the console output."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1560346263, "post_id": 56563123, "comment_id": 99706361, "body": "What @MartinV&#233;ronneau is saying is that backspace only moves the cursor, it doesn&#39;t actually overwrite or erase anything."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 11636824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144bfadf13c587baff2978c0a24ece4b?s=128&d=identicon&r=PG&f=1", "display_name": "Shaun Yu", "link": "https://stackoverflow.com/users/11636824/shaun-yu"}, "edited": false, "score": 0, "creation_date": 1560349674, "post_id": 56563562, "comment_id": 99708557, "body": "Thank you for answering me the question in such as detailed way!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 73, "user_id": 11636824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144bfadf13c587baff2978c0a24ece4b?s=128&d=identicon&r=PG&f=1", "display_name": "Shaun Yu", "link": "https://stackoverflow.com/users/11636824/shaun-yu"}, "edited": false, "score": 0, "creation_date": 1560349784, "post_id": 56563562, "comment_id": 99708627, "body": "@ShaunYu No problem it was kinda fun :D"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 9, "last_activity_date": 1560349219, "last_edit_date": 1560349219, "creation_date": 1560346555, "answer_id": 56563562, "question_id": 56563123, "link": "https://stackoverflow.com/questions/56563123/cant-understand-the-output-of-c-string-with-special-characters/56563562#56563562", "title": "Can&#39;t understand the output of C++ string with special characters", "body": "<p>This comes down to your terminal. We can see easily from a platform that doesn't render the control character <code>'\\b'</code> in any special way that <a href=\"https://coliru.stacked-crooked.com/a/0142bdbcf092a5db\" rel=\"noreferrer\">it's present in the string at the expected location</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xqWoi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xqWoi.png\" alt=\"Screenshot of some &quot;raw&quot;-ish output via Coliru\"></a></p>\n\n<p>So, why doesn't it \"erase\" the <code>2</code>?</p>\n\n<p>If we open up cmd.exe and type in <kbd>A</kbd>, <kbd>B</kbd>, <kbd>Ctrl</kbd>+<kbd>H</kbd> then we see the <code>B</code> is immediately erased. This would seem to disprove the notion that cmd.exe handles backspace \"non-destructively\" <a href=\"https://unix.stackexchange.com/q/371903/66358\">as many consoles do</a>.</p>\n\n<p>But it doesn't disprove it! This seems to be a special handling for keystrokes, presumably tied into how the actual backspace character works. After all, you want the backspace character to actually erase things, rather than just moving the cursor.</p>\n\n<p>cmd.exe treats the control character differently when found in output not generated by the keyboard: in a non-destructive fashion. So it moves the cursor backwards then the next character \"overwrites\" the would-be erased character.</p>\n\n<p>But in group 4, you have a newline, so the next character goes on the next line and is not in the right place to erase anything.</p>\n\n<p>We can reproduce this without C++, by constructing a special file then instructing cmd.exe to print it:</p>\n\n<p><strong>\"Working\"</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/DskJ1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DskJ1.png\" alt=\"Screenshot of non-reproducing file contents\"></a> <a href=\"https://i.stack.imgur.com/5nEjR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5nEjR.png\" alt=\"Screenshot of non-reproduced problem\"></a></p>\n\n<p><strong>\"Not working\"</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/XSHuS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XSHuS.png\" alt=\"Screenshot of reproducing file contents\"></a> <a href=\"https://i.stack.imgur.com/Iby7J.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Iby7J.png\" alt=\"Screenshot of reproduced problem\"></a></p>\n\n<p><em>(You can insert the special character ASCII 08 in Notepad++, using the \"Edit\"/\"Character Panel\" menu item.)</em></p>\n\n<p>My conclusion is not to rely on control codes for such \"tricks\": if you want to remove a character from a string, actually do so; if you want to create a GUI, either actually do so, or simulate one with a clever library like <em>ncurses</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 11636824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144bfadf13c587baff2978c0a24ece4b?s=128&d=identicon&r=PG&f=1", "display_name": "Shaun Yu", "link": "https://stackoverflow.com/users/11636824/shaun-yu"}, "edited": false, "score": 1, "creation_date": 1560430169, "post_id": 56565190, "comment_id": 99739522, "body": "Thank you zar for telling the truth of these control characters and helping me understand the problem thoroughly."}], "tags": [], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "is_accepted": true, "score": 3, "last_activity_date": 1560396896, "last_edit_date": 1560396896, "creation_date": 1560351586, "answer_id": 56565190, "question_id": 56563123, "link": "https://stackoverflow.com/questions/56563123/cant-understand-the-output-of-c-string-with-special-characters/56565190#56565190", "title": "Can&#39;t understand the output of C++ string with special characters", "body": "<p>What the console is showing is the correct output, that is </p>\n\n<pre><code>Group 4 output:\n012\n56789\n</code></pre>\n\n<p>You are mistaken to expect</p>\n\n<pre><code>Group 4 output:\n01\n56789\n</code></pre>\n\n<p>What <code>\\b</code> character does is move the cursor one character back, it does <em>not</em> delete it. So what has happened is the cursor is moved back to 2 but the character is still there. </p>\n\n<pre><code>012\n  ^\n</code></pre>\n\n<p>The next character <code>\\n</code> is not a printable character but a control character and it just moves the cursor to the next line so it doesn't overwrite that character which was already printed.</p>\n\n<p>If you do this instead:</p>\n\n<pre><code>//This is group 4\nnumString[3] = '\\b';\nnumString[4] = 'X';\ncout &lt;&lt; \"Group 4 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n</code></pre>\n\n<p>Now <code>\\b</code> moves to 2 but the next character 'X' immediately <em>overwrites</em> it yielding the following result as expected.</p>\n\n<pre><code>Group 4 output:\n01X56789\n</code></pre>\n\n<p>Another demonstration is even if you add another backspace:</p>\n\n<pre><code>numString[3] = '\\b';\nnumString[4] = '\\b';\nnumString[5] = '\\n';\n</code></pre>\n\n<p>The cursor is now at 1</p>\n\n<pre><code>012\n ^\n</code></pre>\n\n<p>Now it encounters the <code>\\n</code> (new line) as next character and it simply moves the cursor to the next line so 1 and 2 are never overwritten as they were already printed and remains now in the <em>previous</em> line.</p>\n\n<p>The output hence now is, as expected:</p>\n\n<pre><code>Group 4 output:\n012\n6789\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/6792812/the-backspace-escape-character-b-unexpected-behavior\">this</a> and <a href=\"https://stackoverflow.com/questions/12765297/erasing-using-backspace-control-character\">that</a></p>\n"}], "owner": {"reputation": 73, "user_id": 11636824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144bfadf13c587baff2978c0a24ece4b?s=128&d=identicon&r=PG&f=1", "display_name": "Shaun Yu", "link": "https://stackoverflow.com/users/11636824/shaun-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 56565190, "answer_count": 2, "score": 7, "last_activity_date": 1595958030, "creation_date": 1560345170, "last_edit_date": 1560369806, "question_id": 56563123, "link": "https://stackoverflow.com/questions/56563123/cant-understand-the-output-of-c-string-with-special-characters", "title": "Can&#39;t understand the output of C++ string with special characters", "body": "<p>I'm using c++ string with special characters for console output. Most of the results can be predicted, but one of them fell out of my expectation. I could not find answers anywhere.</p>\n\n<p>Platform:\nWindows 7 Enterprise Version 6.1 (Build 7601: Service Pack 1)\nCompiler:\ng++ (GCC) 8.2.0, c++17</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n    using namespace std;\n    char numString[12] = \"0123456789\\n\";\n\n    //This is group 1\n    numString[3] = '\\t';\n    numString[4] = '\\b';\n    cout &lt;&lt; \"Group 1 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 2\n    numString[3] = '\\b';\n    numString[4] = '\\t';\n    cout &lt;&lt; \"Group 2 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 3\n    numString[3] = '\\n';\n    numString[4] = '\\b';\n    cout &lt;&lt; \"Group 3 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 4\n    numString[3] = '\\b';\n    numString[4] = '\\n';\n    cout &lt;&lt; \"Group 4 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 5\n    numString[2] = '\\b';\n    numString[3] = '\\b';\n    numString[4] = '\\n';\n    cout &lt;&lt; \"Group 5 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The output in console:</p>\n\n<pre>\nGroup 1 output:\n01256789\n\nGroup 2 output:\n01      56789\n\nGroup 3 output:\n012\n56789\n\nGroup 4 output:\n012\n56789\n\nGroup 5 output:\n01\n56789\n</pre>\n\n<p>The 4th group output is expected as,</p>\n\n<pre>\nGroup 4 output:\n01\n56789\n\n</pre>\n\n<p>while the output actually is,</p>\n\n<pre>\nGroup 4 output:\n012\n56789\n</pre>\n\n<p>What I can't understand is why the character '2' is still there.</p>\n\n<p>Anyone could please help me understand the problem?\nThank you.</p>\n\n<hr>\n\n<p>After seeing the answers below, especially zar's, I believe I have understood the problem, and would like to summarize a bit here.</p>\n\n<ol>\n<li>Windows cmd console is in <strong>non-destructive mode</strong> when no physical keystrokes detected.</li>\n<li><strong>Any new output starts overwriting the existing ones from the current cursor</strong>. Sounds redundant but necessary. If there is any new character output, it will <strong>overwrite</strong> the existing one until new characters are used up. If there are still more existing characters left, they will continue existing over there and may look like \"output\" behind the new characters.</li>\n<li><strong>'\\b'</strong> only <strong>moves the cursor</strong> one character back. It does not delete anything.</li>\n<li><strong>'\\n'</strong> only <strong>moves the cursor</strong> to the next line. It does not move any character behind it to the next line.</li>\n<li><strong>'\\r'</strong> only <strong>moves the cursor</strong> to the beginning of the current line.</li>\n</ol>\n\n<p>Please pay attention to <strong>move the cursor</strong>.</p>\n\n<p>I'd like to paste all of the code here:</p>\n\n<pre><code>//strwithspecialchar.cpp -- Understand special characters in C++ string\n#include &lt;iostream&gt;\n\nint main(){\n    using namespace std;\n    char numString[12] = \"0123456789\\n\";\n\n    //This is group 1\n    numString[3] = '\\t';\n    numString[4] = '\\b';\n    cout &lt;&lt; \"Group 1 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 2\n    numString[3] = '\\b';\n    numString[4] = '\\t';\n    cout &lt;&lt; \"Group 2 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 3\n    numString[3] = '\\n';\n    numString[4] = '\\b';\n    cout &lt;&lt; \"Group 3 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 4\n    numString[3] = '\\b';\n    numString[4] = '\\n';\n    cout &lt;&lt; \"Group 4 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 5\n    numString[2] = '\\b';\n    numString[3] = '\\b';\n    numString[4] = '\\n';\n    cout &lt;&lt; \"Group 5 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 6\n    numString[2] = '\\b';\n    numString[3] = '3';\n    numString[4] = '\\n';\n    cout &lt;&lt; \"Group 6 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 7\n    numString[2] = '2';\n    numString[3] = '\\b';\n    numString[4] = '\\a';\n    cout &lt;&lt; \"Group 7 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 8\n    numString[3] = '\\b';\n    numString[4] = '\\r';\n    cout &lt;&lt; \"Group 8 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    //This is group 9\n    numString[3] = '\\b';\n    numString[4] = '\\n';\n    numString[8] = '\\r';\n    cout &lt;&lt; \"Group 9 output:\\n\" &lt;&lt; numString &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>And the output below for better understanding these special characters:</p>\n\n<pre>\nGroup 1 output:\n01256789\n\nGroup 2 output:\n01      56789\n\nGroup 3 output:\n012\n56789\n\nGroup 4 output:\n012\n56789\n\nGroup 5 output:\n01\n56789\n\nGroup 6 output:\n03\n56789\n\nGroup 7 output:\n0156789\n\nGroup 8 output:\n56789\n\nGroup 9 output:\n012\n967\n</pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 539, "user_id": 11424134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683bddfb4b9fe78da33d52f53e1106a8?s=128&d=identicon&r=PG&f=1", "display_name": "Raffallo", "link": "https://stackoverflow.com/users/11424134/raffallo"}, "edited": false, "score": 1, "creation_date": 1560345001, "post_id": 56562974, "comment_id": 99705516, "body": "maybe <code>template</code>? <code>template &lt;typename T&gt; run(std::vector&lt;T&gt; &amp;data) {     std::unordered_set&lt;T&gt; var;</code> }"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560345001, "post_id": 56562974, "comment_id": 99705517, "body": "You get it through the class, as in <code>std::vector&lt;Node&gt;::value_type</code>. Which in this case is kind of redundant, but makes much more sense if the container type was a template argument (as in <code>template&lt;typename C&gt; void run(C&amp; data) { std::unordered_set&lt;C::value_type&gt; var; ... }</code>)."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1560345024, "post_id": 56562974, "comment_id": 99705534, "body": "<code>template&lt;typename T = Node&gt; void run(std::vector&lt;T&gt;&amp; data) { std::unordred_set&lt; std::vector&lt;T&gt;::value_type &gt; var;  ...}</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1560345982, "last_edit_date": 1560345982, "creation_date": 1560345024, "answer_id": 56563062, "question_id": 56562974, "link": "https://stackoverflow.com/questions/56562974/is-there-a-way-to-get-the-value-type-from-a-template-var-which-is-function-param/56563062#56563062", "title": "Is there a way to get the value_type from a template var which is function parameter?", "body": "<p>You can use <code>decltype</code> to get the type of <code>data</code> and then apply <code>::value_type</code> to that.  That would give you</p>\n\n<pre><code>std::unordered_set&lt;std::remove_reference_t&lt;decltype(data)&gt;::value_type&gt; var;\n</code></pre>\n\n<p>As pointed out be <a href=\"https://stackoverflow.com/users/1625187/evg\">Evg</a> in the comments the <code>std::remove_reference_t</code> is needed since <code>data</code> is a reference and you can't apply the scope resolution operator to a reference type.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 4, "last_activity_date": 1560345040, "creation_date": 1560345040, "answer_id": 56563074, "question_id": 56562974, "link": "https://stackoverflow.com/questions/56562974/is-there-a-way-to-get-the-value-type-from-a-template-var-which-is-function-param/56563074#56563074", "title": "Is there a way to get the value_type from a template var which is function parameter?", "body": "<p>Perhaps just make a template function?</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid run(std::vector&lt;T&gt;&amp;)\n{\n    std::unordered_set&lt;T&gt; set;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1560346694, "last_edit_date": 1560346694, "creation_date": 1560346382, "answer_id": 56563506, "question_id": 56562974, "link": "https://stackoverflow.com/questions/56562974/is-there-a-way-to-get-the-value-type-from-a-template-var-which-is-function-param/56563506#56563506", "title": "Is there a way to get the value_type from a template var which is function parameter?", "body": "<p>You could simply generalise your function to be a <code>template</code> over the container type</p>\n\n<pre><code>template&lt;typename Container&gt;\nvoid run(Container const&amp;data) const\n{\n    std::unordered_set&lt;typename Container::value_type&gt; set;\n    for(auto const&amp; x : data) {\n        /* do something clever with the datum x */\n    }\n}\n</code></pre>\n\n<p>such that it will work with any container type that supports <code>value_type</code>.</p>\n\n<p>However, traditionally the generic way in C++ is to use iterators:</p>\n\n<pre><code>template&lt;typename Iter&gt;\nvoid run(Iter begin, Iter end) const\n{\n    using value_type = typename std::iterator_traits&lt;Iter&gt;::value_type;\n    std::unordered_set&lt;value_type&gt; set;\n    for(; begin != end; ++begin) {\n        const value_type&amp;x = *begin;\n        /* do something clever with the datum x */\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 11203604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wG4VSvyEOaU/AAAAAAAAAAI/AAAAAAAAAYc/E4LrR3C7m1o/photo.jpg?sz=128", "display_name": "Postaron", "link": "https://stackoverflow.com/users/11203604/postaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56563062, "answer_count": 3, "score": 3, "last_activity_date": 1560347924, "creation_date": 1560344782, "last_edit_date": 1560347924, "question_id": 56562974, "link": "https://stackoverflow.com/questions/56562974/is-there-a-way-to-get-the-value-type-from-a-template-var-which-is-function-param", "title": "Is there a way to get the value_type from a template var which is function parameter?", "body": "<p>I'm writing a virtual method, and one of its parameter a <code>std::vector</code>. Inside, I use <code>std::unordered_set</code> with the same <code>value_type</code> of the <code>std::vector</code>.</p>\n\n<p>But, I may change the <code>value_type</code> of the <code>std::vector</code>, and I don't want to change each time the type inside the code. To better understand what I am saying (English is not my native language), see the code below please.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>run(std::vector&lt;Node&gt; &amp;data) {\n    std::unordered_set&lt;Node&gt; var;\n}\n</code></pre>\n\n<p>And what I expect is a thing like this :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>run(std::vector&lt;Node&gt; &amp;data) {\n    std::unordered_set&lt;data::value_type&gt; var;\n}\n</code></pre>\n\n<p>And, of course, it doesn't work. Thank you in advance.</p>\n\n<p>EDIT : Thank you very much for the answers, and especially this one : <a href=\"https://stackoverflow.com/a/56563062/11203604\">https://stackoverflow.com/a/56563062/11203604</a></p>\n\n<p>The answers with the function template, it is impossible : it is an overloaded function (virtual). As for the class template, for technical reason in my future work, I can not make it template as it could be a public class.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "multithreading", "opengl", "video", "ffmpeg"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6636958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVA2q.jpg?s=128&g=1", "display_name": "Brigapes", "link": "https://stackoverflow.com/users/6636958/brigapes"}, "edited": false, "score": 0, "creation_date": 1560855650, "post_id": 56566996, "comment_id": 99864861, "body": "I tried using condition_variable but it ends up that <code>notify_all()</code> just triggers thread forward, and since i <code>notify_all()</code> right in the main drawing thread it ends up hurting performance a lot more than just putting <code>sleep</code> in the looping thread. I tried then using <code>notify_one()</code> but to same result. I managed to <code>detach()</code> thread but doesn&#39;t make a performance difference. I&#39;ve navigated the link about asynchronous buffer transfer and went to said topic but it doesn&#39;t display the actual article about it?  I already use <code>bool firstBuff</code> to switch between first or second buffer."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1560358265, "creation_date": 1560358265, "answer_id": 56566996, "question_id": 56562905, "link": "https://stackoverflow.com/questions/56562905/ffmpeg-c-decoding-in-a-separate-thread/56566996#56566996", "title": "FFmpeg C++ decoding in a separate thread", "body": "<p>You need:</p>\n\n<ul>\n<li>Two buffers, one can be filled by the decoder while the other is\ncopied to the GPU. Also, use a var (e.g. <code>bool useFirst</code>) to tell\nwhich buffer is used for reading and which one for writting.</li>\n<li>A worker thread that decodes the frame and fills a buffer. This thread reads <code>useFirst</code> to tell which buffer to fill. It doesn't need to protect the buffer with a mutex.</li>\n<li>A <a href=\"https://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">std::condition that makes the thread to wait</a> for a new frame coming from FFmpeg <strong>and</strong> for the buffer to be writtable.</li>\n<li>A timer that fires each 1/60 seconds and executes a function to transfer data to the GPU (if a buffer is already filled) and then updates <code>useFirst</code> and the condition variable.</li>\n<li>Perhaps a second thread that reads a frame from FFmpeg, but doesn't decode it.</li>\n</ul>\n\n<p>The thread[s] should be <em>detachable</em> (instead of <em>joinable</em>) so they can live \"forever\". They must check another flag/condition/notify that makes them finish and delete. </p>\n\n<p>You can also use only one buffer, with doubled or more size, and swap the write/read sections, as explained in <a href=\"https://openglinsights.com/\" rel=\"nofollow noreferrer\">Asynchronous Buffer Transfers</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 6636958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVA2q.jpg?s=128&g=1", "display_name": "Brigapes", "link": "https://stackoverflow.com/users/6636958/brigapes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1560358265, "creation_date": 1560344534, "question_id": 56562905, "link": "https://stackoverflow.com/questions/56562905/ffmpeg-c-decoding-in-a-separate-thread", "title": "FFmpeg C++ decoding in a separate thread", "body": "<p>I'm trying to decode a video with FFmpeg and convert it to an openGL texture and display it inside a cocos2dx engine. I've managed to do that and it displays the video as i wanted to, now the problem is performance wise. I get a Sprite update every frame(game is fixed 60fps, video is 30fps) so what i did was i decoded and converted frame interchangeably, didn't work great, now i have it set up to have a separate thread where i decode in an infinite <code>while</code> loop with <code>sleep()</code> just so it doesn't hog the cpu/program. \nWhat i currently have set up is 2 pbo framebuffers and a <code>bool</code> flag to tell my ffmpeg thread loop to decode another frame since i don't know how to manually wait when to decode another frame. I've searched online for a soultion to this kind of problem but didn't manage to get any answers. </p>\n\n<p>I've looked at this: <a href=\"https://stackoverflow.com/questions/45158254/decoding-video-directly-into-a-texture-in-separate-thread\">Decoding video directly into a texture in separate thread</a> but it didn't solve my problem since it was just converting YUV to RGB inside opengl shaders which i haven't done yet but currently not an issue. </p>\n\n<p>Additional info that might be useful is that i don't need to end thread until application exit and i'm open to using any video format, including lossless.</p>\n\n<p>Ok so main decoding loop looks like this:</p>\n\n<pre><code>//.. this is inside of a constructor / init\n//adding thread to array in order to save the thread    \nglobal::global_pending_futures.push_back(std::async(std::launch::async, [=] {\n        while (true) {\n            if (isPlaying) {\n                this-&gt;decodeLoop();\n            }\n            else {\n                std::this_thread::sleep_for(std::chrono::milliseconds(3));\n            }\n        }\n    }));\n\n</code></pre>\n\n<p>Reason why i use bool to check if frame was used is because main decoding function takes about 5ms to finish in debug and then should wait about 11 ms for it to display the frame, so i can't know when the frame was displayed and i also don't know how long did decoding take.</p>\n\n<p>Decode function: </p>\n\n<pre><code>void video::decodeLoop() { //this should loop in a separate thread\n    frameData* buff = nullptr;\n    if (buf1.needsRefill) {\n    /// buf1.bufferLock.lock();\n        buff = &amp;buf1;\n        buf1.needsRefill = false;\n        firstBuff = true;\n    }\n    else if (buf2.needsRefill) {\n        ///buf2.bufferLock.lock();\n        buff = &amp;buf2;\n        buf2.needsRefill = false;\n        firstBuff = false;\n    }\n\n    if (buff == nullptr) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(1));\n        return;//error? //wait?\n    }\n\n    //pack pixel buffer?\n\n    if (getNextFrame(buff)) {\n        getCurrentRBGConvertedFrame(buff);\n    }\n    else {\n        loopedTimes++;\n        if (loopedTimes &gt;= repeatTimes) {\n            stop();\n        }\n        else {\n            restartVideoPlay(&amp;buf1);//restart both\n            restartVideoPlay(&amp;buf2);\n            if (getNextFrame(buff)) {\n                getCurrentRBGConvertedFrame(buff);\n            }\n        }\n    }\n/// buff-&gt;bufferLock.unlock();\n\n    return;\n}\n</code></pre>\n\n<p>As you can tell i first check if buffer was used using bool needsRefill and then decode another frame. </p>\n\n<p>frameData struct:</p>\n\n<pre><code>    struct frameData {\n        frameData() {};\n        ~frameData() {};\n\n        AVFrame* frame;\n        AVPacket* pkt;\n        unsigned char* pdata;\n        bool needsRefill = true;\n        std::string name = \"\";\n\n        std::mutex bufferLock;\n\n        ///unsigned int crrFrame\n        GLuint pboid = 0;\n    };\n\n</code></pre>\n\n<p>And this is called every frame: </p>\n\n<pre><code>void video::actualDraw() { //meant for cocos implementation\n    if (this-&gt;isVisible()) {\n        if (this-&gt;getOpacity() &gt; 0) {\n            if (isPlaying) {\n                if (loopedTimes &gt;= repeatTimes) { //ignore -1 because comparing unsgined to signed\n                    this-&gt;stop();\n                }\n            }\n\n            if (isPlaying) {\n                this-&gt;setVisible(true);\n\n                if (!display) { //skip frame\n                    ///this-&gt;getNextFrame();\n                    display = true;\n                }\n                else if (display) {\n                    display = false;\n                    auto buff = this-&gt;getData();                    \n                    width = this-&gt;getWidth();\n                    height = this-&gt;getHeight();\n                    if (buff) {\n                        if (buff-&gt;pdata) {\n\n                            glBindBuffer(GL_PIXEL_UNPACK_BUFFER, buff-&gt;pboid);\n                            glBufferData(GL_PIXEL_UNPACK_BUFFER, 3 * (width*height), buff-&gt;pdata, GL_DYNAMIC_DRAW);\n\n\n                            glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, 0);///buff-&gt;pdata);                            glBindBuffer(GL_PIXEL_UNPACK_BUFFER, 0);\n                        }\n\n                        buff-&gt;needsRefill = true;\n                    }\n                }\n            }\n            else { this-&gt;setVisible(false); }\n        }\n    }\n}\n</code></pre>\n\n<p>getData func to tell which frambuffer it uses</p>\n\n<pre><code>video::frameData* video::getData() {\n    if (firstBuff) {\n        if (buf1.needsRefill == false) {\n            ///firstBuff = false;\n            return &amp;buf1;///.pdata;\n        }\n    }\n    else { //if false\n        if (buf2.needsRefill == false) {\n            ///firstBuff = true;\n            return &amp;buf2;///.pdata;\n        }\n    }\n    return nullptr;\n}\n</code></pre>\n\n<p>I'm not sure what else to include i pasted whole code to pastebin.\nvideo.cpp: <a href=\"https://pastebin.com/cWGT6APn\" rel=\"nofollow noreferrer\">https://pastebin.com/cWGT6APn</a>\nvideo.h    <a href=\"https://pastebin.com/DswAXwXV\" rel=\"nofollow noreferrer\">https://pastebin.com/DswAXwXV</a></p>\n\n<p>To summarize the problem:</p>\n\n<p>How do i properly implement decoding in a separate thread / how do i optimize current code?</p>\n\n<p>Currently video is lagging when some other thread or main thread gets heavy and then it does not decode fast enough.</p>\n"}, {"tags": ["c++", "ubuntu", "x11", "xlib", "xcb"], "answers": [{"comments": [{"owner": {"reputation": 896, "user_id": 686530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff7238316085e7317333fcb65171452c?s=128&d=identicon&r=PG", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/686530/bogdan"}, "edited": false, "score": 0, "creation_date": 1561732138, "post_id": 56772787, "comment_id": 100171610, "body": "That is pity. That would also explain why it doesn&#39;t work when system enables lock screen."}], "tags": [], "owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "is_accepted": true, "score": 0, "last_activity_date": 1561551952, "creation_date": 1561551952, "answer_id": 56772787, "question_id": 56562823, "link": "https://stackoverflow.com/questions/56562823/xcb-get-image-reply-fails-for-window-on-another-workspace-desktop/56772787#56772787", "title": "xcb_get_image_reply fails for window on another workspace/desktop", "body": "<p>To quote from <a href=\"https://www.x.org/releases/X11R7.6/doc/xproto/x11protocol.html#requests:GetImage\" rel=\"nofollow noreferrer\">https://www.x.org/releases/X11R7.6/doc/xproto/x11protocol.html#requests:GetImage</a>:</p>\n\n<blockquote>\n  <p>If the drawable is a window, the window must be viewable, [...] (or a Match error results).</p>\n</blockquote>\n\n<p>So, the GetImage request fails, because the window that you want to screenshot is not visible. The X11 server does not (really) keep any content besides what is visible on screen. Everything else is not saved anywhere.</p>\n\n<blockquote>\n  <p>I would like to get a screenshot of an application which is placed on another virtual desktop.</p>\n</blockquote>\n\n<p>Basically: X11 cannot do this, besides by switching to that other virtual desktop, waiting until (how?) the window in question redrew itself, and then grabbing a screenshot.</p>\n"}], "owner": {"reputation": 896, "user_id": 686530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff7238316085e7317333fcb65171452c?s=128&d=identicon&r=PG", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/686530/bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 56772787, "answer_count": 1, "score": 0, "last_activity_date": 1561551952, "creation_date": 1560344283, "question_id": 56562823, "link": "https://stackoverflow.com/questions/56562823/xcb-get-image-reply-fails-for-window-on-another-workspace-desktop", "title": "xcb_get_image_reply fails for window on another workspace/desktop", "body": "<p>Ubuntu (xfce) provides virtual desktops aka workspaces. I would like to get a screenshot of an application which is placed on another virtual desktop. I successfully create xcb connection and I can find window of application by its title. Problem is that <code>xcb_get_image_reply</code> fails. I do something like this:</p>\n\n<pre><code>    auto cookie = xcb_get_image(m_XCBConnection, XCB_IMAGE_FORMAT_Z_PIXMAP, m_XCBWindow, x, y, width, height, ~0);\n    xcb_generic_error_t * err = nullptr;\n    auto image = xcb_get_image_reply(m_XCBConnection, cookie, &amp;err);\n\n    // xcb_connection_has_error( m_XCBConnection ) returns no error\n\n    if ( err ) {\n        // here I have err-&gt;error_code == 8\n        free( err );\n    }\n</code></pre>\n\n<p>If I understand correctly <a href=\"https://www.x.org/releases/X11R7.6/doc/xproto/x11protocol.html#errors_encoding\" rel=\"nofollow noreferrer\">XCB errors encodings</a> and <a href=\"https://www.x.org/releases/X11R7.6/doc/xproto/x11protocol.html#errors\" rel=\"nofollow noreferrer\">general XCB errors explanation</a> I get error described as:</p>\n\n<blockquote>\n  <p><strong>Match</strong> An InputOnly window is used as a DRAWABLE. In a graphics request, the GCONTEXT argument does not have the same root and depth as the destination DRAWABLE argument. Some argument (or pair of arguments) has the correct type and range, but it fails to match in some other way required by the request.</p>\n</blockquote>\n\n<p>But I have no idea what I should do with this.</p>\n\n<p>Note: above solution works fine if both applications are on the same virtual desktop.</p>\n"}, {"tags": ["c++", "cplex"], "comments": [{"owner": {"reputation": 5225, "user_id": 11260716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a6570e104d267276655b7ca07e08a8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Junglas", "link": "https://stackoverflow.com/users/11260716/daniel-junglas"}, "edited": false, "score": 0, "creation_date": 1561385961, "post_id": 56562687, "comment_id": 100035807, "body": "Can you please show the full engine log output? At first glance your code looks ok."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 11391841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bff24b56cbbc1655712bede1323166f?s=128&d=identicon&r=PG&f=1", "display_name": "Mandana", "link": "https://stackoverflow.com/users/11391841/mandana"}, "edited": false, "score": 1, "creation_date": 1562770943, "post_id": 56968595, "comment_id": 100483311, "body": "Thank you dear Daniel. I used UserCutCallback for get this information."}], "tags": [], "owner": {"reputation": 5225, "user_id": 11260716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a6570e104d267276655b7ca07e08a8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Junglas", "link": "https://stackoverflow.com/users/11260716/daniel-junglas"}, "is_accepted": false, "score": 0, "last_activity_date": 1562753875, "creation_date": 1562753875, "answer_id": 56968595, "question_id": 56562687, "link": "https://stackoverflow.com/questions/56562687/how-to-implement-macro-nodecallback-in-c-vs-cplex/56968595#56968595", "title": "How to implement macro nodecallback in C++ vs CPLEX", "body": "<p>As far as I can tell, the code looks correct. Note however that the node callback may not be the right callback to use here. The node callback is invoked when the next node to process is selected. Printing the objective of all open nodes at this point in time may not be what you want.</p>\n\n<p>You can use a solve callback and capture the node's relaxation value from that callback.</p>\n\n<p>In case you want to have more help you will have to update your question with the full log output, including the output from your callback.</p>\n"}], "owner": {"reputation": 103, "user_id": 11391841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bff24b56cbbc1655712bede1323166f?s=128&d=identicon&r=PG&f=1", "display_name": "Mandana", "link": "https://stackoverflow.com/users/11391841/mandana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562753875, "creation_date": 1560343901, "question_id": 56562687, "link": "https://stackoverflow.com/questions/56562687/how-to-implement-macro-nodecallback-in-c-vs-cplex", "title": "How to implement macro nodecallback in C++ vs CPLEX", "body": "<p>I am trying to implement a macro callback to retrieve objective value at each nodes.\nI wrote this code:</p>\n\n<pre><code>ILONODECALLBACK0(mycali) {\nfor (int i = 0; i &lt; getNnodes(); i++) {\ncout &lt;&lt; \"getObjValue\"&lt;&lt; getObjValue(i) &lt;&lt; endl;\n}\n}\n</code></pre>\n\n<p>When I run the code it just shows objective value in root node while there is 10 nodes in CPLEX log file. Thank you in advance for your help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1560343735, "post_id": 56562593, "comment_id": 99704656, "body": "<code>#include&lt;iostream&gt; using namespace std;</code> is not C.  Please don&#39;t add the C tag."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 11, "creation_date": 1560343790, "post_id": 56562593, "comment_id": 99704682, "body": "signed overflow is undefined behavior."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1560343897, "post_id": 56562593, "comment_id": 99704751, "body": "Related: <a href=\"https://stackoverflow.com/questions/16188263/is-signed-integer-overflow-still-undefined-behavior-in-c\" title=\"is signed integer overflow still undefined behavior in c\">stackoverflow.com/questions/16188263/&hellip;</a>"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1560343931, "post_id": 56562593, "comment_id": 99704770, "body": "<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\"><b>Why is \u201cusing namespace std;\u201d considered bad practice?</b></a>"}, {"owner": {"reputation": 7, "user_id": 11358340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z3WuJ6titzM/AAAAAAAAAAI/AAAAAAAABTw/Dnh3xRKLjsE/photo.jpg?sz=128", "display_name": "UZAIR69", "link": "https://stackoverflow.com/users/11358340/uzair69"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1560344512, "post_id": 56562593, "comment_id": 99705182, "body": "@NathanOliver code syntax is C++ but its basically C language that is why i tag bot c and c++"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1560344626, "post_id": 56562593, "comment_id": 99705262, "body": "@UZAIR69 If you can&#39;t compile it in a C compiler, which you can&#39;t, then it is not C code.  C and C++ share a lot of the same syntax so we care on what language the code is compiled against, not how it looks."}, {"owner": {"reputation": 7, "user_id": 11358340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z3WuJ6titzM/AAAAAAAAAAI/AAAAAAAABTw/Dnh3xRKLjsE/photo.jpg?sz=128", "display_name": "UZAIR69", "link": "https://stackoverflow.com/users/11358340/uzair69"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1560344649, "post_id": 56562593, "comment_id": 99705281, "body": "@AndrewHenle sorry ! im a beginner programm , i just only learn coding.im not a professional programmer"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11358340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z3WuJ6titzM/AAAAAAAAAAI/AAAAAAAABTw/Dnh3xRKLjsE/photo.jpg?sz=128", "display_name": "UZAIR69", "link": "https://stackoverflow.com/users/11358340/uzair69"}, "edited": false, "score": 0, "creation_date": 1560344129, "post_id": 56562676, "comment_id": 99704908, "body": "how it rolls over to the other end of the range ?"}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "reply_to_user": {"reputation": 7, "user_id": 11358340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z3WuJ6titzM/AAAAAAAAAAI/AAAAAAAABTw/Dnh3xRKLjsE/photo.jpg?sz=128", "display_name": "UZAIR69", "link": "https://stackoverflow.com/users/11358340/uzair69"}, "edited": false, "score": 0, "creation_date": 1560344199, "post_id": 56562676, "comment_id": 99704958, "body": "&quot;how&quot;? In your case, by incrementing it. See the links given in the comments to the OP for more info."}], "tags": [], "owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "is_accepted": false, "score": -1, "last_activity_date": 1560344487, "last_edit_date": 1560344487, "creation_date": 1560343851, "answer_id": 56562676, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing/56562676#56562676", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p>In your code, k is always one greater than j at the time of the test, until it exceeds the maximum value that can be represented by an int. Then (in your case, as evidenced by your question -- it is indeed not defined by the standard) it rolls over to the other end of the range: the maximum negative value.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1560344944, "post_id": 56562700, "comment_id": 99705479, "body": "It&#39;s not that helpful: it&#39;s only one possibility (albeit a likely one on the current crop of desktop PCs)."}, {"owner": {"reputation": 453, "user_id": 11484423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYonn.jpg?s=128&g=1", "display_name": "05032 Mendicant Bias", "link": "https://stackoverflow.com/users/11484423/05032-mendicant-bias"}, "edited": false, "score": 1, "creation_date": 1560345125, "post_id": 56562700, "comment_id": 99705606, "body": "Uhm... I&#39;m sure that&#39;s what happened in OP case, also I never seen a compiler do it a different way. Rollover can be very beneficial especially in microcontrollers where abusing side effects can save instructions. Still, I never tried compiling with very aggressive settings. I think O2 should pretty much garantuee this result."}], "tags": [], "owner": {"reputation": 453, "user_id": 11484423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYonn.jpg?s=128&g=1", "display_name": "05032 Mendicant Bias", "link": "https://stackoverflow.com/users/11484423/05032-mendicant-bias"}, "is_accepted": false, "score": -1, "last_activity_date": 1560343931, "creation_date": 1560343931, "answer_id": 56562700, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing/56562700#56562700", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p>the while goes on until j is 2147483647</p>\n\n<p>2147483647 +1 = -2147483648</p>\n\n<p>the integer 32bit overflows and become negative, stopping the while.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1560344721, "post_id": 56562806, "comment_id": 99705326, "body": "@Jarod42 It would be UB if the user did it.  It&#39;s legal for the compiler to do so as the condition never needs to be checked."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1560344759, "post_id": 56562806, "comment_id": 99705358, "body": "@NathanOliver: Thanks Nathan: I was in the middle of checking this."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560345008, "post_id": 56562806, "comment_id": 99705523, "body": "As we are in UB world, (any, not only &quot;good&quot;) compilers may do anything. So I dislike the wording. And I mean that <code>while(true);</code> is also UB, and allow compilers to do anything too."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560345029, "post_id": 56562806, "comment_id": 99705539, "body": "@Jarod42: I&#39;ll bung in an &quot;effectively&quot;."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1560345086, "post_id": 56562806, "comment_id": 99705576, "body": "And yes, some compilers will mark the control path as unreachable which means the entire program gets compiled to <code>int main(){}</code> in this case."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560352717, "post_id": 56562806, "comment_id": 99710382, "body": "@Bathsheba <a href=\"https://stackoverflow.com/q/36626810/560648\">Or something else</a>"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1560345022, "last_edit_date": 1560345022, "creation_date": 1560344242, "answer_id": 56562806, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing/56562806#56562806", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p>The behaviour of your code is <em>undefined</em> due to the overflow of a signed integral type.</p>\n\n<p>There is no defined way by which <code>k</code> can become negative. Because of that, a good compiler (optimising gcc for example) may well compile <code>while(k &gt; j)</code> to, effectively, <code>while(true)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1560344928, "post_id": 56562885, "comment_id": 99705470, "body": "@Bathsheba Good point, as signed-magnitude (or 1&#39;s complement) may do something different in case of an overflow. Also, overflow might trap, which I forgot to mention."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560344983, "post_id": 56562885, "comment_id": 99705498, "body": "Signed magnitude and 1&#39;s complement tend to clamp. Although I am revealing my age here..."}], "tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": false, "score": 6, "last_activity_date": 1560344717, "last_edit_date": 1560344717, "creation_date": 1560344470, "answer_id": 56562885, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing/56562885#56562885", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p><code>int</code> has a limited range. At some time, <code>k++</code> overflows this limit. After that point, the behavior is undefined and anything can happen. </p>\n\n<p>If the compiler is very conservative, then it will simply overflow to negative values (particularly in the near-ubiquitous case where <code>int</code> is 2's complement), but that is not guaranteed. In that case, the <code>while</code> loop will terminate.</p>\n\n<p>Look at what gcc does with and without optimization. Both behaviors are legal according the standard, as signed overflow behavior is undefined.</p>\n\n<p><a href=\"https://godbolt.org/z/nFNAnV\" rel=\"nofollow noreferrer\">With optimization</a> (infinite loop): </p>\n\n<pre><code>main:\n.L2:\n        jmp     .L2\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/Crqt0ZtvLaGb7TXb\" rel=\"nofollow noreferrer\">Without optimization</a>:\nPrints:</p>\n\n<pre><code>2147483647\n-2147483648\n</code></pre>\n\n<p>Again, anything can happen, not only the above two behaviors. Signed overflow is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1560344641, "post_id": 56562922, "comment_id": 99705276, "body": "Hum. Since the behaviour is undefined, the code the OP presents is equivalent to <i>any</i> code."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1560345662, "last_edit_date": 1560345662, "creation_date": 1560344589, "answer_id": 56562922, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing/56562922#56562922", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p>Your code will keep on incrementing the variable <code>k</code> because the condition <code>k &gt; j</code> is true. At some point <code>k</code> will get equal to the maximum <code>int</code> value supported on your system. When you do <code>k++</code> in the next loop, the result is not representable as an <code>int</code>. This is called <strong>integer overflow</strong> and according to the standard, the code has <strong>undefined behavior</strong>. As it is undefined behavior we can't say what will happen in general - it is system specific. </p>\n\n<p>On many system the result of incrementing the maximum <code>int</code>value will result in the minimum <code>int</code> value. On such systems your code is equivalent to the code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n  int j = std::numeric_limits&lt;int&gt;::max();\n  int k = j + 1;\n  std::cout &lt;&lt; j &lt;&lt; std::endl &lt;&lt; k &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>On my system the output is:</p>\n\n<pre><code>2147483647\n-2147483648\n</code></pre>\n\n<p>But <strong>do not</strong> expect this to hold for all systems. On other systems the program may crash, or enter an endless loop or do whatever... it is undefined by the standard.</p>\n\n<p>A better way to write the code so that it will work on all systems is:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n  int j = std::numeric_limits&lt;int&gt;::max();\n  int k = std::numeric_limits&lt;int&gt;::min();\n  std::cout &lt;&lt; j &lt;&lt; std::endl &lt;&lt; k &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11358340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z3WuJ6titzM/AAAAAAAAAAI/AAAAAAAABTw/Dnh3xRKLjsE/photo.jpg?sz=128", "display_name": "UZAIR69", "link": "https://stackoverflow.com/users/11358340/uzair69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1560350524, "creation_date": 1560343618, "last_edit_date": 1560350524, "question_id": 56562593, "link": "https://stackoverflow.com/questions/56562593/how-does-an-integer-value-end-up-negative-when-positively-incrementing", "title": "How does an integer value end up negative when positively incrementing?", "body": "<p>I'm just write this code but I don't know how it works.</p>\n\n<p>Why the value of <code>k</code> will be negative? How? </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int k=1,j=0;\n    while(k&gt;j)\n    {\n        j=k;\n        k++;\n    }\n    cout&lt;&lt;j&lt;&lt;\"\\n\"&lt;&lt;k;\n}\n</code></pre>\n\n<p>it shows the range of an integer</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1560343243, "post_id": 56562450, "comment_id": 99704340, "body": "return reference ( not copy )"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1560343338, "post_id": 56562450, "comment_id": 99704396, "body": "Tl;DR: <code>getVec</code> needs to return <code>std::vector&lt;std::string&gt;&amp;</code>, not <code>std::vector&lt;std::string&gt;</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1560343339, "post_id": 56562450, "comment_id": 99704397, "body": "<code>const std::vector&lt;std::string&gt; &amp;getVec() const</code>"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1560343375, "post_id": 56562450, "comment_id": 99704419, "body": "Each call of <code>sc.getVec()</code> produces new copy of container stored in your class object."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1560344769, "post_id": 56562450, "comment_id": 99705362, "body": "research &quot;tell, don&#39;t ask&quot;.   Consider if your code would be improved for main() to simply &#39;tell&#39; the instance sc to do the cout&#39;s.  i.e. add  sc.show().  (and discard the get&#39;ers)."}, {"owner": {"reputation": 30, "user_id": 11361219, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0QkGXJKfQpc/AAAAAAAAAAI/AAAAAAAAguI/xY9qEVTkwBo/photo.jpg?sz=128", "display_name": "Dien Tran", "link": "https://stackoverflow.com/users/11361219/dien-tran"}, "edited": false, "score": 0, "creation_date": 1560394887, "post_id": 56562450, "comment_id": 99723981, "body": "Thank you. I&#39;ll write the answer shortly."}, {"owner": {"reputation": 30, "user_id": 11361219, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0QkGXJKfQpc/AAAAAAAAAAI/AAAAAAAAguI/xY9qEVTkwBo/photo.jpg?sz=128", "display_name": "Dien Tran", "link": "https://stackoverflow.com/users/11361219/dien-tran"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1560394987, "post_id": 56562450, "comment_id": 99723999, "body": "@2785528 I would certainly do that <i>if</i> the class element was public, but I deliberately did this to learn more about writing a better getter."}], "owner": {"reputation": 30, "user_id": 11361219, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0QkGXJKfQpc/AAAAAAAAAAI/AAAAAAAAguI/xY9qEVTkwBo/photo.jpg?sz=128", "display_name": "Dien Tran", "link": "https://stackoverflow.com/users/11361219/dien-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1560343308, "answer_count": 0, "score": 0, "last_activity_date": 1560396774, "creation_date": 1560343155, "last_edit_date": 1560396774, "question_id": 56562450, "link": "https://stackoverflow.com/questions/56562450/iterating-over-a-vector-of-strings-as-an-element-of-a-class", "closed_reason": "Duplicate", "title": "Iterating over a vector of strings as an element of a class", "body": "<p>In this piece of code, I defined <code>sampleClass</code> as a class which contains a <code>std::vector&lt;std::string&gt;</code>. The problem comes when I attempt to iterate over the vector and print out its elements:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass sampleClass {\nprivate:\n    std::vector&lt;std::string&gt; vec;\n\npublic:\n    std::vector&lt;std::string&gt; getVec() const\n    {\n        return vec;\n    }\n    void setVec(const std::vector&lt;std::string&gt;&amp; vec_)\n    {\n        vec = vec_;\n    }\n};\n\nint main()\n{\n    sampleClass sc;\n    sc.setVec(std::vector&lt;std::string&gt;{ \"hello\" });\n\n    std::cout &lt;&lt; \"pushed back element\" &lt;&lt; std::endl;\n\n    for (std::vector&lt;std::string&gt;::const_iterator currentVecElem = sc.getVec().begin(); currentVecElem != sc.getVec().end(); ++currentVecElem) {\n        std::cout &lt;&lt; *currentVecElem &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When compiled, the code does output <code>pushed back element</code>, then encounters a segmentation fault after that. What did I get wrong?</p>\n\n<p>EDIT: <code>getVec()</code> should return a <code>const std::vector&lt;std::string&gt;&amp;</code>, instead of <code>std::vector&lt;std::string&gt;</code>. The latter causes the getter to return a brand-new copy of <code>vec</code>, which means its <code>begin()</code> and <code>end()</code> iterators are different. The <code>vec</code> copy also goes out-of-scope <em>immediately</em>, rendering it unusable. The former works because we returned a reference to a vector that isn't copied and exists in memory (until we choose to free it).</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1560343050, "post_id": 56562355, "comment_id": 99704223, "body": "What compiler are you using?  How are you compiling the code?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560343559, "post_id": 56562355, "comment_id": 99704541, "body": "Work as expected <a href=\"http://coliru.stacked-crooked.com/a/8014ddaae00fe499\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1560343565, "post_id": 56562355, "comment_id": 99704544, "body": "All 4 tests matched on my machine."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1560343676, "post_id": 56562355, "comment_id": 99704617, "body": "Please note that code above do not contain problematic character. Something get broken with encoding during code paste: <code>\u258c</code> is something different then <code>&#172;</code> <a href=\"https://www.fileformat.info/info/unicode/char/2013/index.htm\" rel=\"nofollow noreferrer\">fileformat.info/info/unicode/char/2013/index.htm</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1560344196, "post_id": 56562355, "comment_id": 99704956, "body": "@MarekR I think that reference might be broken.  An en dash is <code>\u2013</code>, not <code>\u258c</code> ( the OP has one in <code>Line\u20135</code>).  Looks like part of the reference is right, as it has the right image and some of the right information, but the windows code is definitely wrong."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1560344283, "post_id": 56562355, "comment_id": 99705014, "body": "This is result of <code>Alt-2013</code> on windows as link suggests and it got broken too."}, {"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 0, "creation_date": 1560345746, "post_id": 56562355, "comment_id": 99706011, "body": "Yes sorry, the code was sanitised as I pasted it in.  text1 should contain an EN-DASH towards the end.  The &#172; character is not a problem (AFAIK) its just a separator because I can&#39;t use a comma.   I am using Visual Studio 2019, v16.1.2   And thanks everyone for looking at it."}], "owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560342817, "creation_date": 1560342817, "question_id": 56562355, "link": "https://stackoverflow.com/questions/56562355/c-stdexwregex-issue-with-s-s", "title": "C++ stdex::wregex issue with \\S\\s", "body": "<p>I have been trying to parse some wstrings using std::wregex and have found that when I use [\\S\\s]+ it fails to handle the Unicode character EN-DASH (8211).</p>\n\n<p>Does anyone know if there is a reason that EN-DASH is not seen as either white space or none white space, or am I doing something wrong?</p>\n\n<pre><code>void test (const std::wstring&amp; testDesc, const std::wstring&amp; expresion, const std::wstring&amp; text)\n{\n    std::wcout &lt;&lt; L\"Test   : \" &lt;&lt; testDesc &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"Regex  : \" &lt;&lt; expresion &lt;&lt; std::endl;\n    std::wregex regex (expresion);\n    std::wstring regExParams (text);\n    if (std::regex_search (regExParams, regex))\n    {\n        std::wcout &lt;&lt; L\"Result : Matched\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::wcout &lt;&lt; L\"Result : No match\" &lt;&lt; std::endl;\n    }\n    std::wcout &lt;&lt; std::endl;\n}\n\nint main ()\n{\n    const std::wstring text1 = L\"\u00acLine1\\nLine2\u00acLine3\\nLine4\u00acLine\u20135\u00ac\";       // 3rd char from the end is the EN-DASH\n    const std::wstring text2 = L\"\u00acLine1\\nLine2\u00acLine3\\nLine4\u00acLine-5\u00ac\";       // 3rd char from the end if a hyphen\n    const std::wstring expresion1 = L\"^\u00ac[\\\\S\\\\s]+\u00ac[\\\\S\\\\s]+\u00ac[\\\\S\\\\s]+\u00ac$\";   // This pattern will fail on EN-DASH\n    const std::wstring expresion2 = L\"^\u00ac[^\u00ac]+\u00ac[^\u00ac]+\u00ac[^\u00ac]+\u00ac$\";               // This pattern will succeeds with EN-DASH\n    test (L\"Test 1\", expresion1, text1);    // Fail\n    test (L\"Test 2\", expresion2, text1);    // Pass\n    test (L\"Test 3\", expresion1, text2);    // Pass\n    test (L\"Test 4\", expresion2, text2);    // Pass\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "image-processing", "simd", "simd-library"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 6, "creation_date": 1560342889, "post_id": 56562326, "comment_id": 99704125, "body": "The same function goes backwards as well. It swaps B and R, the opposite of a swap is that same swap"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1560342897, "post_id": 56562326, "comment_id": 99704130, "body": "Isn&#39;t the conversion symmetric?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1560343101, "post_id": 56562326, "comment_id": 99704252, "body": "The documentation you linked even says &quot;also it performs backward conversion&quot;."}, {"owner": {"reputation": 71, "user_id": 5857381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbddf9346141ba87dc4ab4773886cae?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5857381/william"}, "edited": false, "score": 0, "creation_date": 1560343185, "post_id": 56562326, "comment_id": 99704309, "body": "So I can use the same (SimdBgrToRgb) function?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1560343333, "post_id": 56562326, "comment_id": 99704390, "body": "@William Unless the meaning of English words have changed dramatically recently, yes. (Note that the documentation for the result parameter is obviously wrong, though.)"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1560353689, "post_id": 56562326, "comment_id": 99710994, "body": "Equally, you could potentially use the somewhat more mainstream OpenCV library which has SIMD-optimised <code>cvtColor(image,COLOR_BGR2RGB)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 7, "last_activity_date": 1560342955, "creation_date": 1560342955, "answer_id": 56562398, "question_id": 56562326, "link": "https://stackoverflow.com/questions/56562326/fast-image-rgb-to-bgr-conversion/56562398#56562398", "title": "Fast image RGB to BGR conversion", "body": "<p>For 24bpp images, it's the same shuffle: reverse 3-byte chunks.  For 16bpp 5:6:5 image formats, it's again the same shuffle with symmetry around the middle field.</p>\n\n<p><strong>Use any of the existing BGR to RGB functions you found.</strong></p>\n"}], "owner": {"reputation": 71, "user_id": 5857381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbddf9346141ba87dc4ab4773886cae?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5857381/william"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "closed_date": 1560378125, "accepted_answer_id": 56562398, "answer_count": 1, "score": 1, "last_activity_date": 1560342955, "creation_date": 1560342746, "question_id": 56562326, "link": "https://stackoverflow.com/questions/56562326/fast-image-rgb-to-bgr-conversion", "closed_reason": "Not suitable for this site", "title": "Fast image RGB to BGR conversion", "body": "<p>I need to perform conversion of images from BGR to RGB image format and also backward conversion. I found <a href=\"http://github.com/ermig1979/Simd\" rel=\"nofollow noreferrer\">Simd Library</a> which contains function <a href=\"http://ermig1979.github.io/Simd/help/group__bgr__conversion.html#ga0ec8d4dc18f9cdbdaf2e300a101e8a40\" rel=\"nofollow noreferrer\">SimdBgrToRgb</a> which performs fast conversion from BGR to RGB.\nBut I didn't find any function for backward (RGB to BGR) conversion.</p>\n\n<p>Maight any to know any C/C++ library which allows to perform this conversion?</p>\n"}, {"tags": ["c++", "variables", "maps"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 4, "creation_date": 1560342254, "post_id": 56562160, "comment_id": 99703769, "body": "Depends on what you want to achieve, may or may not be a good idea at all."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1560342306, "post_id": 56562160, "comment_id": 99703789, "body": "If all attributes are of the same type, it might be a good idea."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560343059, "post_id": 56562160, "comment_id": 99704230, "body": "Typo for <code>n.colour</code> will be spot by compiler, whereas <code>n.getProperty(&quot;colour&quot;);</code> won&#39;t."}, {"owner": {"reputation": 539, "user_id": 11424134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683bddfb4b9fe78da33d52f53e1106a8?s=128&d=identicon&r=PG&f=1", "display_name": "Raffallo", "link": "https://stackoverflow.com/users/11424134/raffallo"}, "edited": false, "score": 0, "creation_date": 1560343243, "post_id": 56562160, "comment_id": 99704339, "body": "As others say, the answer is: <code>Yes, you can!</code> But the question is <code>why?</code> What do you want to achieve? Keep in mind that string is &#39;heavier&#39; object than int, and getting properties from the map will be slower than just getting int from the class/struct."}, {"owner": {"reputation": 45, "user_id": 2045663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fa283485028eb41e5a74360161328?s=128&d=identicon&r=PG", "display_name": "HD2000", "link": "https://stackoverflow.com/users/2045663/hd2000"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560344012, "post_id": 56562160, "comment_id": 99704826, "body": "@Jarod42 Yes, that would be a good reason not to do it. Because of a small typo, chasing a bug through the entire code."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1560342698, "creation_date": 1560342698, "answer_id": 56562311, "question_id": 56562160, "link": "https://stackoverflow.com/questions/56562160/can-i-group-attributes-of-one-class-into-one-map/56562311#56562311", "title": "Can I group attributes of one class into one map?", "body": "<p>A <code>class</code> (identical to a <code>struct</code> except it defaults to <code>private</code> access rather than <code>public</code>) is primarily to group elements of data and/or functionality together.</p>\n\n<p>You <code>node</code> seems to simply group together three elements.  So you probably want to start off with something as simple as:</p>\n\n<pre><code>struct node // access is public by default\n{\n    int color;\n    int isVisited;  // maybe a bool rather than int?\n    int weight;\n}\n...\nnode myNode;\nmyNode.color = ...\n...\nstd::cout &lt;&lt; myNode.weight;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 3, "last_activity_date": 1560412921, "last_edit_date": 1560412921, "creation_date": 1560343630, "answer_id": 56562599, "question_id": 56562160, "link": "https://stackoverflow.com/questions/56562160/can-i-group-attributes-of-one-class-into-one-map/56562599#56562599", "title": "Can I group attributes of one class into one map?", "body": "<p>The example you gave gives the impression that <em>any</em> node would have <em>all</em> the properties you provided (<code>colour</code>, <code>isVisited</code>, <code>weight</code>). If so it is (usually) better to keep the original class you started with.</p>\n\n<p>There might be a few scenarios in which a map (or possibly rather <code>std::unordered_map</code>) might be superior, though; just a few examples:</p>\n\n<ul>\n<li>You have a large number of <em>possible</em> (but pre-defined) attributes and each node only needs a rather small subset of. Possibly an enum is better suited as key then.</li>\n<li>You want/need to store <em>arbitrary</em> attributes unknown at compile time.</li>\n<li>Each node has the same attributes, but you mainly access them via user input; then especially an <code>unordered_map</code> could be faster than a (possibly long) if-else-chain.</li>\n</ul>\n\n<p>In the end, all depends on the use case...</p>\n\n<p>For strings as keys possibly a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">trie</a> might be an interesting alternative, too.</p>\n"}], "owner": {"reputation": 45, "user_id": 2045663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fa283485028eb41e5a74360161328?s=128&d=identicon&r=PG", "display_name": "HD2000", "link": "https://stackoverflow.com/users/2045663/hd2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560412921, "creation_date": 1560342196, "last_edit_date": 1560343857, "question_id": 56562160, "link": "https://stackoverflow.com/questions/56562160/can-i-group-attributes-of-one-class-into-one-map", "title": "Can I group attributes of one class into one map?", "body": "<p>If I have class \"node\", and wish to include all possible (say int) attributes. Is grouping them into one map good solution.\nSo instead:</p>\n\n<pre><code>    class node{\n        int color;\n        int isVisited;\n        int weight;\n    public:\n    };\n</code></pre>\n\n<p>To have</p>\n\n<pre><code>    class node{\n        map&lt;string, int&gt; property;\n    public:\n       setProperty(string property_label, int property_value) \n        {property[propery_label] = property_value;};\n\n    };\n\n    int main(){\n        node n;\n        n.setProperty(\"color\",int(color::red));\n        n.setProperty(\"isVisited\", 1);\n        n.setProperty(\"weight\", 12);\n    }\n</code></pre>\n\n<p>EDIT:\nThe reason to do this is that, when transforming a graph, some local properties (like is visited during some traversal, or is it marked) are needed somewhere in the middle of an algorithm, but these local properties do not represent intrinsic property of a node, and are not needed in the output. Also, sometimes I need more than one \"isVisited\" variables. </p>\n\n<p>One more reason is to keep the class \"node\" universal and open for new attributes that eventually might be needed.  </p>\n"}, {"tags": ["c++", "delphi", "c++builder"], "comments": [{"owner": {"reputation": 5357, "user_id": 6220377, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Kzexv.jpg?s=128&g=1", "display_name": "Marc Guillot", "link": "https://stackoverflow.com/users/6220377/marc-guillot"}, "edited": false, "score": 0, "creation_date": 1560345756, "post_id": 56561969, "comment_id": 99706016, "body": "I personally add a Timer and every couple of seconds I check if the file has changed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 5357, "user_id": 6220377, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Kzexv.jpg?s=128&g=1", "display_name": "Marc Guillot", "link": "https://stackoverflow.com/users/6220377/marc-guillot"}, "edited": false, "score": 1, "creation_date": 1560363006, "post_id": 56561969, "comment_id": 99715367, "body": "@MarcGuillot look at <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotifyregister\" rel=\"nofollow noreferrer\"><code>SHChangeNotifyRegister()</code></a> or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-readdirectorychangesw\" rel=\"nofollow noreferrer\"><code>ReadDirectoryChangesW()</code></a> for monitoring files for changes."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1560363083, "post_id": 56561969, "comment_id": 99715407, "body": "@Taavi if you use <code>ShellExecuteEx()</code> instead (or better, <code>CreateProcess()</code>), it can return a <code>HANDLE</code> that you can wait on to know when the spawned process has exited.  You can then re-load and delete the file you created as needed."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1560563157, "post_id": 56577179, "comment_id": 99789328, "body": "&quot;<i>The delete doesn&#39;t work with some files if they are opened</i>&quot; - of course not. You can&#39;t delete a file that is in use, unless the code that is using the file explicitly specifies <code>DELETE</code> sharing rights when opening the file. What you can try doing instead is open each file yourself first, specifying <code>READ</code>/<code>WRITE</code> sharing rights and the <code>FILE_FLAG_DELETE_ON_CLOSE</code> flag, and then leave the files open until you are done using them, or at least until someone else has opened them. The files will delete themselves automatically once everyone has closed their handles to them."}], "tags": [], "owner": {"reputation": 21, "user_id": 9774974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Taavi Tilgre", "link": "https://stackoverflow.com/users/9774974/taavi-tilgre"}, "is_accepted": false, "score": 1, "last_activity_date": 1560562892, "last_edit_date": 1560562892, "creation_date": 1560417246, "answer_id": 56577179, "question_id": 56561969, "link": "https://stackoverflow.com/questions/56561969/open-and-edit-files-from-dataset-blob-field/56577179#56577179", "title": "open and edit files from dataset blob field", "body": "<p>I happen to find a solution (not a perfect one) to my own problem.</p>\n\n<p>I declared a <code>TStringList *slOpendFiles</code> in the header file and added all saved file names into it. </p>\n\n<pre><code>((TBlobField*)(TDataset-&gt;FieldByName(\"FILE\"))-&gt;SaveToFile(sFileName);\nslOpendFiles-&gt;Add(sFileName);`\n</code></pre>\n\n<p>And in the destructor, I tried to save and delete the files:</p>\n\n<pre><code>int iMaxFile = slOpendFiles-&gt;Count;\nint iCurrFile = 0;\nwhile (iCurrFile &lt; iMaxFile){\n    TDataset-&gt;Edit();\n    ((TBlobField*)(TDataset-&gt;FieldByName(\"FILE\")))-&gt;LoadFromFile(slOpendFiles-&gt;Strings[iCurrFile]);\n    TDataset-&gt;Post();\n    DeleteFile(slOpendFiles-&gt;Strings[iCurrFile]);\n    iCurrFile++;\n}\n</code></pre>\n\n<p>NP! The delete doesn't work with some files if they are opened.</p>\n"}], "owner": {"reputation": 21, "user_id": 9774974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Taavi Tilgre", "link": "https://stackoverflow.com/users/9774974/taavi-tilgre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560562892, "creation_date": 1560341560, "last_edit_date": 1560362869, "question_id": 56561969, "link": "https://stackoverflow.com/questions/56561969/open-and-edit-files-from-dataset-blob-field", "title": "open and edit files from dataset blob field", "body": "<p>I have files in a <code>TIBDataset</code> blob field.</p>\n\n<p>I need to be able to open them and save all edits done to them.</p>\n\n<p>I have tried to open files like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>String sFileName = \"Test.txt\";\n((TBlobField*)(TDataset-&gt;FieldByName(\"FILE\"))-&gt;SaveToFile(sFileName);\nShellExecute(0, L\"open\", sFileName.c_str(), L\"\", L\"\", SW_SHOWNORMAL);\n</code></pre>\n\n<p>But I can't reliably delete made file, or save all the edits.</p>\n\n<p>Is there a way to open a file from a blob field, or get a callback from closing an (external) file?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "machine-learning", "svm"], "comments": [{"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560351464, "post_id": 56561935, "comment_id": 99709649, "body": "whats the original image which is the object when open and close? can give image and label? GIVE propper example image so that others can give propper suggestion.  If background keep changing, you might have bigger issue in getting training sample. learning based method suffers from generalization is a common sense."}, {"owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "reply_to_user": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560352203, "post_id": 56561935, "comment_id": 99710091, "body": "Thank you for your responds, The original images are valves with different shapes, I add two images"}, {"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560354565, "post_id": 56561935, "comment_id": 99711452, "body": "is handle always red? or is the background always white?   as far as the 2 sample given. You can just use object segmentation method like graph cut or anything. if the output fit T shape (done by e.g contour fit/ rect box ratio fit or anything), then it is close. else it is open."}, {"owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "reply_to_user": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560410606, "post_id": 56561935, "comment_id": 99728676, "body": "Yes the handle is red, but the background changes a lot, I have the idea to use color for identification, and I must use machine learning in the project, my problem is that color is not a sufficient information, I need to detect the cases Open/close by detecting the T shape as you said, I don&#39;t know if the graph cut is going to work if the background changes, also do you have  any idea please how many images I have to use in the database to solve this problem with machine learning if I give HOG descriptor to a machine learning algorithm like SVM or ANN? and thank you."}, {"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560412907, "post_id": 56561935, "comment_id": 99729846, "body": "for svm you need at least a couple hundred image sample,  CNN is usually more than a few thousand image sample.  since you only have open or close. use piror based graph cut may help by only find the maximum response of mean open and mean close"}, {"owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "reply_to_user": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560413842, "post_id": 56561935, "comment_id": 99730355, "body": "I have done some research about graph cut, but I don&#39;t know how to start, can you give me please a tutorial or an article to start with, I know how graph cut works, but I don&#39;t know how to use it in my case to detect the cases open and close in a video."}, {"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1560416266, "post_id": 56561935, "comment_id": 99731679, "body": "look at this paper and you will understand what I`m talking about. <a href=\"https://www.researchgate.net/figure/Segmentation-of-a-bird-and-a-cup-using-continuous-graph-cuts-and-the-corresponding-u-x_fig3_220931787\" rel=\"nofollow noreferrer\">researchgate.net/figure/&hellip;</a>.  This is only one of the method. there are a lot more other methods. So you have to go though those paper which cited graph cut and with keyword prior / learning etc .  You can also go for snake energy function for this. As i said there is no limit to your approach."}], "owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560367883, "creation_date": 1560341471, "last_edit_date": 1560367883, "question_id": 56561935, "link": "https://stackoverflow.com/questions/56561935/image-classification-in-video-stream-with-contours-with-opencv", "title": "Image classification in video stream with contours with Opencv", "body": "<p>Please I need your help with this problem, I want to create a program to differentiate between the two forms(2 images), with a camera in real time, here are the methods. I found but I\u2019m not sure they\u2019re going to work because I want the detection to be feasible if the object is inclined by 90 degrees or 180 degrees by example, I have to use machine learning in this problem but I am open to any proposition, also I do not have many images in the database.</p>\n\n<p>Here are the methods I found but I'm not sure they will work;</p>\n\n<p>1 - Apply Canny filter to extract contours.</p>\n\n<p>2 - Use a features extractors such SIFT, Fourier Descriptors, Haralick's Features, Hough Transform to extract more details which could be summarised in a short vector.</p>\n\n<p>3-Then train SVM or ANN with this vector.</p>\n\n<p><img src=\"https://i.stack.imgur.com/nXNGf.png\" alt=\"Image1\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/h5quW.png\" alt=\"Image2\"></p>\n\n<p>The goal is to detect two cases : Open or Close</p>\n\n<p>Also i dont know that contours are the best way to solve this problem because the background changes a lot</p>\n\n<p>The original images are valves with different shape, here is an example : </p>\n\n<p><img src=\"https://i.stack.imgur.com/j4JGu.png\" alt=\"Image close \"></p>\n\n<p><img src=\"https://i.stack.imgur.com/bY4h3.png\" alt=\"Image open\"></p>\n"}, {"tags": ["c++", "visual-studio", "build", "dlib"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560343957, "post_id": 56561813, "comment_id": 99704786, "body": "I&#39;m afraid we need to see some code not just the error"}, {"owner": {"reputation": 11, "user_id": 7401714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tIoGI.jpg?s=128&g=1", "display_name": "C.yasser", "link": "https://stackoverflow.com/users/7401714/c-yasser"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560355476, "post_id": 56561813, "comment_id": 99711957, "body": "@nada there is no code , I&#39;m trying to build the Dlib project that I&#39;ve generate using Cmake"}, {"owner": {"reputation": 11, "user_id": 7401714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tIoGI.jpg?s=128&g=1", "display_name": "C.yasser", "link": "https://stackoverflow.com/users/7401714/c-yasser"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560520911, "post_id": 56561813, "comment_id": 99775397, "body": "Solved by downloading visual studio 2015 update 3 and rebuilding Dlib as known"}], "owner": {"reputation": 11, "user_id": 7401714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tIoGI.jpg?s=128&g=1", "display_name": "C.yasser", "link": "https://stackoverflow.com/users/7401714/c-yasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560341035, "creation_date": 1560341035, "question_id": 56561813, "link": "https://stackoverflow.com/questions/56561813/build-failed-while-building-dlib-c-using-vs2015", "title": "Build failed while building Dlib c++ using VS2015", "body": "<p>I tried to build dlib using VS 2015 with release x64 but the build failed facing some errors and the same thing happens with debug x64\nhere is the errors that shows up after building dlib project with release x64</p>\n\n<pre><code> auto.cpp\n    2&gt;c:\\dlib-19.15\\dlib- \n    19.15\\source\\dlib\\global_optimization/find_max_global.h(77): error C2535: \n    'unknown-type \n   dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const \n\n\n  dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; \n    &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(84): note: see reference to class template instantiation 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;' being compiled (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(78): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(79): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(80): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(81): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(82): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(83): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\filtering\\kalman_filter.cpp)\n2&gt;  sockets_kernel_1.cpp\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(77): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(84): note: see reference to class template instantiation 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;' being compiled (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(78): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(79): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(80): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(81): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(82): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(83): error C2535: 'unknown-type dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go(T &amp;&amp;,const dlib::matrix&lt;double,0,1,dlib::default_memory_manager,dlib::row_major_layout&gt; &amp;)': member function already defined or declared (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp)\n2&gt;  c:\\dlib-19.15\\dlib-19.15\\source\\dlib\\global_optimization/find_max_global.h(76): note: see declaration of 'dlib::gopt_impl::call_function_and_expand_args&lt;max_unpack&gt;::go' (compiling source file C:\\dlib-19.15\\dlib-19.15\\source\\dlib\\svm\\auto.cpp) \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1560341154, "post_id": 56561795, "comment_id": 99703036, "body": "What&#39;s that <code>+</code> doing there? - does it perhaps turn <code>t</code> into an <code>int</code> expression?"}, {"owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1560341276, "post_id": 56561795, "comment_id": 99703113, "body": "it promotes t to a type printable as a number, regardless of type, though i&#39;m not sure what is the promoted type."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1560341322, "post_id": 56561795, "comment_id": 99703153, "body": "The <code>+</code> operator converted it to an <code>int</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1560341393, "post_id": 56561795, "comment_id": 99703202, "body": "Try this: <code>std::cout &lt;&lt; std::hex &lt;&lt; (t &amp; 0xFF) &lt;&lt; std::endl;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "is_accepted": false, "score": 4, "last_activity_date": 1560341701, "last_edit_date": 1560341701, "creation_date": 1560341357, "answer_id": 56561897, "question_id": 56561795, "link": "https://stackoverflow.com/questions/56561795/why-does-the-output-format-of-an-int8-t-use-4-bytes/56561897#56561897", "title": "Why does the output format of an int8_t use 4 bytes?", "body": "<p>The problem is that you use the unary arithmetic operator <code>+</code> which performs integer promotion. So your <code>int8_t</code> is promoted to an integer. Which with your compiler and set up is 32 bits.</p>\n\n<blockquote>\n  <p>The built-in unary plus operator returns the value of its operand. The only situation where it is not a no-op is when the operand has integral type or unscoped enumeration type, which is changed by integral promotion, e.g, it converts <code>char</code> to <code>int</code> or if the operand is subject to lvalue-to-rvalue, array-to-pointer, or function-to-pointer conversion. </p>\n</blockquote>\n\n<p>Source: <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/operator_arithmetic</a></p>\n\n<blockquote>\n  <p>The operand of the unary + operator shall have arithmetic, unscoped enumeration, or pointer type and the result is the value of the argument. Integral promotion is performed on integral or enumeration operands. The type of the result is the type of the promoted operand.</p>\n</blockquote>\n\n<p>Source <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4659.pdf\" rel=\"nofollow noreferrer\">C++ Standard</a> \u00a7 8.3.1.7</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 7, "last_activity_date": 1560341708, "creation_date": 1560341708, "answer_id": 56562005, "question_id": 56561795, "link": "https://stackoverflow.com/questions/56561795/why-does-the-output-format-of-an-int8-t-use-4-bytes/56562005#56562005", "title": "Why does the output format of an int8_t use 4 bytes?", "body": "<blockquote>\n  <p>Why is the output format of an int8_t uses 4 bytes?</p>\n</blockquote>\n\n<p>It doesn't. You're outputting an <code>int</code>, not a <code>int8_t</code>.</p>\n\n<hr>\n\n<p>To stream a <code>uint8_t</code> to <code>std::cout</code> with lexical conversions, you have correctly used <code>+</code> to trigger a promotion to <code>int</code> (needed because <code>char</code> and related types do not undergo lexical conversion with IOstreams).</p>\n\n<p>But then&hellip; you've promoted it to <code>int</code>. So you see <code>int</code>-like things.</p>\n\n<p>Your second line is good and ensures you don't fall foul of sign extension.</p>\n"}, {"tags": [], "owner": {"reputation": 291, "user_id": 2811407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd786f225dc806c9c9a2f124a34cc467?s=128&d=identicon&r=PG&f=1", "display_name": "Tunichtgut", "link": "https://stackoverflow.com/users/2811407/tunichtgut"}, "is_accepted": false, "score": 1, "last_activity_date": 1560351116, "creation_date": 1560351116, "answer_id": 56565030, "question_id": 56561795, "link": "https://stackoverflow.com/questions/56561795/why-does-the-output-format-of-an-int8-t-use-4-bytes/56565030#56565030", "title": "Why does the output format of an int8_t use 4 bytes?", "body": "<p>A little addition to the existing answers</p>\n\n<pre><code>auto x1 = static_cast&lt;int8_t&gt;(-1);\n// x1 has type int8_t and contains value -1\n\nauto x2 = static_cast&lt;uint8_t&gt;(-1);\n// x2 has type uint8_t and contains value 255 !\n// uint8_t cant represent value -1\n\n// promotion to int\nauto y1 = +x1; // y1 has type int with value -1\nauto y2 = +x2; // y2 has also type int with value 255\n\nstd::cout &lt;&lt; y1 &lt;&lt; \"\\n\";  // output \"-1\"\nstd::cout &lt;&lt; y2 &lt;&lt; \"\\n\";  // output \"255\"\n\nstd::cout &lt;&lt; std::hex &lt;&lt; y1 &lt;&lt; \"\\n\"; // output \"ffffffff\" for hex representation of -1\nstd::cout &lt;&lt; std::hex &lt;&lt; y2 &lt;&lt; \"\\n\"; // output \"ff\" for hex representation of 255\n</code></pre>\n\n<p>I hope this code snippet makes it l little bit easier to understand.</p>\n"}], "owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 56562005, "answer_count": 3, "score": 7, "last_activity_date": 1560351116, "creation_date": 1560340989, "last_edit_date": 1560348666, "question_id": 56561795, "link": "https://stackoverflow.com/questions/56561795/why-does-the-output-format-of-an-int8-t-use-4-bytes", "title": "Why does the output format of an int8_t use 4 bytes?", "body": "<p>For some testing purpose I want to display int8_t variables, cast them to uint8_t and display them again, in hexadecimal.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n  std::int8_t t = -1;\n\n  std::cout &lt;&lt; std::hex &lt;&lt; +t &lt;&lt; std::endl;\n  std::cout &lt;&lt; std::hex &lt;&lt; +static_cast&lt;std::uint8_t&gt;(t) &lt;&lt; std::endl;\n\n\n  return 0;\n}\n</code></pre>\n\n<p>Here is my output for this program:</p>\n\n<pre><code>$ ./a.exe\nffffffff\nff\n</code></pre>\n\n<p>cout seems to format an int8_t as 4 bytes. Why is that? As it is a one-byte value, one would expect to see ff, like an uint8_t, which is the case in this example.</p>\n"}, {"tags": ["java", "android", "c++", "hashmap", "java-native-interface"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1560376749, "post_id": 56561789, "comment_id": 99720655, "body": "In general, you will want to learn how to take any Java class, not just hashmap, and be able to call their methods from C++.  Good JNI books / documentation explains how to do this."}], "answers": [{"tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": false, "score": 0, "last_activity_date": 1582233437, "last_edit_date": 1582233437, "creation_date": 1560349882, "answer_id": 56564635, "question_id": 56561789, "link": "https://stackoverflow.com/questions/56561789/converting-a-c-unordered-map-to-java-hashmap-before-returning-it-to-java-using/56564635#56564635", "title": "Converting a c++ unordered_map to java hashMap before returning it to java using JNI", "body": "<p>It will require some tweaking. You can do it by creating <code>Map</code> object inside <code>C++</code> or by passing <code>Map</code> from <code>Java</code> to <code>C++</code> and filling it there.</p>\n\n<p>Basically, what you need is to:</p>\n\n<ol>\n<li>create <code>HashMap</code></li>\n</ol>\n\n<pre><code>  jclass mapClass = env-&gt;FindClass(\"java/util/HashMap\");\n  if(mapClass == NULL) {\n    return NULL;                  // alternatively, throw exception (recipeNo019)\n  }\n\n  jobject hashMap = env-&gt;NewObject(mapClass, mapConstructorID);\n  if(hashMap == NULL) {\n    return NULL;                  // as above\n  }\n</code></pre>\n\n<ol start=\"2\">\n<li>making sure to embed your primitive types inside object (e.g. you can embed <code>int</code> inside <code>Integer</code>)</li>\n</ol>\n\n<pre><code>  jclass integerClass = env-&gt;FindClass(\"java/lang/Integer\");\n  if(integerClass == NULL) {\n    return NULL;                  // alternatively, throw exception (recipeNo019)\n  }\n\n  jmethodID integerConstructorID = env-&gt;GetMethodID(integerClass, \"&lt;init&gt;\", \"(I)V\");\n  if(integerConstructorID == NULL) {\n    return NULL;\n  }\n\n  ...\n  ...\n\n  jobject key = env-&gt;NewObject(integerClass, integerConstructorID, pair.first);\n</code></pre>\n\n<ol start=\"3\">\n<li>filling <code>HashMap</code> with data</li>\n</ol>\n\n<pre><code>  for (auto const&amp; pair: map) {\n    jobject key = env-&gt;NewObject(integerClass, integerConstructorID, pair.first);\n    jobject value = env-&gt;NewObject(integerClass, integerConstructorID, pair.second);\n    if(key == NULL || value == NULL) {\n      return NULL;\n    }\n    env-&gt;CallObjectMethod(hashMap, putMethodID, key, value);\n  }\n</code></pre>\n\n<p>That's it. You can find full sample code here:</p>\n\n<p><a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo047\" rel=\"nofollow noreferrer\">https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo047</a>\n<a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo048\" rel=\"nofollow noreferrer\">https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo048</a></p>\n"}], "owner": {"reputation": 1206, "user_id": 7331538, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d9da00c0aab10cac443b18a5fea32193?s=128&d=identicon&r=PG&f=1", "display_name": "user7331538", "link": "https://stackoverflow.com/users/7331538/user7331538"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582233437, "creation_date": 1560340960, "question_id": 56561789, "link": "https://stackoverflow.com/questions/56561789/converting-a-c-unordered-map-to-java-hashmap-before-returning-it-to-java-using", "title": "Converting a c++ unordered_map to java hashMap before returning it to java using JNI", "body": "<p>I have a very large c++ <code>unordered_map</code> on android platform I would like to return this as a hashMap in java using JNI. </p>\n\n<pre><code>extern \"C\" JNIEXPORT jobject JNICALL Java_quantum_QUANTUM_getMessage(JNIEnv *env, jobject thisObj, jdoubleArray bbox) {\n\n    unordered_map&lt;int, Foo&gt; Map;\n    Map = getData(filename, bbox);\n\n    // convert Map to java object\n    // return java object\n}\n</code></pre>\n\n<p>I am quite new to JNI. I haven't found any helpful material on how to do this.</p>\n\n<p>I tried the approach in the link below but I am getting a lot of compilation errors on this.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/51460349/how-to-correctly-send-a-stdmap-from-c-to-java-through-jni\">how to correctly send a std::map&lt;&gt; from C++ to Java through JNI?</a></p>\n\n<p>Another suggestions was to pass an empty javaHashmap over JNI and populate it. But I am not sure on how to do that. what is the better solution?</p>\n"}, {"tags": ["c++", "inline"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1560340826, "post_id": 56561745, "comment_id": 99702842, "body": "Usually one does that by examining the generated code. Is the code of the function used instead of a &quot;call&quot; instruction?"}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 3, "creation_date": 1560340909, "post_id": 56561745, "comment_id": 99702893, "body": "See <a href=\"http://godbolt.org\" rel=\"nofollow noreferrer\">godbolt.org</a>"}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 3, "creation_date": 1560340986, "post_id": 56561745, "comment_id": 99702936, "body": "Why exactly you would like that kind of information? This might change even between compilations of almost the same code."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "reply_to_user": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1560341349, "post_id": 56561745, "comment_id": 99703178, "body": "@Rados\u0142awCybulski i had a case lately where a student thought it was a good idea to decompile the given example program to avoid writing the code himself. The thing was that the compiler inlined a function and he just copied that so he had an empty function and the code of it in place. So maybe some kind of decompiling story?"}, {"owner": {"reputation": 89, "user_id": 11594134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/594bb0552b0ed6696d63ff599639ea92?s=128&d=identicon&r=PG&f=1", "display_name": "user11594134", "link": "https://stackoverflow.com/users/11594134/user11594134"}, "reply_to_user": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1560342345, "post_id": 56561745, "comment_id": 99703813, "body": "@Rados\u0142awCybulski, I am not exactly clear on this topic. Here is my thought. You cannot force the compiler to inline a complex function. But when a function is simply enough, the compiler might just inline this function itself. I am thinking of simplify some function to make them inline to get a performance boost. Are you suggesting that the same code, using the same version of compiler, you get different genarated code at different times? For example, this time the function is inline, next time it is not inline? Thanks for your time."}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1560342806, "post_id": 56561745, "comment_id": 99704073, "body": "More or less yes. Logic behind deciding, wherever to inline or not can get complicated. There&#39;re thresholds for amount of inlining code and those depends on compiler (and it&#39;s version). If you think making simplified functions will improve performance, do this and <b>measure</b> results. But don&#39;t go like - i&#39;m sure inlining improves performace so i&#39;ll force compiler to inline everything."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1560349504, "post_id": 56562537, "comment_id": 99708456, "body": "You could have the compiler print the assembly language of the function (that calls the inline function)."}], "tags": [], "owner": {"reputation": 453, "user_id": 11484423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYonn.jpg?s=128&g=1", "display_name": "05032 Mendicant Bias", "link": "https://stackoverflow.com/users/11484423/05032-mendicant-bias"}, "is_accepted": false, "score": 0, "last_activity_date": 1560343436, "creation_date": 1560343436, "answer_id": 56562537, "question_id": 56561745, "link": "https://stackoverflow.com/questions/56561745/if-there-a-way-to-tell-if-c-compiler-actually-inline-a-function-or-not/56562537#56562537", "title": "If there a way to tell if C++ compiler actually inline a function or not?", "body": "<p><code>inline</code> is a suggestion, but the compiler has the freedom to actually do it or not. As far as i know there is no way to force the compiler to inline, and I'd say the compiler knows better.</p>\n\n<p>To see if the compiler did it, I can think of two ways:</p>\n\n<ul>\n<li>Look at the binary output in debug mode and see if there is a call in place</li>\n<li>Add time profiling instructions. If the time decrease when you declare inline, it means the compiler did infact inline it.</li>\n</ul>\n"}], "owner": {"reputation": 89, "user_id": 11594134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/594bb0552b0ed6696d63ff599639ea92?s=128&d=identicon&r=PG&f=1", "display_name": "user11594134", "link": "https://stackoverflow.com/users/11594134/user11594134"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560343436, "creation_date": 1560340758, "question_id": 56561745, "link": "https://stackoverflow.com/questions/56561745/if-there-a-way-to-tell-if-c-compiler-actually-inline-a-function-or-not", "title": "If there a way to tell if C++ compiler actually inline a function or not?", "body": "<p>I just wonder if there is a way (like see generated assembly code or I do not know) to see if the C++ compiler actually inline a function? Thanks.</p>\n"}, {"tags": ["c++", "ssl", "https"], "answers": [{"tags": [], "owner": {"reputation": 741, "user_id": 613735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/67b9874dc01cfa2276fbbf7256d77a36?s=128&d=identicon&r=PG", "display_name": "Old newbie", "link": "https://stackoverflow.com/users/613735/old-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1560791128, "creation_date": 1560791128, "answer_id": 56635928, "question_id": 56561647, "link": "https://stackoverflow.com/questions/56561647/clarification-needed-about-a-ssl-client-using-boost-asio/56635928#56635928", "title": "Clarification needed about a SSL client using Boost asio", "body": "<p>I've found some useful information <a href=\"https://stackoverflow.com/questions/7324425/what-is-boostasiosslcontextload-verify-file-and-how-to-work-with-it\">here</a>. A good, albeit partial info, and a good start point to further search</p>\n"}], "owner": {"reputation": 741, "user_id": 613735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/67b9874dc01cfa2276fbbf7256d77a36?s=128&d=identicon&r=PG", "display_name": "Old newbie", "link": "https://stackoverflow.com/users/613735/old-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581688274, "creation_date": 1560340430, "last_edit_date": 1581688274, "question_id": 56561647, "link": "https://stackoverflow.com/questions/56561647/clarification-needed-about-a-ssl-client-using-boost-asio", "title": "Clarification needed about a SSL client using Boost asio", "body": "<p>I have a C++ application that uses Boost_asio to do TCP/IP connection who read a .php document in a Web server that in turn uses the php script to update certain statistics.</p>\n\n<p>The whole thing work as planned, but recently the server changed to use SSL (Google mandatory) and naturally, the previous connection stopped to work.</p>\n\n<p>After a lot of theoretical reading about SSL, I'm still in the dark about certain practical details.</p>\n\n<p>Using the example in the <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/example/cpp03/ssl/client.cpp\" rel=\"nofollow noreferrer\">Boost asio documentation</a> and a file \u201ccacert.pem\u201d, downloaded form somewhere following indications in <strong>this</strong> site, I'm able to run correctly the example using:</p>\n\n<pre><code>&lt;host&gt; = \u201cwww.google.com\u201d and &lt;port&gt; = \u201chttps\u201d.\n</code></pre>\n\n<p>Using the example \u201cas is\u201d, the Google server response is:</p>\n\n<blockquote>\n  <p>Verifying /OU=GlobalSign Root CA - R2/O=GlobalSign/CN=GlobalSign\n  Verifying /C=US/O=Google Trust Services/CN=Google Internet Authority G3\n  Verifying /C=US/ST=California/L=Mountain View/O=Google LLC/CN=www.google.com\n  Enter message: Reply:</p>\n</blockquote>\n\n<p>But when using</p>\n\n<pre><code>&lt;host&gt; =  \u201cwww.zator.com\u201d and &lt;port&gt; =  \u201chttps\u201d\n</code></pre>\n\n<p>my domain, hosted in 1&amp;1 IONOS, the reply is:</p>\n\n<blockquote>\n  <p>Handshake failed: tlsv1 alert internal error</p>\n</blockquote>\n\n<p>At this point I have <strong>several questions</strong>:</p>\n\n<p>What in the hell mean the sentence:  <code>ctx.load_verify_file(\"cacert.pem\");</code> ?</p>\n\n<p>The content of that file, can be the culprit of the fail when connecting with my domain?</p>\n\n<p>Is that sentence essential to complete the connection?</p>\n\n<p>In the case of google server (absence of error), is it supposed that after the sentence <code>io_context.run();</code> the connection has been correctly established?</p>\n\n<p>Assuming I make public the client's member <code>socket_</code> (private in the example), can I continue with some as (I can't test that in google :-)</p>\n\n<pre><code>std::string request(\"GET /mystatistics.php HTTP/1.1\\r\\n\\r\\n\");\nboost::asio::write(c.socket_, boost::asio::buffer(request));\nboost::system::error_code ec;\nstd::string response;\ndo {        // read response\n    char buf[1024];\n    size_t bytes_transferred = c.socket_.read_some(boost::asio::buffer(buf), ec);\n    if (!ec) response.append(buf, buf + bytes_transferred);\n} while (!ec);\nstd::cout &lt;&lt; \"Response received: '\" &lt;&lt; response &lt;&lt; \"'\\n\";\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "lambda", "stl", "set"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1560340007, "post_id": 56561451, "comment_id": 99702329, "body": "Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. The code you show doesn&#39;t use the lambda. Or perhaps that <i>is</i> the problem? That you don&#39;t tell the set to use your lambda, and instead it attempts to use some unspecified function?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1560340179, "post_id": 56561451, "comment_id": 99702433, "body": "Are you trying to set a predicate for <code>std::set</code> by doing this: <code>set&lt;int, function&lt;bool(int, int)&gt;&gt; S;</code>? If so, I don&#39;t think the syntax is correct."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1560340329, "post_id": 56561451, "comment_id": 99702527, "body": "You&#39;re capturing an empty map. Looking things up in it is a bad idea."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1560340332, "post_id": 56561451, "comment_id": 99702532, "body": "Also watch out that <code>[M]</code> &quot;captures by copy&quot;, meaning that changes to the <code>M</code> in the containing function won&#39;t have any effect on the <code>M</code> used inside the lambda. It looks like you want <code>[&amp;M]</code> to &quot;capture by reference&quot;. (But then make sure no copy of that <code>std::function</code> lives longer than <code>M</code>!)"}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1560340466, "post_id": 56561451, "comment_id": 99702607, "body": "Before using std::function&lt;&gt;, I was using auto and passing the type in the set using decltype(l) and it was not compiling so I tried this and it compiled. Should I upload the whole code?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1560340538, "post_id": 56561451, "comment_id": 99702642, "body": "@lucieon, try to write: <code>set&lt;int, l&gt; S;</code> instead."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560340557, "post_id": 56561451, "comment_id": 99702651, "body": "Perhaps <a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">this <code>std::set</code> reference</a> could be helpful? Especially <a href=\"https://en.cppreference.com/w/cpp/container/set/set\" rel=\"nofollow noreferrer\">the constructor reference</a>."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1560340613, "post_id": 56561451, "comment_id": 99702683, "body": "@vahancho I&#39;m getting error &quot;l is not a typename&quot;."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1560340659, "post_id": 56561451, "comment_id": 99702710, "body": "Typo.  <code>S.insert(i)</code> should be <code>S.insert(l)</code>.    That your reward for using variable names that are visually similar (<code>l</code> looks a lot like <code>i</code>, even if it isn&#39;t identical) for distinct variables.   Also, the lamda capture should use a reference, not capture by value."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1560340668, "post_id": 56561451, "comment_id": 99702722, "body": "@molbdnilo I tried [&amp;M] and still getting runtime error."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1560340765, "post_id": 56561451, "comment_id": 99702791, "body": "@Peter I want to enter the index i and S is a set of type int not of type of l."}], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1560341193, "post_id": 56561776, "comment_id": 99703063, "body": "I uploaded the complete code but I don&#39;t understand what you&#39;re saying, can you explain in detail? Edit: I tried passing l in the constructor of S but still the same error."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1560341291, "post_id": 56561776, "comment_id": 99703122, "body": "@lucieon You need to tell the set <code>S</code> to use your lambda."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1560341295, "post_id": 56561776, "comment_id": 99703126, "body": "What particularly you do not understand? You create your set <code>S</code> using default ctor which default initializes the functor hense you get the exception. I showed you the line you should fix."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560341643, "post_id": 56561776, "comment_id": 99703372, "body": "@Someprogrammerdude ok I forget to pass M by reference, it&#39;s working now. Thanks everybody!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1560341696, "post_id": 56561776, "comment_id": 99703404, "body": "Please do not change your code after you asked and answered, this invalidates answers"}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1560341802, "post_id": 56561776, "comment_id": 99703472, "body": "@Slava ok. I&#39;ll change it back to original. Thanks!"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1560341383, "last_edit_date": 1560341383, "creation_date": 1560340914, "answer_id": 56561776, "question_id": 56561451, "link": "https://stackoverflow.com/questions/56561451/error-bad-function-call-when-passing-lambda-to-stl-set/56561776#56561776", "title": "Error &quot;bad function call&quot; when passing lambda to STL set", "body": "<blockquote>\n  <p>I have this code inside a try-catch block and it's printing \"bad function call\"</p>\n</blockquote>\n\n<p>This happens when you try to invoke default initialized <code>std::function</code>:</p>\n\n<blockquote>\n  <p>std::bad_function_call if *this does not store a callable function target, i.e. !*this == true.</p>\n</blockquote>\n\n<p>provided in documentation of <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function/operator()\" rel=\"nofollow noreferrer\"><code>std::function&gt;::operator()</code></a></p>\n\n<p>You do not pass your functor to <code>std::set</code> constructor when you initialize the object as you using default ctor for <code>std::set</code>:</p>\n\n<pre><code>set&lt;int, function&lt;bool(int, int)&gt;&gt; S; \n</code></pre>\n\n<p>so this should be used instead:</p>\n\n<pre><code>set&lt;int, function&lt;bool(int, int)&gt;&gt; S( l ); \n</code></pre>\n\n<p>and your lambda should capture <code>M</code> by reference as any changes you made later on <code>M</code> would not be reflected in this lambda as it captures <code>M</code> by value.</p>\n"}], "owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560341617, "creation_date": 1560339863, "last_edit_date": 1560341617, "question_id": 56561451, "link": "https://stackoverflow.com/questions/56561451/error-bad-function-call-when-passing-lambda-to-stl-set", "title": "Error &quot;bad function call&quot; when passing lambda to STL set", "body": "<p>I'm trying to pass a lambda as a sorting criterion to a set of indices of type int. I have used an unordered_map to map the indices to their values and passed it by value to the lambda which takes two indices and returns bool.</p>\n\n<p>The code compiles but I'm getting \"bad function call\" error at run-time.</p>\n\n<p>I've used std::function&lt;> type wrapper to declare the lambda instead of using decltype() which was giving an error.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;functional&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    int T;\n    cin &gt;&gt; T;\n\n    while (T--)\n    {\n        int N;\n        cin &gt;&gt; N;\n\n        unordered_map&lt;int, int&gt; M;\n        function&lt;bool(int, int)&gt; l = [M](int i1, int i2)-&gt;bool { return M.at(i1) &gt; M.at(i2); };\n        set&lt;int, function&lt;bool(int, int)&gt;&gt; S;\n        for (int i = 1; i &lt;= N; ++i)\n        {\n            int p;\n            cin &gt;&gt; p;\n\n            M[i] = p;\n            S.insert(i);\n        }\n\n        vector&lt;vector&lt;int&gt;&gt; Adj(N + 1);\n        for (int i = 1; i &lt;= N - 1; ++i)\n        {\n            int u, v;\n            cin &gt;&gt; u &gt;&gt; v;\n\n            Adj[u].push_back(v);\n            Adj[v].push_back(u);\n        }\n\n        int maximum = 0;\n        for (int i = 1; i &lt;= N; ++i)\n        {\n            S.erase(i);\n            for (int e : Adj[i])\n                S.erase(e);\n            cout &lt;&lt; *S.cbegin() &lt;&lt; ' ';\n            for (int e : Adj[i])\n                S.insert(e);\n            S.insert(i);\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>1\n6\n5 10 15 20 25 30\n1 3\n2 3\n3 4\n4 5\n4 6\n</code></pre>\n\n<p>I have this code inside a try-catch block and it's printing \"bad function call\" when I enter the second value (10 in the input)</p>\n"}, {"tags": ["c++", "c++17", "stdarray"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560339871, "post_id": 56561419, "comment_id": 99702243, "body": "You say &quot;If using a std::vector it is extremely simple&quot; then why don&#39;t you?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560339919, "post_id": 56561419, "comment_id": 99702276, "body": "@nada this is like saying, why use a <code>std::array</code> at all when vector exists.."}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 1, "creation_date": 1560339923, "post_id": 56561419, "comment_id": 99702277, "body": "Just remember that <code>float</code> has significantly smaller value ranges than <code>double</code>..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1560339944, "post_id": 56561419, "comment_id": 99702291, "body": "&quot;obvious&quot; is a difficult term imho. What is the &quot;obvious&quot; implementation? Do you consider using <code>std::copy</code> already as boilerplate?"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 2, "creation_date": 1560339995, "post_id": 56561419, "comment_id": 99702321, "body": "@darune No, it&#39;s like saying &quot;If <i>in your case</i> std::vector fits better, then why not use it&quot;."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1560340297, "post_id": 56561419, "comment_id": 99702506, "body": "@nade but thats not how i scoped the question.."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 3, "creation_date": 1560341013, "post_id": 56561419, "comment_id": 99702953, "body": "What do you consider boilerplate?  Would a conversion function you can write once and stash away in a header somewhere count as boilerplate?  That&#39;s the only way I can think of to avoid extra clutter at the conversion site, but there&#39;s no standard conversion function I&#39;m aware of."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1560341168, "post_id": 56561419, "comment_id": 99703046, "body": "@MilesBudnek thats an acceptable answer if its the case. A solution involving boost, c++20 is also acceptable."}], "answers": [{"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1560340195, "post_id": 56561524, "comment_id": 99702444, "body": "That will not work with a const version eg. const std::array&lt;float, 100&gt;. Besides, the vector version is still simpler."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 2, "creation_date": 1560340544, "post_id": 56561524, "comment_id": 99702644, "body": "@darune If you need to initialize a <code>const std::array</code> this way, you&#39;ll have to wrap the initialization in a function or lambda that returns the <code>array</code>. The &quot;vector version&quot; isn&#39;t relevant. If you believe a <code>std::array</code> is better than a <code>std::vector</code> for your purpose, then you can&#39;t use <code>std::vector</code> functions. Containers have different interfaces because they are different things."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1560340706, "post_id": 56561524, "comment_id": 99702754, "body": "Thats what this question is all about. Im trying to avoid using lambda, boilerplate, whatever and looking for, a cleaner std (or boost, or even c++20) way to do it. Im taking you comment as: this is not possible."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 2, "creation_date": 1560340853, "post_id": 56561524, "comment_id": 99702853, "body": "&quot;How can I build a bookshelf without using any tools? It&#39;s easy if I build a sandwich.&quot;"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 3, "last_activity_date": 1560340043, "creation_date": 1560340043, "answer_id": 56561524, "question_id": 56561419, "link": "https://stackoverflow.com/questions/56561419/how-to-convert-stdarraydouble-100-to-stdarrayfloat-100-avoiding-obv/56561524#56561524", "title": "How to convert std::array&lt;double, 100&gt; to std::array&lt;float, 100&gt; ? (avoiding obvious boilerplate implementation)", "body": "<p>I doubt there's a one line solution, but in two lines:</p>\n\n<pre><code>std::array&lt;float, 100&gt; f_array;\nstd::copy(d_array.begin(), d_array.end(), f_array.begin());\n</code></pre>\n\n<p>See <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1560341965, "post_id": 56561912, "comment_id": 99703570, "body": "Thats actually a great idea. Im leaving the question open a bit to see if others respond."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1560346278, "post_id": 56561912, "comment_id": 99706374, "body": "@darune: Note that this solution is restricted to values of <code>N</code> that your compiler will support the use of variadic templates."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 3, "last_activity_date": 1560341398, "creation_date": 1560341398, "answer_id": 56561912, "question_id": 56561419, "link": "https://stackoverflow.com/questions/56561419/how-to-convert-stdarraydouble-100-to-stdarrayfloat-100-avoiding-obv/56561912#56561912", "title": "How to convert std::array&lt;double, 100&gt; to std::array&lt;float, 100&gt; ? (avoiding obvious boilerplate implementation)", "body": "<p>You could write a simple conversion function.  There aren't any existing standard or boost functions that I'm aware of, but it's fairly simple to implement:</p>\n\n<pre><code>template &lt;typename T, typename U, size_t N, size_t... Is&gt;\nstd::array&lt;T, N&gt; array_cast(const std::array&lt;U, N&gt;&amp; arr, std::index_sequence&lt;Is...&gt;) {\n    return { static_cast&lt;T&gt;(arr[Is])... };\n}\n\ntemplate &lt;typename T, typename U, size_t N&gt;\nstd::array&lt;T, N&gt; array_cast(const std::array&lt;U, N&gt;&amp; arr) {\n    return array_cast&lt;T&gt;(arr, std::make_index_sequence&lt;N&gt;());\n}\n</code></pre>\n\n<p>To use, just call <code>array_cast&lt;float&gt;(d_array)</code></p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/67fcf78492d11773\" rel=\"nofollow noreferrer\">Example</a></p>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1560365073, "post_id": 56565393, "comment_id": 99716244, "body": "@darune Absolutely, you are right. Fixed, thanks. Funny (and very informative) how some bad tests can hide some nasty bugs."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 2, "last_activity_date": 1560365012, "last_edit_date": 1560365012, "creation_date": 1560352201, "answer_id": 56565393, "question_id": 56561419, "link": "https://stackoverflow.com/questions/56561419/how-to-convert-stdarraydouble-100-to-stdarrayfloat-100-avoiding-obv/56565393#56565393", "title": "How to convert std::array&lt;double, 100&gt; to std::array&lt;float, 100&gt; ? (avoiding obvious boilerplate implementation)", "body": "<p>While <a href=\"https://stackoverflow.com/users/4151599/miles-budnek\">Miles Budnek</a>'s <a href=\"https://stackoverflow.com/a/56561912/4944425\">answer</a> solves OP's problem, it may fail if the array is too big (note that you are asking the compiler to generate and execute a function with N parameters). See e.g. this <a href=\"https://wandbox.org/permlink/9cyi4Bqb4wFGtnVe\" rel=\"nofollow noreferrer\">example</a>.</p>\n\n<p>An alternative could be to use a simple <code>for</code> loop, which, since C++14, is allowed inside <code>constexpr</code> functions.</p>\n\n<pre><code>template&lt; class R, class T, size_t N&gt;\nconstexpr std::array&lt;R, N&gt; array_copy(std::array&lt;T, N&gt; const &amp;src)\n{\n    std::array&lt;R, N&gt; tmp {};\n    for (size_t i{}; i &lt; N; ++i)\n        tmp[i] = static_cast&lt;R&gt;(src[i]);\n    return tmp;\n}\n</code></pre>\n\n<p>Live <a href=\"https://wandbox.org/permlink/yKlwbk1EhiCvjh6B\" rel=\"nofollow noreferrer\">HERE</a>.</p>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 56565393, "answer_count": 3, "score": 0, "last_activity_date": 1560365012, "creation_date": 1560339772, "last_edit_date": 1560340496, "question_id": 56561419, "link": "https://stackoverflow.com/questions/56561419/how-to-convert-stdarraydouble-100-to-stdarrayfloat-100-avoiding-obv", "title": "How to convert std::array&lt;double, 100&gt; to std::array&lt;float, 100&gt; ? (avoiding obvious boilerplate implementation)", "body": "<p>Suppose I have an <code>std::array</code> of doubles and would like it converted to floats:</p>\n\n<pre><code>std::array&lt;double, 100&gt; d_array{1,2,3};\nstd::array&lt;float, 100&gt; f_array; &lt;--convert it from d_array;\n</code></pre>\n\n<p>If using a <code>std::vector</code> it is extremely simple:</p>\n\n<pre><code>std::vector&lt;float&gt; f_array(d_array.begin(), d_array.end());\n</code></pre>\n\n<p>I know <code>std::array</code> is an aggreate type, so it seems I have to do some manual jumps on the spot in order to copy convert it to an array or is there a convenient way to do this ?</p>\n\n<p>I consider <code>std::copy</code> boilerplate as well eg.:</p>\n\n<pre><code>std::array&lt;float, 100&gt; f_array;\nstd::copy(d_array.begin(), d_array.end(), f_array.begin());\n</code></pre>\n\n<p>This is not simpler than the vector version and cannot be <a href=\"/questions/tagged/const\" class=\"post-tag\" title=\"show questions tagged &#39;const&#39;\" rel=\"tag\">const</a>:</p>\n\n<pre><code>const std::array&lt;float, 100&gt; f_array;\n</code></pre>\n\n<p>Thus ruining otherwise const-correct'ed code.</p>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1560339669, "post_id": 56561353, "comment_id": 99702131, "body": "How are you building it? Has stuff been optimised away? What happens on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a>?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1560339718, "post_id": 56561353, "comment_id": 99702158, "body": "Did you build it, with optimizations enabled? What was the output?"}, {"owner": {"reputation": 1329, "user_id": 1412887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEXsH.png?s=128&g=1", "display_name": "Pnemonic", "link": "https://stackoverflow.com/users/1412887/pnemonic"}, "edited": false, "score": 0, "creation_date": 1560340314, "post_id": 56561353, "comment_id": 99702521, "body": "doesn&#39;t seem like there would be a performance difference. it more about how you model your memory - which is more understandable to you."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11538796, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PR-tlenEtU8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl3ahAfNPVZQONQf4qHHkJd9nyDg/mo/photo.jpg?sz=128", "display_name": "Cybon", "link": "https://stackoverflow.com/users/11538796/cybon"}, "edited": false, "score": 0, "creation_date": 1560598950, "post_id": 56561889, "comment_id": 99794969, "body": "Yeah SIMD makes sense to me, but shouldn&#39;t SoA have an effect either way? It makes zero sense to me that these two constructions run the same. I am a complete noob in this area, but if it is the case that it&#39;s so specific then compilers absolutely suck."}], "tags": [], "owner": {"reputation": 311, "user_id": 11630848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aff2511098597fa8ce472473a042b2?s=128&d=identicon&r=PG&f=1", "display_name": "amlucas", "link": "https://stackoverflow.com/users/11630848/amlucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1560341330, "creation_date": 1560341330, "answer_id": 56561889, "question_id": 56561353, "link": "https://stackoverflow.com/questions/56561353/cant-find-a-performance-difference-between-aos-and-soa-in-c/56561889#56561889", "title": "Can&#39;t find a performance difference between AoS and SoA in C++", "body": "<p>SoA is beneficial to load or store your data with SIMD intrinsics, see e.g. <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=AVX&amp;cats=Load&amp;expand=3317\" rel=\"nofollow noreferrer\">https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=AVX&amp;cats=Load&amp;expand=3317</a> for intel AVX.</p>\n\n<p>Now in your specific case, you need to provide more information regarding the compiler options etc., but probably your specific case is not easy for the compiler to vectorize.\nI would suggest that you use independent instructions for each entry (here c depends on a) to perform more tests.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11538796, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PR-tlenEtU8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl3ahAfNPVZQONQf4qHHkJd9nyDg/mo/photo.jpg?sz=128", "display_name": "Cybon", "link": "https://stackoverflow.com/users/11538796/cybon"}, "edited": false, "score": 0, "creation_date": 1560531462, "post_id": 56561971, "comment_id": 99780757, "body": "I am using Visual Studio and put Runtime Checks to default and set Optimization to Ox and saw that AoS was 0s and SoA was 8s? I don&#39;t know how you are compiling it the way you are. I am trying to figure out a way to understand it&#39;s the application, and I just feel having to compile the code with a specific compiler and with a very specific setting is weird and makes it pretty much useless?"}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "reply_to_user": {"reputation": 21, "user_id": 11538796, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PR-tlenEtU8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl3ahAfNPVZQONQf4qHHkJd9nyDg/mo/photo.jpg?sz=128", "display_name": "Cybon", "link": "https://stackoverflow.com/users/11538796/cybon"}, "edited": false, "score": 0, "creation_date": 1561542676, "post_id": 56561971, "comment_id": 100095394, "body": "I just gave reference to the compiler I used for the sake of completeness. The results should not vary too much with respect to the compiler. Notwithstanding, you will find huge differences, if you compile to debug or release code. You need to enable the highest release optimisation level (which is for all mayor compilers -O3), in order to measure the best case performance."}], "tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 3, "last_activity_date": 1560408532, "last_edit_date": 1560408532, "creation_date": 1560341565, "answer_id": 56561971, "question_id": 56561353, "link": "https://stackoverflow.com/questions/56561353/cant-find-a-performance-difference-between-aos-and-soa-in-c/56561971#56561971", "title": "Can&#39;t find a performance difference between AoS and SoA in C++", "body": "<p>I compiled your code with the intel compiler 18.0.1 and optimisation turned on (<code>-O3</code>). I added some return value, just to make sure nothing can be optimised away.</p>\n\n<p>I found that Structure of Arrays (SoA) is approx twice as fast as  Array of Structures (AoS). This makes sence, since the quantity <code>B</code> will not be loaded into the cache from the slow memory (RAM) if you use the SoA approch, but it will occupy cache with the AoS approach. Please not that I changed the time resolution to nanoseconds. Otherwise, I always get <code>0s</code> as output.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nconst int iterations = 40000000;\n\nclass Entity {\n  public:\n    float a, b, c;\n};\n\nstruct Entities {\n  public:\n    float a[iterations];\n    float b[iterations];\n    float c[iterations];\n};\n\nint AoSTest(int iterations, Entity enArr[]);\n\nint SoATest(int iterations, Entities* entities);\n\nint main() {\n    Entity* enArr = new Entity[iterations];\n\n    Entities* entities = new Entities;\n\n    int A = rand() - 50;\n    int B = rand() - 50;\n    int C = rand() - 50;\n\n    for (int i = 0; i &lt; iterations; i++) {\n        enArr[i].a = A;\n        enArr[i].b = B;\n        enArr[i].c = C;\n\n        entities-&gt;a[i] = A;\n        entities-&gt;b[i] = B;\n        entities-&gt;c[i] = C;\n    }\n\n    auto start = std::chrono::high_resolution_clock::now();\n\n    //    const auto ret = AoSTest(iterations, enArr);\n    const auto ret = SoATest(iterations, entities);\n\n    auto finish = std::chrono::high_resolution_clock::now();\n    std::chrono::duration&lt;double&gt; elapsed = finish - start;\n\n    std::cout &lt;&lt; std::to_string(std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(finish - start).count()) + \"ns \"\n              &lt;&lt; \"ret=\" &lt;&lt; ret;\n}\n\nint AoSTest(int iterations, Entity enArr[]) {\n    for (int i = 0; i &lt; iterations; i++) {\n        enArr[i].a = sqrt(enArr[i].a * enArr[i].c);\n        enArr[i].c = sqrt(enArr[i].c * enArr[i].a);\n    }\n    return enArr[iterations - 1].c;\n}\n\nint SoATest(int iterations, Entities* entities) {\n    for (int i = 0; i &lt; iterations; i++) {\n        entities-&gt;a[i] = sqrt(entities-&gt;a[i] * entities-&gt;c[i]);\n        entities-&gt;c[i] = sqrt(entities-&gt;c[i] * entities-&gt;a[i]);\n    }\n    return entities-&gt;c[iterations - 1];\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11538796, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PR-tlenEtU8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl3ahAfNPVZQONQf4qHHkJd9nyDg/mo/photo.jpg?sz=128", "display_name": "Cybon", "link": "https://stackoverflow.com/users/11538796/cybon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1560691039, "creation_date": 1560339529, "last_edit_date": 1560691039, "question_id": 56561353, "link": "https://stackoverflow.com/questions/56561353/cant-find-a-performance-difference-between-aos-and-soa-in-c", "title": "Can&#39;t find a performance difference between AoS and SoA in C++", "body": "<p>I am trying to understand the difference between AoS and SoA in practical terms.</p>\n\n<p>I've tried this in C# and it yielded no result, so now I'm trying in C++. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nconst int iterations = 40000000;\n\nclass Entity {\npublic:\n    float a, b, c;\n};\n\nstruct Entities {\npublic:\n    float a[iterations];\n    float b[iterations];\n    float c[iterations];\n};\n\nvoid AoSTest(int iterations, Entity enArr[]);\n\nvoid SoATest(int iterations, Entities* entities);\n\nint main()\n{\n    Entity* enArr = new Entity[iterations];\n\n    Entities* entities = new Entities;\n\n    int A = rand() - 50;\n    int B = rand() - 50;\n    int C = rand() - 50;\n\n    for (int i = 0; i &lt; iterations; i++)\n    {\n        enArr[i].a = A;\n        enArr[i].b = B;\n        enArr[i].c = C;\n\n        entities-&gt;a[i] = A;\n        entities-&gt;b[i] = B;\n        entities-&gt;c[i] = C;\n    }\n\n    auto start = std::chrono::high_resolution_clock::now();\n\n    AoSTest(iterations, enArr);\n    //SoATest(iterations, entities);\n\n    auto finish = std::chrono::high_resolution_clock::now();\n    std::chrono::duration&lt;double&gt; elapsed = finish - start;\n\n    //std::cout &lt;&lt; std::to_string(elapsed.count()) + \"time\";\n    std::cout &lt;&lt; std::to_string(std::chrono::duration_cast&lt;std::chrono::seconds&gt;(finish - start).count()) + \"s\";\n}\n\nvoid AoSTest(int iterations, Entity enArr[]) {\n    for (int i = 0; i &lt; iterations; i++)\n    {   \n        enArr[i].a = sqrt(enArr[i].a * enArr[i].c);\n        enArr[i].c = sqrt(enArr[i].c * enArr[i].a);\n        //std::cout &lt;&lt; std::to_string(sqrt(enArr[i].a) + sqrt(enArr[i].b)) + \"\\n\";\n    }\n}\n\nvoid SoATest(int iterations, Entities* entities) {\n    for (int i = 0; i &lt; iterations; i++)\n    {\n        entities-&gt;a[i] = sqrt(entities-&gt;a[i] * entities-&gt;c[i]);\n        entities-&gt;c[i] = sqrt(entities-&gt;c[i] * entities-&gt;a[i]);\n        //std::cout &lt;&lt; std::to_string(sqrt(entities-&gt;a[i]) + sqrt(entities-&gt;b[i])) + \"\\n\";\n    }\n}\n</code></pre>\n\n<p>My thought was that since data layout, in theory, should be different there should be a performance difference...</p>\n\n<p>I don't understand why some say that there is a lot to gain here if it's so context sensitive as it seems to me thus far.</p>\n\n<p>Is it completely dependent on SIMD or some specific optimization option?</p>\n\n<p>I'm running it in Visual Studio.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1560339556, "post_id": 56561316, "comment_id": 99702062, "body": "my first guess is that he refers to libs like qt, they are well established, have a huge community, but still if possible you should prefer standard c++"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1560339803, "post_id": 56561316, "comment_id": 99702208, "body": "same link, sligthly different context &quot;...library so that the users of that subset must invent their own incompatible foundation libraries&quot; I think he does not use it as part of a strict terminology, but rather to refer to libraries in a general sense. I am voting to close as opionion-based, btw, because only BS can know what he really meant and after quick research I think there is no definite answer"}], "answers": [{"tags": [], "owner": {"reputation": 15754, "user_id": 9835872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN0Lq.jpg?s=128&g=1", "display_name": "ruohola", "link": "https://stackoverflow.com/users/9835872/ruohola"}, "is_accepted": true, "score": 0, "last_activity_date": 1560433638, "creation_date": 1560433638, "answer_id": 56581984, "question_id": 56561316, "link": "https://stackoverflow.com/questions/56561316/what-does-bjarne-stroustrup-mean-with-foundation-libraries-in-his-faq/56581984#56581984", "title": "What does Bjarne Stroustrup mean with &quot;foundation libraries&quot; in his FAQ?", "body": "<p>After searching around it's quite clear, that <em>foundation library</em> means a library, which defines a standard programming environment for a platform. There used to be many of these, from IBM, Borland, Microsoft, Sun, etc. Usually, they provide ways of interacting with the operating system, with graphics, databases, containers, and occasionally some algorithms.</p>\n"}], "owner": {"reputation": 15754, "user_id": 9835872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN0Lq.jpg?s=128&g=1", "display_name": "ruohola", "link": "https://stackoverflow.com/users/9835872/ruohola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 56581984, "answer_count": 1, "score": -1, "last_activity_date": 1560433638, "creation_date": 1560339436, "question_id": 56561316, "link": "https://stackoverflow.com/questions/56561316/what-does-bjarne-stroustrup-mean-with-foundation-libraries-in-his-faq", "title": "What does Bjarne Stroustrup mean with &quot;foundation libraries&quot; in his FAQ?", "body": "<p>I'm reading <a href=\"http://www.stroustrup.com/bs_faq.html\" rel=\"nofollow noreferrer\">Bjarne Stroustrup's FAQ</a>. In the section: <a href=\"http://www.stroustrup.com/bs_faq.html#recommend\" rel=\"nofollow noreferrer\"><em>What C++ compiler do you recommend? Which libraries?</em></a>, he says:</p>\n\n<blockquote>\n  <p>Also, where possible, prefer the standard library to <strong>non-standard \"foundation libraries\"</strong> and try to minimize use of proprietary extensions.</p>\n</blockquote>\n\n<p>What does this bolded part mean? What are <em>foundation libraries</em>?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "visual-studio-2019"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1560338050, "post_id": 56560710, "comment_id": 99701182, "body": "<a href=\"https://developercommunity.visualstudio.com/content/problem/167978/side-by-side-vs2015-vs2017-installing-latest-wdk-f.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/167978/&hellip;</a>"}], "owner": {"reputation": 51, "user_id": 11101679, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EDXVHe5gBM0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNpi_1lok6ksJZsr4ZmwOmcmf8EFA/mo/photo.jpg?sz=128", "display_name": "\u041e\u043b\u0435\u043a\u0441\u0456\u0439 \u041c\u0430\u043a\u043e\u0432\u0441\u044c\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/11101679/%d0%9e%d0%bb%d0%b5%d0%ba%d1%81%d1%96%d0%b9-%d0%9c%d0%b0%d0%ba%d0%be%d0%b2%d1%81%d1%8c%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 789, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1560350678, "creation_date": 1560337603, "last_edit_date": 1560350678, "question_id": 56560710, "link": "https://stackoverflow.com/questions/56560710/visual-studio-2019-broke-visual-studio-2015", "title": "Visual Studio 2019 broke Visual Studio 2015", "body": "<p>I have a next problem</p>\n\n<p>after installation Visual Studio 2019 Community and latest version of SDK/WDK stopped load <strong>driver projects</strong> in Visual Studio 2015. Near the project writes - \"not loaded\". When i try to reload project it is error:</p>\n\n<p><img src=\"https://i.imgur.com/XRTS2Rm.png\" alt=\"error\"></p>\n\n<p>I found the same problem but with vs2017.\nVisit <a href=\"https://developercommunity.visualstudio.com/content/problem/167978/side-by-side-vs2015-vs2017-installing-latest-wdk-f.html[/url]\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/167978/side-by-side-vs2015-vs2017-installing-latest-wdk-f.html[/url]</a>.\nI tried the solution with adding <code>&lt;_NT_TARGET_VERSION&gt;0x601&lt;/_NT_TARGET_VERSION&gt;</code> in PropertyGroup. After that the project started to load but when i try to build it i have an error like this -<a href=\"https://developercommunity.visualstudio.com/content/problem/485290/error-msb4062-the-validatenttargetversion-task-cou.html\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/485290/error-msb4062-the-validatenttargetversion-task-cou.html</a></p>\n\n<p>Maybe someone knows how to resolve conflict between vs2015 and vs2019? \nThanks for help.</p>\n"}, {"tags": ["c#", "c++", ".net", "com", "interop"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560360733, "post_id": 56560666, "comment_id": 99714342, "body": "There is more than one way, it depends on how the arguments are/should be passed, what side is doing the allocation, etc. But one thing for sure, you can&#39;t use just one double, out or not. If you&#39;re using p/invoke, it could be something like <code>[In, Out] double[] KFactors</code> (implies the C++ pre-allocates and has some ways to know the array size)"}, {"owner": {"reputation": 11, "user_id": 7168829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fef49c9bbb9a896d6329602125331?s=128&d=identicon&r=PG&f=1", "display_name": "user7168829", "link": "https://stackoverflow.com/users/7168829/user7168829"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560528135, "post_id": 56560666, "comment_id": 99779337, "body": "Could it be a mistake in the tlb file?  There are two very similar functions and one works ok, the other doesnt?"}, {"owner": {"reputation": 11, "user_id": 7168829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fef49c9bbb9a896d6329602125331?s=128&d=identicon&r=PG&f=1", "display_name": "user7168829", "link": "https://stackoverflow.com/users/7168829/user7168829"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560528281, "post_id": 56560666, "comment_id": 99779411, "body": "The working one has:                  [out] double** KFactors);  Not working one is:                       [out] double* KFactors);"}, {"owner": {"reputation": 11, "user_id": 7168829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fef49c9bbb9a896d6329602125331?s=128&d=identicon&r=PG&f=1", "display_name": "user7168829", "link": "https://stackoverflow.com/users/7168829/user7168829"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560528367, "post_id": 56560666, "comment_id": 99779459, "body": "I have no familiarity with IDL and not much with C++, but the above seems odd..."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560528614, "post_id": 56560666, "comment_id": 99779572, "body": "You have a .tlb? Some tlb cannot be used as is, from .NET, for example when the tlb results from an .idl that was not really thought for out-of-process/cross thread, etc. You need to show us improtant fragments of the .idl, C++ header and impl."}, {"owner": {"reputation": 11, "user_id": 7168829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fef49c9bbb9a896d6329602125331?s=128&d=identicon&r=PG&f=1", "display_name": "user7168829", "link": "https://stackoverflow.com/users/7168829/user7168829"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560529497, "post_id": 56560666, "comment_id": 99779946, "body": "I created the idl file from the tlb file, and of course it wont recompile back to a tlb!  Its about 45000 lines long, some of it works perfectly well with dot net, but one particular subroutine doesn&#39;t.  I&#39;m not sure which are the important fragments out of that file.  I do not have C++ code."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1560531590, "post_id": 56560666, "comment_id": 99780815, "body": "Hmmm... Sounds not too good... Try to extract what you can."}], "owner": {"reputation": 11, "user_id": 7168829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406fef49c9bbb9a896d6329602125331?s=128&d=identicon&r=PG&f=1", "display_name": "user7168829", "link": "https://stackoverflow.com/users/7168829/user7168829"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560356709, "creation_date": 1560337484, "last_edit_date": 1560356709, "question_id": 56560666, "link": "https://stackoverflow.com/questions/56560666/how-do-you-handle-a-out-double-paremeter-in-c-which-is-to-send-the-value-to-a-c", "title": "How do you handle a Out Double paremeter in C# which is to send the value to a C++ DLL (Retval to an array)", "body": "<p>I have a C++ program which is calling a C# program and one of the parameters in C# code is an Out Double, in the C++ code is a retval to an array.  So how do you create an array in C# and pass it back to the C++ program as a double?</p>\n\n<pre><code>public void ComputeKFactorsVL(double Temperature, double Pressure, IntPtr[] Compositions, out double KFactors)\n{\n}\n</code></pre>\n\n<p>Where KFactors is an array?</p>\n"}, {"tags": ["c++", "codeblocks", "wxwidgets", "wxmathplot"], "owner": {"reputation": 13, "user_id": 10940368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ecc2b37b1892ddf62cbbd5fd33f918?s=128&d=identicon&r=PG&f=1", "display_name": "kaban", "link": "https://stackoverflow.com/users/10940368/kaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560338120, "creation_date": 1560337364, "last_edit_date": 1560338120, "question_id": 56560620, "link": "https://stackoverflow.com/questions/56560620/wxframe-with-codeblock-unavailable-blocks-within-second-wxframe", "title": "wxFrame with Codeblock - unavailable blocks within second wxFrame", "body": "<p>I've got one question about wxSmith while worikng with CodeBlock.</p>\n\n<p>I've create application that can do simple signal processing. For a while now, I've only been using only one wxFrame called \"Naukaframe.wxs\", and few mpWindow placed on it, however i needed to create another wxFrame called \"Okno_startowe.wxs\" with few seperated mpWindows on it. </p>\n\n<p>While i was creating another wxFrame \"Okno_startowe.wxs\" I was not able to chose anything from Aui/Contrib/MathPlot tabs, however if i change back to main wxFrame, these tabs are still available.</p>\n\n<p>Let me show you what i mean with pictures.</p>\n\n<p>Here is main opened \"Naukaframe.wxs\"</p>\n\n<p><a href=\"https://pasteboard.co/Ij3LWCR.png\" rel=\"nofollow noreferrer\">available objects</a></p>\n\n<p>And here is second one created without available tabs.</p>\n\n<p><a href=\"https://pasteboard.co/Ij3uBv6.png\" rel=\"nofollow noreferrer\">unavailable objects</a></p>\n\n<p>I've tried to reincluding all of the files like mathplot.h, somehow still nothing changes. I expect to be able to use mpWindows (Mathplot in general) with every single wxFrame within my project.</p>\n"}, {"tags": ["c++", "vector", "std", "stdvector", "uint8t"], "comments": [{"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1560337315, "post_id": 56560566, "comment_id": 99700761, "body": "Have you tried <code>std::atoi</code>? <a href=\"https://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/atoi</a>"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 3, "creation_date": 1560337378, "post_id": 56560566, "comment_id": 99700800, "body": "What is <code>explode</code>? I don&#39;t recall there is a function called <code>explode</code> in the standard library."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560337381, "post_id": 56560566, "comment_id": 99700804, "body": "@Someprogrammerdude std::string uses char, I think he/she/x wants unsigned char instead"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1560337475, "post_id": 56560566, "comment_id": 99700854, "body": "Set the size of the destination vector (it should be the same as the source vector). Then use <a href=\"https://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a> with a <a href=\"https://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda</a> that calls <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\"><code>std::stoi</code></a> to convert the strings."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1560337587, "post_id": 56560566, "comment_id": 99700917, "body": "And remember that in most systems <code>uint8_t</code> is an alias of <code>unsigned char</code> and outputting a <code>char</code> (plain, signed or unsigned) will output that as a <i>character</i> and not a small integer. You need to <a href=\"https://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow noreferrer\">convert</a> the byte to an <code>unsigned</code>."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1560337907, "post_id": 56560566, "comment_id": 99701106, "body": "Problem this code should solve is badly defined. Also code it self doesn&#39;t explain the intent. So I have no idea what the actual problem is. For me it looks like <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a> - bad solution for some simple problem which is not explained."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1560338955, "post_id": 56560566, "comment_id": 99701701, "body": "If you could show us what the vector <code>v</code> actually contains, may be we could understand what you are really trying to do..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560339097, "post_id": 56560566, "comment_id": 99701784, "body": "Seems pretty clear that OP wants to interpret each string in a vector as the hex representation of a number, and lexically convert them to integers (<code>uint8_t</code>). This is certainly not the way to do it though. (Also the whole zero-width-space thing is completely irrelevant and should be abstracted away.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560339132, "post_id": 56560566, "comment_id": 99701798, "body": "In fact if I didn&#39;t also want to point out the UB this would just be Yet Another String To Int question to dupehammer!"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1560339211, "post_id": 56560566, "comment_id": 99701852, "body": "I believe <code>std::cout &lt;&lt; na &lt;&lt; std::endl;</code> will still try to print the <code>char</code> type, even after conversion to <code>uint8_t</code>. You need to cast them to an <code>int</code> to get a decimal number. And you need to use <code>std::cout &lt;&lt; std::hex &lt;&lt; na &lt;&lt; std::endl;</code> for a hexadecimal number."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560339472, "post_id": 56560566, "comment_id": 99702013, "body": "@jww Unfortunately it&#39;s not a decimal number but a fake view over the contents of a <code>std::string</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 10890264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nikz4.png?s=128&g=1", "display_name": "ShadowCode", "link": "https://stackoverflow.com/users/10890264/shadowcode"}, "edited": false, "score": 0, "creation_date": 1560349651, "post_id": 56561095, "comment_id": 99708535, "body": "I need it to be an uint8_t because its actually lot more that three numbers. Its actually a binary executable stored in an AES encryped format wich I unencrypt to then execute without having the unencrypted version stored on the Harddrive."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 313, "user_id": 10890264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nikz4.png?s=128&g=1", "display_name": "ShadowCode", "link": "https://stackoverflow.com/users/10890264/shadowcode"}, "edited": false, "score": 0, "creation_date": 1560349684, "post_id": 56561095, "comment_id": 99708562, "body": "@ShadowCode That&#39;s fine but you&#39;re producing your <code>uint8_t</code>s in a completely wrong way. You can&#39;t just slap a <code>reinterpret_cast</code> on some random object and get the job done. It doesn&#39;t perform &quot;logical&quot; transformation in the way you&#39;re apparently imagining, and it certainly doesn&#39;t do so on the constituent bytes of the machinery of a <code>std::string</code>."}, {"owner": {"reputation": 313, "user_id": 10890264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nikz4.png?s=128&g=1", "display_name": "ShadowCode", "link": "https://stackoverflow.com/users/10890264/shadowcode"}, "edited": false, "score": 0, "creation_date": 1560354948, "post_id": 56561095, "comment_id": 99711677, "body": "@ Lightness Races in Orbit yeah, I&#39;m not good at C++ / C. I now have slightly reworked the way i recieve the numbers. I now have a vector with ints. Now I want to convert one int at a time to hex and it to be an <code>uint8_t</code>. (I always just find int to hex string)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 313, "user_id": 10890264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nikz4.png?s=128&g=1", "display_name": "ShadowCode", "link": "https://stackoverflow.com/users/10890264/shadowcode"}, "edited": false, "score": 0, "creation_date": 1560355317, "post_id": 56561095, "comment_id": 99711865, "body": "@ShadowCode I linked to that topic. How to parse a string to obtain an <code>int</code> is well-covered here. But you do have to parse it. You can&#39;t just slap a cast on it!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1560339001, "last_edit_date": 1560339001, "creation_date": 1560338778, "answer_id": 56561095, "question_id": 56560566, "link": "https://stackoverflow.com/questions/56560566/how-to-convert-an-vector-of-strings-to-an-vector-of-uint8-t/56561095#56561095", "title": "How to convert an Vector of strings to an Vector of uint8_t", "body": "<pre><code>for (auto n : v)\n</code></pre>\n\n<p>This takes a copy of each thing in <code>v</code> which lives for the duration of the loop body.</p>\n\n<pre><code>uint8_t * p = reinterpret_cast &lt; uint8_t * &gt; ( &amp; n);\n</code></pre>\n\n<p>This gives you a pointer to the local copied thing after reinterpretation.</p>\n\n<pre><code>ob.push_back(p);\n</code></pre>\n\n<p>This stores the pointer into a vector.</p>\n\n<pre><code>}\n</code></pre>\n\n<p>This makes all those pointers dangling.</p>\n\n<p>To fix this UB, you could try <code>for (const auto&amp; n : v)</code> instead.</p>\n\n<p>However, there are other problems. Each of those \"things\" is a <code>std::string</code>! It is meaningless to cast a <code>std::string*</code> to <code>uint8_t*</code> and not really clear what you meant to achieve with that. Did you mean to cast the result of <code>n.c_str()</code> to <code>uint8_t*</code>? But then that is not really achieving anything either.</p>\n\n<p>I think you need to look into <a href=\"https://stackoverflow.com/q/4801146/560648\">a better way to <em>interpret</em> a sequence of characters as a number and convert it to an integer</a>.</p>\n"}], "owner": {"reputation": 313, "user_id": 10890264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nikz4.png?s=128&g=1", "display_name": "ShadowCode", "link": "https://stackoverflow.com/users/10890264/shadowcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561063487, "creation_date": 1560337166, "last_edit_date": 1561063487, "question_id": 56560566, "link": "https://stackoverflow.com/questions/56560566/how-to-convert-an-vector-of-strings-to-an-vector-of-uint8-t", "title": "How to convert an Vector of strings to an Vector of uint8_t", "body": "<h2>Short Version:</h2>\n\n<p>I have a String: <code>0x4D;0x90;0x69</code></p>\n\n<p>I want an array</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>static const uint8_t array[] = {\n    0x4D, 0x90, 0x69\n} \n</code></pre>\n\n<p>How to do?</p>\n\n<p>\u200b</p>\n\n<h2>Longer Version:</h2>\n\n<p>I have an String (<code>buffer</code>) with like this: <code>0x4D\u200b0x90\u200b0x69</code> between those hex \"numbers\" are Zero Width Spaces, and I split those up into a vector of strings using</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;std::string&gt; v{ explode(buffer, '\\u200B') };\n</code></pre>\n\n<p>I want for to have an Vector with <code>uint8_t</code> data in it.</p>\n\n<p>I already tried to reinterpret_cast the string, and that actually worked. But I have put it in a forloop an it should push the result into an <code>uint8_t</code> Vector, but in the Vector were only <code>0x00</code> in it.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector &lt; std::string &gt; v {\n  explode(buffer, '\\u200B')\n};\nstd::vector &lt; uint8_t * &gt; ob;\nfor (auto n: v) {\n  uint8_t * p = reinterpret_cast &lt; uint8_t * &gt; ( &amp; n);\n  //std::cout &lt;&lt; n &lt;&lt; \" | \" &lt;&lt; p &lt;&lt; std::endl;\n  ob.push_back(p);\n};\n\nfor (auto na : ob) std::cout &lt;&lt; na &lt;&lt; std::endl;\n</code></pre>\n\n<p>I only get three 0x00 in the console.</p>\n\n<p>I want to have an <code>static const uint8_t arr[]</code> containing the <code>buffer</code> splited up.</p>\n\n<p>Edit:\nI have forgot to add the <code>explode</code>function here, its basicly just a split. ```cpp</p>\n\n<pre><code>const std::vector&lt;std::string&gt; explode(const std::string&amp; s, const char&amp; c)\n{\n    std::string buff{ \"\" };\n    std::vector&lt;std::string&gt; v;\n    for (auto n : s)\n    {\n        if (n != c) buff += n; else\n            if (n == c &amp;&amp; buff != \"\") { v.push_back(buff); buff = \"\"; }\n    }\n    if (buff != \"\") v.push_back(buff);\n\n    return v;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1560339205, "post_id": 56560463, "comment_id": 99701847, "body": "@Evg I typed the code without testing it so I type the full path to not risk. Also, the project shown is simplified one that closely represents the real project, but I will not type the full path in my real project. And I did use <code>add_subdirectory</code>."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1560339322, "post_id": 56560463, "comment_id": 99701923, "body": "You can run <code>make VERBOSE=1</code> and see which directories go into <code>-I</code> option."}, {"owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1560339602, "post_id": 56560463, "comment_id": 99702092, "body": "I only use <code>project</code> in <code>project&#47;CMakeLists.txt</code>. I have edited the post to make this clear."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1560339896, "post_id": 56560463, "comment_id": 99702262, "body": "I&#39;ve just replicated your example, and cannot reproduce the problem. <code>-I&lt;prefix&gt;&#47;subproject&#47;include -I&lt;prefix&gt;&#47;include</code> options are passed to the compiler."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1560340225, "post_id": 56560463, "comment_id": 99702462, "body": "I would just go with <code>target_include_directories(example PRIVATE &quot;${PROJECT_CURRENT_BINARY_DIR}&#47;..&#47;include&quot;)</code>"}, {"owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "edited": false, "score": 0, "creation_date": 1560340893, "post_id": 56560463, "comment_id": 99702879, "body": "I think I will need to update my examples with real ones then."}, {"owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1560341314, "post_id": 56560463, "comment_id": 99703144, "body": "@Evg The command line args is like yours, but it gives an error. It might have to do with other things then."}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1560346121, "post_id": 56560463, "comment_id": 99706272, "body": "@KamilCuk I agree. It looks like the OP is essentially adding the same directory twice in this command: <code>target_include_directories(example PUBLIC &quot;include&quot; PRIVATE &quot;${PROJECT_SOURCE_DIR}&#47;include&quot;)</code>. You need <code>..</code> to grab the <code>include</code> folder from the parent directory..."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "is_accepted": true, "score": 0, "last_activity_date": 1560401062, "creation_date": 1560401062, "answer_id": 56573494, "question_id": 56560463, "link": "https://stackoverflow.com/questions/56560463/how-to-access-headers-in-an-include-directory-from-headers-in-another-include-di/56573494#56573494", "title": "How to access headers in an include directory from headers in another include directory?", "body": "<p>Let's say my project is like this:</p>\n\n<pre><code>project\n|---include\n|   |---common.h\n|---library\n|---executable\n</code></pre>\n\n<p><code>project/CMakeLists.txt</code>:</p>\n\n<pre><code>project(example)\nadd_subdirectory(library)\nadd_subdirectory(executable)\n</code></pre>\n\n<p><code>project/library/CMakeLists.txt</code>:</p>\n\n<pre><code>add_library(lib ...)\ntarget_include_directories(lib PRIVATE \"../include\")\n</code></pre>\n\n<p><code>project/executable/CMakeLists.txt</code>:</p>\n\n<pre><code>add_executable(exe ...)\ntarget_link_libraries(exe lib)\n</code></pre>\n\n<p>If I try to access <code>common.h</code> from files in <code>executable</code>, then the compiler will complain about the error mentioned above. This is caused by that PRIVATE include headers will not be included in its dependants.</p>\n\n<p><strong>The solution is to add this to <code>project/projectB/CMakeLists.txt</code>: <code>target_include_directories(exe PRIVATE \"../include\")</code></strong></p>\n"}], "owner": {"reputation": 1, "user_id": 9341868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--lhDVNWjPns/AAAAAAAAAAI/AAAAAAAAAAs/XYmajWWVRmM/photo.jpg?sz=128", "display_name": "William So", "link": "https://stackoverflow.com/users/9341868/william-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56573494, "answer_count": 1, "score": 0, "last_activity_date": 1560401062, "creation_date": 1560336809, "last_edit_date": 1560392116, "question_id": 56560463, "link": "https://stackoverflow.com/questions/56560463/how-to-access-headers-in-an-include-directory-from-headers-in-another-include-di", "title": "How to access headers in an include directory from headers in another include directory?", "body": "<p>I am trying to include multiple directories using target_include_directories in one target, but headers in one include directory cannot access headers in another include directory. How do I solve this problem?</p>\n\n<p>I tried putting the header files into add_library, but it doesn't help.\nI have also searched here for two hours just now, but I cannot seem to find anything about it.</p>\n\n<p>I am using VC++ by the way.</p>\n\n<p><em>The following project is simplified, the real project is <a href=\"https://github.com/etaoinshrdlcumwfgypbvkjxqzaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/unnamed\" rel=\"nofollow noreferrer\">here</a>.</em></p>\n\n<p>Project structure:</p>\n\n<pre><code>project\n|-- CMakeLists.txt\n|-- include\n|   |-- project_header.h\n|-- subproject\n|   |-- CMakeLists.txt\n|   |-- include\n|   |   |-- subproject_header.h\n|   |-- ...\n|-- ...\n</code></pre>\n\n<p><code>project/CMakeLists.txt</code>:</p>\n\n<pre><code>project(\"example\")\nadd_subdirectory(\"subproject\")\n</code></pre>\n\n<p><code>project/subproject/CMakeLists.txt</code>:</p>\n\n<pre><code>add_executable(example \"${PROJECT_SOURCE_DIR}/subproject/source/main.hpp\")\nset_target_properties(example PUBLIC_HEADER \"${PROJECT_SOURCE_DIR}/subproject/include/subproject_header.h\" PRIVATE_HEADER \"${PROJECT_SOURCE_DIR}/include/project_header.h\"\ntarget_include_directories(example PUBLIC \"include\" PRIVATE \"${PROJECT_SOURCE_DIR}/include\")\n</code></pre>\n\n<p>The problem is when I type this into <code>project/subproject/include/subproject_header.h</code>:</p>\n\n<pre><code>...\n#include \"project_header.h\"\n...\n</code></pre>\n\n<p>This will produce an error: <code>fatal error C1083: Cannot open include file: 'project_header.h': No such file or directory</code></p>\n\n<p>How do I solve this problem?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The problem seems to have fixed itself after using <code>..</code> instead of <code>${PROJECT_SOURCE_DIR}</code>. Then I change it back to <code>${PROJECT_SOURCE_DIR}</code> and it still works. Is this related to caching?</p>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1560336887, "post_id": 56560444, "comment_id": 99700513, "body": "Unrelated to your problem, but please read <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>"}, {"owner": {"reputation": 284, "user_id": 11562467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLZx.png?s=128&g=1", "display_name": "rjg", "link": "https://stackoverflow.com/users/11562467/rjg"}, "edited": false, "score": 0, "creation_date": 1560336909, "post_id": 56560444, "comment_id": 99700529, "body": "Just a quick guess, but <code>auto</code> probably infers that the result is unsigned, unlike <code>int</code>."}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 1, "creation_date": 1560336910, "post_id": 56560444, "comment_id": 99700530, "body": "auto will default <code>i</code> to <code>std::size_t</code> but you defined <code>i</code> as an <code>int</code>, which is a signed number."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 4, "creation_date": 1560336947, "post_id": 56560444, "comment_id": 99700555, "body": "<code>arr.size()</code> is an unsigned integer. <code>arr.size() - 2</code> is unsigned. <code>i &gt; -1</code> is equivalent to <code>i &gt; 4294967295</code> which is always false. So the array doesn&#39;t change."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1560337055, "post_id": 56560444, "comment_id": 99700626, "body": "Also, <a href=\"https://stackoverflow.com/q/1452721/9716597\">why is <code>using namespace std;</code> considered bad practice?</a>"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 3, "creation_date": 1560337649, "post_id": 56560444, "comment_id": 99700957, "body": "Turn on <a href=\"https://gcc.godbolt.org/z/dGp3nD\" rel=\"nofollow noreferrer\">compiler warnings</a>"}], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 6024572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa06a94c677c04a72eceba9db3c10d0?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Singh", "link": "https://stackoverflow.com/users/6024572/gaurav-singh"}, "edited": false, "score": 2, "creation_date": 1560337200, "post_id": 56560522, "comment_id": 99700703, "body": "&quot;the loop will loop forever&quot; then how is OP getting an output?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 438, "user_id": 6024572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa06a94c677c04a72eceba9db3c10d0?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Singh", "link": "https://stackoverflow.com/users/6024572/gaurav-singh"}, "edited": false, "score": 0, "creation_date": 1560338928, "post_id": 56560522, "comment_id": 99701687, "body": "@GauravSingh The behaviour of an unconditionally infinite loop is undefined (unless the loop does certain things, which this loop doesn&#39;t)."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "edited": false, "score": 0, "creation_date": 1560341071, "post_id": 56560522, "comment_id": 99702982, "body": "@Kamil Cuk It does not enter into the loop as well with auto keyword."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "edited": false, "score": 0, "creation_date": 1560344116, "post_id": 56560522, "comment_id": 99704895, "body": "@chinmaya When <code>int</code> is used it <i>does</i> enter the loop. When <code>auto</code> is used it doesn&#39;t, just as Kamil wrote in his edit before you commented."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1560401969, "post_id": 56560522, "comment_id": 99725341, "body": "Yup @TedLyngmo i got that later and i appreciate for those who responded to my query. Thanks a lot."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 4, "last_activity_date": 1560337601, "last_edit_date": 1560337601, "creation_date": 1560337013, "answer_id": 56560522, "question_id": 56560444, "link": "https://stackoverflow.com/questions/56560444/issue-with-auto-keyword-in-c/56560522#56560522", "title": "Issue with Auto keyword in C++", "body": "<p>The return value of <code>arr.size()</code> function has unsigned type <code>std::size_t</code>. If variable is <code>auto i</code>, it becomes <code>std::size_t</code> type too. As it is unsigned, it can never reach a value below 0.</p>\n\n<pre><code>for(; i &gt; -1; --i)\n</code></pre>\n\n<p><code>-1</code> is converted here to an unsigned value, most probably to <code>std::numeric_limits&lt;size_t&gt;::max()</code> or <code>SIZE_MAX</code>. As, in such case, <code>i</code> will never be greater then this value, the loop will never enter.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1560341279, "creation_date": 1560341279, "answer_id": 56561877, "question_id": 56560444, "link": "https://stackoverflow.com/questions/56560444/issue-with-auto-keyword-in-c/56561877#56561877", "title": "Issue with Auto keyword in C++", "body": "<p><code>auto i = arr.size() - 2</code> makes <code>i</code> a variable of type <code>std::size_t</code> which is an <code>unsigned</code> integer. It can never be negative. The comparison with <code>-1</code> promotes <code>-1</code> to <code>size_t</code> by adding <code>std::numeric_limits&lt;std::size_t&gt;::max() + 1</code> to it.\nYour <code>i</code> can't ever be greater than that so the loop will never be entered.</p>\n\n<p>You could rescue your condition with <code>for(; i != static_cast&lt;decltype(i)&gt;(-1); --i)</code> or better, use <code>std::rotate</code>:  </p>\n\n<pre><code>#include &lt;algorithm&gt; // std::rotate\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::array&lt;int, 8&gt; arr = {1, 2, 3, 4, 5, 6, 7, 8};\n\n    std::rotate(arr.begin(), std::prev(arr.end()), arr.end());\n\n    for(auto i : arr) std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Do not use the header <code>&lt;bits/stdc++.h&gt;</code>. It's non-standard and you'll never know if you get what you need, but you will for sure include much else that you don't need.</p>\n"}], "owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 56561877, "answer_count": 2, "score": 1, "last_activity_date": 1560341279, "creation_date": 1560336762, "question_id": 56560444, "link": "https://stackoverflow.com/questions/56560444/issue-with-auto-keyword-in-c", "title": "Issue with Auto keyword in C++", "body": "<p>I have written a code to rotate an array of integers cyclically.\nFor e.g.\nGiven array - 1 2 3 4 5 6 7 8\nOutput array- 8 1 2 3 4 5 6 7</p>\n\n<p>The problem what i am facing is, if i use auto keyword in some point then it gives weird result what is beyond my understanding. Would anyone please help me in summarizing the problem ?</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;bits/stdc++.h&gt;\n#include &lt;typeinfo&gt;\nusing namespace std;\n\nvoid rotate_one_by_one(array&lt;int, 8&gt; &amp;arr)\n{\n    auto temp = arr[arr.size() - 1];\n    //auto i = arr.size() - 2; // Output : 1 2 3 4 5 6 7 8 \n    int i = arr.size() - 2;    // Output : 8 1 2 3 4 5 6 7\n\n    for(; i &gt; -1; --i)\n    {\n        arr[i+1] = arr[i];\n    }\n    arr.at(i+1) = temp;\n}\n\nvoid cyc_rotate(array&lt;int, 8&gt; &amp;arr)\n{\n    rotate_one_by_one(arr);\n\n    cout&lt;&lt;\"After cyclic rotate\\n\";\n    for(auto n : arr)\n        cout&lt;&lt;n&lt;&lt;\" \";\n}\n\nint main()\n{\n    array&lt;int, 8&gt; arr = {1,2,3,4,5,6,7,8};\n\n    cyc_rotate(arr);\n    return 0;\n}\n</code></pre>\n\n<p>Please find the commented line in the code where i have mentioned the output for using auto and int type. If anyone still not able to get what i am trying to convey then please let me know.</p>\n"}, {"tags": ["c++", "linux", "ros", "ros2"], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 11923286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6998eee0e8f86bdd85902f148333df9?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio", "link": "https://stackoverflow.com/users/11923286/ignacio"}, "is_accepted": false, "score": 1, "last_activity_date": 1567705757, "last_edit_date": 1592644375, "creation_date": 1567705757, "answer_id": 57810705, "question_id": 56560309, "link": "https://stackoverflow.com/questions/56560309/how-to-link-shared-library-in-ament-tool-ros/57810705#57810705", "title": "How to link shared library in Ament Tool ROS", "body": "<p>Perhaps you should use <code>ament_export</code> in LibA <code>CMakeLists.txt</code>, <a href=\"https://index.ros.org//doc/ros2/Tutorials/Ament-CMake-Documentation/\" rel=\"nofollow noreferrer\">this page</a> from ROS2 should help</p>\n<pre><code># CMakeLists.txt for LibA\nadd_library(LibA SHARED src/LibA.cpp)\nament_target_dependencies(LibA rclcpp)\nament_export_interfaces(export_LibA HAS_LIBRARY_TARGET)\nament_export_libraries(LibA)\nament_export_include_directories(include)\nament_export_dependencies(\n    ament_cmake\n    rclcpp\n)\ninstall(\n    TARGETS LibA\n    EXPORT export_LibA\n    LIBRARY DESTINATION lib/${PROJECT_NAME}\n    ARCHIVE DESTINATION lib/${PROJECT_NAME}\n    RUNTIME DESTINATION lib/${PROJECT_NAME}\n)\ninstall(\n    DIRECTORY include/\n    DESTINATION include\n)\n</code></pre>\n<p>and then in <code>CMakeLists.txt</code> from LibB you should have</p>\n<pre><code># CMakeLists.txt for LibB\nfind_package(LibA REQUIRED)\nadd_library(LibB SHARED src/LibB.cpp)\ntarget_include_directories(LibB PUBLIC\n    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n    $&lt;INSTALL_INTERFACE:include&gt;\n)\nament_target_dependencies(LibB\n    rclcpp\n    LibA\n)\nament_export_libraries(LibB)\nament_export_include_directories(include)\nament_export_dependencies(\n    rclcpp\n    LibA\n)\ninstall(\n    TARGETS LibB\n    EXPORT export_LibB\n    LIBRARY DESTINATION lib/${PROJECT_NAME}\n    ARCHIVE DESTINATION lib/${PROJECT_NAME}\n    RUNTIME DESTINATION lib/${PROJECT_NAME}\n)\ninstall(\n    DIRECTORY include/\n    DESTINATION include\n)\n</code></pre>\n<p>To use <code>LibA</code> and <code>LibB</code> with <code>AppB</code>, I think you need to use <code>ament_target_dependencies</code> with <code>LibB</code> as argument and then use <code>add_executable()</code> function</p>\n<p>I think you could change the <code>&lt;build_depend&gt;</code> tag for <code>&lt;depend&gt;</code></p>\n"}], "owner": {"reputation": 1110, "user_id": 2575252, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/249c3534798c49d13126c3e40830e3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jai", "link": "https://stackoverflow.com/users/2575252/jai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567705757, "creation_date": 1560336349, "question_id": 56560309, "link": "https://stackoverflow.com/questions/56560309/how-to-link-shared-library-in-ament-tool-ros", "title": "How to link shared library in Ament Tool ROS", "body": "<p>I am building my packages with ROS ament tools. structure is as below</p>\n\n<pre><code>LibA (build as shared library)\n\nLibB (depends on LibA &amp; build as shared library)\n\nAppB (depends on LinB)\n</code></pre>\n\n<p>in package.xml of LibB. I specified dependency as ...</p>\n\n<pre><code>package.xml (under dir LibB)\n\n&lt;build_depend&gt;libA&lt;/build_depend&gt;\n</code></pre>\n\n<p>in package.xml of AppB. I specified dependency as ...</p>\n\n<pre><code>package.xml (under dir AppB)\n\n&lt;build_depend&gt;libA&lt;/build_depend&gt;\n&lt;build_depend&gt;libB&lt;/build_depend&gt;\n</code></pre>\n\n<p>Now build order is correct as ..</p>\n\n<pre><code># Topological order\n - libA\n - libB\n - AppB\n</code></pre>\n\n<p>Now issue starts when bulding AppB, and it can't find link for LibA and LibB.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How can I link LibA to LibB ? (what syntax should I use)</p>\n\n<p>How can I link LibA,LibB to AppB ?</p>\n"}, {"tags": ["c++", "macos", "sockets", "udp", "compare"], "comments": [{"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1560336513, "post_id": 56560286, "comment_id": 99700325, "body": "please add a  Minimal, Reproducible Example <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> and add the correct code formatting tags to your code."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1560370756, "post_id": 56560286, "comment_id": 99718705, "body": "There are no <code>SOCKADDR</code> structs that carry MAC addresses, but there are that carry IP addresses (ie, <code>sockaddr_in</code>, <code>sockaddr_in6</code>). Why do you think you are able to get a MAC address from a socket API? What are you really trying to compare here?"}], "owner": {"reputation": 11, "user_id": 11636204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a987e24f86e8d938db536a1823789ec?s=128&d=identicon&r=PG&f=1", "display_name": "Belis", "link": "https://stackoverflow.com/users/11636204/belis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1597226561, "creation_date": 1560336282, "last_edit_date": 1597226561, "question_id": 56560286, "link": "https://stackoverflow.com/questions/56560286/how-to-compare-sockaddr-storage-address-with-int6-mac-data", "title": "How to compare SOCKADDR_STORAGE address with int[6] mac data?", "body": "<p>I have problem with comparing MAC address.\nMy sender address is created as SOCKADDR_STORAGE structure, and the second one is ineger table witch 6 elements.</p>\n<p>My question is which parts of SOCKADDR_STORAGE I have to compare with int[6] mac address?</p>\n<p>I need this comparison for one if condition.</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1560336430, "post_id": 56560209, "comment_id": 99700275, "body": "Your code is too complex. Can you reduce your code to form a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11157650"}, "edited": false, "score": 0, "creation_date": 1560337074, "post_id": 56560349, "comment_id": 99700636, "body": "I see, putting these 2 into enums namespace works, but what is ADL lookup? I saw these terms in std headers I think. so there is no way to keep the out of enums namespace?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11157650"}, "edited": false, "score": 0, "creation_date": 1560337698, "post_id": 56560349, "comment_id": 99700987, "body": "Thank you a lot for answer, I understand the problem after reading this: <a href=\"https://stackoverflow.com/questions/8111677/what-is-argument-dependent-lookup-aka-adl-or-koenig-lookup\" title=\"what is argument dependent lookup aka adl or koenig lookup\">stackoverflow.com/questions/8111677/&hellip;</a>"}], "tags": [], "owner": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1560336479, "creation_date": 1560336479, "answer_id": 56560349, "question_id": 56560209, "link": "https://stackoverflow.com/questions/56560209/implementing-stderror-category-name-resolution-problem-when-used-with-custom/56560349#56560349", "title": "implementing std::error_category, name resolution problem when used with custom namespaces", "body": "<p>While I would personally recommend that you put the enums in the same namespace as the category, the key problem is the <code>make_error_condition</code> and <code>make_error_code</code> functions must be in the same namespace as the enums.  Both the <code>std::error_code</code> and <code>std::error_condition</code> constructors perform an ADL lookup of those two functions.</p>\n\n<pre><code>inline std::error_condition make_error_condition(enums::Condition ec) noexcept\ninline std::error_code make_error_code(enums::Error code) noexcept\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11157650"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 56560349, "answer_count": 1, "score": 1, "last_activity_date": 1560336479, "creation_date": 1560336036, "question_id": 56560209, "link": "https://stackoverflow.com/questions/56560209/implementing-stderror-category-name-resolution-problem-when-used-with-custom", "title": "implementing std::error_category, name resolution problem when used with custom namespaces", "body": "<p><strong>In short</strong>, problem is name resolution.</p>\n\n<p><strong>Explanation:</strong>\nI'm enumerating error codes and use them to derive/implement <code>std::error_condition</code> class, however there is a problem when wrapping implementation into 2 separate namespaces, one for enums and one for code implementation.</p>\n\n<p>It's not easy to explain so I made a minimum compilable code which you can just copy/paste into editor and try to compile.</p>\n\n<p>I've put a (NOTE:) comment on top of a code which is what I do to make the code compile, but I need separate namespaces as shown in the code below but name resolution doesn't work, and I don't know how to fix it.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;system_error&gt;\n\n\n// *NOTE*: if we rename this from 'enums' to 'app' (comment below) and do\n// the needed name change changes in the code it will compile just fine\n//namespace app\nnamespace enums\n{\n    // error type enum\n    enum class Error\n    {\n        SignalFail,         // failed to set up or execute signal\n        BadArgument,        // bad argument passed to function\n        InvalidPointer,     // Pointer is invalid\n        NoImplementation,   // No implementation\n        OutOfRange,         // Out of range\n        AlocationFailed,    // Failed to alocate memory\n        MemoryReadFailed,   // Failed to read memory\n        Unexpected          // Unexpected execution flow\n    };\n\n    // error condition enum\n    enum class Condition\n    {\n        code_error,\n        unknown_error\n    };\n}\n\n// Register Error and Condition as error enum and condition enum\nnamespace std\n{\n    template&lt;&gt;\n    struct is_error_code_enum&lt;enums::Error&gt; :\n        public true_type {};\n\n    template&lt;&gt;\n    struct is_error_condition_enum&lt;enums::Condition&gt; :\n        public true_type {};\n}\n\nnamespace app\n{\n    // Category types are used to identify the source of an error.\n    // They also define the relation between error_code and error_condition objects of its category,\n    // as well as the message set for error_code objects.\n    class error_category_t :\n        public std::error_category\n    {\n    public:\n        error_category_t() noexcept {};\n        inline const char* name() const noexcept override;\n        std::error_condition default_error_condition(int err_value) const noexcept override;\n        inline bool equivalent(const std::error_code&amp; err_code, int err_value) const noexcept override;\n        inline bool equivalent(int err_value, const std::error_condition&amp; err_cond) const noexcept override;\n        std::string message(int ev) const override;\n    private:\n        error_category_t(const error_category_t&amp;) = delete;\n        error_category_t(error_category_t&amp;&amp;) = delete;\n        error_category_t&amp; operator=(const error_category_t&amp;) = delete;\n        error_category_t&amp; operator=(error_category_t&amp;&amp;) = delete;\n    } const error_category;\n\n    const char* error_category_t::name() const noexcept\n    {\n        return \"app category\";\n    }\n\n    bool error_category_t::equivalent(const std::error_code&amp; err_code, int err_value) const noexcept\n    {\n        return *this == err_code.category() &amp;&amp;\n            static_cast&lt;int&gt;(default_error_condition(err_code.value()).value()) == err_value;\n    }\n\n    bool error_category_t::equivalent(int err_value, const std::error_condition&amp; err_cond) const noexcept\n    {\n        return default_error_condition(err_value) == err_cond;\n    }\n\n    //\n    // make_error_condition overload to generate custom conditions:\n    // This function is called by error_condition's constructor for error condition enum types,\n    // and should be overloaded for all custom error condition enum types in order to\n    // provide a mechanism to generate the appropriate error_condition objects from them.\n    //\n    inline std::error_condition make_error_condition(enums::Condition ec) noexcept\n    {\n        return std::error_condition(static_cast&lt;int&gt;(ec), error_category);\n    }\n\n    //\n    // This function is called by error_code's constructor for error code enum types\n    //\n    inline std::error_code make_error_code(enums::Error code) noexcept\n    {\n        return std::error_code(static_cast&lt;int&gt;(code), error_category);\n    }\n}\n\nnamespace app\n{\n    std::error_condition error_category_t::default_error_condition(int err_value) const noexcept\n    {\n        switch (static_cast&lt;enums::Error&gt;(err_value))\n        {\n        case enums::Error::SignalFail:\n        case enums::Error::BadArgument:\n        case enums::Error::InvalidPointer:\n        case enums::Error::NoImplementation:\n        case enums::Error::OutOfRange:\n        case enums::Error::AlocationFailed:\n        case enums::Error::MemoryReadFailed:\n        case enums::Error::Unexpected:\n            return std::error_condition(enums::Condition::code_error);\n        default:\n            return std::error_condition(enums::Condition::unknown_error);\n        }\n    }\n\n    std::string error_category_t::message(int err_value) const\n    {\n        switch (static_cast&lt;enums::Error&gt;(err_value))\n        {\n        case enums::Error::SignalFail:\n            return \"Signaling failed\";\n        case enums::Error::BadArgument:\n            return \"Bad Argument\";\n        case enums::Error::InvalidPointer:\n            return \"Invalid pointer\";\n        case enums::Error::NoImplementation:\n            return \"No implementation\";\n        case enums::Error::OutOfRange:\n            return \"Out of range\";\n        case enums::Error::AlocationFailed:\n            return \"Memory allocation failed\";\n        case enums::Error::MemoryReadFailed:\n            return \"Memory read failed\";\n        case enums::Error::Unexpected:\n            return \"Unexpected execution flow\";\n        default:\n            return \"Unknown error\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560336695, "post_id": 56560177, "comment_id": 99700420, "body": "<code>std::function</code> doesn&#39;t have operator == to compare with other <code>std::function</code>."}, {"owner": {"reputation": 161, "user_id": 1853164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74c3411ad32b8e026567cb5c946e6ae6?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyam", "link": "https://stackoverflow.com/users/1853164/chaitanyam"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560336747, "post_id": 56560177, "comment_id": 99700448, "body": "correct. but how do I workaround this?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1560337150, "post_id": 56560177, "comment_id": 99700673, "body": "Do you really need to check for equality? <code>EXPECT_CALL(*mock, GetFilesFromDirectory(_, _)).WillOnce(::testing::ReturnArg&lt;1&gt;())</code> might do the job."}, {"owner": {"reputation": 161, "user_id": 1853164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74c3411ad32b8e026567cb5c946e6ae6?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyam", "link": "https://stackoverflow.com/users/1853164/chaitanyam"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560337992, "post_id": 56560177, "comment_id": 99701149, "body": "No, I don&#39;t want to check the equality and it worked...!. Thanks...:)"}], "owner": {"reputation": 161, "user_id": 1853164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74c3411ad32b8e026567cb5c946e6ae6?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyam", "link": "https://stackoverflow.com/users/1853164/chaitanyam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560335924, "creation_date": 1560335924, "question_id": 56560177, "link": "https://stackoverflow.com/questions/56560177/compilation-failed-for-gmock-expect-call-for-a-function-that-takes-lambda-as-an", "title": "compilation failed for gmock expect_call for a function that takes lambda as an argument", "body": "<p>I am writing unit tests for my class using gtest/gmock. The compilation of unit test code fails.</p>\n\n<p>mock declaration is</p>\n\n<pre><code>MOCK_METHOD2(GetFilesFromDirectory, std::shared_ptr&lt;std::list&lt;WIN32_FIND_DATAW&gt;&gt;(const std::wstring &amp;directory, std::function&lt;bool(const WIN32_FIND_DATAW &amp;)&gt; filter));\n</code></pre>\n\n<p>Then I write an EXPECT_CALL for this method in other method's test case as below and the compilation fails.</p>\n\n<pre><code>std::function&lt;bool(const WIN32_FIND_DATAW &amp;)&gt; filesFilter = [](const WIN32_FIND_DATAW &amp;fileData) -&gt; bool {\n    return true;\n};\n\nEXPECT_CALL(*mock, GetFilesFromDirectory(std::wstring(L\"testDirectory\"), filesFilter)).WillOnce(Return(fileListPtr));\n</code></pre>\n\n<p>The error I get is</p>\n\n<p><strong>Error C2678   binary '==': no operator found which takes a left-hand operand of type 'const std::function' (or there is no acceptable conversion)</strong></p>\n\n<p>I would like to know why this error occurs and how I can fix this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1560336572, "post_id": 56560099, "comment_id": 99700356, "body": "you don&#39;t have <code>-</code> in your regex to handle negative numbers..."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1560337214, "post_id": 56560099, "comment_id": 99700705, "body": "RegExp is great as a configuration options, but crappy as a part of code. They are hard to read (so hard to maintain). It is easy to write something which looks correct, but fails in some corner case and since it is hard to read it is hard to fix this mistakes. That is why I&#39;m saying just use two <code>QLineEdit</code>s with integer validation."}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 6223604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/fgRcJ.jpg?s=128&g=1", "display_name": "TheRight", "link": "https://stackoverflow.com/users/6223604/theright"}, "edited": false, "score": 0, "creation_date": 1560337104, "post_id": 56560484, "comment_id": 99700651, "body": "Doesn&#39;t work. i think it&#39;s for JS code not work with QRegExp"}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 510, "user_id": 6223604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/fgRcJ.jpg?s=128&g=1", "display_name": "TheRight", "link": "https://stackoverflow.com/users/6223604/theright"}, "edited": false, "score": 0, "creation_date": 1560337229, "post_id": 56560484, "comment_id": 99700711, "body": "Seems like <code>[[:space:]]</code> is not recognized by every flavor of regex. I&#39;ve edited the answer, try it again please."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1560337291, "post_id": 56560484, "comment_id": 99700748, "body": "Use C++11 raw string literals to avoid problems with backslash, which you have and that is why it doesn&#39;t work for OP."}, {"owner": {"reputation": 510, "user_id": 6223604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/fgRcJ.jpg?s=128&g=1", "display_name": "TheRight", "link": "https://stackoverflow.com/users/6223604/theright"}, "edited": false, "score": 0, "creation_date": 1560337408, "post_id": 56560484, "comment_id": 99700824, "body": "i can&#39;t enter anything in myLineEdit. i think you regExp block any input data @SilvanoCerza"}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1560337468, "post_id": 56560484, "comment_id": 99700848, "body": "@MarekR is right, thanks for the edit. Try again with the new edit please."}], "tags": [], "owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "is_accepted": true, "score": 0, "last_activity_date": 1560337427, "last_edit_date": 1560337427, "creation_date": 1560336900, "answer_id": 56560484, "question_id": 56560099, "link": "https://stackoverflow.com/questions/56560099/how-to-match-between-positive-and-negative-integer/56560484#56560484", "title": "How to match between positive and negative integer", "body": "<p>I think this should work for your input, it validates the whole line instead of each number separately. It also handles positive numbers with <code>+</code> sign.</p>\n\n<pre><code>QString name_rx = R\"re(^(\\+?\\-?\\d*\\s?)*$)re\";\n</code></pre>\n\n<p>I tested it on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> using the below string if that might help.</p>\n\n<pre><code>15 -987 144745 4 -98 11 2 125\n-98 -3242 +123\n+15 -23\n10                                 -20100\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 6223604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/fgRcJ.jpg?s=128&g=1", "display_name": "TheRight", "link": "https://stackoverflow.com/users/6223604/theright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 56560484, "answer_count": 1, "score": 1, "last_activity_date": 1560432503, "creation_date": 1560335666, "last_edit_date": 1560432503, "question_id": 56560099, "link": "https://stackoverflow.com/questions/56560099/how-to-match-between-positive-and-negative-integer", "title": "How to match between positive and negative integer", "body": "<p>I want to add a RegExp in QLineEdit to have the possibility to enter positive and negative integer separate by 1 or n whitespace.</p>\n\n<p>So i try </p>\n\n<pre><code>QString name_rx = \"[0-9]+\\\\s+[0-9]+\";\nQRegExp rx;\nrx.setPattern(name_rx);\nQValidator* validator = new QRegExpValidator(rx, this); \nui.LE_ObjectName-&gt;setValidator(validator);\n</code></pre>\n\n<p>I expect the output of the algorithm to be for example :</p>\n\n<p>15 -987   144745 4 -98 11 2    125</p>\n"}, {"tags": ["c++", "memory-management", "language-lawyer", "lifetime", "explicit-destructor-call"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1560333915, "post_id": 56559504, "comment_id": 99698959, "body": "Please add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to aid interpreting your question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560333917, "post_id": 56559504, "comment_id": 99698960, "body": "I think we need a code snippet. What do you mean by &quot;call a non-trivial destructor&quot;?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1560334101, "post_id": 56559504, "comment_id": 99699059, "body": "non-trivial and noop seems contradictory"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1560334172, "post_id": 56559504, "comment_id": 99699103, "body": "I barely call destructors explicitly, if trivial, my optimizer will do its job. So I don&#39;t see much of a reason to skip it, can you share your code for some insights?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1560334255, "post_id": 56559504, "comment_id": 99699150, "body": "There are very few circumstances where your code will directly call a destructor.    Generally the destructor will be called when the object&#39;s life ends.   If the object is created with a <code>new</code> expression, then the destructor is called by the corresponding <code>delete</code> expression.   A <code>delete</code> expression does nothing on a null pointer.   For a trivial type, the compiler will take care of clean-up as required.   For a non-trivial type, you should not prevent the destructor being called - i.e. you must ensure the object&#39;s life ends when needed, so the destructor is called."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1560334508, "post_id": 56559504, "comment_id": 99699276, "body": "added an example to explain my point"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1560334542, "post_id": 56559504, "comment_id": 99699293, "body": "You can deallocate an array with single object <code>delete</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1560336695, "post_id": 56559879, "comment_id": 99700421, "body": "is the placement new required even for trivial type like int ?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1560336936, "post_id": 56559879, "comment_id": 99700551, "body": "@Tyker I think so, because you haven&#39;t started the array&#39;s lifetime otherwise"}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1560336990, "post_id": 56559879, "comment_id": 99700585, "body": "yes but C code does this all the time so i thought it was legal for trivial types."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 2, "creation_date": 1560337163, "post_id": 56559879, "comment_id": 99700679, "body": "C++ is not C. I would caution against trying to trick C++ into not doing &quot;noop&quot; things, because you are likely to arrive at undefined behaviour. If you instead let the compiler do it&#39;s job, the generated output is likely to be the minimal thing you intend"}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1560337446, "post_id": 56559879, "comment_id": 99700842, "body": "i agree that it is risky but it can bring improvement in performances. for example if a whole data structure is allocated using the same costum allocator and the allocator can free the memory. you can just stop using the data structure and ask the allocator to free. instead of going thought it and calling all destructors. this is my use case"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1560337696, "post_id": 56559879, "comment_id": 99700985, "body": "No, it won&#39;t. <code>new (A.Allocate(10 * sizeof(int))) int[10];</code> compiled by g++ will result in the same object code as <code>(int *)malloc(10 * sizeof(int))</code> compiled by gcc."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1560337950, "post_id": 56559879, "comment_id": 99701131, "body": "for the placement the new case it can&#39;t bring better performances i agree and i will use it because it is free and safer. but i was talking about not calling destructors when they aren&#39;t needed. sorry i didn&#39;t make it clear."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 2, "creation_date": 1560338649, "post_id": 56559879, "comment_id": 99701537, "body": "@Tyker \u2022 Trust the C++ optimizer to eliminate the noop destructor if it is really not needed.  Don&#39;t try to hand-optimize it out, because therein lies the tightrope over the pit of UB."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 10, "last_activity_date": 1560336530, "last_edit_date": 1560336530, "creation_date": 1560334927, "answer_id": 56559879, "question_id": 56559504, "link": "https://stackoverflow.com/questions/56559504/is-it-required-to-call-a-non-trivial-destructor-when-it-is-a-noop/56559879#56559879", "title": "is it required to call a non-trivial destructor when it is a noop?", "body": "<p>No.</p>\n\n<blockquote>\n  <p>For an object of a class type with a non-trivial destructor, the program is not required to call the destructor explicitly before the storage which the object occupies is reused or released; however, if there is no explicit call to the destructor or if a <a href=\"http://eel.is/c++draft/expr.delete#nt:delete-expression\" rel=\"nofollow noreferrer\"><em>delete-expression</em></a> (<a href=\"http://eel.is/c++draft/expr.delete\" rel=\"nofollow noreferrer\"><code>[expr.delete]</code></a>) is not used to release the storage, the destructor shall not be implicitly called and any program that depends on the side effects produced by the destructor has undefined behavior.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/basic.life#5\" rel=\"nofollow noreferrer\"><code>[basic.life]</code></a></p>\n\n<p>You are not depending on any side-effects of <code>~C</code>, so you don't have undefined behavior.</p>\n\n<p>N.B. you should probably placement <code>new[]</code> your <code>A.Allocate</code>'d <code>int[10]</code></p>\n\n<pre><code>C(Allocator&amp; A) {\n    ptr = new (A.Allocate(10 * sizeof(int))) int[10];\n    need_cleanup = false;\n}\n</code></pre>\n"}], "owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 56559879, "answer_count": 1, "score": 5, "last_activity_date": 1560336530, "creation_date": 1560333817, "last_edit_date": 1560334598, "question_id": 56559504, "link": "https://stackoverflow.com/questions/56559504/is-it-required-to-call-a-non-trivial-destructor-when-it-is-a-noop", "title": "is it required to call a non-trivial destructor when it is a noop?", "body": "<p>is it required by the standard to call non-trivial destructor when you know that in this specific case the destructor is a noop ?</p>\n\n<p>is the code likely to be broken by compliers if the destructor is not called ?</p>\n\n<p>the use case is a class that contain a dynamicly allocated pointer. by default this pointer is obtained by <code>new</code> in the constructor. this class can also get its dynamicly allocated pointer from an allocator. the class keeps track of how it obtained its pointer and calls <code>delete</code> in the destrucor if the pointer was obtained by <code>new</code> and nothing if it was obtained by the allocator because the allocator will free the memory. the data stored in the dynamic memory is only trivial type so their destructor doesn't need to be called.</p>\n\n<p>so the question is do i still need to call the destructor on the class if i know that it obtained its pointer via the allocator so the destructor is a noop ?</p>\n\n<p>this is a minimal simplified example everything not directly related to the issue was removed.</p>\n\n<pre><code>struct Allocator {\n    void* ptr = nullptr;\n    void* Allocate(size_t size) {\n        ptr = malloc(size);\n        return ptr;\n    }\n    ~Allocator() { // allocator will cleanup\n        if (ptr)\n            free(ptr);\n    }\n};\n\nstruct C {\n    int* ptr;\n    bool need_cleanup;\n    C() {\n        ptr = new int[10];\n        need_cleanup = true;\n    }\n    C(Allocator&amp; A) {\n        ptr = (int*)A.Allocate(10 * sizeof(int));\n        need_cleanup = false;\n    }\n    ~C() { // non-triviall because user-defined.\n        if (need_cleanup)\n            delete[] ptr;\n        // noop if need_cleanup is false.\n    }\n};\n\nint main()\n{\n    Allocator A;\n    alignas(C) char buffer[sizeof(C)];\n    C* c = new(buffer) C(A);\n    /// is it required to call c-&gt;~C();\n}\n</code></pre>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560334040, "post_id": 56559491, "comment_id": 99699024, "body": "From the SDL docs: <a href=\"https://sdl.beuc.net/sdl.wiki/Mix_LoadWAV\" rel=\"nofollow noreferrer\">sdl.beuc.net/sdl.wiki/Mix_LoadWAV</a>. So I would  convert it to OGG (or any other of the listed things) and see if it works. In any case, I myself have had bad experience with format support in SDL_mixer, but maybe we both are doing something wrong. The docs aren&#39;t very clear about the audio format specifics :/"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1560334442, "post_id": 56559491, "comment_id": 99699244, "body": "Also, I am not sure SDL_mixer is the right thing for what you are trying to do. I&#39;d suggest switching to a more sophisticated audio library (you can try looking <a href=\"http://en.cppreference.com/w/cpp/links/libs\" rel=\"nofollow noreferrer\">here</a>, because I&#39;d bet, you will run into other limitations of SDL even after you resolve this issue at hand."}, {"owner": {"reputation": 1401, "user_id": 2401996, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nKCzg.png?s=128&g=1", "display_name": "j0h", "link": "https://stackoverflow.com/users/2401996/j0h"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 1, "creation_date": 1560460025, "post_id": 56559491, "comment_id": 99754839, "body": "I just tried Mix_LoadMUS() instead of Mix_LoadWAV() and it seems like it might work. It would seem Mix_LoadWAV isnt for all wav files Mix_LoadMUS seems to open other wavs fine. Its confusing though, I tried finding clear documentation on what the difference between a wav and a wav music file is. I tried making my live recordings into mono chanel wave files, but that didnt help."}], "owner": {"reputation": 1401, "user_id": 2401996, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nKCzg.png?s=128&g=1", "display_name": "j0h", "link": "https://stackoverflow.com/users/2401996/j0h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560333776, "creation_date": 1560333776, "question_id": 56559491, "link": "https://stackoverflow.com/questions/56559491/sdl-mix-loadwav-crashes-on-loading-some-wav-files", "title": "SDL MIX_LOADWAV() crashes on loading some wav files", "body": "<p>I have a C++ Program that loads wave files. and accepts keystrokes to function as a piano. Recently, I tried changing the wav files from notes from the internet, to live recording notes. The only difference in the files might be that the live recordings are in stereo. in any event, when I give Mix_LoadWAV(a.wav) it returns null [For example, all the live recordings load null]. </p>\n\n<p>Is there any limitions to the sdl 1.2 MIX_LOADWAV() I should konw about?</p>\n\n<pre><code>bool LoadFiles()\n{\n    Background = LoadImage(\"graphics/background.bmp\");\n\n    cNote = Mix_LoadWAV(\"notes/c.wav\" );\n    csNote = Mix_LoadWAV(\"notes/cs.wav\" );\n    dNote = Mix_LoadWAV(\"notes/d.wav\" );\n    dsNote = Mix_LoadWAV(\"notes/ds.wav\" );\n    eNote = Mix_LoadWAV(\"notes/e.wav\" );\n    fNote = Mix_LoadWAV(\"notes/f.wav\" );\n    fsNote = Mix_LoadWAV(\"notes/fs.wav\" );\n    gNote = Mix_LoadWAV(\"notes/g.wav\" );\n    gsNote = Mix_LoadWAV(\"notes/gs.wav\" );\n    aNote = Mix_LoadWAV(\"notes/a.wav\" );\n    asNote = Mix_LoadWAV(\"notes/as.wav\" );\n    bNote = Mix_LoadWAV(\"notes/b.wav\" );\n    highCNote = Mix_LoadWAV(\"notes/highC.wav\" );\n\n    if(Background == NULL || cNote == NULL || csNote == NULL || dNote == NULL || dsNote == NULL || eNote == NULL || fNote == NULL || fsNote == NULL || gNote == NULL || gsNote == NULL || aNote == NULL || asNote == NULL || bNote == NULL || highCNote == NULL)\n    {\n        printf(\"File load error\\n\");\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n"}]