[{"tags": ["c++", "ssl", "https", "self-signed"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1467850683, "post_id": 38235655, "comment_id": 63893148, "body": "<code>URLDownloadToFile()</code> does not use <code>GetLastError()</code>, it returns the error code as an <code>HRESULT</code>. What is that value? <code>URLDownloadToFile()</code> uses WinInet, which is the same library used by Internet Explorer. The certificate in question should be trusted by IE first, did you install the certificate chain beforehand?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1467850857, "post_id": 38235655, "comment_id": 63893191, "body": "Otherwise, try implementing an <code>IBindStatusCallback</code> object to pass to <code>URLDownloadToFile()</code>, and have that object also implement <code>IHttpSecurity</code> and <code>IWindowForBindingUI</code>. <code>URLDownloadToFile()</code> will query the <code>IBindStatusCallback</code> for <code>IHttpSecurity</code>, which has an <code>OnSecurityProblem</code> callback.  When displaying a dialog from <code>IHttpSecurity</code>, <code>URLDownloadToFile()</code> will query for <code>IWindowForBindingUI</code>, which has a <code>GetWindow()</code> callback to get the owner HWND to use for the dialog. This should allow you to see a popup warning about the certificate (and maybe also accept/reject it?)."}, {"owner": {"reputation": 123, "user_id": 6182909, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/63923266977d6f872bc6efe5b299c7cb?s=128&d=identicon&r=PG&f=1", "display_name": "t3ntman", "link": "https://stackoverflow.com/users/6182909/t3ntman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467851115, "post_id": 38235655, "comment_id": 63893253, "body": "I will try that, and post back with details. Thanks!"}, {"owner": {"reputation": 123, "user_id": 6182909, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/63923266977d6f872bc6efe5b299c7cb?s=128&d=identicon&r=PG&f=1", "display_name": "t3ntman", "link": "https://stackoverflow.com/users/6182909/t3ntman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1467851197, "post_id": 38235655, "comment_id": 63893278, "body": "HRESULT Output: HRESULT -2146697191 (0x800C0019) &quot;The Secure Sockets Layer (SSL) certificate is invalid.&quot; so it&#39;s definitely related to the certificate. Unfortunately, installing the certificate chain is not an option."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467852062, "post_id": 38235655, "comment_id": 63893476, "body": "0x800C0019 is <code>INET_E_INVALID_CERTIFICATE</code> (see error codes in <code>urlmon.h</code>). Try using WinInet/WinHTTP directly so you can <a href=\"https://support.microsoft.com/en-us/kb/168151\" rel=\"nofollow noreferrer\">send your own HTTPS request</a>, then you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa385114.aspx\" rel=\"nofollow noreferrer\"><code>InternetSetOption()</code></a> to disable certificate errors. Or use a 3rd party HTTPS library, such as <a href=\"https://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\">libcurl</a> with its <a href=\"https://curl.haxx.se/libcurl/c/CURLOPT_SSL_VERIFYPEER.html\" rel=\"nofollow noreferrer\"><code>CURLOPT_SSL_VERIFYPEER</code></a> option disabled."}, {"owner": {"reputation": 530, "user_id": 2854011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f9a2dff542835c2f723c704eff5d66?s=128&d=identicon&r=PG&f=1", "display_name": "JBartlau", "link": "https://stackoverflow.com/users/2854011/jbartlau"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551952593, "post_id": 38235655, "comment_id": 96832626, "body": "The link from @RemyLebeau &#39;s comment is not valid anymore. <a href=\"https://gist.github.com/lxfly2000/e1392e2fb92d60b1640570ae9af10f3d\" rel=\"nofollow noreferrer\">Here</a> is some sample code on GitHub referring to the same article."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 15283019, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/dfa0cbd0ab75d807e7eb9aa5300ed8ab?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/15283019/markus"}, "is_accepted": false, "score": 0, "last_activity_date": 1614256742, "creation_date": 1614256742, "answer_id": 66368651, "question_id": 38235655, "link": "https://stackoverflow.com/questions/38235655/urldownloadtofile-not-working-with-self-signed-certificate/66368651#66368651", "title": "URLDownloadToFile() not working with self-signed certificate", "body": "<p>For me it helps to add the root certificate to the trusted certificate list. It wasn't included there.</p>\n"}], "owner": {"reputation": 123, "user_id": 6182909, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/63923266977d6f872bc6efe5b299c7cb?s=128&d=identicon&r=PG&f=1", "display_name": "t3ntman", "link": "https://stackoverflow.com/users/6182909/t3ntman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614256742, "creation_date": 1467849347, "question_id": 38235655, "link": "https://stackoverflow.com/questions/38235655/urldownloadtofile-not-working-with-self-signed-certificate", "title": "URLDownloadToFile() not working with self-signed certificate", "body": "<p>I'm using a self-signed certificate for HTTPS communication. The code below works with HTTP, but not with HTTPS. Running GetLastError() afterwards returns 0. I scoured online, but couldn't find anything that would explain why URLDownloadToFile() won't work with self-signed certificates. Any advice?</p>\n\n<pre><code>wstring Url = L\"https://192.168.1.100/uploads/test.txt\";\nwstring Path = L\"C:\\\\Users\\\\user\\\\Desktop\\\\test.txt\";\n\nURLDownloadToFile(NULL, Url.c_str(), Path.c_str(), 0, NULL);\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "multidimensional-array", "arduino"], "comments": [{"owner": {"reputation": 777, "user_id": 3680715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GtneH.png?s=128&g=1", "display_name": "Pieter de Vries", "link": "https://stackoverflow.com/users/3680715/pieter-de-vries"}, "edited": false, "score": 1, "creation_date": 1467849458, "post_id": 38235645, "comment_id": 63892833, "body": "check which array is the biggest then manipulate the rest to add 0&#39;s to make the rows match the add them all together."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1467849477, "post_id": 38235645, "comment_id": 63892837, "body": "I&#39;d bet you&#39;ll need some more braces. Get some from my side <code>{{ x, y }, { z, 43 }}</code>. Well, seriously: Use <code>std::vector&lt;std::vector&lt;int8_t&gt;&gt;</code>."}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1467849663, "post_id": 38235645, "comment_id": 63892887, "body": "<code>What must one do to make an array of arrays of different element sizes?</code> in C++ .. you could use an <a href=\"http://www.cplusplus.com/reference/stl/\" rel=\"nofollow noreferrer\">STL container</a>"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1467849695, "post_id": 38235645, "comment_id": 63892897, "body": "In C++ the bounds of the array are not part of the array data itself.  It&#39;s elsewhere (e.g., in the type, or in some variable you maintain yourself).  So, where are you going to put the information on the size of each array that is an element of your top-level array?  When you answer that you&#39;ll begin to see how to structure your arrays by wrapping a class around the whole thing, or around each element-array, or both."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467850340, "post_id": 38235645, "comment_id": 63893066, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I was just reading about STL vectors today, so your answer makes perfect sense. However, this will be running on an 8-bit ATTiny microcontroller with 512 bytes RAM and ~3kB available flash memory space. I haven&#39;t tried using the STL vector class on one of these, but I imagine it takes up a little extra memory I can&#39;t spare."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1467850751, "post_id": 38235645, "comment_id": 63893164, "body": "@GabrielStaples If you want to have certain sizes and to allocate on the stack you may consider using <code>std::array&lt;&gt;</code>instead."}, {"owner": {"reputation": 56, "user_id": 6538420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83dda28ee33a3aeec6055d5e981f410?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Crowe", "link": "https://stackoverflow.com/users/6538420/christopher-crowe"}, "edited": false, "score": 1, "creation_date": 1467851003, "post_id": 38235645, "comment_id": 63893229, "body": "Your best bet (if I am reading your comments above correctly) is to use an array of int pointers and then allocate the memory width to each indexed pointer to match the need. Although you may find that handling the memory management yourself may not be worth any marginal performance gain. The STL container will undoubtedly do a better job at memory management in most cases than you would. If the containers management is not to your liking, you could always create a custom allocator."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1467852100, "post_id": 38235645, "comment_id": 63893491, "body": "@GabrielStaples - w.r.t. 512 bytes RAM limitation: You&#39;re right, <code>std::vector</code> will not be good for you since it&#39;ll do heap allocation with overhead.  You&#39;ll need to &quot;roll&quot; your own data structure, probably with naked pointers.  That is - don&#39;t type your top-level array as a 2D array - type it as a vector of <code>int8_t**</code>.  <code>operator []</code> will still work to index 1-dimensionally for each pointer.  You can write an <code>operator [,,]</code>, if you want, that returns an element of one of the arrays (by referring to your separate array of array sizes)."}], "answers": [{"tags": [], "owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1467850191, "creation_date": 1467850191, "answer_id": 38235767, "question_id": 38235645, "link": "https://stackoverflow.com/questions/38235645/how-do-i-make-an-array-of-2d-arrays-that-are-not-all-the-same-width/38235767#38235767", "title": "How do I make an array of 2D arrays that are not all the same width?", "body": "<p><em>\"Kindly stop and visualize, for a moment,\"</em> what \"the <em>memory\"</em> actually looks like . . . </p>\n\n<p><code>arrayOf2DArrays2</code>, apparently, consists of: \"an array of three <em>pointers.\"</em> </p>\n\n<p>Unfortunately-for-you, there is <em>nothing,</em> in any of this, to predict what each of these three elements <em>consist of,</em> and we can very-plainly see that all three of them are different.  <strong>\"But, <em>C++</em> ... <em>cannot!\"</em></strong> (Because: you have so-far provided no means for it to do so.)</p>\n\n<p>Therefore, you now need to avail yourself of C++'s <em>\"container classes.\"</em> </p>\n\n<p><code>arrayOf2DArrays2</code><em>ought</em> to consist of \"a container,\" presently containing (three) other <em>\"containers,\"</em> each one of which is capable of telling you how many elements <em>it</em> contains, and also of throwing a runtime-exception should you attempt to access an element that <em>it</em> does not contain.</p>\n\n<p>When you have done this, a \"simple\" statement such as <code>arrayOf2DArrays2[x][y]</code> <em>(or what-have-you ...)</em> will \"automagically\" be understood by C++ to refer to an actually-complex series of events: <em>first,</em> the outer-container will be asked to resolve <code>[x]</code>, <em>then</em> the thus-referenced inner-container will be asked to resolve <code>[y]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1467850993, "creation_date": 1467850993, "answer_id": 38235868, "question_id": 38235645, "link": "https://stackoverflow.com/questions/38235645/how-do-i-make-an-array-of-2d-arrays-that-are-not-all-the-same-width/38235868#38235868", "title": "How do I make an array of 2D arrays that are not all the same width?", "body": "<p>I believe the most compatible method is to use a <code>struct</code> (or <code>class</code>) to describe the array:  </p>\n\n<pre><code>struct Array_Attributes\n{\n  int8_t * array_memory;\n  unsigned int maximum_rows;\n  unsigned int maximum_columns;\n};\n</code></pre>\n\n<p>You can treat the <code>array_memory</code> as a multidimensional array by converting from 2d to 1d indices:  </p>\n\n<pre><code>unsigned index = row * maximum_columns + column;\n</code></pre>\n\n<p>You could also make an array out of linked lists.  This would allow dimensions of different sizes.</p>\n\n<pre><code>+-------+     +----------+     +----------+  \n| row 0 | --&gt; | column 0 | --&gt; | column 1 | ...  \n+-------+     +----------+     +----------+  \n    |  \n    |\n    V  \n+-------+     +----------+     +----------+  \n| row 1 | --&gt; | column 0 | --&gt; | column 1 | ...  \n+-------+     +----------+     +----------+  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "is_accepted": false, "score": 0, "last_activity_date": 1467862384, "last_edit_date": 1467862384, "creation_date": 1467860858, "answer_id": 38236989, "question_id": 38235645, "link": "https://stackoverflow.com/questions/38235645/how-do-i-make-an-array-of-2d-arrays-that-are-not-all-the-same-width/38236989#38236989", "title": "How do I make an array of 2D arrays that are not all the same width?", "body": "<p>Alright, I'd like to answer my own question too. There are many good ideas here, but let me post this simple and low-memory-cost solution. For devices of minimal memory (ex: an ATTiny AVR microcontroller with 512 bytes of RAM and a few kB program flash memory), I think this may be the best solution. I've tested it; it works. Use an array of pointers to int8_t's--ie: an array of pointers to 1D arrays, as follows:</p>\n\n<pre><code>int8_t intArray10[][2] = {-2, -1,\n                            0, 1,\n                            2, 3,\n                            4, 5,\n                            6, 7};\n\nint8_t intArray11[][3] = {10, 9, 8,\n                           7, 6, 5, \n                           4, 3, 2,\n                           1, 0, -1};\n\nint8_t intArray12[][2] = {100, 101,\n                          102, 103};\n\n//get some array specs we need about the arrays\nbyte arrayLengths[] = {sizeof(intArray10)/sizeof(int8_t), sizeof(intArray11)/sizeof(int8_t), \n                        sizeof(intArray12)/sizeof(int8_t)}; //redundant division since int8_t is 1 byte, but I want to leave it for verboseness and extension to other types \nbyte arrayCols[] = {2, 3, 2};\n\n//make pointers to int8_t's and point each pointer to the first element of each 2D array, as though each 2D array was a 1D array\n//-this works because the arrays use contiguous memory \nint8_t *intArray10_p = &amp;(intArray10[0][0]); \nint8_t *intArray11_p = &amp;(intArray11[0][0]);\nint8_t *intArray12_p = &amp;(intArray12[0][0]);\n\n//make an array of those pointers to 1D arrays \nint8_t *intArrayOfnDimArray[] = {intArray10_p, intArray11_p, intArray12_p};\n\n//print the 3 arrays via pointers to (contiguous) 1D arrays:\n//-Note: this concept and technique should work with ANY contiguous array of ANY number of dimensions\nfor (byte i=0; i&lt;sizeof(intArrayOfnDimArray)/sizeof(intArrayOfnDimArray[0]); i++) //for each 2D array \n{\n  for (byte j=0; j&lt;arrayLengths[i]; j++) //for all elements of each 2D array \n  {\n    Serial.print(intArrayOfnDimArray[i][j]); Serial.print(\"/\"); //now read out the 2D array values (which are contiguous in memory) one at a time; STANDARD ARRAY ACCESS TECHNIQUE \n    Serial.print(*(intArrayOfnDimArray[i] + j)); Serial.print(\"/\"); //ARRAY/POINTER TECHNIQUE (extra teaching moment)\n    Serial.print((*(intArrayOfnDimArray + i))[j]); Serial.print(\"/\"); //POINTER/ARRAY TECHNIQUE\n    Serial.print(*(*(intArrayOfnDimArray + i) + j)); //POINTER/POINTER TECHNIQUE \n\n    //add a comma after every element except the last one on each row, to present it in 2D array form \n    static byte colCount = 0; //initialize as being on \"Column 1\" (0-indexed)\n    if (colCount != arrayCols[i]-1) //if not on the last column number \n      Serial.print(\", \");\n    else //colCount==arrayCols[i]-1 //if we *are* on the last column number \n      Serial.println();\n    colCount++;\n    if (colCount==arrayCols[i])\n      colCount = 0; //reset \n  }\n  Serial.println(F(\"-----\")); //spacer \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-2/-2/-2/-2, -1/-1/-1/-1\n0/0/0/0, 1/1/1/1\n2/2/2/2, 3/3/3/3\n4/4/4/4, 5/5/5/5\n6/6/6/6, 7/7/7/7\n-----\n10/10/10/10, 9/9/9/9, 8/8/8/8\n7/7/7/7, 6/6/6/6, 5/5/5/5\n4/4/4/4, 3/3/3/3, 2/2/2/2\n1/1/1/1, 0/0/0/0, -1/-1/-1/-1\n-----\n100/100/100/100, 101/101/101/101\n102/102/102/102, 103/103/103/103\n-----\n</code></pre>\n\n<p>Note: as Thomas Matthews teaches in his answer, to access a specific 2D array, row, and column, use the following:</p>\n\n<pre><code>byte index = row * maximum_columns + column;\n</code></pre>\n\n<p>which in my above example would be: </p>\n\n<pre><code>byte rowColIndex = desiredRow * arrayCols[desired2DArrayIndex] + desiredColumn;\nint8_t val = intArrayOfnDimArray[desired2DArrayIndex][rowColIndex];\n</code></pre>\n\n<p>Note: <code>byte</code> is equivalent to <code>uint8_t</code>.</p>\n"}], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 38235868, "answer_count": 3, "score": 0, "last_activity_date": 1467904789, "creation_date": 1467849249, "last_edit_date": 1467904789, "question_id": 38235645, "link": "https://stackoverflow.com/questions/38235645/how-do-i-make-an-array-of-2d-arrays-that-are-not-all-the-same-width", "title": "How do I make an array of 2D arrays that are not all the same width?", "body": "<p>This works, I know.</p>\n\n<pre><code>int8_t intArray7[][2] = {-2, -1,\n                          0, 1,\n                          2, 3,\n                          4, 5,\n                          6, 7};\n\nint8_t intArray8[][2] = {10, 9,\n                          8, 7,\n                          6, 5,\n                          4, 3,\n                          2, 1, \n                          0, -1,\n                         -2, -3};\n\nint8_t intArray9[][2] = {100, 101,\n                         102, 103};\n\nint8_t (*arrayOf2DArrays[])[2] = {intArray7, intArray8, intArray9};\n</code></pre>\n\n<p>Now, what if the 2D arrays are not all the same width? How do I make that work?</p>\n\n<p>Ex: this does NOT work, since intArray11 is width 3:</p>\n\n<pre><code> int8_t intArray10[][2] = {-2, -1,\n                            0, 1,\n                            2, 3,\n                            4, 5,\n                            6, 7};\n\nint8_t intArray11[][3] = {10, 9, 8,\n                           7, 6, 5, \n                           4, 3, 2,\n                           1, 0, -1};\n\nint8_t intArray12[][2] = {100, 101,\n                          102, 103};\n\nint8_t (*arrayOf2DArrays2[])[] = {intArray10, intArray11, intArray12};\n</code></pre>\n\n<p>What must one do to make an array of arrays of different element sizes?</p>\n\n<p>I plan on keeping track of each of the array sizes using separate variables.</p>\n"}, {"tags": ["c++", "windows", "driver"], "comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1467848811, "post_id": 38235548, "comment_id": 63892644, "body": "<code>ZwReadFile(&amp;fh</code> Why do you pass the <i>address</i> of the handle there?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 1754703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f84578e62188674a2e69a4eb46479f?s=128&d=identicon&r=PG", "display_name": "Hildigerr", "link": "https://stackoverflow.com/users/1754703/hildigerr"}, "edited": false, "score": 0, "creation_date": 1467914624, "post_id": 38235633, "comment_id": 63925684, "body": "Thanks. It&#39;s strange that I didn&#39;t get a compiler warning about that. I&#39;m still getting an invalid handle status back, though."}, {"owner": {"reputation": 35, "user_id": 1754703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f84578e62188674a2e69a4eb46479f?s=128&d=identicon&r=PG", "display_name": "Hildigerr", "link": "https://stackoverflow.com/users/1754703/hildigerr"}, "edited": false, "score": 0, "creation_date": 1467916010, "post_id": 38235633, "comment_id": 63926539, "body": "Correction: now it is a STATUS_INVALID_PARAMETER error. At least now I know where to look next. Thanks."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468039067, "post_id": 38235633, "comment_id": 63975577, "body": "Unfortunately, <code>HANDLE</code> is typedef&#39;d as <code>void *</code> and <a href=\"http://stackoverflow.com/a/1736841/886887\">both C and C++ will implicitly convert any kind of pointer to a void pointer</a>."}], "tags": [], "owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "is_accepted": true, "score": 3, "last_activity_date": 1467849486, "last_edit_date": 1467849486, "creation_date": 1467849162, "answer_id": 38235633, "question_id": 38235548, "link": "https://stackoverflow.com/questions/38235548/windows-driver-zwreadfile-returns-status-invalid-handle/38235633#38235633", "title": "Windows Driver: ZwReadFile returns STATUS_INVALID_HANDLE", "body": "<p>You are passing a pointer to the <code>HANDLE</code> variable itself when you should be passing the value of the <code>HANDLE</code> instead.</p>\n\n<p>Change this:</p>\n\n<pre><code>status = ZwReadFile(&amp;fh, ...);\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>status = ZwReadFile(fh, ...);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 1754703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f84578e62188674a2e69a4eb46479f?s=128&d=identicon&r=PG", "display_name": "Hildigerr", "link": "https://stackoverflow.com/users/1754703/hildigerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 38235633, "answer_count": 1, "score": 0, "last_activity_date": 1467849606, "creation_date": 1467848572, "last_edit_date": 1467849606, "question_id": 38235548, "link": "https://stackoverflow.com/questions/38235548/windows-driver-zwreadfile-returns-status-invalid-handle", "title": "Windows Driver: ZwReadFile returns STATUS_INVALID_HANDLE", "body": "<p>In learning how to write Windows drivers, I am modifying the <a href=\"https://github.com/Microsoft/Windows-driver-samples\" rel=\"nofollow\">Windows Driver Sample</a> for the AvsCamera.</p>\n\n<p>I want to replace the simulated image with one from a bitmap file. In the <code>Synthesizer.cpp</code> file, I have commented out the calls to <code>SynthesizeBars()</code>, <code>ApplyGradient()</code>, and <code>EncodeNumber()</code> within the <code>Synthesize()</code> method, and replaced them with this code:</p>\n\n<pre><code>KIRQL level = KeGetCurrentIrql();\nif( level == PASSIVE_LEVEL ) {\n    DbgPrintEx(DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, \"Ok to perform file io.\");\n    UNICODE_STRING filename;\n    OBJECT_ATTRIBUTES fileAttr;\n    IO_STATUS_BLOCK fhStatus;\n    HANDLE fh;\n    NTSTATUS status;\n    RtlInitUnicodeString(&amp;filename, L\"\\\\SystemRoot\\\\AvsCameraTest.bmp\");\n    InitializeObjectAttributes(&amp;fileAttr, &amp;filename, OBJ_CASE_INSENSITIVE | OBJ_KERNEL_HANDLE, NULL, NULL);\n    status = ZwOpenFile(&amp;fh, FILE_READ_DATA, &amp;fileAttr, &amp;fhStatus, 0, FILE_RANDOM_ACCESS);\n    if( NT_SUCCESS(status) ) {\n        status = ZwReadFile(&amp;fh, NULL, NULL, NULL, &amp;fhStatus, m_Buffer, m_Length, /*&amp;byteOffset*/NULL, NULL);\n        if( NT_SUCCESS(status) ) {\n            DbgPrintEx(DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, \"Read bitmap file success.\\n\");\n        } else DbgPrintEx(DPFLTR_IHVDRIVER_ID, DPFLTR_ERROR_LEVEL, \"Unable to read bitmap file [0x%x].\\n\", status);\n        ZwClose(fh);\n    } else DbgPrintEx(DPFLTR_IHVDRIVER_ID, DPFLTR_ERROR_LEVEL, \"Unable to open bitmap file [0x%x].\\n\", status);\n} else DbgPrintEx(DPFLTR_IHVDRIVER_ID, DPFLTR_ERROR_LEVEL, \"Do not perform file io at IRQ level 0x%x.\\n\", level);\n</code></pre>\n\n<p>This is my first step: I am aware that I'm ignoring the bmp header.</p>\n\n<p>The call to <code>ZwOpenFile()</code> is successful, but <code>ZwReadFile()</code> returns <code>STATUS_INVALID_HANDLE</code>.</p>\n\n<p>I've tried using a <code>LARGE_INTEGER byteOffset</code>, and <code>FILE_SYNCHRONOUS_IO_NONALERT</code> instead of <code>FILE_RANDOM_ACCESS</code>. I've also tried using <code>ZwCreateFile()</code> with <code>GENERIC_READ</code> and <code>FILE_ATTRIBUTE_READONLY</code> parameters.</p>\n\n<p>I have been successful in writing to a file using similar code.</p>\n\n<p>What is the issue with my attempt at acquiring the proper filehandle for reading?</p>\n"}, {"tags": ["c++", "arrays", "cdecl"], "comments": [{"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "edited": false, "score": 0, "creation_date": 1467848831, "post_id": 38235537, "comment_id": 63892650, "body": "Yes, it does. What makes you uncomfortable with that? The fact that arrays can decay into pointers?"}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "reply_to_user": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "edited": false, "score": 1, "creation_date": 1467848989, "post_id": 38235537, "comment_id": 63892702, "body": "@jnbrq-CanberkS&#246;nmez  An array can implicitly cast to a pointer, which points to the first element, however this &#39;decay&#39; is not a pointer to an array. What the OP has is an actual pointer to an array"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1467849395, "post_id": 38235537, "comment_id": 63892815, "body": "no discomfort, just clarification needed"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467849572, "post_id": 38235537, "comment_id": 63892862, "body": "@Remy Lebeau, ah, I see how to make the output be a different color now using the &gt; symbol! I had no idea. Where is this magical list of stackoverflow symbology? Also, I find it amusing that we have almost the same reputation points. :) If you just multiply yours by 2 to be as big as mine when multiplied by 1000, they&#39;d be equal."}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "edited": false, "score": 1, "creation_date": 1467849750, "post_id": 38235537, "comment_id": 63892917, "body": "@GabrielStaples  Check here: <a href=\"http://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a>"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1467850046, "post_id": 38235537, "comment_id": 63893001, "body": "Thanks for the link."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467851041, "post_id": 38235537, "comment_id": 63893236, "body": "@GabrielStaples: indenting text by 4 chars is used for code formatting. <code>&gt;</code> is for quoting text."}], "answers": [{"comments": [{"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1467848813, "post_id": 38235569, "comment_id": 63892646, "body": "I can&#39;t accept your answer for 10 more minutes apparently. Gotta give other people a chance too."}], "tags": [], "owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1467848837, "last_edit_date": 1467848837, "creation_date": 1467848698, "answer_id": 38235569, "question_id": 38235537, "link": "https://stackoverflow.com/questions/38235537/cdecl-clarification-required-what-is-an-array-5/38235569#38235569", "title": "cdecl clarification required: what is an &quot;array 5?&quot;", "body": "<p>It is a pointer to an array of 5 elements.</p>\n\n<pre><code>//Standard array\nchar array[5];\n\n//pointer to array\nchar (*arr)[5];\n\n//Assign pointer of array to arr\narr = &amp;array;\n\n//Dereference arr and use it.\n(*arr)[1] = 4;\n</code></pre>\n\n<p>Pointers and references to arrays are useful for passing arrays to functions, as well as returning them. Do not return local non-static arrays though as their life time ends on return.</p>\n\n<p>To reference an array you can use this declaration:\n<code>char (&amp;arr)[5] = array;</code></p>\n"}], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 38235569, "answer_count": 1, "score": 0, "last_activity_date": 1471471126, "creation_date": 1467848518, "last_edit_date": 1471471126, "question_id": 38235537, "link": "https://stackoverflow.com/questions/38235537/cdecl-clarification-required-what-is-an-array-5", "title": "cdecl clarification required: what is an &quot;array 5?&quot;", "body": "<p>Go here: <a href=\"http://cdecl.org/\" rel=\"nofollow\">http://cdecl.org/</a></p>\n\n<p>Input:</p>\n\n<pre><code>char (*arr)[5]\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>declare arr as pointer to array 5 of char</p>\n</blockquote>\n\n<p>What is an \"array 5\"? Does this simply mean an array with 5 elements?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1467901271, "post_id": 38235525, "comment_id": 63917191, "body": "It&#39;s all documented, and there are examples in the documentation that comes with Qt 4."}], "answers": [{"tags": [], "owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "is_accepted": false, "score": 1, "last_activity_date": 1467865426, "creation_date": 1467865426, "answer_id": 38237518, "question_id": 38235525, "link": "https://stackoverflow.com/questions/38235525/how-to-add-a-custom-widget-to-qt-4-8-6/38237518#38237518", "title": "how to add a custom widget to Qt 4.8.6", "body": "<p>Read about <a href=\"http://doc.qt.io/qt-4.8/designer-creating-custom-widgets.html\" rel=\"nofollow\">creating designer widgets</a> and <a href=\"http://doc.qt.io/qt-4.8/designer-using-custom-widgets.html\" rel=\"nofollow\">using them</a>, but briefly:</p>\n\n<ul>\n<li>Subclass <a href=\"http://doc.qt.io/qt-4.8/qdesignercustomwidgetinterface.html\" rel=\"nofollow\"><code>QDesignerCustomWidgetInterface</code></a> to create your custom designer plugin for your custom widget</li>\n<li>Build and install your designer plugin</li>\n<li>Tell designer about your plugin location, or just make sure it's installed to <code>$QTDIR/plugins/designer</code></li>\n</ul>\n\n<p>There's also <a href=\"http://doc.qt.io/qt-4.8/qt-designer-customwidgetplugin-example.html\" rel=\"nofollow\">an example</a> to follow.</p>\n"}, {"tags": [], "owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "is_accepted": false, "score": 0, "last_activity_date": 1467894181, "creation_date": 1467894181, "answer_id": 38245380, "question_id": 38235525, "link": "https://stackoverflow.com/questions/38235525/how-to-add-a-custom-widget-to-qt-4-8-6/38245380#38245380", "title": "how to add a custom widget to Qt 4.8.6", "body": "<p><a href=\"http://doc.qt.io/qt-4.8/designer-using-custom-widgets.html\" rel=\"nofollow\">Here</a> is a documentation. At short, you just add any widget (e.g. <code>QSpinBox</code> to draw it nice in the Designer) to your form and convert it to the needed one.</p>\n"}, {"comments": [{"owner": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "edited": false, "score": 0, "creation_date": 1467910473, "post_id": 38246552, "comment_id": 63923337, "body": "What if my UI is exactly the same as for QSpinBox? How do I go about it?"}, {"owner": {"reputation": 478, "user_id": 3036672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f119ea9c5a8b6445da7154ffacac0cd?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/3036672/zaid"}, "reply_to_user": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "edited": false, "score": 0, "creation_date": 1467984262, "post_id": 38246552, "comment_id": 63955049, "body": "In that case:    - skip step 1 and 2    - in step 3 myWidgetHandler should derive from QSpinBox.    - you can override the QSpinbox methods as you wish in the implementation.    - remember in the main ui handler this custom class can be called by the object name see attached image in point 10 in the original answer."}], "tags": [], "owner": {"reputation": 478, "user_id": 3036672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f119ea9c5a8b6445da7154ffacac0cd?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/3036672/zaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1467897520, "creation_date": 1467897520, "answer_id": 38246552, "question_id": 38235525, "link": "https://stackoverflow.com/questions/38235525/how-to-add-a-custom-widget-to-qt-4-8-6/38246552#38246552", "title": "how to add a custom widget to Qt 4.8.6", "body": "<p>To add a custom widget to Qt designer simply follow the steps:</p>\n\n<ol>\n<li>In Qt designer create a new widget File->New->Widget.</li>\n<li>Add your UI etc for this widget and save it->->MyWidget.ui</li>\n<li>Create a class \"MyWidgetHandler\" to handle this widget in a MyWidgetHandler.h &amp; cpp</li>\n<li><p>In your MainWindow/Dialog wherever you want to display this widget add a \"Widget\" from the \"Containers\" section of the designer. </p>\n\n<p><a href=\"https://i.stack.imgur.com/P3byL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P3byL.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Now right-click the \"Widget\" container you just added and click \"Promote to...\"</p></li>\n<li>This should open a dialog. You can select here the base class to inherit properties in your case QComboBox or just select the QWidget class.</li>\n<li>Next enter the full class name i.e with namespaces eg: \"blah::MyWidgetHandler\"</li>\n<li>In the Header file section simply add the path to the header file for this class. This should be a resolvable path. Eg: \"UI/MyWidgetHandler.h\" or \"C:/UI/MyWidgetHandler.h\"</li>\n<li>Now click \"Promote\" and save your MainWindow.ui</li>\n<li>The Property Editor should now show your custom class type eg: blah::MyWidgetHandler. and the properties from the base class you selected.</li>\n<li>Don't forget to setup the UI in your handler class and include header in the Mainwindow handler.</li>\n</ol>\n\n<p>Cheers !!!</p>\n"}], "owner": {"reputation": 3198, "user_id": 1636521, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/2116626f42d8a2f87ee420ecefb1ec0c?s=128&d=identicon&r=PG", "display_name": "flashburn", "link": "https://stackoverflow.com/users/1636521/flashburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467897520, "creation_date": 1467848436, "question_id": 38235525, "link": "https://stackoverflow.com/questions/38235525/how-to-add-a-custom-widget-to-qt-4-8-6", "title": "how to add a custom widget to Qt 4.8.6", "body": "<p>I'm trying to figure out how to add a custom widget to Qt Designer. So far I've been unsuccessful. Very new to Qt. I'm running Qt 4.8.6. I know there is a newer version but due to project constraints I have to stick with this one. Essentially  I'm need to add a hex spin box, i.e. a spinbox that counts in hex rather than in decimals. I even found <a href=\"http://flylib.com/books/en/2.18.1.41/1/\" rel=\"nofollow\">code that implements it</a>. It does explain <a href=\"http://flylib.com/books/en/2.18.1.44/1/\" rel=\"nofollow\">how to integrate it into Qt Designer</a>, however it is explained for version 3. Can someone offer assistance? </p>\n\n<p>Any help is greatly appreciated</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1467848352, "post_id": 38235501, "comment_id": 63892527, "body": "Which version of g++?, please give us something reproducible. Post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete and Verifiable Example</a>. Nonetheless, try adding <code>-std=c++11</code> or <code>-std=c++0x</code> to your compiler flag"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1467848380, "post_id": 38235501, "comment_id": 63892537, "body": "It&#39;s likely you aren&#39;t compiling with C++11 or higher"}, {"owner": {"reputation": 541, "user_id": 3713547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p4oej.jpg?s=128&g=1", "display_name": "drglove", "link": "https://stackoverflow.com/users/3713547/drglove"}, "edited": false, "score": 0, "creation_date": 1467848382, "post_id": 38235501, "comment_id": 63892538, "body": "Does your compiler support C++11? Try adding <code>-std=c++11</code> to your compilation flags."}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 4226809, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6198d3604a3c4344579ec2a8220ba0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ji\u0159&#237; Lechner", "link": "https://stackoverflow.com/users/4226809/ji%c5%99%c3%ad-lechner"}, "edited": false, "score": 1, "creation_date": 1467848873, "post_id": 38235563, "comment_id": 63892664, "body": "Apparently the advice in comments adding the flag -std=gnu++11 solve the problem. I was confused since -std=gnu++14 should be the default flag but it seems I have old version of g++. Thanks for advices."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1467848661, "creation_date": 1467848661, "answer_id": 38235563, "question_id": 38235501, "link": "https://stackoverflow.com/questions/38235501/why-g-wont-compile-simple-code/38235563#38235563", "title": "Why g++ wont compile simple code?", "body": "<p>Change your compiler command to</p>\n\n<pre><code>&gt; g++ -std=c++11 -c -Wall main.cpp\n&gt; #   ^^^^^^^^^^\n</code></pre>\n\n<p>if your GCC compiler version doesn't support that flag you should upgrade to a newer version (which probably supports the current standard by default).</p>\n"}], "owner": {"reputation": 448, "user_id": 4226809, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6198d3604a3c4344579ec2a8220ba0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ji\u0159&#237; Lechner", "link": "https://stackoverflow.com/users/4226809/ji%c5%99%c3%ad-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2493, "favorite_count": 0, "closed_date": 1467855378, "accepted_answer_id": 38235563, "answer_count": 1, "score": -1, "last_activity_date": 1467848846, "creation_date": 1467848250, "question_id": 38235501, "link": "https://stackoverflow.com/questions/38235501/why-g-wont-compile-simple-code", "closed_reason": "Duplicate", "title": "Why g++ wont compile simple code?", "body": "<p>I got strange error why compiling a simple source code in g++:</p>\n\n<pre><code>#include &lt;vector&gt;\nint main(int argc, const char* argv[]){\n    std::vector&lt;int&gt; a{1,2,3};\n    return 0;\n}\n</code></pre>\n\n<p>The compiler output is </p>\n\n<pre><code>g++ -c -Wall main.cpp\nmain.cpp:4:20: error: expected ';' at end of declaration\n    std::vector&lt;int&gt; a{1,2,3};\n                      ^\n                      ;\n1 error generated.\n</code></pre>\n\n<p>When I compile it in xCode everything works fine.</p>\n"}, {"tags": ["c++", "ios", "swift"], "comments": [{"owner": {"reputation": 29472, "user_id": 4253437, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bcBpJ.jpg?s=128&g=1", "display_name": "CodeBender", "link": "https://stackoverflow.com/users/4253437/codebender"}, "edited": false, "score": 0, "creation_date": 1467864715, "post_id": 38235498, "comment_id": 63895999, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35229149/interacting-with-c-classes-from-swift\">Interacting with C++ classes from Swift</a>"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "edited": false, "score": 0, "creation_date": 1467853899, "post_id": 38235837, "comment_id": 63893891, "body": "add __strong and add let closure: @convention(block) () -&gt; Void = self.testfunc, still not working."}, {"owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "edited": false, "score": 0, "creation_date": 1467853970, "post_id": 38235837, "comment_id": 63893903, "body": "trying use Objective-C runtime, but &quot;typeof&quot; was undeclared."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "reply_to_user": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "edited": false, "score": 0, "creation_date": 1467854497, "post_id": 38235837, "comment_id": 63894019, "body": "Updated. I removed <code>typeof</code>."}, {"owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "edited": false, "score": 0, "creation_date": 1467874433, "post_id": 38235837, "comment_id": 63899217, "body": "my code compile failed on imp_implementationWithBlock. I used Block_copy to get around the problem successfully for now."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1467854483, "last_edit_date": 1467854483, "creation_date": 1467850744, "answer_id": 38235837, "question_id": 38235498, "link": "https://stackoverflow.com/questions/38235498/call-swift-func-from-c-with-exc-bad-access/38235837#38235837", "title": "call swift func from c++ with EXC_BAD_ACCESS(...)", "body": "<p>Make the closure <code>__strong</code> in the cpp file.</p>\n\n<pre><code>//\n//  TestCallbacks.h\n//  XIO\n//\n//  Created by Brandon T on 2016-07-06.\n//  Copyright \u00a9 2016 XIO. All rights reserved.\n//\n\n#ifndef TestCallbacks_h\n#define TestCallbacks_h\n\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n    void run_swiftfunc();\n    void RegisterCallBack(void (^closure)());\n#ifdef __cplusplus\n}\n#endif\n\n#endif /* TestCallbacks_h */\n\n\n//\n//  TestCallbacks.mm\n//  XIO\n//\n//  Created by Brandon T on 2016-07-06.\n//  Copyright \u00a9 2016 XIO. All rights reserved.\n//\n\n#include \"TestCallbacks.h\"\n#include &lt;cstdio&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    typedef void (^callbackfunc)();\n\n    __strong callbackfunc swiftFunc;\n\n    void RegisterCallBack(void (^closure)()) {\n        swiftFunc = closure;\n        printf(\"function pointer %p \\n\", (void*) swiftFunc);\n        swiftFunc();\n    }\n\n    void run_swiftfunc() {\n        printf(\"function pointer %p \\n\", (void*) swiftFunc);\n        swiftFunc();\n\n        swiftFunc = nil;\n    }\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Then I include <code>TestCallbacks.h</code> in the bridging header..</p>\n\n<p>Then in swift I do:</p>\n\n<pre><code>override func viewDidLoad() {\n    super.viewDidLoad()\n    let closure: @convention(block) () -&gt; Void = self.testfunc\n    RegisterCallBack(closure)\n    run_swiftfunc()\n}\n\nfunc testfunc(){\n    print(\"test func in view contriller \");\n}\n</code></pre>\n\n<p>I advise that when you are finished using it, you nil the reference just in case.</p>\n\n<p>The other option is to use the Objective-C runtime:</p>\n\n<pre><code>#include \"TestCallbacks.h\"\n#include &lt;cstdio&gt;\n#import &lt;objc/runtime.h&gt;\n\n\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    typedef void(*callback)(id, SEL)\n    callback swiftCallback;\n\n    void RegisterCallBack(void (^closure)()) {\n\n        swiftCallback = (callback)imp_implementationWithBlock(closure);\n        printf(\"function pointer %p \\n\", (void *) swiftCallback);\n        swiftCallback(nil, nil);\n    }\n\n    void run_swiftfunc() {\n        printf(\"function pointer %p \\n\", (void *) swiftCallback);\n        swiftCallback(nil, nil);\n\n        imp_removeBlock((IMP)swiftCallback);\n    }\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1467902796, "last_edit_date": 1467902796, "creation_date": 1467874763, "answer_id": 38239285, "question_id": 38235498, "link": "https://stackoverflow.com/questions/38235498/call-swift-func-from-c-with-exc-bad-access/38239285#38239285", "title": "call swift func from c++ with EXC_BAD_ACCESS(...)", "body": "<p>I found out that the block is only stack, so only works in the scope of the function. I end up use Block_copy to avoid the problem. \nNow I can use asynchronous callback function to call swift functions in c++</p>\n\n<p>// in my wrapper.cpp file</p>\n\n<pre><code> #include &lt;Block.h&gt;\n extern \"C\" {\n         typedef void (^callbackfunc)();\n         callbackfunc swiftFunc;\n         void RegisterCallBack(void (^closure)()){\n         swiftFunc = Block_copy(closure);\n         printf(\"function pointer 0x%x \\n\", (void*) swiftFunc);\n        swiftFunc();  //works well \n    }\n\n    void run_swiftfunc(){\n         printf(\"function pointer 0x%x \\n\", (void*) swiftFunc);\n         swiftFunc();   \n    } \n ...\n }\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1467902796, "creation_date": 1467848229, "question_id": 38235498, "link": "https://stackoverflow.com/questions/38235498/call-swift-func-from-c-with-exc-bad-access", "title": "call swift func from c++ with EXC_BAD_ACCESS(...)", "body": "<p>I am working on xcode8 swift 3.0 project. It needs to access a C++ library which will need a callback function to send data back to swift caller asynchronizely.\nThe callback does work if it is called right inside the RegisterCallBack function.\nHowever, if it crashes if call it outside the  RegisterCallBack function.</p>\n\n<p>in my swift file ViewController.swift</p>\n\n<pre><code>override func viewDidLoad() {\n    super.viewDidLoad()\n    var closure: () -&gt; Void = testfunc;\n    RegisterCallBack(closure)\n\n    run_swiftfunc()\n}\nfunc testfunc(){\n    print(\"test func in view contriller \");\n}\n....\n</code></pre>\n\n<p>// in my wrapper.h file</p>\n\n<pre><code>...\nvoid run_swiftfunc();\nvoid RegisterCallBack(void (^closure)());\n...\n</code></pre>\n\n<p>// in my wrapper.cpp file</p>\n\n<pre><code>extern \"C\" {\ntypedef void (^callbackfunc)();\ncallbackfunc swiftFunc;\nvoid RegisterCallBack(void (^closure)()){\n    swiftFunc = closure;\n    printf(\"function pointer 0x%x \\n\", (void*) swiftFunc);\n    swiftFunc();  //works well \n}\nvoid run_swiftfunc(){\n   printf(\"function pointer 0x%x \\n\", (void*) swiftFunc);\n   swiftFunc();   // fail, EXC_BAD_ACCESS\n} \n...\n}\n</code></pre>\n\n<p>//log print:\nRegisterCallBack function pointer 0x1300cd30 </p>\n\n<p>run_swiftfunc</p>\n\n<p>function pointer 0x1300cd30 </p>\n\n<p>test func in view contriller </p>\n\n<p>run_swiftfunc</p>\n\n<p>function pointer 0x1300cd30 </p>\n\n<p>(lldb)          ---->EXC_BAD_ACCESS(code =.. </p>\n\n<p>The swiftfunc address is same both are 0x1300cd30. How to preserve the swiftfunc block?</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-code"], "comments": [{"owner": {"reputation": 101, "user_id": 2139993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049993236d26000748eff7416d456c9f?s=128&d=identicon&r=PG", "display_name": "Eivind Dahl", "link": "https://stackoverflow.com/users/2139993/eivind-dahl"}, "edited": false, "score": 0, "creation_date": 1478608937, "post_id": 38235451, "comment_id": 68217961, "body": "You can make a build.bat which calls cl with your intended parameters and then make a task which calls it via the scheme below, or you can make a task which calls cl directly."}], "answers": [{"comments": [{"owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "edited": false, "score": 0, "creation_date": 1467902263, "post_id": 38235543, "comment_id": 63917952, "body": "I&#39;m on Windows and <i>&#39;make&#39; is not recognized as an internal or external command, operable program or batch file.</i>"}, {"owner": {"reputation": 777, "user_id": 3680715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GtneH.png?s=128&g=1", "display_name": "Pieter de Vries", "link": "https://stackoverflow.com/users/3680715/pieter-de-vries"}, "reply_to_user": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "edited": false, "score": 0, "creation_date": 1467905928, "post_id": 38235543, "comment_id": 63920621, "body": "I am not understanding what you are doing"}, {"owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "edited": false, "score": 0, "creation_date": 1468411457, "post_id": 38235543, "comment_id": 64114752, "body": "I am trying to compile and run C++ application <i>on Windows</i>. Using MSVC."}], "tags": [], "owner": {"reputation": 777, "user_id": 3680715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GtneH.png?s=128&g=1", "display_name": "Pieter de Vries", "link": "https://stackoverflow.com/users/3680715/pieter-de-vries"}, "is_accepted": false, "score": 2, "last_activity_date": 1467848551, "creation_date": 1467848551, "answer_id": 38235543, "question_id": 38235451, "link": "https://stackoverflow.com/questions/38235451/how-to-configure-vs-code-to-compile-debug-c/38235543#38235543", "title": "How to configure VS Code to compile/debug C++?", "body": "<p>Here is a webpage where they explain more about the task.json file.</p>\n\n<p><a href=\"https://code.visualstudio.com/docs/editor/tasks\" rel=\"nofollow\">https://code.visualstudio.com/docs/editor/tasks</a></p>\n\n<p>The build tasks are project specific. To create a new project, open a directory in VSCode.</p>\n\n<p>Following the instructions <a href=\"https://code.visualstudio.com/docs/tasks\" rel=\"nofollow\">here</a>, press <code>Ctrl+Shift+P</code>, type <code>Configure Tasks</code>, select it and press <code>Enter</code>.</p>\n\n<p>The tasks.json file will be opened. Paste the following build script into the file, and save it:</p>\n\n<pre><code>{\n    \"version\": \"0.1.0\",\n    \"command\": \"make\",\n    \"isShellCommand\": true,\n    \"tasks\": [\n        {\n            \"taskName\": \"Makefile\",\n            // Make this the default build command.\n            \"isBuildCommand\": true,\n            // Show the output window only if unrecognized errors occur.\n            \"showOutput\": \"always\",\n            // No args\n            \"args\": [\"all\"],\n            // Use the standard less compilation problem matcher.\n            \"problemMatcher\": {\n                \"owner\": \"cpp\",\n                \"fileLocation\": [\"relative\", \"${workspaceRoot}\"],\n                \"pattern\": {\n                    \"regexp\": \"^(.*):(\\\\d+):(\\\\d+):\\\\s+(warning|error):\\\\s+(.*)$\",\n                    \"file\": 1,\n                    \"line\": 2,\n                    \"column\": 3,\n                    \"severity\": 4,\n                    \"message\": 5\n                }\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>Now go to <code>File-&gt;Preferences-&gt;Keyboard Shortcuts</code> and add the following key binding for the build task:</p>\n\n<pre><code>// Place your key bindings in this file to overwrite the defaults\n[\n    { \"key\": \"f8\",          \"command\": \"workbench.action.tasks.build\" }\n]\n</code></pre>\n\n<p>Now when you press <code>F8</code> the Makefile will be executed and errors will be underlined in the editor.</p>\n"}], "owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467859163, "creation_date": 1467847920, "last_edit_date": 1467859163, "question_id": 38235451, "link": "https://stackoverflow.com/questions/38235451/how-to-configure-vs-code-to-compile-debug-c", "title": "How to configure VS Code to compile/debug C++?", "body": "<p>I've installed the C/C++ extension for VS Code but am not quite sure what I need to have in my <code>tasks.json</code> in order to compile a project. Is there an example I can look at somewhere?</p>\n\n<p>Also, the extension refers to Clang tools, I kind of assumed that Clang doesn't work on Windows.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user948581"}, "edited": false, "score": 1, "creation_date": 1467848018, "post_id": 38235447, "comment_id": 63892431, "body": "Try with a <code>(</code> after the 2nd &quot;d&quot;. I let you figure out the remaining 50%."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467848928, "post_id": 38235447, "comment_id": 63892681, "body": "<b><i>so, what makes this not compile?</i></b> It does not look like a function definition to me."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1467849991, "post_id": 38235447, "comment_id": 63892986, "body": "What were you trying to do there?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6195268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55370b2839885bc057eae75b0b93b3e9?s=128&d=identicon&r=PG&f=1", "display_name": "FourFrame", "link": "https://stackoverflow.com/users/6195268/fourframe"}, "edited": false, "score": 0, "creation_date": 1468260406, "post_id": 38235776, "comment_id": 64043316, "body": "It worked but as soon as I recompiled this it had two errors &#39; undifined reference to &quot;Class name&quot;&#39;"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1467850257, "creation_date": 1467850257, "answer_id": 38235776, "question_id": 38235447, "link": "https://stackoverflow.com/questions/38235447/error-boardboard-names-the-constructor-not-the-type-boardboard-c/38235776#38235776", "title": "error: \u2018Board::Board\u2019 names the constructor, not the type Board::Board; C++", "body": "<p>In C++, methods and functions have the following syntax:  </p>\n\n<pre><code>&lt;return-type&gt; &lt;class-name&gt; :: &lt;method-name&gt; ( &lt;arguments&gt; ) { &lt;statements&gt; }\n</code></pre>\n\n<p>Constructors don't have a return type.  </p>\n\n<p>Other than that, how does your function definition match the syntax or does it?</p>\n\n<p>Hint:  </p>\n\n<pre><code>Board::Board()\n{\n}\n</code></pre>\n\n<p><em>Note:  C++ is picky about its symbol characters.  The ( is different than {.</em>  </p>\n"}], "owner": {"reputation": 17, "user_id": 6195268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55370b2839885bc057eae75b0b93b3e9?s=128&d=identicon&r=PG&f=1", "display_name": "FourFrame", "link": "https://stackoverflow.com/users/6195268/fourframe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "closed_date": 1467857640, "accepted_answer_id": 38235776, "answer_count": 1, "score": -5, "last_activity_date": 1467850257, "creation_date": 1467847880, "question_id": 38235447, "link": "https://stackoverflow.com/questions/38235447/error-boardboard-names-the-constructor-not-the-type-boardboard-c", "closed_reason": "Not suitable for this site", "title": "error: \u2018Board::Board\u2019 names the constructor, not the type Board::Board; C++", "body": "<p>All right so here is the code where the error is,</p>\n\n<p>Board::Board {</p>\n\n<p>}</p>\n\n<p>so, what makes this not compile? </p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1467846098, "post_id": 38235130, "comment_id": 63891856, "body": "You did the includes wrong.  At the bottom of the .h file you need to include the .tpp file.  Think of the tpp file as an extension of the header."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467846336, "post_id": 38235130, "comment_id": 63891934, "body": "@NathanOliver perfect, it worked.Thanks"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467845824, "creation_date": 1467845824, "question_id": 38235130, "link": "https://stackoverflow.com/questions/38235130/explicit-template-specialization-with-enumerated-types", "title": "Explicit Template Specialization With Enumerated Types", "body": "<p>I have a class whose implementation differs (slightly) depending on a said multiplier. Basically, it will ultimately be a serial data packet. When placed in ASCII mode, the width of a number of bit-fields will double and those fields will differ in format.</p>\n\n<p>Unfortunately, since I'd like to make use of <code>std::bitset</code>, I cannot declare the widths dynamically. The most reasonable approach I could muster up was to use templates instead. I'd like to separate the template definition from the implementation. As such, I've done the following:</p>\n\n<p><em>My_Bytestream.hpp</em></p>\n\n<pre><code>#define NUMBITS(x) (x*sizeof(uint8_t))\n\nenum My_BytestreamType\n{\n    BINARY = 1,\n    ASCII = 2\n};\n\ntemplate &lt;My_BytestreamType MULTIPLIER&gt;\nclass My_Bytestream\n{\npublic:\n    My_Bytestream(My_Flag_t flags, My_Command_t command);\n\nprivate:\n\n    boost::optional&lt;std::bitset&lt;NUMBITS(2 * MULTIPLIER) &gt;&gt; m_address;\n    boost::optional&lt;std::bitset&lt;NUMBITS(2 * MULTIPLIER) &gt;&gt; m_CRC;\n};\n</code></pre>\n\n<p><em>MyBytestream.tpp</em></p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include \"My_Bytestream.hpp\"\n\ntemplate &lt;My_BytestreamType MULTIPLIER&gt; class My_Bytestream;\n\ntemplate&lt;&gt;\nMy_Bytestream&lt;My_BytestreamType::BINARY&gt;::My_Bytestream(My_Flag_t flags, My_Command_t command)\n{\n    m_command = command;\n}\n</code></pre>\n\n<p>However, this results in the following <strong>linker</strong> error:</p>\n\n<pre><code>error LNK2019: unresolved external symbol \"public: __thiscall My_Bytestream&lt;1&gt;::My_Bytestream&lt;1&gt;(enum My_Flag_t,enum My_Command_t)\" (??0?$My_Bytestream@$00@@QAE@W4My_Flag_t@@W4My_Command_t@@@Z) referenced in function \"public: __thiscall My_Binary_Command::My_Binary_Command(enum My_Flag_t,enum My_Command_t)\" (??0My_Binary_Command@@QAE@W4My_Flag_t@@W4My_Command_t@@@Z)\n</code></pre>\n\n<p>Note that <code>My_Flag_t</code> and <code>My_Command_t</code>are defined as (unrelated) enumerations in another header.</p>\n"}, {"tags": ["c++", "optimization", "g++", "volatile", "pass-by-value"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1467846042, "post_id": 38235112, "comment_id": 63891842, "body": "TL;DR - If it doesn&#39;t change the observable behavior of the program does it really matter?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1467847518, "post_id": 38235112, "comment_id": 63892301, "body": "The C++11 standard (I assume C++14 too) says &quot;Access to volatile objects are evaluated strictly according to the rules of the abstract machine&quot;. In other words the &quot;as-if&quot; rule doesn&#39;t apply - you have to follow the abstract machine rules strictly. I think the behavior of <code>g()</code> violates this; I&#39;d guess this is an optimizer bug. I&#39;d also guess that most people would say it&#39;s a low priority bug, and that some (many?) will disagree that it&#39;s a bug in the first place."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1467848729, "post_id": 38235112, "comment_id": 63892627, "body": "@MichaelBurr Nice quote, not only for its relevance but also for the fantastic term &quot;abstract machine&quot;. I deal with a lot of those. I&#39;m inclined to think it is a bug, in the sense of being an oversight, insofar as one would expect the 2 types of local variable to behave identically - as by my grok, the only discernible difference is the time at which they&#39;re constructed. However, due to the complexity of optimising and countless permutations of ordering different stages etc, it&#39;s obviously not that simple. I&#39;d never dare to class it a <code>&gt;ittybitty</code>-priority bug, but a conclusion would be great."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1467851527, "post_id": 38235112, "comment_id": 63893351, "body": "@MichaelBurr Also, while applicable to <code>volatile</code>-declared objects, &#39;as-if&#39; is still AOK for others, right? It seems fair that as <code>y</code> isn&#39;t used, the compiler bins writes to it. Why it still reads from <code>x</code> is nebulous: With <code>x</code> a reference, that makes sense, in case it&#39;s a hardware register whose polling has side-effects. But that doesn&#39;t apply to the by-value cases...which nonetheless differ. Aside: whether objects can/should be &#39;made&#39; volatile thru <code>volatile *</code> seems contested: top answer at linked Q says no, but N1381 seems to imply yes: <a href=\"http://open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1467853068, "post_id": 38235112, "comment_id": 63893695, "body": "@CaptainObvlious modifications to volatile variables (even automatic ones) are considered observable behaviour"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1467853450, "post_id": 38235112, "comment_id": 63893776, "body": "I&#39;d say <code>g</code> is a compiler bug according to the Standard"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467853457, "post_id": 38235112, "comment_id": 63893778, "body": "@M.M Is there a formal statement on whether reads are considered to have observable effects too? I envision that - depending on the device and how it&#39;s set up electronically vs how it interacts with the language - such reads might have side-effects on whichever register or device they&#39;re polling. You wouldn&#39;t want to skip those by eliding any reads."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1467853495, "post_id": 38235112, "comment_id": 63893793, "body": "@underscore_d yes, reads are also observable behaviour"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467853802, "post_id": 38235112, "comment_id": 63893862, "body": "@M.M Thanks for all the input! I&#39;ll wait a while longer, and assuming your analysis prevails (fwiw, it seems clearly correct to me), submit it to GCC&#39;s Bugzilla, unless one of them see it here first."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467854491, "post_id": 38235112, "comment_id": 63894017, "body": "@M.M No, <code>g</code> is not a compiler bug. Say the assembly code issued individual reads but the CPU hardware coalesced them, would you still say it&#39;s a compiler bug? And how is the optimization any more or less observable if done by the CPU than if it&#39;s done by the compiler? The C standard does not say what the assembly code must look like (how could it?), it says what the assembly code must make the system do. Any optimization the CPU can do can also be done by the assembler. Coalescing reads to unshareable, cacheable values is a legal CPU optimization, so a legal compiler optimization."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467854924, "post_id": 38235112, "comment_id": 63894110, "body": "@DavidSchwartz but surely the system might be affected by the presence or absence of read operations, making elision thereof consequential for what the system does? and any compiler/CPU involved in code as esoteric as this would surely be very carefully selected to work in a very precise way (bearing in mind how implementation-defined <code>volatile</code> is) - so it wouldn&#39;t just issue spurious reads or haphazardly combine them. That seems well within the ballpark of <code>volatile</code> to me, at least for such a system. Besides - none of that addresses why <code>f()</code> and <code>g()</code> differ or which of the two is correct."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1467855161, "post_id": 38235112, "comment_id": 63894168, "body": "@DavidSchwartz The standard says that the system must perform a read of a memory location corresponding to <code>x</code>, once for each loop iteration.     It would be non-conforming if the system (be it the compiler, or the CPU or whatever) combined all of those to a single read."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467855632, "post_id": 38235112, "comment_id": 63894261, "body": "@DavidSchwartz since when are <code>volatile</code> referents &quot;unshareable, cacheable values&quot;? isn&#39;t the reality <i>precisely the opposite</i>? <code>volatile</code> innately implies shareable (obligatory: though not thread-safe)  in the strict sense: that the program must re-read the physical memory location whenever asked to, in case something else has changed it. what could be more shareable and less cacheable than that?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467857328, "post_id": 38235112, "comment_id": 63894585, "body": "In case anyone is at risk of being misled, here are quotes from both Standards requiring that the sequence of reads and writes to any given <code>volatile</code> variable be preserved, i.e. every operation must remain <i>and</i> must occur in its written sequence. <a href=\"http://stackoverflow.com/questions/2535148/volatile-qualifier-and-compiler-reorderings\" title=\"volatile qualifier and compiler reorderings\">stackoverflow.com/questions/2535148/&hellip;</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467860338, "post_id": 38235112, "comment_id": 63895237, "body": "@M.M Then most modern compilers and systems are non-conforming because they do not prevent the CPU from coalescing reads of <code>volatile</code>s declared on the stack and unshared."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467860369, "post_id": 38235112, "comment_id": 63895238, "body": "@underscore_d Then no modern compiler on x86 CPUs is conforming, because they do not prevent the CPU from coalescing reads. (But that&#39;s an absurdly incorrect reading on the standard.) (In this particular case, the compiler happens to know that this particular variable is uncacheable and unshareable. Regardless of the fact that it&#39;s been declared <code>volatile</code>. The CPU can coalesce reads in this case, and the compiler cannot stop it. If you were reading the standard right, the majority of modern platforms would be violating the standard.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467860860, "post_id": 38235112, "comment_id": 63895329, "body": "@DavidSchwartz if anything, you&#39;re making a case that this is a dumb requirement in the standard"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467864446, "post_id": 38235112, "comment_id": 63895959, "body": "@M.M No, it&#39;s not dumb at all. It&#39;s just very frequently misunderstood. Ask a separate question (about why it is not the case that every modern compiler on x86 is violating the standard) and I&#39;ll explain it in more detail."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467895131, "post_id": 38235112, "comment_id": 63912482, "body": "now at GCC Bugzilla: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=71793</a>"}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467909701, "post_id": 38235112, "comment_id": 63922877, "body": "@M.M I&#39;m fairly certain that the standard doesn&#39;t impose requirements on the behavior of the CPU, at least in this case. If my C/C++ code has 5 volatile reads to a eg: a hardware register, the compiler must produce machine code does that does exactly 5 reads to that address. The CPU is free to coalesce those reads, or do complicated hardware side effects (although the only example I know that actually happens is the register being cleared)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1467924786, "post_id": 38235112, "comment_id": 63931254, "body": "@mbrig That does not make sense. If the compiler produced instructions that caused the CPU to coalesce the reads, then the compiler didn&#39;t produce instructions that did exactly those five reads. The standard isn&#39;t talking about what the instruction stream has to be, it&#39;s talking about what the system has to do. What specific codes the compiler emits to make the CPU do what the standard says it has to do is an implementation detail."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1467924983, "post_id": 38235112, "comment_id": 63931345, "body": "@mbrig For example, say there was a CPU that always reversed the execution order of two consecutive writes to the same address. If code did <code>i=5; i=3;</code>, if the compiler was going to emit both writes, it would have to emit the instruction for the <code>i=3;</code> first, otherwise the final value would be wrong. Surely you wouldn&#39;t argue that if <code>i</code> was <code>volatile</code>, on such a platform, it&#39;s okay to make the final value 5 because the CPU reversed the instructions, not the compiler. It&#39;s cannot be the order of the instructions that matters."}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467926496, "post_id": 38235112, "comment_id": 63932010, "body": "@DavidSchwartz The compiler has to produce code that makes the machine behave as if it did the correct equivalent of the c code. If coalescing reads does not alter the behavior of the c code, the compiler does not need to prevent the CPU from doing it (not that a CPU would ever do such a thing if it had effects). Both CPU and compiler need to do the correct thing, volatile reads cannot be coalesced by the compiler because the CPU is allowed to (and does, on many platforms) create side effects."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1467926972, "post_id": 38235112, "comment_id": 63932223, "body": "@mbrig Not altering the behavior of the C code is not what the standard requires. Accesses to <code>volatile</code>s are declared to be observable behavior and modifying the observable behavior is not permitted under the as-if rule, or any other rule. I can&#39;t make sense of your last sentence. Are you saying that the compiler cannot coalesce reads of <code>volatile</code>s even in cases where the CPU could coalesce them? If so, on what basis do you reach that conclusion? Why does it matter where the coalescing is done?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1467927052, "post_id": 38235112, "comment_id": 63932257, "body": "@mbrig The standard doesn&#39;t say anything at all about what instructions the compiler has to emit. That there is machine code is an implementation detail. The standard says what the machine has to do. All that matters is what those instructions make the CPU do. If read coalescing is legal, it can be done by the compiler, the CPU, or whatever. If read coalescing is illegal, it cannot be done by the system, regardless of how it&#39;s made to happen. That the instruction stream is where volatile accesses are to be observed is made up and found nowhere in the standard."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467936310, "post_id": 38235112, "comment_id": 63935094, "body": "@DavidSchwartz: If the compiler either knew that there was no way the CPU could be configured that would not cause multiple reads to be equivalent to a single read, or else it expressly documented that it did not support CPU modes that would distinguish multiple reads from a single read, then the compiler could coalesce the reads itself provided that each such read continued to be regarded as a &quot;side-effect&quot; for purposes of preventing infinite-loop-related UB.  Mere ignorance of any means by which single or multiple reads might be distinguishable, however, would not be sufficient to..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467936324, "post_id": 38235112, "comment_id": 63935097, "body": "...justify coalescing them at the compiler level unless the compiler expressly documented that such features, if they exist, will not be supported."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467937814, "post_id": 38235112, "comment_id": 63935438, "body": "@supercat Are you saying it should do this because it has any practical use? Or are you saying that while this would severely impact performance negatively, it nevertheless is what the standard requires?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467939188, "post_id": 38235112, "comment_id": 63935737, "body": "@DavidSchwartz: If the compiler writer wants to document that certain CPU features are not supported, that shouldn&#39;t impact performance at all.  Otherwise, the compiler writer should assume that a programmer who wants <code>volatile</code> knows something that the compiler doesn&#39;t.  There are many places where it would be helpful to have &quot;maybe&quot; qualifiers on parameters to expressly allow the compiler to omit qualifiers when in-lining a function in cases where the arguments don&#39;t have them, or have return types qualified to match parameters (while the prototype of <code>strchr</code> couldn&#39;t be changed..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467939351, "post_id": 38235112, "comment_id": 63935773, "body": "...to use such a feature, it should logically be declared in such a fashion as to say that the &quot;const&quot;-ness of the returned pointer should match the const-ness of the one that&#39;s passed in).  In the absence of such a thing, however, I would suggest that programmers are more interested in correctness than speed, and a compiler should trust that a programmer who uses <code>volatile</code> does so for a reason, and that a programmer who is interested in speed, writing two versions of a functions--one which accepts a <code>volatile</code>-qualified pointer and one which accepts a non-qualified pointer..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467939510, "post_id": 38235112, "comment_id": 63935805, "body": "...would be better than having a compiler try to guess whether the programmer doesn&#39;t really need something to be volatile-qualified in a particular case.  Even in a non-exotic platform, a programmer might enable a signal handle during a small stretch of code and require that all accesses to a particular variable be treated as <code>volatile</code> while the handler is active.  Provided that the last access to the variable before the handler is enabled is a volatile write, the first access after is either a write or a volatile read, and there are no non-qualified accesses while it is enabled..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467939553, "post_id": 38235112, "comment_id": 63935813, "body": "...I would suggest that a programmer should be able to achieve defined behavior without having to use wasteful <code>volatile</code> accesses at other times when the handler is not enabled."}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1468248221, "post_id": 38235112, "comment_id": 64036356, "body": "@DavidSchwartz &quot;Are you saying that the compiler cannot coalesce reads of volatiles even in cases where the CPU could coalesce them?&quot; Yes, exactly. The compiler is prohibited in most/many cases from coalescing volatile reads. The CPU has more information available to it, and can safely coalesce reads in certain cases. Eg: <code>volatile int* x = 0x10; *x; *x; int y =*x;</code> The compiler does not know if reading address 0x10 has a side effects, so it must issue all reads, in-order. The CPU is aware if reading 0x10 has side effects, or perhaps it is a read-only register, and can coalesce or not, safely."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1468258446, "post_id": 38235112, "comment_id": 64042274, "body": "@mbrig You cannot possibly make portable statements about what the compiler does and does not know. That&#39;s utterly absurd. Are you saying a CPU that permits interrogation of which memory ranges have side-effects cannot exist?"}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1468259572, "post_id": 38235112, "comment_id": 64042887, "body": "@DavidSchwartz I don&#39;t think that&#39;s relevant. The C and C++ standards state that reads to volatile memory are observable behavior ( &quot;(1.9/6): The observable behavior of the abstract machine is its sequence of reads and writes to volatile data and calls to library I/O functions. &quot;), so the compiler needs to preserve them."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1468259804, "post_id": 38235112, "comment_id": 64043016, "body": "@mbrig Then so does the CPU. The standards don&#39;t distinguish between the CPU and the compiler. (How could they? They just say what has to happen, not what does it or how.) But Intel CPUs aggregate reads. So either everyone is violating the standard or you are reading it wrong."}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1468263236, "post_id": 38235112, "comment_id": 64044765, "body": "@DavidSchwartz They obviously don&#39;t aggregate reads when it has side effects, or when there&#39;s the possibility of interrupts modifying the memory outside of normal flow (or if they do, they document specific memory barriers that the compiler must issue to protect the reads). The compiler and CPU obviously preserve the order and number of volatile reads/writes (where it matters), or interrupt service routines wouldn&#39;t work, and the CPU/compiler combo would be unusable for many cases."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1468271581, "post_id": 38235112, "comment_id": 64049050, "body": "@mbrig Again, that can&#39;t be right. Preserving things &quot;where it matters&quot; is the as-if rule. And <code>volatile</code> is an explicit exception to the as-if rule since accesses to them is <i>defined</i> as observable behavior. As you are reading the spec, it says you can&#39;t touch them ever where it doesn&#39;t matter. (Again, I don&#39;t agree with the way you&#39;re reading the spec. But you are reading it as accesses to volatile variables are defined as observable behavior and so can&#39;t be changed even where it doesn&#39;t matter. If not, then please explain what you think the spec is saying.)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "edited": false, "score": 0, "creation_date": 1468275318, "post_id": 38235112, "comment_id": 64050433, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/117026/discussion-between-david-schwartz-and-mbrig\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467904023, "post_id": 38248847, "comment_id": 63919237, "body": "That sounds similar to what Richard Biener replied on my ticket - <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=71793</a> - but his reply and edits of the ticket, chiefly the tag <code>wrong-code</code>, indicate that he doesn&#39;t think this is OK. Do you? The allocation of <code>g(x)</code> in a register seems like a detail of the ABI - in which case, thanks for the mechanistic explanation - but not permission to break <code>volatile</code>. It looks like the compiler should alter its behaviour to behave properly in this case."}, {"owner": {"reputation": 171, "user_id": 6561397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b245c922c42e59fa741f3e758a5a6c32?s=128&d=identicon&r=PG&f=1", "display_name": "avdgrinten", "link": "https://stackoverflow.com/users/6561397/avdgrinten"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467904525, "post_id": 38248847, "comment_id": 63919592, "body": "Well, what behavior do you expect? The compiler cannot issue a memory-read because there is no memory location to read from. The read operation of the abstract machine really IS a no-op here. It could copy the value to memory and read from that location but that would only make sense if <code>x</code> could actually escape <code>g</code>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467904662, "post_id": 38248847, "comment_id": 63919694, "body": "Again setting aside the dubious utility of a <code>volatile</code> local variable, what I expect is the same as for any other <code>volatile</code>-declared object: that reads and writes must occur in memory and cannot be elided nor reordered (relative to others on the same object). So what I would expect is that <code>x</code> would <i>not</i> be allocated in a register, rather on the stack, as in the other 2 cases. Can the compiler do that without breaking ABI? If so, I think that&#39;s what it should do."}, {"owner": {"reputation": 171, "user_id": 6561397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b245c922c42e59fa741f3e758a5a6c32?s=128&d=identicon&r=PG&f=1", "display_name": "avdgrinten", "link": "https://stackoverflow.com/users/6561397/avdgrinten"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1467905028, "post_id": 38248847, "comment_id": 63919966, "body": "The compiler cannot allocate <code>x</code> in memory because the ABI does not special case volatile arguments (because they do not make much sense) and just passes them in registers just like non-volatile arguments. Allocating <code>x</code> in memory would break the ABI&#39;s function calling sequence. Note that the compiler would be allowed to copy <code>x</code> to a different location (but why should reads/write to this location remain ordered/unaltered?) but it certainly cannot accept the <code>x</code> argument in memory without breaking the ABI."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467905917, "post_id": 38248847, "comment_id": 63920612, "body": "Thanks for the explanation. Does the same apply to 32-bit x86? I don&#39;t have a 32-bit-only machine at hand, but cross-compiling with MSYS2&#39;s MinGW32 produces identical ASM... though now I&#39;m wondering whether my Debian <code>stable</code> box that produced the ASM above is 32-bit! I&#39;ll wait to see what the folks at GCC conclude, but I think you might well be right. If so, this probably just arose from a combination of ABI compliance and lack of special-case handling for this odd scenario - like copying to memory &amp; using that as you said. If so, we&#39;ll see whether they add an (academic) workaround for this."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467939760, "post_id": 38248847, "comment_id": 63935859, "body": "@avdgrinten: Why can&#39;t a compiler allocate x in memory?  The caller isn&#39;t going to put the value into memory, but all that means is that the function prologue code will have to do so.  If <code>x</code> is volatile and the function contains a setjmp, I would think a compiler would likely have to keep it in memory and treat it as <code>volatile</code> whether or not its address is taken unless the compiler knows that no <code>setjmp</code> will occur unexpectedly."}, {"owner": {"reputation": 171, "user_id": 6561397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b245c922c42e59fa741f3e758a5a6c32?s=128&d=identicon&r=PG&f=1", "display_name": "avdgrinten", "link": "https://stackoverflow.com/users/6561397/avdgrinten"}, "edited": false, "score": 1, "creation_date": 1467974244, "post_id": 38248847, "comment_id": 63948694, "body": "I agree that the compiler should certainly copy the value into memory (and not elide accesses to this memory location) if the function contains a <code>setjmp</code> or lets a pointer to the local volatile variable escape the function. In other cases my reading of the standard is that it is okay to elide volatile read/writes, even if the variable was not stored in a register: The compiler behaves <code>as-if</code> the volatile read/write actually took place, because it can prove that no one (and not even memory mapped hardware, signal handlers or other async events) can actually observe the access."}], "tags": [], "owner": {"reputation": 171, "user_id": 6561397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b245c922c42e59fa741f3e758a5a6c32?s=128&d=identicon&r=PG&f=1", "display_name": "avdgrinten", "link": "https://stackoverflow.com/users/6561397/avdgrinten"}, "is_accepted": false, "score": 2, "last_activity_date": 1467903588, "creation_date": 1467903588, "answer_id": 38248847, "question_id": 38235112, "link": "https://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument/38248847#38248847", "title": "Why is a volatile local variable optimised differently from a volatile argument, and why does the optimiser generate a no-op loop from the latter?", "body": "<p>For f: GCC eliminates the non-volatile stores (but not the loads, which can have side-effects if the source location is a memory mapped hardware register). There is really nothing surprising here.</p>\n\n<p>For g: Because of the <a href=\"http://www.x86-64.org/documentation/abi.pdf\" rel=\"nofollow\">x86_64 ABI</a> the parameter <code>x</code> of <code>g</code> is allocated in a register (i.e. <code>rdx</code>) and does not have a location in memory. Reading a general purpose register does not have any observable side effects so the dead read gets eliminted.</p>\n"}], "owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1685, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1467903588, "creation_date": 1467845712, "last_edit_date": 1495540287, "question_id": 38235112, "link": "https://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument", "title": "Why is a volatile local variable optimised differently from a volatile argument, and why does the optimiser generate a no-op loop from the latter?", "body": "<h1>Background</h1>\n\n<p>This was inspired by this question/answer and ensuing discussion in the comments: <a href=\"https://stackoverflow.com/a/38233312/2757035\">Is the definition of \u201cvolatile\u201d this volatile, or is GCC having some standard compliancy problems?</a>. Based on others' and my interpretation of what should happening, as discussed in comments, I've submitted it to GCC Bugzilla: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793</a> Other relevant responses are still welcome.</p>\n\n<p>Also, that thread has since given rise to this question: <a href=\"https://stackoverflow.com/questions/38243501\">Does accessing a declared non-volatile object through a volatile reference/pointer confer volatile rules upon said accesses?</a></p>\n\n<h1>Intro</h1>\n\n<p>I know <code>volatile</code> isn't what most people think it is and <em>is</em> an implementation-defined nest of vipers. And I certainly don't want to use the below constructs in any real code. That said, I'm totally baffled by what's going on in these examples, so I'd really appreciate any elucidation.</p>\n\n<p>My guess is this is due to either highly nuanced interpretation of the Standard or (more likely?) just corner-cases for the optimiser used. Either way, while more academic than practical, I hope this is deemed valuable to analyse, especially given how typically misunderstood <code>volatile</code> is. Some more data points - or perhaps more likely, points against it - must be good.</p>\n\n<h1>Input</h1>\n\n<p>Given this code:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\nvoid f(void *const p, std::size_t n)\n{\n    unsigned char *y = static_cast&lt;unsigned char *&gt;(p);\n    volatile unsigned char const x = 42;\n    // N.B. Yeah, const is weird, but it doesn't change anything\n\n    while (n--) {\n        *y++ = x;\n    }\n}\n\nvoid g(void *const p, std::size_t n, volatile unsigned char const x)\n{\n    unsigned char *y = static_cast&lt;unsigned char *&gt;(p);\n\n    while (n--) {\n        *y++ = x;\n    }\n}\n\nvoid h(void *const p, std::size_t n, volatile unsigned char const &amp;x)\n{\n    unsigned char *y = static_cast&lt;unsigned char *&gt;(p);\n\n    while (n--) {\n        *y++ = x;\n    }\n}\n\nint main(int, char **)\n{\n    int y[1000];\n    f(&amp;y, sizeof y);\n    volatile unsigned char const x{99};\n    g(&amp;y, sizeof y, x);\n    h(&amp;y, sizeof y, x);\n}\n</code></pre>\n\n<h1>Output</h1>\n\n<p><code>g++</code> from <code>gcc (Debian 4.9.2-10) 4.9.2</code> (Debian <code>stable</code> a.k.a. Jessie) with the command line <code>g++ -std=c++14 -O3 -S test.cpp</code> produces the below ASM for <code>main()</code>. Version <code>Debian 5.4.0-6</code> (current <code>unstable</code>) produces equivalent code, but I just happened to run the older one first, so here it is:</p>\n\n<pre><code>main:\n.LFB3:\n    .cfi_startproc\n\n# f()\n    movb    $42, -1(%rsp)\n    movl    $4000, %eax\n    .p2align 4,,10\n    .p2align 3\n.L21:\n    subq    $1, %rax\n    movzbl  -1(%rsp), %edx\n    jne .L21\n\n# x = 99\n    movb    $99, -2(%rsp)\n    movzbl  -2(%rsp), %eax\n\n# g()\n    movl    $4000, %eax\n    .p2align 4,,10\n    .p2align 3\n.L22:\n    subq    $1, %rax\n    jne .L22\n\n# h()\n    movl    $4000, %eax\n    .p2align 4,,10\n    .p2align 3\n.L23:\n    subq    $1, %rax\n    movzbl  -2(%rsp), %edx\n    jne .L23\n\n# return 0;\n    xorl    %eax, %eax\n    ret\n    .cfi_endproc\n</code></pre>\n\n<h1>Analysis</h1>\n\n<p>All 3 functions are inlined, and both that allocate <code>volatile</code> local variables do so on the stack for fairly obvious reasons. But that's about the only thing they share...</p>\n\n<ul>\n<li><p><strong><code>f()</code></strong> ensures to read from <code>x</code> on each iteration, presumably due to its <code>volatile</code> - but just dumps the result to <code>edx</code>, presumably because the destination <code>y</code> isn't declared <code>volatile</code> and is never read, meaning changes to it can be nixed under the <em>as-if</em> rule. OK, makes sense.</p>\n\n<ul>\n<li>Well, I mean... <em>kinda</em>. Like, not really, because <code>volatile</code> is really for hardware registers, and clearly a local value can't be one of those - and can't otherwise be modified in a <code>volatile</code> way unless its address is passed out... which it's not. Look, there's just not a lot of sense to be had out of <code>volatile</code> local values. But C++ lets us declare them and tries to do <em>something</em> with them. And so, confused as always, we stumble onwards.</li>\n</ul></li>\n<li><p><strong><code>g()</code></strong>: <em>What.</em> By moving the <code>volatile</code> source into a pass-by-value parameter, which is still just another local variable, GCC somehow decides it's not or <em>less</em> <code>volatile</code>, and so it doesn't need to read it every iteration... but it still carries out the loop, <em>despite its body now doing nothing</em>.</p></li>\n<li><p><strong><code>h()</code></strong>: By taking the passed <code>volatile</code> as pass-by-reference, the same effective behaviour as <code>f()</code> is restored, so the loop does <code>volatile</code> reads.</p>\n\n<ul>\n<li>This case alone actually makes practical sense to me, for reasons outlined above against <code>f()</code>. To elaborate: Imagine <code>x</code> refers to a hardware register, of which every read has side-effects. You wouldn't want to skip any of those.</li>\n</ul></li>\n</ul>\n\n<p>Adding <code>#define volatile /**/</code> leads to <code>main()</code> being a no-op, as you'd expect. So, when present, even on a local variable <code>volatile</code> does do something... I just have no idea <em>what</em> in the case of <code>g()</code>. What on Earth is going on there?</p>\n\n<h1>Questions</h1>\n\n<ul>\n<li>Why does a local value declared in-body produce different results from a by-value parameter, with the former letting reads be optimised away? Both are declared <code>volatile</code>. Neither have an address passed out - and don't have a <code>static</code> address, ruling out any inline-ASM <code>POKE</code>ry - so they can never be modified outwith the function. The compiler can see that each is constant, need never be re-read, and <code>volatile</code> just ain't true -\n\n<ul>\n<li>so (A) is either <em>allowed</em> to be elided under such constraints? (acting <em>as-if</em> they weren't declared <code>volatile</code>) -</li>\n<li>and (B) why does only one get elided? Are some <code>volatile</code> local variables more <code>volatile</code> than others?</li>\n</ul></li>\n<li>Setting aside that inconsistency for just a moment: After the read was optimised away, why does the compiler still generate the loop? <em>It does nothing!</em> Why doesn't the optimiser elide it <em>as-if</em> no loop was coded?</li>\n</ul>\n\n<p>Is this a weird corner case due to order of optimising analyses or such? As the code is a daft thought-experiment, I wouldn't chastise GCC for this, but it'd be good to know for sure. (Or is <code>g()</code> the manual timing loop people have dreamt of all these years?) If we conclude there's no Standard bearing on any of this, I'll move it to their Bugzilla just for their information.</p>\n\n<p>And of course, the more important question from a practical perspective, though I don't want that to overshadow the potential for compiler geekery... Which, if any of these, are well-defined/correct according to the Standard?</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0", "unresolved-external", "linkage"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467846509, "post_id": 38235065, "comment_id": 63892013, "body": "You still need to link to all the dependent libraries (that were needed for project a) when you link project b. A static library project will not combine dependent libraries into the static library you are building."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467846704, "post_id": 38235065, "comment_id": 63892060, "body": "<b><i>it includes the same OpenCV libs</i></b> Your error message seems to say that you are not linking to all of the needed opencv libs in project b."}, {"owner": {"reputation": 51, "user_id": 5282474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe484a720e8efe20f0c850169176ef?s=128&d=identicon&r=PG&f=1", "display_name": "Bschs", "link": "https://stackoverflow.com/users/5282474/bschs"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467883710, "post_id": 38235065, "comment_id": 63904831, "body": "doesn&#39;t for that you can mark V in &quot;inherit from parent or project defaults&quot;?"}, {"owner": {"reputation": 51, "user_id": 5282474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe484a720e8efe20f0c850169176ef?s=128&d=identicon&r=PG&f=1", "display_name": "Bschs", "link": "https://stackoverflow.com/users/5282474/bschs"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1468094816, "post_id": 38235065, "comment_id": 63990223, "body": "anyway, I included all the dependent libraries, and the errors still appeared"}], "owner": {"reputation": 51, "user_id": 5282474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe484a720e8efe20f0c850169176ef?s=128&d=identicon&r=PG&f=1", "display_name": "Bschs", "link": "https://stackoverflow.com/users/5282474/bschs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1688, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1467846072, "creation_date": 1467845475, "last_edit_date": 1467846072, "question_id": 38235065, "link": "https://stackoverflow.com/questions/38235065/opencv-error-lnk2001-unresolved-external-symbol", "title": "OpenCV error LNK2001: unresolved external symbol", "body": "<p>I  have one project - Project A - that I compile as lib. (Release mode MT VS12 c++). to this project I had connected OpenCV 300 (static mode either), it compiled well with no errors.</p>\n\n<p>then I have another project - Project B - with the same configurations as the first one, and it includes the same OpenCV libs  and headers.\nthe second project B, is also includes project A (I had Project A headers &amp; lib to Project B).</p>\n\n<p>then when I compile Project B, I get the following errors</p>\n\n<pre><code> error LNK2001: unresolved external symbol \"void __cdecl cv::circle(class cv::Mat &amp;,class cv::Point_&lt;int&gt;,int,class cv::Scalar_&lt;double&gt; const &amp;,int,int,int)\" (?circle@cv@@YAXAAVMat@1@V?$Point_@H@1@HABV?$Scalar_@N@1@HHH@Z)\n error LNK2001: unresolved external symbol \"void __cdecl cv::line(class cv::Mat &amp;,class cv::Point_&lt;int&gt;,class cv::Point_&lt;int&gt;,class cv::Scalar_&lt;double&gt; const &amp;,int,int,int)\" (?line@cv@@YAXAAVMat@1@V?$Point_@H@1@1ABV?$Scalar_@N@1@HHH@Z)\n error LNK2001: unresolved external symbol \"class cv::_OutputArray const &amp; __cdecl cv::noArray(void)\" (?noArray@cv@@YAABV_OutputArray@1@XZ)\n error LNK2001: unresolved external symbol \"int __cdecl cv::_interlockedExchangeAdd(int *,int)\" (?_interlockedExchangeAdd@cv@@YAHPAHH@Z)\n error LNK2001: unresolved external symbol \"void __cdecl cv::normalize(class cv::_InputArray const &amp;,class cv::_OutputArray const &amp;,double,double,int,int,class cv::_InputArray const &amp;)\" (?normalize@cv@@YAXABV_InputArray@1@ABV_OutputArray@1@NNHH0@Z)\n : error LNK2001: unresolved external symbol \"void __cdecl cv::drawContours(class cv::_OutputArray const &amp;,class cv::_InputArray const &amp;,int,class cv::Scalar_&lt;double&gt; const &amp;,int,int,class cv::_InputArray const &amp;,int,class cv::Point_&lt;int&gt;)\" (?drawContours@cv@@YAXABV_OutputArray@1@ABV_InputArray@1@HABV?$Scalar_@N@1@HH1HV?$Point_@H@1@@Z)\n : error LNK2001: unresolved external symbol \"public: virtual bool __thiscall cv::_InputArray::empty(void)const \" (?empty@_InputArray@cv@@UBE_NXZ)\n : error LNK2001: unresolved external symbol \"public: virtual int __thiscall cv::_InputArray::channels(int)const \" (?channels@_InputArray@cv@@UBEHH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual int __thiscall cv::_InputArray::depth(int)const \" (?depth@_InputArray@cv@@UBEHH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual int __thiscall cv::_InputArray::type(int)const \" (?type@_InputArray@cv@@UBEHH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual unsigned int __thiscall cv::_InputArray::total(int)const \" (?total@_InputArray@cv@@UBEIH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::Size_&lt;int&gt; __thiscall cv::_InputArray::size(int)const \" (?size@_InputArray@cv@@UBE?AV?$Size_@H@2@H@Z)\n : error LNK2001: unresolved external symbol \"public: virtual int __thiscall cv::_InputArray::kind(void)const \" (?kind@_InputArray@cv@@UBEHXZ)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::gpu::GpuMat __thiscall cv::_InputArray::getGpuMat(void)const \" (?getGpuMat@_InputArray@cv@@UBE?AVGpuMat@gpu@2@XZ)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::GlTexture __thiscall cv::_InputArray::getGlTexture(void)const \" (?getGlTexture@_InputArray@cv@@UBE?AVGlTexture@2@XZ)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::GlBuffer __thiscall cv::_InputArray::getGlBuffer(void)const \" (?getGlBuffer@_InputArray@cv@@UBE?AVGlBuffer@2@XZ)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_InputArray::getMatVector(class std::vector&lt;class cv::Mat,class std::allocator&lt;class cv::Mat&gt; &gt; &amp;)const \" (?getMatVector@_InputArray@cv@@UBEXAAV?$vector@VMat@cv@@V?$allocator@VMat@cv@@@std@@@std@@@Z)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::Mat __thiscall cv::_InputArray::getMat(int)const \" (?getMat@_InputArray@cv@@UBE?AVMat@2@H@Z)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_OutputArray::clear(void)const \" (?clear@_OutputArray@cv@@UBEXXZ)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_OutputArray::release(void)const \" (?release@_OutputArray@cv@@UBEXXZ)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_OutputArray::create(class cv::Size_&lt;int&gt;,int,int,bool,int)const \" (?create@_OutputArray@cv@@UBEXV?$Size_@H@2@HH_NH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_OutputArray::create(int,int,int,int,bool,int)const \" (?create@_OutputArray@cv@@UBEXHHHH_NH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual void __thiscall cv::_OutputArray::create(int,int const *,int,int,bool,int)const \" (?create@_OutputArray@cv@@UBEXHPBHHH_NH@Z)\n : error LNK2001: unresolved external symbol \"public: virtual class cv::Mat &amp; __thiscall cv::_OutputArray::getMatRef(int)const \" (?getMatRef@_OutputArray@cv@@UBEAAVMat@2@H@Z)\n : error LNK2001: unresolved external symbol \"public: virtual bool __thiscall cv::_OutputArray::needed(void)const \" (?needed@_OutputArray@cv@@UBE_NXZ)\n : error LNK2001: unresolved external symbol \"public: virtual bool __thiscall cv::_OutputArray::fixedType(void)const \" (?fixedType@_OutputArray@cv@@UBE_NXZ)\n : error LNK2001: unresolved external symbol \"public: virtual bool __thiscall cv::_OutputArray::fixedSize(void)const \" (?fixedSize@_OutputArray@cv@@UBE_NXZ)\n : error LNK2001: unresolved external symbol \"void __cdecl cv::rectangle(class cv::Mat &amp;,class cv::Point_&lt;int&gt;,class cv::Point_&lt;int&gt;,class cv::Scalar_&lt;double&gt; const &amp;,int,int,int)\" (?rectangle@cv@@YAXAAVMat@1@V?$Point_@H@1@1ABV?$Scalar_@N@1@HHH@Z)\n : error LNK2001: unresolved external symbol \"void __cdecl cv::findContours(class cv::_OutputArray const &amp;,class cv::_OutputArray const &amp;,class cv::_OutputArray const &amp;,int,int,class cv::Point_&lt;int&gt;)\" (?findContours@cv@@YAXABV_OutputArray@1@00HHV?$Point_@H@1@@Z)\n : error LNK2001: unresolved external symbol \"void __cdecl cv::imshow(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;,class cv::_InputArray const &amp;)\" (?imshow@cv@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV_InputArray@1@@Z)\n : error LNK2001: unresolved external symbol \"int __cdecl cv::floodFill(class cv::_OutputArray const &amp;,class cv::Point_&lt;int&gt;,class cv::Scalar_&lt;double&gt;,class cv::Rect_&lt;int&gt; *,class cv::Scalar_&lt;double&gt;,class cv::Scalar_&lt;double&gt;,int)\" (?floodFill@cv@@YAHABV_OutputArray@1@V?$Point_@H@1@V?$Scalar_@N@1@PAV?$Rect_@H@1@22H@Z)\n</code></pre>\n\n<p>thanks in advanced!</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1467845802, "post_id": 38235037, "comment_id": 63891762, "body": "So, what did you try to understand this? Did you check the docu of <code>boost::tuple</code>? (Incidently, I find your function name <code>is_vector_contains()</code> rather strange)."}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1467846372, "post_id": 38235037, "comment_id": 63891953, "body": "@Waller Thanks, and as you suggested I read the documentation and found the same answer as the one  in the answer."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1467846425, "post_id": 38235185, "comment_id": 63891978, "body": "This appears correct, but why? What is the motivation behind that? To allow the user to define the comparisons in a different way (that&#39;s going to ask for trouble)? Boost keeps perplexing me."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1467846589, "post_id": 38235185, "comment_id": 63892030, "body": "@Walter I have no idea. I also find it annoying, but fortunately it is super-trivial to search for."}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1467846986, "post_id": 38235185, "comment_id": 63892145, "body": "@Walter @ juanchopanza In fact in my case I did not know that I should include another head file to make comparison possible. I indeed implement the equal operator, but it did not work. I will  my question to make it clear."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 1, "last_activity_date": 1467846191, "creation_date": 1467846191, "answer_id": 38235185, "question_id": 38235037, "link": "https://stackoverflow.com/questions/38235037/why-i-cannot-use-stdfind-when-the-basic-element-in-a-container-is-a-boosttup/38235185#38235185", "title": "Why I cannot use std::find when the basic element in a container is a boost::tuple?", "body": "<p><code>boost::tuple</code>'s comparison operators are defined in a separate header, which you must include:</p>\n\n<pre><code>#include &lt;boost/tuple/tuple_comparison.hpp&gt;\n</code></pre>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38235185, "answer_count": 1, "score": 0, "last_activity_date": 1467847095, "creation_date": 1467845309, "last_edit_date": 1467847095, "question_id": 38235037, "link": "https://stackoverflow.com/questions/38235037/why-i-cannot-use-stdfind-when-the-basic-element-in-a-container-is-a-boosttup", "title": "Why I cannot use std::find when the basic element in a container is a boost::tuple?", "body": "<p>I give the following codes to make my question more clear:</p>\n\n<pre><code>    bool bFind;\n    boost::tuple&lt;int&gt; abc;\n    //int abc;\n    std::vector&lt;boost::tuple&lt;int&gt; &gt; myArray;\n    //std::vector&lt;int&gt; myArray;\n    bFind = is_vector_contains(myArray,abc);\n</code></pre>\n\n<p>is_vector_contains is template function:</p>\n\n<pre><code>template&lt;typename T&gt;\n    bool is_vector_contains(const std::vector&lt;T&gt; &amp;vecArray, const T &amp;element)\n    {\n        if(std::find(vecArray.begin(),vecArray.end(),element) == vecArray.end())\n            return false;\n        else\n            return true;\n    }\n</code></pre>\n\n<p>When I compile the above codes, I have the following compilation error:</p>\n\n<pre><code>Error   1   error C2678: binary '==' : no operator found which takes a left-hand operand of type 'const boost::tuples::tuple&lt;T0&gt;' (or there is no acceptable conversion) \n</code></pre>\n\n<p>Any ideas? I tried to define a equal operator in this way, but it did not succeed in compilation.</p>\n\n<pre><code> bool operator == (const boost::tuple&lt;int&gt; &amp;a, const boost::tuple&lt;int&gt; &amp;b)\n    {\n        return true;\n    }\n</code></pre>\n"}, {"tags": ["c++", "glsl", "shader", "vulkan", "spir-v"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "edited": false, "score": 1, "creation_date": 1468064628, "post_id": 38272580, "comment_id": 63981485, "body": "Thank you for the help, would something like this be a correct setup? <a href=\"https://i.gyazo.com/3fbe9a06d1bf536222f2204d317b8321.png\" rel=\"nofollow noreferrer\">i.gyazo.com/3fbe9a06d1bf536222f2204d317b8321.png</a>. (It is more clearly visible for you if i use pragma libs and full includes like this. Obviously the project settings need to be edited with include directories and lib)"}, {"owner": {"reputation": 46, "user_id": 6566472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ff66c40c6404d988c1538a89f7f63d?s=128&d=identicon&r=PG&f=1", "display_name": "johnkslang", "link": "https://stackoverflow.com/users/6566472/johnkslang"}, "reply_to_user": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "edited": false, "score": 0, "creation_date": 1468212060, "post_id": 38272580, "comment_id": 64015125, "body": "Looks okay; obviously depends on whether your environment meshes with that.  If it links and works, I think you&#39;re good."}], "tags": [], "owner": {"reputation": 46, "user_id": 6566472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ff66c40c6404d988c1538a89f7f63d?s=128&d=identicon&r=PG&f=1", "display_name": "johnkslang", "link": "https://stackoverflow.com/users/6566472/johnkslang"}, "is_accepted": true, "score": 3, "last_activity_date": 1555173604, "last_edit_date": 1555173604, "creation_date": 1467999787, "answer_id": 38272580, "question_id": 38234986, "link": "https://stackoverflow.com/questions/38234986/how-to-use-glslang/38272580#38272580", "title": "How to use glslang", "body": "<p>There are several libs you need to use.  An example consumer to look at is LunarGLASS: <a href=\"https://github.com/LunarG/LunarGLASS\" rel=\"nofollow noreferrer\">https://github.com/LunarG/LunarGLASS</a>.  There, you can see the file:</p>\n\n<p><a href=\"https://github.com/LunarG/LunarGLASS/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">https://github.com/LunarG/LunarGLASS/blob/master/CMakeLists.txt</a></p>\n\n<p>Which inside contains this for the libraries:</p>\n\n<pre><code>set(GLSLANGLIBS\n    glslang\n    HLSL\n    OSDependent\n    OGLCompiler\n    SPIRV)\n</code></pre>\n\n<p>The readme for glslang contains some important information.  In addition, within glslang, the glslangValidator tool (basically StandAlone.cpp) shows how to use the API for the libraries. You can also see the Frontends/glslang directory in the LunarGLASS project for a similar use.</p>\n"}, {"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1472587217, "post_id": 39235812, "comment_id": 65809351, "body": "This answer relies completely on the content of external links. Should they ever become invalid, your answer would be useless. So please <a href=\"https://stackoverflow.com/posts/39235812/edit\">edit</a> your answer and add at least a summary of what can be found there. Thank you!"}], "tags": [], "owner": {"reputation": 106, "user_id": 6775692, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6XQhFs6Jw34/AAAAAAAAAAI/AAAAAAAAbpE/gDkXbKcrg-c/photo.jpg?sz=128", "display_name": "David Neto", "link": "https://stackoverflow.com/users/6775692/david-neto"}, "is_accepted": false, "score": 3, "last_activity_date": 1472585931, "creation_date": 1472585931, "answer_id": 39235812, "question_id": 38234986, "link": "https://stackoverflow.com/questions/38234986/how-to-use-glslang/39235812#39235812", "title": "How to use glslang", "body": "<p>The Shaderc project at <a href=\"https://github.com/google/shaderc\" rel=\"nofollow\">https://github.com/google/shaderc</a> provides an easy-to-use C++ API that wraps around Glslang's compiler to SPIR-V.</p>\n\n<p>For example usage, see <a href=\"https://github.com/google/shaderc/blob/master/examples/online-compile/main.cc\" rel=\"nofollow\">https://github.com/google/shaderc/blob/master/examples/online-compile/main.cc</a> </p>\n"}, {"tags": [], "owner": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1579833610, "creation_date": 1579833610, "answer_id": 59889751, "question_id": 38234986, "link": "https://stackoverflow.com/questions/38234986/how-to-use-glslang/59889751#59889751", "title": "How to use glslang", "body": "<p>You can use the <code>glslang</code> C interface (<a href=\"https://github.com/KhronosGroup/glslang/pull/2038\" rel=\"nofollow noreferrer\">https://github.com/KhronosGroup/glslang/pull/2038</a>) to compile you shader source code into SPIR-V as follows.</p>\n\n<pre><code>const char* shaderCodeVertex = ...;\n\nconst glslang_input_t input =\n{\n    .language = GLSLANG_SOURCE_GLSL,\n    .stage = GLSLANG_STAGE_VERTEX,\n    .client = GLSLANG_CLIENT_VULKAN,\n    .client_version = GLSLANG_TARGET_VULKAN_1_1,\n    .target_language = GLSLANG_TARGET_SPV,\n    .target_language_version = GLSLANG_TARGET_SPV_1_3,\n    .code = shaderCodeVertex,\n    .default_version = 100,\n    .default_profile = GLSLANG_NO_PROFILE,\n    .force_default_version_and_profile = false,\n    .forward_compatible = false,\n    .messages = GLSLANG_MSG_DEFAULT_BIT,\n};\n\nglslang_initialize_process();\n\nglslang_shader_t* shader = glslang_shader_create( &amp;input );\n\nif ( !glslang_shader_preprocess(shader, &amp;input) )\n{\n    // use glslang_shader_get_info_log() and glslang_shader_get_info_debug_log()\n}\n\nif ( !glslang_shader_parse(shader, &amp;input) )\n{\n    // use glslang_shader_get_info_log() and glslang_shader_get_info_debug_log()\n}\n\nglslang_program_t* program = glslang_program_create();\nglslang_program_add_shader( program, shader );\n\nif (!glslang_program_link(program, GLSLANG_MSG_SPV_RULES_BIT | GLSLANG_MSG_VULKAN_RULES_BIT))\n{\n    // use glslang_program_get_info_log() and glslang_program_get_info_debug_log();\n}\n\nglslang_program_SPIRV_generate( program, input.stage );\n\nif ( glslang_program_SPIRV_get_messages(program) )\n{\n    printf(\"%s\", glslang_program_SPIRV_get_messages(program));\n}\n\nglslang_shader_delete( shader );\n</code></pre>\n\n<p>The compiled SPIR-V blob can be used with Vulkan the following way.</p>\n\n<pre><code>const VkShaderModuleCreateInfo ci =\n{\n    .sType    = VK_STRUCTURE_TYPE_SHADER_MODULE_CREATE_INFO,\n    .codeSize = glslang_program_SPIRV_get_size(program) * sizeof(unsigned int),\n    .pCode    = glslang_program_SPIRV_get_ptr(program)\n};\n\nVkResult result = vkCreateShaderModule(device, &amp;ci, nullptr, ...);\n\nglslang_program_delete( program );\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 6558299, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e65e1d1e173c7dff74930ea70e3ce1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Aedoro", "link": "https://stackoverflow.com/users/6558299/aedoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10320, "favorite_count": 1, "accepted_answer_id": 38272580, "answer_count": 3, "score": 4, "last_activity_date": 1579833738, "creation_date": 1467845043, "last_edit_date": 1579833738, "question_id": 38234986, "link": "https://stackoverflow.com/questions/38234986/how-to-use-glslang", "title": "How to use glslang", "body": "<p>I am trying to use glslang to compile glsl shader code to SPIR-V binaries.\nThe glslang project can be found here:</p>\n\n<p><a href=\"https://github.com/KhronosGroup/glslang\" rel=\"nofollow\">https://github.com/KhronosGroup/glslang</a></p>\n\n<p>It works well via the glslangValidator.exe manually in the command line.\nBut i would like to use the c++ interface.</p>\n\n<p>I have build the project as described on the github page, and now I am struggling with how to actually use the interface.</p>\n\n<p>I would rather not actually include any projects in my solution (I am using Visual Studio), but link the .lib's and headers needed to use it.\nI just cannot find out which ones i need to link. The github page only mentions ShaderLang.h and StandAlone.cpp, which is not enough.</p>\n\n<p>Can someone explain how to setup a project where you can use glslang? I need it only for compiling glsl shader code to SPIR-V binaries (with debugging info about the shader compilation).\nI Suppose this would be a very easy question for someone who has already done it, or has more experience.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1467845043, "post_id": 38234967, "comment_id": 63891504, "body": "Sorry, but it looks you oversimplified your code. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem please."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1467845068, "post_id": 38234967, "comment_id": 63891509, "body": "Unsigned integers are always greater or equal to zero."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1467845170, "post_id": 38234967, "comment_id": 63891548, "body": "<code>18446744073709551615</code> is <code>2^64-1</code> which implies that i is of type <code>uint64_t</code>. Now the loop iterates for <code>i == 0</code> so <code>i--</code> overflows and wraps around to the largest positive value representable with that data type."}, {"owner": {"reputation": 2067, "user_id": 1708960, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39280172449cbd6609c6ca41dcf73d5a?s=128&d=identicon&r=PG&f=1", "display_name": "rel1x", "link": "https://stackoverflow.com/users/1708960/rel1x"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1467845231, "post_id": 38234967, "comment_id": 63891577, "body": "@Jack yes, but how to fix it? How to stop my loop before <code>i ==  18446744073709551615 </code>"}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1467845237, "post_id": 38234967, "comment_id": 63891582, "body": "@Jack that&#39;s an answer, you should post it as an answer, not in comment."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 2, "creation_date": 1467845389, "post_id": 38234967, "comment_id": 63891630, "body": "@rel1x: just use a signed variable. You can&#39;t stop it if you want to execute it for <code>i == 0</code> because you have no way to detect overflow."}, {"owner": {"reputation": 2067, "user_id": 1708960, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39280172449cbd6609c6ca41dcf73d5a?s=128&d=identicon&r=PG&f=1", "display_name": "rel1x", "link": "https://stackoverflow.com/users/1708960/rel1x"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1467845726, "post_id": 38234967, "comment_id": 63891729, "body": "@Jack thank you so much! :*"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467847154, "post_id": 38234967, "comment_id": 63892186, "body": "@rel1x Improve your question please as requested. I&#39;m willing to retract my down and close votes, but please ask within respecting our minimal quality standards here!"}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1467849977, "post_id": 38234967, "comment_id": 63892982, "body": "Use the most aggressive compiler warnings and I am convinced the compiler won&#39;t compile your code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1467854442, "post_id": 38234967, "comment_id": 63894004, "body": "@AlBundy I doubt that a simple compiler level SCA would catch such flaw. It needs in depth analysis of possible code flows, which usually isn&#39;t done by the 1st level compiler."}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467909723, "post_id": 38234967, "comment_id": 63922890, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 <code>gcc</code> won&#39;t let you compile the condition in the <code>while</code> statement due to compare between <code>signed</code> and <code>unsigned</code>. This is already enough and should help to analyse the problem. When both variables would have the same sign then it works. All my projects can be only compiled with the <code>gcc</code> warnings: <code>-Wall -Werror -Wextra</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1467909822, "post_id": 38234967, "comment_id": 63922956, "body": "@AlBundy Well, as you might notice the types where not known actually at the point when I wrote my answer."}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467909948, "post_id": 38234967, "comment_id": 63923022, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 oh, don&#39;t missunderstand me! I was <b>not</b> critizing you at all!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1467910184, "post_id": 38234967, "comment_id": 63923171, "body": "@AlBundy Basically I agree with you, no problem."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1467845154, "post_id": 38234999, "comment_id": 63891539, "body": "Please write comments as comments, not as answers."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1467845178, "post_id": 38234999, "comment_id": 63891554, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 sorry, fixed"}], "tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467901881, "last_edit_date": 1467901881, "creation_date": 1467845109, "answer_id": 38234999, "question_id": 38234967, "link": "https://stackoverflow.com/questions/38234967/error-in-very-little-loop/38234999#38234999", "title": "Error in very little loop", "body": "<p>It looks like <code>i</code> is an unsigned integer, therefore, always greater than or equal to zero.</p>\n"}, {"comments": [{"owner": {"reputation": 2067, "user_id": 1708960, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39280172449cbd6609c6ca41dcf73d5a?s=128&d=identicon&r=PG&f=1", "display_name": "rel1x", "link": "https://stackoverflow.com/users/1708960/rel1x"}, "edited": false, "score": 0, "creation_date": 1467878499, "post_id": 38235118, "comment_id": 63901621, "body": "Hi! Sorry that I left you without an answer about types. Yes, I used <code>size_t i</code>. Thank you so much"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1467910162, "last_edit_date": 1467910162, "creation_date": 1467845752, "answer_id": 38235118, "question_id": 38234967, "link": "https://stackoverflow.com/questions/38234967/error-in-very-little-loop/38235118#38235118", "title": "Error in very little loop", "body": "<p>You left us completely unclear about the types used in your sample, but from the behavior we might assume you actually have:</p>\n\n<pre><code>int L = 0;\nsize_t i = 2;\n</code></pre>\n\n<p>and the loop condition </p>\n\n<pre><code>while (i &gt;= L)\n</code></pre>\n\n<p>fails on underflowing <code>i</code> with the <code>i--</code> operation.</p>\n\n<p>That means you'll have the <code>18446744073709551615</code> value in <code>i</code> afterwards, which certainly is greater than <code>0</code> (<code>L</code>).</p>\n\n<p><code>unsigned</code> values never can be less than <code>0</code>, and your compiler should have spit out a warning about that fact into your face (depending on builtin SCA capabilities).</p>\n"}], "owner": {"reputation": 2067, "user_id": 1708960, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39280172449cbd6609c6ca41dcf73d5a?s=128&d=identicon&r=PG&f=1", "display_name": "rel1x", "link": "https://stackoverflow.com/users/1708960/rel1x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 38235118, "answer_count": 2, "score": -3, "last_activity_date": 1467910162, "creation_date": 1467844927, "last_edit_date": 1467892553, "question_id": 38234967, "link": "https://stackoverflow.com/questions/38234967/error-in-very-little-loop", "title": "Error in very little loop", "body": "<p>I have very little loop where <code>i = 2</code> and <code>L = 0</code>.  After <code>i</code> reaches zero, I find <code>i == 18446744073709551615</code> and my loop continues indefinitely.</p>\n\n<pre><code>int L = 0;\nsize_t i = 2;\n\nwhile (i &gt;= L) {\n  // do some work here\n  i--;\n}\n</code></pre>\n\n<p>Why does this loop not terminate?</p>\n"}, {"tags": ["c++", "cmake", "clion"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3402346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b574a8dad21df8c6f78751609f69fcc?s=128&d=identicon&r=PG&f=1", "display_name": "DJJD", "link": "https://stackoverflow.com/users/3402346/djjd"}, "is_accepted": false, "score": 0, "last_activity_date": 1490300603, "last_edit_date": 1495542331, "creation_date": 1488141649, "answer_id": 42473997, "question_id": 38234890, "link": "https://stackoverflow.com/questions/38234890/terminate-the-previous-iteration-when-building-a-new-one/42473997#42473997", "title": "Terminate the previous iteration when building a new one", "body": "<p>As far as I know, this is not possible by default.\nOne solution I have found was to create a batch file with the following content:</p>\n\n<pre><code>@echo on\ntasklist /FI \"IMAGENAME eq %1\" 2&gt;NUL |find /I \"%1\"&gt;NUL\nif \"%ERRORLEVEL%\"==\"0\" taskkill /F /im %1\n</code></pre>\n\n<p>(Second line checks whether the process is running - found here: <a href=\"https://stackoverflow.com/questions/162291/how-to-check-if-a-process-is-running-via-a-batch-script\">How to check if a process is running via a batch script</a>)</p>\n\n<p>And edit the build configuration to make CLion call the batch file and pass the processname to it before every build.</p>\n\n<p>This is how it works:</p>\n\n<ol>\n<li>Run > Edit Configurations > select the configuration to change (in my case \"Build All\")</li>\n<li>In the \"Before launch: External...\"-section click the green plus</li>\n<li>Choose \"Run external tool\" and click the green plus in the pop-up window</li>\n<li>Choose a name for the tool</li>\n<li>Add the path of the batchfile in the \"Program:\" field</li>\n<li>Write <code>$ProjectName$.exe</code> into the \"Parameters:\" field</li>\n<li>Click ok until you are back in the config window</li>\n<li>Give the script a sufficient priority by selecting it and clicking the arrow up</li>\n</ol>\n\n<p>Now it should try to kill the running process before every build.</p>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1497015156, "post_id": 44459146, "comment_id": 75914521, "body": "The last half of your answer actually answers my question, which was how to automatically terminate the previous instance before starting another. Thanks!"}, {"owner": {"reputation": 876, "user_id": 6487831, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/329635018873f0a6a7c8976e1537aee7?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shrivastava", "link": "https://stackoverflow.com/users/6487831/saurabh-shrivastava"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1497027469, "post_id": 44459146, "comment_id": 75922802, "body": "@QPaysTaxes That&#39;s great to hear. I am still leaving the first part in the answer, in case someone want&#39;s to <i>manually</i> terminate it (often helpful in the case when you close the console without stopping the debugger and the process just won&#39;t die)."}], "tags": [], "owner": {"reputation": 876, "user_id": 6487831, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/329635018873f0a6a7c8976e1537aee7?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shrivastava", "link": "https://stackoverflow.com/users/6487831/saurabh-shrivastava"}, "is_accepted": true, "score": 3, "last_activity_date": 1497015081, "creation_date": 1497015081, "answer_id": 44459146, "question_id": 38234890, "link": "https://stackoverflow.com/questions/38234890/terminate-the-previous-iteration-when-building-a-new-one/44459146#44459146", "title": "Terminate the previous iteration when building a new one", "body": "<p>Yes there is. Simply press <code>ctrl + F2</code> or goto <code>Run &gt; Stop</code> to terminate the previous iteration in case it keeps running.</p>\n\n<p>Alternatively, you can set to run only single instance. This way previous instance will always be terminated before running the new one. To enable this, goto <code>Run | Edit Configurations</code> and select <code>Single Instance Only</code>.</p>\n"}], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 44459146, "answer_count": 2, "score": 0, "last_activity_date": 1497015081, "creation_date": 1467844425, "last_edit_date": 1486245543, "question_id": 38234890, "link": "https://stackoverflow.com/questions/38234890/terminate-the-previous-iteration-when-building-a-new-one", "title": "Terminate the previous iteration when building a new one", "body": "<p><strong>TL;DR</strong>: How can I make CLion kill off any running versions of the code before building the new one?</p>\n\n<p>I've started playing with CLion for C++. I noticed that I often forget to stop the last iteration before trying to compile again, which leads to \"Permission denied\" errors -- when I first encountered this, it took me almost half an hour of fiddling with permission settings before realizing that it was because the old version was still running, and therefore couldn't be replaced with the new executable.</p>\n\n<p>As far as I can tell, there's no way to do this in CMake without embedding a Batch (since I'm on Windows) script. I'd like to avoid that, because it'd be a lot of unnecessary complexity for... not that much reward.</p>\n\n<p>In short, is there an option in CLion or something in CMake that will stop the previous iteration when running the new one?</p>\n"}, {"tags": ["c++", "class", "pointers", "linked-list", "private"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1467844575, "post_id": 38234616, "comment_id": 63891376, "body": "I doubt your problem has anything to do with the variables being private."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467844597, "post_id": 38234616, "comment_id": 63891383, "body": "<b><i>the code runs, but it doesn&#39;t do anything when I use the print function.</i></b> My advice to you is to learn to use your debugger. Single step through the code looking at variables.."}, {"owner": {"reputation": 128, "user_id": 2949219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19c525673440f9176035ce90bf35fdf?s=128&d=identicon&r=PG&f=1", "display_name": "K117", "link": "https://stackoverflow.com/users/2949219/k117"}, "edited": false, "score": 0, "creation_date": 1467844603, "post_id": 38234616, "comment_id": 63891385, "body": "You either misunderstood linked list concept or c++ pointers. If you have no elements, then you must create new node, which will became both head and tail, and then set it&#39;s right and left neighbors to <code>nullptr</code>. Review your <code>if</code> statement inside <code>append</code> function, it involves <b>undefined behavior</b>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5994900, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208728874445183/picture?type=large", "display_name": "David Walker", "link": "https://stackoverflow.com/users/5994900/david-walker"}, "edited": false, "score": 0, "creation_date": 1467848237, "post_id": 38235135, "comment_id": 63892495, "body": "Thank you, that works much better."}], "tags": [], "owner": {"reputation": 132, "user_id": 3649130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4009fedaa2f083040c81957e72da141e?s=128&d=identicon&r=PG&f=1", "display_name": "Girauder", "link": "https://stackoverflow.com/users/3649130/girauder"}, "is_accepted": false, "score": 0, "last_activity_date": 1467845858, "creation_date": 1467845858, "answer_id": 38235135, "question_id": 38234616, "link": "https://stackoverflow.com/questions/38234616/linked-list-private-pointers-c/38235135#38235135", "title": "Linked List private pointers C++", "body": "<p>First off, head and tail should be initialized to NULL since there is nothing in the beginning.</p>\n\n<pre><code>node *head = NULL;\nnode *tail = NULL;\n</code></pre>\n\n<p>Then change your code to append, particularly the first if statement. \nchange your code to </p>\n\n<pre><code>if(head == NULL &amp;&amp; tail == NULL)\n{\n    head = current;\n    tail = current;\n}\n</code></pre>\n\n<p>Since you are starting a new list, both head and tail are the same node that you just inserted.</p>\n\n<p>Finally change the condition of your while loop in your print function. Something as simple as this should work.</p>\n\n<pre><code>while (temp) {\n    cout &lt;&lt; temp-&gt;get_char() &lt;&lt; endl;\n    temp = temp-&gt;getRightLink();\n}\n</code></pre>\n\n<p>You want to print the current node, even it doesn't have a right neighbor.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5994900, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208728874445183/picture?type=large", "display_name": "David Walker", "link": "https://stackoverflow.com/users/5994900/david-walker"}, "edited": false, "score": 0, "creation_date": 1467848193, "post_id": 38235373, "comment_id": 63892479, "body": "Thank you so much! This has been very helpful."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1467847799, "last_edit_date": 1495539854, "creation_date": 1467847445, "answer_id": 38235373, "question_id": 38234616, "link": "https://stackoverflow.com/questions/38234616/linked-list-private-pointers-c/38235373#38235373", "title": "Linked List private pointers C++", "body": "<p><code>private</code> members, pointers or otherwise, are data that the object either does not want messed by anyone else with or wants to know if someone messed with them.</p>\n\n<p>Setter and getter methods allow access to the <code>private</code> member, but in a controlled manner. For example if you have a private integer that under no circumstances can ever be greater than ten, you can have code in the setter that checks for a caller trying to force the value out of range and reject the request.</p>\n\n<pre><code>bool setX( int newX)\n{\n    if (newX &gt; 10)\n    {\n        return false;\n    }\n    else\n    {\n        X = newX;\n        return true;\n    }\n}\n</code></pre>\n\n<p>Now the program can't have any nasty surprises with X == 11 causing an out-of-range access or whatever.</p>\n\n<p>This is self defense for objects. They maintain control over who sets their data to what and can maintain consistency. Say you have a more complex case where you cannot sample an A/D at over 10000 samples per second with the FIR filter enabled without starving the CPU and locking up the system. Whoops. If the only way to set the Filter state or the sampling rate is through setters in the A/D manager object, the object can test and reject and prevent disaster (and possibly leave a nice fat log message pointing at the bad actor).  </p>\n\n<p>Think very hard before implementing a getter that returns a non-constant reference or a pointer. Once the caller has either, they can do whatever they want with the returned data.</p>\n\n<p>The rule of thumb is to default to paranoia: Grant no access to any data without a good reason, and then prefer controlled access through setters and getters.</p>\n\n<p>Onto the specifics of your problem.</p>\n\n<p>Getters and setters for a link node is often a sucker bet. The node most likely cannot determine for itself if a linkage is valid. Only the list manager can. This is a case where the object itself is too ignorant to know what is safe, so you have to open up the internals to another object that knows more. <code>friend</code> is useful here, though it is often better to make the node's links <code>public</code> and never allow the list manager to give a node to a client.</p>\n\n<p>Odds are good the client should know absolutely nothing about how the list works anyway. Read up on coupling.</p>\n\n<p>So the node should be utterly stupid. This means you need to have a <code>ListManager</code> class to (duh) manage the list and protect the <code>node</code>s from badly behaved actors. </p>\n\n<p><code>ListManager</code> contains your <code>head</code>, <code>tail</code>, <code>root</code> or whatever along with <code>append</code> and <code>remove</code>, <code>print</code> and other list management methods. Under no circumstances do any of these functions reveal a <code>node</code> to the caller, though they can return a handle or an iterator that can be used to reference a node without giving the caller a tool to damage the list. Iterators are a topic worthy of their own question and probably have quite a few already.</p>\n\n<p>A bit of code to explain the above is in order. Please note I have marked, but not corrected, the logic problems I found. There may be more as this compiles (with C++11 enabled) but I haven't run it.</p>\n\n<pre><code>class ListManager\n{\nprivate:\n    class node\n    {\n    public:\n        node *left_link = nullptr; // recommendation: immediately set or NULL all \n                                   // pointers unless you have a well documented \n                                   // reason not to and profiling to back it up.\n                                   // The time you save can be enormous.\n        char anything;\n        node *right_link = nullptr;\n    };\n    node *head = nullptr;\n    node *tail = nullptr;\n\npublic:\n\n    void append(char c) // head and tail not required ListManager members\n    {\n        /* removed because the append function should append and only append.\n         * If you want to read data from the user, call a read function first \n         * and pass it read character in to append\n         * Do one thing and do it well. Every time you add behaviours to a \n         * function, you make it harder to debug. For example, what happens to \n         * the linked list if you fail to read a character? That shouldn't be \n         * append's problem. \n        char c;\n        std::cout &lt;&lt; \"Please enter a single character: \";\n        std::cin &gt;&gt; c;\n        */\n        node *current = new node();\n\n        current-&gt;anything = c;\n        //std::cout &lt;&lt; current-&gt;anything &lt;&lt; std::endl; removed for same reason as above.\n\n        // think on this: how can head and tail NOT both be NULL at the same time?\n        // if you find a way, you have a bug that needs fixing.\n        if (head == nullptr &amp;&amp; tail == nullptr) \n        {\n            // If head is NULL, it has no right_link to assign. This will fail horribly.\n            head-&gt;right_link = current;\n            tail-&gt;left_link = current;\n            current-&gt;left_link = head;\n            current-&gt;right_link = tail;\n            /* Consider instead\n            head = current;\n            tail = current;\n            */ \n        }\n        else\n        {\n            tail-&gt;right_link = current;\n            current-&gt;left_link = tail;\n            tail = current;\n            tail-&gt;right_link = nullptr; // don't need to do this. node constructor \n                                        // ensures current-&gt;right_link is NULL\n        }\n    }\n    // print function\n    void print() // no parameters required. head is ListManager member\n    {\n        node* temp;\n        temp = head;\n        // Again, if head is NULL, temp will be NULL and there will be no right_link\n        // consider instead\n        // while (temp != nullptr)\n        while (temp-&gt;right_link != nullptr)\n        {\n            std::cout &lt;&lt; temp-&gt;anything &lt;&lt; std::endl;\n            temp = temp-&gt;right_link;\n        }\n    }\n};\n</code></pre>\n\n<p>Note how <code>node</code> is built right into <code>ListManager</code> and is <code>private</code>. Now only <code>ListManager</code> has access to <code>node</code> and it has complete access.</p>\n\n<p><code>ListManager</code> also needs a destructor to handle <code>delete</code>ing all of the <code>new</code>ed nodes that were appended. It also needs a copy constructor and an assignment operator to make it Rule of Three compliant. \"<a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>\" you ask? It is very very important. Read the link to save yourself much future debugging. Failure to obey the Rule of Three results in a disproportionate number of C++ questions on Stack Overflow, and there is no point in inflating this statistic further.</p>\n\n<p>Usage:</p>\n\n<pre><code>int main()\n{\n    ListManager list;\n    char choice;\n    std::cout &lt;&lt; \"Please choose one menu option at a time:\\n\" &lt;&lt; \"1 = Append\\n\"\n            &lt;&lt; \"2 = Print list\\n\" &lt;&lt; \"3 = Exit\\n\\n\";\n\n    do\n    {\n        std::cout &lt;&lt; \"Menu option(1-3): \";\n        std::cin &gt;&gt; choice;\n\n        switch (choice)\n        {\n            case '1':\n                list.append('a'); // add to the end of list.\n                break;\n            case '2':\n                list.print (); // print list\n                break;\n            case '3':\n                std::cout &lt;&lt; \"end program\\n\\n\";\n                break;\n            default:\n                std::cout &lt;&lt; \"try again\\n\";\n                break;\n        }\n\n    } while (choice != '3');\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5994900, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208728874445183/picture?type=large", "display_name": "David Walker", "link": "https://stackoverflow.com/users/5994900/david-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2044, "favorite_count": 0, "closed_date": 1467858662, "accepted_answer_id": 38235373, "answer_count": 2, "score": -2, "last_activity_date": 1467847799, "creation_date": 1467842983, "question_id": 38234616, "link": "https://stackoverflow.com/questions/38234616/linked-list-private-pointers-c", "closed_reason": "Needs details or clarity", "title": "Linked List private pointers C++", "body": "<p>I am having trouble understanding how to use pointers when they are in \"private\".</p>\n\n<p>mostly I don't know how to get and set values for pointers</p>\n\n<p>I want to create a head and tail node that have no character value.\nthen create new nodes that lie in between head and tail and add new nodes on to the end of the list (before tail).</p>\n\n<p>the code runs, but it doesn't do anything when I use the print function.</p>\n\n<p>sorry if my formatting is wrong and if the code is too long.</p>\n\n<p>here is the code for my class:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass node\n{\npublic:\n  node(void)// constructor for empty nodes\n  {\n    left_link = NULL;\n    right_link = NULL;\n  }\n  node(char x) // constructor for nodes with given value\n  : anything(x)\n  { }\n  char get_char() // return character\n  {\n    return anything;\n  }\n  void setLeftLink(node *left)\n  {\n    left_link = left;\n  }\n  void setRightLink(node *right)\n  {\n    right_link = right;\n  }\n  node *getlefttLink()\n  {\n    return left_link;\n  }\n  node *getRightLink()\n  {\n    return right_link;\n  }\n\nprivate:\n  node *left_link;\n  char anything;\n  node *right_link;\n};\n</code></pre>\n\n<p>here are my functions:</p>\n\n<pre><code>void append(node *&amp;head, node *&amp;tail);\nvoid print(node *head);\n\n\nvoid append(node *&amp;head, node *&amp;tail)\n{\n  char c;\n  cout &lt;&lt; \"Please enter a single character: \";\n  cin &gt;&gt; c;\n  node *current = new node(c);\n  cout &lt;&lt; current-&gt;get_char() &lt;&lt; endl;\n  if(head == NULL &amp;&amp; tail == NULL)\n  {\n    head-&gt;setRightLink(current);\n    tail-&gt;setLeftLink(current);\n    current-&gt;setLeftLink(head);\n    current-&gt;setRightLink(tail);\n  }\n  else\n  {\n    tail-&gt;setRightLink(current);\n    current-&gt;setLeftLink(tail);\n    tail = current;\n    tail-&gt;setRightLink(NULL);\n  }\n\n}\n// print function\nvoid print(node *head)\n{\n  node* temp;\n  temp = head;\n  while(temp-&gt;getRightLink()!=NULL){\n    cout&lt;&lt;temp-&gt;get_char()&lt;&lt;endl;\n    temp = temp-&gt;getRightLink();    \n  }\n}\n</code></pre>\n\n<p>here is my main:</p>\n\n<pre><code>int main()\n{\nchar choice;\nnode *head = new node;\nnode *tail = new node;\n\ncout &lt;&lt; \"Please choose one menu option at a time:\\n\" \n    &lt;&lt; \"1 = Append\\n\"\n    &lt;&lt; \"2 = Print list\\n\"\n    &lt;&lt; \"3 = Exit\\n\\n\";\n\n\n    do\n    {\n        cout &lt;&lt; \"Menu option(1-3): \";\n        cin &gt;&gt; choice;\n\n        switch (choice)\n        {\n            case '1': append(head, tail); // add to the end of list.\n                break;\n            case '2': print(head); // print list\n                break;\n            case '3': cout &lt;&lt; \"end program\\n\\n\";\n                break;\n            default: cout &lt;&lt; \"try again\\n\";\n                break;\n        }\n\n\n    }while(choice != '3');\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "graphics", "shader"], "comments": [{"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "edited": false, "score": 0, "creation_date": 1467845946, "post_id": 38234588, "comment_id": 63891808, "body": "We can&#39;t see your shaders, but I don&#39;t see you setting any color uniforms or vertex array bindings.  You need to either push the colors with the vertices as a different vertex array binding, as a uniform variable, or as a texture.  You also don&#39;t need to set your vertexattribpointer every time you render.  You should probably be using proper VAOs instead, so you can just swap your VAO binding to render multiple meshes."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5953322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c527412d5c8fd7bfe6d68ff8f59d3a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Ming", "link": "https://stackoverflow.com/users/5953322/ming"}, "edited": false, "score": 0, "creation_date": 1467847190, "post_id": 38235120, "comment_id": 63892199, "body": "I have added color in the fragment shader but how do i invoking it to be one green and one red? what is the right way to use glUniform3f?"}, {"owner": {"reputation": 128, "user_id": 2949219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19c525673440f9176035ce90bf35fdf?s=128&d=identicon&r=PG&f=1", "display_name": "K117", "link": "https://stackoverflow.com/users/2949219/k117"}, "reply_to_user": {"reputation": 69, "user_id": 5953322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c527412d5c8fd7bfe6d68ff8f59d3a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Ming", "link": "https://stackoverflow.com/users/5953322/ming"}, "edited": false, "score": 0, "creation_date": 1467853787, "post_id": 38235120, "comment_id": 63893860, "body": "You need to invoke it anywhere between <code>glUseProgram</code> and <code>glDrawArrays</code>. First argument is a uniform location, next 3 - each component of vector (In this case, color - rgb. They should be between 0.0 and 1.0): <code>glUniform3f(colorUniformLocation, r, g, b);</code>. In your case it&#39;s: <code>glUniform3f(colorUniformLocation, 1.0f, 0.0f, 0.0f);</code> after <code>glUniform1f(gScaleLocation1, sinf(Scale1));</code> and <code>glUniform3f(colorUniformLocation, 0.0f, 1.0f, 0.0f);</code> after <code>glUniform1f(gScaleLocation1, sinf(Scale2));</code>."}], "tags": [], "owner": {"reputation": 128, "user_id": 2949219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19c525673440f9176035ce90bf35fdf?s=128&d=identicon&r=PG&f=1", "display_name": "K117", "link": "https://stackoverflow.com/users/2949219/k117"}, "is_accepted": false, "score": 1, "last_activity_date": 1467845770, "creation_date": 1467845770, "answer_id": 38235120, "question_id": 38234588, "link": "https://stackoverflow.com/questions/38234588/c-opengl-rendering-two-rectangles-with-different-colors/38235120#38235120", "title": "C++ OpenGL rendering two rectangles with different colors", "body": "<p>It depends. Easiest way in this case is to add <code>uniform vec3 color;</code> and <code>gl_FragColor = vec4(color, 1.0);</code> inside your fragment shader and then initialize it with desired color by invoking <code>glUniform3f</code> before rendering of each rectangle. However, with rectangle count growth you would be better to create your vertex <code>struct</code> that will carry not only coordinates, but a color as well.\nAlso, I highly recommend this <a href=\"http://www.opengl-tutorial.org/\" rel=\"nofollow\">http://www.opengl-tutorial.org/</a> opengl tutorials web site.</p>\n"}], "owner": {"reputation": 69, "user_id": 5953322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c527412d5c8fd7bfe6d68ff8f59d3a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Ming", "link": "https://stackoverflow.com/users/5953322/ming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467899798, "creation_date": 1467842848, "last_edit_date": 1467899798, "question_id": 38234588, "link": "https://stackoverflow.com/questions/38234588/c-opengl-rendering-two-rectangles-with-different-colors", "title": "C++ OpenGL rendering two rectangles with different colors", "body": "<p>I have tried to create two rectangle objects with two different colors and moving in opposite direction. However, I am stuck in rendering the two rectangle with different colors (currently they are the same color).</p>\n\n<p>What is the way to do it?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;math.h&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;GL/freeglut.h&gt;\n\n#include \"ogldev_util.h\"\n#include \"ogldev_math_3d.h\"\n\nGLuint VBO1;\nGLuint VBO2;\nGLuint gScaleLocation1;\nGLuint gScaleLocation2;\n\nconst char* pVSFileName = \"shader.vs\";\nconst char* pFSFileName = \"shader.fs\";\n\n\nstatic void RenderSceneCB()\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n\n\n    static float Scale1 = 0.0f;\n\n    Scale1 += 0.01f;\n\n    glUniform1f(gScaleLocation1, sinf(Scale1));\n\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO1);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n\n    static float Scale2 = 0.0f;\n\n    Scale2 -= 0.01f;\n\n    glUniform1f(gScaleLocation2, sinf(Scale2));\n\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO2);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n\n    glDisableVertexAttribArray(0);\n\n    glutSwapBuffers();\n}\n\n\nstatic void InitializeGlutCallbacks()\n{\n    glutDisplayFunc(RenderSceneCB);\n    glutIdleFunc(RenderSceneCB);\n}\n\nstatic void CreateVertexBuffer()\n{\n    Vector3f Vertices[6];\n    Vertices[0] = Vector3f(1.0f, -0.5f, 0.0f);\n    Vertices[1] = Vector3f(1.0f, 0.5f, 0.0f);\n    Vertices[2] = Vector3f(3.0f, -0.5f, 0.0f);\n\n    Vertices[3] = Vector3f(1.0f, 0.5f, 0.0f);\n    Vertices[4] = Vector3f(3.0f, 0.5f, 0.0f);\n    Vertices[5] = Vector3f(3.0f, -0.5f, 0.0f);\n\n    glGenBuffers(1, &amp;VBO1);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO1);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);\n\n    Vector3f Vertices2[6];\n    Vertices2[0] = Vector3f(-3.0f, -0.5f, 0.0f);\n    Vertices2[1] = Vector3f(-3.0f, 0.5f, 0.0f);\n    Vertices2[2] = Vector3f(-1.0f, -0.5f, 0.0f);\n\n    Vertices2[3] = Vector3f(-3.0f, 0.5f, 0.0f);\n    Vertices2[4] = Vector3f(-1.0f, 0.5f, 0.0f);\n    Vertices2[5] = Vector3f(-1.0f, -0.5f, 0.0f);\n\n    glGenBuffers(1, &amp;VBO2);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO2);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices2), Vertices2, GL_STATIC_DRAW);\n}\n\nstatic void AddShader(GLuint ShaderProgram, const char* pShaderText, GLenum ShaderType)\n{\n    GLuint ShaderObj = glCreateShader(ShaderType);\n\n    if (ShaderObj == 0) {\n        fprintf(stderr, \"Error creating shader type %d\\n\", ShaderType);\n        exit(1);\n    }\n\n    const GLchar* p[1];\n    p[0] = pShaderText;\n    GLint Lengths[1];\n    Lengths[0]= strlen(pShaderText);\n    glShaderSource(ShaderObj, 1, p, Lengths);\n    glCompileShader(ShaderObj);\n    GLint success;\n    glGetShaderiv(ShaderObj, GL_COMPILE_STATUS, &amp;success);\n    if (!success) {\n        GLchar InfoLog[1024];\n        glGetShaderInfoLog(ShaderObj, 1024, NULL, InfoLog);\n        fprintf(stderr, \"Error compiling shader type %d: '%s'\\n\", ShaderType, InfoLog);\n        exit(1);\n    }\n\n    glAttachShader(ShaderProgram, ShaderObj);\n}\n\nstatic void CompileShaders()\n{\n    GLuint ShaderProgram = glCreateProgram();\n\n    if (ShaderProgram == 0) {\n        fprintf(stderr, \"Error creating shader program\\n\");\n        exit(1);\n    }\n\n    string vs, fs;\n\n    if (!ReadFile(pVSFileName, vs)) {\n        exit(1);\n    };\n\n    if (!ReadFile(pFSFileName, fs)) {\n        exit(1);\n    };\n\n    AddShader(ShaderProgram, vs.c_str(), GL_VERTEX_SHADER);\n    AddShader(ShaderProgram, fs.c_str(), GL_FRAGMENT_SHADER);\n\n    GLint Success = 0;\n    GLchar ErrorLog[1024] = { 0 };\n\n    glLinkProgram(ShaderProgram);\n    glGetProgramiv(ShaderProgram, GL_LINK_STATUS, &amp;Success);\n    if (Success == 0) {\n        glGetProgramInfoLog(ShaderProgram, sizeof(ErrorLog), NULL, ErrorLog);\n        fprintf(stderr, \"Error linking shader program: '%s'\\n\", ErrorLog);\n        exit(1);\n    }\n\n    glValidateProgram(ShaderProgram);\n    glGetProgramiv(ShaderProgram, GL_VALIDATE_STATUS, &amp;Success);\n    if (!Success) {\n        glGetProgramInfoLog(ShaderProgram, sizeof(ErrorLog), NULL, ErrorLog);\n        fprintf(stderr, \"Invalid shader program: '%s'\\n\", ErrorLog);\n        exit(1);\n    }\n\n    glUseProgram(ShaderProgram);\n\n    gScaleLocation1 = glGetUniformLocation(ShaderProgram, \"gScale\");\n    assert(gScaleLocation1 != 0xFFFFFFFF);\n}\n\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);\n    glutInitWindowSize(1024, 768);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(\"Tutorial 05\");\n\n    InitializeGlutCallbacks();\n\n    // Must be done after glut is initialized!\n    GLenum res = glewInit();\n    if (res != GLEW_OK) {\n      fprintf(stderr, \"Error: '%s'\\n\", glewGetErrorString(res));\n      return 1;\n    }\n\n    printf(\"GL version: %s\\n\", glGetString(GL_VERSION));\n\n    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);\n\n    CreateVertexBuffer();\n\n    CompileShaders();\n\n    glutMainLoop();\n\n    return 0;\n}\n</code></pre>\n\n<p>Fragment Shader</p>\n\n<pre><code>#version 330\n\nout vec4 FragColor;\n\nvoid main()\n{\n    FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "swig"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467843480, "post_id": 38234453, "comment_id": 63891058, "body": "Can you show sample .i files?"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1467874835, "post_id": 38234453, "comment_id": 63899445, "body": "Although I&#39;m fairly sure your question has a simple solution it&#39;s really hard to understand the underlying problem through words alone. Can you show a <i>minimal</i> complete example, everything I&#39;d need to try it out on my on dev environment? I can&#39;t even convince myself you&#39;re actually trying to solve the right right problem currently either."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6465725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b922407a7e60da1fe215104c98575d?s=128&d=identicon&r=PG&f=1", "display_name": "m3d", "link": "https://stackoverflow.com/users/6465725/m3d"}, "is_accepted": false, "score": 1, "last_activity_date": 1467917937, "creation_date": 1467917937, "answer_id": 38253324, "question_id": 38234453, "link": "https://stackoverflow.com/questions/38234453/swig-typemap-internal-constructor-to-protected/38253324#38253324", "title": "Swig typemap internal constructor to protected", "body": "<p>solved it.\nsimply needed to put</p>\n\n<pre><code>SWIG_CSBODY_PROXY(public, public, SWIGTYPE)\nSWIG_CSBODY_TYPEWRAPPER(public, public, public, SWIGTYPE)\n</code></pre>\n\n<p>in my .i file</p>\n"}], "owner": {"reputation": 21, "user_id": 6465725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b922407a7e60da1fe215104c98575d?s=128&d=identicon&r=PG&f=1", "display_name": "m3d", "link": "https://stackoverflow.com/users/6465725/m3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467917937, "creation_date": 1467842222, "last_edit_date": 1467853443, "question_id": 38234453, "link": "https://stackoverflow.com/questions/38234453/swig-typemap-internal-constructor-to-protected", "title": "Swig typemap internal constructor to protected", "body": "<p>My C# code is using a third-party library, written in C++ and using Swig to wrap it in C# (<em>three projects here, MyCodeCS, ThirdCpp and ThirdCs</em>)</p>\n\n<p>So if I have class Acpp with public constructors <code>Acpp()</code> and <code>Acpp(int)</code> in cpp, I end up in the wrapped C# version with class Acs, properly defined constructors <code>Acs()</code> and <code>Acs(int)</code> (so far, so good), both of them using an internal, swig-generated, constructor: <code>Acs(IntPtr cPtr,bool)</code>.</p>\n\n<p><em>(Of course both the cpp and the cs classes are named A, but for clarity I'll named them with the cpp and cs suffixes)</em></p>\n\n<p>Now, I am integrating a new cpp module (MyCodeCpp), which contains a class Bcpp, which inherits from Acpp. So far, so good: Bcpp inherits from Acpp, and I can call it from my C# code with no problem, using its <code>IntPtr</code>. </p>\n\n<p><strong>My issue</strong> is that for the only purpose of having my Bcs objects recognized as being a Acs, I need to define such Bcs class. Which is a pretty dumb one since I already got the cptr:</p>\n\n<pre><code>public class Bcs : Acs\n{\n    public Bcs(IntPtr cptr): base(cptr,true){}\n}\n</code></pre>\n\n<p>The thing is... <code>Acs(IntPtr,bool)</code> is internal, which means that if I want to do that I need to either:</p>\n\n<ul>\n<li>add Bcs into thirdCS project and rebuild thirdCS, which is what I do right now and which works fine but displeases my chief architect because now we have a class which is supposed to belong to MyCodeCS as is a wrapper to a class of MyCodeCpp, which actually belongs to thirdCs</li>\n<li><strong>somehow modify the swig behavior so that <code>Acs(IntPtr,bool)</code> is protected internal instead of internal</strong>, so it can be called by a MyCodeCS-based Bcs class</li>\n</ul>\n\n<p>The thing is: I have no clue how to do that or even if it is possible ?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["c++", "templates", "inheritance", "specialization"], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467842907, "post_id": 38234490, "comment_id": 63890841, "body": "That would not work, because if I create an instance of class <code>Data</code>, I would have access to the variable <code>y</code>, and I only want to have a variable <code>y</code> <b>if</b> <code>N = 2</code> (in the original post it was <code>int x</code> and not <code>T y</code>)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467843230, "post_id": 38234490, "comment_id": 63890959, "body": "@Mehlins Please make more clear what&#39;s the purpose of  <code>y</code> and <code>x</code> in your class design. You could still resort to the <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a> to inject the definition of <code>x</code> from your inherited class."}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467843400, "post_id": 38234490, "comment_id": 63891028, "body": "Ok, I would want my class to have both the variable <code>x</code> and the functions <code>left()</code> and <code>right()</code> if and only if <code>N=2</code>. The variables <code>y</code> and <code>ptr</code> are to be there whatever it is the value of <code>N</code>."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1467843030, "last_edit_date": 1467843030, "creation_date": 1467842388, "answer_id": 38234490, "question_id": 38234444, "link": "https://stackoverflow.com/questions/38234444/c-add-variables-and-functions-to-a-templated-class-based-on-template-argumen/38234490#38234490", "title": "C++ - Add variables and functions to a templated class based on template argument", "body": "<p>You can specialize your template declarations for particular values of <code>N</code>, and use another level of inheritance indirection for the common code in your base class, that doesn't depend on <code>N</code>:</p>\n\n<pre><code>template &lt;typename T&gt; class DataBase {\n    public:\n        T y;\n};\n\ntemplate &lt;typename T, int N&gt; class Data : public DataBase {\n    typedef Data&lt;T, N&gt; data;\n    public:\n        data *ptr[N];\n};\n</code></pre>\n\n<hr>\n\n<p>Also, without really knowing what you actually want there, I'd say something like</p>\n\n<pre><code>typedef T DataType;\ntypedef T* DataTypePtr;\n</code></pre>\n\n<p>in the base class makes more sense for me.</p>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467855694, "post_id": 38235042, "comment_id": 63894270, "body": "Ok, I was fiddling with this for a bit and your solution also doesn&#39;t work. I understood what you meant with the CRTP, but first of all, the <code>typename T</code> in the <code>BaseData</code> declaration is not a typename but a template instead, and the declaration should be <code>template&lt;template&lt;..&gt; .., int&gt;</code>. Besides that, I concluded that it&#39;s impossible because since <code>Data</code> is a template that would require <code>BaseData</code> to be instantiated, which, by using <code>T::data</code> would require <code>Data</code> to be instantiated, creating a circular dependency. The only option would be for <code>Data</code> to not be a template, not possible here."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467872876, "post_id": 38235042, "comment_id": 63898506, "body": "@Mehlins Try to show a meaningful example next time. Otherwise, it&#39;s impossible to help guessing that <i>data is something different</i>. That said, I don&#39;t think it&#39;s impossible, it would probably require a bit of extra work."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1467845333, "creation_date": 1467845333, "answer_id": 38235042, "question_id": 38234444, "link": "https://stackoverflow.com/questions/38234444/c-add-variables-and-functions-to-a-templated-class-based-on-template-argumen/38235042#38235042", "title": "C++ - Add variables and functions to a templated class based on template argument", "body": "<blockquote>\n  <p>Inheritance doesn't make any sense in this specific case</p>\n</blockquote>\n\n<p>It depends if it's used alone or if it's used with a mix of <code>friend</code> class declaration and <em>CRTP</em> idiom:</p>\n\n<pre><code>template&lt;typename, int&gt;\nstruct BaseData { };\n\ntemplate&lt;typename T&gt;\nstruct BaseData&lt;T, 2&gt; {\n    int x;\n    typename T::data *left() { return static_cast&lt;T*&gt;(this)-&gt;ptr[0]; }\n    typename T::data *right() { return static_cast&lt;T*&gt;(this)-&gt;ptr[1]; }\n};\n\ntemplate &lt;typename T, int N&gt;\nclass Data: public BaseData&lt;Data, N&gt; {\n    friend class BaseData&lt;Data, N&gt;;\n    using data = Data&lt;T, N&gt;;\n\npublic:\n   T y;\n    data *ptr[N];\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467902722, "post_id": 38247980, "comment_id": 63918317, "body": "Sorry, your example also doesn&#39;t work, because I want to be able to instantiate the class <code>Data</code> with other values for <code>N</code> beyond <code>2</code>. In your example I would have to create an infinite number of classes that inherit from <code>DataBase</code>, one for every possible value of <code>N</code>."}, {"owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467967767, "post_id": 38247980, "comment_id": 63944786, "body": "You can add a templated derived class for the unaltered case."}], "tags": [], "owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1467970825, "last_edit_date": 1467970825, "creation_date": 1467901416, "answer_id": 38247980, "question_id": 38234444, "link": "https://stackoverflow.com/questions/38234444/c-add-variables-and-functions-to-a-templated-class-based-on-template-argumen/38247980#38247980", "title": "C++ - Add variables and functions to a templated class based on template argument", "body": "<p>As skypjack mentioned, it is possible with a CRTP. A \"working\" example coming close to your example would look like this:</p>\n\n<pre><code>template &lt;typename T, int N, typename Derived &gt;\nclass DataBase {\n    public:\n        typedef Derived data;\n        T y;\n        typename DataBase&lt;T,N,Derived&gt;::data *ptr[N];\n};\n\n\ntemplate &lt;typename T, int N&gt;\nclass Data : public DataBase&lt; T, N, Data&lt;T,N&gt; &gt; {\n};\n\n\ntemplate &lt;typename T&gt;\nclass Data2 : public DataBase&lt; T, 2, Data2&lt;T&gt; &gt; {\n    public:\n        int x;\n        typename DataBase&lt;T,2,Data2&lt;T&gt; &gt;::data* left()  { return DataBase&lt;T,2,Data2&lt;T&gt; &gt;::ptr[0]; }\n        typename DataBase&lt;T,2,Data2&lt;T&gt; &gt;::data* right() { return DataBase&lt;T,2,Data2&lt;T&gt; &gt;::ptr[1]; }\n};\n\nint main() {\n\n\n  Data2&lt;double&gt; myData;\n\n  Data&lt;double,5&gt; myData5;\n\n  myData.y = 3.0;\n  myData.x = 5;\n\n  myData.left();\n  myData.right();\n\n  myData5.y = 42.0;\n\n}\n</code></pre>\n\n<p>A CRTP of course implies that you never can directly instantiate the class DataBase directly without having a derived class. If this is not what you need, please give the broader context to understand the situation a bit better.</p>\n\n<p>EDIT: I have changed the code to include a generic derived class with no extra features.</p>\n"}], "owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1467970825, "creation_date": 1467842160, "last_edit_date": 1467899998, "question_id": 38234444, "link": "https://stackoverflow.com/questions/38234444/c-add-variables-and-functions-to-a-templated-class-based-on-template-argumen", "title": "C++ - Add variables and functions to a templated class based on template argument", "body": "<p>I have something like this:</p>\n\n<pre><code>template &lt;typename T, int N&gt; class Data {\n    typedef Data&lt;T, N&gt; data;\n    public:\n        T y;\n        data *ptr[N];\n};\n</code></pre>\n\n<p>And what I would like to able to add variables and functions to the class if <code>N == 2</code>, for example:</p>\n\n<pre><code>template &lt;typename T, int N&gt; class Data {\n    typedef Data&lt;T, N&gt; data;\n    public:\n        T y;\n        data *ptr[N];\n\n        /* if N == 2, add the following members to the class */\n        int x;\n        data *left()  { return ptr[0] };\n        data *right() { return ptr[1] };\n};\n</code></pre>\n\n<hr>\n\n<p>I know one can use inheritance or specialization, but there is problems on both of them.</p>\n\n<p>Inheritance doesn't make any sense in this specific case because the variable <code>ptr</code> points to the same class, so if I use:</p>\n\n<pre><code>template &lt;typename T&gt; class Data2 : Data&lt;T, 2&gt; {\n    typedef Data2&lt;T&gt; data;\n    public:\n        int x;\n        data *left()  { return ptr[0] }; // Error (ptr has type Data&lt;T,N&gt;)\n        data *right() { return ptr[1] }; // Error\n};\n</code></pre>\n\n<p>the variable <code>ptr</code> that <code>Data2</code> inherits from <code>Data</code> would point to the class <code>Data</code> and not <code>Data2</code>, rendering the base class useless.</p>\n\n<p>The problem with specialization is that I would have to copy the entire base class to the specialization, and for smaller cases this might be okay, but if I have a really complex class or if I want custom variables and functions for several values of <code>N</code>, that would be impractical.</p>\n\n<hr>\n\n<p>I also know the existence of <code>std::enable_if</code> which I think can solve the problem for functions, but it does not so for variables.</p>\n\n<p>If anyone has a solution for it or a different approach that would bypass this, please let me know.</p>\n"}, {"tags": ["python", "c++", "opencv", "video", "camera"], "answers": [{"tags": [], "owner": {"reputation": 9525, "user_id": 777285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I1WDv.png?s=128&g=1", "display_name": "Arnaud P", "link": "https://stackoverflow.com/users/777285/arnaud-p"}, "is_accepted": false, "score": 4, "last_activity_date": 1476881204, "last_edit_date": 1476881204, "creation_date": 1476873622, "answer_id": 40129056, "question_id": 38234407, "link": "https://stackoverflow.com/questions/38234407/opencv-videocapture-hangs-freeze-when-camera-disconnected-instead-of-returning/40129056#40129056", "title": "opencv videocapture hangs/freeze when camera disconnected instead of returning &quot;False&quot;", "body": "<p>I'm experiencing the same issue with the webcam of my MacBook, when the lid is closed (i.e. cam not available). After a quick look at the doc, the <code>VideoCapture</code> constructor doesn't seem to have any <code>timeout</code> parameter. So the solution has to involve forcibly interrupting this call from Python.</p>\n\n<p>After yet more readings about Python's <code>asyncio</code> then <code>threading</code> in general, I couldn't come up with any clue on how to interrupt a method which is busy outside the interpreter. So I resorted to creating a daemon per <code>VideoCapture</code> call, and let them die on their own.</p>\n\n<pre><code>import threading, queue\n\nclass VideoCaptureDaemon(threading.Thread):\n\n    def __init__(self, video, result_queue):\n        super().__init__()\n        self.daemon = True\n        self.video = video\n        self.result_queue = result_queue\n\n    def run(self):\n        self.result_queue.put(cv2.VideoCapture(self.video))\n\n\ndef get_video_capture(video, timeout=5):\n    res_queue = queue.Queue()\n    VideoCaptureDaemon(video, res_queue).start()\n    try:\n        return res_queue.get(block=True, timeout=timeout)\n    except queue.Empty:\n        print('cv2.VideoCapture: could not grab input ({}). Timeout occurred after {:.2f}s'.format(video, timeout))\n</code></pre>\n\n<p>If anyone has better, I'm all ears.</p>\n"}], "owner": {"reputation": 107, "user_id": 6068028, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22871e3d63d75f1b6a533a1392846d92?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin C", "link": "https://stackoverflow.com/users/6068028/alvin-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3343, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1476881204, "creation_date": 1467841986, "question_id": 38234407, "link": "https://stackoverflow.com/questions/38234407/opencv-videocapture-hangs-freeze-when-camera-disconnected-instead-of-returning", "title": "opencv videocapture hangs/freeze when camera disconnected instead of returning &quot;False&quot;", "body": "<p>I'm using OpenCV-Python 3.1  Following the example code from here:\n<a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html\" rel=\"nofollow\">http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html</a> and using a http camera stream instead of the default camera, the read function in videocapture never returns \"False\" (or anything for that matter) when the camera is physically disconnected, thus hanging/freezing the program entirely.  Does anyone know how to fix this?</p>\n\n<pre><code>import numpy as np\nimport cv2\n\ncap = cv2.VideoCapture('http://url')\n\nret = True\n\nwhile(ret):\n    # Capture frame-by-frame\n    ret, frame = cap.read()\n    print(ret)\n    # Our operations on the frame come here\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n\n    # Display the resulting frame\n    cv2.imshow('frame',gray)\n    if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n        break\n\n# When everything done, release the capture\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": ["c++", "openmesh"], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 4666991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFSp9.jpg?s=128&g=1", "display_name": "matz", "link": "https://stackoverflow.com/users/4666991/matz"}, "is_accepted": true, "score": 2, "last_activity_date": 1467851046, "creation_date": 1467851046, "answer_id": 38235879, "question_id": 38234248, "link": "https://stackoverflow.com/questions/38234248/add-edges-to-openmesh-mesh/38235879#38235879", "title": "Add edges to Openmesh mesh", "body": "<p>You don't have to/you can't explicitly create or delete edges. Whenever you modify the mesh e.g. by creating a face with <code>add_face</code>, the mesh will create (or delete) the necessary (half-)edges. Also, it will adapt the links between the vertices, edges and faces to reflect the topology of your mesh.</p>\n"}], "owner": {"reputation": 83, "user_id": 4504350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9858c086d654f5ecb072911333b4444?s=128&d=identicon&r=PG&f=1", "display_name": "johnk", "link": "https://stackoverflow.com/users/4504350/johnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 38235879, "answer_count": 1, "score": 3, "last_activity_date": 1467851046, "creation_date": 1467841266, "question_id": 38234248, "link": "https://stackoverflow.com/questions/38234248/add-edges-to-openmesh-mesh", "title": "Add edges to Openmesh mesh", "body": "<p>Just starting out with OpenMesh, and I have so far been able to add vertices, and make faces. <strong>I now have a problem with understanding how i should add an edge to the mesh.</strong></p>\n\n<p>I am aware of the Half-edge datastructure that openMesh uses, but i can't really understand how i should add the edge..</p>\n\n<p><strong>Code:</strong></p>\n\n<p>Definitions:</p>\n\n<pre><code>    Variables in header:\n    vector&lt;OpenMesh::PolyMesh_ArrayKernelT&lt;OpenMeshExt::MyOwnTraits&gt;::VertexHandle&gt; vHandlers;\n    OpenMesh::PolyMesh_ArrayKernelT&lt;OpenMeshExt::MyOwnTraits&gt; myMesh;\n</code></pre>\n\n<p>In cpp:</p>\n\n<pre><code>typedef OpenMesh::PolyMesh_ArrayKernelT&lt;OpenMeshExt::CustomTraits&gt; OpnMesh;\ntypedef OpnMesh::VertexHandle vertexHandle;\n\nvoid Mesh::addVertexFromPoint(Point&amp; position){\n    float x = static_cast &lt;float&gt; (position.x());\n    float y = static_cast &lt;float&gt; (position.y());\n    vertexHandle vhand= myMesh.add_vertex(OpnMesh::Point(x,y,.0f));\n    vHandlers.push_back(vhand);\n}\n\nvoid Mesh::makeFace(){\n    if(vHandlers.size()&lt;=2){\n        return;\n    }\n    myMesh.add_face(vHandlers);\n//Add edges between eg vertex 0 and 1 in vHandlers (vector with VertexHandlers) \n}\n</code></pre>\n\n<p>Have searched the documentation, but can't really say I found the answer..</p>\n"}, {"tags": ["c++", "opengl", "opengl-es", "glsl", "textures"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1467841115, "post_id": 38234142, "comment_id": 63890033, "body": "<a href=\"https://www.opengl.org/wiki/Buffer_Object_Streaming\" rel=\"nofollow noreferrer\">Buffer Object Streaming</a> with Pixel Buffer Objects is your best bet."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1467841556, "post_id": 38234142, "comment_id": 63890237, "body": "Is this desktop GL or OpenGL ES?"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1467993020, "post_id": 38234142, "comment_id": 63960931, "body": "... and if it&#39;s ES then is it ES 3? If it&#39;s not then how do you feel about vendor-specific solutions?"}], "owner": {"reputation": 155, "user_id": 5626229, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/541364092686936/picture?type=large", "display_name": "Michael Wei", "link": "https://stackoverflow.com/users/5626229/michael-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467845796, "creation_date": 1467840804, "last_edit_date": 1467845796, "question_id": 38234142, "link": "https://stackoverflow.com/questions/38234142/most-efficient-way-to-update-2d-texture-on-opengl", "title": "Most efficient way to update 2D texture on OpenGL", "body": "<p>Currently I am working on a application to render frame image from video clip as a 2D texture on a plain mesh surface using OpenGL but I am not sure how to implement this appropriately or efficiently because it has a harsh requirement in process time when updating every frame. </p>\n\n<p>When the application is initialized, there is a default texture image mapped and rendered on the mesh. After the video starts playing, the application shall constantly receive the frame data (unsigned char* pointer) and update mesh texture in every draw call. The size (width and height) of frame image may be different to the mapped default texture image. Besides, what we want is to minimize the cost in binding and unbinding texture in order to improve the efficiency. </p>\n\n<p>Based on some research I have done, FBO looks like a good idea but there is not much relevant samples online that can be very helpful in my case. I really appreciate any suggestion and guidance with my case, it would be better if anyone would share the code in C++ and shader.</p>\n"}, {"tags": ["c++", "fibonacci", "getchar"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467840413, "post_id": 38233955, "comment_id": 63889746, "body": "Not surprised you&#39;re confused. That crap, sorry <i>code</i>,  isn&#39;t written to be read."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1467840561, "post_id": 38233955, "comment_id": 63889815, "body": "Sounds like you need a strategically placed <code>cin.get()</code> within that <code>for</code> loop. And you can ask your prof why in the world you would want to use <code>getchar()</code> instead."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467840757, "post_id": 38233955, "comment_id": 63889878, "body": "Are you printing <code>0 1 1 ...</code>? Shouldn&#39;t it be <code>1 1 2 ...</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1467841368, "post_id": 38233955, "comment_id": 63890153, "body": "Instead of the user entering <code>N</code>, you&#39;re supposed to just start printing Fibonacci numbers, 1 at a time. Then you wait for the user to type something and you print the next number, and so on."}], "answers": [{"tags": [], "owner": {"reputation": 372, "user_id": 1406250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55f66aaf2023efdb44fcfb05b56f6aa?s=128&d=identicon&r=PG", "display_name": "Andros Rex", "link": "https://stackoverflow.com/users/1406250/andros-rex"}, "is_accepted": false, "score": -2, "last_activity_date": 1467841126, "last_edit_date": 1495541296, "creation_date": 1467840710, "answer_id": 38234120, "question_id": 38233955, "link": "https://stackoverflow.com/questions/38233955/output-fibonacci-number-with-getchar/38234120#38234120", "title": "output Fibonacci number with getchar?", "body": "<p>Whoever gave you this assignment either doesn't know how C++ works or how English works.</p>\n\n<p>If they meant that literally the moment you press a key (you can't <strong>enter</strong> a key by the way), the fibonacci number should appear  then <a href=\"https://stackoverflow.com/questions/421860/capture-characters-from-standard-input-without-waiting-for-enter-to-be-pressed\">this question</a> is for you.</p>\n\n<p>If they meant that after pressing Enter (which is when the input is flushed too) the numbers should appear as many times as there are characters (including whitespace), then:</p>\n\n<pre><code>while(getchar() != EOF) //print next fibonacci number\n</code></pre>\n\n<p>== CORRECTION ==</p>\n\n<p>Actually you'd only need the piece of code I typed if the program was reading a file instead of from the standard input. So, the assignment sounds even more confusing now.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467841101, "post_id": 38234165, "comment_id": 63890020, "body": "Answers a question, but not the one OP asked. What about <code>getchar</code> and why does OP need it along with a while loop and a couple integers?"}, {"owner": {"reputation": 399, "user_id": 4648634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TpKT2.png?s=128&g=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4648634/shawn"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467841359, "post_id": 38234165, "comment_id": 63890147, "body": "Sorry, I don&#39;t understand what you mean.  His question was &quot;any of you guys able to make sense of this?&quot; concerning &quot;Using a while loop and two or three integer variables, have your program output a new Fibonacci number to the screen each time the user enters a key (use getchar()!).&quot;.    What do you think he meant for reference?  Edit: The reason why specifically he needs to use getchar() is just because that&#39;s what the professor has decided he wants to use to go through the loop right?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467841938, "post_id": 38234165, "comment_id": 63890393, "body": "The problem: How should OP go about writing this program? You wrote the program. It&#39;s a good program. Nice and clear, doesn&#39;t require much in the way of explanation. I have no problems with it, other than the fact that OP will now copy and paste it and learn absolutely nothing."}], "tags": [], "owner": {"reputation": 399, "user_id": 4648634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TpKT2.png?s=128&g=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4648634/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1467840892, "creation_date": 1467840892, "answer_id": 38234165, "question_id": 38233955, "link": "https://stackoverflow.com/questions/38233955/output-fibonacci-number-with-getchar/38234165#38234165", "title": "output Fibonacci number with getchar?", "body": "<p>A fibonacci number will be the sum of the 2 elements before it.</p>\n\n<p>Thus:</p>\n\n<pre><code> int main(){\n      char c = 'a';\n      int curr=0, next=1;\n      while (c != 'q'){\n           c = getchar(); //This just pauses and waits for user input.  Exits if user hits q.\n           cout &lt;&lt; curr &lt;&lt; endl;\n           next = curr + next;\n           curr = next - curr;\n      }\n }\n</code></pre>\n\n<p>What you should be thinking about is in situations like this how you can avoid using temporary variables (that's why he said 2 or 3 variables).  Note that I set next to curr + next.  Then I need to set curr to be equal to the old value of next, which is gone -- but it's not really gone, it's just had curr added to it.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6265324, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/996479327087533/picture?type=large", "display_name": "Kumar Ashish", "link": "https://stackoverflow.com/users/6265324/kumar-ashish"}, "is_accepted": false, "score": -1, "last_activity_date": 1467843222, "creation_date": 1467843222, "answer_id": 38234670, "question_id": 38233955, "link": "https://stackoverflow.com/questions/38233955/output-fibonacci-number-with-getchar/38234670#38234670", "title": "output Fibonacci number with getchar?", "body": "<p>try using </p>\n\n<pre><code>c=getchar();\nif(c!='/n')\n  getchar();\n</code></pre>\n\n<p>in the beginning of the while loop which will do the fibonacci calculation. The second getchar() is to take care of the newline character, which would cause two character input otherwise,thus printing two fibonacci numbers even when the user entered just one key/character. </p>\n"}], "owner": {"reputation": 9, "user_id": 6558120, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210506075074899/picture?type=large", "display_name": "Alex Ghossein", "link": "https://stackoverflow.com/users/6558120/alex-ghossein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1467843222, "creation_date": 1467840006, "last_edit_date": 1467840808, "question_id": 38233955, "link": "https://stackoverflow.com/questions/38233955/output-fibonacci-number-with-getchar", "title": "output Fibonacci number with getchar?", "body": "<p>I have this assignment due today but i don't quite understand this question.\nWrite a program that outputs Fibonacci numbers. This part I understand I have this it lets you input a number and it'll create a fubonacci sequence of that length.</p>\n\n<pre><code>typedef unsigned long long ull;\nint main() {\nint N;\ncout &lt;&lt; \"Enter the N : \";\ncin &gt;&gt; N;\null f0 = 0, f1 = 1;\null f = f1;\ncout &lt;&lt; \"The Sequence of Fibonacci Numbers : \" &lt;&lt; endl;\ncout &lt;&lt; f0 &lt;&lt; \" \";\ncout &lt;&lt; f1 &lt;&lt; \" \";\n\nfor (int i = 1; i &lt; N; i++) {\ncout &lt;&lt; f &lt;&lt; \" \";\nf0 = f1;\nf1 = f;\nf = f0 + f1;\n}\ncout &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>WHAT I DON'T UNDERSTAND is this part of the assignment.. any of you guys able to make sense of this?</p>\n\n<blockquote>\n  <p>\"Using a while loop and two or three integer variables, have your program output a new Fibonacci number to the screen each time the user enters a key (use <code>getchar()</code>!).\"</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "qt3d"], "owner": {"reputation": 169, "user_id": 4120792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007416067726/picture?type=large", "display_name": "Youssef Emad", "link": "https://stackoverflow.com/users/4120792/youssef-emad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 0, "closed_date": 1467846464, "answer_count": 0, "score": 2, "last_activity_date": 1467839677, "creation_date": 1467839554, "last_edit_date": 1467839677, "question_id": 38233857, "link": "https://stackoverflow.com/questions/38233857/3d-vector-field-plot", "closed_reason": "Needs more focus", "title": "3D Vector Field Plot", "body": "<p>I am creating an Electromagnetic field simulator and I am using Qt3D to plot cuboids.The output should be the same input cuboid but with different color distribution indicating the magnetic field at each point but I can't figure how to plot it this way with various colors.</p>\n\n<p>Input (2 intersecting cuboids):</p>\n\n<p><a href=\"https://i.stack.imgur.com/FerOs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FerOs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Output should be similar to this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CIjaI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CIjaI.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "c++", "c", "arrays"], "comments": [{"owner": {"reputation": 3880, "user_id": 2136603, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/dbc89f5e7d4fd2af89766ad7067df747?s=128&d=identicon&r=PG", "display_name": "Mubin", "link": "https://stackoverflow.com/users/2136603/mubin"}, "edited": false, "score": 1, "creation_date": 1468010999, "post_id": 38233852, "comment_id": 63969691, "body": "Yes, it is possible. Try it and come back with your efforts :-)"}, {"owner": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "edited": false, "score": 1, "creation_date": 1468011475, "post_id": 38233852, "comment_id": 63969908, "body": "Share your code if you have tried and it&#39;s not working."}, {"owner": {"reputation": 9, "user_id": 6451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83e687f8f98be089c3345ede854d8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Athavan", "link": "https://stackoverflow.com/users/6451742/athavan"}, "edited": false, "score": 1, "creation_date": 1468012968, "post_id": 38233852, "comment_id": 63970460, "body": "I don&#39;t have any code, working on it."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1468261903, "last_edit_date": 1468261903, "creation_date": 1468234974, "answer_id": 38305288, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix/38305288#38305288", "title": "Matrix : get value from given matrix", "body": "<p>To my understanding, the problem can be solved with the following helper function which calculates the indices of the next entry. The syntax is C#, but should work similar in Java, where <code>m</code> and <code>n</code> are supposed to be the respective matrix dimensions. The idea is to check whether the desired main direction is down-left or up-right; if the edge of the matrix is reached, which has to be checked beforehand, this is modified to right and down, respectively. The implementation assumes zero-based indexing of the rows and columns.</p>\n\n<pre><code>public struct Cell\n{\n    public int Row;\n    public int Col;\n}\n\npublic static Cell GetNext(Cell iCell)\n{\n    Cell Result;\n    if (( iCell.Row + iCell.Col ) % 2 == 0)\n    {\n        if (iCell.Col == n - 1)\n            Result = new Cell { Row = iCell.Row + 1, Col = n - 1 };\n        else if (iCell.Row == 0)                    \n            Result = new Cell { Row = 0, Col = iCell.Col + 1 };\n        else\n            Result = new Cell { Row = iCell.Row - 1, Col = iCell.Col + 1 };\n    }\n    else\n    {\n        if (iCell.Row == m - 1)\n            Result = new Cell { Row = m - 1, Col = iCell.Col + 1 };\n        else if (iCell.Col == 0)\n            Result = new Cell { Row = iCell.Row + 1, Col = 0 };\n        else\n            Result = new Cell { Row = iCell.Row + 1, Col = iCell.Col - 1 };\n    }\n    return Result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4661, "user_id": 1692706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GyaAv.png?s=128&g=1", "display_name": "Debosmit Ray", "link": "https://stackoverflow.com/users/1692706/debosmit-ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1468309153, "creation_date": 1468309153, "answer_id": 38322716, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix/38322716#38322716", "title": "Matrix : get value from given matrix", "body": "<p>Personally, I like @Codor's approach more. I thought I would throw this Java function in the mix too. </p>\n\n<p><em>[Note: I have not compiled or run this. But, I think it should work (mostly). Let me know. :)]</em></p>\n\n<pre><code>public static int[] getTraversedArray(int[][] arr) {\n     if (arr == null || arr.length == 0) \n        return null;\n\n    # matrix need not be `nxn`\n    int l = arr.length - 1, w = arr[0].length - 1;\n\n    # all indices need to be visited\n    int[] out = new int[(l + 1) * (w + 1)];\n\n    int indx = 0;\n    for (int i = 0; i &lt;= l + w; i++) {\n        # \"even\" index\n        if (i % 2 == 0) {\n            for (int x = i; x &gt;= 0; x--) {\n                # if it is a \"valid index\", set the value\n                # in the output array\n                if ((x &lt;= l) &amp;&amp; (i - x &lt;= w)) {\n                    out[indx] = arr[x][i - x];\n                    indx++;\n                }\n            }\n        } \n        # \"odd\" index\n        else {\n            for (int x = 0; x &lt;= i; x++) {\n                # if it is a \"valid index\", set the value\n                # in the output array\n                if ((x &lt;= l) &amp;&amp; (i - x &lt;= w)) {\n                    out[indx] = arr[x][i - x];\n                    indx++;\n                }\n            }\n        }\n    }\n    return out;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83e687f8f98be089c3345ede854d8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Athavan", "link": "https://stackoverflow.com/users/6451742/athavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1469168731, "answer_count": 2, "score": 0, "last_activity_date": 1468881614, "creation_date": 1467839550, "last_edit_date": 1468881614, "question_id": 38233852, "link": "https://stackoverflow.com/questions/38233852/matrix-get-value-from-given-matrix", "closed_reason": "Needs details or clarity", "title": "Matrix : get value from given matrix", "body": "<p>It's possible to print a matrix values as per below image</p>\n\n<p><img src=\"https://i.stack.imgur.com/DHjTZ.png\" alt=\"The Matrix\"></p>\n"}, {"tags": ["c++", "boost", "cmake", "messagebroker", "cmake-gui"], "comments": [{"owner": {"reputation": 4160, "user_id": 1843316, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6737b1f109e56682b0d78a07ca51eeb5?s=128&d=identicon&r=PG", "display_name": "Sam Cristall", "link": "https://stackoverflow.com/users/1843316/sam-cristall"}, "edited": false, "score": 1, "creation_date": 1467839179, "post_id": 38233710, "comment_id": 63889173, "body": "All the libraries you couldn&#39;t find have binary components.  Do you have Boost .lib / .dll files for your particular toolchain / build generator?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467839995, "post_id": 38233710, "comment_id": 63889568, "body": "<b><i>to delete the cache file for CMake using the GUI so I could reset the variable, but that didn&#39;t seem to work either.</i></b> You could have just reset the value in the GUI. Did you compile boost? Since you are using the most recent boost do you have a recent CMake binary (I am not sure what version will recognize 1.61)? If your CMake does not know about boost-1.61 you can override that with <code>set(Boost_ADDITIONAL_VERSIONS &quot;1.61&quot; &quot;1.61.0&quot;)</code> before the find_package(boost ...)"}, {"owner": {"reputation": 2277, "user_id": 3957097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/63777cc85640c099e706502bbd9e5ca6?s=128&d=identicon&r=PG&f=1", "display_name": "loremIpsum1771", "link": "https://stackoverflow.com/users/3957097/loremipsum1771"}, "edited": false, "score": 0, "creation_date": 1467840913, "post_id": 38233710, "comment_id": 63889941, "body": "No I didn&#39;t compile boost initially, I&#39;m doing the steps in section 5.2.1 <a href=\"http://www.boost.org/doc/libs/1_60_0/more/getting_started/windows.html\" rel=\"nofollow noreferrer\">here</a> for the compilation. For step 3, I&#39;m supposed to run <code>b2 install</code> in the directory where Boost.Build should be installed. I&#39;m assuming that this should be boost_1_61_0\\tools\\build ?"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 6523572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3466b768ea706443286060499460c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Kuro Burki", "link": "https://stackoverflow.com/users/6523572/kuro-burki"}, "is_accepted": true, "score": 2, "last_activity_date": 1467861451, "last_edit_date": 1467861451, "creation_date": 1467839334, "answer_id": 38233802, "question_id": 38233710, "link": "https://stackoverflow.com/questions/38233710/cmake-unable-to-locate-boost-libraries-windows/38233802#38233802", "title": "Cmake unable to locate Boost Libraries (Windows)", "body": "<p>Some of the Boost libraries (e.g. <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/chrono.html\" rel=\"nofollow\">chrono</a>) need to be compiled first. If you have only downloaded Boost library from the website, you probably have not built these libraries. <a href=\"http://www.boost.org/doc/libs/1_61_0/more/getting_started/windows.html\" rel=\"nofollow\">Check Boost website for instructions how to build on Windows.</a> The site also lists which libraries need to be built. Alternatively, you can search for sites where pre-built Boost libraries are hosted. You can download and install from there.</p>\n"}], "owner": {"reputation": 2277, "user_id": 3957097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/63777cc85640c099e706502bbd9e5ca6?s=128&d=identicon&r=PG&f=1", "display_name": "loremIpsum1771", "link": "https://stackoverflow.com/users/3957097/loremipsum1771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 1, "accepted_answer_id": 38233802, "answer_count": 1, "score": -1, "last_activity_date": 1467861451, "creation_date": 1467838890, "question_id": 38233710, "link": "https://stackoverflow.com/questions/38233710/cmake-unable-to-locate-boost-libraries-windows", "title": "Cmake unable to locate Boost Libraries (Windows)", "body": "<p>I'm currently trying to build the Apache qpid messaging broker on Windows using CMake and the Boost (C++). I went through the initial steps of setting up Qpid on Windows as specified in <a href=\"https://gist.github.com/loremIpsum1771/1382a5125fd52e87268a83d28db4b5e9\" rel=\"nofollow\">this file</a>. I set the variable <code>BOOST_ROOT</code> to \"C:/&lt; Home >/Downloads/boost_1_61_0\" initially so that CMake could find the Boost Libraries (e.g. random, math, chrono, etc.) but I got <a href=\"https://gist.github.com/loremIpsum1771/fc1d912bbe5a741325cdd259f7a53837\" rel=\"nofollow\">this log</a> saying that it could only find some of the libraries, but not others. I thought that maybe the filepath needed to include the directory where the Boost libraries were actually located (i.e. C:/&lt; Home >/Downloads/boost_1_61_0/boost) but I was unable to reset the <code>BOOST_ROOT</code> environment variable despite deleting it and creating another one. </p>\n\n<p>I was advised on <a href=\"http://qpid.2158936.n2.nabble.com/Issue-when-using-CMake-to-install-Qpid-broker-td7646766.html#a7646949\" rel=\"nofollow\">this forum</a> to delete the cache file for CMake using the GUI so I could reset the variable, but that didn't seem to work either.</p>\n\n<p>Am I using the correct file path for <code>BOOST_ROOT</code>? If not, how should I go about changing it?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "g++", "yocto"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467839531, "post_id": 38233546, "comment_id": 63889354, "body": "g++ won&#39;t find files under <code>&#47;usr&#47;include&#47;mytest&#47;</code> folder with these flags. Please use <code>g++ -H</code> to see what files really get included."}, {"owner": {"reputation": 307, "user_id": 5480666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2465605d40434a3590c084893eb278?s=128&d=identicon&r=PG&f=1", "display_name": "sajus", "link": "https://stackoverflow.com/users/5480666/sajus"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467840852, "post_id": 38233546, "comment_id": 63889916, "body": "g++ does find the header file - <code>g++ -H</code> indicates the following file: <code>&#47;usr&#47;include&#47;mytest&#47;MyMacro.hpp</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467841292, "post_id": 38233546, "comment_id": 63890113, "body": "sorry my bad, didn&#39;t see you <code>#include &quot;mytest&#47;MyMacro.hpp&quot;</code>."}, {"owner": {"reputation": 307, "user_id": 5480666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2465605d40434a3590c084893eb278?s=128&d=identicon&r=PG&f=1", "display_name": "sajus", "link": "https://stackoverflow.com/users/5480666/sajus"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467842157, "post_id": 38233546, "comment_id": 63890505, "body": "The is related to <a href=\"https://gcc.gnu.org/onlinedocs/cpp/System-Headers.html\" rel=\"nofollow noreferrer\">link</a> and <a href=\"https://gcc.gnu.org/ml/gcc-patches/2000-05/msg01044.html\" rel=\"nofollow noreferrer\">link</a> - gcc disables warnings in system headers by default. May be there exists a way to enable warning in system headers selectively?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467843130, "post_id": 38233546, "comment_id": 63890922, "body": "Yes, since the macro is defined in a system header, its expansion is immune to certain warnings. The <a href=\"https://gcc.gnu.org/onlinedocs/cpp/System-Headers.html\" rel=\"nofollow noreferrer\">documentation</a> says the list of these warning is determined ad-hoc, and <code>-Wformat</code> is apparently included in the list. I believe this is a bug. There is no reason to suppress this warning."}], "owner": {"reputation": 307, "user_id": 5480666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2465605d40434a3590c084893eb278?s=128&d=identicon&r=PG&f=1", "display_name": "sajus", "link": "https://stackoverflow.com/users/5480666/sajus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467883753, "creation_date": 1467838152, "last_edit_date": 1467883753, "question_id": 38233546, "link": "https://stackoverflow.com/questions/38233546/g-werror-format-suppressed-automatically-in-files-included-from-usr-include", "title": "g++: -Werror=format suppressed automatically in files included from /usr/include yocto SDK folder", "body": "<p>I am trying to add a safe string formatting method similar to sprintf using variadic macro and deliver it as a system header and a shared object in a Yocto based SDK. Based on the location of the header file, two different behavior is observed during compilation.</p>\n\n<p>MyMacro.hpp</p>\n\n<pre><code>#ifndef MYMACRO_HPP\n#define MYMACRO_HPP\n\nextern std::string stringFormat( const char* fmt, ... ) __attribute__ ((format(printf, 1, 2)));\n\n#define FORMAT_STRING( fmt, ...) stringFormat( fmt, ##__VA_ARGS__ )\n\n#endif //MYMACRO_HPP\n</code></pre>\n\n<p>MyMacro.cpp</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdarg&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::string stringFormat( const char* fmt, ... )\n{\n    va_list args1;\n    va_start( args1, fmt );\n    va_list args2;\n    va_copy( args2, args1 );\n    std::vector&lt;char&gt; buf( 1 + std::vsnprintf( nullptr, 0, fmt, args1 ) );\n    va_end( args1 );\n    std::vsnprintf( buf.data( ), buf.size( ), fmt, args2 );\n    va_end( args2 );\n\n    return std::string( buf.data( ), buf.data( ) + buf.size( ) );\n}\n</code></pre>\n\n<p>libMyMacro.so is generated using the following command:</p>\n\n<pre><code>g++ -Wall -std=gnu++0x -shared -fPIC -o libMyMacro.so MyMacro.cpp\n</code></pre>\n\n<p>Usage:\nmain.cpp</p>\n\n<pre><code>#include &lt;cstdarg&gt;\n#include &lt;string&gt;\n#include &lt;cstdio&gt;\n\n#include \"mytest/MyMacro.hpp\"\n\nint main()\n{\n    std::string myString = FORMAT_STRING( \"%s %s\", \"test\" );\n    std::printf( \"%s\", myString.c_str( ) );\n}\n</code></pre>\n\n<p>When compiling main.cpp by placing MyMacro.hpp under /usr/mytest/ reports the following error as expected:</p>\n\n<pre><code>sh-4.3$ g++ -Wall -Werror -std=gnu++0x -I /usr/ -L /usr/lib/ -lMyMacro main.cpp \nIn file included from main.cpp:5:0:\nmain.cpp: In function 'int main()':\n/usr/mytest/MyMacro.hpp:6:67: error: format '%s' expects a matching 'char*' argument [-Werror=format=]\n #define FORMAT_STRING( fmt, ...) stringFormat( fmt, ##__VA_ARGS__ )\n                                                                   ^\nmain.cpp:9:28: note: in expansion of macro 'FORMAT_STRING'\n     std::string myString = FORMAT_STRING( \"%s %s\", \"test\" );\n                            ^\ncc1plus: all warnings being treated as errors\n</code></pre>\n\n<p>Now if MyMacro.hpp is placed under /usr/include/mytest/ folder, g++ reports no error on compiling using the following command:</p>\n\n<pre><code>g++ -Wall -Werror -std=gnu++0x -I /usr/include/ -L /usr/lib/ -lMyMacro main.cpp\n</code></pre>\n\n<p>Why is there a difference in the compilation output based on the location of the header file?</p>\n\n<h2>Update:</h2>\n\n<p>GCC is configured with /usr/include and /usr/local/include as default system header path in this SDK.</p>\n\n<p>To report error from system headers, use -Wsystem-headers option though this activates warnings and errors in all included system header files:</p>\n\n<pre><code>g++ -Wall -Werror -Wsystem-headers -std=gnu++0x -I /usr/include/ -L /usr/lib/ -lMyMacro main.cpp\n</code></pre>\n"}, {"tags": ["c++", "c++11", "scroll", "terminal", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1467843416, "post_id": 38233235, "comment_id": 63891033, "body": "If you provided a complete example, someone might compile it and see what it actually does."}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 3, "last_activity_date": 1467843539, "creation_date": 1467843539, "answer_id": 38234721, "question_id": 38233235, "link": "https://stackoverflow.com/questions/38233235/ncurses-not-scrolling-stdscr-causing-abnormal-terminal-behavior/38234721#38234721", "title": "Ncurses not scrolling stdscr, causing abnormal terminal behavior", "body": "<p>I think you are misunderstanding the purpose of these routines. They are not designed to give you more terminal space than you have -- they are only a way to move text around on the display.</p>\n\n<p><code>scrollok()</code> means that if you try to print too many lines to output, it will use the terminal's scroll region (hardware if available, software if necessary) to scroll the region up, causing <em>loss of data at the top of the current scroll region</em>.</p>\n\n<p><code>wscrl()</code> works similarly, causing the text in the scroll region to scroll up or down, causing <em>loss of data</em> and filling the \u2018new lines\u2019 with blanks.</p>\n\n<p>Once you have scrolled, you must write text to the new areas.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 326, "user_id": 3590905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nXjTY.jpg?s=128&g=1", "display_name": "Mazzone", "link": "https://stackoverflow.com/users/3590905/mazzone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467843539, "creation_date": 1467837041, "last_edit_date": 1467842028, "question_id": 38233235, "link": "https://stackoverflow.com/questions/38233235/ncurses-not-scrolling-stdscr-causing-abnormal-terminal-behavior", "title": "Ncurses not scrolling stdscr, causing abnormal terminal behavior", "body": "<p>In the example below, I take in a command line arg that is assumed to be a valid .txt file, and output it to the screen in function.cpp. It reads and outputs just fine - even if the content is longer than the terminal height. But scrolling doesn't work, and Ncurses documentation is either nonexistant or horrible.<br>\n<strong>Summary:</strong> I can run the code below, but it just breaks the terminal and I have to force quit.  </p>\n\n<pre><code>void printFile(char fileName[]) {\n  string line;\n  string cantOpen = \"Unable to open file.\";\n  int key;\n\n  ifstream file;       //Stream to read from\n  file.open(fileName); //Specify file to open/read\n\n  initscr();\n  scrollok(stdscr, TRUE);  //These lines are the ones I think are causing issues\n  idlok(stdscr, TRUE);     //&lt;&lt;&lt;\n  keypad(stdscr, TRUE);    //&lt;&lt;&lt;\n\n  if(file.is_open()) {\n    while(getline(file, line)) {  //Read file and output it (working fine)\n      addstr(line.c_str());\n      addch('\\n');\n      refresh();\n    }\n    file.close();\n  } else {\n    addstr(cantOpen.c_str());  //Inform user file wasn't opened\n    refresh();\n  }\n\n  key = getch();\n  if(key == KEY_SF) {            //Scroll down\n    wscrl(stdscr, 1);\n  } else if(key == KEY_SR) {     //Scroll up\n    wscrl(stdscr, -1);\n  } else if(key == KEY_ENTER) {  //Enter to exit\n    endwin();\n  }\n}  \n</code></pre>\n\n<p><strong>Things I've tried:</strong>  </p>\n\n<ul>\n<li>Using scrl(stdscr, x) instead of wscrl(...)  </li>\n<li>Not checking for specific key strokes to perform up or down or exit  </li>\n<li>Tried finding any examples of scrolling the stdscr that don't just link back to the documentation</li>\n</ul>\n\n<p><strong>Any ideas why scrolling isn't working as I see it described in documentation?</strong></p>\n"}, {"tags": ["c++", "opencl"], "answers": [{"tags": [], "owner": {"reputation": 5740, "user_id": 605790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ux26Z.png?s=128&g=1", "display_name": "faken", "link": "https://stackoverflow.com/users/605790/faken"}, "is_accepted": false, "score": 4, "last_activity_date": 1468245675, "last_edit_date": 1468245675, "creation_date": 1468245362, "answer_id": 38308802, "question_id": 38233168, "link": "https://stackoverflow.com/questions/38233168/opencl-maximum-work-items-per-compute-unit/38308802#38308802", "title": "OpenCl maximum work-items per compute unit", "body": "<p>To get the maximum number of work-items per compute unit, use <a href=\"https://www.khronos.org/registry/cl/sdk/2.1/docs/man/xhtml/clGetDeviceInfo.html\" rel=\"nofollow\">clGetDeviceInfo()</a> together with the CL_DEVICE_MAX_WORK_GROUP_SIZE flag. This will return the \"maximum number of work-items in a work-group that a device is capable of executing on a single compute unit\", which is pretty much what you want.</p>\n\n<p>The optimum work-group size depends not only on the device, but also on the specific kernel being used. For this purpose you can use the <a href=\"https://www.khronos.org/registry/cl/sdk/2.1/docs/man/xhtml/clGetKernelWorkGroupInfo.html\" rel=\"nofollow\">clGetKernelWorkGroupInfo()</a> function with the CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE flag. This \"returns the preferred multiple of workgroup size for launch\", which is a \"performance hint\".</p>\n\n<p>If you're using the C++ bindings, use the getInfo() and getWorkGroupInfo() methods with device and kernel objects, respectively.</p>\n"}], "owner": {"reputation": 41, "user_id": 4727298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qxFqQVti10Q/AAAAAAAAAAI/AAAAAAAAAG4/l4AKPqCE3Fk/photo.jpg?sz=128", "display_name": "Shailesh Tripathi", "link": "https://stackoverflow.com/users/4727298/shailesh-tripathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1485863494, "creation_date": 1467836838, "last_edit_date": 1485863494, "question_id": 38233168, "link": "https://stackoverflow.com/questions/38233168/opencl-maximum-work-items-per-compute-unit", "title": "OpenCl maximum work-items per compute unit", "body": "<p>I am writing an <code>OpenCL</code> code to find an optimum work-group size to have maximum occupancy on GPU. For this, I want a function that returns the maximum number of work-items per compute unit.</p>\n\n<p>Basically, I am deriving this from a <code>CUDA</code> code and I want an equivalent of <code>maxThreadsPerMultiProcessor</code>.\nIn CUDA these were the values returned on device query:\nMaximum number of threads per multiprocessor:  2048\nMaximum number of threads per block:           1024</p>\n\n<p>In OpenCL:\nCL_DEVICE_MAX_WORK_GROUP_SIZE:    1024</p>\n\n<p>In CUDA it doesn't asks for kernel info to return this value.\nI need an equivalent function for OpenCL.\nThanks in advance.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "abstraction"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 4, "creation_date": 1467836559, "post_id": 38233053, "comment_id": 63887818, "body": "You are taking an address of the temporary??? Its a UB and incorrect code. <code>Subclass</code> gets destroyed along with the vector after the <code>;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1467836769, "post_id": 38233053, "comment_id": 63887935, "body": "What is the type of <code>UINT</code>?  Is it <code>unsigned int</code>?  uint32_t?  uint16_t?  uint8_t?  You should review the types in <code>stdint.h</code>."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1467836843, "post_id": 38233053, "comment_id": 63887978, "body": "@ThomasMatthews Looks like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows API data type</a> (but just speculation) and your comment is definitely relevant."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467836945, "post_id": 38233053, "comment_id": 63888036, "body": "@JamesAdkison: Could be anything.  I&#39;ve seen many RTOS vendors and SDKs that use similar notation, all dating back before <code>uint</code> family was standardized."}, {"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "edited": false, "score": 0, "creation_date": 1467839076, "post_id": 38233053, "comment_id": 63889118, "body": "There is no abstract classes and no polymorphism in this code. Even superclass destructor is not virtual and can lead to memory leaks."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1467847575, "post_id": 38233053, "comment_id": 63892313, "body": "Btw, a better way to construct the base members is to use a (possibly <code>protected</code>) constructor which initialises the base members, rather than do this in the function body of the derived class&#39;s constructor."}, {"owner": {"reputation": 420, "user_id": 1836467, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ba0ced56a5ff8ad1ac19a3f2a80a86f?s=128&d=identicon&r=PG", "display_name": "Fer", "link": "https://stackoverflow.com/users/1836467/fer"}, "edited": false, "score": 0, "creation_date": 1467850019, "post_id": 38233053, "comment_id": 63892997, "body": "It really gets to me people trolling and penalizing others for not knowing all and asking legitimate questions. I think it defeats stack overflow&#39;s purpose. There are many concepts here like temporaries, UBs and things maybe some other-languages programmers are not familiar with. Downvoting with no reason is just a waste of everyone&#39;s time."}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "edited": false, "score": 0, "creation_date": 1467839333, "post_id": 38233124, "comment_id": 63889252, "body": "<code>new</code> and <code>delete</code> operators are not necessary. The pointer just must be used in less scope than an object it points to. In original code the object&#39;s scope is one line, the pointer is used after it."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 4, "last_activity_date": 1467836686, "creation_date": 1467836686, "answer_id": 38233124, "question_id": 38233053, "link": "https://stackoverflow.com/questions/38233053/c-inheritance-of-abstract-reference-members-for-polymorphism/38233124#38233124", "title": "C++ Inheritance of abstract reference members for polymorphism", "body": "<p>You are taking an address of the temporary. It's a <code>UB</code> and incorrect code. Subclass gets destroyed along with the vector after the <code>;</code></p>\n\n<p>Correct way to do this would be (Assuming no C++11):</p>\n\n<pre><code>Something* s = new Subclass();\ns-&gt;getSomeVal(); // OK, has 5 in it.\ns-&gt;GetVec(); \ndelete s;\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 1836467, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ba0ced56a5ff8ad1ac19a3f2a80a86f?s=128&d=identicon&r=PG", "display_name": "Fer", "link": "https://stackoverflow.com/users/1836467/fer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1467880301, "accepted_answer_id": 38233124, "answer_count": 1, "score": -1, "last_activity_date": 1467836686, "creation_date": 1467836419, "question_id": 38233053, "link": "https://stackoverflow.com/questions/38233053/c-inheritance-of-abstract-reference-members-for-polymorphism", "closed_reason": "Not suitable for this site", "title": "C++ Inheritance of abstract reference members for polymorphism", "body": "<p>I have an abstract class with N protected members:</p>\n\n<pre><code>class Something {\nprotected:\n    UINT someVal;\n    std::vector&lt;SomeType&gt; g_MyVec;\n    // some virtual abstract methods ...\npublic:\n    UINT getSomeVal() { return someVal; }\n    std::vector&lt;SomeType&gt; GetVec() { return g_MyVec; }\n}\n\nclass SubClass : public Something {\npublic:\n    SubClass() { // no members in this class, all inherited from super\n        someVal = 5; // this sticks\n        g_myVec = { .. correct initialization }; // this doesn't stick\n    }\n}\n</code></pre>\n\n<p>The client of this code does:</p>\n\n<pre><code>Something* s = &amp;SubClass();\ns-&gt;getSomeVal(); // OK, has 5 in it.\ns-&gt;GetVec(); // Nada, it returns 0 size, nothing at all... WHY?!\n</code></pre>\n\n<p>Enlightenment is much appreciated.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 1423, "user_id": 6447429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/371beb048a08cb51a13677a50a5948c1?s=128&d=identicon&r=PG&f=1", "display_name": "James Tanner", "link": "https://stackoverflow.com/users/6447429/james-tanner"}, "edited": false, "score": 3, "creation_date": 1467836100, "post_id": 38232933, "comment_id": 63887570, "body": "Does your compiler tell you what line the error is on? If so, that information would be helpful."}, {"owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "edited": false, "score": 7, "creation_date": 1467836167, "post_id": 38232933, "comment_id": 63887608, "body": "there&#39;s a semicolon on line 6 where it doesn&#39;t belong to: int main();"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 7, "creation_date": 1467836173, "post_id": 38232933, "comment_id": 63887610, "body": "This <code>while (u = rn) </code> looks suspect"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1467836230, "post_id": 38232933, "comment_id": 63887643, "body": "Is <code>randomize</code> a valid function - Perhaps <code>srand</code> and <code>rand</code> are what you are looking for"}, {"owner": {"reputation": 1423, "user_id": 6447429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/371beb048a08cb51a13677a50a5948c1?s=128&d=identicon&r=PG&f=1", "display_name": "James Tanner", "link": "https://stackoverflow.com/users/6447429/james-tanner"}, "reply_to_user": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "edited": false, "score": 1, "creation_date": 1467836257, "post_id": 38232933, "comment_id": 63887656, "body": "I think @yussuf is correct. There should not be a semicolon there."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1467836282, "post_id": 38232933, "comment_id": 63887671, "body": "Notice how I just deleted 90% of your narrative, actually making your question clearer and easier to read."}, {"owner": {"reputation": 655, "user_id": 3108054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8e7b48ae2a3cf1d91aa1e8cdf3b3c1?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;hand BOUGHIAS", "link": "https://stackoverflow.com/users/3108054/mhand-boughias"}, "edited": false, "score": 1, "creation_date": 1467836286, "post_id": 38232933, "comment_id": 63887674, "body": "You also need the std namespace before cout, cin, endl..."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467837012, "post_id": 38232933, "comment_id": 63888060, "body": "Sorry Mad Physicist, I thought you were an AI, woops... :s"}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467837845, "post_id": 38232933, "comment_id": 63888512, "body": "yussuf is correct, sorry, the error is on Line 6. I had extra notes above the #include &lt;iostream), so i counted 3 extra lines."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467838168, "post_id": 38233010, "comment_id": 63888652, "body": "I have added the using namespace std;, and have tried lots of other fixes, but the error is still there for some reason..."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467838751, "post_id": 38233010, "comment_id": 63888939, "body": "Ugh. I&#39;m still new to this place, and it says that I can&#39;t post another question for another day...any suggestions?"}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467857640, "post_id": 38233010, "comment_id": 63894669, "body": "Sorry for the long wait, I&#39;ve been busy. Yeah, I just pasted in the error from compiling the code into the question. It still doesn&#39;t want to work."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467912840, "post_id": 38233010, "comment_id": 63924729, "body": "The code is now updated. I just removed a bunch of unneeded semi-colons, and put an &#39;!&#39; mark before the &#39;=&#39; in:     while ( u != rn)."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467912946, "post_id": 38233010, "comment_id": 63924797, "body": "I realized that I also added:   using namespace std;."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1468521717, "post_id": 38233010, "comment_id": 64173522, "body": "So it &quot;seems&quot; that I have fixed all of the problems except one. and this one seems easier. It says that i did not declare &quot;random&quot; in the &quot;int main()&quot; scope. Like I said, I am still a beginner in C++, and do not know hot to declare this &quot;random&quot; properly. If you have any solutions please let me know. Meanwhile, I am doing research of my own, on how to fix this error."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1468522278, "post_id": 38233010, "comment_id": 64173887, "body": "Ok, code updated. You can take a look at it now. I feel that the problems are close to being solved.  :P"}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1469385226, "post_id": 38233010, "comment_id": 64501782, "body": "Well, when I run your code, it says that &quot;randomize was not declared in the &#39;int main()&#39; function. Any suggestions on how to properly declare &quot;randomize in the parentheses for &#39;int main()&#39;?"}], "tags": [], "owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "is_accepted": true, "score": 10, "last_activity_date": 1467915589, "last_edit_date": 1495542756, "creation_date": 1467836239, "answer_id": 38233010, "question_id": 38232933, "link": "https://stackoverflow.com/questions/38232933/c-guessing-game-error/38233010#38233010", "title": "C++ Guessing Game Error", "body": "<p>Remove the semicolon near main, the compiler is telling you exactly what the issue is:</p>\n\n<pre><code>int main ();\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code>int main ()\n</code></pre>\n\n<p>Your code will also not compile even after fixing this because you have not declared the std namespace. You can put this line at the top for now <code>using namespace std;</code> but it is <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\" title=\"bad practice\">bad practice</a>. You should declare it manually using the scope resolution operator.</p>\n\n<p>And a number of other issues as already mentioned in the comments above, make sure to read the compiler output thoroughly because it tells you what line is causing the issue.</p>\n\n<p>Your code should look like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\nint main()\n{\nint rn = random() % 21; // generates a random int from 0 to 20\n\n// First output asking the user to guess the number\ncout &lt;&lt; \"Please guess my number :\" &lt;&lt; endl;\nint u;\ncin &gt;&gt; u;\n\nwhile (u != rn) // Calculates the answer that you give\n{\n\n    // If the user's number is greater than the random number\n    // the program will let you know it's too large\n    if (u &gt; rn)\n    {\n        cout &lt;&lt; \"You guessed too big!\" &lt;&lt; endl;\n    }\n    // On the other hand, if the user guesses to small\n    // the program will tell them that it's too small\n    else if (u &lt; rn)\n    {\n        cout &lt;&lt; \"You guessed too small!\" &lt;&lt; endl;\n    }\n\n    // If the user does not get the right number, the program\n    // will tell the user to guess again\n    cout &lt;&lt; \"Please guess again :\" &lt;&lt; endl;\n    cin &gt;&gt; u;\n\n}\n\n// If the user guesses the number correctly, the program\n// will say that they got it right, and end the program\ncout &lt;&lt; \"You guessed it right!\" &lt;&lt; endl;\ngetch();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467838281, "post_id": 38233490, "comment_id": 63888702, "body": "Thanks a bunch, that worked for the ! mark, but the error is still present."}, {"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467838420, "post_id": 38233490, "comment_id": 63888773, "body": "Oh, for some reason the last part didn&#39;t register on my PC screen. Thanks for the welcome Brian!  :)"}], "tags": [], "owner": {"reputation": 102, "user_id": 6214619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b9eea28579184267566ee2b79ec548?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cross", "link": "https://stackoverflow.com/users/6214619/brian-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1467837935, "creation_date": 1467837935, "answer_id": 38233490, "question_id": 38232933, "link": "https://stackoverflow.com/questions/38232933/c-guessing-game-error/38233490#38233490", "title": "C++ Guessing Game Error", "body": "<p>Someone else got to it. There are no semicolons after signatures to methods like main(). </p>\n\n<p>One other thing not mentioned, I'm guessing you want </p>\n\n<pre><code>while (u != rn)\n</code></pre>\n\n<p>Also, be careful of the difference in \"=\" and \"==\". </p>\n\n<p>BTW -- Welcome to C++!!!</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "edited": false, "score": 0, "creation_date": 1467838606, "post_id": 38233585, "comment_id": 63888858, "body": "Thanks yussuf! I appreciate it. :)"}], "tags": [], "owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "is_accepted": false, "score": 0, "last_activity_date": 1467838334, "creation_date": 1467838334, "answer_id": 38233585, "question_id": 38232933, "link": "https://stackoverflow.com/questions/38232933/c-guessing-game-error/38233585#38233585", "title": "C++ Guessing Game Error", "body": "<p>a little more portable version (doesn't use conio.h) which lets the computer play against himself:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nint get_random_in_range(int min, int max)\n{\n    return std::rand() % (max - min) + min;\n}\n\n// returns 0 if user guessed right, negative value if user\n// guessed too small, positive if user guessed too big\nint check_user_guess(int guess, int my_secret)\n{\n    return guess - my_secret;\n}\n\nint main ()\n{\n    int my_guess = get_random_in_range(1, 10);\n\n    std::cout &lt;&lt; \"I think of \" &lt;&lt; my_guess &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Please guess my number: \";\n    int user_guess = get_random_in_range(1, 10);\n    std::cout &lt;&lt; user_guess &lt;&lt; std::endl;\n\n    while (check_user_guess(user_guess, my_guess) != 0)\n    {\n        std::cout &lt;&lt; \"You guessed \" &lt;&lt; user_guess &lt;&lt; std::endl;\n\n        if (check_user_guess(user_guess, my_guess) &gt; 0)\n        {\n            std::cout &lt;&lt; \"You guessed too big!\" &lt;&lt; std::endl;\n        }\n        else if (check_user_guess(user_guess, my_guess) &lt; 0)\n        {\n            std::cout &lt;&lt; \"You guessed too small!\" &lt;&lt; std::endl;\n        }\n\n        std::cout &lt;&lt; \"Please guess again: \";\n        user_guess = get_random_in_range(1, 10);\n        std::cout &lt;&lt; user_guess &lt;&lt; std::endl;\n\n    }\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"You guessed it right!\";\n}\n</code></pre>\n\n<p>try it here: <a href=\"http://coliru.stacked-crooked.com/a/5bf0b9201ef57529\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/5bf0b9201ef57529</a></p>\n"}], "owner": {"reputation": 13, "user_id": 6557880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1ePu.jpg?s=128&g=1", "display_name": "Graphic Jet", "link": "https://stackoverflow.com/users/6557880/graphic-jet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 1, "accepted_answer_id": 38233010, "answer_count": 3, "score": 0, "last_activity_date": 1468522223, "creation_date": 1467835992, "last_edit_date": 1468522223, "question_id": 38232933, "link": "https://stackoverflow.com/questions/38232933/c-guessing-game-error", "title": "C++ Guessing Game Error", "body": "<p><strong>I do not know how to declare \"random\" in the parentheses for \"int main(),\" and need help. (I am a beginner in C++)</strong></p>\n\n<p>Please take a look at my code, try it out, and please notify me with an answer when you think you know how to solve this problem. It'd mean a lot to me. Thanks! Meanwhile, I will keep trying to solve the problem myself as well.</p>\n\n<p><strong>Note: I am using Code::Blocks if you want to be specific.</strong></p>\n\n<p><strong>The error is on Line 7/9</strong> of my code. </p>\n\n<p>Here is my updated code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\nint main()\n{\nint rn = random() % 21; // generates a random int from 0 to 20\n\n// First output asking the user to guess the number\ncout &lt;&lt; \"Please guess my number :\" &lt;&lt; endl;\nint u;\ncin &gt;&gt; u;\n\nwhile (u != rn) // Calculates the answer that you give\n{\n\n// If the user's number is greater than the random number\n// the program will let you know it's too large\nif (u &gt; rn)\n{\n    cout &lt;&lt; \"You guessed too big!\" &lt;&lt; endl;\n}\n// On the other hand, if the user guesses to small\n// the program will tell them that it's too small\nelse if (u &lt; rn)\n{\n    cout &lt;&lt; \"You guessed too small!\" &lt;&lt; endl;\n}\n\n// If the user does not get the right number, the program\n// will tell the user to guess again\ncout &lt;&lt; \"Please guess again :\" &lt;&lt; endl;\ncin &gt;&gt; u;\n\n}\n\n// If the user guesses the number correctly, the program\n// will say that they got it right, and end the program\ncout &lt;&lt; \"You guessed it right!\" &lt;&lt; endl;\ngetch();\n}\n</code></pre>\n\n<p>Here's the updated compiler error:</p>\n\n<p>||=== Build: Debug in Guess The Number (compiler: GNU GCC Compiler) ===|</p>\n\n<p>C:\\Users\\Minecraftship\\Documents\\CPP Programs From Book\\Guess The Number\\main.cpp||<strong>In function 'int main()':|</strong></p>\n\n<p>C:\\Users\\Minecraftship\\Documents\\CPP Programs From Book\\Guess The Number\\main.cpp|12|</p>\n\n<p><strong>error: 'randomize' was not declared in this scope|</strong></p>\n\n<p>||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|</p>\n"}, {"tags": ["c++", "opencv", "fixed-point"], "comments": [{"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "edited": false, "score": 2, "creation_date": 1467846754, "post_id": 38232930, "comment_id": 63892078, "body": "You may want to look at this documentation: <a href=\"http://www.docs.opencv.org/ref/master/d0/d3a/classcv_1_1DataType.html#gsc.tab=0\" rel=\"nofollow noreferrer\">docs.opencv.org/ref/master/d0/d3a/&hellip;</a> I think you should define a template specialization for using it."}, {"owner": {"reputation": 106, "user_id": 5036656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecaf52417017ed72a79fbe5966634f?s=128&d=identicon&r=PG&f=1", "display_name": "BartekM", "link": "https://stackoverflow.com/users/5036656/bartekm"}, "reply_to_user": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "edited": false, "score": 0, "creation_date": 1467992381, "post_id": 38232930, "comment_id": 63960568, "body": "Thanks for suggestion! I&#39;ve made an attempt to do what you said, results below, in answer to my question."}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 5036656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecaf52417017ed72a79fbe5966634f?s=128&d=identicon&r=PG&f=1", "display_name": "BartekM", "link": "https://stackoverflow.com/users/5036656/bartekm"}, "is_accepted": true, "score": 0, "last_activity_date": 1468019220, "last_edit_date": 1468019220, "creation_date": 1467989899, "answer_id": 38269758, "question_id": 38232930, "link": "https://stackoverflow.com/questions/38232930/is-there-a-way-to-use-opencv-mat-with-custom-class/38269758#38269758", "title": "Is there a way to use OpenCV Mat_ with custom class?", "body": "<p>As it was mentioned in comments, I needed to define template specialization:</p>\n\n<pre><code>template&lt;size_t I, size_t F&gt; class cv::DataType&lt;Fixed&lt;I, F&gt;&gt;\n{\npublic:\n    typedef Fixed&lt;I, F&gt; value_type;\n    typedef Fixed&lt;I, F&gt; work_type;\n    typedef Fixed&lt;I, F&gt; channel_type;\n    enum {\n        channels = 1,\n        depth = I + F,\n        type = CV_MAKETYPE(depth, channels)\n    };\n};\n</code></pre>\n\n<p>So far, it seems to work fine. For example, I can write:</p>\n\n<pre><code>cv::Mat_&lt;Fixed&lt;13, 3&gt;&gt; fixed = cv::Mat_&lt;Fixed&lt;13, 3&gt;&gt;::zeros(10, 10);\nfixed(1, 1) = 2.4;\nstd::cout &lt;&lt; fixed(0, 0) &lt;&lt; std::endl;\nstd::cout &lt;&lt; fixed(1, 1) &lt;&lt; std::endl;\n</code></pre>\n\n<p>And this will output:</p>\n\n<pre><code>0.0\n2.375\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 5036656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecaf52417017ed72a79fbe5966634f?s=128&d=identicon&r=PG&f=1", "display_name": "BartekM", "link": "https://stackoverflow.com/users/5036656/bartekm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "accepted_answer_id": 38269758, "answer_count": 1, "score": 2, "last_activity_date": 1468019220, "creation_date": 1467835987, "question_id": 38232930, "link": "https://stackoverflow.com/questions/38232930/is-there-a-way-to-use-opencv-mat-with-custom-class", "title": "Is there a way to use OpenCV Mat_ with custom class?", "body": "<p>I have some algorithm in OpenCV and I want to rewrite it using fixed point value representation. I found class for fixed point arithmetic here: <a href=\"https://github.com/eteran/cpp-utilities\" rel=\"nofollow\">https://github.com/eteran/cpp-utilities</a>. I'd like to know if there's some elegant way to use Mat_ template class with Fixed class objects (or any custom class) as contents of Mat. When I use:</p>\n\n<pre><code>cv::Mat_&lt;cv::Vec&lt;Fixed&lt;12, 4&gt;, 3&gt;&gt; num;\n</code></pre>\n\n<p>I'm getting following errors:</p>\n\n<pre><code>Error   C2039   'value' : is not a member of 'cv::DataDepth&lt;numeric::Fixed&lt;0x0c,0x04&gt;&gt;' opencv_hog  D:\\libs\\x64\\opencv_2_4_13\\build\\include\\opencv2\\core\\core.hpp   1134\nError   C2065   'value' : undeclared identifier opencv_hog  D:\\libs\\x64\\opencv_2_4_13\\build\\include\\opencv2\\core\\core.hpp   1134\nError   C2039   'fmt' : is not a member of 'cv::DataDepth&lt;numeric::Fixed&lt;0x0c,0x04&gt;&gt;'   opencv_hog  D:\\libs\\x64\\opencv_2_4_13\\build\\include\\opencv2\\core\\core.hpp   1135    \nError   C2065   'fmt' : undeclared identifier   opencv_hog  D:\\libs\\x64\\opencv_2_4_13\\build\\include\\opencv2\\core\\core.hpp   1135    \nError   C2056   illegal expression  opencv_hog  D:\\libs\\x64\\opencv_2_4_13\\build\\include\\opencv2\\core\\core.hpp   1135\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "qprocess"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467835944, "post_id": 38232863, "comment_id": 63887487, "body": "The <code>popen()</code> function takes two arguments: the command string and either <code>&quot;r&quot;</code> or <code>&quot;w&quot;</code> depending on whether you want to write to the standard input or read from the standard output of the command that&#39;s run.  The partial error message you show is giving you that information \u2014 command and mode.  If you want to relay your program&#39;s standard input to the command you run, you&#39;ll need to loop, reading data from standard input and writing to the successfully opened <code>f</code> file stream.  And you should consider using <code>&lt;cstdio&gt;</code> in place of <code>&lt;stdio.h&gt;</code>; your existing code is C code (as well as C++)."}, {"owner": {"reputation": 148, "user_id": 6199569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLXw3.jpg?s=128&g=1", "display_name": "Matias Barone", "link": "https://stackoverflow.com/users/6199569/matias-barone"}, "edited": false, "score": 0, "creation_date": 1467836044, "post_id": 38232863, "comment_id": 63887536, "body": "I have something similar, in my case I use shared memory. In the shared memory I have a command buffer that one of the process writes in and the other read from."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 1, "creation_date": 1467836642, "post_id": 38232863, "comment_id": 63887861, "body": "popen( &quot;mpg321 -R ewqe&quot;, &quot;w&quot; )"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467841785, "post_id": 38234315, "comment_id": 63890327, "body": "Is it in c++?  because I am aiming for c++ code. When I tried to run it.. i.e. #include &lt;QProcess&gt; It is showing : fatal error: QProcess: No such file or directory Can you help me with this"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842541, "post_id": 38234315, "comment_id": 63890672, "body": "I am trying using sudo apt-get install build-essential libgl1-mesa-dev But still its showing same error."}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842655, "post_id": 38234315, "comment_id": 63890738, "body": "Can you suggest me how to install QT in my linux (raspberry)"}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842846, "post_id": 38234315, "comment_id": 63890820, "body": "QProcess is part of the Qt Framework. You will need to install the Qt headers. Maybe something like this: apt-get install qt-dev-tools"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467842921, "post_id": 38234315, "comment_id": 63890849, "body": "Sure.. I il try and let you know"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467843872, "post_id": 38234315, "comment_id": 63891184, "body": "apt-get install qt-dev-tools  and sudo apt-get install qtcreator Still not working..same error"}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467844295, "post_id": 38234315, "comment_id": 63891311, "body": "Your project is in CMake? Use find_package(Qt5 COMPONENTS QTCORE) in you CMakeLists"}, {"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467845201, "post_id": 38234315, "comment_id": 63891562, "body": "No..i am just creating a small code.  and compiling using g++ test.cpp -o test    Stil not working."}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1467845644, "post_id": 38234315, "comment_id": 63891702, "body": "It&#39;s a lot of work manually build. See: <a href=\"http://resources.esri.com/help/9.3/arcgisengine/com_cpp/Cpp/programming/qt/makeqt.htm\" rel=\"nofollow noreferrer\">resources.esri.com/help/9.3/arcgisengine/com_cpp/Cpp/&hellip;</a> Recommend you use QMake or CMake to it."}], "tags": [], "owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "is_accepted": false, "score": 0, "last_activity_date": 1467841559, "creation_date": 1467841559, "answer_id": 38234315, "question_id": 38232863, "link": "https://stackoverflow.com/questions/38232863/qprocess-working-example-c/38234315#38234315", "title": "QProcess working example - C++", "body": "<p>Try this:</p>\n\n<pre><code>QProcess subprocess;\nsubprocess.start(\"mpg321\", QStringList()  &lt;&lt; \"-R\" &lt;&lt; \"anyword\");\nif (!subprocess.waitForStarted())\n    return false;\n\nsubprocess.write(\"LOAD test.mp3\\n\");\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2956, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1467841559, "creation_date": 1467835669, "last_edit_date": 1467839739, "question_id": 38232863, "link": "https://stackoverflow.com/questions/38232863/qprocess-working-example-c", "title": "QProcess working example - C++", "body": "<p>I am trying to start external programs and to communicate with them.</p>\n\n<p>I want to run this application in background using QProcess. And also pass commands as well from this code to this process.</p>\n\n<p>Can someone throw light on this and direct me accordingly to execute commands as well when code is running.</p>\n\n<p>Something like this in python but for c++ using QProcess</p>\n\n<pre><code>p = subprocess.Popen(['mpg321', '-R', 'anyword'], stdin=PIPE)\np.stdin.write('LOAD test.mp3\\n')\n</code></pre>\n"}, {"tags": ["c++", "gcc", "boost"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1467835588, "post_id": 38232786, "comment_id": 63887321, "body": "Add <code>-std=c++11</code> or <code>-std=c++14</code> to your command line"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1467836196, "post_id": 38232786, "comment_id": 63887619, "body": "@RichardCritten Why would that solve the problem ? He is using <code>boost::any</code>, it should work w/o C++11 as well."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467836339, "post_id": 38232786, "comment_id": 63887704, "body": "Are you able to work with any other boost constructs ?"}, {"owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1467848844, "post_id": 38232786, "comment_id": 63892657, "body": "Interesting, I can see boost::mpl::if_... being used in any.hpp but no apparent include related to it.  Try including &lt;boost/mpl/if.hpp&gt; above your any.hpp include."}, {"owner": {"reputation": 1, "user_id": 6557873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb9065084a4868a9abbd86b9345544f?s=128&d=identicon&r=PG&f=1", "display_name": "mjksill", "link": "https://stackoverflow.com/users/6557873/mjksill"}, "reply_to_user": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1468163877, "post_id": 38232786, "comment_id": 64003821, "body": "@qexyn Adding an include to boost/mpl/if.hpp did the trick.  I didn&#39;t need to do this before, and I am not sure what changed.  The real reason I ran across this problem is I was having problems including boost/program_options.hpp, however, adding the include to if.hpp fixed everything.  Thanks.,"}], "owner": {"reputation": 1, "user_id": 6557873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb9065084a4868a9abbd86b9345544f?s=128&d=identicon&r=PG&f=1", "display_name": "mjksill", "link": "https://stackoverflow.com/users/6557873/mjksill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467835510, "creation_date": 1467835376, "last_edit_date": 1467835510, "question_id": 38232786, "link": "https://stackoverflow.com/questions/38232786/compilation-errors-when-trying-to-include-boost-any-hpp-from-boost", "title": "compilation errors when trying to include boost/any.hpp from boost", "body": "<p>I am not sure what happened to my system, but now when I try to include boost/any.hpp in a program test.cc</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/any.hpp&gt;\n\nint main(int argc, char *argv[])\n{\n  std::cout &lt;&lt; \"hello\" &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>using g++ -o test test.cc, I get the following error:</p>\n\n<pre><code>In file included from test.cc:2:0:\n\n/usr/include/boost/any.hpp: In function 'ValueType boost::any_cast(boost::any&amp;)':\n\n/usr/include/boost/any.hpp:278:52: error: 'if_' in namespace 'boost::mpl' does not name a template type\n\n        typedef BOOST_DEDUCED_TYPENAME boost::mpl::if_&lt;\n                                                   ^ /usr/include/boost/any.hpp:278:55: error: expected unqualified-id before '&lt;' token\n\n        typedef BOOST_DEDUCED_TYPENAME boost::mpl::if_&lt;\n                                                      ^ /usr/include/boost/any.hpp:284:28: error: 'ref_type' does not name a type\n\n        return static_cast&lt;ref_type&gt;(*result); \n</code></pre>\n\n<p>Everything is fine when I remove the include to any.hpp.  I am using boost-1.56.0 and gcc-4.9.3.</p>\n\n<p>Things were compiling fine a week ago, but I am not sure what I might have updated to cause this error.  Any help would be appreciated.</p>\n"}, {"tags": ["c++", "file", "certificate", "x509", "acrobat"], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1467896308, "post_id": 38246059, "comment_id": 63913249, "body": "Oh good to know what you are telling me. And how do i read the PDF Stream?"}, {"owner": {"reputation": 151, "user_id": 4774634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439228f2d80904b2ba8daab3a9db8541?s=128&d=identicon&r=PG&f=1", "display_name": "Outtruder", "link": "https://stackoverflow.com/users/4774634/outtruder"}, "reply_to_user": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1467896944, "post_id": 38246059, "comment_id": 63913711, "body": "Hmm. The specification is quite large: <a href=\"http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf\" rel=\"nofollow noreferrer\">adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/&hellip;</a>. I suggest to try get rid of the backslashes first - if you know where exactly to look for the certificates."}, {"owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "edited": false, "score": 0, "creation_date": 1467897059, "post_id": 38246059, "comment_id": 63913797, "body": "mhh okay, so if will look for existing PDF Parsers for C++ first. Maybe this did help me in my case. thanks for clarification."}], "tags": [], "owner": {"reputation": 151, "user_id": 4774634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439228f2d80904b2ba8daab3a9db8541?s=128&d=identicon&r=PG&f=1", "display_name": "Outtruder", "link": "https://stackoverflow.com/users/4774634/outtruder"}, "is_accepted": true, "score": 1, "last_activity_date": 1467896111, "creation_date": 1467896111, "answer_id": 38246059, "question_id": 38232728, "link": "https://stackoverflow.com/questions/38232728/how-to-extract-x-509-certificate-der-encoded-from-specific-file-with-c/38246059#38246059", "title": "How to extract X.509-Certificate (DER-Encoded) from specific file with C++?", "body": "<p>You wrongly assume that binary data such as certificates are stored \"as is\" in the PDF stream. Apparently, the certificate is stored as a literal string and contain escape sequences: parenthesis, CR, LF, backslash and what else are escaped with a backslash. To retrieve the certificate you need to implement a basic PDF stream parser to get rid of those backslash-sequences.</p>\n"}], "owner": {"reputation": 428, "user_id": 2523400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480b273de166c86fbdc7ec82b4b9106e?s=128&d=identicon&r=PG", "display_name": "Opa114", "link": "https://stackoverflow.com/users/2523400/opa114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 38246059, "answer_count": 1, "score": 0, "last_activity_date": 1467896111, "creation_date": 1467835148, "last_edit_date": 1467892350, "question_id": 38232728, "link": "https://stackoverflow.com/questions/38232728/how-to-extract-x-509-certificate-der-encoded-from-specific-file-with-c", "title": "How to extract X.509-Certificate (DER-Encoded) from specific file with C++?", "body": "<p>i need help on extracting a X.509-Certificate from a specific file with C++.\nI want to extract a X.509-Certificate from the file \u00b4addressbook.acrodata\u00b4 which ships with Adobe Acrobat Reader DC and contains the Adobe trusted Root-CA-Certificates.</p>\n\n<p>I tried it with C++ this way. I read only a specific range of bytes where the certificate is stored inside the file. The whole file contains a lot more information. The Certificate-Data is stored there as DER-Encoded String.</p>\n\n<pre><code>ifstream input(addressbook.acrodata, ios::binary);\n\nif (input) {\n  input.seekg (0, input.end);\n  int length = input.tellg();\n  input.seekg (STARTPOSITION, input.beg);\n  char * buffer = new char [length];\n  input.read (buffer,ENDPOSITION);\n  input.close();\n\n  cout &lt;&lt; buffer; // for testing only\n}\n</code></pre>\n\n<p>But i don't get the result i expect. When i open the original file \u00b4addressbook.acrodata\u00b4 with a Hex-Editor i see that on the entry where the certificate is stored are some character appear (<code>\\r</code>, <code>\\n</code> and <code>\\\\</code>) which did not appear in the extracted Certificate i have extracted via Adobe Reader DC interface. This Extracted one i could oen fine on my Windows Machine with Windows CertManager but the on i extracted with C++ contains these characters and when i try to open it in Windows with CertManager i got the message that it is no valid certificate.</p>\n\n<p>Here are the Hex-Dumps of the extracted Certificate inside Adobe Reader and the second one is the Hex-Dump of the specific code of the \u00b4addressbook.acrodata\u00b4 which equals to what i got when i read it like above in C++.</p>\n\n<pre><code>Offset(h) 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n\n00000000  30 82 04 A1 30 82 03 89 A0 03 02 01 02 02 04 3E  0\u201a.\u00a10\u201a.\u2030 ......&gt;\n00000010  1C BD 28 30 0D 06 09 2A 86 48 86 F7 0D 01 01 05  .\u00bd(0...*\u2020H\u2020\u00f7....\n00000020  05 00 30 69 31 0B 30 09 06 03 55 04 06 13 02 55  ..0i1.0...U....U\n00000030  53 31 23 30 21 06 03 55 04 0D 13 1A 41 64 6F 62  S1#0!..U....Adob\n00000040  65 20 53 79 73 74 65 6D 73 20 49 6E 63 6F 72 70  e Systems Incorp\n00000050  6F 72 61 74 65 64 31 1D 30 1B 06 03 55 04 0B 13  orated1.0...U...\n00000060  14 41 64 6F 62 65 20 54 72 75 73 74 20 53 65 72  .Adobe Trust Ser\n00000070  76 69 63 65 73 31 16 30 14 06 03 55 04 03 13 0D  vices1.0...U....\n00000080  41 64 6F 62 65 20 52 6F 6F 74 20 43 41 30 1E 17  Adobe Root CA0..\n00000090  0D 30 33 30 31 30 38 32 33 33 37 32 33 5A 17 0D  .030108233723Z..\n000000A0  32 33 30 31 30 39 30 30 30 37 32 33 5A 30 69 31  230109000723Z0i1\n000000B0  0B 30 09 06 03 55 04 06 13 02 55 53 31 23 30 21  .0...U....US1#0!\n000000C0  06 03 55 04 0D 13 1A 41 64 6F 62 65 20 53 79 73  ..U....Adobe Sys\n000000D0  74 65 6D 73 20 49 6E 63 6F 72 70 6F 72 61 74 65  tems Incorporate\n000000E0  64 31 1D 30 1B 06 03 55 04 0B 13 14 41 64 6F 62  d1.0...U....Adob\n000000F0  65 20 54 72 75 73 74 20 53 65 72 76 69 63 65 73  e Trust Services\n00000100  31 16 30 14 06 03 55 04 03 13 0D 41 64 6F 62 65  1.0...U....Adobe\n00000110  20 52 6F 6F 74 20 43 41 30 82 01 22 30 0D 06 09   Root CA0\u201a.\"0...\n00000120  2A 86 48 86 F7 0D 01 01 01 05 00 03 82 01 0F 00  *\u2020H\u2020\u00f7.......\u201a...\n00000130  30 82 01 0D 02 82 01 01 00 CC 4F 54 84 F7 A7 A2  0\u201a...\u201a...\u00ccOT\u201e\u00f7\u00a7\u00a2\n00000140  E7 33 53 7F 3F 9C 12 88 6B 2C 99 47 67 7E 0F 1E  \u00e73S.?\u0153.\u02c6k,\u2122Gg~..\n00000150  B9 AD 14 88 F9 C3 10 D8 1D F0 F0 D5 9F 69 0D 2F  \u00b9..\u02c6\u00f9\u00c3.\u00d8.\u00f0\u00f0\u00d5\u0178i./\n00000160  59 35 B0 CC 6C A9 4C 9C 15 A0 9F CE 20 BF A0 CF  Y5\u00b0\u00ccl\u00a9L\u0153. \u0178\u00ce \u00bf \u00cf\n00000170  54 E2 E0 20 66 45 3F 39 86 38 7E 9C C4 8E 07 22  T\u00e2\u00e0 fE?9\u20208~\u0153\u00c4\u017d.\"\n00000180  C6 24 F6 01 12 B0 35 DF 55 EA 69 90 B0 DB 85 37  \u00c6$\u00f6..\u00b05\u00dfU\u00eai.\u00b0\u00db\u20267\n00000190  1E E2 4E 07 B2 42 A1 6A 13 69 A0 66 EA 80 91 11  .\u00e2N.\u00b2B\u00a1j.i f\u00ea\u20ac\u2018.\n000001A0  59 2A 9B 08 79 5A 20 44 2D C9 BD 73 38 8B 3C 2F  Y*\u203a.yZ D-\u00c9\u00bds8\u2039&lt;/\n000001B0  E0 43 1B 5D B3 0B F0 AF 35 1A 29 FE EF A6 92 DD  \u00e0C.]\u00b3.\u00f0\u00af5.)\u00fe\u00ef\u00a6\u2019\u00dd\n000001C0  81 4C 9D 3D 59 8E AD 31 3C 40 7E 9B 91 36 06 FC  .L.=Y\u017d.1&lt;@~\u203a\u20186.\u00fc\n000001D0  E2 5C 8D D1 8D 26 D5 5C 45 CF AF 65 3F B1 AA D2  \u00e2\\.\u00d1.&amp;\u00d5\\E\u00cf\u00afe?\u00b1\u00aa\u00d2\n000001E0  62 96 F4 A8 38 EA BA 60 42 F4 F4 1C 4A 35 15 CE  b\u2013\u00f4\u00a88\u00ea\u00ba`B\u00f4\u00f4.J5.\u00ce\n000001F0  F8 4E 22 56 0F 95 18 C5 F8 96 9F 9F FB B0 B7 78  \u00f8N\"V.\u2022.\u00c5\u00f8\u2013\u0178\u0178\u00fb\u00b0\u00b7x\n00000200  25 E9 80 6B BD D6 0D F0 C6 74 94 9D F3 0F 50 DB  %\u00e9\u20ack\u00bd\u00d6.\u00f0\u00c6t\u201d.\u00f3.P\u00db\n00000210  9A 77 CE 4B 70 83 23 8D A0 CA 78 20 44 5C 3C 54  \u0161w\u00ceKp\u0192#. \u00cax D\\&lt;T\n00000220  64 F1 EA A2 30 19 9F EA 4C 06 4D 06 78 4B 5E 92  d\u00f1\u00ea\u00a20.\u0178\u00eaL.M.xK^\u2019\n00000230  DF 22 D2 C9 67 B3 7A D2 01 02 03 01 00 01 A3 82  \u00df\"\u00d2\u00c9g\u00b3z\u00d2......\u00a3\u201a\n00000240  01 4F 30 82 01 4B 30 11 06 09 60 86 48 01 86 F8  .O0\u201a.K0...`\u2020H.\u2020\u00f8\n00000250  42 01 01 04 04 03 02 00 07 30 81 8E 06 03 55 1D  B........0.\u017d..U.\n00000260  1F 04 81 86 30 81 83 30 81 80 A0 7E A0 7C A4 7A  ...\u20200.\u01920.\u20ac ~ |\u00a4z\n00000270  30 78 31 0B 30 09 06 03 55 04 06 13 02 55 53 31  0x1.0...U....US1\n00000280  23 30 21 06 03 55 04 0D 13 1A 41 64 6F 62 65 20  #0!..U....Adobe \n00000290  53 79 73 74 65 6D 73 20 49 6E 63 6F 72 70 6F 72  Systems Incorpor\n000002A0  61 74 65 64 31 1D 30 1B 06 03 55 04 0B 13 14 41  ated1.0...U....A\n000002B0  64 6F 62 65 20 54 72 75 73 74 20 53 65 72 76 69  dobe Trust Servi\n000002C0  63 65 73 31 16 30 14 06 03 55 04 03 13 0D 41 64  ces1.0...U....Ad\n000002D0  6F 62 65 20 52 6F 6F 74 20 43 41 31 0D 30 0B 06  obe Root CA1.0..\n000002E0  03 55 04 03 13 04 43 52 4C 31 30 2B 06 03 55 1D  .U....CRL10+..U.\n000002F0  10 04 24 30 22 80 0F 32 30 30 33 30 31 30 38 32  ..$0\"\u20ac.200301082\n00000300  33 33 37 32 33 5A 81 0F 32 30 32 33 30 31 30 39  33723Z..20230109\n00000310  30 30 30 37 32 33 5A 30 0B 06 03 55 1D 0F 04 04  000723Z0...U....\n00000320  03 02 01 06 30 1F 06 03 55 1D 23 04 18 30 16 80  ....0...U.#..0.\u20ac\n00000330  14 82 B7 38 4A 93 AA 9B 10 EF 80 BB D9 54 E2 F1  .\u201a\u00b78J\u201c\u00aa\u203a.\u00ef\u20ac\u00bb\u00d9T\u00e2\u00f1\n00000340  0F FB 80 9C DE 30 1D 06 03 55 1D 0E 04 16 04 14  .\u00fb\u20ac\u0153\u00de0...U......\n00000350  82 B7 38 4A 93 AA 9B 10 EF 80 BB D9 54 E2 F1 0F  \u201a\u00b78J\u201c\u00aa\u203a.\u00ef\u20ac\u00bb\u00d9T\u00e2\u00f1.\n00000360  FB 80 9C DE 30 0C 06 03 55 1D 13 04 05 30 03 01  \u00fb\u20ac\u0153\u00de0...U....0..\n00000370  01 FF 30 1D 06 09 2A 86 48 86 F6 7D 07 41 00 04  .\u00ff0...*\u2020H\u2020\u00f6}.A..\n00000380  10 30 0E 1B 08 56 36 2E 30 3A 34 2E 30 03 02 04  .0...V6.0:4.0...\n00000390  90 30 0D 06 09 2A 86 48 86 F7 0D 01 01 05 05 00  .0...*\u2020H\u2020\u00f7......\n000003A0  03 82 01 01 00 32 DA 9F 43 75 C1 FA 6F C9 6F DB  .\u201a...2\u00da\u0178Cu\u00c1\u00fao\u00c9o\u00db\n000003B0  AB 1D 36 37 3E BC 61 19 36 B7 02 3C 1D 23 59 98  \u00ab.67&gt;\u00bca.6\u00b7.&lt;.#Y\u02dc\n000003C0  6C 9E EE 4D 85 E7 54 C8 20 1F A7 D4 BB E2 BF 00  l\u017e\u00eeM\u2026\u00e7T\u00c8 .\u00a7\u00d4\u00bb\u00e2\u00bf.\n000003D0  77 7D 24 6B 70 2F 5C C1 3A 76 49 B5 D3 E0 23 84  w}$kp/\\\u00c1:vI\u00b5\u00d3\u00e0#\u201e\n000003E0  2A 71 6A 22 F3 C1 27 29 98 15 F6 35 90 E4 04 4C  *qj\"\u00f3\u00c1')\u02dc.\u00f65.\u00e4.L\n000003F0  C3 8D BC 9F 61 1C E7 FD 24 8C D1 44 43 8C 16 BA  \u00c3.\u00bc\u0178a.\u00e7\u00fd$\u0152\u00d1DC\u0152.\u00ba\n00000400  9B 4D A5 D4 35 2F BC 11 CE BD F7 51 37 8D 9F 90  \u203aM\u00a5\u00d45/\u00bc.\u00ce\u00bd\u00f7Q7.\u0178.\n00000410  E4 14 F1 18 3F BE E9 59 12 35 F9 33 92 F3 9E E0  \u00e4.\u00f1.?\u00be\u00e9Y.5\u00f93\u2019\u00f3\u017e\u00e0\n00000420  D5 6B 9A 71 9B 99 4B C8 71 C3 E1 B1 61 09 C4 E5  \u00d5k\u0161q\u203a\u2122K\u00c8q\u00c3\u00e1\u00b1a.\u00c4\u00e5\n00000430  FA 91 F0 42 3A 37 7D 34 F9 72 E8 CD AA 62 1C 21  \u00fa\u2018\u00f0B:7}4\u00f9r\u00e8\u00cd\u00aab.!\n00000440  E9 D5 F4 82 10 E3 7B 05 B6 2D 68 56 0B 7E 7E 92  \u00e9\u00d5\u00f4\u201a.\u00e3{.\u00b6-hV.~~\u2019\n00000450  2C 6F 4D 72 82 0C ED 56 74 B2 9D B9 AB 2D 2B 1D  ,oMr\u201a.\u00edVt\u00b2.\u00b9\u00ab-+.\n00000460  10 5F DB 27 75 70 8F FD 1D D7 E2 02 A0 79 E5 1C  ._\u00db'up.\u00fd.\u00d7\u00e2. y\u00e5.\n00000470  E5 FF AF 64 40 51 2D 9E 9B 47 DB 42 A5 7C 1F C2  \u00e5\u00ff\u00afd@Q-\u017e\u203aG\u00dbB\u00a5|.\u00c2\n00000480  A6 48 B0 D7 BE 92 69 4D A4 F6 29 57 C5 78 11 18  \u00a6H\u00b0\u00d7\u00be\u2019iM\u00a4\u00f6)W\u00c5x..\n00000490  DC 87 51 CA 13 B2 62 9D 4F 2B 32 BD 31 A5 C1 FA  \u00dc\u2021Q\u00ca.\u00b2b.O+2\u00bd1\u00a5\u00c1\u00fa\n000004A0  52 AB 05 88 C8                                   R\u00ab.\u02c6\u00c8\n</code></pre>\n\n<hr>\n\n<pre><code>Offset(h) 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n\n00003080                                      30 82 04 A1              0\u201a.\u00a1\n00003090  30 82 03 89 A0 03 02 01 02 02 04 3E 1C BD 5C 28  0\u201a.\u2030 ......&gt;.\u00bd\\(\n000030A0  30 5C 72 06 09 2A 86 48 86 F7 5C 72 01 01 05 05  0\\r..*\u2020H\u2020\u00f7\\r....\n000030B0  00 30 69 31 0B 30 09 06 03 55 04 06 13 02 55 53  .0i1.0...U....US\n000030C0  31 23 30 21 06 03 55 04 5C 6E 13 1A 41 64 6F 62  1#0!..U.\\n..Adob\n000030D0  65 20 53 79 73 74 65 6D 73 20 49 6E 63 6F 72 70  e Systems Incorp\n000030E0  6F 72 61 74 65 64 31 1D 30 1B 06 03 55 04 0B 13  orated1.0...U...\n000030F0  14 41 64 6F 62 65 20 54 72 75 73 74 20 53 65 72  .Adobe Trust Ser\n00003100  76 69 63 65 73 31 16 30 14 06 03 55 04 03 13 5C  vices1.0...U...\\\n00003110  72 41 64 6F 62 65 20 52 6F 6F 74 20 43 41 30 1E  rAdobe Root CA0.\n00003120  17 5C 72 30 33 30 31 30 38 32 33 33 37 32 33 5A  .\\r030108233723Z\n00003130  17 5C 72 32 33 30 31 30 39 30 30 30 37 32 33 5A  .\\r230109000723Z\n00003140  30 69 31 0B 30 09 06 03 55 04 06 13 02 55 53 31  0i1.0...U....US1\n00003150  23 30 21 06 03 55 04 5C 6E 13 1A 41 64 6F 62 65  #0!..U.\\n..Adobe\n00003160  20 53 79 73 74 65 6D 73 20 49 6E 63 6F 72 70 6F   Systems Incorpo\n00003170  72 61 74 65 64 31 1D 30 1B 06 03 55 04 0B 13 14  rated1.0...U....\n00003180  41 64 6F 62 65 20 54 72 75 73 74 5C 0D 20 53 65  Adobe Trust\\. Se\n00003190  72 76 69 63 65 73 31 16 30 14 06 03 55 04 03 13  rvices1.0...U...\n000031A0  5C 72 41 64 6F 62 65 20 52 6F 6F 74 20 43 41 30  \\rAdobe Root CA0\n000031B0  82 01 22 30 5C 72 06 09 2A 86 48 86 F7 5C 72 01  \u201a.\"0\\r..*\u2020H\u2020\u00f7\\r.\n000031C0  01 01 05 00 03 82 01 0F 00 30 82 01 5C 6E 02 82  .....\u201a...0\u201a.\\n.\u201a\n000031D0  01 01 00 CC 4F 54 84 F7 A7 A2 E7 33 53 7F 3F 9C  ...\u00ccOT\u201e\u00f7\u00a7\u00a2\u00e73S.?\u0153\n000031E0  12 88 6B 2C 99 47 67 7E 0F 1E B9 AD 14 88 F9 C3  .\u02c6k,\u2122Gg~..\u00b9..\u02c6\u00f9\u00c3\n000031F0  10 D8 1D F0 F0 D5 9F 69 5C 6E 2F 59 35 B0 CC 6C  .\u00d8.\u00f0\u00f0\u00d5\u0178i\\n/Y5\u00b0\u00ccl\n00003200  A9 4C 9C 15 A0 9F CE 20 BF A0 CF 54 E2 E0 20 66  \u00a9L\u0153. \u0178\u00ce \u00bf \u00cfT\u00e2\u00e0 f\n00003210  45 3F 39 86 38 7E 9C C4 8E 07 22 C6 24 F6 01 12  E?9\u20208~\u0153\u00c4\u017d.\"\u00c6$\u00f6..\n00003220  B0 35 DF 55 EA 69 90 B0 DB 85 37 1E E2 4E 07 B2  \u00b05\u00dfU\u00eai.\u00b0\u00db\u20267.\u00e2N.\u00b2\n00003230  42 A1 6A 13 69 A0 66 EA 80 91 11 59 2A 9B 08 79  B\u00a1j.i f\u00ea\u20ac\u2018.Y*\u203a.y\n00003240  5A 20 44 2D C9 BD 73 38 8B 3C 2F E0 43 1B 5D B3  Z D-\u00c9\u00bds8\u2039&lt;/\u00e0C.]\u00b3\n00003250  0B F0 AF 35 1A 5C 29 FE EF A6 92 DD 81 4C 9D 3D  .\u00f0\u00af5.\\)\u00fe\u00ef\u00a6\u2019\u00dd.L.=\n00003260  59 8E AD 31 3C 40 7E 9B 91 36 06 FC E2 5C 5C 8D  Y\u017d.1&lt;@~\u203a\u20186.\u00fc\u00e2\\\\.\n00003270  D1 8D 26 D5 5C 5C 45 CF AF 65 3F B1 AA D2 62 96  \u00d1.&amp;\u00d5\\\\E\u00cf\u00afe?\u00b1\u00aa\u00d2b\u2013\n00003280  F4 A8 38 EA BA 60 42 F4 F4 1C 4A 35 5C 0D 15 CE  \u00f4\u00a88\u00ea\u00ba`B\u00f4\u00f4.J5\\..\u00ce\n00003290  F8 4E 22 56 0F 95 18 C5 F8 96 9F 9F FB B0 B7 78  \u00f8N\"V.\u2022.\u00c5\u00f8\u2013\u0178\u0178\u00fb\u00b0\u00b7x\n000032A0  25 E9 80 6B BD D6 5C 6E F0 C6 74 94 9D F3 0F 50  %\u00e9\u20ack\u00bd\u00d6\\n\u00f0\u00c6t\u201d.\u00f3.P\n000032B0  DB 9A 77 CE 4B 70 83 23 8D A0 CA 78 20 44 5C 5C  \u00db\u0161w\u00ceKp\u0192#. \u00cax D\\\\\n000032C0  3C 54 64 F1 EA A2 30 19 9F EA 4C 06 4D 06 78 4B  &lt;Td\u00f1\u00ea\u00a20.\u0178\u00eaL.M.xK\n000032D0  5E 92 DF 22 D2 C9 67 B3 7A D2 01 02 03 01 00 01  ^\u2019\u00df\"\u00d2\u00c9g\u00b3z\u00d2......\n000032E0  A3 82 01 4F 30 82 01 4B 30 11 06 09 60 86 48 01  \u00a3\u201a.O0\u201a.K0...`\u2020H.\n000032F0  86 F8 42 01 01 04 04 03 02 00 07 30 81 8E 06 03  \u2020\u00f8B........0.\u017d..\n00003300  55 1D 1F 04 81 86 30 81 83 30 81 80 A0 7E A0 7C  U....\u20200.\u01920.\u20ac ~ |\n00003310  A4 7A 30 78 31 0B 30 09 06 03 55 04 06 13 02 55  \u00a4z0x1.0...U....U\n00003320  53 31 23 30 21 06 03 55 04 5C 6E 13 1A 41 64 6F  S1#0!..U.\\n..Ado\n00003330  62 65 20 53 79 73 74 65 6D 73 20 49 6E 63 6F 72  be Systems Incor\n00003340  70 6F 72 61 74 65 64 31 1D 30 1B 06 03 55 04 0B  porated1.0...U..\n00003350  13 14 41 64 6F 62 65 20 54 72 75 73 74 20 53 65  ..Adobe Trust Se\n00003360  72 76 69 63 65 73 31 16 30 14 06 03 55 04 03 13  rvices1.0...U...\n00003370  5C 72 41 64 6F 62 65 20 52 6F 6F 74 20 43 41 31  \\rAdobe Root CA1\n00003380  5C 72 30 0B 06 03 55 04 03 13 04 43 52 5C 0D 4C  \\r0...U....CR\\.L\n00003390  31 30 2B 06 03 55 1D 10 04 24 30 22 80 0F 32 30  10+..U...$0\"\u20ac.20\n000033A0  30 33 30 31 30 38 32 33 33 37 32 33 5A 81 0F 32  030108233723Z..2\n000033B0  30 32 33 30 31 30 39 30 30 30 37 32 33 5A 30 0B  0230109000723Z0.\n000033C0  06 03 55 1D 0F 04 04 03 02 01 06 30 1F 06 03 55  ..U........0...U\n000033D0  1D 23 04 18 30 16 80 14 82 B7 38 4A 93 AA 9B 10  .#..0.\u20ac.\u201a\u00b78J\u201c\u00aa\u203a.\n000033E0  EF 80 BB D9 54 E2 F1 0F FB 80 9C DE 30 1D 06 03  \u00ef\u20ac\u00bb\u00d9T\u00e2\u00f1.\u00fb\u20ac\u0153\u00de0...\n000033F0  55 1D 0E 04 16 04 14 82 B7 38 4A 93 AA 9B 10 EF  U......\u201a\u00b78J\u201c\u00aa\u203a.\u00ef\n00003400  80 BB D9 54 E2 F1 0F FB 80 9C DE 30 0C 06 03 55  \u20ac\u00bb\u00d9T\u00e2\u00f1.\u00fb\u20ac\u0153\u00de0...U\n00003410  1D 13 04 05 30 03 01 01 FF 30 1D 06 09 2A 86 48  ....0...\u00ff0...*\u2020H\n00003420  86 F6 7D 07 41 00 04 10 30 0E 1B 08 56 36 2E 30  \u2020\u00f6}.A...0...V6.0\n00003430  3A 34 2E 30 03 02 04 90 30 5C 72 06 09 2A 86 48  :4.0....0\\r..*\u2020H\n00003440  86 F7 5C 72 01 01 05 05 00 03 82 01 01 00 32 DA  \u2020\u00f7\\r......\u201a...2\u00da\n00003450  9F 43 75 C1 FA 6F C9 6F DB AB 1D 36 37 3E BC 61  \u0178Cu\u00c1\u00fao\u00c9o\u00db\u00ab.67&gt;\u00bca\n00003460  19 36 B7 02 3C 1D 23 59 98 6C 9E EE 4D 85 E7 54  .6\u00b7.&lt;.#Y\u02dcl\u017e\u00eeM\u2026\u00e7T\n00003470  C8 20 1F A7 D4 BB E2 BF 00 77 7D 24 6B 70 2F 5C  \u00c8 .\u00a7\u00d4\u00bb\u00e2\u00bf.w}$kp/\\\n00003480  5C C1 3A 76 49 B5 D3 E0 23 84 2A 71 6A 22 5C 0D  \\\u00c1:vI\u00b5\u00d3\u00e0#\u201e*qj\"\\.\n00003490  F3 C1 27 5C 29 98 15 F6 35 90 E4 04 4C C3 8D BC  \u00f3\u00c1'\\)\u02dc.\u00f65.\u00e4.L\u00c3.\u00bc\n000034A0  9F 61 1C E7 FD 24 8C D1 44 43 8C 16 BA 9B 4D A5  \u0178a.\u00e7\u00fd$\u0152\u00d1DC\u0152.\u00ba\u203aM\u00a5\n000034B0  D4 35 2F BC 11 CE BD F7 51 37 8D 9F 90 E4 14 F1  \u00d45/\u00bc.\u00ce\u00bd\u00f7Q7.\u0178.\u00e4.\u00f1\n000034C0  18 3F BE E9 59 12 35 F9 33 92 F3 9E E0 D5 6B 9A  .?\u00be\u00e9Y.5\u00f93\u2019\u00f3\u017e\u00e0\u00d5k\u0161\n000034D0  71 9B 99 4B C8 71 C3 E1 B1 61 09 C4 E5 FA 91 F0  q\u203a\u2122K\u00c8q\u00c3\u00e1\u00b1a.\u00c4\u00e5\u00fa\u2018\u00f0\n000034E0  42 3A 37 7D 34 F9 72 E8 CD AA 62 1C 21 E9 D5 F4  B:7}4\u00f9r\u00e8\u00cd\u00aab.!\u00e9\u00d5\u00f4\n000034F0  82 10 E3 7B 05 B6 2D 68 56 0B 7E 7E 92 2C 6F 4D  \u201a.\u00e3{.\u00b6-hV.~~\u2019,oM\n00003500  72 82 0C ED 56 74 B2 9D B9 AB 2D 2B 1D 10 5F DB  r\u201a.\u00edVt\u00b2.\u00b9\u00ab-+.._\u00db\n00003510  27 75 70 8F FD 1D D7 E2 02 A0 79 E5 1C E5 FF AF  'up.\u00fd.\u00d7\u00e2. y\u00e5.\u00e5\u00ff\u00af\n00003520  64 40 51 2D 9E 9B 47 DB 42 A5 7C 1F C2 A6 48 B0  d@Q-\u017e\u203aG\u00dbB\u00a5|.\u00c2\u00a6H\u00b0\n00003530  D7 BE 92 69 4D A4 F6 5C 29 57 C5 78 11 18 DC 87  \u00d7\u00be\u2019iM\u00a4\u00f6\\)W\u00c5x..\u00dc\u2021\n00003540  51 CA 13 B2 62 9D 4F 2B 32 BD 31 A5 C1 FA 52 AB  Q\u00ca.\u00b2b.O+2\u00bd1\u00a5\u00c1\u00faR\u00ab\n00003550  05 88 C8                                         .\u02c6\u00c8\n</code></pre>\n\n<p>Here are two exmaples of what i mean with the appearing characters:\nLine 3 in the second dump: <code>5C 72</code> (<code>\\r</code>) instead of <code>0D</code> (<code>.</code>) in the first dump Line 2 in the second dump: <code>5C</code> (<code>\\</code>) instead of nothing in the frist dump</p>\n\n<p>So where is the problem or what did i wrong? Why are no <code>\\n</code> and <code>\\r</code> characters in the working exported Certificate file via Adobe Reader Interface, but in the \u00b4addressbook.acrodata\u00b4 or my read file?</p>\n"}, {"tags": ["c++", "regex", "replace"], "comments": [{"owner": {"reputation": 2037, "user_id": 6203078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-1kcK1F2_6WQ/AAAAAAAAAAI/AAAAAAAACqg/g1VhNXz_0qI/photo.jpg?sz=128", "display_name": "Ami Hollander", "link": "https://stackoverflow.com/users/6203078/ami-hollander"}, "edited": false, "score": 0, "creation_date": 1467835980, "post_id": 38232710, "comment_id": 63887507, "body": "You can use <code>for loop</code>, check if a letter is an underscore: if yes delete the underscore and swap to uppercase (dont forget to change the length of the string -1), otherwise continue to next char."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1467837729, "post_id": 38232710, "comment_id": 63888447, "body": "boost&#39;s regex_replace supports format_perl"}], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 3, "creation_date": 1467837358, "post_id": 38233068, "comment_id": 63888251, "body": "You probably meant something like <code>i = foo.find(&#39;_&#39;, i)</code> instead of <code>++i</code> (and initialization and beware that <code>std::string::npos + 1</code> overflows)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467837841, "post_id": 38233068, "comment_id": 63888511, "body": "Even with the correction from Zerges, this solution is O(n*m) (with m being the number of underscores) for no reason, this is a transformation that can be easily done inplace in a single pass."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1467838332, "post_id": 38233068, "comment_id": 63888728, "body": "@Zereges Ugh, I didn&#39;t type the <code>if</code>. Note the range on my loop, I won&#39;t ever remove a leading or trailing underscore."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467838379, "post_id": 38233068, "comment_id": 63888747, "body": "@MatteoItalia I would have thought this would run in <i>O(n)</i> time. What are you seeing that I don&#39;t?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1467838554, "post_id": 38233068, "comment_id": 63888835, "body": "Isn&#39;t <code>.erase</code> O(n)?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1467838890, "post_id": 38233068, "comment_id": 63889012, "body": "@melpomene Now that I look at it, I do believe that <a href=\"http://www.cplusplus.com/reference/string/basic_string/erase/#complexity\" rel=\"nofollow noreferrer\">you are correct</a>. We could certainly do this by copying... not my first inclination but I suppose it&#39;s doable."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467839038, "post_id": 38233068, "comment_id": 63889093, "body": "@JonathanMee: yep, <code>.erase</code> - almost any time you have an <code>erase</code> of a vector or a string in a loop (unless it&#39;s at the end) it can be written more efficiently. As almost always happen, this can be written via the usual read pointer/write pointer loop (see @Aconcagua&#39;s second answer)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1467839097, "post_id": 38233068, "comment_id": 63889129, "body": "Now you have <code>std::toupper(static_cast&lt;unsigned char&gt;(foo[i]))</code> problems."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467839427, "post_id": 38233068, "comment_id": 63889298, "body": "Now you are never incrementing <code>write</code>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467840043, "post_id": 38233068, "comment_id": 63889587, "body": "@MatteoItalia Ugh well that was just one debacle after another. Thanks for the help."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467840152, "post_id": 38233068, "comment_id": 63889639, "body": "@JonathanMee: still broken <code>asd_def_ghi</code> =&gt; <code>ad_Df_Gi</code>. Also, how you set it up it wouldn&#39;t handle consecutive underscores."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1467840175, "post_id": 38233068, "comment_id": 63889647, "body": "@melpomene I don&#39;t think that was a problem. It was intentional: <a href=\"http://stackoverflow.com/q/21805674/2642059\">stackoverflow.com/q/21805674/2642059</a> But then I keep making mistakes on this answer... so who knows if I did it right."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467842155, "post_id": 38233068, "comment_id": 63890503, "body": "@MatteoItalia Whew, now I know why Aconcagua switched to a <code>char*</code> for replacement. That was more complicated than I expected."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467843217, "post_id": 38233068, "comment_id": 63890952, "body": "@JonathanMee: not really, you can use indexes or pointers, it&#39;s mostly the same. You just have to implement the basic algorithm correctly (which is mostly the same that is implemented by <code>std::remove</code>, for example)."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": -1, "last_activity_date": 1467841980, "last_edit_date": 1491982277, "creation_date": 1467836466, "answer_id": 38233068, "question_id": 38232710, "link": "https://stackoverflow.com/questions/38232710/how-to-uppercase-match-in-c-regex-replace/38233068#38233068", "title": "How to uppercase match in C++ regex_replace?", "body": "<p>Regexes should be used sparingly, see <a href=\"https://softwareengineering.stackexchange.com/q/223634/98845\">\"Now you Have 2 Problems</a></p>\n\n<p>This is a good example of a case where they are not needed. Given <code>auto foo = \"my_simple_humble_string\"s</code> we can do:</p>\n\n<pre><code>auto count = 0;\n\nfor (auto read = 1; read &lt; size(foo); ++read) {\n    if (foo[read] == '_') {\n        ++count;\n        ++read;\n        foo[read - count] = toupper(static_cast&lt;unsigned char&gt;(foo[read]));\n    } else {\n        foo[read - count] = foo[read];\n    }\n}\nfoo[size(foo) - count] = foo[size(foo)];\nfoo.resize(size(foo) - count);\n</code></pre>\n\n<p><a href=\"http://ideone.com/qOHn8K\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n\n<p>A couple notes on the algorithm:</p>\n\n<ol>\n<li>I will read from <code>foo[size(foo)]</code> which is undefined behavior prior to C++11: <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_at\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/string/basic_string/operator_at</a></li>\n<li>I will not replace opening or closing underscores</li>\n<li>I resize the string to match the length of the camel case string after converting which will invalidate iterators.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1467839158, "post_id": 38233363, "comment_id": 63889157, "body": "Upvoted, but in the first solution you should don&#39;t need the <code>std::stringstream</code> - it&#39;s only there to slow down your code. An <code>std::string</code> and <code>+=</code> instead of <code>&lt;&lt;</code> will do."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1467884134, "post_id": 38233363, "comment_id": 63905102, "body": "@MatteoItalia Updated - including reserving appropriate buffer size in advance..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1467884400, "last_edit_date": 1467884400, "creation_date": 1467837494, "answer_id": 38233363, "question_id": 38232710, "link": "https://stackoverflow.com/questions/38232710/how-to-uppercase-match-in-c-regex-replace/38233363#38233363", "title": "How to uppercase match in C++ regex_replace?", "body": "<p>According to <a href=\"http://www.regular-expressions.info/refreplacecase.html\" rel=\"nofollow\">this site</a>, it is not supported. Could not find any other hints contradicting...</p>\n\n<p>On the other hand, it is not too difficult to do it by hand:\n</p>\n\n<pre><code>std::string camelCase(std::string const&amp; input)\n{\n    std::string s;\n    s.reserve(input.length());\n    bool isMakeUpper = false;\n    for(char c : input)\n    {\n        if(c == '_')\n        {\n            isMakeUpper = true;\n        }\n        else if(isMakeUpper)\n        {\n            s += (char)toupper(c);\n            isMakeUpper = false;\n        }\n        else\n        {\n            s += c;\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p><strong>Edit:</strong> in-place variant:\n</p>\n\n<pre><code>void camelCase(char* input)\n{\n    bool isMakeUpper = false;\n    char* pos = input;\n    for(char* c = input; *c; ++c)\n    {\n        if(*c == '_')\n        {\n            isMakeUpper = true;\n        }\n        else if(isMakeUpper)\n        {\n            *pos++ = toupper(*c);\n            isMakeUpper = false;\n        }\n        else\n        {\n            *pos++ = *c;\n        }\n    }\n    *pos = 0;\n}\n</code></pre>\n\n<p><strong>Edit 2:</strong> in-place variant for strings:</p>\n\n<pre><code>void camelCase(std::string&amp; input)\n{\n    bool isMakeUpper = false;\n    std::string::iterator pos = input.begin();\n    for(char c : input)\n    {\n        if(c == '_')\n        {\n            isMakeUpper = true;\n        }\n        else if(isMakeUpper)\n        {\n            *pos++ = (char)toupper(c);\n            isMakeUpper = false;\n        }\n        else\n        {\n            *pos++ = c;\n        }\n    }\n    input.resize(pos - input.begin());\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5717404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152b9e6f72292a62942c25a243cea48c?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5717404/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1467884400, "creation_date": 1467835069, "question_id": 38232710, "link": "https://stackoverflow.com/questions/38232710/how-to-uppercase-match-in-c-regex-replace", "title": "How to uppercase match in C++ regex_replace?", "body": "<p>I am looking for a simple way to turn C++ strings with underscores to camelCase, i.e.:\nmy_simple_humble_string\nto\nmySimpleHumbleString</p>\n\n<p>Easy in Perl. I prefer not to use boost.</p>\n"}, {"tags": ["c++", "c++11", "move", "condition-variable"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467834901, "post_id": 38232576, "comment_id": 63886959, "body": "Possibly it would have been too burdensome to make it thread safe.  You would not want a notify to happen during a move of the variable."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467835071, "post_id": 38232576, "comment_id": 63887048, "body": "@NathanOliver Aren&#39;t all functions in the interface of a <code>condition_variable</code> thread safe anyway?  I&#39;m just thinking about why that should have been a problem"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467835679, "post_id": 38232576, "comment_id": 63887358, "body": "I think it just does not make any sense. Consider a case where a condition variable is in wait state and another thread copied it. What should be the state of the copied condition variable ? If you say it should be like in its default constructed state then again copying really made no sense. Also, it depends on whether the native condition variable structure (used inside <code>std::condition_variable</code>) say <code>pthread_cond_t</code> is allowed to be copied without invoking UB or not."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467835687, "post_id": 38232576, "comment_id": 63887363, "body": "A <code>std::condition_variable</code> is not CopyConstructible, MoveConstructible, CopyAssignable, MoveAssignable. Are you particularly interested in knowing why it is not MoveAssignable, or do you want to know &quot;why&quot; for all of those traits?"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 4, "creation_date": 1467837668, "post_id": 38232576, "comment_id": 63888414, "body": "It is a synchronization construct that multiple threads are (potentially) using simultaneously.  How could you move it safely?  E.g., suppose it directly contains a spinlock.  Some thread is spinning on a given <i>address in your process address space</i> and you&#39;re going to move it out from under it?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 3, "creation_date": 1467865347, "post_id": 38232576, "comment_id": 63896133, "body": "<code>condition_variable</code> was born here: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2406.html#condition\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2007/&hellip;</a>  It is not an easy read, but is fairly complete. It refers to <code>condition_variable</code> as <code>cond_var</code>. This is nothing but a rename that happened during standardization. &quot;Born here&quot; is an exaggeration. <code>condition_variable</code> is the product of existing practice over decades prior to C++11. There was a deliberate decision to not be inventive because this is a very tricky and low-level API. <code>condition_variable_any</code> is an example of a higher-level API that can be built on top of the lower API."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1467865788, "post_id": 38232576, "comment_id": 63896223, "body": "Most of the things Jonathan Wakely wrote in <a href=\"http://stackoverflow.com/a/14304618/2756719\">this answer</a> about <code>std::mutex</code> apply mutatis mutandis to <code>condition_variable</code> too."}], "answers": [{"tags": [], "owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "is_accepted": false, "score": 6, "last_activity_date": 1467864075, "last_edit_date": 1467864075, "creation_date": 1467845709, "answer_id": 38235111, "question_id": 38232576, "link": "https://stackoverflow.com/questions/38232576/why-is-a-condition-variable-not-moveassignable/38235111#38235111", "title": "Why is a condition_variable not MoveAssignable", "body": "<p><code>condition_variable</code> is a synchronization construct that multiple threads are (potentially) using simultaneously. (In fact, that's its purpose.) How could you move it safely? E.g., suppose it directly contains a spinlock. Some thread is spinning on a given address in your process address space and you're going to move the object out from under it?</p>\n\n<p>Any kind of user-mode synchronization construct can't be moved.  The thing that does the actual synchronization needs a fixed address.  You could force the object to do all of its real work on a heap-allocated object that wouldn't be moved - and there you go right to the indirection to the heap that you wanted to avoid.  (Kernel-mode synchronization constructs can be moved:  you've got a handle to some OS thing.  But they're much more expensive to <em>use</em>.)</p>\n\n<p>They can't be copied either - because what would that mean?</p>\n\n<p>It just has to be this way.  Your design must account for it, that's all.</p>\n\n<p>(And I don't really understand the second paragraph of your question.  <code>make_shared</code> was built to make ref counts less expensive and don't have anything to do with moving stuff around.  A pool allocator may or may not improve any particular situation, much less this one, and you won't know unless you measure it.)</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1467864075, "creation_date": 1467834543, "question_id": 38232576, "link": "https://stackoverflow.com/questions/38232576/why-is-a-condition-variable-not-moveassignable", "title": "Why is a condition_variable not MoveAssignable", "body": "<p>Why is a <code>condition_variable</code> not MoveConstructible (as per <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/thread/condition_variable</a>)?  That prohibits inclusion in lots of containers (eg. <code>std::unordered_map</code>) that move things around. </p>\n\n<p>This forces people to use a <code>unique_ptr</code> which incurs one extra heap allocation, which things like <code>make_shared</code> were built to solve.  Also if one doesn't have a pool allocator this can become quite inefficient.</p>\n"}, {"tags": ["c++", "overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1467834486, "post_id": 38232496, "comment_id": 63886726, "body": "<code>in &gt;&gt; c1;</code> simply calls your operator function definition recursively until stack is exhausted."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467835179, "post_id": 38232563, "comment_id": 63887100, "body": "I&#39;d prefer encapsulation for parsing the private data. It should probably be done with a <code>private</code> class member function."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467835459, "post_id": 38232563, "comment_id": 63887254, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 No arguments here, +1."}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 7, "last_activity_date": 1467835360, "last_edit_date": 1467835360, "creation_date": 1467834484, "answer_id": 38232563, "question_id": 38232496, "link": "https://stackoverflow.com/questions/38232496/c-ifstream-and-ofstream-overloading-operator-reading-from-file/38232563#38232563", "title": "C++ ifstream and ofstream overloading operator reading from file", "body": "<pre><code>friend ifstream&amp; operator &gt;&gt; (ifstream&amp; in, Complex &amp;c1)\n{\n    in &gt;&gt; c1; // This is calling this function infinitely!!\n\n    return in;\n}\n</code></pre>\n\n<p>The above code implements the <code>operator&gt;&gt;</code> for the <code>Complex</code> type. However, it is a recursive function with no stopping condition.</p>\n\n<p>You probably should be do something similar to the following. <strong>Obviously, I don't know how the class was encoded so this is just for illustration.</strong></p>\n\n<pre><code>friend ifstream&amp; operator &gt;&gt; (ifstream&amp; in, Complex &amp;c1)\n{\n    double real;\n    in &gt;&gt; real;\n    c1.setReal(real);\n\n    double imaginary;\n    in &gt;&gt; imaginary;\n    c1.setImaginary(imaginary);\n\n    return in;\n}\n</code></pre>\n\n<hr>\n\n<p>I overlooked that it's a friend function so this could also work.</p>\n\n<pre><code>friend ifstream&amp; operator &gt;&gt; (ifstream&amp; in, Complex &amp;c1)\n{\n    in &gt;&gt; c1.real;\n    in &gt;&gt; c1.imaginary;\n\n    return in;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1467835033, "creation_date": 1467835033, "answer_id": 38232700, "question_id": 38232496, "link": "https://stackoverflow.com/questions/38232496/c-ifstream-and-ofstream-overloading-operator-reading-from-file/38232700#38232700", "title": "C++ ifstream and ofstream overloading operator reading from file", "body": "<p>As mentioned in my comment, and in the other answer the <code>operator&gt;&gt;()</code> overload is just called recursively.</p>\n\n<hr>\n\n<p>One of the most common approaches to fix that, is to declare a <code>put()</code> function in your <code>Complex</code> class like:</p>\n\n<pre><code> class Complex {\n public:\n     // ...\n private:\n     double real;\n     double imaginary;\n     istream&amp; put(std::istream&amp; is) {\n         is &gt;&gt; real;\n         is &gt;&gt; imaginary;\n         return is;\n     }\n };\n</code></pre>\n\n<p>And let the global overload call that function:</p>\n\n<pre><code>friend ifstream&amp; operator &gt;&gt; (ifstream&amp; in, Complex &amp;c1) {\n    return c1.put(in);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4699862"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8364, "favorite_count": 0, "accepted_answer_id": 38232563, "answer_count": 2, "score": 1, "last_activity_date": 1467835360, "creation_date": 1467834239, "question_id": 38232496, "link": "https://stackoverflow.com/questions/38232496/c-ifstream-and-ofstream-overloading-operator-reading-from-file", "title": "C++ ifstream and ofstream overloading operator reading from file", "body": "<p>Hey guys I am trying to overload ifstream and ofstream but without any success.</p>\n\n<p>Header File:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nclass Complex\n{\n    private:\n        double real;\n        double imaginary;\n    public:\n        //constructors\n        Complex();\n        Complex(double newreal, double newimaginary);\n        ~Complex();\n        //setter\n        void setReal(double newreal);\n        void setImaginary(double newimaginary);\n        //getter\n        double getReal();\n        double getImaginary();\n        //print\n        void print();\n        //methods\n        Complex conjugate();\n        Complex add(Complex c2);\n        Complex subtraction(Complex c2);\n        Complex division(Complex c2);\n        Complex multiplication(Complex c2);\n\nfriend ifstream&amp; operator &gt;&gt; (ifstream&amp; in, Complex &amp;c1)\n{\n\n    in &gt;&gt; c1;\n\n    return in;\n}\n\n};\n</code></pre>\n\n<p>Test file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"Complex2.h\"\n\nusing namespace std;\n\nint main()\n{\n    Complex c1;\n\n    ifstream infile; \n    infile.open(\"in1.txt\"); \n\n    cout &lt;&lt; \"Reading from the file\" &lt;&lt; endl; \n    infile &gt;&gt; c1;\n\n    // write the data at the screen.\n    infile.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I didnt think the cpp file was important since the header file includes the ifstream.</p>\n\n<p>Everytime I run this program i get this error:</p>\n\n<pre><code>Reading from the file\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>I dont know how to fix it.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "qt", "c++11", "cross-compiling", "raspberry-pi2"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1467834231, "post_id": 38232461, "comment_id": 63886578, "body": "And what compiler are you using? Which version of it?"}, {"owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "edited": false, "score": 0, "creation_date": 1467835692, "post_id": 38232461, "comment_id": 63887366, "body": "are you really using qt5.6 or have you just downloaded the most recent one, qt5.7? Imho, qt5.6 doesn&#39;t use c++11 language features, while qt5.7 does. So if you really have a compiler that doesn&#39;t support c++11, I&#39;d stay with qt5.6"}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "edited": false, "score": 0, "creation_date": 1491911902, "post_id": 38232461, "comment_id": 73753575, "body": "Same problem, when using Qt 5.7. The compiler is the one suggested on the site linked in the question: <a href=\"https://github.com/raspberrypi/tools\" rel=\"nofollow noreferrer\">github.com/raspberrypi/tools</a> .  There are 5 compilers in that package, and the tutorial recommends <code>gcc-linaro-arm-linux-gnueabihf-raspbian</code>"}], "owner": {"reputation": 322, "user_id": 5040060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UocsC.jpg?s=128&g=1", "display_name": "Mohamadreza Rostami", "link": "https://stackoverflow.com/users/5040060/mohamadreza-rostami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1306, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1467911199, "creation_date": 1467834139, "last_edit_date": 1467911199, "question_id": 38232461, "link": "https://stackoverflow.com/questions/38232461/cannot-cross-compile-qt-5-7-for-raspberry-pi-because-it-requires-a-c11-compil", "title": "Cannot cross-compile Qt 5.7 for Raspberry PI because it &quot;requires a C++11 compiler&quot;", "body": "<p>I want to cross compile qt5 on RPi2 according to this <a href=\"http://wiki.qt.io/RaspberryPi2EGLFS\" rel=\"nofollow\">RaspberryPi2EGLFS</a> when I want to configure in step7 I see this error and I don't have any idea how to solve it.</p>\n\n<pre><code>.\n.\ncollect2: error: ld returned 1 exit status\nMakefile:91: recipe for target 'c++11' failed\nmake: *** [c++11] Error 1\nC++11 disabled.\nERROR: Qt requires a C++11 compiler and yours does not seem to be that.\nPlease upgrade.\n</code></pre>\n\n<p>I use antergos x64.</p>\n"}, {"tags": ["c++", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 4, "creation_date": 1467833945, "post_id": 38232386, "comment_id": 63886411, "body": "Yes, it&#39;s bad to use macros instead of function templates."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1467833988, "post_id": 38232386, "comment_id": 63886430, "body": "This code is pointless.  Every time you call it you will have a new <code>firstPass</code> due to scoping rules."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1467834081, "post_id": 38232386, "comment_id": 63886483, "body": "Your misunderstanding seems to be with the macro contents (specifically the block, <code>{...}</code>) rather than the macro itself. That is, if you manually copy and paste the macro contents like you say, you have the same issue without any macros involved."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467835105, "post_id": 38232553, "comment_id": 63887059, "body": "Funny; I&#39;d say it works exactly as intended.  The first time each <code>TESTING</code> invocation is invoked, it reports that it is run \u2014 and not thereafter.  But then the question becomes &quot;what is the intended behaviour&quot;.  We&#39;re both correct (for our assumptions about what is intended); they&#39;re just different interpretations or assumptions about what is intended."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1467835572, "post_id": 38232553, "comment_id": 63887316, "body": "Ahhhh, I hadn&#39;t thought about the intent being to only report the first time through any particular call site."}], "tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": true, "score": 8, "last_activity_date": 1467898857, "last_edit_date": 1467898857, "creation_date": 1467834445, "answer_id": 38232553, "question_id": 38232386, "link": "https://stackoverflow.com/questions/38232386/static-variables-inside-macros/38232553#38232553", "title": "Static variables inside macros", "body": "<p>This macro cannot work as intended. The key to why the compiler allows it is the <code>{ }</code> surrounding the <code>static bool firstPass</code>. That creates a new scope, which allows the new variable to hide any other variable by that name. When that scope ends, the static is no longer visible.</p>\n\n<p>Because of the new scopes, this is legal:</p>\n\n<pre><code>void f()\n{\n    int i = 0;\n    {\n        int i = 1;\n        {\n            int i = 2;\n        }\n    }\n}\n</code></pre>\n\n<p>This would work the way it was intended, by moving firstPass out of the macro.</p>\n\n<pre><code>static bool firstPass = true;\n#define TESTING(input)                           \\\n{                                                \\\n   if (firstPass) {                              \\\n     std::cout &lt;&lt; input;                         \\\n     firstPass = false;                          \\\n   }                                             \\\n}\n</code></pre>\n\n<p><strong>ETA</strong>: Or maybe it does work as intended. With the static bool inside the macro, each call site will print its output exactly once, because each call site has its own instance of the firstPass flag. With the static bool outside the macro only the first call site to be reached will report it's output and only the first time it's reached.</p>\n\n<p>So with the static bool inside the macro,</p>\n\n<pre><code>f()\n{\n    for ( int i = 0; i &lt; 1000; ++i )\n    {\n         TESTING( \"A\\n\" );\n         TESTING( \"B\\n\" );\n         TESTING( \"C\\n\" );\n    }\n}\n\nint main()\n{\n    for ( int i = 0; i &lt; 5; ++i ) \n        f();\n    return 0;\n}\n</code></pre>\n\n<p>will print</p>\n\n<pre><code>A\nB\nC\n</code></pre>\n\n<p>but with the static bool outside the macro, it will print only</p>\n\n<pre><code>A\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4561927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2507046577f85183d810cc8ff9c1558?s=128&d=identicon&r=PG&f=1", "display_name": "bobbay", "link": "https://stackoverflow.com/users/4561927/bobbay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1796, "favorite_count": 0, "accepted_answer_id": 38232553, "answer_count": 1, "score": 2, "last_activity_date": 1467898857, "creation_date": 1467833897, "last_edit_date": 1467834493, "question_id": 38232386, "link": "https://stackoverflow.com/questions/38232386/static-variables-inside-macros", "title": "Static variables inside macros", "body": "<p>I'm looking at some code and think the whole logic doesn't make sense here. It seem quite poor to have a macro like this. \nAs an example, I use this macro twice and I get both strings to output. </p>\n\n<pre><code>TESTING(\"hello\");\nTESTING(\"world\");\n</code></pre>\n\n<ol>\n<li><p>The preprocessor simply replaces the identifier with the block of code, it is the same as copy/pasting the code, so shouldn't the compiler give a redefinition error for firstPass, if using this macro multiple times? (If you manually paste in <code>main</code>, <code>static bool firstPass = true;</code> multiple times, the compiler will give an error.) </p></li>\n<li><p>If <code>firstPass</code> is <code>static</code>, it is created and initialized only once. So using this macro multiple times, shouldn't produce any results (besides the first use) since the flag was set to <code>false</code>, yet it still does <code>cout</code> every time. </p></li>\n</ol>\n\n<p>A bit confused. </p>\n\n<pre><code>#define TESTING(input)                           \\\n{                                                \\\n   static bool firstPass = true;                 \\\n   if (firstPass) {                              \\\n     std::cout &lt;&lt; input;                         \\\n     firstPass = false;                          \\\n   }                                             \\\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-fusion"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1467835759, "last_edit_date": 1467835759, "creation_date": 1467835361, "answer_id": 38232779, "question_id": 38232329, "link": "https://stackoverflow.com/questions/38232329/boost-fusion-transform-type-manipulation-and-as-vector/38232779#38232779", "title": "Boost Fusion transform type manipulation and as_vector", "body": "<p>The problem with template metaprogramming is that when you fail to meet the preconditions of a metafunction, you get lots of meaningless errors. The requirement on <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/fusion/doc/html/fusion/algorithm/transformation/metafunctions/transform.html\" rel=\"noreferrer\"><code>transform</code></a> is that <code>F</code> is a unary <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/fusion/doc/html/fusion/functional/concepts/poly.html\" rel=\"noreferrer\">Polymorphic Function Object</a>. The explanation of what that is in the documentation is a little weak, but you can tell from the examples: this is an object that you can <em>call</em> with arguments. That is, <code>result_of&lt;F(T)&gt;::type</code> needs to be well-formed. </p>\n\n<p>What you're passing to <code>transform</code> is:</p>\n\n<pre><code>struct S_f {\n    template&lt; typename T &gt;\n    struct result {\n        typedef typename T::type type;\n    };\n};\n</code></pre>\n\n<p>That is not a Polymorphic Function Object. Nor is it a metafunction class. This is not something that either Boost.Fusion nor Boost.MPL would be able to understand. Where this is particularly confusing is that the <code>transform&lt;&gt;</code> metafunction is <em>lazy</em> - so it looks like you did that part correctly. It's only in <code>as_vector&lt;&gt;</code> that the transformation is actually applied, so it looks like that's where the point of failure is.</p>\n\n<p>To convert it to a Polymorphic Function Object, just change the nested <code>result</code> class template into a call operator:</p>\n\n<pre><code>struct S_f {\n    template&lt; typename T &gt;\n    typename T::type operator()(T );\n};\n</code></pre>\n\n<p>No definition necessary, since you're not actually calling it. With that fix, your code compiles. </p>\n"}], "owner": {"reputation": 349, "user_id": 5480913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf6b4304ec7a85cdb5942b00d76893e6?s=128&d=identicon&r=PG&f=1", "display_name": "Engineerist", "link": "https://stackoverflow.com/users/5480913/engineerist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 38232779, "answer_count": 1, "score": 4, "last_activity_date": 1467836145, "creation_date": 1467833641, "last_edit_date": 1467836145, "question_id": 38232329, "link": "https://stackoverflow.com/questions/38232329/boost-fusion-transform-type-manipulation-and-as-vector", "title": "Boost Fusion transform type manipulation and as_vector", "body": "<p>I am trying to get the point of using Fusion and am stumped with this simple example:</p>\n\n<pre><code>#include &lt;boost/fusion/include/is_sequence.hpp&gt;\n#include &lt;boost/fusion/include/as_vector.hpp&gt;\n#include &lt;boost/fusion/include/make_vector.hpp&gt;\n#include &lt;boost/fusion/include/transform.hpp&gt;\n\ntemplate&lt; typename T &gt;\nstruct S {\n    typedef T type;\n};\n\nstruct S_f {\n    template&lt; typename T &gt;\n    struct result {\n        typedef typename T::type type;\n    };\n};\n\nint main () {\n    using namespace boost;\n    typedef fusion::vector&lt;S&lt;int&gt;&gt; from_type;\n    BOOST_MPL_ASSERT((fusion::traits::is_sequence&lt; fusion::vector&lt; int &gt; &gt; ));\n\n    typedef fusion::result_of::transform&lt; from_type, S_f &gt;::type to_type;\n    BOOST_MPL_ASSERT((fusion::traits::is_sequence&lt; to_type &gt; ));\n\n    typedef fusion::result_of::as_vector&lt; to_type &gt;::type value_type; // error\n}\n</code></pre>\n\n<p>The asserts pass but the typedef for value_type fails with the error below. I could not fund any discrepancy between the code and the docs and no remedy elsewhere on stackoverflow or boost mailing lists. </p>\n\n<p>AFAICT the code is correct: the result of applying the transform metafunction is a transform_view and a transform_view is a sequence, as shown by the passing asserts. Yet, the application of as_vector metafunction on the transform_view fails. What gives?!</p>\n\n<p>Any help is appreciated. I am NOT interested in mixing mpl in. I know I can take a detour through MPL and a few fusion questions on SO that ask about type manipulation have answers that advocate MPL. According to the docs, I wouldn't need MPL.</p>\n\n<pre><code>clang++ -std=c++1z -c t.cpp\nIn file included from main.cpp:4:\nIn file included from /usr/local/include/boost/fusion/include/transform.hpp:11:\nIn file included from /usr/local/include/boost/fusion/algorithm/transformation/transform.hpp:11:\nIn file included from /usr/local/include/boost/fusion/view/transform_view/transform_view.hpp:15:\nIn file included from /usr/local/include/boost/fusion/view/transform_view/transform_view_iterator.hpp:18:\n/usr/local/include/boost/fusion/view/transform_view/detail/value_of_impl.hpp:37:74: error: no type named 'type' in 'boost::mpl::apply&lt;boost::fusion::detail::apply_transform_result&lt;S_f&gt;, S&lt;int&gt;, mpl_::na, mpl_::na, mpl_::na, mpl_::na&gt;'\n                typedef typename mpl::apply&lt;transform_type, value_type&gt;::type type;\n                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~\n/usr/local/include/boost/fusion/iterator/value_of.hpp:52:15: note: in instantiation of template class 'boost::fusion::extension::value_of_impl&lt;boost::fusion::transform_view_iterator_tag&gt;::apply&lt;boost::fusion::transform_view_iterator&lt;boost::fusion::vector_iterator&lt;boost::fusion::vector&lt;S&lt;int&gt;, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_&gt;, 0&gt;, S_f&gt; &gt;' requested here\n            : extension::value_of_impl&lt;typename detail::tag_of&lt;Iterator&gt;::type&gt;::\n              ^\n/usr/local/include/boost/fusion/container/vector/detail/cpp03/preprocessed/as_vector10.hpp:19:49: note: in instantiation of template class 'boost::fusion::result_of::value_of&lt;boost::fusion::transform_view_iterator&lt;boost::fusion::vector_iterator&lt;boost::fusion::vector&lt;S&lt;int&gt;, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_&gt;, 0&gt;, S_f&gt; &gt;' requested here\n            typedef typename fusion::result_of::value_of&lt;I0&gt;::type T0;\n                                                ^\n/usr/local/include/boost/fusion/container/vector/convert.hpp:26:17: note: in instantiation of template class 'boost::fusion::detail::barrier::as_vector&lt;1&gt;::apply&lt;boost::fusion::transform_view_iterator&lt;boost::fusion::vector_iterator&lt;boost::fusion::vector&lt;S&lt;int&gt;, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_&gt;, 0&gt;, S_f&gt; &gt;' requested here\n                template apply&lt;typename result_of::begin&lt;Sequence&gt;::type&gt;::type\n                ^\nmain.cpp:26:32: note: in instantiation of template class 'boost::fusion::result_of::as_vector&lt;boost::fusion::transform_view&lt;boost::fusion::vector&lt;S&lt;int&gt;, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_&gt;, S_f, boost::fusion::void_&gt; &gt;' requested here\n    typedef fusion::result_of::as_vector&lt; to_type &gt;::type value_type; // error\n                               ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++", "qt", "qprocess"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1467833458, "post_id": 38232236, "comment_id": 63886160, "body": "What&#39;s wrong with the <a href=\"http://doc.qt.io/qt-5/qprocess.html#waitForFinished\" rel=\"nofollow noreferrer\"><code>waitForFinished</code></a> function or the <a href=\"http://doc.qt.io/qt-5/qprocess.html#finished\" rel=\"nofollow noreferrer\"><code>finished</code></a> signal which notifies as soon as it&#39;s finished?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467834885, "post_id": 38232236, "comment_id": 63886953, "body": "@JamesAdkison The two suggestions don&#39;t belong in the same sentence. <code>waitForFinished</code> is a blocking method that makes the UI unresponsive. It&#39;s not meant to be used in an interactive thread."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1467835134, "post_id": 38232236, "comment_id": 63887078, "body": "@KubaOber I don&#39;t follow your comment. The first (before <i>or</i>) is a blocking function and the second (after <i>or</i>) is a non-blocking solution which uses the Qt signal-slot mechanism."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467835558, "post_id": 38232236, "comment_id": 63887307, "body": "@JamesAdkison Suggesting to use either the <code>waitForFinished</code> method or the <code>finished</code> signal is like saying &quot;Have an apple. Or a stratofortress.&quot;. There are very, very few cases where a <code>waitFor</code> method is ever appropriate. Most people who try to use it in a SO question (or answer) shouldn&#39;t be."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1467835787, "post_id": 38232236, "comment_id": 63887403, "body": "@KubaOber Okay, I understand your point. To be clear, I&#39;m not asserting it&#39;s appropriate for their use case (which definitely <i>appears</i> that <code>shutdown</code> is executed in context of the main thread). I&#39;m essentially asking &quot;Why doesn&#39;t this (blocking solution) or (non-blocking solution) work for you?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6557761, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1118033301600798/picture?type=large", "display_name": "Micha\u0142 Urban", "link": "https://stackoverflow.com/users/6557761/micha%c5%82-urban"}, "edited": false, "score": 0, "creation_date": 1467903571, "post_id": 38233138, "comment_id": 63918924, "body": "when I want to use this <a href=\"http://txt.wklej.se/37d7\" rel=\"nofollow noreferrer\">txt.wklej.se/37d7</a> I get an error passing &#39;const QMessageBox&#39; as &#39;this&#39; argument of &#39;void QWidget::show()&#39; discards qualifiers [-fpermissive]"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 5, "user_id": 6557761, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1118033301600798/picture?type=large", "display_name": "Micha\u0142 Urban", "link": "https://stackoverflow.com/users/6557761/micha%c5%82-urban"}, "edited": false, "score": 0, "creation_date": 1467905676, "post_id": 38233138, "comment_id": 63920424, "body": "@Micha\u0142Urban You need to understand what the code means, you can&#39;t just copy-paste and expect it to work by chance. Your code won&#39;t work for two reasons: 1. The message box will get destructed as soon as the <code>shutdown</code> method returns, and 2. You can&#39;t capture a <code>QObject</code> instance by value in the lambda. In the answer, the capture-by-value applies to <code>this</code> pointer, as that&#39;s the only variable that the lambda is capturing. You could use <code>std::bind(&amp;QMessageBox::show, m_box)</code> if it made it more obvious for you. There are important differences between the code I show in the answer and your paste."}, {"owner": {"reputation": 576, "user_id": 2544747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ieYwd.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2544747/andrew"}, "edited": false, "score": 0, "creation_date": 1467915724, "post_id": 38233138, "comment_id": 63926357, "body": "Note that I would attach to finished, but you can also ask the process its state if for some reason you want to busy wait. <a href=\"http://doc.qt.io/qt-5/qprocess.html#state\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qprocess.html#state</a>"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1467836738, "creation_date": 1467836738, "answer_id": 38233138, "question_id": 38232236, "link": "https://stackoverflow.com/questions/38232236/checking-whether-qprocess-has-finished/38233138#38233138", "title": "Checking whether qprocess has finished", "body": "<p>You should connect to the process's <code>finished</code> signal. Your code will get invoked whenever the process finishes. E.g.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/process-finished-msg-38232236\n#include &lt;QtWidgets&gt;\n\nclass Window : public QWidget {\n   QVBoxLayout m_layout{this};\n   QPushButton m_button{tr(\"Sleep\")};\n   QMessageBox m_box{QMessageBox::Information,\n            tr(\"Wakey-wakey\"),\n            tr(\"A process is done sleeping.\"),\n            QMessageBox::Ok, this};\n   QProcess m_process;\npublic:\n   Window() {\n      m_layout.addWidget(&amp;m_button);\n      m_process.setProgram(\"sleep\");\n      m_process.setArguments({\"5\"});\n      connect(&amp;m_button, &amp;QPushButton::clicked, &amp;m_process, [=]{ m_process.start(); });\n      connect(&amp;m_process, (void(QProcess::*)(int))&amp;QProcess::finished, [=]{ m_box.show(); });\n   }\n};\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n   Window window;\n   window.show();\n   return app.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6557761, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1118033301600798/picture?type=large", "display_name": "Micha\u0142 Urban", "link": "https://stackoverflow.com/users/6557761/micha%c5%82-urban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467836738, "creation_date": 1467833249, "last_edit_date": 1467833314, "question_id": 38232236, "link": "https://stackoverflow.com/questions/38232236/checking-whether-qprocess-has-finished", "title": "Checking whether qprocess has finished", "body": "<p>I have to check whether my process has finished and I need to convert it to bool because I want to you if.<br>\nIn MainWindow.h I have created an object<br></p>\n\n<pre><code>QProcess *action;\n</code></pre>\n\n<p>In mainwindow.cpp</p>\n\n<pre><code>void MainWindow:: shutdown()\n{\naction=new QProcess(this);\naction-&gt;start(\"shutdown -s -t 600\");\n//and now I want to use if\nif (action has finished)\n{\n  QMessageBox msgBox;\n  msgBox.setText(\"Your computer will shutdown in 1 minute.\");\n  msgBox.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 90923, "user_id": 383609, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/64555e5f0e0ee1ecbf3eaaf0dc137328?s=128&d=identicon&r=PG", "display_name": "Bojangles", "link": "https://stackoverflow.com/users/383609/bojangles"}, "edited": false, "score": 0, "creation_date": 1467833378, "post_id": 38232149, "comment_id": 63886114, "body": "It would be best to show what attempts you&#39;ve made at solving this problem on your own, but since it looks like you haven&#39;t, here&#39;s a hint: the error is on this line: <code>[highlight color=\u201dyellow\u201d]-lbgi -lgdi32 -lcomdlg32 -luuid -loleaut32 -lole32[&#47;highlight] &quot;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\libbgi.a&quot;</code>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "is_accepted": false, "score": 0, "last_activity_date": 1468276945, "last_edit_date": 1468276945, "creation_date": 1467835606, "answer_id": 38232844, "question_id": 38232149, "link": "https://stackoverflow.com/questions/38232149/codeblocks-highlight-no-such-directory-found/38232844#38232844", "title": "CodeBlocks : [highlight: No such directory found", "body": "<p>Start by turning on full Compiler logging.</p>\n\n<p>This is done by selecting the \"Full command line\" option Under menu \"Settings\" -> \"Compiler\" -> Global compiler settings -> [the compiler you use] -> \"Other Setting\" tab, \"Compiler logging\". In 12.11 and newer this is enabled by default.</p>\n\n<p>This option will make Code::Blocks output the exact commands it uses to compile your code.</p>\n\n<p>Things to remember:</p>\n\n<ul>\n<li>Look at the \"Build Log\" NOT the \"Build Message\" tab</li>\n<li>Do a re-build instead of build in order to get a full build log.</li>\n<li>You should review all the commands and their options;</li>\n<li>If you have compiled your app before, do a re-build (or clean before build) to see all compiling / linking steps;</li>\n<li>If you don't know what an option or a command does please read the documentation for the compiler/linker you're using;</li>\n<li>Look for missing commands;</li>\n<li>For every source file (.cpp; .c; .d; etc) in your project, you must have at least one command in the log. This command must produce an object file (file extension .o if using gcc/g++ and .obj if using Visual Studio);</li>\n<li>Every object file should be linked in the final executable, if not there are undefined symbols errors;</li>\n<li>Remember the file extension matters: *.c is compiled as C file, *.cpp is compiled as C++ file.</li>\n<li>If you have no luck, you can try to ask in the forum, but read first \"<a href=\"http://wiki.codeblocks.org/index.php?title=FAQ-Compiling_%28general%29#Q:_How_do_I_report_a_compilation_problem_on_the_forums.3F\" rel=\"nofollow\">How do I report a compilation problem on the forums</a>\"</li>\n</ul>\n\n<p>From <a href=\"http://wiki.codeblocks.org/index.php?title=FAQ-Compiling_%28errors%29\" rel=\"nofollow\">Code::Blocks FAQ</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4294013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bLhwd7Gxy-A/AAAAAAAAAAI/AAAAAAAAAGk/kouKhHCdb8Y/photo.jpg?sz=128", "display_name": "Shreyansh Rana", "link": "https://stackoverflow.com/users/4294013/shreyansh-rana"}, "is_accepted": false, "score": 4, "last_activity_date": 1467866409, "creation_date": 1467866409, "answer_id": 38237629, "question_id": 38232149, "link": "https://stackoverflow.com/questions/38232149/codeblocks-highlight-no-such-directory-found/38237629#38237629", "title": "CodeBlocks : [highlight: No such directory found", "body": "<p>I have successfully solved the problem.</p>\n\n<p>All I did was go to \"Compiler Settings\" (\"Settings\" -> \"Compiler\" -> Global compiler settings), and selected \"Reset Defaults\".</p>\n\n<p>It solved the problem.</p>\n\n<p>Thanks everyone for answering. :)</p>\n"}], "owner": {"reputation": 41, "user_id": 4294013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bLhwd7Gxy-A/AAAAAAAAAAI/AAAAAAAAAGk/kouKhHCdb8Y/photo.jpg?sz=128", "display_name": "Shreyansh Rana", "link": "https://stackoverflow.com/users/4294013/shreyansh-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503229620, "creation_date": 1467832928, "question_id": 38232149, "link": "https://stackoverflow.com/questions/38232149/codeblocks-highlight-no-such-directory-found", "title": "CodeBlocks : [highlight: No such directory found", "body": "<p>I have already read the other questions on the site and none of them matched with the issue I had.</p>\n\n<p>I have already tried unistalling and then reinstalling codeblocks.</p>\n\n<p>Please help.</p>\n\n<p>Build Log : </p>\n\n<p>mingw32-g++.exe -Wall -fexceptions -g  -c S:\\Coding\\C++\\aloo\\main.cpp -o obj\\Debug\\main.o\nmingw32-g++.exe  -o bin\\Debug\\aloo.exe obj\\Debug\\main.o  </p>\n\n<p>[highlight color=\u201dyellow\u201d]-lbgi -lgdi32 -lcomdlg32 -luuid -loleaut32 -lole32[/highlight]  \"C:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\libbgi.a\"</p>\n\n<p>mingw32-g++.exe: error: [highlight: No such file or directory</p>\n\n<p>mingw32-g++.exe: error: color=\u201dyellow\u201d]-lbgi: No such file or directory</p>\n\n<p>mingw32-g++.exe: error: C:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\libbgi.a: No such file or directory</p>\n\n<p>Process terminated with status 1 (0 minute(s), 4 second(s))</p>\n\n<p>3 error(s), 0 warning(s) (0 minute(s), 4 second(s))</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "condition-variable"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 1, "creation_date": 1467833051, "post_id": 38232148, "comment_id": 63885948, "body": "The arguments for <code>make_shared</code> are used fo constructing the object. In your case you are passing it a temporary which matches the copy constructor signature."}, {"owner": {"reputation": 1559, "user_id": 1271422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd32c9ead6fa797a1f2a8fad9adf24a7?s=128&d=identicon&r=PG", "display_name": "UldisK", "link": "https://stackoverflow.com/users/1271422/uldisk"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467833108, "post_id": 38232148, "comment_id": 63885978, "body": "@Arunmu Actually, it matches move constructor signsture"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 1559, "user_id": 1271422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd32c9ead6fa797a1f2a8fad9adf24a7?s=128&d=identicon&r=PG", "display_name": "UldisK", "link": "https://stackoverflow.com/users/1271422/uldisk"}, "edited": false, "score": 0, "creation_date": 1467833190, "post_id": 38232148, "comment_id": 63886011, "body": "@UldisK There is no <code>move constructor</code> for condition_variable."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 1559, "user_id": 1271422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd32c9ead6fa797a1f2a8fad9adf24a7?s=128&d=identicon&r=PG", "display_name": "UldisK", "link": "https://stackoverflow.com/users/1271422/uldisk"}, "edited": false, "score": 0, "creation_date": 1467833200, "post_id": 38232148, "comment_id": 63886016, "body": "@UldisK if the copy constructor is explicitly defined as deleted, the move constructor will not be implicitly declared."}], "answers": [{"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833140, "post_id": 38232189, "comment_id": 63885991, "body": "Why not the move constructor?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833384, "post_id": 38232189, "comment_id": 63886117, "body": "@Curious, looks like you got your answer to the above question."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1467833076, "creation_date": 1467833076, "answer_id": 38232189, "question_id": 38232148, "link": "https://stackoverflow.com/questions/38232148/issues-when-creating-a-shared-pointer-of-condition-variable/38232189#38232189", "title": "Issues when creating a shared pointer of condition variable", "body": "<blockquote>\n  <p>Why does the compiler think that I am trying to call the copy constructor of std::condition_variable?`</p>\n</blockquote>\n\n<p>That's what the compiler will use when you call</p>\n\n<pre><code>std::make_shared&lt;std::condition_variable&gt;(std::condition_variable{})\n</code></pre>\n\n<p><code>std::make_shared</code> uses any constructor that will take the arguments passed to it. In this case, the copy constructor is the one.</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared</a>:</p>\n\n<blockquote>\n  <p><strong>args</strong>   -   list of arguments with which an instance of T will be constructed.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833112, "post_id": 38232192, "comment_id": 63885979, "body": "Why not the move constructor?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 3, "creation_date": 1467833158, "post_id": 38232192, "comment_id": 63885999, "body": "@Curious It does not have a move constructor."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833272, "post_id": 38232192, "comment_id": 63886058, "body": "that&#39;s right! I dont know why I confused move assignment with the move construction"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1467833340, "post_id": 38232192, "comment_id": 63886091, "body": "@Curious It&#39;s not move assignable as well :)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467833429, "post_id": 38232192, "comment_id": 63886145, "body": "@Arunmu it has to be, how else can you have a vector of condition variables?  At least I&#39;m pretty sure it is"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833512, "post_id": 38232192, "comment_id": 63886188, "body": "@Curious per <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">this</a> and the standard it is not move assignable as well."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833716, "post_id": 38232192, "comment_id": 63886289, "body": "So technically you are not allowed to have a vector of condition_variables?  That is news to me............"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833864, "post_id": 38232192, "comment_id": 63886361, "body": "@Curious I don&#39;t believe so.  I suppose you could if you do not need dynamic growth and instead reserve the size you need and then use <code>emplace_back</code> to add the <code>condition_variable</code>s"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467833973, "post_id": 38232192, "comment_id": 63886420, "body": "Wait I think the reserve and <code>emplace_back</code> trick might not work, since space is allocated right when the vector calls <code>new</code> and that will call the default constructor for <code>condition_variable</code>s which means that any subsequent insert will move the object into place right?  <code>emplace_back</code>ing is quite similar to <code>push_back</code>ing with an rvalue"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467834099, "post_id": 38232192, "comment_id": 63886494, "body": "I think the only way it would be possible would be if a vector allocates the right amount of memory and does a placement new.  But that does not sound quite right.."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467834128, "post_id": 38232192, "comment_id": 63886508, "body": "@Arunmu and NathanOliver Maybe I should ask this as another question?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467834131, "post_id": 38232192, "comment_id": 63886510, "body": "@Curious As long as you do not out grow the capacity of the vector it has no reason to allocate more space.  So if you need 50 variables you call <code>reserve</code> with 50 and then you can <code>emplace_back</code> 50 variables without a reallocation.  Not sure if the standard guarantees <code>size == capacity()</code> but it should work on any sane implementation."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467834172, "post_id": 38232192, "comment_id": 63886539, "body": "@Curious Another question about that would be great.  I find nothing with a quick google search."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467834186, "post_id": 38232192, "comment_id": 63886550, "body": "But when you do a <code>reserve</code> you are essentially calling the <code>new</code> operator to allocate memory for <code>x</code> objects on the heap right?  that would call the default consturctor for those objects?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467834261, "post_id": 38232192, "comment_id": 63886596, "body": "I&#39;m not sure.  Good food for though for another question ;)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467834770, "post_id": 38232192, "comment_id": 63886896, "body": "<a href=\"http://stackoverflow.com/questions/38232576/why-is-a-condition-variable-not-moveassignable\" title=\"why is a condition variable not moveassignable\">stackoverflow.com/questions/38232576/&hellip;</a> :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1467835203, "post_id": 38232192, "comment_id": 63887114, "body": "@Curious: <code>reserve</code> is not enough, as <i>resize</i> code has to handle the case where there is not enough space, the only way is at the construction."}, {"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 0, "creation_date": 1467836755, "post_id": 38232192, "comment_id": 63887931, "body": "@NathanOliver That doesn&#39;t work, because whether or not <code>emplace_back()</code> or <code>reserve()</code> has to move/copy items is a run time decision, not a compile time decision, so code has to be generated that can move/copy the items held.  The only way to put a non-moveable/non-copyable type into a <code>vector</code> is at <code>vector</code> construction time when using the <code>explicit vector(size_type n, const Allocator&amp; = Allocator());</code> constructor, as that uses default construction to put elements into the <code>vector</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 9, "last_activity_date": 1467833084, "creation_date": 1467833084, "answer_id": 38232192, "question_id": 38232148, "link": "https://stackoverflow.com/questions/38232148/issues-when-creating-a-shared-pointer-of-condition-variable/38232192#38232192", "title": "Issues when creating a shared pointer of condition variable", "body": "<p>In</p>\n\n<pre><code>std::make_shared&lt;std::condition_variable&gt;(std::condition_variable{})\n</code></pre>\n\n<p><code>std::condition_variable{}</code> creates a <code>std::condition_variable</code>.  This means that <code>std::make_shared</code> is going to construct it's internal <code>std::condition_variable</code> with the passed parameter which invokes the copy constructor.  If you need a default constructed <code>std::condition_variable</code> then you can use</p>\n\n<pre><code>std::make_shared&lt;std::condition_variable&gt;()\n</code></pre>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 38232192, "answer_count": 2, "score": 3, "last_activity_date": 1467845857, "creation_date": 1467832920, "last_edit_date": 1467845857, "question_id": 38232148, "link": "https://stackoverflow.com/questions/38232148/issues-when-creating-a-shared-pointer-of-condition-variable", "title": "Issues when creating a shared pointer of condition variable", "body": "<p>I apologize if this has been asked before, I was not able to find it online.  Why does the compiler think that I am trying to call the copy constructor of <code>std::condition_variable</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;condition_variable&gt;\nusing namespace std;\n\nclass A {\n public:\n  A() = default;\n  A(A&amp;&amp;) = default;\n  A&amp; operator=(A&amp;&amp;) = default;\n  A(const A&amp;) = delete;\n  A&amp; operator=(const A&amp;) = delete;\n};\nint main() {\n\n  std::vector&lt;std::shared_ptr&lt;std::condition_variable&gt;&gt; m;\n  m.push_back(std::make_shared&lt;std::condition_variable&gt;(std::condition_variable{}));\n\n  // no complains here\n  std::vector&lt;std::shared_ptr&lt;A&gt;&gt; m_a;\n  m_a.push_back(std::make_shared&lt;A&gt;(A{}));\n\n  return 0;\n}\n</code></pre>\n\n<p>The error I get is that I am trying to use the deleted copy constructor of <code>std::condition_variable</code>..  I guess what I am trying to ask is why the move constructor is not called with that invocation of <code>make_shared</code></p>\n"}, {"tags": ["c++", "algorithm", "math", "equation"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1467832739, "post_id": 38232073, "comment_id": 63885791, "body": "What for is <code>ELA</code> and <code>EHA</code> important here? What is <code>ea</code>?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1467832785, "post_id": 38232073, "comment_id": 63885807, "body": "@LogicStuff I think those are what he would like to express as functions."}, {"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1467832869, "post_id": 38232073, "comment_id": 63885859, "body": "@LogicStuff, ela and eha are variables that are set by this loop."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1467832974, "post_id": 38232073, "comment_id": 63885916, "body": "Somehow I feel this is off topic here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1467833166, "post_id": 38232073, "comment_id": 63886002, "body": "The <a href=\"http://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation\">background question</a>"}, {"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1467834584, "post_id": 38232073, "comment_id": 63886781, "body": "@LogicStuff, ea is a variable"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467835684, "post_id": 38232073, "comment_id": 63887359, "body": "Who cares which way the index is going if you don&#39;t modify <code>ea</code>?"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467839670, "post_id": 38232073, "comment_id": 63889419, "body": "@MadPhysicist The <code>way the index is going</code> matters because of <code>num</code> which is a <i>reverse</i> partial sum."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1467841644, "post_id": 38232073, "comment_id": 63890278, "body": "So <code>ea</code> is a scalar now, no longer an array? This changes the question altogether. It&#39;s generally better advised to make up your mind <i>before</i> posting."}, {"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1467841951, "post_id": 38232073, "comment_id": 63890401, "body": "@dxiv,  I modified it to simplify the problem. I didn&#39;t change my mind. apologies for any confusion this may have caused you. I&#39;ll revert it back for you."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1467842111, "post_id": 38232073, "comment_id": 63890472, "body": "@Veridian Was just pointing out that it&#39;s a quite different problem if all <code>ea[i][j]</code> have the same value. For one example, <code>num</code> can be calculated directly from <code>i, j</code> in that case."}], "answers": [{"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1467836080, "creation_date": 1467836080, "answer_id": 38232958, "question_id": 38232073, "link": "https://stackoverflow.com/questions/38232073/how-to-turn-equation-with-decrementing-indexing-into-math-equation-with-summatio/38232958#38232958", "title": "How to turn equation with decrementing indexing into math equation with summation?", "body": "<p>If the problem is just with how to express the sum when you're looping the other direction, you can change your code to:</p>\n\n<pre><code>int num = 0;\nfor (int i = 0; i &lt; nr; i++) {\n    for (int j = 0; j &lt; nc; j++) {\n        ela[nr - i][nc - j] = num;\n        eha[nr - i][nc - i] = num + ea[nr - i][nc - j] - 1;\n        num += ea[nr - i][nc - j];                    \n    }\n}\n</code></pre>\n\n<p>I'm not saying you have to change your code to this, but from here it should be more obvious how to change this to use summation notation.</p>\n"}, {"tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": false, "score": -1, "last_activity_date": 1467841313, "creation_date": 1467841313, "answer_id": 38234257, "question_id": 38232073, "link": "https://stackoverflow.com/questions/38232073/how-to-turn-equation-with-decrementing-indexing-into-math-equation-with-summatio/38234257#38234257", "title": "How to turn equation with decrementing indexing into math equation with summation?", "body": "<p>It's hard to tell without any context, but the code in question becomes more intelligible if you think of the arrays as vectors enumerating the elements in reverse order, row-major. The code below is functionally equivalent to the original one posted, but arguably easier to follow.</p>\n\n<pre><code>// n.b. ela[nr - 1 - i][nc - 1 - j] == rela(nc * i + j);\nint &amp;rela(int k) { return ela[nr - 1 - k / nc][nc - 1 - k % nc]; }\nint &amp;reha(int k) { return elh[nr - 1 - k / nc][nc - 1 - k % nc]; }\nint &amp;rea(int k)  { return  ea[nr - 1 - k / nc][nc - 1 - k % nc]; }\n\nfor (int k = 0, sum = 0; k &lt; nr * nc - 1; k++) {\n    rela(k) = sum;\n    sum += rea(k);\n    reha(k) = sum - 1;\n}\n</code></pre>\n\n<p>In plain English, <code>rela(k)</code> is the partial sum of <code>rea</code> elements <code>0 ... k-1</code> and <code>reha(k)</code> is one less than the partial sum of <code>rea</code> elements <code>0 ... k</code> (also, <code>rela(k) == reha(k - 1) + 1</code> for <code>k &gt; 0</code>).</p>\n\n<p>Technically, this description could be translated back in terms of the 2d arrays, but it becomes rather messy quickly.</p>\n"}, {"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": true, "score": 1, "last_activity_date": 1467877124, "last_edit_date": 1467877124, "creation_date": 1467875886, "answer_id": 38239615, "question_id": 38232073, "link": "https://stackoverflow.com/questions/38232073/how-to-turn-equation-with-decrementing-indexing-into-math-equation-with-summatio/38239615#38239615", "title": "How to turn equation with decrementing indexing into math equation with summation?", "body": "<p>If I am right, you can transcribe the effect as</p>\n\n<p><a href=\"https://i.stack.imgur.com/UFJdK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UFJdK.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can describe this as the matrix <code>ela</code> being a <em>2D suffix sum</em> of the matrix <code>ea</code> (for every element, sum of the elements that follow in the lexicographical ordering), while <code>eha</code> is the sum of matrices <code>ela</code> and <code>ea</code> minus all ones.</p>\n"}], "owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 38239615, "answer_count": 3, "score": 2, "last_activity_date": 1467877124, "creation_date": 1467832609, "last_edit_date": 1495542786, "question_id": 38232073, "link": "https://stackoverflow.com/questions/38232073/how-to-turn-equation-with-decrementing-indexing-into-math-equation-with-summatio", "title": "How to turn equation with decrementing indexing into math equation with summation?", "body": "<p>Similar to this question: <a href=\"https://stackoverflow.com/questions/392375/turn-while-loop-into-math-equation?rq=1\">Turn while loop into math equation?</a>, I have the following nested loop that I am trying to convert into a math equation as I need to write this up in a format that doesn't look like code. I believe I am going to need some type of summation equation.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>int num = 0;\nfor (int i = nr - 1; i &gt;= 0; i--) {\n    for (int j = nc - 1; j &gt;= 0; j--) {\n        ela[i][j] = num;\n        eha[i][j] = num + ea[i][j] - 1;\n        num += ea[i][j];                    \n    }\n}\n</code></pre>\n\n<p>I know that summations start from a lower bound and continue to a higher bound, so I'm not quite sure how to apply a summation here since I start from a higher index and continue to a lower index.</p>\n\n<p>I'm not sure why I'm getting downvoted, as the question I referenced is very similar to mine, has the same tags and is upvoted 14 times. Please comment below if I can improve my question somehow.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I was able to update the formula as follows:</p>\n\n<pre><code>nr = 50;\nnc = 10;\n\nnum = sum[ea[i,j],i=0,nr-1,j=0,nc-1]; // correct based upon nr, nc and ea\nfor (int i = 0; i &lt; nr; i) {\n    for (int j = 0; j &lt; nc; j++) {\n        num = num - ea[i,j];\n        ela[i][j] = num;\n        eha[i][j] = num + ea[i,j] - 1;                              \n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "std"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1467832782, "post_id": 38232069, "comment_id": 63885805, "body": "It&#39;s not english, its <code>utf-8</code>. You have to set your encoding to <code>utf-16</code> instead."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1467836846, "post_id": 38232069, "comment_id": 63887982, "body": "I don&#39;t know how to print Chinese font. My Win10 console window is using &quot;Consolas&quot; which should show Chinese, but it doesn&#39;t. I think I marked this as duplicate too quickly."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1467866776, "post_id": 38232069, "comment_id": 63896473, "body": "I tried typing Asian alphabets directly in console window and powershell, but it could not display the names properly. It seems console window works for European alphabets, but not Asian alphabets, including Chinese, Japanese, Arabic, Indian. Maybe the system requires special setup for those languages..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4832129"}, "edited": false, "score": 0, "creation_date": 1469921120, "post_id": 38232069, "comment_id": 64738325, "body": "Neither Consolas nor Lucida Console support Chinese characters."}], "owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1467832940, "answer_count": 0, "score": 0, "last_activity_date": 1467837695, "creation_date": 1467832587, "last_edit_date": 1495540291, "question_id": 38232069, "link": "https://stackoverflow.com/questions/38232069/cannot-wcout-wide-string-other-than-english", "closed_reason": "Duplicate", "title": "Cannot wcout wide string other than English", "body": "<p>Trying to print wide strings on the console, but it seems that only first line of English characters are print out correctly. Why? </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    std::wcout &lt;&lt; L\"Hello\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u0440\u0435\u043a\u0430\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u6cb3\u6d41\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u5ddd\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u0440\u0435\u043a\u0430\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"Hello\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here is the console output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tyJfS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tyJfS.png\" alt=\"enter image description here\"></a></p>\n\n<p>What's even weirder is that it seems it has swallowed all the characters after \"peka\", and not printing the last \"Hello\" either. </p>\n\n<hr>\n\n<p>Edit: </p>\n\n<p>Tried the suggested answer on this SO: <a href=\"https://stackoverflow.com/questions/4909187/c-output-contents-of-a-unicode-file-to-console-in-windows\">C++: output contents of a Unicode file to console in Windows</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;io.h&gt;\nusing namespace std;\nint main()\n{\n    _setmode(_fileno(stdout), _O_U16TEXT);\n\n    std::wcout &lt;&lt; L\"Hello\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u0440\u0435\u043a\u0430\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u6cb3\u6d41\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u5ddd\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"\u0440\u0435\u043a\u0430\" &lt;&lt; std::endl;\n    std::wcout &lt;&lt; L\"Hello\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Kind of solved part of the problem, but what happens to Chinese and Japanese in the middle?</p>\n\n<p><a href=\"https://i.stack.imgur.com/25aIs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/25aIs.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "serialization", "boost", "nan", "armadillo"], "owner": {"reputation": 109, "user_id": 4262603, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/931ec825b0ebe24cdea6077a69bb7b28?s=128&d=identicon&r=PG&f=1", "display_name": "DreamTool", "link": "https://stackoverflow.com/users/4262603/dreamtool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467831937, "creation_date": 1467831937, "question_id": 38231895, "link": "https://stackoverflow.com/questions/38231895/using-boost-serialization-with-armadillo-datumnan-value", "title": "Using boost serialization with armadillo datum::nan value", "body": "<p>I use boost serialization in my C++ / CLI program, and some classes have datamembers that contain some double which are initialized to arma::datum::nan (the \"not-a-number\" value for armadillo library). I serialize via a boost::archive::text_oarchive. When I try to deserialize via boost::archive::text_iarchive oa, a boost serialization archive exception is launched when it tries to read a arma::datum::nan value. I tried using a binary archive, but it seems other types (std::vector> for instance) are not supported. Is there a way I could tell boost how to serialize and deserialize a arma::datum::nan value ?</p>\n"}, {"tags": ["c++", "visual-c++", "outlook", "format", "pst"], "answers": [{"comments": [{"owner": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1467843729, "post_id": 38233607, "comment_id": 63891137, "body": "Thanks I will have a look via your utility application, but what data type is this type of property stored as? In my code above I iterate through the message property list - is that the same as what you mean by MAPI properties? Because I am casting to <code>wstring</code> it is surely throwing exceptions for all other properties that are not <code>wstring</code>, making it hard for me to get the data I need"}, {"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "reply_to_user": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1467874061, "post_id": 38233607, "comment_id": 63899042, "body": "The property type is PT_SYSTIME. Definitely not a string."}, {"owner": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1468000189, "post_id": 38233607, "comment_id": 63964578, "body": "Okay, I managed to use <code>pstsdk</code> to get properties into <code>FILETIME</code> objects: <code>if (bag.get_prop_type(*prop) == prop_type_systime) FILETIME property = bag.read_prop&lt;FILETIME&gt;(*prop);</code> which works nicely; the only thing I can&#39;t seem to figure out is what the name of each date property actually is, to uniquely identify it, like you said? This SDK is a bit odd, and I am not sure how to get the name of a property."}, {"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "reply_to_user": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1468002729, "post_id": 38233607, "comment_id": 63965807, "body": "You need to look at the property tags. On the MAPI level the property tag (unique to a particular store) for a named property (&gt;=0x80000000, shown in bold by OutlookSpy) is returned by a call to IMAPIProp::GetIDsFromNames passing the GUID and id of the property(take a look at an appointment using OutlookSpy). I don&#39;t know how these particular library handles named properties."}, {"owner": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1468239442, "post_id": 38233607, "comment_id": 64029889, "body": "It looks like these properties are not actually named properties, but instead contain a GUID and an ID which map to a specific property which is outlined within the Exchange Server Protocols Master Property List. Microsoft documents what each GUID and ID maps to within the MS-OXPROPS document here: <a href=\"https://msdn.microsoft.com/en-us/library/cc433490(v=exchg.80).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/cc433490(v=exchg.80).aspx</a> For example, <code>PidLidAppointmentStartDate</code> which  <i>identifies the date that the appointment starts</i> corresponds to GUID <code>{00062002-0000-0000-C000-000000000046}</code> and ID <code>0x00008212</code>, and it is of type <code>PtypTime</code>."}, {"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "reply_to_user": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "edited": false, "score": 0, "creation_date": 1468247155, "post_id": 38233607, "comment_id": 64035608, "body": "Yes, that is what a named property is."}], "tags": [], "owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1500265921, "last_edit_date": 1500265921, "creation_date": 1467838448, "answer_id": 38233607, "question_id": 38231790, "link": "https://stackoverflow.com/questions/38231790/where-do-calendar-messages-in-pst-files-store-appointment-times-and-dates/38233607#38233607", "title": "Where do calendar messages in PST files store appointment times and dates?", "body": "<p>These (and many more ) properties are stored as named MAPI properties. Their tags will vary between different stores, so you cannot hardcode them.  </p>\n\n<p>Take a look at an existing appointment in <a href=\"http://www.dimastr.com/outspy/\" rel=\"nofollow noreferrer\">OutlookSpy</a> (click IMessage button).  </p>\n"}], "owner": {"reputation": 10718, "user_id": 982639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gToj4.jpg?s=128&g=1", "display_name": "Alexandru", "link": "https://stackoverflow.com/users/982639/alexandru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1500265921, "creation_date": 1467831545, "last_edit_date": 1468000324, "question_id": 38231790, "link": "https://stackoverflow.com/questions/38231790/where-do-calendar-messages-in-pst-files-store-appointment-times-and-dates", "title": "Where do calendar messages in PST files store appointment times and dates?", "body": "<p>I am using the <a href=\"https://pstsdk.codeplex.com/wikipage?title=pst&amp;referringTitle=Documentation\" rel=\"nofollow\">PST File Format SDK</a> to try and extract some appointment item data from an Outlook PST export:</p>\n\n<pre><code>int main()\n{\n    pst myfile(L\"export.pst\");\n    folder calendar = myfile.open_folder(L\"Calendar\");\n    for (folder::message_iterator msg = calendar.message_begin(); msg != calendar.message_end(); ++msg)\n    {\n        message m = *msg;\n        wstring subject = L\"\";\n        if (m.has_subject())\n            subject = m.get_subject();\n        wstring body = L\"\";\n        if (m.has_body())\n            body = m.get_body();\n        wstring htmlbody = L\"\";\n        if (m.has_html_body())\n            htmlbody = m.get_html_body();\n        size_t num_attachments = m.get_attachment_count();\n        size_t num_recipients = m.get_recipient_count();\n        property_bag bag = m.get_property_bag();\n        vector&lt;prop_id&gt; propertyList = bag.get_prop_list();\n        for (vector&lt;prop_id&gt;::iterator prop = propertyList.begin(); prop != propertyList.end(); ++prop)\n        {\n            if (bag.get_prop_type(*prop) == prop_type_systime)\n                FILETIME property = bag.read_prop&lt;FILETIME&gt;(*prop);\n        }\n        break; // Just try the first message for now.\n    }\n    return 0;\n}\n</code></pre>\n\n<p>How does Outlook store appointment data? I mean, how can I get at the very least the appointment start time and duration (or end time)? I've been trying to scour the <a href=\"https://msdn.microsoft.com/en-us/library/ff385210(v=office.12).aspx\" rel=\"nofollow\">PST file format specification from Microsoft</a> but I can't seem to find this information I need! </p>\n\n<p><strong>Edit</strong>: I can parse <code>FILETIME</code> objects as in the above code now, but the question is, how can I distinguish them to what time they are referring to? I mean, how can I tell if this is the time of the event date, or the end of the event date, etc.? They should have names to distinguish them, should they not? How do I get that using <code>pstsdk</code>?</p>\n"}, {"tags": ["c++", "ipc"], "comments": [{"owner": {"reputation": 445, "user_id": 1450934, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/154a329e2d7189f2eca9f8430de7565b?s=128&d=identicon&r=PG", "display_name": "Ian", "link": "https://stackoverflow.com/users/1450934/ian"}, "edited": false, "score": 0, "creation_date": 1467831779, "post_id": 38231680, "comment_id": 63885277, "body": "A similar question has been asked. <a href=\"http://stackoverflow.com/questions/9711414/what-is-the-proper-way-of-doing-event-handling-in-c\" title=\"what is the proper way of doing event handling in c\">stackoverflow.com/questions/9711414/&hellip;</a>"}, {"owner": {"reputation": 66, "user_id": 482457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb9090446bb435a933289f1f30e4105?s=128&d=identicon&r=PG", "display_name": "Daniel Feryance", "link": "https://stackoverflow.com/users/482457/daniel-feryance"}, "edited": false, "score": 0, "creation_date": 1467842827, "post_id": 38231680, "comment_id": 63890815, "body": "I don&#39;t think you want a mutex here. A mutex is for protecting a resource. You release it right away so there won&#39;t be any blocking. Try looking into CreateEvent: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682396(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 137, "user_id": 1505619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff728687d482f49e22514ff33a5a2aa?s=128&d=identicon&r=PG", "display_name": "sr71pav", "link": "https://stackoverflow.com/users/1505619/sr71pav"}, "edited": false, "score": 0, "creation_date": 1467892996, "post_id": 38231680, "comment_id": 63910997, "body": "Daniel, my version with Events works fine.  I&#39;m trying to get away from that.  Also, the mutex may come into play when I start having multiple instances running at some point in the future.  I&#39;m working on a single instance, now, but I intend to bring this to multiple instances once that works.  This is proving the idea."}, {"owner": {"reputation": 66, "user_id": 482457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb9090446bb435a933289f1f30e4105?s=128&d=identicon&r=PG", "display_name": "Daniel Feryance", "link": "https://stackoverflow.com/users/482457/daniel-feryance"}, "edited": false, "score": 0, "creation_date": 1467900616, "post_id": 38231680, "comment_id": 63916633, "body": "I still think you should stay away from a mutex. The way it handles locking a thread and abandonment isn&#39;t designed for how you want to use it. If you want something cross-platform, how about a pipe? Handles two-way communication, can be blocking or async, and you can pass whatever data you like. Otherwise a message queue would work but that is one-way."}, {"owner": {"reputation": 137, "user_id": 1505619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff728687d482f49e22514ff33a5a2aa?s=128&d=identicon&r=PG", "display_name": "sr71pav", "link": "https://stackoverflow.com/users/1505619/sr71pav"}, "edited": false, "score": 0, "creation_date": 1467912958, "post_id": 38231680, "comment_id": 63924806, "body": "Would you consider this a good starting point on that? <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365780(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "owner": {"reputation": 137, "user_id": 1505619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff728687d482f49e22514ff33a5a2aa?s=128&d=identicon&r=PG", "display_name": "sr71pav", "link": "https://stackoverflow.com/users/1505619/sr71pav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467893217, "creation_date": 1467831200, "last_edit_date": 1495541296, "question_id": 38231680, "link": "https://stackoverflow.com/questions/38231680/replace-windows-events-with-cross-platform-ipc-mechanism", "title": "Replace Windows Events with cross-platform IPC mechanism", "body": "<p>I'm trying to write a code that's a very simple single process server with a single client.  These are separate programs as I'm trying to eliminate compiler-compatibility issues between the tools.  Eventually, I intend to allow multi-threading, but that's just a step too far as I try to get the hang of this.  I have something that works using Windows Events, but I'm trying to get away from it as there's no direct equivalent on Linux as far as I can tell.</p>\n\n<p>The server is supposed to execute a code when demanded by the client.  The I/O between the two processes is via shared memory.  Right now, I have events for initialization, execution, and termination.  After the server receives the event, it sends a completion event back to the client notifying it to go on to the next task.  There is no expectation that this will expand beyond a single machine.</p>\n\n<p>I have it in my head that mutex may be the way to go, but I am creating a racing problem, I believe, as I can't get the server to get out of the way and wait for the client.  I have the server creating the mutex but then I want it to release it and wait for the client to use it before coming back to the server to do something.  Instead, the server just keeps getting the mutex, and while I can understand why, I just can't figure out any sort of solution.</p>\n\n<p>The following test code I think highlights the issue.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;tchar.h&gt;\n\nint _tmain(int argc, char *argv[])\n{\n  int i = 1;\n\n  // Create mutex\n  HANDLE hMutex = CreateMutex(NULL, FALSE, TEXT(\"TESTMUTEX\"));\n  DWORD hResult;\n\n  // Check valid hMutex\n\n  while (i &gt; 0)\n  {\n    // Wait for mutex\n    // How do I make it wait for a connection here?\n    hResult = WaitForSingleObject(hMutex, 1000);\n    // Write note to screen\n    printf(\"Received mutex!\\n\");\n    // Wait for user to enter info\n    scanf(\"%d\", &amp;i);\n    // Release mutex\n    if (!ReleaseMutex(hMutex))\n    {\n      printf(\"Mutex error!\\n\");\n    }\n    printf(\"Mutex Released!\\n\");\n  }\n\n  CloseHandle(hMutex);\n\n  return 1;\n}\n</code></pre>\n\n<p>This is just an infinite loop.  The scanf is just sitting as a stand-in to allow me to pause and exit the test code.  How do I get this to wait between the creation of the mutex and then where it's waiting for it in the loop?  I think I need some way of saying that there's actually a client out there and to not wait for the mutex until there's a client connected (which would then allow the client to grab it, first).  It's probably something obvious, but I'm rather new to IPC.  Maybe I need to include sockets or pipes?</p>\n\n<p>I haven't jumped into the client code beyond some dummy code, yet, as the server just isn't right, and shows enough of the problem (I think) without the client.</p>\n\n<p>An example use case will involve Simulink S-Functions.  I will have an engineering code (server) behind the scenes with multiple S-Functions (clients) running against it from a single Simulink model.  The scanf in the test code is sitting in place of where the server will read the input, execute the code, and write back the output.  This I/O is in shared memory so I can't have all of the processes writing and reading without locking the resource.</p>\n\n<p>I think it's similar to this: <a href=\"https://stackoverflow.com/questions/1677070/cross-platform-equivalent-to-windows-events\">Cross-Platform equivalent to windows events</a>.  The difference is that I have two completely separate programs instead of just the one.</p>\n"}, {"tags": ["c++", "mysql", "hash"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1467830578, "post_id": 38231442, "comment_id": 63884540, "body": "What you need is neither SHA2 nor MD5 (crying), but <i>PBKDF2</i>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1467830634, "post_id": 38231442, "comment_id": 63884574, "body": "It&#39;s worth noting that both of these password hashing methods are really inadequate and you should be using something more robust like <a href=\"https://en.wikipedia.org/wiki/Bcrypt\" rel=\"nofollow noreferrer\">bcrypt</a> at the very least. Where SHA2 is just plain weak, MD5 is just plain <i>sad</i>. It&#39;s barely better than plain-text these days."}], "owner": {"reputation": 1, "user_id": 6446447, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/78fcb6cd4aebea2df66b96e1fb8d5f21?s=128&d=identicon&r=PG&f=1", "display_name": "marc", "link": "https://stackoverflow.com/users/6446447/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467830410, "creation_date": 1467830410, "question_id": 38231442, "link": "https://stackoverflow.com/questions/38231442/mysql-mixing-sha2-md5password", "title": "Mysql mixing SHA2 + MD5password", "body": "<p>simple question.\nI maded a server->client network , this store password intro a mysql database and it used by server to auth.</p>\n\n<p>I want to salt it.</p>\n\n<pre><code>if(Login_IsInChannelService(szLogin))\n{\n    sys_log(0, \"ChannelServiceLogin [%s]\", szLogin);\n\n    DBManager::instance().ReturnQuery(\n        QID_AUTH_LOGIN,\n        dwKey,\n        p,\n        \"SELECT '%s',password,social_id,id,status,availDt - NOW() &gt; 0,\"\n        \"UNIX_TIMESTAMP(silver_expire),\"\n        \"UNIX_TIMESTAMP(gold_expire),\"\n        \"UNIX_TIMESTAMP(safebox_expire),\"\n        \"UNIX_TIMESTAMP(autoloot_expire),\"\n        \"UNIX_TIMESTAMP(fish_mind_expire),\"\n        \"UNIX_TIMESTAMP(marriage_fast_expire),\"\n        \"UNIX_TIMESTAMP(money_drop_rate_expire),\"\n        \"UNIX_TIMESTAMP(create_time) \"\n        \"FROM account WHERE login='%s'\",\n        szPasswd,\n        szLogin\n    );\n}\nelse\n{\n    DBManager::instance().ReturnQuery(\n        QID_AUTH_LOGIN,\n        dwKey,\n        p,\n        \"SELECT id,SHA2('%s',224),password,social_id,status,availDt - NOW() &gt; 0,\"\n        \"UNIX_TIMESTAMP(silver_expire),\"\n        \"UNIX_TIMESTAMP(gold_expire),\"\n        \"UNIX_TIMESTAMP(safebox_expire),\"\n        \"UNIX_TIMESTAMP(autoloot_expire),\"\n        \"UNIX_TIMESTAMP(fish_mind_expire),\"\n        \"UNIX_TIMESTAMP(marriage_fast_expire),\"\n        \"UNIX_TIMESTAMP(money_drop_rate_expire),\"\n        \"UNIX_TIMESTAMP(create_time) \"\n        \"FROM account WHERE login='%s'\",\n        szPasswd,\n        szLogin\n    );\n}\n</code></pre>\n\n<p>Actually i use sha2 for hashing but still easy to find hash.\nSome ideeas how should i add salt for hash ?\nThis is the line responsable with sha2 hash</p>\n\n<pre><code>\"SELECT id,SHA2('%s',224),password,social_id,status,availDt - NOW() &gt; 0,\"\n</code></pre>\n\n<p>If you need aditional info tell me.</p>\n"}, {"tags": ["c++", "class", "c++11", "reference"], "answers": [{"comments": [{"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1471213436, "post_id": 38231387, "comment_id": 65249438, "body": "Nice answer. Thanks for sharing the compiler flag"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1467831516, "last_edit_date": 1467831516, "creation_date": 1467830225, "answer_id": 38231387, "question_id": 38231311, "link": "https://stackoverflow.com/questions/38231311/how-to-declare-a-reference-to-a-member-in-the-same-class/38231387#38231387", "title": "How to declare a reference to a member in the same class?", "body": "<p>You need to have an instance of <code>Test</code> to access non static members of a class:</p>\n\n<pre><code>int main() {\n    Test t; // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n    std::cout &lt;&lt; \"Enter an integer: \";\n    std::cin &gt;&gt; t.rtest;\n    std::cout &lt;&lt; \"\\n\" &lt;&lt; t.rtest &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Also you need to initialize the reference with an appropriate constructor, unless you have the <code>-std=c++11</code> compiler flag enabled as the error message says:</p>\n\n<pre><code>class Test {\npublic:\n    int test;\n    int&amp; rtest; // Nope!  = test;\n\n    Test() : test(), rtest(test) {} // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "edited": false, "score": 0, "creation_date": 1467831049, "post_id": 38231400, "comment_id": 63884815, "body": "Passing the flag to g++ did work, though it took me a couple of minutes of research to figure out how to do it."}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 4, "last_activity_date": 1467830267, "creation_date": 1467830267, "answer_id": 38231400, "question_id": 38231311, "link": "https://stackoverflow.com/questions/38231311/how-to-declare-a-reference-to-a-member-in-the-same-class/38231400#38231400", "title": "How to declare a reference to a member in the same class?", "body": "<blockquote>\n  <p>warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 int&amp; rtest = test;</p>\n</blockquote>\n\n<p>You need to pass the flag <code>-std=c++11</code> to your compiler, otherwise it defaults to an older version of C++ which doesn't allow you to initialize class members in that way.</p>\n\n<blockquote>\n  <p>In function \u2018int main()\u2019: error: expected primary-expression before \u2018.\u2019 token std::cin >> Test.rtest;\n  error: expected primary-expression before \u2018.\u2019 token std::cout &lt;&lt; \"\\n\" &lt;&lt; Test.rtest &lt;&lt; \"\\n\";</p>\n</blockquote>\n\n<p>This is because the <code>.</code> operator wants an <em>instance</em> of your class, not the class itself (that's what <code>::</code> would be for). Declare e.g. <code>Test test;</code> and use <code>test.rtest</code> instead.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 38231400, "answer_count": 2, "score": 1, "last_activity_date": 1467831516, "creation_date": 1467830009, "last_edit_date": 1467830733, "question_id": 38231311, "link": "https://stackoverflow.com/questions/38231311/how-to-declare-a-reference-to-a-member-in-the-same-class", "title": "How to declare a reference to a member in the same class?", "body": "<p>I looked at a lot of other questions and answers and no one seems to have the same question I do.</p>\n\n<p>I am trying to make references to variables, both within a class. I took out the part of the larger program I am writing and isolated it in a little file: test.cpp. I thought maybe my problem had something to do with how I was using the variable with the reference, but the same messages appeared as in the larger program.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Test {\npublic:\n    int test;\n    int&amp; rtest = test;\n};\n\nint main() {\n    std::cout &lt;&lt; \"Enter an integer: \";\n    std::cin &gt;&gt; Test.rtest;\n    std::cout &lt;&lt; \"\\n\" &lt;&lt; Test.rtest &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I received these messages:</p>\n\n<pre><code>warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11\n     int&amp; rtest = test;\n\nIn function \u2018int main()\u2019: error: expected primary-expression before \u2018.\u2019 token\n     std::cin &gt;&gt; Test.rtest;\n\nerror: expected primary-expression before \u2018.\u2019 token std::cout &lt;&lt; \"\\n\" &lt;&lt; Test.rtest &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Why am I getting these? Is what I am trying to do possible? If so, how can I do it?</p>\n"}, {"tags": ["c++", "c++11", "virtual-functions", "linearization"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467829838, "post_id": 38231183, "comment_id": 63884077, "body": "Nitpick: you mean &quot;overridden&quot; not &quot;overloaded&quot;."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1467830148, "post_id": 38231183, "comment_id": 63884264, "body": "The multiple <code>virtual</code> inheritance relationships are a bit of overkill. You only need that for base class sub-objects that would otherwise occur two or more times."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467830483, "post_id": 38231183, "comment_id": 63884483, "body": "&quot;little bit complex&quot; o.O It wouldn&#39;t be quite so bad maybe if the names were in any way sensible."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1467830544, "post_id": 38231183, "comment_id": 63884516, "body": "<i>&quot;the BS-&gt;BCA-&gt;BCS-&gt;T4-&gt;BT4-&gt;BI4 chain&quot;</i> goes up then comes down; that&#39;s not how it works!"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467830759, "post_id": 38231183, "comment_id": 63884640, "body": "While you can&#39;t do this, you can still delegate to BI4 (even to T in a template)."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467833590, "post_id": 38231183, "comment_id": 63886226, "body": "@LightnessRacesinOrbit Other C3 linearization languages/frameworks do this seamlessly, f.e. see the <a href=\"https://dojotoolkit.org\" rel=\"nofollow noreferrer\">dojo</a> Javascript framework."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467833747, "post_id": 38231183, "comment_id": 63886301, "body": "@LightnessRacesinOrbit Uhm, sorry. I wanted to give a sanitized example, the pure logical problem, without the implementation details (you can check the whole code <a href=\"https://github.com/HorvathAkosPeter/pipenet/tree/master/posxx\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467834151, "post_id": 38231183, "comment_id": 63886524, "body": "@Cheersandhth.-Alf Agreed, I&#39;ve made a class hierarchy graph with doxygen and minimized the virtual inheritances to the diamonds."}], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1467829991, "creation_date": 1467829991, "answer_id": 38231306, "question_id": 38231183, "link": "https://stackoverflow.com/questions/38231183/why-are-pure-virtual-methods-not-overridden-from-a-different-inheritance-branch/38231306#38231306", "title": "Why are pure virtual methods not overridden from a different inheritance branch?", "body": "<p><code>BI4</code> does not inherit from <code>BS</code> either directly or indirectly, so its method <code>BI4::meth()</code> is entirely unrelated and cannot override <code>BS::meth()</code>.</p>\n\n<p>You can only override methods from base classes, not from \"sibling\" or \"uncle\" classes.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 5, "last_activity_date": 1467830005, "creation_date": 1467830005, "answer_id": 38231308, "question_id": 38231183, "link": "https://stackoverflow.com/questions/38231183/why-are-pure-virtual-methods-not-overridden-from-a-different-inheritance-branch/38231308#38231308", "title": "Why are pure virtual methods not overridden from a different inheritance branch?", "body": "<p>The rules of the language don't allow it. A virtual function can only be overridden by the declaration of a function with the same name and parameters in a derived class. Since <code>BI4</code> isn't derived from <code>BS</code>, <code>BI4::meth</code> cannot override <code>BS::meth</code>. If a class inherits (directly or indirectly) from both <code>BS</code> and <code>BI4</code>, then it inherits <em>two</em> functions called <code>meth</code>: one from <code>BS</code>, still abstract and not overridden, and one from <code>BI4</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 2, "last_activity_date": 1467831238, "last_edit_date": 1467831238, "creation_date": 1467830727, "answer_id": 38231535, "question_id": 38231183, "link": "https://stackoverflow.com/questions/38231183/why-are-pure-virtual-methods-not-overridden-from-a-different-inheritance-branch/38231535#38231535", "title": "Why are pure virtual methods not overridden from a different inheritance branch?", "body": "<p>There are two main aspects:</p>\n\n<ul>\n<li>A given class can only override member functions from its base classes.<br>\nSince your <code>BI4</code> class doesn't have <code>BS</code> as a base class, it can't override anything from <code>BS</code>.</li>\n<li>It's possible to <em>inherit in an implementation</em> of a pure virtual function defined in a virtual base class, much like in Java, but the class providing that implementation must itself also have that virtual base class.</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>struct Base\n{\n    virtual void foo() = 0;\n};\n\n#ifdef GOOD\n    struct Impl_foo: virtual Base\n    {\n        void foo() override {}\n    };\n#else\n    struct Impl_foo\n    {\n        virtual void foo() {}\n    };\n#endif\n\nstruct Abstract_derived: virtual Base\n{};\n\nstruct Derived\n    : Abstract_derived\n    , Impl_foo      // Java-like implementation inheritance.\n                    // In C++ called \"by dominance\".\n{};\n\nauto main()\n    -&gt; int\n{\n    Derived o;\n    o.foo();\n}\n</code></pre>\n\n<p>Without defining the <code>GOOD</code> macro symbol, this code doesn't compile.</p>\n"}], "owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 38231535, "answer_count": 3, "score": 1, "last_activity_date": 1467831238, "creation_date": 1467829618, "last_edit_date": 1467829958, "question_id": 38231183, "link": "https://stackoverflow.com/questions/38231183/why-are-pure-virtual-methods-not-overridden-from-a-different-inheritance-branch", "title": "Why are pure virtual methods not overridden from a different inheritance branch?", "body": "<p>I have this, maybe a little bit complex class hierarchy:</p>\n\n<pre><code>class BS {\n  public:\n    virtual void meth()=0;\n};\n\nclass BCA : public virtual BS {\n};\n\nclass BSS : public virtual BS {\n};\n\nclass BCS : public virtual BCA, public virtual BSS {\n};\n\nclass BI4 {\n  public:\n    void meth() {};\n};\n\nclass BT4 : public virtual BI4, public virtual BSS {\n};\n\nclass T4 : public virtual BCS, public virtual BT4 {\n};\n\nint main() {\n  T4 t4;\n};\n</code></pre>\n\n<p>Now the problem is that although the <code>void meth()</code> is available in the inheritance graph, despite this code won't compile:</p>\n\n<pre><code>$ g++ -c t.cc -std=c++11\nt.cc: In function \u2018int main()\u2019:\nt.cc:27:6: error: cannot declare variable \u2018t4\u2019 to be of abstract type \u2018T4\u2019\n   T4 t4;\n      ^\nt.cc:23:7: note:   because the following virtual functions are pure within \u2018T4\u2019:\n class T4 : public virtual BCS, public virtual BT4 {\n       ^\nt.cc:3:18: note:        virtual void BS::meth()\n     virtual void meth()=0;\n                  ^\nt.cc:3:18: note:        virtual void BS::meth()\n</code></pre>\n\n<p>It seems to me as if <code>BS</code> somehow wouldn't see the overloaded <code>meth()</code> method through the BS->BCA->BCS->T4->BT4->BI4 chain.<br>\nBut why? The method is clearly available, the C3 linearization algorithm used by the C++ should be able very clearly find it.</p>\n"}, {"tags": ["c++", "vector", "shared-ptr"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1467830032, "post_id": 38231160, "comment_id": 63884209, "body": "Simple code is good but it still must be complete. Read again about how to construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1467830219, "post_id": 38231160, "comment_id": 63884314, "body": "Don&#39;t think you need a shared pointer there. <code>EntityManager</code> is the obvious owner of the entity list and it sure looks like <code>System</code> owns the  <code>EntityManager</code>. All of the ownership and lifetimes should be known."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467830446, "post_id": 38231160, "comment_id": 63884459, "body": "What do you mean by should be known? And what do you suggest to use?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467831211, "post_id": 38231160, "comment_id": 63884919, "body": "<code>System</code> contains an <code>EntityManager</code>.  <code>EntityManager</code> contains a <code>vector</code> of <code>Entity</code>. This <code>vector</code> cannot be destroyed before the <code>EntityManager</code> and the <code>EntityManager</code> cannot be destroyed before <code>System</code>. Ergo the lifespan of all objects is known and nothing is destroyed before <code>System</code>is destroyed, so you have no need to fear <code>System</code> using raw pointers to the <code>vector</code>. The pointer cannot be invalidated before the user is finished with it. That said, add a <code>getEntity</code> function to <code>EntityManager</code> and there is no need for <code>System</code> to even know there is a <code>vector</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1467831311, "post_id": 38231160, "comment_id": 63884989, "body": "You could make <code>EntityManager::m_entities</code> to be a shared pointer initialized via constructor and fixup the rest of the code thereafter, <a href=\"http://ideone.com/zcQTmJ\" rel=\"nofollow noreferrer\">something like this</a>, but I&#39;m not certain it will ultimately solve the <i>real</i> problem you&#39;re set upon. This has a feeling of an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>, so think hard about what you&#39;re really doing."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467830170, "post_id": 38231224, "comment_id": 63884275, "body": "Thank you. Is there a way to solve it using a shared_ptr?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467830249, "post_id": 38231224, "comment_id": 63884340, "body": "@Urefeu Yes, but there is no point. You don&#39;t need a shared pointer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467830272, "post_id": 38231224, "comment_id": 63884352, "body": "@Urefeu Why the obsession with shared_ptr here?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1467830420, "post_id": 38231224, "comment_id": 63884444, "body": "@Urefeu: You appear to be taking huge sweeping statements and applying them to your code without applying any actual thought or reasoning to your choices. Use <code>shared_ptr</code> when it&#39;s appropriate, not because somebody told you not to use raw pointers. Why do you need any pointers at all?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467830581, "post_id": 38231224, "comment_id": 63884543, "body": "And I need it because that is what I have explained, I want my System&#39;s m_entities to be like the EntityManager&#39;s one at any time."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467830607, "post_id": 38231224, "comment_id": 63884557, "body": "@Urefeu See the <a href=\"http://stackoverflow.com/a/38231385/4505712\">answer provided by Lightness Races in Orbit</a> which states you could make <code>m_entities</code> in <code>EntityManager</code> a <code>shared_ptr</code>. <b>However, heed the information everyone is giving you.</b> You don&#39;t have to use <code>shared_ptr</code> for this, you may not need pointers at all, there are cicumstances where raw pointers are perfectly fine, etc."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467830928, "post_id": 38231224, "comment_id": 63884737, "body": "@Urefeu It&#39;s unclear what you&#39;re doing versus what is required/necessary. Why can&#39;t you use normal stack allocated objects and copy semantics?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467831174, "post_id": 38231224, "comment_id": 63884898, "body": "I am not familiar with that, I have always done it with pointers (not shared ones though)."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467831390, "post_id": 38231224, "comment_id": 63885040, "body": "@Urefeu A good guideline is to not use dynamic allocation (i.e., <code>new</code>) unless you need to. (i.e., prefer stack allocation <code>int x = 0;</code> over dynamic allocation <code>int* x = new int(0);</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467831558, "post_id": 38231224, "comment_id": 63885147, "body": "That&#39;s what I try to do, but in order to have the same instance at two different places, what can I do but a reference/pointer?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1467831951, "post_id": 38231224, "comment_id": 63885381, "body": "Why do you <b><i>need</i></b> the same instance in more than one place as opposed to copying? Why shouldn&#39;t the <code>EntityManager</code> be copied or shared instead of it&#39;s internal data? Also, see <a href=\"http://stackoverflow.com/questions/38231160/pointer-to-a-vector-doesnt-point/38231224?noredirect=1#comment63884919_38231160\">the comment by user4581301</a>. I think all the questions surround <i>why you think you <b>need</b> to do it the way you&#39;re trying to do it</i> (i.e., maybe you&#39;re correct but explain the requirements and constraints in your question)."}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": false, "score": 2, "last_activity_date": 1467830122, "last_edit_date": 1467830122, "creation_date": 1467829741, "answer_id": 38231224, "question_id": 38231160, "link": "https://stackoverflow.com/questions/38231160/pointer-to-a-vector-doesnt-point/38231224#38231224", "title": "Pointer to a vector doesn&#39;t point", "body": "<p>Your problem is this line: <code>return std::make_shared&lt;std::vector&lt;Entity&gt; &gt;(m_entities);</code></p>\n\n<p>What is happening is that the <code>shared_ptr</code> manages a new <code>std::vectory&lt;Entity&gt;</code> container which is initialized as a copy of <code>m_entities</code>. Therefore, modifying the instance in the <code>shared_ptr</code> doesn't modify the data member in the <code>EntityManager</code> class and of course the <code>shared_ptr</code> won't see changes made to <code>EntityManager::m_entities</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467830668, "post_id": 38231385, "comment_id": 63884593, "body": "I&#39;m a bit lost with the use of different pointers then. When should I use raw, shared, unique ones... ?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467830703, "post_id": 38231385, "comment_id": 63884609, "body": "@Urefeu Research other questions on this same topic and then possibly ask a <i>new question</i>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467831347, "post_id": 38231385, "comment_id": 63885013, "body": "@Urefeu Covered here: <a href=\"http://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when\" title=\"which kind of pointer do i use when\">stackoverflow.com/questions/8706192/&hellip;</a> The names have changed slightly since that post, but the logic still holds."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1467830218, "creation_date": 1467830218, "answer_id": 38231385, "question_id": 38231160, "link": "https://stackoverflow.com/questions/38231160/pointer-to-a-vector-doesnt-point/38231385#38231385", "title": "Pointer to a vector doesn&#39;t point", "body": "<p><code>std::make_shared</code> doesn't \"make this thing shared\"; it \"makes a thing that will be shared\".</p>\n\n<p>So, you can't just make a shared pointer out of nowhere that points to something that already exists.</p>\n\n<p>Your code dynamically allocates a <code>std::vector</code>, <em>copy constructed</em> from <code>m_entities</code> and managed by a <code>std::shared_ptr</code>. It's shorthand for this:</p>\n\n<pre><code>std::vector&lt;Entity&gt;* ptr_to_copy = new std::vector&lt;Entity&gt;(m_entities);\nreturn std::shared_ptr(ptr_to_copy);\n</code></pre>\n\n<p>It's not clear what you're trying to do, from the code that (by your own admission) does not achieve that goal. But it seems unlikely that <code>std::shared_ptr</code> is appropriate here.</p>\n\n<p>If it is, then make the vector dynamically-allocated and shared from the start; otherwise, just return a reference to the vector as it is.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1467837188, "last_edit_date": 1495540354, "creation_date": 1467836498, "answer_id": 38233077, "question_id": 38231160, "link": "https://stackoverflow.com/questions/38231160/pointer-to-a-vector-doesnt-point/38233077#38233077", "title": "Pointer to a vector doesn&#39;t point", "body": "<p>Hack example of a pointer-free solution. </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n//Hack-sample Entity class\nclass Entity\n{\n    public:\n        Entity(const char * name): m_name(name)\n        {\n\n        }\n        void print() // this is stupid in real life. Prefer a &lt;&lt; overload\n        {\n            std::cout &lt;&lt; \"Hi! I'm \" &lt;&lt; m_name &lt;&lt; \"!\\n\"; \n        }\n    private:\n        std::string m_name;\n};\n\nclass EntityManager\n{\n    private:\n        std::vector&lt;Entity&gt; m_entities;\n\n    public:\n        // hide the fact that a vector is being used to store the entities.\n        // you can now swap out the vector for most standard containers without\n        // changing any code other than the using and the declaration of m_entities\n        using iterator = std::vector&lt;Entity&gt;::iterator;\n\n        EntityManager(): m_entities({\"bob\", \"bill\"}) \n                         // just pre-loading a few test entities\n        {\n            // RAII says you should load the entities from their source here\n        }\n        // get the first entity. \n        iterator begin()\n        {\n            return m_entities.begin();\n        }\n        // get the end of the entity list\n        iterator end()\n        {\n            return m_entities.end();\n        }\n\n        // adds an entity\n        void addEntity(const Entity &amp; entity)\n        {\n            m_entities.push_back(entity);\n        }\n\n        // removes an entity\n        iterator removeEntity(iterator rem)\n        {\n            return m_entities.erase(rem);\n        }\n\n};\n\nclass System\n{\n    public:\n\n        // example method to show System working with EntityManager by printing all of the Entities\n        void printEntities()\n        {\n            for (EntityManager::iterator it = m_entityManager.begin();\n                 it != m_entityManager.end();\n                 ++it)\n            {\n                it-&gt;print();\n            }\n        }\n\n        // example method to show System working with EntityManager by adding Entities\n        void addMoreEntities()\n        {\n            m_entityManager.addEntity(Entity(\"Ted \\\"Theodore\\\" Logan\"));\n            m_entityManager.addEntity(Entity(\"Excellent!!!\"));\n        }\n\n    private:\n        EntityManager m_entityManager ;\n};\n\n// sample test\nint main()\n{\n    System test;\n\n    test.printEntities();\n    test.addMoreEntities();\n    test.printEntities();\n\n}\n</code></pre>\n\n<p>THIS HAS BEEN A HACK. THIS HAS ONLY BEEN A HACK. </p>\n\n<p>If you want to do <code>EntityManager</code> right, see <a href=\"https://stackoverflow.com/questions/7758580/writing-your-own-stl-container/7759622#7759622\">Writing your own STL Container</a> for hints. If you want all of the bells and whistles, the job is fairly complicated. Depending on how you are using <code>EntityManager</code> and the complexity of the <code>Entity</code> management logic, you may be better off discarding <code>EntityManager</code> and just using the plain, old <code>std::vector</code>.</p>\n\n<p>Addendum: <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">What is meant by Resource Acquisition is Initialization (RAII)?</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467837188, "creation_date": 1467829522, "question_id": 38231160, "link": "https://stackoverflow.com/questions/38231160/pointer-to-a-vector-doesnt-point", "title": "Pointer to a vector doesn&#39;t point", "body": "<p>I have simplified the code as much as possible. \nSo I have two class:</p>\n\n<pre><code>class EntityManager\n{\n    public:\n        std::shared_ptr&lt;std::vector&lt;Entity&gt; &gt; getEntities()\n        {\n            return std::make_shared&lt;std::vector&lt;Entity&gt; &gt;(m_entities);\n        }\n\n    private:\n        std::vector&lt;Entity&gt; m_entities{};\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class System\n{\n    public:\n        void loadEntities(std::shared_ptr&lt;std::vector&lt;Entity&gt; &gt; entities)\n        {\n            m_entities = entities;\n        }\n\n    private:\n        std::shared_ptr&lt;std::vector&lt;Entity&gt; &gt; m_entities;\n};\n</code></pre>\n\n<p>Now basically I want the m_entities of System to point to the m_entities of EntityManager.</p>\n\n<p>I did this:</p>\n\n<pre><code>system = System();\nsystem.loadEntities(m_entityManager.getEntities());\n</code></pre>\n\n<p>But then I pushed back an element into the m_entities vector of EntityManager and this element wasn't added in the m_entities vector of System, which means my pointer doesn't point. </p>\n\n<p>Where is my mistake?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "gcc", "standards"], "comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1467828586, "post_id": 38230856, "comment_id": 63883377, "body": "Are you sure you don&#39;t <code>volatile</code> the pointer with that declaration? Try <code>unsigned char * volatile bytePtr</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1467828589, "post_id": 38230856, "comment_id": 63883379, "body": "IMHO using <code>volatile</code> is a bug unless proven otherwise. But most likely a bug. <code>volatile</code> is so underspecified as to be dangerous - just don&#39;t use it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1467828598, "post_id": 38230856, "comment_id": 63883384, "body": "[OT] Why not use <a href=\"http://en.cppreference.com/w/cpp/string/byte/memset\" rel=\"nofollow noreferrer\"><code>memset</code></a>?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 20, "creation_date": 1467828626, "post_id": 38230856, "comment_id": 63883402, "body": "@JesperJuhl: No, <code>volatile</code> is appropriate in this case."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 9, "creation_date": 1467828653, "post_id": 38230856, "comment_id": 63883417, "body": "@NathanOliver: That won&#39;t work, because compilers can optimize out dead stores even if they use <code>memset</code>.  The problem is that compilers know exactly what <code>memset</code> does."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467828763, "post_id": 38230856, "comment_id": 63883472, "body": "@DietrichEpp Oops.  I need to read further: <i>std::memset may be optimized away (under the as-if rules) if the object modified by this function is not accessed again for the rest of its lifetime. For that reason, this function cannot be used to scrub memory</i>"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1467828773, "post_id": 38230856, "comment_id": 63883473, "body": "What about calling an external function (from a different compilation unit), passing pointer and size to it, and having that function to only do <code>memset</code>?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 9, "creation_date": 1467828778, "post_id": 38230856, "comment_id": 63883477, "body": "@PaulStelian: That would make a <code>volatile</code> pointer, we want a pointer to <code>volatile</code> (we don&#39;t care whether <code>++</code> is strict, but whether <code>*p = 0</code> is strict)."}, {"owner": {"reputation": 2300, "user_id": 353094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2ef00cd1457bcdc46f506983384f57e?s=128&d=identicon&r=PG", "display_name": "leetNightshade", "link": "https://stackoverflow.com/users/353094/leetnightshade"}, "edited": false, "score": 2, "creation_date": 1467829003, "post_id": 38230856, "comment_id": 63883616, "body": "<a href=\"http://www.daemonology.net/blog/2014-09-04-how-to-zero-a-buffer.html\" rel=\"nofollow noreferrer\">daemonology.net/blog/2014-09-04-how-to-zero-a-buffer.html</a> The final conclusion here is already added as an answer, use <code>memset_s</code>."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 7, "creation_date": 1467829352, "post_id": 38230856, "comment_id": 63883793, "body": "@JesperJuhl: There&#39;s nothing under-specified about volatile."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1467830451, "post_id": 38230856, "comment_id": 63884461, "body": "@cooky451 I have a feeling that <code>SecureZeroMemory</code> goes beyond what <code>memset_s</code> is specified to do. Writing a zero to a memory address is only guaranteed to affect the first level cache. You still have more levels of cache and the main memory to deal with. So I expect that <code>SecureZeroMemory</code> contains cache flushing code. And although that may be the intent for <code>memset_s</code>, it&#39;s not explicitly specified."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467832861, "post_id": 38230856, "comment_id": 63885856, "body": "what if you do *bytePtr++ -= *bytePtr; ?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1467835274, "post_id": 38230856, "comment_id": 63887159, "body": "@GManNickG: Would you prefer to say that C lacks directives to provide guarantees about memory ordering which some kinds of program need and which all implementations should be able to uphold without forcing the programmer to jump through hoops?"}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 1, "creation_date": 1467844468, "post_id": 38230856, "comment_id": 63891360, "body": "@mvidelgauz - and then someone has LTO enabled..."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467850342, "post_id": 38230856, "comment_id": 63893067, "body": "@fassl That&#39;s UB because there&#39;s no sequence point between the postincrement and the other side, so anything can happen. Please don&#39;t do &#39;clever&#39; things like that. See: <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\" title=\"undefined behavior and sequence points\">stackoverflow.com/questions/4176328/&hellip;</a>"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467856494, "post_id": 38230856, "comment_id": 63894424, "body": "@underscore_d ok then just increment it afterwards: *bytePtr -= *bytePtr; bytePtr++; since the compiler can not assume any value for this memory it cannot optimize it out and thats what was asked in this question iirc?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 3, "creation_date": 1467857758, "post_id": 38230856, "comment_id": 63894698, "body": "@fassl What&#39;s your point? (pretending <i>yes</i> to the seemingly open question of whether a <code>volatile</code> pointer can confer <code>volatile</code>ity upon a declared-non-<code>volatile</code> referent, then) The original code here would still perform volatile writes, which also can&#39;t be skipped or reordered, but with the benefit that the code states what it&#39;s doing (<code>= 0</code>), rather than pointlessly obfuscating itself for no benefit (<code>self = self - self</code>, I mean c&#39;mon). Most people reading such a piece of code would conclude that the writer was trying way too hard to look clever - and not succeeding."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1467862895, "post_id": 38230856, "comment_id": 63895672, "body": "whats your point underscore_d? &quot;always zeros memory and doesn&#39;t get optimized away&quot; value = value - value translates into value = 0 except that the compiler cannot assume the value you are setting, at least it didnt when i tried it in the compiler link that was posted in the question"}, {"owner": {"reputation": 4344, "user_id": 988870, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b91462071f7b1d4d77c8ca5e1883d1a8?s=128&d=identicon&r=PG", "display_name": "Jarrod Smith", "link": "https://stackoverflow.com/users/988870/jarrod-smith"}, "edited": false, "score": 0, "creation_date": 1467871597, "post_id": 38230856, "comment_id": 63897937, "body": "The nuclear option: <a href=\"http://stackoverflow.com/a/2220565\">stackoverflow.com/a/2220565</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 1, "creation_date": 1467885347, "post_id": 38230856, "comment_id": 63905906, "body": "@fassl Let me rephrase that, then. The point here is that the Standard does not specify, or <i>underspecifies</i>, whether access to a declared non-<code>volatile</code> object through a <code>volatile</code> pointer/reference confers volatility on said object during such accesses. If it <i>did</i>, the simple <code>= 0</code> would work perfectly and doesn&#39;t look totally absurd. But this it doesn&#39;t <i>seem</i> to be required - or compilers act like it isn&#39;t - anything can happen here. So you just found a hack that seems to do it on one particular compiler. That&#39;s not portable, so it&#39;s not a good idea, and it doesn&#39;t mean the code is clever"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467889107, "post_id": 38230856, "comment_id": 63908330, "body": "@cooky451 Re your original assumption and what I perceive as a lot of uncertainty about whether or not it was valid, I&#39;ve opened a <code>language-lawyer</code> question on whether <code>volatile</code> pointers/reference are supposed to confer <code>volatile</code> semantics upon their referents: <a href=\"http://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\" title=\"does accessing a declared non volatile object through a volatile reference point\">stackoverflow.com/questions/38243501/&hellip;</a> All thoughts welcome. Thanks for the inspiration! And the lack of sleep!"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467893205, "post_id": 38230856, "comment_id": 63911146, "body": "@underscore_d are you telling me a simple subtraction is a hack and not portable? to achieve what was asked in the question one has to read from a volatile value, not just write to a volatile value. it even does work for the case of the second code example with gcc 6.1 which cooky451 posted"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 2, "creation_date": 1467893536, "post_id": 38230856, "comment_id": 63911363, "body": "@fassl I&#39;ll rephrase again. What I&#39;m telling you is it&#39;s unnecessary. And it&#39;s a &quot;hack&quot; because the Standard doesn&#39;t seem to guarantee either piece of code will produce the expected result, thus making your workaround highly context-sensitive and unreliable. Where the Standard <i>does</i> explicitly guarantee <code>volatile</code> behaviour, <i>only a write is needed</i>; read source doesn&#39;t matter. In such cases, the Standard requires <code>= 0</code> to write 0 each time. But when the underlying object isn&#39;t <code>volatile</code>, only your pointer/reference, there&#39;s no (strong) guarantee. You&#39;re probably just confusing the optimiser"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467935017, "post_id": 38230856, "comment_id": 63934778, "body": "@underscore_d: If one casts the pointer to <code>uintptr_t</code>, xors it with a <code>volatile</code>-qualified value which happens to always be zero, and then converts back to a pointer, that should pretty well eliminate the possibility of the compiler figuring out that it can optimize things away, without adding per-loop overhead or introducing potentially thread-unsafe behaviors."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467969689, "post_id": 38230856, "comment_id": 63945900, "body": "@supercat Sure, but if that&#39;s the case, it seems extraordinarily flimsy to rely on code that&#39;s in no way guaranteed to prevent optimisation, but which is just currently &#39;confusing enough&#39; to do so. What if, as is likely, they strengthen optimisation in the next release? Bad times ahead! We&#39;d either have to painstakingly check ASM each time, or never upgrade the compiler, or something in between. As I&#39;m sure is the same for you, I&#39;d vastly prefer that the Standard specifically defined a proper <i>guaranteed</i> way for people to be able to do such things. I just can&#39;t recommend hacks that &#39;work now&#39;"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467992869, "post_id": 38230856, "comment_id": 63960848, "body": "@underscore_d: If the &quot;always_zero&quot; symbol is exported such that a compiler can&#39;t know what references might exist, the only way a compiler could assume that the indicated operation couldn&#39;t make the pointer point anywhere in the universe would be if it read the always_zero volatile, checked if it was zero, and then had different code paths for the zero and non-zero cases.  While it would be theoretically possible for a compiler to do that, I can&#39;t think of any circumstance where that would be more efficient than regarding it as a full memory and causality barrier."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467993089, "post_id": 38230856, "comment_id": 63960964, "body": "@underscore_d: Besides, any compiler that wants to be that obtuse while remaining standards-compliant could just as easily do either of the following: (1) try to allocate an extra 5 petabytes of stack frame for any function whose source text contains the letter &quot;z&quot; and behave arbitrarily if the space is unavailable; (2) as above, but for functions that don&#39;t contain the letter &quot;z&quot;.  Since no program can be expected to work on an obtuse-but-compliant implementation, programmers shouldn&#39;t be expected to write code that&#39;s proof against all forms of obtuseness."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 1, "creation_date": 1468351094, "post_id": 38230856, "comment_id": 64088548, "body": "<a href=\"http://stackoverflow.com/a/28655297/3404097\">Requirements for behavior of pointer-to-volatile pointing to non-volatile object</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1487622575, "post_id": 38230856, "comment_id": 71857962, "body": "^ I can&#39;t express enough how much people need to read <a href=\"http://stackoverflow.com/a/28655297/3404097\">the link directly above this comment</a> &amp; @philipxy&#39;s answer to <a href=\"http://stackoverflow.com/questions/38243501\">my question linked earlier</a>. That recent Defect Report indicates that indeed it looks like C&#39;s original intent was that volatile semantics were a property of <i>lvalues</i>, not their referred objects (only) - &amp; that such semantics are what the C++ Standard &amp; all extant C compilers have been doing all along! Result!"}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 4, "creation_date": 1467828957, "post_id": 38230939, "comment_id": 63883587, "body": "Note: This is part of the C11 standard, and is not available in all toolchains yet."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 5, "creation_date": 1467828988, "post_id": 38230939, "comment_id": 63883606, "body": "One should note that interestingly, this function is standardized for C11 but not for C++11, C++14 or C++17. So technically it&#39;s not a solution for C++, but I agree that this seems like the best option from a practical perspective. At this point I do wonder though if the behavior from GCC is conforming or not. Edit: Actually, VS 2015 doesn&#39;t have memset_s, so it&#39;s not all that portable yet."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 2, "creation_date": 1467829422, "post_id": 38230939, "comment_id": 63883842, "body": "@cooky451 I thought <a href=\"http://stackoverflow.com/a/38060437/3484570\">C++17 pulls the C11 standard library in by reference</a> (see second Misc)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1467829442, "post_id": 38230939, "comment_id": 63883853, "body": "As far as I know, <i>only</i> recent versions of OSX provide <code>memset_s</code>.  There are about five different competing names for this function; the only one that is provided by more than one C library is <code>explicit_bzero</code>, which is in <i>both</i> FreeBSD and OpenBSD, and possibly also musl libc.  And I&#39;m trying to get it into glibc, in my copious free time."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 14, "creation_date": 1467829569, "post_id": 38230939, "comment_id": 63883917, "body": "Also, describing <code>memset_s</code> as C11-standard is an overstatement.  It is part of Annex K, which is optional in C11 (and therefore also optional in C++).  Basically all implementors, <i>including</i> Microsoft, whose idea it was in the first place (!), have declined to pick it up; last I heard they were talking about scrapping it in C-next."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1467829812, "post_id": 38230939, "comment_id": 63884062, "body": "@zwol Why Microsoft wouldn&#39;t pick it up considering that they&#39;d just have to call SecureZeroMemory is beyond me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831059, "post_id": 38230939, "comment_id": 63884823, "body": "@cooky451 So write your code with <code>SecureZeroMemory()</code> instead of <code>memset_s()</code>.  Hmm, maybe that makes code less portable away from MS.  smells like <a href=\"https://en.wikipedia.org/wiki/Embrace,_extend_and_extinguish\" rel=\"nofollow noreferrer\">Embrace, extend and extinguish</a>"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 8, "creation_date": 1467831126, "post_id": 38230939, "comment_id": 63884870, "body": "@cooky451 In certain circles, Microsoft is notorious for forcing stuff into the C standard over basically everyone else&#39;s objections and then not bothering to implement it themselves.  (The most egregious example of this is C99&#39;s relaxation of the rules for what the underlying type of <code>size_t</code> is allowed to be.  The Win64 ABI is not conformant with C90.  That would have been ... not <i>ok</i>, but not terrible ... if MSVC had actually picked up C99 things like <code>uintmax_t</code> and <code>%zu</code> in a timely fashion, but they <i>didn&#39;t</i>.)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1467832375, "post_id": 38230939, "comment_id": 63885607, "body": "@nwp - C++17 refers to C11, but at the same time excludes some of the C headers and the *_s functions in Annex K. See <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0063r2.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0063r2.html</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467849229, "post_id": 38230939, "comment_id": 63892769, "body": "The paper that introduced <code>memset_s()</code>, N1381, seems to imply - at least by omitting to mention any requirement about the original declaration - that it was already defined that using a <code>volatile</code> pointer to alter non-volatile data should respect the qualifier of the pointer, regardless of that of the data, and that compilers not doing this &quot;violate the standard by not always respecting the <code>volatile</code>&quot; qualifier. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf</a> Does that make the accepted answer incorrect?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531949025, "post_id": 38230939, "comment_id": 89793857, "body": "The authors of the C89, where <code>volatile</code> was introduced, recognize in the Rationale that it is possible for an implementation to be of such poor quality as to be unsuitable for any purpose, but this shouldn&#39;t be a problem if people make a bona fide effort to produce useful implementations.  If a particular behavior would be useful when writing some kind of code for a particular platform, someone seeking to write a quality implementation suitable for processing such code on that platform should support it if practical regardless of whether the Standard would require it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531949848, "post_id": 38230939, "comment_id": 89794203, "body": "I find it really sad that compiler writers have completely failed to recognize that when the Standard fails to mandate something, that means failure to do it will not render an implementation non-conforming.  It says nothing about whether such failure would make the implementation less suitable for various purposes than it otherwise would be."}], "tags": [], "owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 15, "last_activity_date": 1467829522, "last_edit_date": 1467829522, "creation_date": 1467828750, "answer_id": 38230939, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38230939#38230939", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<blockquote>\n  <p>I need a function that (like SecureZeroMemory from the WinAPI) always zeros memory and doesn't get optimized away,</p>\n</blockquote>\n\n<p>This is what the standard function <code>memset_s</code> is for.</p>\n\n<hr>\n\n<p>As to whether this behavior with volatile is conforming or not, that's a bit hard to say, and volatile has been <a href=\"http://blog.regehr.org/archives/503\">said</a> to have long been plagued with bugs.</p>\n\n<p>One issue is that the specs say that \"Accesses to volatile objects are evaluated strictly according to the rules of the abstract machine.\" But that only refers to 'volatile objects', not accessing a non-volatile object via a pointer that has had volatile added. So apparently if a compiler can tell that you're not really accessing a volatile object then it's not required to treat the object as volatile after all.</p>\n"}, {"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 6, "creation_date": 1467829738, "post_id": 38231071, "comment_id": 63884019, "body": "That&#39;s interesting... I&#39;d be interested in seeing a reference to the committee&#39;s comments."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 10, "creation_date": 1467830412, "post_id": 38231071, "comment_id": 63884438, "body": "How does this square with 6.7.3(7)&#39;s definition of <code>volatile</code> as <i>[...] Therefore any expression referring to such an object shall be evaluated strictly according to the rules of the abstract machine, as described in 5.1.2.3. <b>Furthermore, at every sequence point the value last stored in the object shall agree with that prescribed by the abstract machine</b>, except as modified by the unknown factors mentioned previously. What constitutes an access to an object that has volatile-qualified type is implementation-defined.</i> ?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 15, "creation_date": 1467830997, "post_id": 38231071, "comment_id": 63884781, "body": "@IwillnotexistIdonotexist The key word in that passage is <i>object</i>.  <code>volatile sig_atomic_t flag;</code> is a volatile <i>object</i>.  <code>*(volatile char *)foo</code> is merely an <i>access through a volatile-qualified lvalue</i> and the standard does not require that to have any special effects."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 2, "creation_date": 1467831035, "post_id": 38231071, "comment_id": 63884806, "body": "What about GCC using memset in the &quot;raw&quot; function? Memset will likely use 16, 8 or 4 byte stores, doesn&#39;t that have the potential to mess with memory-mapped registers?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831408, "post_id": 38231071, "comment_id": 63885051, "body": "@cooky451 Yes. Hmm, that might actually genuinely be a bug."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467831688, "post_id": 38231071, "comment_id": 63885219, "body": "@cooky451 My copies of GCC 5.4 and 6.1 do not compile your <code>volatileZeroMemory</code>, in isolation, to call <code>memset</code>.  I&#39;m not sure what&#39;s going on with godbolt."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467832827, "post_id": 38231071, "comment_id": 63885835, "body": "@zwol Hm, I don&#39;t have access to GCC 6.1 outside of godbolt sadly. Is your GCC 6.1 generating the same code as 5.3 on godbolt?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467833060, "post_id": 38231071, "comment_id": 63885954, "body": "@cooky451 Looks the same to me, yes.  Anyhow it is definitely a loop writing one byte at a time in forward order, and not a call to any library function."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1467834861, "post_id": 38231071, "comment_id": 63886942, "body": "Your use of VLAIS (VLA in struct) is a very bad idea because it is actively not supported on non-gcc compilers that otherwise implement gcc extensions. Instead of <code>&quot;m&quot;</code> constraint with a complex type, just use <code>&quot;r&quot;</code> constraint with the address of the memory, and a <code>&quot;memory&quot;</code> clobber. Then the compiler cannot make any assumptions about what the asm does with the pointed-to object (or any other reachable memory) and thus cannot optimize it out."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 2, "creation_date": 1467835204, "post_id": 38231071, "comment_id": 63887115, "body": "@R.. The answer already points out that VLAIS only works with GCC and only in C.  As for your alternative, we have discussed that more than once already, but I might not have said this sufficiently baldly: I do not think either gcc or &quot;non-gcc compilers that otherwise implement gcc extensions&quot; can be counted on to interpret it the way you think it should be interpreted."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1467840890, "post_id": 38231071, "comment_id": 63889929, "body": "@zwol: They can be counted on to interpret it as that, and they do. The compiler must assume asm can read any memory whose address is available to it in any way (this includes any address that&#39;s escaped the compiler&#39;s ability to analyze the extent of its visibility), and if the asm block has a <code>&quot;memory&quot;</code> clobber, that the asm might also modify any such address."}, {"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467841589, "post_id": 38231071, "comment_id": 63890255, "body": "@zwol I edited some experiments into the question, might be interesting to you. For example, does your GCC 6.1 also remove the stores if you remove the memory fence?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 3, "creation_date": 1467844062, "post_id": 38231071, "comment_id": 63891247, "body": "The Standard says what criteria something must meet to be a &quot;compliant&quot; implementation.  It makes no effort to describe what criteria an implementation on a given platform must meet to be a &quot;good&quot; implementation or a &quot;usable&quot; one.  GCC&#39;s treatment of <code>volatile</code> may be sufficient to make it a &quot;compliant&quot; implementation, but that doesn&#39;t mean it&#39;s sufficient to be &quot;good&quot; or &quot;useful&quot;.  For many kinds of systems programming it should be regarded as woefully deficient in those regards."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467847925, "post_id": 38231071, "comment_id": 63892406, "body": "@cooky451 Please ask a new question about memory fences, etc."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1467847967, "post_id": 38231071, "comment_id": 63892416, "body": "@R.. I believe you are wrong about that, but I&#39;m not interested in discussing it any further here.  If I ever get around to bringing this back up on the gcc and/or clang mailing lists, that would be a much more appropriate venue."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467848291, "post_id": 38231071, "comment_id": 63892513, "body": "@DietrichEpp Sorry for the delay.  The clearest statements I&#39;m aware of will be found by searching the C99 Rationale for &quot;volatile&quot;.  (Interestingly, there is one sentence in there that implies that the committee <i>meant</i> for <code>*(volatile T*)x</code> to force that one access to <code>x</code> to be treated as volatile; but the actual wording of the standard does not achieve this.) (I regret to say I do not know where to find an online+freely available copy of the Rationale.)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467849133, "post_id": 38231071, "comment_id": 63892747, "body": "@zwol N1381, at least by omitting the condition, seems to claim it&#39;s defined that using a <code>volatile</code> pointer to alter non-volatile data should respect the qualifier of the pointer, regardless of that of the data, and that compilers not doing this &quot;violate the standard by not always respecting the <code>volatile</code>&quot; qualifier. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1381.pdf</a> Either this doc is wrong or haphazardly worded, or your answer is on the wrong track - albeit understandably as you&#39;re presuming a mirror of the same &#39;original declaration&#39; rule we use for <code>const_cast</code>. What do you think?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1467849632, "post_id": 38231071, "comment_id": 63892878, "body": "From n1548 &#167;6.7.3 &#182;6 the standard uses the phrase &quot;object defined with a volatile-qualified type&quot; to distinguish it from &quot;lvalue with volatile-qualified type&quot;.  It&#39;s unfortunate that this &quot;object defined with&quot; versus &quot;lvalue&quot; distinction does not carry forward, and the standard then uses &quot;object that has volatile-qualified type&quot;, and says that &quot;what constitutes access to an object that has volatile-qualified type is implementation-defined&quot; (which could have said &quot;lvalue&quot; or &quot;object defined with&quot; for clarity).  Oh well."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467853678, "post_id": 38231071, "comment_id": 63893828, "body": "@underscore_d You may be right; I&#39;m afraid I haven&#39;t enough brain right now to parse standardese carefully enough to tell.  I suggest you write up a new [language-lawyer] question specifically about this and hopefully some other people will chime in.  (It may also be the case that the rules changed in C11 or post-C11 drafts; I don&#39;t recognize the N-numbers you&#39;re quoting, and I have never close-read C11 to the extent that I did C99 back when C compilers were my actual job.)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467854086, "post_id": 38231071, "comment_id": 63893927, "body": "@zwol You and me both! Brain cannot live on C++ alone (sleep would help). The thought of opening <a href=\"http://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument\">another</a> question fills me with horror at present but is definitely a worthwhile enterprise for another day. Of course, let me know if you have any revelations before then!"}, {"owner": {"reputation": 1557, "user_id": 1156377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0tsJk.jpg?s=128&g=1", "display_name": "Mark K Cowan", "link": "https://stackoverflow.com/users/1156377/mark-k-cowan"}, "edited": false, "score": 0, "creation_date": 1467888887, "post_id": 38231071, "comment_id": 63908215, "body": "Excellent, especially the note about register usage at the end!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467888927, "post_id": 38231071, "comment_id": 63908237, "body": "@zwol Here&#39;s the suggested <code>language-lawyer</code> question: <a href=\"http://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\" title=\"does accessing a declared non volatile object through a volatile reference point\">stackoverflow.com/questions/38243501/&hellip;</a> All thoughts welcome."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467903445, "post_id": 38231071, "comment_id": 63918838, "body": "@underscore_d I have edited my answer to express uncertainty about whether GCC is conformant, and add links to your followup(s).  Thanks for writing them up."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467904340, "post_id": 38231071, "comment_id": 63919463, "body": "@zwol You&#39;re welcome, and thanks for the great edit and linking back! However, I&#39;m not sure the GCC threads are relevant, as that just seems to be an corner-case bug in the optimiser, not contingent on the uncertain intention of the Standard. But if you still want to include them somewhere, that&#39;s very kind!"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1467904780, "post_id": 38231071, "comment_id": 63919784, "body": "C vs. C++:  <a href=\"https://godbolt.org/g/NHfMYY\" rel=\"nofollow noreferrer\">godbolt&#39;s gcc6.1 will actually generate the stores</a> to zero <code>arr[]</code> if you use <code>-xc</code> and declare it as <code>volatile char arr[4];</code>.  If either of those are omitted, the object never exists at all (which seems valid in this case where no reference to it escapes the function, and the function never stores anything there)."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 3, "creation_date": 1467911431, "post_id": 38231071, "comment_id": 63923930, "body": "The C spec also rather directly says <i>&quot;An actual implementation need not evaluate part of an expression if it can deduce that its value is not used and that no needed side effects are produced (<b>including any caused by calling a function or accessing a volatile object</b>).&quot;</i> (emphasize mine)."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467911495, "post_id": 38231071, "comment_id": 63923965, "body": "This would allow even optimizing away a read from a global <code>volatile</code> if the compiler &quot;can deduce that its value is not used&quot;?"}, {"owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467919662, "post_id": 38231071, "comment_id": 63928611, "body": "@JohannesSchaub-litb &quot;and that no needed side effects are produced&quot; is probably the key part there. Volatile reads are <i>a</i> side effect, so if you have <code>volatile char* x = 0x40;  *x;</code>, the compiler cannot deduce that the side effect isn&#39;t needed, and has to preserve it. But if it can deduce that the side effect isn&#39;t needed, it can probably eliminate it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1467922471, "post_id": 38231071, "comment_id": 63930072, "body": "@zwol: The Standard very makes quite clear that standard-compliance does not imply quality, and that it&#39;s entirely possible for an implementation to be standard-compliant and useless.  I would suggest that saying that the effects of volatile access are &quot;implementation-defined&quot; would mean that a compiler which documented that the qualifier had no effect whatsoever would fall into the &quot;compliant but useless&quot; category.  The people at gcc should be less interested in what is mandated by the Standard and more interested in what is necessary to make something useful."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467923117, "post_id": 38231071, "comment_id": 63930356, "body": "@supercat I don&#39;t hack on GCC anymore, and I write these answers from the pragmatic perspective that, even if the GCC devs make everything <i>perfect</i> in the next release, we&#39;ll still be working around the older versions for years to come.  Your regular complaints about it would be better directed at the GCC mailing lists.  Or you might consider teaming up with John Regehr on his &quot;Friendly C&quot; project."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467934432, "post_id": 38231071, "comment_id": 63934623, "body": "@zwol: It has long been apparent that the authors of gcc are interested in processing programs that could be efficiently handled without using features that can be cheaply supported on only 99.9% of the platforms upon which C implementations exist, rather than in efficiently handling programs that could benefit from such features.  I am still puzzled, however, by the mentality that seems to think there&#39;s some confusion about what a programmer might mean when writing code that stores to a volatile-qualified pointer.  On all the platforms I&#39;ve seen, the answer would be pretty obvious."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1467934553, "post_id": 38231071, "comment_id": 63934656, "body": "@supercat What part of &quot;Your regular complaints about [this] would be better directed at the GCC mailing lists&quot; was unclear?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467934729, "post_id": 38231071, "comment_id": 63934713, "body": "@zwol: My point is that I don&#39;t think there&#39;s anything I could tell the authors of gcc that they don&#39;t already know."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1467937344, "post_id": 38231071, "comment_id": 63935326, "body": "@supercat OK, but you&#39;re not telling <i>me</i> anything I don&#39;t already know either, and there&#39;s absolutely nothing <i>I</i> can do about it.  So unless you have actual suggestions for changes to make to the answer, can we please drop it?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467976010, "post_id": 38231071, "comment_id": 63949698, "body": "In C++ (no idea about how status is for C++17 which has cleanup quite a bit), it is also unclear whether a write with a differently qualified lvalue than the current object type is considered to &quot;reuse&quot; that object memory and create a new object with volatile qualified type. For const qualifier, this issue doesn&#39;t exist because you can&#39;t write with it, but for volatile the question arises."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1467976215, "post_id": 38231071, "comment_id": 63949813, "body": "If you want to be certain there, you can use placement new to force a volatile object at a particular location. For C, I believe rules are clearer because of its &quot;effective types&quot; where objects don&#39;t really posess types themselfs, but only when they are accesses by lvalues are thes considered to have an &quot;effective type&quot; for access purposes. For C, when you first do a volatile write, will it not change the effective type to be volatile qualified and therefore the write would count to be observable?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467977302, "post_id": 38231071, "comment_id": 63950397, "body": "@JohannesSchaub-litb Interesting questions! As indicated by my thread about this, I&#39;d like to think your last point would be true, whether or not it results from that exact wording (ideally not, since as you indicated, said wording would conflict with C++&#39;s abstract notion of whether a specific object&#39;s lifetime has begun in a piece of memory). But the C Standard itself doesn&#39;t ever address that scenario, far as I can see."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1467993413, "post_id": 38231071, "comment_id": 63961137, "body": "@JohannesSchaub-litb: From the point of view of the Standard, using a non-qualified pointer to access a <code>volatile</code>-qualified object is UB.  Except when the compiler writer knows all of the useful semantics supported by the execution platform, I see no disadvantage to a compiler regarding as defined behavior situations in which the last write prior to an object becoming observable outside the compiler&#39;s control is volatile, and likewise the first read after an an object changes outside the compiler&#39;s control, but the Standard leaves it undefined to allow for those few implementations..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467993449, "post_id": 38231071, "comment_id": 63961156, "body": "...where the compiler and execution platform are under the control of the same entity, on the presumption that implementations for platforms with additional useful semantics will behave in a way that makes sense on those platforms."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1590987946, "post_id": 38231071, "comment_id": 109877319, "body": "The standard has nothing to say about object code. <b>&quot;Volatile access&quot;</b> although observable behaviour <b>is implementation defined</b>. So if people want things manifested in object code <b>they must use an implementation that says that the volatile behaviour they want is manifested as they want in object code</b>. This is chronically forgotten in Qs &amp; As re volatile accesses &amp; observable behaviour. Answers should make this clear. Volatile is &quot;reliable for&quot; nothing except per implementation documentation."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 82, "last_activity_date": 1487966685, "last_edit_date": 1487966685, "creation_date": 1467829249, "answer_id": 38231071, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38231071#38231071", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>GCC's behavior <em>may</em> be conforming, and even if it isn't, you should not rely on <code>volatile</code> to do what you want in cases like these.  The C committee designed <code>volatile</code> for memory-mapped hardware registers and for variables modified during abnormal control flow (e.g. signal handlers and <code>setjmp</code>).  <strong>Those are the only things it is reliable for.</strong>  It is not safe to use as a general \"don't optimize this out\" annotation.</p>\n\n<p>In particular, the standard is unclear on a key point.  (I've converted your code to C; there <em>shouldn't</em> be any divergence between C and C++ here. I've also manually done the inlining that would happen before the questionable optimization, to show what the compiler \"sees\" at that point.)</p>\n\n<pre><code>extern void use_arr(void *, size_t);\nvoid foo(void)\n{\n    char arr[8];\n    use_arr(arr, sizeof arr);\n\n    for (volatile char *p = (volatile char *)arr;\n         p &lt; (volatile char *)(arr + 8);\n         p++)\n      *p = 0;\n}\n</code></pre>\n\n<p>The memory-clearing loop accesses <code>arr</code> through a volatile-qualified lvalue, but <code>arr</code> itself is <em>not</em> declared <code>volatile</code>.  It is, therefore, at least arguably allowed for the C compiler to infer that the stores made by the loop are \"dead\", and delete the loop altogether.  There's text in the C Rationale that implies that the committee <strong>meant</strong> to require those stores to be preserved, but the standard itself does not actually make that requirement, as I read it.</p>\n\n<p>For more discussion of what the standard does or does not require, see <a href=\"https://stackoverflow.com/questions/38235112/why-is-a-volatile-local-variable-optimised-differently-from-a-volatile-argument\">Why is a volatile local variable optimised differently from a volatile argument, and why does the optimiser generate a no-op loop from the latter?</a>, <a href=\"https://stackoverflow.com/questions/38243501/does-accessing-a-declared-non-volatile-object-through-a-volatile-reference-point\">Does accessing a declared non-volatile object through a volatile reference/pointer confer volatile rules upon said accesses?</a>, and <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71793\" rel=\"nofollow noreferrer\">GCC bug 71793</a>.</p>\n\n<p>For more on what the committee <em>thought</em> <code>volatile</code> was for, search the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf\" rel=\"nofollow noreferrer\">C99 Rationale</a> for the word \"volatile\". John Regehr's paper \"<a href=\"https://www.cs.utah.edu/~regehr/papers/emsoft08-preprint.pdf\" rel=\"nofollow noreferrer\">Volatiles are Miscompiled</a>\" illustrates in detail how programmer expectations for <code>volatile</code> may not be satisfied by production compilers. The LLVM team's series of essays \"<a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior</a>\" does not touch specifically on <code>volatile</code> but will help you understand how and why modern C compilers are <em>not</em> \"portable assemblers\".</p>\n\n<hr>\n\n<p>To the <strong>practical</strong> question of how to implement a function that does what you wanted <code>volatileZeroMemory</code> to do:  Regardless of what the standard requires or was meant to require, it would be wisest to assume that you can't use <code>volatile</code> for this.  There <em>is</em> an alternative that can be relied on to work, because it would break far too much other stuff if it didn't work:</p>\n\n<pre><code>extern void memory_optimization_fence(void *ptr, size_t size);\ninline void\nexplicit_bzero(void *ptr, size_t size)\n{\n   memset(ptr, 0, size);\n   memory_optimization_fence(ptr, size);\n}\n\n/* in a separate source file */\nvoid memory_optimization_fence(void *unused1, size_t unused2) {}\n</code></pre>\n\n<p>However, you must make absolutely sure that <code>memory_optimization_fence</code> is not inlined under any circumstances.  It must be in its own source file and it must not be subjected to link-time optimization.</p>\n\n<p>There are other options, relying on compiler extensions, that may be usable under some circumstances and can generate tighter code (one of them appeared in a previous edition of this answer), but none are universal.</p>\n\n<p>(I recommend calling the function <code>explicit_bzero</code>, because it is available under that name in more than one C library.  There are at least four other contenders for the name, but each has been adopted only by a single C library.)</p>\n\n<p>You should also know that, even if you can get this to work, it may not be enough.  In particular, consider</p>\n\n<pre><code>struct aes_expanded_key { __uint128_t rndk[16]; };\n\nvoid encrypt(const char *key, const char *iv,\n             const char *in, char *out, size_t size)\n{\n    aes_expanded_key ek;\n    expand_key(key, ek);\n    encrypt_with_ek(ek, iv, in, out, size);\n    explicit_bzero(&amp;ek, sizeof ek);\n}\n</code></pre>\n\n<p>Assuming hardware with AES acceleration instructions, if <code>expand_key</code> and <code>encrypt_with_ek</code> are inline, the compiler may be able to keep <code>ek</code> entirely in the vector register file -- until the call to <code>explicit_bzero</code>, which forces it to <em>copy the sensitive data onto the stack</em> just to erase it, and, worse, doesn't do a darn thing about the keys that are still sitting in the vector registers!</p>\n"}, {"comments": [{"owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 1, "creation_date": 1467837703, "post_id": 38233312, "comment_id": 63888435, "body": "This doesn&#39;t work at all... just look at the code that is being generated."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "edited": false, "score": 0, "creation_date": 1467838687, "post_id": 38233312, "comment_id": 63888913, "body": "@cooky451 It looks like it generates the accesses to me. Which version isn&#39;t working?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840057, "post_id": 38233312, "comment_id": 63889597, "body": "Having read my generated ASM mo&#39; better, it seems to inline the function call and retain the looping, but not do any storing to <code>*ptr</code> during that loop, or actually <i>anything at all</i>... just looping. wtf, there goes my brain."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1467840336, "post_id": 38233312, "comment_id": 63889711, "body": "@underscore_d It&#39;s because it&#39;s optimizing away the store while preserving the read of the volatile."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840554, "post_id": 38233312, "comment_id": 63889808, "body": "Yeah, and it dumps the result to an unchanging <code>edx</code>: I get this: <code>.L16: subq $1, %rax; movzbl -1(%rsp), %edx; jne .L16</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467840871, "post_id": 38233312, "comment_id": 63889921, "body": "If I change the function to allow passing an arbitrary <code>volatile unsigned char const</code> fill byte... <i>it doesn&#39;t even read it</i>. The generated inlined call to <code>volatileFill()</code> is just <code>[load RAX with sizeof] .L9: subq $1, %rax; jne .L9</code>. Why does the optimiser (A) not re-read the fill byte and (B) bother preserving the loop where it doesn&#39;t do anything?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467842629, "post_id": 38233312, "comment_id": 63890721, "body": "^ that only happens if passing the argument by value, which of course can&#39;t possibly be affected by any other code. Passing by reference produces the same effective result as declaring in-body. But then you realise my 1st sentence here applies equally to a locally declared variable in the function, so why isn&#39;t that trashed too? I feel a question coming on..."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467843803, "post_id": 38233312, "comment_id": 63891164, "body": "@underscore_d I believe that&#39;s because volatile is ignored for parameters."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467844662, "post_id": 38233312, "comment_id": 63891398, "body": "@DKrueger I&#39;m not finding any source for that online, and searching N3797 is... tricky. Could you point me at the relevant clause of the Standard? This answer mentions that it&#39;s ignored for <i>overloading</i> - <a href=\"http://stackoverflow.com/a/10242660/2757035\">stackoverflow.com/a/10242660/2757035</a> - but then so is <code>const</code>, and yet that still affects behaviour... or rather compilation. Even if you&#39;re right, why does the optimiser not then elide the loop, since it&#39;s now a no-op? I think I&#39;ll still ask a question about that as it&#39;s totally perplexing."}, {"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467845151, "post_id": 38233312, "comment_id": 63891535, "body": "@underscore_d It&#39;s discussed here: <a href=\"http://stackoverflow.com/questions/3303660/volatile-variables-as-argument-to-function\" title=\"volatile variables as argument to function\">stackoverflow.com/questions/3303660/&hellip;</a> but no chapter and verse"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467845450, "post_id": 38233312, "comment_id": 63891648, "body": "@DKrueger I found that and don&#39;t see how it&#39;s relevant. It discusses <i>pointers to</i> <code>volatile</code>, not by-value arguments declared <code>volatile</code>. Which are, yeah, pretty pointless, but I would presume would behave the same as &#39;real&#39; local variables declared <code>volatile</code>. And yet they don&#39;t. I&#39;m aware <code>volatile</code> is an implementation-defined mess, so the question is probably really for GCC, not the Standard. But there&#39;s clearly <i>something</i> odd going on."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467847630, "post_id": 38233312, "comment_id": 63892329, "body": "Interesting edit - FWIW, works for me, on my current compiler, with the current wind direction and alignment of celestial bodies. The logic <i>seems</i> sound. One might assume that popular implementations of &#39;volatile fill&#39; do something much like this, at least within the safe confines of their own implementation-defined behaviour."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467934561, "post_id": 38233312, "comment_id": 63934660, "body": "@underscore_d: Would not <code>volatile</code> qualifiers on received parameters be meaningful and important in situations where code modifies the values stored therein between a <code>setjmp</code> and the corresponding <code>longjmp</code>, and then accesses those values following the <code>longjmp</code>?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1467969429, "post_id": 38233312, "comment_id": 63945730, "body": "@supercat I originally couldn&#39;t imagine much point to <code>volatile</code> locals, but then I thought about inline ASM making anything possible (in a very implementation &amp; ABI-dependent way, but any time we use <code>volatile</code> we&#39;re already there) - though surely in most cases it&#39;d be possible/better to allocate pre-call &amp; pass a <code>volatile</code> ref, documenting intended sharing. But good point about <code>jmp</code>s. So there are definitely hypothetical use-cases for <code>volatile</code> qualifying local (incl <code>static</code>) variables. Hard for me to imagine in practical use though. Could you recommend good examples using such methods?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1553538433, "post_id": 38233312, "comment_id": 97413327, "body": "@underscore_d: A function which uses <code>setjmp</code> for the purposes of giving nested functions an &quot;escape path&quot;, and then calls such functions within a loop, would need to declare the loop index <code>volatile</code> if it would need to find out the value of the index when the called function exited via <code>longjmp</code>.  Absent a <code>volatile</code> qualifier, a compiler would likely generate code for e.g. <code>for (int i=0; i&lt;10; i++) doSomething(i);</code> that would keep <code>i</code> in a caller-saved register whose value would get lost if <code>getSomething</code> doesn&#39;t return normally."}], "tags": [], "owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "is_accepted": false, "score": 0, "last_activity_date": 1467843577, "last_edit_date": 1467843577, "creation_date": 1467837329, "answer_id": 38233312, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/38233312#38233312", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>It should be possible to write a portable version of the function by using a volatile object on the right-hand side and forcing the compiler to preserve the stores to the array.</p>\n\n<pre><code>void volatileZeroMemory(void* ptr, unsigned long long size)\n{\n    volatile unsigned char zero = 0;\n    unsigned char* bytePtr = static_cast&lt;unsigned char*&gt;(ptr);\n\n    while (size--)\n    {\n        *bytePtr++ = zero;\n    }\n\n    zero = static_cast&lt;unsigned char*&gt;(ptr)[zero];\n}\n</code></pre>\n\n<p>The <code>zero</code> object is declared <code>volatile</code> that ensures the compiler can make no assumptions about its value even though it always evaluates as zero. </p>\n\n<p>The final assignment expression reads from a volatile index in the array and stores the value in a volatile object. Since this read cannot be optimized, it ensures that the compiler must generate the stores specified in the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1531950826, "post_id": 39903342, "comment_id": 89794607, "body": "If accesses to the object after the function executes would invoke UB, that would mean that such accesses could yield the values the object held before it was &quot;cleared&quot;.  How is that not the opposite of security?"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1481053379, "last_edit_date": 1481053379, "creation_date": 1475778902, "answer_id": 39903342, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co/39903342#39903342", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>I offer this version as portable C++ (although the semantics are subtly different):</p>\n\n<pre><code>void volatileZeroMemory(volatile void* const ptr, unsigned long long size)\n{\n    volatile unsigned char* bytePtr = new (ptr) volatile unsigned char[size];\n\n    while (size--)\n    {\n        *bytePtr++ = 0;\n    }\n}\n</code></pre>\n\n<p>Now you have write accesses to a <em>volatile object</em>, not merely accesses to a non-volatile object made through a volatile view of the object.</p>\n\n<p>The semantic difference is that it now formally ends the lifetime of whatever object(s) occupied the memory region, because the memory has been reused.  So access to the object after zeroing its contents is now surely undefined behavior (formerly it would have been undefined behavior in most cases, but some exceptions surely existed).</p>\n\n<p>To use this zeroing during an object's lifetime instead of at the end, the caller should use placement <code>new</code> to put a new instance of the original type back again.</p>\n\n<p>The code can be made shorter (albeit less clear) by using value initialization:</p>\n\n<pre><code>void volatileZeroMemory(volatile void* const ptr, unsigned long long size)\n{\n    new (ptr) volatile unsigned char[size] ();\n}\n</code></pre>\n\n<p>and at this point it is a one-liner and barely warrants a helper function at all.</p>\n"}], "owner": {"reputation": 3292, "user_id": 941699, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe975ddb6128672b5e3f7d578aa3d03?s=128&d=identicon&r=PG", "display_name": "cooky451", "link": "https://stackoverflow.com/users/941699/cooky451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5128, "favorite_count": 14, "accepted_answer_id": 38231071, "answer_count": 4, "score": 89, "last_activity_date": 1487966685, "creation_date": 1467828458, "last_edit_date": 1467892983, "question_id": 38230856, "link": "https://stackoverflow.com/questions/38230856/is-the-definition-of-volatile-this-volatile-or-is-gcc-having-some-standard-co", "title": "Is the definition of &quot;volatile&quot; this volatile, or is GCC having some standard compliancy problems?", "body": "<p>I need a function that (like SecureZeroMemory from the WinAPI) always zeros memory and doesn't get optimized away, even if the compiler thinks the memory is never going to accessed again after that. Seems like a perfect candidate for volatile. But I'm having some problems actually getting this to work with GCC. Here is an example function:</p>\n\n<pre><code>void volatileZeroMemory(volatile void* ptr, unsigned long long size)\n{\n    volatile unsigned char* bytePtr = (volatile unsigned char*)ptr;\n\n    while (size--)\n    {\n        *bytePtr++ = 0;\n    }\n}\n</code></pre>\n\n<p>Simple enough. But the code that GCC actually generates if you call it varies wildly with the compiler version and the amount of bytes you're actually trying to zero. <a href=\"https://godbolt.org/g/cMaQm2\">https://godbolt.org/g/cMaQm2</a></p>\n\n<ul>\n<li>GCC 4.4.7 and 4.5.3 never ignore the volatile.</li>\n<li>GCC 4.6.4 and 4.7.3 ignore volatile for array sizes 1, 2, and 4.</li>\n<li>GCC 4.8.1 until 4.9.2 ignore volatile for array sizes 1 and 2.</li>\n<li>GCC 5.1 until 5.3 ignore volatile for array sizes 1, 2, 4, 8.</li>\n<li>GCC 6.1 just ignores it for any array size (bonus points for consistency).</li>\n</ul>\n\n<p>Any other compiler I have tested (clang, icc, vc) generates the stores one would expect, with any compiler version and any array size. So at this point I'm wondering, is this a (pretty old and severe?) GCC compiler bug, or is the definition of volatile in the standard that imprecise that this is actually conforming behavior, making it essentially impossible to write a portable \"SecureZeroMemory\" function?</p>\n\n<p>Edit: Some interesting observations.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstring&gt;\n#include &lt;atomic&gt;\n\nvoid callMeMaybe(char* buf);\n\nvoid volatileZeroMemory(volatile void* ptr, std::size_t size)\n{\n    for (auto bytePtr = static_cast&lt;volatile std::uint8_t*&gt;(ptr); size-- &gt; 0; )\n    {\n        *bytePtr++ = 0;\n    }\n\n    //std::atomic_thread_fence(std::memory_order_release);\n}\n\nstd::size_t foo()\n{\n    char arr[8];\n    callMeMaybe(arr);\n    volatileZeroMemory(arr, sizeof arr);\n    return sizeof arr;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/v8lMjG\">The possible write from callMeMaybe() will make all GCC versions except 6.1 generate the expected stores.</a> Commenting in the memory fence will also make GCC 6.1 generate the stores, although only in combination with the possible write from callMeMaybe().</p>\n\n<p>Someone has also suggested to flush the caches. <a href=\"http://codepad.org/1yC7a8J8\">Microsoft does <strong>not</strong> try to flush the cache at all in \"SecureZeroMemory\".</a> The cache is likely going to be invalidated pretty fast anyway, so this is probably not be a big deal. Also, if another program was trying to probe the data, or if it was going to be written to the page file, it would always be the zeroed version.</p>\n\n<p>There are also some concerns about GCC 6.1 using memset() in the standalone function. The GCC 6.1 compiler on godbolt might a broken build, as GCC 6.1 seems to generate a normal loop (like 5.3 does on godbolt) for the standalone function for some people. (Read comments of zwol's answer.)</p>\n"}, {"tags": ["c++", "c", "memory-management", "error-handling", "lua"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467832372, "post_id": 38230748, "comment_id": 63885605, "body": "The identifier: <code>[-1, +(2|0), e]</code> says that the function may throw errors. Check the source: <a href=\"https://www.lua.org/source/5.3/lapi.c.html#lua_next\" rel=\"nofollow noreferrer\">lua.org/source/5.3/lapi.c.html#lua_next</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467834411, "post_id": 38230748, "comment_id": 63886677, "body": "Right, so this is the meat of it: <a href=\"https://www.lua.org/source/5.3/ltable.c.html#luaH_next\" rel=\"nofollow noreferrer\">lua.org/source/5.3/ltable.c.html#luaH_next</a> What in here is potentially causing a dynamic allocation? To my knowledge, <code>lua_next</code> cannot trigger metamethod lookup."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467834523, "post_id": 38230748, "comment_id": 63886757, "body": "Does <code>lua_next</code> only produce an error if I start it off with a bad key or something? I mean clearly there is an error call in here: <a href=\"https://www.lua.org/source/5.3/ltable.c.html#findindex\" rel=\"nofollow noreferrer\">lua.org/source/5.3/ltable.c.html#findindex</a>"}, {"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467837030, "post_id": 38230748, "comment_id": 63888070, "body": "There are also possible errors raised in <a href=\"https://www.lua.org/source/5.3/lapi.c.html#index2addr\" rel=\"nofollow noreferrer\">lua.org/source/5.3/lapi.c.html#index2addr</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1467838372, "post_id": 38230748, "comment_id": 63888746, "body": "I see, but so long as there actually is a table I think none of that will throw"}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467851818, "post_id": 38230748, "comment_id": 63893423, "body": "AFAICS, <code>findindex</code> is the only place where <code>lua_next</code> can raise an error. And that should only happen when you pass in a key that&#39;s not in the table, or when you modify the table while iterating. Remember that <code>lua_tostring</code>/<code>lua_tonumber</code>/<code>lua_isnumber</code> may change the type of a value on the stack (which could then result in a non-existent key). Anyway, why not use <code>lua_pcall</code> to be safe?!"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1467866589, "post_id": 38230748, "comment_id": 63896419, "body": "I guess I find the &quot;cpcall&quot; idiom to be ugly. But now that has made me think that I just need a generic implementation so that it doesn&#39;t require so much boilerplate. Anyways I think it&#39;s a reasonable question, you don&#39;t want to make more pcall than necessary. Before this I thought there was no way to inspect a table at all really if you are in &quot;out of memory&quot;, but now I have learned that there is"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467872906, "post_id": 38230748, "comment_id": 63898523, "body": "@siffiejoe: If I just put a <code>pcall</code> everywhere I wasn&#39;t sure then I would have a very large number of <code>pcall</code>. This question is about whether I actually need those <code>pcall</code> in a particular case I guess."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467885523, "post_id": 38230748, "comment_id": 63906041, "body": "@ChrisBeck: You only need to use pcall in places where you want to do something <i>immediately</i> when an error is raised. That&#39;s not that often. Alternatively, you can put a userdata with a finalizer on the Lua stack and let the GC call it unless you disarm it first in the no-error case."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 0, "creation_date": 1467886951, "post_id": 38230748, "comment_id": 63907010, "body": "@siffiejoe: It depends on what exactly you are doing in the C api. If you are just writing callbacks that you push to lua, then its okay for them to signal lua errors -- lua itself will catch them and signal them to the script as an error in the callback function. But when there is no callback, when you are just writing C api calls from your application to control the VM, lua error means that the program is terminated -- <code>lua_panic</code> follows, and unless you do squirrelly things with the panic handler thats it. So knowing exactly what commands can error in what cases matters alot to me."}, {"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 1, "creation_date": 1467902362, "post_id": 38230748, "comment_id": 63918020, "body": "Since any Lua function call can raise a memory error, omitting the initial <code>lua_pcall</code>/<code>lua_cpcall</code> is asking for trouble."}], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467829669, "creation_date": 1467828098, "last_edit_date": 1467829669, "question_id": 38230748, "link": "https://stackoverflow.com/questions/38230748/lua-c-api-how-to-traverse-a-table-with-no-possibility-of-lua-error-lua-panic", "title": "lua C api: How to traverse a table with no possibility of lua_error / lua panic?", "body": "<p>In the lua 5.2 manual they have <a href=\"https://www.lua.org/manual/5.2/manual.html#lua_next\" rel=\"nofollow\">some documentation</a> regarding <code>lua_next</code>, the function used to iterate over a table.</p>\n\n<blockquote>\n  <p>A typical traversal looks like this:</p>\n</blockquote>\n\n<pre><code> /* table is in the stack at index 't' */\n lua_pushnil(L);  /* first key */\n while (lua_next(L, t) != 0) {\n   /* uses 'key' (at index -2) and 'value' (at index -1) */\n   printf(\"%s - %s\\n\",\n          lua_typename(L, lua_type(L, -2)),\n          lua_typename(L, lua_type(L, -1)));\n   /* removes 'value'; keeps 'key' for next iteration */\n   lua_pop(L, 1);\n }\n</code></pre>\n\n<p>According to the manual, none of the C api calls in this example can cause a lua error (<code>lua_type</code>, <code>lua_typename</code>, <code>lua_pushnil</code>, <code>lua_pop</code>) EXCEPT for <code>lua_next</code>.</p>\n\n<p>As I understand, <code>lua_next</code> can only cause an error in the case that it fails to allocate memory, so this is really only an issue in programs in which you hope to recover from memory allocation failures.</p>\n\n<p>However, suppose that I am writing such a program. Is there a way that I can avoid putting the above iteration code in a protected call if I want to be able to recover from such an error?</p>\n\n<p>As I understand, the <code>lua_next</code> should not actually be copying anything. The memory on the stack is already allocated and assigning atomic values to a stack position does not cause lua to allocate more memory. In the case of strings, lua is copy-on-write. In the case of reference values, it just increments a reference counter and doesn't need a dynamic allocation.</p>\n\n<p>Suppose I put <code>lua_checkstack(L, 2)</code> first to ensure that there is stack space for the two entries (<code>key</code> and <code>value</code>). Is that enough to guarantee that I won't have a lua error, and so can avoid putting this in a protected context? (Forgetting what the manual says.) What exactly are the dynamic allocations that lua needs to do here?</p>\n"}, {"tags": ["c++", "c", "algorithm", "math"], "answers": [{"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828621, "post_id": 38230808, "comment_id": 63883399, "body": "The dependency on nvr is missing"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828814, "post_id": 38230808, "comment_id": 63883503, "body": "@Veridian what kind of dependency? Ultimately you&#39;re going to use <code>nvr % nr</code> value, right?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1467829092, "last_edit_date": 1467829092, "creation_date": 1467828296, "answer_id": 38230808, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38230808#38230808", "title": "How to turn for loop into a math equation?", "body": "<p>In your second loop, the condition check has the <code>nr-1</code> as abound.</p>\n\n<p>If i understood your problem correctly, you can express it like</p>\n\n<blockquote>\n  <p><code>array[i] = array[i] + 1 , i = nvr % nr ,...,(nr-2)</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467828927, "post_id": 38230874, "comment_id": 63883566, "body": "Thanks actually, I think I can do this:    array[i] = nepr + (i &lt; j); i = 0,...,(nr-1); j = nvr % nr"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832434, "post_id": 38230874, "comment_id": 63885639, "body": "Assuming positive is needed. Code does fail with <code>nvr = 7; nr = -3;</code>"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832447, "post_id": 38230874, "comment_id": 63885643, "body": "@chux Right. I edited the answer to spell out the positiveness assumption."}], "tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 1, "last_activity_date": 1467832373, "last_edit_date": 1467832373, "creation_date": 1467828506, "answer_id": 38230874, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38230874#38230874", "title": "How to turn for loop into a math equation?", "body": "<p>Not entirely clear that's what you are asking, but the following does the same thing in a single loop.</p>\n\n<pre><code>for (int i = 0, j = nvr % nr; i &lt; nr; i++) {\n    array[i] = nepr + (i &lt; j);\n}\n</code></pre>\n\n<p><hr>\n[EDIT] In casual language without any loops the above is equivalent to...</p>\n\n<blockquote>\n  <p>Let <code>j = nvr % nr</code>. Assuming positive <code>nr</code> and <code>nvr</code>, <code>0 &lt;= j &lt; nr</code> and:</p>\n  \n  <ul>\n  <li><code>array[i] = nepr + 1</code> for <code>i = 0 ... j-1</code></li>\n  <li><code>array[i] = nepr</code> for <code>i = j ... nr-1</code> </li>\n  </ul>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467829830, "post_id": 38231171, "comment_id": 63884071, "body": "I believe your notation doesn&#39;t take into account that x is discretely valued. Your equations are for x being continuous. Correct me if I&#39;m wrong."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1467829927, "post_id": 38231171, "comment_id": 63884137, "body": "@Veridian That&#39;s not directly necessary, the equations are still valid.  If you want to express that x must be an integer, just state it separately."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832246, "post_id": 38231171, "comment_id": 63885532, "body": "@chux It seems likely that nvr is always positive, but I changed it anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467832609, "post_id": 38231171, "comment_id": 63885724, "body": "Yes, assuming <code>nvr, nr</code> positive does simplify the problem.  Doubt if OP wants a full range <code>int</code> solution."}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 3, "last_activity_date": 1467832189, "last_edit_date": 1467832189, "creation_date": 1467829568, "answer_id": 38231171, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38231171#38231171", "title": "How to turn for loop into a math equation?", "body": "<p>Just express it as a <a href=\"https://en.wikipedia.org/wiki/Piecewise\" rel=\"nofollow\">piecewise-defined function</a>:</p>\n\n<pre><code> f(x) = {nepr + 1 if x &lt;  (nvr % xr)}  \n        {nepr     if x &gt;= (nvr % xr)}\n</code></pre>\n\n<p>You can also define it in terms of the <a href=\"https://en.wikipedia.org/wiki/Heaviside_step_function\" rel=\"nofollow\">Heaviside step function</a>:</p>\n\n<pre><code> f(x) = nepr + H((nxr % xr) - x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1467830312, "post_id": 38231294, "comment_id": 63884378, "body": "Probably you should add i \u2208 N"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1467830345, "post_id": 38231294, "comment_id": 63884395, "body": "@Logman that seems inherent in the fact that i is used as an index into array"}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1467830523, "post_id": 38231294, "comment_id": 63884504, "body": "@GuyGreer but let&#39;s stay formal ;)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467829955, "last_edit_date": 1486653058, "creation_date": 1467829955, "answer_id": 38231294, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38231294#38231294", "title": "How to turn for loop into a math equation?", "body": "<p>Here it is in LaTeX. To see or edit the LaTeX, click on the equation.</p>\n\n<p><a href=\"http://www.codecogs.com/eqnedit.php?latex=%5Cmathrm%7Barray%7D_i:=&space;%5Cbegin%7Bcases%7D&space;n_%5Cmathrm%7Bepr%7D&plus;1,&amp;%5Ctext%7Bfor&space;%7D0&lt;i&lt;(n_%7Bvr%7D%5Cmod&space;n_r)%5C%5C&space;n_%5Cmathrm%7Bepr%7D&amp;%5Ctext%7Bfor&space;%7Dn_%7Bvr%7D%5Cle&space;i&lt;n_r&space;%5Cend%7Bcases%7D\" rel=\"nofollow noreferrer\"><img src=\"https://latex.codecogs.com/png.latex?%5Cmathrm%7Barray%7D_i:=&space;%5Cbegin%7Bcases%7D&space;n_%5Cmathrm%7Bepr%7D&plus;1,&amp;%5Ctext%7Bfor&space;%7D0&lt;i&lt;(n_%7Bvr%7D%5Cmod&space;n_r)%5C%5C&space;n_%5Cmathrm%7Bepr%7D&amp;%5Ctext%7Bfor&space;%7Dn_%7Bvr%7D%5Cle&space;i&lt;n_r&space;%5Cend%7Bcases%7D\" alt=\"latex equation\"></a></p>\n\n<p>The <code>:=</code> symbol expresses assignment. You could also write it in functional fashion by replacing <code>array_i</code> with <code>array(i)</code>, a function defined on an open range of integers.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1467833182, "last_edit_date": 1495539923, "creation_date": 1467833182, "answer_id": 38232215, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation/38232215#38232215", "title": "How to turn for loop into a math equation?", "body": "<p>Thought I would try to post a full <code>int</code> range soukltion base on <a href=\"https://stackoverflow.com/a/38230874/2410359\">@dxiv</a> fine answer which works well when <code>nr, nvr</code> are positive - the usual case.</p>\n\n<p>Assume <code>nr, nvr</code> are <code>int</code>.</p>\n\n<pre><code>assert(nr != 0);\nassert(nr != -1 || nvr &gt;= -INT_MAX);  // avoid -2147483648 % -1\nint j = nvr % nr;\nint ij = max(i,j);\nfor (int i = 0; i &lt; ij; i++) {\n    array[i] = nepr + (i &lt; j);\n}\n</code></pre>\n"}], "owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 38230874, "answer_count": 5, "score": 1, "last_activity_date": 1467833182, "creation_date": 1467828080, "last_edit_date": 1467831400, "question_id": 38230743, "link": "https://stackoverflow.com/questions/38230743/how-to-turn-for-loop-into-a-math-equation", "title": "How to turn for loop into a math equation?", "body": "<p>I have the following two loops in my program and I am trying to write them out as math equations, but I'm having some difficulty finding a concise way to do so:</p>\n\n<pre><code>// Loop1\nfor (int i = 0; i &lt; nr; i++) {\n    array[i] = nepr;\n}\n\n// Loop2\nfor (int i = 0; i &lt; (nvr % nr); i++) {\n    array[i]++;\n}\n</code></pre>\n\n<p>The code is completely function, but I'm trying to express these loops in a document I'm writing. </p>\n\n<blockquote>\n  <p>Any help would be very much appreciated.</p>\n</blockquote>\n\n<p>So far I have this:</p>\n\n<pre><code>array[i] = nepr, i = 0,...,(nr-1)\n</code></pre>\n\n<p>but I'm not sure how to incorporate the second loop into the equation, or write a second equation for it.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1467828105, "post_id": 38230705, "comment_id": 63883143, "body": "Since you are a good person, you will know whether your indices are within bounds, and you don&#39;t need the vector to check that for you redundantly. Use the square brackets."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1467829071, "post_id": 38230705, "comment_id": 63883654, "body": "<i>&quot;there is not a significant performance difference in using operator[] instead&quot;</i> [citation needed]"}], "answers": [{"comments": [{"owner": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "edited": false, "score": 0, "creation_date": 1467828642, "post_id": 38230767, "comment_id": 63883411, "body": "What std::vector iteration capabilities? Would you mind providing a link or further describing?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "edited": false, "score": 0, "creation_date": 1467828815, "post_id": 38230767, "comment_id": 63883506, "body": "<code>&lt;algorithm&gt;</code> header provides functions to do almost everything on STL containers without the need of ever looping over a <code>std::vector</code> and retrieve objects by index. <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm</a>"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 5, "last_activity_date": 1467828141, "creation_date": 1467828141, "answer_id": 38230767, "question_id": 38230705, "link": "https://stackoverflow.com/questions/38230705/should-i-use-brackets-or-at-for-array-access/38230767#38230767", "title": "Should I use brackets [] or .at() for array access?", "body": "<p>You shouldn't use any of them. <code>std::vector</code> provides iteration capabilities that rarely make necessary to explicitly access an item by index.</p>\n\n<p>To answer your question, following the <em>don't pay for what you don't use</em>, if you know that you are not going to go out of bounds there is no need to use <code>at()</code>. </p>\n\n<p>Otherwise you should always check a pointer for not being <code>nullptr</code> every time you are going to dereference it, but in practice you don't do it if you are sure that it's a valid pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1467828247, "creation_date": 1467828247, "answer_id": 38230797, "question_id": 38230705, "link": "https://stackoverflow.com/questions/38230705/should-i-use-brackets-or-at-for-array-access/38230797#38230797", "title": "Should I use brackets [] or .at() for array access?", "body": "<p>You should use <code>[]</code> when you are certain that no \"out-of bounds\" access will happen.</p>\n\n<p>You should use <code>at()</code> when \"out of bounds\" access <em>may</em> happen and you are prepared to either deal with that (by catching the exception and doing something sensible) or your program crashing is ok (which it would anyway had you used <code>[]</code>, just in an undefined manner).</p>\n"}, {"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1467829405, "post_id": 38230958, "comment_id": 63883829, "body": "It may be a pain, but it is more of a pain if you don&#39;t have these debugging facilities, and the choice is either try and fix the issue by replacing a few <code>[ ]</code> calls with <code>at()</code>, or spending hours debugging."}, {"owner": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "edited": false, "score": 0, "creation_date": 1467833713, "post_id": 38230958, "comment_id": 63886287, "body": "Is it better to use asserts for bounds checking instead of at()? Since the asserts will be removed in a release build?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "edited": false, "score": 0, "creation_date": 1467883806, "post_id": 38230958, "comment_id": 63904897, "body": "@J-Win The issue with <code>assert()</code> is that it <i>is</i> removed in a release build.  What if the bug only appears in the release build?"}, {"owner": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "edited": false, "score": 0, "creation_date": 1467898193, "post_id": 38230958, "comment_id": 63914682, "body": "Ok that makes sense then. Thanks!"}], "tags": [], "owner": {"reputation": 41, "user_id": 6557462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc482c0c642103a8f391c4dec6861702?s=128&d=identicon&r=PG&f=1", "display_name": "Markus B.", "link": "https://stackoverflow.com/users/6557462/markus-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1467828811, "creation_date": 1467828811, "answer_id": 38230958, "question_id": 38230705, "link": "https://stackoverflow.com/questions/38230705/should-i-use-brackets-or-at-for-array-access/38230958#38230958", "title": "Should I use brackets [] or .at() for array access?", "body": "<p>that later changing from at(i) to operator is quite a hassle. Therefore I agree  with Jesper.</p>\n\n<p>To catch out of bounds problems you can e.g. either use valgrind or if you are using GCC compile with -D_GLIBCXX_DEBUG. See <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/debug_mode.html\" rel=\"nofollow\">GCC Debug mode</a> for more info.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1467829093, "post_id": 38231011, "comment_id": 63883668, "body": "<i>&quot;since we are confident that our programs don&#39;t have boundary access issues&quot;</i> We are?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1467829120, "post_id": 38231011, "comment_id": 63883686, "body": "I write that with some sarcasm, but good programmers do have that confidence."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467829611, "post_id": 38231011, "comment_id": 63883951, "body": "I have confidence that I do not have that confidence."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1467829785, "post_id": 38231011, "comment_id": 63884045, "body": "One should always code defensively and act as if all hell will break loose at every line of code."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1467829105, "last_edit_date": 1467829105, "creation_date": 1467829042, "answer_id": 38231011, "question_id": 38230705, "link": "https://stackoverflow.com/questions/38230705/should-i-use-brackets-or-at-for-array-access/38231011#38231011", "title": "Should I use brackets [] or .at() for array access?", "body": "<p>I don't think you should start out by using <code>at()</code>, since we are confident that our programs don't have boundary access issues.  Thus we start out using <code>[ ]</code> immediately.  </p>\n\n<p>However, if we go by the posts on SO (by usually new programmers) there have been numerous questions concerning vector access that could have been solved easily if the <code>at()</code> were used to detect boundary issues.  </p>\n\n<p>Given this experience, use <code>at()</code> for debugging purposes when you suspect that you are going out of bounds, or if there is a hint that you may be going out-of-bounds.</p>\n"}], "owner": {"reputation": 1062, "user_id": 6433447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7cee5d9e91da5f8bda89fb1b7d2804?s=128&d=identicon&r=PG&f=1", "display_name": "J-Win", "link": "https://stackoverflow.com/users/6433447/j-win"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 1, "accepted_answer_id": 38230767, "answer_count": 4, "score": 4, "last_activity_date": 1467829105, "creation_date": 1467827966, "last_edit_date": 1467828241, "question_id": 38230705, "link": "https://stackoverflow.com/questions/38230705/should-i-use-brackets-or-at-for-array-access", "title": "Should I use brackets [] or .at() for array access?", "body": "<p>Since the <code>at()</code> function in C++ arrays and vectors provides out-of-bounds checking and there is not a significant performance difference in using <code>operator[]</code> instead, should one ever use brackets for array access?</p>\n\n<p>Perhaps only in performance-critical code?</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467827886, "post_id": 38230635, "comment_id": 63883004, "body": "Compiles for me. <code>g++ (GCC) 6.1.1 20160602</code>, no extra flags."}, {"owner": {"reputation": 1339, "user_id": 481724, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c545780442a6d104ced0f1a3bd4a425c?s=128&d=identicon&r=PG", "display_name": "chamibuddhika", "link": "https://stackoverflow.com/users/481724/chamibuddhika"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467828237, "post_id": 38230635, "comment_id": 63883206, "body": "Interesting. So it may be a compiler bug? Just added my compiler details."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467828929, "post_id": 38230635, "comment_id": 63883569, "body": "Clang++ also accepts it (when given <code>-std=c++11</code>). <code>clang version 3.8.0 (tags&#47;RELEASE_380&#47;final</code>."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467830415, "post_id": 38230635, "comment_id": 63884440, "body": "@chamibuddhika Its not a compiler bug. If it compiles, then that is a bug."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467830468, "post_id": 38230635, "comment_id": 63884472, "body": "@Thomas Isn&#39;t the <code>unique_ptr</code> constructor explicit in the versions you tested the code with. Implicit conversion of raw pointers to  smart_pointer is a dangerous business"}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 481724, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c545780442a6d104ced0f1a3bd4a425c?s=128&d=identicon&r=PG", "display_name": "chamibuddhika", "link": "https://stackoverflow.com/users/481724/chamibuddhika"}, "edited": false, "score": 0, "creation_date": 1467829965, "post_id": 38231169, "comment_id": 63884161, "body": "Indeed! When I used the explicit std::pair based insertion it worked. Looks like emplace doesn&#39;t work the way I was thinking (at least for my current compiler it seems)."}], "tags": [], "owner": {"reputation": 576, "user_id": 2544747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ieYwd.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2544747/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1467838626, "last_edit_date": 1467838626, "creation_date": 1467829555, "answer_id": 38231169, "question_id": 38230635, "link": "https://stackoverflow.com/questions/38230635/iterate-raw-pointers-from-unique-ptr-in-map-values/38231169#38231169", "title": "Iterate raw pointers from unique_ptr in map values", "body": "<p>When I run this code, the complaint seems to be related to the creation of the <code>std::pair</code> class. </p>\n\n<pre><code>unique.unique_map.emplace(1, std::unique_ptr&lt;Foo&gt;(f1));\nunique.unique_map.emplace(2, std::unique_ptr&lt;Foo&gt;(f2));\n</code></pre>\n\n<p>For me, this builds and it works, not that I can say for certain that it will really do what you desire. Just that it compiles and runs for me.</p>\n\n<p>I spend most of my C++ time using QT libraries and classes, but, it looks to me like it is failing to find a way to turn a pair with a <code>FOO*</code> to the <code>unique_ptr&lt;FOO&gt;</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 1339, "user_id": 481724, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c545780442a6d104ced0f1a3bd4a425c?s=128&d=identicon&r=PG", "display_name": "chamibuddhika", "link": "https://stackoverflow.com/users/481724/chamibuddhika"}, "edited": false, "score": 0, "creation_date": 1467831041, "post_id": 38231343, "comment_id": 63884808, "body": "Thanks for the explanation and the link. Makes more sense now. I am going to accept it as the better answer since you explained the reason for this behavior."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467831387, "post_id": 38231343, "comment_id": 63885039, "body": "@Arunmu Totally agree that this implicit conversion is dangerous, but the Sutter article you link to talks about the other direction (smart to raw, not raw to smart)."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1467831837, "post_id": 38231343, "comment_id": 63885313, "body": "@Thomas Yeah, thanks. Updated the link to point to relevant answer"}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 1, "last_activity_date": 1467831813, "last_edit_date": 1495535334, "creation_date": 1467830097, "answer_id": 38231343, "question_id": 38230635, "link": "https://stackoverflow.com/questions/38230635/iterate-raw-pointers-from-unique-ptr-in-map-values/38231343#38231343", "title": "Iterate raw pointers from unique_ptr in map values", "body": "<p>The error you are getting is because implicit conversion of <code>Foo*</code> to <code>std::unique_ptr&lt;Foo&gt;</code> is not allowed. That is because, the constructor of <code>unique_ptr</code> taking a raw pointer is marked <code>explicit</code>.</p>\n\n<pre><code>explicit\n      unique_ptr(pointer __p) noexcept\n      : _M_t(__p, deleter_type())\n      { static_assert(!is_pointer&lt;deleter_type&gt;::value,\n                     \"constructed with null function pointer deleter\"); }\n</code></pre>\n\n<p>So, you should be creating a <code>unique_ptr</code> and <code>move</code> it while doing an <code>emplace</code></p>\n\n<p>NOTE: I am not sure why or how its working in g++ > 6.0 library. But personally I don't think its safe to convert raw pointers to smart pointer implicitly. To know why, see : <a href=\"https://stackoverflow.com/a/11367997/434233\">https://stackoverflow.com/a/11367997/434233</a></p>\n"}], "owner": {"reputation": 1339, "user_id": 481724, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c545780442a6d104ced0f1a3bd4a425c?s=128&d=identicon&r=PG", "display_name": "chamibuddhika", "link": "https://stackoverflow.com/users/481724/chamibuddhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 38231343, "answer_count": 2, "score": 1, "last_activity_date": 1467838626, "creation_date": 1467827755, "last_edit_date": 1467829678, "question_id": 38230635, "link": "https://stackoverflow.com/questions/38230635/iterate-raw-pointers-from-unique-ptr-in-map-values", "title": "Iterate raw pointers from unique_ptr in map values", "body": "<p>I am using unique_ptr in map values. I need to get those values as a list/vector of raw pointers. So far I have done as follows. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;map&gt;\n\nclass Foo {\n  public:\n    std::string val;\n\n    Foo(std::string v) : val(v) {\n    }\n };\n\n class Unique {\n   public:\n     std::map&lt;int, std::unique_ptr&lt;Foo&gt;&gt; unique_map;\n\n     std::vector&lt;Foo*&gt; getFoos() {\n       std::vector&lt;Foo*&gt; foos;\n       for (auto&amp; it : unique_map) {\n         foos.push_back(it.second.get());\n       }\n\n       return foos;\n     }\n };\n\n int main() {\n   Unique unique;\n   Foo* f1 = new Foo(\"1\");\n   Foo* f2 = new Foo(\"2\");\n\n   unique.unique_map.emplace(1, f1);\n   unique.unique_map.emplace(2, f2);\n\n   std::vector&lt;Foo*&gt; foos = unique.getFoos();\n\n   for (Foo* foo : foos) {\n     std::cout &lt;&lt; foo-&gt;val;\n   }\n\n   std::cout&lt;&lt;\"\\n\";\n\n   return 0;\n }\n</code></pre>\n\n<p>But this fails to compile. The most relevent error message seems to be </p>\n\n<blockquote>\n  <p>\"/usr/include/c++/4.8/bits/stl_tree.h:140:49: note:   cannot convert\n  \u2018std::forward((* &amp; __args#1))\u2019 (type \u2018Foo*\u2019) to type \u2018const\n  std::unique_ptr&amp;\u2019\"</p>\n</blockquote>\n\n<p>But I am not sure I understand what it means since my understanding is that <strong>it.second</strong> returns a reference to the unique_ptr not the Foo instance it self assuming that's where the problem is. What needs to be done to fix this example?</p>\n\n<p><strong>Edit</strong>\nI am using a somewhat older g++ version. </p>\n\n<blockquote>\n  <p>g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4</p>\n</blockquote>\n\n<p>with command line.</p>\n\n<blockquote>\n  <p>g++ -std=c++11 -o unique unique.cpp</p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "pointers", "static", "smart-pointers"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1467828106, "post_id": 38230593, "comment_id": 63883144, "body": "You may get rid of <code>enable_share_from_this</code> by making constructor <code>private</code>, and provide static constructor which also feed the vector."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1467828756, "post_id": 38230593, "comment_id": 63883466, "body": "@Jarod42, I guess you mean static named constructor (or create function), otherwise I agree 100%."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1467831536, "last_edit_date": 1467831536, "creation_date": 1467828218, "answer_id": 38230788, "question_id": 38230593, "link": "https://stackoverflow.com/questions/38230593/how-do-i-track-objects-of-a-class-using-smart-pointers/38230788#38230788", "title": "How do I track objects of a class using smart pointers?", "body": "<p>You don't need <code>enable_shared_from_this</code>, instead you could have a <code>static</code> factory function which create the (shared) instance, puts it in the vector, and also returns it.</p>\n\n<p>Something like</p>\n\n<pre><code>class GameObject\n{\nprivate:\n    static std::vector&lt;std::shared_ptr&lt;GameObject&gt;&gt; objects;\n\n    // Don't allow creation from outside\n    GameObject() {}\n\npublic:\n    static std::shared_ptr&lt;GameObject&gt; create()\n    {\n        objects.emplace_back(new GameObject);\n        return objects.back();\n    }\n};\n</code></pre>\n\n<p>Then to get an instance you do e.g.</p>\n\n<pre><code>auto new_game_object = GameObject::create();\n</code></pre>\n\n<p>There is just one problem with this: The object pointed to by the shared pointer will never go out of scope as long as they are in the vector, and the lifetime of the vector is the lifetime of the program (because it's <code>static</code>). So you have to think of where and when to remove those instances from the vector.</p>\n"}, {"tags": [], "owner": {"reputation": 1571, "user_id": 1322108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01010236f25f86e454b7662d6f61cdc9?s=128&d=identicon&r=PG", "display_name": "nenchev", "link": "https://stackoverflow.com/users/1322108/nenchev"}, "is_accepted": false, "score": 0, "last_activity_date": 1470948870, "last_edit_date": 1470948870, "creation_date": 1470948565, "answer_id": 38905890, "question_id": 38230593, "link": "https://stackoverflow.com/questions/38230593/how-do-i-track-objects-of-a-class-using-smart-pointers/38905890#38905890", "title": "How do I track objects of a class using smart pointers?", "body": "<p>I would start by moving the static vector outside of your GameObject class, and stay away from putting code that manages the game objects, inside the game object itself. The static create() method proposed by another user would help, but I personally prefer the ability to call the GameObject/Derived game object constructors myself, so that I can pass whatever data I need during construction.</p>\n\n<p>Create something like a GameObjectWorld class, which you would add objects into during the execution of you game engine. There is no need to automatically add them into the world, right from the GameObject constructor.</p>\n\n<p>You could do something like:</p>\n\n<pre><code>auto gameObject = std::make_shared&lt;GameObject&gt;();\n// implemented at a singleton for simplicity\nGameObjectWorld::getInstance().add(gameObject);\n</code></pre>\n\n<p>In the past, I've taken the approach where the given game \"Part\" or \"Scene\" maintains it's own list of GameObjects (entities), which in turn maintain their own lists. This allows you to perform actions by recursing through them, with the added benefit of an object hierarchy.</p>\n\n<p>Here's a crude and simple example:</p>\n\n<pre><code>class Part\n{\n    std::vector&lt;std::shared_ptr&lt;GameObject&gt; children;\npublic:\n    void addChild(std::shared_ptr&lt;GameObject&gt; object)\n    {\n        children.push_back(object);\n    }\n\n    // Part lifecycle\n    virtual void onCreate() = 0; // must be provided by your parts\n};\n\nclass GamePart :: public Part\n{\n    void onCreate() override; // called by your engine\n};\n\nvoid GamePart::onCreate()\n{\n    addChild(std::make_shared&lt;GameObject&gt;());\n}\n</code></pre>\n\n<p>This is a very simple way to start managing your game objects and I'd highly recommend reading up on \"Entity Component Systems\" and understanding some of the ways industry experts manage their game worlds.</p>\n"}], "owner": {"reputation": 776, "user_id": 2092025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DhEne.png?s=128&g=1", "display_name": "kazarey", "link": "https://stackoverflow.com/users/2092025/kazarey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "accepted_answer_id": 38230788, "answer_count": 2, "score": 0, "last_activity_date": 1470948870, "creation_date": 1467827614, "last_edit_date": 1495540294, "question_id": 38230593, "link": "https://stackoverflow.com/questions/38230593/how-do-i-track-objects-of-a-class-using-smart-pointers", "title": "How do I track objects of a class using smart pointers?", "body": "<p>I am trying to write a class whose objects are aware of each other (i.e. have a pointer to all the objects). I can't understand some aspects of implementation of this idea regarding smart pointers and static members.</p>\n\n<p>The class can be thought of as a game object that needs to be able to access member functions and properties of other game objects.</p>\n\n<p>To my best knowledge, the common way to implement the desired design is static vector which would contain the pointers to other objects. If operating by raw pointers, the task is not very complicated:</p>\n\n<p><strong>GameObject.h:</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;vector&gt;    \n\nclass GameObject\n{\nprivate:\n    static std::vector&lt; GameObject* &gt; objects;\npublic:\n    GameObject()\n    {\n        objects.push_back(this);\n    }\n};\n</code></pre>\n\n<p><strong>GameObject.cpp:</strong></p>\n\n<pre><code>#include \"GameObject.h\"\n\nstd::vector&lt; GameObject* &gt; GameObject::objects = {};\n</code></pre>\n\n<p>This would actually give what I need. But if I want to use smart pointers, things are not as straightforward to me. From <a href=\"https://stackoverflow.com/questions/11711034/stdshared-ptr-of-this\">this question</a> and from the 'Effective Modern C++' book by Meyers I found out about <code>std::enable_shared_from_this</code> and <code>shared_from_this()</code>. But, additionally, <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\">the reference</a> clearly states that <code>shared_from_this()</code> is allowed to be used only in case the object already owned by a <code>std::shared_ptr&lt;&gt;</code>.</p>\n\n<p>So it is impossible to simply push into the static vector <code>this</code> pointers (or <code>std::shared_ptr</code> constructed over it) in the constructor in the same manner as previously. The minimum set of code allowing the design which I found out is the following:</p>\n\n<p><strong>GameObject.h:</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\n\nclass GameObject : public std::enable_shared_from_this&lt;GameObject&gt;\n{\nprivate:\n    static std::vector&lt; std::shared_ptr&lt;GameObject&gt; &gt; objects;\npublic:\n    GameObject() {}\n\n    void emplace_ptr()\n    {\n        objects.emplace_back(shared_from_this());\n    }\n};\n</code></pre>\n\n<p><strong>GameObject.cpp:</strong></p>\n\n<pre><code>#include \"GameObject.h\"\n\nstd::vector&lt; std::shared_ptr&lt;GameObject&gt; &gt; GameObject::objects = {};\n</code></pre>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre><code>#include \"GameObject.h\"\n\nint main(int argc, char* argv[])\n{\n\n    std::shared_ptr&lt;GameObject&gt; game_object{ new GameObject{} };\n    game_object-&gt;emplace_ptr();\n    return 0;\n}\n</code></pre>\n\n<p>So I am apparently obliged to create a pointer to the object somewhere outside and then explicitly call a method to push the pointer to the static vector (as I am not allowed to do this in constructor).</p>\n\n<p>I am getting the impression that the required code is getting unnecessarily complex (comparing the raw pointer case) or I am doing something nonsensical.</p>\n\n<ol>\n<li>Does my strive for making object aware of each other make sense\nat all? Is it a common problem or some other approach is usually\ntaken?</li>\n<li>Are static vectors a sound solution to the problem?</li>\n<li>How to construct such vectors using smart pointers, but, preferably,\nwith no intervention from the outside and with no need to create the\nspecial function <code>emplace_ptr()</code> for the purpose?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1467826814, "post_id": 38230332, "comment_id": 63882381, "body": "Please <b><a href=\"https://stackoverflow.com/posts/38230332/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a> and include the full error text."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1467826956, "post_id": 38230332, "comment_id": 63882470, "body": "You named it <code>Span</code>, not <code>span</code>. Also, it has <i>one</i> template argument, not two."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1467827288, "post_id": 38230332, "comment_id": 63882673, "body": "c++ is case sensitive for any symbols you use."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1467827427, "post_id": 38230332, "comment_id": 63882763, "body": "You need to pick up a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book on C++</a>."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1467828049, "post_id": 38230332, "comment_id": 63883123, "body": "@AnnW. <code>template&lt;typename T, typename T&gt;</code>...  T is being declared twice.  Make the second T another name, e.g. U. <code>template&lt;typename T, typename U&gt;</code> if you really need a second type."}, {"owner": {"reputation": 19, "user_id": 6182543, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b697ef997eee80993c58e526550566c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ann W.", "link": "https://stackoverflow.com/users/6182543/ann-w"}, "edited": false, "score": 0, "creation_date": 1469343006, "post_id": 38230332, "comment_id": 64490171, "body": "Thanks, why I added cerr debug point in xxx.cc, but it never print out when I run the project? <a href=\"http://stackoverflow.com/questions/38519332/why-compile-into-old-so?noredirect=1#comment64456431_38519332\" title=\"why compile into old so\">stackoverflow.com/questions/38519332/&hellip;</a>"}, {"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 0, "creation_date": 1472137421, "post_id": 38230332, "comment_id": 65640982, "body": "Don&#39;t change a question to something completely different after it has been answered!"}], "answers": [{"tags": [], "owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "is_accepted": false, "score": 4, "last_activity_date": 1467826962, "creation_date": 1467826962, "answer_id": 38230399, "question_id": 38230332, "link": "https://stackoverflow.com/questions/38230332/why-i-couldnt-debug-cc-file/38230399#38230399", "title": "Why I couldn&#39;t debug .cc file?", "body": "<p>First of all, your type is named <code>Span</code>, not <code>span</code>. Names are case-sensitive in C++. Secondly, your <code>Span</code> template takes two template arguments, while you provide only one. This works:</p>\n\n<pre><code>Span&lt;int&gt; ageSpan;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6182543, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b697ef997eee80993c58e526550566c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ann W.", "link": "https://stackoverflow.com/users/6182543/ann-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "closed_date": 1467858348, "answer_count": 1, "score": -10, "last_activity_date": 1469408010, "creation_date": 1467826786, "last_edit_date": 1469408010, "question_id": 38230332, "link": "https://stackoverflow.com/questions/38230332/why-i-couldnt-debug-cc-file", "closed_reason": "Not suitable for this site", "title": "Why I couldn&#39;t debug .cc file?", "body": "<p>why I added cerr debug points in .cc file, but it never print out when I run it, where could it possibly be manipulated and by what files?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "eclipse", "configuration", "mingw", "portable-applications"], "answers": [{"tags": [], "owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "is_accepted": true, "score": 2, "last_activity_date": 1467847256, "creation_date": 1467847256, "answer_id": 38235354, "question_id": 38230274, "link": "https://stackoverflow.com/questions/38230274/portable-eclipse-c-c-configuration-for-c-compiler-without-computer-installt/38235354#38235354", "title": "Portable Eclipse C\\C++ Configuration for C++ compiler (without computer installtion (c drive, PATH etc)) on USB", "body": "<p>You do not need to alter system-wide path variable to help Eclipse finding your compiler. Simply create a batch file, which modifies and exports <code>PATH</code>. For example, put the following in the same directory as eclipse executable:</p>\n\n<pre><code>set PATH=%PATH%;path-to-mingw-bin\nyour-eclipse-executable\n</code></pre>\n\n<p>Save it as, for example, <code>StartEclipse.bat</code>, and execute it. (of course <code>your-eclipse-executable</code> should be given relative to the working directory of the batch script, and <code>path-to-mingw-bin</code> must be an absolute path)</p>\n\n<p>You can install your MinGW anywhere, not necessarily in <code>C:\\</code>, so installing it shouldn't be a problem.</p>\n"}], "owner": {"reputation": 35, "user_id": 5026568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kkURpuYiJs8/AAAAAAAAAAI/AAAAAAAABP8/ILm4jQI0zuQ/photo.jpg?sz=128", "display_name": "AstroHawking1090", "link": "https://stackoverflow.com/users/5026568/astrohawking1090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1574, "favorite_count": 0, "accepted_answer_id": 38235354, "answer_count": 1, "score": 2, "last_activity_date": 1467847256, "creation_date": 1467826600, "last_edit_date": 1467828000, "question_id": 38230274, "link": "https://stackoverflow.com/questions/38230274/portable-eclipse-c-c-configuration-for-c-compiler-without-computer-installt", "title": "Portable Eclipse C\\C++ Configuration for C++ compiler (without computer installtion (c drive, PATH etc)) on USB", "body": "<p>I am trying to program in C++ using Eclipse. However, this requires Eclipse to work on different computers with a MinGW compiler installation everytime. I know that it will work if I install it on a computer and add the location to the PATH variable, but I want to know how to put the compiler onto my USB as well as the Eclipse program and make it work the same way. </p>\n\n<p>It should be installed in such a way that Eclipse can find the compiler on my USB (without the PATH stuff and C drive installation) and compile my program successfully without giving a \"Binary not found\" error because it could not build my source code. </p>\n\n<p>I've solved this problem with Eclipse Java and am completely able to write and compile Java code. However, I don't know how to do it for a C\\C++ Eclipse. Can someone help me with this problem?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt", "drag-and-drop", "qtreeview", "qabstractitemview"], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 5653461, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/yjvCY.png?s=128&g=1", "display_name": "IAmInPLS", "link": "https://stackoverflow.com/users/5653461/iaminpls"}, "is_accepted": true, "score": 4, "last_activity_date": 1467876586, "last_edit_date": 1495542151, "creation_date": 1467876586, "answer_id": 38239804, "question_id": 38230159, "link": "https://stackoverflow.com/questions/38230159/qtreeview-how-to-tell-if-a-drag-drop-event-is-a-reorder-or-a-move-between-pare/38239804#38239804", "title": "QTreeView - how to tell if a drag/drop event is a reorder or a move between parents?", "body": "<p>I did almost the same thing some time ago, and I can think of 3 things :</p>\n\n<ul>\n<li>you will have to reimplement your <code>dropEvent()</code>, and maybe your <code>dragMoveEvent()</code>;</li>\n<li>to check where you are dropping an item, use <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#dropIndicatorPosition\" rel=\"nofollow noreferrer\">dropIndicatorPosition()</a>;</li>\n<li>to show the drop indicator, use <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#showDropIndicator-prop\" rel=\"nofollow noreferrer\">setDropIndicatorShown(bool)</a>.</li>\n</ul>\n\n<p>Here's a very minimal example of what I was doing. </p>\n\n<p>In the <code>dragMoveEvent()</code>, I was showing the drop indicator. This way, you will always have your drop indicator shown when you're dragging an object.</p>\n\n<pre><code>void MyTreeView::dragMoveEvent(QDragMoveEvent* event)\n{\n    setDropIndicatorShown(true);\n    QTreeView::dragMoveEvent(event);\n}\n</code></pre>\n\n<p>In the <code>dropEvent()</code>, I was managing each case, that's to say if the item I was dragging was on another item, above it, below it or on the viewport. Then, according to it, I was managing my own drop, and at the end of the event, I hid the drop indicator.</p>\n\n<pre><code>void MyTreeView::dropEvent(QDropEvent* event)\n{\n    bool dropOK = false;\n    DropIndicatorPosition dropIndicator = dropIndicatorPosition();\n\n    switch (dropIndicator)\n    {\n    case QAbstractItemView::AboveItem:\n        dropOK = true;\n        break;\n    case QAbstractItemView::BelowItem:\n        dropOK = true;\n        break;\n    case QAbstractItemView::OnItem:\n        dropOK = false;\n        break;\n    case QAbstractItemView::OnViewport:\n        dropOK = false;\n        break;\n    }\n    if(dropOK)\n    {\n        // Here, you need to manage yourself the case of dropping an item\n    }\n    setDropIndicatorShown(false); // hide the drop indicator once the drop is done\n}\n</code></pre>\n\n<hr>\n\n<p><em>\"Bonus\"</em> : you can access the drop indicator in your own style by the <a href=\"http://doc.qt.io/qt-5/qstyle.html#PrimitiveElement-enum\" rel=\"nofollow noreferrer\">PrimitiveElement</a> <code>PE_IndicatorItemViewItemDrop</code>. \nYou can see how to customize it <a href=\"http://www.qtcentre.org/threads/35443-Customize-drop-indicator-in-QTreeView\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/a/4755261/5653461\">here</a>.</p>\n"}], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2790, "favorite_count": 2, "accepted_answer_id": 38239804, "answer_count": 1, "score": 3, "last_activity_date": 1467916708, "creation_date": 1467826232, "last_edit_date": 1467916708, "question_id": 38230159, "link": "https://stackoverflow.com/questions/38230159/qtreeview-how-to-tell-if-a-drag-drop-event-is-a-reorder-or-a-move-between-pare", "title": "QTreeView - how to tell if a drag/drop event is a reorder or a move between parents?", "body": "<p>I have subclasses of <code>QTreeView</code> and <code>QAbstractItemModel</code> and currently I'm using drag-drop to move items from one parent index to another.  I want to also add the ability to rearrange the order of items within the same parent index.  When the user drops an item in-between two other items, I need to determine whether the drop should be into, or in-between them.  I would also like to draw a dark line between the two items as the mouse is moved, to hint as to what will occur, similar to many other tree-type views (e.g. file explorers on most operating systems) as in the attached pictures:</p>\n\n<p>Drag into an existing item:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Gi74q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gi74q.png\" alt=\"drag into\"></a></p>\n\n<p>Insert between two existing items:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JCZ3C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JCZ3C.png\" alt=\"drag in-between\"></a></p>\n\n<p>Does Qt automate this part of drag/drop behavior, or do I have to manually calculate the mouse position relative to the edge of the tree item?  Also, how can I draw a temporary line between two items in the <code>QTreeView</code>?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 2, "creation_date": 1467826474, "post_id": 38230154, "comment_id": 63882207, "body": "<code>Animal</code>. You can verify by <code>typeid(decltype(TargetAnimal)).name()</code>. Also you should never ever ever do this. Look for <code>Object Slicing</code>"}, {"owner": {"reputation": 735, "user_id": 2258989, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/37f0889342964e9220fe4a1608d42ef0?s=128&d=identicon&r=PG", "display_name": "Fawar", "link": "https://stackoverflow.com/users/2258989/fawar"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467826574, "post_id": 38230154, "comment_id": 63882262, "body": "Thanks! Just double check - Slicing aint a problem in my case, everything is pointer in our framework :)"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 1, "creation_date": 1467826621, "post_id": 38230154, "comment_id": 63882285, "body": "Also, what is <code>array</code> ? It is for sure not std::array, right ? And you must publicly inherit for inheritance to work . And you are adding a <code>pointer</code> to array whereas its expecting a value. In short the code pasted is completely wrong."}, {"owner": {"reputation": 735, "user_id": 2258989, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/37f0889342964e9220fe4a1608d42ef0?s=128&d=identicon&r=PG", "display_name": "Fawar", "link": "https://stackoverflow.com/users/2258989/fawar"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467826713, "post_id": 38230154, "comment_id": 63882336, "body": "aka Pseudocode, i&#39;m working with UDK 3 which is all pointer with custom arrays/list"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1467832146, "post_id": 38230154, "comment_id": 63885476, "body": "what the hell is <code>array</code>?"}], "owner": {"reputation": 735, "user_id": 2258989, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/37f0889342964e9220fe4a1608d42ef0?s=128&d=identicon&r=PG", "display_name": "Fawar", "link": "https://stackoverflow.com/users/2258989/fawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467828046, "creation_date": 1467826207, "last_edit_date": 1467828046, "question_id": 38230154, "link": "https://stackoverflow.com/questions/38230154/auto-and-inheritance", "title": "Auto and Inheritance", "body": "<p>Pseudo code </p>\n\n<pre><code>class Animal\nclass Cat : Animal (Inheritance)\n\narray&lt;Animal&gt; Animals;\nCat MyCat = new Cat();\nAnimals.Add(MyCat);\n\nauto TargetAnimal = Animals[0];\n</code></pre>\n\n<p>would auto be deduce to Cat or to Animal?</p>\n"}, {"tags": ["c++", "static-members"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467826313, "post_id": 38230147, "comment_id": 63882112, "body": "Did you mean to write <code>littlenum CompNum::carry() { return 0; }</code>?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467826416, "post_id": 38230147, "comment_id": 63882180, "body": "Is the line intended to deal with the <code>carry</code> function or the <code>crry</code> data memember?"}, {"owner": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467826499, "post_id": 38230147, "comment_id": 63882223, "body": "@JamesAdkison With the crry data member"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467826551, "post_id": 38230147, "comment_id": 63882252, "body": "@Garmekain Then you need to specify the type <code>CompNum::littleenum</code>, it is not a function so no parens <code>()</code>, and you incorrectly used <code>carry</code> instead of <code>crry</code>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467826814, "post_id": 38230147, "comment_id": 63882382, "body": "@JamesAdkison: OP&#39;s class is written just fine, he just needs to define storage for the static class member."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467827239, "post_id": 38230147, "comment_id": 63882643, "body": "@AndyG My interpretation was they the OP was trying to define the storage and initialize the value to <code>0</code>, not set the value using the reference returned by the <code>carry</code> function. But your interpretation may be correct. If so, what is the point of making <code>crry</code> private if it can be modified via a public <code>static</code> function? (rhetorical)"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467827336, "post_id": 38230147, "comment_id": 63882714, "body": "@AndyG I re-read the question and you&#39;re absolutely correct."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467827358, "post_id": 38230147, "comment_id": 63882732, "body": "@JamesAdkison: haha, good point! In the context of this contradiction, your interpretation is quite reasonable."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 2, "last_activity_date": 1467826495, "creation_date": 1467826495, "answer_id": 38230238, "question_id": 38230147, "link": "https://stackoverflow.com/questions/38230147/error-expected-constructor-destructor-or-type-conversion-before-token/38230238#38230238", "title": "error: expected constructor, destructor, or type conversion before &#39;=&#39; token", "body": "<p>When you declare a <code>static</code> member variable, you are really only specifying that it exists, but not creating storage for it. You need to \"define\" it outside the class:</p>\n\n<pre><code>CompNum::littlenum CompNum::crry;\n</code></pre>\n\n<hr>\n\n<p>Full Code:</p>\n\n<pre><code>class CompNum {\nprivate:\n    typedef char littlenum;\n    static littlenum crry;\npublic:\n    static littlenum&amp; carry() { /*Do something with crry*/ return crry; }\n};\nCompNum::littlenum CompNum::crry;\n\nint main()\n{\n   CompNum::carry() = 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d72e313b9b439c53\" rel=\"nofollow\">Live on Coliru</a></p>\n"}], "owner": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 38230238, "answer_count": 1, "score": -1, "last_activity_date": 1467827075, "creation_date": 1467826181, "question_id": 38230147, "link": "https://stackoverflow.com/questions/38230147/error-expected-constructor-destructor-or-type-conversion-before-token", "title": "error: expected constructor, destructor, or type conversion before &#39;=&#39; token", "body": "<p>I have a class CompNum, which I need him to initialize the private static <em>crry</em> variable with the value of 0 (the variable <strong>must</strong> be private).</p>\n\n<p>So I made a public function returning the reference of the crry variable, in order to be able to change that variable using the carry() function.</p>\n\n<pre><code>class CompNum {\nprivate:\n    typedef char littlenum;\n    static littlenum crry;\n    ...\npublic:\n    static littlenum&amp; carry() { /*Do something with crry*/ return crry; }\n    ...\n};\n\nCompNum::carry() = 0;\n</code></pre>\n\n<p>Compiling this, it throws this error:</p>\n\n<pre><code>error: expected constructor, destructor, or type conversion before '=' token\n</code></pre>\n\n<p>In the line:</p>\n\n<pre><code> CompNum::carry() = 0;\n</code></pre>\n\n<p><strong>GOAL:</strong></p>\n\n<p>The goal here is to be able to change the crry variable, but I need to make some things first every time I want to change it, so doing <code>CompNum::crry = 123</code> is not a solution, that's why I think I need a public method to achieve that.</p>\n"}, {"tags": ["c++", "arrays", "string", "winapi"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1467826191, "post_id": 38230134, "comment_id": 63882045, "body": "What is the contents of <code>strText</code> after <code>SendMessage(dropDown, CB_GETLBTEXT, dropDownSelection, reinterpret_cast&lt;LPARAM&gt;(strText));</code>?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467826249, "post_id": 38230134, "comment_id": 63882075, "body": "@NathanOliver Same no? Because he is passing a copy and not a reference and function returns void?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1467826358, "post_id": 38230134, "comment_id": 63882136, "body": "@FirstStep Not sure.  The array decays to a pointer so if they just fill the array it should have something.  passing by value only applies if they try to change where it points to(not what)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467826363, "post_id": 38230134, "comment_id": 63882146, "body": "Even <i>if</i> reinterpret_cast was the right way to do this (which it most likely is not), what is the return value? You don&#39;t use it anywhere.  Is this really the code you are using?"}, {"owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467826489, "post_id": 38230134, "comment_id": 63882214, "body": "I&#39;ll update my question"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467826490, "post_id": 38230134, "comment_id": 63882216, "body": "@NathanOliver oh right right makes sense"}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 2, "creation_date": 1467826492, "post_id": 38230134, "comment_id": 63882217, "body": "Are you compiling with <code>UNICODE</code> defined? if so it&#39;s <code>WCHAR</code> and <code>std::wstring</code> because <code>SendMessage</code> is #defined as <code>SendMessageW</code> (This would likely only show you the first character since Windows uses UTF-16LE, so the API string looks like <code>W\\0O\\0R\\0K\\0S\\0</code>)"}, {"owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467826561, "post_id": 38230134, "comment_id": 63882259, "body": "I wish to know why this is getting downvoted constantly? thought this here is for Q&amp;A or is this question too dump?"}, {"owner": {"reputation": 1355, "user_id": 2099774, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b1616496d50ecbb4ddb4f6a431a2307?s=128&d=identicon&r=PG", "display_name": "BackDoorNoBaby", "link": "https://stackoverflow.com/users/2099774/backdoornobaby"}, "edited": false, "score": 0, "creation_date": 1467827015, "post_id": 38230134, "comment_id": 63882514, "body": "@abdoe the string constructor will turn a NULL-terminated C-string into a string, but since your second character is <code>\\0</code> then its only using the first letter"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467827022, "post_id": 38230134, "comment_id": 63882524, "body": "@abdoe The question&#39;s not dumb, it looks incomplete. Technically it is incomplete as it lacks an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  The problem is obvious after the edit and the cause very likely before, Thomas has it nailed in his answer below."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467827167, "post_id": 38230134, "comment_id": 63882615, "body": "<b>\u22121</b> For selecting Really Ungood Advice\u2122 as solution. This downvote is not like a punishment, but it&#39;s (unfortunately) about the only device available to make current readers and later googlers more likely aware of the <b>extremely low quality</b> of the selected solution."}, {"owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467827275, "post_id": 38230134, "comment_id": 63882662, "body": "I didn&#39;t see your answer here, so it&#39;s hard to compare, but downvoting will help"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1467828561, "post_id": 38230134, "comment_id": 63883367, "body": "@Cheersandhth.-Alf: You have been around for a while and should know, how the voting system is supposed to work. You don&#39;t downvote a question because you disagree with the choice of the OP&#39;s accepted answer. To quote <a href=\"http://stackoverflow.com/questions/38230134/c-char-array-not-correctly-converted-to-stdstring#comment63882497_38230230\">yourself</a>: <i>&quot;What were you thinking of? Jeez.&quot;</i>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1467828761, "post_id": 38230134, "comment_id": 63883471, "body": "@IInspectable: I agree, mostly. I wish SO was more technical, and that I was not at the end of my day. Then I&#39;d just write an answer. Maybe you can do it? Thx."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467828842, "post_id": 38230134, "comment_id": 63883519, "body": "OK, it&#39;s fixed now."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467826672, "post_id": 38230230, "comment_id": 63882320, "body": "so I need to initialze the array with something like TCHAR arr[13]; then I guess?:)"}, {"owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467826931, "post_id": 38230230, "comment_id": 63882455, "body": "thanks it works! I would never found this to be the issue. thanks a lot. It&#39;s tought to get started here"}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "edited": false, "score": 0, "creation_date": 1467826989, "post_id": 38230230, "comment_id": 63882495, "body": "Yeah, the Windows API is not exactly the most forgiving. Neither is C++, for that matter."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467826993, "post_id": 38230230, "comment_id": 63882497, "body": "<b>\u22121</b> \u201cUse TCHAR instead\u201d. Please don&#39;t offer how-to-make-suicide-more-painful advice. What were you thinking of? Jeez."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467827048, "post_id": 38230230, "comment_id": 63882543, "body": "@Cheersandhth.-Alf Please explain more. I don&#39;t see why <code>TCHAR</code> is a bad idea, when wielded correctly (which is of course OP&#39;s responsibility)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1467827339, "post_id": 38230230, "comment_id": 63882717, "body": "@Thomas: You can&#39;t wield that &quot;correctly&quot;. It&#39;s a 16 years obsolete 10% solution to a 10 years obsolete problem (namely supporting Windows 9x to some degree), and it has only negative utility. That means that you don&#39;t know anything about what  you&#39;re talking about."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467827630, "post_id": 38230230, "comment_id": 63882869, "body": "@Cheersandhth.-Alf OK then, let me google it for me: <a href=\"http://stackoverflow.com/questions/234365/is-tchar-still-relevant\" title=\"is tchar still relevant\">stackoverflow.com/questions/234365/is-tchar-still-relevant</a> So would your advice be to use <code>wchar_t</code> instead? If so, feel free to edit that in. (And yeah, the last time I worked with the Windows API must have been around 10 years ago...)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467827981, "post_id": 38230230, "comment_id": 63883063, "body": "@Thomas: The &quot;obsolete&quot; in my comment referred to Layer for Unicode introduced in year 2000. Of course nobody uses it now. Well, except probably some company somewhere with a lot of legacy code and using an ages-old version of VS to make their code compile... :)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467828294, "post_id": 38230230, "comment_id": 63883241, "body": "I looked at the answer in your link and I liked <a href=\"http://stackoverflow.com/a/3002494/464581\">@dan04&#39;s answer</a>, except the advice to use UTF-8 also for internal byte-based strings. That creates problems with e.g. file paths, because as a matter of in-practice the C++ runtime libraries in C++ passes byte strings directly down to the API, which assumes Windows ANSI by default (the other possibility is OEM). So this is a complex matter, but what everbody except the silly accepted solution there agrees  on, is that <code>TCHAR</code> is Really Bad\u2122."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1467828733, "post_id": 38230230, "comment_id": 63883458, "body": "@Cheersandhth.-Alf Edited to the best of my abilities. I&#39;ll leave any further corrections to you."}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 4, "last_activity_date": 1467828680, "last_edit_date": 1495542151, "creation_date": 1467826480, "answer_id": 38230230, "question_id": 38230134, "link": "https://stackoverflow.com/questions/38230134/c-char-array-not-correctly-converted-to-stdstring/38230230#38230230", "title": "c++ char array not correctly converted to std::string", "body": "<p>Most likely, your program is compiled in Unicode mode, so <code>strText</code> receives an UTF-16 encoded string. Since the <code>W</code> character fits in a single byte, the second byte will be 0 (little-endian encoding).</p>\n\n<p>Don't use <code>char</code> when interfacing with the Windows API in Unicode mode. Use <code>wchar_t</code> and and <code>std::wstring</code> instead.</p>\n\n<p>Or read and understand <a href=\"https://stackoverflow.com/questions/234365/is-tchar-still-relevant/3002494\">this question and its answers</a> and make up your own mind on how you want to handle strings.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374089(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Read more about Unicode in the Windows API</a>. <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow noreferrer\">And about Unicode in general</a>.</p>\n"}], "owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 38230230, "answer_count": 1, "score": -1, "last_activity_date": 1467828827, "creation_date": 1467826139, "last_edit_date": 1467828827, "question_id": 38230134, "link": "https://stackoverflow.com/questions/38230134/c-char-array-not-correctly-converted-to-stdstring", "title": "c++ char array not correctly converted to std::string", "body": "<p>Developing in win32 context and trying to get the input from my dropdown as a string. <code>strText</code> is the correct value in type <code>char[255]</code>. I'm trying to convert this char array to a string, but it fails  </p>\n\n<pre><code>char strText[13];\nSendMessage(dropDown, CB_GETLBTEXT, dropDownSelection, reinterpret_cast&lt;LPARAM&gt;(strText));\n\nstd::string test(strText);  // outputs W\nstd::string test2(\"WORKS\"); // outputs WORKS\n</code></pre>\n\n<p>thanks for any hints</p>\n\n<p>** EDIT ** </p>\n\n<p><code>strText</code></p>\n\n<pre><code>strText 0x003beeec \"M\"  char[13]\n77 'M'\n0 '\\0'\n79 'O'\n0 '\\0'\n78 'N'\n0 '\\0'\n71 'G'\n0 '\\0'\n79 'O'\n0 '\\0'\n68 'D'\n0 '\\0'\n66 'B'\n</code></pre>\n"}, {"tags": ["c++", "xml", "xsd", "code-generation"], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 1623317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FFxns.jpg?s=128&g=1", "display_name": "Howard Rubin", "link": "https://stackoverflow.com/users/1623317/howard-rubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468523409, "creation_date": 1468523409, "answer_id": 38382395, "question_id": 38230034, "link": "https://stackoverflow.com/questions/38230034/how-to-create-reader-writer-samples-with-xbinder/38382395#38382395", "title": "How to create reader &amp; writer samples with xbinder?", "body": "<p>Apparently you have to have a top level element to generate the reader or writer sample programs. Tech support suggested adding this line to the schema file, which worked.</p>\n\n<pre><code>&lt;xsd:element name=\"CDL_ELEMENT\" type=\"cdl\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 1623317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FFxns.jpg?s=128&g=1", "display_name": "Howard Rubin", "link": "https://stackoverflow.com/users/1623317/howard-rubin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468523409, "creation_date": 1467825812, "question_id": 38230034, "link": "https://stackoverflow.com/questions/38230034/how-to-create-reader-writer-samples-with-xbinder", "title": "How to create reader &amp; writer samples with xbinder?", "body": "<p>According to the <a href=\"https://www.obj-sys.com/support/xbtutorial/XBinderTutorial_17.php\" rel=\"nofollow\">xbinder documentation</a>, passing <code>-genreader</code> and <code>-genwriter</code> on the xbinder command line will generate e.g. reader.cpp and writer.cpp . But it's not working for me. Am I doing something wrong?</p>\n\n<pre><code>$ ls -l\ntotal 4\n-rw-rw-r--. 1 hrubin hrubin 444 Jul  6 09:59 cdl.xsd\n$ cat cdl.xsd \n&lt;?xml version=\"1.0\"?&gt;\n\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\"&gt;\n\n\n    &lt;xsd:complexType name=\"cdl\"&gt;\n      &lt;xsd:sequence&gt;\n        &lt;xsd:element name=\"Polygon\" type=\"xsd:string\" /&gt;\n        &lt;xsd:element name=\"Table\"   type=\"xsd:integer\" /&gt;\n        &lt;xsd:element name=\"Shape\"   type=\"xsd:double\" /&gt;\n      &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n\n\n&lt;/xsd:schema&gt;\n$ ~/Downloads/xbv240/bin/xbinder cdl.xsd -c++ -xml -genmake -genwriter\n\n\nXBinder Compiler, Version 2.4.0 DEVELOPMENT VERSION\nCopyright (c) 2002-2016 Objective Systems, Inc. All Rights Reserved.\n\nParsing XML schema definitions..\nCompiling XML schema file ./cdl.xsd..\nWriting C++ type and class definitions to file cdl.h..\nWriting C++ encode functions  to file cdlEnc.cpp..\nWriting C++ decode functions to file cdlDec.cpp..\nWriting C++ common functions to file cdl.cpp..\nGenerating makefile..\n\nCompilation was successful.\n$ ls -l\ntotal 28\n-rw-rw-r--. 1 hrubin hrubin  878 Jul  6 11:13 cdl.cpp\n-rw-rw-r--. 1 hrubin hrubin 2265 Jul  6 11:13 cdlDec.cpp\n-rw-rw-r--. 1 hrubin hrubin 1402 Jul  6 11:13 cdlEnc.cpp\n-rw-rw-r--. 1 hrubin hrubin 1336 Jul  6 11:13 cdl.h\n-rw-rw-r--. 1 hrubin hrubin  444 Jul  6 09:59 cdl.xsd\n-rw-rw-r--. 1 hrubin hrubin 1220 Jul  6 11:13 makefile\n-rw-rw-r--. 1 hrubin hrubin  818 Jul  6 11:13 rtkey.h\n$ \n</code></pre>\n"}, {"tags": ["c++", "inheritance", "initializer-list"], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 8, "last_activity_date": 1467825704, "creation_date": 1467825704, "answer_id": 38230000, "question_id": 38229966, "link": "https://stackoverflow.com/questions/38229966/no-matching-function-for-call-to-xx/38230000#38230000", "title": "no matching function for call to \u2018X::X()\u2019", "body": "<p>You need to call the superclass constructor, because a default constructor is not available:</p>\n\n<pre><code>Y( int a ) : X(some_int_like_maybe_a), x( a ) { }\n</code></pre>\n\n<p>Also consider marking <code>X::X(int)</code> as <code>explicit</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1467826101, "last_edit_date": 1467826101, "creation_date": 1467825754, "answer_id": 38230018, "question_id": 38229966, "link": "https://stackoverflow.com/questions/38229966/no-matching-function-for-call-to-xx/38230018#38230018", "title": "no matching function for call to \u2018X::X()\u2019", "body": "<p>The reason for the error is you are not constructing the <code>X</code> part of <code>Y</code>.  Since <code>Y</code> inherits from <code>X</code> you need to construct the <code>X</code> part of <code>Y</code>.  Since you did not the compiler does it for you.  When it does this it uses the default constructor, which <code>X</code> does not have, thus you get the error.  You need to have something like</p>\n\n<pre><code>Y( int a ) : X(some_value), x( a ) { }\n</code></pre>\n\n<p>To construct the <code>X</code> part of <code>Y</code> and the <code>x</code> member of <code>Y</code>.  Or you could add a default constructor for X and let it get default constructed.</p>\n"}], "owner": {"reputation": 2945, "user_id": 1376444, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6fTWs.jpg?s=128&g=1", "display_name": "Brian Brown", "link": "https://stackoverflow.com/users/1376444/brian-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 38230018, "answer_count": 2, "score": 0, "last_activity_date": 1467826101, "creation_date": 1467825593, "question_id": 38229966, "link": "https://stackoverflow.com/questions/38229966/no-matching-function-for-call-to-xx", "title": "no matching function for call to \u2018X::X()\u2019", "body": "<p>I have an application with base and derived class. I need to have a filed of the base class in derived one, but have some problems initializing it. Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass X\n{\npublic :\n    X( int x ) { }\n} ;\n\nclass Y : public X\n{\n    X x ;\n    Y* y ;\n    Y( int a ) : x( a ) { }\n} ;\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>And the errors:</p>\n\n<pre><code>/tmp/test.cpp||In constructor \u2018Y::Y(int)\u2019:|\n/tmp/test.cpp|14|error: no matching function for call to \u2018X::X()\u2019|\n/tmp/test.cpp|14|note: candidates are:|\n/tmp/test.cpp|7|note: X::X(int)|\n/tmp/test.cpp|7|note:   candidate expects 1 argument, 0 provided|\n/tmp/test.cpp|4|note: X::X(const X&amp;)|\n/tmp/test.cpp|4|note:   candidate expects 1 argument, 0 provided|\n||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "pointers", "initialization", "variable-assignment"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 0, "creation_date": 1467825355, "post_id": 38229858, "comment_id": 63881535, "body": "Which line gives the error?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1467825440, "post_id": 38229858, "comment_id": 63881598, "body": "The lines of code that you have posted work but you forgot to post the line(s) of code that doesn&#39;t(don&#39;t) work. That is not helpful to anybody that wants to help you."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1467825598, "post_id": 38229908, "comment_id": 63881689, "body": "@JesperJuhl or your keyboard? :)"}, {"owner": {"reputation": 3813, "user_id": 6290553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvOsJ.jpg?s=128&g=1", "display_name": "Raktim Biswas", "link": "https://stackoverflow.com/users/6290553/raktim-biswas"}, "edited": false, "score": 0, "creation_date": 1467825941, "post_id": 38229908, "comment_id": 63881901, "body": "fastest finger <i>(thinker)</i> first :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1467826219, "last_edit_date": 1467826219, "creation_date": 1467825385, "answer_id": 38229908, "question_id": 38229858, "link": "https://stackoverflow.com/questions/38229858/c-pointers-confusion/38229908#38229908", "title": "C++ Pointers Confusion", "body": "<p>Please notice the data types there.</p>\n\n<p>When you write</p>\n\n<pre><code>ip = &amp;x;\n</code></pre>\n\n<p>this is an <a href=\"https://en.wikipedia.org/wiki/Assignment_(computer_science)\" rel=\"nofollow\">assignment statement</a>. You're trying to store the address of <code>x</code> (a pointer, basically <code>int *</code>) into <code>ip</code>, which is also a variable of type pointer to <code>int</code> (again, <code>int *</code>). All good.</p>\n\n<p>On the other hand, when you try to write</p>\n\n<pre><code>*ip = &amp;x;\n</code></pre>\n\n<p>This is also an assignment, but here, <code>*ip</code> is an <code>int</code> type and <code>&amp;x</code> is <code>int *</code> and they are not compatible. Hence your compiler warns you for good.</p>\n\n<hr>\n\n<p>FWIW, </p>\n\n<pre><code> int *ip = &amp;x;\n</code></pre>\n\n<p>is fine, because this is <a href=\"https://en.wikipedia.org/wiki/Initialization_(programming)\" rel=\"nofollow\">initialization</a>, not only a simple assigment. You are initializing variable <code>ip</code> (of type <code>int *</code>) at the time of definition. Remember, the variable getting defined and initialized here is <code>ip</code>, not <code>*ip</code> and this is very different from writing</p>\n\n<pre><code>*ip = &amp;x;\n</code></pre>\n\n<p>(<em>which as I already mentioned, is improper.</em>)</p>\n"}, {"tags": [], "owner": {"reputation": 1799, "user_id": 5867869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M7o7w.jpg?s=128&g=1", "display_name": "RomCoo", "link": "https://stackoverflow.com/users/5867869/romcoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1467825830, "last_edit_date": 1467825830, "creation_date": 1467825602, "answer_id": 38229968, "question_id": 38229858, "link": "https://stackoverflow.com/questions/38229858/c-pointers-confusion/38229968#38229968", "title": "C++ Pointers Confusion", "body": "<p><strong>Be careful</strong>: There is a difference between:</p>\n\n<ul>\n<li><p><code>ip = &amp;x;</code> Here you allocate the pointer <code>ip</code> with the address of <code>x</code></p></li>\n<li><p>and <code>*ip = x;</code> Here you set the value where <code>ip</code> points to, with the value of <code>x</code></p></li>\n</ul>\n\n<p>Attention: <code>*ip = &amp;x;</code> is a mix of both and therefore won't work</p>\n"}, {"tags": [], "owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1467825797, "creation_date": 1467825797, "answer_id": 38230028, "question_id": 38229858, "link": "https://stackoverflow.com/questions/38229858/c-pointers-confusion/38230028#38230028", "title": "C++ Pointers Confusion", "body": "<p>I think your confusion is only from the syntax of the pointer at the declaration line.</p>\n\n<p>when you declare a Pointer, you write <code>int *p</code>, which means <code>define symbol **p** to be of type Pointer to **int**</code> and the Assign <code>=</code> is providing value to <code>p</code> and not <code>*p</code>.</p>\n\n<p>when not on the declaration line, there is no confusion! <code>p</code> is the Pointer. and <code>*p</code> is the value.</p>\n\n<p>Other way to say it... if declaring a pointer was done by <code>ptr2int p = &amp;i</code>, i guess it was clearer.</p>\n\n<p>that is the reason why many people rather declare pointer types as <code>int* p</code> instead of the <code>int *p</code>. small semantics that makes people happy :)</p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 9, "user_id": 6005917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e71474aa8d82775223f049bf5b999df?s=128&d=identicon&r=PG", "display_name": "Madhur Wadhwa", "link": "https://stackoverflow.com/users/6005917/madhur-wadhwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 38229908, "answer_count": 3, "score": -3, "last_activity_date": 1467826219, "creation_date": 1467825213, "last_edit_date": 1467825837, "question_id": 38229858, "link": "https://stackoverflow.com/questions/38229858/c-pointers-confusion", "title": "C++ Pointers Confusion", "body": "<p>While defining a pointer variable, we use code that looks like</p>\n\n<pre><code>int *ip;\n</code></pre>\n\n<p>but we can also initialize the pointer in the same line to point a random defined variable say x.</p>\n\n<pre><code>int x;\nint *ip = &amp;x;\n</code></pre>\n\n<p>and we can also initialize the pointer variable in another line of code for example,</p>\n\n<pre><code>int x;\nint *ip;\nip = &amp;x;\n</code></pre>\n\n<p>My question is that when I use <code>*ip</code> to initialize the pointer variable,</p>\n\n<pre><code>int x;\nint *ip;\n*ip = &amp;x;\n</code></pre>\n\n<p>Visual Studio gives an error:</p>\n\n<blockquote>\n  <p>Error C2440   '=': cannot convert from 'int *' to 'int'</p>\n</blockquote>\n\n<p>Can Someone please explain it to me, I have just started learning C++.</p>\n"}, {"tags": ["c++", "boost", "boost-asio", "istream"], "comments": [{"owner": {"reputation": 3998, "user_id": 246878, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7c42eb2c8aea125422f16d2a656bb896?s=128&d=identicon&r=PG&f=1", "display_name": "M2tM", "link": "https://stackoverflow.com/users/246878/m2tm"}, "edited": false, "score": 1, "creation_date": 1467825390, "post_id": 38229739, "comment_id": 63881561, "body": "Semi-related, you probably want to do: boost::bind(&amp;IProtocol::handle_data_recv, protocol.shared_from_this(),                                           boost::asio::placeholders::error) or similar to enforce lifespan, though depending on the structure of your program maybe you implicitly force lifespan already.  This would of course force you to use a shared_ptr and derive from enable_shared_from_this&lt;&gt;"}, {"owner": {"reputation": 7095, "user_id": 559095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c009f80972754e91f06b29a7dce0fc?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/559095/sid"}, "reply_to_user": {"reputation": 3998, "user_id": 246878, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7c42eb2c8aea125422f16d2a656bb896?s=128&d=identicon&r=PG&f=1", "display_name": "M2tM", "link": "https://stackoverflow.com/users/246878/m2tm"}, "edited": false, "score": 0, "creation_date": 1467825553, "post_id": 38229739, "comment_id": 63881662, "body": "Good observation, thanks - but as you mentioned the protocol object also exists for the lifetime of the program. All these are created in main() before the call to io_service.run()"}], "answers": [{"tags": [], "owner": {"reputation": 3998, "user_id": 246878, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7c42eb2c8aea125422f16d2a656bb896?s=128&d=identicon&r=PG&f=1", "display_name": "M2tM", "link": "https://stackoverflow.com/users/246878/m2tm"}, "is_accepted": true, "score": 1, "last_activity_date": 1467828279, "last_edit_date": 1467828279, "creation_date": 1467825898, "answer_id": 38230056, "question_id": 38229739, "link": "https://stackoverflow.com/questions/38229739/using-the-same-istream-with-a-resizeable-streambuf-in-boostasio/38230056#38230056", "title": "Using the same istream with a resizeable streambuf in boost::asio", "body": "<p>No, thankfully, the binding doesn't care that recv_data's internals may get reallocated and it instead binds to the recv_data object itself.  Here is a working example of a downloader I wrote which you can see I do not re-allocate the buffer in between reads.</p>\n\n<p>In the same way you can safely share a reference to a vector and not care if the internals of the vector are re-allocated (unless you start pointing at memory addresses of the vector's elements directly, or using iterators after they become invalidated.  The handle to the vector remains valid, and in this same way, the handle to the streambuf remains valid to the istream and it works just fine).</p>\n\n<p><em>download.h</em></p>\n\n<pre><code>#ifndef _MV_DOWNLOAD_H_\n#define _MV_DOWNLOAD_H_\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;ostream&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include \"Network/url.h\"\n#include \"Utility/generalUtility.h\"\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n\nnamespace MV {\n    struct HttpHeader {\n        std::string version;\n        int status = 0;\n        std::string message;\n        std::map&lt;std::string, std::string&gt; values;\n\n        std::vector&lt;std::string&gt; bounces;\n\n        bool success = false;\n        std::string errorMessage;\n\n        size_t contentLength;\n\n        HttpHeader() {\n        }\n\n        HttpHeader(std::istream&amp; response_stream) {\n            read(response_stream);\n        }\n\n        void read(std::istream&amp; response_stream);\n    };\n\n\n    inline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const HttpHeader&amp; obj) {\n        os &lt;&lt; \"\\\\/______HTTP_HEADER______\\\\/\\nVersion [\" &lt;&lt; obj.version &lt;&lt; \"] Status [\" &lt;&lt; obj.status &lt;&lt; \"] Message [\" &lt;&lt; obj.message &lt;&lt; \"]\\n\";\n        os &lt;&lt; \"||-----------------------||\\n\";\n        for (auto&amp;&amp; kvp : obj.values) {\n            os &lt;&lt; \"[\" &lt;&lt; kvp.first &lt;&lt; \"]: \" &lt;&lt; kvp.second &lt;&lt; \"\\n\";\n        }\n        os &lt;&lt; \"\\n||--------Bounces--------||\\n\";\n        for (size_t i = 0; i &lt; obj.bounces.size(); ++i) {\n            os &lt;&lt; i &lt;&lt; \": \" &lt;&lt; obj.bounces[i] &lt;&lt; \"\\n\";\n        }\n        os &lt;&lt; \"/\\\\_______________________/\\\\\" &lt;&lt; std::endl;\n        return os;\n    }\n    inline std::istream&amp; operator&gt;&gt;(std::istream&amp; a_is, HttpHeader&amp; a_obj) {\n        a_obj.read(a_is);\n        return a_is;\n    }\n\n    class DownloadRequest : public std::enable_shared_from_this&lt;DownloadRequest&gt; {\n    public:\n        static std::shared_ptr&lt;DownloadRequest&gt; make(const MV::Url&amp; a_url, const std::shared_ptr&lt;std::ostream&gt; &amp;a_streamOutput) {\n            auto result = std::shared_ptr&lt;DownloadRequest&gt;(new DownloadRequest(a_streamOutput));\n            result-&gt;perform(a_url);\n            return result;\n        }\n\n        //onComplete is called on success or error at the end of the download.\n        static std::shared_ptr&lt;DownloadRequest&gt; make(const std::shared_ptr&lt;boost::asio::io_service&gt; &amp;a_ioService, const MV::Url&amp; a_url, const std::shared_ptr&lt;std::ostream&gt; &amp;a_streamOutput, std::function&lt;void (std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete) {\n            auto result = std::shared_ptr&lt;DownloadRequest&gt;(new DownloadRequest(a_streamOutput));\n            result-&gt;onComplete = a_onComplete;\n            result-&gt;ioService = a_ioService;\n            result-&gt;perform(a_url);\n            return result;\n        }\n\n        HttpHeader&amp; header() {\n            return headerData;\n        }\n\n        MV::Url finalUrl() {\n            return currentUrl;\n        }\n\n        MV::Url inputUrl() {\n            return originalUrl;\n        }\n\n    private:\n        DownloadRequest(const std::shared_ptr&lt;std::ostream&gt; &amp;a_streamOutput) :\n            streamOutput(a_streamOutput) {\n        }\n\n        void perform(const MV::Url&amp; a_url);\n\n        bool initializeSocket();\n\n        void initiateRequest(const MV::Url&amp; a_url);\n\n        void handleResolve(const boost::system::error_code&amp; err, boost::asio::ip::tcp::resolver::iterator endpoint_iterator);\n        void handleConnect(const boost::system::error_code&amp; err, boost::asio::ip::tcp::resolver::iterator endpoint_iterator);\n        void handleWriteRequest(const boost::system::error_code&amp; err);\n        void handleReadHeaders(const boost::system::error_code&amp; err);\n        void handleReadContent(const boost::system::error_code&amp; err);\n\n        void readResponseToStream() {\n            (*streamOutput) &lt;&lt; &amp;(*response);\n        }\n\n        std::shared_ptr&lt;boost::asio::io_service&gt; ioService;\n        std::unique_ptr&lt;boost::asio::ip::tcp::resolver&gt; resolver;\n        std::unique_ptr&lt;boost::asio::ip::tcp::socket&gt; socket;\n\n        std::unique_ptr&lt;std::istream&gt; responseStream;\n\n        std::unique_ptr&lt;boost::asio::streambuf&gt; request;\n        std::unique_ptr&lt;boost::asio::streambuf&gt; response;\n\n        std::shared_ptr&lt;std::ostream&gt; streamOutput;\n\n        HttpHeader headerData;\n\n        MV::Url currentUrl;\n        MV::Url originalUrl;\n\n        std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; onComplete;\n    };\n\n    std::string DownloadString(const MV::Url&amp; a_url);\n\n    HttpHeader DownloadFile(const MV::Url&amp; a_url, const std::string &amp;a_path);\n    void DownloadFile(const std::shared_ptr&lt;boost::asio::io_service&gt; &amp;a_ioService, const MV::Url&amp; a_url, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete = std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt;());\n\n    void DownloadFiles(const std::vector&lt;MV::Url&gt;&amp; a_url, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete = std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt;());\n    void DownloadFiles(const std::shared_ptr&lt;boost::asio::io_service&gt; &amp;a_ioService, const std::vector&lt;MV::Url&gt;&amp; a_url, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete = std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt;(), std::function&lt;void()&gt; a_onAllComplete = std::function&lt;void()&gt;());\n}\n#endif\n</code></pre>\n\n<p><em>download.cpp</em></p>\n\n<pre><code>#include \"download.h\"\n#include &lt;boost/filesystem.hpp&gt;\n#include &lt;atomic&gt;\n\nnamespace MV{\n    void HttpHeader::read(std::istream&amp; response_stream) {\n        values.clear();\n\n        response_stream &gt;&gt; version;\n        std::string status_code;\n        response_stream &gt;&gt; status_code;\n        try {\n            status = std::stoi(status_code);\n        } catch (...) {\n            status = 0;\n        }\n\n        getline_platform_agnostic(response_stream, message);\n\n        if (!message.empty() &amp;&amp; message[0] == ' ') { message = message.substr(1); }\n\n        std::string header;\n        while (getline_platform_agnostic(response_stream, header) &amp;&amp; !header.empty()) {\n            auto index = header.find_first_of(':');\n            if (index != std::string::npos &amp;&amp; index &gt; 0) {\n                auto key = header.substr(0, index);\n                auto value = (index + 2 &gt;= header.size()) ? \"\" : header.substr(index + 2);\n                std::transform(key.begin(), key.end(), key.begin(), [](char c) {return std::tolower(c); });\n                values[key] = value;\n                if (toLower(key) == \"content-length\") {\n                    try {\n                        contentLength = static_cast&lt;size_t&gt;(stol(value));\n                    } catch (std::exception &amp;e) {\n                        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;\n                        contentLength = 0;\n                    }\n                }\n            }\n        }\n    }\n\n    std::string DownloadString(const Url&amp; a_url) {\n        auto result = std::make_shared&lt;std::stringstream&gt;();\n        if (DownloadRequest::make(a_url, result)-&gt;header().success) {\n            return result-&gt;str();\n        } else {\n            return \"\";\n        }\n    }\n\n    MV::HttpHeader DownloadFile(const Url&amp; a_url, const std::string &amp;a_path) {\n        HttpHeader header;\n        {\n            boost::filesystem::create_directories(boost::filesystem::path(a_path).parent_path());\n            auto outFile = std::make_shared&lt;std::ofstream&gt;(a_path, std::ofstream::out | std::ofstream::binary);\n            auto request = DownloadRequest::make(a_url, outFile);\n            header = request-&gt;header();\n        }\n        if (!header.success) {\n            std::remove(a_path.c_str());\n        }\n        return header;\n    }\n\n    void DownloadFile(const std::shared_ptr&lt;boost::asio::io_service&gt; &amp;a_ioService, const MV::Url&amp; a_url, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete) {\n        boost::filesystem::create_directories(boost::filesystem::path(a_path).parent_path());\n        auto outFile = std::make_shared&lt;std::ofstream&gt;(a_path, std::ofstream::out | std::ofstream::binary);\n        auto request = DownloadRequest::make(a_ioService, a_url, outFile, [a_path, a_onComplete](std::shared_ptr&lt;DownloadRequest&gt; a_result) {\n            if (!a_result-&gt;header().success) {\n                std::remove(a_path.c_str());\n            }\n            if (a_onComplete) { a_onComplete(a_result); }\n        });\n    }\n\n    void DownloadFiles(const std::vector&lt;MV::Url&gt;&amp; a_urls, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete) {\n        auto service = std::make_shared&lt;boost::asio::io_service&gt;();\n        for (auto&amp;&amp; url : a_urls) {\n            DownloadFile(service, url, a_path + boost::filesystem::path(url.path()).filename().string(), a_onComplete);\n        }\n        service-&gt;run();\n    }\n    void DownloadFiles(const std::shared_ptr&lt;boost::asio::io_service&gt; &amp;a_ioService, const std::vector&lt;MV::Url&gt;&amp; a_urls, const std::string &amp;a_path, std::function&lt;void(std::shared_ptr&lt;DownloadRequest&gt;)&gt; a_onComplete, std::function&lt;void()&gt; a_onAllComplete) {\n        size_t totalFiles = a_urls.size();\n        for (auto&amp;&amp; url : a_urls) {\n            auto counter = std::make_shared&lt;std::atomic&lt;size_t&gt;&gt;(0);\n            DownloadFile(a_ioService, url, a_path + boost::filesystem::path(url.path()).filename().string(), [=](std::shared_ptr&lt;DownloadRequest&gt; a_request) {\n                a_onComplete(a_request);\n                if (++(*counter) == totalFiles) {\n                    a_onAllComplete();\n                }\n            });\n        }\n    }\n\n    void DownloadRequest::handleReadContent(const boost::system::error_code&amp; err) {\n        if (!err) {\n            readResponseToStream();\n            if (onComplete) { onComplete(shared_from_this()); }\n        } else if (err != boost::asio::error::eof) {\n            headerData.success = false;\n            headerData.errorMessage = \"Download Read Content Failure: \" + err.message();\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            if (onComplete) { onComplete(shared_from_this()); }\n        }\n    }\n\n    void DownloadRequest::handleReadHeaders(const boost::system::error_code&amp; err) {\n        if (!err) {\n            responseStream = std::make_unique&lt;std::istream&gt;(&amp;(*response));\n\n            headerData.read(*responseStream);\n            headerData.success = true;\n            headerData.errorMessage = \"\";\n            if (headerData.status &gt;= 300 &amp;&amp; headerData.status &lt; 400 &amp;&amp; headerData.bounces.size() &lt; 32 &amp;&amp; headerData.values.find(\"location\") != headerData.values.end()) {\n                headerData.bounces.push_back(currentUrl.toString());\n                initiateRequest(headerData.values[\"location\"]);\n            } else {\n                auto amountLeftToRead = headerData.contentLength - response-&gt;size();\n                if (response-&gt;size() &gt; 0) {\n                    readResponseToStream();\n                }\n                if (amountLeftToRead &gt; 0) {\n                    boost::asio::async_read(*socket, *response, boost::asio::transfer_at_least(amountLeftToRead), boost::bind(&amp;DownloadRequest::handleReadContent, shared_from_this(), boost::asio::placeholders::error));\n                } else {\n                    if (onComplete) { onComplete(shared_from_this()); }\n                }\n            }\n        } else {\n            headerData.success = false;\n            headerData.errorMessage = \"Download Read Header Failure: \" + err.message();\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            if (onComplete) { onComplete(shared_from_this()); }\n        }\n    }\n\n    void DownloadRequest::handleWriteRequest(const boost::system::error_code&amp; err) {\n        if (!err) {\n            boost::asio::async_read_until(*socket, *response, \"\\r\\n\\r\\n\", boost::bind(&amp;DownloadRequest::handleReadHeaders, shared_from_this(), boost::asio::placeholders::error));\n        } else {\n            headerData.success = false;\n            headerData.errorMessage = \"Download Write Failure: \" + err.message();\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            if (onComplete) { onComplete(shared_from_this()); }\n        }\n    }\n\n    void DownloadRequest::handleConnect(const boost::system::error_code&amp; err, boost::asio::ip::tcp::resolver::iterator endpoint_iterator) {\n        if (!err) {\n            // The connection was successful. Send the request.\n            boost::asio::async_write(*socket, *request, boost::bind(&amp;DownloadRequest::handleWriteRequest, shared_from_this(), boost::asio::placeholders::error));\n        } else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator()) {\n            // The connection failed. Try the next endpoint in the list.\n            socket-&gt;close();\n            boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;\n            socket-&gt;async_connect(endpoint, boost::bind(&amp;DownloadRequest::handleConnect, shared_from_this(), boost::asio::placeholders::error, ++endpoint_iterator));\n        } else {\n            headerData.success = false;\n            headerData.errorMessage = \"Download Connection Failure: \" + err.message();\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            if (onComplete) { onComplete(shared_from_this()); }\n        }\n    }\n\n    void DownloadRequest::handleResolve(const boost::system::error_code&amp; err, boost::asio::ip::tcp::resolver::iterator endpoint_iterator) {\n        if (!err) {\n            // Attempt a connection to the first endpoint in the list. Each endpoint\n            // will be tried until we successfully establish a connection.\n            boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;\n            socket-&gt;async_connect(endpoint, boost::bind(&amp;DownloadRequest::handleConnect, shared_from_this(), boost::asio::placeholders::error, ++endpoint_iterator));\n        } else {\n            headerData.success = false;\n            headerData.errorMessage = \"Download Resolve Failure: \" + err.message();\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            if (onComplete) { onComplete(shared_from_this()); }\n        }\n    }\n\n    void DownloadRequest::initiateRequest(const MV::Url&amp; a_url) {\n        socket-&gt;close();\n        currentUrl = a_url;\n        request = std::make_unique&lt;boost::asio::streambuf&gt;();\n        response = std::make_unique&lt;boost::asio::streambuf&gt;();\n        using boost::asio::ip::tcp;\n\n        std::ostream requestStream(&amp;(*request));\n        requestStream &lt;&lt; \"GET \" &lt;&lt; a_url.pathAndQuery() &lt;&lt; \" HTTP/1.1\\r\\n\";\n        requestStream &lt;&lt; \"Host: \" &lt;&lt; a_url.host() &lt;&lt; \"\\r\\n\";\n        requestStream &lt;&lt; \"Accept: */*\\r\\n\";\n        requestStream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n\n        tcp::resolver::query query(a_url.host(), \"http\");\n        resolver-&gt;async_resolve(query, boost::bind(&amp;DownloadRequest::handleResolve, shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::iterator));\n    }\n\n    bool DownloadRequest::initializeSocket() {\n        bool created = false;\n        if (!ioService) {\n            ioService = std::make_shared&lt;boost::asio::io_service&gt;();\n            created = true;\n        }\n\n        resolver = std::make_unique&lt;boost::asio::ip::tcp::resolver&gt;(*ioService);\n        socket = std::make_unique&lt;boost::asio::ip::tcp::socket&gt;(*ioService);\n\n        return created;\n    }\n\n    void DownloadRequest::perform(const MV::Url&amp; a_url) {\n        originalUrl = a_url;\n        try {\n            bool needToCallRun = initializeSocket();\n            initiateRequest(a_url);\n            if (needToCallRun) {\n                ioService-&gt;run();\n            }\n        } catch (...) {\n            headerData.success = false;\n            headerData.errorMessage = \"Exception thrown to top level.\";\n            std::cerr &lt;&lt; headerData.errorMessage &lt;&lt; std::endl;\n            onComplete(shared_from_this());\n        }\n    }\n\n}\n</code></pre>\n\n<p><em>generalUtility.h</em> (part of it anyway, just for this reference)</p>\n\n<pre><code>inline std::istream&amp; getline_platform_agnostic(std::istream&amp; is, std::string&amp; t) {\n    t.clear();\n\n    // The characters in the stream are read one-by-one using a std::streambuf.\n    // That is faster than reading them one-by-one using the std::istream.\n    // Code that uses streambuf this way must be guarded by a sentry object.\n    // The sentry object performs various tasks,\n    // such as thread synchronization and updating the stream state.\n\n    std::istream::sentry se(is, true);\n    std::streambuf* sb = is.rdbuf();\n\n    for (;;) {\n        int c = sb-&gt;sbumpc();\n        switch (c) {\n        case '\\n':\n            return is;\n        case '\\r':\n            if (sb-&gt;sgetc() == '\\n')\n                sb-&gt;sbumpc();\n            return is;\n        case EOF:\n            // Also handle the case when the last line has no line ending\n            if (t.empty())\n                is.setstate(std::ios::eofbit);\n            return is;\n        default:\n            t += (char)c;\n        }\n    }\n}\n\ninline std::string toLower(std::string s) {\n    std::transform(s.begin(), s.end(), s.begin(), [](char c) { return std::tolower(c); });\n    return s;\n}\n</code></pre>\n\n<p><em>url.h</em></p>\n\n<p>Modified (slightly, just changed some naming scheme stuff)</p>\n\n<p><a href=\"https://github.com/keyz182/Poco-1.4.3/blob/master/Foundation/include/Poco/URI.h\" rel=\"nofollow\">https://github.com/keyz182/Poco-1.4.3/blob/master/Foundation/include/Poco/URI.h</a></p>\n\n<p><a href=\"https://github.com/keyz182/Poco-1.4.3/blob/master/Foundation/src/URI.cpp\" rel=\"nofollow\">https://github.com/keyz182/Poco-1.4.3/blob/master/Foundation/src/URI.cpp</a></p>\n"}], "owner": {"reputation": 7095, "user_id": 559095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c009f80972754e91f06b29a7dce0fc?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/559095/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 38230056, "answer_count": 1, "score": 0, "last_activity_date": 1467828279, "creation_date": 1467824863, "question_id": 38229739, "link": "https://stackoverflow.com/questions/38229739/using-the-same-istream-with-a-resizeable-streambuf-in-boostasio", "title": "Using the same istream with a resizeable streambuf in boost::asio", "body": "<p>I am reading data off a socket using boost asio async_read(). I have the following members of the reader class which persist through the lifetime of the program:</p>\n\n<pre><code>boost::asio::streambuf recv_data;\nstd::istream stream_is(&amp;recv_data);\n</code></pre>\n\n<p>The async_read call looks like this:</p>\n\n<pre><code>boost::asio::async_read(ep_ptr-&gt;get_sock(), recv_data, boost::asio::transfer_exactly(n),\n                              boost::bind(&amp;IProtocol::handle_data_recv, &amp;protocol,\n                                          boost::asio::placeholders::error));\n</code></pre>\n\n<p>My question is, what would happen if I am reading 'n' bytes off the socket and the size of the streambuf is less than 'n' so it resizes itself. Do I need to re-create the std::istream since the internal streambuf buffer that the std::istream is holding might now be freed/deallocated?</p>\n"}, {"tags": ["c++", "c++11", "linker"], "comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1467824899, "post_id": 38229676, "comment_id": 63881243, "body": "Oh... I wanted to say &quot;put the include files in a namespace&quot;, but then I read <a href=\"http://stackoverflow.com/a/9765654/1016716\">this</a>. Oh well, I&#39;m sure there is a good answer."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467825459, "post_id": 38229676, "comment_id": 63881608, "body": "Well, I can&#39;t completely see which problem you actually want to solve here, but it smells like the <a href=\"https://en.wikipedia.org/wiki/Opaque_pointer#C.2B.2B\" rel=\"nofollow noreferrer\">pimpl idiom</a> should be the right way to go (supposed <code>Foo</code> already has a public declaration)."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467825615, "post_id": 38229676, "comment_id": 63881696, "body": "Why are you compiling two implementation source files with the same content? Why not conditionally compile the <i>one</i> you want to use to avoid duplicate definitions?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1467825691, "post_id": 38229676, "comment_id": 63881739, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I think OP has over simplified his problem, but assume 2 different helper classes with same (poorly) name."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1467825756, "post_id": 38229676, "comment_id": 63881782, "body": "@Jarod42 Then of course your answer is the way to go (that&#39;s why I upvoted it already). We had such problems in production already BTW. Hard to catch runtime errors and confusing debug behaviors all over :-P ..."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1467825819, "post_id": 38229676, "comment_id": 63881821, "body": "@Jarod42 Ah, that assumption makes a lot of sense, maybe the OP could clarify the question."}, {"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1467826530, "post_id": 38229676, "comment_id": 63882240, "body": "@Jarod42 Your assumption is correct, sorry for not being clearer."}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1467824977, "creation_date": 1467824977, "answer_id": 38229781, "question_id": 38229676, "link": "https://stackoverflow.com/questions/38229676/hidden-implementation-of-member-function-like-static-global-function/38229781#38229781", "title": "hidden implementation of member function (like static global function)", "body": "<p>The normal solution would be to remove the definition of <code>Foo::bar()</code> from <code>foob.cpp</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467825261, "post_id": 38229804, "comment_id": 63881482, "body": "The drawback is, that the public interface of <code>Foo</code> is lost. I&#39;m not actually sure this solves the OP&#39;s problem."}, {"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467826490, "post_id": 38229804, "comment_id": 63882215, "body": "This works, thank you! :) @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m not sure what you mean by <code>Foo</code> loosing its public interface. The one I want to wrap in <code>namespace { }</code> is only declared and used inside the <code>foob.cpp</code> file."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1467825057, "creation_date": 1467825057, "answer_id": 38229804, "question_id": 38229676, "link": "https://stackoverflow.com/questions/38229676/hidden-implementation-of-member-function-like-static-global-function/38229804#38229804", "title": "hidden implementation of member function (like static global function)", "body": "<p>You may put the whole in a unnamed namespace</p>\n\n<pre><code>// foo{a,b}.cpp\nnamespace\n{\n\n    class Foo {\n    public:\n      void bar();\n    }\n    void Foo::bar() { std::cout &lt;&lt; \"bar\\n\"; }\n}\n</code></pre>\n\n<p>the class won't be visible outside and can be used only in current translation unit.</p>\n"}], "owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 38229804, "answer_count": 2, "score": 0, "last_activity_date": 1467825057, "creation_date": 1467824645, "question_id": 38229676, "link": "https://stackoverflow.com/questions/38229676/hidden-implementation-of-member-function-like-static-global-function", "title": "hidden implementation of member function (like static global function)", "body": "<p>Let's assume you have two implementation source files with the same content:</p>\n\n<pre><code>// foo{a,b}.cpp\nclass Foo {\npublic:\n  void bar();\n}\nvoid Foo::bar() { std::cout &lt;&lt; \"bar\\n\"; }\n</code></pre>\n\n<p>Implementing a normal function (not a member method), I would simply mark this method as <code>static</code>. But this has a different meaning on method declarations and can not be specified at the implementation.</p>\n\n<p>How can I changed <code>foob.cpp</code> so that there will be no linker errors when both files are being compiled and linked together?</p>\n"}, {"tags": ["c++", "bash", "g++", "googletest", "bazel"], "answers": [{"comments": [{"owner": {"reputation": 916, "user_id": 5616591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e939e7d16afe12f5eb0a3bca57cf33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Valentin", "link": "https://stackoverflow.com/users/5616591/romeo-valentin"}, "edited": false, "score": 0, "creation_date": 1467905043, "post_id": 38249284, "comment_id": 63919980, "body": "Yeah, it&#39;s my goal to get PWD in my code, but I&#39;ve spend quite some time trying to figure out a cross-platform way and I didn&#39;t find a good one. Some people suggest using _ <i>FILE</i> _ but it doesn&#39;t give me the full path."}, {"owner": {"reputation": 21554, "user_id": 4243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/501b2f1d20a7a8f9539d46776a640225?s=128&d=identicon&r=PG", "display_name": "kristina", "link": "https://stackoverflow.com/users/4243/kristina"}, "reply_to_user": {"reputation": 916, "user_id": 5616591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e939e7d16afe12f5eb0a3bca57cf33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Valentin", "link": "https://stackoverflow.com/users/5616591/romeo-valentin"}, "edited": false, "score": 0, "creation_date": 1467919299, "post_id": 38249284, "comment_id": 63928425, "body": "<a href=\"http://stackoverflow.com/questions/2868680/what-is-a-cross-platform-way-to-get-the-current-directory\" title=\"what is a cross platform way to get the current directory\">stackoverflow.com/questions/2868680/&hellip;</a>?"}], "tags": [], "owner": {"reputation": 21554, "user_id": 4243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/501b2f1d20a7a8f9539d46776a640225?s=128&d=identicon&r=PG", "display_name": "kristina", "link": "https://stackoverflow.com/users/4243/kristina"}, "is_accepted": true, "score": 1, "last_activity_date": 1467904720, "creation_date": 1467904720, "answer_id": 38249284, "question_id": 38229673, "link": "https://stackoverflow.com/questions/38229673/how-to-use-environment-variables-in-bazel-googletest/38249284#38249284", "title": "How to use environment variables in bazel/googletest", "body": "<p>Ugh, this is a terrible output.  Basically, <code>--show_make_env</code> mushes together the output of <code>bazel info</code> and the make variables, giving no indication of which is which.  To find the make variables, you can diff the outputs to remove the non-make info:</p>\n\n<pre><code>$ bazel info --show_make_env &gt; make-vars\n$ bazel info &gt; no-make-vars\n$ diff make-vars no-make-vars\n1,22d0\n&lt; ABI: local\n&lt; ABI_GLIBC_VERSION: local\n&lt; ANDROID_CPU: armeabi\n&lt; AR: /usr/bin/ar\n&lt; BINDIR: bazel-out/local-fastbuild/bin\n&lt; BINMODE: -dbg\n&lt; CC: /usr/bin/gcc\n&lt; CC_FLAGS: \n&lt; COMPILATION_MODE: fastbuild\n&lt; CROSSTOOLTOP: external/local_config_cc\n&lt; C_COMPILER: compiler\n&lt; GENDIR: bazel-out/local-fastbuild/genfiles\n&lt; GLIBC_VERSION: local\n&lt; JAVA: external/local_jdk/bin/java\n&lt; JAVABASE: external/local_jdk\n&lt; JAVA_CPU: k8\n&lt; JAVA_TRANSLATIONS: 0\n&lt; NM: /usr/bin/nm\n&lt; OBJCOPY: /usr/bin/objcopy\n&lt; STACK_FRAME_UNLIMITED: \n&lt; STRIP: /usr/bin/strip\n&lt; TARGET_CPU: k8\n</code></pre>\n\n<p>Those are the make variables that are available.</p>\n\n<p>Could you find the PWD in your test, instead of using a <code>-D</code> to hardcode it?</p>\n"}], "owner": {"reputation": 916, "user_id": 5616591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e939e7d16afe12f5eb0a3bca57cf33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Valentin", "link": "https://stackoverflow.com/users/5616591/romeo-valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 0, "accepted_answer_id": 38249284, "answer_count": 1, "score": 3, "last_activity_date": 1473175948, "creation_date": 1467824639, "last_edit_date": 1473175948, "question_id": 38229673, "link": "https://stackoverflow.com/questions/38229673/how-to-use-environment-variables-in-bazel-googletest", "title": "How to use environment variables in bazel/googletest", "body": "<p>So I want to use bazel and the googletest framework for running unittests of a simulation. For this, I want to have sample-inputfiles ans sample-outputfiles.\nI want to get the absolute path of the source file, the test file or any file in the repository, so I can create a relative path to input files from there.<br>\nE.g.:</p>\n\n<pre><code>std::string path = __SOME_PATH_IN_REPO__+\"/../inputfiles/input.txt\";\nstd::fstream infile(path);\n</code></pre>\n\n<p>So after a lot of searching, I found out that you can define constants straight from the BUILD file for bazel like so:  </p>\n\n<pre><code>cc_test( \n    name = \"gtest_capabilities\", \n    srcs = [ \n        \"testing/pwdTest.cpp\", \n    ],          \n    deps = [ \n        \"@gtest//:main\", \n    ],          \n    copts = [ \n            \"-D __ABSOLUTE_PATH__=$(workspace)\", \n    ],          \n) \n</code></pre>\n\n<p>The important line is in copts, where I am using <code>$(workspace)</code>.<br>\nI read <a href=\"http://www.bazel.io/docs/be/c-cpp.html\" rel=\"nofollow\">here</a>, that you can specify copts (or alternatively <code>defines</code>) like this, which does work.<br>\n<a href=\"http://www.bazel.io/docs/be/make-variables.html#make-var-substitution\" rel=\"nofollow\">This</a> page, which the first page links to, tells me, I can use environment variables like this: <em>$(FOO)</em><br>\nIt also tells me, that I can run <code>bazel info --show_make_env</code> to get all availabe environment variables.  </p>\n\n<p>When I run it, I get a big list of environment variables, which contains workspace, next to alot of others.<br>\n<strong>Now here comes the problem:</strong><br>\nBut when I use the <code>$(workspace)</code> variable, bazel tells me, that $(workspace) is not defined.<br>\nI would also work for me if I could use the $PWD variable, but I couldn't get this to work either.</p>\n\n<p>I hope someone can help me.<br>\nGreetings,<br>\nRomeo</p>\n\n<p>Edit:<br>\nI now use the 'data' option in the bazel build file. This works mostly</p>\n"}, {"tags": ["c++", "visual-studio", "linker-errors"], "comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1467836159, "post_id": 38229669, "comment_id": 63887603, "body": "Looks like an error in a back-end module (like <code>cl.exe</code>&#39;s <code>c1xx.dll</code> and <code>c2.dll</code>), but I&#39;m not sure how to troubleshoot those.  Try looking for any &quot;weird&quot; flags anywhere in <code>cl</code> or <code>link</code>&#39;s command line.  If you can&#39;t see any, try using your library with some other program, and see if you get the same error."}, {"owner": {"reputation": 2396, "user_id": 254041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QNiuN.jpg?s=128&g=1", "display_name": "habakuk", "link": "https://stackoverflow.com/users/254041/habakuk"}, "edited": false, "score": 0, "creation_date": 1500882049, "post_id": 38229669, "comment_id": 77512000, "body": "I had to do a complete rebuild to fix this error."}], "answers": [{"comments": [{"owner": {"reputation": 4304, "user_id": 1113636, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SuCW2.jpg?s=128&g=1", "display_name": "Gaspa79", "link": "https://stackoverflow.com/users/1113636/gaspa79"}, "edited": false, "score": 0, "creation_date": 1565210046, "post_id": 44021671, "comment_id": 101285451, "body": "100% lifesaver. There&#39;s some dark magic in the backend indeed"}, {"owner": {"reputation": 13193, "user_id": 213871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c228b6e11e7b817fd504a144ffbd773?s=128&d=identicon&r=PG", "display_name": "ceztko", "link": "https://stackoverflow.com/users/213871/ceztko"}, "edited": false, "score": 1, "creation_date": 1598344055, "post_id": 44021671, "comment_id": 112420541, "body": "I&#39;m also having a similar <code>C1007: unrecognized flag &#39;-Yu&#39; in &#39;p2&#39;</code> when linking static libs compiled with VS2019 and linking in VS2017. They are definetely not ABI compatible."}], "tags": [], "owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "is_accepted": false, "score": 7, "last_activity_date": 1495015368, "creation_date": 1495015368, "answer_id": 44021671, "question_id": 38229669, "link": "https://stackoverflow.com/questions/38229669/code-generation-failed-unrecognized-flag-fitobjdata-in-p2/44021671#44021671", "title": "Code generation failed: Unrecognized flag &#39;-FitObjData&#39; in &#39;p2&#39;", "body": "<p>I also encountered this issue while trying to link with openssl. </p>\n\n<p>The issue was openssl was built by visual 2015 and I was linking with visual 2012. This difference might trigger some dark magic in the visual studio backend. </p>\n\n<p>Try to recompile your static library with visual 2010. </p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 7076018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969824eafa3e0b310b946c922d091332?s=128&d=identicon&r=PG&f=1", "display_name": "Ted W", "link": "https://stackoverflow.com/users/7076018/ted-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1558022191, "creation_date": 1558022191, "answer_id": 56172443, "question_id": 38229669, "link": "https://stackoverflow.com/questions/38229669/code-generation-failed-unrecognized-flag-fitobjdata-in-p2/56172443#56172443", "title": "Code generation failed: Unrecognized flag &#39;-FitObjData&#39; in &#39;p2&#39;", "body": "<p>If your solution has multiple projects and build configurations, make sure you update the target platform for all projects and build configurations. </p>\n\n<p>I ran into this problem after updating from VS 2010 to VS 2015. One project failed to build in Debug configuration because a library it depended on (in the same solution) was still being built (in its Debug configuration) with Platform Toolset = \"Visual Studio 2010\". Updating that to \"Visual Studio 2015 (v140)\" fixed my problem.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 7683041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a537ca4cf2f7b646a88e76f592ee46?s=128&d=identicon&r=PG&f=1", "display_name": "PJ127", "link": "https://stackoverflow.com/users/7683041/pj127"}, "is_accepted": false, "score": 0, "last_activity_date": 1613380291, "creation_date": 1613380291, "answer_id": 66205308, "question_id": 38229669, "link": "https://stackoverflow.com/questions/38229669/code-generation-failed-unrecognized-flag-fitobjdata-in-p2/66205308#66205308", "title": "Code generation failed: Unrecognized flag &#39;-FitObjData&#39; in &#39;p2&#39;", "body": "<p>You do not necessarily need to rebuild nything, depending on your Visual Studio installations and what you want to do.</p>\n<p>I had two installations, VS-2017 and VS-2019. My <code>$PATH</code> selected <code>lib.exe</code> of the 2017th edition, but Extension.obj was built with the 2019th edition. I just put the full path to the 2019 lib.exe:</p>\n<pre><code>&quot;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.27.29110\\bin\\Hostx86\\x86\\lib.exe&quot; /out:Extension.lib Extension.obj\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 1304765, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9184a0393a0d341d36d893a49a4cb002?s=128&d=identicon&r=PG", "display_name": "user1304765", "link": "https://stackoverflow.com/users/1304765/user1304765"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6775, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1613380291, "creation_date": 1467824628, "last_edit_date": 1467826116, "question_id": 38229669, "link": "https://stackoverflow.com/questions/38229669/code-generation-failed-unrecognized-flag-fitobjdata-in-p2", "title": "Code generation failed: Unrecognized flag &#39;-FitObjData&#39; in &#39;p2&#39;", "body": "<p>I am getting this error \"Unrecognized flag '-FitObjData' in 'p2'\" after adding libpng static library to my project for use with pngwriter. How do I fix this error and what is it telling me? I am compiling with VC10.</p>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1467825105, "post_id": 38229607, "comment_id": 63881383, "body": "why does the type <code>std::string</code> matter? Outside of C++, it has no meaning."}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1467826211, "post_id": 38229607, "comment_id": 63882058, "body": "@uo\u0265\u0287\u028eP\u028ez\u0250\u0279C I am working in C++. <code>std::string</code> is the return type of another function."}], "answers": [{"tags": [], "owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1470107354, "creation_date": 1470107354, "answer_id": 38711174, "question_id": 38229607, "link": "https://stackoverflow.com/questions/38229607/how-do-i-put-an-stdstring-into-a-clang-virtual-file/38711174#38711174", "title": "How do I put an `std::string` into a Clang virtual file?", "body": "<p>If I understand it correctly, that's quit straightforward:  </p>\n\n<p>1, build a <a href=\"http://llvm.org/doxygen/classllvm_1_1MemoryBuffer.html\" rel=\"nofollow\">llvm MemoryBuffer</a> from the content of your std::string<br>\n2, call <a href=\"http://clang.llvm.org/doxygen/classclang_1_1SourceManager.html#a941f1bd97c6d84e31065f653bbc2c2c5\" rel=\"nofollow\">clang::SourceManager::createFileID</a> to get a FileID which is exactly what you want.  </p>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38711174, "answer_count": 1, "score": 1, "last_activity_date": 1470107354, "creation_date": 1467824426, "question_id": 38229607, "link": "https://stackoverflow.com/questions/38229607/how-do-i-put-an-stdstring-into-a-clang-virtual-file", "title": "How do I put an `std::string` into a Clang virtual file?", "body": "<p>I have an <code>std::string</code> of C++ code that I would like to process using Clang. </p>\n\n<p>I understand that this requires it to be put into a <code>clang::FileManager</code> so that it can be accessed by a <code>clang::SoureManager</code>. I would like to avoid writing to disk so I will be using virtual files. </p>\n\n<p>How do I put my <code>std::string</code> into a new virtual file? </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 258, "user_id": 6310670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3846db42183b24ad30e14262e970e23c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Barnes", "link": "https://stackoverflow.com/users/6310670/alexei-barnes"}, "edited": false, "score": 0, "creation_date": 1467824131, "post_id": 38229476, "comment_id": 63880807, "body": "Maybe try Code Review: <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1467824139, "post_id": 38229476, "comment_id": 63880809, "body": "Feel like you are better off using inheritance, not templates"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1467824329, "post_id": 38229476, "comment_id": 63880917, "body": "@awesomeyi Or static polymorphism, which includes templates again ;-) ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "edited": false, "score": 0, "creation_date": 1467824342, "post_id": 38229476, "comment_id": 63880928, "body": "Can&#39;t post right now, and I want to use templates here that&#39;s why I ask!"}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1467824749, "post_id": 38229476, "comment_id": 63881167, "body": "The most suitable choice will depend on whether its OK for different components to have the same Id - your code checks that components of the same type don&#39;t, but a position and a velocity could have the same ID. if you want no re-used IDs a map of some base component type might be better."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1467824953, "post_id": 38229476, "comment_id": 63881286, "body": "@ROX You may want different methods on the different types which can&#39;t be factored into a base class.  Then you would need to <code>dynamic_cast</code> (or <code>static_cast</code> and a custom <code>typeid</code>-like field) which undermines the point of the base class."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1467825571, "post_id": 38229476, "comment_id": 63881676, "body": "@Guy, as I said it depends on information we don&#39;t have here, and so it may or may not be suitable to use one collection. However if the uniqueness of id is required, then this is a case that dynamic_cast might be acceptable, e.g. if the user is providing the ID and the type they expect, then a failed dynamic cast can be checked for and the user given an error along the lines of &quot;found a component with that ID, but its not the type you requested&quot;. I see so many unacceptable uses of dynamic_cast and I&#39;m really not a fan of it, but if the fail case can and is suitably handled it&#39;s not so evil."}], "answers": [{"comments": [{"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1467824977, "post_id": 38229637, "comment_id": 63881303, "body": "Passing the components collection as a parameter is somewhat cumbersome and is a risk. The collection to add to is always the member collection of that type. This requires exposing that collection and runs the risk of it being called with a different collection, one that&#39;s of the same type but is not the one in ComponentManager."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 1, "creation_date": 1467825068, "post_id": 38229637, "comment_id": 63881361, "body": "@ROX, the inner function would be private, and if you tried to pass the wrong component it would be a compile error and not a runtime error."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1467825749, "post_id": 38229637, "comment_id": 63881772, "body": "If its private you can&#39;t call it without a public version for each type which passes the correct collection. With that the class is back to having lots of similar functions for each type, which is exactly what the OP is trying to avoid."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1467826788, "post_id": 38229637, "comment_id": 63882371, "body": "@ROX, good points. As with many things in programming, there are more than one ways to solve this problem."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1467826747, "last_edit_date": 1467826747, "creation_date": 1467824523, "answer_id": 38229637, "question_id": 38229476, "link": "https://stackoverflow.com/questions/38229476/use-of-templates/38229637#38229637", "title": "Use of templates", "body": "<blockquote>\n  <p>How to make that beautiful with templates?</p>\n</blockquote>\n\n<p><strong>Solution 1</strong></p>\n\n<p>Add a <code>private</code> member function template to <code>ComponentManager</code>.</p>\n\n<pre><code>template &lt;typename Component&gt;\n  void addComponent(Entity id,\n                    Component component,\n                    std::map&lt;Entity,std::shared_ptr&lt;Component&gt; &gt;&amp; components)\n  {\n     if (components.count(id) &gt; 0)\n     {\n        Tools::log(\"couldn't add component\");\n     }\n     // else if entity doesn't exist..\n     else\n     {\n        components[id] = std::make_shared&lt;Component&gt;(component);\n     }\n  }\n</code></pre>\n\n<p>and use it as:</p>\n\n<pre><code>void ComponentManager::addComponent(Entity id, PositionComponent component)\n{\n   this-&gt;addComponent(id, component, m_positionComponents);\n}\n\nvoid ComponentManager::addComponent(Entity id, VelocityComponent component)\n{\n   this-&gt;addComponent(id, component, m_velocityComponents);\n}\n</code></pre>\n\n<p>The drawback of this approach is that for every type of <code>Component</code> you want to support, you'll need to add another <code>public</code> member function.</p>\n\n<p><strong>Solution 2</strong></p>\n\n<p>You can have only one <code>public</code> member function template to add components to the appropriate collection. Then you'll need to add code to get the right collection given the component type. One way to that would be to use a tag dispatch mechanism.</p>\n\n<pre><code>class ComponentManager\n{\n   public:\n      ComponentManager();\n\n      template &lt;typename Component&gt;\n         void addComponent(Entity id, Component component)\n         {\n            std::map&lt;Entity,std::shared_ptr&lt;Component&gt; &gt;&amp; components = getCollection(tag&lt;Component&gt;());\n            if (components.count(id) &gt; 0)\n            {\n               Tools::log(\"couldn't add component\");\n            }\n            // else if entity doesn't exist..\n            else\n            {\n               components[id] = std::make_shared&lt;Component&gt;(component);\n            }\n         }\n\n   private:\n\n      template &lt;typename Component&gt; struct tag {};\n\n      std::map&lt;Entity,std::shared_ptr&lt;PositionComponent&gt; &gt;&amp; getCollection(tag&lt;PositionComponent&gt;)\n      {\n         return m_positionComponents;\n      }\n\n      std::map&lt;Entity,std::shared_ptr&lt;PositionComponent&gt; &gt;&amp; getCollection(tag&lt;VelocityComponent&gt;)\n      {\n         return m_velocityComponents;\n      }\n\n      std::map&lt;Entity,std::shared_ptr&lt;PositionComponent&gt; &gt; m_positionComponents;\n      std::map&lt;Entity,std::shared_ptr&lt;VelocityComponent&gt; &gt; m_velocityComponents;\n};\n</code></pre>\n\n<p>With this approach, you will still need to add another member function to the class for each type of <code>Component</code> you wish to support but they will be in the <code>private</code> section of the class, not <code>public</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1467896384, "last_edit_date": 1467896384, "creation_date": 1467824548, "answer_id": 38229642, "question_id": 38229476, "link": "https://stackoverflow.com/questions/38229476/use-of-templates/38229642#38229642", "title": "Use of templates", "body": "<p>I think using a template here is fine, and other options definitely exist.  Here's the template solution I would try:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid ComponentManager::addComponent(Entity id, T component)\n{\n    using MapType = std::map&lt;Entity,std::shared_ptr&lt;T&gt; &gt; &amp;;\n    auto allMaps = std::tie(m_positionComponents, m_velocityComponents);\n    auto &amp; tMap = std::get&lt;MapType&gt;(allMaps);\n    if (tMap.count(id) &gt; 0)\n    {\n        Tools::log(\"couldn't add component\");\n    }\n    // else if entity doesn't exist..\n    else\n    {\n        tMap[id] = std::make_shared&lt;T&gt;(component);\n    }\n}\n</code></pre>\n\n<p>This isn't tested at all, so I don't promise it will compile as is.</p>\n\n<p>The overload of <code>std::get</code> used here requires <code>c++-14</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1467826460, "creation_date": 1467826460, "answer_id": 38230225, "question_id": 38229476, "link": "https://stackoverflow.com/questions/38229476/use-of-templates/38230225#38230225", "title": "Use of templates", "body": "<p>You may create a template class that handles one generic type</p>\n\n<pre><code>template &lt;typename T&gt;\nclass ComponentManagerT\n{\npublic:\n    void addComponent(Entity id, T component)\n    {\n        if (m_components.count(id) &gt; 0)\n        {\n            Tools::log(\"couldn't add component\");\n        }\n        // else if entity doesn't exist..\n        else\n        {\n            m_components[id] = std::make_shared&lt;T&gt;(component);\n        }\n    }\n\n    // ...\nprivate:\n    std::map&lt;Entity, std::shared_ptr&lt;T&gt;&gt; m_components;\n};\n</code></pre>\n\n<p>And a class to regroup all those managers</p>\n\n<pre><code>struct ComponentManager\n{\n    ComponentManagerT&lt;PositionComponent&gt; m_positionComponentManager;\n    ComponentManagerT&lt;VelocityComponent&gt; m_velocityComponentManager;\n};\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6556145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 38229642, "answer_count": 3, "score": 0, "last_activity_date": 1467896384, "creation_date": 1467823980, "question_id": 38229476, "link": "https://stackoverflow.com/questions/38229476/use-of-templates", "title": "Use of templates", "body": "<p>I am learning C++ by programing a game and I am stuck with something: I have a code which is starting to be repetitive (I will add a number of other components) and I would like to improve it using templates (I guess), which I don't really know how to use.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;memory&gt;\n\n#include \"PositionComponent.h\"\n#include \"VelocityComponent.h\"\n\nclass ComponentManager\n{\npublic:\n    ComponentManager();\n\n    void addComponent(Entity id, PositionComponent component);\n    void addComponent(Entity id, VelocityComponent component);\n\nprivate:\n    std::map&lt;Entity,std::shared_ptr&lt;PositionComponent&gt; &gt; m_positionComponents;\n    std::map&lt;Entity,std::shared_ptr&lt;VelocityComponent&gt; &gt; m_velocityComponents;\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include \"ComponentManager.h\"\n\nComponentManager::ComponentManager()\n{\n\n}\n\nvoid ComponentManager::addComponent(Entity id, PositionComponent component)\n{\n    if (m_positionComponents.count(id) &gt; 0)\n    {\n        Tools::log(\"couldn't add component\");\n    }\n    // else if entity doesn't exist..\n    else\n    {\n        m_positionComponents[id] = std::make_shared&lt;PositionComponent&gt;(component);\n    }\n}\n\nvoid ComponentManager::addComponent(Entity id, VelocityComponent component)\n{\n    if (m_velocityComponents.count(id) &gt; 0)\n    {\n        Tools::log(\"couldn't add component\");\n    }\n    // else if entity doesn't exist..\n    else\n    {\n        m_velocityComponents[id] = std::make_shared&lt;VelocityComponent&gt;(component);\n    }\n}\n</code></pre>\n\n<p>How to make that beautiful with templates? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "sockets", "server", "client", "dlib"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467824517, "post_id": 38229424, "comment_id": 63881022, "body": "Upvoted since you are showing us code and seem to have tried to solve this on your own. That&#39;s not saying that additional detail couldn&#39;t be added (like what OS etc)..."}, {"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467824772, "post_id": 38229424, "comment_id": 63881180, "body": "@JesperJuhl I put details about the OS on the last line."}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825001, "post_id": 38229717, "comment_id": 63881317, "body": "I tried using <code>start()</code> but it doesn&#39;t handle many connections simultaneously, but it does sequentially instead. According to my understanding of the <code>on_connect</code> method, it should start a new thread for every connection attempt, but it doesn&#39;t. Why?"}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "reply_to_user": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825068, "post_id": 38229717, "comment_id": 63881360, "body": "It does handle many connections simultaneously. Why do you think it doesn&#39;t?"}, {"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825252, "post_id": 38229717, "comment_id": 63881478, "body": "I tried to put a greeting message and a <code>while(true);</code> immediately after in the <code>on_connect</code> function and then I made 10 clients attempt a connection with the server. They were served sequentially (oddly enough, each connection attempt had to wait exactly 10 seconds from the previous one before being served). I expected the greeting messages to be printed very fast one after the other but it didn&#39;t happen."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "reply_to_user": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825458, "post_id": 38229717, "comment_id": 63881607, "body": "Well. You are testing it wrong somehow. The server is most definitely multi threaded. Each on_connect always happens in a separate thread."}, {"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825629, "post_id": 38229717, "comment_id": 63881701, "body": "I&#39;ll try to compile it on Linux and see what happens, but any idea on how I could test it better? Having a <code>while(true);</code> in the <code>on_connect</code> method sounded like the ultimate test to prove its multithreadedness."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "reply_to_user": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467825748, "post_id": 38229717, "comment_id": 63881771, "body": "You probably are messing up the clients."}, {"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467826958, "post_id": 38229717, "comment_id": 63882473, "body": "The client&#39;s source code amounts to what I&#39;ve posted above (plus the #include stuff). I make ten of them spawn by means of a super basic bash script (a for loop calling ./ClientMain ten times). Any idea? However, thanks for your replies."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "reply_to_user": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 1, "creation_date": 1467831903, "post_id": 38229717, "comment_id": 63885354, "body": "Bash is not normally multi threaded. Maybe you aren&#39;t spawning multiple at once."}, {"owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "edited": false, "score": 0, "creation_date": 1467837129, "post_id": 38229717, "comment_id": 63888128, "body": "Argh, I would&#39;ve never thought of that. Thank you very much! :)"}], "tags": [], "owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "is_accepted": true, "score": 1, "last_activity_date": 1467824792, "creation_date": 1467824792, "answer_id": 38229717, "question_id": 38229424, "link": "https://stackoverflow.com/questions/38229424/dlib-why-doesnt-start-async-accept-connections-in-a-background-thread/38229717#38229717", "title": "DLib - Why doesn&#39;t start_async() accept connections in a background thread?", "body": "<p>Right from dlib::server's documentation for start_async() it says</p>\n\n<pre><code>does NOT block.  That is, this function will return right away and\nthe server will run on a background thread until clear() or this\nobject's destructor is called (or until some kind of fatal error\noccurs). \n</code></pre>\n\n<p>So your server program terminates immediately because you let the program end (you leave main()).  You have to do something to keep your program alive.  For example, call server's start() instead of start_async().</p>\n"}], "owner": {"reputation": 527, "user_id": 3292773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/1546472848/picture?type=large", "display_name": "pr0gma", "link": "https://stackoverflow.com/users/3292773/pr0gma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 38229717, "answer_count": 1, "score": 1, "last_activity_date": 1467824792, "creation_date": 1467823810, "question_id": 38229424, "link": "https://stackoverflow.com/questions/38229424/dlib-why-doesnt-start-async-accept-connections-in-a-background-thread", "title": "DLib - Why doesn&#39;t start_async() accept connections in a background thread?", "body": "<p>This is my first attempt with DLib. My goal is having a background server I can connect to with many client threads simultaneously. According to the documentation, <code>start_async()</code> should be the way to go with a concrete implementation of <code>dlib::server</code>, so this is how I set up my server.</p>\n\n<pre><code>class TestServer : public dlib::server\n{\n    private:\n        void on_connect(dlib::connection&amp; c)\n        {\n            cout &lt;&lt; \"Hi.\" &lt;&lt; endl;\n        }\n\n    public:\n        void start_server()\n        {\n            set_listening_ip(\"127.0.0.1\");\n            set_listening_port(4790);\n\n            start_async();\n        }\n};\n</code></pre>\n\n<p>What follows is my <code>ServerMain.cpp</code>:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    TestServer ts;\n\n    try\n    {\n        ts.start_server();\n    }\n    catch(exception&amp; e)\n    {\n        cerr &lt;&lt; e.what() &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And this is my <code>ClientMain.cpp</code>:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    try\n    {\n        iosockstream stream(\"127.0.0.1:4790\");\n\n        cout &lt;&lt; \"CLIENT - Connected.\" &lt;&lt; endl;\n    }\n    catch(exception&amp; e)\n    {\n        cerr &lt;&lt; e.what() &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; \"Done.\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>After having started my server, any attempt to connect to it with a client results in an exception:</p>\n\n<p><code>unable to connect to '127.0.0.1:4790'</code></p>\n\n<p>Also, neither <code>lsof</code> nor <code>netstat</code> show any process listening on port <code>4790</code>.\n<strong>What am I doing wrong?</strong></p>\n\n<p>I'm on Mac OS X 10.9.5, compiled with <code>-std=c++11 -DDLIB_NO_GUI_SUPPORT</code>. </p>\n"}, {"tags": ["c++", "visual-studio", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1467823677, "post_id": 38229360, "comment_id": 63880546, "body": "Was Qt built with Visual Studio 2015? Are you mixing Debug and Release?"}, {"owner": {"reputation": 157, "user_id": 868179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dada4163c8459bd5454a4549ee792729?s=128&d=identicon&r=PG", "display_name": "tohaz", "link": "https://stackoverflow.com/users/868179/tohaz"}, "edited": false, "score": 1, "creation_date": 1467824158, "post_id": 38229360, "comment_id": 63880825, "body": "have you tried running debug build through valgrind or some bounds checker? the possible scenario if your program is not very carefull with array bounds the debug info is getting corrupted silently, but when you build release more valuable data is getting smashed thus the difference."}, {"owner": {"reputation": 383, "user_id": 809199, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d97d1076c911352886a0419abed5f646?s=128&d=identicon&r=PG", "display_name": "Juicebox", "link": "https://stackoverflow.com/users/809199/juicebox"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467824614, "post_id": 38229360, "comment_id": 63881077, "body": "@drescherjm : Yes Qt was built with Visual Studio 2015. No I&#39;m not mixing Debug and Release builds. I use Qt5 CMake to do the job for me :) I have no problem when I build everything as DLL and /MD. The weird thing here is that the issue happens in Release and not in Debug."}, {"owner": {"reputation": 383, "user_id": 809199, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d97d1076c911352886a0419abed5f646?s=128&d=identicon&r=PG", "display_name": "Juicebox", "link": "https://stackoverflow.com/users/809199/juicebox"}, "reply_to_user": {"reputation": 157, "user_id": 868179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dada4163c8459bd5454a4549ee792729?s=128&d=identicon&r=PG", "display_name": "tohaz", "link": "https://stackoverflow.com/users/868179/tohaz"}, "edited": false, "score": 0, "creation_date": 1467824619, "post_id": 38229360, "comment_id": 63881084, "body": "@tohaz : No i haven&#39;t but you gave me the idea to try with application verifier, it might notify me about things going wrong. Concerning initialization difference or array overflow, i doubt because it&#39;s really at early startup, my own dynamic initializer code is not even called yet."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1467887942, "post_id": 38229360, "comment_id": 63907630, "body": "Follow <a href=\"https://wiki.qt.io/Building_Qt_Desktop_for_Windows_with_MSVC\" rel=\"nofollow noreferrer\">these instructions</a> carefully.  And do <i>not</i> ignore &quot;I will not recommend you use it, because it can cause runtime errors, etc&quot;"}, {"owner": {"reputation": 383, "user_id": 809199, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d97d1076c911352886a0419abed5f646?s=128&d=identicon&r=PG", "display_name": "Juicebox", "link": "https://stackoverflow.com/users/809199/juicebox"}, "edited": false, "score": 0, "creation_date": 1467909364, "post_id": 38229360, "comment_id": 63922677, "body": "Thank you for this link, but I have errors even without Qt, I&#39;ve just tried with a single static lib linked to my exe now, and it crashes in an std::istringstream inside the static lib code. It might be related to template instanciations trying to share code at the final link. The question is why these share codes end up to be different/incompatibles. Indeed both static lib and executable are compiled with /MT... I will do a full project comparison to see if some options might cause this incompatibility"}], "owner": {"reputation": 383, "user_id": 809199, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d97d1076c911352886a0419abed5f646?s=128&d=identicon&r=PG", "display_name": "Juicebox", "link": "https://stackoverflow.com/users/809199/juicebox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467883101, "creation_date": 1467823575, "last_edit_date": 1467883101, "question_id": 38229360, "link": "https://stackoverflow.com/questions/38229360/build-with-mt-crashes-on-stdcout-variable-initialization-in-release-but-not", "title": "Build with /MT crashes on std::cout variable initialization in Release, but not in Debug", "body": "<p>I have a Visual Studio 2015 application which links against two static libs (in the same solution) and some Qt libs (dynamic). </p>\n\n<p>The application and each static lib are built with /MT. Everything runs fine with the Debug build, but the release build crashes at startup on dynamic initialization of '<em>std::cout</em>' static variable (called from <em>_initterm</em>). I cannot deep further because I miss the debug symbols of deeper calls...</p>\n\n<p>I suspect either :</p>\n\n<ul>\n<li>static initialization fiasco somewhere between my static libraries and the VC runtime static libraries...</li>\n<li>Qt which might be built with /MD and create conflicts, but here also, I cannot be sure without debug informations...</li>\n</ul>\n\n<p>Does anyone have an idea why ? Or some tips to debug this ?</p>\n\n<p><strong>Edit :</strong> </p>\n\n<p>I tried without Qt, with only the two static libs linked to an application, the std::cout dynamic initialization is OK (_initterm ends without issues), but then, once entered in the main, when I try to instanciate and then destroy a std::istringstream, it crashes in the virtual destructor of std::istringstream... I don't get it...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467824409, "post_id": 38229346, "comment_id": 63880969, "body": "Why don&#39;t you start by showing us what you have done so far?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467831573, "post_id": 38229822, "comment_id": 63885155, "body": "HTTP/1.1 200 OK  Date: Wed, 06 Jul 2016 18:58:06 GMT  Content-Type: text/html  Content-Length: 0  Connection: close  Set-Cookie: __cfduid=d6196ca171eec28bbcc68a393b698107b1467831486; expires=Thu, 06-Jul-17 18:58:06 GMT; path=/; domain=.mysite.com; HttpOnly  Server: cloudflare-nginx  CF-RAY: 2be549487a812be2-AMS  I got back this, not the PHP file echo value, why is it?"}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467831834, "post_id": 38229822, "comment_id": 63885311, "body": "if I put the buffer to write the recv into a text file I got the upper, if I put the recv into the fprint, i got this: \u2039\u02d9U\u2039\u011b\u011bS3\u0170=Hp&#201;u).&#199;uV\u2026"}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467835429, "post_id": 38229822, "comment_id": 63887240, "body": "try to erase all headers like i did. Then what is left is your server response."}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467836284, "post_id": 38229822, "comment_id": 63887672, "body": "<code>char buf[256];  \tmemset(buf, NULL, 256);   \trecv(Socket, buf, 255, NULL); \tstd::string result = buf;  \tresult.erase(0, result.find_last_of(&quot;\\r\\n\\r\\n&quot;) + 1); \tif (buffer != NULL){ \t\tFILE* file;  \t\tif (fopen_s(&amp;file, &quot;ASD.txt&quot;, &quot;w&quot;) != 0) \t\t{ \t\t\treturn; \t\t}  \t\tfprintf(file, &quot;%s&quot;, result);  \t\tfclose(file);</code> If I do it like this, in the TXT I get (NULL)"}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467836862, "post_id": 38229822, "comment_id": 63887995, "body": "for %s your should put result.c_str(), correct it and check"}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467849486, "post_id": 38229822, "comment_id": 63892842, "body": "Its underlined. in the PHP file I have an echo &#39;OK&#39;; thats why I dont understand this. Why I didnt get the right text back."}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467849962, "post_id": 38229822, "comment_id": 63892972, "body": "<code>char buf[256]; memset(buf, NULL, 256); recv(Socket, buf, 255, NULL); std::string result = buf;  &#47;&#47;result.erase(0, result.find_last_of(&quot;\\r\\n\\r\\n&quot;) + 1); result.c_str(); if (buffer != NULL){ \tFILE* file;  \t\tif (fopen_s(&amp;file, &quot;ASD.txt&quot;, &quot;w&quot;) != 0) \t\t{ \t\t\treturn; \t\t}  \t\tfprintf(file, &quot;%s&quot;, result);  \t\tfclose(file); \t} \tclosesocket(Socket); \tWSACleanup();  \tprintf(link); \treturn;</code>"}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467850876, "post_id": 38229822, "comment_id": 63893197, "body": "well i think that you should try changing the request by adding this to it: <code>&quot; HTTP&#47;1.1\\r\\nHost: www.mysite.com\\r\\nContent-type: application&#47;x-www-form-urlencoded\\r\\n\\r\\n&quot;;</code> instead of your header part at the end."}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467852138, "post_id": 38229822, "comment_id": 63893505, "body": "If I put the buffer into the fprintf I got this: <a href=\"http://pastebin.com/7D4B4sZZ\" rel=\"nofollow noreferrer\">pastebin.com/7D4B4sZZ</a> I changed the OK to DONE to see its in it or not. But now How can I remove the another text?:D"}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467853622, "post_id": 38229822, "comment_id": 63893821, "body": "Just put it into string and make <code>.erase(0,result.find_last_of(&quot;\\r\\n\\r\\n&quot;)+1);</code>. Also mark my answer as correct if your problem is solved."}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467853786, "post_id": 38229822, "comment_id": 63893858, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/116630/discussion-between-dualcore-and-vbnetguy\">continue this discussion in chat</a>."}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467854017, "post_id": 38229822, "comment_id": 63893912, "body": "<code>std::string result = buffer; result.erase(0, result.find_last_of(&quot;\\r\\n\\r\\n&quot;) + 1);</code> If I put the things like this than in the fprint I use result variable the ASD.txt is empty, If I put the buffer into the fprint i see the same like before what you can see on pastebin."}, {"owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "reply_to_user": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467854711, "post_id": 38229822, "comment_id": 63894062, "body": "Your question is now answered. You&#39;re left with a trivial task that should not be solved here. According to your problem you can refer to this: <a href=\"http://stackoverflow.com/questions/12039366/remove-http-header-info\" title=\"remove http header info\">stackoverflow.com/questions/12039366/remove-http-header-info</a>"}, {"owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "edited": false, "score": 0, "creation_date": 1467855337, "post_id": 38229822, "comment_id": 63894200, "body": "Okey, thanks for your help. But I still dont understand how will I cut down the HTTP header things to get back just the usefull data."}], "tags": [], "owner": {"reputation": 242, "user_id": 3397417, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/49aeb55b4eb4f86bf9455b9f8bbd59b1?s=128&d=identicon&r=PG&f=1", "display_name": "DualCore", "link": "https://stackoverflow.com/users/3397417/dualcore"}, "is_accepted": false, "score": 1, "last_activity_date": 1467853747, "last_edit_date": 1467853747, "creation_date": 1467825120, "answer_id": 38229822, "question_id": 38229346, "link": "https://stackoverflow.com/questions/38229346/c-send-data-to-php-and-handle-response/38229822#38229822", "title": "C++ Send data to PHP and handle Response", "body": "<p>Change your GET request header to this </p>\n\n<pre><code>\" HTTP/1.1\\r\\nHost: www.mysite.com\\r\\nContent-type: application/x-www-form-urlencoded\\r\\n\\r\\n\";\n</code></pre>\n\n<p>instead of your header part at the end. That should force your php server to response in a format readable to your application.</p>\n"}], "owner": {"reputation": 57, "user_id": 5834074, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/424f4b67c1e76e6ddb96c105d8b81ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Vbnetguy", "link": "https://stackoverflow.com/users/5834074/vbnetguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467853747, "creation_date": 1467823540, "question_id": 38229346, "link": "https://stackoverflow.com/questions/38229346/c-send-data-to-php-and-handle-response", "title": "C++ Send data to PHP and handle Response", "body": "<pre><code>void SendHardverInfo(){\n    DWORD VolumeSerialNumber;\n\nif (GetVolumeInformation(\"C:\\\\\", 0, 0, &amp;VolumeSerialNumber, 0, 0, 0, 0) == 0)\n{\n    return;\n}\n\nUUID uuid;\n\nUuidCreateSequential(&amp;uuid);\n\nSYSTEM_INFO SystemInfo;\n\nGetSystemInfo(&amp;SystemInfo);\n\nDWORD ComputerHardwareId1 = VolumeSerialNumber ^ 0x12B586FE;\n\nDWORD ComputerHardwareId2 = *(DWORD*)(&amp;uuid.Data4[2]) ^ 0x5D78A569;\n\nDWORD ComputerHardwareId3 = ((*(WORD*)(&amp;uuid.Data4[6]) &amp; 0xFFFF) | (SystemInfo.wProcessorArchitecture &lt;&lt; 16)) ^ 0xF45BC123;\n\nDWORD ComputerHardwareId4 = ((SystemInfo.wProcessorLevel &amp; 0xFFFF) | (SystemInfo.wProcessorRevision &lt;&lt; 16)) ^ 0xB542D8E1;\n\n\n\n//SENDSERVER\nWSADATA wsaData;\nif (WSAStartup(MAKEWORD(2, 2), &amp;wsaData) != 0) {\n    return;\n}\nSOCKET Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\nstruct hostent *host;\nhost = gethostbyname(\"www.mysite.com\");\nSOCKADDR_IN SockAddr;\nSockAddr.sin_port = htons(80);\nSockAddr.sin_family = AF_INET;\nSockAddr.sin_addr.s_addr = *((unsigned long*)host-&gt;h_addr);\nif (connect(Socket, (SOCKADDR*)(&amp;SockAddr), sizeof(SockAddr)) != 0){\n\n    return;\n}\n\n\nchar Text[256];\nZeroMemory(Text, sizeof(Text));\nsprintf(Text, \"%08X-%08X-%08X-%08X\", ComputerHardwareId1, ComputerHardwareId2, ComputerHardwareId3, ComputerHardwareId4);\n\nchar link[500];\nstrcat(link, \"GET /api/hardverinfo.php?hardverinfo=\");\nstrcat(link, Text);\nstrcat(link, \" HTTP/1.1\\r\\nHost: www.mysite.com\\r\\nConnection: close\\r\\n\\r\\n\");\n\nsend(Socket, link, strlen(link), 0);\n\nchar buffer[10000];\nint nDataLength;\nwhile ((nDataLength = recv(Socket, buffer, 10000, 0)) &gt; 0){\n    int i = 0;\n    while (buffer[i] &gt;= 32 || buffer[i] == '\\n' || buffer[i] == '\\r') {\n        i += 1;\n    }\n}\n\nclosesocket(Socket);\nWSACleanup();\n\nprintf(link);\nreturn;\n//ENDSEND\n}\n</code></pre>\n\n<p>Hi I have this code, its working and good. But After I send the GET request to the website, than I wanted to handle the answer, so for example after the get is done website give back OK and I want to handle this OK in my application, how can i do that?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 1, "creation_date": 1467823270, "post_id": 38229217, "comment_id": 63880295, "body": "My guess is the compiler is optimizing <code>make_foo</code> by inlining it (since it doesn&#39;t do anything meaningful). In this case, <code>make_foo</code> doesn&#39;t even encapsulate any degree of complex meaning, and I would just use <code>Foo(2,3)</code>"}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 1, "creation_date": 1467823334, "post_id": 38229217, "comment_id": 63880328, "body": "side comment: your copy constructor, for best practice, should pass <code>const Foo&amp;</code>"}, {"owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "edited": false, "score": 3, "creation_date": 1467823363, "post_id": 38229217, "comment_id": 63880348, "body": "RVO (<a href=\"https://en.wikipedia.org/wiki/Return_value_optimization\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Return_value_optimization</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 1, "creation_date": 1467823564, "post_id": 38229338, "comment_id": 63880489, "body": "The OP isn&#39;t concerned about the copy operation at the call of <code>sum</code>, but instead from the return value of <code>make_foo</code>"}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 0, "last_activity_date": 1467823502, "creation_date": 1467823502, "answer_id": 38229338, "question_id": 38229217, "link": "https://stackoverflow.com/questions/38229217/creating-an-object-by-function-call-in-c/38229338#38229338", "title": "Creating an object by function call in C++", "body": "<p>The copy constructor isn't called because in <code>sum(const Foo &amp; myfoo)</code>, <code>myfoo</code> is being passed by reference and so doesn't need to be copied. IMHO I would say that a generally applicable constructor for <code>Foo</code> suffices for creating an instance. If you have specialized functionality that would clutter your Foo class with constructors, it might be more elegant to have a function elsewhere, like <code>Foo loadFooFromFile(string filename)</code></p>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1467824048, "post_id": 38229387, "comment_id": 63880753, "body": "It&#39;s not guaranteed... in this case. If you were to do <code>Foo b(make_foo(1, 2))</code>, you&#39;re guaranteed that it&#39;ll be called to construct <code>b</code>. Minor nitpick, but C++ is all about those."}], "tags": [], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "is_accepted": false, "score": 2, "last_activity_date": 1467823645, "creation_date": 1467823645, "answer_id": 38229387, "question_id": 38229217, "link": "https://stackoverflow.com/questions/38229217/creating-an-object-by-function-call-in-c/38229387#38229387", "title": "Creating an object by function call in C++", "body": "<p>The two approaches are equivalent in this case.</p>\n\n<p>What you are observing is <a href=\"https://en.wikipedia.org/wiki/Copy_elision\" rel=\"nofollow\">Copy elision</a>, or more specifically <a href=\"https://en.wikipedia.org/wiki/Return_value_optimization\" rel=\"nofollow\">Return Value Optimization</a>.</p>\n\n<p>The compiler is smart enough to recognize that you don't need to construct the intermediate instance since you are just going to copy, then destroy it.  Therefore, it just creates the final instance which is the target of the function return.</p>\n\n<p>This optimization is explicitly allowed by the language standard, even though it means that your copy constructor gets bypassed.  In other words, the functionality of a copy constructor getting called is not guaranteed.</p>\n"}, {"comments": [{"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467833185, "post_id": 38229551, "comment_id": 63886008, "body": "For future reference, I would not use the &quot;edit&quot; headers in answers. SO is meant to be edited, no need to announce every edit. Just make it look like a better answer and we can see the edits if we need to :)"}], "tags": [], "owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "is_accepted": false, "score": 0, "last_activity_date": 1467824578, "last_edit_date": 1592644375, "creation_date": 1467824220, "answer_id": 38229551, "question_id": 38229217, "link": "https://stackoverflow.com/questions/38229217/creating-an-object-by-function-call-in-c/38229551#38229551", "title": "Creating an object by function call in C++", "body": "<p>It is worth noting that functions that are usually named with <code>make_*</code> are useful for types that require template parameters (and they could be deduced during construction).</p>\n<p>In C++ class template parameters are not deduced when calling the constructor (this will change in C++17) so you have to type them manually. By making a function that creates an object you can have it automatically deduced for you.</p>\n<p>For example look up <code>std::tuple</code>, or <code>std::pair</code></p>\n<h1>edit</h1>\n<p>I found a very related thread\n<a href=\"https://stackoverflow.com/questions/38228666/deduction-of-the-function\">Deduction of the function</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6557281, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f5beea8ad8e4fd924c3c3c3ba9569bbb?s=128&d=identicon&r=PG", "display_name": "user6557281", "link": "https://stackoverflow.com/users/6557281/user6557281"}, "is_accepted": false, "score": 0, "last_activity_date": 1467824857, "last_edit_date": 1495540513, "creation_date": 1467824857, "answer_id": 38229737, "question_id": 38229217, "link": "https://stackoverflow.com/questions/38229217/creating-an-object-by-function-call-in-c/38229737#38229737", "title": "Creating an object by function call in C++", "body": "<p>In the first case  cout &lt;&lt; 1 + sum(Foo(2,3)) &lt;&lt; endl; copy constructor will not be called since sum accepts the Foo reference. For later case your compiler is doing RVO hence copy constructor is not invoked. For more details read through <a href=\"https://en.wikipedia.org/wiki/Return_value_optimization\" rel=\"nofollow noreferrer\">Return Value Optimization</a> and <a href=\"https://en.wikipedia.org/wiki/Copy_elision\" rel=\"nofollow noreferrer\">Copy Elision</a>. Also <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">this question</a> has more details.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user674155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1467824857, "creation_date": 1467823062, "last_edit_date": 1495540055, "question_id": 38229217, "link": "https://stackoverflow.com/questions/38229217/creating-an-object-by-function-call-in-c", "title": "Creating an object by function call in C++", "body": "<p>I would like to create an object, that I'm only going to use only once, by a function call.</p>\n\n<p>The two approaches I've tried give the same result, but as I'm new to C++, I'm not sure if they're appropriate.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct Foo {\n    Foo(const int x, const int y): x(x), y(y) {};\n    Foo(Foo &amp; myfoo): x(myfoo.x), y(myfoo.y) {\n        cout &lt;&lt; \"copying\" &lt;&lt; endl;\n    };\n    const int x, y;\n};\n\nint sum(const Foo &amp; myfoo) {\n    return myfoo.x + myfoo.y;\n}\n\nFoo make_foo(const int x, const int y) {\n    Foo myfoo (x, y);\n    return myfoo;\n}\n\nint main () {\n    // version 1\n    cout &lt;&lt; 1 + sum(Foo(2,3)) &lt;&lt; endl;\n    // version 2\n    cout &lt;&lt; 1 + sum(make_foo(2,3)) &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Which of these approaches is \"more correct\"? What's the difference? I ran the code above with gcc and clang and both times I get</p>\n\n<pre><code>6\n6\n</code></pre>\n\n<p>which means the copy constructor wasn't called either time.</p>\n\n<p>Related:\n<a href=\"https://stackoverflow.com/questions/2722879/calling-constructors-in-c-without-new\">Calling constructors in c++ without new</a></p>\n\n<p><strong>Edit:</strong> Thanks, I already know RVO. I was just wondering if one method is preferred over the other</p>\n"}, {"tags": ["c++", "visual-c++", "libpng", "cimg"], "comments": [{"owner": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 0, "creation_date": 1467841697, "post_id": 38228841, "comment_id": 63890296, "body": "Perhaps it wants NULL instead of 0 in the values passed to png_create_read_struct()."}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "reply_to_user": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 0, "creation_date": 1467871030, "post_id": 38228841, "comment_id": 63897727, "body": "I can try, but isn&#39;t <code>#define NULL 0</code>?"}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "reply_to_user": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 0, "creation_date": 1467871116, "post_id": 38228841, "comment_id": 63897764, "body": "Also, I changed <code>user_error_fn</code> and <code>user_warning_fn</code> to point to some functions I created for seeing what error I get and still having same issue"}, {"owner": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 0, "creation_date": 1467986166, "post_id": 38228841, "comment_id": 63956399, "body": "On some platforms NULL is 0, on others 0L or (void*)0 which should all be equivalent.  It&#39;s best to use NULL rather than one of those, just for clarity, even though the problem may be something else."}, {"owner": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 0, "creation_date": 1467986760, "post_id": 38228841, "comment_id": 63956806, "body": "Also, make sure you have used the same settings (32-bit vs 64-bit, Release vs Debug, etc.) when building libpng and your application."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1468159879, "post_id": 38228841, "comment_id": 64002711, "body": "@Andry In the past I&#39;ve had similar problems with libpng where the library files (dll or lib) files were built using VS2010, 12 or 13 and when I ported over to 2015 I would get linking or runtime errors as well. Once I built out newer versions of the library files using the same compiler version everything worked correctly. I have provided an answer that may help you find out the cause of your problem."}, {"owner": {"reputation": 5304, "user_id": 696034, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ST4Ds.png?s=128&g=1", "display_name": "Daniel Protopopov", "link": "https://stackoverflow.com/users/696034/daniel-protopopov"}, "edited": false, "score": 0, "creation_date": 1468176179, "post_id": 38228841, "comment_id": 64007509, "body": "Have you checked your functors you&#39;re passing to the function? Here is a similar issue - <a href=\"http://stackoverflow.com/questions/10011925/can-not-read-png-file-with-libpng\" title=\"can not read png file with libpng\">stackoverflow.com/questions/10011925/&hellip;</a> that will allow you to see the errors during initialization. Also may be a zlib issue as per <a href=\"http://stackoverflow.com/questions/11516870/crash-in-png-set-read-fn-on-windows-7\" title=\"crash in png set read fn on windows 7\">stackoverflow.com/questions/11516870/&hellip;</a>"}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "reply_to_user": {"reputation": 5304, "user_id": 696034, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ST4Ds.png?s=128&g=1", "display_name": "Daniel Protopopov", "link": "https://stackoverflow.com/users/696034/daniel-protopopov"}, "edited": false, "score": 0, "creation_date": 1468177698, "post_id": 38228841, "comment_id": 64007945, "body": "@DanielProtopopov: I am using them, the code I have inside those functions is not executed :("}, {"owner": {"reputation": 5304, "user_id": 696034, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ST4Ds.png?s=128&g=1", "display_name": "Daniel Protopopov", "link": "https://stackoverflow.com/users/696034/daniel-protopopov"}, "edited": false, "score": 0, "creation_date": 1468177960, "post_id": 38228841, "comment_id": 64008018, "body": "That is because you have those variables set to 0 just one line above, Andry."}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "reply_to_user": {"reputation": 5304, "user_id": 696034, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ST4Ds.png?s=128&g=1", "display_name": "Daniel Protopopov", "link": "https://stackoverflow.com/users/696034/daniel-protopopov"}, "edited": false, "score": 0, "creation_date": 1468179173, "post_id": 38228841, "comment_id": 64008318, "body": "@DanielProtopopov: Daniel, in that version of the code I did not report the functions I used for custom error and warning. In another version of that code I of course replaced those 0s with the pointer to 2 functions I have written and that display the error... And during that attempt, those functions were not executed"}, {"owner": {"reputation": 5304, "user_id": 696034, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ST4Ds.png?s=128&g=1", "display_name": "Daniel Protopopov", "link": "https://stackoverflow.com/users/696034/daniel-protopopov"}, "edited": false, "score": 0, "creation_date": 1468180251, "post_id": 38228841, "comment_id": 64008574, "body": "Any chance to check and show us the stderr output?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1468564763, "post_id": 38228841, "comment_id": 64187713, "body": "have you tried any other PNG? I got few problems in the past with libpng based loader and  PNG&#39;s created by MsPaint. After re-encoding in different program (like faststone image viewer) the same images work fine. You should add the tested PNG  here so we see if the problem is not there ...."}, {"owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "edited": false, "score": 0, "creation_date": 1468605462, "post_id": 38228841, "comment_id": 64213009, "body": "Are you using precompiled binaries of phash, or are you building it from source?"}], "answers": [{"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 2, "creation_date": 1468217315, "post_id": 38292634, "comment_id": 64016838, "body": "Why the down vote? If you are going to down vote my answer please leave a comment explaining why  so I can improve on future answers."}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "edited": false, "score": 0, "creation_date": 1468622283, "post_id": 38292634, "comment_id": 64220383, "body": "I was not the one downvoting, honestly I don&#39;t understand the downvote either :("}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "edited": false, "score": 1, "creation_date": 1468622341, "post_id": 38292634, "comment_id": 64220408, "body": "Your code helped me getting things better, I adjusted it to the way you are making it work and that is fine! Thanks"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "edited": false, "score": 0, "creation_date": 1468657976, "post_id": 38292634, "comment_id": 64226856, "body": "@Andry I completely understand Andry; I was referring to the person who actually did the down vote."}, {"owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "edited": false, "score": 1, "creation_date": 1468909993, "post_id": 38292634, "comment_id": 64306873, "body": "I see, but I feel empathetic: it is frustrating when people downvote and leave no comment :("}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": true, "score": 2, "last_activity_date": 1468159992, "last_edit_date": 1468159992, "creation_date": 1468158927, "answer_id": 38292634, "question_id": 38228841, "link": "https://stackoverflow.com/questions/38228841/runtime-error-on-windows-when-trying-to-load-image-with-libpng/38292634#38292634", "title": "Runtime error on Windows when trying to load image with libpng", "body": "<p>Either if you are including libpng yourself or if another library is including and using libpng there are a few things to be aware of.</p>\n\n<ul>\n<li>Which ever version of Visual Studio you are using, the libpng (dll or lib) files must be built from the same version of Visual Studio that your solution is linking against.</li>\n<li>The platform you are using 32bit or 64bit is of concern.</li>\n<li>Project settings when building the png library must match the build types of your current project. (Code Generation -> Runtime Library) must match. Your character set should match as well.</li>\n</ul>\n\n<p>It is a little to difficult to tell what exactly is causing the problem but these are a few things to have a look at.</p>\n\n<p>One thing I would suggest is to go to the website that provides the newest version of libpng and download it. Set a folder on your computer and create \"system environment variable through windows\" to point to your library. Open the solution to this library in the current version of VS you are using, build it out for both a static lib and dynamic lib (two different solutions) and build them both out for 32 bit and 64 bit saving the generated files into separated folders. Then go into the other library that depends on this and try to switch the dlls or libs and link against the new ones if possible. Also the other 3rd party library you should try to open its solution in the same version of VS and try to do a clean build from there. Then make sure you link everything properly. You may have to also modify the props file. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I am not familiar with pHash or CImg, but I am familiar with libpng.</p>\n\n<p>Here is a function in one of my projects to load in a png into a texture structure. Now this is a part of a class object that relies on many other classes, but you should be able to see from this snippet that I am successfully using libpng.</p>\n\n<pre><code>// ----------------------------------------------------------------------------\n// loadPng()\nbool TextureFileReader::loadPng( Texture* pTexture ) {\n    struct PngFile {\n        FILE*       fp;\n        png_struct* pStruct;\n        png_info*   pInfo;\n\n        // --------------------------------------------------------------------\n        PngFile() :\n            fp( NULL ),\n            pStruct( NULL ),\n            pInfo( NULL )\n        {} // PngFile\n\n        // --------------------------------------------------------------------\n        ~PngFile() {\n            if ( NULL != fp ) {\n                fclose( fp );\n            }\n\n            if ( NULL != pStruct ) {\n                if ( NULL != pInfo ) {\n                    png_destroy_read_struct( &amp;pStruct, &amp;pInfo, NULL );\n                } else {\n                    png_destroy_read_struct( &amp;pStruct, NULL, NULL );\n                }\n            }\n        } // ~PngFile\n    } png;\n\n    // Error Message Handling\n    std::ostringstream strStream;\n    strStream &lt;&lt; __FUNCTION__ &lt;&lt; \" \";\n\n    if ( fopen_s( &amp;png.fp, m_strFilenameWithPath.c_str(), \"rb\" ) != 0 ) {\n        strStream &lt;&lt; \"can not open file for reading\";\n        throwError( strStream );\n    }\n\n    // Test If File Is Actually A PNG Image\n    const int NUM_HEADER_BYTES = 8;\n    png_byte headerBytes[NUM_HEADER_BYTES];\n\n    // Read The File Header\n    if ( fread( headerBytes, 1, NUM_HEADER_BYTES, png.fp ) != NUM_HEADER_BYTES ) {\n        strStream &lt;&lt; \"error reading header\";\n        return false;\n    }\n\n    // Test Header\n    if ( png_sig_cmp( headerBytes, 0, NUM_HEADER_BYTES ) != 0 ) {\n        return false; // Not A PNG FILE\n    }\n\n    // Init PNG Read Structure - Test PNG Version Compatibility\n    png.pStruct = png_create_read_struct( PNG_LIBPNG_VER_STRING, NULL, NULL, NULL );\n    if ( NULL == png.pStruct ) {\n        strStream &lt;&lt; \"can not create struct for PNG file\";\n        throwError( strStream );\n    }\n\n    // Init PNG Info Structure - Allocate Memory For Image Info\n    png.pInfo = png_create_info_struct( png.pStruct );\n    if ( NULL == png.pInfo ) {\n        strStream &lt;&lt; \"can not create info for PNG file\";\n        throwError( strStream );\n    }\n\n    // Prepare For Error Handling\n    if ( setjmp( png_jmpbuf( png.pStruct ) ) ) {\n        strStream &lt;&lt; \"can not init error handling for PNG file\";\n        throwError( strStream );\n    }\n\n    // Tell libPng Where The File Data Is\n    png_init_io( png.pStruct, png.fp );\n\n    // Tell libPng That You Have Already Read The Header Bytes\n    png_set_sig_bytes( png.pStruct, NUM_HEADER_BYTES );\n\n    // Read Image Data From The File\n    png_read_png( png.pStruct, png.pInfo, PNG_TRANSFORM_STRIP_16 | PNG_TRANSFORM_PACKING | PNG_TRANSFORM_EXPAND | PNG_TRANSFORM_GRAY_TO_RGB, NULL );\n\n    // Show Image Attributes\n    png_byte colorType = png_get_color_type( png.pStruct, png.pInfo );\n    switch( colorType ) {\n        case PNG_COLOR_TYPE_RGB: \n        case PNG_COLOR_TYPE_RGBA: {\n            break;\n        }\n        default: {\n            strStream &lt;&lt; \"PNG is saved in an unsupported color type (\" &lt;&lt; colorType &lt;&lt; \")\";\n            throwError( strStream );\n        }\n    }\n\n    unsigned uHeight = png_get_image_height( png.pStruct, png.pInfo );\n    unsigned uBytesPerRow = png_get_rowbytes( png.pStruct, png.pInfo );\n    if ( 0 == uHeight || 0 == uBytesPerRow ) {\n        strStream &lt;&lt; \"invalid image size. Height(\" &lt;&lt; uHeight &lt;&lt; \"), Bytes per row(\" &lt;&lt; uBytesPerRow &lt;&lt; \")\";\n        throwError( strStream );\n    }\n\n    // Make Room For All Pixel Data\n    unsigned uTotalNumBytes = uHeight * uBytesPerRow;\n    pTexture-&gt;vPixelData.resize( uTotalNumBytes );\n\n    // Get All Pixel Data From PNG Image\n    png_bytepp ppPixelRow = png_get_rows( png.pStruct, png.pInfo );\n\n    for ( unsigned int r = 0; r &lt; uHeight; ++r ) {\n        memcpy( &amp;pTexture-&gt;vPixelData[ uBytesPerRow * ( uHeight - 1 - r ) ], ppPixelRow[r], uBytesPerRow );\n    }\n\n    // Store Other Values In Texture\n    pTexture-&gt;uWidth            = png_get_image_width( png.pStruct, png.pInfo );\n    pTexture-&gt;uHeight           = uHeight;\n    pTexture-&gt;hasAlphaChannel   = ( colorType == PNG_COLOR_TYPE_RGBA );\n\n    return true;\n} // loadPng\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "is_accepted": false, "score": 1, "last_activity_date": 1468608092, "creation_date": 1468608092, "answer_id": 38403110, "question_id": 38228841, "link": "https://stackoverflow.com/questions/38228841/runtime-error-on-windows-when-trying-to-load-image-with-libpng/38403110#38403110", "title": "Runtime error on Windows when trying to load image with libpng", "body": "<p>Looking through the source code for <code>png_create_read_struct_2()</code>, there are only 2 failure modes:  inability to allocate memory, which is unlikely to be the problem, and a library version conflict.</p>\n\n<p>If you are using a precompiled build of the pHash library, you must ensure that the copy of the libpng DLL that gets linked dynamically at runtime is the same version of the library that pHash was compiled against.  The latest Windows build on pHash.org ships with libpng12.dll in the \"Release\" subdirectory, which is probably incompatible the version that you mentioned in the question, namely 1.4.19.</p>\n\n<p>If you are building pHash from source, make sure that the libpng include files that are being used in your build process match the version being loaded at runtime.</p>\n\n<p>If you're unsure exactly which DLLs are being loaded at runtime, the surest way I know to determine it would be to use <a href=\"https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx\" rel=\"nofollow\">Process Monitor</a>.</p>\n"}], "owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 38292634, "answer_count": 2, "score": 10, "last_activity_date": 1468608092, "creation_date": 1467821862, "last_edit_date": 1467823191, "question_id": 38228841, "link": "https://stackoverflow.com/questions/38228841/runtime-error-on-windows-when-trying-to-load-image-with-libpng", "title": "Runtime error on Windows when trying to load image with libpng", "body": "<p>I am using <a href=\"http://phash.org/\">pHash</a> and that library uses <a href=\"http://www.libpng.org/pub/png/libpng.html\">libpng</a>. I am having issues running my program because libpng fails loading a PNG file.</p>\n\n<ul>\n<li>Version of libpng: <a href=\"https://sourceforge.net/projects/libpng/files/libpng14/1.4.19/\">1.4.19</a></li>\n<li>Platform: Windows 10</li>\n<li>Environment: Visual Studio 2015</li>\n</ul>\n\n<h3>Trivial</h3>\n\n<p>Just if you came up with the following questions...</p>\n\n<ol>\n<li>Is the path to image correct? Yes</li>\n<li>Is the image a valid PNG file? Yes</li>\n</ol>\n\n<h2>Code details</h2>\n\n<p>Library pHash uses <a href=\"https://github.com/dtschump/CImg\">CImg</a>, the version of CImg they are using is a bit old I think:</p>\n\n<pre><code>#define cimg_version 148 // In CImg.h\n</code></pre>\n\n<p>I have debugged the library and the problems occurs in <code>CImg.h</code> (contained in the pHash VC++ project):</p>\n\n<pre><code>CImg&lt;T&gt;&amp; _load_png(std::FILE *const file, const char *const filename) {\n      if (!file &amp;&amp; !filename)\n        throw CImgArgumentException(_cimg_instance\n                                    \"load_png() : Specified filename is (null).\",\n                                    cimg_instance);\n      // Open file and check for PNG validity\n      if (Buffer) strcat(Buffer, \"Checking PNG availability\\r\\n\");\n      const char *volatile nfilename = filename; // two 'volatile' here to remove a g++ warning due to 'setjmp'.\n      std::FILE *volatile nfile = file?file:cimg::fopen(nfilename,\"rb\");\n\n      unsigned char pngCheck[8] = { 0 };\n      cimg::fread(pngCheck,8,(std::FILE*)nfile);\n      if (png_sig_cmp(pngCheck,0,8)) {\n        if (!file) cimg::fclose(nfile);\n        throw CImgIOException(_cimg_instance\n                              \"load_png() : Invalid PNG file '%s'.\",\n                              cimg_instance,\n                              nfilename?nfilename:\"(FILE*)\");\n      }\n\n      // Setup PNG structures for read\n      png_voidp user_error_ptr = 0;\n      png_error_ptr user_error_fn = 0, user_warning_fn = 0;\n      png_structp png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING,user_error_ptr,user_error_fn,user_warning_fn);\n\n      if (!png_ptr) { // &lt;-- PROBLEM HERE\n        if (!file) cimg::fclose(nfile);\n        throw CImgIOException(_cimg_instance\n                              \"load_png() : Failed to initialize 'png_ptr' structure for file '%s'.\",\n                              cimg_instance,\n                              nfilename?nfilename:\"(FILE*)\");\n...\n}\n</code></pre>\n\n<p>The snippet shows the first part of <code>CImg&lt;T&gt;&amp; _load_png(std::FILE *const file, const char *const filename)</code> which is called by the CImg library used by pHash.</p>\n\n<h2>Runtime issue</h2>\n\n<p>The code compiles fine but I get this error at runtime which I can see in the debugger:</p>\n\n<blockquote>\n  <p>CImgIOException: Failed to initialize 'png_ptr'...</p>\n</blockquote>\n\n<p>In the point indicated in the code. I don't know why, it fails loading the image. The failure occurs when calling <code>png_create_read_struct</code> in <code>CImg.h</code>. That code is a bit obscure as defined through preprocessor directives. It is not clear why it is failing.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "inheritance", "overriding"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1467821972, "post_id": 38228832, "comment_id": 63879496, "body": "Could you at least give us a minimal pseudo code sample, it&#39;s very hard to get the actual situation from your prose."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1467822069, "post_id": 38228832, "comment_id": 63879560, "body": "Have you tried <code>if (condition) return base_class::foo(args); else &#47;* doing something else *&#47;</code>?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1467822179, "post_id": 38228832, "comment_id": 63879628, "body": "@W.F. If I understand correctly the OP states in the question they do not want to use <code>if-else</code> logic to do this."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467822321, "post_id": 38228832, "comment_id": 63879710, "body": "@JamesAdkison as I understand OP correctly he does not want to <code>slotting the entire function definition</code> in the child function..."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1467822556, "post_id": 38228832, "comment_id": 63879853, "body": "@W.F. Okay, well I guess I just don&#39;t understand the question because I don&#39;t know what &quot;slotting&quot; means. If it&#39;s a synonym for duplicating the base implementation then I agree with your original comment about explicitly calling the base implementation."}, {"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "edited": false, "score": 0, "creation_date": 1467822663, "post_id": 38228832, "comment_id": 63879942, "body": "What I mean here is that I just don&#39;t want to copy-paste the base class&#39;s function definition into an if-else. It&#39;s a big function and I don&#39;t want to needlessly muck up the code if I can avoid it."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1467822767, "post_id": 38228832, "comment_id": 63880006, "body": "@Bronze you realize you can <a href=\"http://stackoverflow.com/a/357380/4892076\">call base class functions</a> in C++? That&#39;s what W.F. is doing in the above comment, and it would prevent the copy/paste"}, {"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467822861, "post_id": 38228832, "comment_id": 63880061, "body": "@jaggedSpire Having tried just this I was rebuked by the compiler because the function cannot be called without the object:"}, {"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "edited": false, "score": 0, "creation_date": 1467823205, "post_id": 38228832, "comment_id": 63880261, "body": "The NewsPublisher class has some important attributes that get instantiated and inherited by MagazinePublisher, so I can&#39;t just call Publisher::publish()."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1467823218, "post_id": 38228832, "comment_id": 63880265, "body": "@Bronze perhaps you need <a href=\"http://coliru.stacked-crooked.com/a/0e7f84e1c8b7e7e7\" rel=\"nofollow noreferrer\">a working example?</a> If the attributes are virtual, it&#39;ll simply get that information from MagazinePublisher"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1467823361, "post_id": 38228832, "comment_id": 63880345, "body": "@jaggedSpire Funny, I was just <a href=\"http://ideone.com/10VG5g\" rel=\"nofollow noreferrer\">doing the same thing</a>."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "edited": false, "score": 0, "creation_date": 1467824318, "post_id": 38229384, "comment_id": 63880906, "body": "Yeah, this is what I&#39;m going with. The last bit with the full name scope was what I was struggling with. Thank you very much!"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1467824230, "last_edit_date": 1467824230, "creation_date": 1467823638, "answer_id": 38229384, "question_id": 38228832, "link": "https://stackoverflow.com/questions/38228832/overriding-c-function-based-on-conditional/38229384#38229384", "title": "Overriding C++ function based on conditional", "body": "<p>According to your example you can simply call the base class implementation explicitly:</p>\n\n<pre><code>class MagazinePublisher : public NewsPublisher&lt;Sports&gt; {\n  void publish(...) {\n    if(that.theOther() == value) {\n      // do different stuff\n    } else {\n      // call the base class implementation, as this function would not\n      // have been overridden:\n      NewsPublisher&lt;Sports&gt;::publish(...);\n   // ^^^^^^^^^^^^^^^^^^^^^^^\n    }\n  }\n}\n</code></pre>\n\n<p>Well, I suppose your actual base class function <code>publish()</code> is declared as <code>virtual</code> member.</p>\n\n<hr>\n\n<p>Also since your sample is just pseudo code and I couldn't really test it, you might need to add which <code>publish()</code> implementation should be used in the <code>NewsPublisher&lt;T&gt;</code> class:</p>\n\n<pre><code>template &lt;class NewsType&gt; class NewsPublisher : public Publisher&lt;OnlineFace&gt; {\npublic:\n  // constructors, destructors...\n  using Publisher&lt;OnlineFace&gt;::publish(); // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 1, "accepted_answer_id": 38229384, "answer_count": 1, "score": 1, "last_activity_date": 1467824582, "creation_date": 1467821838, "last_edit_date": 1467824582, "question_id": 38228832, "link": "https://stackoverflow.com/questions/38228832/overriding-c-function-based-on-conditional", "title": "Overriding C++ function based on conditional", "body": "<p>So I've used C for a long time and Java, too, but I'm not that familiar with C++. The situation is that we have:</p>\n\n<p><code>base class template 1 -&gt; base class template 2 -&gt; several relevant subclasses</code></p>\n\n<p>Currently all of the final subclasses inherit a member function from class 1, but we need to change the behavior of this function only in one of the subclasses, and only if a variable elsewhere in the code is set, and otherwise run the function as defined in class 1. Is there a way to do this without slotting the entire function definition on the other side of an <code>if-else</code>? I've looked at SFINAE/enable-if, but that's used for type-based decisions, not simple conditionals like this.</p>\n\n<p>If I'm missing anything easy or dumb please let me know.</p>\n\n<p>Some pseudocode might help:</p>\n\n<pre><code>template &lt;class Face&gt; class Publisher {\n  virtual void publish(...) {\n    // do stuff\n  }\n}\n\ntemplate &lt;class NewsType&gt; class NewsPublisher : public Publisher&lt;OnlineFace&gt; {\n  // constructors, destructors...\n}\n\nclass MagazinePublisher : public NewsPublisher&lt;Sports&gt; {\n  void publish(...) {\n    if(that.theOther() == value) {\n      // do different stuff\n    } else {\n      // do whatever would have been done without this override here\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "type-deduction"], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": false, "score": 11, "last_activity_date": 1467821551, "creation_date": 1467821551, "answer_id": 38228726, "question_id": 38228666, "link": "https://stackoverflow.com/questions/38228666/deduction-of-the-function/38228726#38228726", "title": "Deduction of the function", "body": "<p>You cannot omit the arguments of a template class, unless they are defaulted. What you can do is have a maker function which deduces the argument and forwards this argument to the template class, returning an object of the appropriate instantiation.</p>\n\n<pre><code>template&lt;typename F, typename... Args&gt;\nA&lt;F&gt; make_A(F f, Args&amp;&amp;... args) {\n    return A&lt;F&gt;(f, std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1467829694, "post_id": 38228739, "comment_id": 63883991, "body": "I believe the proper way to make those factory functions is to use <code>std::decay</code> or a similar trait on <code>A&lt;F&gt;</code>. Which would make it <code>A&lt;std::decay_t&lt;F&gt;&gt;</code>. See <a href=\"http://en.cppreference.com/w/cpp/utility/optional/make_optional\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/optional/make_optional</a> or other <code>make_*</code> reference"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1467830420, "post_id": 38228739, "comment_id": 63884446, "body": "@KABoissonneault Yes you are right, if I use universal references I should be using <code>std::decay</code>, I have updated the answer."}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467833422, "post_id": 38228739, "comment_id": 63886139, "body": "I didn&#39;t quite understand the question, and therefore the answer. Is the whole goal to be able to say <code>auto a(::close, 1)</code>?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467833561, "post_id": 38228739, "comment_id": 63886216, "body": "@Assimilater OP&#39;s ask a way to automatically deduced class template parameter when constructing an instance (e.g. <code>A(::close, 1)</code>) which is not possible in c++14. The above answer allows you to deduce the template parameter using the <code>make_A</code> function, e.g. <code>auto a = make_A(::close, 1)</code> or <code>f(make_A(::close, 1))</code>."}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467833920, "post_id": 38228739, "comment_id": 63886398, "body": "Yes, that is the wording of the OP....maybe the wording is just confusing to me because I haven&#39;t done much with variadic templates....is this a direct consequence of that only? It seemed like it could apply more generally..."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467834002, "post_id": 38228739, "comment_id": 63886438, "body": "@Assimilater No, this is not a consequence of variadic templates. See <code>std::pair</code>, you cannot do <code>std::pair a(1, 1)</code> or <code>std::pair(1, 1)</code> because class template argument cannot be deduced so  you use <code>std::make_pair(1, 1)</code> to have <code>T1</code> and <code>T2</code> deduced."}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "edited": false, "score": 0, "creation_date": 1467834219, "post_id": 38228739, "comment_id": 63886571, "body": "@Holt Ah, sorry that took a bit to click, thanks for the exp :)"}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 35, "last_activity_date": 1558364925, "last_edit_date": 1558364925, "creation_date": 1467821607, "answer_id": 38228739, "question_id": 38228666, "link": "https://stackoverflow.com/questions/38228666/deduction-of-the-function/38228739#38228739", "title": "Deduction of the function", "body": "<p>No, you (currently) cannot. The standard way of doing this is by creating \"make_like\" function (such as <a href=\"http://en.cppreference.com/w/cpp/utility/pair/make_pair\" rel=\"nofollow noreferrer\"><code>make_pair</code></a>, <a href=\"http://en.cppreference.com/w/cpp/utility/optional/make_optional\" rel=\"nofollow noreferrer\"><code>make_optional</code></a> ...):</p>\n\n<pre><code>template&lt;typename F, typename... Args&gt;\nA&lt;std::decay_t&lt;F&gt;&gt; make_A (F &amp;&amp;f, Args&amp;&amp;... args) {\n    return {std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...};\n}\n</code></pre>\n\n<p>C++17 will introduce <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0091r2.html\" rel=\"nofollow noreferrer\">template argument deduction for class</a> which will allow you to do exactly what you want (see also <a href=\"https://stackoverflow.com/a/38228754/2666289\">Barry's answer</a> below).</p>\n"}, {"comments": [{"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 1, "creation_date": 1468001508, "post_id": 38228754, "comment_id": 63965219, "body": "Re: C++17: That is so weird. It seems like you should at least have to write <code>A&lt;auto&gt; a(::close,1);</code>. Though I guess I&#39;ll get used to it . . ."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 16, "last_activity_date": 1467891515, "last_edit_date": 1467891515, "creation_date": 1467821645, "answer_id": 38228754, "question_id": 38228666, "link": "https://stackoverflow.com/questions/38228666/deduction-of-the-function/38228754#38228754", "title": "Deduction of the function", "body": "<p>Thanks to the adoption of template parameter deduction for constructors, in C++17, you'll be able to just write:</p>\n\n<pre><code>A a(::close, 1);\n</code></pre>\n\n<p>Before that, you'll just need to write a factory to do the deduction for you:</p>\n\n<pre><code>template &lt;class F, class... Args&gt;\nA&lt;std::decay_t&lt;F&gt;&gt; make_a(F&amp;&amp; f, Args&amp;&amp;... args) {\n    return {std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...};\n}\n\nauto a = make_a(::close, 1);\n</code></pre>\n\n<p>This is a little verbose, but at least you don't need to worry about efficiency - there will be no copies made here thanks to RVO.</p>\n"}], "owner": {"reputation": 1302, "user_id": 2244021, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/nkxwD.jpg?s=128&g=1", "display_name": "Serge Roussak", "link": "https://stackoverflow.com/users/2244021/serge-roussak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 2, "accepted_answer_id": 38228739, "answer_count": 3, "score": 32, "last_activity_date": 1558364925, "creation_date": 1467821295, "last_edit_date": 1468095308, "question_id": 38228666, "link": "https://stackoverflow.com/questions/38228666/deduction-of-the-function", "title": "Deduction of the function", "body": "<p>Let's say we have a class template like this:</p>\n\n<pre><code>template&lt;typename F&gt;\nclass A\n{\npublic:\n  template&lt;typename... Args&gt;\n  A(F f, Args... args)\n  { /* Do something... */ }\n};\n</code></pre>\n\n<p>And now I want to use it in some way like this one:</p>\n\n<pre><code>A&lt;int(int)&gt; a(::close, 1);\n</code></pre>\n\n<p>Now the question: is there any way to omit the <code>&lt;int(int)&gt;</code> because a compiler can know this information for the <code>::close</code>? There is no need to save the \"design\" of the template.</p>\n\n<p>As for concrete task, I need to design a template of a class. Objects of this class could take a function and parameters for this function at construction time and call this function later.</p>\n"}, {"tags": ["c++", "cmake", "lapack", "blas", "armadillo"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1467829854, "post_id": 38228607, "comment_id": 63884091, "body": "You shouldn&#39;t specify the linker flags that way. Check out how CMake works, especially <code>target_link_libraries</code>."}, {"owner": {"reputation": 322, "user_id": 1851710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e1abab0882919fb0682de0df82f45cf?s=128&d=identicon&r=PG", "display_name": "DUWUDA", "link": "https://stackoverflow.com/users/1851710/duwuda"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1467855822, "post_id": 38228607, "comment_id": 63894291, "body": "I thought that how you can set linker flags (see <a href=\"http://stackoverflow.com/questions/11783932/how-to-add-linker-or-compile-flag-in-cmake-file\">here</a>). I put those flags into the <code>traget_link_library</code> but that also doesn&#39;t work (same error)"}, {"owner": {"reputation": 322, "user_id": 1851710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e1abab0882919fb0682de0df82f45cf?s=128&d=identicon&r=PG", "display_name": "DUWUDA", "link": "https://stackoverflow.com/users/1851710/duwuda"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1467859946, "post_id": 38228607, "comment_id": 63895157, "body": "@usr1234567 Now I also tried to use <code>target_compile_options</code> which also does not work with <code>target_compile_options(program PRIVATE -O1 -llpack -lblas)</code>"}, {"owner": {"reputation": 322, "user_id": 1851710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e1abab0882919fb0682de0df82f45cf?s=128&d=identicon&r=PG", "display_name": "DUWUDA", "link": "https://stackoverflow.com/users/1851710/duwuda"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1467881867, "post_id": 38228607, "comment_id": 63903625, "body": "@usr1234567 both my exe and shared library have the <code>-O1 --llpack -blas</code> flags, still the same error when compiling"}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 1851710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e1abab0882919fb0682de0df82f45cf?s=128&d=identicon&r=PG", "display_name": "DUWUDA", "link": "https://stackoverflow.com/users/1851710/duwuda"}, "is_accepted": false, "score": 1, "last_activity_date": 1467885536, "creation_date": 1467885536, "answer_id": 38242600, "question_id": 38228607, "link": "https://stackoverflow.com/questions/38228607/link-armadillo-blas-lapack-with-cmake-undefined-reference-to-dgemv/38242600#38242600", "title": "link armadillo/blas/lapack with cmake (undefined reference to `dgemv_&#39;)", "body": "<p>I should have used <code>target_link_library</code> for setting the library flags and not <code>SET(CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} ${GCC_ARMADILLO_LINK_FLAG}\")</code></p>\n\n<p>So using works</p>\n\n<pre><code>target_link_libraries(exe\n    customlib1\n    customlib2\n    -O2 blas lapack\n    )\n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 1851710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e1abab0882919fb0682de0df82f45cf?s=128&d=identicon&r=PG", "display_name": "DUWUDA", "link": "https://stackoverflow.com/users/1851710/duwuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467885536, "creation_date": 1467821091, "last_edit_date": 1467882125, "question_id": 38228607, "link": "https://stackoverflow.com/questions/38228607/link-armadillo-blas-lapack-with-cmake-undefined-reference-to-dgemv", "title": "link armadillo/blas/lapack with cmake (undefined reference to `dgemv_&#39;)", "body": "<p>I have been sitting on this for a while now and really do not understand what is going on.\nI have the following problem with cmake and armadillo/lapack/blas:</p>\n\n<p>I try to download armadillo with cmake, compile it and then link it to my program.</p>\n\n<p>However, while I can download, compile it etc. I have troubles linking it to my program.</p>\n\n<p>I get the following error when linking to an executable:\n<code>\nundefined reference to `dgemv_'\n</code>\nSo I know that this is a lapack/blas thing, but I cannot figure out what is wrong.</p>\n\n<p>The relevant parts in my CMakeLists.txt are below. \nI would be very happy if someone could help me. I am close to eating my keyboard out of frustration.</p>\n\n<pre><code>ExternalProject_Add(ArmadilloDownload\n    PREFIX ${LIBRARY_OUTPUT_PATH}/armadillo-7.100.3\n    DOWNLOAD_COMMAND wget http://sourceforge.net/projects/arma/files/armadillo-7.100.3.tar.xz\n    CONFIGURE_COMMAND tar -xf ../armadillo-7.100.3.tar.xz -C ../ArmadilloDownload  --strip-components=1\n    BUILD_IN_SOURCE 1\n    BUILD_COMMAND cmake .\n    INSTALL_COMMAND make\n    UPDATE_COMMAND \"\"\n    )\n\nset(Armadillo_DIR ${LIBRARY_OUTPUT_PATH}/armadillo-7.100.3/src/ArmadilloDownload)\nset(ARMADILLO_LIBRARY ${Armadillo_DIR}/libarmadillo.so)\nset(ARMADILLO_INCLUDE_DIR ${Armadillo_DIR}/include/)\ninclude_directories(${ARMADILLO_INCLUDE_DIR})\nset(GCC_ARMADILLO_LINK_FLAG \"-O1 -llapack -lblas\")\nSET(CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} ${GCC_ARMADILLO_LINK_FLAG}\")\nSET(CMAKE_SHARED_LINKER_FLAGS  \"${CMAKE_SHARED_LINKER_FLAGS} ${GCC_ARMADILLO_LINK_FLAG}\")\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467821179, "post_id": 38228590, "comment_id": 63879074, "body": "Can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the failing code?"}, {"owner": {"reputation": 403, "user_id": 1495900, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0014d454f2cc95f53d5c1face740fad2?s=128&d=identicon&r=PG", "display_name": "Iman", "link": "https://stackoverflow.com/users/1495900/iman"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467821589, "post_id": 38228590, "comment_id": 63879299, "body": "@NathanOliver Unfortunately it is not an small project, and I think I can not provide a very well case but I provided simplest form"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467821902, "post_id": 38228590, "comment_id": 63879459, "body": "Have you tried asking your friend what they did to build the project? That might be the quickest way to resolve your problem."}, {"owner": {"reputation": 403, "user_id": 1495900, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0014d454f2cc95f53d5c1face740fad2?s=128&d=identicon&r=PG", "display_name": "Iman", "link": "https://stackoverflow.com/users/1495900/iman"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467821980, "post_id": 38228590, "comment_id": 63879504, "body": "@RSahu I do not have access to him"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 1495900, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0014d454f2cc95f53d5c1face740fad2?s=128&d=identicon&r=PG", "display_name": "Iman", "link": "https://stackoverflow.com/users/1495900/iman"}, "edited": false, "score": 0, "creation_date": 1467822360, "post_id": 38228928, "comment_id": 63879741, "body": "Have you ever compiled that?"}], "tags": [], "owner": {"reputation": 389, "user_id": 3449402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c75a3845121074743c7070b0d7d8169?s=128&d=identicon&r=PG&f=1", "display_name": "Ganil", "link": "https://stackoverflow.com/users/3449402/ganil"}, "is_accepted": false, "score": 1, "last_activity_date": 1467822374, "last_edit_date": 1467822374, "creation_date": 1467822094, "answer_id": 38228928, "question_id": 38228590, "link": "https://stackoverflow.com/questions/38228590/static-functions-with-block-scope-are-illegal-error-for-compiling-zeus/38228928#38228928", "title": "&#39;static functions with block scope are illegal&#39; error for compiling Zeus", "body": "<p>Declaring functions within a block scope is illegal in C and C++. So, what exactly are you trying to do? If you just want to call the function unhookList(), declared in one of the Zeus headers, then simply call it like this:</p>\n\n<pre><code>int main() {\n    // parameter values are just for example\n    bool result = unhookList(0, NULL, 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 1495900, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0014d454f2cc95f53d5c1face740fad2?s=128&d=identicon&r=PG", "display_name": "Iman", "link": "https://stackoverflow.com/users/1495900/iman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467822374, "creation_date": 1467821053, "last_edit_date": 1467821476, "question_id": 38228590, "link": "https://stackoverflow.com/questions/38228590/static-functions-with-block-scope-are-illegal-error-for-compiling-zeus", "title": "&#39;static functions with block scope are illegal&#39; error for compiling Zeus", "body": "<p>When I want to compile Z<a href=\"https://github.com/Visgean/Zeus\" rel=\"nofollow\">eus source code</a> on Windows 8 with Visual Studio 2010 I receive this error 'static functions with block scope are illegal', is there any way to force compiler to ignore this error? (One friend of mine compiled this source code without any modification with my current setup)\n[to compile the source first you should change path of compiler in 'make/buildconfig.inc.php' file) [I am a researcher], This is the simplest case study I think:</p>\n\n<pre><code>int main() {\n    static int func1();   // C2267\n}\n</code></pre>\n\n<p>This is the function</p>\n\n<pre><code>static bool unhookList(HANDLE process, HOOKWINAPI *list, DWORD count)\n{\n  bool ok = true; \n  for(DWORD i = 0; i &lt; count; i++)if(list[i].originalFunction != NULL)\n  {\n    if(!WaHook::_unhook(process, list[i].functionForHook, list[i].originalFunction, list[i].originalFunctionSize))\n    {\n      ok = false;\n#     if defined WDEBUG1\n      WDEBUG1(WDDT_ERROR, \"Failed to unhook WinApi at index %u\", i);\n#     endif\n    }\n    /*else\n    {\n      PeImage::_repalceImportFunction(coreData.modules.current, list[i].originalFunction, list[i].functionForHook);\n      Core::replaceFunction(list[i].originalFunction, list[i].functionForHook);\n    }*/\n  }\n  return ok;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1467820924, "post_id": 38228474, "comment_id": 63878918, "body": "Well, that&#39;s the way c++ works. You have to include the header files to get the declarations for what you&#39;re using."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467820964, "post_id": 38228474, "comment_id": 63878942, "body": "If you use something from a standard header then include that header.  Makes life nice and easy if you follow that behavior."}, {"owner": {"reputation": 258, "user_id": 6310670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3846db42183b24ad30e14262e970e23c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Barnes", "link": "https://stackoverflow.com/users/6310670/alexei-barnes"}, "edited": false, "score": 0, "creation_date": 1467821098, "post_id": 38228474, "comment_id": 63879025, "body": "If you use the <code>#include</code> directive on a file then that&#39;s basically the same as dropping the whole contents of that referenced file into your source. Thus if the file you reference has it&#39;s own includes those files will also be put into your source."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467821280, "post_id": 38228474, "comment_id": 63879115, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Please write <i>answers</i> in the <i>answer section</i>. That&#39;s the way SE works."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6531747"}, "edited": false, "score": 0, "creation_date": 1467821280, "post_id": 38228474, "comment_id": 63879116, "body": "I know the meaning of #include, my question is if you need to include&lt;vector&gt; if you want to use vector so how its possible that you also can use vector without to include it?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467821312, "post_id": 38228474, "comment_id": 63879139, "body": "In English, the word &quot;I&quot; is capitalised, Nadavp."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467821383, "post_id": 38228474, "comment_id": 63879178, "body": "@Nadavp In such case it was already included from another header file."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1467821605, "post_id": 38228474, "comment_id": 63879308, "body": "@Nadavp <i>I know the meaning of #include</i> --If you knew the meaning of <code>#include</code>, then the answer should have been obvious to you.  There is another <code>#include</code> that included <code>&lt;vector&gt;</code> within the chain of include files."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1467821309, "post_id": 38228651, "comment_id": 63879137, "body": "In other words, C++ (even C++17) does not have modules yet."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1467821543, "post_id": 38228651, "comment_id": 63879275, "body": "You forgot to add it might work on Tuesdays but not the other days  :) :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6531747"}, "edited": false, "score": 0, "creation_date": 1467822118, "post_id": 38228651, "comment_id": 63879593, "body": "ok thank you. Further to your answer, how can i know that <code>vector</code> is part of std? i mean, how can i know in future that I need to add <code>std::</code> before some component in my code?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467824390, "post_id": 38228651, "comment_id": 63880954, "body": "@Nadavp: If it comes with C++, it&#39;s <code>std::</code>. When in doubt, Google it."}, {"owner": {"reputation": 823, "user_id": 2128797, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dacdb96daa34c81dbc949b2fe7bea470?s=128&d=identicon&r=PG", "display_name": "Laurie Stearn", "link": "https://stackoverflow.com/users/2128797/laurie-stearn"}, "edited": false, "score": 0, "creation_date": 1579246919, "post_id": 38228651, "comment_id": 105709501, "body": "<code>#if _HAS_CXX17</code>:- <code>&lt;vector&gt;</code> is also included in <code>&lt;filesystem&gt;</code>, along with fav goodies like <code>&lt;algorithm&gt;</code> and <code>&lt;utility&gt;</code>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 11, "last_activity_date": 1467821240, "creation_date": 1467821240, "answer_id": 38228651, "question_id": 38228474, "link": "https://stackoverflow.com/questions/38228474/why-do-i-need-to-include-vector-to-use-them/38228651#38228651", "title": "why do i need to include &lt;vector&gt; to use them?", "body": "<p>When you see code that uses <code>std::vector</code>, but did not <code>#include &lt;vector&gt;</code>, <strong>that code is broken</strong>. Period.</p>\n\n<p>It may \"just so happen\" to work on particular compilers/standard library implementations/platforms/planets, depending on which other standard headers \"just so happen\" to already be including <code>&lt;vector&gt;</code> for their own use. This shall not be relied upon.</p>\n"}, {"tags": [], "owner": {"reputation": 298, "user_id": 6453334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0PiPgLcDte8/AAAAAAAAAAI/AAAAAAAAASM/61ps0-uwle8/photo.jpg?sz=128", "display_name": "AlbanianGamerYT", "link": "https://stackoverflow.com/users/6453334/albaniangameryt"}, "is_accepted": false, "score": 0, "last_activity_date": 1467821990, "creation_date": 1467821990, "answer_id": 38228895, "question_id": 38228474, "link": "https://stackoverflow.com/questions/38228474/why-do-i-need-to-include-vector-to-use-them/38228895#38228895", "title": "why do i need to include &lt;vector&gt; to use them?", "body": "<p>You need to include the header file, to use any type of data/function. All the data types and functions in c++ are included in their own libraries.If you dont include the library, the c++ program won't know what you used, because it doesnt know they even excist.Its like :</p>\n\n<blockquote>\n  <p>You want to play with Jim's dog, but you dont know who Jim is, or what\n  a dog is.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 4, "last_activity_date": 1467822025, "creation_date": 1467822025, "answer_id": 38228901, "question_id": 38228474, "link": "https://stackoverflow.com/questions/38228474/why-do-i-need-to-include-vector-to-use-them/38228901#38228901", "title": "why do i need to include &lt;vector&gt; to use them?", "body": "<p>You may see code that does not <code>#include &lt;vector&gt;</code> <em>directly</em>. But if you inspect the preprocessed code I'm certain you'll find that that code <em>did</em> include the header - but indirectly through some other header.</p>\n\n<p>This is fragile and you shouldn't do it. But that doesn't mean it does not work.</p>\n"}, {"tags": [], "owner": {"reputation": 1102, "user_id": 3684240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05f5b5980c5eebbd2e200dc5157f094?s=128&d=identicon&r=PG&f=1", "display_name": "user3684240", "link": "https://stackoverflow.com/users/3684240/user3684240"}, "is_accepted": false, "score": 6, "last_activity_date": 1467824778, "creation_date": 1467824778, "answer_id": 38229711, "question_id": 38228474, "link": "https://stackoverflow.com/questions/38228474/why-do-i-need-to-include-vector-to-use-them/38229711#38229711", "title": "why do i need to include &lt;vector&gt; to use them?", "body": "<p><code>vector</code> is not actually built into C++, it is only part of its standard library which is guaranteed to be available to you if you use C++. <code>vector</code> (or, by its full name, <code>std::vector</code>) is itself implemented in C++. </p>\n\n<p>By writing <code>#include &lt;vector&gt;</code>, you are telling the compiler to not only use your own code, but to also compile a file called <code>vector</code>. This file is actually somewhere on your harddrive (if you use GNU/Linux, it's probably located at <code>/usr/include/c++/[GCC_VERSION]/vector</code>).</p>\n\n<p>You cannot use <code>std::vector</code> without including that file, because the compiler then doesn't know a class called <code>std::vector</code>. The compiler only knows the <em>language</em> C++, not its standard library!</p>\n\n<p>If some programs use <code>std::vector</code> without including its header file, it's because some header file that they have already included, has an <code>#include &lt;vector&gt;</code> somewhere. There may be good reasons for that (e.g. some C++ courses ship with a file that includes all necessary headers and that is used in the first few lessons). However there may also be standard library headers that include <code>vector</code> (some implementations of <code>iostream</code> do that). Relying upon that is not a good idea because it differs from implementation to implementation, so your program might work in Visual C++ 2010, but it doesn't compile on GNU or in a newer version of Visual C++.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6531747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14768, "favorite_count": 1, "answer_count": 4, "score": 6, "last_activity_date": 1467824778, "creation_date": 1467820771, "last_edit_date": 1467821347, "question_id": 38228474, "link": "https://stackoverflow.com/questions/38228474/why-do-i-need-to-include-vector-to-use-them", "title": "why do i need to include &lt;vector&gt; to use them?", "body": "<p>I am new to C++ and trying to figure out how to use <code>vector</code>.</p>\n\n<p>More specifically, I want to know when I need to use <code>#include&lt;vector&gt;</code>. I am asking that because I have seen programs with and without the <code>#include</code> statement that use <code>vector</code> in the program.</p>\n"}, {"tags": ["c++", "linux", "visual-studio", "class", "gcc"], "comments": [{"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "edited": false, "score": 1, "creation_date": 1467820966, "post_id": 38228450, "comment_id": 63878944, "body": "What do you mean by &quot;different answers&quot;? Different <i>how</i>?"}, {"owner": {"reputation": 118, "user_id": 5126849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00fea1a9abb16a3075e0006e6b9f4cf3?s=128&d=identicon&r=PG&f=1", "display_name": "wanglinski", "link": "https://stackoverflow.com/users/5126849/wanglinski"}, "reply_to_user": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "edited": false, "score": 0, "creation_date": 1467821171, "post_id": 38228450, "comment_id": 63879070, "body": "@nvoigt  with gcc, the <code>tt.name = &quot;t_name&quot;</code>and <code>tt.stride = 5</code> ,but I got <code>tt.name = &quot;&quot;</code> and <code>tt.stride = 0</code> in visual studio."}], "answers": [{"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1467821476, "post_id": 38228670, "comment_id": 63879233, "body": "Better yet, have no copy constructor at all!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467823540, "post_id": 38228670, "comment_id": 63880472, "body": "Not only is it a bug but it is now UB since RVO, copy elision does not have to ever be applied(C++17 will change that)."}, {"owner": {"reputation": 118, "user_id": 5126849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00fea1a9abb16a3075e0006e6b9f4cf3?s=128&d=identicon&r=PG&f=1", "display_name": "wanglinski", "link": "https://stackoverflow.com/users/5126849/wanglinski"}, "edited": false, "score": 0, "creation_date": 1467824926, "post_id": 38228670, "comment_id": 63881264, "body": "yeah, both removing cls::cls(const cls&amp; origin) or cls::cls(const cls&amp; origin)=default will solve this problem."}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": true, "score": 3, "last_activity_date": 1467821487, "last_edit_date": 1467821487, "creation_date": 1467821311, "answer_id": 38228670, "question_id": 38228450, "link": "https://stackoverflow.com/questions/38228450/what-is-the-cause-of-the-difference-in-return-value-between-linux-and-windows-an/38228670#38228670", "title": "What is the cause of the difference in return value between Linux and Windows and how to fix it?", "body": "<p>You have got a copy constructor that does <em>nothing</em>.</p>\n\n<pre><code>cls::cls(const cls&amp; origin){}\n</code></pre>\n\n<p>GCC probably does <a href=\"https://en.wikipedia.org/wiki/Copy_elision\" rel=\"nofollow\">copy elision</a> in the lines <code>cls tt = func();</code> and <code>cls detector = builder-&gt;build();</code> and it magically works. Maybe VS will do it too once you enable optimizations. Personally, I'd say it's a bug in your code. If you have a copy constructor, then copy the origin object.</p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 5126849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00fea1a9abb16a3075e0006e6b9f4cf3?s=128&d=identicon&r=PG&f=1", "display_name": "wanglinski", "link": "https://stackoverflow.com/users/5126849/wanglinski"}, "edited": false, "score": 0, "creation_date": 1467873210, "post_id": 38231028, "comment_id": 63898664, "body": "Thanks a lot! I got the values while debugging. Your analysis is really helpful:)"}], "tags": [], "owner": {"reputation": 71, "user_id": 4838296, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Enrique Perez-Terron", "link": "https://stackoverflow.com/users/4838296/enrique-perez-terron"}, "is_accepted": false, "score": 1, "last_activity_date": 1467829113, "creation_date": 1467829113, "answer_id": 38231028, "question_id": 38228450, "link": "https://stackoverflow.com/questions/38228450/what-is-the-cause-of-the-difference-in-return-value-between-linux-and-windows-an/38231028#38231028", "title": "What is the cause of the difference in return value between Linux and Windows and how to fix it?", "body": "<p>I tried your code using Visual Studio 2015, and found that the destructor ~cls() executes twice. It looks like a bug to me, but I am not an expert.</p>\n\n<p>By \"deconstructed\", do you mean \"destructed\"?</p>\n\n<p>I compiled compiled the code using Gnu g++ under Windows 10 64-bit,  under cygwin. This time the destructor ran only once.</p>\n\n<p>I seem to remember that when a function constructs an object and returns it (like your \"cls tt = func();\", the compiler may chose to construct the object in the final location, that is, on the stack frame of the calling function. I don't know if this behavior is mandatory.</p>\n\n<p>Now i am trying again... In Visual Studio, I am setting a breakpoint at the line reading OUT(\"~cls()\"); (cls.cpp:12). The first time the breakpoint is hit, the stack trace is:</p>\n\n<pre><code>cls::~cls() (line 12)\nfunc() (line 9, \"return detector;\")\nmain() (line 13, \"cls tt = func();\")\n</code></pre>\n\n<p>Clicking \"continue\" in the debugger, hitting the breakpoint again. Now the stack is: </p>\n\n<pre><code>cls::~cls() (line 12)\nmain() (line 14, \"return 0\").\n</code></pre>\n\n<p>So it seems that Visual Studio does construct -- and destruct -- the object in func()'s stack frame, copy the object to main()'s stack frame, call the destructor on \"tt\" as func() exits, and call the destructor again on the second instance when main() exits.  Never mind that the assignment operator is private, and the copy constructor is an empty function.</p>\n\n<p>Unfortunately, I am no expert and cannot say how this compares to the standard(s).</p>\n\n<p>You say that using one compiler, \"detector\" has values \"t_name\" and 5, but using Visual Studio the values are \"\" and 0. (How do you know? The code does not output values, so I guess you may have had more OUT's in your code...)</p>\n\n<p>My guess is that the compiler used the empty copy constructor (cls.cpp line 3), and so the copy in main()'s stack frame (\"detector\") had no data copied into it. The lesson is, perhaps, that you cannot force Visual Studio to behave cleverly just by denying it to behave stupidly. If VS does not have the ability to construct func()'s \"tt\" variable inside main()'s \"detector\" variable, it does not reluctantly acquire this ability when you lock down the assignment operator.</p>\n\n<p>Perhaps we both should read up on when exactly the assignment operator is used, and when the copy constructor is used. It seems like Visual studio interpreted your code </p>\n\n<pre><code>cls tt = func();\n</code></pre>\n\n<p>as if it were </p>\n\n<pre><code>cls tt( func() );\n</code></pre>\n\n<p>using the copy constructor to initialize tt. Perhaps the assignment operator is used only when the destination is an object that has already been properly initialized.</p>\n"}], "owner": {"reputation": 118, "user_id": 5126849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00fea1a9abb16a3075e0006e6b9f4cf3?s=128&d=identicon&r=PG&f=1", "display_name": "wanglinski", "link": "https://stackoverflow.com/users/5126849/wanglinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38228670, "answer_count": 2, "score": 0, "last_activity_date": 1467829113, "creation_date": 1467820695, "question_id": 38228450, "link": "https://stackoverflow.com/questions/38228450/what-is-the-cause-of-the-difference-in-return-value-between-linux-and-windows-an", "title": "What is the cause of the difference in return value between Linux and Windows and how to fix it?", "body": "<p>Here is the code that I tried to return an object of a class. but I got different results from CentOs (gcc) and visual studio 2013. In the cls.cpp, with gcc, it works well, I get the results such as detector.name = \"t_name\", detector.stride = 5. but the values in the detector are \"\" and 0 under vs2013. It seems in vs2013 the cls object is deconstructed. \nWhy I got the different returns? and how to make it works well under visual studio? Thanks a lot.</p>\n\n<p>cls.h</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#define OUT(x)  do{ std::cout &lt;&lt; x &lt;&lt; std::endl;}while(0)\ntemplate &lt;class T&gt; class IBuilder{\npublic:\n    virtual ~IBuilder(){};\n    virtual T build() = 0;\n};\nclass cls\n{\npublic:\n    ~cls();\n    cls(const cls&amp; origin);\n    class Builder : public IBuilder&lt;cls&gt;{\n    private:\n        std::string _name;\n        int _stride = 4;        \n        double _cascThr = -1;\n    public:\n        Builder(const std::string name);\n        ~Builder();\n        Builder* stride(int s);\n        Builder* cascThr(double t);\n        cls build();\n        friend cls;\n    };\nprivate:\n    std::string _name;\n    int _stride;\n    double _cascThr;\n    Builder* _builder;\n    cls(Builder* builder);\n    cls&amp; operator=(const cls&amp;);//prevent the compiler to generate copying assignment\n};\n</code></pre>\n\n<hr>\n\n<p>cls.cpp</p>\n\n<pre><code>#include \"cls.h\"\nusing namespace std;\ncls::cls(const cls&amp; origin){}\ncls::cls(cls::Builder* builder) {\n    this-&gt;_builder = builder;\n    OUT(\"cls(Builder*)\");\n    this-&gt;_name = builder-&gt;_name;   \n    this-&gt;_stride = builder-&gt;_stride;   \n    this-&gt;_cascThr = builder-&gt;_cascThr; \n}\ncls::   ~cls(){ \n    OUT(\"~cls()\");\n}\ncls::Builder::Builder(const string name){\n    OUT(\"Builder(string)\");\n    this-&gt;_name = name;\n}\ncls::Builder::~Builder(){\n    OUT(\"~Builder() \");\n}\ncls::Builder* cls::Builder::stride(int s){\n    this-&gt;_stride = s;\n    return this;\n}\ncls::Builder* cls::Builder::cascThr(double t){\n    this-&gt;_cascThr = t;\n    return this;\n}\ncls cls::Builder::build(){\n    OUT(\"Build ACF Detector From Builder\");\n    return cls(this);\n}\n</code></pre>\n\n<hr>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"cls.h\"\nusing namespace std;\ncls func(){\n    cls::Builder* builder = NULL;\n    builder = new cls::Builder(\"t_name\");\n    builder-&gt;stride(5);\n    builder-&gt;cascThr(1.0);\n    cls detector = builder-&gt;build();\n    return detector;\n}\nint _tmain(int argc, _TCHAR* argv[])\n{\n    cls tt = func(); // here I got different answers.\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1467820708, "post_id": 38228357, "comment_id": 63878772, "body": "I am not sure but is this a valid <code>c++</code> tag or it should be removed?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 3, "creation_date": 1467820735, "post_id": 38228357, "comment_id": 63878792, "body": "@FirstStep: Why? This is C++."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1467820783, "post_id": 38228357, "comment_id": 63878827, "body": "Did you try the same using a <code>static_cast&lt;double&gt;(a)</code>?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1467821080, "post_id": 38228357, "comment_id": 63879016, "body": "I&#39;m a little surprised it&#39;s an <i>error</i> and not a <i>warning</i>. <code>gcc</code> reports it as a warning."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1467821470, "post_id": 38228357, "comment_id": 63879231, "body": "@lurker According to the standard the program is ill-formed. An error is better than a warning for this. With a warning the compiler has to go ahead anyway and guess what the programmer meant (maybe just do the cast with narrowing as defined in other parts of the standard?), and what code to generate to detect or recover if the conversion is out of bounds."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1467825786, "post_id": 38228357, "comment_id": 63881797, "body": "@MikeVine that makes sense. I was more struck by the inconsistency in <code>gcc</code>, and <code>gcc</code> is what I&#39;m used to using."}], "owner": {"reputation": 21, "user_id": 6534548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1238d2d73eb6f0ce7ea3aac85da18179?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u043b\u0430\u0431\u043b\u0430\u0431\u043b\u0430", "link": "https://stackoverflow.com/users/6534548/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%bb%d0%b0%d0%b1%d0%bb%d0%b0%d0%b1%d0%bb%d0%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1467820775, "answer_count": 0, "score": 2, "last_activity_date": 1467820998, "creation_date": 1467820419, "last_edit_date": 1467820998, "question_id": 38228357, "link": "https://stackoverflow.com/questions/38228357/char-to-double-conversion", "closed_reason": "Duplicate", "title": "char to double conversion", "body": "<p>I'm using visual studio 15, and it generates an error when compiling code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    char a = 1;\n    double i{ a };\n    cout &lt;&lt; i;\n    return 0;\n}\n</code></pre>\n\n<p>The error is:</p>\n\n<blockquote>\n  <p>error C2397: conversion from 'char' to 'double' requires a narrowing conversion</p>\n</blockquote>\n\n<p>I can not understand why, because in this conversion I think there is no narrowing.</p>\n"}, {"tags": ["c++", "vector", "find"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1467820385, "post_id": 38228293, "comment_id": 63878545, "body": "Perhaps took at <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\">std::find_if</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1467820372, "creation_date": 1467820372, "answer_id": 38228338, "question_id": 38228293, "link": "https://stackoverflow.com/questions/38228293/finding-an-object-in-a-vector-with-multiple-requirements/38228338#38228338", "title": "Finding An Object In a Vector, with multiple requirements", "body": "<p>You can call <code>find_if</code> with a functor or lambda that tests all the conditions you please.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/algorithm/find</a></p>\n"}, {"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1467820639, "creation_date": 1467820639, "answer_id": 38228434, "question_id": 38228293, "link": "https://stackoverflow.com/questions/38228293/finding-an-object-in-a-vector-with-multiple-requirements/38228434#38228434", "title": "Finding An Object In a Vector, with multiple requirements", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow\"><code>std::find_if</code></a> with a lambda</p>\n\n<pre><code>Object foo;                // object you want to compare against\nstd::vector&lt;Object&gt; objs;  // objects you want to look through\nauto itFound = std::find_if(begin(objs),\n                            end(objs),\n                            [&amp;foo](Object const&amp; obj)\n                            {\n                                return obj.x &gt; foo.x &amp;&amp; obj.y &gt; foo.y;\n                            });\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4412983, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4f7a049e2cd46a71a8b004bf1fce5d3?s=128&d=identicon&r=PG&f=1", "display_name": "William Barnes", "link": "https://stackoverflow.com/users/4412983/william-barnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38228434, "answer_count": 2, "score": 0, "last_activity_date": 1467820639, "creation_date": 1467820234, "question_id": 38228293, "link": "https://stackoverflow.com/questions/38228293/finding-an-object-in-a-vector-with-multiple-requirements", "title": "Finding An Object In a Vector, with multiple requirements", "body": "<p>I have created a vector of objects, and the objects have multiple private variables:</p>\n\n<pre><code>   Int x, y, id\n</code></pre>\n\n<p>Now i wish to iterate through this vector, and find the object just before my x and y values. The smallest value for which x &amp; y are greater.</p>\n\n<p>I've seen the vector \"find\" command. Could this accept multiple arguments in it's final field... Something like</p>\n\n<pre><code>(Vector.begin, vector.end, (x &gt; object.x &amp;&amp; y &gt; object.y)\n</code></pre>\n\n<p>I've been messing around with it and googling to find a solution but I've not seen any examples involving multiple arguments in the last field of the find command?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 258, "user_id": 6310670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3846db42183b24ad30e14262e970e23c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Barnes", "link": "https://stackoverflow.com/users/6310670/alexei-barnes"}, "edited": false, "score": 4, "creation_date": 1467820344, "post_id": 38228280, "comment_id": 63878503, "body": "I don&#39;t know about &#39;wrong&#39;, if your aim is to write good code this is awful, but if your aim is to frustrate people 10 years down the line trying to maintain your code this is perfect, ideal, fantastic!"}, {"owner": {"reputation": 23041, "user_id": 61605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d69da0263a53dc51dcd53dae788ef1b?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/61605/ryan"}, "reply_to_user": {"reputation": 258, "user_id": 6310670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3846db42183b24ad30e14262e970e23c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Barnes", "link": "https://stackoverflow.com/users/6310670/alexei-barnes"}, "edited": false, "score": 0, "creation_date": 1467820431, "post_id": 38228280, "comment_id": 63878582, "body": "Point taken... I can&#39;t imagine why this did not cause problems years ago."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 2, "creation_date": 1467820691, "post_id": 38228280, "comment_id": 63878758, "body": "... fact is, it probably <i>did.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467820272, "creation_date": 1467820272, "answer_id": 38228308, "question_id": 38228280, "link": "https://stackoverflow.com/questions/38228280/deallocating-vector-of-primitives/38228308#38228308", "title": "Deallocating vector of primitives", "body": "<p>At least as you've shown it here, it's just plain wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1467820302, "creation_date": 1467820302, "answer_id": 38228317, "question_id": 38228280, "link": "https://stackoverflow.com/questions/38228280/deallocating-vector-of-primitives/38228317#38228317", "title": "Deallocating vector of primitives", "body": "<p>It's certainly not standard C++.</p>\n\n<p>A <code>delete</code> should only be used if <code>new</code> is used. Else the behaviour is <em>undefined</em>.</p>\n"}], "owner": {"reputation": 23041, "user_id": 61605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d69da0263a53dc51dcd53dae788ef1b?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/61605/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 38228317, "answer_count": 2, "score": 1, "last_activity_date": 1467820302, "creation_date": 1467820199, "question_id": 38228280, "link": "https://stackoverflow.com/questions/38228280/deallocating-vector-of-primitives", "title": "Deallocating vector of primitives", "body": "<p>I'm digging through some ancient code, originally built in C++ Builder 6. Littered through-out the code base is the following pattern, which, IMHO, segfaults as it should:</p>\n\n<pre><code>vector&lt;int&gt; x;\ntry {\n    ... some run of the mill vector manipulation\n} __finally {\n      delete &amp;x;\n}\n</code></pre>\n\n<p>The <code>delete &amp;x;</code> is really odd. As I understand it, the <code>vector&lt;int&gt;</code> will only exist for the lifetime of the function it is contained within, so no need to call <code>delete</code> on it.</p>\n\n<p>Is there some sensible motivation behind this pattern, or is it just plain wrong?</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": false, "score": 2, "last_activity_date": 1467823079, "last_edit_date": 1467823079, "creation_date": 1467822698, "answer_id": 38229115, "question_id": 38228211, "link": "https://stackoverflow.com/questions/38228211/qt-editor-smart-buttons/38229115#38229115", "title": "QT Editor smart buttons", "body": "<p><a href=\"http://doc.qt.io/qt-5/qclipboard.html#signals\" rel=\"nofollow\">http://doc.qt.io/qt-5/qclipboard.html#signals</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qclipboard.html#details\" rel=\"nofollow\">http://doc.qt.io/qt-5/qclipboard.html#details</a></p>\n\n<p>Create connections from the <code>QClipboard</code> object to a handler slots in your toolbar/mainwindow class.  And then in the handler slot do the logic you want to happen to your toolbar buttons.</p>\n\n<p>For example:</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qclipboard.html#dataChanged\" rel=\"nofollow\">http://doc.qt.io/qt-5/qclipboard.html#dataChanged</a></p>\n\n<pre><code>// in your constructor after creating your buttons:\nQObject::connect(qApp-&gt;clipboard(), SIGNAL(dataChanged()), \n    this, SLOT(onClipboardDataChanged()));\n\n// and then make another connection for the other relevant clipboard signal...\n// selectionChanged()\n</code></pre>\n\n<p>Then later in in your slot:</p>\n\n<pre><code>void MainWindow::onClipboardDataChanged()\n{\n     const QClipboard *clipboard = QApplication::clipboard();\n     const QMimeData *mimeData = clipboard-&gt;mimeData();\n\n     pasteact-&gt;setEnabled(mimeData-&gt;hasText());\n     // or you could check the length of the text to see if it is non zero.\n}\n</code></pre>\n\n<p>To disable/renable all the buttons at once, disable the parent object instead.</p>\n\n<pre><code>editToolbar-&gt;setEnabled(false);\n//... after some period of time or transactions...\neditToolbar-&gt;setEnabled(true);\n</code></pre>\n\n<p>But this probably won't disable the built-in accelerators for Copy, Cut and Paste.  To kill those keyboard shortcuts, too, you may need to put an event filter on your app.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/accelerators.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/accelerators.html</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qobject.html#eventFilter\" rel=\"nofollow\">http://doc.qt.io/qt-5/qobject.html#eventFilter</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qobject.html#installEventFilter\" rel=\"nofollow\">http://doc.qt.io/qt-5/qobject.html#installEventFilter</a></p>\n\n<p>Hope that helps.</p>\n\n<p>PS.  I haven't tested this chunk of code.  Read the docs.  Good luck.</p>\n"}], "owner": {"reputation": 293, "user_id": 2947462, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/6JzsQ.jpg?s=128&g=1", "display_name": "Junior", "link": "https://stackoverflow.com/users/2947462/junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467823079, "creation_date": 1467820013, "question_id": 38228211, "link": "https://stackoverflow.com/questions/38228211/qt-editor-smart-buttons", "title": "QT Editor smart buttons", "body": "<p>I have a toolbar with buttons: undo, redo, cut, copy, paste, like below:</p>\n\n<pre><code>editmenu = menuBar()-&gt;addMenu(QObject::tr(\"&amp;Edit\"));\nundoact = editmenu-&gt;addAction(QIcon(\":images/undo.png\"), QObject::tr(\"&amp;Undo\"));\nQObject::connect(editwin, SIGNAL(undoAvailable(bool)), undoact, SLOT(setEnabled(bool)));\nQObject::connect(undoact, SIGNAL(triggered()), editwin, SLOT(undo()));\nundoact-&gt;setShortcuts(QKeySequence::keyBindings(QKeySequence::Undo));\nundoact-&gt;setEnabled(false);\nredoact = editmenu-&gt;addAction(QIcon(\":images/redo.png\"), QObject::tr(\"&amp;Redo\"));\nQObject::connect(editwin, SIGNAL(redoAvailable(bool)), redoact, SLOT(setEnabled(bool)));\nQObject::connect(redoact, SIGNAL(triggered()), editwin, SLOT(redo()));\nredoact-&gt;setShortcuts(QKeySequence::keyBindings(QKeySequence::Redo));\nredoact-&gt;setEnabled(false);\neditmenu-&gt;addSeparator();\ncutact = editmenu-&gt;addAction(QIcon(\":images/cut.png\"), QObject::tr(\"Cu&amp;t\"));\ncutact-&gt;setShortcuts(QKeySequence::keyBindings(QKeySequence::Cut));\ncutact-&gt;setEnabled(false);\ncopyact = editmenu-&gt;addAction(QIcon(\":images/copy.png\"), QObject::tr(\"&amp;Copy\"));\ncopyact-&gt;setShortcuts(QKeySequence::keyBindings(QKeySequence::Copy));\ncopyact-&gt;setEnabled(false);\npasteact = editmenu-&gt;addAction(QIcon(\":images/paste.png\"), QObject::tr(\"&amp;Paste\"));\npasteact-&gt;setShortcuts(QKeySequence::keyBindings(QKeySequence::Paste));\n</code></pre>\n\n<p>I want:</p>\n\n<ol>\n<li>Paste button to be enabled only if clipboard contain text</li>\n<li>For some reason, I need to disable all buttons for a limitted period of time. After this I want to enable all buttons. But when I enable, each button to be enabled/disabled according to his condition (eg. undo button to be enabled only if there is something to undo, paste button to be enabled only if there is some text that can be pasted ...)</li>\n</ol>\n\n<p>What do you advise me to do? What is the smartest / simplest method?</p>\n"}, {"tags": ["python", "c++", "boost-python"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "edited": false, "score": 0, "creation_date": 1467832363, "post_id": 38228170, "comment_id": 63885601, "body": "Does this have anything to do with an active object? If so, you can read this: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms221551%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1474288767, "post_id": 38238013, "comment_id": 66456460, "body": "is there a good way to prevent the user from just doing: <code>spam = example.Spam(42)</code> and inadvertently leaking?"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "reply_to_user": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1474299603, "post_id": 38238013, "comment_id": 66463866, "body": "@SamKellett Consider using an RAII class to manage the underlying resource, and deferring resource acquisition to <code>__enter__</code> instead of the class constructor.  In the above example, the underlying resource is only acquired within <code>Spam.__enter__()</code>, and as <code>std::shared_ptr</code> is used, the resource gets explicitly release in either <code>Spam.__exit__</code>  or when Python destroys the <code>spam</code> object."}, {"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1474372110, "post_id": 38238013, "comment_id": 66495298, "body": "but that won&#39;t stop the user from being able to do <code>spam = example.Spam(42)</code>, will it? won&#39;t it just give them a dangling reference / nullptr?"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "reply_to_user": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1474375300, "post_id": 38238013, "comment_id": 66497392, "body": "@Sam It will not stop the user from being able to do that.  The proxy functions would need to implement whatever error handling or lazy-initialization is needed before invoking the delegate."}], "tags": [], "owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "is_accepted": true, "score": 4, "last_activity_date": 1474300007, "last_edit_date": 1474300007, "creation_date": 1467868895, "answer_id": 38238013, "question_id": 38228170, "link": "https://stackoverflow.com/questions/38228170/c-destructor-calling-of-boostpython-wrapped-objects/38238013#38238013", "title": "C++ destructor calling of boost::python wrapped objects", "body": "<p>Boost.Python makes the guarantee that if the Python object has ownership of the wrapped C++ object, then when the Python object is deleted, the wrapped C++ object will be deleted.  The Python object's lifetime is dictated by Python, wherein when an object\u2019s reference count reaches zero, the object <em>may</em> be immediately destroyed.  For non-simplistic cases, such as cyclic references, the objects will be managed by the garbage collector, and <em>may</em> be destroyed before the program exits.</p>\n\n<p>One Pythonic solution may be to expose a type that implements the <a href=\"https://docs.python.org/2/library/stdtypes.html#context-manager-types\" rel=\"nofollow\">context manager protocol</a>.  The content manager protocol is made up of a pair of methods: one which will be invoked when entering a runtime context, and one which will be invoked when exiting a runtime context.  By using a context manager, one could control the scope in which a file is open.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; with MyBoostPythonObject() as A:  # opens file.\n...     A.write(...)                  # file remains open while in scope.\n...                                   # A destroyed once context's scope is exited.\n</code></pre>\n\n<hr>\n\n<p>Here is an example <a href=\"http://coliru.stacked-crooked.com/a/245d68e4bcea05f0\" rel=\"nofollow\">demonstrating</a> exposing a RAII-type class to Python as a context manager:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/python.hpp&gt;\n#include &lt;iostream&gt;\n\n// Legacy API.\nstruct spam\n{\n  spam(int x)    { std::cout &lt;&lt; \"spam(): \" &lt;&lt; x &lt;&lt; std::endl;   }\n  ~spam()        { std::cout &lt;&lt; \"~spam()\" &lt;&lt; std::endl;         }\n  void perform() { std::cout &lt;&lt; \"spam::perform()\" &lt;&lt; std::endl; }\n};\n\n/// @brief Python Context Manager for the Spam class.\nclass spam_context_manager\n{\npublic:\n\n  spam_context_manager(int x): x_(x) {}\n\n  void perform() { return impl_-&gt;perform(); }\n\n// context manager protocol\npublic:\n\n  // Use a static member function to get a handle to the self Python\n  // object.\n  static boost::python::object enter(boost::python::object self)\n  {\n    namespace python = boost::python;\n    spam_context_manager&amp; myself =\n      python::extract&lt;spam_context_manager&amp;&gt;(self);\n\n    // Construct the RAII object.\n    myself.impl_ = std::make_shared&lt;spam&gt;(myself.x_);\n\n    // Return this object, allowing caller to invoke other\n    // methods exposed on this class.\n    return self;\n  }\n\n  bool exit(boost::python::object type,\n            boost::python::object value,\n            boost::python::object traceback)\n  {\n    // Destroy the RAII object.\n    impl_.reset();\n    return false; // Do not suppress the exception.\n  }\nprivate:\n  std::shared_ptr&lt;spam&gt; impl_;\n  int x_;\n};\n\n\nBOOST_PYTHON_MODULE(example)\n{\n  namespace python = boost::python;\n  python::class_&lt;spam_context_manager&gt;(\"Spam\", python::init&lt;int&gt;())\n    .def(\"perform\", &amp;spam_context_manager::perform)\n    .def(\"__enter__\", &amp;spam_context_manager::enter)\n    .def(\"__exit__\", &amp;spam_context_manager::exit)\n    ;\n}\n</code></pre>\n\n<p>Interactive usage:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; import example\n&gt;&gt;&gt; with example.Spam(42) as spam:\n...     spam.perform()\n...\nspam(): 42\nspam::perform()\n~spam()\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2170155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2808a186658fb18d835829d7ca851d?s=128&d=identicon&r=PG", "display_name": "ovga", "link": "https://stackoverflow.com/users/2170155/ovga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 1, "accepted_answer_id": 38238013, "answer_count": 1, "score": 2, "last_activity_date": 1474300007, "creation_date": 1467819905, "question_id": 38228170, "link": "https://stackoverflow.com/questions/38228170/c-destructor-calling-of-boostpython-wrapped-objects", "title": "C++ destructor calling of boost::python wrapped objects", "body": "<p>Does boost::python provide any guarantee when the C++ destructor of a\nwrapped object is called considering the moment of reaching the zero\nreference count of the corresponding python object? </p>\n\n<p>I am concerned about a C++ object that opens a file for writing and performs the file closing in its destructor. Is it guaranteed that the file is written when all python references to the object are deleted or out of scope?</p>\n\n<p>I mean:</p>\n\n<pre><code>A=MyBoostPythonObject()\ndel A # Is the C++ destructor of MyBoostPythonObject called here?\n</code></pre>\n\n<p>My experience suggests that the destructor is always called at this point but could not find any guarantee for this.</p>\n"}, {"tags": ["c++", "stdbind"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 4, "creation_date": 1467820104, "post_id": 38228160, "comment_id": 63878348, "body": "<i>&quot;I cannot use lambda&quot;</i>, can you elaborate on that? and where is the parameter pack you mention ?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467820127, "post_id": 38228160, "comment_id": 63878358, "body": "@NathanOliver you forgot to call <code>foo</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1467820289, "post_id": 38228160, "comment_id": 63878455, "body": "@PiotrSkotnicki Good point.  I did that and it fails spectacularly."}, {"owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1467820835, "post_id": 38228160, "comment_id": 63878853, "body": "@PiotrSkotnicki, because I have to pass the arguments from this thread to another running (but suspended) thread. There is no way to store parameter pack in capture list. If I store  parameter pack inside lambda (not capture list), to make it fast, I must capture by reference, but this makes another problem."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1467821229, "post_id": 38228160, "comment_id": 63879091, "body": "&quot;<i>There is no way to store parameter pack in capture list.</i>&quot;, there is, in a tuple"}, {"owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1467821383, "post_id": 38228160, "comment_id": 63879177, "body": "@PiotrSkotnicki, I am not familiar with tuple, but I will give it a shot, thank you for your keyword."}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "edited": false, "score": 0, "creation_date": 1467821787, "post_id": 38228571, "comment_id": 63879404, "body": "Great. But I may not use this solution. Thanks."}], "tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": false, "score": 1, "last_activity_date": 1467821029, "creation_date": 1467821029, "answer_id": 38228571, "question_id": 38228160, "link": "https://stackoverflow.com/questions/38228160/c-stdbind-call-operator-with-perfect-forwarding/38228571#38228571", "title": "C++ - std::bind call operator() with perfect forwarding", "body": "<p>You can create wrapper which will be convertible to the rvalue reference (like <code>reference_wrapper</code>/l-value references) and use it with <code>bind</code>:</p>\n\n<p>It cal look like that:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstruct A{};\n\nvoid test(A &amp;&amp;){ std::cout &lt;&lt; \"Works!\\n\"; }\n\ntemplate &lt;typename T&gt;\nstruct rvalue_holder\n{\n    T value;\n    explicit rvalue_holder(T&amp;&amp; arg): value(arg) {}\n    operator T&amp;&amp;()\n    {\n        return std::move(value);\n    }\n};\n\ntemplate &lt;typename T&gt;\nrvalue_holder&lt;T&gt; rval(T &amp;&amp; val)\n{\n    return rvalue_holder&lt;T&gt;(std::move(val));\n}\n\nint main()\n{\n    A a;\n    test(std::move(a));    //work\n    auto foo = std::bind(test, rval(std::move(a)));   //works\n    foo();\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/56220bc89a32c860\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/56220bc89a32c860</a></p>\n\n<p>Note: both <code>rvalue_holder</code> and especially <code>rval</code> need further work to ensure efficiency, robustness and desired behavior in all cases.</p>\n"}], "owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467821029, "creation_date": 1467819874, "last_edit_date": 1467820405, "question_id": 38228160, "link": "https://stackoverflow.com/questions/38228160/c-stdbind-call-operator-with-perfect-forwarding", "title": "C++ - std::bind call operator() with perfect forwarding", "body": "<p>I have to store arguments (parameter pack), and pass the arguments to another function.<br>\nAs a result, I cannot use lambda. And a good choice is std::bind.<br><br>\nBut for this code</p>\n\n<pre><code>struct A{};\n\nvoid test(A &amp;&amp;){}\n\nint main()\n{\n    A a;\n    test(move(a));    //work\n    bind(test,a)();   //compile fail; copy a to std::bind, pass a to test\n}\n</code></pre>\n\n<p>According to standard, all variables stored in std::bind will be pass as lvalue to function. (The C++ standard doesn't say that, by I think that is what it means.)<br>\nAnd that means I cannot use a function (has rvalue reference in parameter) with std::bind.<br><br>\nOne solution is to change <code>test(A &amp;&amp;)</code> to <code>test(A &amp;)</code>, but this only works for your project (and make it strange while you not only need to call test by std::thread but also need to call test by plain sequential call).<br><br>\nSo, is there any ways to solve this problem?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1467819344, "post_id": 38227957, "comment_id": 63877838, "body": "Is the object you are calling it on <code>const</code> or not?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1467819516, "post_id": 38227957, "comment_id": 63877939, "body": "@Igor: He wouldn&#39;t learn much from simply trying it."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1467819589, "post_id": 38227957, "comment_id": 63877995, "body": "@BenjaminLindley He should try several times.:)"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1467819609, "post_id": 38227957, "comment_id": 63878009, "body": "@BenjaminLindley, why? This is the best and fastest way to learn - execute the code and see what it does. Or maybe its just me?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1467819659, "post_id": 38227957, "comment_id": 63878040, "body": "@Igor The compiler can have a bug.:)"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1467819767, "post_id": 38227957, "comment_id": 63878123, "body": "@Igor: If he simply calls it, he will see either one or the other called, and assume that&#39;s the answer to his question. It&#39;s not though. He will not know why that one was called, and he will not know what situation will cause the other one to be called (or that such a situation even exists)."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1467819702, "creation_date": 1467819702, "answer_id": 38228109, "question_id": 38227957, "link": "https://stackoverflow.com/questions/38227957/c-functions-surcharge-const/38228109#38228109", "title": "C++ functions (surcharge &amp; const)", "body": "<p>Let's expand</p>\n\n<p><code>section(\"database_path\");</code></p>\n\n<p>to the entirely equivalent</p>\n\n<p><code>this-&gt;section(\"database_path\");</code></p>\n\n<p>If <code>this</code> is <code>const</code> (i.e. the method containing the above is marked <code>const</code>), then the <code>const</code> version of the <code>section</code> is called. Else the non-<code>const</code> version is called.</p>\n"}, {"tags": [], "owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "is_accepted": false, "score": 1, "last_activity_date": 1467821657, "creation_date": 1467821657, "answer_id": 38228757, "question_id": 38227957, "link": "https://stackoverflow.com/questions/38227957/c-functions-surcharge-const/38228757#38228757", "title": "C++ functions (surcharge &amp; const)", "body": "<p>It depends on the context. Look at this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string gs;\n\nclass C\n{\n    public:\n        std::string&amp; f(std::string const &amp; s) { gs = \"f()\"; return gs; }\n        std::string&amp; f(std::string const &amp; s) const { gs = \"f() const\"; return gs; }\n\n        std::string a() const\n        {\n            return f(\"s\");\n        }\n\n        std::string b()\n        {\n            return f(\"s\");\n        }\n\n};\n\nint main()\n{\n    C c1;\n    C *c2 = &amp;c1;\n    const C c3;\n    const C&amp; c4 = c1;\n    const C* c5 = &amp;c1;\n    C* const c6 = &amp;c1;\n\n\n    std::cout &lt;&lt; \"c1.a = \" &lt;&lt; c1.a() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c1.b = \" &lt;&lt; c1.b() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c1.f = \" &lt;&lt; c1.f(\"s\") &lt;&lt; std::endl; \n    std::cout &lt;&lt; \"c2-&gt;f = \" &lt;&lt; c2-&gt;f(\"s\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c3.f = \" &lt;&lt; c3.f(\"s\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c4.f = \" &lt;&lt; c4.f(\"s\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c5.f = \" &lt;&lt; c5-&gt;f(\"s\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"c6.f = \" &lt;&lt; c6-&gt;f(\"s\") &lt;&lt; std::endl;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<p>c1.a = f() const                                                                                                                                                                                                                   </p>\n\n<p>c1.b = f()                                                                                                                                                                                                                         </p>\n\n<p>c1.f = f()                                                                                                                                                                                                                         </p>\n\n<p>c2->f = f()                                                                                                                                                                                                                        </p>\n\n<p>c3.f = f() const                                                                                                                                                                                                                   </p>\n\n<p>c4.f = f() const                                                                                                                                                                                                                   </p>\n\n<p>c5.f = f() const                                                                                                                                                                                                                   </p>\n\n<p>c6.f = f()  </p>\n"}], "owner": {"reputation": 211, "user_id": 6474859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68534f8f466c641ac5414904c3614bfa?s=128&d=identicon&r=PG&f=1", "display_name": "superNovice92", "link": "https://stackoverflow.com/users/6474859/supernovice92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467821657, "creation_date": 1467819285, "question_id": 38227957, "link": "https://stackoverflow.com/questions/38227957/c-functions-surcharge-const", "title": "C++ functions (surcharge &amp; const)", "body": "<p>I have the following code </p>\n\n<pre><code>//*********************************************\nSection&amp;\nBasicConfig::section (std::string const&amp; name)\n{\n    return map_[name];\n}\n//*************************************************\nSection const&amp;\nBasicConfig::section (std::string const&amp; name) const\n{\n    static Section none(\"\");\n    auto const iter = map_.find (name);\n    if (iter == map_.end())\n        return none;\n    return iter-&gt;second;\n}\n</code></pre>\n\n<p>if I write : <code>section(\"database_path\");</code></p>\n\n<p>Which script will be executed ?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1467819294, "post_id": 38227890, "comment_id": 63877802, "body": "Have you considered a system where you <i>do</i> control the thread lifetimes, such as a thread-pool where the posted code posts your <code>params</code> to a queue monitored by the pool for work to be dispatched?"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1467819310, "post_id": 38227890, "comment_id": 63877814, "body": "How about dealing with <code>futures</code> ? Do you have C++11 ?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1467819367, "post_id": 38227890, "comment_id": 63877852, "body": "Why not make the <code>thread</code> a member of the <code>Foo</code> class then you always have access to it? A question I have is what do you want to happen if the thread is still executing when <code>HandleEvent</code> function is triggered? You may need data member to track all the outstanding threads ..."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467820032, "post_id": 38227890, "comment_id": 63878291, "body": "@WhozCraig I did try a vector of threads that was declared before the <code>while(1)</code> loop, and each time <code>triggerEvent</code> was &#39;h&#39;, I added a thread to the vector. When the termination event trigger was received, I iterated through the vector and called <code>join()</code> on each thread. The issue with a proper thread pool is that the thread needs to end - the thread function returns."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467820099, "post_id": 38227890, "comment_id": 63878345, "body": "@JamesAdkison <code>HandleEvents</code> is the driving function of the application. It&#39;s running until the application is terminated."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467820375, "post_id": 38227890, "comment_id": 63878534, "body": "@cjclough That&#39;s not a thread pool.  In its simplest form, a set of threads are started, all of them waiting on the queue for work. A thread pool fundamentally is setup as a (usually, but not always fixed) collection of threads that (a) monitor a shared workload resource such as a queue, and (b) upon receiving data from that queue, invoke a work function to process the item just-dequeued. Once finished, the thread returns back to the queue for more work (where it may-well wait if there is none to dispatch). it is much more involved than simply declaring a vector of threads."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467821292, "post_id": 38227890, "comment_id": 63879128, "body": "@WhozCraig Ah, I understand now, thank you. I think this might work. My only concern is that my &quot;item&quot; is a series of files saved to disk, the range of which is determined and changeable by the end user."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "edited": false, "score": 0, "creation_date": 1467832610, "post_id": 38227890, "comment_id": 63885726, "body": "@cjclough Instead of using a break statement, try using a goto statement. That may allow you to continue access to the thread."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "edited": false, "score": 0, "creation_date": 1467834346, "post_id": 38227890, "comment_id": 63886640, "body": "@code0 <code>goto</code> is terrible practice, and <code>switch</code> cases have their own scope."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "edited": false, "score": 0, "creation_date": 1467835996, "post_id": 38227890, "comment_id": 63887514, "body": "@cjclough If used wisely and infrequently (to know exactly where it is in the program in case problems arise), it is a simple and easy way to jump around a program efficiently. I like this explanation: <a href=\"https://www.researchgate.net/post/What_is_the_best_alternatives_for_goto_statements_in_C\" rel=\"nofollow noreferrer\">researchgate.net/post/&hellip;</a> As for the switch statement scope problem, why not use if-else statements? Just using this might solve your problem because its avoiding the local scope of the switch statement."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "edited": false, "score": 0, "creation_date": 1467837226, "post_id": 38227890, "comment_id": 63888189, "body": "@code0 Point taken regarding <code>goto</code>, but if-else statements have their own scope as well. You cannot access a thread declared in <code>if (triggerEvent == &#39;h&#39;)</code> outside of that block."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6054931"}, "edited": false, "score": 0, "creation_date": 1467846632, "post_id": 38227890, "comment_id": 63892041, "body": "@cjclough That&#39;s a piece of information that I haven&#39;t learned at all in the time I&#39;ve been programming. Good to know."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "edited": false, "score": 0, "creation_date": 1467905475, "post_id": 38239385, "comment_id": 63920286, "body": "Awesome answer. Works great. Thanks for the clarification on <code>detach</code> also."}], "tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": true, "score": 1, "last_activity_date": 1467875731, "last_edit_date": 1467875731, "creation_date": 1467875128, "answer_id": 38239385, "question_id": 38227890, "link": "https://stackoverflow.com/questions/38227890/threading-in-object-oriented-event-driven-application/38239385#38239385", "title": "Threading in object-oriented, event-driven application", "body": "<p>You could use a <a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow\"><code>std::map</code></a> (or one of the other similar containers):</p>\n\n<pre><code>class Foo\n{\n    bool HandleEvents();\n    std::map&lt;ThingMaker*, std::thread&gt; m_map;\n};\n\nbool Foo::HandleEvents()\n{\n    while (1)\n    {\n        switch (triggerEvent)\n        {\n            case 'h':\n            {\n                thingMaker = new ThingMaker(params);\n                m_map[thingMaker] = std::thread(function_ptr, thingMaker);\n            } break;\n            case 't': // termination event trigger\n            {\n                m_map[thingMaker].second.join();\n                m_map.erase(thingMaker);\n                delete thingMaker;\n            } break;\n            case ...: return true;\n            default: break;\n        }\n    }\n}\n</code></pre>\n\n<p>Since this obviously isn't your full code you'd have to adjust the above code to fit your needs, but you could swap the map's key/value in the template, or use the thread ID instead if that would make more sense (e.g. <code>std::map&lt;std::thread::id, ThingMaker*&gt;</code>, etc.), but something like a <code>map</code> avoids iterating over an array and <code>join</code>ing on each thread or having to implement a full thread pool implementation if you don't necessarily need one.</p>\n\n<p><b>Side note</b>: the use of <a href=\"http://en.cppreference.com/w/cpp/thread/thread/detach\" rel=\"nofollow\"><code>detach</code></a> is not bad, in fact it's quite useful; detaching a thread signals to the kernel that the thread can be \"cleaned up\" as soon as it's done executing (which releases certain resources and handles). Calling <code>detach</code> on a thread is useful when you know you will no longer need access to the underlying thread handle (like in an extremely short lived thread). It's neither bad nor good, simply a tool to utilize (like the infamous <code>goto</code> statement).</p>\n\n<p>Hope that can help.</p>\n"}], "owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 38239385, "answer_count": 1, "score": 1, "last_activity_date": 1467875731, "creation_date": 1467819070, "last_edit_date": 1495541296, "question_id": 38227890, "link": "https://stackoverflow.com/questions/38227890/threading-in-object-oriented-event-driven-application", "title": "Threading in object-oriented, event-driven application", "body": "<p>I need to spawn a thread when a certain trigger event is received inside of a class Foo. The trigger event is received by a Winsock server class that has a reference to the variable <code>triggerEvent</code>.</p>\n\n<pre><code>bool Foo::HandleEvents()\n{\n    while (1)\n    {\n        // Other things are done at the top of this loop\n\n        switch (triggerEvent)\n        {\n            case 'h':\n            {\n                // I instantiate an object here to do \n                // what I need to do in the thread.\n                // I use a pointer that is a private\n                // member of Foo.\n                thingMaker = new ThingMaker(params);\n\n                // Spawn a new thread here calling a\n                // function of ThingMaker and using thingMaker\n                break;\n            }\n            case ...: return true;\n            default: break;\n        }\n    }\n}\n</code></pre>\n\n<p>Since the thread is local to its case in the <code>switch</code>, I lose access to it on <code>break</code>. I can't call <code>join()</code> because I'm dealing with real-time processing and cannot wait for the thread to finish unless I know it's already done. </p>\n\n<p>I recently asked a question about threading <a href=\"https://stackoverflow.com/questions/38110434/starting-a-thread-from-a-member-function-while-inside-another-classs-member-fun\">here</a> regarding the same application and was told <code>detach()</code> is bad practice; I also think my question was too vague as the solution offered ended up not fitting my needs and my application has since changed in architecture.</p>\n\n<p>I have also tried to encapsulate the thread in short-life manager class that creates instances of ThingMaker but to no avail. </p>\n\n<p>How do I go about this? I suspect my main issue is scope, but my options are limited. <code>Foo::HandleEvents()</code> cannot be delayed at all or else I lose critical data.</p>\n"}, {"tags": ["c++", "xps", "xpsdocument"], "comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1467821794, "post_id": 38227750, "comment_id": 63879408, "body": "Isn&#39;t the first value in figure-&gt;SetrSegments the number of segments? I&#39;m not sure, but is the arc considered a single segment or should you provide the number of line sgments which form an approximation of the arc?"}], "owner": {"reputation": 541, "user_id": 2329332, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d7b5a7c016b4c2a6f3a95f3d40ab3b1b?s=128&d=identicon&r=PG", "display_name": "Zheden", "link": "https://stackoverflow.com/users/2329332/zheden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467819742, "creation_date": 1467818648, "last_edit_date": 1467819742, "question_id": 38227750, "link": "https://stackoverflow.com/questions/38227750/draw-circle-in-xps-document-api", "title": "draw circle in XPS document API", "body": "<p>How can I draw a circle with XPS document API?</p>\n\n<p>I use following code, bit the circle is not drawn at all if start point and end point of circle is same. It draws \"the arc of angle zero instead\"..</p>\n\n<pre><code>XPS_POINT startPoint = { 500, 500};\n\nhr = xpsFactory-&gt;CreateGeometryFigure(&amp;startPoint, &amp;figure);\nXPS_SEGMENT_TYPE segmentTypes[1] = {\n    XPS_SEGMENT_TYPE_ARC_LARGE_COUNTERCLOCKWISE\n};\n\n\n//  x - coordinate of the arc's end point.\n//  y - coordinate of the arc's end point.\n//  Length of the ellipse's radius along the x-axis.\n//  Length of the ellipse's radius along the y-axis.\n//  Rotation angle.\nFLOAT segmentData[5] = {\n     startPoint.x, // if it is startPoint.x + 0.001, I see kind pf a circle\n     startPoint.y,\n    radius,\n    radius,\n    360\n};\n\nBOOL segmentStrokes[1] = {\n    TRUE// Yes, draw each of the segment arcs.\n};\n\n// Add the segment data to the figure.\nhr = figure-&gt;SetSegments(\n    1,\n    5,\n    segmentTypes,\n    segmentData,\n    segmentStrokes);\n\nhr = figure-&gt;SetIsClosed(TRUE);\nhr = figure-&gt;SetIsFilled(TRUE);\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 3, "creation_date": 1467818571, "post_id": 38227675, "comment_id": 63877300, "body": "It&#39;ll report an error as soon as you call <code>var.b()</code>."}, {"owner": {"reputation": 258, "user_id": 6310670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3846db42183b24ad30e14262e970e23c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Barnes", "link": "https://stackoverflow.com/users/6310670/alexei-barnes"}, "edited": false, "score": 1, "creation_date": 1467818729, "post_id": 38227675, "comment_id": 63877419, "body": "As a side note this behavior is rather useful; it is necessary for instance for the policy design pattern: <a href=\"https://en.wikipedia.org/wiki/Policy-based_design\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Policy-based_design</a>"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467819372, "post_id": 38227739, "comment_id": 63877857, "body": "Ok, thanks, I&#39;ll look into it. I understand the instantiation bit, because it does not make sense for the compiler to check templated classes or functions without using them. I just thought that by declaring the variable &quot;var&quot;, the compiler would verify the class&#39; functions with regard to that type (int) (and in this case the type would be irrelevant)."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1467819430, "post_id": 38227739, "comment_id": 63877892, "body": "@Mehlins It&#39;s a balance between efficiency and correctness. Verifying templates is harder than it looks (often impossible), if you read a bit from that book (or any other <i>proper</i> book on C++ templates), you&#39;ll see why."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 6, "last_activity_date": 1467819762, "last_edit_date": 1467819762, "creation_date": 1467818620, "answer_id": 38227739, "question_id": 38227675, "link": "https://stackoverflow.com/questions/38227675/c-template-not-reporting-error-for-local-variable/38227739#38227739", "title": "c++ template not reporting error for local variable", "body": "<p>That's because the function <code>a&lt;int&gt;::b()</code> is not <a href=\"http://en.cppreference.com/w/cpp/language/class_template#Class_template_instantiation\" rel=\"nofollow\">instantiated</a>, due to the fact that it is a template. When you try to instantiate it, i.e. call it like <code>var.b();</code>, the compiler will spit an error. You have to understand that templates are instantiated \"on demand\", i.e. when the compiler needs the instantiation. Otherwise only minimal syntactic verifications take place. The details regarding instantiations/name lookups in templates is a rather complicated subject, I highly recommend this book: <a href=\"https://www.amazon.ca/Templates-Complete-Guide-David-Vandevoorde/dp/0201734842\" rel=\"nofollow\">C++ Templates: The Complete Guide</a> by David Vandevoode and Nicolai Josuttis. </p>\n\n<p>That's not the case with the first code snippet: the function has to be valid from the very beginning.</p>\n"}], "owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 38227739, "answer_count": 1, "score": 3, "last_activity_date": 1467819762, "creation_date": 1467818447, "last_edit_date": 1467818710, "question_id": 38227675, "link": "https://stackoverflow.com/questions/38227675/c-template-not-reporting-error-for-local-variable", "title": "c++ template not reporting error for local variable", "body": "<p>Why does this report an error:</p>\n\n<pre><code>class a {\npublic:\n    void b() {this-&gt;c++;}\n};\n\nint main() {\n    a var;\n}\n</code></pre>\n\n<p>But this does not?</p>\n\n<pre><code>template &lt;typename d&gt; class a {\npublic:\n    void b() {this-&gt;c++;}\n}; \n\nint main() {\n    a&lt;int&gt; var;\n}\n</code></pre>\n\n<p>Despite the fact that \"a\" is a templated class, the function \"b\", or at least the access to the variable \"c\", does not depend on the type \"d\", so it should report something. </p>\n\n<p>However, if I call \"var.b();\" in the main function it gives an error.</p>\n\n<p>I know it is a simple question by I really can't figure it out. </p>\n"}, {"tags": ["c++", "constructor", "polymorphism", "default-constructor"], "comments": [{"owner": {"reputation": 9272, "user_id": 241544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d27ca4e9a9a41ec8732046e6a272f091?s=128&d=identicon&r=PG", "display_name": "Matthew Walton", "link": "https://stackoverflow.com/users/241544/matthew-walton"}, "edited": false, "score": 0, "creation_date": 1467818764, "post_id": 38227630, "comment_id": 63877444, "body": "Rather than relying on people reading a linked article, which might not be there when somebody finds this question in several years&#39; time, please post relevant samples of code as part of your question so that we can understand it by itself. Stack Overflow is not just for the answers you need now but the same question somebody else has in the future."}, {"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467819352, "post_id": 38227630, "comment_id": 63877845, "body": "Apologize. Added the code in the initial question above. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467819501, "post_id": 38227716, "comment_id": 63877928, "body": "So this means. if we want an object for Shape class it should be instantiated separately and the same *shape cannot be re-used?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467823091, "post_id": 38227716, "comment_id": 63880196, "body": "@Gangadhar: I don&#39;t understand your comment."}, {"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467849910, "post_id": 38227716, "comment_id": 63892959, "body": "So if my class Shape has another method say  void print(){ cout &lt;&lt; &quot;Print something&quot;; } Can I do something like shape.print() or do I need a different object instantiated for Shape class?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467851033, "post_id": 38227716, "comment_id": 63893233, "body": "@Gangadhar: You can do <code>shape-&gt;print();</code> as long as <code>shape</code> points to (<i>i.o.w. holds the address of</i>) a valid Shape or Shape derived object. In the case of the example, it would be equivalent to either <code>rec.print();</code> or <code>tri.print();</code>, depending upon which object&#39;s address it held at the time."}, {"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467858361, "post_id": 38227716, "comment_id": 63894838, "body": "Ya I get it now. Thank you very much"}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": false, "score": 1, "last_activity_date": 1467818560, "creation_date": 1467818560, "answer_id": 38227716, "question_id": 38227630, "link": "https://stackoverflow.com/questions/38227630/difference-between-instantiating-a-class-object-with-constructor-parameter-and/38227716#38227716", "title": "Difference between instantiating a class object with Constructor parameter and * operator without parameters C++", "body": "<pre><code>Shape *shape;\n</code></pre>\n\n<p>This does not create a Shape object. It creates an uninitialized Shape pointer, which can be used for storing the address of a Shape object (or an object of a class which is derived from Shape). You can see it used in the page you linked to:</p>\n\n<pre><code>// store the address of Rectangle\nshape = &amp;rec;\n// call rectangle area.\nshape-&gt;area();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467819690, "post_id": 38227801, "comment_id": 63878066, "body": "Thanks! I quickly added the code in the above program.  Shape sh; sh.area() // This gave me an error saying there is no matching constructor  whereas when I wrote   Shape sh(0,0); sh.area() // it is able to access the method properly Have I misunderstood your answer. Please clarify. Thanks!!"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467819839, "post_id": 38227801, "comment_id": 63878166, "body": "@Gangadhar The code does not correspond to the code shown at the reference because the constructor of the class Shape now is not the default constructor. It does not have the default arguments for both its parameters."}, {"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467820182, "post_id": 38227801, "comment_id": 63878396, "body": "Thank you very much for the clarification. I see the difference you mentioned."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1467818788, "creation_date": 1467818788, "answer_id": 38227801, "question_id": 38227630, "link": "https://stackoverflow.com/questions/38227630/difference-between-instantiating-a-class-object-with-constructor-parameter-and/38227801#38227801", "title": "Difference between instantiating a class object with Constructor parameter and * operator without parameters C++", "body": "<p>Statement</p>\n\n<pre><code>Shape *shape;\n</code></pre>\n\n<p>does not create any instance of the class Shape.\nIt declares a variable that is a pointer of type <code>Shape *</code> and that is not initialized that is it has indetermined value provided that the declaration declares a local variable.</p>\n\n<p>As for the constructor then the only constructor of the class with two parameters is also the default constructor of the class because each parameter has a default argument. </p>\n\n<pre><code>Shape( int a=0, int b=0)\n           ^^^      ^^^  \n{\n   //...\n}\n</code></pre>\n\n<p>Thus you can write for example</p>\n\n<pre><code>Shape sh;\n</code></pre>\n\n<p>and data members of the created object will be initialized by these default arguments.\nThis declaration is equivalent to</p>\n\n<pre><code>Shape sh( 0, 0 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "edited": false, "score": 0, "creation_date": 1467858419, "post_id": 38227860, "comment_id": 63894854, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1467819007, "creation_date": 1467819007, "answer_id": 38227860, "question_id": 38227630, "link": "https://stackoverflow.com/questions/38227630/difference-between-instantiating-a-class-object-with-constructor-parameter-and/38227860#38227860", "title": "Difference between instantiating a class object with Constructor parameter and * operator without parameters C++", "body": "<p>Declaring a <code>Shape*</code> is not an operator, it's a different type. The type is pointer to shape. This differs from a directly declaring a shape in many ways:</p>\n\n<ul>\n<li>It's not a shape, but a variable that points to a shape.</li>\n<li>When using inheritance, we can use a pointer to base class (<code>Shape*</code>) to point to a child class (<code>Rectangle</code>).</li>\n<li>Note that I didn't put <code>*</code> after <code>Rectangle</code>. That's because a pointer point to an instance of a class, not to another pointer, except when you have pointer to pointer.</li>\n<li>When declaring a <code>Shape*</code>, the constructor is not called, as your pointer will point an existing instance or a new instance, using the <code>new</code> operator, or to no instance.</li>\n<li>A pointer that points to nothing is usually called a null pointer.</li>\n<li>You should read about pointers and references before polymorphism.</li>\n</ul>\n\n<p>A pointer declared without parameter has an undefined value. If you want a null pointer, you should declaring it like this: </p>\n\n<pre><code>Shape* ptrToShape = nullptr;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6353710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b588f1e0778df94de08f4e6f530071?s=128&d=identicon&r=PG&f=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/6353710/gangadhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 38227801, "answer_count": 3, "score": 1, "last_activity_date": 1467821913, "creation_date": 1467818316, "last_edit_date": 1467821913, "question_id": 38227630, "link": "https://stackoverflow.com/questions/38227630/difference-between-instantiating-a-class-object-with-constructor-parameter-and", "title": "Difference between instantiating a class object with Constructor parameter and * operator without parameters C++", "body": "<p>I came across this tutorial link when studying OOPS concepts in C++. <a href=\"http://www.tutorialspoint.com/cplusplus/cpp_polymorphism.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/cplusplus/cpp_polymorphism.htm</a></p>\n\n<p>In the base class <code>Shape</code>, it has constructor with two parameters to set its protected variables and in <code>main()</code> I thought the only way to create an object for class <code>Shape</code> is by doing something like <code>Shape shape(2,4)</code> to match the constructor in <code>Shape</code> class.</p>\n\n<p>Can someone say how the instantiation <code>Shape *shape</code> without any parameters work and whats the difference between creating object by <code>Shape shape(2,4)</code> and <code>Shape *shape</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Shape{\nprotected:\n    int w,h;\n\npublic:\n\n    Shape(int a, int b){\n        w=a;\n        h=b;\n    }\n    int area(){\n        cout &lt;&lt; \"Shape class area\" &lt;&lt; endl;\n        return 0;\n    }\n};\n\nclass Rect:public Shape{\n\npublic:\n\n    Rect(int a, int b):Shape(a,b) {}\n    int area(){\n        cout &lt;&lt;\"Rect class area \" &lt;&lt; endl;\n        return w*h;\n    }\n};\n\nclass Tri:public Shape{\n\npublic:\n\n    Tri(int a, int b):Shape(a,b) {}\n    int area(){\n        cout &lt;&lt; \"Tri class area\" &lt;&lt; endl;\n        return (w*h)/2;\n    }\n};\n\nint main(){\n\n    Shape *shape;\n    Rect r(4,5);\n    Tri t(4,5);\n    shape=&amp;r;\n    shape-&gt;area();\n    shape=&amp;t;\n    shape-&gt;area();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "graph", "path", "shortest"], "comments": [{"owner": {"reputation": 955, "user_id": 2560087, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/065698904c8b19f2b8d048a9ba8ec59d?s=128&d=identicon&r=PG", "display_name": "bashis", "link": "https://stackoverflow.com/users/2560087/bashis"}, "edited": false, "score": 1, "creation_date": 1467817661, "post_id": 38227355, "comment_id": 63876697, "body": "How about <a href=\"https://en.wikipedia.org/wiki/A%2A_search_algorithm\" rel=\"nofollow noreferrer\">A* algorithm</a> - it takes the best from dijkstra and greedy algorithms and is used in lots of video games. Here comes C++ implementation: <a href=\"http://code.activestate.com/recipes/577457-a-star-shortest-path-algorithm/\" rel=\"nofollow noreferrer\">code.activestate.com/recipes/&hellip;</a>"}, {"owner": {"reputation": 17, "user_id": 5854239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa913970cc3e7378e70c62be50eb697?s=128&d=identicon&r=PG&f=1", "display_name": "George P", "link": "https://stackoverflow.com/users/5854239/george-p"}, "reply_to_user": {"reputation": 955, "user_id": 2560087, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/065698904c8b19f2b8d048a9ba8ec59d?s=128&d=identicon&r=PG", "display_name": "bashis", "link": "https://stackoverflow.com/users/2560087/bashis"}, "edited": false, "score": 0, "creation_date": 1467817919, "post_id": 38227355, "comment_id": 63876877, "body": "Ok , I will give it ago , I found an implementaion along with a tutorial.Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5854239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa913970cc3e7378e70c62be50eb697?s=128&d=identicon&r=PG&f=1", "display_name": "George P", "link": "https://stackoverflow.com/users/5854239/george-p"}, "edited": false, "score": 0, "creation_date": 1467925696, "post_id": 38227634, "comment_id": 63931692, "body": "I have implemented the A* algorithm using the pseudocode provided by wikipedia .It seems to work fine but I can&#39;t understand one small part in the pseudocode to be more specific I cant understand what the reconsruct function does . What is the total_path, an array? If you could explain this particular function a bit it would be great.<a href=\"https://en.wikipedia.org/wiki/A%2A_search_algorithm\" rel=\"nofollow noreferrer\">Wikipedia</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 1, "last_activity_date": 1467818324, "creation_date": 1467818324, "answer_id": 38227634, "question_id": 38227355, "link": "https://stackoverflow.com/questions/38227355/point-to-point-path-in-a-graph/38227634#38227634", "title": "Point to point path in a Graph", "body": "<p>Have you looked into <a href=\"http://en.wikipedia.org/wiki/A%2A_search_algorithm\" rel=\"nofollow\">A*</a>?</p>\n\n<p>Here's a good article to start reading: <a href=\"http://www.redblobgames.com/pathfinding/a-star/introduction.html\" rel=\"nofollow\">http://www.redblobgames.com/pathfinding/a-star/introduction.html</a></p>\n"}], "owner": {"reputation": 17, "user_id": 5854239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa913970cc3e7378e70c62be50eb697?s=128&d=identicon&r=PG&f=1", "display_name": "George P", "link": "https://stackoverflow.com/users/5854239/george-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 38227634, "answer_count": 1, "score": 0, "last_activity_date": 1467818324, "creation_date": 1467817400, "question_id": 38227355, "link": "https://stackoverflow.com/questions/38227355/point-to-point-path-in-a-graph", "title": "Point to point path in a Graph", "body": "<p>I want an algorithm to be able to find an optimal path between two vertices on a graph (with positive int weights).The thing is my graph is relatively big (up to 100 vertices). I have considered the dijkstra algorithm but as I searched  the net most implementions use the adjacency matrix which in my case will be 100x100. </p>\n\n<p>If you could recommend me a certain source to read and learn from , or even better provide me with a c++ implementaion it will be great.</p>\n\n<p>PS: The algorithm needs to output the required route and not just the shortest distance between two points.</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["c++", "collision", "sfml"], "comments": [{"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 3, "creation_date": 1467817512, "post_id": 38227166, "comment_id": 63876609, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/27280264/sfml-bounding-box-collision-detection\">SFML Bounding Box Collision Detection</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5958170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a9b5c8e82f0523c6c81e1bc0813d878?s=128&d=identicon&r=PG", "display_name": "QApps", "link": "https://stackoverflow.com/users/5958170/qapps"}, "edited": false, "score": 0, "creation_date": 1467819276, "post_id": 38227371, "comment_id": 63877786, "body": "Thank you! That&#39;s the best I think."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 6, "last_activity_date": 1467817464, "creation_date": 1467817464, "answer_id": 38227371, "question_id": 38227166, "link": "https://stackoverflow.com/questions/38227166/the-collision-in-sfml-is-not-that-good-how-to-improve-it/38227371#38227371", "title": "The collision in SFML is not that good, how to improve it?", "body": "<p>The <code>intersects</code> function just check if two rectangles intersect. If you want pixel perfect collision detection in SFML you have to write that yourself.</p>\n\n<p>Basically, start with <code>intersects</code>, if it is true, then get the intersecting rectangle and check if any pixels therein from both original rectangles contains overlaping <em>relevant</em> pixels.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5958170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a9b5c8e82f0523c6c81e1bc0813d878?s=128&d=identicon&r=PG", "display_name": "QApps", "link": "https://stackoverflow.com/users/5958170/qapps"}, "edited": false, "score": 0, "creation_date": 1467819349, "post_id": 38227568, "comment_id": 63877844, "body": "Yeah you&#39;re right, I&#39;ll try that. Thanks for your help!"}, {"owner": {"reputation": 54678, "user_id": 232593, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9873090a2db3b128c7d01d673351565a?s=128&d=identicon&r=PG", "display_name": "Merlyn Morgan-Graham", "link": "https://stackoverflow.com/users/232593/merlyn-morgan-graham"}, "edited": false, "score": 1, "creation_date": 1469229104, "post_id": 38227568, "comment_id": 64466482, "body": "&quot;The angle between the centers&quot;. I recommend using the hypotenuse length of the right-triangle formed by the center points, and checking that against radius1 + radius2, instead of trying to do a projection on an angle. Was this what you intended? (sorry if I&#39;m being annoyingly pedantic)"}], "tags": [], "owner": {"reputation": 412, "user_id": 5020482, "user_type": "registered", "profile_image": "https://graph.facebook.com/982893125094841/picture?type=large", "display_name": "Enigma22134", "link": "https://stackoverflow.com/users/5020482/enigma22134"}, "is_accepted": false, "score": 0, "last_activity_date": 1535035752, "last_edit_date": 1535035752, "creation_date": 1467818134, "answer_id": 38227568, "question_id": 38227166, "link": "https://stackoverflow.com/questions/38227166/the-collision-in-sfml-is-not-that-good-how-to-improve-it/38227568#38227568", "title": "The collision in SFML is not that good, how to improve it?", "body": "<p>Are you using a circle? If I remember correctly, the circle will have a rectangle hitbox. If that is the case, then you may have collision between the invisible rectangle corners. </p>\n\n<p>If you're using a circle, Perhaps change class to a square rectangle and see if collision works correctly. Or try testing collision directly on an x or y axis with your circles; i.e. having them moving in a straight line towards each other only changing 1 axis. (the edge of the circle will be the same as the edge of the rectangle at the left, right, top, and bottom sections).</p>\n\n<p>If you're needing a better collision for circles, there may be one already built in SFML. But I don't think it would be too much to write your own logic using the radius of your two circles, the center of your two objects, and the <strike>angle</strike> hypotenuse between the centers.</p>\n\n<p>edit based on Merlyn Morgan-Graham's comment.</p>\n"}, {"comments": [{"owner": {"reputation": 54678, "user_id": 232593, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9873090a2db3b128c7d01d673351565a?s=128&d=identicon&r=PG", "display_name": "Merlyn Morgan-Graham", "link": "https://stackoverflow.com/users/232593/merlyn-morgan-graham"}, "edited": false, "score": 0, "creation_date": 1469228802, "post_id": 38283632, "comment_id": 64466410, "body": "Instead of square-rooting one side, you should square the other side. It runs much faster, and gives the same results. I also wouldn&#39;t agree that this is &quot;better&quot; - just different. It still isn&#39;t pixel-perfect (which may or may not matter), and is much slower than an axis-aligned bounding box intersection test."}], "tags": [], "owner": {"reputation": 140, "user_id": 4912803, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KkmLbf9oQsA/AAAAAAAAAAI/AAAAAAAAFt4/8SczmC6SJT0/photo.jpg?sz=128", "display_name": "Chiranjivee Thakur", "link": "https://stackoverflow.com/users/4912803/chiranjivee-thakur"}, "is_accepted": false, "score": 3, "last_activity_date": 1468079787, "creation_date": 1468079787, "answer_id": 38283632, "question_id": 38227166, "link": "https://stackoverflow.com/questions/38227166/the-collision-in-sfml-is-not-that-good-how-to-improve-it/38283632#38283632", "title": "The collision in SFML is not that good, how to improve it?", "body": "<p>You can use this function to perform better collision detection.Its a basic one but works well</p>\n\n<pre><code>bool circleTest(const sf::Sprite &amp;first, const sf::Sprite &amp;second)\n{\n    sf::Vector2f firstRect(first.getTextureRect().width, first.getTextureRect().height);\n    firstRect.x *= first.getScale().x;\n    firstRect.y *= first.getScale().y;\n\n    sf::Vector2f secondRect(second.getTextureRect().width, second.getTextureRect().height);\n    secondRect.x *= second.getScale().x;\n    secondRect.y *= second.getScale().y;\n\n    float r1 = (firstRect.x + firstRect.y) / 4;\n    float r2 = (secondRect.x + secondRect.y) / 4;\n    float xd = first.getPosition().x - second.getPosition().x;\n    float yd = first.getPosition().y - second.getPosition().y;\n\n    return std::sqrt(xd * xd + yd * yd) &lt;= r1 + r2;\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5958170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a9b5c8e82f0523c6c81e1bc0813d878?s=128&d=identicon&r=PG", "display_name": "QApps", "link": "https://stackoverflow.com/users/5958170/qapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1356, "favorite_count": 0, "accepted_answer_id": 38227371, "answer_count": 3, "score": 3, "last_activity_date": 1535035752, "creation_date": 1467816892, "last_edit_date": 1467817195, "question_id": 38227166, "link": "https://stackoverflow.com/questions/38227166/the-collision-in-sfml-is-not-that-good-how-to-improve-it", "title": "The collision in SFML is not that good, how to improve it?", "body": "<p>I've been lately working on a simple game using C++ and SFML latest version, but I had a problem which is that the collision detection is not that good, for example the player dies even if the enemy didn't touch him yet, but just near him. Here is the code of the player class with the move function and collision detection code AND the moves of the enemy class:</p>\n\n<p>`class PlayerA : public CircleShape\n    {\n    public:</p>\n\n<pre><code>    //Constructor:\n    PlayerA(float xposition, float yposition, float radius, float s)\n    {\n        setRadius(radius);\n        setFillColor(Color::Yellow);\n        setOutlineColor(Color(00,80,00));\n        setOutlineThickness(-2);\n        setPointCount(3);\n        setSpeed(s);\n        setPosition(xposition,yposition);\n    }\n\n    //Movements of the player:\n    void up()\n    {\n        move(0,-10*speed);\n    }\n    void down()\n    {\n        move(0,10*speed);\n    }\n    void right()\n    {\n        move(10*speed,0);\n    }\n    void left()\n    {\n        move(-10*speed,0);\n    }\n     void checkA(ObsA *obs1=NULL,ObsA *obs2=NULL, ObsA *obs3=NULL, ObsA *obs4=NULL, ObsA *obs5=NULL)\n    {\n        if(obs2==NULL)\n        {\n            if(getGlobalBounds().intersects(obs1-&gt;getGlobalBounds()))\n            {\n                relevel();\n            }\n        }\n     private:\n      float speed=0.00;\n\n    void obs()\n    {\n        if(speed &gt; 0)\n        {\n                rotate(0.5*speed);\n        }\n        else\n        {\n                rotate(0.5*speed);\n        }\n    }\n\n\nprivate:\n    float speed = 0.00;\n\n\n    void obs()\n    {\n        if(speed &gt; 0)\n        {\n                rotate(0.5*speed);\n        }\n        else\n        {\n                rotate(0.5*speed);\n        }\n    }\n\n\nprivate:\n    float speed = 0.00;\n</code></pre>\n\n<p>Is there something wrong with the code, how to fix the problem, thank you!</p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 3, "creation_date": 1467817019, "post_id": 38226996, "comment_id": 63876285, "body": "Unrelated: It is unusual for applications to use the <code>Esc</code> key for closing the entire application and I would avoid it. See for yourself, try closing common applications you use (e.g., text editor, web browser, etc) with the <code>Esc</code> key."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467818026, "post_id": 38226996, "comment_id": 63876954, "body": "Maybe it&#39;s related to a what has focus. What object has focus when it&#39;s working and when it&#39;s not working?"}, {"owner": {"reputation": 149, "user_id": 6440688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342f0fdc296b534e5af42690c5b6f50f?s=128&d=identicon&r=PG&f=1", "display_name": "H. Sock", "link": "https://stackoverflow.com/users/6440688/h-sock"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467818453, "post_id": 38226996, "comment_id": 63877219, "body": "When it works focusWidget() returns me a NULL, and when it doesn&#39;t work it returns the QMenuBar."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467818603, "post_id": 38226996, "comment_id": 63877330, "body": "How are you calling it? On a <code>QWidget</code> or the <code>QApplication</code>?"}, {"owner": {"reputation": 149, "user_id": 6440688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342f0fdc296b534e5af42690c5b6f50f?s=128&d=identicon&r=PG&f=1", "display_name": "H. Sock", "link": "https://stackoverflow.com/users/6440688/h-sock"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467818739, "post_id": 38226996, "comment_id": 63877424, "body": "I used it as: QWidget * fw = focusWidget();"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467819133, "post_id": 38226996, "comment_id": 63877681, "body": "So that&#39;s on a <code>QWidget</code> then. Does the one on <code>QApplication</code> give the same answer? In any event, I think focus is your issue. Try changing the focus to something other than the menu bar (e.g., clicking the application title bar, clicking somewhere in the window, pressing tab, etc.) and see if it starts working again. <b>Again</b>, I state you should not want this behavior anyway."}, {"owner": {"reputation": 149, "user_id": 6440688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342f0fdc296b534e5af42690c5b6f50f?s=128&d=identicon&r=PG&f=1", "display_name": "H. Sock", "link": "https://stackoverflow.com/users/6440688/h-sock"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1467820494, "post_id": 38226996, "comment_id": 63878632, "body": "I changed the focus according to your examples, but ESC still doesn&#39;t give a keyPressEvent (I confirmed the focus changed from QMenuBar to something else). I&#39;m just really confused since other keys give keyPressEvents perfectly fine, but ESC just doesn&#39;t when I have the problem."}], "owner": {"reputation": 149, "user_id": 6440688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342f0fdc296b534e5af42690c5b6f50f?s=128&d=identicon&r=PG&f=1", "display_name": "H. Sock", "link": "https://stackoverflow.com/users/6440688/h-sock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522443566, "creation_date": 1467816436, "last_edit_date": 1522443566, "question_id": 38226996, "link": "https://stackoverflow.com/questions/38226996/qt-c-why-does-esc-not-send-keypressevent-if-esc-was-used-to-deselect-a-menu", "title": "Qt C++: why does ESC not send keyPressEvent if ESC was used to &quot;deselect&quot; a menu?", "body": "<p>I'm using Qt 5.6 making a C++ application on a Windows 7 platform.</p>\n\n<p>My class <strong>testMenuBar</strong> has a QMenuBar that simply contains one menu, with one action in said menu.\nIt also exits when the user inputs the <KBD>Esc</KBD> key.</p>\n\n<p>The header file is:</p>\n\n<pre><code>class testMenuBar : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    testMenuBar(QWidget *parent = 0);\n    ~testMenuBar();\n\nprivate:\n    QMenu *m_testMenu;\n    QAction *m_testAction;\n\nprotected:\n    void keyPressEvent(QKeyEvent *event);\n};\n</code></pre>\n\n<p>And the cpp:</p>\n\n<pre><code>testMenuBar::testMenuBar(QWidget *parent)\n    : QMainWindow(parent)\n{\n    m_testAction = new QAction(tr(\"&amp;TestAct\"), this);\n    m_testMenu = menuBar()-&gt;addMenu(tr(\"&amp;Test\"));\n    m_testMenu-&gt;addAction(m_testAction);\n}\n\ntestMenuBar::~testMenuBar()\n{\n\n}\n\nvoid testMenuBar::keyPressEvent(QKeyEvent *event)\n{\n    if (event-&gt;key() == Qt::Key_Escape)\n    {\n        close();\n    }\n}\n</code></pre>\n\n<p>My problem is that when I have the menu open, and close it with the ESC key. The ESC key no longer sends a keyPressEvent, thus making the ESC key unable to close the application.</p>\n\n<p>For example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a8G0H.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a8G0H.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>If I have selected the menu <strong>Test</strong> as shown above and press ESC to deselect that menu, then <KBD>Esc</KBD> no longer sends the keyPressEvent, hence doesn't quit the application. I pressed the <KBD>Esc</KBD> key <strong>multiple times</strong> and nothing occurs.</p>\n\n<p>So my question is: <strong>why this is happening, and how to fix it?</strong></p>\n"}]