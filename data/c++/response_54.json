[{"tags": ["c++", "winapi", "mfc", "windows-messages"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453333628, "post_id": 34912708, "comment_id": 57561187, "body": "The notification code you&#39;re looking for is <code>EN_MSGFILTER</code> (note you&#39;re not actually checking for this in the Win32 version, which you should be)."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1453389982, "post_id": 34912708, "comment_id": 57588726, "body": "Why di use use PostMessage instead of SendMessage? The behaviour you get is completely different."}, {"owner": {"reputation": 103, "user_id": 2505440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7f307b37ffd5f3cbf60c8b4498b637?s=128&d=identicon&r=PG", "display_name": "Ashahmali", "link": "https://stackoverflow.com/users/2505440/ashahmali"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453482530, "post_id": 34912708, "comment_id": 57636078, "body": "Thanks @Jonathan Potter, Indeed that&#39;s the message I want and yes, xMRi, I have  change them to SendMessage.   I am now having a compatibility problem as the existing project&#39;s character encoding is multi-byte and the spell checking library has to be Unicode because of multiple foreign languages support. any ideas for gracefully converting between Character Encoding will be highly appreciated. thanks guys.."}], "owner": {"reputation": 103, "user_id": 2505440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7f307b37ffd5f3cbf60c8b4498b637?s=128&d=identicon&r=PG", "display_name": "Ashahmali", "link": "https://stackoverflow.com/users/2505440/ashahmali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453476750, "creation_date": 1453332784, "last_edit_date": 1453476750, "question_id": 34912708, "link": "https://stackoverflow.com/questions/34912708/translating-a-win32-api-message-handler-to-mfc-message-map", "title": "Translating a WIN32 API message handler to MFC Message Map", "body": "<p>I have a working windows API application with the CALLBACK proc function as follows:</p>\n\n<pre><code>INT_PTR CALLBACK myTestCallBack(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM    lParam)\n{\n    switch(uMsg) {\n        case WM_INITDIALOG:\n            HWND myRichEditHWND = GetDlgItem (hwndDlg, IDC_TEST);\n            // set some text length limit\n            SendMessage (myRichEditHWND, EM_LIMITTEXT, (WPARAM)MAX_STRING_LEN - 1, 0);\n            // we need key and mouse events, see WM_NOTIFY\n            SendMessage (myRichEditHWND, EM_SETEVENTMASK, 0, ENM_KEYEVENTS | ENM_MOUSEEVENTS);\n            // misc options\n            SendMessage (myRichEditHWND, EM_SETOPTIONS, ECOOP_OR, ECO_AUTOWORDSELECTION | ECO_SELECTIONBAR);\n            SendMessage (myRichEditHWND, EM_SETZOOM, 64, 52);\n            return TRUE;\n        case WM_COMMAND:\n            switch (LOWORD (wParam)) {\n                case IDOK:\n\n                case IDCANCEL:\n                    PostQuitMessage(0);\n                    EndDialog(hwndDlg, 0);\n                    return TRUE;\n            }\n            break;\n        case WM_NOTIFY:\n            {\n                MessageBox(hwndDlg, L\"Testing Dialog\", L\"Test\", S_OK);\n                MSGFILTER*  msgf = (MSGFILTER*)lParam;\n                if (msgf &amp;&amp; msgf-&gt;nmhdr.hwndFrom == myRichEditHWND)\n                    spellchecker_process (myRichEditHWND, msgf);\n                return FALSE;\n            }\n        default:\n            break; \n    }\n    return FALSE;\n}\n</code></pre>\n\n<p>I am trying to integrate this functionality into an MFC application and I have carried out the following steps:</p>\n\n<ol>\n<li><p>in the <code>OnInitialUpdate()</code> function i have:</p>\n\n<pre><code>CWnd* pwndBody = GetDlgItem( IDC_EDIT_OUTBOUND_BODY );\nASSERT( pwndBody );\n\n// Send messages to the Control, AA-20/01/2016\n// set some text length limit\n// richeditcrtl = (HWND)GetDlgItem( IDC_EDIT_OUTBOUND_BODY );\npwndBody-&gt;PostMessage(EM_LIMITTEXT, (WPARAM)MAX_STRING_LEN - 1, 0);\n\n// we need key and mouse events, see WM_NOTIFY\npwndBody-&gt;PostMessage(EM_SETEVENTMASK, 0, ENM_KEYEVENTS | ENM_MOUSEEVENTS);\n\n// misc options\npwndBody-&gt;PostMessage(EM_SETOPTIONS, ECOOP_OR, ECO_AUTOWORDSELECTION | ECO_SELECTIONBAR);\n\npwndBody-&gt;PostMessage(EM_SETZOOM, 64, 52);\n</code></pre></li>\n<li><p>I declared a handler:</p>\n\n<pre><code>afx_msg void OnSpellingError( NMHDR * pNotifyStruct, LRESULT * result );\n</code></pre></li>\n<li><p>defined the handler:</p>\n\n<pre><code>void CAMCMVOutboundEmailView::OnSpellingError(NMHDR* pNMHDR, LRESULT* Result) \n{\n     MSGFILTER*  msgf = (MSGFILTER*)pResult;\n     spellchecker_process ((HWND)pwndBody, msgf);\n}\n</code></pre></li>\n<li><p>I provided a binding in the message map:</p>\n\n<pre><code>ON_NOTIFY(NM_RCLICK, IDC_EDIT_OUTBOUND_BODY, OnSpellingError);\n</code></pre>\n\n<p>because I want to call the spellchecker_process() function when <code>WM_NOTIFY</code> message is received just like it is in the WIN API CALLBACK function above.</p></li>\n</ol>\n\n<p>I am new to MFC, but I know several things things are wrong and the obvious ones are:</p>\n\n<ul>\n<li>What should be the first parameter of the MFC <code>ON_NOTIFY</code> function? (it shouldn't be <code>NM_RCLICK</code>)</li>\n<li>How do I get the <code>LPARAM</code> parameter inside the message handler (<code>OnSpellingError</code>) as I need to cast it to the <code>MSGFILTER</code>?</li>\n</ul>\n\n<p>In summary, I am just trying to implement the WIN API function in my MFC Application. Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13553, "user_id": 643500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c66ad2afcf08e4a22f7b3cf5ca7ebc2?s=128&d=identicon&r=PG", "display_name": "Hitham S. AlQadheeb", "link": "https://stackoverflow.com/users/643500/hitham-s-alqadheeb"}, "edited": false, "score": 0, "creation_date": 1453332857, "post_id": 34912688, "comment_id": 57560936, "body": "Use main, check <a href=\"http://www.site.uottawa.ca/~lucia/courses/2131-05/labs/Lab3/CommandLineArguments.html\" rel=\"nofollow noreferrer\">site.uottawa.ca/~lucia/courses/2131-05/labs/Lab3/&hellip;</a>"}, {"owner": {"reputation": 843, "user_id": 5781901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e564c798092e52628fa798141fda2b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Riley", "link": "https://stackoverflow.com/users/5781901/brian-riley"}, "edited": false, "score": 0, "creation_date": 1453333698, "post_id": 34912688, "comment_id": 57561210, "body": "I&#39;m assuming you actually want something like &quot;./SayHello Carlos&quot; which outputs &quot;Hello Carlos&quot;?"}, {"owner": {"reputation": 1, "user_id": 5818543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/368d319a03f94fe5a2385ff2b8db6304?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew ", "link": "https://stackoverflow.com/users/5818543/matthew"}, "edited": false, "score": 0, "creation_date": 1453333907, "post_id": 34912688, "comment_id": 57561282, "body": "Yes , Thanks for your help. I read the site and it helped to understand. :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453340773, "post_id": 34912688, "comment_id": 57563317, "body": "C and C++ are different languages. Do not add wrong tags."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5818543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/368d319a03f94fe5a2385ff2b8db6304?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew ", "link": "https://stackoverflow.com/users/5818543/matthew"}, "edited": false, "score": 0, "creation_date": 1453334129, "post_id": 34912797, "comment_id": 57561364, "body": "Thanks for your help ,it will be useful"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453342383, "post_id": 34912797, "comment_id": 57563681, "body": "For a starter: <code>main</code> has a wrong signature. The array points to string literas which are constant, but is not <code>const ...</code> and does not answer the question either."}, {"owner": {"reputation": 389, "user_id": 5806210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ff5a39a1297b2271320e1b790ac?s=128&d=identicon&r=PG&f=1", "display_name": "Bretsko", "link": "https://stackoverflow.com/users/5806210/bretsko"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453342930, "post_id": 34912797, "comment_id": 57563834, "body": "@olaf agree with the first 2 statements but didn&#39;t OP ask about a program &quot;./program&quot; running specific function &quot;foo&quot; and &quot;write parameters -u adm -p 123&quot; ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453377887, "post_id": 34912797, "comment_id": 57580098, "body": "See the question. The part &quot;... without needing to open program itself.&quot; obviously means without re-compilation."}, {"owner": {"reputation": 389, "user_id": 5806210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ff5a39a1297b2271320e1b790ac?s=128&d=identicon&r=PG&f=1", "display_name": "Bretsko", "link": "https://stackoverflow.com/users/5806210/bretsko"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453378259, "post_id": 34912797, "comment_id": 57580328, "body": "@olaf  OP says he is &quot;used to calling programs through like: ./program foo -u adm -p 123&quot;, that&#39;s what I did - call a &quot;./program&quot;, and OP said that my example &quot;will be useful&quot;"}], "tags": [], "owner": {"reputation": 389, "user_id": 5806210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ff5a39a1297b2271320e1b790ac?s=128&d=identicon&r=PG&f=1", "display_name": "Bretsko", "link": "https://stackoverflow.com/users/5806210/bretsko"}, "is_accepted": false, "score": -1, "last_activity_date": 1453333292, "creation_date": 1453333292, "answer_id": 34912797, "question_id": 34912688, "link": "https://stackoverflow.com/questions/34912688/c-execute-a-function-through-cmd-or-shell/34912797#34912797", "title": "C++ Execute a function through cmd or shell", "body": "<pre><code>void main() {\nchar *name[] = {\n    \"./program\",\n    \"-c\",\n    \"foo -u adm -p 123\",\n    NULL\n};\nexecvp(name[0], name);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 843, "user_id": 5781901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e564c798092e52628fa798141fda2b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Riley", "link": "https://stackoverflow.com/users/5781901/brian-riley"}, "edited": false, "score": 0, "creation_date": 1453333632, "post_id": 34912821, "comment_id": 57561190, "body": "I think he wants &quot;world!&quot; to be a char* passed in to main."}, {"owner": {"reputation": 509, "user_id": 2070994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895c3d2e65b7288c326a9436ade6d7b7?s=128&d=identicon&r=PG", "display_name": "BGR", "link": "https://stackoverflow.com/users/2070994/bgr"}, "reply_to_user": {"reputation": 843, "user_id": 5781901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e564c798092e52628fa798141fda2b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Riley", "link": "https://stackoverflow.com/users/5781901/brian-riley"}, "edited": false, "score": 0, "creation_date": 1453333821, "post_id": 34912821, "comment_id": 57561254, "body": "Okay I just changed my program to pass in &quot;World!&quot;"}, {"owner": {"reputation": 509, "user_id": 2070994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895c3d2e65b7288c326a9436ade6d7b7?s=128&d=identicon&r=PG", "display_name": "BGR", "link": "https://stackoverflow.com/users/2070994/bgr"}, "edited": false, "score": 0, "creation_date": 1453334308, "post_id": 34912821, "comment_id": 57561442, "body": "For more sophisticated ways to pass command line options to programs see <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/program_options.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_60_0/doc/html/program_options.html</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453342563, "post_id": 34912821, "comment_id": 57563730, "body": "That does not even compile. You don&#39;t declare <code>argv</code> and don&#39;t even check if it is valid, invoking undefined behaviour."}, {"owner": {"reputation": 509, "user_id": 2070994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895c3d2e65b7288c326a9436ade6d7b7?s=128&d=identicon&r=PG", "display_name": "BGR", "link": "https://stackoverflow.com/users/2070994/bgr"}, "edited": false, "score": 0, "creation_date": 1453343196, "post_id": 34912821, "comment_id": 57563901, "body": "I corrected it so that it compiles. I pasted the wrong version by mistake."}], "tags": [], "owner": {"reputation": 509, "user_id": 2070994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895c3d2e65b7288c326a9436ade6d7b7?s=128&d=identicon&r=PG", "display_name": "BGR", "link": "https://stackoverflow.com/users/2070994/bgr"}, "is_accepted": false, "score": -2, "last_activity_date": 1453343157, "last_edit_date": 1453343157, "creation_date": 1453333428, "answer_id": 34912821, "question_id": 34912688, "link": "https://stackoverflow.com/questions/34912688/c-execute-a-function-through-cmd-or-shell/34912821#34912821", "title": "C++ Execute a function through cmd or shell", "body": "<p>There you go every executable needs a main function which is the entry point for execution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid SayHello(string Name)\n{\n    cout &lt;&lt; \" Hello \" &lt;&lt; Name;\n}\n\nint main(int argc, char* argv[])\n\n{\n\n   if (argc &gt; 1) \n      SayHello(argv[1]);\n\n}\n</code></pre>\n\n<p>To compile this do </p>\n\n<blockquote>\n  <p>$g++ hello.cpp</p>\n</blockquote>\n\n<p>It should produce a.out on Linux.</p>\n\n<p>To run it </p>\n\n<blockquote>\n  <p>./a.out \"World!\"</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1453333723, "post_id": 34912864, "comment_id": 57561216, "body": "In other (more) words, there is no link at all between function names in the C or C++ code and anything you do with it as &quot;string&quot;."}, {"owner": {"reputation": 1, "user_id": 5818543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/368d319a03f94fe5a2385ff2b8db6304?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew ", "link": "https://stackoverflow.com/users/5818543/matthew"}, "edited": false, "score": 0, "creation_date": 1453333850, "post_id": 34912864, "comment_id": 57561265, "body": "Thank you friend, i understand now.It was exactly what I needed :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453342239, "post_id": 34912864, "comment_id": 57563642, "body": "Tht is C++; you should use the features the languages provides."}], "tags": [], "owner": {"reputation": 62, "user_id": 5797019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc115e0a77249f9db69d026e2e4ec9ee?s=128&d=identicon&r=PG&f=1", "display_name": "ospet", "link": "https://stackoverflow.com/users/5797019/ospet"}, "is_accepted": true, "score": 1, "last_activity_date": 1453333620, "creation_date": 1453333620, "answer_id": 34912864, "question_id": 34912688, "link": "https://stackoverflow.com/questions/34912688/c-execute-a-function-through-cmd-or-shell/34912864#34912864", "title": "C++ Execute a function through cmd or shell", "body": "<p>If you want to call a function of your program based on the arguments, you could do something like:</p>\n\n<pre><code>int main(int argc, char* argv[]) { \n    if(argc &gt; 2){\n        if(strcmp(argv[1], \"SayHello\") == 0){\n            SayHello(argv[2]);\n        }\n    }\n    return 0; \n}\n</code></pre>\n\n<p>Of course this is just a sketch and i can be improved if what you want to achieve is more complex.\nYou could also build a more dynamic solution if you want other functions than the \"SayHello\" one to be callable too.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453342432, "post_id": 34912872, "comment_id": 57563691, "body": "Please format your answer properly. There is a reason for markup. That is just ugly."}], "tags": [], "owner": {"reputation": 900, "user_id": 1885835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d75ab8c233d44ca9db8def4d757b4d?s=128&d=identicon&r=PG", "display_name": "floppy12", "link": "https://stackoverflow.com/users/1885835/floppy12"}, "is_accepted": false, "score": 0, "last_activity_date": 1453333664, "creation_date": 1453333664, "answer_id": 34912872, "question_id": 34912688, "link": "https://stackoverflow.com/questions/34912688/c-execute-a-function-through-cmd-or-shell/34912872#34912872", "title": "C++ Execute a function through cmd or shell", "body": "<p>int main( int argc, char** argv )</p>\n\n<p>Here argc refers to the number of argument (arg count)\nargv refers to the argument array (\"char*\" array) (arg value)</p>\n\n<p>Calling your program from command line will result in a main entry with these parameters ; it remains to parse them and launch the command accordingly.</p>\n"}], "owner": {"reputation": 1, "user_id": 5818543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/368d319a03f94fe5a2385ff2b8db6304?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew ", "link": "https://stackoverflow.com/users/5818543/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 34912864, "answer_count": 4, "score": -1, "last_activity_date": 1453343157, "creation_date": 1453332685, "last_edit_date": 1453340595, "question_id": 34912688, "link": "https://stackoverflow.com/questions/34912688/c-execute-a-function-through-cmd-or-shell", "title": "C++ Execute a function through cmd or shell", "body": "<p>First thing,sorry my bad english and any mistakes in asking.\nI've searched it a lot,but i was not able to explain in simple words.\nI work with Linux servers and command line, i'm used to calling programs through it like</p>\n\n<pre><code>./program foo -u adm -p 123\n</code></pre>\n\n<p>But i always wondered how make programs to act like that,i mean call a specific function and write parameters without needing to open program itself.</p>\n\n<p>In other words.</p>\n\n<p>If i code a C++ like that,and compile</p>\n\n<pre><code> #include &lt;iostream&gt;\n using namespace std;\n\n void SayHello(string Name)\n {\n     cout &lt;&lt; \" Hello \" &lt;&lt; Name;\n }\n</code></pre>\n\n<p>how can i call it through the command line like</p>\n\n<pre><code>./Program SayHello CARLOS\n</code></pre>\n\n<p>Sorry about my ignorance,but it's something that i want to learn.</p>\n\n<p>Thanks for your attention</p>\n"}, {"tags": ["c++", "vector", "memory-leaks", "unique-ptr"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1453332478, "post_id": 34912626, "comment_id": 57560792, "body": "Does <code>Worker</code> have a <code>virtual</code> destructor?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1453332641, "post_id": 34912626, "comment_id": 57560863, "body": "Can you show the implementations of <code>Worker</code> &amp; <code>Builder</code>"}, {"owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "edited": false, "score": 0, "creation_date": 1453333003, "post_id": 34912626, "comment_id": 57560994, "body": "Worker&#39;s destructor is blank as there is only private: string name;"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 1, "creation_date": 1453333366, "post_id": 34912626, "comment_id": 57561108, "body": "In this case you need to make the Worker destructor virtual so it would destroy it as Builder and any members of it and not just as Worker. (I guess also has some virtual methods overridden by Builder, it is basically a rule that class with virtual method must have a virtual destructor - or protected destructor so that delete cannot be called on it)."}, {"owner": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "edited": false, "score": 2, "creation_date": 1453333477, "post_id": 34912626, "comment_id": 57561132, "body": "You are deleting from the base class pointer and the base class destructor isn&#39;t virtual, so you are hitting undefined behavior"}, {"owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "edited": false, "score": 0, "creation_date": 1453333577, "post_id": 34912626, "comment_id": 57561167, "body": "Thank you axalis and Dave S. Axalis as you were first, please answer my question and I will approve it. Thank you guys for your time."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453333801, "post_id": 34912626, "comment_id": 57561247, "body": "Is there some reason you create two <code>Builder</code> objects when you only need one? Why not <code>Workers.push_back(make_unique&lt;Builder&gt;(name, stoi(bricks)));</code>?"}, {"owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "edited": false, "score": 0, "creation_date": 1453333871, "post_id": 34912626, "comment_id": 57561271, "body": "Its just example, the orginal code is more complicated."}], "answers": [{"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 0, "last_activity_date": 1453333801, "creation_date": 1453333801, "answer_id": 34912902, "question_id": 34912626, "link": "https://stackoverflow.com/questions/34912626/memory-leak-when-adding-an-object-to-vectorunique-ptrtype/34912902#34912902", "title": "Memory leak when adding an object to vector&lt;unique_ptr&lt;Type&gt;&gt;", "body": "<p>You need to make the Worker destructor virtual so it would destroy it as Builder and any members of it and not just as Worker.</p>\n\n<p>I guess also has some virtual methods overridden by Builder, it is basically a rule that class with virtual method must have a virtual destructor - or protected destructor so that delete cannot be called on it (which would of course prevent its use in unique_ptr).</p>\n"}], "owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1453335227, "accepted_answer_id": 34912902, "answer_count": 1, "score": 0, "last_activity_date": 1453333801, "creation_date": 1453332406, "last_edit_date": 1453333387, "question_id": 34912626, "link": "https://stackoverflow.com/questions/34912626/memory-leak-when-adding-an-object-to-vectorunique-ptrtype", "closed_reason": "Duplicate", "title": "Memory leak when adding an object to vector&lt;unique_ptr&lt;Type&gt;&gt;", "body": "<p>I am using Visual Leak Detector and it says that I have memory leak when I am adding an object to <code>vector&lt;unique_ptr&lt;Worker&gt;&gt; Workers</code>.</p>\n\n<p>I got base class named <code>Worker</code> with private field name and one Derived class <code>Builder</code> with private int bricks.</p>\n\n<p>This is how I add new object to <code>vector Workers</code>.</p>\n\n<pre><code>    Builder b = Builder(name, stoi(bricks));\n    Workers.push_back(make_unique&lt;Builder&gt;(b)); // this is the line with memory leak\n</code></pre>\n\n<p>Can you tell me what should I do to prevent memory leaks in this case?</p>\n\n<p>EDIT:</p>\n\n<p>I release memory of vector like this:</p>\n\n<pre><code>vector&lt;unique_ptr&lt;Worker&gt;&gt;().swap(Workers);\n</code></pre>\n\n<p>Implementation of <code>Worker &amp; Builder</code></p>\n\n<pre><code>Worker::Worker(string name)\n{\n    this-&gt;_name = name;\n}\n</code></pre>\n\n<p>the destructor of Worker is blank.</p>\n\n<pre><code>Worker::~Worker()\n{\n\n}\n\nBuilder::Builder(string name, int bricks) : Worker(name)\n{\n    this-&gt;_bricks = bricks;\n}\n</code></pre>\n\n<p>And destructor of Builder is blank.</p>\n\n<pre><code>Builder::~Builder()\n{\n\n}\n</code></pre>\n"}, {"tags": ["c++", "return", "exit-code"], "comments": [{"owner": {"reputation": 35402, "user_id": 182748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0bb26aa3275e2d920334b44429d752?s=128&d=identicon&r=PG", "display_name": "asveikau", "link": "https://stackoverflow.com/users/182748/asveikau"}, "edited": false, "score": 3, "creation_date": 1453332350, "post_id": 34912588, "comment_id": 57560746, "body": "It&#39;s only taking 8 bits.  <code>300 &amp; 0xff == 44</code>.  Pretty sure this is mostly a Unix thing.  See <code>WEXITSTATUS</code> in the <code>waitpid</code> manpage - the status is OR&#39;d into some other values."}, {"owner": {"reputation": 153, "user_id": 5818546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa4f36b91398f25eb5ae24942756f43?s=128&d=identicon&r=PG&f=1", "display_name": "leszakk", "link": "https://stackoverflow.com/users/5818546/leszakk"}, "reply_to_user": {"reputation": 35402, "user_id": 182748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0bb26aa3275e2d920334b44429d752?s=128&d=identicon&r=PG", "display_name": "asveikau", "link": "https://stackoverflow.com/users/182748/asveikau"}, "edited": false, "score": 0, "creation_date": 1453332435, "post_id": 34912588, "comment_id": 57560781, "body": "could you explain why? and is it possible to return a higher number?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1453333237, "post_id": 34912588, "comment_id": 57561073, "body": "There is no such thing as a return code over 255. The OS ignores any bits beyond the first eight."}, {"owner": {"reputation": 36371, "user_id": 1180785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UjU0z.png?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/1180785/dave"}, "edited": false, "score": 1, "creation_date": 1453333585, "post_id": 34912588, "comment_id": 57561170, "body": "Perhaps it&#39;s worth pointing out that this only applies to the return code of the <i>program</i>. Obviously non-main functions can return anything they like. Generally program return codes are just used for error handling anyway, so 255 values is plenty (your actual output should typically go to stdout so that it can be piped around)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1453335843, "post_id": 34912588, "comment_id": 57561901, "body": "The handling of process return codes is going to be operating-system specific and the C++ standard basically just says that the implementation defines what happens."}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453338281, "post_id": 34913061, "comment_id": 57562615, "body": "Actually, under unix, the exit code is in the MSB, so <code>(status &amp; 0xff00) &gt;&gt; 8</code>. The reason for only 8 bits is historical: Under original unix [developed for the PDP-11], an <code>int</code> was 16 bits, so no room for a larger error code in <code>status</code> for <code>wait</code>. For backwards compatibility, the size of the error code was <i>not</i> increased, even though most arches now define <code>int</code> as a 32 bit entity. As mentioned, since the code returned by a program goes through the OS and is obtained by the parent from a syscall, it is OS type dependent"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453412107, "post_id": 34913061, "comment_id": 57602274, "body": "@CraigEstey Interesting, thanks! Indeed I found in &quot;<i>The design of the unix operating system</i>&quot; a note explaining that the lower 8 bits passed to <code>exit()</code> are stored in the bits 8 to 15 of internal process return code as you said. I suppose that this is the reason why the return code obtained from from <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html\" rel=\"nofollow noreferrer\"><code>wait()</code></a> must be interpreted correctly with  <code>WIFEXITED()</code>, <code>WEXITSTATUS()</code> and so on... And the same for the return of <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\"><code>system()</code></a>."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453415758, "post_id": 34913061, "comment_id": 57604028, "body": "Thanks to @HansPassant for the update. In fact the Windows documentation of <code>exit()</code> says &quot;<i>the low-order byte of status is made available to the host environment</i>&quot;,  But test shows that the full integer is always returned, exactly as you have stated in relation to <code>GetExitCodeProcess()</code>. This happens even if using the legacy <code>execlp()</code>. So it seems that the absence of the word &quot;only&quot; is to be interpreted as &quot;the lowest byte or more&quot; :-)"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 8, "last_activity_date": 1453415219, "last_edit_date": 1453415219, "creation_date": 1453334753, "answer_id": 34913061, "question_id": 34912588, "link": "https://stackoverflow.com/questions/34912588/why-do-return-codes-over-255-return-a-differnt-number-in-c/34913061#34913061", "title": "Why do return codes over 255 return a differnt number in C++?", "body": "<p>The standard knows only two standaradized return values: <code>EXIT_SUCCESS</code> (or zero)  and <code>EXIT_- FAILURE</code>:</p>\n\n<blockquote>\n  <p><strong>3.6.1/5</strong> A return statement in main has the effect of leaving the main function (destroying any objects with automatic storage duration) and\n  calling <strong><code>std::exit</code></strong> with the return value as the argument.</p>\n  \n  <p><strong>18.5/8</strong> (...) Finally, control is returned to the host environment. If status is zero or <code>EXIT_SUCCESS</code>, an implementation-defined form of the status\n  successful termination is returned. If status is <code>EXIT_- FAILURE</code>, an\n  implementation-defined form of the status unsuccessful termination is\n  returned. <strong>Otherwise the status returned is implementation-defined</strong>.</p>\n</blockquote>\n\n<p>It is hence not guaranteed that any other integer is returned as is.  </p>\n\n<p>On <a href=\"https://msdn.microsoft.com/en-us/library/6wdz5232.aspx\" rel=\"nofollow\">MS Windows</a> for example, the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683189%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>GetExitCodeProcess()</code></a> function returns the integer value so you'll get 300.  </p>\n\n<p>On <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/exit.html\" rel=\"nofollow\">POSIX</a> compliant systems, like <a href=\"http://man7.org/linux/man-pages/man3/exit.3.html\" rel=\"nofollow\">Linux</a>, the rule is that (<em>\"only the 8 least significant bits (i.e. status &amp; 0377) shall be available to the awaiting parent process\"</em>).  So for 300, it will be 44.  </p>\n"}], "owner": {"reputation": 153, "user_id": 5818546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa4f36b91398f25eb5ae24942756f43?s=128&d=identicon&r=PG&f=1", "display_name": "leszakk", "link": "https://stackoverflow.com/users/5818546/leszakk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 34913061, "answer_count": 1, "score": 5, "last_activity_date": 1453415219, "creation_date": 1453332220, "question_id": 34912588, "link": "https://stackoverflow.com/questions/34912588/why-do-return-codes-over-255-return-a-differnt-number-in-c", "title": "Why do return codes over 255 return a differnt number in C++?", "body": "<p>For example...</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){return 300;}\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>Process finished with exit code 44\n</code></pre>\n\n<p>??</p>\n"}, {"tags": ["c++", "boost", "googletest", "boost-optional"], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1453332509, "post_id": 34912611, "comment_id": 57560801, "body": "I understand, but if I read this post right: <a href=\"http://stackoverflow.com/questions/4923384/conversion-of-boostoptional-to-bool\" title=\"conversion of boostoptional to bool\">stackoverflow.com/questions/4923384/&hellip;</a>, it is implicit converted? Has this changed?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 4, "creation_date": 1453332809, "post_id": 34912611, "comment_id": 57560922, "body": "@Suv <code>if(my_optional)</code> will compile even if the conversion operator is <code>explicit</code> because that&#39;s a <a href=\"http://en.cppreference.com/w/cpp/language/implicit_cast#Contextual_conversions\" rel=\"nofollow noreferrer\">contextual conversion</a>. Also, depending on the version of Boost and whether you have c++11 enabled etc., <code>optional</code> might use the safe bool idiom for the bool conversion, which is also an implicit conversion, but prevents compilation of some questionable uses."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 8, "last_activity_date": 1453332335, "creation_date": 1453332335, "answer_id": 34912611, "question_id": 34912520, "link": "https://stackoverflow.com/questions/34912520/boost-optional-implicit-conversion-to-bool/34912611#34912611", "title": "Boost Optional implicit conversion to bool?", "body": "<blockquote>\n  <p>Is a <code>boost::optional</code> not impicit converted to a bool</p>\n</blockquote>\n\n<p>No, it's not. Its conversion operator to <code>bool</code> is marked <code>explicit</code>, but your testing framework needs something that's implicitly convertible. You should see the problem with plain <code>bool test = opt;</code> too: that should fail to compile.</p>\n"}], "owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1362, "favorite_count": 0, "accepted_answer_id": 34912611, "answer_count": 1, "score": 4, "last_activity_date": 1453367094, "creation_date": 1453331922, "last_edit_date": 1453367094, "question_id": 34912520, "link": "https://stackoverflow.com/questions/34912520/boost-optional-implicit-conversion-to-bool", "title": "Boost Optional implicit conversion to bool?", "body": "<p>I'm reading some code and I came across something I do not understand.\nIts about testing if a Boost::optional value is initialised or not. It uses the gtest framework which provides the <code>ASSERT_TRUE()</code> macro.</p>\n\n<pre><code>#include \"gtest\\gtest.h\"\n\nvoid test() {\n    boost::optional&lt;someClass&gt; opt = someFunc();\n    ASSERT_TRUE(!!opt);\n}\n</code></pre>\n\n<p>Why do I need the <code>!!</code> before <code>opt</code>? Is a <code>boost::optional</code> not implicitly converted to a bool, which is needed by the macro? I thought it would be enough to use <code>ASSERT_TRUE(opt)</code> to check if opt holds a correct value?</p>\n"}, {"tags": ["c++", "qt", "bitmap", "bmp", "ofstream"], "comments": [{"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1453332205, "post_id": 34912357, "comment_id": 57560688, "body": "First of all you vialotes strict aliasing rule here <code>BMPFH* fh = (BMPFH*)(temp);</code>. Simply read structure entire structure instead of byte array."}, {"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 0, "creation_date": 1453332251, "post_id": 34912357, "comment_id": 57560709, "body": "Could it be that you are reading <code>DIBH</code> structure directly, but writing it one element at a time, AND the structure members are not aligned to single byte (<code>#pragma pack</code>)?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1453332396, "post_id": 34912357, "comment_id": 57560761, "body": "There are also different versions of BMP file."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1453333203, "post_id": 34912357, "comment_id": 57561061, "body": "PPM format <a href=\"https://en.wikipedia.org/wiki/Netpbm_format#PPM_example\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Netpbm_format#PPM_example</a> is a little easier to read/write as a first attempt. bmp contains a few oddities that you don&#39;t want to worry about."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1453334409, "post_id": 34912357, "comment_id": 57561466, "body": "<code>inFile.seekg(57, ios::beg);</code> seems suspicious because of the odd offset.  Just about everything in .BMP is aligned to at least an even offset and typically to a multiple of 4."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1453334596, "post_id": 34912357, "comment_id": 57561524, "body": "Could you upload the raw bmp file you are using? The link points to a png."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1453336488, "post_id": 34912357, "comment_id": 57562071, "body": "The header size is 54 bytes, so the 1024 byte color table should begin at offset 54 (not 57).  You are strangely writing 3 bytes of 0 (as &quot;offset&quot;) between the header and color table.  When you write the pixel data, as repeated copies of the first line of the source, the Pixel index is offset by another strange 3 bytes -- this causes 3 bytes to be read beyond the end of the source array."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1453337365, "post_id": 34912357, "comment_id": 57562343, "body": "After further reflection, it seems to me like you are trying to patch the first color in the color table with black.  The first problem with this is that color table entries are 4 bytes long, not 3 (it is 1024 bytes long because 256*4==1024).  The last byte is zero padding.  I recommend that you first read the color table normally (1024 bytes at offset 54), and then set the first 3 elements of the array to 0 instead of messing with offsets later on in the code.  Then you can skip writing the &quot;offset&quot; value and also remove the offending i+3 index when writing out lines of pixel data."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1453338351, "post_id": 34912357, "comment_id": 57562639, "body": "Also, your &quot;intensity&quot; calculation takes the first 3 pixels and seems to be using an RGB weighting, as if the first pixel is red, the second green and the third blue.  However, your image is monochrome, so such weighting is inappropriate -- all pixels are gray.  This would be correct when processing a bitmap with 24 bits per pixel (for a single pixel, one byte each for red, green, blue) -- but this is an 8bpp bitmap and each pixel&#39;s value is an offest into the color table, which holds RGB levels."}, {"owner": {"reputation": 23, "user_id": 5818376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66457e511dacf02f67c02b57c6e54f?s=128&d=identicon&r=PG&f=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5818376/james-williams"}, "reply_to_user": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1453402479, "post_id": 34912357, "comment_id": 57596855, "body": "@Danny_ds  I&#39;ve updated the image link to ensure that it keeps the original bmp formatting."}, {"owner": {"reputation": 23, "user_id": 5818376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66457e511dacf02f67c02b57c6e54f?s=128&d=identicon&r=PG&f=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5818376/james-williams"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1453402748, "post_id": 34912357, "comment_id": 57597012, "body": "Thank you everyone for the advice.  @ChristopherOicles , you correctly figured out what I was doing.  I took your advice and fixed the code (updated original post as well) however I&#39;m still suffering from the same problem as before.  At a seemingly random point the new pixel data begins to differ from the original pixel data.  Row 630 (when viewing in hex editor) shows &quot;7A 7A 77 78 79 76 61 5D 5B 5B 5A 5B 5B 5B 5B 5B&quot; for the original and &quot;7A 7A 77 78 79 76 62 60 5B 5B 5B 5B 5E 60 5C 5B&quot; for the new.  Everything before that row is exactly correct."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5818376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66457e511dacf02f67c02b57c6e54f?s=128&d=identicon&r=PG&f=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5818376/james-williams"}, "edited": false, "score": 0, "creation_date": 1453418540, "post_id": 34935629, "comment_id": 57605144, "body": "Thank you very much for your insight.  I made that change and at first it caused the program to freeze but that was because of &quot;unsigned char pix[512]&quot;.  I changed that to 262144 and the program output an exact match of the original bmp file.  I chose 262144 because that&#39;s the number of bytes needed to store the array of pixels.  Is that the correct number to put there?  (Referring to the struct of Pixel in my code)"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 23, "user_id": 5818376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66457e511dacf02f67c02b57c6e54f?s=128&d=identicon&r=PG&f=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5818376/james-williams"}, "edited": false, "score": 0, "creation_date": 1453420718, "post_id": 34935629, "comment_id": 57605838, "body": "Yes, that&#39;s the right size for this .BMP.  Be aware there are likely other problems if you try to use this on files of a different format.  There are a lot of legal variations in the .BMP format."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1453415520, "creation_date": 1453415520, "answer_id": 34935629, "question_id": 34912357, "link": "https://stackoverflow.com/questions/34912357/how-to-write-512x512-pixel-array-to-a-bmp-file-256-colors-and-8-bpp-in-c-usi/34935629#34935629", "title": "How to write 512x512 pixel array to a bmp file (256 colors and 8 bpp) in c++ using ofstream?", "body": "<p>Your final nested loops (the output loop) are writing the same row of pixel data over and over.</p>\n\n<pre><code>//write pixel data to new file\nunsigned char p;\nfor (int j = 0; j &lt; H; j++)\n    {\n        for (int i = 0; i &lt; W; i++)\n        {\n            p = opx.pix[i];\n            outFile.write(reinterpret_cast&lt;char*&gt;(&amp;p), sizeof(p));\n        }\n    }\n</code></pre>\n\n<p>The <code>i</code> in this line:</p>\n\n<pre><code>            p = opx.pix[i];\n</code></pre>\n\n<p>is the column offset.  It starts over for each row.</p>\n\n<p>To fix it, you can change it to:</p>\n\n<pre><code>            p = opx.pix[j*W + i];\n</code></pre>\n\n<p>There are more efficient ways to do this, but this will get your code working.</p>\n\n<p>The 630 in your hex editor is the offset (in hex) from the beginning of your file, and your problem appears to start six bytes after that.  Note that 636h would be the first bytes of the second row of pixel data.  (File header is 14 bytes, DIB header is 40 bytes, color table is 1024 bytes, first row is 512 bytes.)  This was the clue as to where to look for the problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 5818376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66457e511dacf02f67c02b57c6e54f?s=128&d=identicon&r=PG&f=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5818376/james-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 0, "accepted_answer_id": 34935629, "answer_count": 1, "score": 2, "last_activity_date": 1453418918, "creation_date": 1453331124, "last_edit_date": 1495539894, "question_id": 34912357, "link": "https://stackoverflow.com/questions/34912357/how-to-write-512x512-pixel-array-to-a-bmp-file-256-colors-and-8-bpp-in-c-usi", "title": "How to write 512x512 pixel array to a bmp file (256 colors and 8 bpp) in c++ using ofstream?", "body": "<p>Let me start with an intro.  I've been reading about bitmap file format (wiki, msdn, etc) and researching <a href=\"https://stackoverflow.com/questions/9296059/read-pixel-value-in-bmp-file\">how to read and write bmp files in c++</a>. I'm writing a program in c++, without the use of bmp libraries, that can extract data from a bmp and then create a new bmp using that data. The purpose of this is to see if the new image file is the same as the original.  Then if it works I can move on to manipulating the extracted data in order to perform histogram equalization.  </p>\n\n<p>Currently, my program is able to successfully retrieve the Bitmap file header and Bitmap information header from the original bmp file then write it to a new bmp file.  It then does the same thing with the Color Table.  The problem occurs, or at least this is what I currently believe, with the Pixel data. It looks like it is being read correctly and even looks like it is being written correctly at first glance. When I open the new file in a hex editor and compare it to the original it can be seen that the values begin to differ at offset (h) 630. Also, the new image when opened doesn't look like the original.</p>\n\n<p>Here is the updated structure:</p>\n\n<pre><code>#pragma pack(2)                    // Using pragma to force structure format\nstruct BMPFH                       // Bitmap file header\n{\n  char HeaderField[2];             // Used to identify the BMP and DIB file is 0x42 0x4D in hexadecimal, same as BM in ASCII\n  unsigned int Size_of_BMP;        // size of the BMP file in bytes\n  unsigned short Reserved1;        // Reserved; actual value depends on the application that creates the image\n  unsigned short Reserved2;        // \"                                                                       \"\n  unsigned int StartAddress;       // offset, i.e. starting address, of the byte where the bitmap image data (pixel array) can be found\n};\n\n#pragma pack()\nstruct DIBH                        // Bitmap information header\n{\n  unsigned int Size_of_Header;     // Size of this header (40 bytes)\n  signed int Width;                // bitmap width in pixels (signed integer)\n  signed int Height;               // bitmap height in pixels (signed integer)\n  unsigned short Num_of_Planes;    // number of color planes (must be 1)\n  unsigned short Num_of_Bits;      // number of bits per pixel, which is the color depth (1, 4, 8, 16, 24, 32)\n  unsigned int CompMethod;         // compression method being used (0, 1, 2, 3)\n  unsigned int Size_of_Raw;        // size of the raw bitmap data\n  signed int HRes;                 // horizontal resolution of the image. (pixel per meter, signed integer)\n  signed int VRes;                 // vertical resolution of the image. (pixel per meter, signed integer)\n  unsigned int Num_of_Col;         // number of colors in the color palette, or 0 to default to 2^n\n  unsigned int Num_of_ICol;        // number of important colors used, or 0 when every color is important; generally ignored\n};\n\nstruct ColorTable\n{\n    unsigned char data[1024];\n};\n\nstruct Pixel\n{\n    unsigned char pix[262144];      \n};\n</code></pre>\n\n<p>This is the updated relevant code to the question:</p>\n\n<pre><code>//write pixel data to new file\n    unsigned char p;\n    for (int j = 0; j &lt; H; j++)\n    {\n        for (int i = 0; i &lt; W; i++)\n        {\n            p = opx.pix[j*W + i];\n            outFile.write(reinterpret_cast&lt;char*&gt;(&amp;p), sizeof(p));\n        }\n    }\n</code></pre>\n\n<p>This is what outputs to the screen:</p>\n\n<pre><code> Bitmap File Header\n\n Header Field: BM\n Size of BMP: 263222\n Start Address: 1078\n\n Bitmap Information Header\n\n Header size: 40\n Image width: 512\n Image height: 512\n Number of bits for pixel: 8\n Used compression: 0\n Image size: 0\n Horizontal resolution: 2835\n Vertical resolution: 2835\n Number of colors in the color palette: 256\n Number of important colors used: 256\n---------------------------------------------------\n\n Total number of bytes to store one row of pixels: 512\n\n Total amount of bytes to store the array of pixels: 262144\n\n The first three entries in color table: 0 0 0\n\n The first three pixels (Blue, Green, Red): 98 96 91\n</code></pre>\n\n<p>The hex editor I'm using is HxD. The compiler I'm using is Qt Creator.</p>\n\n<p>And this is the bmp image I'm using: <a href=\"https://drive.google.com/file/d/0B4emsCaxwnh5c3IxNWdsc1k2MGs/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0B4emsCaxwnh5c3IxNWdsc1k2MGs/view?usp=sharing</a></p>\n\n<p>Thank you to anyone who spent their valuable time looking over this wall of text.  I'd appreciate feedback and definitely let me know if I missed something obvious.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "list-initialization"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1453333059, "post_id": 34912592, "comment_id": 57561012, "body": "Nitpick: &quot;The two are identical, except that copy-list-initialization is ill-formed if an explicit constructor is chosen&quot;, <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1467\" rel=\"nofollow noreferrer\">except when the initializer list has a single element whose type is the same or derived from the type of the object being initialized</a> (which might get an exception to the exception to the exception if <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#2137\" rel=\"nofollow noreferrer\">there&#39;s an initializer_list constructor</a>)."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453335205, "post_id": 34912592, "comment_id": 57561708, "body": "@T.C. Thanks, I didn&#39;t know about either of those. But now that the first issue has a resolution, what I said is still correct, isn&#39;t it? The two differences are explicit constructors and narrowing conversions."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453335375, "post_id": 34912592, "comment_id": 57561760, "body": "Yes, I think, for now. Copy-list and copy-vanilla are more different."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 3, "last_activity_date": 1453332938, "last_edit_date": 1453332938, "creation_date": 1453332246, "answer_id": 34912592, "question_id": 34912221, "link": "https://stackoverflow.com/questions/34912221/is-list-initialization-an-implicit-conversion/34912592#34912592", "title": "Is list-initialization an implicit conversion?", "body": "<p>Your conclusion that </p>\n\n<pre><code>pair&lt;const type_index, std::string&gt; p = {typeid(int), \"int\"};\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>pair&lt;const type_index, std::string&gt; p(typeid(int), \"int\");\n</code></pre>\n\n<p>is not accurate because the first statement is <em>copy-list-initialization</em> while the second is <em>direct-initialization</em>. The two are identical, except that <em>copy-list-initialization</em> is ill-formed if an <code>explicit</code> constructor is chosen (and narrowing conversions are not allowed in the former).</p>\n\n<p>So if the <code>pair</code> constructor in question was defined as</p>\n\n<pre><code>template&lt;class U1, class U2&gt;\nexplicit constexpr pair(U1&amp;&amp; x, U2&amp;&amp; y);\n</code></pre>\n\n<p><em>direct-initialization</em> would still succeed, but <em>copy-list-initialization</em> would fail. Quoting from right below the parts of <em>[over.match.list]</em> you quoted</p>\n\n<blockquote>\n  <p>In copy-list-initialization, if an <code>explicit</code> constructor is chosen, the initialization is ill-formed.</p>\n</blockquote>\n\n<hr>\n\n<p>Other than that, everything else you've said is correct. The <code>pair</code> constructor is an implicit conversion because the constructor is not <code>explicit</code> and it's considered for overload resolution according to the second bullet of <em>[over.match.list]</em> because <code>pair</code> doesn't have an initializer list constructor.</p>\n"}], "owner": {"reputation": 1131, "user_id": 4338785, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e624595a16f268116870ed65489e5bc6?s=128&d=identicon&r=PG&f=1", "display_name": "Silversonic", "link": "https://stackoverflow.com/users/4338785/silversonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 1, "accepted_answer_id": 34912592, "answer_count": 1, "score": 7, "last_activity_date": 1453332938, "creation_date": 1453330477, "last_edit_date": 1453330619, "question_id": 34912221, "link": "https://stackoverflow.com/questions/34912221/is-list-initialization-an-implicit-conversion", "title": "Is list-initialization an implicit conversion?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;typeinfo&gt;\n#include &lt;typeindex&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\nclass Base{\npublic:\n    virtual ~Base() {}\n\n};\n\nclass Derived: public Base { };\n\nint main(){\n\n    int arr[10];\n    Derived d;\n    Base *p = &amp;d;\n\n    std::map&lt;std::type_index, std::string&gt; proper_name = {\n        {typeid(int), \"int\"}, {typeid(double), \"double\"}, {typeid(float), \"float\"}, {typeid(char), \"char\"},\n        {typeid(Base), \"Base\"}, {typeid(Derived), \"Derived\"}, {typeid(std::string), \"String\"},\n        {typeid(int[10]), \"Ten int Array\"}, {typeid(p), \"Base Pointer\"}};\n\n}\n</code></pre>\n\n<p>I'm trying to make sense of the implicit conversions that occur in this list-initialization. From <code>13.3.1.7</code> of N3337:</p>\n\n<blockquote>\n  <p>When objects of non-aggregate class type T are list-initialized (8.5.4), overload resolution selects the constructor in two phases: </p>\n  \n  <ol>\n  <li><p>Initially, the candidate functions are the initializer-list constructors (8.5.4) of the class T and the argument list consists of the initializer list as a single argument.</p></li>\n  <li><p>If no viable initializer-list constructor is found, overload resolution is performed again, where the candidate functions are all the constructors of the class T and the argument list consists of the elements of the initializer list.</p></li>\n  </ol>\n</blockquote>\n\n<p><code>8.5.4</code>:</p>\n\n<blockquote>\n  <p>A constructor is an initializer-list constructor if its first parameter is of type <code>std::initializer_list&lt;E&gt;</code> or reference to possibly cv-qualified <code>std::initializer_list&lt;E&gt;</code> for some type <code>E</code>, and either there are no other parameters or else all other parameters have default arguments</p>\n</blockquote>\n\n<p>So <a href=\"http://www.cplusplus.com/reference/map/map/map/\">the following</a> list of constructors for <code>std::map</code> indicates </p>\n\n<p><code>map (initializer_list&lt;value_type&gt; il,\n     const key_compare&amp; comp = key_compare(),\n     const allocator_type&amp; alloc = allocator_type())</code>;</p>\n\n<p>is the candidate function, <code>value_type</code> in this case is <code>pair&lt;const type_index, std::string&gt;</code>. Lastly from <code>13.3.3.1.5</code>: </p>\n\n<blockquote>\n  <p>If the parameter type is <code>std::initializer_list&lt;X&gt;</code> or \u201carray of <code>X</code>\u201d135 and all the elements of the initializer list can be implicitly converted to <code>X</code>, the implicit conversion sequence is the worst conversion necessary to convert an element of the list to <code>X</code>.</p>\n</blockquote>\n\n<p>So it is a valid conversion as long as the elements of the braced-list implicitly convert to <code>pair&lt;const type_index, std::string&gt;</code>. But those elements are also braced-lists themselves. <code>Pair</code> does not take an initializer-list constructor, <a href=\"http://en.cppreference.com/w/cpp/utility/pair/pair\">from here</a> it seems that copy-initialization from a braced-init list uses the second part of <code>13.3.1.7</code> to construct the object. So the following:</p>\n\n<pre><code>pair&lt;const type_index, std::string&gt; p = {typeid(int), \"int\"}\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>pair&lt;const type_index, std::string&gt; p(typeid(int), \"int\")\n</code></pre>\n\n<p>but is this considered an implicit conversion? How can use of a two-argument constructor be considered an implicit conversion? What are the standard's comments on this?</p>\n"}, {"tags": ["c++", "dll", "getprocaddress"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1453330698, "post_id": 34912195, "comment_id": 57560123, "body": "<code>BOOL(__cdecl </code>  Are you sure that the calling convention for this function is <code>__cdecl</code>, and not <code>__stdcall</code>?  Most API functions are <code>__stdcall</code>, with the most notable exception being <code>wsprintf</code> (since it takes a vararg parameter list)."}, {"owner": {"reputation": 21, "user_id": 3390835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a8a4fe58db5623f27848af1ecfa652?s=128&d=identicon&r=PG&f=1", "display_name": "user3390835", "link": "https://stackoverflow.com/users/3390835/user3390835"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1453332269, "post_id": 34912195, "comment_id": 57560714, "body": "I&#39;ve tried __stdcall, __cdecl , WINAPI - doesn&#39;t work with either...."}, {"owner": {"reputation": 21, "user_id": 3390835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a8a4fe58db5623f27848af1ecfa652?s=128&d=identicon&r=PG&f=1", "display_name": "user3390835", "link": "https://stackoverflow.com/users/3390835/user3390835"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1453333353, "post_id": 34912195, "comment_id": 57561102, "body": "Stack Trace points to Unhandled exception at 0x000000007744F6C6 (ntdll.dll) RtlEnterCriticalSection()"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3390835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a8a4fe58db5623f27848af1ecfa652?s=128&d=identicon&r=PG&f=1", "display_name": "user3390835", "link": "https://stackoverflow.com/users/3390835/user3390835"}, "edited": false, "score": 0, "creation_date": 1453332175, "post_id": 34912476, "comment_id": 57560682, "body": "I had previously tried various declarations - doesn&#39;t work.  Stack Trace fails in ntdll.dll."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 2, "last_activity_date": 1453331696, "last_edit_date": 1495542661, "creation_date": 1453331696, "answer_id": 34912476, "question_id": 34912195, "link": "https://stackoverflow.com/questions/34912195/how-to-resolve-access-violation-writing-location-when-calling-dll-method/34912476#34912476", "title": "How to resolve access violation writing location when calling dll method", "body": "<p>One issue that I see is that your function pointer declaration is incorrect.</p>\n\n<p>According to the Microsoft documentation, <a href=\"https://msdn.microsoft.com/en-us/library/ms525465%28v=vs.90%29.aspx\" rel=\"nofollow noreferrer\">GetFilterVersion</a> is prototyped as:</p>\n\n<pre><code>BOOL WINAPI GetFilterVersion(PHTTP_FILTER_VERSION pVer);\n</code></pre>\n\n<p>The <code>WINAPI</code> is a Windows macro that is actually defined as <code>__stdcall</code>, thus you are declaring the function pointer incorrectly when you used <code>__cdecl</code>.  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/2348442/what-does-winapi-in-main-function-mean\">What does WINAPI mean?</a></p>\n\n<p>Thus, your declaration should be:</p>\n\n<pre><code>typedef BOOL(__stdcall * TRIRIGAISAPIV)(PHTTP_FILTER_VERSION);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 1, "last_activity_date": 1453335549, "last_edit_date": 1453335549, "creation_date": 1453334831, "answer_id": 34913077, "question_id": 34912195, "link": "https://stackoverflow.com/questions/34912195/how-to-resolve-access-violation-writing-location-when-calling-dll-method/34913077#34913077", "title": "How to resolve access violation writing location when calling dll method", "body": "<p>It could be that there are actually some additional structure fields filled by the custom filter.</p>\n\n<p>You can try to increase the size of the structure to see if that will work, like for example:</p>\n\n<pre><code>struct HTTP_FILTER_VERSION_EXTRA {\n    HTTP_FILTER_VERSION v;\n    char[1024] extra;\n};\n\nHTTP_FILTER_VERSION_EXTRA ver;\nver.v.dwServerFilterVersion = 6;\nuReturnVal2 = lpfnDllFunc2(&amp;ver.v);\n</code></pre>\n\n<p>It is sometimes the case with the WinAPI structures that they allow versioning, so adding fields is possible. If the function doesn't then check (or doesn't know) the actual structure version, it might try to use an extended one which might be different than the one supplied - if the size of the supplied struct is then lesser than the structure version the func tries to use, bad things can happen.</p>\n\n<p>Also check if the DLL is 64-bit or 32-bit. You cannot use 64-bit DLL by 32-bit app and vice versa (but I expect that would already fail during the LoadLibrary call).</p>\n"}], "owner": {"reputation": 21, "user_id": 3390835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a8a4fe58db5623f27848af1ecfa652?s=128&d=identicon&r=PG&f=1", "display_name": "user3390835", "link": "https://stackoverflow.com/users/3390835/user3390835"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1453335549, "creation_date": 1453330375, "question_id": 34912195, "link": "https://stackoverflow.com/questions/34912195/how-to-resolve-access-violation-writing-location-when-calling-dll-method", "title": "How to resolve access violation writing location when calling dll method", "body": "<p>I'm using GetProcAddress to gain access to a standard Isapi Filter DLL method - the GetFilterVersion method which takes a pointer to a HTTP_FILTER_VERSION structure. </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms525822(v=vs.90).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms525822(v=vs.90).aspx</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms525465(v=vs.90).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms525465(v=vs.90).aspx</a></p>\n\n<p>I've tested the code against a working Isapi filter that I've written and it works fine. I debug the code against an Isapi filter from a vendor (I don't have access to the source code or anything beyond the dll itself) and I get the exception, \"access violation writing location\". What could be the issue?  (Both Isapi filters work in IIS.)</p>\n\n<pre><code>//Attempted to define function ptr several ways\ntypedef BOOL(__cdecl * TRIRIGAISAPIV)(PHTTP_FILTER_VERSION);\n//typedef BOOL( * TRIRIGAISAPIV)(PHTTP_FILTER_VERSION);\n//typedef BOOL(WINAPI * TRIRIGAISAPIV)(PHTTP_FILTER_VERSION);\n\nvoid arbitraryMethod()\n{\n   HINSTANCE hDLL;               // Handle to DLL\n   TRIRIGAISAPIV lpfnDllFunc2;    // Function pointer\n\n   DWORD lastError;\n   BOOL  uReturnVal2;\n\n   hDLL = LoadLibrary(L\"iisWASPlugin_http.dll\");  //vendor's dll\n   //hDLL = LoadLibrary(L\"KLTWebIsapi.dll   //my dll\n\n   if (hDLL != NULL)\n   {\n       lpfnDllFunc2 = (TRIRIGAISAPIV)GetProcAddress(hDLL, \"GetFilterVersion\");\n\n       if (!lpfnDllFunc2)\n       {\n           lastError = GetLastError();\n           // handle the error\n           FreeLibrary(hDLL);\n           //return 1;\n       }\n       else\n       {            \n           HTTP_FILTER_VERSION pVer = { 6 };\n\n           //Call the function via pointer; Works with my dll, fails with vendor's\n           uReturnVal2 = lpfnDllFunc2(&amp;pVer);\n\n           //................  HELP!!!!!!!!!!!!!\n       }\n   }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 758, "user_id": 4920666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioZLm_fl8LA/AAAAAAAAAAI/AAAAAAAAAjM/G80PuMpKkaw/photo.jpg?sz=128", "display_name": "smkanadl", "link": "https://stackoverflow.com/users/4920666/smkanadl"}, "edited": false, "score": 0, "creation_date": 1453330463, "post_id": 34912185, "comment_id": 57560026, "body": "Or a <code>using namespace main_savitch_2A;</code> in you main.cpp."}, {"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "reply_to_user": {"reputation": 758, "user_id": 4920666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioZLm_fl8LA/AAAAAAAAAAI/AAAAAAAAAjM/G80PuMpKkaw/photo.jpg?sz=128", "display_name": "smkanadl", "link": "https://stackoverflow.com/users/4920666/smkanadl"}, "edited": false, "score": 0, "creation_date": 1453346850, "post_id": 34912185, "comment_id": 57564885, "body": "Ohhh I see because this is the namespace specified in the .h file and the cpp. thank you!"}, {"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "reply_to_user": {"reputation": 758, "user_id": 4920666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioZLm_fl8LA/AAAAAAAAAAI/AAAAAAAAAjM/G80PuMpKkaw/photo.jpg?sz=128", "display_name": "smkanadl", "link": "https://stackoverflow.com/users/4920666/smkanadl"}, "edited": false, "score": 0, "creation_date": 1453347828, "post_id": 34912185, "comment_id": 57565124, "body": "An unrelated question: How do I cal the bool operator established in the .h file in the main.cpp file? Or is it supposed to execute during the throttle.cpp file? Because as of right now it is not"}, {"owner": {"reputation": 758, "user_id": 4920666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioZLm_fl8LA/AAAAAAAAAAI/AAAAAAAAAjM/G80PuMpKkaw/photo.jpg?sz=128", "display_name": "smkanadl", "link": "https://stackoverflow.com/users/4920666/smkanadl"}, "edited": false, "score": 0, "creation_date": 1453360007, "post_id": 34912185, "comment_id": 57569094, "body": "The less-than operator executes only if you call it.  E.g. <code>auto isLess = throt1 &lt; throt1;</code> in your main.cpp."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "edited": false, "score": 0, "creation_date": 1453347811, "post_id": 34912240, "comment_id": 57565122, "body": "An unrelated question: How do I cal the bool operator established in the .h file in the main.cpp file? Or is it supposed to execute during the throttle.cpp file? Because as of right now it is not."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 3, "last_activity_date": 1453330576, "creation_date": 1453330576, "answer_id": 34912240, "question_id": 34912185, "link": "https://stackoverflow.com/questions/34912185/class-not-declared-in-scope/34912240#34912240", "title": "Class Not Declared in Scope", "body": "<p>In your main, it should be <code>main_savitch_2A::throttle throt1(5, 0);</code>.<br/>\nThe same for <code>throt2</code>.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/namespace\" rel=\"nofollow\">namespaces</a> for further details.</p>\n"}], "owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1407, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453330576, "creation_date": 1453330320, "last_edit_date": 1453330547, "question_id": 34912185, "link": "https://stackoverflow.com/questions/34912185/class-not-declared-in-scope", "title": "Class Not Declared in Scope", "body": "<p>Getting a \"throttle not declared in this scope\" error when I attempt to compile the main.cpp. I am very new to c++, so bear with me. I have the <code>#include \"throttle.h\"</code> in the headers for both cpp files, so I am not sure why when i try to create a throttle object is is not declared...</p>\n\n<p>main.cpp file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"throttle.h\"\n\nusing namespace std;\nint main(int argc, char **argv)\n{\nthrottle throt1(5, 0);\nthrottle throt2(4, 0);\nreturn 0;\n}\n</code></pre>\n\n<p>throttle.h file:</p>\n\n<pre><code>#ifndef MAIN_SAVITCH_THROTTLE \n#define MAIN_SAVITCH_THROTTLE     \n\nnamespace main_savitch_2A\n{\nclass throttle\n{\npublic:\n    // CONSTRUCTORS\n    //throttle( );\n    //throttle(int size);\n    throttle(int size = 1, int start = 0); //by adding this default \n                                           //constructor the other two \n                                           //are not needed\n    // MODIFICATION MEMBER FUNCTIONS\n    void shut_off( ) { position = 0; }\n    void shift(int amount);\n    // CONSTANT MEMBER FUNCTIONS\n    double flow( ) const \n    { \n        return position / double(top_position); \n        }\n\n    bool is_on( ) const \n    { \n        return (position &gt; 0); \n    }\n\n    int get_top_position()const;\n    int get_position()const;\n\n    friend bool operator &lt;(const throttle&amp; throt1, const throttle&amp; throt2);\n    //postcondtion: returns true if flow of throt1 &lt; flow of throt2. \n    //return false if flow of throt1 &gt; flow of throt2\n\nprivate:\n    int top_position;\n    int position;\n};\n}\n#endif\n</code></pre>\n\n<p>throttle.cpp file :</p>\n\n<pre><code>#include &lt;cassert&gt;     // Provides assert\n#include \"throttle.h\"  // Provides the throttle class definition\nusing namespace std;   // Allows all Standard Library items to be used\n\nnamespace main_savitch_2A\n{\n\n//throttle::throttle( )\n//{   // A simple on-off throttle\n    //top_position = 1;\n    //position = 0;\n//}\n\n//throttle::throttle(int size)\n// Library facilities used: cassert\n//{\n    //assert(size &gt; 0);\n    //top_position = size;\n    //position = 0;\n//}\n\nthrottle::throttle(int size, int start)\n{\n    assert(size &gt; 0);\n    assert(start = 0);\n    top_position = size;\n    position = start;\n}\n\nvoid throttle::shift(int amount)\n{\nposition += amount;\n\nif (position &lt; 0)\n    position = 0;\nelse if (position &gt; top_position)\n    position = top_position;\n}\n\nbool operator &lt;(const throttle&amp; throt1, const throttle&amp; throt2)\n{\n    return(throt1.flow() &lt; throt2.flow());\n}\n\nint throttle::get_top_position()const\n{\n    return top_position;\n}\n\nint throttle::get_position()const\n{\n    return position;\n\n}\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "powershell", "winapi", "explorer"], "comments": [{"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1453344697, "post_id": 34911797, "comment_id": 57564287, "body": "FWIW, on my Windows Server 2008R2 (Win 7) system, using the verbs <code>taskbarpin</code> and <code>taskbarunpin</code> worked, whereas &quot;&amp;Pin to Taskbar&quot; and &quot;Unpin from Taskbar&quot; didn&#39;t work, in the call to InvokeVerb."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "reply_to_user": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1453443485, "post_id": 34911797, "comment_id": 57612428, "body": "Yeah thats what I meant...Windows 10 RTM also works, but was disabled in an update &quot;by design&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1453336588, "post_id": 34911948, "comment_id": 57562101, "body": "are you suggesting to somehow cast a number below 65536 as a pointer to a string in Powershell? I suppose using Runtime.Marshal or some other form of .NET/COM interop that might be possible."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1453336649, "post_id": 34911948, "comment_id": 57562117, "body": "@user2460798 Nope, I was answering the &quot;or Win32 C/C++&quot; part of the question. No idea how you would do this in the other things."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 1, "last_activity_date": 1453329243, "creation_date": 1453329243, "answer_id": 34911948, "question_id": 34911797, "link": "https://stackoverflow.com/questions/34911797/windows-shell-automation-invokeverb-based-on-number-instead-of-command-string/34911948#34911948", "title": "Windows Shell Automation InvokeVerb based on number instead of command string", "body": "<p>The underlying shell context menu extension system actually works with numeric IDs natively; string verbs are an <strong>optional</strong> layer on top. However as you observe, command IDs are internal to a context menu extension and are not guaranteed to stay the same between versions (or even between invocations) - the whole point of verbs is that they allow commands to be invoked programatically irrespective of their ID.</p>\n\n<p>In C/C++ you can invoke a command by its ID by casting the numeric ID as a string pointer (the rationale being that since all valid string pointers are higher than 65535, it's \"safe\" to pass a number as a string pointer as long as it fits into 16 bits, since the receiving API is able to correctly determine whether it is a \"real string\" or not).</p>\n\n<p>Note that this is different from printing the number as a string, which is not correct. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648029(v=vs.85).aspx\" rel=\"nofollow\"><code>MAKEINTRESOURCE</code></a> macro exists for exactly this purpose.</p>\n\n<p>E.g., a command with ID 1234 would be invoked using <code>MAKEINTRESOURCE(1234)</code> as the verb.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 5739443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953b8f82ebef80e4ff265cffb95dea?s=128&d=identicon&r=PG&f=1", "display_name": "lidqy", "link": "https://stackoverflow.com/users/5739443/lidqy"}, "is_accepted": false, "score": 1, "last_activity_date": 1572745048, "last_edit_date": 1572745048, "creation_date": 1572744737, "answer_id": 58676730, "question_id": 34911797, "link": "https://stackoverflow.com/questions/34911797/windows-shell-automation-invokeverb-based-on-number-instead-of-command-string/58676730#58676730", "title": "Windows Shell Automation InvokeVerb based on number instead of command string", "body": "<p>I ran into the same problem these days, in a Windows Script Host based script.</p>\n\n<p>Invoking the verb with the localized string didn't work as it used to.\nHowever you can still get the item's \"Verbs\" collection and then enumerate them until you get the verb you want to invoke. Then you can invoke it using it's \"DoIt\" method, without the need to pass the verbs name in.</p>\n\n<p>In a WSH JScript it looks like this:</p>\n\n<pre><code>    /* workaround for 'item.InvokeVerb(\"&amp;Delete\")' which no longer works */\n\n    var verbs = item.Verbs(); // item == return of folder.ParseName(..)\n\n    for (var x = 0; x &lt; verbs.Count; x++)\n    {\n        var verb = verbs.Item(x);\n        if (verb.Name == \"&amp;Delete\") //replace with \"&amp;Pin to taskbar\"\n        {                   \n            try\n            {\n                verb.DoIt();\n                WSH.Echo (\"Deleted:\", item.Name);\n            }\n            catch(e)\n            {\n                WSH.Echo (\"Error Deleting:\", item.Name + \"\\r\\n\\t\", e.description, e.number);\n            }\n\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Likely it also works somehow in PowerShell</p>\n\n<p>ffr:<br/>\n<a href=\"https://docs.microsoft.com/en-us/windows/win32/shell/folderitem-verbs\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/shell/folderitem-verbs</a><br/>\n<a href=\"https://docs.microsoft.com/en-us/windows/win32/shell/folderitemverb\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/shell/folderitemverb</a></p>\n"}], "owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 34911948, "answer_count": 2, "score": 1, "last_activity_date": 1572745048, "creation_date": 1453328621, "question_id": 34911797, "link": "https://stackoverflow.com/questions/34911797/windows-shell-automation-invokeverb-based-on-number-instead-of-command-string", "title": "Windows Shell Automation InvokeVerb based on number instead of command string", "body": "<p>Normally shell automation InvokeVerb only accepts a string command, based on the documentation here: <a href=\"https://msdn.microsoft.com/en-us/library/ms723189(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms723189(v=vs.85).aspx</a></p>\n\n<p>However I noticed a cmd line EXE utility that accepts a number instead\n<a href=\"http://www.technosys.net/products/utils/pintotaskbar\" rel=\"nofollow\">http://www.technosys.net/products/utils/pintotaskbar</a></p>\n\n<p>This is interesting because in Windows 10 \"&amp;Pin to taskbar\" is removed from shell automation, despite being visible in the UI. ( <a href=\"https://connect.microsoft.com/PowerShell/feedback/details/1609288/pin-to-taskbar-no-longer-working-in-windows-10\" rel=\"nofollow\">https://connect.microsoft.com/PowerShell/feedback/details/1609288/pin-to-taskbar-no-longer-working-in-windows-10</a> )</p>\n\n<p>However with this EXE passing the \"number\" 5386 as the command works.</p>\n\n<p>I am interested to know what methods can be used to achieve this in either PowerShell/VBScript/.NET language or Win32 C/C++. </p>\n\n<p>I understand this is almost certainly unsupported and likely to break any time as these numbers have changed between OS releases.</p>\n\n<p>An example using the string version in PowerShell</p>\n\n<pre><code>$filepath = \"C:\\windows\\system32\\notepad.exe\"\n$path = Split-Path $FilePath \n$shell= New-Object -com \"Shell.Application\"  \n$folder=$shell.Namespace($path)    \n$item = $folder.Parsename((split-path $FilePath -leaf)) \n$item.InvokeVerb(\"&amp;Pin to taskbar\")\n</code></pre>\n"}, {"tags": ["c++", "mpi", "openmpi"], "comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 2, "creation_date": 1453356412, "post_id": 34911759, "comment_id": 57567732, "body": "Share code.  See MCVE."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1453508976, "post_id": 34911759, "comment_id": 57648006, "body": "Please distil down your algorithm into an MWE (minimal working example) that still reproduces the problem in question. Often the action of producing the MWE itself could lead you to finding the solution."}], "owner": {"reputation": 641, "user_id": 1032856, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/4rnGZ.gif?s=128&g=1", "display_name": "The Wind-Up Bird", "link": "https://stackoverflow.com/users/1032856/the-wind-up-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453328442, "creation_date": 1453328442, "question_id": 34911759, "link": "https://stackoverflow.com/questions/34911759/mpi-code-runs-successfully-on-one-computer-but-not-another", "title": "MPI Code runs successfully on one computer but not another?", "body": "<p>I have written some scientific software in C++ that makes use of MPI. I first wrote the code in serial and then wrote a parallel version (implemented with MPI). I completed a portion of the MPI code on my desktop at home, where it was tested against a known analytical solution as well as the serial code. It completed these successfully and the code is correct.</p>\n\n<p>I later tested this code on an external cluster to understand the scaling as the number of processors is increased, and running with 1, 2, 4, 8, and 16 processors all led to a successful calculation.</p>\n\n<p>I am now adding on to the code on my laptop and the output data diverges no matter the number of processors (even using 1 processor), although the identical (except for MPI-portions) serial code calculates the correct answer. At first I assumed that I accidentally changed something and reverted to an older version, only to find the same thing. I then went and ran the older version on the external cluster, where, to my surprise, it calculated the correct answer. I <code>scp</code>'d this code (tarballed it as-is from the cluster) back to my laptop and ran it with the exact same parameters, where I found that the output is incorrect (and divergent).</p>\n\n<p>What could possibly cause this? I am running the latest version of OpenMPI (1.10.1) on OSX El Capitan, installed using Homebrew. I have tried both with <code>mpirun</code> and <code>mpiexec</code>, and they both give the same results. I am totally at a loss here.</p>\n\n<p>One idea I did have was that it could be due to conflicting OpenMPI installs? I found that <code>anaconda</code> (the Python distribution) had its own version of OpenMPI, which I uninstalled (no change). As far as I can tell, there is no other version of MPI on my computer, but I suppose it is possible there is some conflicting library file lurking somewhere that is causing these issues.</p>\n"}, {"tags": ["c++", "loops", "while-loop", "cin"], "comments": [{"owner": {"reputation": 68, "user_id": 1368391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445f7f672dfd59b462c2136d3c5e4267?s=128&d=identicon&r=PG", "display_name": "GrGom", "link": "https://stackoverflow.com/users/1368391/grgom"}, "edited": false, "score": 2, "creation_date": 1453328343, "post_id": 34911668, "comment_id": 57559085, "body": "I see many issues with that code. Take a look at this article on how to get data from cin while being type-safe: <a href=\"http://www.cplusplus.com/forum/articles/6046/\" rel=\"nofollow noreferrer\">cplusplus.com/forum/articles/6046</a>"}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1453328722, "post_id": 34911668, "comment_id": 57559259, "body": "Take a look at <code>getline(..)</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1453329770, "post_id": 34911668, "comment_id": 57559719, "body": "The &quot;something else&quot; entered by the user is still waiting in the input buffer. You have to remove it before reading another number, like <code>paid</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1453414753, "last_edit_date": 1453414753, "creation_date": 1453330449, "answer_id": 34912212, "question_id": 34911668, "link": "https://stackoverflow.com/questions/34911668/c-after-running-while-loop-with-cin-the-program-wont-take-input-again/34912212#34912212", "title": "C++ - After running while loop with cin, the program won&#39;t take input again", "body": "<p>When you use <code>cin.clear()</code>, it resets the error flags. However, the data in the stream are still there. You'll need to ignore the rest of the line before trying to read <code>paid</code>.</p>\n\n<pre><code>cin.clear();\ncin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>Make sure to add <code>#include &lt;limits&gt;</code> to use <code>std::numeric_limits</code></p>\n"}], "owner": {"reputation": 199, "user_id": 5272740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d171d615ba7da8335044482e2f05d94e?s=128&d=identicon&r=PG&f=1", "display_name": "Kenta", "link": "https://stackoverflow.com/users/5272740/kenta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2159, "favorite_count": 0, "accepted_answer_id": 34912212, "answer_count": 1, "score": 0, "last_activity_date": 1591746749, "creation_date": 1453328034, "last_edit_date": 1591746749, "question_id": 34911668, "link": "https://stackoverflow.com/questions/34911668/c-after-running-while-loop-with-cin-the-program-wont-take-input-again", "title": "C++ - After running while loop with cin, the program won&#39;t take input again", "body": "<p>I am running a while loop that will take floats entered by users and add them together until something else is put in the input.</p>\n\n<pre><code>while(cin &gt;&gt; input)\n{\n    price += input;\n    cout &lt;&lt; \"Next price: \";\n}\n</code></pre>\n\n<p>After this, I have the user input how much they paid:</p>\n\n<pre><code>cout &lt;&lt; \"Enter the amount paid: \";\ncin &gt;&gt; paid;\ncout &lt;&lt; \"You paid: \" &lt;&lt; paid &lt;&lt; endl;\n</code></pre>\n\n<p>When running the program, the loop executes fine, and I can get it to <code>cout</code> the total price correctly, but it skips the <code>cin &gt;&gt; paid;</code> line and will output as <code>You paid: nan</code>.</p>\n\n<p>I tried putting <code>cin.clear()</code> between the loop and the next input, but then upon running it, the output was: <code>You paid: 0</code></p>\n\n<p>Do I need to change my while loop or use a different version to clear input? I'm pretty new to C++. Thanks!</p>\n"}, {"tags": ["c++", "visual-studio", "cmake", "shared-libraries"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1453327832, "post_id": 34911583, "comment_id": 57558821, "body": "can you post a (very) minimal (working) example of your cmake file so we can see what you tried?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1453333611, "post_id": 34911583, "comment_id": 57561180, "body": "Seems like what you&#39;re trying to achieve would be similar to basically setting up the <code>PATH</code> environment variable so the executable can actually find the dll at runtime. If that is correct, I don&#39;t think that CMake actually has built-in support for that (which is very unfortunate). The framework that I&#39;m working with uses CMake to generate a <code>bat</code> file which sets up the environment either before the IDE is run or before the executable is run."}, {"owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1453387620, "post_id": 34911583, "comment_id": 57587055, "body": "@RichardHodges I added a minimal version of my current CMakeLists.txt"}, {"owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "reply_to_user": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1453387843, "post_id": 34911583, "comment_id": 57587221, "body": "@Rostislav So you think this might just be a feature of Visual Studio and not possible in CMake? Is there no way to setup a path for the build to use. I mean when I change the location of my DLLS with the build in VS, my program won&#39;t run, so it is just telling it where to look."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1453388002, "post_id": 34911583, "comment_id": 57587337, "body": "there&#39;s no call to <code>target_link_libraries(${EXE_NAME} mylib)</code>"}, {"owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "edited": false, "score": 0, "creation_date": 1453390012, "post_id": 34911583, "comment_id": 57588751, "body": "Sorry about that I actually had the line in my cmake file, just forgot to copy it over."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1453400667, "post_id": 34911583, "comment_id": 57595796, "body": "@MrJman006 The build step doesn&#39;t use the <code>dll</code>, it uses the import <code>lib</code> (just to make sure we&#39;re on the same page). This problem is not completely specific to MS toolchain though - the shared libraries in *nix systems can have similar problems. In Linux it&#39;s a smaller issue though due to the RPATH mechanism that is embedded in the executable, but sometimes it has similar issues. And I&#39;m afraid that your best bet would be either the <code>install</code> target which will copy the exe and dlls to same location, or bat file generation. I would love to be corrected though - I&#39;m somewhat suffering myself :)"}, {"owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "reply_to_user": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1453405358, "post_id": 34911583, "comment_id": 57598535, "body": "@Rostislav Yes I understand what you mean. I may have said it wrong, but I understand the dll is not built into my executable. Now correct me if I am wrong, but does Windows not have a mechanism similar to RPATH? One link came across talked about using CMake to setup RPATH and to make sure the library is installed at one of the paths in RPATH?"}, {"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1453476986, "post_id": 34911583, "comment_id": 57632240, "body": "Does your library have <code>.lib</code> file?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1453766464, "post_id": 34911583, "comment_id": 57737466, "body": "@MrJman006 I&#39;m not aware of a similar mechanism on windows - this is what MSDN has to say on the dll search order: <a href=\"https://msdn.microsoft.com/en-us/library/7d83bc18.aspx\" rel=\"nofollow noreferrer\">link</a>."}], "owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2235, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1453389984, "creation_date": 1453327690, "last_edit_date": 1495539894, "question_id": 34911583, "link": "https://stackoverflow.com/questions/34911583/cmake-adding-external-dependencies", "title": "CMake Adding External Dependencies", "body": "<p>I am trying to convert a Visual Studio 2013 project that I have over to use CMake, but am running into issues when I include a source header file that uses some shared libraries. In my original VS project properties under Common Properties > References I have added several references I need in my project. There are options like a relative path to the library, some build settings and and so on. The XML generated in my VS project file looks very similar to the following:</p>\n\n<pre><code>&lt;Project&gt;\n.\n.\n.\n  &lt;ItemGroup&gt;\n    &lt;Reference Include=\"MyLib\"&gt;\n      &lt;HintPath&gt;../lib/MyLib.dll&lt;/HintPath&gt;\n    &lt;/Reference&gt;\n    &lt;Reference Include=\"System\"&gt;\n      &lt;CopyLocalSatelliteAssemblies&gt;true&lt;/CopyLocalSatelliteAssemblies&gt;\n      &lt;ReferenceOutputAssembly&gt;true&lt;/ReferenceOutputAssembly&gt;\n    &lt;/Reference&gt;\n    .\n    .\n    .\n  &lt;/ItemGroup&gt;\n</code></pre>\n\n<p>Basically I want to be able to use 'MyLib.dll', 'System', and my other references, but I don't know how to include them via CMake.</p>\n\n<p>I did some Googling and found this: <a href=\"https://stackoverflow.com/questions/8774593/cmake-link-to-external-library\">CMake link to external library</a>, but that didn't seem to work. Any ideas what commands I need to use to use the shared libraries?</p>\n\n<p>EDIT:</p>\n\n<p>A minimal version of my current CMakeLists.txt file</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0.2)\nproject(MyProject)\nset(EXE_NAME \"MyExe\")\n\nset(SOURCES\n    \"src/main.cpp\"\n    \"src/SourceUsingDLL.cpp\"\n    \"src/others.cpp\"\n)\n\nset(HEADERS\n    \"include/HeaderUsingDLL.h\"\n    \"include/otherHeaders.h\"\n)\n\ninclude_directories(include)\n\nadd_executable(${EXE_NAME} ${SOURCES} ${HEADERS})\n\n### What I tried - Didn't work ####\nadd_library( mylib SHARED IMPORTED )\nset_target_properties( mylib PROPERTIES IMPORTED_LOCATION pathToDLL )\ntarget_link_libraries(${EXE_NAME} mylib)\n</code></pre>\n\n<p>For the dll path I used both relative and absolute for my local dll, but I don't what what I would do for the System reference.</p>\n"}, {"tags": ["c++", "pointers", "null", "codeblocks", "singly-linked-list"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 2, "creation_date": 1453327724, "post_id": 34911569, "comment_id": 57558777, "body": "Indent your code and then use a debugger....you&#39;ll find where the bug is."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453330641, "post_id": 34911569, "comment_id": 57560098, "body": "<code>Library::book *Library::initNode(string s, int i)</code> should probably be a <code>book</code> constructor instead. <code>Library</code> shouldn&#39;t have to know how to construct a book. That&#39;s <code>book&#39;</code>s job."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453331058, "post_id": 34911569, "comment_id": 57560264, "body": "<code>void displayList(book *ptr) const</code> having to pass in a book to <code>displayList</code> seems a bit odd. <code>displayList</code> already knows its list. The current implementation would allow users to call <code>a.displayList(b.head);</code>, to get a list of <code>b</code> and that&#39;s just goofy. On the other hand <code>static void displayList(book *ptr)</code> would make sense."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453331148, "post_id": 34911569, "comment_id": 57560301, "body": "displayNode is similar, but should be a member of <code>book</code>. No reason for <code>Library</code> to know how to print a <code>book</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453328292, "post_id": 34911681, "comment_id": 57559059, "body": "@user4581301: What does that mean?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453328388, "post_id": 34911681, "comment_id": 57559101, "body": "<code>libri *current, *temp;</code> isn&#39;t the sort of thing that will compile. <code>book  *current, *temp;</code>, on the other hand..."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453328586, "post_id": 34911681, "comment_id": 57559207, "body": "@user4581301: True, but, actually, I did not work it around.....I simply did not try to compile the code at all...;-)"}, {"owner": {"reputation": 3, "user_id": 5400515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed63f61c74b2db4f07592d4f4d581ba?s=128&d=identicon&r=PG&f=1", "display_name": "D.K", "link": "https://stackoverflow.com/users/5400515/d-k"}, "edited": false, "score": 0, "creation_date": 1453329579, "post_id": 34911681, "comment_id": 57559637, "body": "I meant book instead of libri ..the problem was that I had wrote head = newNode , instead of tail=newNode ..I works just fine now"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 5400515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed63f61c74b2db4f07592d4f4d581ba?s=128&d=identicon&r=PG&f=1", "display_name": "D.K", "link": "https://stackoverflow.com/users/5400515/d-k"}, "edited": false, "score": 0, "creation_date": 1453330274, "post_id": 34911681, "comment_id": 57559924, "body": "@D.K you will also want to move the <code>tail-&gt;next = newNode; newNode-&gt;next = NULL; tail = newNode;</code> into an else. Without the else works, but it&#39;s a convoluted mess or stuff pointing to itself."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 0, "last_activity_date": 1453560318, "last_edit_date": 1453560318, "creation_date": 1453328109, "answer_id": 34911681, "question_id": 34911569, "link": "https://stackoverflow.com/questions/34911569/exe-has-stopped-working-code-blocks-cpp/34911681#34911681", "title": ".exe has stopped working code blocks cpp", "body": "<p>When you call the first <code>a.addNode(ptrr)</code> from <code>main</code> it does <code>tail-&gt;next = newNode;</code> (within <code>Library::addNode</code>), but, as <code>tail</code> is <code>NULL</code> (not assigned yet), it crashs....</p>\n\n<p>Now, there could be other problems in the code, but this is most likely the first one that will make the program stop working...</p>\n\n<p>Note that some stuff in your code could be simplified.</p>\n\n<p>Like:</p>\n\n<pre><code>Library::book *Library::initNode(string s, int i)\n{\n    book *ptr = new book;\n    if (ptr == NULL)\n        return static_cast&lt;book *&gt;(NULL);\n    else\n    {\n        ptr-&gt;tittle = s;\n        ptr-&gt;number = i;\n        return ptr;\n    }\n}\n</code></pre>\n\n<p>could simply be:</p>\n\n<pre><code>Library::book *Library::initNode(string s, int i)\n{\n    book *ptr = new book;\n    if (ptr != NULL)\n    {\n        ptr-&gt;tittle = s;\n        ptr-&gt;number = i;\n    }\n    return ptr;\n}\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>void Library::addNode(book *newNode)\n{\n    if (head == NULL)\n    {\n        head = newNode;\n        head = newNode;\n    }\n    tail-&gt;next = newNode;\n    newNode-&gt;next = NULL;\n    tail = newNode;\n}\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>void Library::addNode(book *newNode)\n{\n    if ( newNode != NULL ) // just in case\n    {\n        if (head == NULL)\n        {\n            head = newNode; // one is enough\n        }\n        if ( tail != NULL ) // to fix your crash\n            tail-&gt;next = newNode;\n        newNode-&gt;next = NULL;\n        tail = newNode;\n    }\n}\n</code></pre>\n\n<p>Also, see user4581301 comment, the destructor code does not even compile....</p>\n"}], "owner": {"reputation": 3, "user_id": 5400515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed63f61c74b2db4f07592d4f4d581ba?s=128&d=identicon&r=PG&f=1", "display_name": "D.K", "link": "https://stackoverflow.com/users/5400515/d-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 34911681, "answer_count": 1, "score": -2, "last_activity_date": 1453560318, "creation_date": 1453327635, "last_edit_date": 1453328524, "question_id": 34911569, "link": "https://stackoverflow.com/questions/34911569/exe-has-stopped-working-code-blocks-cpp", "title": ".exe has stopped working code blocks cpp", "body": "<p>`Hello \nI just wrote this code in Code Blocks and after building and running , it says that the programm has stopped working. I can't find what I have done wrong. I don't know if the problem is related to my code or is something that has to do with the compiler I am using or something else.\nPlease help </p>\n\n<p>Library.h:</p>\n\n<pre><code>#ifndef LIBRARY_H\n#define LIBRARY_H\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nclass Library\n{\npublic:\n    struct book\n    {\n\n        string tittle;\n        int number;\n        struct book* next;\n    }* head, *tail, *ptr;\n\n    Library();\n    ~Library();\n    book* searchName(book *, string);\n    void addNode(book *);\n    book *initNode(string s, int i);\n    void displayNode(book *ptr) const;\n    void displayList(book *ptr) const;\nprotected:\n};\n\n#endif\n</code></pre>\n\n<p>Library.cpp</p>\n\n<pre><code>#include \"Library.h\"\n\nLibrary::Library() :\n        head(NULL), tail(NULL)\n{\n}\n\nLibrary::~Library()\n{\n    book *current, *temp;\n\n    current = head;\n\n    temp = head;\n    while (current != NULL)\n    {\n        current = current-&gt;next;\n        delete temp;\n        temp = current;\n    }\n}\n\nLibrary::book * Library::searchName(Library::book* ptr, string name)\n{\n    while (name != ptr-&gt;tittle)\n    {\n        ptr = ptr-&gt;next;\n        if (ptr == NULL)\n            break;\n    }\n    return ptr;\n}\n\nvoid Library::addNode(book *newNode)\n{\n    if (head == NULL)\n    {\n        head = newNode;\n        head = newNode;\n    }\n    tail-&gt;next = newNode;\n    newNode-&gt;next = NULL;\n    tail = newNode;\n}\n\nLibrary::book *Library::initNode(string s, int i)\n{\n    book *ptr = new book;\n    if (ptr == NULL)\n        return static_cast&lt;book *&gt;(NULL);\n    else\n    {\n        ptr-&gt;tittle = s;\n        ptr-&gt;number = i;\n        return ptr;\n    }\n}\n\nvoid Library::displayNode(book *ptr) const\n{\n\n    cout &lt;&lt; ptr-&gt;number &lt;&lt; \": \" &lt;&lt; ptr-&gt;tittle &lt;&lt; endl;\n}\n\nvoid Library::displayList(book *ptr) const\n{\n    if (!ptr)\n        cout &lt;&lt; \"Nothing to display\" &lt;&lt; endl;\n    while (ptr)\n    {\n        displayNode(ptr);\n        ptr = ptr-&gt;next;\n    }\n}\n</code></pre>\n\n<p>main.cpp    </p>\n\n<pre><code>#include \"Library.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    Library a;\n    Library::book *ptrr;\n    ptrr = a.initNode(\"s1\", 1);\n    a.addNode(ptrr);\n    ptrr = a.initNode(\"s2\", 2);\n    a.addNode(ptrr);\n    a.displayList(a.head);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "performance", "gcc", "struct"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1453327492, "post_id": 34911427, "comment_id": 57558650, "body": "Whay can&#39;t you use an array as posted in your example?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1453327694, "post_id": 34911427, "comment_id": 57558759, "body": "You could add an <code>operator[]</code> overload with a switch statement"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453327808, "post_id": 34911427, "comment_id": 57558811, "body": "Undefined behavior, of course."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1453328016, "post_id": 34911427, "comment_id": 57558921, "body": "This would seem to violate the strict aliasing rule.  Perhaps you are trying to achieve something along the lines of <code>union</code>."}, {"owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453329669, "post_id": 34911427, "comment_id": 57559678, "body": "@M.M: Operator[] with a switch statement would not fix my performance issue."}, {"owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453329676, "post_id": 34911427, "comment_id": 57559683, "body": "@SergeyA: Is there any way to make is defined?"}, {"owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1453329717, "post_id": 34911427, "comment_id": 57559698, "body": "@paddy: Good point for the strict aliasing rule. Union is a good idea, but I am not sure about how to only do it on part of my struct unless I do it on all the struct and put my attributes at the beginning, but this is unsafe. Any suggestion?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331121, "post_id": 34911427, "comment_id": 57560290, "body": "@Nicop I&#39;m having trouble seeing where you&#39;re coming from. Your function <code>accessElement</code> is obviously slower than accessing the individual members by name. I am assuming you wrote it for convenience rather than performance, so you can iterate over the members in a loop for example."}, {"owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331332, "post_id": 34911427, "comment_id": 57560374, "body": "@M.M I need to access randomly one of the attributes based on an enum passed in input. This function is called a lot of times and the value of the index is roughly random."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331754, "post_id": 34911427, "comment_id": 57560535, "body": "A switch statement sounds like an ideal solution then, I&#39;m not sure what makes you think that would perform worse than your &quot;improvement&quot; . Perhaps you could benchmark your code with both options."}, {"owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331915, "post_id": 34911427, "comment_id": 57560598, "body": "@M.M I already profiled the function using callgrind. With 6 attributes and a switch statement, lookup takes between 400 and 450 instructions over 22 calls with random values (cannot be optimized at compile time). With an array (using my hack), it drops to between 100 and 120. All of that using gcc 4.3 and -O2 flag. Edit: The number of instructions is in total over the 22 calls, so around 20 instructions per call for the switch and 5 for the array. The real function also contains an if statement (the struct is passed as a pointer, not a reference)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453334347, "post_id": 34911427, "comment_id": 57561448, "body": "That seems a bit fishy, maybe worth investigating what happened."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453334386, "post_id": 34911427, "comment_id": 57561456, "body": "Note that the union option is not supported by ISO C++ (although neither is your pointer hack). It&#39;s still relying on compiler-specific behaviour."}], "owner": {"reputation": 194, "user_id": 3785301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ece5de7c955b7d30eca961aed5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Nicop", "link": "https://stackoverflow.com/users/3785301/nicop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "closed_date": 1453328015, "answer_count": 0, "score": 0, "last_activity_date": 1453331502, "creation_date": 1453327130, "last_edit_date": 1495541048, "question_id": 34911427, "link": "https://stackoverflow.com/questions/34911427/access-c-struct-attribute-like-in-an-array", "closed_reason": "Duplicate", "title": "Access c++ struct attribute like in an array", "body": "<p>For performance concern, I would like to access some attributes of an existing c++ struct like an array. Here is the type of structure I have: </p>\n\n<pre><code>struct MyStruct {\n  Class1 c1;\n  Class2 c2;\n  MyClass myFirstAttribute, mySecondAttribute, /* ... */, myLastAttribute;\n  Class3 c3;\n  Class4 c4;\n};\n</code></pre>\n\n<p>My goal would be to access the attributes of type <code>MyClass</code> as if they were an\narray such as:</p>\n\n<pre><code>struct MyStruct {\n  Class1 c1;\n  Class2 c2;\n  MyClass myArray[20];\n  Class3 c3;\n  Class4 c4;\n};\n</code></pre>\n\n<p>The class MyClass only contains 1 member (a <code>double</code>). So far, I\nwrote the following function and it seems to work, but I am wondering if I am not just lucky that the attributes are aligned as expected:</p>\n\n<pre><code>MyClass&amp; accessElement(struct MyStruct &amp;s, int index)\n{\n  MyClass *myArray = &amp;s.myFirstAttribute;\n  return myArray[index];\n}\n</code></pre>\n\n<h1>Reason</h1>\n\n<p>Please note that this is only temporary, I know it is better to directly use\nan array but it needs quite a few changes, but I need the change to be\ntransparent as I don't manage all the code using this struct. Also, the\nreason behind the change is for performance as the function was previously\nimplemented using a switch statement, and compiled as a if - then - else\nstatement. I am compiling using gcc 4.3 with -std=c++98 and -O2 options among others.</p>\n\n<h1>Bonus</h1>\n\n<p>I also tried several other tricks, but it didn't work as I am playing with a\nvery big and complicated code, such as:</p>\n\n<ul>\n<li>Add the array as an attribute and change the attributes to references\npointing to the the corresponding index of the array. This didn't work as\nit needs the copy constructor somewhere in the code and I needed to\nimplement it, which is very fastidious (the struct is much more\ncomplicated).</li>\n<li>Use a define macro to automatically replace all strings with the name of the\nattributes I want to replace by the corresponding array with index (see\nbelow). This didn't work as some variables in another part of the code\nhave the same name than the attributes.</li>\n</ul>\n\n<p>Using define:</p>\n\n<pre><code>#define myFirstAttribute myArray[0]\n#define mySecondAttribute myArray[1]\n#define myLastAttribute myArray[20]\n</code></pre>\n\n<h1>Qestions</h1>\n\n<p>Any other ideas? Or is there any way I could make my hack safer to ensure it compiles as expected?</p>\n\n<h1>Edit</h1>\n\n<p>As suggested <a href=\"https://stackoverflow.com/a/3178461/3785301\">in this post</a> (thank you @Thomas Matthews for the link), a lookup table would be better, however you pay the cost of the indirection (same as virtual functions I think). I am wondering if something like that would be legit:</p>\n\n<pre><code>struct MyStruct {\n  Class1 c1;\n  Class2 c2;\n\n  union {\n    struct {\n      MyClass myFirstAttribute, mySecondAttribute, /* ... */, myLastAttribute;\n    };\n    MyClass myArray[];\n  };\n  Class3 c3;\n  Class4 c4;\n};\n</code></pre>\n\n<p>This seems to work, and is not suggested in the other post. Do I need to pack the anonymous struct? Any suggestion?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1453326052, "post_id": 34911062, "comment_id": 57557835, "body": "Good job, nice code.....what&#39;s your problem actually?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453326065, "post_id": 34911062, "comment_id": 57557841, "body": "Would be cool to know the question."}], "answers": [{"tags": [], "owner": {"reputation": 550, "user_id": 3545806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4bd08c73006f268281c9e001da13e12f?s=128&d=identicon&r=PG&f=1", "display_name": "VladimirS", "link": "https://stackoverflow.com/users/3545806/vladimirs"}, "is_accepted": true, "score": 2, "last_activity_date": 1453326095, "creation_date": 1453326095, "answer_id": 34911157, "question_id": 34911062, "link": "https://stackoverflow.com/questions/34911062/count-how-many-times-number-entered-until-the-first-symmetry-number-is-entered/34911157#34911157", "title": "Count how many times number entered until the first symmetry number is entered", "body": "<p>Move int z=0, r=0; inside for loop.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453326386, "post_id": 34911193, "comment_id": 57558020, "body": "This is most likely an assignment."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453326497, "post_id": 34911193, "comment_id": 57558092, "body": "@SergeyA: Sure....but it does not mean you have to manipulate numbers (except if OP posts the assignment constraints....). It looks more elegant to me and definitely easier to understand what the code does.....Teacher will be definitely surprised by the answer, but could accept it ;-)"}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 0, "last_activity_date": 1453326436, "last_edit_date": 1453326436, "creation_date": 1453326261, "answer_id": 34911193, "question_id": 34911062, "link": "https://stackoverflow.com/questions/34911062/count-how-many-times-number-entered-until-the-first-symmetry-number-is-entered/34911193#34911193", "title": "Count how many times number entered until the first symmetry number is entered", "body": "<p>Why not using this code to know if the number is symmetry?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int x;\n    for (;;) {\n        cout &lt;&lt; \"Enter number: \";\n        cin &gt;&gt; x;\n        m = x;\n\n        std::stringstream str;\n        str &lt;&lt; x;\n\n        std::string number = str.str();\n        if ( number == std::string( number.rbegin(), number.rend() )\n            break;\n        else\n            n++;\n    }\n    cout &lt;&lt; n;\n    return 0;\n}\n</code></pre>\n\n<p>Simpler, leads to the same result and is definitely more error prone ;-)</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4677290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50139f15393b370450594a96bde703da?s=128&d=identicon&r=PG&f=1", "display_name": "SarvanZ", "link": "https://stackoverflow.com/users/4677290/sarvanz"}, "is_accepted": false, "score": 0, "last_activity_date": 1453348291, "creation_date": 1453348291, "answer_id": 34915097, "question_id": 34911062, "link": "https://stackoverflow.com/questions/34911062/count-how-many-times-number-entered-until-the-first-symmetry-number-is-entered/34915097#34915097", "title": "Count how many times number entered until the first symmetry number is entered", "body": "<p>It would have been much easier to reason if you have written like this:<br></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nbool isPalindrome(int x)\n{\n    int y = x;\n    int z;\n    while (x) {\n        z = z * 10 + x % 10;\n        x /= 10;\n    }\n    return y == z;\n}\n\nint main()\n{\n    int n = 0;\n    int x;\n    for (;;) {\n        std::cout &lt;&lt; \"Enter number: \";\n        std::cin &gt;&gt; x;\n        if (isPalindrome(x))\n            break;\n        else\n            ++n;\n    }\n    std::out &lt;&lt; \"Number of non-palindromes: \" &lt;&lt; n &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>functions with meaningful names always helpful!</p>\n"}], "owner": {"reputation": 152, "user_id": 4918787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fgvsg.jpg?s=128&g=1", "display_name": "mamady", "link": "https://stackoverflow.com/users/4918787/mamady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 34911157, "answer_count": 3, "score": 0, "last_activity_date": 1453348291, "creation_date": 1453325788, "last_edit_date": 1453326297, "question_id": 34911062, "link": "https://stackoverflow.com/questions/34911062/count-how-many-times-number-entered-until-the-first-symmetry-number-is-entered", "title": "Count how many times number entered until the first symmetry number is entered", "body": "<p>I wrote the following code but only works when the first number is symmetry:</p>\n\n<p>symmetry is like this number: 4554 (reading from both ends is the same number)</p>\n\n<p>My question is why the break only works for the first number? It happens when I run it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int n=0, z=0, r=0, x=0, m;\n    for (;;) {\n        cout &lt;&lt; \"Enter number: \";\n        cin &gt;&gt; x;\n        m = x;\n\n        while(x!=0) {\n            r = x % 10;\n            z = z * 10 + r;\n            x = x / 10;\n        }\n        if(m==z)\n            break;\n        else\n            n++;\n    }\n    cout &lt;&lt; n;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1453325833, "post_id": 34911053, "comment_id": 57557713, "body": "<code>&quot;start \\&quot;C:\\\\Program Files (x86)\\\\Steam\\\\Steam.exe\\&quot;&quot;</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1453326164, "post_id": 34911053, "comment_id": 57557893, "body": "Voting to close, however, on account of this being essentially a typographical error; OP did not realize that the spaces would indicate separate arguments to <code>start</code>"}, {"owner": {"reputation": 1, "user_id": 5818260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xmhKVtujnNc/AAAAAAAAAAI/AAAAAAAAAVQ/mzktLWVhOGc/photo.jpg?sz=128", "display_name": "Kompakt", "link": "https://stackoverflow.com/users/5818260/kompakt"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453767447, "post_id": 34911053, "comment_id": 57737704, "body": "Thanks for all your response. But, I ended up doing it like this:  <code>_spawnl(P_WAIT, &quot;C:\\\\Program Files (x86)\\\\Steam\\\\Steam.exe&quot;,&quot;Arg1&quot;,&quot;Arg2&quot;,NULL);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1453326225, "last_edit_date": 1453326225, "creation_date": 1453325814, "answer_id": 34911073, "question_id": 34911053, "link": "https://stackoverflow.com/questions/34911053/c-execute-exe-with-spaces-in-path/34911073#34911073", "title": "C++ Execute .exe with spaces in path", "body": "<p>Thete's no need to escape with <code>\\</code>. You could use raw string literals. Like this. </p>\n\n<pre><code>system(R\"(start \"C:\\Program Files (x86)\\Steam\\Steam.exe\")\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>system(R\"(start C:\\Program Files (x86)\\Steam\\Steam.exe)\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 3, "last_activity_date": 1453326064, "creation_date": 1453326064, "answer_id": 34911149, "question_id": 34911053, "link": "https://stackoverflow.com/questions/34911053/c-execute-exe-with-spaces-in-path/34911149#34911149", "title": "C++ Execute .exe with spaces in path", "body": "<p>(Migrating answer from comment)</p>\n\n<p>Place the path into a string internally:</p>\n\n<pre><code>system(\"start \\\"C:\\\\Program Files (x86)\\\\Steam\\\\Steam.exe\\\"\");\n</code></pre>\n\n<p>Note: use <code>\\\"</code> to create a quotation mark within a string.</p>\n"}], "owner": {"reputation": 1, "user_id": 5818260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xmhKVtujnNc/AAAAAAAAAAI/AAAAAAAAAVQ/mzktLWVhOGc/photo.jpg?sz=128", "display_name": "Kompakt", "link": "https://stackoverflow.com/users/5818260/kompakt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453326225, "creation_date": 1453325743, "last_edit_date": 1453326106, "question_id": 34911053, "link": "https://stackoverflow.com/questions/34911053/c-execute-exe-with-spaces-in-path", "title": "C++ Execute .exe with spaces in path", "body": "<pre><code>int main()\n{\n    system(\"start C:\\\\Program Files (x86)\\\\Steam\\\\Steam.exe\\\\\");\n    cout &lt;&lt; \"Opening...\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>When it opens CMD, it says \"Cannot find C:\\Program'.\"</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1453327411, "post_id": 34911050, "comment_id": 57558602, "body": "You cannot have a <code>__global__</code> function as a class member. Refactor you code."}], "answers": [{"tags": [], "owner": {"reputation": 16919, "user_id": 148383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16adaecf2fe2758f238dd726fef0cdbc?s=128&d=identicon&r=PG", "display_name": "Bahbar", "link": "https://stackoverflow.com/users/148383/bahbar"}, "is_accepted": false, "score": 1, "last_activity_date": 1453327484, "creation_date": 1453327484, "answer_id": 34911535, "question_id": 34911050, "link": "https://stackoverflow.com/questions/34911050/c-class-and-cuda-error/34911535#34911535", "title": "C++ class and CUDA error", "body": "<pre><code>__global__ void add::add_values(int *a, int *b, int *c){ // level1\n ...\n  while (tid &lt; N){ // level2\n  { // level3\n    c[tid] = a[tid] + b[tid];\n    cout &lt;&lt; c[i] &lt;&lt; endl;\n    tid += blockDim.x * gridDim.x;\n  } // end of level3\n} // end of level2\n</code></pre>\n\n<p>You're not closing level 1</p>\n"}], "owner": {"reputation": 1, "user_id": 5818242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f5c7fc5b43c3931ff8af78395b0453?s=128&d=identicon&r=PG&f=1", "display_name": "janeyin600", "link": "https://stackoverflow.com/users/5818242/janeyin600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453327484, "creation_date": 1453325737, "question_id": 34911050, "link": "https://stackoverflow.com/questions/34911050/c-class-and-cuda-error", "title": "C++ class and CUDA error", "body": "<p>I am trying to write a simple C++ class with some CUDA features. I got this error and could not figure out what went wrong:</p>\n\n<p>main.cu: error: a pointer to a bound function may only be used to call the function</p>\n\n<p>Here is the code:</p>\n\n<pre><code>//add_values.cu\n#include \"add.h\"\n\n__global__ void add::add_values(int *a, int *b, int *c){\n\n  int tid  = threadIdx.x + blockIdx.x * blockDim.x;\n  while (tid &lt; N){\n  {\n    c[tid] = a[tid] + b[tid];\n    cout &lt;&lt; c[i] &lt;&lt; endl;\n    tid += blockDim.x * gridDim.x;\n  }\n}\n\n//main.cu\n#include \"add.h\"\n\n#define N (33*1024)\n\nint main(void){\n\n  add add_test;\n  int a[N], b[N], c[N];\n  int *dev_a, *dev_b, *dev_c;\n\n  cudaMalloc((void**)&amp;dev_a, N*sizeof(int));\n  cudaMalloc((void**)&amp;dev_b, N*sizeof(int));\n  cudaMalloc((void**)&amp;dev_c, N*sizeof(int));\n\n  for (int i = 0; i &lt; N; i++){\n    a[i] = i;\n    b[i] = i*i;\n    c[i] = 0;\n  }\n\n  cudaMemcpy (dev_a, a, N*sizeof(int), cudaMemcpyHostToDevice);\n  cudaMemcpy (dev_b, b, N*sizeof(int), cudaMemcpyHostToDevice);\n\n\n  add_test.add_values&lt;&lt;&lt;128, 128&gt;&gt;&gt;(dev_a, dev_b, dev_c); //Error?\n\n  cudaMemcpy (dev_c, c, N*sizeof(int), cudaMemcpyDeviceToHost);\n\n  cudaFree(dev_a);\n  cudaFree(dev_b);\n  cudaFree(dev_c);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>Something went wrong when I was trying to call the add_values function in main. Thanks!!</p>\n"}, {"tags": ["c++", "qt", "variables", "dialog"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1453325851, "post_id": 34911007, "comment_id": 57557722, "body": "You can make your <code>my_name</code> variable a member of the class MyDialog. Not a bad solution at all."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5818125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3766957bc6ab8badcce86e183be8c2fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ingo Holder", "link": "https://stackoverflow.com/users/5818125/ingo-holder"}, "edited": false, "score": 0, "creation_date": 1453391675, "post_id": 34911334, "comment_id": 57589939, "body": "Thank you that did the trick! Was overthinking this whole topic and made weird stuff but now it works! THanks."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 1, "last_activity_date": 1453326799, "creation_date": 1453326799, "answer_id": 34911334, "question_id": 34911007, "link": "https://stackoverflow.com/questions/34911007/qt-c-pass-variable-from-dialog-to-main-cpp/34911334#34911334", "title": "Qt (C++) Pass Variable from Dialog to main.cpp", "body": "<p>Add this in <code>MyDialog</code>:</p>\n\n<pre><code>QString MyDialog::getName()\n{\n    return ui-&gt;lineEdit-&gt;text();\n}\n</code></pre>\n\n<p>Then do:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    // Open Dialog\n    MyDialog mDialog;\n    mDialog.setModal(true);\n    mDialog.exec();\n\n    // retrieve the name    \n    QString name = mDialog.getName();\n\n    //Open Main Window\n    GW2::MainWindow w;\n    w.show();    \n    return a.exec();\n}\n</code></pre>\n\n<p>Note that the dialog could be canceled. You should call <code>accept()</code> rather than <code>close()</code> from <code>on_pushButton_clicked()</code> and later test if the dialog was accepted or not:</p>\n\n<pre><code>if ( mDialog.exec() == QDialog::Accepted )\n{\n    QString name = mDialog.getName();\n    ...\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5818125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3766957bc6ab8badcce86e183be8c2fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ingo Holder", "link": "https://stackoverflow.com/users/5818125/ingo-holder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 1, "accepted_answer_id": 34911334, "answer_count": 1, "score": 0, "last_activity_date": 1453326799, "creation_date": 1453325599, "question_id": 34911007, "link": "https://stackoverflow.com/questions/34911007/qt-c-pass-variable-from-dialog-to-main-cpp", "title": "Qt (C++) Pass Variable from Dialog to main.cpp", "body": "<p>When i start my Program a Dialog-Window pops up and asks me to enter a name. Once i've entered my Name and press the Button it closes the Dialog and opens the main window.</p>\n\n<p>My question is how i get the variable/ Name i just set in the Dialog into another class / my main.cpp</p>\n\n<p>Main.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QtDebug&gt;\n#include &lt;QtNetwork&gt;\n#include &lt;sstream&gt;\n#include \"mydialog.h\"\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    // Open Dialog\n    MyDialog mDialog;\n    mDialog.setModal(true);\n    mDialog.exec();\n\n    //Open Main Window\n    GW2::MainWindow w;\n    w.show();    \n    return a.exec();\n}\n</code></pre>\n\n<p>mydialog.cpp</p>\n\n<pre><code>#include \"mydialog.h\"\n#include \"ui_mydialog.h\"\n#include &lt;QDebug&gt;\n\nusing namespace std;\n\n\nMyDialog::MyDialog(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::MyDialog)\n{\n    ui-&gt;setupUi(this);\n}\n\nMyDialog::~MyDialog()\n{\n    delete ui;\n}\n\nvoid MyDialog::on_pushButton_clicked()\n{\n    QString MYNAME = ui-&gt;lineEdit-&gt;text();\n    close();\n}\n</code></pre>\n\n<p>I can get MYNAME here that works after i press the Button but i need to pass the Variable...</p>\n\n<p>mydialog.h</p>\n\n<pre><code>#ifndef MYDIALOG_H\n#define MYDIALOG_H\n\n#include &lt;QDialog&gt;\n#include &lt;QString&gt;\n\n\nnamespace Ui {\n\nclass MyDialog;\n}\n\nclass MyDialog : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit MyDialog(QWidget *parent = 0);\n    ~MyDialog();\n\nprivate slots:\n    void on_pushButton_clicked();\n\n\nprivate:\n    Ui::MyDialog *ui;\n};\n\n#endif // MYDIALOG_Hs\n</code></pre>\n\n<p>I tried using google and search function but didn'T find anything that worked on my project. Hope you can help me. Cheers</p>\n"}, {"tags": ["c++", "qt", "raii"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1453325743, "post_id": 34910879, "comment_id": 57557666, "body": "This is not a RAII idiom. In RAII, a resource is aquired in constructor and destroyed in destructor. I do not see any resource aquisition in constructor (I am ready to consider emitting a signal a form of resource management). Also every RAII class have to have a carefully thought through copy, move and assignment policy, and I do not see it here either."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453326241, "post_id": 34910879, "comment_id": 57557931, "body": "There are no resources here besides the connection of the event to the main window. Hence, transferring ownership partially is questionable (maybe a questionable QT design)"}, {"owner": {"reputation": 2295, "user_id": 903578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0b62e5ea50f1b5bb31cb932b738b197?s=128&d=identicon&r=PG", "display_name": "adviner", "link": "https://stackoverflow.com/users/903578/adviner"}, "edited": false, "score": 0, "creation_date": 1453326295, "post_id": 34910879, "comment_id": 57557958, "body": "At first I was going to emit the signal in the constructor but the connect has not been made yet so it wouldn&#39;t fire.  Thanks I guess I have more reading to do on it.  I took away the idea about RAII was create it on the stack so when the function goes out of scope the destructor will be called.  And I needed that to happen but emit a signal instead"}, {"owner": {"reputation": 2295, "user_id": 903578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0b62e5ea50f1b5bb31cb932b738b197?s=128&d=identicon&r=PG", "display_name": "adviner", "link": "https://stackoverflow.com/users/903578/adviner"}, "edited": false, "score": 0, "creation_date": 1453326435, "post_id": 34910879, "comment_id": 57558051, "body": "The resource that I&#39;m trying to identify is the bool that is emitted."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1484056284, "last_edit_date": 1484056284, "creation_date": 1453387450, "answer_id": 34926770, "question_id": 34910879, "link": "https://stackoverflow.com/questions/34910879/raii-and-qt-signals/34926770#34926770", "title": "RAII and Qt signals", "body": "<p>The whole idea is fundamentally broken if your premise is that the code indicated by \"Some code runs\" runs long enough to block the GUI. If so: don't do that. The only code that is supposed to ever execute in the GUI thread is short, run-to-completion code that doesn't take long enough for the user to notice.</p>\n\n<p>If the time taken by \"Some code runs\" is very short - on the order of single milliseconds at most - then you can certainly use such a construct. The term RAII doesn't apply here, as you're dealing with some sort of a scope guard.</p>\n\n<p>If you wish, you can forgo the <code>execute</code> method and perform the connection in the constructor:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/scopeguard-signal-34910879\n// main.cpp\n#include &lt;QtCore&gt;\n\nclass ScopeSignaller : public QObject {\n   Q_OBJECT\npublic:\n   Q_SIGNAL void inScope(bool);\n   template &lt;typename F&gt;\n   ScopeSignaller(QObject * target, F &amp;&amp; slot, QObject * parent = 0) : QObject(parent) {\n      connect(this, &amp;ScopeSignaller::inScope, target, std::forward&lt;F&gt;(slot));\n      inScope(true);\n   }\n   ~ScopeSignaller() {\n      inScope(false);\n   }\n};\n\nint main(int argc, char ** argv) {\n   QCoreApplication app{argc, argv};\n   ScopeSignaller s(&amp;app, +[](bool b){ qDebug() &lt;&lt; \"signalled\" &lt;&lt; b; });\n}\n\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 2295, "user_id": 903578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0b62e5ea50f1b5bb31cb932b738b197?s=128&d=identicon&r=PG", "display_name": "adviner", "link": "https://stackoverflow.com/users/903578/adviner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484056284, "creation_date": 1453325170, "last_edit_date": 1453325274, "question_id": 34910879, "link": "https://stackoverflow.com/questions/34910879/raii-and-qt-signals", "title": "RAII and Qt signals", "body": "<p>I'm trying to understand and use RAII and wanted opinions on this implementation:</p>\n\n<p>I want the RAII PauseProcessRAII to emit a signal and another one in the destructor.  Example:</p>\n\n<pre><code>// Header\npublic:\n    PauseProcessRAII(QObject *parent = 0);\n    void Execute();\n    ~PauseProcessRAII();\n\nsignals:\n    void PauseProcess(bool pause_process);\n\n// Source\n\nPauseProcessRAII::~PauseProcessRAII()\n{\n    emit PauseProcess(false);\n}\n\nvoid PauseProcessRAII::Execute()\n{\n    emit PauseProcess(true);\n}\n\n// MainWindow code\nvoid MainWindow::OnPauseProcessRAII(bool pause_process)\n{\n    qDebug() &lt;&lt; \"pause_process: \" &lt;&lt; pause_process;\n}\n\nvoid MainWindow::OnButtonSaveClicked()\n{\n    PauseProcessRAII pauseProcessRAII(this);\n    connect(&amp;pauseProcessRAII, &amp;PauseProcessRAII::PauseProcess, this, &amp;MainWindow::OnPauseProcess);\n    pauseProcessRAII.Execute();\n\n    // ... Some code runs\n    // ... pauseRAII desctructor is called\n}\n</code></pre>\n\n<p>When I run the code both emits are firing as expected. My question is this a good solution? At first I though the emit call in PauseProcessRAII destructor wouldn't have worked because it may have destroyed the signal and slot connection. Of course that would mean I would have to add the connect to every function that I use it on.</p>\n"}, {"tags": ["c++", "g++", "freetype", "freetype2"], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "edited": false, "score": 1, "creation_date": 1453325177, "post_id": 34910809, "comment_id": 57557373, "body": "Can you please elaborate on how do I add <code>&#47;usr&#47;local&#47;include&#47;freetype2</code>"}], "tags": [], "owner": {"reputation": 1503, "user_id": 157728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e262a1899a7b4c42038d4c19d12c5e9c?s=128&d=identicon&r=PG", "display_name": "Damyan", "link": "https://stackoverflow.com/users/157728/damyan"}, "is_accepted": false, "score": 2, "last_activity_date": 1453324942, "creation_date": 1453324942, "answer_id": 34910809, "question_id": 34910660, "link": "https://stackoverflow.com/questions/34910660/fatal-error-freetype-config-ftheader-h/34910809#34910809", "title": "fatal error: freetype/config/ftheader.h", "body": "<p>From reading this documentation: <a href=\"http://freetype.org/freetype2/docs/tutorial/step1.html#section-1\" rel=\"nofollow\">http://freetype.org/freetype2/docs/tutorial/step1.html#section-1</a></p>\n\n<p>You need to add /usr/local/include/freetype2 to your include path.</p>\n\n<p>Then you include ft2build.h with:</p>\n\n<pre><code>#include &lt;ft2build.h&gt;\n</code></pre>\n\n<p>Then when ft2build.h includes freetype/config/ftheader.h it will look in freetype2 directory in the include path and find it.</p>\n"}, {"comments": [{"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "edited": false, "score": 2, "creation_date": 1453325826, "post_id": 34910966, "comment_id": 57557710, "body": "When your system has <code>pkg-config</code> utility you can use it to automatically add necessary flags for your compiler. First example gives you flags for compilation, second - for linking (on my system)."}, {"owner": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "edited": false, "score": 0, "creation_date": 1453325887, "post_id": 34910966, "comment_id": 57557742, "body": "It gives Unknown option -I/usr/include/freetype2"}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "edited": false, "score": 1, "creation_date": 1453326044, "post_id": 34910966, "comment_id": 57557828, "body": "@udhy: You just type <code>pkg-config --cflags freetype2</code>. Line below is produced by utility. You should pass it to your compiler."}, {"owner": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "edited": false, "score": 0, "creation_date": 1453326360, "post_id": 34910966, "comment_id": 57558000, "body": "Thanks a lot. It was very nice explanation."}], "tags": [], "owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "is_accepted": true, "score": 6, "last_activity_date": 1453325605, "last_edit_date": 1453325605, "creation_date": 1453325434, "answer_id": 34910966, "question_id": 34910660, "link": "https://stackoverflow.com/questions/34910660/fatal-error-freetype-config-ftheader-h/34910966#34910966", "title": "fatal error: freetype/config/ftheader.h", "body": "<p>Your compiler searches for includes in <code>/usr/local/include</code>, so when you do:  </p>\n\n<pre><code>#include &lt;freetype2/ft2build.h&gt;\n</code></pre>\n\n<p>it finds <code>/usr/local/include/freetype2/ft2build.h</code></p>\n\n<p>but this file tries to include <code>freetype/config/ftheader.h</code> and there is no</p>\n\n<pre><code>/usr/local/include/freetype/config/ftheader.h\n</code></pre>\n\n<p>but</p>\n\n<pre><code>/usr/local/include/freetyp2/freetype/config/ftheader.h\n</code></pre>\n\n<p>So you shall pass <code>-I/usr/local/include/freetyp2</code> to your compiler and do a</p>\n\n<pre><code>#include &lt;ft2build.h&gt;\n</code></pre>\n\n<p>to be correct.</p>\n\n<p>If your system supports it - use <code>pkg-config</code> utility, which can provide all compilations flag, e.g.:</p>\n\n<pre><code>$ pkg-config --cflags freetype2\n-I/usr/include/freetype2  \n\n$ pkg-config --libs freetype2\n-lfreetype  \n</code></pre>\n"}], "owner": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7062, "favorite_count": 0, "accepted_answer_id": 34910966, "answer_count": 2, "score": 5, "last_activity_date": 1525901936, "creation_date": 1453324443, "last_edit_date": 1495542361, "question_id": 34910660, "link": "https://stackoverflow.com/questions/34910660/fatal-error-freetype-config-ftheader-h", "title": "fatal error: freetype/config/ftheader.h", "body": "<p>I am trying to use freeglut2 for rendering text in OpenGL. When I included the following header,</p>\n\n<p><code>#include &lt;freetype2/ft2build.h&gt;</code></p>\n\n<p>it gives the following error :</p>\n\n<p><code>/usr/local/include/freetype2/ft2build.h:37:38: fatal error: freetype/config/ftheader.h: No such file or directory</code></p>\n\n<p>But when I go to <code>/usr/local/include/freetype2/freetype/config</code> , I found the file ftheader.h.</p>\n\n<p>Please help me in figuring out the issue. Thank you.</p>\n\n<p>I went to the <a href=\"https://stackoverflow.com/questions/20572366/sudo-pip-install-matplotlib-fails-to-find-freetype-headers-os-x-mavericks\">this</a> but nothing worked.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "edited": false, "score": 0, "creation_date": 1453323742, "post_id": 34910422, "comment_id": 57556552, "body": "i was thinking doing the addition 4  bits by 4 will that work ??"}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 2, "creation_date": 1453324005, "post_id": 34910422, "comment_id": 57556684, "body": "You might want to Google &quot;binary coded decimal&quot; for inspiration."}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453324073, "post_id": 34910422, "comment_id": 57556729, "body": "@AndyG he&#39;s already doing that by subtracting &#39;0&#39;. Different representation, same result."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453324279, "post_id": 34910422, "comment_id": 57556862, "body": "@JohnSensebe: Whoops, missed that bit"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1453325024, "post_id": 34910422, "comment_id": 57557272, "body": "I recommend using &#39;.&#39; to end sentences and capital letters to mark beginning of sentences."}], "answers": [{"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1453325009, "creation_date": 1453325009, "answer_id": 34910828, "question_id": 34910422, "link": "https://stackoverflow.com/questions/34910422/addition-using-bitwise-operators/34910828#34910828", "title": "addition using bitwise operators", "body": "<p>You will need to do the addition one digit (4 bit) at a time because 9+9=18 and 18 won't fit in 4 bits.</p>\n\n<p>x-oring multibit digits however is not the correct operation.. the correct algorithm for sum is something like</p>\n\n<pre><code>int carry = 0;\nfor(int i=0; i&lt;n; i++) {\n    if ((i &amp; 1) == 0) {\n        int x = (a[i] &amp; 15) + (b[i] &amp; 15) + carry;\n        result[i] = (x &amp; 15);\n        carry = x &gt; 15;\n    } else {\n        int x = (a[i] &gt;&gt; 4) + (b[i] &gt;&gt; 4) + carry;\n        result[i] |= (x &lt;&lt; 4);\n        carry = x &gt; 15;\n    }\n}\n</code></pre>\n\n<p>Working in assembler many processors supports detection of an overflow in the lower 4 bits when doing an operation and there are specific instructions to \"fix\" the result so that it becomes the correct two-digit binary decimal representation (e.g. x86 provides <code>DAA</code> instruction to fix the result of an addition).</p>\n\n<p>Working at the C level however this machinery is not available.</p>\n"}], "owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453325009, "creation_date": 1453323657, "question_id": 34910422, "link": "https://stackoverflow.com/questions/34910422/addition-using-bitwise-operators", "title": "addition using bitwise operators", "body": "<p>so the idea of my class   is to take a string of numbers <code>const char* s = \"123456654987\"</code> i took each couple of number and stored them in one byte\n<code>num[0] = 12 , num[1] = 34</code> and so on ..... \nthis is how i did it </p>\n\n<pre><code>unsigned char* num;\n num = new unsigned char[ strlen(s)/2 + strlen(s)%2];\n    if(strlen(s)%2 == 1)\n    num[0] = s[0]-'0';\n        unsigned int i;\n        int j=strlen(s)%2;\n        for(i=strlen(s)%2;i&lt;strlen(s);i+=2)\n        {\n                        int left = s[i] - '0';\n                        int right = s[i+1] - '0';\n                        num[j] = left &lt;&lt; 4 ;\n                        num[j] |= right;\n                        j++;\n        }\n</code></pre>\n\n<p>for example s[0] = 12 is represented in memory as <code>00010010</code> not as <code>00000110</code>\nbut now that i'm trying to overload the += operator i didn't know how to proceed \nmy best try was this but even i know that is not going to work </p>\n\n<pre><code>int i,sum,carry=0;\n    for(i=this-&gt;size-1;i&gt;=0;i--)\n    {\n        sum = ((num[i]  ^ rhs.num[i])  ^ carry);\n        carry = ((num[i] &amp; rhs.num[i]) | (num[i] &amp; carry)) | (rhs.num[i] &amp; carry);\n        num[i] = sum;\n    }\n</code></pre>\n\n<p>anyhelp guys</p>\n"}, {"tags": ["c++", "visual-studio-2010", "optimization"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1453323562, "post_id": 34910356, "comment_id": 57556450, "body": "Why do you care? Do you have some reason to think this is an issue? Why make problems where there are none?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453323760, "post_id": 34910356, "comment_id": 57556559, "body": "Related: <a href=\"http://stackoverflow.com/questions/14291549/will-compiler-optimize-out-unused-arguments-of-static-function\" title=\"will compiler optimize out unused arguments of static function\">stackoverflow.com/questions/14291549/&hellip;</a>"}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453324195, "post_id": 34910356, "comment_id": 57556802, "body": "@DavidSchwartz - mostly just curiosity as to what would happen.   This is actually the easiest way of structuring things, so the optimization would just be a happy bonus, and less pressure to provide witty strings for any dataminers"}], "answers": [{"tags": [], "owner": {"reputation": 1503, "user_id": 157728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e262a1899a7b4c42038d4c19d12c5e9c?s=128&d=identicon&r=PG", "display_name": "Damyan", "link": "https://stackoverflow.com/users/157728/damyan"}, "is_accepted": false, "score": 2, "last_activity_date": 1453323591, "last_edit_date": 1495541247, "creation_date": 1453323591, "answer_id": 34910411, "question_id": 34910356, "link": "https://stackoverflow.com/questions/34910356/c-how-aggressively-are-unused-parameters-optimized/34910411#34910411", "title": "C++: How aggressively are unused parameters optimized?", "body": "<p>Beware of anyone giving you concrete answers to questions like this.  The only way you can be really certain what your compiler is doing in your configuration is to look at the results.</p>\n\n<p>One of the easiest ways to do this is to step through the disassembly in the debugger.</p>\n\n<p>Or you can get the compiler to output an assembly listing (see <a href=\"https://stackoverflow.com/questions/1020498/how-to-view-the-assembly-behind-the-code-using-visual-c\">How to view the assembly behind the code using Visual C++?</a>) and examine exactly what it is really doing.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1453324494, "post_id": 34910451, "comment_id": 57556986, "body": "It&#39;s not <code>std::assert</code> because it&#39;s a macro and not a function."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1453323769, "creation_date": 1453323769, "answer_id": 34910451, "question_id": 34910356, "link": "https://stackoverflow.com/questions/34910356/c-how-aggressively-are-unused-parameters-optimized/34910451#34910451", "title": "C++: How aggressively are unused parameters optimized?", "body": "<p>Yes, you could muck about with optimization and that may or may not work depending on the version of your compiler <em>etc</em>.</p>\n\n<p>A much better way to do this is explicitly, not with MACROs (god forbid), but with a simple function that either generates the tag you want for debug purposes or does nothing for production code.</p>\n\n<p>You want to look at <code>std::assert</code> and perhaps use it.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1453325215, "creation_date": 1453325215, "answer_id": 34910890, "question_id": 34910356, "link": "https://stackoverflow.com/questions/34910356/c-how-aggressively-are-unused-parameters-optimized/34910890#34910890", "title": "C++: How aggressively are unused parameters optimized?", "body": "<p>The possibility of doing so will depend on visibility of function in the call site. If function body is not visible, optimization discussed will not be possible at all. If function is visible, than yes - you can not even guarantee there will be a function call!</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1453327189, "creation_date": 1453327189, "answer_id": 34911443, "question_id": 34910356, "link": "https://stackoverflow.com/questions/34910356/c-how-aggressively-are-unused-parameters-optimized/34911443#34911443", "title": "C++: How aggressively are unused parameters optimized?", "body": "<p>In practice, it depends on whether the compiler has access to the source code of the implementation of <code>Draw::begin()</code></p>\n\n<p>here's an illustration:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid do_nothing(const char* txt)\n{\n\n}\n\nint main()\n{\n    using namespace std;\n    do_nothing(\"hello\");\n    return 0;\n}\n</code></pre>\n\n<p>compile with -O3:</p>\n\n<p>yields:</p>\n\n<pre><code>_main:                                  ## @main\n    .cfi_startproc\n## BB#0:\n    pushq   %rbp\nLtmp3:\n    .cfi_def_cfa_offset 16\nLtmp4:\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\nLtmp5:\n    .cfi_def_cfa_register %rbp\n    xorl    %eax, %eax\n    popq    %rbp\n    retq\n    .cfi_endproc\n</code></pre>\n\n<p>i.e. the string and the call to do_nothing is entirely optimised away</p>\n\n<p>However, define do_nothing in another module and we get:</p>\n\n<pre><code>_main:                                  ## @main\n    .cfi_startproc\n## BB#0:\n    pushq   %rbp\nLtmp0:\n    .cfi_def_cfa_offset 16\nLtmp1:\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\nLtmp2:\n    .cfi_def_cfa_register %rbp\n    leaq    L_.str(%rip), %rdi\n    callq   __Z10do_nothingPKc\n    xorl    %eax, %eax\n    popq    %rbp\n    retq\n    .cfi_endproc\n\n    .section    __TEXT,__cstring,cstring_literals\nL_.str:                                 ## @.str\n    .asciz  \"hello\"\n</code></pre>\n\n<p>i.e. a redundant load, call and the address of the string is passed.</p>\n\n<p>So if you want to optimise debug info away you'll want to implement <code>Draw::begin()</code> inline (in the same way the stl does).</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 34911443, "answer_count": 4, "score": 2, "last_activity_date": 1453327189, "creation_date": 1453323382, "last_edit_date": 1453323607, "question_id": 34910356, "link": "https://stackoverflow.com/questions/34910356/c-how-aggressively-are-unused-parameters-optimized", "title": "C++: How aggressively are unused parameters optimized?", "body": "<p>In my rendering code, I pass string literals as a parameter to my rendering blocks so I can identify them in debug dumps and profiling.  It looks similar to this:</p>\n\n<pre><code>// rendering client\ndraw.begin(\"east abbey foyer\");\n    // rendering code\ndraw.end();\n\nvoid Draw::begin(const char * debugName){\n    #ifdef DEBUG\n        // code that uses debugName\n    #endif\n    // the rest of the code doesn't use debugName at all\n}\n</code></pre>\n\n<p>In the final program, I wouldn't want these strings to be around anymore.  But I also want to avoid using macros in my rendering client code to do this; in fact, I would want the rendering client code to KEEP the strings (in the code itself) but not actually compile them into the final program.</p>\n\n<p>So what I'm wondering is, if I change the code of <code>draw.begin(const char*)</code> to not use it's parameter at all, will my compiler optimize that parameter and it's associated costs away (perhaps even going so far as to exclude it from the string table)?  </p>\n"}, {"tags": ["c++", "cuda", "segmentation-fault"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1453323785, "post_id": 34910339, "comment_id": 57556573, "body": "Try to check the return status of the CUDA calls <a href=\"http://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\" title=\"what is the canonical way to check for errors using the cuda runtime api\">stackoverflow.com/questions/14038589/&hellip;</a>"}, {"owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1453323953, "post_id": 34910339, "comment_id": 57556654, "body": "@terence hill I have been actually doing that, but I don&#39;t get an output instead just segfault. I jave added above the code I was using for checking the status."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1453326126, "post_id": 34910339, "comment_id": 57557876, "body": "It is almost certainly going to be because you have a buffer overflow the code which loads from file to memory. You make no effort to ensure that no more than <code>count</code> lines are read from file. I don&#39;t think this has anything to do with CUDA, per se."}, {"owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1453326747, "post_id": 34910339, "comment_id": 57558229, "body": "@talonmies Can you please tell me how it can be fixed? Because I have increased <code>count</code> to 100 and also my file has only 9 passwords (lines). How is it overflowing?"}, {"owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "edited": false, "score": 0, "creation_date": 1453326812, "post_id": 34910339, "comment_id": 57558257, "body": "Also, if I comment out all the <code>cudaMemcpy</code> and <code>cudaMalloc</code> lines, the code works. Passwords are nicely loaded into the struct and I can display them. But of course that is useless until I make the kernel work."}, {"owner": {"reputation": 4894, "user_id": 1071273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4A2ko.jpg?s=128&g=1", "display_name": "Michael Haidl", "link": "https://stackoverflow.com/users/1071273/michael-haidl"}, "edited": false, "score": 3, "creation_date": 1453373179, "post_id": 34910339, "comment_id": 57576894, "body": "Thats an easy one: <code>int i;</code> is not initialized."}, {"owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "edited": false, "score": 0, "creation_date": 1453398836, "post_id": 34910339, "comment_id": 57594707, "body": "Which i? It wasn&#39;t that."}], "answers": [{"tags": [], "owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "is_accepted": true, "score": 1, "last_activity_date": 1453399132, "last_edit_date": 1495541741, "creation_date": 1453399132, "answer_id": 34930982, "question_id": 34910339, "link": "https://stackoverflow.com/questions/34910339/segmentation-fault-on-cudamalloc-or-cudamemcpy/34930982#34930982", "title": "Segmentation fault on cudaMalloc or cudaMemcpy", "body": "<p>For someone wondering what went wrong, I was able to fix it. I am not exactly sure what exactly was wrong but I had improper memory allocations at some places and in other cases I didn't even needed to use <code>cudaMalloc</code> or <code>cudaMemcpy</code>. Also, using <a href=\"https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\">What is the canonical way to check for errors using the CUDA runtime API?</a> for checking errors instead of my own implementation worked. What I have now:</p>\n\n<pre><code>/***** KERNEL CONFIGURATION &amp; MEMORY MANAGEMENT ******/\n/***** GENERATE HASHED PASSWORD LIBRARY FOR COMPARE **/\nunsigned int threads_per_block = 1024;\ndim3  grid(1024, 1, 1);\ndim3  threads(threads_per_block, 1, 1);\n\npassword* d_pwds;\nERROR_CHECK( cudaMalloc((void**) &amp;d_pwds, pwds_size));\nERROR_CHECK( cudaMemcpy( d_pwds, h_pwds, pwds_size, cudaMemcpyHostToDevice));\n\nlibEntry* d_library;\nERROR_CHECK( cudaMalloc( (void**) &amp;d_library, sizeof(libEntry) * count));\n\n// generateLibraryKernel(int numPwds, password* pwds, libEntry* library)\ngenerateLibraryKernel&lt;&lt;&lt;grid, threads&gt;&gt;&gt;(i, d_pwds, d_library);\nERROR_CHECK( cudaPeekAtLastError() );\nERROR_CHECK( cudaDeviceSynchronize() );\n</code></pre>\n\n<p>Where <code>ERROR_CHECK</code> is defined from the link above.</p>\n\n<pre><code>#define ERROR_CHECK(ans) { gpuAssert((ans), __FILE__, __LINE__); }\ninline void gpuAssert(cudaError_t code, const char *file, int line, bool abort=true)\n{\n   if (code != cudaSuccess)\n   {\n      fprintf(stderr,\"GPUassert: %s %s %d\\n\", cudaGetErrorString(code), file, line);\n      if (abort) exit(code);\n   }\n}\n</code></pre>\n\n<p>I still don't fully understand memory management in CUDA (device and host allocations) but my code works now! Thank you all.</p>\n"}], "owner": {"reputation": 886, "user_id": 5729690, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e36f76799fdf350c668f758c775571e?s=128&d=identicon&r=PG&f=1", "display_name": "Blizzard", "link": "https://stackoverflow.com/users/5729690/blizzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 34930982, "answer_count": 1, "score": 0, "last_activity_date": 1453399132, "creation_date": 1453323327, "last_edit_date": 1453329970, "question_id": 34910339, "link": "https://stackoverflow.com/questions/34910339/segmentation-fault-on-cudamalloc-or-cudamemcpy", "title": "Segmentation fault on cudaMalloc or cudaMemcpy", "body": "<p>New to CUDA programming and extremely confused as to why I am getting the segfault in the following code:</p>\n\n<pre><code>  #include &lt;cuda.h&gt;\n  #include &lt;stdio.h&gt;\n  #include &lt;stdint.h&gt;\n  #include &lt;fstream&gt;\n  #include &lt;iostream&gt;\n  #include &lt;sstream&gt;\n  #include &lt;string&gt;\n\n  using namespace std;\n\n  typedef struct password_t{\n      char word[56];\n      size_t length;\n  } password;\n\n  typedef struct libEntry_t{\n      uint8_t digest[16];\n      password pwd;\n  } libEntry;\n\n  // Generates a library of passwords and their corresponding MD5 hashes\n  //\n  // Params:\n  //    numPwds - the number of passwords for which to generate hashes\n  //    pwds    - the list of passwords to hash\n  //    library - the array in which to store the unhashed/hashed password library\n  __global__ void generateLibraryKernel(int numPwds, password* pwds, libEntry* library)\n  {\n      // __device__ void cuda_md5(const password *pwd, uint8_t *digest) {\n      int index = (blockIdx.x * blockDim.x) + threadIdx.x;\n      uint8_t hashed[16];\n\n      if (index &lt; numPwds) {\n        cuda_md5(&amp;pwds[index], hashed);\n        for (int j = 0; j &lt; 16; j++) {\n          library[index].digest[j] = hashed[j];\n        }\n        library[index].pwd = pwds[index];\n      }\n  }\n\n  int crack_password (uint8_t* classified)\n  {\n      int count = 10;\n      unsigned int mem_size = sizeof(password) * count;\n      password *h_pwds = (password*) malloc(mem_size);\n\n      ifstream inFile(\"passwords.txt\");\n      if (!inFile) {\n        cerr &lt;&lt; \"File passwords.txt not found.\" &lt;&lt; endl;\n        return -1;\n      }\n\n      string line;\n      int i;\n      while (getline(inFile, line)) {\n        if (line.empty()) continue;\n        memcpy(h_pwds[i].word,line.c_str(),line.size());\n        h_pwds[i].length = line.size();\n        cout &lt;&lt; \"Password: \" &lt;&lt; h_pwds[i].word &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"Length: \" &lt;&lt; h_pwds[i].length &lt;&lt; \"\\n\";\n        i++;\n      }\n\n      inFile.close();\n\n      /***** KERNEL CONFIGURATION &amp; MEMORY MANAGEMENT ******/\n      password* d_pwds;\n      cudaMalloc( (void**) &amp;d_pwds, mem_size);\n      cudaMemcpy( d_pwds, h_pwds, mem_size, cudaMemcpyHostToDevice);\n\n      libEntry *h_library = (libEntry*) malloc(sizeof(libEntry) * count);\n\n      libEntry* d_library;\n      cudaMalloc( (void**) &amp;d_library, sizeof(libEntry) * count);\n\n      int h_numPwds = i;\n      cout &lt;&lt; \"INT NUMPWDS: \" &lt;&lt; h_numPwds &lt;&lt; \"\\n\";\n\n      int* d_numPwds;\n      cudaMalloc( (void**) &amp;d_numPwds, sizeof(int));\n      cudaMemcpy( d_numPwds, &amp;h_numPwds, sizeof(int), cudaMemcpyHostToDevice);\n\n      /*unsigned int threads_per_block = 1024;\n      dim3  grid(1024, 1, 1);\n      dim3  threads(threads_per_block, 1, 1);\n\n      // generateLibraryKernel(int numPwds, password* pwds, libEntry* library)\n      generateLibraryKernel&lt;&lt;&lt;grid, threads&gt;&gt;&gt;(d_numPwds[0], d_pwds, d_library);\n\n      cudaMemcpy( h_library, d_library, mem_size, cudaMemcpyDeviceToHost);*/\n\n      return 0;\n  }\n\n  int main(int argc, char *argv[])\n  {\n      if (argc != 2) {\n          fprintf(stderr, \"usage: ./prog password\\n\");\n          return 1;\n      }\n\n      crack_password((uint8_t*) argv[1]);\n      cout &lt;&lt; \"Hack Password: \" &lt;&lt; argv[1] &lt;&lt; \"\\n\";\n      return 0;\n  }\n</code></pre>\n\n<p>I have gone through it line by line and I believe it happens on the following lines:</p>\n\n<pre><code>      int* d_numPwds;\n      cudaMalloc( (void**) &amp;d_numPwds, sizeof(int));\n      cudaMemcpy( d_numPwds, &amp;h_numPwds, sizeof(int), cudaMemcpyHostToDevice);\n</code></pre>\n\n<p>When I comment <code>cudaMemcpy</code> above, I at least get the <code>cout</code> output on my terminal. Note that I have not gotten to the kernel execution part yet, I am just focusing on the memory allocation before I can actually execute and debug the kernel. Any help will be appreciated!</p>\n\n<p>How I have been checking for return status:</p>\n\n<pre><code>#define CUDA_SAFE_CALL(call) do {                                      \\\n  CUDA_SAFE_CALL_NO_SYNC(call);                                         \\\n  cudaError err = cudaThreadSynchronize();                              \\\n  if( cudaSuccess != err) {                                             \\\n     fprintf(stderr, \"Cuda error in file '%s' in line %i : %s.\\n\",      \\\n                 __FILE__, __LINE__, cudaGetErrorString( err) );        \\\n     exit(EXIT_FAILURE);                                                \\\n     } } while (0)\n</code></pre>\n\n<p>EDIT: The error still occurs after I took care of the int memcpy and malloc, apparently I didn't have to alloc or cpy it. Could've just passed it over. So, the error is due to the following lines, and I am not sure which one or why?</p>\n\n<pre><code>password* d_pwds;\ncudaMalloc( (void**) &amp;d_pwds, mem_size);\ncudaMemcpy( d_pwds, h_pwds, mem_size, cudaMemcpyHostToDevice);\n\nlibEntry *h_library = (libEntry*) malloc(sizeof(libEntry) * count);\n\nlibEntry* d_library;\ncudaMalloc( (void**) &amp;d_library, sizeof(libEntry) * count);\n</code></pre>\n\n<p>EDIT2: I cleaned up everything and still can't figure it out. By having <code>CUDA_SAFE_CALL</code> on the following line <code>CUDA_SAFE_CALL( cudaMalloc((void**) &amp;d_pwds, pwds_size));</code> I get segmentation fault even when every other memory allocation command is commented out.</p>\n"}, {"tags": ["c++", "xcode", "algorithm"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 1, "creation_date": 1453323308, "post_id": 34910300, "comment_id": 57556323, "body": "1. <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\" title=\"what should main return in c and c\">stackoverflow.com/questions/204476/&hellip;</a> 2. you need to return"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453323350, "post_id": 34910300, "comment_id": 57556347, "body": "<code>void main</code> is not a part of the C++ standard. Do not use it because your code will not be portable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453323484, "post_id": 34910300, "comment_id": 57556409, "body": "<code>int main</code> is the correct and approved syntax, but it requires <code>main</code> to return an integer value. This allow the program to signal some basic information to the program that calls your program. If you don&#39;t have any particular messages to return to the caller, just <code>return 0;</code> at the end of main."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1453323986, "post_id": 34910300, "comment_id": 57556675, "body": "@user4581301 <code>return 0;</code> at the end of main is not needed.  Per the standard if the <code>}</code> of <code>main</code> is reached an implicit <code>return 0;</code> will be generated."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453326356, "post_id": 34910300, "comment_id": 57557998, "body": "@NathanOliver Yeah, I just reread the question and looked at the linked code. I like the explicit <code>return 0;</code>, but that&#39;s a taste thing."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 1, "creation_date": 1453338358, "post_id": 34910300, "comment_id": 57562640, "body": "@JW.ZG I am not native English speaker so feel free to correct me. I do have a secret plug-in to increase reputation. You just need to really read everything and understand Visual Studio is <i>not</i> the reference C++ compiler implementation. It works in VS doesn&#39;t mean the code conform to C++ standard."}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 5290534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oGBce.jpg?s=128&g=1", "display_name": "JW.ZG", "link": "https://stackoverflow.com/users/5290534/jw-zg"}, "edited": false, "score": 0, "creation_date": 1453336788, "post_id": 34911562, "comment_id": 57562162, "body": "Thank you, but my question is more about the <code>main</code> part. I don&#39;t know how to implement it in main. I find it is hard to input the values of <code>vector&lt;int&gt; numbers</code>, because the number of the input is not fixed, it could be 4 numbers, 5, 6, or more. How to implement the input function without a fixed memory? I mean the length of the vector is not fixed."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "reply_to_user": {"reputation": 461, "user_id": 5290534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oGBce.jpg?s=128&g=1", "display_name": "JW.ZG", "link": "https://stackoverflow.com/users/5290534/jw-zg"}, "edited": false, "score": 0, "creation_date": 1453340190, "post_id": 34911562, "comment_id": 57563149, "body": "@JW.ZG If you have problems with input why didn&#39;t you mentioned it in question? To implement such input you need to ask user about numbers count and input them in loop. Or just ask for number in loop and use number absence as end of sequence."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 461, "user_id": 5290534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oGBce.jpg?s=128&g=1", "display_name": "JW.ZG", "link": "https://stackoverflow.com/users/5290534/jw-zg"}, "edited": false, "score": 0, "creation_date": 1453343183, "post_id": 34911562, "comment_id": 57563898, "body": "@JW.ZG reading in an arbitrary number of numbers requires a bit of different thinking. Rather than <code>cin &gt;&gt; numbers[i];</code>, you want <code>cin &gt;&gt; temp; numbers.push_back(temp)</code> and a test for whatever exit condition is required, be it some sort of &quot;canary&quot; value the user can enter when they want to quit or what Michael Nastenko suggested and asking the user ahead of time how many values they wish to input. <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow noreferrer\"><code>push_back</code></a> allows the vector to resize itself as more values are added. The max size is typically a function of how much RAM you have."}, {"owner": {"reputation": 461, "user_id": 5290534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oGBce.jpg?s=128&g=1", "display_name": "JW.ZG", "link": "https://stackoverflow.com/users/5290534/jw-zg"}, "edited": false, "score": 0, "creation_date": 1453345299, "post_id": 34911562, "comment_id": 57564448, "body": "Thank you very much. I got the point. I&#39;m sorry but I thought I have written the explanation of my question. I have thought about this question for a very long time. I remember I wrote the specific explanation somewhere... I messed it up. Thanks again."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1453327625, "creation_date": 1453327625, "answer_id": 34911562, "question_id": 34910300, "link": "https://stackoverflow.com/questions/34910300/c-how-to-use-a-vector-function-in-a-class/34911562#34911562", "title": "C++: How to use a vector function in a class?", "body": "<p>Point 1 has already been covered, so I'm responding to point 2. First the code in question:</p>\n\n<pre><code>vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) \n{\n    static int MAX = 99999;\n    static int DELT = 49999;\n    vector&lt;int&gt; ans;\n    int x[MAX];\n    memset(x, 0, sizeof(x));\n    for (int i = 0; i &lt; nums.size(); i++)\n    {\n        if (x[nums[i] + DELT])\n        {\n            ans.push_back(((i + 1) &lt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            ans.push_back(((i + 1) &gt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            return ans;\n        }\n        x[target - nums[i] + DELT] = i + 1;\n    }\n}\n</code></pre>\n\n<p>Note that the only <code>return</code> statement in the function is nested inside a <code>for</code> loop and an <code>if</code> statement. This allows for the possibility that the <code>return</code> statement never reached because the loop was not entered entered or <code>if (x[nums[i] + DELT])</code> was never be true. One easy way to trigger this behaviour is to input an empty <code>nums</code> vector:</p>\n\n<pre><code>for (int i = 0; i &lt; 0; i++)\n</code></pre>\n\n<p>Will never enter the loop and never reach the return statement. What will be returned in this case? No one knows, and it may be different with every run. Maybe the program will crash. Maybe it will plop down on your sofa an watch an Adam Sandler movie marathon while drinking rum and vodka.</p>\n\n<p>\"Oh, but this will never happen!\" you say. Maybe it won't, but optimism is a poor choice when set against rigorously tested and enforced requirements.  Regardless the compiler is pointing out a hole in the logic that could result in much pain and debugging, and this is a hole that can easily be filled</p>\n\n<pre><code>vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) \n{\n    static int MAX = 99999;\n    static int DELT = 49999;\n    vector&lt;int&gt; ans;\n    int x[MAX];\n    memset(x, 0, sizeof(x));\n    for (int i = 0; i &lt; nums.size(); i++)\n    {\n        if (x[nums[i] + DELT])\n        {\n            ans.push_back(((i + 1) &lt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            ans.push_back(((i + 1) &gt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            break;\n        }\n        x[target - nums[i] + DELT] = i + 1;\n    }\n    return ans;\n}\n</code></pre>\n\n<p>Now return <code>ans</code> is always reached, but this allows for the possibility that the returned <code>ans</code> contains no or incorrectly processed information. Not a good answer as <code>twoSum</code> may no longer kill your program, but processing its output could.</p>\n\n<pre><code>bool twoSum(vector&lt;int&gt;&amp; nums, int target, vector&lt;int&gt; &amp;ans) \n{\n    static int MAX = 99999;\n    static int DELT = 49999;\n    int x[MAX];\n    memset(x, 0, sizeof(x));\n    for (int i = 0; i &lt; nums.size(); i++)\n    {\n        if (x[nums[i] + DELT])\n        {\n            ans.push_back(((i + 1) &lt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            ans.push_back(((i + 1) &gt; x[nums[i] + DELT] ? \n                                      (i + 1) : x[nums[i] + DELT]));\n            return true;\n        }\n        x[target - nums[i] + DELT] = i + 1;\n    }\n    return false;\n}\n</code></pre>\n\n<p><code>twoSum</code> returns <code>true</code> only if the exit condition was reached. If it returns <code>false</code> the contents of <code>ans</code> cannot be trusted. More work on the algorithm is required to ensure that <code>ans</code> is always complete and correct or <code>twoSum</code> needs to be wrapped in another function that validates the inputs before executing. </p>\n"}], "owner": {"reputation": 461, "user_id": 5290534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oGBce.jpg?s=128&g=1", "display_name": "JW.ZG", "link": "https://stackoverflow.com/users/5290534/jw-zg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4080, "favorite_count": 0, "accepted_answer_id": 34911562, "answer_count": 1, "score": -3, "last_activity_date": 1453345894, "creation_date": 1453323208, "last_edit_date": 1453345894, "question_id": 34910300, "link": "https://stackoverflow.com/questions/34910300/c-how-to-use-a-vector-function-in-a-class", "title": "C++: How to use a vector function in a class?", "body": "<p>This question - <em>Two Sum</em> - is from <a href=\"https://leetcode.com/problems/two-sum/\" rel=\"nofollow\">LeetCode</a>, and the function(algorithm) code is from <a href=\"https://leetcode.com/discuss/72453/o-n-c-code-which-defeats-98%25\" rel=\"nofollow\">here</a>. I used to use C++ in my undergraduate. But I have a long time not using it. I am reviewing the data structure of C++ now. I have search many and many websites to review the C++ basic knowledge. </p>\n\n<p>Here is my code, I want to implement the algorithm I mentioned before in that question. But I don't know what is wrong with my code in the <code>main</code> part.</p>\n\n<pre><code>int main()\n{\n    vector&lt;int&gt; numbers(4);\n    int target;\n    cout&lt;&lt;\"input numbers\"&lt;&lt;endl;\n    for(int i=0; i&lt;4; ++i)\n    cin &gt;&gt; numbers[i];\n    cout&lt;&lt;\"target\"&lt;&lt;endl;\n    cin &gt;&gt; target;\n    Solution solu;\n    solu.twoSum(numbers, target);\n    cout &lt;&lt; solu.ans &lt;&lt; endl;//No member named 'ans' in 'Solution'\n}\n</code></pre>\n\n<p>I use Xcode to run C++. Can someone help me with this question? </p>\n\n<p>The solution <a href=\"https://leetcode.com/discuss/72453/o-n-c-code-which-defeats-98%25\" rel=\"nofollow\">here</a> has error, <code>Control may reach end of non-void function</code>. Is it because of Xcode compiler or it do has error in code?</p>\n\n<p>Please explain this detailedly. \n Thanks in advance.</p>\n"}, {"tags": ["c++", "parameters", "reference"], "comments": [{"owner": {"reputation": 1503, "user_id": 157728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e262a1899a7b4c42038d4c19d12c5e9c?s=128&d=identicon&r=PG", "display_name": "Damyan", "link": "https://stackoverflow.com/users/157728/damyan"}, "edited": false, "score": 0, "creation_date": 1453323438, "post_id": 34910254, "comment_id": 57556386, "body": "The code in this question does not look like it compiles (eg in the printf line the &quot;a.String[0]&quot; should probably be &quot;a-&gt;String[0]&quot;, since &#39;a&#39; is a pointer).  Can you provide an example that&#39;s complete and reproducible, as described at <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453323599, "post_id": 34910254, "comment_id": 57556470, "body": "The code is incomplete, make a compiling sample in a single file"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5774050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfedc685262d7002f312f21c574bb12c?s=128&d=identicon&r=PG&f=1", "display_name": "Kios", "link": "https://stackoverflow.com/users/5774050/kios"}, "edited": false, "score": 0, "creation_date": 1453363373, "post_id": 34910566, "comment_id": 57570729, "body": "you can think a TStringList as a vector of string. TstringList is not a custo object it comes with some library of borland6 C++. It no matter what it is.  Ithink the point is general.  How to pass an object  by reference if i have its pointer available?-  Usually we have : foo(type &amp; arg) as declaration and having type x  we can pass by reference : foo(x). But here we have type *x= new type ();"}], "tags": [], "owner": {"reputation": 1717, "user_id": 809460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2f185b60f53780e157f314cdbf666008?s=128&d=identicon&r=PG", "display_name": "pokey909", "link": "https://stackoverflow.com/users/809460/pokey909"}, "is_accepted": true, "score": 0, "last_activity_date": 1453324482, "last_edit_date": 1453324482, "creation_date": 1453324144, "answer_id": 34910566, "question_id": 34910254, "link": "https://stackoverflow.com/questions/34910254/how-to-pass-a-tliststring-by-reference-wrapped-into-a-class/34910566#34910566", "title": "How to pass a TListstring by reference wrapped into a Class?", "body": "<p>I don't know how your TStringList is defined, but when I replace it witha mock class like</p>\n\n<pre><code>struct TStringList {\n    TStringList() { String.resize(10); }\n    vector&lt;string&gt; String;\n};\n</code></pre>\n\n<p>and correct your typos like <code>a.String[0]</code> to <code>a-&gt;String[0]</code>, then it works fine for me.</p>\n\n<p>Whats the return type of <code>operator []</code> for the TStringList?\nI believe the <code>......(some code )......</code> might be worth digging into?!\nPlease make sure you submit a complete and reproducible test case next time.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5774050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfedc685262d7002f312f21c574bb12c?s=128&d=identicon&r=PG&f=1", "display_name": "Kios", "link": "https://stackoverflow.com/users/5774050/kios"}, "is_accepted": false, "score": 0, "last_activity_date": 1453368450, "creation_date": 1453368450, "answer_id": 34919777, "question_id": 34910254, "link": "https://stackoverflow.com/questions/34910254/how-to-pass-a-tliststring-by-reference-wrapped-into-a-class/34919777#34919777", "title": "How to pass a TListstring by reference wrapped into a Class?", "body": "<p>Sorry all,\nall works fine. The error was in my unit test and not in the tested code.....\nSo, this topic can be closed or removed. The TStringList has no problem to be passed by reference.</p>\n"}], "owner": {"reputation": 15, "user_id": 5774050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfedc685262d7002f312f21c574bb12c?s=128&d=identicon&r=PG&f=1", "display_name": "Kios", "link": "https://stackoverflow.com/users/5774050/kios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34910566, "answer_count": 2, "score": 0, "last_activity_date": 1453368450, "creation_date": 1453323027, "last_edit_date": 1453323162, "question_id": 34910254, "link": "https://stackoverflow.com/questions/34910254/how-to-pass-a-tliststring-by-reference-wrapped-into-a-class", "title": "How to pass a TListstring by reference wrapped into a Class?", "body": "<p>File .h:</p>\n\n<pre><code>class A{\n    public:\n    TStringList &amp;tsl;\n    A(TStringList &amp;arg) : tsl(arg) {}\n}\nvoid foo(A&amp; dto);\n</code></pre>\n\n<p>File cpp:</p>\n\n<pre><code>void foo(A&amp; dto);\n{\n     dto.tsl.String[0] = \"AAA\";\n}\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>     TStringList *a= new TStringList();\n     ......(some code )......\n     A dtoArg=A(*a);\n     a.String[0]=\"BBB\";\n     foo(dtoArg); \n  Printf(\"first element now is %s\",a.String[0] );\n</code></pre>\n\n<p>Even if the project compiles and all seems fine at runtime, the behavior is not the expected one. The output is <code>BBB</code> and not <code>AAA</code> as expected. This means that the <code>TStrngList</code> is passed by value and not by reference.</p>\n\n<p>So, how to pass the <code>TString</code> list by reference. I won't copy the <code>TSringList</code> when it is passed to function <code>foo()</code>.</p>\n"}, {"tags": ["c++", "segmentation-fault", "mpi"], "comments": [{"owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 1, "creation_date": 1453326785, "post_id": 34910230, "comment_id": 57558244, "body": "Your question would be clearer if you explained what part of your code originated the error: Which of your many MPI calls results in <code>Null buffer pointer</code>? What line is the <code>Segmentation fault</code> thrown from?"}, {"owner": {"reputation": 1159, "user_id": 5606222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R20VU.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5606222/matt"}, "reply_to_user": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 0, "creation_date": 1453332281, "post_id": 34910230, "comment_id": 57560718, "body": "@Edward right, it was when I try get data from double array."}], "answers": [{"tags": [], "owner": {"reputation": 1503, "user_id": 157728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e262a1899a7b4c42038d4c19d12c5e9c?s=128&d=identicon&r=PG", "display_name": "Damyan", "link": "https://stackoverflow.com/users/157728/damyan"}, "is_accepted": true, "score": 3, "last_activity_date": 1453324152, "creation_date": 1453324152, "answer_id": 34910567, "question_id": 34910230, "link": "https://stackoverflow.com/questions/34910230/mpi-send-double-pointer/34910567#34910567", "title": "MPI_Send double pointer", "body": "<p>MPI_Recv will copy the data it receives to the buffer specified by the first parameter (myX in the case below):</p>\n\n<pre><code>MPI_Recv(myX, amount, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n</code></pre>\n\n<p>The problem is that you haven't created a buffer to store this.</p>\n\n<p>You could do:</p>\n\n<pre><code>myX = new double[amount];\n</code></pre>\n\n<p>For example to create the buffer, not forgetting to free the memory again afterwards with:</p>\n\n<pre><code>delete[] myX;\n</code></pre>\n"}], "owner": {"reputation": 1159, "user_id": 5606222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R20VU.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5606222/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 34910567, "answer_count": 1, "score": 0, "last_activity_date": 1453324152, "creation_date": 1453322946, "last_edit_date": 1453323374, "question_id": 34910230, "link": "https://stackoverflow.com/questions/34910230/mpi-send-double-pointer", "title": "MPI_Send double pointer", "body": "<p>I have following code:</p>\n\n<pre><code>double * myX;\ndouble * myY;\ndouble * myZ;\nint amount;\nint count;      // number of process\n\nvoid SomeClass::someMethod(double *x, double *y, double *z, int amount) {\n\n    if (myId == 0) {\n        myX = x;\n        myY = y;\n        myZ = z;\n        amount = amount;\n        for(int i = 1; i &lt; count; ++i) {\n            MPI_Send(&amp;amount, 1, MPI_INT, i, 0, MPI_COMM_WORLD);\n            MPI_Send(myX, amount, MPI_DOUBLE, i, 0, MPI_COMM_WORLD);\n            MPI_Send(myY, amount, MPI_DOUBLE, i, 0, MPI_COMM_WORLD);\n            MPI_Send(myX, amount, MPI_DOUBLE, i, 0, MPI_COMM_WORLD);\n        }\n    }                                         \n}\n\nvoid SomeClass::anotherMethod(void) {\n\n    if(myId != 0) {\n        MPI_Recv(&amp;amount, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n        MPI_Recv(myX, amount, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n        MPI_Recv(myY, amount, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n        MPI_Recv(myZ, amount, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);         \n    }\n\n    // rest of code\n    MPI_Reduce(args);\n}\n</code></pre>\n\n<p>But I have problem because I get <code>Null buffer pointer</code> when I run this code or <code>Segmentation fault</code> when I change something, for example set <code>&amp;</code> before var name and then run.</p>\n\n<p><code>MPI_init</code> and other required function are called in other class, where I also create this class objects.</p>\n\n<p>Can someone help me?</p>\n"}, {"tags": ["c++", "heap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453322814, "post_id": 34910122, "comment_id": 57556056, "body": "There is no <code>size&#47;2</code>.  Are you asking what <code>theSize &#47; 2</code> means?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1453323075, "post_id": 34910122, "comment_id": 57556200, "body": "To me it means &quot;start in the middle&quot;."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453323242, "post_id": 34910122, "comment_id": 57556284, "body": "Unless theSize is an object with a <code>&#47;</code> operator overload that does something unusual, this should be division by 2."}, {"owner": {"reputation": 329, "user_id": 4615778, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/805ccf8d711037995d6737a90a942fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Baimyrza Shamyr", "link": "https://stackoverflow.com/users/4615778/baimyrza-shamyr"}, "edited": false, "score": 0, "creation_date": 1453323512, "post_id": 34910122, "comment_id": 57556423, "body": "Yes NathanOliver I mean theSize/2. In other words,the size of the list of numbers to be inserted into the binary Heap."}], "answers": [{"tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 2, "last_activity_date": 1453332132, "last_edit_date": 1453332132, "creation_date": 1453331392, "answer_id": 34912415, "question_id": 34910122, "link": "https://stackoverflow.com/questions/34910122/what-does-thesize-2-means-percolatedowni-function/34912415#34912415", "title": "what does theSize/2 means percolateDown(i) function?", "body": "<p>A very common representation of a heap is to map it to an array. In this representation, for any node stored at <code>a[n]</code> its children are at <code>a[n*2]</code> and <code>a[n*2+1]</code>. The root node is at <code>a[1]</code>.</p>\n\n<p>Given that, dividing the index by two (and discarding any remainder) is simply how you get from the index of a node to the index of its parent.</p>\n\n<p>In the case of <code>percolateDown</code> the idea is to start with the nodes one level above the leaves of the heap.</p>\n\n<p>Try searching for \"heap in array\" for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 4615778, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/805ccf8d711037995d6737a90a942fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Baimyrza Shamyr", "link": "https://stackoverflow.com/users/4615778/baimyrza-shamyr"}, "is_accepted": false, "score": 0, "last_activity_date": 1453366866, "creation_date": 1453366866, "answer_id": 34919283, "question_id": 34910122, "link": "https://stackoverflow.com/questions/34910122/what-does-thesize-2-means-percolatedowni-function/34919283#34919283", "title": "what does theSize/2 means percolateDown(i) function?", "body": "<p>Ok. It turned out that theSize/2 leads us to the last subtree of unsorted , Binary Heap where we start to percolateDown(i)(sorting function). \n    <br> <p>Then we move to the (i-1)th subtree and percolateDown() that one. And so on Until the Binary Heap Tree is sorted either Max or Min.</p>\n\n<p>It is clarified in this video from time 2:42  (<a href=\"https://www.youtube.com/watch?v=WsNQuCa_-PU\" rel=\"nofollow\">https://www.youtube.com/watch?v=WsNQuCa_-PU</a>)</p>\n"}], "owner": {"reputation": 329, "user_id": 4615778, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/805ccf8d711037995d6737a90a942fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Baimyrza Shamyr", "link": "https://stackoverflow.com/users/4615778/baimyrza-shamyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1453366866, "creation_date": 1453322625, "last_edit_date": 1453323564, "question_id": 34910122, "link": "https://stackoverflow.com/questions/34910122/what-does-thesize-2-means-percolatedowni-function", "title": "what does theSize/2 means percolateDown(i) function?", "body": "<p>What does theSize/2 means in the following code,\nIs this somehow  related with Insertion O(LogN)?</p>\n\n<pre><code>template &lt;class Comparable&gt;\nvoid BinaryHeap&lt;Comparable&gt;::buildHeap( )\n{\n    for( int i = theSize / 2; i &gt; 0; i-- )\n        percolateDown( i );\n}\n</code></pre>\n\n<p>For this percolateDown function</p>\n\n<pre><code>template &lt;class Comparable&gt;\nvoid BinaryHeap&lt;Comparable&gt;::percolateDown( int hole )\n{\n  int child;\n  Comparable tmp = array[ hole ];\n\n  for( ; hole * 2 &lt;= theSize; hole = child )\n  {\n    child = hole * 2;\n    if( child != theSize &amp;&amp; array[child + 1] &lt; array[child])\n       child++;\n    if( array[ child ] &lt; tmp )\n       array[ hole ] = array[ child ];\n    else\n       break;\n  }\n  array[ hole ] = tmp;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "skybox"], "comments": [{"owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "reply_to_user": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1453323178, "post_id": 34910059, "comment_id": 57556253, "body": "@WillBriggs What else should I say? This is what I used, is this wrong or not? This is a common problem but not many people can fix it."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1453323268, "post_id": 34910059, "comment_id": 57556297, "body": "Clamp to edge affects what happens to texture coordinates when they get to the edge of a texture map; is each of your faces a separate map or have you put all six into a single map (presumably with a white background)?"}, {"owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "edited": false, "score": 0, "creation_date": 1453323679, "post_id": 34910059, "comment_id": 57556513, "body": "Do you want to have 1200 lines of code here? I already read that link a couple of times but if I don&#39;t give my whole code, you guys don&#39;t know what every function and stuff is."}, {"owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "edited": false, "score": 0, "creation_date": 1453324455, "post_id": 34910059, "comment_id": 57556957, "body": "But if you guys wanna run it, including the main method, then it still would be enourmous much code."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 2, "creation_date": 1453329964, "post_id": 34910059, "comment_id": 57559792, "body": "Maybe there are actual borders in the texture image? Maybe you can post your sky texture to check?"}, {"owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1453392155, "post_id": 34910059, "comment_id": 57590260, "body": "@rodrigo I updated my post, and btw I used another image for the skybox but this one also doesn&#39;t work."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1453395703, "post_id": 34910059, "comment_id": 57592758, "body": "The image you posted is a composite of all 6 faces. Are you using this very same big image for the texture cube or 6 different images?"}], "answers": [{"tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 1, "last_activity_date": 1453473570, "last_edit_date": 1453473570, "creation_date": 1453328305, "answer_id": 34911732, "question_id": 34910059, "link": "https://stackoverflow.com/questions/34910059/opengl-skybox-visible-borders/34911732#34911732", "title": "OpenGL Skybox visible borders", "body": "<p>Its texture coordinates floating error. If you use shaders you can clean it to strict [0.0f, 1.0f]. I cannot say is there is any possible solution for OpenGL API calls. But shaders must support this. Example using HLSL 2.0 (NVIDIA Cg) for post screen shader.</p>\n\n<pre><code>float g_fInverseViewportWidth: InverseViewportWidth;\nfloat g_fInverseViewportHeight: InverseViewportHeight;\n\nstruct VS_OUTPUT {\n   float4 Pos: POSITION;\n   float2 texCoord: TEXCOORD0;\n};\n\nVS_OUTPUT vs_main(float4 Pos: POSITION){\n   VS_OUTPUT Out;\n\n   // Clean up inaccuracies\n   Pos.xy = sign(Pos.xy);\n\n   Out.Pos = float4(Pos.xy, 0, 1);\n   // Image-space\n   Out.texCoord.x = 0.5 * (1 + Pos.x + g_fInverseViewportWidth);\n   Out.texCoord.y = 0.5 * (1 - Pos.y + g_fInverseViewportHeight);\n\n   return Out;\n}\n</code></pre>\n\n<p>Where <code>sign</code> rutine is used for strict [0, 1] texture coord specification. Also there is <code>sign</code> rutine for GLSL you may use. <code>sign</code> retrives sign of the vector or scalar it mean -1 for negative and 1 for positive value so to pass texture coord for vertex shader it must be specified as -1 for 0 and 1 for 1 than you may use this like formulae for actual texture coord specification:</p>\n\n<pre><code>   Out.texCoord.x = 0.5 * (1 + Pos.x + g_fInverseViewportWidth);\n   Out.texCoord.y = 0.5 * (1 - Pos.y + g_fInverseViewportHeight);\n</code></pre>\n\n<p>Here you can see texture 1 texel width inaccurancy:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lxfsk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lxfsk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now with modified shader:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ex9wW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ex9wW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "is_accepted": true, "score": 2, "last_activity_date": 1453406979, "last_edit_date": 1453406979, "creation_date": 1453395698, "answer_id": 34929838, "question_id": 34910059, "link": "https://stackoverflow.com/questions/34910059/opengl-skybox-visible-borders/34929838#34929838", "title": "OpenGL Skybox visible borders", "body": "<p>I finally found the solution. This is a filthy mistake in the texture itself. There is a black border around the texture, but you can barely see it unless you zoom in. So I removed the borders and it worked.</p>\n"}], "owner": {"reputation": 241, "user_id": 4759547, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/elm0t.png?s=128&g=1", "display_name": "OpenGL Maniac", "link": "https://stackoverflow.com/users/4759547/opengl-maniac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1761, "favorite_count": 3, "accepted_answer_id": 34929838, "answer_count": 2, "score": 2, "last_activity_date": 1453473570, "creation_date": 1453322405, "last_edit_date": 1453392098, "question_id": 34910059, "link": "https://stackoverflow.com/questions/34910059/opengl-skybox-visible-borders", "title": "OpenGL Skybox visible borders", "body": "<p>I have my skybox showing: <a href=\"https://i.stack.imgur.com/ruXhw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ruXhw.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But there are borders of the box, which I don't want. I already searched the internet and they all said that GL_CLAMP_TO_EDGE should work, but I am still seeing the borders.</p>\n\n<p>This is what I used for the texture loading:</p>\n\n<pre><code>glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\nglGenerateMipmap(GL_TEXTURE_2D);\n</code></pre>\n\n<p>Can anyone tell me what I am doing wrong?</p>\n\n<p><strong>EDIT:</strong>\n<a href=\"https://i.stack.imgur.com/dRfG2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dRfG2.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Strange thing is that the borders are only showing at the top of the skybox. so when a skybox face, touches the roof of the box.</p>\n\n<p>Here an image of it:\n<a href=\"https://i.stack.imgur.com/qf2am.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qf2am.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "class", "decimal", "ctime"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1453322173, "post_id": 34909972, "comment_id": 57555699, "body": "You should review your question before you ask it and make sure it is formatted correctly."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1453322711, "post_id": 34909972, "comment_id": 57556006, "body": "Usual hints: compile with all warnings &amp; debug info (<code>g++ -Wall -Wextra -g</code>) then <b>use the debugger</b> (<code>gdb</code>) &amp;  <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1453322980, "post_id": 34909972, "comment_id": 57556150, "body": "You&#39;re obviously new here if you think that comment was cruel. It was actually much kinder than many I&#39;ve seen."}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453323200, "post_id": 34909972, "comment_id": 57556265, "body": "For example I used ctime for 2 values randomly. I tested the moment[1] and moment[100]....and the function return different values...but when i use the code i get in momenti and momentf  the same values. why? I think   is something from the getter or the array"}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "reply_to_user": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1453323690, "post_id": 34909972, "comment_id": 57556522, "body": "@ravenspoint can you check now? you need the full source or something? because i used many classes"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453325457, "post_id": 34910848, "comment_id": 57557515, "body": "thanks for your reply! So I checked what I have in momenti and momentf. They have the right values. But i don&#39;t know how to convert a number with 13 digits to a normal date like 10.05.2015 21:30. This is the problem. I used ctime but doesn t do the right thing for me apparently"}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453325582, "post_id": 34910848, "comment_id": 57557584, "body": "can you advice me  what function to use in C++ Visiual Studio2013?"}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453326827, "post_id": 34910848, "comment_id": 57558266, "body": "I need a function to convert somehow the number with 13 digits in a date. any clue?"}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453327976, "post_id": 34910848, "comment_id": 57558901, "body": "it s not good. according epoch converter we should get this : GMT: Thu, 13 Aug 2015 12:09:07 GMT    <a href=\"http://www.epochconverter.com/\" rel=\"nofollow noreferrer\">epochconverter.com</a>"}, {"owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "edited": false, "score": 0, "creation_date": 1453328185, "post_id": 34910848, "comment_id": 57559001, "body": "Halleluia!!! I will post the corect code now :P. After 2 days the first victory :))....If i can fix and the latitude and longitude problem would be great lol"}], "tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": false, "score": 1, "last_activity_date": 1453326975, "last_edit_date": 1453326975, "creation_date": 1453325063, "answer_id": 34910848, "question_id": 34909972, "link": "https://stackoverflow.com/questions/34909972/converting-13-decimals-to-datetime/34910848#34910848", "title": "Converting 13 decimals to datetime", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;time.h&gt;\nusing namespace std;\n\nint main()\n{\n    long test = 1439467747492;\n    time_t x = test;\n    cout &lt;&lt; ctime( &amp;x )  &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Produces</p>\n\n<pre><code>Tue Sep 18 20:15:32 1990\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 1, "last_activity_date": 1453339980, "last_edit_date": 1453339980, "creation_date": 1453338347, "answer_id": 34913627, "question_id": 34909972, "link": "https://stackoverflow.com/questions/34909972/converting-13-decimals-to-datetime/34913627#34913627", "title": "Converting 13 decimals to datetime", "body": "<blockquote>\n  <p>It is not good. According epoch converter we should get this : GMT: Thu, 13 Aug 2015 12:09:07 GMT</p>\n</blockquote>\n\n<p>Here is how you can get this output with C++11/14 and using <a href=\"http://howardhinnant.github.io/date_v2.html\" rel=\"nofollow\">this free, open source date library</a> which extends the C++ <code>&lt;chrono&gt;</code> library to handle dates.</p>\n\n<pre><code>#include \"date.h\"\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace std::chrono;\n    using namespace std;\n    using namespace date;\n    using time_point = std::chrono::time_point&lt;system_clock, milliseconds&gt;;\n    auto tp = time_point{1439467747492ms};\n    auto dp = floor&lt;days&gt;(tp);\n    auto time = make_time(tp - dp);\n    auto ymd = year_month_day{dp};\n    cout &lt;&lt; \"GMT: \" &lt;&lt; weekday{dp} &lt;&lt; \", \" &lt;&lt; ymd.day() &lt;&lt; ' ' &lt;&lt; ymd.month()\n         &lt;&lt; ' ' &lt;&lt; ymd.year() &lt;&lt; ' ' &lt;&lt; time  &lt;&lt; \" GMT\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>GMT: Thu, 13 Aug 2015 12:09:07.492 GMT\n</code></pre>\n\n<p>I threw in the fractional seconds for fun, and it seemed a shame to waste them (the C lib won't give them to you).  If you really don't want them, it is easy to fix:</p>\n\n<pre><code>    auto time = make_time(floor&lt;seconds&gt;(tp) - dp);\n</code></pre>\n\n<p>Now the output is:</p>\n\n<pre><code>GMT: Thu, 13 Aug 2015 12:09:07 GMT\n</code></pre>\n\n<p>You need C++14 for the <code>1439467747492ms</code> above.  If you only have C++11 you can sub in this instead: <code>milliseconds{1439467747492}</code>.  If you only have C++03, then you are 13 years behind the times and stuck with <code>ctime</code>. ;-)</p>\n\n<p>The <code>chrono</code> solution will offer you greater type safety, more flexibility, and greater performance.</p>\n\n<blockquote>\n  <p>If i can fix and the latitude and longitude problem would be great lol </p>\n</blockquote>\n\n<p>If you can translate latitude and longitude into an IANA timezone name (and there are tools to do this), I've got a <a href=\"http://howardhinnant.github.io/tz.html\" rel=\"nofollow\">IANA timezone database parser</a> for you which interoperates with <code>&lt;chrono&gt;</code> and <code>\"date.h\"</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 5801522, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-1BPkSoGR3K4/AAAAAAAAAAI/AAAAAAAAACA/rzgl34ilz5k/photo.jpg?sz=128", "display_name": "Ciobanu Rares-Constantin", "link": "https://stackoverflow.com/users/5801522/ciobanu-rares-constantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 34913627, "answer_count": 2, "score": -2, "last_activity_date": 1453493490, "creation_date": 1453322072, "last_edit_date": 1453490738, "question_id": 34909972, "link": "https://stackoverflow.com/questions/34909972/converting-13-decimals-to-datetime", "title": "Converting 13 decimals to datetime", "body": "<p>I have a project about cars with GPS. I need to return the start and the finish moment for each car.</p>\n\n<p>So we have:<br>\ntime_t x, y;\nBecause I will use later them for a transformation.</p>\n\n<p>I have a problem. I read from an external file data in this format:</p>\n\n<pre><code>auto1\n1439467747492 \nauto1\n1439467748512\n</code></pre>\n\n<p>...etc.\nauto1->name of the car;<br>\n1439467747492->the moment in time of the car</p>\n\n<p>I tried to get the first position of the first moment and the last moment for each car. This is the code in C++:</p>\n\n<pre><code> long test = momenti[choice1]/1000;\n time_t x = test;\n cout &lt;&lt; \"     Momentul initial:\\n \" &lt;&lt; ctime(&amp;x) &lt;&lt; endl;\n long test1 = momentf[choice1] / 1000;\n time_t y = test1;\n cout &lt;&lt; \"     Momentul final:\\n \" &lt;&lt; ctime(&amp;y) &lt;&lt; endl;\n</code></pre>\n\n<p>I receive the same date for every car. Is something like <code>momenti[i]=momentf[i]</code>\nWhat did I do wrong?</p>\n"}, {"tags": ["c++", "qt", "header", "qt-creator", "qpushbutton"], "comments": [{"owner": {"reputation": 1849, "user_id": 480628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZT54.jpg?s=128&g=1", "display_name": "Huy", "link": "https://stackoverflow.com/users/480628/huy"}, "edited": false, "score": 1, "creation_date": 1453324233, "post_id": 34909791, "comment_id": 57556828, "body": "No, but if you want to include a larger subset (almost everything) you can try for something like, #include &lt;QtWidgets&gt; and #include &lt;QtCore&gt; for example"}, {"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "reply_to_user": {"reputation": 1849, "user_id": 480628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZT54.jpg?s=128&g=1", "display_name": "Huy", "link": "https://stackoverflow.com/users/480628/huy"}, "edited": false, "score": 0, "creation_date": 1453330238, "post_id": 34909791, "comment_id": 57559902, "body": "Yes it possible but not the solution if there is a lot of lines of code !!!"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1453387918, "post_id": 34909791, "comment_id": 57587274, "body": "&quot;Yes it possible but not the solution if there is a lot of lines of code !!!&quot; It doesn&#39;t really matter in practice unless you <i>project</i> has many files. Personally I find that for small projects (&lt;100 files) you&#39;re perfectly fine including everything. But even for large projects (1000s of files), precompiled headers make all the difference: use them! They&#39;ll make including the entire Qt modules have essentially zero cost."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453388005, "post_id": 34909791, "comment_id": 57587339, "body": "OTOH, you must be dealing with really trivial code if manually typing this out makes any real difference. Suppose you have a &quot;typical&quot; source module between 1k-5k lines. What&#39;s a dozen or two include lines? Noise."}, {"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "edited": false, "score": 0, "creation_date": 1457870447, "post_id": 34909791, "comment_id": 59594090, "body": "Anyone who has developed for some time in Java knows that this is gold, and excluding this feature from QtCreator is crippling at best. Another similar feature is that the needed imports are carried with any code you copy and paste between files so that you don&#39;t have to do that manually"}], "answers": [{"comments": [{"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 0, "creation_date": 1453334755, "post_id": 34910815, "comment_id": 57561577, "body": "Yes it seems interesting but it&#39;s not what i really look for but +1 for the hint"}], "tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": false, "score": 2, "last_activity_date": 1453324960, "creation_date": 1453324960, "answer_id": 34910815, "question_id": 34909791, "link": "https://stackoverflow.com/questions/34909791/how-to-include-needed-headers-automatically-in-qt-creator/34910815#34910815", "title": "How to include needed headers automatically in QT Creator", "body": "<p>Not exactly as you requested, but: if you would like to create a new class with the help of Qt Creator you can certainly have Qt Creator taking care of immediate include files as well:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XY4kL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XY4kL.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"http://doc.qt.io/qtcreator/creator-project-creating.html\" rel=\"nofollow noreferrer\">Qt Documentation: Creating Projects</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3945128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955f98092d7c8162f313d0a937ea8216?s=128&d=identicon&r=PG&f=1", "display_name": "sebekk23", "link": "https://stackoverflow.com/users/3945128/sebekk23"}, "is_accepted": false, "score": 3, "last_activity_date": 1613259222, "last_edit_date": 1613259222, "creation_date": 1493719990, "answer_id": 43735310, "question_id": 34909791, "link": "https://stackoverflow.com/questions/34909791/how-to-include-needed-headers-automatically-in-qt-creator/43735310#43735310", "title": "How to include needed headers automatically in QT Creator", "body": "<p>In QT Creator version 4.1.0 you have option for that under right click (move your cursor over type you want to include, click, choose refactor and there it is)</p>\n<p>shortcut for that is (Alt+Return) to trigger quick fix , you can see what is the shortcut for it if it does not work on your machine Tools -&gt; Options -&gt; Environment -&gt; Keyboard (Search for quickfix).</p>\n"}], "owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3149, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1613259222, "creation_date": 1453321495, "last_edit_date": 1453325102, "question_id": 34909791, "link": "https://stackoverflow.com/questions/34909791/how-to-include-needed-headers-automatically-in-qt-creator", "title": "How to include needed headers automatically in QT Creator", "body": "<p>I have a project in QT Creator and I want that the header files be included automatically when using a new object. It's like in Eclipse : Add needed headers when invoking a new object by using Ctrl+Alt+Space : all needed headers will be included.</p>\n\n<p>Here is an example</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QPushButton&gt;  /* Header that i want to include automatically */\n\n int main( int argc, char *argv[ ] )\n{\n    QApplication app( argc, argv) ;\n    QWidget fenetre;\n/*Add needed headers when invoking a new object like ctrl+alt+space in eclipse*/\n    QPushButton bouton( \"Bonjour\", &amp;fenetre) ;\n    bouton. move(70,60);\n    fenetre. show( ) ;\n    return app. exec( ) ;\n}\n</code></pre>\n\n<p>Any suggestions on how to do this in QT Creator ?\nThanks</p>\n"}, {"tags": ["c++", "vector", "stl", "iterator"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453321454, "post_id": 34909724, "comment_id": 57555244, "body": "<code>test_vector[*iterator];</code> is a big code smell"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1453321512, "post_id": 34909724, "comment_id": 57555278, "body": "what you have is UB, you should have <code>sum = sum + *v;</code> instead of <code>sum = sum + test_vector[*v];</code>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1453321514, "post_id": 34909724, "comment_id": 57555280, "body": "An iterator is not an index."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1453321488, "creation_date": 1453321488, "answer_id": 34909787, "question_id": 34909724, "link": "https://stackoverflow.com/questions/34909724/error-when-adding-int-elements-from-a-vector-c/34909787#34909787", "title": "Error when adding int elements from a vector c++", "body": "<p>Your code <code>test_vector[*v]</code> is incorrect. What you are doing there is you are dereferencing an iterator and get an integer (since your vector is a vector of ints). Now, you access an element using this integer as index and of course, arrive at random memory location, going out of array bounds and triggering undefined behaviour.</p>\n\n<p>You are using iterators correctly in two other loops, so i assume, this is just a typo.</p>\n"}, {"tags": [], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "is_accepted": false, "score": 2, "last_activity_date": 1453321515, "creation_date": 1453321515, "answer_id": 34909796, "question_id": 34909724, "link": "https://stackoverflow.com/questions/34909724/error-when-adding-int-elements-from-a-vector-c/34909796#34909796", "title": "Error when adding int elements from a vector c++", "body": "<pre><code>for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n        sum = sum + *v;\n        std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>is the correct code.</p>\n\n<p>Or, the same but a bit shorter and more C++11-ish:</p>\n\n<pre><code>for (const int item: test_vector) {\n    sum += item;\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Or even</p>\n\n<pre><code>sum = std::accumulate(test_vector.begin(), test_vector.end(), 0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 1, "last_activity_date": 1453325348, "last_edit_date": 1453325348, "creation_date": 1453321584, "answer_id": 34909824, "question_id": 34909724, "link": "https://stackoverflow.com/questions/34909724/error-when-adding-int-elements-from-a-vector-c/34909824#34909824", "title": "Error when adding int elements from a vector c++", "body": "<p>Using <code>test_vector[*v];</code> will be out of range and cause <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>This should be changed to:</p>\n\n<pre><code>for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n    sum = sum + *v;\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Or <code>sum += *v;</code> for a shorter version.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453324158, "post_id": 34909892, "comment_id": 57556775, "body": "<code>v[0]</code> aka <code>iterator[index]</code> is questionable (not working if the iterator id no pointer)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1453324241, "post_id": 34909892, "comment_id": 57556835, "body": "@DieterL&#252;cking  This operator works with any random access iterator."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453324470, "post_id": 34909892, "comment_id": 57556964, "body": "Thanks for that lesson (is it useful?)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1453324584, "post_id": 34909892, "comment_id": 57557030, "body": "@DieterL&#252;cking I never see it myself.:) I mentioned it only regarding with this question.:)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1453324708, "post_id": 34909892, "comment_id": 57557090, "body": "@DieterL&#252;cking Till now I have written neither C++ program because I am unemployed.:)"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1453325218, "post_id": 34909892, "comment_id": 57557398, "body": "No <code>std::accumulate</code> option makes me a sad C++ enthusiast."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1453322118, "last_edit_date": 1453322118, "creation_date": 1453321781, "answer_id": 34909892, "question_id": 34909724, "link": "https://stackoverflow.com/questions/34909724/error-when-adding-int-elements-from-a-vector-c/34909892#34909892", "title": "Error when adding int elements from a vector c++", "body": "<p>The vector has only 10 elements</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) {\n                ^^^^^^\n    test = test * 2;\n    test_vector.push_back(test);\n}\n</code></pre>\n\n<p>So the valid range of indices for the vector is <code>0-9</code></p>\n\n<p>However in this loop</p>\n\n<pre><code>for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n    sum = sum + test_vector[*v];\n                           ^^^^^\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>the value of the index in this expression <code>test_vector[*v]</code> can be outside the valid range of indices for the vector.</p>\n\n<p>You could write for example</p>\n\n<pre><code>for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n    sum = sum + *v;\n                ^^^^\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Or you could even write</p>\n\n<pre><code>for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n    sum = sum + v[0];\n                ^^^^\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>If your compiler supports the range based for loop then it is simpler to write</p>\n\n<pre><code>for ( int x : test_vector ) {\n    sum = sum + x;\n    std::cout &lt;&lt; sum &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Take into account that operators &lt; and [] are supported only for random access iterators. So in general it is better to write the condition in for loop the following way</p>\n\n<pre><code>for (v = test_vector.begin(); v != test_vector.end(); ++v) {\n                              ^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5483367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6fa9a6869d03957cc77474cac54f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Sabyc90", "link": "https://stackoverflow.com/users/5483367/sabyc90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 34909892, "answer_count": 4, "score": 2, "last_activity_date": 1453325348, "creation_date": 1453321257, "last_edit_date": 1453321344, "question_id": 34909724, "link": "https://stackoverflow.com/questions/34909724/error-when-adding-int-elements-from-a-vector-c", "title": "Error when adding int elements from a vector c++", "body": "<p>I have this code:</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; test_vector;\n    std::vector&lt;int&gt;::iterator v;\n    int test = 1;\n    int sum = 0;\n\n    for (int i = 0; i &lt; 10; i++) {\n        test = test * 2;\n        test_vector.push_back(test);\n    }\n\n    for (v = test_vector.begin(); v &lt; test_vector.end(); v++) {\n        std::cout &lt;&lt; *v &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    std::reverse(test_vector.begin(), test_vector.end());\n\n    for (v = test_vector.begin(); v &lt; test_vector.end(); v++) {\n        std::cout &lt;&lt; *v &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    for (v = test_vector.begin(); v &lt; test_vector.end(); ++v) {\n        sum = sum + test_vector[*v];\n        std::cout &lt;&lt; sum &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It's quite easy, I have a vector, fill it with some elements, than going reverse and finally trying to add all the elements.</p>\n\n<p>The output is this:</p>\n\n<pre><code>2 4 8 16 32 64 128 256 512 1024 \n1024 512 256 128 64 32 16 8 4 2 \n0 0 0 0 0 0 0 4 68 324  \n</code></pre>\n\n<p>The question is this: What am I doing wrong in the last loop where the <code>sum</code> is ?</p>\n\n<p>I'd like it to be something like <code>1024 + 512 + 256</code> etc;</p>\n"}, {"tags": ["c++", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 1591566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730e6e4b90f79891ebeb279728ba3148?s=128&d=identicon&r=PG", "display_name": "zoolook", "link": "https://stackoverflow.com/users/1591566/zoolook"}, "edited": false, "score": 0, "creation_date": 1453323053, "post_id": 34909793, "comment_id": 57556186, "body": "Thanks for your input. I tried Korean - std::wstring token= L&quot;1k2..dkfjls\ud55cie=\uae00=_=ki38.;;12_93&quot; - and am not sure if it works. It spits out &quot;1k2dkfjlsieki381293&quot;"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 41, "user_id": 1591566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730e6e4b90f79891ebeb279728ba3148?s=128&d=identicon&r=PG", "display_name": "zoolook", "link": "https://stackoverflow.com/users/1591566/zoolook"}, "edited": false, "score": 1, "creation_date": 1453323271, "post_id": 34909793, "comment_id": 57556300, "body": "@zoolook which locale is this? Mind that you can use <a href=\"http://en.cppreference.com/w/cpp/locale/isalnum\" rel=\"nofollow noreferrer\"><code>std::isalnum(std::locale)</code></a> where you&#39;re allowed to set the locale."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 4, "last_activity_date": 1453322222, "last_edit_date": 1453322222, "creation_date": 1453321501, "answer_id": 34909793, "question_id": 34909649, "link": "https://stackoverflow.com/questions/34909649/i18n-friendly-way-of-stripping-non-alphanumeric-characters/34909793#34909793", "title": "i18n friendly way of stripping non-alphanumeric characters", "body": "<p>You can use the erase-remove idiom with a <code>std::isalnum</code> predicate like below:</p>\n\n<pre><code>std::string StripNonAlphaNum(std::string token) {\n  token.erase(std::remove_if(token.begin(), token.end(), \n              [](char const &amp;c){ return !std::isalnum(c); }), token.end());\n  return token;\n} \n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6889182a2c1b5e71\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n\n<p>The same can be implemented for <code>std::wstring</code> as well:</p>\n\n<pre><code>std::wstring StripNonAlphaNum(std::wstring token) {\n  token.erase(std::remove_if(token.begin(), token.end(),\n              [](char const &amp;c){ return !std::iswalnum(c); }), token.end());\n  return token;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/0152e105d8754243\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n"}], "owner": {"reputation": 41, "user_id": 1591566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730e6e4b90f79891ebeb279728ba3148?s=128&d=identicon&r=PG", "display_name": "zoolook", "link": "https://stackoverflow.com/users/1591566/zoolook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1453322222, "creation_date": 1453320984, "question_id": 34909649, "link": "https://stackoverflow.com/questions/34909649/i18n-friendly-way-of-stripping-non-alphanumeric-characters", "title": "i18n friendly way of stripping non-alphanumeric characters", "body": "<p>I want to strip any non-alphanumeric characters in a string. I'm using the following function for now, but it certainly wouldn't work for many languages. Is there an i18n-friendly way of doing it?</p>\n\n<pre><code>static string StripNonAlphaNum(const string&amp; token) {\n    string s = token;\n     // strip away non-alphanumeric parts using a RE expression\n    RE2::GlobalReplace(&amp;s, \"[^A-Za-z0-9]\", \"\");\n    return s;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector", "iterator", "const-iterator"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453321141, "post_id": 34909591, "comment_id": 57555068, "body": "GCC 4.7 and its runtime library didn&#39;t implement C++11 fully."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1453321207, "post_id": 34909591, "comment_id": 57555104, "body": "You need gcc-4.9 for that to compile"}], "owner": {"reputation": 165, "user_id": 5759941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17e647dc92a0274428b0f0e0cf8d522?s=128&d=identicon&r=PG&f=1", "display_name": "KittyT2016", "link": "https://stackoverflow.com/users/5759941/kittyt2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1453321191, "answer_count": 0, "score": 0, "last_activity_date": 1453320974, "creation_date": 1453320791, "last_edit_date": 1453320974, "question_id": 34909591, "link": "https://stackoverflow.com/questions/34909591/passing-const-iterator-to-erase-doesnt-compile-on-gcc-4-7-1", "closed_reason": "Duplicate", "title": "Passing const_iterator to erase doesn&#39;t compile on gcc 4.7.1", "body": "<p>The huge error:</p>\n\n<pre><code>BlackJack.cpp: In member function \u00e2void BlackJack::leaveGame(const std::vector&lt;int&gt;&amp;)\u00e2:\nBlackJack.cpp:342:35: error: no matching function for call to \u00e2std::vector&lt;Player*&gt;::erase(std::vector&lt;Player*&gt;::const_iterator&amp;)\u00e2\nBlackJack.cpp:342:35: note: candidates are:\nIn file included from /usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/vector:70:0,\n                 from /usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/random.h:34,\n                 from /usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/random:50,\n                 from /usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/stl_algo.h:67,\n                 from /usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/algorithm:63,\n                 from BlackJack.cpp:8:\n/usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/vector.tcc:135:5: note: std::vector&lt;_Tp, _Alloc&gt;::iterator std::vector&lt;_Tp, _Alloc&gt;::erase(std::vector&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = Player*; _Alloc = std::allocator&lt;Player*&gt;; std::vector&lt;_Tp, _Alloc&gt;::iterator = __gnu_cxx::__normal_iterator&lt;Player**, std::vector&lt;Player*&gt; &gt;; typename std::_Vector_base&lt;_Tp, _Alloc&gt;::pointer = Player**]\n/usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/vector.tcc:135:5: note:   no known conversion for argument 1 from \u00e2std::vector&lt;Player*&gt;::const_iterator {aka __gnu_cxx::__normal_iterator&lt;Player* const*, std::vector&lt;Player*&gt; &gt;}\u00e2 to \u00e2std::vector&lt;Player*&gt;::iterator {aka __gnu_cxx::__normal_iterator&lt;Player**, std::vector&lt;Player*&gt; &gt;}\u00e2\n/usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/vector.tcc:147:5: note: std::vector&lt;_Tp, _Alloc&gt;::iterator std::vector&lt;_Tp, _Alloc&gt;::erase(std::vector&lt;_Tp, _Alloc&gt;::iterator, std::vector&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = Player*; _Alloc = std::allocator&lt;Player*&gt;; std::vector&lt;_Tp, _Alloc&gt;::iterator = __gnu_cxx::__normal_iterator&lt;Player**, std::vector&lt;Player*&gt; &gt;; typename std::_Vector_base&lt;_Tp, _Alloc&gt;::pointer = Player**]\n/usr/local/gcc4.7/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/vector.tcc:147:5: note:   candidate expects 2 arguments, 1 provided\n</code></pre>\n\n<p>The relevant functions :</p>\n\n<pre><code>static const vector&lt;Player*&gt;::const_iterator findPlayer(\n        const vector&lt;Player*&gt;&amp; players, int id) {///const\n        vector&lt;Player*&gt;::const_iterator found\n        = find_if(begin(players), end(players), [id] (Player* player) {\n            return player-&gt;getId() == id;\n        });\n       return found;\n    }\n\nvoid BlackJack::leaveGame(const vector&lt;int&gt;&amp; players){\n        if(allPlayersIn(this-&gt;players_pool, players)){\n            for(vector&lt;int&gt;::const_iterator cur_id = players.begin();\n                    cur_id != players.end(); ++cur_id){\n                vector&lt;Player *&gt;::const_iterator found =\n                        findPlayer(this-&gt;_players_in, *cur_id);\n                if(found != end(this-&gt;_players_in)){////end\n                    this-&gt;_players_in.erase(found);\n                    this-&gt;_players_in_count--;\n                }\n            }\n        } else {\n            PlayerDoesNotExistException();\n        }\n    }\n</code></pre>\n\n<p>Does anybody see why this happens ? \nAs I know gcc++11 does support this issue. \nIf I remove all the \"const\" the compiler doesn't shout.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "dependencies", "project"], "comments": [{"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1453322798, "post_id": 34909552, "comment_id": 57556048, "body": "You could build a folder hierarchy for the project where you have all necessary libraries and dependecies within an &quot;Import&quot; folder. Within your project refer to this location based on the folder your project is stored, i.e: &quot;../../Import&quot;. If this works for you I could elaborate it in an answer."}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1454949332, "post_id": 34909552, "comment_id": 58260729, "body": "if my answer worked for you, will you be kind enough to mark it as accepted?"}], "answers": [{"tags": [], "owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "is_accepted": true, "score": 1, "last_activity_date": 1453324182, "creation_date": 1453324182, "answer_id": 34910578, "question_id": 34909552, "link": "https://stackoverflow.com/questions/34909552/pack-every-dependency-in-a-visual-studio-project-to-send-easily/34910578#34910578", "title": "Pack every dependency in a visual studio project to send easily", "body": "<p>What I usually do is to build a Solution folder that has everything that I need. When a coworker needs to continue coding for that solution he simply copies the whole \"Solution\" folder and runs the .sln with VisualStudio.</p>\n\n<p>Be <strong>warned</strong> that this Solution folder is usually very big, since it contains everything needed to compile and run the projects.</p>\n\n<p>Then you configure each project to fetch the dependencies relatively to where the .proj file is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DNWif.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DNWif.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/IHD3r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IHD3r.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the folder structure for the above images would be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cbKDq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cbKDq.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 34910578, "answer_count": 1, "score": 0, "last_activity_date": 1453324182, "creation_date": 1453320627, "question_id": 34909552, "link": "https://stackoverflow.com/questions/34909552/pack-every-dependency-in-a-visual-studio-project-to-send-easily", "title": "Pack every dependency in a visual studio project to send easily", "body": "<p>So I have faced a problem several times where I'm working in a big C++ project with several dependencies and I need to send the project to some friend so he can take a look at it and debug it.</p>\n\n<p>Is there any way to pack the whole project including every dependencies that the project is using (boost, python...) so the person who get it doesn't have to loose the time downloading the dependencies and setting up paths to libs and so on??</p>\n\n<p>Cheers    </p>\n"}, {"tags": ["c++", "decltype"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453320197, "post_id": 34909400, "comment_id": 57554538, "body": "What version of C++?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453320316, "post_id": 34909400, "comment_id": 57554603, "body": "Can you use <a href=\"http://www.boost.org/doc/libs/1_55_0/boost/utility/declval.hpp\" rel=\"nofollow noreferrer\"><code>boost::declval</code></a>?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453320464, "post_id": 34909400, "comment_id": 57554687, "body": "If you don&#39;t have <code>std::declval</code>, you probably don&#39;t have rvalue references either. So all you need would be a function template declaration, no?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1453320630, "post_id": 34909400, "comment_id": 57554779, "body": "<a href=\"https://gcc.gnu.org/projects/cxx0x.html\" rel=\"nofollow noreferrer\">Check here</a> for information that you will probably find quite relevant.  Just check when each feature was added in GCC to determine if this is possible."}, {"owner": {"reputation": 9377, "user_id": 349415, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/ODdzp.png?s=128&g=1", "display_name": "Jesse Jashinsky", "link": "https://stackoverflow.com/users/349415/jesse-jashinsky"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453332033, "post_id": 34909400, "comment_id": 57560637, "body": "@NathanOliver: No. <code>fatal error: boost&#47;utility&#47;declval.hpp: No such file or directory</code>"}, {"owner": {"reputation": 9377, "user_id": 349415, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/ODdzp.png?s=128&g=1", "display_name": "Jesse Jashinsky", "link": "https://stackoverflow.com/users/349415/jesse-jashinsky"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453334201, "post_id": 34909400, "comment_id": 57561395, "body": "@5gon12eder: How would a function template declaration help? declval is being used to declare a variable, not a function."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453334505, "post_id": 34909400, "comment_id": 57561502, "body": "@jessej did you &quot;install&quot; boost?"}, {"owner": {"reputation": 9377, "user_id": 349415, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/ODdzp.png?s=128&g=1", "display_name": "Jesse Jashinsky", "link": "https://stackoverflow.com/users/349415/jesse-jashinsky"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453334705, "post_id": 34909400, "comment_id": 57561561, "body": "@NathanOliver: No, that is not something I have authority over."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453384756, "post_id": 34909400, "comment_id": 57584908, "body": "@JesseJ <code>std::declval</code> <i>is</i> a function. Or, more precisely, an undefined function template."}], "owner": {"reputation": 9377, "user_id": 349415, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/ODdzp.png?s=128&g=1", "display_name": "Jesse Jashinsky", "link": "https://stackoverflow.com/users/349415/jesse-jashinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1453334335, "creation_date": 1453320057, "last_edit_date": 1495542208, "question_id": 34909400, "link": "https://stackoverflow.com/questions/34909400/how-can-i-make-a-backwards-compatible-version-of-declval", "title": "How can I make a backwards-compatible version of declval?", "body": "<p>I have the following line of code that works on C++11 Red Hat Linux:</p>\n\n<pre><code>struct ConvertIfHasBrief&lt; Obj, ObjResult, void_t&lt; decltype( declval&lt;ObjResult&gt;().xData.xBrief ) &gt; &gt;\n</code></pre>\n\n<p>But I need this to also work on older version of C++ on an older version of Solaris. I'm having trouble figuring out what version of cc it has, but it's SunOS 5.9.</p>\n\n<p>I've tried looking for alternative ways of writing this, but haven't found anything that even seems similar. Below is the whole file if it helps:</p>\n\n<pre><code>template&lt; typename Ts &gt;\nstruct make_void\n{\n    typedef void type;\n};\n\ntemplate&lt; typename Ts &gt;\nstruct void_t\n{\n    using make_void&lt;Ts&gt;::type;\n};\n\ntemplate&lt; class Obj, class ObjResult, class = void &gt;\nstruct ConvertIfHasBrief\n{\n    static auto Convert( Obj const &amp;, ObjResult &amp; ) -&gt; CLStatus\n    {\n        return {}; // dummy value, not used\n    }\n};\n\ntemplate&lt; class Obj, class ObjResult &gt;\nstruct ConvertIfHasBrief&lt; Obj, ObjResult, void_t&lt; decltype( declval&lt;ObjResult&gt;().xData.xBrief ) &gt; &gt;\n{\n    static auto Convert( Obj const &amp;xFrom, ObjResult &amp;xTo ) -&gt; CLStatus\n    {\n        return ::Convert( xFrom, xTo.xData.xBrief );\n    }\n};\n\ntemplate&lt; class Obj, class ObjResult &gt;\nCLStatus convertObjToResult( const Obj &amp; xFrom, ObjResult &amp; xTo )\n{\n    CLStatus eStatus = CLSTATUS_SUCCESS;\n    switch ( xTo.eType )\n    {\n        case CEPTFull:\n            xTo.xData.xFull = xFrom;\n            break;\n        case CEPTBrief:\n            eStatus = ConvertIfHasBrief&lt; Obj, ObjResult &gt;::Convert( xFrom, xTo );\n            break;\n        default:\n            eStatus = CLSTATUS_INVALIDPROJECTIONTYPE;\n    }\n    return eStatus;\n}\n</code></pre>\n\n<p>And for further reference, this is the question that this code resulted from: <a href=\"https://stackoverflow.com/questions/34733026/can-i-have-a-single-template-with-a-variable-object\">Can I have a single template with a variable object?</a></p>\n"}, {"tags": ["c++", "boost", "cereal"], "comments": [{"owner": {"reputation": 1572, "user_id": 710791, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5fbc434a719276d6561f6a8f6d1b6a?s=128&d=identicon&r=PG", "display_name": "Azoth", "link": "https://stackoverflow.com/users/710791/azoth"}, "edited": false, "score": 2, "creation_date": 1454114566, "post_id": 34909380, "comment_id": 57914847, "body": "I&#39;m not intimately familiar with <code>ptr_vector</code>, but it looks like it is essentially a wrapper around <code>std::vector&lt;void*&gt;</code>. cereal does not support raw pointers, so I think it is unlikely you would be able to serialize a <code>ptr_vector</code> without significant changes to cereal or a complicated workaround."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1454365063, "post_id": 35137211, "comment_id": 58003322, "body": ".... and for which the overloads for <code>save</code> and <code>load</code> can be found in an <i>associated namespace</i> (cf. ADL). I might add that this version has rather funny construction semantics on load. It&#39;s &quot;ok&quot; because ptr_vectors cannot have aliasing elements anyways"}, {"owner": {"reputation": 8829, "user_id": 79111, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/O31rq.png?s=128&g=1", "display_name": "Ton van den Heuvel", "link": "https://stackoverflow.com/users/79111/ton-van-den-heuvel"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1454661014, "post_id": 35137211, "comment_id": 58153333, "body": "@sehe, with the funny load semantics you mean this can be done more efficiently?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1454669348, "post_id": 35137211, "comment_id": 58158406, "body": "Actually, no, it looks fine."}], "tags": [], "owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "is_accepted": true, "score": 3, "last_activity_date": 1454349483, "creation_date": 1454349483, "answer_id": 35137211, "question_id": 34909380, "link": "https://stackoverflow.com/questions/34909380/how-to-serialize-a-boostptr-vector-using-cereal/35137211#35137211", "title": "How to serialize a boost::ptr_vector using cereal?", "body": "<p>It is definitely possible. You can create external <code>save()</code> and <code>load()</code> template functions on the archive and pointer type like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;boost/ptr_container/ptr_vector.hpp&gt;\n#include &lt;cereal/archives/binary.hpp&gt;\n#include &lt;cereal/types/string.hpp&gt;\n\n// Sample serializable object.\nstruct MyRecord {\n   std::string s_;\n\n   MyRecord(const std::string s = std::string())\n      : s_(s) {\n   }\n\n   template &lt;class Archive&gt;\n   void serialize(Archive&amp; ar ) {\n      ar(s_);\n   }\n};\n\n// External save function for boost::ptr_vector&lt;T&gt;.\ntemplate&lt;class Archive, class T&gt;\nvoid save(Archive&amp; ar, const boost::ptr_vector&lt;T&gt;&amp; pv) {\n   ar(pv.size());\n   for (const auto&amp; element : pv)\n      ar(element);\n}\n\n// External load function for boost::ptr_vector&lt;T&gt;.\ntemplate&lt;class Archive, class T&gt;\nvoid load(Archive&amp; ar, boost::ptr_vector&lt;T&gt;&amp; pv) {\n   size_t n;\n   ar(n);\n\n   pv.reserve(n);\n   for (size_t i = 0; i &lt; n; ++i) {\n      pv.push_back(new T);\n      ar(pv.back());\n   }\n}\n\nint main() {\n   // Serialize a boost::ptr_vector to a buffer.\n   std::ostringstream os;\n   {\n      boost::ptr_vector&lt;MyRecord&gt; saved;\n      saved.push_back(new MyRecord(\"how\"));\n      saved.push_back(new MyRecord(\"now\"));\n      saved.push_back(new MyRecord(\"brown\"));\n      saved.push_back(new MyRecord(\"cow\"));\n\n      cereal::BinaryOutputArchive oa(os);\n      oa(saved);\n   }\n\n   // Serialize from the buffer.\n   boost::ptr_vector&lt;MyRecord&gt; loaded;\n   {\n      std::istringstream is(os.str());\n      cereal::BinaryInputArchive ia(is);\n      ia(loaded);\n   }\n\n   for (const auto&amp; element : loaded)\n      std::cout &lt;&lt; element.s_ &lt;&lt; '\\n';\n\n   return 0;\n}\n</code></pre>\n\n<p>This should work with any contained type that is default-constructible and is already individually serializable.</p>\n"}], "owner": {"reputation": 8829, "user_id": 79111, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/O31rq.png?s=128&g=1", "display_name": "Ton van den Heuvel", "link": "https://stackoverflow.com/users/79111/ton-van-den-heuvel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 35137211, "answer_count": 1, "score": 5, "last_activity_date": 1454349483, "creation_date": 1453319992, "question_id": 34909380, "link": "https://stackoverflow.com/questions/34909380/how-to-serialize-a-boostptr-vector-using-cereal", "title": "How to serialize a boost::ptr_vector using cereal?", "body": "<p>Is it possible to serialize a <code>boost::ptr_vector</code> instance using cereal? If so, how?</p>\n"}, {"tags": ["c++", "matrix", "linear-algebra", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 2317, "user_id": 909565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/is3yE.jpg?s=128&g=1", "display_name": "Michael Lehn", "link": "https://stackoverflow.com/users/909565/michael-lehn"}, "edited": false, "score": 0, "creation_date": 1455978239, "post_id": 34909226, "comment_id": 58738519, "body": "Eigen has a mailing list where you get an answer very fast.  This is also explained in their documentation."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user674155"}, "edited": false, "score": 0, "creation_date": 1453343616, "post_id": 34910272, "comment_id": 57564003, "body": "Thanks for your answer, Avi. Do you happen to know how to populate the matrix&#39;s elements? I looked at <code>test&#47;bandmatrix.cpp</code>, but wasn&#39;t able to get much out of it"}], "tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": true, "score": 2, "last_activity_date": 1453407562, "last_edit_date": 1453407562, "creation_date": 1453323080, "answer_id": 34910272, "question_id": 34909226, "link": "https://stackoverflow.com/questions/34909226/how-do-you-use-the-bandmatrix-class-in-eigen/34910272#34910272", "title": "How do you use the BandMatrix class in Eigen?", "body": "<p>To include it you would just <code>#include &lt;Eigen/Core&gt;</code> (assuming <code>-I /usr/include/eigen3/</code>) as it's included by that file (Eigen/Core: line ~341):</p>\n\n<pre><code>#include \"src/Core/BandMatrix.h\"\n</code></pre>\n\n<p>As for how to use it, I would refer to the <code>test/bandmatrix.cpp</code> file:</p>\n\n<pre><code>using Eigen::internal::BandMatrix;\n\nvoid test_bandmatrix()\n{\n  typedef BandMatrix&lt;float&gt;::Index Index;\n\n  for(int i = 0; i &lt; 10*g_repeat ; i++) {\n    Index rows = internal::random&lt;Index&gt;(1,10);\n    Index cols = internal::random&lt;Index&gt;(1,10);\n    Index sups = internal::random&lt;Index&gt;(0,cols-1);\n    Index subs = internal::random&lt;Index&gt;(0,rows-1);\n    CALL_SUBTEST(bandmatrix(BandMatrix&lt;float&gt;(rows,cols,sups,subs)) );\n  }\n}\n</code></pre>\n\n<p>After reading the <code>BandMatrix.h</code> file, I'm not sure it actually does what you really want. It appears to be just a storage class without any band specific operations. Any operations would have to be done after copying to a dense matrix with <code>band.toDenseMatrix()</code>.</p>\n\n<p>As for how to initialize a <code>BandMatrix</code>, here's a quick demo.</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n#include &lt;iostream&gt;\n\nusing Eigen::internal::BandMatrix;\n\nint main()\n{\n    int rows = 7;\n    int cols = 6;\n    int sups = 2;\n    int subs = 3;\n\n    BandMatrix&lt;float&gt; bm(rows,cols,sups,subs);\n\n    for(int i = -bm.subs(); i &lt;= bm.supers(); ++i)\n    {\n        bm.diagonal(i).setConstant(0);\n    }\n\n    std::cout &lt;&lt; bm.toDenseMatrix() &lt;&lt; \"\\n\\n\";\n    bm.diagonal().setConstant(1010);\n    std::cout &lt;&lt; bm.toDenseMatrix() &lt;&lt; \"\\n\\n\";\n\n    for(int i = 1; i &lt;= bm.supers(); ++i)\n    {\n        bm.diagonal(i).setConstant(i);\n    }\n\n    for(int i = 1; i &lt;= bm.subs(); ++i)\n    {\n        bm.diagonal(-i).setConstant(-i);\n    }\n\n    std::cout &lt;&lt; bm.toDenseMatrix() &lt;&lt; \"\\n\\n\";\n\n    bm.diagonal(-2)(3) = 2345.f;\n\n    std::cout &lt;&lt; bm.toDenseMatrix() &lt;&lt; \"\\n\\n\";\n}\n</code></pre>\n\n<p>Note that it doesn't appear that any operators besides <code>operator=</code> are implemented for the <code>BandMatrix</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user674155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 1, "accepted_answer_id": 34910272, "answer_count": 1, "score": 2, "last_activity_date": 1453407562, "creation_date": 1453319443, "last_edit_date": 1453319823, "question_id": 34909226, "link": "https://stackoverflow.com/questions/34909226/how-do-you-use-the-bandmatrix-class-in-eigen", "title": "How do you use the BandMatrix class in Eigen?", "body": "<p>I'm writing some numerical code in C++ and chose to use the Eigen library. One of the reasons for this that it seems to support band matrices.</p>\n\n<p>The only info I've been able to find is this file <a href=\"http://eigen.tuxfamily.org/dox/BandMatrix_8h_source.html\" rel=\"nofollow\">http://eigen.tuxfamily.org/dox/BandMatrix_8h_source.html</a>. But being new to C++, I'm not even sure how to #include it.\n(I have a version of it on my file system, under <code>/usr/include/eigen3/Eigen/src/Core/BandMatrix.h</code>)</p>\n\n<pre><code>#include &lt;Eigen/Core/BandMatrix&gt;\n</code></pre>\n\n<p>doesn't work</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n</code></pre>\n\n<p>does, but I can't find the BandMatrix class.</p>\n\n<p>Can you provide some sample code that an initializes a - say tridiagonal - band matrix? Any help would be appreciated! Thanks</p>\n\n<p>ps. I also tried working around this by using the unsupported Skyline module</p>\n\n<pre><code>#include &lt;Eigen/Skyline&gt;\n</code></pre>\n\n<p>(adding <code>-I/usr/include/eigen3/unsupported</code> switch) but this introduces a bunch of compilation errors starting with <code>/usr/include/eigen3/unsupported/Eigen/src/Skyline/SkylineUtil.h:74:44: error: type/value mismatch at argument 2 in template parameter list for \u2018template&lt;class T, class StorageKind&gt; struct Eigen::internal::eval\u2019</code></p>\n"}, {"tags": ["c++", "arrays", "list", "dictionary"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 9, "creation_date": 1453319378, "post_id": 34909174, "comment_id": 57554123, "body": "You are looking for a <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1453320871, "post_id": 34909174, "comment_id": 57554906, "body": "Isn&#39;t that a <code>std::array&lt;return_type (*)(A0, A1, A2, A3, A4), max_function&gt; functions</code> ?"}, {"owner": {"reputation": 2172, "user_id": 1038318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e61594faa529a77cfd72735b7d8336?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/1038318/bort"}, "edited": false, "score": 1, "creation_date": 1453391376, "post_id": 34909174, "comment_id": 57589684, "body": "Data controlling behavior on runtime sounds very similar to language parsing. Might be a bit overkill but have you looked in the direction of BNF parser?"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1453392216, "post_id": 34909174, "comment_id": 57590305, "body": "Although you&#39;d like to have runtime access to this data, it seems that it&#39;s all defined at compile time.  Sounds like a job for templates!"}], "answers": [{"tags": [], "owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "is_accepted": false, "score": 0, "last_activity_date": 1453320700, "last_edit_date": 1453320700, "creation_date": 1453320343, "answer_id": 34909469, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34909469#34909469", "title": "Data controlled programs in c++", "body": "<p>If you only have a small number of indices to support, from 0 to 50, you'll get the best performance if you put your function pointers in an array and not a map.</p>\n\n<p>The syntax is also short:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstatic void f0() {\n    std::cout &lt;&lt; \"f0\\n\";\n}\n\nstatic void f1() {\n    std::cout &lt;&lt; \"f1\\n\";\n}\n\nvoid main()\n{\n    std::function&lt;void()&gt; f[2] = { f0, f1 };\n\n    f[0](); // prints \"f0\"\n    f[1](); // prints \"f1\"\n}\n</code></pre>\n\n<p>Or, if you prefer classes over functions:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nclass myfunc {\npublic:\n    virtual void run() abstract;\n    virtual ~myfunc() {}\n};\n\nclass f0 : public myfunc {\npublic:\n    virtual void run() {\n        std::cout &lt;&lt; \"f0\\n\";\n    }\n};\n\nclass f1 : public myfunc {\npublic:\n    virtual void run() {\n        std::cout &lt;&lt; \"f1\\n\";\n    }\n};\n\n\nvoid main()\n{\n    myfunc* f[2] = { new f0(), new f1() };\n    f[0]-&gt;run(); // prints \"f0\"\n    f[1]-&gt;run(); // prints \"f1\"\n    for (int i = 0; i &lt; sizeof(f) / sizeof(f[0]); ++i)\n        delete f[i];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 0, "creation_date": 1453326498, "post_id": 34909481, "comment_id": 57558095, "body": "This doesn&#39;t really answer the question. Besides, OP explicitly said he doesn&#39;t want to use maps."}, {"owner": {"reputation": 434, "user_id": 1823963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7101a0d591218488379114ddc1cb4?s=128&d=identicon&r=PG", "display_name": "malchemist", "link": "https://stackoverflow.com/users/1823963/malchemist"}, "reply_to_user": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 1, "creation_date": 1453327228, "post_id": 34909481, "comment_id": 57558512, "body": "Sure, you&#39;re right. But on the other hand it&#39;s possible to use the selected syntax with maps, like <code>std::map&lt;std::string, std::string&gt; codes_map = decltype(codes_map){ {&quot;key1&quot;, &quot;val1&quot;}, {&quot;key2&quot;, &quot;val2&quot;} };</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 1, "creation_date": 1453393626, "post_id": 34909481, "comment_id": 57591305, "body": "@Edward No, OP said &quot; I am aware of maps but wouldn&#39;t want to push back each pair&quot; - and <b>they don&#39;t have to</b> since we have <code>initializer_list</code> syntax in this modern age and can specify a map in effectively the exact format dreamt of at the end of their post. This very much <i>does</i> answer the question. +1"}, {"owner": {"reputation": 334, "user_id": 4519703, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15e9fd203080291c5e9e33a698b96b78?s=128&d=identicon&r=PG&f=1", "display_name": "gorilon", "link": "https://stackoverflow.com/users/4519703/gorilon"}, "edited": false, "score": 1, "creation_date": 1453804837, "post_id": 34909481, "comment_id": 57750836, "body": "it is actually what I was looking for, sorry for the missundertanding with the maps, I meant I didnt want to pushback each individual member, because I wasn&#39;t aware of this syntax. I accept another similar answer since it is more complete but thanks :)"}], "tags": [], "owner": {"reputation": 434, "user_id": 1823963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7101a0d591218488379114ddc1cb4?s=128&d=identicon&r=PG", "display_name": "malchemist", "link": "https://stackoverflow.com/users/1823963/malchemist"}, "is_accepted": false, "score": 3, "last_activity_date": 1453327650, "last_edit_date": 1453327650, "creation_date": 1453320368, "answer_id": 34909481, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34909481#34909481", "title": "Data controlled programs in c++", "body": "<p>For simplify you can use associative containers. If the order is important then use <code>std::map</code>, or <code>std::unordered_map</code> in the other case.</p>\n\n<p>And you can use syntax similar to the desired </p>\n\n<pre><code>std::map&lt;size_t, std::string&gt; codes_map = decltype(codes_map) {\n    { 0, \"val1\" },\n    { 1, \"val2\" }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": false, "score": 0, "last_activity_date": 1453320395, "creation_date": 1453320395, "answer_id": 34909487, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34909487#34909487", "title": "Data controlled programs in c++", "body": "<p>It seems like you have two problems: the flow-control issue (dispatch) and the map issue (an implementation note). I get that the program flow is nonstatic and unknowable at compile-time\u2026 but so is the map static? For static maps I get a lot of mileage out of using a traits-ish approach to create a compile-time mapping. Here\u2019s a quick example mapping file suffixes to Objective-C enum constants:</p>\n\n<pre><code>namespace objc {\n\n    namespace image {\n\n        template &lt;std::size_t N&gt; inline\n        constexpr std::size_t static_strlen(char const (&amp;)[N]) { return N; }\n\n        template &lt;NSBitmapImageFileType t&gt;\n        struct suffix_t;\n\n        #define DEFINE_SUFFIX(endstring, nstype)                                        \\\n        template &lt;&gt;                                                                     \\\n        struct suffix_t&lt;nstype&gt; {                                                       \\\n            static constexpr std::size_t N = static_strlen(endstring);                  \\\n            static constexpr char const str[N] = endstring;                             \\\n            static constexpr NSBitmapImageFileType type = nstype;                       \\\n        };\n\n        DEFINE_SUFFIX(\"tiff\", NSTIFFFileType);\n        DEFINE_SUFFIX(\"bmp\",  NSBMPFileType);\n        DEFINE_SUFFIX(\"gif\",  NSGIFFileType);\n        DEFINE_SUFFIX(\"jpg\",  NSJPEGFileType);\n        DEFINE_SUFFIX(\"png\",  NSPNGFileType);\n        DEFINE_SUFFIX(\"jp2\",  NSJPEG2000FileType);\n\n        template &lt;NSBitmapImageFileType nstype&gt;\n        char const* suffix_value = suffix_t&lt;nstype&gt;::str;\n\n    }\n}\n</code></pre>\n\n<p>\u2026 see how that works? the nice part is that using it has no runtime overhead, which if your map is static, you can use something like that.</p>\n\n<p>For dynamic flow-control and dispatch, function pointers work; that is what happens automatically if you use polymorphic classes and <code>virtual</code> functions but it seems like you have an architecture in place already that may not be amenable to being redone with such high-modernist architectural notions. I like c++11 lambdas as they solve like 90% of my problems in this arena. Perhaps you can elablrate (I will amend my answer)!</p>\n"}, {"comments": [{"owner": {"reputation": 334, "user_id": 4519703, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15e9fd203080291c5e9e33a698b96b78?s=128&d=identicon&r=PG&f=1", "display_name": "gorilon", "link": "https://stackoverflow.com/users/4519703/gorilon"}, "edited": false, "score": 0, "creation_date": 1453804916, "post_id": 34911247, "comment_id": 57750879, "body": "exactly what I was looking for, kept simple as well so thanks! I&#39;ll edit my question to give some more precise info to next viewers"}], "tags": [], "owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "is_accepted": true, "score": 4, "last_activity_date": 1453406639, "last_edit_date": 1453406639, "creation_date": 1453326436, "answer_id": 34911247, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34911247#34911247", "title": "Data controlled programs in c++", "body": "<p>As you guessed, function pointers are in fact a good way to do this. Since you specify that you don't want to use a Map, this is how you would implement your integer-based function dispatch using an array of function pointers. Note that since I don't know the type signature of your MIPS functions (SLL, SRL, etc.) I've used dummy placeholder type names.</p>\n\n<pre><code>typedef ret_t (*mips_func)(arg1_t, arg2_t, arg3_t, arg4_t, arg5_t);\n\nmips_func function_codes[] = {\n    &amp;SLL,\n    &amp;SRL,\n    &amp;SRA,\n    ...\n};\n\n//...Later, in the part of your code that used to contain the big switch statement\nstep_err = (*function_codes[function])(state, rs, rt, rd, sa);\n</code></pre>\n\n<p>The syntax <code>&amp;SLL</code> gets a pointer to the function SLL, which I assume is already in scope because you can call it directly from your switch statement. </p>\n\n<p>Note that this assumes the numeric codes for the functions are a continuous sequence of integers from 0 to [max code value]. If some numeric codes are unused, then you will either need to leave explicit gaps in your array (by placing a NULL pointer in one or more entries) or use <code>std::map&lt;int, mips_func&gt;</code> so that you can use arbitrary non-continuous integer values as keys to functions. Fortunately, using a Map still doesn't require <code>push_back</code>ing each element, since C++ now has initializer lists. The same code using a Map would look like this:</p>\n\n<pre><code>typedef ret_t (*mips_func)(arg1_t, arg2_t, arg3_t, arg4_t, arg5_t);\n\nstd::map&lt;int, mips_func&gt; function_codes = {\n    {0, &amp;SLL},\n    {2, &amp;SRL},\n    {4, &amp;SRA},\n    ...\n};\n\n//Using the Map looks exactly the same, due to its overloaded operator[]\nstep_err = (*function_codes[function])(state, rs, rt, rd, sa);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "is_accepted": false, "score": 1, "last_activity_date": 1453396785, "last_edit_date": 1453396785, "creation_date": 1453332555, "answer_id": 34912660, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34912660#34912660", "title": "Data controlled programs in c++", "body": "<p>You could group the data as static members w/ the same name across structs, then use templates to access them generically:</p>\n\n<pre><code>struct A { auto call() const { return \"((1))\"; };  static const char * name; };\nstruct B { auto call() const { return \"{{2}}\"; };  static const char * name; };\nstruct C { auto call() const { return \"&lt;&lt;3&gt;&gt;\"; };  static const char * name; };\n// n.b. these `T...` have: `sizeof(T) == ... == sizeof(empty_struct)`\n\nconst char * A::name = \"A\";\nconst char * B::name = \"B\";\nconst char * C::name = \"C\";\n</code></pre>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/variant/tutorial.html#variant.tutorial.basic\" rel=\"nofollow\"><code>boost::variant</code></a> (and the soon to be implemented <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4542.pdf\" rel=\"nofollow\"><code>std::variant</code></a>) implements a type-safe union, which provides a very clean and efficient way of using these structs as values:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;boost/variant.hpp&gt;\n\nint main()\n{\n    std::vector&lt;boost::variant&lt;A, B, C&gt;&gt; letters{A{}, B{}, C{}, B{}, A{}};\n    auto visitor = [](auto x) { std::printf(\"%s(): %s\\n\", x.name, x.call()); };\n    for (auto var : letters) { boost::apply_visitor(visitor, var); }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/461adc56ca565639\" rel=\"nofollow\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1453419039, "last_edit_date": 1453419039, "creation_date": 1453417816, "answer_id": 34936146, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c/34936146#34936146", "title": "Data controlled programs in c++", "body": "<p>Given some definitions</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;stdexcept&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nstruct state{\n    int debug_level = 1;\n    const char* debug_out = \"%s\";\n} s;\n\n// some functions to call\nvoid SLL(state&amp; s, int, int, int, int){\n    cout &lt;&lt; \"SLL\";\n}\nvoid SLR(state&amp; s, int, int, int, int){\n    cout &lt;&lt; \"SLR\";\n}\nvoid SLT(state&amp; s, int, int, int, int){\n    cout &lt;&lt; \"SLT\";\n}\n</code></pre>\n\n<p>You can use a Map</p>\n\n<pre><code>auto mappedname2fn = map&lt;string, delctype(SLL)*&gt;{\n    {\"SLL\", SLL}, \n    {\"SLR\", SLR}\n};\n\n// call a map function\nmappedname2fn[\"SLR\"](s, 1, 2, 3, 4);\n</code></pre>\n\n<p>If you don't want a map you can use a pre-sorted array for a binary search</p>\n\n<p>Here's a binary search of an array of name, function pairs</p>\n\n<pre><code>template&lt;typename P, int N, typename ...T&gt; \nauto callFn(P(&amp;a)[N], string val, T&amp;&amp;... params){\n    auto it = lower_bound(a, a+N, make_pair(val, nullptr),\n        [](auto&amp; p1, auto&amp; p2){return p1.first &lt; p2.first;});\n    if(it==(a+N) || val&lt;it-&gt;first) throw logic_error(\"not found\");\n    return it-&gt;second(forward&lt;T&gt;(params)...);\n}\n</code></pre>\n\n<p>So you can set up an array and use that:-</p>\n\n<pre><code>// array sorted in alphabetical order for binary search to work\npair&lt;string, decltype(SLL)*&gt; name2fn[] = {\n        {\"SLL\", SLL}, \n        {\"SLR\", SLR},\n        {\"SLT\", SLT}\n    };\nvoid callFn(string name, state&amp; s, int a, int b, int c, int d){\n    try{\n        callFn(name2fn, name, s, a, b, c, d);\n    }\n    catch(exception&amp; e){\n        cout &lt;&lt; e.what();\n    }\n}\n\n// call it  \ncallFn(\"SLL\", s, 1, 2, 3, 4);\n</code></pre>\n"}], "owner": {"reputation": 334, "user_id": 4519703, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15e9fd203080291c5e9e33a698b96b78?s=128&d=identicon&r=PG&f=1", "display_name": "gorilon", "link": "https://stackoverflow.com/users/4519703/gorilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 2, "accepted_answer_id": 34911247, "answer_count": 6, "score": 5, "last_activity_date": 1453805128, "creation_date": 1453319277, "last_edit_date": 1453805128, "question_id": 34909174, "link": "https://stackoverflow.com/questions/34909174/data-controlled-programs-in-c", "title": "Data controlled programs in c++", "body": "<p>Not to sure how to name this question because the problem itself is looking for a construct of which I don\u00b4t know its name.</p>\n\n<p>The problem is I am dealing with programs whose control flow depends greatly of data. </p>\n\n<p>For example I created a MIPS simulator which implemented a list of more than 50 instructions, each implemented on its own and everything governed by a huge switch case</p>\n\n<pre><code>switch (function){ //Function is an int, each function (eg SLL) is \n        case 0:    //associated with one\n            if (state-&gt;debug_level &gt; 0){\n                fprintf(state-&gt;debug_out, \"SLL\\n\");\n            }\n            step_err = SLL(state, rs, rt, rd, sa);\n            break;\n        case 2:\n            if (state-&gt;debug_level &gt; 0){\n                fprintf(state-&gt;debug_out, \"SRL\\n\");\n            }\n            step_err = SRL(state, rs, rt, rd, sa);\n            break;\n        case 3:\n            if (state-&gt;debug_level &gt; 0){\n                fprintf(state-&gt;debug_out, \"SRA\\n\");\n            }\n//\n</code></pre>\n\n<p>I have been told that this could have been implemented using function pointers, but to do so what I am looking for is a way of relating data of any kind, say a string to other data, say an integer. I am aware of maps but wouldn't want to push back each pair. I am looking for some sort of array like syntax I think if seen before which might look something similar to this:</p>\n\n<pre><code>\u00bftype? function_codes[]{\n     0, \"SLL\";\n     2, \"SRL\";\n     3, \"SRA\";\n     ...\n }\n</code></pre>\n\n<p>I am not looking for a solution to this problem but a generic approach to introducing quick relationships between data and using this to modify control flow.</p>\n\n<p><strong>EDIT AFTER ANSWERS</strong>\nWhat I was actually looking for but I didnt know was indeed maps but in particular its initialization syntax similar to an array (see accepted answer). This used with function pointers did the required job.</p>\n"}, {"tags": ["c++", "c", "linux", "makefile", "linker"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1453319357, "post_id": 34909040, "comment_id": 57554108, "body": "I&#39;d recommend adding the minimum set of rules from your makefile that demonstrates this problem, 10 lines max. As is, we&#39;re left speculating on exactly what is in your makefile and if there is an optimal improvement that can be offered. Good luck."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453319387, "post_id": 34909040, "comment_id": 57554127, "body": "Check out this post: <a href=\"http://stackoverflow.com/questions/1904990/what-is-the-difference-between-ld-library-path-and-l-at-link-time\" title=\"what is the difference between ld library path and l at link time\">stackoverflow.com/questions/1904990/&hellip;</a> , where a similar question has been answered"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1453325201, "post_id": 34909040, "comment_id": 57557387, "body": "<code>-L</code> and <code>LD_LIBRARY_PATH</code> affect two very <i>different</i> (but related) operations. Compile-time linking and runtime linking."}], "answers": [{"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320674, "post_id": 34909145, "comment_id": 57554802, "body": "Thanks for that. How does the runtime linker know which library to link tho? LD_LIBRARY_PATH only has the path to the library directory and doesn&#39;t name the actual library"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320929, "post_id": 34909145, "comment_id": 57554942, "body": "@Engineer999, because the name of the actual .so required by your executable is already recorded in the executable. You can run <code>ldd &lt;your executable&gt;</code> to see which .so&#39;s your file needs, and where runtime linker can find them in the given environment"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453321218, "post_id": 34909145, "comment_id": 57555107, "body": "How does my executable know about the .so when I don&#39;t even give it the information at compile time, only the header file is included?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453321259, "post_id": 34909145, "comment_id": 57555125, "body": "@Engineer999, because you still have -l rule."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453323967, "post_id": 34909145, "comment_id": 57556660, "body": "but even when I removed that from the makefile, it still found it"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453324520, "post_id": 34909145, "comment_id": 57557004, "body": "@Engineer999, no this is not possible."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1453319206, "creation_date": 1453319206, "answer_id": 34909145, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909145#34909145", "title": "Linker library path in makefile confusion", "body": "<p>There is no mystery here. Default library paths for linker (one you call to make your executable file, for example, <code>ld</code>) and runtime linker (one which is responsible for loading shared libraries when you execute your program, for example, <code>ld.so</code>) are different. Runtime linker uses LD_LIBRARY_PATH, while linker uses whatever was configured when ld was build. </p>\n\n<p>In your case, looks like <code>/usr/local/lib</code> is part of one, but not another.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319469, "post_id": 34909211, "comment_id": 57554173, "body": "rpath is obsolete and not to be used. Has been for looooong time."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319582, "post_id": 34909211, "comment_id": 57554222, "body": "@SergeyA: Could you elaborate?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319873, "post_id": 34909211, "comment_id": 57554369, "body": "instead of rpath, one should use runpath - for the reason that the latter can be still overriddent with LD_LIBRARY_PATH, while the former can not."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1453320031, "post_id": 34909211, "comment_id": 57554443, "body": "@SergeyA: Well, my <code>man ld</code> says nothing about runpath, so it can&#39;t be obsoleted for looooong time, since my system is not veeeeery old."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320054, "post_id": 34909211, "comment_id": 57554457, "body": "@SergeyA could you back up that claim with a reference? I think it&#39;s <i>not</i> deprecated"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 1, "creation_date": 1453320109, "post_id": 34909211, "comment_id": 57554491, "body": "@lima.sierra, of course I can. Here is the copy-paste from man ld.so: <code>(ELF  only)  Using  the directories specified in the DT_RPATH dynamic section attribute of the binary if present and DT_RUNPATH attribute does not exist.  Use of DT_RPATH is  deprecated.</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320374, "post_id": 34909211, "comment_id": 57554632, "body": "@nsilent22, from here, for example: <a href=\"http://man7.org/linux/man-pages/man8/ld.so.8.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man8/ld.so.8.html</a> or any other link."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320564, "post_id": 34909211, "comment_id": 57554737, "body": "@SergeyA yep, seems you&#39;re right! @nsilent22 have a look at <code>man 8 ld.so</code> (mine is from 2015-12-28) :)"}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320771, "post_id": 34909211, "comment_id": 57554851, "body": "@SergeyA: Ok, so maybe it&#39;s time to upgrade my Ubuntu 12.04 :)"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320841, "post_id": 34909211, "comment_id": 57554887, "body": "why does runpath, rpath or LD_LIBRARY_PATH only need the path to the directory containing the libraries , and not the exact library specified?"}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453320879, "post_id": 34909211, "comment_id": 57554911, "body": "@nsilent22 could you edit your post and add a deprecation warning?"}], "tags": [], "owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "is_accepted": false, "score": 2, "last_activity_date": 1453321242, "last_edit_date": 1453321242, "creation_date": 1453319405, "answer_id": 34909211, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909211#34909211", "title": "Linker library path in makefile confusion", "body": "<p>Compile your program with <code>-Wl,-rpath=/usr/local/lib</code>. This way you'll add /usr/local/lib to runtime library search patch of your program and you won't need the LD_LIBRARY_PATH<br>\n<strong>Warning</strong>: since modern dynamic linkers consider <code>rpath</code> as deprecated you can set also <code>runpath</code> (which supersedes it) by specifying <code>-Wl,-rpath=/usr/local/lib,--enable-new-dtags</code></p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1453320588, "creation_date": 1453320588, "answer_id": 34909538, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909538#34909538", "title": "Linker library path in makefile confusion", "body": "<p>If you're using static linking, all you have to do is tell the linker where your library is at compile/link time.  The library (or as much of it as is necessary) gets copied into your executable, and your executable is standalone.</p>\n\n<p>But for various reasons, these days we generally use dynamic linking, not static linking.  With dynamic linking, you have to tell the linker where to find the library at compile/link time, <em>and</em> the dynamic linker (<code>ld.so</code>) has to be able to find the library at run time.</p>\n\n<p>If the library was in one of the standard places (<code>/lib</code>, <code>/usr/lib</code>, etc.) there's no problem.  But if you linked against a library in a nonstandard place, in general, you have to add that nonstandard place to your LD_LIBRARY_PATH, so that the runtime linker will always be able to find it.</p>\n"}, {"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453324576, "post_id": 34909759, "comment_id": 57557024, "body": "This might be a question for somewhere else, but how does the executable decide whether to use the static library provided or the shared library?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 1, "creation_date": 1453325303, "post_id": 34909759, "comment_id": 57557444, "body": "@Engineer999 The application doesn&#39;t decide anything. The runtime linker does. With a statically linked library (at compile time) there is no runtime linking of shared objects to be done for that library at all."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 5, "last_activity_date": 1453321366, "creation_date": 1453321366, "answer_id": 34909759, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909759#34909759", "title": "Linker library path in makefile confusion", "body": "<p>compilation and running are different things. :)</p>\n\n<p>1) A make file contains rules on how to build your application.  So when you write a rule like:</p>\n\n<pre><code>    -L/usr/local/lib -lxerces-c-3.1\n</code></pre>\n\n<p>You are passing options to the linker.  The <code>-L</code> option tells the linker to add additional libraries (in this case '/usr/local/lib') to the linker's search path.  The <code>-l</code> option names the library that should be linked in.</p>\n\n<p>2) When you go to run an executable, the loader needs to find all the required libraries.  For example, on a Linux system you can use the ldd command to see what shared libraries are used.  For example on my system:</p>\n\n<pre><code>ldd FEParser\n    linux-vdso.so.1 =&gt;  (0x00007ffcdc7c9000)\n    libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f835b143000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f835ae3d000)\n    libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f835ac27000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f835a862000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f835b447000)\n</code></pre>\n\n<p>From this, you can see the name of the library that is linked to the left of the '=>' token, and the path to the library to the right.  If a library is not found it will show up as missing.</p>\n\n<p>Now in your case, you were able to successfully compile and link your program due to giving the path and library name to use.  You were not able to run the program due to the loader not being able to find the library at run time.</p>\n\n<p>You have several options here:</p>\n\n<p>1) you can move the library in a directory that is in the loaders search path.</p>\n\n<p>2) you can modify <code>LD_LIBRARY_PATH</code> which adds additional directories to the loaders search path.  Additionally, the directories specified in <code>LD_LIBRARY_PATH</code> will be passed to the linker (it will be appended after all <code>-L</code> flags).  You do need to be careful with this, as if you set it globally (say in <code>.bashrc</code>), then it will effect all compilations that you do.  You may or may not want this behavior. </p>\n\n<p>3) As others have specified you can use <code>-Wl,rpath=....</code>, but it is deprecated, and I rarely use it.</p>\n\n<p>4) If you need the library installed in an unusual location, you can add a create a file under <code>/etc/ld.so.conf.d</code> that contains, for example (file is yaml.conf):</p>\n\n<pre><code># yaml default configuration\n/opt/yaml/lib\n</code></pre>\n\n<p>At system boot, the loader reads all the files in this directory and appends the paths to the loader path.  If you make a modification to this directory you can use the <code>ldconfig</code> command to cause the loader to reprocess <code>/etc/ld.so.con.d</code>.  N.B.  I know this works on centOS and Ubuntu flavors of GNU/Linux - can't speak authoritatively on other flavors.</p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7291, "favorite_count": 4, "answer_count": 4, "score": 1, "last_activity_date": 1453321366, "creation_date": 1453318835, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion", "title": "Linker library path in makefile confusion", "body": "<p>I've been programming a while but I still don't fully understand how the linker behaves.</p>\n\n<p>For example, today I downloaded and installed a library that I want to use in my application in Linux. (It was Xerces - for parsing XML files).</p>\n\n<p>I created a makefile and gave it the path to the .so and .a files in my command : -L/usr/local/lib and also told it the name of the library to include : -lxerces-c-3.1. </p>\n\n<p>My application compiled fine but failed during runtime with \"cannot open shared object file libxerces-c-3.1.so\". Why would this be the case, when I properly give it the path and name in the makefile?</p>\n\n<p>I then added the library path to the LD_LIBRARY_PATH variable in my .bashrc file and then it worked. That's fine , but if I now remove the path to the library in my makefile and don't even include the name of the library , it still works.</p>\n\n<p>I'm confused as to what is going on here. How can it still find the correct library just by assigning the path to the LD_LIBRARY_PATH variable and will only work if I do so? I have read elsewhere to not even use LD_LIBRARY_PATH. </p>\n\n<p>I appreciate any answer for this. The question is a bit long and hopefully not off-topic but I hope others can learn from it too. Thanks</p>\n"}, {"tags": ["c++", "animation", "sfml"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453321157, "post_id": 34908976, "comment_id": 57555075, "body": "You will not be able to combine these two code blocks. Think about what you want to do - do you want to increase <code>counterWalking</code> only every (say) 10 frames, instead of every frame?"}, {"owner": {"reputation": 107, "user_id": 5797630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ntIaG.jpg?s=128&g=1", "display_name": "agtv", "link": "https://stackoverflow.com/users/5797630/agtv"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453324347, "post_id": 34908976, "comment_id": 57556900, "body": "+immibis Yes, precisely. I couldn&#39;t find a way to do this though, how can this be done?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1453327022, "post_id": 34908976, "comment_id": 57558381, "body": "My suggestion: increase it by 1 until it gets to 30 (instead of until it gets to 3), and divide it by 10 when you use it."}, {"owner": {"reputation": 107, "user_id": 5797630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ntIaG.jpg?s=128&g=1", "display_name": "agtv", "link": "https://stackoverflow.com/users/5797630/agtv"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453328724, "post_id": 34908976, "comment_id": 57559260, "body": "IT WORKED I LOVE YOU!!"}, {"owner": {"reputation": 54678, "user_id": 232593, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9873090a2db3b128c7d01d673351565a?s=128&d=identicon&r=PG", "display_name": "Merlyn Morgan-Graham", "link": "https://stackoverflow.com/users/232593/merlyn-morgan-graham"}, "edited": false, "score": 3, "creation_date": 1469219507, "post_id": 34908976, "comment_id": 64463404, "body": "If you&#39;ve come across a solution, then you can help other people by posting a detailed answer to your own question, and later accepting that answer. This is helpful to users in the future with a similar question, and removes this question from the SFML unanswered question list. It will also give you some more reputation when people start upvoting your answer."}], "answers": [{"tags": [], "owner": {"reputation": 6743, "user_id": 6919895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qqkN_JOgCvM/AAAAAAAAAAI/AAAAAAAAABE/m4r_i_2yiy8/photo.jpg?sz=128", "display_name": "Treycos", "link": "https://stackoverflow.com/users/6919895/treycos"}, "is_accepted": false, "score": 0, "last_activity_date": 1477649290, "creation_date": 1477649290, "answer_id": 40302819, "question_id": 34908976, "link": "https://stackoverflow.com/questions/34908976/how-do-i-slow-down-my-sprite-animations/40302819#40302819", "title": "How do I slow down my sprite animations?", "body": "<p>Since a solution has been given in comment but not implemented in an answer, here's some kind of \"code review\"  </p>\n\n<h2>Key Binding</h2>\n\n<p>This code is actually using the <code>sf::Keyboard::isKeyPressed</code> and <code>sf::Keyboard::isKeyReleased</code> wich needs to be called every loop while a simple boolean switched when the key is pressed/released could to the work using events.  </p>\n\n<pre><code>while (renderWindow.pollEvent(event)) {\n\n            if (event.type == sf::Event::EventType::Closed)\n                renderWindow.close();\n        }\n</code></pre>\n\n<p>The Event used in the main loop does also contain information about KeyEvents but isn't used that way. I'll suggest sending the evet to the player eac time a key Event happens:  </p>\n\n<pre><code>    while (renderWindow.pollEvent(event)) {\n        switch(event.type){\n        case sf::Event::EventType::Closed:\n            renderWindow.close();\n            break;\n\n        case sf::Event::KeyPressed: case sf::Event::KeyReleased:\n            myPlayer.keyEvent(event);\n            break;\n        }\n    }\n</code></pre>\n\n<p>The <code>keyEvent</code> function in player should then look like this:  </p>\n\n<pre><code>void player::keyEvent(sf::Event event){\n    //Keycode of your keyboard's arrows goes from 71 to 74\n    if (event.key.code &gt;= 71 &amp;&amp; event.key.code &lt;= 74){\n        //Gets the array ID from the enumeration value\n        int ID = event.key.code - 71;\n        //Stores false if the key is release, and true if it's pressed\n        keys[ID] = (event.type == sf::Event::KeyPressed);\n    }\n}\n</code></pre>\n\n<p>Wich changes each values of the array in Player.h:  </p>\n\n<pre><code>private:\n    bool keys[4];\n</code></pre>\n\n<h2>Movement</h2>\n\n<p>Now all you have to do is call the player update() function in your game loop each second:  </p>\n\n<pre><code>if (clock.getElapsedTime().asSeconds() &gt; 1.0f) {\n\n        if (rectSourceSprite.left == 96)\n            rectSourceSprite.left = 0;\n        else\n            rectSourceSprite.left += 32;\n\n        sprite.setTextureRect(rectSourceSprite);\n        myPlayer.update();\n        clock.restart();\n    }\n</code></pre>\n\n<p>In the <code>update()</code> function, ou will then build you movement vector based on wich key is pressed:  </p>\n\n<pre><code>void player::update()\n{\n    sf::Vector2f movementVector(0,0);\n    //Left\n    if (keys[0]){\n        movementVector.x -= movementSpeed;\n        //Sends the sprite Rectangle position based on the movement type\n        move(32);\n    }\n    //Right\n    if (keys[1]){\n        movementVector.x += movementSpeed;\n        move(64);\n    }\n    //Up\n    if (keys[2]){\n        movementVector.y -= movementSpeed;\n        move(96);\n    }\n    //Down\n    if (keys[3]){\n        movementVector.y += movementSpeed;\n        move(0);\n    }\n}\n</code></pre>\n\n<p>The move function will then move your sprite Position depending on the movement vector and the counter, the sprite will then be set.<br>\nYour movement counter will be incremented up to 30 and your player may only move when this counter is equal to 0, 10 or 20:</p>\n\n<pre><code>void move(int spritePos){\n    //Here, the check() function should tell if the player isn't going outside of the screen / in a wall\n    if (check(sprite.getPosition() + movementVector)){\n        sprite.move(movementVector);\n        ++counterWalking %= 30;\n\n        if(!counterWalking % 10)\n            sprite.setTextureRect(sf::IntRect(counterWalking / 10 * 32, spritePos, 32, 32));\n    }\n}\n</code></pre>\n\n<p>There are multiple ways of doing this, that's only the way I would do it</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7112553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJ6yh.jpg?s=128&g=1", "display_name": "ArtVandelay_", "link": "https://stackoverflow.com/users/7112553/artvandelay"}, "is_accepted": false, "score": 0, "last_activity_date": 1595529885, "creation_date": 1595529885, "answer_id": 63061102, "question_id": 34908976, "link": "https://stackoverflow.com/questions/34908976/how-do-i-slow-down-my-sprite-animations/63061102#63061102", "title": "How do I slow down my sprite animations?", "body": "<p>Sounds like you might need to learn about controlling the time-step. Essentially you only execute certain code when a desired amount of time has passed.</p>\n<p>You'll commonly see this site referenced so maybe check it out:\n<a href=\"https://gafferongames.com/post/fix_your_timestep/\" rel=\"nofollow noreferrer\">https://gafferongames.com/post/fix_your_timestep/</a></p>\n"}], "owner": {"reputation": 107, "user_id": 5797630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ntIaG.jpg?s=128&g=1", "display_name": "agtv", "link": "https://stackoverflow.com/users/5797630/agtv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1295, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1595529885, "creation_date": 1453318625, "last_edit_date": 1475509604, "question_id": 34908976, "link": "https://stackoverflow.com/questions/34908976/how-do-i-slow-down-my-sprite-animations", "title": "How do I slow down my sprite animations?", "body": "<p>Currently I have this <code>player.cpp</code> class that I'm using for my sprite animations. I'm using a counter to update every frame. It animates, but it flies through the animations.</p>\n\n<p>I want to slow this down. I found code that can be used to slow down sprite animations but I'm unsure how to implement it into my current program.</p>\n\n<p>Below are my <code>player.cpp</code> file and following it is the code I found that can slow down sprite animations. When I've tried to add a clock to the <code>counterWalking++</code> it didn't animate at all, and I've tried implementing this code to the same effect. </p>\n\n<pre><code>player::player()\n{\n    rect.setSize(sf::Vector2f(32, 32));\n    rect.setFillColor(sf::Color::White);\n    rect.setPosition(300, 300);\n    sprite.setTextureRect(sf::IntRect(0, 0, 32, 32));\n}\n\nvoid player::update()\n{\n    sprite.setPosition(rect.getPosition());\n}\n\nvoid player::updateMovement()\n{\n    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right)) {\n\n        if (canMoveRight == true) {\n\n            rect.move(movementSpeed, 0);\n            sprite.setTextureRect(sf::IntRect(counterWalking * 32, 64, 32, 32));\n            direction = 4;\n            canMoveUp = true;\n            canMoveDown = true;\n            canMoveLeft = true;\n            canMoveRight = true;\n        }\n    }\n    else if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left)) {\n\n        if (canMoveLeft == true) {\n\n            rect.move(-movementSpeed, 0);\n            sprite.setTextureRect(sf::IntRect(counterWalking * 32, 32, 32, 32));\n            direction = 3;\n            canMoveUp = true;\n            canMoveDown = true;\n            canMoveLeft = true;\n            canMoveRight = true;\n        }\n    }\n    else if (sf::Keyboard::isKeyPressed(sf::Keyboard::Up)) {\n\n        if (canMoveUp == true) {\n\n            rect.move(0, -movementSpeed);\n            sprite.setTextureRect(sf::IntRect(counterWalking * 32, 96, 32, 32));\n            direction = 1;\n            canMoveUp = true;\n            canMoveDown = true;\n            canMoveLeft = true;\n            canMoveRight = true;\n        }\n    }\n    else if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down)) {\n\n        if (canMoveDown == true) {\n\n            rect.move(0, movementSpeed);\n            sprite.setTextureRect(sf::IntRect(counterWalking * 32, 0, 32, 32));\n            direction = 2;\n            canMoveUp = true;\n            canMoveDown = true;\n            canMoveLeft = true;\n            canMoveRight = true;\n        }\n    }\n    else {\n        //Player not moving\n    }\n    counterWalking++;\n\n    if (counterWalking == 3)\n        counterWalking = 0;\n}\n</code></pre>\n\n<p>Here is the code I found that displays a slow animation:</p>\n\n<pre><code>int main()\n{\n    sf::RenderWindow renderWindow(sf::VideoMode(640, 480), \"Demo Game\");\n    sf::Event event;\n    sf::Texture texture;\n    texture.loadFromFile(\"images/player.png\");\n    sf::IntRect rectSourceSprite(0, 0, 32, 32);\n    sf::Sprite sprite(texture, rectSourceSprite);\n    sf::Clock clock;\n\n    while (renderWindow.isOpen()) {\n\n        while (renderWindow.pollEvent(event)) {\n\n            if (event.type == sf::Event::EventType::Closed)\n                renderWindow.close();\n        }\n\n        if (clock.getElapsedTime().asSeconds() &gt; 1.0f) {\n\n            if (rectSourceSprite.left == 96)\n                rectSourceSprite.left = 0;\n            else\n                rectSourceSprite.left += 32;\n\n            sprite.setTextureRect(rectSourceSprite);\n            clock.restart();\n        }\n\n        renderWindow.clear();\n        renderWindow.draw(sprite);\n        renderWindow.display();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "recursion", "permutation"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1453318611, "post_id": 34908926, "comment_id": 57553695, "body": "What &quot;algorithm&quot; did you use to create that list? Just convert that approach to code. Note: To support arbitrary depth, you need recursion."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453318617, "post_id": 34908926, "comment_id": 57553703, "body": "what are min(0/1) and max(0/1)?"}, {"owner": {"reputation": 612, "user_id": 2851704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4828d9efcac9d40fa6b820a3864f7c22?s=128&d=identicon&r=PG&f=1", "display_name": "Ali250", "link": "https://stackoverflow.com/users/2851704/ali250"}, "edited": false, "score": 0, "creation_date": 1453318704, "post_id": 34908926, "comment_id": 57553750, "body": "They are the minimum and maximum limits for the first and second values."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453318942, "post_id": 34908926, "comment_id": 57553876, "body": "@Ali250 and how did you arrive at 0, 1 , 0.5 and 1.5 to be the limits?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1453319138, "post_id": 34908926, "comment_id": 57553980, "body": "do you really need all permutations at once? Or just one at a time?"}, {"owner": {"reputation": 612, "user_id": 2851704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4828d9efcac9d40fa6b820a3864f7c22?s=128&d=identicon&r=PG&f=1", "display_name": "Ali250", "link": "https://stackoverflow.com/users/2851704/ali250"}, "edited": false, "score": 0, "creation_date": 1453320126, "post_id": 34908926, "comment_id": 57554499, "body": "all at once. They need to be stored in a database."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453320451, "post_id": 34908926, "comment_id": 57554673, "body": "@KarolyHorvath: Recursion is a very nice way to approach it, but it&#39;s not essential."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1453320819, "post_id": 34908926, "comment_id": 57554876, "body": "well, to store them in a database you dont need them in memory all at once"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1453323914, "post_id": 34908926, "comment_id": 57556633, "body": "@BenVoigt: sure, you can emulate a stack with some data structure, like a list, as shown in your answer."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453324996, "post_id": 34908926, "comment_id": 57557257, "body": "@KarolyHorvath: You can do that also, but I&#39;m actually operating on data in a very different order than the typical recursive solution would."}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1453320883, "creation_date": 1453320883, "answer_id": 34909622, "question_id": 34908926, "link": "https://stackoverflow.com/questions/34908926/generate-all-permutations-of-a-set-of-doubles-within-a-certain-range-c/34909622#34909622", "title": "Generate all permutations of a set of doubles within a certain range C++", "body": "<p>Since you struggle with recursion, avoid it.  Take a look at the repeating patterns in your output:</p>\n\n<p>The first column contains the list (0.0, 0.5, 1.0).  I presume you know how to use a for loop to get these.</p>\n\n<p>The second column contains repeated blocks of the list (0.5, 1.0, 1.5).  Again, I presume you know how to use a for loop for this.  There's one such block for each value in the first column.</p>\n\n<p>You just need to think about three lists: The solutions for columns left of the column being processed, the values that the currently processed column should take, and the results you are building.</p>\n\n<p>For each column, use a nested loop across the columns-left list and the this-column list, placing each combination into the building-output.  When you finish one column, move the building-output to the columns-left results and start processing the next column.  Continue until all columns are added.</p>\n\n<p>No matter how many columns there are, you still only need three loops (one iterates across column number, one across the columns-left results, one across the this-column values).  Since the loop nesting depth is fixed, recursion is not needed.</p>\n"}], "owner": {"reputation": 612, "user_id": 2851704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4828d9efcac9d40fa6b820a3864f7c22?s=128&d=identicon&r=PG&f=1", "display_name": "Ali250", "link": "https://stackoverflow.com/users/2851704/ali250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453320883, "creation_date": 1453318457, "last_edit_date": 1453319681, "question_id": 34908926, "link": "https://stackoverflow.com/questions/34908926/generate-all-permutations-of-a-set-of-doubles-within-a-certain-range-c", "title": "Generate all permutations of a set of doubles within a certain range C++", "body": "<p>Basically I have <code>n</code> doubles, each of which can have any value within a certain range (the range is different for each value). I want a C++ function that can generate all possible <strong>permutations</strong> of these <code>n</code> values given a certain interval <code>i</code> (this too, can vary for each value).</p>\n\n<p>As an example, if <code>n = 2</code>, <code>i = 0.5</code> (for both values), <code>min(0) = 0</code>, <code>max(0) = 1</code>, <code>min(1) = 0.5</code>, <code>max(1) = 1.5</code>, where min(0) is the lower limit for the first value, max(0) is the upper limit for the first value etc., then the function should return the following:</p>\n\n<pre><code>  - [0.0, 0.5]\n  - [0.0, 1.0]\n  - [0.0, 1.5]\n  - [0.5, 0.5]\n  - [0.5, 1.0]\n  - [0.5, 1.5]\n  - [1.0, 0.5]\n  - [1.0, 1.0]\n  - [1.0, 1.5]\n</code></pre>\n\n<p>In my implementation so far, I have the intervals stored in a vector of size <code>n</code> and the ranges for each value stored in a vector of <code>std::pair&lt;double, double&gt;</code> objects, where the first value corresponds to the lower limit and the second value corresponds to the upper limit. I'm a bit stuck on what to do next though, not very good with recursion unfortunately. I just need a brief pseudo-code to get things going.</p>\n\n<p>P.S. The order is irrelevant.</p>\n"}, {"tags": ["c++", "c", "memory", "virtual-memory", "aslr"], "comments": [{"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 13, "creation_date": 1453317931, "post_id": 34908728, "comment_id": 57553283, "body": "For one, ASLR likely contributes \u2013 is it enabled in the kernels on your testing systems?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1453318025, "post_id": 34908728, "comment_id": 57553339, "body": "Yep, this is almost certainly <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a> at work."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 1, "creation_date": 1453318079, "post_id": 34908728, "comment_id": 57553363, "body": "@fish2000, you should certainly add this as an answer with a bit of explanation."}, {"owner": {"reputation": 763, "user_id": 599391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/03b93fefdf9e96bce1e27e0d20b6dc25?s=128&d=identicon&r=PG", "display_name": "Chiubaka", "link": "https://stackoverflow.com/users/599391/chiubaka"}, "edited": false, "score": 2, "creation_date": 1453318875, "post_id": 34908728, "comment_id": 57553840, "body": "Non-deterministic compiler optimizations may also screw with you here."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453318877, "post_id": 34908728, "comment_id": 57553841, "body": "@SergeyA done, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 6, "creation_date": 1453321391, "post_id": 34909043, "comment_id": 57555208, "body": "Incidentally, ASLR also applies to the stack location, which is why local variables also have different addresses with each execution. Which is really what the question was getting at."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1453321664, "post_id": 34909043, "comment_id": 57555364, "body": "@JordanMelo good point \u2013 I did assume a casual understanding of terms like e.g. \u201cstack\u201d and \u201cheap\u201d in the answer \u2013 but yeah a program\u2019s stack is indeed itself initialized by the memory manager using ASLR and I totally did mean  to mention that fact, thanks"}, {"owner": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 2, "creation_date": 1453328254, "post_id": 34909043, "comment_id": 57559036, "body": "When you talk about ASLR as a security feature, did you mean it protects against stack-based buffer overflows (and not heap)? I guess that&#39;s the major vulnerability it addresses."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "reply_to_user": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 1, "creation_date": 1539799102, "post_id": 34909043, "comment_id": 92636372, "body": "@Banex: It protects against both.  Local and heap addresses will both vary."}], "tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": true, "score": 11, "last_activity_date": 1453327789, "last_edit_date": 1453327789, "creation_date": 1453318847, "answer_id": 34909043, "question_id": 34908728, "link": "https://stackoverflow.com/questions/34908728/why-the-addresses-of-local-variables-can-be-different-every-time/34909043#34909043", "title": "Why the addresses of local variables can be different every time?", "body": "<p>When allocating on the heap (using the <code>new</code> operator or <code>malloc()</code> and friends), your program has to ask the OS to allocate your heap memory. Lots of behind-the-scenes stuff happens in the OS memory manager (the implementation details of which are mostly above my pay-grade: garbage collection, consolidation of reclaimed memory, etc) and it is a <em>good thing</em> to not have to think about it.</p>\n\n<p>Local variables are allocated on the stack.  Traditionally, stack allocation would be repeatable, but this has changed in recent years.\n<a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow\">Address space layout randomization</a> (ASR) is a relatively recent innovation in OS memory management, which deliberately makes memory addresses in stack allocations (such as those you have observed) as non-deterministic as possible at runtime. It\u2019s a security feature: this keeps bad actors from exploiting heap buffer overflows, because if the ASLR implementation is entropic enough, who knows what\u2019s going to be there at the end of the overflowing buffer? </p>\n\n<p>The price you pay for this and other memory-management features is control.  Betting on the addresses of allocations on a modern (non-embedded) platform is like playing Powerball: possibly an amusing distraction but not a workable plan for the future. If your code is running on an AVR-ISA platform or somesuch, maybe the odds are closer enough to Blackjack such that someone might be enticed to play to win (so to speak).</p>\n\n<p>Either way I am not a gambling man, personally \u2013 as I often say, gentlemen prefer stack allocation. But that is basically why you are getting those results.</p>\n\n<p>Thanks to @T.C. for the link and @SergeyA for the suggestion.</p>\n"}], "owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 34909043, "answer_count": 1, "score": 8, "last_activity_date": 1488388990, "creation_date": 1453317855, "last_edit_date": 1495540451, "question_id": 34908728, "link": "https://stackoverflow.com/questions/34908728/why-the-addresses-of-local-variables-can-be-different-every-time", "title": "Why the addresses of local variables can be different every time?", "body": "<p>I've asked Google and did some research on StackOverflow. My question is that when I enter the <code>main()</code> function in a C++ program and declare the very first variable, why is it that the address of this variable can vary upon different executions? Please see my example program below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int *a = new int;\n    int *b = new int;\n\n    std::cout &lt;&lt; \"address: \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"address of locals: \" &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; &amp;b &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Result on execution 1:</strong></p>\n\n<pre><code>address: 0xa32010 0xa32030\naddress of locals: 0x7fff10de2cf0 0x7fff10de2cf8\n</code></pre>\n\n<p><strong>Result on execution 2:</strong></p>\n\n<pre><code>address: 0x1668010 0x1668030\naddress of locals: 0x7ffc252ccd90 0x7ffc252ccd98\n</code></pre>\n\n<p><strong>Result on execution 3:</strong></p>\n\n<pre><code>address: 0x10e0010 0x10e0030\naddress of locals: 0x7ffd3d2cf7f0 0x7ffd3d2cf7f8\n</code></pre>\n\n<p>As you can see, I get different results upon different executions. The first line of the output corresponding to the address of the allocated memory, which should happen in the heap \u2013 if they are assigned different addresses every time, it kinda make sense to me. However, even when I print the addresses of local variables \u2013 corresponding to the second line \u2013 the results are still different.</p>\n\n<p>At first glance, I was thinking it's because the program is printing a physical memory address, but this post, <a href=\"https://stackoverflow.com/questions/24480899/virtual-memory-or-physical-memory\">Virtual Memory or Physical Memory</a>, disproves my initial thought. Is there any reason that, given the programs\u2019 execution is \"the same,\" with no threading, no user inputs, etc, that there are still memory allocations with different addresses?</p>\n\n<p><strong>Testing environment:</strong></p>\n\n<ul>\n<li>Linux 14.04</li>\n<li>Mac OS X 10.10</li>\n</ul>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1453322240, "post_id": 34908711, "comment_id": 57555738, "body": "A friendly advice: try using QtCreator (the official IDE for Qt). It will be easier for you to start working your way through the Qt jungle. QtCreator is generally not only great for Qt projects but for general C++ applications (especially those that use <code>cmake</code>). When using an editor such as Geany that doesn&#39;t provide the additional features that QtCreator has for specific Qt-things you make your coding experience worse omho."}], "answers": [{"comments": [{"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1453321941, "post_id": 34909523, "comment_id": 57555536, "body": "I really don&#39;t see why one would want to create a whole main window widget instead of just a simple widget when such a task has to be fulfilled as displaying some text."}, {"owner": {"reputation": 1, "user_id": 5556109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a09e1969100f31f79421ea66e5acca9?s=128&d=identicon&r=PG&f=1", "display_name": "ckenyon_17", "link": "https://stackoverflow.com/users/5556109/ckenyon-17"}, "edited": false, "score": 0, "creation_date": 1453401993, "post_id": 34909523, "comment_id": 57596542, "body": "<code>label2-&gt;setText(QString(&quot;S: %1&quot;).arg(stats[0]));</code> did work for me. However, \\n doesn&#39;t seem to work when starting a new line. Is there some other alternative?"}, {"owner": {"reputation": 403, "user_id": 5480897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58bdec011e6718843c4b528e95272908?s=128&d=identicon&r=PG", "display_name": "Jan M&#252;ller", "link": "https://stackoverflow.com/users/5480897/jan-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1453551543, "post_id": 34909523, "comment_id": 57657307, "body": "What do you mean? &#39;\\n&#39; inside a QString for a QLabel does work for me. What do you want to achieve? Do you want to print multiple labels? Then I would recommend looking into layouting your MainWindow with QtDesigner."}], "tags": [], "owner": {"reputation": 403, "user_id": 5480897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58bdec011e6718843c4b528e95272908?s=128&d=identicon&r=PG", "display_name": "Jan M&#252;ller", "link": "https://stackoverflow.com/users/5480897/jan-m%c3%bcller"}, "is_accepted": true, "score": 1, "last_activity_date": 1453320523, "creation_date": 1453320523, "answer_id": 34909523, "question_id": 34908711, "link": "https://stackoverflow.com/questions/34908711/display-code-output-to-mainwindow-in-qt/34909523#34909523", "title": "Display code output to mainwindow in QT", "body": "<p>You cannot concatenate c-style strings with the &lt;&lt; operator.</p>\n\n<p>To fix your compile error, change line 20 of main.cpp to e.g.:</p>\n\n<pre><code>label2-&gt;setText(QString(\"S: %1\").arg(stats[0]));\n</code></pre>\n\n<p>QString is the default type to handle strings in Qt. You can find fine documentation about QString here: <a href=\"http://doc.qt.io/qt-5/qstring.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qstring.html</a></p>\n\n<p>Besides the compiler error, your code has some issues with how you draw into QMainWindow. Essentially, besides the QMainWindow, you need:</p>\n\n<ul>\n<li>a widget</li>\n<li>set the widget as 'centralWidget' of QMainWindow</li>\n<li>define a layout for this widget</li>\n<li>and add all the QLabels you want to show to this layout</li>\n</ul>\n\n<p>These operations could be done in your MainWindow class. Or as you did, in the main function.</p>\n\n<p>Here is a very crude alternative implementation of your main function. There is still a lot of room for improvement, but it should demonstrate the basic principle.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n#include &lt;QVBoxLayout&gt;\n\n#include \"mainwindow.h\"\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n    int stats[7] = {1,2,3,4,5,6,7};\n\n    QWidget *centralWidget = new QWidget();\n    QVBoxLayout *layout = new QVBoxLayout(&amp;w);\n\n    centralWidget-&gt;setLayout(layout);\n    w.setCentralWidget(centralWidget);\n\n    QLabel *label[7];\n\n    for (int i=0;i&lt;7;i++) {\n        label[i] = new QLabel (QString(\"S: %1\").arg(stats[i]));\n        layout-&gt;addWidget(label[i]);\n    }\n    return a.exec();\n}\n</code></pre>\n\n<p>If you use QtDesigner, you don't have to worry about how to define the layouts programmatically, but you can use a nice and intuitive tool to help you with the process of designing the layout and appearance of the windows.\nQtDesigner generates the *.ui files.</p>\n"}], "owner": {"reputation": 1, "user_id": 5556109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a09e1969100f31f79421ea66e5acca9?s=128&d=identicon&r=PG&f=1", "display_name": "ckenyon_17", "link": "https://stackoverflow.com/users/5556109/ckenyon-17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "accepted_answer_id": 34909523, "answer_count": 1, "score": 0, "last_activity_date": 1453320523, "creation_date": 1453317814, "question_id": 34908711, "link": "https://stackoverflow.com/questions/34908711/display-code-output-to-mainwindow-in-qt", "title": "Display code output to mainwindow in QT", "body": "<p>I have some code that I wrote in geany that distributes a total of 28 numbers to 7 letters. </p>\n\n<p>Here is the code in Geany:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\nint specialstats()\n{\n    int stats[7], x;\n    for (x=0;x&lt;7;x++) stats[x]=0;\n    for (x=0;x&lt;28;x++) stats[rand()%7]++;\n    cout&lt;&lt;\"S: \"&lt;&lt;stats[0]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"P: \"&lt;&lt;stats[1]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"E: \"&lt;&lt;stats[2]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"C: \"&lt;&lt;stats[3]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"I: \"&lt;&lt;stats[4]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"A: \"&lt;&lt;stats[5]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"L: \"&lt;&lt;stats[6]&lt;&lt;\"\\n\";\n    return 0;\n\n}\nint main() \n{\n    srand(time(NULL));\n    specialstats();\n    return 0;\n}\n</code></pre>\n\n<p>So basically I want to put it into QT and have the output of that code show up in a window. Here is what I have there:</p>\n\n<p>again.pro:</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = again\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n    mainwindow.cpp\n\nHEADERS  += mainwindow.h\n\nFORMS    += mainwindow.ui\n</code></pre>\n\n<p>Here is my mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>Here is my main.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;  \n#include &lt;QLabel&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n    int stats[7];\n    int x;\n    for (x=0;x&lt;7;x++) stats[x]=0;\n    for (x=0;x&lt;28;x++) stats[rand()%7]++;\n    QMainWindow mainWindow;\n    QLabel *label2 = new QLabel (&amp;mainWindow);\n    label2-&gt;setText(\"S: \"&lt;&lt;stats[0]&lt;&lt;\"\\n\");\n    std::cout&lt;&lt;\"P: \\033[1;32m\"&lt;&lt;stats[1]&lt;&lt;\"\\033[0m\\n\";\n    std::cout&lt;&lt;\"E: \\033[1;32m\"&lt;&lt;stats[2]&lt;&lt;\"\\033[0m\\n\";\n    std::cout&lt;&lt;\"C: \\033[1;32m\"&lt;&lt;stats[3]&lt;&lt;\"\\033[0m\\n\";\n    std::cout&lt;&lt;\"I: \\033[1;32m\"&lt;&lt;stats[4]&lt;&lt;\"\\033[0m\\n\";\n    std::cout&lt;&lt;\"A: \\033[1;32m\"&lt;&lt;stats[5]&lt;&lt;\"\\033[0m\\n\";\n    std::cout&lt;&lt;\"L: \\033[1;32m\"&lt;&lt;stats[6]&lt;&lt;\"\\033[0m\\n\";\n    mainWindow.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>And my mainwindow.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n   {\n     delete ui;\n   }\n</code></pre>\n\n<p>The errors that I get when I try to run this are, and are in my main.cpp:</p>\n\n<p><code>/home/administrator/again/main.cpp:20: error: invalid operands of types 'const char [5]' and 'int' to binary 'operator&lt;&lt;'\n         label2-&gt;setText(\"S: \\n\"&lt;&lt;stats[0]&lt;&lt;\"\\n\");\n                                         ^</code></p>\n\n<p>and, </p>\n\n<p><code>[main.o] Error 1</code></p>\n\n<p>What do I do to make the output of this text show up in the window?? In Geany, it outputs to a console and works flawlessly. I just want to try new things out and I am a beginner, so go easy on me.</p>\n"}, {"tags": ["c++", "arrays", "character"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453316767, "post_id": 34908360, "comment_id": 57552666, "body": "Use a <code>std::string</code> to make your life easier."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453317271, "post_id": 34908360, "comment_id": 57552940, "body": "In your example only 1 of the <code>a&#39;s</code> is affected, is this by design?"}, {"owner": {"reputation": 326, "user_id": 5624634, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bd728262b21919fe84ca4a7e33dafef1?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyOnPc", "link": "https://stackoverflow.com/users/5624634/johnnyonpc"}, "edited": false, "score": 0, "creation_date": 1453317490, "post_id": 34908360, "comment_id": 57553064, "body": "nope i have a issue while posting this ,the is a * after the first &#39;a&#39; as well"}], "answers": [{"comments": [{"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453317925, "post_id": 34908502, "comment_id": 57553280, "body": "@SergeyA, not any more :)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1453322117, "post_id": 34908502, "comment_id": 57555662, "body": "Assuming, of course, that there is room for all the added characters in the original buffer.  Or <i>&quot;Use a std::string to make your life easier.&quot;</i>"}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": true, "score": 2, "last_activity_date": 1453319561, "last_edit_date": 1453319561, "creation_date": 1453317210, "answer_id": 34908502, "question_id": 34908360, "link": "https://stackoverflow.com/questions/34908360/insert-a-character-at-a-specific-position-in-a-char-array/34908502#34908502", "title": "Insert a character at a specific position in a char array", "body": "<p>This will shift chars to the right, making room for insertion.</p>\n\n<pre><code>void rshift( char *s ){\n    int n = strlen( s);\n    s[ n + 1] = 0;\n    while( n ){\n       s[ n ] = s[ n-1 ];\n       n--;\n    } \n}\n\nint main(){\n\n    char *p = strchr(sentence , replace);\n\n    if( p ) {\n         p++; // insert after \n         rshift( p );\n         *p = insertingChar;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 5624634, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bd728262b21919fe84ca4a7e33dafef1?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyOnPc", "link": "https://stackoverflow.com/users/5624634/johnnyonpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5196, "favorite_count": 1, "accepted_answer_id": 34908502, "answer_count": 1, "score": -7, "last_activity_date": 1453321850, "creation_date": 1453316697, "last_edit_date": 1453321850, "question_id": 34908360, "link": "https://stackoverflow.com/questions/34908360/insert-a-character-at-a-specific-position-in-a-char-array", "title": "Insert a character at a specific position in a char array", "body": "<p>As the title says I want to insert a character after another one in a <code>char array</code> using the <code>C</code> - style not by using the library <code>string</code>, and please avoid using buffer functions as well, only the basic ones :) .</p>\n\n<pre><code>char sentence[100],*p = NULL;\ncin.get(sentence,100);\nchar replaceChar; // after What character should we insert\ncin&gt;&gt;replaceChar;\nchar insertingChar; // the character we are inserting after the replaceChar;\ncin &gt;&gt; insertingChar ; \np = strchr(sentence , replace);\nwhile(p != NULL){\n//and this is I could think of ...\n}\n</code></pre>\n\n<p>So let`s say that we have this sentence : \"I want apples\", the replaceChar = a, and the insertingChar = '*';</p>\n\n<p>The result should be: \"I wa*nt a*pples\" .</p>\n"}, {"tags": ["c++", "linux", "opengl", "codelite"], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 3347791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6PWox.jpg?s=128&g=1", "display_name": "subdavis", "link": "https://stackoverflow.com/users/3347791/subdavis"}, "is_accepted": true, "score": 3, "last_activity_date": 1453323895, "creation_date": 1453323895, "answer_id": 34910487, "question_id": 34908337, "link": "https://stackoverflow.com/questions/34908337/linking-codelite-and-opengl-with-freeglut-on-linux/34910487#34910487", "title": "Linking CodeLite and OpenGL with freeglut on Linux", "body": "<p>This was a linker issue, and can be solved as follows:</p>\n\n<p>Project Settings > Linker</p>\n\n<p>Add GL and glut as libraries and point them to your includes (for linux, /usr/include/GL)</p>\n\n<p><a href=\"https://i.stack.imgur.com/AI17t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AI17t.png\" alt=\"Linker Screenshot\"></a></p>\n\n<p>In addition, make sure to add -lglut and -lGL as build flags for the compiler.  It is probably best to add these as Global settings so that you don't break the config when changing between debug and release</p>\n"}], "owner": {"reputation": 451, "user_id": 3347791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6PWox.jpg?s=128&g=1", "display_name": "subdavis", "link": "https://stackoverflow.com/users/3347791/subdavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1405, "favorite_count": 1, "accepted_answer_id": 34910487, "answer_count": 1, "score": 1, "last_activity_date": 1453323895, "creation_date": 1453316622, "last_edit_date": 1453318757, "question_id": 34908337, "link": "https://stackoverflow.com/questions/34908337/linking-codelite-and-opengl-with-freeglut-on-linux", "title": "Linking CodeLite and OpenGL with freeglut on Linux", "body": "<p>I'm trying to set up CodeLite IDE to use the OpenGL libraries I installed.</p>\n\n<p>The headers are in /usr/include/GL - here's the contents of ls:</p>\n\n<pre><code>    freeglut_ext.h  freeglut_std.h  glext.h  gl_mangle.h  glu_mangle.h  glxext.h  glxint.h      glxmd.h     glxtokens.h  freeglut.h      glcorearb.h     gl.h     glu.h        glut.h        glx.h     glx_mangle.h  glxproto.h  internal\n</code></pre>\n\n<p>Here is my simple code snippet:</p>\n\n<pre><code>    #include &lt;GL/glut.h&gt;\n\n    int main(int argc, char** argv)\n    {\n        glutInit(&amp;argc, argv);\n        return 0;\n    }\n</code></pre>\n\n<p>Finally, here is the output of trying to build the project.</p>\n\n<pre><code>/bin/sh -c '/usr/bin/make -j4 -e -f  Makefile'\n----------Building project:[ cpptest1 - Debug ]----------\nmake[1]: Entering directory '/home/brandon/codelite/cpptest/cpptest1'\n/usr/bin/g++  -c  \"/home/brandon/codelite/cpptest/cpptest1/main.cpp\" -g -O0 -Wall -lglut -lGL -lGLU  -o ./Debug/main.cpp.o -I. -I. -I/usr/include/\n/usr/bin/g++ -o ./Debug/cpptest1 @\"cpptest1.txt\" -L. -L/usr/include/GL  -lGL\n./Debug/main.cpp.o: In function `main':\n/home/brandon/codelite/cpptest/cpptest1/main.cpp:5: undefined reference to `glutInit'\ncollect2: error: ld returned 1 exit status\ncpptest1.mk:76: recipe for target 'Debug/cpptest1' failed\nmake[1]: *** [Debug/cpptest1] Error 1\nmake[1]: Leaving directory '/home/brandon/codelite/cpptest/cpptest1'\nMakefile:4: recipe for target 'All' failed\nmake: *** [All] Error 2\n====2 errors, 0 warnings====\n</code></pre>\n\n<p>Please note that I CAN create a proper binary by using <code>g++ -o a.out main.cpp -lglut -lGL</code> from the command line.  </p>\n\n<p>I can even use CodeLite to compile the main.cpp file by itself.  I just can't build the project.</p>\n"}, {"tags": ["c++", "mcisendstring"], "owner": {"reputation": 11, "user_id": 5817559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f032ee48111c92da6ff6c7b2145b70c1?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Leveugle", "link": "https://stackoverflow.com/users/5817559/stephane-leveugle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453316860, "creation_date": 1453315973, "last_edit_date": 1453316860, "question_id": 34908136, "link": "https://stackoverflow.com/questions/34908136/mcisendstring-automatically-plays-avi-files-at-fullspeed", "title": "MciSendString automatically plays AVI files at fullspeed", "body": "<p>I'm trying to play avi files with mciSendString.</p>\n\n<p>Here's my testing code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;string&gt;\n#pragma comment (lib, \"winmm.lib\")\nusing namespace std;\n\n\n\nint main(int argc, char* argv[])\n{\n\n    mciSendString(\"open D:\\\\something.avi type avivideo alias myAlias\", NULL, 0, NULL);\n\n    mciSendString(\"play myAlias fullscreen from 0\", NULL, 0, NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>The thing is it plays the file at fullspeed, as if I had done :</p>\n\n<pre><code>mciSendString(\"set myAlias speed 0\", NULL, 0, NULL);\n</code></pre>\n\n<p>I tried to set the speed to 1000, to no avail.</p>\n\n<p>Some weird things : </p>\n\n<ul>\n<li>If I set the speed to 2000 for example, the file does play at double speed instead of fullspeed</li>\n<li>For some files, it is displayed at normal speed and I can't seem to figure out why.</li>\n</ul>\n\n<p>I tried to find out where it comes from with GSpot (<a href=\"https://en.wikipedia.org/wiki/GSpot\" rel=\"nofollow\">https://en.wikipedia.org/wiki/GSpot</a>) because I already had this software for previous reasons but I couldn't find any correlation.</p>\n\n<p>Please understand that my knowledge in media files is close to nonexistent, so try keeping it as simple as possible.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "winforms", "c++11"], "comments": [{"owner": {"reputation": 3803, "user_id": 1030861, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/df2b0ab3bb0ff2aea103fc4857aeca43?s=128&d=identicon&r=PG&f=1", "display_name": "Inbae Jeong", "link": "https://stackoverflow.com/users/1030861/inbae-jeong"}, "edited": false, "score": 0, "creation_date": 1453315583, "post_id": 34907945, "comment_id": 57552050, "body": "I think the line <code>if (tsvn_creds.find(it-&gt;first) != tsvn_creds.end())</code> is redundant."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 3, "creation_date": 1453315624, "post_id": 34907945, "comment_id": 57552073, "body": "<code>user_name</code> is <code>CString</code>, <code>GetUserName</code> returns <code>unique_ptr</code>. Classes are completely different. How do you think this will work?"}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "edited": false, "score": 0, "creation_date": 1453315727, "post_id": 34907945, "comment_id": 57552126, "body": "It&#39;s a pointer to an array of chars like a string. Could you explain further what you mean? Thanks."}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 2, "creation_date": 1453315728, "post_id": 34907945, "comment_id": 57552127, "body": "This <code>return CStringUtils::Decrypt(username);</code> actually returns a unique_ptr ? If so you just need to dereference GetUserName: <code>*(cr.GetUsername());</code>"}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "edited": false, "score": 0, "creation_date": 1453315832, "post_id": 34907945, "comment_id": 57552173, "body": "I&#39;m going to rebuild my solution but so far it says, no operator &#39;*&#39; matches these operands. It won&#39;t allow me to deference the pointer. Is it possible I&#39;m missing a library reference?"}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "reply_to_user": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1453316011, "post_id": 34907945, "comment_id": 57552266, "body": "@old_mountain It says illegal indirection next to that line and if I hover over the red error, it says what I wrote above."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453316559, "post_id": 34907945, "comment_id": 57552557, "body": "@KalaJ, you need to make sure to always update your question according to your latest edits."}, {"owner": {"reputation": 272, "user_id": 3394923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640725267/picture?type=large", "display_name": "Andrej", "link": "https://stackoverflow.com/users/3394923/andrej"}, "edited": false, "score": 0, "creation_date": 1453316566, "post_id": 34907945, "comment_id": 57552561, "body": "what does CStringUtils::Decrypt(username); return?"}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "edited": false, "score": 0, "creation_date": 1453316732, "post_id": 34907945, "comment_id": 57552651, "body": "It returns a type of std::unique_ptr&lt;char[]&gt;"}, {"owner": {"reputation": 272, "user_id": 3394923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640725267/picture?type=large", "display_name": "Andrej", "link": "https://stackoverflow.com/users/3394923/andrej"}, "edited": false, "score": 0, "creation_date": 1453317054, "post_id": 34907945, "comment_id": 57552832, "body": "Would return std::move(CStringUtils::Decrypt(username)); work?"}, {"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1453317107, "post_id": 34907945, "comment_id": 57552859, "body": "Are you writing CStringUtils, or are you using some third party lib?"}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "reply_to_user": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1453317305, "post_id": 34907945, "comment_id": 57552953, "body": "@AdiLevin, I believe it is a third party library. I am working with open source project TortoiseSVN that uses StringUtils."}, {"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "reply_to_user": {"reputation": 272, "user_id": 3394923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640725267/picture?type=large", "display_name": "Andrej", "link": "https://stackoverflow.com/users/3394923/andrej"}, "edited": false, "score": 0, "creation_date": 1453317313, "post_id": 34907945, "comment_id": 57552959, "body": "@Andrej no I still get illegal indirection message."}, {"owner": {"reputation": 272, "user_id": 3394923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640725267/picture?type=large", "display_name": "Andrej", "link": "https://stackoverflow.com/users/3394923/andrej"}, "edited": false, "score": 0, "creation_date": 1453318958, "post_id": 34907945, "comment_id": 57553884, "body": "If CString is essentially a dressed up char array you will need to copy the contents to it. I&#39;m not sure about the implementation or assignment operator overloading for CString. For a vanilla std::string you could probably do something like cppStrUserName = std::string(cr.GetUsername().get());"}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "edited": false, "score": 0, "creation_date": 1453321301, "post_id": 34909615, "comment_id": 57555153, "body": "Yes, this is exactly the reason! Thank you so much!"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1453336554, "post_id": 34909615, "comment_id": 57562086, "body": "Actually <code>user_name = cr.GetUsername().get()</code> is fine but <code>const unsigned char* raw_str_ptr = cr.GetUsername().get(); user_name = raw_str_ptr;</code> is entirely broken, because in the latter the <code>unique_ptr</code> will be destroyed before the assignment occurs."}], "tags": [], "owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "is_accepted": true, "score": 2, "last_activity_date": 1453337017, "last_edit_date": 1453337017, "creation_date": 1453320877, "answer_id": 34909615, "question_id": 34907945, "link": "https://stackoverflow.com/questions/34907945/binary-no-operator-found-which-takes-a-right-hand-operand-of-type-stduni/34909615#34909615", "title": "binary &#39;=&#39;: no operator found which takes a right-hand operand of type &#39;std::unique_ptr&lt;char [],std::default_delete&lt;_Ty&gt;&gt;&#39;", "body": "<p>The root of your problem is probably the CString type; the error message you get is saying that the implementer(s) of CString didn't define an <code>operator=</code> that assigns a CString object from a <code>unique_ptr&lt;char[]&gt;</code>.</p>\n\n<p>Based on some quick Googling, I'm guessing your CString type is <a href=\"https://msdn.microsoft.com/en-us/library/aa300688(v=vs.60).aspx\" rel=\"nofollow\">this one</a> because it's from a Microsoft library and you say you're using WinForms. According to the documentation, you can only assign a CString from a raw pointer to a <code>char</code> array, that is, <code>const unsigned char*</code>. So to assign the result of <code>GetUsername()</code> to your CString <code>user_name</code>, you need to get the underlying raw pointer from the <code>unique_ptr</code>:</p>\n\n<pre><code>user_name = cr.GetUsername().get()\n</code></pre>\n"}], "owner": {"reputation": 1958, "user_id": 2182521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CaClH.png?s=128&g=1", "display_name": "Kala J", "link": "https://stackoverflow.com/users/2182521/kala-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 34909615, "answer_count": 1, "score": 1, "last_activity_date": 1453337017, "creation_date": 1453315292, "last_edit_date": 1453316678, "question_id": 34907945, "link": "https://stackoverflow.com/questions/34907945/binary-no-operator-found-which-takes-a-right-hand-operand-of-type-stduni", "title": "binary &#39;=&#39;: no operator found which takes a right-hand operand of type &#39;std::unique_ptr&lt;char [],std::default_delete&lt;_Ty&gt;&gt;&#39;", "body": "<p>I have this check and when I'm trying to get the username, it says there is no acceptable conversion from Unique_ptr to CString. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>if (tsvn_creds.size() == 1)\n    {\n        std::map&lt;CStringA,Creds&gt;::iterator it = tsvn_creds.begin();\n        if (tsvn_creds.find(it-&gt;first) != tsvn_creds.end())\n        {\n            Creds cr = tsvn_creds[it-&gt;first];\n            user_name = cr.GetUsername();\n        }\n    }\n</code></pre>\n\n<p>Where GetUsername is: </p>\n\n<pre><code>std::unique_ptr&lt;char[]&gt; GetUsername() { return CStringUtils::Decrypt(username); }\n\nCString user_name = NULL;\n</code></pre>\n\n<p>I need user_name as CString because at some point I need to append it to a CString message. </p>\n\n<p>What's wrong with the way I have it setup above? </p>\n\n<p>Here is the error I get: </p>\n\n<pre><code>Error   C2679   binary '=': no operator found which takes a right-hand operand of type 'std::unique_ptr&lt;char [],std::default_delete&lt;_Ty&gt;&gt;' (or there is no acceptable conversion)\n</code></pre>\n\n<p>EDIT: </p>\n\n<p>I tried this solution as told in the comments: </p>\n\n<pre><code>user_name = *(cr.GetUsername());\n</code></pre>\n\n<p>but I get the error \"illegal indirection\" </p>\n"}, {"tags": ["c++", "c++14", "as-if"], "comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1453315422, "post_id": 34907922, "comment_id": 57551938, "body": "I believe volatile would help there, but there is another problem: nothing depends on mem value, so compiler can move allocation anywhere in that block of code. It might allocate at the very beginning, at the end and in any other place."}, {"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1453316024, "post_id": 34907922, "comment_id": 57552277, "body": "@Revolver_Ocelot I don&#39;t think the volatile will even make a difference. <code>make_unique</code> creates a new object, and as far as I know C++ compilers do <i>not</i> optimize out object creation due to the potential for side effects. They may elide unnecessary constructor calls, but they always ensure at least one is called. Otherwise, code that uses objects for RAII having constructors with side effects could not safely rely on that pattern without the inclusion of memory barriers."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1453316047, "post_id": 34907922, "comment_id": 57552291, "body": "<b>[intro.execution]/8</b> says &quot;<i>Access to volatile objects are evaluated strictly according to the rules of the abstract machine</i>&quot;. I read it as &quot;as-if rule cannot be applied to volatile objects&quot;, so it should help."}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1453316289, "post_id": 34907922, "comment_id": 57552413, "body": "@Revolver_Ocelot, I&#39;m not sure there is any access to a volatile object. And even if there is, non-volatile access from the two blocks may (as far as I understand) still move past the volatile access."}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "reply_to_user": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 0, "creation_date": 1453316312, "post_id": 34907922, "comment_id": 57552428, "body": "@JAB &quot; the potential for side effects.&quot; I think that is changed in C++14, and I think that&#39;s what the quote I make regarding that is about."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 1, "creation_date": 1453316324, "post_id": 34907922, "comment_id": 57552433, "body": "@JAB nor std::array, nor double construction has any side effects, and memory allocation itself is allowed to be optimised away even in presence of side effects. RAII works exactly because there are side effects (and if there are none, you would not be able to check if it is there or was). Proof: <a href=\"http://goo.gl/lCCyBx\" rel=\"nofollow noreferrer\">goo.gl/lCCyBx</a> . As you can see compiler optimised away memory allocation."}, {"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1453316498, "post_id": 34907922, "comment_id": 57552517, "body": "@Revolver_Ocelot Thanks for the note. In that case, volatile would help with allocation preservation but not with reordering."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 0, "creation_date": 1453316616, "post_id": 34907922, "comment_id": 57552595, "body": "@JAB: Why do you need the otherwise useless allocation to occur?"}, {"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1453327812, "post_id": 34907922, "comment_id": 57558812, "body": "@GManNickG You mean for the example provided in the question, which does not involve obvious side effects other than heap allocation? I have no idea, unless the intent is to provide a region of memory for another process to use (which would be pointless if the process allocating it doesn&#39;t do anything with it and the allocation goes away at the end of scope). There might be some architecture where such an allocation may avoid an esoteric bug, but in the general case it is indeed not necessary. If the compiler can determine ctors/dtors have no side effects then I guess it can just remove them."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453551108, "post_id": 34907922, "comment_id": 57657169, "body": "Why do you use <code>std::array</code> as the example? I thought that it doesn&#39;t use <code>new</code>. Or is it allowed to use <code>new</code> internally? Then that class would be pretty useless IMO."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1453551242, "post_id": 34907922, "comment_id": 57657207, "body": "@Revolver_Ocelot I am unsure as to how far the <code>volatile</code> in here goes: <code>new volatile int(10)</code>. The spec says that access to volatiles is the observable side effect. Not the call to the allocation function. So the compiler is still allowed to omit the call to the allocation function if it arranges to allocate the memory elsewhere!? Only judging by that cppreference quote.. I have not looked up the spec about it."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1453316729, "post_id": 34908323, "comment_id": 57552648, "body": "Which of the several questions does your &quot;No.&quot; answer?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1453316815, "post_id": 34908323, "comment_id": 57552696, "body": "@BenVoigt I see two <code>?</code>.  I have now answered them in order."}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 1, "creation_date": 1453317614, "post_id": 34908323, "comment_id": 57553115, "body": "What you mention about <code>throw</code> is interesting, because the exception would be observable outside of that block of code, and can not come before side effects of the the upper code, or after side effects of the lower."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 1, "creation_date": 1453317725, "post_id": 34908323, "comment_id": 57553173, "body": "@JohanLundberg yes, except the compiler is <i>not mandated to throw</i> in that case.  It is <i>allowed</i> to throw, either sometimes, based on resources, the phase of the moon, always, or even never.  All are valid ways to respond to a call to <code>new</code> under the C++ standard.  As an optimization, removing the possibility to throw is legal (by not allocating).  The &quot;always throw&quot; bit was simply an illustration of the extreme latitude the C++ standard gives the implementation."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453551326, "post_id": 34908323, "comment_id": 57657234, "body": "Yakk, does it actually allow to throw std::bad_allloc by itself? I thought the std::bad_alloc is thrown by the allocation function."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453555085, "post_id": 34908323, "comment_id": 57658338, "body": "@joh I do not understand.  Can you clarify that question?  What is &quot;it&quot;?  &quot;<code>new</code>&quot;? And are you saying the C++ standard talks about a distinct &quot;allocation function&quot; step which throws?  Or are you talking about allocators?"}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453572224, "post_id": 34908323, "comment_id": 57664020, "body": "@JohannesSchaub-litb. I picked array for that reason, that it does not do any of it&#39;s own allocation. You can replace it with int for the sake of argument. On the other question: make_unique does call <code>new</code> and it may throw <code>std::bad_alloc</code>. I also do agree that <code>auto x = new volatile int(10)</code> may be removed if x is never used. I think the same applies to any <code>new (possibly volatile) T(args)</code> for T with constructor and destructor without visible side effects. For allocators, side effects does not prevent removal under the <code>as-if</code> according to my cppref quote. Agree?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453572416, "post_id": 34908323, "comment_id": 57664068, "body": "@Yakk you have said &quot;Note that it is a legal C++ compiler to replace all allocations through new with an unconditional throw of an allocation failure&quot;. I.e that the new operator by itself can throw, independent of the allocation function. But if the corresponding allocation function wouldn&#39;t throw, wouldn&#39;t that be a non-conforming implementation?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1453577155, "post_id": 34908323, "comment_id": 57665766, "body": "@joh I was talking about the global default operator new, which is an allocation function <code>[basic.stc.dynamic]3.7.4&#47;1</code>.  I was stating, with less precision, that it could always throw an allocation failure on every request."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1453316800, "last_edit_date": 1453316800, "creation_date": 1453316604, "answer_id": 34908323, "question_id": 34907922, "link": "https://stackoverflow.com/questions/34907922/as-if-rule-and-removal-of-allocation/34908323#34908323", "title": "as-if rule and removal of allocation", "body": "<p>Yes; No.  Not within C++.</p>\n\n<p>The abstract machine of C++ does not talk about system allocation calls at all.  Only the side effects of such a call that impact the behavior of the abstract machine are fixed by C++, and even then the compiler is free to do something else, so long as-if it results in the same observable behavior on the part of the program in the abstract machine.</p>\n\n<p>In the abstract machine, <code>auto mem = std::make_unique&lt;std::array&lt;double, 5000000&gt;&gt;();</code> creates a variable <code>mem</code>.  It, if used, gives you access to a large amount of <code>double</code>s packed into an array.  The abstract machine is free to throw an exception, or provide you with that large amount of <code>double</code>s; either is fine.</p>\n\n<p>Note that it is a legal C++ compiler to replace all allocations through <code>new</code> with an unconditional <code>throw</code> of an allocation failure (or returning <code>nullptr</code> for the no throw versions), but that would be a poor quality of implementation.</p>\n\n<p>In the case where it is allocated, the C++ standard doesn't really say where it comes from.  The compiler is free to use a static array, for example, and make the <code>delete</code> call a no-op (note it may have to prove it catches all ways to call <code>delete</code> on the buffer).</p>\n\n<p>Next, if you have a static array, if nobody reads or writes to it (and the construction cannot be observed), the compiler is free to eliminate it.</p>\n\n<hr>\n\n<p>That being said, much of the above relies on the compiler knowing what is going on.</p>\n\n<p>So an approach is to make it impossible for the compiler to know.  Have your code load a DLL, then pass a pointer to the <code>unique_ptr</code> to that DLL at the points where you want its state to be known.</p>\n\n<p>Because the compiler cannot optimize over run-time DLL calls, the state of the variable has to basically be what you'd expect it to be.</p>\n\n<p>Sadly, there is no standard way to dynamically load code like that in C++, so you'll have to rely upon your current system.</p>\n\n<p>Said DLL can be separately written to be a noop; or, even, you can examine some external state, and conditionally load and pass the data to the DLL based on the external state.  So long as the compiler cannot prove said external state will occur, it cannot optimize around the calls <em>not</em> being made.  Then, never set that external state.</p>\n\n<p>Declare the variable at the top of the block.  Pass a pointer to it to the fake-external-DLL while uninitialized.  Repeat just before initializing it, then after.  Then finally, do it at the end of the block before destroying it, <code>.reset()</code> it, then do it again.</p>\n"}], "owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "accepted_answer_id": 34908323, "answer_count": 1, "score": 9, "last_activity_date": 1468602171, "creation_date": 1453315207, "last_edit_date": 1468602171, "question_id": 34907922, "link": "https://stackoverflow.com/questions/34907922/as-if-rule-and-removal-of-allocation", "title": "as-if rule and removal of allocation", "body": "<p>The \"<a href=\"http://[1]%20[as_if%20rule][1]http://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow\">as-if rule</a>\" gives the compiler the right to optimize out or reorder expressions that would not make a difference to the output and correctness of a program under certain rules, such as; </p>\n\n<blockquote>\n  <p>\u00a71.9.5</p>\n  \n  <p>A conforming implementation executing a well-formed program shall\n  produce the same observable behavior as one of the possible executions\n  of the corresponding instance of the abstract machine with the same\n  program and the same input.</p>\n</blockquote>\n\n<p>The cppreference url I linked above specifically mentions special rules for the values of volatile objects, as well as for \"new expressions\", under C++14:</p>\n\n<blockquote>\n  <p>New-expression has another exception from the as-if rule: the compiler\n  may remove calls to the replaceable allocation functions even if a\n  user-defined replacement is provided and has observable side-effects.</p>\n</blockquote>\n\n<p>I assume \"replaceable\" here is what is talked about for example in </p>\n\n<blockquote>\n  <p>\u00a718.6.1.1.2</p>\n  \n  <p>Replaceable: a C++ program may define a function with this function\n  signature that displaces the default version defined by the C++\n  standard library.</p>\n</blockquote>\n\n<p>Is it correct that <code>mem</code> below can be removed or reordered under the as-if rule?  </p>\n\n<pre><code>  {\n  ... some conformant code // upper block of code\n\n  auto mem = std::make_unique&lt;std::array&lt;double, 5000000&gt;&gt;();\n\n  ... more conformant code, not using mem // lower block of code\n  }\n</code></pre>\n\n<p>Is there a way to ensure it's not removed, and stays between the upper and lower blocks of code? A well placed volatile (either/or volatile std::array or left of auto) comes to mind, but as there is no reading of <code>mem</code>, I think even that would not help under the <em>as-if</em> rule.</p>\n\n<p>Side note; I've not been able to get visual studio 2015 to optimize out <code>mem</code> and the allocation at all.</p>\n\n<p>Clarification: The way to <em>observe</em> this would be that the allocation call to the OS comes between any i/o from the two blocks. The point of this is for test cases and/or trying to get objects to be allocated at new locations.</p>\n"}, {"tags": ["c++", "winapi", "opengl", "glew", "msaa"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1453352544, "post_id": 34907832, "comment_id": 57566400, "body": "Can you try a <code>glGetIntegerv(GL_SAMPLES, ...)</code> to double check that you actually got a multisampled framebuffer? Also, you could try a more commonly supported value like 4 for the number of samples. The value for <code>WGL_COLOR_BITS_ARB</code> should be 24 (it only counts the RGB bits), but that&#39;s probably not doing any harm."}, {"owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1453389609, "post_id": 34907832, "comment_id": 57588437, "body": "It returns an integer with a value of 0."}, {"owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1453389659, "post_id": 34907832, "comment_id": 57588484, "body": "I&#39;m sure I don&#39;t create the context ok... but I can&#39;t find an example for creating an context with wgl attributes."}, {"owner": {"reputation": 401, "user_id": 4836832, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152794758707647/picture?type=large", "display_name": "Stefan Agartsson", "link": "https://stackoverflow.com/users/4836832/stefan-agartsson"}, "edited": false, "score": 2, "creation_date": 1527775261, "post_id": 34907832, "comment_id": 88262291, "body": "I know this is an old question but in Windows you can only set the pixelformat once. You have to delete the entire window and create it again after you get a valid nPixelFormat2."}, {"owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "edited": false, "score": 0, "creation_date": 1527884016, "post_id": 34907832, "comment_id": 88311737, "body": "You are right. You can&#39;t get a valid pixel format for multisampling without GLEW, and you can&#39;t get GLEW to initialize without having an active opengl context. So you need to firstly create a temporary window, initialize glew in its opengl context, get the pixelformat for multisample ( and other options, if you want them ) and then destroy this window and create another one with a new opengl context based on this pixel format. I know this is old but maybe someone will see this and fix the problems."}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "edited": false, "score": 0, "creation_date": 1453318928, "post_id": 34908120, "comment_id": 57553872, "body": "Thanks for answering so fast... I added glEnable(GL_MULTISAMPLE) after the last wglMakeCurrent and nothing changed..."}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1453338294, "post_id": 34908120, "comment_id": 57562618, "body": "<code>GL_MULTISAMPLE</code> is enabled by default. So unless it was explicitly disabled earlier, calling <code>glEnable(GL_MULTISAMPLE)</code> is a no-op."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1453315907, "creation_date": 1453315907, "answer_id": 34908120, "question_id": 34907832, "link": "https://stackoverflow.com/questions/34907832/activating-multisample-on-opengl-win32/34908120#34908120", "title": "Activating Multisample on OpenGL Win32", "body": "<p>I see the part where you asked for 16 samples. But I don't see the part where you <em>enabled</em> <code>GL_MULTISAMPLE</code>. Without which, rendering to a multisampled buffer will act no differently from rendering to a single sampled one.</p>\n\n<p>Also, I would advise you to use a <a href=\"https://www.opengl.org/wiki/Framebuffer_Object\" rel=\"nofollow\">framebuffer object</a> for your multisample render target instead of the default framebuffer. Yes, it's nice that the default framebuffer can be resized by the window. But by using a framebuffer object, you can control when <a href=\"https://www.opengl.org/wiki/Framebuffer#Multisampling_Considerations\" rel=\"nofollow\">multisampling is resolved</a>.</p>\n\n<p>Also, it allows you to keep the driver's pesky control panel options from messing with your sample counts ;)</p>\n"}, {"comments": [{"owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "edited": false, "score": 0, "creation_date": 1591731570, "post_id": 61977046, "comment_id": 110166489, "body": "Yes, this is the answer that made it work years ago. I created a dummy window, as you said, and everything worked as expected. Thanks for this answer. It may save a lot of time for others having this problem."}], "tags": [], "owner": {"reputation": 16, "user_id": 10903823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z7ttUA41W3A/AAAAAAAAAAI/AAAAAAAAAB4/Gv79-h3rLCc/photo.jpg?sz=128", "display_name": "vlad alex", "link": "https://stackoverflow.com/users/10903823/vlad-alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1590261736, "last_edit_date": 1590261736, "creation_date": 1590259743, "answer_id": 61977046, "question_id": 34907832, "link": "https://stackoverflow.com/questions/34907832/activating-multisample-on-opengl-win32/61977046#61977046", "title": "Activating Multisample on OpenGL Win32", "body": "<p>I have found the problem. Basically you can't call SetPixelFormat on the same window as this article mentions: <a href=\"https://www.khronos.org/opengl/wiki/Creating_an_OpenGL_Context_(WGL)#Proper_Context_Creation\" rel=\"nofollow noreferrer\">https://www.khronos.org/opengl/wiki/Creating_an_OpenGL_Context_(WGL)#Proper_Context_Creation</a></p>\n\n<p>The solution is basically to create a dummy window(not visible) enable opengl and delete it. I have copied the code from here and it worked for me <a href=\"https://stackoverflow.com/questions/46655372/create-modern-opengl-context-using-wgl\">Create Modern OpenGL context using WGL?</a></p>\n"}], "owner": {"reputation": 164, "user_id": 2254107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12942b7670246dfde7f3ab82535addd5?s=128&d=identicon&r=PG", "display_name": "dei.andrei98", "link": "https://stackoverflow.com/users/2254107/dei-andrei98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2248, "favorite_count": 0, "accepted_answer_id": 61977046, "answer_count": 2, "score": 0, "last_activity_date": 1590261736, "creation_date": 1453314846, "question_id": 34907832, "link": "https://stackoverflow.com/questions/34907832/activating-multisample-on-opengl-win32", "title": "Activating Multisample on OpenGL Win32", "body": "<p>I want to set up MSAA on an OpenGL context in win32 API. Everything is working fine, but the MSAA just doesn't want to activate. Here is my code for building the context:</p>\n\n<pre><code>void Display::CreateGLContext(HWND hWND) {\nmHDC = GetDC(hWND);  //get current windows device context\n\nint nPixelFormat;\n\nPIXELFORMATDESCRIPTOR pfd; // Create a new PIXELFORMATDESCRIPTOR (PFD)  \nmemset(&amp;pfd, 0, sizeof(PIXELFORMATDESCRIPTOR)); // Clear our  PFD  \npfd.nSize = sizeof(PIXELFORMATDESCRIPTOR); // Set the size of the PFD to the size of the class  \npfd.dwFlags = PFD_DOUBLEBUFFER | PFD_SUPPORT_OPENGL | PFD_DRAW_TO_WINDOW; // Enable double buffering, opengl support and drawing to a window  \npfd.iPixelType = PFD_TYPE_RGBA; // Set our application to use RGBA pixels  \npfd.cColorBits = 32; // Give us 32 bits of color information (the higher, the more colors)  \npfd.cDepthBits = 16; // Give us 32 bits of depth information (the higher, the more depth levels)  \npfd.iLayerType = PFD_MAIN_PLANE; // Set the layer of the PFD\n\n/*      Choose best matching format*/\nnPixelFormat = ChoosePixelFormat(mHDC, &amp;pfd);\n\n/*      Set the pixel format to the device context*/\nSetPixelFormat(mHDC, nPixelFormat, &amp;pfd);\n\nHGLRC tempRC = wglCreateContext(mHDC);\nwglMakeCurrent(mHDC, tempRC);\n\nif (glewInit() != GLEW_OK) {\n    MessageBox(mHWND, \"Eroare\", \"glew\", MB_OK);\n}\nint nPixelFormat2;\n\nBOOL bValidPixFormat;\nUINT nMaxFormats = 1;\nUINT nNumFormats;\nfloat pfAttribFList[] = { 0, 0 };\nint piAttribIList[] = { \n    WGL_DRAW_TO_WINDOW_ARB, GL_TRUE,\n    WGL_SUPPORT_OPENGL_ARB, GL_TRUE,\n    WGL_COLOR_BITS_ARB, 32,\n    WGL_RED_BITS_ARB, 8,\n    WGL_GREEN_BITS_ARB, 8,\n    WGL_BLUE_BITS_ARB, 8,\n    WGL_ALPHA_BITS_ARB, 8,\n    WGL_DEPTH_BITS_ARB, 16,\n    WGL_STENCIL_BITS_ARB, 0,\n    WGL_DOUBLE_BUFFER_ARB, GL_TRUE,\n    WGL_PIXEL_TYPE_ARB, WGL_TYPE_RGBA_ARB,\n    WGL_SAMPLE_BUFFERS_ARB, GL_TRUE,\n    WGL_SAMPLES_ARB, 16,\n    0, 0 };\n\nbValidPixFormat = wglChoosePixelFormatARB(mHDC, piAttribIList, pfAttribFList, nMaxFormats, &amp;nPixelFormat2, &amp;nNumFormats);\n\nif (!bValidPixFormat)\n{\n    MessageBox(NULL, \"Invalid Pixel Format\", \"Error! (SetupWGLPixelFormat)\", MB_OK);\n}\n\nSetPixelFormat(mHDC, nPixelFormat2, &amp;pfd);\n\n\nmGLRenderContext = wglCreateContext(mHDC);\n\nwglMakeCurrent(mHDC, NULL);\nwglDeleteContext(tempRC);\nwglMakeCurrent(mHDC, mGLRenderContext);\n\nglEnable(GL_DEPTH_TEST);\nglEnable(GL_CULL_FACE);\nglCullFace(GL_BACK);\n}\n</code></pre>\n\n<p>The code works fine, it is called after creating hWnd in the main class, not in WndProc on the WM_CREATE case... What can be wrong?</p>\n"}, {"tags": ["c++", "global-variables", "stdmap"], "comments": [{"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 1, "creation_date": 1453315049, "post_id": 34907824, "comment_id": 57551724, "body": "Duplicate : <a href=\"http://stackoverflow.com/questions/19929681/c-global-variable-declaration\" title=\"c global variable declaration\">stackoverflow.com/questions/19929681/&hellip;</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 1, "creation_date": 1453320698, "post_id": 34907824, "comment_id": 57554820, "body": "@Angelus How is that a dupe? OP has declared it <code>extern</code> in the header and provided one definition."}], "owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4090, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1453314815, "creation_date": 1453314815, "question_id": 34907824, "link": "https://stackoverflow.com/questions/34907824/global-stdmap-variable-in-c", "title": "global std::map variable in c++", "body": "<p>I need to use a std::map variable across several files. Most of the example says, I need to declare it as extern on .h file and initialize on any one of the .cpp file.  But I don't see updated value on the std::map variable.</p>\n\n<p>Example: \nConfig.h</p>\n\n<pre><code>struct Action_Element {\n    std::string algo_func_name;\n    uint32_t opEventUid;\n};\n\ntypedef std::map&lt;int, Action_Element&gt; EnActionList;\ntypedef std::map&lt;int, Action_Element&gt; ExActionList;\ntypedef std::map&lt;size_t, string&gt; CondExpStrList;\n\nstruct Transition_Elements {\n    uint32_t              DesStateUid;\n    uint32_t              TransCounterID;\n    ExActionList          ExitActionList;\n};\n\ntypedef std::map&lt;uint32_t, Transition_Elements&gt; TransitionList;\n\nstruct State_Element {\n    bool              isTransitionCondAvailable;\n    EnActionList      EntryActionList;\n    TransitionList    TransitionList;\n};\n\ntypedef std::map&lt;uint32_t , State_Element&gt; StateList;\nextern StateList global_stateList;     // global state list\n</code></pre>\n\n<p>file1.cpp</p>\n\n<pre><code>#include \"Config.h\"\n\nfile1::file1()\n{\n   State_Element  file1StateElement;\n   global_statList.insert(make_pair(1,file1StateElement);\n}\n</code></pre>\n\n<p>file3.cpp</p>\n\n<pre><code>#include \"Config.h\"\n\nfile3::file3()\n{\n   State_Element  file3StateElement;\n   global_statList.insert(make_pair(3,file3StateElement);\n}\n</code></pre>\n\n<p>file2.cpp</p>\n\n<pre><code>#include \"Config.h\"\n\nfile2::file2()\n{\n   State_Element  file2StateElement;\n   global_statList.insert(make_pair(2,file2StateElement);\n}\n</code></pre>\n\n<p>Let us not consider whats inside each State_Element and how it is initialized.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Config.h\"\nStateList global_stateList;\n\nint main(void) {\n\nglobal_stateList.clear();\nfile1 *f1 = new file1();\nfile2 *f2 = new file2();\nfile3 *f3 = new file3();\n\nStateList::const_iter iter = global_stateList.begin();\nif(iter != global_stateList.end())\n{\n   printf(\"\\n size of globalstateList : %d\", global_stateList.size());\n}\n\nwhile(1);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "exception", "try-catch", "raii", "noexcept"], "comments": [{"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 0, "creation_date": 1453315521, "post_id": 34907643, "comment_id": 57552023, "body": "Huh, that sounds like it does involve exceptions (or at least that it <i>can</i>) \u2013 but I take it you are referring to what this question explains: <a href=\"http://stackoverflow.com/q/161177/298171\">stackoverflow.com/q/161177/298171</a> \u2026 yes?"}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 0, "creation_date": 1453315551, "post_id": 34907643, "comment_id": 57552033, "body": "Oops, the comment I was replying to has vanished!"}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 5, "last_activity_date": 1453314413, "creation_date": 1453314413, "answer_id": 34907695, "question_id": 34907643, "link": "https://stackoverflow.com/questions/34907643/are-c-try-catch-blocks-the-same-as-other-blocks-regarding-raii/34907695#34907695", "title": "Are C++ `try`/`catch` blocks the same as other blocks, regarding RAII?", "body": "<p>Yes, it will do exactly what you want: First release the RAII resource and then process the exception block.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1453317121, "last_edit_date": 1495540344, "creation_date": 1453314499, "answer_id": 34907721, "question_id": 34907643, "link": "https://stackoverflow.com/questions/34907643/are-c-try-catch-blocks-the-same-as-other-blocks-regarding-raii/34907721#34907721", "title": "Are C++ `try`/`catch` blocks the same as other blocks, regarding RAII?", "body": "<blockquote>\n  <p><em>\"\u2026 will the RAII instance work the same way if I do this: ...\"</em></p>\n</blockquote>\n\n<p>Sure they will. The <em>RAII instance</em> will go out of scope and the destructors are called before the <code>catch</code>, if an exception is thrown.</p>\n\n<p>Also this will work for any upper levels, that are calling your function if you just <code>throw</code> and there aren't any <code>try</code>/<code>catch</code> blocks. That's called <a href=\"https://stackoverflow.com/questions/2331316/what-is-stack-unwinding\"><em>stack unwinding</em></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": false, "score": 2, "last_activity_date": 1453316295, "creation_date": 1453316295, "answer_id": 34908242, "question_id": 34907643, "link": "https://stackoverflow.com/questions/34907643/are-c-try-catch-blocks-the-same-as-other-blocks-regarding-raii/34908242#34908242", "title": "Are C++ `try`/`catch` blocks the same as other blocks, regarding RAII?", "body": "<p>Yes, this is specified in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4567.pdf\" rel=\"nofollow\"><strong>Standard</strong></a>:</p>\n\n<blockquote>\n  <p><strong>15.2 Constructors and destructors [except.ctor]</strong></p>\n  \n  <p>2 The destructor is invoked for each automatic object of class type\n  constructed since the <code>try</code> block was entered. The automatic objects\n  are destroyed in the reverse order of the completion of their\n  construction.</p>\n</blockquote>\n"}], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 34907721, "answer_count": 3, "score": 5, "last_activity_date": 1453317121, "creation_date": 1453314210, "question_id": 34907643, "link": "https://stackoverflow.com/questions/34907643/are-c-try-catch-blocks-the-same-as-other-blocks-regarding-raii", "title": "Are C++ `try`/`catch` blocks the same as other blocks, regarding RAII?", "body": "<p>OK so if I am using a RAII idiom to manage some context attribute*, will it work as I expect if I use it nakedly in at the start of a <code>try</code> block? </p>\n\n<p>In other words, if I have this:</p>\n\n<pre><code>struct raii {\n    raii() {\n        std::cout &lt;&lt; \"Scope init\"\n                  &lt;&lt; std::endl; }\n    ~raii() {\n        std::cout &lt;&lt; \"Scope exit\"\n                  &lt;&lt; std::endl; }\n};\n</code></pre>\n\n<p>\u2026 and I am successfully using it like this:</p>\n\n<pre><code>{\n    raii do_the_raii_thing;\n    stuff_expecting_raii_context();\n    /* \u2026 */\n}\n</code></pre>\n\n<p>\u2026 will the RAII instance work the same way if I do this:</p>\n\n<pre><code>try {\n    raii do_the_raii_thing;\n    stuff_expecting_raii_context_that_might_throw();\n    /* \u2026 */\n} catch (std::exception const&amp;) {\n    /* \u2026 */\n}\n</code></pre>\n\n<p>This is probably a dumb question, but I want to check my own sanity on this \u2013 I am fuzzy on the subtleties of <code>noexcept</code> guarantees, and other exception-related minutiae \u2013 so pardon my na\u00edvet\u00e9</p>\n\n<hr>\n\n<p>[*] for those curious, it\u2019s the Python C-API\u2019s nefarious GIL (global interpreter lock) that I am managing with RAII, in my specific case</p>\n"}, {"tags": ["c++", "mfc", "cwnd"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "edited": false, "score": 0, "creation_date": 1453314673, "post_id": 34907638, "comment_id": 57551524, "body": "You mean, upon resizing I have to continuously calculate the parent client rect and set the position of the child?  How come when the dialog is initially created, the child resizes fine?  Can you explain why it jumps back to it&#39;s original position only after I call <code>SetWindowPos()</code> on the child?"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "edited": false, "score": 1, "creation_date": 1453315328, "post_id": 34907638, "comment_id": 57551886, "body": "@Busch -  \t 1) OnSize() has the parameters cx, cy. Calling <code>SetWindowPos()</code> or <code>MoveWindow()</code> should do. 2) The original (static) position is saved in the resource. So when the parent is resized, all the controls are drawn/placed on that original position."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "edited": false, "score": 1, "creation_date": 1453315535, "post_id": 34907638, "comment_id": 57552028, "body": "@Busch - I added a small example."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 1, "last_activity_date": 1453315482, "last_edit_date": 1453315482, "creation_date": 1453314179, "answer_id": 34907638, "question_id": 34907532, "link": "https://stackoverflow.com/questions/34907532/mfc-how-to-keep-child-cwnd-dialog-from-jumping-upon-resizing-the-parent-window/34907638#34907638", "title": "MFC: how to keep child CWnd dialog from jumping upon resizing the parent window?", "body": "<blockquote>\n  <p>Upon clicking an edit button, the child CWnd is resized to take up a\n  larger portion of the dialog.</p>\n</blockquote>\n\n<p>You have to handle that same resize in your <code>OnSize()</code> (<code>ON_WM_SIZE()</code>) message handler (using some kind of BOOL member to keep track of the child window's status).</p>\n\n<p><code>OnSize()</code> is called repeatedly while resizing the dialog.</p>\n\n<p>Example:</p>\n\n<pre><code>// .h\nBOOL m_bIsEditMode;\n\n// .cpp\n// keep track of m_bIsEditMode\n\nvoid CMyDlg::OnSize(UINT nType, int cx, int cy)\n{\n    CDialog::OnSize(nType, cx, cy);\n\n    if (m_bIsEditMode) {\n\n        //enlarge the editor to take up the full dialog\n        m_wHtmlEditor.MoveWindow (0, 0, cx, cy);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 34907638, "answer_count": 1, "score": 1, "last_activity_date": 1453315482, "creation_date": 1453313822, "last_edit_date": 1453314424, "question_id": 34907532, "link": "https://stackoverflow.com/questions/34907532/mfc-how-to-keep-child-cwnd-dialog-from-jumping-upon-resizing-the-parent-window", "title": "MFC: how to keep child CWnd dialog from jumping upon resizing the parent window?", "body": "<p>I'm writing an <code>MFC dialog</code> with multiple controls. I have currently have a <code>CWnd</code> that is placed on the right half of the <code>dialog</code>. Upon clicking an edit button, the child <code>CWnd</code> is resized to take up a larger portion of the dialog.</p>\n\n<p>However, now when I try to resize the window, the child <code>CWnd</code> jumps back to where it was originally. I cannot seem to figure out how to keep it in it's new position when resizing.  </p>\n\n<p>Relevant code:</p>\n\n<pre><code>OnInit() {\n    //the grouper rectangle\n    CRect rectHTMLGrouper;\n    m_grpHTMLbox.GetWindowRect(&amp;rectHTMLGrouper);\n    ScreenToClient(&amp;rectHTMLGrouper);\n\n    //the new rectangle to use for positioning\n    CRect rectHtml;\n    rectHtml.left = rectHTMLGrouper.left + PREVIEW_EDITOR_LEFT;\n    rectHtml.right = rectHTMLGrouper.right - PREVIEW_EDITOR_RIGHT;\n    rectHtml.top = rectHTMLGrouper.top + PREVIEW_EDITOR_TOP;\n    rectHtml.bottom = rectHTMLGrouper.bottom - PREVIEW_EDITOR_BOTTOM;    \n\n    //this inits my editor and sets the position \n    m_wHtmlEditor.CreateHtmlEditor(rectHTMLGrouper, this, WS_CHILD | WS_VISIBLE | WS_CLIPCHILDREN);\n\n    //CodeJock - XTREMEToolkit Call for SetResize Logic\n    SetResize(m_wHtmlEditor.GetDlgCtrlID(), LEFT_PANE_RESIZE, 0, 1, 1);\n    m_wHtmlEditor.SetWindowPos(&amp;CWnd::wndTop, 0, 0, 0, 0, SWP_NOSIZE | SWP_NOACTIVATE | SWP_NOMOVE);\n}\n\n\nOnEditMode() {\n\n    //enlarge the editor to take up the full dialog\n    CRect parentClientRect;\n    m_wHtmlEditor.GetParent()-&gt;GetClientRect(&amp;parentClientRect);\n    m_wHtmlEditor.SetWindowPos(&amp;CWnd::wndTop, parentClientRect.left + edgePadding, parentClientRect.top + editorTopPadding, parentClientRect.right - (edgePadding * 2), parentClientRect.bottom - bottomPadding, SWP_NOOWNERZORDER);\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "rapidjson"], "comments": [{"owner": {"reputation": 1043, "user_id": 295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b112134b93b5e3265d31423f0255204?s=128&d=identicon&r=PG", "display_name": "Adam Lamers", "link": "https://stackoverflow.com/users/295187/adam-lamers"}, "edited": false, "score": 2, "creation_date": 1453314959, "post_id": 34907498, "comment_id": 57551669, "body": "I don&#39;t have the environment to answer your question right now, but having used rapidjson and <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">github.com/nlohmann/json</a>, I&#39;d seriously recommend giving nlohmann&#39;s json library a look. It&#39;s so much easier."}, {"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "reply_to_user": {"reputation": 1043, "user_id": 295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b112134b93b5e3265d31423f0255204?s=128&d=identicon&r=PG", "display_name": "Adam Lamers", "link": "https://stackoverflow.com/users/295187/adam-lamers"}, "edited": false, "score": 0, "creation_date": 1453315791, "post_id": 34907498, "comment_id": 57552155, "body": "@AdamLamers. Had almost no problems using nlohmann/json either. Only those errors I introduced myself."}, {"owner": {"reputation": 4462, "user_id": 1018640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d63b0bd537a54f53eb85c1471418ad?s=128&d=identicon&r=PG", "display_name": "Milo Yip", "link": "https://stackoverflow.com/users/1018640/milo-yip"}, "reply_to_user": {"reputation": 1043, "user_id": 295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b112134b93b5e3265d31423f0255204?s=128&d=identicon&r=PG", "display_name": "Adam Lamers", "link": "https://stackoverflow.com/users/295187/adam-lamers"}, "edited": false, "score": 0, "creation_date": 1453687382, "post_id": 34907498, "comment_id": 57697066, "body": "@AdamLamers This issue is not a bug or issue of RapidJSON. Using Nlohmann&#39;s cannot help you to create DOM by giving an arbitrary object. As C++ has no reflection (yet), serialization of object needs sending the members of object one by one."}], "owner": {"reputation": 2861, "user_id": 596841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9f4e5364ebc28bbbb6744e50e08e1447?s=128&d=identicon&r=PG", "display_name": "pookie", "link": "https://stackoverflow.com/users/596841/pookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 635, "favorite_count": 0, "closed_date": 1453636562, "answer_count": 0, "score": 1, "last_activity_date": 1453315296, "creation_date": 1453313722, "last_edit_date": 1453315296, "question_id": 34907498, "link": "https://stackoverflow.com/questions/34907498/c-rapidjson-object-to-json-string", "closed_reason": "Duplicate", "title": "C++, RapidJSON: object to JSON string", "body": "<p>Forgive me if this is simple, but I am rather new to C++ and can't make much sense of the documentation for RapidJSON.</p>\n\n<p>I have an object that looks like this:</p>\n\n<pre><code>class DataPacket\n{\npublic:\n    DataPacket();\n    ~DataPacket();\n\n    string StopWatchId;\n    long LengthOfTime;\n    const uint8 * SomeBytes;\n};\n</code></pre>\n\n<p>To construct my JSON I do the following:</p>\n\n<pre><code>Document document;\ndocument.SetObject();\nrapidjson::Document::AllocatorType&amp; allocator = document.GetAllocator();\n\nDataPacket datapacket = DataPacket();\ndatapacket.SomeBytes = data;\ndatapacket.StopWatchId = \"SomeId\";\ndatapacket.LengthOfTime = 30;\n\nValue object(rapidjson::kObjectType);\nobject.AddMember(\"DataPacket\", datapacket, allocator);\ndocument.AddMember(\"root\", object, allocator);\n\nStringBuffer buffer;\nWriter&lt;StringBuffer&gt; writer(buffer);\n\ndocument.Accept(writer);\n</code></pre>\n\n<p>Then, to get the JSON string, I call <code>buffer.GetString()</code>.</p>\n\n<p>This does not compile because it cannot convert from <code>DataPacket</code> to <code>rapidjson::Type</code>:</p>\n\n<pre><code>object.AddMember(\"DataPacket\", datapacket, allocator);\n</code></pre>\n\n<p>What am I doing wrong and how can I convert my <code>dataPacket</code> to a JSON string with RapidJSON?</p>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 2942, "user_id": 1849221, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8283706cbadfeff2f9fbf985cbe904a?s=128&d=identicon&r=PG", "display_name": "Ilio Catallo", "link": "https://stackoverflow.com/users/1849221/ilio-catallo"}, "edited": false, "score": 2, "creation_date": 1453313675, "post_id": 34907443, "comment_id": 57550988, "body": "Lists cannot be accessed by index. If you want random access, use vectors."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1453313956, "post_id": 34907443, "comment_id": 57551121, "body": "Do not confuse the term <i>list</i> when comparing C++ to Python.   A <code>std::list</code> is a doubly linked list in C++. meaning there is no random access to an element in the list."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1453314288, "post_id": 34907443, "comment_id": 57551294, "body": "Adding to @PaulMcKenzie, the most direct equivalent to a Python <code>list</code> is <code>std::vector</code> (they&#39;re both implemented as a single, dynamically sized array that performs overallocation to make insertion/removal at the end of the sequence amortized <code>O(1)</code>)."}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "edited": false, "score": 0, "creation_date": 1453318161, "post_id": 34907443, "comment_id": 57553417, "body": "Related: <a href=\"http://stackoverflow.com/q/17528657\">Python list equivalent in C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 272, "user_id": 5800501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099a429cca6f7bd71c020076179b9719?s=128&d=identicon&r=PG&f=1", "display_name": "Aydin Gerek", "link": "https://stackoverflow.com/users/5800501/aydin-gerek"}, "is_accepted": false, "score": 0, "last_activity_date": 1453313669, "creation_date": 1453313669, "answer_id": 34907483, "question_id": 34907443, "link": "https://stackoverflow.com/questions/34907443/how-do-i-effectively-access-list-information-in-c/34907483#34907483", "title": "How do I effectively access list information in C++?", "body": "<p>You can use vectors instead of lists.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1453314074, "post_id": 34907501, "comment_id": 57551176, "body": "Or use <code>std::deque</code> if you need (effectively) constant time insertion/removal of elements at beginning and end (vs. vector&#39;s <code>O(n)</code> cost at the beginning, and amortized <code>O(1)</code> at the end, but with intermittent high cost for reallocation). <code>deque</code> still provides <code>O(1)</code> random access too, (the price paid is higher memory overhead and fragmentation thanks to being built from a bunch of small fixed size arrays, rather than <code>vector</code>&#39;s single dynamically sized array). The only thing <code>deque</code> loses you is the ability to efficiently add and remove elements in the middle of the sequence while iterating."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453314264, "post_id": 34907501, "comment_id": 57551277, "body": "@ShadowRanger <code>O</code> complexities are fine in theory, and if you&#39;ve profiled your code to have a bottleneck, but <code>vector</code> should be the default sequential-access container. Because of caching, pre-fetching etc. Moder CPUs love coherent memory access."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1453314342, "post_id": 34907501, "comment_id": 57551332, "body": "I wouldn&#39;t consider <code>std::deque</code> unless I had some specific needs, like large number of inserts at the front. Even though it is constant time inserts, the constant is larger than for a vector. And the <code>O(1)</code> random access is more like <code>&quot;O(2)&quot;</code>, if we had such an animal."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1453314506, "post_id": 34907501, "comment_id": 57551436, "body": "@Angew: Agreed. As I said, use <code>std::deque</code> if you need <code>std:deque</code> features that <code>std::vector</code> doesn&#39;t provide; <code>std::vector</code> should be the &quot;go to STL sequence&quot;. <code>std::deque</code> is useful when you need it, but it does have slightly higher overhead than <code>std::vector</code> for just about everything (it doesn&#39;t show up in the big-O times because the overhead is typically equivalent to a fixed multiplier, not related to the size of the sequence).  I should have clarified that the &quot;only&quot; loss in <code>std::deque</code> was relative to <code>std::list</code>; it has lots of small losses compared to <code>std::vector</code>."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": true, "score": 12, "last_activity_date": 1453315075, "last_edit_date": 1453315075, "creation_date": 1453313730, "answer_id": 34907501, "question_id": 34907443, "link": "https://stackoverflow.com/questions/34907443/how-do-i-effectively-access-list-information-in-c/34907501#34907501", "title": "How do I effectively access list information in C++?", "body": "<p>Don't use a <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow\"><code>std::list</code></a>. It implements a <em>doubly linked list</em> which does not provide a subscript operator because random access for linked lists cannot be implemented with constant complexity.</p>\n\n<p>Instead, use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a> which implements a <em>dynamically growing array</em> with subscript operator defined.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/364696/shadowranger\">@ShadowRanger</a> has commented, you might also find <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow\"><code>std::deque</code></a> useful. It supports constant time random access like <code>std::vector</code> but in addition has the ability to release storage automatically when you remove elements.  (For <code>std::vector</code>, you have to do it explicitly by calling <code>shrink_to_fit</code> and that can easily go the wrong direction.) It is also superior when you need to append elements both at the beginning and the end. But as I understand, you don't want to change the number of elements in the container anyway.</p>\n\n<p>Also note another difference between Python and C++.  In Python, if you write</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>my_things = [1, 2, 3, 4]\nyour_things = [5, 6, 7]\nour_things = [my_things, your_things]\n</code></pre>\n\n<p>then <code>your_things</code> and <code>our_things[1]</code> refer to the same list. This is because objects in Python are referred to by-reference. In C++, on the other hand, containers have value semantics. That is, if you write</p>\n\n<pre><code>std::vector&lt;int&gt; my_things = {1, 2, 3, 4};\nstd::vector&lt;int&gt; your_things = {5, 6, 7};\nstd::vector&lt;std::vector&lt;int&gt;&gt; our_things = {my_things, your_things};\n</code></pre>\n\n<p><code>our_things</code> will contain <em>copies</em> of <code>my_things</code> and <code>your_things</code> and changing either will not affect the other. If this is not what you want, you could instead define the nested list at once.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; our_things = {\n  {1, 2, 3, 4},  // my things\n  {5, 6, 7},     // your things\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2040, "user_id": 4211031, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eee7243c137ed0a077e2aafa9343fac?s=128&d=identicon&r=PG", "display_name": "GutiMac", "link": "https://stackoverflow.com/users/4211031/gutimac"}, "is_accepted": false, "score": 0, "last_activity_date": 1453313876, "creation_date": 1453313876, "answer_id": 34907548, "question_id": 34907443, "link": "https://stackoverflow.com/questions/34907443/how-do-i-effectively-access-list-information-in-c/34907548#34907548", "title": "How do I effectively access list information in C++?", "body": "<p>In C++, std::list does not support random access lookup via operator []. If you are going to continue to use a list, you should look at the  std::advance function.</p>\n\n<pre><code>list&lt;string&gt;::iterator itr = whichList.begin();\nstd::advance(itr, i);\nif (itr-&gt;empty())\n{\n /* ... assuming that you're testing for an empty string */\n}\n</code></pre>\n\n<p>If possible, you might want to consider other standard containers, such as std::vector or std::deque, both of which provide random access lookup via operator [].</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1453369769, "post_id": 34907649, "comment_id": 57574429, "body": "Not \u201csimilar\u201d: \u201cidentical\u201d!"}], "tags": [], "owner": {"reputation": 855, "user_id": 1272072, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df162390316adb1dc3d5f1eb2d14079f?s=128&d=identicon&r=PG", "display_name": "woodtluk", "link": "https://stackoverflow.com/users/1272072/woodtluk"}, "is_accepted": false, "score": 0, "last_activity_date": 1453314226, "creation_date": 1453314226, "answer_id": 34907649, "question_id": 34907443, "link": "https://stackoverflow.com/questions/34907443/how-do-i-effectively-access-list-information-in-c/34907649#34907649", "title": "How do I effectively access list information in C++?", "body": "<p>If you don't need to change the size of the list you could use plain array.</p>\n\n<p>That might even be the fastest option. But <code>std::vector</code> is similar in performance as long as you don't change size.</p>\n"}], "owner": {"reputation": 23, "user_id": 5817275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94b021076c97706f951970808ea0366c?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5817275/shadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 34907501, "answer_count": 4, "score": 2, "last_activity_date": 1453315075, "creation_date": 1453313540, "last_edit_date": 1453314771, "question_id": 34907443, "link": "https://stackoverflow.com/questions/34907443/how-do-i-effectively-access-list-information-in-c", "title": "How do I effectively access list information in C++?", "body": "<p>I originally made this game in Python and then for a school project converted it over to C++.</p>\n\n<p>The problem is that C++'s <code>std::list</code> does not allow me to access items like Python's <code>list</code> does (<code>list[1]</code>) and more so, accessing items of lists that are inside of a list (<code>list[2][5]</code>). I have not been able to find an effective way to be able to do this or an alternative to lists that will work.</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453313552, "post_id": 34907397, "comment_id": 57550905, "body": "Did you consider a <code>std::map&lt;int, std::vector&lt;Pattern&gt;&gt;</code>?"}, {"owner": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "edited": false, "score": 2, "creation_date": 1453313594, "post_id": 34907397, "comment_id": 57550928, "body": "If you are using an array, why not continue with an array of pointers?"}, {"owner": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 0, "creation_date": 1453313615, "post_id": 34907397, "comment_id": 57550940, "body": "Can you provide your current arrays definition?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453313675, "post_id": 34907397, "comment_id": 57550987, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please, otherwise your question is not answerable."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1453314017, "post_id": 34907397, "comment_id": 57551144, "body": "@jbh  Do all the arrays have the same size?"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1453315082, "creation_date": 1453315082, "answer_id": 34907885, "question_id": 34907397, "link": "https://stackoverflow.com/questions/34907397/c-look-up-table-that-returns-an-existing-array-of-type-struct/34907885#34907885", "title": "C++ Look up table that returns an existing array of type struct", "body": "<p>use vector not array. You cant really create a map of pattern[].</p>\n\n<p>You should have </p>\n\n<pre><code>vector&lt;vector&lt;Pattern&gt;&gt; arrays;\n\narrays[0] = arr0;\narrays[1] = arr1;\n</code></pre>\n\n<p>etc.</p>\n"}], "owner": {"reputation": 3, "user_id": 5816909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efda0e44d5b67a2c08245c07b7c9088?s=128&d=identicon&r=PG&f=1", "display_name": "jbh", "link": "https://stackoverflow.com/users/5816909/jbh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34907885, "answer_count": 1, "score": -1, "last_activity_date": 1453315082, "creation_date": 1453313432, "question_id": 34907397, "link": "https://stackoverflow.com/questions/34907397/c-look-up-table-that-returns-an-existing-array-of-type-struct", "title": "C++ Look up table that returns an existing array of type struct", "body": "<p>I have a number of existing arrays of a struct type </p>\n\n<pre><code>typedef struct Patterns\n{\n    int a;\n    int b;\n    int c;\n}\n</code></pre>\n\n<p>The arrays are named as follows</p>\n\n<blockquote>\n  <p>arr0, arr1, arr2, arr3, arr4, etc.</p>\n</blockquote>\n\n<p>I am passed an integer value and would like to use it to look up the array that is needed and copy it to a temporary array.</p>\n\n<p>i.e. int 0 corresponds to array arr0 and so on.</p>\n\n<p>I've tried to use the \"map\" method but i run into the error \"expression must be a modifiable lvalue\" when assigning the arrays to the integer keys</p>\n\n<pre><code>std::map&lt;int, Patterns[]&gt;map1;\n\nmap1[0] = arr0;\nmap1[1] = arr1;\n</code></pre>\n\n<p>What am I doing wrong? Is there an easier way to quickly look up which array i need to utilize?</p>\n"}, {"tags": ["c++", "ios", "qt", "boost"], "comments": [{"owner": {"reputation": 21, "user_id": 5817326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4e5d126a25a24754afc239ff1f7669?s=128&d=identicon&r=PG&f=1", "display_name": "rubin stove", "link": "https://stackoverflow.com/users/5817326/rubin-stove"}, "edited": false, "score": 0, "creation_date": 1453314417, "post_id": 34907329, "comment_id": 57551372, "body": "May be above is not the right approach to build boost with a qt app on ios. I wish to know the correct way to build &amp; run my qt ios app with boost       .. Thanks in advance for any help"}], "answers": [{"comments": [{"owner": {"reputation": 1013, "user_id": 400676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f38da3c3a952c604795d66053a9fa?s=128&d=identicon&r=PG", "display_name": "cypheon", "link": "https://stackoverflow.com/users/400676/cypheon"}, "reply_to_user": {"reputation": 21, "user_id": 5817326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4e5d126a25a24754afc239ff1f7669?s=128&d=identicon&r=PG&f=1", "display_name": "rubin stove", "link": "https://stackoverflow.com/users/5817326/rubin-stove"}, "edited": false, "score": 0, "creation_date": 1453322075, "post_id": 34907925, "comment_id": 57555637, "body": "Glad I could help! If the answer is helpful, please upvote and mark it as accepted ;) Thanks!"}, {"owner": {"reputation": 2984, "user_id": 525578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0c69739c03de1550680e5d24874c927?s=128&d=identicon&r=PG", "display_name": "Serg", "link": "https://stackoverflow.com/users/525578/serg"}, "reply_to_user": {"reputation": 21, "user_id": 5817326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4e5d126a25a24754afc239ff1f7669?s=128&d=identicon&r=PG&f=1", "display_name": "rubin stove", "link": "https://stackoverflow.com/users/5817326/rubin-stove"}, "edited": false, "score": 0, "creation_date": 1493834745, "post_id": 34907925, "comment_id": 74575565, "body": "@rubinstove, you cannot upvote yet but you could mark this answer as working one by pressing the mark. This would give you 15 points of reputation and ability to upvote."}], "tags": [], "owner": {"reputation": 1013, "user_id": 400676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f38da3c3a952c604795d66053a9fa?s=128&d=identicon&r=PG", "display_name": "cypheon", "link": "https://stackoverflow.com/users/400676/cypheon"}, "is_accepted": false, "score": 0, "last_activity_date": 1453315221, "creation_date": 1453315221, "answer_id": 34907925, "question_id": 34907329, "link": "https://stackoverflow.com/questions/34907329/build-boost-with-qt-app-running-on-ios/34907925#34907925", "title": "Build boost with qt app running on ios", "body": "<p>To use boost on iOS, you need a \"cross-compiled\" version, for the iPhone's processor architecture. The version you installed locally on your Mac was compiled for architecture <code>x86_64</code>. For an iOS app you need <code>armv7</code> and <code>arm64</code>.<br>\nFortunately, there seems to be a precompiled boost library for iOS available under <a href=\"https://github.com/danoli3/ofxiOSBoost\" rel=\"nofollow\">https://github.com/danoli3/ofxiOSBoost</a>, which looks like it's exactly what you need. Maybe you can have a look at that.</p>\n"}], "owner": {"reputation": 21, "user_id": 5817326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4e5d126a25a24754afc239ff1f7669?s=128&d=identicon&r=PG&f=1", "display_name": "rubin stove", "link": "https://stackoverflow.com/users/5817326/rubin-stove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 526, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1453315221, "creation_date": 1453313114, "question_id": 34907329, "link": "https://stackoverflow.com/questions/34907329/build-boost-with-qt-app-running-on-ios", "title": "Build boost with qt app running on ios", "body": "<p>I am working on a qt app which runs on am ios device. I am building the app on a Mac OSX laptop. It uses C++ for most part of it. I need to build the app with boost C++ library to use boost asio. So following are the steps I did:</p>\n\n<pre><code>    1. Install boost on my mac laptop using port install boost. This puts boost headers into /opt/local/include &amp; boost libs into /opt/local/lib as I see.\n\n    2.Next, I used the following lines in my qt app`s .pro file to build\n\n\nINCLUDEPATH +=  /opt/local/include\nLIBS += -L/opt/local/lib\nLIBS += -lboost_system-mt -lboost_thread-mt\n</code></pre>\n\n<p>Then, I build it. It says \"symbols not found for architecture arm64\" &amp; \"linker command failed with exit code 1\" </p>\n\n<p>Can anyone please point out what is the correct way to build boost for a qt app running on ios ?</p>\n"}, {"tags": ["c++", "visual-studio", "stl", "alignment"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1453313423, "post_id": 34907248, "comment_id": 57550832, "body": "Did you actually check <code>sizeof(vector&lt;T&gt;)</code>? Last time I looked, the MSVC implementation doesn&#39;t make use of empty base optimization for the allocator, and you end up with a 32 byte <code>vector</code> on x64. Also, you care about the <code>vector</code>&#39;s data buffer being 16-byte aligned, don&#39;t you? Not the <code>vector</code> itself."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1453314025, "post_id": 34907248, "comment_id": 57551154, "body": "There is a negative answer for an older version. Don&#39;t think it has changed since. <a href=\"http://stackoverflow.com/questions/12815647/alignment-and-the-stl-in-vs-2012-vc11?rq=1\">Alignment and the STL in VS 2012/VC11</a>"}, {"owner": {"reputation": 351, "user_id": 2016181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04091ef404c865dbec1da7df7ee82734?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2016181/jan"}, "edited": false, "score": 0, "creation_date": 1453319284, "post_id": 34907248, "comment_id": 57554064, "body": "Thanks for the superfast help, pointing me to docs and earlier questions!"}], "owner": {"reputation": 351, "user_id": 2016181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04091ef404c865dbec1da7df7ee82734?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2016181/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453312818, "creation_date": 1453312818, "question_id": 34907248, "link": "https://stackoverflow.com/questions/34907248/do-visual-c-stl-containers-respect-declspecalignn", "title": "Do (visual) C++ STL containers respect __declspec(align(n))?", "body": "<p>using vectors of SIMD in optimized win32 release gives me (vector) the problem that I can align the vector; but since it has 3 pointers (each 4 bytes) overhead, the data will not properly align on 16 byte boundaries.\nThis could be a mistake on my part or normal (but to me regrettable) behavior or a bug.\nAny advice about declaring a vector of 16 byte aligned structs?\nNo more segfaults... (versions tested: 2013 and 2015)\nThanks,\nJan</p>\n"}, {"tags": ["c++", "sockets", "ip", "client", "local"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1453312654, "post_id": 34906965, "comment_id": 57550359, "body": "Just ruling out the obvious: you&#39;re not running both processes on the same machine?"}, {"owner": {"reputation": 31, "user_id": 5195202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a7a6b75801f9d8c84d9352ff04fa9a?s=128&d=identicon&r=PG&f=1", "display_name": "PeteDX", "link": "https://stackoverflow.com/users/5195202/petedx"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453313616, "post_id": 34906965, "comment_id": 57550942, "body": "It&#39;s one application, running on the same machine."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453318397, "post_id": 34906965, "comment_id": 57553552, "body": "If you run them on the same machine, why are you expecting that machine to have different addresses?"}, {"owner": {"reputation": 31, "user_id": 5195202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a7a6b75801f9d8c84d9352ff04fa9a?s=128&d=identicon&r=PG&f=1", "display_name": "PeteDX", "link": "https://stackoverflow.com/users/5195202/petedx"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453319230, "post_id": 34906965, "comment_id": 57554032, "body": "Don&#39;t understand me wrong. The server is running on the machine and works with a PHP-script. Over the php script there gets data sent by a socket connection."}, {"owner": {"reputation": 31, "user_id": 5195202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a7a6b75801f9d8c84d9352ff04fa9a?s=128&d=identicon&r=PG&f=1", "display_name": "PeteDX", "link": "https://stackoverflow.com/users/5195202/petedx"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453319288, "post_id": 34906965, "comment_id": 57554066, "body": "I&#39;m trying to get the ip-adress of the client that triggers the button on web to send data to the server"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453322817, "post_id": 34906965, "comment_id": 57556059, "body": "If you have two processes,  PHP and C++, communicating over a socket,  and they&#39;re both running on the same machine, they have the same IP. The web server&#39;s client is not your C++ server&#39;s client."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1453342121, "post_id": 34906965, "comment_id": 57563612, "body": "There is nothing wrong with the code shown (although your error handling could be better).  If <code>accept()</code> succeeds, it returns the correct client IP and port, as it is known to the server socket. If that is being reported as 127.0.0.1 then it means the client is not only running on the same machine as the server socket, but also that the client used 127.0.0.1 to <code>connect()</code> to the server port. There is no other way that 127.0.0.1 could be getting reported given the code shown."}], "owner": {"reputation": 31, "user_id": 5195202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a7a6b75801f9d8c84d9352ff04fa9a?s=128&d=identicon&r=PG&f=1", "display_name": "PeteDX", "link": "https://stackoverflow.com/users/5195202/petedx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453311893, "creation_date": 1453311893, "question_id": 34906965, "link": "https://stackoverflow.com/questions/34906965/c-still-getting-local-ip-instead-of-clients", "title": "C++ - Still getting local ip instead of clients", "body": "<p>I've a problem on getting the clients ip address using sockets.\nI still get '127.0.0.1' as the client-ip. But why? Wheres the problem?</p>\n\n<p>Here's a snippet of the serializement (first step):</p>\n\n<pre><code>int Serializement::serialize(std::string srvip, unsigned short portno)\n{\nwsaError = WSAStartup(wVersionRequested, &amp;wsaData);\nif (wsaError != 0)\n{\n    printf(\"Server: The Winsock dynamic link library (dll) was not found!\\n\");\n    retval = 100;\n    return 100;\n}\nelse \n    if (ConfigLoaderH::ConfigLoader::ServerDisplayMessages() != 0)\n    {\n        printf(\"Server: The Windsock dll was found!\\n\");\n        printf(\"Server: The status: %s.\\n\", wsaData.szSystemStatus);\n    }\n\nif (LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2)\n{\n    printf(\"Server: The dll does not support the Winsock version %u.%u!\\n\", LOBYTE(wsaData.wVersion), HIBYTE(wsaData.wVersion));\n    WSACleanup();\n    retval = 101;\n    return 101;\n}\nelse\n    if (ConfigLoaderH::ConfigLoader::ServerDisplayMessages() != 0)\n    {\n        printf(\"Server: The dll supports the Winsock version %u.%u!\\n\", LOBYTE(wsaData.wVersion), HIBYTE(wsaData.wVersion));\n        printf(\"Server: The hightest version this dll can support: %u.%u!\\n\", LOBYTE(wsaData.wHighVersion), HIBYTE(wsaData.wHighVersion));\n    }\n\n\nm_Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\nif (m_Socket == INVALID_SOCKET)\n{\n    printf(\"Server: Error at socket(): %ld.\\n\", WSAGetLastError());\n    WSACleanup();\n    retval = 102;\n    return 102;\n}\nelse\n    if (ConfigLoaderH::ConfigLoader::ServerDisplayMessages() != 0)\n        printf(\"Server: socket() is OK!\\n\");\n\n\nservice.sin_family = AF_INET;\nservice.sin_addr.S_un.S_addr = inet_addr(srvip.c_str());\nservice.sin_port = htons(portno);\n\nint yes = 1;\n\nif (setsockopt(m_Socket, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;yes, sizeof(yes)) != SOCKET_ERROR)\n{\n    if (ConfigLoaderH::ConfigLoader::ServerDisplayMessages() != 0)\n        printf(\"Server: Reuse Address was successful.\\n\");\n}\nelse\n{\n    printf(\"Server: Reusing address failed...\\n\");\n    retval = 103;\n    return 103;\n}\nif (bind(m_Socket, (sockaddr *)&amp;service, sizeof(service)) == SOCKET_ERROR)\n{\n    printf(\"Server: bind() failed, %ld.\\n\", WSAGetLastError());\n    closesocket(m_Socket);\n    retval = 104;\n    return 104;\n}\nelse\n    if (ConfigLoaderH::ConfigLoader::ServerDisplayMessages() != 0)\n        printf(\"Server: bind() is OK!\\n\");\n\nif (listen(m_Socket, 10) == SOCKET_ERROR)\n{\n    printf(\"Server: listen(): Error listening on socket %ld.\\n\", WSAGetLastError());\n    retval = 105;\n    return 105;\n}\nelse\n    printf(\"***Hint: Server is ready... Application form can now be run...***\\n\");\n\nretval = 106;\nreturn 106; }\n</code></pre>\n\n<p>And here's a snippet of the listening (second step):</p>\n\n<pre><code>...sockaddr_in client_info;...\n... try\n    {\n        printf(\"Server: Waiting for a client to connect...\\n\");\n        client_info = { 0 };\n        socklen_t c_len = sizeof(client_info);\n\n        AcceptSocket = accept(m_Socket, (sockaddr *)&amp;client_info, &amp;c_len);\n        if (AcceptSocket == INVALID_SOCKET)\n            printf(\"Server: accept() failed.\\n\");\n        else\n        {\n            char * connected_ip = inet_ntoa(client_info.sin_addr);\n            printf(\"Connected client-ip: %s\\n\", connected_ip);\n        }\n\n        printf(\"Server: Getting client-info is done!\\n\");\n</code></pre>\n\n<p>I hope someone will find the line/s that causes that mistake.\nThank you in future!</p>\n"}, {"tags": ["c++", "usrp"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1210922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6e93a1dc37dad2bfd63c7698fd61f30?s=128&d=identicon&r=PG", "display_name": "user1210922", "link": "https://stackoverflow.com/users/1210922/user1210922"}, "edited": false, "score": 0, "creation_date": 1453313409, "post_id": 34907025, "comment_id": 57550824, "body": "Thanks a lot. But this example create one thread for TX and don&#39;t create a thread for RX. so I think after Transmit a packet, I can receive. and This means Half-Duplex. Is this True?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 1, "user_id": 1210922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6e93a1dc37dad2bfd63c7698fd61f30?s=128&d=identicon&r=PG", "display_name": "user1210922", "link": "https://stackoverflow.com/users/1210922/user1210922"}, "edited": false, "score": 0, "creation_date": 1453315588, "post_id": 34907025, "comment_id": 57552055, "body": "@user1210922: no, this is not true. It&#39;s full duplex, and there&#39;s a thread for receiving and one thread for transmitting, like I explained. The <code>transmit_worker</code> function runs in the thread <code>transmit_thread</code>, whereas the <code>recv_to_file</code> function runs in the main thread."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 2, "last_activity_date": 1453312066, "creation_date": 1453312066, "answer_id": 34907025, "question_id": 34906949, "link": "https://stackoverflow.com/questions/34906949/usrp-full-duplex-operation/34907025#34907025", "title": "Usrp Full Duplex Operation", "body": "<p>Look at the examples <a href=\"https://github.com/EttusResearch/uhd/tree/master/host/examples\" rel=\"nofollow\">that come with UHD</a>. There's the <a href=\"https://github.com/EttusResearch/uhd/blob/master/host/examples/txrx_loopback_to_file.cpp\" rel=\"nofollow\">txrx loopback example</a> which does exactly that.</p>\n\n<p>In essence, it's not complicated:</p>\n\n<ol>\n<li>spawn a thread for receiving and one for transmitting. This is optional, but it will make your system much less prone to receive sample over- or transmit sample underruns.</li>\n<li>create an <code>rx_streamer</code> and a <code>tx_streamer</code></li>\n<li>In the RX thread, call the <code>rx_streamer-&gt;recv()</code> method repeatedly in the TX thread, <code>tx_streamer-&gt;send()</code> method repeatedly.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 1210922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6e93a1dc37dad2bfd63c7698fd61f30?s=128&d=identicon&r=PG", "display_name": "user1210922", "link": "https://stackoverflow.com/users/1210922/user1210922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "closed_date": 1453339027, "answer_count": 1, "score": 0, "last_activity_date": 1453312066, "creation_date": 1453311856, "last_edit_date": 1453311875, "question_id": 34906949, "link": "https://stackoverflow.com/questions/34906949/usrp-full-duplex-operation", "closed_reason": "Needs more focus", "title": "Usrp Full Duplex Operation", "body": "<p>I have a USRP N200 with WBX daughterboard. I'd need a simple C/C++\nprogram that can simultaneously receive and transmit. but I can't find It. </p>\n"}, {"tags": ["c++", "tuples"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453311856, "post_id": 34906869, "comment_id": 57549806, "body": "You cannot. Tuple values need to be resolved at compile time."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1453311859, "post_id": 34906869, "comment_id": 57549808, "body": "maybe <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/get\" rel=\"nofollow noreferrer\"><code>std::get</code></a> is what you want."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1453311974, "post_id": 34906869, "comment_id": 57549896, "body": "@101010 Still not feasible to provide kind of <code>iterator</code> based access at runtime."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453312101, "post_id": 34906869, "comment_id": 57550001, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I believe that tuple types are resolved at compile time not values, or am I wrong? As for the <code>iterator</code>, I believe you can code a custom iterator to iterate over a tuple, provided of-course that all its types are the same."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 2, "creation_date": 1453313028, "post_id": 34906869, "comment_id": 57550602, "body": "@101010 With uniform types may be. But why not simply use a <code>std::array</code> then instead?"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453313874, "post_id": 34906869, "comment_id": 57551078, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I agree with you, in terms of simplicity a <code>std::array</code> should be used on this context, my response however is based on the OP&#39;s inquiry."}], "owner": {"reputation": 9, "user_id": 5553144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99348958d5f08348319bc5e0ca22fee?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond Chan", "link": "https://stackoverflow.com/users/5553144/raymond-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1453312496, "answer_count": 0, "score": 0, "last_activity_date": 1453311615, "creation_date": 1453311615, "question_id": 34906869, "link": "https://stackoverflow.com/questions/34906869/how-do-i-use-an-iterator-to-access-data-within-a-tuple", "closed_reason": "Duplicate", "title": "How do i use an iterator to access data within a tuple", "body": "<p>I found some linked list code on TheoryOfProgramming.com, I'm trying to edit the code to print a tuple instead of a pair with an iterator. </p>\n\n<p>Is it possible to declare member variables in a tuple (similar to pairs)? If not, how would I would use an iterator to print the data?</p>\n\n<p>The direct url is here <a href=\"http://theoryofprogramming.com/adjacency-list-using-cpp-stl/\" rel=\"nofollow\">http://theoryofprogramming.com/adjacency-list-using-cpp-stl/</a></p>\n\n<pre><code>vector&lt; list&lt; tuple&lt;int, int,int&gt; &gt; &gt; adjacencyList(vertices + 1);\n\nprintf(\"Enter the Edges V1 -&gt; V2, of weight W\\n\");\n\nfor (int i = 1; i &lt;= edges; ++i) {\n    scanf(\"%d%d%d,%d\", &amp;v1, &amp;v2, &amp;weight,&amp;time);\n\n    // Adding Edge to the Directed Graph\n    adjacencyList[v1].push_back(make_tuple(v2, weight,time));\n}\n\nprintf(\"\\nThe Adjacency List-\\n\");\n// Printing Adjacency List\nfor (int i = 1; i &lt; adjacencyList.size(); ++i) {\n    printf(\"adjacencyList[%d] \", i);\n\n    list&lt; tuple&lt;int, int,int&gt; &gt;::iterator itr = adjacencyList[i].begin();\n\n    while (itr != adjacencyList[i].end()) {\n        printf(\" -&gt; %d(%d)\", (*itr).first, (*itr).second,(*itr).third);\n        ++itr;\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1453312432, "post_id": 34906816, "comment_id": 57550206, "body": "The rule to simplify this is: <code>x || (y &amp;&amp; z) == (x || y) &amp;&amp; (x || z) </code> See: <a href=\"https://en.wikipedia.org/wiki/Boolean_algebra\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Boolean_algebra</a>"}, {"owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "edited": false, "score": 4, "creation_date": 1453312474, "post_id": 34906816, "comment_id": 57550230, "body": "Try drawing a truth table."}], "answers": [{"comments": [{"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453312022, "post_id": 34906909, "comment_id": 57549936, "body": "Considering side effects, aren&#39;t they sort of unpredictable because of possible compiler optimizations? I imagine any good compiler will optimize it to this anyway."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453312474, "post_id": 34906909, "comment_id": 57550229, "body": "@SergeyTachenov: I&#39;m not sure what you&#39;re trying to say. But what I&#39;m implying (when I say &quot;Ignoring side effects&quot;), is that it&#39;s possible that <code>x</code>, <code>y</code> and <code>z</code> are not simple bools. They could, for example, be function calls which return bool. And those functions might have side effects. And, for example, if <code>x</code> is true, and <code>y</code> is a function call returning <code>true</code>, then <code>y</code> will be called twice in the OP&#39;s code, but only once in mine."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453312634, "post_id": 34906909, "comment_id": 57550340, "body": "@Sergey, if token &#39;y&#39; was a function call that returned a bool, that function could have been called twice in the original expression, vs. never being called twice in the &quot;optimized&quot; version.  And both expression evaluations are predictable as long as there is no operator overloading of &amp;&amp; and ||.  Hence, there could be side effects when calling the function in token y twice vs. just once."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453312660, "post_id": 34906909, "comment_id": 57550364, "body": "I got an impression at first that a compiler might optimize away that <code>y</code> even if it had side effects. But now that I&#39;m thinking about it, it doesn&#39;t really make sense: the compiler shouldn&#39;t optimize away anything if it may alter behavior of the program, right? So you&#39;re right, <code>y</code> will be called twice. Sorry for the confusion."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453312919, "post_id": 34906909, "comment_id": 57550529, "body": "@SergeyTachenov: Mostly right. There is one case where the compiler is explicitly allowed to make optimizations that alter the behavior of the program. Look up &quot;Copy Elision&quot;. It doesn&#39;t apply here though."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1453313046, "post_id": 34906909, "comment_id": 57550616, "body": "@BenjaminLindley, yeah I know about copy elision, but it indeed doesn&#39;t apply here, so I haven&#39;t even thought about it."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 10, "last_activity_date": 1453312113, "last_edit_date": 1453312113, "creation_date": 1453311725, "answer_id": 34906909, "question_id": 34906816, "link": "https://stackoverflow.com/questions/34906816/how-to-simplify-x-y-y-z/34906909#34906909", "title": "How to simplify x &amp;&amp; (!y || (y &amp;&amp; z))", "body": "<p>Ignoring side effects in the expressions, this is logically equivalent</p>\n\n<pre><code>x &amp;&amp; (!y || z)\n</code></pre>\n\n<p>The additional check you're doing in for <code>y</code> in <code>(y &amp;&amp; z)</code> is redundant, because if you get to the point where you need to check that part of the expression at all, you've already determined that <code>!y</code> is false, which implies that <code>y</code> is true.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2176127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 34906909, "answer_count": 1, "score": 1, "last_activity_date": 1453312113, "creation_date": 1453311451, "question_id": 34906816, "link": "https://stackoverflow.com/questions/34906816/how-to-simplify-x-y-y-z", "title": "How to simplify x &amp;&amp; (!y || (y &amp;&amp; z))", "body": "<p>Is there a better way to check whether <code>x &amp;&amp; (!y || (y &amp;&amp; z))</code> is true?\nI guess I could create a function for that and do something like <code>x &amp;&amp; not_or_and(y, z)</code> to mitigate some of the pain. But is this really all I can do? </p>\n"}, {"tags": ["c++", "macos", "opengl", "gtk"], "comments": [{"owner": {"reputation": 51182, "user_id": 172999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2014c8170f4d16a313cfa79071fd861?s=128&d=identicon&r=PG", "display_name": "ptomato", "link": "https://stackoverflow.com/users/172999/ptomato"}, "edited": false, "score": 0, "creation_date": 1454904833, "post_id": 34906794, "comment_id": 58236389, "body": "I don&#39;t know the answer to your question, but in GTK 3.16 and later, you should be able use <code>GtkGLArea</code> for this. It is unfortunately not implemented for OSX. The progress is tracked on <a href=\"https://bugzilla.gnome.org/show_bug.cgi?id=740199\" rel=\"nofollow noreferrer\">this bug report</a>, I tried to get it working at one point, but don&#39;t know enough about CGL. You might be able to base your solution on that, and perhaps if it works, you could contribute a working <code>GtkGLArea</code> back to GTK."}], "owner": {"reputation": 1138, "user_id": 1141332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/289d9e007b4825c6961659b64dffbf7f?s=128&d=identicon&r=PG", "display_name": "Jozef Leg&#233;ny", "link": "https://stackoverflow.com/users/1141332/jozef-leg%c3%a9ny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453311402, "creation_date": 1453311402, "question_id": 34906794, "link": "https://stackoverflow.com/questions/34906794/is-it-possible-to-replace-wgl-glx-by-cgl-in-gtk2-for-osx", "title": "Is it possible to replace wgl/glx by cgl in Gtk2 for OSX?", "body": "<p>The Homebrew version of gtk+ has recently moved to a pure Quartz version without X11. In our project we have been using glx to initialise the OpenGL context and set up the a Gtk viewport for OpenGL on both Linux and OSX (and wgl on Windows). This has now broken on OSX.</p>\n\n<p>I am now searching for a way to get a handle on a Gtk widget window and use an opengl context created by CGL to draw to it. I did not write the original code so I am a bit at a loss.</p>\n\n<p>With wgl the interesting part looks like this (<code>widget</code> contains the pointer to the <code>GtkWidget</code> which will be replaced by an OpenGL view):</p>\n\n<pre><code>HWND window = (HWND)GDK_WINDOW_HWND(::gtk_widget_get_window(widget));\nHDC  drawingContext = ::GetDC(window);\nPIXELFORMATDESCRIPTOR pixelFormatDescriptor;\n\n// Insert some PixelFormat initialisation here\nint pixelFormatIdentifier = ChoosePixelFormat(drawingContext, &amp;pixelFormatDescriptor);\nSetPixelFormat(drawingContext, pixelFormatIdentifier, &amp;pixelFormatDescriptor)\n\nHGLRC GLRenderingContext = wglCreateContext(drawingContext);\n</code></pre>\n\n<p>On Linux (with gdkx) it is initialized in this way:</p>\n\n<pre><code>::GdkScreen* screen = ::gdk_screen_get_default();\n::Display* display = GDK_SCREEN_XDISPLAY(screen);\n::gint screenNumber = GDK_SCREEN_XNUMBER(screen);\n\nint visualInfoAttributes[]=\n{\n    GLX_RGBA,\n    GLX_RED_SIZE,    1,\n    GLX_GREEN_SIZE,  1,\n    GLX_BLUE_SIZE,   1,\n    GLX_ALPHA_SIZE,  1,\n    GLX_DOUBLEBUFFER,\n    GLX_DEPTH_SIZE,  1,\n    None\n};\n::XVisualInfo* visualInfo = ::glXChooseVisual(display, screenNumber, visualInfoAttributes);\n::GLXContext glRenderingContext = glXCreateContext(display, visualInfo, NULL, False);\n</code></pre>\n\n<p>and then before drawing to the widget the context is set in this way:</p>\n\n<pre><code>::Window window = GDK_WINDOW_XID(gtk_widget_get_window(widget));\n::glXMakeCurrent(display, window, glRenderingContext);\n</code></pre>\n\n<p>How can (if at all) achieve this using CGL? I would prefer to stay in C++ as the project currently does not use any Objective-C code and I would prefer to not include any external libraries (SDL and co.).</p>\n"}, {"tags": ["c++", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453311417, "post_id": 34906751, "comment_id": 57549521, "body": "If memory consumption keeps going up that generally means that you <code>new</code> up some memory and never <code>delete</code> it.  Have you tried using something like gdb?"}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453312069, "post_id": 34906751, "comment_id": 57549973, "body": "We have been running the memory analysis and leak detection tools provided by TotalView and it is not reporting any un-deleted news.  I also put cerr&#39;s in the contructor and destructor of our data blocks to verify we weren&#39;t losing any."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453312361, "post_id": 34906751, "comment_id": 57550170, "body": "What kind of C++ application are you coding? A data server one, or an HPC (numerical computation) one? How long does it runs (hours or months)?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453312444, "post_id": 34906751, "comment_id": 57550211, "body": "I don&#39;t think there&#39;s a &quot;best&quot; way to avoid fragmentation, but pooling allocators can be a good idea if there are many equally-sized blocks."}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453312575, "post_id": 34906751, "comment_id": 57550290, "body": "This process ingests data, converts it to the format we want, and then stores it, acting as a giant circular buffer.  It runs indefinitely and cycles through its data every 10-60 seconds depending on the configuration."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453313651, "post_id": 34906751, "comment_id": 57550967, "body": "@mjr: that should go into the question (so please edit it).  And you could also tell more about your OS and compiler &amp; compilation options"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1453314750, "post_id": 34906751, "comment_id": 57551562, "body": "@mjr: Your questions are not generic C++ questions (if you do not have a genuine leak) but depend on (1) your OS, (2) your C++ implementation and, possibly, (3) your C implementation which might be providing the <code>malloc</code> and <code>free</code> to the C++ implementation. Without those 2 or 3 parameters, this question is incomplete and cannot be answered."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453314815, "post_id": 34906751, "comment_id": 57551602, "body": "@BasileStarynkevitch: looks like HPC since <a href=\"http://www.roguewave.com/products-services/totalview\" rel=\"nofollow noreferrer\">TotalView</a> is built for it... I guess :("}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453322292, "post_id": 34906751, "comment_id": 57555766, "body": "@mjr: <b>you should edit your question to improve it</b> (don&#39;t comment it here)!"}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453324734, "post_id": 34906751, "comment_id": 57557108, "body": "The kind of application (data server / HPC) is not relevant to the problem of our heap continuing to grow even though we delete the old blocks."}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453325098, "post_id": 34906751, "comment_id": 57557319, "body": "I added the OS and compiler info."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453326143, "post_id": 34906751, "comment_id": 57557884, "body": "@mjr: on the contrary, the kind of application does matter a lot"}], "answers": [{"comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1453314914, "post_id": 34906859, "comment_id": 57551639, "body": "I sympathize with your eagerness to help, however I am afraid that by rushing in answering the question your hard work might end up wasted if the OP finally clarifies the question: it might after all be due to the OS/malloc."}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453326066, "post_id": 34906859, "comment_id": 57557843, "body": "Thanks for the info on mallinfo and mallopt: &quot;Allocating memory using mmap(2) has the significant advantage               that the allocated memory blocks can always be independently               released back to the system.  (By contrast, the heap can be               trimmed only if memory is freed at the top end.) &quot;.  It also looks like the threshold is dynamic by default so it would learn about my 4MB allocation chunks and raise the threshold."}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453328131, "post_id": 34906859, "comment_id": 57558974, "body": "I set the M_MMAP_THRESHOLD to less than my block size and am hopefully optimistic based on a couple minutes of runs.  I&#39;ll know in the morning if that solves my problems.  Can you think of any caveats to setting that?"}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1453380536, "post_id": 34906859, "comment_id": 57581888, "body": "With M_MMAP_THRESHOLD set to less than my block size, I now see my memory usage remain constant at my expected data store size.  Thank you."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1453314547, "last_edit_date": 1495542658, "creation_date": 1453311586, "answer_id": 34906859, "question_id": 34906751, "link": "https://stackoverflow.com/questions/34906751/deallocated-heap-not-being-reclaimed/34906859#34906859", "title": "Deallocated Heap Not Being Reclaimed?", "body": "<p>I guess (and hope for you) that you are on Linux (if porting your code to Linux is doable, consider that since Linux has good tools for such issues).</p>\n\n<p>Then:</p>\n\n<ul>\n<li><p>use C++11 (or C++14) and learn about move semantics, smart pointers, and rule of five.</p></li>\n<li><p>use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a></p></li>\n<li><p>use some sanitizers from your <em>recent</em> <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> or <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang/LLVM</a> compiler. Read about <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html\" rel=\"nofollow noreferrer\"><code>-fsanitizer=</code>... debugging options</a>; you probably want <code>-fsanitize=address</code> at least during debugging.</p></li>\n</ul>\n\n<p>The above will help you catching some remaining <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leaks</a>. Be prepared to spend weeks on them. You might need to disable <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a> and you should learn about <code>gdb</code> watchpoints.</p>\n\n<p>You might also consider using <a href=\"http://www.hboehm.info/gc/\" rel=\"nofollow noreferrer\">Boehm's conservative garbage collector</a>. See <a href=\"https://stackoverflow.com/q/8016945/841108\">this</a> for using it in standard C++ <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a>. If you do use Boehm's GC you'll better use it nearly every where in your program ...</p>\n\n<p>Genuine <a href=\"https://en.wikipedia.org/wiki/Fragmentation_%28computing%29\" rel=\"nofollow noreferrer\">fragmentation</a> may happen (even if you are sure to have avoided memory leaks, and have checked that e.g. with <code>valgrind</code>), in particular for long lived processes. In such cases, you might consider having your own <a href=\"https://en.wikipedia.org/wiki/Application_checkpointing\" rel=\"nofollow noreferrer\">application checkpointing</a> facilities (which are also useful to restart a long-lived computation). If you have thought about it early enough (checkpointing should be an early architectural design decision!) you could checkpoint your state to disk once in a while (e.g. every hour) and restart a fresh process. This can be a good memory compacting strategy.</p>\n\n<p>You could (but I don't necessarily recommend) writing your own memory allocator above OS <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> changing primitives like <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a> (perhaps with <code>MAP_HUGETLB</code> ....) &amp; <code>munmap</code>; you might have your own allocator and deallocator (at least for large-sized objects, or have <code>operator new</code> &amp; <code>operator delete</code>, etc..., in <em>some</em> of your classes), read about C++ <a href=\"http://en.cppreference.com/w/cpp/concept/Allocator\" rel=\"nofollow noreferrer\">allocator concept</a>. But your standard <code>new</code> and <code>delete</code> (and <code>malloc</code> &amp; <code>free</code> for C code, often used by C++ <code>new</code> &amp; <code>delete</code>) is using them.</p>\n\n<p>Notice that most <code>free</code> or <code>delete</code> do not invoke <code>munmap</code>, but simply marks the released memory as reusable by future <code>malloc</code> or <code>new</code> ...</p>\n\n<p>You definitely should become more familiar with <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"nofollow noreferrer\">garbage collection</a> techniques and terminology. Read the <a href=\"http://gchandbook.org/\" rel=\"nofollow noreferrer\">GC handbook</a>.</p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man3/mallinfo.3.html\" rel=\"nofollow noreferrer\">mallinfo(3)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/mallopt.3.html\" rel=\"nofollow noreferrer\">mallopt(3)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a> (perhaps use <code>/proc/self/maps</code> or <code>/proc/self/smaps</code> &amp; <code>/proc/self/statm</code> from inside your program to learn about your heap, or the <code>pmap</code> command). Maybe <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> could be useful (to understand what <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> happen)</p>\n"}], "owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 34906859, "answer_count": 1, "score": 0, "last_activity_date": 1453324871, "creation_date": 1453311272, "last_edit_date": 1453324871, "question_id": 34906751, "link": "https://stackoverflow.com/questions/34906751/deallocated-heap-not-being-reclaimed", "title": "Deallocated Heap Not Being Reclaimed?", "body": "<p>I have C++ process that ingests large blocks of data and stores them in memory.  The storage array contains roughly 10 GB of data partitioned into 4MB blocks.  As new data arrives it creates a new block and then deletes an old block if it is full.  This process cycles through the full circular buffer once every 10 - 60 seconds.  We are running on an x86_64 RH5 and RH6 and compiling with the Intel 14 compiler.</p>\n\n<p>We are seeing a problem where the overall process memory usage grows over time until the OS runs out of memory and eventually the box dies.  We have been looking for memory leaks and running the process through TotalView trying to determine where the memory is going and are not seeing any reported leaks.</p>\n\n<p>On the heap report produced by total view we saw the 10GB of allocated memory for the stored data, but we also saw 4+ GB of \"deallocated\" memory.  Looking through the heap display, it appeared that our heap was very fragmented.  There would be a large chunk of \"allocated\" memory interspersed with large chunks of \"deallocated\" memory.</p>\n\n<ul>\n<li><p>Is the \"deallocated\" memory memory that has been freed by my process but not reclaimed by the OS and is it reasonable to think that this may be the source of our memory \"leak\"?</p></li>\n<li><p>If so, how do I get the OS to reclaim the memory?</p></li>\n<li><p>Do we need to rework our process to reuse discarded data blocks instead of relying on the OS to do our memory management for us?</p></li>\n</ul>\n"}, {"tags": ["c++", "c", "rounding"], "comments": [{"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 1, "creation_date": 1453310538, "post_id": 34906413, "comment_id": 57548939, "body": "I doubt it is possible to read the question as fast as you down-voted. Why so?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453310547, "post_id": 34906413, "comment_id": 57548944, "body": "Why do you need to do it this way?  Are the logical operators on your CPU broken?  Or is this just an intellectual puzzle?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453310646, "post_id": 34906413, "comment_id": 57549016, "body": "Why not just cast one of them to <code>float</code>, perform the division to get a real number as a result, then call <code>ceil</code>?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453310647, "post_id": 34906413, "comment_id": 57549017, "body": "Because on my embedded system I have to implement this function, there are no conditional instructions. And of course, due to performance, it would be nice not to go larger than 32 bits."}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 3, "creation_date": 1453311024, "post_id": 34906413, "comment_id": 57549280, "body": "is it even possible for a cpu to not have conditional instructions?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311118, "post_id": 34906413, "comment_id": 57549349, "body": "There are conditional instructions, but they are expensive and destroy the pipeline, because conditionals are jumps."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311250, "post_id": 34906413, "comment_id": 57549422, "body": "What is the range of <code>a</code> and <code>b</code>?  <code>rounded_division(a, 0)</code> and <code>rounded_division(INT_MAX, -1)</code> are problems.  It looks like we can assume <code>b &gt; 0</code>."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311300, "post_id": 34906413, "comment_id": 57549455, "body": "The ranges are any signed integer with 32 bit."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453311444, "post_id": 34906413, "comment_id": 57549541, "body": "<code>floor(a&#47;b + 0.5)</code> and <code>rounded_division(-1, 2) &#47;&#47; = -1</code> are contradictory. as <code>floor(-1.0&#47;2.0 + 0.5) --&gt; 0</code> Which one is correct?  Do you want floor or truncate?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311661, "post_id": 34906413, "comment_id": 57549674, "body": "Does the code need to work on pre-C99 compiler.  Integer division has implementation dependent issues when <code>a,b</code> are negative."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311801, "post_id": 34906413, "comment_id": 57549764, "body": "@chux: Thanks for pointing this out. The examples show what I want. I corrected the pseudo code.  No pre-C99."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453312803, "post_id": 34906413, "comment_id": 57550446, "body": "@MichaelDorner Are you sure that there&#39;s not a single predicated instruction in the processor?  Not even <a href=\"http://stackoverflow.com/a/14131292/2726892\">conditional-move</a>?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453314562, "post_id": 34906413, "comment_id": 57551473, "body": "@MooseBoys unfortunately yes: <a href=\"http://stackoverflow.com/q/22168992/1864294\">stackoverflow.com/q/22168992/1864294</a>"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453315300, "post_id": 34906413, "comment_id": 57551867, "body": "@MichaelDorner If you&#39;re really on ARMv8, the instruction set <i>does</i> include a limited set of conditional &quot;<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0024a/CHDEEABE.html\" rel=\"nofollow noreferrer\">data processing instructions</a>&quot;, including <code>CSEL</code> (conditional-move)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453315809, "post_id": 34906413, "comment_id": 57552163, "body": "Suggest the reference function you want is <code>int rounded_division(int a, int b) { return round(1.0*a&#47;b); }</code>. `"}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453316428, "post_id": 34906413, "comment_id": 57552492, "body": "Honestly, I think the &quot;problem&quot; with missing conditional instructions is not as bad as you think. AFAIK branch instructions are not that much heavier than C.I. that it would be worth writing messy code :) Better spare a stack frame and wrap your rounding functionality into a macro instead of a function"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453326398, "post_id": 34906413, "comment_id": 57558029, "body": "A far amount of work appears to be needed to get the correct functionality when either <code>a</code> or <code>b</code> are near <code>INT_MIN, INT_MAX</code>.  If requirements were relaxed such that <code>a +&#47;- b&#47;2</code> could be assumed to not overflow, then speedier code is possible."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453327561, "post_id": 34906413, "comment_id": 57558686, "body": "Note: <code>((a &lt; 0) ^ (b &lt; 0)) ? ((a - b &#47; 2) &#47; b) : ((a + b &#47; 2) &#47; b);</code> fails to match <code>round(1.0 * a&#47;b);</code> for many large values of  <code>a</code> and <i>dramatically</i> (wrong sign) for all sorts of values of <code>b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453310956, "post_id": 34906577, "comment_id": 57549223, "body": "I mentioned the signed integer <code>a</code> and <code>b</code>. This is the reason why this problem is not trivial."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311259, "post_id": 34906577, "comment_id": 57549429, "body": "Yes, this was meant to be an example. :) But they are both signed integers."}, {"owner": {"reputation": 646, "user_id": 7547110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPZGD.png?s=128&g=1", "display_name": "NemPlayer", "link": "https://stackoverflow.com/users/7547110/nemplayer"}, "edited": false, "score": 0, "creation_date": 1537548236, "post_id": 34906577, "comment_id": 91838790, "body": "Hey! I know this is a very old post, but I&#39;d like to know how you got that formula and is it perfect? Proof would be pretty cool too. Sorry if I&#39;m bothering you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 646, "user_id": 7547110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPZGD.png?s=128&g=1", "display_name": "NemPlayer", "link": "https://stackoverflow.com/users/7547110/nemplayer"}, "edited": false, "score": 1, "creation_date": 1537562927, "post_id": 34906577, "comment_id": 91845047, "body": "@NemPlayer &quot;how you got that formula&quot; --&gt; self derived.  Consider <code>b%2 == 0</code> that is <code>a&#47;b + 2*r&#47;b</code> which rounds as desired.  Try yourself walking through remaining <code>b%2 == 1</code> and <code>b%2 == -1</code> cases.  &quot;is it perfect?&quot; --&gt; tested good with billions of test cases 2 yrs ago.  I also explored corners and not just random and found no fault."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1532435195, "last_edit_date": 1532435195, "creation_date": 1453310741, "answer_id": 34906577, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906577#34906577", "title": "Rounding integer division without logical operators", "body": "<p><code>a/b + a%b/(b/2 + b%2)</code> works quite well - not failed in billion+ test cases.  It meets all OP's goals: No overflow, no <code>long long</code>, no branching, works over entire range of <code>int</code> when <code>a/b</code> is defined.</p>\n\n<p>No 32-bit dependency.  If using C99 or later, no implementation behavior restrictions.</p>\n\n<pre><code>int rounded_division(int a, int b) {\n  int q = a / b;\n  int r = a % b;\n  return q + r/(b/2 + b%2);\n}\n</code></pre>\n\n<p>This works with 2's complement, 1s' complement and sign-magnitude as all operations are math ones.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311875, "post_id": 34906904, "comment_id": 57549822, "body": "Note: An example of implementation-defined behavior is the propagation of the high-order bit when a signed integer is shifted right.  C11 3.4.1"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312124, "post_id": 34906904, "comment_id": 57550021, "body": "@chux yeah, this is a tricky part. But the author of the question works with a specific platform, so the implementation-dependable behavior is not such a big problem in my opinion."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453312596, "post_id": 34906904, "comment_id": 57550307, "body": "Nice.  <code>a + b&#47;2</code> does have a corner problem when it overflows, but suspect OP will ignore that."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 1, "creation_date": 1453312751, "post_id": 34906904, "comment_id": 57550404, "body": "But what happens if <code>a = INT_MAX </code> and/or <code>b = INT_MAX </code>?"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453312844, "post_id": 34906904, "comment_id": 57550478, "body": "@MichaelDorner you can convert the expression into a sum of three divisions. Maybe if you could solve this problem in your question&#39;s example, I could solve it in my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453313681, "post_id": 34906904, "comment_id": 57550991, "body": "This <code>rounded_division(0, -1)</code> comes up -1.  I think 0 is expected."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453314561, "post_id": 34906904, "comment_id": 57551471, "body": "<code>rounded_division(-1, 1)</code> comes up -2.  Many unexpected results the <code>a b</code> signs differ."}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1453383987, "post_id": 34906904, "comment_id": 57584324, "body": "@Amadeus what points do you mean? If you mean failure when a and b are very large, then yes, I realize that."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1453384106, "post_id": 34906904, "comment_id": 57584414, "body": "@gmoshkin Yes, it does not cover all possible scenaries, but I did not realized that you know that"}], "tags": [], "owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1453376774, "last_edit_date": 1453376774, "creation_date": 1453311718, "answer_id": 34906904, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906904#34906904", "title": "Rounding integer division without logical operators", "body": "<p>How about this:</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return (a + b/2 + b * ((a^b) &gt;&gt; 31))/b;\n}\n</code></pre>\n\n<p><code>(a ^ b) >> 31</code> should evaluate to <code>-1</code> if <code>a</code> and <code>b</code> have different signs and <code>0</code> otherwise, assuming <code>int</code> has 32 bits and the leftmost is the sign bit.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As pointed out by @chux in his comments this method is wrong due to integer division. This new version evaluates the same as OP's example, but contains a bit more operations.</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return (a + b * (1 + 2 * ((a^b) &gt;&gt; 31)) / 2)/b;\n}\n</code></pre>\n\n<p>This version still however does not take into account the overflow problem.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312014, "post_id": 34906907, "comment_id": 57549927, "body": "As OP commented &quot;ranges are any signed integer with 32 bit&quot;, certainly <code>a*b</code> may overflow."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453312100, "post_id": 34906907, "comment_id": 57549999, "body": "@chux: Ahok, missed this comment."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1453312470, "post_id": 34906907, "comment_id": 57550225, "body": "<code>abs(a)</code> <i>seems</i> like it may generate conditional code."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312764, "post_id": 34906907, "comment_id": 57550414, "body": "Yes, was thinking about this as well. @chux But <i>formally</i> the approach meets the requirements, so I&#39;ll leave it around ... :)"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 0, "creation_date": 1453313449, "post_id": 34906907, "comment_id": 57550848, "body": "@alk <code>-1</code> is usually represented as <code>0xfffffff</code> not <code>0xaffffff</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 0, "creation_date": 1453313673, "post_id": 34906907, "comment_id": 57550985, "body": "jaja, already noticed my brain laps and cleaned up, thanks for your comment any way ... :} bit playing is not my favourite task @gmoshkin"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1453313400, "last_edit_date": 1453313400, "creation_date": 1453311721, "answer_id": 34906907, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906907#34906907", "title": "Rounding integer division without logical operators", "body": "<p>What about </p>\n\n<pre><code>  ...\n  return ((a + (a*b)/abs(a*b) * b / 2) / b);\n}\n</code></pre>\n\n<p>Without overflow:</p>\n\n<pre><code>  ...\n  return ((a + ((a/abs(a))*(b/abs(b))) * b / 2) / b);    \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5813024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6672b21ca6e03c9ce899f245b48bd76f?s=128&d=identicon&r=PG&f=1", "display_name": "MSR", "link": "https://stackoverflow.com/users/5813024/msr"}, "edited": false, "score": 0, "creation_date": 1453314268, "post_id": 34907506, "comment_id": 57551279, "body": "Ignore my post, gmoshkin provided a cleaner method."}], "tags": [], "owner": {"reputation": 11, "user_id": 5813024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6672b21ca6e03c9ce899f245b48bd76f?s=128&d=identicon&r=PG&f=1", "display_name": "MSR", "link": "https://stackoverflow.com/users/5813024/msr"}, "is_accepted": false, "score": 1, "last_activity_date": 1453313737, "creation_date": 1453313737, "answer_id": 34907506, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34907506#34907506", "title": "Rounding integer division without logical operators", "body": "<p>This is a rough approach that you may use. Using a mask to apply something if the operation a*b &lt; 0.  </p>\n\n<p>Please note that I did not test this appropriately.</p>\n\n<pre><code>int function(int a, int b){\n    int tmp = float(a)/b + 0.5;\n    int mask = (a*b) &gt;&gt; 31; // shift sign bit to set rest of the bits\n\n    return tmp - (1 &amp; mask);//minus one if a*b was &lt; 0\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1453326024, "last_edit_date": 1495542658, "creation_date": 1453316931, "answer_id": 34908408, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34908408#34908408", "title": "Rounding integer division without logical operators", "body": "<p>The following  <code>rounded_division_test1()</code> meets OP's requirement of no branching - if one counts <code>sign(int a)</code>, <code>nabs(int a)</code>, and <code>cmp_le(int a, int b)</code> as non-branching.  See <a href=\"https://stackoverflow.com/questions/1610836/branchless-code-that-maps-zero-negative-and-positive-to-0-1-2\">here</a> for ideas of how to do <code>sign()</code> without compare operators.  These helper functions could be rolled into <code>rounded_division_test1()</code> without explicit calls.</p>\n\n<p>The code demonstrates the correct functionality and is useful for testing various answers.  When <code>a/b</code> is defined, this answer does not overflow.   </p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint nabs(int a) {\n  return (a &lt; 0) * a - (a &gt;= 0) * a;\n}\n\nint sign(int a) {\n  return (a &gt; 0) - (a &lt; 0);\n}\n\nint cmp_le(int a, int b) {\n  return (a &lt;= b);\n}\n\nint rounded_division_test1(int a, int b) {\n  int q = a / b;\n  int r = a % b;\n  int flag = cmp_le(nabs(r), (nabs(b) / 2 + nabs(b % 2)));\n  return q + flag * sign(b) * sign(r);\n}\n\n// Alternative that uses long long\nint rounded_division_test1LL(int a, int b) {\n  int c = (a^b)&gt;&gt;31;\n  return (a + (c*2 + 1)*1LL*b/2)/b;\n}\n\n// Reference code\nint rounded_division(int a, int b) {\n  return round(1.0*a/b);\n}\n\nint test(int a, int b) {\n  int q0 = rounded_division(a, b);\n  //int q1 = function(a,b);\n  int q1 = rounded_division_test1(a, b);\n  if (q0 != q1) {\n    printf(\"%d %d --&gt; %d %d\\n\", a, b, q0, q1);\n    fflush(stdout);\n  }\n  return q0 != q1;\n}\n\nvoid tests(void) {\n  int err = 0;\n  int const a[] = { INT_MIN, INT_MIN + 1, INT_MIN + 1, -3, -2, -1, 0, 1, 2, 3,\n      INT_MAX - 1, INT_MAX };\n  for (unsigned i = 0; i &lt; sizeof a / sizeof a[0]; i++) {\n    for (unsigned j = 0; j &lt; sizeof a / sizeof a[0]; j++) {\n      if (a[j] == 0) continue;\n      if (a[i] == INT_MIN &amp;&amp; a[j] == -1) continue;\n      err += test(a[i], a[j]);\n    }\n  }\n  printf(\"Err %d\\n\", err);\n}\n\nint main(void) {\n  tests();\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 2889887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2c28b0a473cd1083daf0883e90dbc7?s=128&d=identicon&r=PG&f=1", "display_name": "user2889887", "link": "https://stackoverflow.com/users/2889887/user2889887"}, "is_accepted": false, "score": 0, "last_activity_date": 1453317045, "creation_date": 1453317045, "answer_id": 34908449, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34908449#34908449", "title": "Rounding integer division without logical operators", "body": "<p>since the function seems to be symmetric how about <code>sign(a/b)*floor(abs(a/b)+0.5)</code></p>\n"}, {"tags": [], "owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": false, "score": 1, "last_activity_date": 1453383200, "last_edit_date": 1453383200, "creation_date": 1453346674, "answer_id": 34914867, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34914867#34914867", "title": "Rounding integer division without logical operators", "body": "<p>Let me give my contribution:</p>\n\n<p>What about: </p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return a/b + (2*(a%b))/b;\n}\n</code></pre>\n\n<p>No branch, no logical operators, only mathematical operators. But it could fail if b is great than INT_MAX/2 or less than INT_MIN/2.</p>\n\n<p>But if 64 bits are allowed to compute 32 bits rounds. It will not fail</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return a/b + (2LL*(a%b))/b;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 2273706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa10ba32ecc40bc3a1cc853a8e3a040e?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/2273706/craig"}, "is_accepted": false, "score": 1, "last_activity_date": 1560241885, "last_edit_date": 1560241885, "creation_date": 1560241266, "answer_id": 56539367, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/56539367#56539367", "title": "Rounding integer division without logical operators", "body": "<p>Code that I came up with for use on ARM M0 (no floating point, slow divide).\nIt only uses one divide instruction and no conditionals, but will overflow if numerator + (denominator/2) > INT_MAX.</p>\n\n<p>Cycle count on ARM M0 = 7 cycles + the divide (M0 has no divide instruction, so it is toolchain dependant).</p>\n\n<pre><code>int32_t Int32_SignOf(int32_t val)\n{\n    return (+1 | (val &gt;&gt; 31)); // if v &lt; 0 then -1, else +1\n}\n\nuint32_t Int32_Abs(int32_t val)\n{\n    int32_t tmp = val ^ (val &gt;&gt; 31);\n    return (tmp - (val &gt;&gt; 31));\n\n    // the following code looks like it should be faster, using subexpression elimination\n    // except on arm a bitshift is free when performed with another operation,\n    // so it would actually end up being slower\n    // tmp = val &gt;&gt; 31;\n    // dst = val ^ (tmp);\n    // dst -= tmp;\n    // return dst;\n}\n\nint32_t Int32_DivRound(int32_t numerator, int32_t denominator)\n{\n    // use the absolute (unsigned) demominator in the fudge value\n    // as the divide by 2 then becomes a bitshift\n    int32_t  sign_num  = Int32_SignOf(numerator);\n    uint32_t abs_denom = Int32_Abs(denominator);\n    return (numerator + sign_num * ((int32_t)(abs_denom / 2u))) / denominator;\n}\n</code></pre>\n"}], "owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 1, "accepted_answer_id": 34906577, "answer_count": 8, "score": 4, "last_activity_date": 1560241885, "creation_date": 1453310313, "last_edit_date": 1495541716, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators", "title": "Rounding integer division without logical operators", "body": "<p>I want a function</p>\n\n<pre><code>int rounded_division(const int a, const int b) { \n    return round(1.0 * a/b); \n}\n</code></pre>\n\n<p>So we have, for example,</p>\n\n<pre><code>rounded_division(3, 2) // = 2\nrounded_division(2, 2) // = 1\nrounded_division(1, 2) // = 1\nrounded_division(0, 2) // = 0\nrounded_division(-1, 2) // = -1\nrounded_division(-2, 2) // = -1\nrounded_division(-3, -2) // = 2\n</code></pre>\n\n<p>Or in code, where <code>a</code> and <code>b</code> are 32 bit signed  integers:</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return ((a &lt; 0) ^ (b &lt; 0)) ? ((a - b / 2) / b) : ((a + b / 2) / b);\n}\n</code></pre>\n\n<p>And here comes the tricky part: How to implement this guy <strong>efficiently</strong> (not using larger 64 bit values)  and <strong>without a logical operators</strong> such as <code>?:</code>, <code>&amp;&amp;</code>, ...? Is it possible at all?</p>\n\n<p>The reason why I am wondering of avoiding logical operators, because the processor I have to implement this function for, has no conditional instructions (<a href=\"https://stackoverflow.com/q/22168992/1864294\">more about missing conditional instructions on ARM.</a>).</p>\n"}, {"tags": ["c++", "enet"], "answers": [{"tags": [], "owner": {"reputation": 1619, "user_id": 2219196, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MrlNM.jpg?s=128&g=1", "display_name": "aj3423", "link": "https://stackoverflow.com/users/2219196/aj3423"}, "is_accepted": false, "score": 2, "last_activity_date": 1453363494, "creation_date": 1453363494, "answer_id": 34918328, "question_id": 34906348, "link": "https://stackoverflow.com/questions/34906348/maximum-packet-size-for-enet-c-library/34918328#34918328", "title": "maximum packet size for ENet c++ library", "body": "<p>I found <code>enet_peer_disconnect_later</code>, this seems the API that works. I don't know why the official example use <code>enet_peer_disconnect</code>..</p>\n"}], "owner": {"reputation": 1619, "user_id": 2219196, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MrlNM.jpg?s=128&g=1", "display_name": "aj3423", "link": "https://stackoverflow.com/users/2219196/aj3423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453363494, "creation_date": 1453310112, "question_id": 34906348, "link": "https://stackoverflow.com/questions/34906348/maximum-packet-size-for-enet-c-library", "title": "maximum packet size for ENet c++ library", "body": "<p>I'm trying to use <a href=\"http://enet.bespin.org/\" rel=\"nofollow\">ENet</a> library, it's for programming with reliable UDP socket. On the <code>Feature</code> tab of the official site it says:</p>\n\n<blockquote>\n  <p>ENet will send and deliver packets regardless of size. Large packets are fragmented into many smaller packets of suitable size, and reassembled on the foreign host to recover the original packet for delivery. The process is entirely transparent to the developer.</p>\n</blockquote>\n\n<p>I tested with a simple server/client, it's ok to send 1k data to server, but when data grow up to 2k, it seems not received by the server.</p>\n\n<p>My code:</p>\n\n<p>// server</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;enet/enet.h&gt;\nusing namespace std;\n\nvoid main()\n{\n    // initialize\n    if(enet_initialize()) {\n        cout &lt;&lt; \"fail init\" &lt;&lt; endl;\n        return;\n    }\n\n    ENetAddress address;\n    address.host = ENET_HOST_ANY;\n    address.port = 9000;\n\n    ENetHost* server;\n    server = enet_host_create(&amp;address,\n                  512,\n                  2,\n                  0,\n                  0);\n    if(server == NULL) {\n        cout &lt;&lt; \"fail create host\" &lt;&lt; endl;\n        enet_deinitialize();\n        return;\n    }\n\n\n    ENetEvent event;\n    while(enet_host_service(server, &amp;event, 5000) &gt;= 0) {\n        if(event.type == ENET_EVENT_TYPE_CONNECT) { // client connected\n            static unsigned int num = 0;\n            ENetAddress remote = event.peer-&gt;address; // peer address\n            char ip[256];\n            enet_address_get_host_ip(&amp;remote, ip, 256);\n            cout &lt;&lt; \"ip:\" &lt;&lt; ip &lt;&lt; \" connected, id: \" &lt;&lt; num &lt;&lt; endl;\n            event.peer-&gt;data = (void*)num++;\n        } else if(event.type == ENET_EVENT_TYPE_RECEIVE) {    // recv data\n            cout &lt;&lt; \"received data at channel: \" &lt;&lt; event.channelID &lt;&lt; endl;\n            cout &lt;&lt; \"data length: \" &lt;&lt; event.packet-&gt;dataLength &lt;&lt; endl;\n            cout &lt;&lt; \"data: \" &lt;&lt; string((char*)event.packet-&gt;data, event.packet-&gt;dataLength) &lt;&lt; endl;\n            enet_packet_destroy(event.packet); // free\n            cout &lt;&lt; endl;\n        } else if(event.type == ENET_EVENT_TYPE_DISCONNECT) {     // disconnect\n            cout &lt;&lt; \"id \" &lt;&lt; event.peer-&gt;data &lt;&lt; \" disconnected\" &lt;&lt; endl;\n        }\n    }\n\n    enet_deinitialize();\n}\n</code></pre>\n\n<p>//client</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;enet/enet.h&gt;\nusing namespace std;\n\nvoid main()\n{\n    if(enet_initialize()) {\n        cout &lt;&lt; \"fail init\" &lt;&lt; endl;\n        return;\n    }\n\n    ENetHost* client = enet_host_create(NULL,\n                        1,\n                        2,\n                        0,\n                        0);\n    if(client == NULL) {\n        cout &lt;&lt; \"fail create client\" &lt;&lt; endl;\n        return;\n    }\n\n\n    ENetAddress svraddr;\n    enet_address_set_host(&amp;svraddr, \"127.0.0.1\");\n    svraddr.port = 9000;\n\n    ENetPeer* server = enet_host_connect(client, &amp;svraddr, 2, 0);\n\n    if(server == NULL) {\n        cout &lt;&lt; \"fail connect\" &lt;&lt; endl;\n        return;\n    }\n\n    ENetEvent event;\n    if(enet_host_service (client, &amp;event, 5000) &gt; 0 &amp;&amp;\n       event.type == ENET_EVENT_TYPE_CONNECT) {\n        cout &lt;&lt; \"connected successfully\" &lt;&lt; endl;\n    } else {\n        enet_peer_reset (server);\n        cout &lt;&lt; \"failed to connect\" &lt;&lt; endl;\n        return;\n    }\n\n\n    string data(1024, 'a'); // &lt;--------------- ok\n    string data(2 * 1024, 'a'); // &lt;--------------- fail\n    ENetPacket* packet1 = enet_packet_create(data.c_str(), data.length(), ENET_PACKET_FLAG_RELIABLE);\n    if(!packet1) {\n        cout &lt;&lt; \"create packet fail\" &lt;&lt; endl;\n        return;\n    }\n    if(enet_peer_send(server, 0, packet1) &lt; 0) {\n        cout &lt;&lt; \"send fail\" &lt;&lt; endl;\n        return;\n    }\n\n    enet_host_flush (client);\n\n\n    enet_peer_disconnect (server, 0);\n    while(enet_host_service (client, &amp;event, 5000) &gt; 0) {\n        switch(event.type) {\n          case ENET_EVENT_TYPE_RECEIVE:\n            enet_packet_destroy (event.packet);\n            break;\n\n          case ENET_EVENT_TYPE_DISCONNECT:\n            cout &lt;&lt; \"disconnected\" &lt;&lt; endl;\n            enet_deinitialize();\n            return;\n        }\n    }\n\n    enet_peer_reset(server);\n    cout &lt;&lt; \"force reset\" &lt;&lt; endl;\n\n    enet_deinitialize();\n}\n</code></pre>\n\n<p>Any wrong with the code?</p>\n"}, {"tags": ["c++", "json", "protocol-buffers", "proto3"], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 6399201, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/qcYFD.jpg?s=128&g=1", "display_name": "Erik Stroeken", "link": "https://stackoverflow.com/users/6399201/erik-stroeken"}, "edited": false, "score": 0, "creation_date": 1574260448, "post_id": 34907226, "comment_id": 104169094, "body": "I&#39;m building up experience with Protobuf and C#. The JsonFormatter only accepts IMessage as input. Suppose you only have some instance of a Protobuf message...How to convert it to IMessage so it can be serialized to Json?"}, {"owner": {"reputation": 461, "user_id": 6399201, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/qcYFD.jpg?s=128&g=1", "display_name": "Erik Stroeken", "link": "https://stackoverflow.com/users/6399201/erik-stroeken"}, "edited": false, "score": 0, "creation_date": 1575451572, "post_id": 34907226, "comment_id": 104567535, "body": "Here is the answer from Protobuf -&gt; JSON: string jsonMessage = Google.Protobuf.JsonFormatter.Default.Format((IMessage)perso&zwnj;&#8203;n); .............An From JSON -&gt; Protobuf:  IMessage message = (IMessage)Activator.CreateInstance(typeof(Person)); Person personFromJSON = (Person)Google.Protobuf.JsonParser.Default.Parse(jsonMessage&zwnj;&#8203;, message.Descriptor);"}], "tags": [], "owner": {"reputation": 21, "user_id": 2571259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2c26d1f17ae6312ca70528b801a9c8b?s=128&d=identicon&r=PG", "display_name": "omeryildiz", "link": "https://stackoverflow.com/users/2571259/omeryildiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1453312730, "creation_date": 1453312730, "answer_id": 34907226, "question_id": 34906305, "link": "https://stackoverflow.com/questions/34906305/protocol-buffer3-and-json/34907226#34907226", "title": "Protocol buffer3 and json", "body": "<p>Protobuf has json api for C#. There are some json class for C# in <a href=\"https://developers.google.com/protocol-buffers/docs/reference/csharp/class/google/protobuf/json-formatter\" rel=\"nofollow\">google protobuf reference</a> and You can find some tests in <a href=\"https://github.com/google/protobuf/blob/master/java/util/src/test/java/com/google/protobuf/util/JsonFormatTest.java\" rel=\"nofollow\">github protobuf repository</a> for java and c++.  </p>\n"}, {"comments": [{"owner": {"reputation": 511, "user_id": 1502776, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9befc9b8e22cc00f2ee851bf3d5b663c?s=128&d=identicon&r=PG", "display_name": "user1502776", "link": "https://stackoverflow.com/users/1502776/user1502776"}, "edited": false, "score": 0, "creation_date": 1563511694, "post_id": 44291335, "comment_id": 100731613, "body": "Any chance JSON conversion support can be done in protobuf-C ?"}, {"owner": {"reputation": 8208, "user_id": 1971598, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2dadb39a8fbedbdb2c473a162c251b2a?s=128&d=identicon&r=PG", "display_name": "Edgar Aroutiounian", "link": "https://stackoverflow.com/users/1971598/edgar-aroutiounian"}, "edited": false, "score": 0, "creation_date": 1567525959, "post_id": 44291335, "comment_id": 101985365, "body": "Really nice, any way to have the a hex representation of bytes values instead of what seems to be base64?"}], "tags": [], "owner": {"reputation": 930, "user_id": 1430870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae1a88a8ce815a448134d7b2d10c69a?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/1430870/jay"}, "is_accepted": false, "score": 17, "last_activity_date": 1552398239, "last_edit_date": 1552398239, "creation_date": 1496252223, "answer_id": 44291335, "question_id": 34906305, "link": "https://stackoverflow.com/questions/34906305/protocol-buffer3-and-json/44291335#44291335", "title": "Protocol buffer3 and json", "body": "<p>I'm using Protobuf 3.3.0, which does have a built-in JSON serializer and parser. You can use 2 functions from <code>google/protobuf/util/json_util.h</code> called <code>MessageToJsonString()</code> and <code>JsonStringToMessage()</code> to make your C++ generated <code>Message</code> objects go to and from JSON respectively.</p>\n\n<p>Here's a simple test that uses them:\n<code>test-protobuf.proto</code>:</p>\n\n<pre><code>syntax = \"proto3\";\n\nmessage SearchRequest {\n  string query = 1;\n  int32 page_number = 2;\n  int32 result_per_page = 3;\n}\n</code></pre>\n\n<p><code>test-protobuf.cpp</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;google/protobuf/util/json_util.h&gt;\n\n#include \"test-protobuf.pb.h\"\n\nint main()\n{\n  std::string json_string;\n  SearchRequest sr, sr2;\n\n  // Populate sr.\n  sr.set_query(std::string(\"Hello!\"));\n  sr.set_page_number(1);\n  sr.set_result_per_page(10);\n\n  // Create a json_string from sr.\n  google::protobuf::util::JsonPrintOptions options;\n  options.add_whitespace = true;\n  options.always_print_primitive_fields = true;\n  options.preserve_proto_field_names = true;\n  MessageToJsonString(sr, &amp;json_string, options);\n\n  // Print json_string.\n  std::cout &lt;&lt; json_string &lt;&lt; std::endl;\n\n\n  // Parse the json_string into sr2.\n  google::protobuf::util::JsonParseOptions options2;\n  JsonStringToMessage(json_string, &amp;sr2, options2);\n\n  // Print the values of sr2.\n  std::cout\n    &lt;&lt; sr2.query() &lt;&lt; \", \"\n    &lt;&lt; sr2.page_number() &lt;&lt; \", \"\n    &lt;&lt; sr2.result_per_page() &lt;&lt; std::endl\n  ;\n\n  return 0;\n}\n</code></pre>\n\n<p>You can compile these files (assuming that you have protobuf, a compiler, and CMake installed) by using the following <code>CMakeLists.txt</code> file (tested on Windows).</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\n\nproject(test-protobuf)\n\nfind_package(Protobuf REQUIRED)\n\n# Use static runtime for MSVC\nif(MSVC)\n  foreach(flag_var\n      CMAKE_CXX_FLAGS CMAKE_CXX_FLAGS_DEBUG CMAKE_CXX_FLAGS_RELEASE\n      CMAKE_CXX_FLAGS_MINSIZEREL CMAKE_CXX_FLAGS_RELWITHDEBINFO)\n    if(${flag_var} MATCHES \"/MD\")\n      string(REGEX REPLACE \"/MD\" \"/MT\" ${flag_var} \"${${flag_var}}\")\n    endif(${flag_var} MATCHES \"/MD\")\n  endforeach(flag_var)\nendif(MSVC)\n\nprotobuf_generate_cpp(test-protobuf-sources test-protobuf-headers\n  \"${CMAKE_CURRENT_LIST_DIR}/test-protobuf.proto\"\n)\n\nlist(APPEND test-protobuf-sources\n  \"${CMAKE_CURRENT_LIST_DIR}/test-protobuf.cpp\"\n)\n\nadd_executable(test-protobuf ${test-protobuf-sources} ${test-protobuf-headers})\ntarget_include_directories(test-protobuf\n  PUBLIC\n    ${PROTOBUF_INCLUDE_DIRS}\n    ${CMAKE_CURRENT_BINARY_DIR}\n)\ntarget_link_libraries(test-protobuf\n  ${PROTOBUF_LIBRARIES}\n)\n</code></pre>\n\n<p>Assuming that <code>CMakeLists.txt</code>, <code>test-protobuf.proto</code>, and <code>test-protobuf.cpp</code> are in the same directory, here are the commands to compile and run them on Windows with Visual Studio 15 2017 and 64-bit protobuf libraries.</p>\n\n<pre><code>mkdir build\ncd build\ncmake -G \"Visual Studio 15 2017 Win64\" ..\ncmake --build . --config Release\nRelease/test-protobuf\n</code></pre>\n\n<p>You should see the following output:</p>\n\n<pre><code>{\n \"query\": \"Hello!\",\n \"page_number\": 1,\n \"result_per_page\": 10\n}\n\nHello!, 1, 10\n</code></pre>\n"}], "owner": {"reputation": 938, "user_id": 4951096, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b61a485cb682ddf00bf756e3680b3c50?s=128&d=identicon&r=PG&f=1", "display_name": "lofcek", "link": "https://stackoverflow.com/users/4951096/lofcek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10849, "favorite_count": 5, "answer_count": 2, "score": 14, "last_activity_date": 1552398239, "creation_date": 1453309978, "question_id": 34906305, "link": "https://stackoverflow.com/questions/34906305/protocol-buffer3-and-json", "title": "Protocol buffer3 and json", "body": "<p>Protocol buffer v3 claims, that library is json friendly (<a href=\"https://developers.google.com/protocol-buffers/docs/proto3#json\" rel=\"noreferrer\">https://developers.google.com/protocol-buffers/docs/proto3#json</a>), but I cannot find how to achieve get that mapping. Should I add some plugin, or some option into protoc, or call something special instead SerializeTo/ParseFrom?</p>\n\n<p>Is it someone who use that feature?</p>\n"}, {"tags": ["c++", "oop", "c++11"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 5, "creation_date": 1453310104, "post_id": 34906299, "comment_id": 57548646, "body": "What&#39;s wrong with the good old accessor function? <code>int A::get_a() const noexcept { return this-&gt;a; }</code>"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 1, "creation_date": 1453310206, "post_id": 34906299, "comment_id": 57548714, "body": "The better practice is to use getters and setters to access your class members. You have more control on the access logics"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 6, "creation_date": 1453310336, "post_id": 34906299, "comment_id": 57548801, "body": "Doesn&#39;t adding the <code>const int&amp;</code> member break copy semantics for the class?"}, {"owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453310410, "post_id": 34906299, "comment_id": 57548845, "body": "@JamesAdkison could you explain a bit on that..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1453310510, "post_id": 34906299, "comment_id": 57548922, "body": "@JamesAdkison Important point (another point is increasing the size of the class, needlessly)"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453310598, "post_id": 34906299, "comment_id": 57548984, "body": "@oopaewem <code>A obj1; A obj2; obj1 = obj2;</code> This creates 2 objects then copies 1 to the other but it won&#39;t work with a <code>const &amp;</code> data member."}], "answers": [{"comments": [{"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 8, "creation_date": 1453310611, "post_id": 34906492, "comment_id": 57548991, "body": "<code>int get_a() const;</code>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1453313115, "post_id": 34906492, "comment_id": 57550667, "body": "Initialisation list for the constructor would be better"}], "tags": [], "owner": {"reputation": 1315, "user_id": 1250422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/92d73842659c8dda791788d0fbaac4c5?s=128&d=identicon&r=PG", "display_name": "Archimaredes", "link": "https://stackoverflow.com/users/1250422/archimaredes"}, "is_accepted": false, "score": 3, "last_activity_date": 1453314214, "last_edit_date": 1453314214, "creation_date": 1453310528, "answer_id": 34906492, "question_id": 34906299, "link": "https://stackoverflow.com/questions/34906299/making-public-member-read-only/34906492#34906492", "title": "making public member read only", "body": "<p>The standard way to do this in C++ is by making the actual member <code>private</code> but including a public 'getter' method for the interface, as below:</p>\n\n<pre><code>class A{\n    private:\n        int a;\n    public:\n        int get_a() const { return a; }\n\n        A() : a(20) {}\n};\n\nint main() {\n    A obj;\n    int n = obj.get_a(); // n = 20\n    return 0;\n}\n</code></pre>\n\n<p>The user cannot set the value of <code>A::a</code> but can use <code>A::get_a</code> to retrieve its value.</p>\n"}, {"comments": [{"owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "edited": false, "score": 0, "creation_date": 1453311654, "post_id": 34906820, "comment_id": 57549669, "body": "I just tried ideone and <a href=\"http://ideone.com/KXlNSP\" rel=\"nofollow noreferrer\">found</a> that indeed copy semantics would be broken. Could you include the reason too? Or should I post another question for them? Thanks :)"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "edited": false, "score": 0, "creation_date": 1453312598, "post_id": 34906820, "comment_id": 57550310, "body": "@oopaewem I updated the answer and provided some additional references."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453314358, "post_id": 34906820, "comment_id": 57551339, "body": "<code>it may be possible to implement a custom assignment operator</code>: No it is impossible (only if the reference is a pointer, it would be possible, but ugly again)"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453314933, "post_id": 34906820, "comment_id": 57551650, "body": "@DieterL&#252;cking I didn&#39;t think it was possible either but I tried the <a href=\"http://ideone.com/pA0CBB\" rel=\"nofollow noreferrer\">following</a> and it appeared to work correctly (i.e., the custom assignment operator ignores the <code>const int&amp;</code> data member). I&#39;ve removed that comment from my answer but I&#39;m curious why my example code seems to work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453315514, "post_id": 34906820, "comment_id": 57552017, "body": "@James Adkison I am wrong (I was thinking about non internal references). That makes the answer wrong, too"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453315953, "post_id": 34906820, "comment_id": 57552231, "body": "@DieterL&#252;cking I tried to delete the answer but it won&#39;t let me. How would you recommend I proceed?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453316217, "post_id": 34906820, "comment_id": 57552377, "body": "@DieterL&#252;cking For now, I just tried to update the answer. Is there a way for a moderator to delete the answer?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1453316229, "post_id": 34906820, "comment_id": 57552383, "body": "@JamesAdkison Place a big &quot;This is wrong, but accepted&quot;  in your answer"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453316266, "post_id": 34906820, "comment_id": 57552401, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/101216/discussion-between-james-adkison-and-dieter-lucking\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 4, "last_activity_date": 1453316778, "last_edit_date": 1495540928, "creation_date": 1453311456, "answer_id": 34906820, "question_id": 34906299, "link": "https://stackoverflow.com/questions/34906299/making-public-member-read-only/34906820#34906820", "title": "making public member read only", "body": "<pre><code>class A{\n    private:\n        int a;\n    public:\n        const int &amp;ref = a;\n};\n</code></pre>\n\n<blockquote>\n  <p>is there any thing wrong with this way if I have to provide a variable that is only read-only</p>\n</blockquote>\n\n<p>There are at least a couple drawbacks with this design decision for class <code>A</code>.</p>\n\n<h3>1: Class Size</h3>\n\n<p>Also as <a href=\"https://stackoverflow.com/users/2249683/dieter-l%c3%bccking\">Dieter L\u00fccking</a> mentions in a\n<a href=\"https://stackoverflow.com/questions/34906299/making-public-amember-read-only#comment57548922_34906299\">comment</a>:</p>\n\n<blockquote>\n  <p>increasing the size of the class, needlessly</p>\n</blockquote>\n\n<h3>2: Copy Semantics</h3>\n\n<p>It breaks the compiler generated copy assignment operator. For example, the following code behavior is generally desirable but doesn't work.</p>\n\n<pre><code>A obj1;\n\n// ...\n\nA obj2;\n\n// make changes to 'obj2'\n\n// Update 'obj1' with the changes from 'obj2'\nobj1 = obj2; // This copy doesn't work!\n</code></pre>\n\n<p>More information:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/892133/should-i-prefer-pointers-or-references-in-member-data\">Should I prefer pointers or references in member data?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8635844/assignment-operator-with-reference-class-member\">Assignment operator with reference class member</a></li>\n<li><a href=\"http://www.drbio.cornell.edu/pl47/programming/TICPP-2nd-ed-Vol-one-html/Chapter11.html\" rel=\"nofollow noreferrer\">Thinking in C++, 2nd ed. Volume 1 \u00a92000 by Bruce Eckel, 11: References &amp; the Copy-Constructor</a></li>\n</ul>\n\n<blockquote>\n  <p>There are certain rules when using references:</p>\n  \n  <ol>\n  <li>A reference must be initialized when it is created. (Pointers can be initialized at any time.)<br></li>\n  <li>Once a reference is initialized to an object, it cannot be changed to refer to another object. (Pointers can be pointed to another object at any time.)</li>\n  <li>You cannot have NULL references. You must always be able to assume that a reference is connected to a legitimate piece of storage.</li>\n  </ol>\n</blockquote>\n\n<p>It may be possible to implement a custom assignment operator but that's more code to maintain (i.e., another drawback in my opinion).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\nprivate:\n    int a;\n\npublic:\n    explicit A(int value) : a(value) {}\n\n    A&amp; operator=(const A&amp; other)\n    {\n        a = other.a;\n        return *this;\n    }\n\n    const int&amp; ref = a;\n};\n\nint main()\n{\n    A obj1(10);\n    std::cout &lt;&lt; \"1: \" &lt;&lt; obj1.ref &lt;&lt; \"\\n\";\n\n    A obj2(20);\n    std::cout &lt;&lt; \"2: \" &lt;&lt; obj2.ref &lt;&lt; \"\\n\";\n\n    obj1 = obj2;\n    std::cout &lt;&lt; \"1: \" &lt;&lt; obj1.ref &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>The idiomatic way to address this issue is to use a proper accessor function.</p>\n\n<pre><code>class A {\n    private:\n        int a;\n\n    public:\n        int getA() const { return a; }\n};\n</code></pre>\n"}], "owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "accepted_answer_id": 34906820, "answer_count": 2, "score": 0, "last_activity_date": 1453316778, "creation_date": 1453309958, "last_edit_date": 1453310277, "question_id": 34906299, "link": "https://stackoverflow.com/questions/34906299/making-public-member-read-only", "title": "making public member read only", "body": "<pre><code>class A{\n    private:\n        int a;\n    public:\n        const int &amp;ref = a;\n};\n\nint main() {\n    A obj;\n    obj.a = 20;     // error cause private\n    obj.ref = 30;   // not private but const so ERROR\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to make a member variable accessible but read only through the interface. Currently I've tried this approach and it seems to compile fine. I made a <code>const reference</code> to my original variable <code>int a</code> and made it <code>public</code>. Is there anything that's wrong with this practice that I might be missing out? Or is this example safe and sound to use for practical purposes?</p>\n\n<p>Nothing wrong with providing a member function with <code>const</code> correctness applied (and I've used that too and intend to do so always), but I'm asking is there any thing wrong with this way if I have to provide a variable that is only read-only.</p>\n\n<p>Thankyou :)</p>\n"}, {"tags": ["python", "c++", "cython"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1453331788, "post_id": 34906296, "comment_id": 57560545, "body": "<code>static void __pyx_f_8PyModule_8Py_Class_accept(struct __pyx_obj_8PyModule_Py_Class *__pyx_v_self, mynamespace::MyCPlus_Class &amp;__pyx_v_indata); &#47;* proto*&#47;</code> looks plausible as something you could use."}, {"owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1453391642, "post_id": 34906296, "comment_id": 57589911, "body": "@DavidW, That might work for a time, but I&#39;m really looking for a solution of how to tell Cython to put this method into my API.  The line you quoted above is buried deep in the auto-generated <code>.cpp</code> file, and it could change unexpectedly.  I need a more maintainable solution.  Thank you for the attempt, though."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 0, "creation_date": 1453946060, "post_id": 34906296, "comment_id": 57827246, "body": "The other thing you could <i>try</i> is declaring <code>accept()</code> in <i>both</i> the <code>pxd</code> and <code>pyx</code> files \u2013 if you have it as a fully declared class method (not just a <code>extern</code> method prototype to be exposed) and Cython generates an  correspondingly named accessible method, it\u2019d be yours to either call or override"}, {"owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "reply_to_user": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 1, "creation_date": 1453999843, "post_id": 34906296, "comment_id": 57857800, "body": "@fish2000 The <code>accept()</code> method is not part of my original C++ class (and I can&#39;t add it) so there would be no reason to put in in the <code>pxd</code>.  What I need is for it to be included in the C-struct of my extension class so I can create an extension class wrapper for my C++ object that I can then send to Python.  It&#39;s funny because Cython does put in that <code>__pyx_vtab</code>, but that seems to be for Cython use only, not for external C/C++ code.  I&#39;m thinking that Cython just isn&#39;t designed to do this yet."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "edited": false, "score": 0, "creation_date": 1453318421, "post_id": 34908539, "comment_id": 57553568, "body": "I don&#39;t need to access <code>accept()</code> from Python; only from Cython and C++ (I did verify it works in Cython already).  I did try this just for the heck of it, but Cython gives an error because <code>MyCPlus.MyCPlus_Class</code> is not a Python object.  Thanks for the attempt though."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "edited": false, "score": 0, "creation_date": 1453945813, "post_id": 34908539, "comment_id": 57827170, "body": "Oh aha my error \u2013 just curious, if you were to try the same again without the explicit type declaration, what do you get? I feel like type annotation information in <code>pyx</code> files is supposed to be optional and treated as \u201chinting\u201d but I could be misremembering that completely."}, {"owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "edited": false, "score": 1, "creation_date": 1453999049, "post_id": 34908539, "comment_id": 57857181, "body": "For Python-accessible functions, I use static typing in <code>pyx</code> files to force Python to do automatic conversion on inputs (which also provides a certain level of type-checking).  For C-accessible functions, Cython needs to know how to declare the function, so you can use static typing to specify.  If you don&#39;t specify, I think it assumes something is a Python object.  If you specify a Cython extension class, then you need to also declare that class <code>public</code> or <code>api</code>, else your compiler won&#39;t know what it is.  That is why I tried putting these keywords on both the class and the method."}], "tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": false, "score": 0, "last_activity_date": 1453317317, "creation_date": 1453317317, "answer_id": 34908539, "question_id": 34906296, "link": "https://stackoverflow.com/questions/34906296/cython-extension-class-how-do-i-expose-methods-in-the-auto-generated-c-struct/34908539#34908539", "title": "Cython extension class: How do I expose methods in the auto-generated C struct?", "body": "<p>You probably want to use <code>cpdef</code> instead of <code>cdef</code> when declaring <code>accept</code>. See <a href=\"http://docs.cython.org/src/reference/language_basics.html#callable-from-both-python-and-c\" rel=\"nofollow\">the docs</a>:</p>\n\n<blockquote>\n  <p>Callable from Python and C<br>\n  * Are declared with the cpdef statement.<br>\n  * Can be called from anywhere, because it uses a little Cython magic.<br>\n  * Uses the faster C calling conventions when being called from other Cython code.</p>\n</blockquote>\n\n<p>Try that!</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1453392884, "creation_date": 1453392884, "answer_id": 34928793, "question_id": 34906296, "link": "https://stackoverflow.com/questions/34906296/cython-extension-class-how-do-i-expose-methods-in-the-auto-generated-c-struct/34928793#34928793", "title": "Cython extension class: How do I expose methods in the auto-generated C struct?", "body": "<p>This is not really a solution, but I came up with a workaround for my problem.  I am still hoping for a solution that allows me to tell Cython to expose the <code>accept()</code> method to C++.</p>\n\n<p>My workaround is that I wrote a separate function for my Python class (not a method).  I then gave the <code>api</code> keyword both to my Python class and to the new function:</p>\n\n<pre><code>cdef api class Py_Class [object Py_Class, type PyType_Class]:\n(etc.)\n\ncdef api Py_Class wrap_MyCPlusClass(MyCPlus.MyCPlus_Class &amp;indata):\n    wrapper = Py_Class()\n    del wrapper.thisptr\n    wrapper.thisptr = &amp;indata\n    wrapper.owned = False\n    return wrapper\n</code></pre>\n\n<p>This gets a little unwieldy with the number of different classes I need to wrap, but at least Cython puts the function in the API where it is easy to use:</p>\n\n<pre><code>struct Py_Class* wrap_MyCPlusClass(mynamespace::MyCPlusClass &amp;);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 7502658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc51c6e6b1187f371166cbc7e172898f?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Elrick", "link": "https://stackoverflow.com/users/7502658/edward-elrick"}, "is_accepted": false, "score": 2, "last_activity_date": 1486706905, "last_edit_date": 1486706905, "creation_date": 1486706046, "answer_id": 42152399, "question_id": 34906296, "link": "https://stackoverflow.com/questions/34906296/cython-extension-class-how-do-i-expose-methods-in-the-auto-generated-c-struct/42152399#42152399", "title": "Cython extension class: How do I expose methods in the auto-generated C struct?", "body": "<p>As you pointed in your <a href=\"https://stackoverflow.com/questions/34906296/cython-extension-class-how-do-i-expose-methods-in-the-auto-generated-c-struct#comment57857800_34906296\">comment</a>, it does seem that the <code>__pyx_vtab</code> member is for Cython use only, since it doesn't even define the struct type for it in the exported header(s).</p>\n\n<p>Adding to your response, one approach could also be:</p>\n\n<pre><code>cdef api class Py_Class [object Py_Class, type Py_ClassType]:\n    ...\n    cdef void accept(self, MyCPlus.MyCPlus_Class &amp;indata):\n        ...  # do stuff here\n    ...\n\n\ncdef api void (*Py_Class_accept)(Py_Class self, MyCPlus.MyCPlus_Class &amp;indata)\nPy_Class_accept = &amp;Py_Class.accept\n</code></pre>\n\n<p>Basically, we define a function pointer and set it to the extension's method we want to expose. This is not that much different to your response's <code>cdef</code>'d function; the main difference would be that we can define our methods as usual in the class definition without having to duplicate functionality or method/function calls to another function to expose it. One caveat is that we would've to define our function pointer's signature almost verbatim to the method's one in addition to the <code>self</code>'s extension type (in this case) and etc; then again this also applies for regular functions.</p>\n\n<p>Do note that I tried this up on a C-level Cython <code>.pyx</code> file, I haven't and do not intent to test it on a CPP implementation file. But hopefully this might work just as fine, I guess.</p>\n"}], "owner": {"reputation": 178, "user_id": 5816929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f1cd80fe7d229bd9d4bcfd2674da4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carrie D.", "link": "https://stackoverflow.com/users/5816929/carrie-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1486706905, "creation_date": 1453309953, "question_id": 34906296, "link": "https://stackoverflow.com/questions/34906296/cython-extension-class-how-do-i-expose-methods-in-the-auto-generated-c-struct", "title": "Cython extension class: How do I expose methods in the auto-generated C struct?", "body": "<p>I have existing C++ code that defines some classes I need to use, but I need to be able to send those classes to Python code.  Specifically, I need to create class instances in C++, create Python objects to serve as wrappers for these C++ objects, then pass these Python objects to Python code for processing.  This is just one piece of a larger C++ program, so it needs to be done ultimately in C++ using the C/Python API.</p>\n\n<p>To make my life easier, I have used Cython to define extension classes (cdef classes) that serve as the Python wrappers for my C++ objects.  I am using the typical format where the cdef class contains a pointer to the C++ class, which is then initialized when the cdef class instance is created.  Since I also want to be able to replace the pointer if I have an existing C++ object to wrap, I have added methods to my cdef classes to <code>accept()</code> the C++ object and take its pointer.  My other cdef classes successfully use the <code>accept()</code> method in Cython, for example when one object owns another.</p>\n\n<p>Here is a sample of my Cython code:</p>\n\n<p><code>MyCPlus.pxd</code></p>\n\n<pre><code>cdef extern from \"MyCPlus.h\" namespace \"mynamespace\":\n    cdef cppclass MyCPlus_Class:\n        MyCPlus_Class() except +\n</code></pre>\n\n<p><code>PyModule.pyx</code></p>\n\n<pre><code>cimport MyCPlus\nfrom libcpp cimport bool\n\ncdef class Py_Class [object Py_Class, type PyType_Class]:\n    cdef MyCPlus.MyCPlus_Class* thisptr\n    cdef bool owned\n\n    cdef void accept(self, MyCPlus.MyCPlus_Class &amp;indata):\n        if self.owned:\n            del self.thisptr\n        self.thisptr = &amp;indata\n        self.owned = False\n\n    def __cinit__(self):\n        self.thisptr = new MyCPlus.MyCPlus_Class()\n        self.owned = True\n\n    def __dealloc__(self):\n        if self.owned:\n            del self.thisptr\n</code></pre>\n\n<p>The problem comes when I try to access the <code>accept()</code> method from C++.  I tried using the <code>public</code> and <code>api</code> keywords on my cdef class and on the <code>accept()</code> method, but I cannot figure out how to expose this method in the C struct in Cython's auto-generated <code>.h</code> file.  No matter what I try, the C struct looks like this:</p>\n\n<p><code>PyModule.h</code> (auto-generated by Cython)</p>\n\n<pre><code>struct Py_Class {\n  PyObject_HEAD\n  struct __pyx_vtabstruct_11PyModule_Py_Class *__pyx_vtab;\n  mynamespace::MyCPlus_Class *thisptr;\n  bool owned;\n};\n</code></pre>\n\n<p>I also tried typing the <code>self</code> input as a <code>Py_Class</code>, and I even tried forward-declaring <code>Py_Class</code> with the <code>public</code> and <code>api</code> keywords.  I also experimented with making <code>accept()</code> a static method.  Nothing I've tried works to expose the <code>accept()</code> method so that I can use it from C++.  I did try accessing it through <code>__pyx_vtab</code>, but I got a compiler error, \"invalid use of incomplete type\".  I have searched quite a bit, but haven't seen a solution to this.  Can anyone help me?  Please and thank you!</p>\n"}, {"tags": ["c++", "class", "struct", "standards"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1453310369, "post_id": 34906229, "comment_id": 57548821, "body": "Does it also puzzle you, that you can have <code>template&lt;typename T&gt;</code>, but not <code>typename T{};</code>?"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1453310775, "post_id": 34906229, "comment_id": 57549107, "body": "@user2079303 and (before C++1z) <code>template &lt; template&lt;typename&gt; class C &gt;</code>, but not <code>template &lt; template&lt;typename&gt; typename C &gt;</code>"}, {"owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 1, "creation_date": 1453311011, "post_id": 34906229, "comment_id": 57549270, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c\">What are the differences between struct and class in C++?</a>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 1, "creation_date": 1453311069, "post_id": 34906229, "comment_id": 57549316, "body": "@Martin: No, the OP already knows the differences (he&#39;s pointed them all out)."}, {"owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "edited": false, "score": 0, "creation_date": 1453311079, "post_id": 34906229, "comment_id": 57549322, "body": "Can we take the question up a notch and ask if the standard actually prescribes and difference other than the default access? That is, if you had two headers, one of which declared the type as a <code>struct T</code> with members and one which declared it as a <code>class T</code> with all public members, would both <i>link</i> correctly to an object file that implemented the <code>T</code> and the <code>T::...</code> members?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1453314200, "post_id": 34906229, "comment_id": 57551248, "body": "<code>This seems rather redundant and confusing while introducing a glaring inconsistency.</code> Could you elaborate on the <code>inconsistency</code> that you perceive? It seems perfectly consistent to me."}], "answers": [{"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1453310205, "post_id": 34906298, "comment_id": 57548713, "body": "That answers half the question."}, {"owner": {"reputation": 109, "user_id": 5817092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febccf8733374ef722c0ad2d1589a114?s=128&d=identicon&r=PG&f=1", "display_name": "user5817092", "link": "https://stackoverflow.com/users/5817092/user5817092"}, "edited": false, "score": 0, "creation_date": 1453310260, "post_id": 34906298, "comment_id": 57548750, "body": "All C programs are valid C++ programs, but not all C++ programs are valid C programs. There is no reason not to allow <code>template &lt;struct T&gt;</code> since templates don&#39;t exist in C for example."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 109, "user_id": 5817092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febccf8733374ef722c0ad2d1589a114?s=128&d=identicon&r=PG&f=1", "display_name": "user5817092", "link": "https://stackoverflow.com/users/5817092/user5817092"}, "edited": false, "score": 6, "creation_date": 1453310483, "post_id": 34906298, "comment_id": 57548905, "body": "@user5817092 <code>All C programs are valid C++ programs</code>. <b>Not</b> true. A typical example: <code>int* p = malloc(n * sizeof(int))</code>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1453310614, "post_id": 34906298, "comment_id": 57548995, "body": "To be clear, the other half I was referring to (the unanswered half) is about why <code>class</code> exists, not the second numbered question."}, {"owner": {"reputation": 436, "user_id": 5585340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203879452346033/picture?type=large", "display_name": "Anton Knyazyev", "link": "https://stackoverflow.com/users/5585340/anton-knyazyev"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1453312058, "post_id": 34906298, "comment_id": 57549965, "body": "@BenjaminLindley : i think it&#39;s assumed that &quot;complex OOP objects&quot; are expected to be classes, and making all members private by default forces the programmer to think about assigning individual access rights and only expose what&#39;s necessary, instead of just going all public"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1453313139, "post_id": 34906298, "comment_id": 57550683, "body": "You mean a type template argument, not a non-type one, right?"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 5, "last_activity_date": 1453311095, "last_edit_date": 1495540292, "creation_date": 1453309958, "answer_id": 34906298, "question_id": 34906229, "link": "https://stackoverflow.com/questions/34906229/why-do-both-struct-and-class-exist-in-c/34906298#34906298", "title": "Why do both struct and class exist in C++?", "body": "<blockquote>\n  <p>Why do both struct and class exist in C++?</p>\n</blockquote>\n\n<p><code>struct</code> comes from C, and exists in C++ mainly for reasons of compatibility with the C programming language.</p>\n\n<blockquote>\n  <p>Are there any technical differences that I have missed that\n  significantly distinguish <code>struct</code> and <code>class</code>?</p>\n</blockquote>\n\n<p>The main difference between a <code>struct</code> and a <code>class</code> is that for the <code>struct</code> its members have <code>public</code> access by default whereas for the <code>class</code> its members have <code>private</code> access by default.</p>\n\n<p>The keyword <code>class</code> used in template arguments does not define a class but rather a non type template argument and can be used interchangeably with keyword <code>typename</code>.</p>\n\n<p>As for why you can't use <code>struct</code> keyword for specifying a non type template argument, the reasons are historical and I guess you have to ask Bjarne for it :) or refer to this SO <a href=\"https://stackoverflow.com/a/2520156/2352671\">answer</a> for info behind the scenes.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1466119309, "post_id": 34907535, "comment_id": 63198447, "body": "Would there have been any disadvantage to limiting &quot;struct&quot; to PODS declarations, and saying that compilers were under no obligation to treat things declared with &quot;class&quot; as PODs, regardless of content?  I would think that could have made a lot of other rules a lot cleaner."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 8, "last_activity_date": 1466070275, "last_edit_date": 1495542772, "creation_date": 1453313837, "answer_id": 34907535, "question_id": 34906229, "link": "https://stackoverflow.com/questions/34906229/why-do-both-struct-and-class-exist-in-c/34907535#34907535", "title": "Why do both struct and class exist in C++?", "body": "<blockquote>\n  <p>Why do both struct and class exist in C++?</p>\n</blockquote>\n\n<p>A reason for existence of <code>struct</code> is for compatibility with C.</p>\n\n<p>Why then, did \"C with Classes\" introduce the new keyword <code>class</code> when you could use <code>struct</code> for the same thing, you may ask. See this <a href=\"https://stackoverflow.com/a/1654464/2079303\">SO answer</a> for plausible speculation. In short, it's probably because there was desire for emphasis on <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">OOP</a> in which <a href=\"https://en.wikipedia.org/wiki/Class_%28computer_programming%29\" rel=\"nofollow noreferrer\">class</a> is a widely used term. Only Stroustrup may know for certain.</p>\n\n<blockquote>\n  <p>Confusingly, the keywords themselves do not necessarily correspond to the language used in the standard</p>\n</blockquote>\n\n<p>What needs to be understood, is that the concept of a <em>class</em> is not one and the same with the keyword <code>class</code>.</p>\n\n<p>There are three keywords for declaring classes. These keywords known as class-keys are <code>class</code>, <code>struct</code> and <code>union</code>. The non-union classes that are declared with either <code>class</code> or <code>struct</code> are exactly the same thing, except for <sup>\u2020</sup>. Union classes are different from non-union classes.</p>\n\n<blockquote>\n  <p>However, struct explicitly cannot be used in a template declaration to introduce type template parameters</p>\n</blockquote>\n\n<p>C++ re-uses keywords for different purposes in different contexts. <code>class</code> keyword in a class declaration context, is not entirely the same as <code>class</code> keyword in a template argument definition. One keyword being equivalent to another in one context does not make it equivalent in all contexts. The reason for reusing keywords in different but similar contexts (<code>static</code> is another example), is to avoid introducing new keywords, which introduces more holes with compatibility with C (or earlier C++ standard) that does not have the new keywords.</p>\n\n<p>The reason <em>why</em> <code>class</code> keyword was reused in the context of template type arguments was probably because classes are types, and therefore typically used as type parameters. There is also a <code>typename</code> keyword, which was added later and is (almost) interchangeable with <code>class</code> in template type argument declaration, but also used elsewhere (dependent type names) where <code>class</code> is not used. See this <a href=\"https://stackoverflow.com/a/213135/2079303\">answer</a> for a link and a summary about why a separate keyword was added to that context.</p>\n\n<p>Why <code>struct</code> is not used in the context as an equivalent, you may ask. Well, that's another question to Stroustrup or the committee. It's an opposite choice than what committee did when <code>enum class</code>/<code>enum struct</code> was introduced.</p>\n\n<blockquote>\n  <p>I'm unable to see any significant difference between struct and class</p>\n</blockquote>\n\n<p>Good. There isn't any except for <sup>\u2020</sup></p>\n\n<blockquote>\n  <p>This seems rather redundant and confusing while introducing a glaring inconsistency.</p>\n</blockquote>\n\n<p>I see no inconsistency in the quote from the standard. I see redundancy and I suspect that the redundancy exists to make it extra clear that a class declared with the keyword <code>struct</code> is still a class.</p>\n\n<blockquote>\n  <ol>\n  <li>Are there any technical differences that I have missed that significantly distinguish struct and class?</li>\n  </ol>\n</blockquote>\n\n<p>I've already answered, but to be clear, there is <strong>no</strong> difference between classes declared with <code>struct</code> and <code>class</code> keywords, beyond <sup>\u2020</sup>.</p>\n\n<p><sup>\u2020</sup> the difference with the default access specifier (as you already know, and also described <a href=\"https://stackoverflow.com/a/999810/2079303\">here</a>), which is their <strong>only</strong> difference. </p>\n"}], "owner": {"reputation": 109, "user_id": 5817092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febccf8733374ef722c0ad2d1589a114?s=128&d=identicon&r=PG&f=1", "display_name": "user5817092", "link": "https://stackoverflow.com/users/5817092/user5817092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 1, "accepted_answer_id": 34907535, "answer_count": 2, "score": 9, "last_activity_date": 1466070275, "creation_date": 1453309753, "question_id": 34906229, "link": "https://stackoverflow.com/questions/34906229/why-do-both-struct-and-class-exist-in-c", "title": "Why do both struct and class exist in C++?", "body": "<p>As we know, <code>struct</code> and <code>class</code> are interchangeable in many places in the language. Confusingly, the keywords themselves do not necessarily correspond to the language used in the standard. For example, in draft standard N4567 [class]/10, </p>\n\n<blockquote>\n  <p>A <em>POD struct</em><sup>109</sup> is a non-union class that is both a\n  trivial class and a standard-layout class, and has no non-static data\n  members of type non-POD struct, non-POD union (or array of such\n  types). Similarly, a <em>POD union</em> is a union that is both a trivial\n  class and a standard-layout class, and has no non-static data members\n  of type non-POD struct, non-POD union (or array of such types). A <em>POD\n  class</em> is a class that is either a POD struct or a POD union.</p>\n</blockquote>\n\n<p>In over-simplified terms, <code>struct</code> and <code>class</code> are interchangeable in the following cases:</p>\n\n<ul>\n<li>declaration of a \"class\"</li>\n<li>declaration of a scoped enumeration type</li>\n<li>elaborated type specifier unless the \"class\" was declared with <code>union</code></li>\n</ul>\n\n<p>However, <code>struct</code> <em>explicitly</em> cannot be used in a template declaration to introduce type template parameters:</p>\n\n<pre><code>template &lt;struct T&gt; // error\n</code></pre>\n\n<p>I'm unable to see any significant difference between <code>struct</code> and <code>class</code>, even in the POD example above because a <em>POD struct</em> as defined in the standard can be declared with either <code>struct</code> or <code>class</code>. </p>\n\n<blockquote>\n  <p>[class]/8 A <em>standard-layout struct</em> is a standard-layout class\n  defined with the <em>class-key struct</em> or the <em>class-key class</em>. A\n  <em>standard-layout union</em> is a standard-layout class defined with the <em>class-key union</em>.</p>\n</blockquote>\n\n<p>This seems rather redundant and confusing while introducing a glaring inconsistency.</p>\n\n<p>I have two questions:</p>\n\n<ol>\n<li><p>Are there any technical differences that I have missed that significantly distinguish <code>struct</code> and <code>class</code>?</p></li>\n<li><p>What is the rationale, if any, behind this clumsiness?</p></li>\n</ol>\n\n<p><sup>I'm ignoring the difference between default access specifiers because everyone knows that already.</sup></p>\n"}, {"tags": ["c++", "sorting", "c++11", "vector", "unique-ptr"], "comments": [{"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 1, "creation_date": 1453309700, "post_id": 34906144, "comment_id": 57548380, "body": "Signature of the predicate is wrong."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1544543655, "post_id": 34906144, "comment_id": 94309158, "body": "You should move the part with your solution into a new answer. This way, your post would better fit Stack Overflow&#39;s Q&amp;A format and people could provide upvotes for you solution."}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "edited": false, "score": 0, "creation_date": 1453310400, "post_id": 34906285, "comment_id": 57548841, "body": "Can you tell me how should I call function sort(Workers.begin(), Workers.end(), cmp_by_name); in that case?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "edited": false, "score": 0, "creation_date": 1453310477, "post_id": 34906285, "comment_id": 57548901, "body": "@DaArtagnan I am not sure what you mean.  If you chage <code>cmp_by_name</code> to the way I have it in the answer then it should work."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 16, "last_activity_date": 1544542935, "last_edit_date": 1544542935, "creation_date": 1453309910, "answer_id": 34906285, "question_id": 34906144, "link": "https://stackoverflow.com/questions/34906144/how-can-i-sort-a-vector-of-unique-ptr/34906285#34906285", "title": "How can I sort a vector of unique_ptr?", "body": "<p>The comparison function which <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"noreferrer\"><code>std::sort</code></a> uses needs to be in the form of:</p>\n\n<pre><code>bool cmp(const Type1 &amp;a, const Type2 &amp;b);\n</code></pre>\n\n<p>Here the types <code>Type1</code> and <code>Type2</code> must be such that the iterator can be dereferenced and then implicitly converted to both of them.</p>\n\n<p>In your case dereferencing <code>Workers.begin()</code> gives you a <code>unique_ptr&lt;Worker&gt;</code> not a <code>Worker</code>. You will need to change your comparison function to take a <code>const unique_ptr&lt;Worker&gt;&amp;</code>.</p>\n\n<p>In this case it would wind up looking like:</p>\n\n<pre><code>bool cmp_by_name(const std::unique_ptr&lt;Worker&gt;&amp; a, const std::unique_ptr&lt;Worker&gt;&amp; b)\n{\n    return a-&gt;getName() &lt; b-&gt;getName();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 5, "last_activity_date": 1453310837, "last_edit_date": 1453310837, "creation_date": 1453309927, "answer_id": 34906289, "question_id": 34906144, "link": "https://stackoverflow.com/questions/34906144/how-can-i-sort-a-vector-of-unique-ptr/34906289#34906289", "title": "How can I sort a vector of unique_ptr?", "body": "<p>The datatype of your <code>std::vector&lt;std::unique_ptr&lt;Worker&gt;&gt;</code> is <code>std::unique_ptr&lt;Worker&gt;</code>, so your comparison function has to look like this:</p>\n\n<pre><code>bool cmp_by_name(const std::unique_ptr&lt;Worker&gt; &amp;a, const std::unique_ptr&lt;Worker&gt; &amp;b)\n{\n    return a-&gt;getName() &lt; b-&gt;getName();\n}\n</code></pre>\n\n<p>The comparison function expects to arguments so that an object of the <code>std::vector</code> can convert to them.</p>\n"}, {"tags": [], "owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "is_accepted": false, "score": 1, "last_activity_date": 1553673425, "last_edit_date": 1553673425, "creation_date": 1544542797, "answer_id": 53727540, "question_id": 34906144, "link": "https://stackoverflow.com/questions/34906144/how-can-i-sort-a-vector-of-unique-ptr/53727540#53727540", "title": "How can I sort a vector of unique_ptr?", "body": "<p>Since <a href=\"https://en.wikipedia.org/wiki/C%2B%2B11\" rel=\"nofollow noreferrer\">C++11</a>, you can also use a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda expression</a> instead of defining a comparison function:</p>\n\n<pre><code>int main()\n{\n    using workers_t = std::unique_ptr&lt;Worker&gt;;\n    std::vector&lt;workers_t&gt; Workers;\n    Workers.emplace_back(std::make_unique&lt;Worker&gt;(Worker(\"Paul\")));\n    Workers.emplace_back(std::make_unique&lt;Worker&gt;(Worker(\"Anna\")));\n    Workers.emplace_back(std::make_unique&lt;Worker&gt;(Worker(\"John\")));\n\n    std::sort(std::begin(Workers), std::end(Workers), [](const workers_t&amp; a, const workers_t&amp; b) {\n        return a-&gt;getName() &lt; b-&gt;getName();\n    });\n\n    for (auto const &amp;worker : Workers)\n        std::cout &lt;&lt; worker-&gt;getName() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: This example directly uses <code>Worker</code> objects for the sake of clarity, but it should work for your derived <code>Builder</code> and <code>Driver</code> objects as well.</p>\n\n<p><a href=\"https://ideone.com/qxwaK3\" rel=\"nofollow noreferrer\">Code on Ideone</a></p>\n"}], "owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5880, "favorite_count": 1, "accepted_answer_id": 34906285, "answer_count": 3, "score": 8, "last_activity_date": 1553673425, "creation_date": 1453309506, "last_edit_date": 1544543232, "question_id": 34906144, "link": "https://stackoverflow.com/questions/34906144/how-can-i-sort-a-vector-of-unique-ptr", "title": "How can I sort a vector of unique_ptr?", "body": "<p>I declared a vector as follows: <code>vector&lt;unique_ptr&lt;Worker&gt;&gt; Workers</code>. <code>Worker</code> is a base class with a private field <code>name</code> and it has two derived classes: <code>Builder</code> and <code>Driver</code>.</p>\n\n<p>I add to the <code>Workers</code> vector objects of <code>Builder</code> and <code>Driver</code> and then I want to sort the vector by <code>name</code> using <code>#include &lt;algorithm&gt;</code> like this:</p>\n\n<pre><code>sort(Workers.begin(), Workers.end(), cmp_by_name);\n\nbool cmp_by_name(const Worker &amp;a, const Worker &amp;b)\n{\n    return a.getName() &lt; b.getName();\n}\n</code></pre>\n\n<p>But the VS compiler says:</p>\n\n<blockquote>\n  <p>Error 1   error C2664: 'bool (const Worker &amp;,const Worker &amp;)' : cannot convert argument 2 from 'std::unique_ptr>' to 'const Worker &amp;' c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\algorithm    3071    1   App</p>\n</blockquote>\n\n<p>How can I fix this error?</p>\n\n<hr>\n\n<p>Thanks to @NathanOliver, @Rabbid76 and <a href=\"https://stackoverflow.com/questions/1380463/sorting-a-vector-of-custom-objects\">this question</a>, I edited my <code>cmp_by_name</code> into this form: </p>\n\n<pre><code>struct cmp_by_name\n{\n    inline bool operator()(const unique_ptr&lt;Worker&gt;&amp; a, const unique_ptr&lt;Worker&gt;&amp; b)\n    {\n        return a-&gt;getName() &lt; b-&gt;getName();\n    }\n};\n</code></pre>\n\n<p>And I call the sort function like this:</p>\n\n<pre><code>sort(Workers.begin(), Workers.end(), cmp_by_name());\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 3803, "user_id": 1030861, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/df2b0ab3bb0ff2aea103fc4857aeca43?s=128&d=identicon&r=PG&f=1", "display_name": "Inbae Jeong", "link": "https://stackoverflow.com/users/1030861/inbae-jeong"}, "edited": false, "score": 0, "creation_date": 1453310551, "post_id": 34906039, "comment_id": 57548947, "body": "I see memory leak but I cannot reproduce any error with gcc (except the missing back() in the class declaration)."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 3803, "user_id": 1030861, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/df2b0ab3bb0ff2aea103fc4857aeca43?s=128&d=identicon&r=PG&f=1", "display_name": "Inbae Jeong", "link": "https://stackoverflow.com/users/1030861/inbae-jeong"}, "edited": false, "score": 0, "creation_date": 1453310634, "post_id": 34906039, "comment_id": 57549010, "body": "@kukyakya, thank you, added declaration."}, {"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1453311565, "post_id": 34906039, "comment_id": 57549618, "body": "Suggest you change the title from std::vector so it reflects you are making your own version of a vector."}, {"owner": {"reputation": 495, "user_id": 1968586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c397ad0144b27da5f5e1c1bd2585d21?s=128&d=identicon&r=PG", "display_name": "pelletjl", "link": "https://stackoverflow.com/users/1968586/pelletjl"}, "edited": false, "score": 0, "creation_date": 1453312911, "post_id": 34906039, "comment_id": 57550522, "body": "you probably want to change the formal argument to emplace_back to a forwarding reference since you&#39;re forwarding the pack inside the function."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 2, "creation_date": 1453313411, "post_id": 34906039, "comment_id": 57550826, "body": "<code>new (mdata + msize) MyStruct(std::forward&lt;ArgsType...&gt;(args...));</code> This wouldn&#39;t compile if you passed more than one argument; you&#39;re using <code>std::forward</code> wrong. It should be <code>std::forward&lt;ArgsType&gt;(args)...</code>."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1453313526, "post_id": 34906039, "comment_id": 57550893, "body": "@SebastianRedl I was confused by those ... . I was stumbling on it a lot of times. Could you please provide some rule or logic to follow when writing parameter pack expansion?"}, {"owner": {"reputation": 3803, "user_id": 1030861, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/df2b0ab3bb0ff2aea103fc4857aeca43?s=128&d=identicon&r=PG&f=1", "display_name": "Inbae Jeong", "link": "https://stackoverflow.com/users/1030861/inbae-jeong"}, "edited": false, "score": 0, "creation_date": 1453314493, "post_id": 34906039, "comment_id": 57551425, "body": "I ran the code with valgrind and duma, and got no error. What about changing <code>operator new[]()</code> to <code>operator new()</code>? <code>operator new[]()</code> usually calls <code>operator new()</code> but it could make an error if it doesn&#39;t, I guess."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 3803, "user_id": 1030861, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/df2b0ab3bb0ff2aea103fc4857aeca43?s=128&d=identicon&r=PG&f=1", "display_name": "Inbae Jeong", "link": "https://stackoverflow.com/users/1030861/inbae-jeong"}, "edited": false, "score": 0, "creation_date": 1453316391, "post_id": 34906039, "comment_id": 57552469, "body": "@Kukyakya, tried, not really sure what should happen, but no changes."}], "owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453312989, "creation_date": 1453309204, "last_edit_date": 1453311633, "question_id": 34906039, "link": "https://stackoverflow.com/questions/34906039/problems-with-implementing-my-own-vectoremplace-back", "title": "problems with implementing my own vector::emplace_back", "body": "<p><strong>Background:</strong></p>\n\n<p>I'm trying to implement std::vector myself. For now, I have only specialized version of it, which has MyStruct instances as an elements. The elements type has helper output like signalling how it was constructed (copy, move, value, default ctor). I added overload of operator&lt;&lt; to make it more convenient to debug. I'm using Microsoft Visual Studio 2015 update 1.</p>\n\n<p><strong>Problem:</strong></p>\n\n<p>First of all, it seems like emplace_back call doesn't do what it is supposed to do. Trying to output back element it outputs trash. Additionally, when exiting scope of main(), there is error saying that the program tried to write into the memory outside of the heap. Added the image of the message box.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Push back with almost the same implementation of increasing capacity works. Added implementation and declaration as well.</p>\n\n<p>Here is the code:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"MyStruct.h\"\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include \"vector.h\"\n\nint main()\n{\nMyStruct ms(0);\nVector v;\nv.emplace_back(2);\n\nstd::cout &lt;&lt; v.back() &lt;&lt; \"\\n\";\n\nstd::system(\"pause\");\n}\n</code></pre>\n\n<p><strong>vector.h</strong></p>\n\n<pre><code>#pragma once\n#include \"MyStruct.h\"\n\nclass Vector\n{\n    size_t mcapacity;\n    MyStruct* mdata;\n    size_t msize;\npublic:\n    Vector();\n\n    MyStruct&amp; back();\n\n    void push_back(const MyStruct&amp; ms);\n\n    template&lt;typename ... ArgsType&gt;\n    void emplace_back(ArgsType ... args)\n    {\n        if (mcapacity == msize &amp;&amp; msize == 0)\n        {\n            mdata = (MyStruct*)operator new[](sizeof(MyStruct));\n            mcapacity++;\n        }\n        else if (mcapacity == msize)\n        {\n            MyStruct* tempdata = (MyStruct*)operator new[](sizeof(MyStruct) * mcapacity * 2);\n            for (size_t i = 0; i &lt; msize; i++)\n            {\n                new (tempdata + i) MyStruct(*(mdata + i));\n            }\n            mdata = tempdata;\n            mcapacity *= 2;\n        }\n        new (mdata + msize) MyStruct(std::forward&lt;ArgsType...&gt;(args...));\n        msize++;\n    }\n\n    ~Vector();\n};\n</code></pre>\n\n<p><strong>vector.cpp</strong></p>\n\n<pre><code>#include \"vector.h\"\n#include \"MyStruct.h\"\n#include &lt;iostream&gt;\n\nVector::Vector() :\n    mdata(nullptr), \n    msize(0), \n    mcapacity(0)\n{\n\n}\n\nMyStruct&amp; Vector::back()\n{\n    return *(mdata + msize - 1);\n}\n\nvoid Vector::push_back(const MyStruct&amp; ms)\n{\n    if (mcapacity == msize &amp;&amp; msize == 0)\n    {\n        mdata = (MyStruct*)operator new[](sizeof(MyStruct));\n        mcapacity++;\n    }\n    else if (mcapacity == msize)\n    {\n        MyStruct* tempdata = (MyStruct*)operator new[](sizeof(MyStruct) * mcapacity * 2);\n        for (size_t i = 0; i &lt; msize; i++)\n        {\n            new (tempdata + i) MyStruct(*(mdata + i));\n        }\n        mdata = tempdata;\n        mcapacity *= 2;\n    }\n\n    new (mdata + msize) MyStruct(ms);\n    msize++;\n}\n\nVector::~Vector()\n{\n    for (size_t i = 0; i &lt; msize; i++)\n    {\n        (mdata + i)-&gt;~MyStruct();\n    }\n\n    operator delete[](mdata);//next statement to execute\n}\n</code></pre>\n\n<p>Here is the error message box:\n<a href=\"https://i.stack.imgur.com/ONKK3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ONKK3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Output:</p>\n\n<pre><code>I'm constructed using value constructor\nI'm constructed using value constructor\nI'm printing the number -33686019!\n</code></pre>\n\n<p>This is MyStruct header and implementation, but I think none of functions throw any exceptions or invoke undefined behavior. Added all constructors since I was unsure which constructor is really called when invoking v.back(). Thought that compiler might did some optimizations. But according to output, value ctor was called.</p>\n\n<p><strong>MyStruct.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;iosfwd&gt;\n\nclass MyStruct\n{\n    int x;\npublic:\n    MyStruct();\n    MyStruct(int x_);\n\n    MyStruct(const MyStruct&amp; other);\n\n    MyStruct(MyStruct&amp;&amp; other) noexcept;\n\n    void print(std::ostream&amp; os) const;\n\n    ~MyStruct();\n};\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const MyStruct&amp; ms);\n</code></pre>\n\n<p><strong>MyStruct.cpp</strong></p>\n\n<pre><code>#include \"MyStruct.h\"\n#include &lt;iostream&gt;\n\nMyStruct::MyStruct():\n    x(0)\n{\n    std::cout &lt;&lt; \"I'm created using default constructor\" &lt;&lt; \"\\n\";\n}\n\nMyStruct::MyStruct(MyStruct&amp;&amp; other) noexcept :\n    x(other.x)\n{\n    std::cout &lt;&lt; \"I'm created using move constructor\" &lt;&lt; \"\\n\";\n}\n\nMyStruct::MyStruct(const MyStruct&amp; other):\n    x(other.x)\n{\n    std::cout &lt;&lt; \"I'm created using copy constructor\" &lt;&lt; \"\\n\";\n}\n\nMyStruct::~MyStruct()\n{\n    std::cout &lt;&lt; \"I'm destructed\" &lt;&lt; \"\\n\";\n}\n\nvoid MyStruct::print(std::ostream&amp; os) const\n{\n    os &lt;&lt; \"I'm printing the number \" &lt;&lt; x &lt;&lt; \"!\\n\";\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const MyStruct&amp; ms)\n{\n    ms.print(os);\n    return os;\n}\n\nMyStruct::MyStruct(int x_) :\n    x(x_)\n{\n    std::cout &lt;&lt; \"I'm constructed using value constructor\" &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "nmake", "fortify", "cl"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1453312157, "post_id": 34906024, "comment_id": 57550045, "body": "As far as I know, CMake always tends to generate makefiles with absolute paths to programs. As for your case, you can create <b>wrapper</b> script, and tell CMake to use it as a compiler. Inside the script you may use relative path to compiler (dispatch by <code>PATH</code> variable), or use other mechanism for select actual compiler."}], "answers": [{"tags": [], "owner": {"reputation": 7193, "user_id": 1938798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196507edbb408bad2f2a08e33222bac7?s=128&d=identicon&r=PG", "display_name": "Craig Scott", "link": "https://stackoverflow.com/users/1938798/craig-scott"}, "is_accepted": true, "score": 3, "last_activity_date": 1528497508, "last_edit_date": 1528497508, "creation_date": 1453375455, "answer_id": 34922484, "question_id": 34906024, "link": "https://stackoverflow.com/questions/34906024/how-do-i-force-cmake-to-use-cl-exe-without-full-path/34922484#34922484", "title": "How do I force cmake to use cl.exe without full path?", "body": "<p><strong>UPDATED:</strong> Testing showed the original suggested approach didn't work as expected on at least some platforms. It seems using a wrapper script is likely the way to go.</p>\n\n<p>If you really want to force a particular compiler and by-pass CMake's compiler checks, the <a href=\"https://cmake.org/cmake/help/latest/module/CMakeForceCompiler.html\" rel=\"nofollow noreferrer\"><code>CMakeForceCompiler</code> module</a> may be what you are looking for. That link to the CMake docs contains a trivial toolchain file example which shows how to use a specific compiler invoked as a simple command with no path. <strong>Unfortunately, CMake still converts this to an absolute path, so on its own, this won't solve your problem</strong>. You could, however, use a toolchain file to point at a wrapper script and use <code>CMakeForceCompiler</code> to bypass the compiler checks. This combination should yield the behaviour you've asked for, but note that <code>CMakeForceCompiler</code> is now deprecated.</p>\n\n<p>Note that when using the <code>CMakeForceCompiler</code> module, you take on a bit more responsibility for telling CMake information, notably the compiler ID of the particular compiler you want to force using, but from the <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_LANG_COMPILER_ID.html\" rel=\"nofollow noreferrer\">CMake docs</a> it seems pretty clear this will just be <code>MSVC</code> in your case.</p>\n\n<p>To use a toolchain file, invoke CMake with a <code>-DCMAKE_TOOLCHAIN_FILE=path/to/file</code> option pointing at your own custom toolchain file. The CMake docs have a <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html\" rel=\"nofollow noreferrer\">specific section</a> covering the use of toolchains, although it does gloss over some of the important nitty gritty details.</p>\n\n<p>As mentioned in @Tsyvarev's comment, the use of a wrapper script is likely to be your best way of dealing with this. That wrapper script just needs to forward the call to the usual compiler command without specifying a path. You then take responsibility for ensuring the command will be on your PATH when you do a build. Something as simple as the following should suffice as a wrapper batch file on Windows (untested):</p>\n\n<pre><code>cl %*\n</code></pre>\n\n<p>Now, you can control whether the Visual Studio compiler or Fortify gets invoked purely by the PATH the build sees. Personally, I think this is a bit fragile, but it's what you asked for. ;)</p>\n\n<p>As a more robust alternative, is it possible to use two completely separate builds? If so, then I'd recommend that as a better alternative. Build one with the default Visual Studio compiler as normal and for the other build, use a toolchain file to point at the Fortify compiler to get CMake to bypass its compiler checks. That way you aren't relying on the build environment being set up a particular way.</p>\n"}], "owner": {"reputation": 5425, "user_id": 583044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ad7ef9756043aad048a7f0e70c724f?s=128&d=identicon&r=PG", "display_name": "tinman", "link": "https://stackoverflow.com/users/583044/tinman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2069, "favorite_count": 1, "accepted_answer_id": 34922484, "answer_count": 1, "score": 3, "last_activity_date": 1528497508, "creation_date": 1453309160, "last_edit_date": 1495542700, "question_id": 34906024, "link": "https://stackoverflow.com/questions/34906024/how-do-i-force-cmake-to-use-cl-exe-without-full-path", "title": "How do I force cmake to use cl.exe without full path?", "body": "<p>I am building an open source project (kst, v2.0.8) that uses CMake. I am using CMake v2.8.12.2 and MSVC 2008 as a compiler and am generating NMake makefiles to build it on the command line. I can get it to build successfully with this setup. These versions are mandated so I cannot currently use a later version of CMake or MSVC.</p>\n\n<p>I need to be able to perform a source code analysis of kst using HP's Fortify and to be able to use it from the command line it works in one of two ways:</p>\n\n<ol>\n<li><p>Touchless mode where it creates it's own \"cl.exe\", sets the path to it before the path to the real cl.exe and therefore gets launched during build.</p></li>\n<li><p>Set the compiler in the makefile to the Fortify command line, e.g. <code>sourceanalyzer -b build_id cl</code> instead of <code>cl</code>.</p></li>\n</ol>\n\n<p>Either way I need to force the compiler that cmake generates into its makefiles to be something that cmake does not automatically detect.</p>\n\n<p>I've tried setting the compiler when running cmake following the same method in <a href=\"https://stackoverflow.com/questions/23477379/how-does-cmake-find-cxx-compiler\">this question</a> but cmake still insists on putting the full path to the MSVC cl.exe in the makefiles.</p>\n\n<pre><code>cmake -DCMAKE_C_COMPILER=cl -DCMAKE_C_COMPILER_FORCED=ON -DCMAKE_CXX_COMPILER=cl -DCMAKE_CXX_COMPILER_FORCED=ON -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=%CFITSIO_DIR% -G\"NMake Makefiles\" ..\\cfit3250\n</code></pre>\n\n<p>I also tried setting the compiler to invoke Fortify but when cmake tests the compiler it fails saying that it cannot find the compiler. (I have also tried this without the FORCED=ON arguments and in that case it says the compiler fails.)</p>\n\n<pre><code>cmake -DCMAKE_C_COMPILER=\"sourceanalyzer -b %BUILDID% cl\" -DCMAKE_C_COMPILER_FORCED=ON -DCMAKE_CXX_COMPILER=\"sourceanalyzer -b %BUILDID% cl\" -DCMAKE_CXX_COMPILER_FORCED=ON -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=%CFITSIO_DIR% -G\"NMake Makefiles\" ..\\cfit3250\n</code></pre>\n\n<p>I could probably search and replace all the compiler invocations in the makefiles but I'd have to remember to do that after every cmake, and it would be tedious seeing as there are multiple projects / makefiles / calls to cl (rather than defining a CC variable in the makefile). I'd rather have a way to make cmake use the desired compiler right from the offset.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 4, "creation_date": 1453309094, "post_id": 34905981, "comment_id": 57547980, "body": "That&#39;s not how <code>cout</code> is used."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1453309283, "post_id": 34905981, "comment_id": 57548106, "body": "Related <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1453309440, "post_id": 34905981, "comment_id": 57548204, "body": "Instead of <code>int r; r=a-b;</code> use initialization: <code>int r=a-b;</code>. Same for <code>z</code>."}, {"owner": {"reputation": 1519, "user_id": 5058218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-_WtMI-c4BvQ/AAAAAAAAAAI/AAAAAAAAADA/8EyGLG3fHAI/photo.jpg?sz=128", "display_name": "Simply Me", "link": "https://stackoverflow.com/users/5058218/simply-me"}, "edited": false, "score": 0, "creation_date": 1453309531, "post_id": 34905981, "comment_id": 57548263, "body": "Just use <code>cout &lt;&lt; z;</code> and you will get rid of the error."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1453309403, "post_id": 34906044, "comment_id": 57548185, "body": "If there&#39;s no explicit <code>return</code> in the <code>main</code> function, the compiler will add a <code>return 0</code> at the end."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453309681, "post_id": 34906044, "comment_id": 57548365, "body": "Indeed. @JoachimPileborg is referring to C++ Standard, chapter 3.6.1 paragraph 5. Yup, you can do this for <code>main()</code>, but not any other function."}, {"owner": {"reputation": 11, "user_id": 5699774, "user_type": "registered", "profile_image": "https://graph.facebook.com/403367113207052/picture?type=large", "display_name": "Kaden Hardy", "link": "https://stackoverflow.com/users/5699774/kaden-hardy"}, "edited": false, "score": 0, "creation_date": 1453309923, "post_id": 34906044, "comment_id": 57548518, "body": "I was under the impression that calling the iostream library allowed for the use of <code>cout</code>, not <code>namespace std;</code>. If <code>namespace std;</code> is what allows for <code>cout</code>, then what does the iostream library call?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1453310045, "post_id": 34906044, "comment_id": 57548604, "body": "That&#39;s a good observation@KadenHardy: The non-standard <code>#include &lt;iostream.h&gt;</code> gives you <code>cout</code>, but you should use the standard <code>#include &lt;iostream&gt;</code>, where you <i>need</i> to use <code>std::cout</code>."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1453309213, "creation_date": 1453309213, "answer_id": 34906044, "question_id": 34905981, "link": "https://stackoverflow.com/questions/34905981/what-does-using-namespace-std-do/34906044#34906044", "title": "What does using namespace std; do?", "body": "<p><code>using namespace std;</code> means you can write <code>cout</code> later on rather than <code>std::cout</code>. It saves typing at the expense of gross <em>namespace pollution</em>.</p>\n\n<p>Your compile error can be fixed by writing <code>cout &lt;&lt; z;</code></p>\n\n<p>Also, do return a value from <code>main</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 0, "last_activity_date": 1453310838, "last_edit_date": 1453310838, "creation_date": 1453310064, "answer_id": 34906330, "question_id": 34905981, "link": "https://stackoverflow.com/questions/34905981/what-does-using-namespace-std-do/34906330#34906330", "title": "What does using namespace std; do?", "body": "<blockquote>\n  <p>What does using namespace <code>std;</code> do?</p>\n</blockquote>\n\n<p><strong>It tells the compiler which class/namespace to look in for an identifier.</strong> You either use <code>using namespace std;</code> in the beginning of the file or have to place it in front of each function that belongs to it.  </p>\n\n<blockquote>\n  <p>What is the matter with this C++ code?</p>\n</blockquote>\n\n<p>The syntax to use <code>std::cout</code> is:</p>\n\n<pre><code>std::cout &lt;&lt; source; \n</code></pre>\n\n<p>variable <code>source</code> is inserted with the help of <code>operator &lt;&lt;</code> in the <code>std::cout</code> stream which prints it to the standard output, i.e. computer monitor.</p>\n\n<hr>\n\n<p><sup><code>std</code> <em>\"labels\"</em> a function member of the Standard Library. This is a technique used (among other reasons) to resolve (using the resolution operator <code>::</code>) members that belong to the Standard Library from (possible) name conflicts with functions with similar(same) names and to reduce a scope of a search. <code>std</code> is called a namespace, so <code>using namespace std;</code> is a bit self explanatory.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1453364582, "post_id": 34906498, "comment_id": 57571362, "body": "A great answer, sadly too late for the initial upvote flurry. But here&#39;s a plus one anyway."}], "tags": [], "owner": {"reputation": 178, "user_id": 5787162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287552c9de928a6faa079c9a60573852?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Johns", "link": "https://stackoverflow.com/users/5787162/joseph-johns"}, "is_accepted": false, "score": 2, "last_activity_date": 1475411321, "last_edit_date": 1475411321, "creation_date": 1453310541, "answer_id": 34906498, "question_id": 34905981, "link": "https://stackoverflow.com/questions/34905981/what-does-using-namespace-std-do/34906498#34906498", "title": "What does using namespace std; do?", "body": "<p>To begin to explain what this does, it is important for you to understand what namespaces do. Namespaces are logical units of code divided up, you are able to create your own namespace or use other namespaces. The benefit of using namespaces is to have your program logically divide up your code with like functions. This is very similar to classes, but you do not need initiation of the namespaces like classes do. IN Java this would be similar to packages. To use a function within a namespace you need to use the namespace identifier followed by the function you are calling. This will call the correct function in the namespace scope you are wanting to use. An example of creating a namespace is the following: </p>\n\n<pre><code>namespace connection \n{\n int create_connection();\n int close_connection();\n //ect.......\n}   \n</code></pre>\n\n<p>Then later in the code when you want to call create_connection you need to do it the following way:</p>\n\n<pre><code>connection::create_connection();\n</code></pre>\n\n<p>As for your answer you are able to prevent from having to type the namespace identifier in this case connection, or in your case std. You are able to introduce an entire namespace into a section of code by using a using-directive. This will allow you to call the functions that are in that namespace without needing to use the namespace followed with the scope indicator\" :: \". </p>\n\n<p>The following syntax to do this is as follows:</p>\n\n<pre><code>using namespace connection:\n</code></pre>\n\n<p>or in your case</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>So by doing this with std you will be granting that access to std namespace which includes C++ I/O objects cout and cin to use freely without having to use the namespace and scope operator first. Though a better practice is to limit the scope to the namespace members you want to actually use. On large programs this will be cleaner why of coding as well as avoid several problems. To introduce only specific members of a namespace, such as only introducing the std::cin and std::cout, you do the following:</p>\n\n<pre><code>using std::cin;\nusing std::cout;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5699774, "user_type": "registered", "profile_image": "https://graph.facebook.com/403367113207052/picture?type=large", "display_name": "Kaden Hardy", "link": "https://stackoverflow.com/users/5699774/kaden-hardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "answer_count": 3, "score": -8, "last_activity_date": 1475411321, "creation_date": 1453309032, "last_edit_date": 1453310943, "question_id": 34905981, "link": "https://stackoverflow.com/questions/34905981/what-does-using-namespace-std-do", "title": "What does using namespace std; do?", "body": "<p>What is the matter with this C++ code? </p>\n\n<p>I get an error message saying: that there should be a <code>;</code> before <code>z</code>, which is not correct. The only part that I don't understand is the purpose line 2 serves.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint subtraction(int a, int b)\n{\n    int r;\n    r=a-b;\n    return r;\n}\n\nint main()\n{\n    int z;\n    z = subtraction (5,9);\n    cout z;\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 4627, "user_id": 2572928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcMR5.png?s=128&g=1", "display_name": "David Rushton", "link": "https://stackoverflow.com/users/2572928/david-rushton"}, "edited": false, "score": 0, "creation_date": 1453309104, "post_id": 34905946, "comment_id": 57547988, "body": "It&#39;s unclear what you are asking.  Please can you include a question."}, {"owner": {"reputation": 25, "user_id": 5394403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27141dc0a0fa0150d539b6e11bbe9e16?s=128&d=identicon&r=PG&f=1", "display_name": "VirtualCoder", "link": "https://stackoverflow.com/users/5394403/virtualcoder"}, "reply_to_user": {"reputation": 4627, "user_id": 2572928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcMR5.png?s=128&g=1", "display_name": "David Rushton", "link": "https://stackoverflow.com/users/2572928/david-rushton"}, "edited": false, "score": 0, "creation_date": 1453309219, "post_id": 34905946, "comment_id": 57548065, "body": "@destination-data cleared it up a bit in the end."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453310808, "post_id": 34905946, "comment_id": 57549133, "body": "Is the username actually surrounded by quotes in the file?"}], "answers": [{"tags": [], "owner": {"reputation": 11802, "user_id": 1015164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dfdd18f01b5c44aab80e653799e53e?s=128&d=identicon&r=PG", "display_name": "JamieSee", "link": "https://stackoverflow.com/users/1015164/jamiesee"}, "is_accepted": true, "score": 1, "last_activity_date": 1453311385, "last_edit_date": 1453311385, "creation_date": 1453311049, "answer_id": 34906680, "question_id": 34905946, "link": "https://stackoverflow.com/questions/34905946/c-finding-an-incomplete-string-from-a-text-file/34906680#34906680", "title": "C++ Finding an incomplete string from a text file", "body": "<p>I believe what you're looking for is something like the code below -- possibly with minor tweaks to account for the username being quoted. The key here is to remember that your Buffer variable is a std::string and you can use substring once you have a definite start and end.</p>\n\n<pre><code>std::size_t userNameStartIndex, userNameEndIndex\n\n...\n\nuserNameStartIndex = Buffer.find(\"(username: \")) + 11;\n\nif (userNameStartIndex != std::string::npos) {\n   userNameEndIndex = Buffer.find(\")\", userNameStartIndex);\n\n   if (userNameEndIndex != std::string::npos)\n   {\n       ProfileName = Buffer.substr(userNameStartIndex, userNameEndIndex - userNameStartIndex)\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1621, "user_id": 3452530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I828f.gif?s=128&g=1", "display_name": "Marko Tunjic", "link": "https://stackoverflow.com/users/3452530/marko-tunjic"}, "is_accepted": false, "score": 0, "last_activity_date": 1453658894, "creation_date": 1453658894, "answer_id": 34979447, "question_id": 34905946, "link": "https://stackoverflow.com/questions/34905946/c-finding-an-incomplete-string-from-a-text-file/34979447#34979447", "title": "C++ Finding an incomplete string from a text file", "body": "<p>There are many other ways to do it, but this one would be less painful I guess.</p>\n\n<pre><code>#include &lt;regex&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nstruct Profile\n{   // ...\n    string name;\n};\n\nint main(int argc, const char * argv[])\n{\n\n    std::cout.sync_with_stdio(false); // optional\n\n    // read from file\n    string filename {\"data1.txt\"};\n    ifstream in {filename};\n\n    vector&lt;Profile&gt; profiles;\n    // tweaks this pattern in case you're not happy with it\n    regex pat {R\"(\\(username:\\s*\\\"(.*?)\\\"\\))\"};\n\n    for (string line; getline(in,line); ) {\n\n        Profile p;\n        sregex_iterator first(cbegin(line), cend(line), pat);\n        const sregex_iterator last;\n\n        while (first != last) {\n            // By dereferencing a first, you get a smatch object.\n            // [1] gives you the matched sub-string:\n            p.name = (*first)[1]; // (*first)[1] = sara123452\n            profiles.push_back(p);\n            ++first;\n        }\n    }\n\n    // Test\n    for (const auto&amp; p : profiles)\n       cout &lt;&lt; p.name &lt;&lt; '\\n';\n\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5394403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27141dc0a0fa0150d539b6e11bbe9e16?s=128&d=identicon&r=PG&f=1", "display_name": "VirtualCoder", "link": "https://stackoverflow.com/users/5394403/virtualcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 34906680, "answer_count": 2, "score": 0, "last_activity_date": 1453658894, "creation_date": 1453308955, "last_edit_date": 1453635671, "question_id": 34905946, "link": "https://stackoverflow.com/questions/34905946/c-finding-an-incomplete-string-from-a-text-file", "title": "C++ Finding an incomplete string from a text file", "body": "<p>I have a program which reads text files and parses information from them, and I am trying to accomplish a task like this:</p>\n\n<p>A text file which has about 500 characters of data in it, in this data lies user name like so:</p>\n\n<pre><code>this_just_some_random_data_in_the_file_hdfhehhr2342t543t3y3y\n_please_don't_mind_about_me(username: \"sara123452\")reldgfhfh\n2134242gt3gfd2342353ggf43t436tygrghrhtyj7i6789679jhkjhkuklll\n</code></pre>\n\n<p>The thing is that we <strong>only need to find and write</strong> <code>sara123452</code> to a string from that text file. The user name is unknown of course, and does not have fixed length.</p>\n\n<p>Here is what I have managed to do so far:</p>\n\n<pre><code>std::string Profile = \"http://something.com/all_users/data.txt\";\nstd::string FileName = \"profileInfo.txt\";\nstd::string Buffer, ProfileName;\nstd::ifstream FileReader;\n\nDeleteUrlCacheEntryA(Profile .c_str());\nURLDownloadToFileA(0, Profile .c_str(), FileName.c_str(), 0, 0);\n\nFileReader.open(FileName);\nif (FileReader.is_open()) \n{\n    std::ostringstream FileBuffer;\n    FileBuffer &lt;&lt; FileReader.rdbuf();\n    Buffer= FileBuffer.str();\n    if (Buffer.find(\"(username: \") != std::string::npos) {\n       cout &lt;&lt; \"dont know how to continue\" &lt;&lt; endl;\n    }\n    FileReader.close();\n    DeleteFileA(FileName.c_str());\n}\nelse {\n}\ncin.get();\n</code></pre>\n\n<p>So how can I get the user name string and assign/copy it to <code>ProfileName</code> string?</p>\n"}, {"tags": ["c++", "class", "struct", "set"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453308976, "post_id": 34905908, "comment_id": 57547897, "body": "Do you have an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5799393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dd12532c5f5a44db16755cab70fe1a?s=128&d=identicon&r=PG&f=1", "display_name": "wewe", "link": "https://stackoverflow.com/users/5799393/wewe"}, "edited": false, "score": 0, "creation_date": 1453311130, "post_id": 34906340, "comment_id": 57549354, "body": "Great answer, thanks! What if I didn&#39;t know the value of c a priori? Can i create the struct cmp after i get the value (while it&#39;s running)?"}], "tags": [], "owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "is_accepted": true, "score": 0, "last_activity_date": 1453310562, "last_edit_date": 1453310562, "creation_date": 1453310088, "answer_id": 34906340, "question_id": 34905908, "link": "https://stackoverflow.com/questions/34905908/c-define-an-order-for-a-set-inside-a-class/34906340#34906340", "title": "C++ Define an order for a set inside a class", "body": "<blockquote>\n  <p><code>return (depends on c) ;</code></p>\n</blockquote>\n\n<p>I think it's not good idea to make comapare function depend on <code>c</code>, because your <code>set</code> object is already built tree and no rebuild is supported by <code>std::set</code>.</p>\n\n<p>Additionally, note that <code>std::set</code> requires Comparator which meet <em>strict weak ordering rule</em>. </p>\n\n<p>You could read more at <a href=\"http://www.cplusplus.com/reference/set/set/\" rel=\"nofollow\">'Compare' documentation</a> and <a href=\"https://en.wikipedia.org/wiki/Weak_ordering#Strict_weak_orderings\" rel=\"nofollow\">wikipedia</a></p>\n\n<p>As for your problem, you could create another set with another compare function, and then copy contents here. </p>\n\n<pre><code>typedef std::set&lt;int, cmp2&gt; anotherSet;\nstd::copy(std::begin(firstSet), std::end(firstSet), std::inserter(anotherSet));\n</code></pre>\n\n<p>However, it looks like you actually don't need <code>std::set</code> if you have to reorder it depending on some parameter. Consider using another data structure like vector or list. Additionally, if you need ~O(log N) access complexity, you can organize data to <a href=\"https://en.wikipedia.org/wiki/Heap_%28data_structure%29\" rel=\"nofollow\">heap</a> within your vector.</p>\n"}], "owner": {"reputation": 23, "user_id": 5799393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dd12532c5f5a44db16755cab70fe1a?s=128&d=identicon&r=PG&f=1", "display_name": "wewe", "link": "https://stackoverflow.com/users/5799393/wewe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 34906340, "answer_count": 1, "score": 0, "last_activity_date": 1453311884, "creation_date": 1453308851, "last_edit_date": 1453311884, "question_id": 34905908, "link": "https://stackoverflow.com/questions/34905908/c-define-an-order-for-a-set-inside-a-class", "title": "C++ Define an order for a set inside a class", "body": "<p>I have a set inside a class, and I'd like to define a new order for that set, but the order depends on an attribute of the class. How should I implement it?\nI tried something like this</p>\n\n<pre><code>class myclass{\n    int c;\n    set&lt;int,cmp&gt; myset;\n    struct cmp{\n        bool operator()(const unsint a, const unsint b)\n        const {\n            return (depends on c) ;\n            }\n    };\n}\n</code></pre>\n\n<p>but it didn't work. Any help is appreciated, thanks.</p>\n\n<p>EDIT: The problem is that i don't know c a priori. It's a value i get in input, and then it will be always the same.</p>\n"}, {"tags": ["c++", "ostream"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1453310035, "post_id": 34905791, "comment_id": 57548600, "body": "Instead of <code>ofstream myfile; myfile.open(name);</code> use initialization: <code>ofstream myfile(name);</code>. And you don&#39;t need to explicitly close the file. The destructor does that."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1453309322, "last_edit_date": 1453309322, "creation_date": 1453308677, "answer_id": 34905843, "question_id": 34905791, "link": "https://stackoverflow.com/questions/34905791/write-to-file-in-a-loop-cpp/34905843#34905843", "title": "Write to file in a loop cpp", "body": "<p>You are never clearing out the <code>ostringstream</code> after each iteration.  To do that automatically for you, you can just move the <code>oss</code> declaration into the loop.  This way after each loop the stream will be destroyed and you will start with a fresh stream on the next iteration.</p>\n\n<pre><code>for (i=0; i&lt;5; i++)\n{           \n    for (j=0; j&lt;10; j++)\n    {\n        ostringstream oss;\n        // some calculation that yields Arr with size [5][10]\n        oss &lt;&lt; \"Arr_j_\"&lt;&lt;j+1&lt;&lt;\"_i_\"&lt;&lt;i+1&lt;&lt;\".txt\";\n        printToFile(oss.str(),Arr);\n    } \n} \n</code></pre>\n\n<p>I also removed <code>str=\"\"</code> and <code>str = oss.str();</code> as it is not needed.  You can just use <code>oss.str()</code> as a parameter to <code>printToFile</code> and get rid of <code>str</code>.</p>\n\n<p>I am not sure if it would be faster or not but you could avoid using any type of stringstream and construct the string in the function call using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow\"><code>std::to_string</code></a> to convert the indexes into strings.  that would look like</p>\n\n<pre><code>for (i=0; i&lt;5; i++)\n{           \n    for (j=0; j&lt;10; j++)\n    {\n        // some calculation that yields Arr with size [5][10]\n        printToFile(\"Arr_j_\" + std::to_string(j+1) + \"_i_\" + std::to_string(i+1) + \".txt\", Arr);\n    } \n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1453308718, "creation_date": 1453308718, "answer_id": 34905858, "question_id": 34905791, "link": "https://stackoverflow.com/questions/34905791/write-to-file-in-a-loop-cpp/34905858#34905858", "title": "Write to file in a loop cpp", "body": "<p>declare str and oss inside the loop, you are not clearing oss</p>\n\n<pre><code>  for (i=0; i&lt;5; i++)\n    {           \n        for (j=0; j&lt;10; j++)\n        {\n            // some calculation that yields Arr with size [5][10]\n            string str;\n            ostringstream oss;\n            oss &lt;&lt; \"Arr_j_\"&lt;&lt;j+1&lt;&lt;\"_i_\"&lt;&lt;i+1&lt;&lt;\".txt\";\n            str = oss.str();\n            printToFile(str,Arr);\n        } \n    } \n</code></pre>\n"}], "owner": {"reputation": 1570, "user_id": 1420894, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/rcZ0Q.jpg?s=128&g=1", "display_name": "jarhead", "link": "https://stackoverflow.com/users/1420894/jarhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1564, "favorite_count": 0, "accepted_answer_id": 34905843, "answer_count": 2, "score": -2, "last_activity_date": 1453309322, "creation_date": 1453308528, "last_edit_date": 1453309033, "question_id": 34905791, "link": "https://stackoverflow.com/questions/34905791/write-to-file-in-a-loop-cpp", "title": "Write to file in a loop cpp", "body": "<p>A general question of writing to files in a loop and outside a loop:</p>\n\n<p>suppose I have the following code:</p>\n\n<pre><code># include &lt;iostream&gt;\n# include &lt;string&gt;\n# include &lt;fstream&gt;\n# include &lt;sstream&gt;\n\nusing namespace std;\nvoid printToFile(string name, double **Array) \n{\n    ofstream myfile;\n    myfile.open(name);\n    for (unsigned int m=0; m&lt;5; m++)\n    {\n        for (unsigned int n=0; n&lt;10; n++)\n        {\n            myfile &lt;&lt; Array[m][n] &lt;&lt; \" \";\n        }\n    }\n    myfile.close();\n}\n\nint main()\n{\n    int i,j;\n    double **Arr;\n    string str;\n    ostringstream oss;\n\n    for (i=0; i&lt;5; i++)\n    {           \n        for (j=0; j&lt;10; j++)\n        {\n            // some calculation that yields Arr with size [5][10]\n            str=\"\";\n            oss &lt;&lt; \"Arr_j_\"&lt;&lt;j+1&lt;&lt;\"_i_\"&lt;&lt;i+1&lt;&lt;\".txt\";\n            str = oss.str();\n            printToFile(str,Arr);\n        } \n    } \n    return 0;\n}\n</code></pre>\n\n<p>I can't seem to get the name of the files right, what I get is:</p>\n\n<pre><code>Arr_j_1_i_1.txtArr_j_2_i_1.txtArr... etc\n</code></pre>\n\n<p>Also, my code run finish but the output files stop at <code>i=2</code>, I would also appreciate comments about which steam to use (<code>ostream</code>,<code>fstream</code>,<code>sstream</code>, etc...)</p>\n"}, {"tags": ["c++", "conditional", "logical-operators", "control-flow", "short-circuiting"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453308512, "post_id": 34905762, "comment_id": 57547577, "body": "Any particular reason you thought this might be prohibited?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453308514, "post_id": 34905762, "comment_id": 57547578, "body": "Yes, of course. Though technically this <i>is</i> a conditional expression. But legal \u2260 good. Write the logic out: <code>if (foo()) bar();</code>. What you\u2019ve written isn\u2019t idiomatic C++."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453309516, "post_id": 34905762, "comment_id": 57548253, "body": "@user2357112 Sure, if the second clause does not return a value it&#39;s illegal. So returning a value seems to be required by the short circuit operator. What would happen if there was nothing for it to return to?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453309568, "post_id": 34905762, "comment_id": 57548289, "body": "@KonradRudolph &quot;What you&#39;ve writen isn&#39;t idiomatic C++&quot; Can you explain what you mean here by &quot;idiomatic C++&quot;?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453309690, "post_id": 34905762, "comment_id": 57548374, "body": "@JonathanMee: The value gets ignored. It&#39;s the same as if you call, say, <code>printf</code> without doing anything with the <code>int</code> it returns. (Didn&#39;t know <code>printf</code> had a return value? Now you know.)"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1453309887, "post_id": 34905762, "comment_id": 57548501, "body": "@JonathanMee \u201cwritten such that it doesn\u2019t confuse people\u201d. An idiom is a specific way of speaking/writing that\u2019s composed of more than its parts. In programming, it specifically refers to a typical way of programming in a given language that will yield in code that is not only understandable by experts, but that clearly and concisely expresses the intent without danger of (a) confusion and (b) hard to diagnose bugs. Your particular piece of code has a different way of being expressed in C++ that is unarguably more idiomatic. As a consequence, a reader is left wondering why you deviated."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453309889, "post_id": 34905762, "comment_id": 57548502, "body": "@user2357112 LOL Actually I did. But since I don&#39;t generally do error checking on a <code>printf</code>, I tend to use it a lot more with regard to a <code>scanf</code> or <code>sprintf</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453412568, "post_id": 34905762, "comment_id": 57602489, "body": "@KonradRudolph I disagree. A verbose function that returns the literal <code>true</code> if a certain condition is met is not particularly idiomatic. But like natural language idioms, the clarity in either expression is subjective."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453418618, "post_id": 34905762, "comment_id": 57605172, "body": "@StoryTeller I don\u2019t understand that comment. There\u2019s nothing wrong about functions returning a <code>bool</code>. But I object to the characterisation of idioms as \u201csubjective\u201d because that implies that we cannot use evidence to quantify them. However, we clearly can. It may be hard, but it\u2019s possible."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1453446493, "post_id": 34905762, "comment_id": 57613595, "body": "@KonradRudolph, but they <i>are</i> subjective. As far as natural language idioms go. They don&#39;t carry over in translation, or even make sense out-side of a small geographical area. But back to C++. I meant that a function  checking a condition that is written like this: <code>if(cond) return true; else return false;</code> is in fact the one that is un-idiomatic."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453463501, "post_id": 34905762, "comment_id": 57623386, "body": "@StoryTeller How&#39;s that? Ternaries are un-idiomatic? Yuk yuk yuk"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453463999, "post_id": 34905762, "comment_id": 57623619, "body": "@KonradRudolph I&#39;m gonna agree with StoryTeller on this, there are good paradigms that can be used, but taking the question at hand. How would you say that <code>getWeekday(index, Weekday) &amp;&amp; getName(Weekday, Name);</code> is wrong and <code>if(getWeekday(index, Weekday) getName(Weekday, Name);</code> is right? You could make the claim that one is more readable, but that <i>is</i> subjective. The fact there are a cacophony of coding standards is proof that idioms are like memes. Even their definition is circle dependent."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453475970, "post_id": 34905762, "comment_id": 57631510, "body": "@StoryTeller You\u2019re arguing against a straw man. Nobody (least of all me) said that you should ever write <code>if (cond) return true; else return false;</code> \u2014 that\u2019s obviously nonsense. But according to your logic it\u2019s subjective and there\u2019s nothing wrong with writing it, which is laughable: a lot is wrong with it."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453476068, "post_id": 34905762, "comment_id": 57631583, "body": "@JonathanMee I say it\u2019s wrong because of the explanation I\u2019ve given earlier: it will trip people up because it deviates needlessly from a clear, well-established pattern. There\u2019s simply no reason to write <code>a() &amp;&amp; b();</code> instead of <code>if (a()) b();</code>, and the mere fact that you deviate from such an obvious form will leave people scratching their heads why the hell you chose to write this code, and whether it has some hidden semantic that\u2019s not immediately apparent. Don\u2019t write code as a mind puzzle, write code to convey meaning as clearly as possible."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1453479811, "post_id": 34905762, "comment_id": 57634194, "body": "@KonradRudolph I highly agree with the use of the <code>if</code>-statement based on my past experience. What I&#39;m taking issue with the statement that you can &quot;use evidence to quantify&quot; this. It compiles to the same code, yet we use past coding experience reading and writing code to tell us that the <code>if</code>-statement is conventional. And as soon as I said &quot;past coding experience&quot; it became a subjective, not objective argument, one that can only be &quot;quantified&quot; with anecdotal evidence, ripe for conflicting anecdotal evidence from opposing points of view. Idioms are nice but they <i>are</i> subjective."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1453890616, "post_id": 34905762, "comment_id": 57794329, "body": "@JonathanMee Sorry to dig this up again but \u201cCommitStrip\u201d just published a cartoon that perfectly illustrates the importance of writing idiomatic, <b>unsurprising</b> code: <a href=\"http://www.commitstrip.com/en/2016/01/26/genius-or-stupid/\" rel=\"nofollow noreferrer\">commitstrip.com/en/2016/01/26/genius-or-stupid</a>? \u2014 This is a cartoon so it may seem like hyperbole, but let me assure you that it is not: this literally happens <i>all the time</i>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453903330, "post_id": 34905762, "comment_id": 57803099, "body": "@KonradRudolph What&#39;s that? You said code reviews? Coding standards? Yes, I hardily agree."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1453309649, "post_id": 34905814, "comment_id": 57548343, "body": "Thanks, &quot;condone&quot; was probably the wrong word. I just wanted to know if it was allowed."}, {"owner": {"reputation": 519, "user_id": 728454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24d12badced116f66491642accccb632?s=128&d=identicon&r=PG", "display_name": "mattnz", "link": "https://stackoverflow.com/users/728454/mattnz"}, "edited": false, "score": 1, "creation_date": 1526091578, "post_id": 34905814, "comment_id": 87621023, "body": "&quot;A reader of your code will know that &quot; - in my experience that is a presumption the most programmers are in the top 10 percentile."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 519, "user_id": 728454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24d12badced116f66491642accccb632?s=128&d=identicon&r=PG", "display_name": "mattnz", "link": "https://stackoverflow.com/users/728454/mattnz"}, "edited": false, "score": 0, "creation_date": 1526133138, "post_id": 34905814, "comment_id": 87629827, "body": "@mattnz That depresses me somewhat; perhaps you\u2019re correct. Fortunately for me I\u2019m able to hire in the top 1%."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1453308610, "creation_date": 1453308610, "answer_id": 34905814, "question_id": 34905762, "link": "https://stackoverflow.com/questions/34905762/is-it-legal-to-use-short-circuit-operators-outside-a-conditional/34905814#34905814", "title": "Is it Legal to Use Short Circuit Operators Outside a Conditional?", "body": "<p>It's not the job of the standard to condone coding styles.</p>\n\n<p>There's nothing wrong with your writing <code>getWeekday(index, Weekday) &amp;&amp; getName(Weekday, Name);</code></p>\n\n<p>A reader of your code will know that <code>getName(Weekday, Name)</code> will not be called if <code>getWeekday(index, Weekday)</code> evaluates to <code>false</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1453308875, "creation_date": 1453308875, "answer_id": 34905917, "question_id": 34905762, "link": "https://stackoverflow.com/questions/34905762/is-it-legal-to-use-short-circuit-operators-outside-a-conditional/34905917#34905917", "title": "Is it Legal to Use Short Circuit Operators Outside a Conditional?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow\">From the C++14 standard</a>, section 5.14:</p>\n\n<blockquote>\n  <p>1 The &amp;&amp; operator groups left-to-right. The operands are both\n  contextually converted to bool (Clause  4 ). The result is true if\n  both operands are true and false otherwise. Unlike &amp; , <strong>&amp;&amp; guarantees\n  left-to-right evaluation: the second operand is not evaluated if the\n  first operand is false</strong>. </p>\n  \n  <p>2 The result is a bool . If the second\n  expression is evaluated, every value computation and side effect\n  associated with the first expression is sequenced before every value\n  computation and side effect associated with the second expression.</p>\n</blockquote>\n\n<p>The standard says nothing regarding the context of where <code>&amp;&amp;</code> is used.  If the left hand side evaluates to false, the right hand side is not evaluated.</p>\n\n<p>In this context, the result of the expression is thrown away, similarly to if you did this:</p>\n\n<pre><code>1;\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 34905917, "answer_count": 2, "score": 2, "last_activity_date": 1453308875, "creation_date": 1453308437, "last_edit_date": 1495542665, "question_id": 34905762, "link": "https://stackoverflow.com/questions/34905762/is-it-legal-to-use-short-circuit-operators-outside-a-conditional", "title": "Is it Legal to Use Short Circuit Operators Outside a Conditional?", "body": "<p>The following is a questionable <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a>. <strong>This is not a question about how to improve this code.</strong> What I do want to know is whether the standard condones the use of short circuit operators outside a conditional, as is demonstrated in <code>main</code>.</p>\n\n<pre><code>enum weekday {\n    SUNDAY,\n    MONDAY,\n    TUESDAY,\n    WEDNESDAY,\n    THURSDAY,\n    FRIDAY,\n    SATURDAY,\n    WEEKDAY_SIZE\n};\n\nbool getWeekday(int index, weekday&amp; result) {\n    result = static_cast&lt;weekday&gt;(index);\n\n    return index &gt;= 0 &amp;&amp; index &lt; static_cast&lt;int&gt;(WEEKDAY_SIZE);\n}\n\nbool getName(weekday&amp; index, string&amp; result) {\n    switch (static_cast&lt;weekday&gt;(index)) {\n    case SUNDAY:\n        result = \"Sunday\";\n        break;\n    case MONDAY:\n        result = \"Monday\";\n        break;\n    case TUESDAY:\n        result = \"Tuesday\";\n        break;\n    case WEDNESDAY:\n        result = \"Wednesday\";\n        break;\n    case THURSDAY:\n        result = \"Thursday\";\n        break;\n    case FRIDAY:\n        result = \"Friday\";\n        break;\n    case SATURDAY:\n        result = \"Saturday\";\n        break;\n    default:\n        assert(\"Short Circut Failed\");\n        return false;\n    }\n    return true;\n}\n\nint main() {\n    const int index = 0;\n    weekday Weekday;\n    string Name;\n\n    getWeekday(index, Weekday) &amp;&amp; getName(Weekday, Name);\n\n    cout &lt;&lt; Name &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This works for both Visual Studio 2015 and <a href=\"http://ideone.com/Ra1ke7\" rel=\"nofollow noreferrer\">gcc 5.1</a> without asserting.</p>\n"}, {"tags": ["c++", "c++11", "enums", "strongly-typed-enum"], "answers": [{"tags": [], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "is_accepted": false, "score": 0, "last_activity_date": 1453311055, "last_edit_date": 1453311055, "creation_date": 1453308688, "answer_id": 34905848, "question_id": 34905741, "link": "https://stackoverflow.com/questions/34905741/strongly-typed-enums-not-allowed-to-be-used-as-arguments-of-the-same-underlying/34905848#34905848", "title": "strongly typed enums not allowed to be used as arguments of the same underlying type?", "body": "<p>The purpose of <code>enum class</code> is to keep its instances from implicitly casting to some other type.  This is why removing <code>class</code> compiles: regular <code>enum</code> instances implicitly cast to anything their underlying type can.</p>\n\n<p>When you want to convert an <code>enum class</code> to some other type, you must do so <em>explicitly</em>:</p>\n\n<pre><code>enum class Foo : int { FEE, FYE, FOE, FUM };\nvoid f(Foo x) {};\nvoid g(int x) {};\n\nint main()\n{\n    f(Foo::FEE);                   // Okay: correct type\n    //f(0);                        // Error: no implicit conversion\n    f(static_cast&lt;Foo&gt;(0));        // Okay: explicitly converted\n    //g(Foo::FYE);                 // Error: no implicit conversion\n    g(1);                          // Okay: correct type\n    g(static_cast&lt;int&gt;(Foo::FYE)); // Okay: explicitly converted\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/bbdae2c8b24ef010\" rel=\"nofollow\">Live demo</a>.  See <a href=\"http://en.cppreference.com/w/cpp/types/underlying_type\" rel=\"nofollow\"><code>std::underlying_type</code></a> for when you'd like to programatically extract a type.</p>\n"}, {"comments": [{"owner": {"reputation": 2898, "user_id": 708803, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/7MzEt.jpg?s=128&g=1", "display_name": "bjackfly", "link": "https://stackoverflow.com/users/708803/bjackfly"}, "edited": false, "score": 0, "creation_date": 1453312163, "post_id": 34906058, "comment_id": 57550050, "body": "Yeah this is basically what I ended up doing. Thanks for this explanation"}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 3, "last_activity_date": 1453312868, "last_edit_date": 1453312868, "creation_date": 1453309255, "answer_id": 34906058, "question_id": 34905741, "link": "https://stackoverflow.com/questions/34905741/strongly-typed-enums-not-allowed-to-be-used-as-arguments-of-the-same-underlying/34906058#34906058", "title": "strongly typed enums not allowed to be used as arguments of the same underlying type?", "body": "<p>The whole purpose of scoped enumerations is to prevent implicit conversions to the underlying type. You'll need to cast it to get your code to compile</p>\n\n<pre><code>#include &lt;type_traits&gt;\nY&lt;int, static_cast&lt;std::underlying_type&lt;Test&gt;::type&gt;(Test::TOTAL_ITEMS)&gt; collection;\n</code></pre>\n\n<p>Or, if all you care about is specifying an underlying type for your enum, then drop the <code>class</code> keyword from its definition, and your code will compile as is.</p>\n\n<pre><code>enum Test : std::size_t {\n// ...\n};\n</code></pre>\n"}], "owner": {"reputation": 2898, "user_id": 708803, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/7MzEt.jpg?s=128&g=1", "display_name": "bjackfly", "link": "https://stackoverflow.com/users/708803/bjackfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 34906058, "answer_count": 2, "score": 1, "last_activity_date": 1453312964, "creation_date": 1453308387, "last_edit_date": 1453312964, "question_id": 34905741, "link": "https://stackoverflow.com/questions/34905741/strongly-typed-enums-not-allowed-to-be-used-as-arguments-of-the-same-underlying", "title": "strongly typed enums not allowed to be used as arguments of the same underlying type?", "body": "<p>Consider the following code. I was assuming that by having the type of the strongly typed enum specified that I would be able to use it to pass to functions and templates of the same type since the specified underlying type is the same; although the compiler complains that the cast to the type is missing. In the code below removing the keyword <code>class</code> and the specifier on the enum of <code>Test::TOTAL_ITEMS</code> back to <code>TOTAL_ITEMS</code> will work. I understand that they don't want any type conversions for strongly typed enums but when the underlying type is the same as the type that is expected to be received by the function or template I would expect the compiler to not complain about this and not force a specific cast. Thoughts?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n\ntemplate &lt;typename T, std::size_t N = 10&gt;\nclass Y {\npublic:\n   Y() : z_() {\n   }\n   ~Y() = default;\n\nprivate:\n   T z_[N];\n};\n\nclass X {\npublic:\n   enum class Test : std::size_t {\n      ITEM1 = 0,\n      ITEM2,\n      TOTAL_ITEMS,\n   };\n\nprivate:\n   Y&lt;int, Test::TOTAL_ITEMS&gt; collection;\n};\n\nint main() {\n   X xx;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1453309013, "post_id": 34905670, "comment_id": 57547919, "body": "Framebuffers were added in GL 3. To use any function that is not part of GL 1 or 2 you need to <i>load</i> that function. Doing this manually may be hard, so most programmers use external libraries for this. For example, GLEW: <a href=\"http://glew.sourceforge.net/\" rel=\"nofollow noreferrer\">glew.sourceforge.net</a> A single call to <code>glewInit()</code> will load all needed functions and then you can use then normally (they&#39;re a part of glew header)."}, {"owner": {"reputation": 23, "user_id": 4874222, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-y8X-UF5kD0Q/AAAAAAAAAAI/AAAAAAAAAEs/VlrgZRzgkuM/photo.jpg?sz=128", "display_name": "MetroidChild", "link": "https://stackoverflow.com/users/4874222/metroidchild"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1453311175, "post_id": 34905670, "comment_id": 57549381, "body": "Thanks, strange that isn&#39;t mentioned in the documentation. Now I only have to figure out why it seg errors"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1453312276, "post_id": 34905670, "comment_id": 57550115, "body": "@MetroidChild: &quot;<i>strange that isn&#39;t mentioned in the documentation</i>&quot; The documentation of what? <a href=\"https://www.opengl.org/wiki/Load_OpenGL_Functions\" rel=\"nofollow noreferrer\">OpenGL function loading</a> is a well-known part of building any OpenGL application. There are <a href=\"https://www.opengl.org/wiki/OpenGL_Loading_Library\" rel=\"nofollow noreferrer\">entire libraries</a> that exist to do that, and I would most certainly <i>not</i> suggest GLEW."}, {"owner": {"reputation": 23, "user_id": 4874222, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-y8X-UF5kD0Q/AAAAAAAAAAI/AAAAAAAAAEs/VlrgZRzgkuM/photo.jpg?sz=128", "display_name": "MetroidChild", "link": "https://stackoverflow.com/users/4874222/metroidchild"}, "edited": false, "score": 0, "creation_date": 1453312809, "post_id": 34905670, "comment_id": 57550448, "body": "in the documentation of functions in the doc pages it should say that the functions have to be used through outside programs, why make things harder for the beginner? even though I&#39;ve used opengl for over two years this still comes off as strange"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1453318718, "post_id": 34905670, "comment_id": 57553758, "body": "@NicolBolas What&#39;s wrong with GLEW?"}, {"owner": {"reputation": 23, "user_id": 4874222, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-y8X-UF5kD0Q/AAAAAAAAAAI/AAAAAAAAAEs/VlrgZRzgkuM/photo.jpg?sz=128", "display_name": "MetroidChild", "link": "https://stackoverflow.com/users/4874222/metroidchild"}, "edited": false, "score": 1, "creation_date": 1453320614, "post_id": 34905670, "comment_id": 57554767, "body": "No proper support for opengl 3.2+ it seems, also getting opengl loader generator working was easy enough. BUT I still won&#39;t get anything but a black screen whatever I do"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1453369038, "post_id": 34905670, "comment_id": 57573971, "body": "@MetroidChild: The whole OpenGL loading business has been well documented for a looong time. Also extension loading is not an external program, but part of your own program, either incorporated through a library or by your very own code."}], "owner": {"reputation": 23, "user_id": 4874222, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-y8X-UF5kD0Q/AAAAAAAAAAI/AAAAAAAAAEs/VlrgZRzgkuM/photo.jpg?sz=128", "display_name": "MetroidChild", "link": "https://stackoverflow.com/users/4874222/metroidchild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453318470, "creation_date": 1453308150, "last_edit_date": 1453318470, "question_id": 34905670, "link": "https://stackoverflow.com/questions/34905670/glbindframebuffer-not-defined", "title": "glBindFramebuffer not defined?", "body": "<p>I have reinstalled Code::Blocks and GLFW3 after finally growing tired of not being able to experiment and do stuff in c++ on my pc for about one or two months, I got far enough to where I am trying to make a simple window that gets cleared. The problem is that the window doesn't get cleared at all except for pitch black darkness. At first I thought it might be because I use a function to draw the window, but that wasn't the issue either. I tried adding <code>glBindFramebuffer(GL_FRAMEBUFFER,0);</code> before the clear to see if that would fix the issue, but then the compiler said that glBindFramebuffer wasn't declared.  </p>\n\n<p>Here's main.cpp  </p>\n\n<pre><code>#include &lt;GLFW/glfw3.h&gt;\n\nvoid loop(GLFWwindow* window,bool &amp;quit);\n\nint main()\n{\n    glfwInit();\n\n    glfwWindowHint(GLFW_VERSION_MAJOR,4);\n    glfwWindowHint(GLFW_VERSION_MINOR,5);\n\n    GLFWwindow* window=glfwCreateWindow(512,512,\"Test\",NULL,NULL);\n\n    glClearColor(1.0f,1.0f,1.0f,1.0f);\n\n    bool quit=false;\n    do\n    {\n        loop(window,quit);\n    }while(quit==false);\n\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n\n<p>And loop.cpp</p>\n\n<pre><code>#include &lt;GLFW/glfw3.h&gt;\n\nvoid loop(GLFWwindow* window,bool &amp;quit){\n    glfwPollEvents();\n\n    if(glfwGetKey(window,GLFW_KEY_ESCAPE)==GLFW_PRESS)\n        quit=true;\n\n    glBindFramebuffer(GL_FRAMEBUFFER,0); &lt;-Error here\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glfwSwapBuffers(window);\n}\n</code></pre>\n\n<p>EDIT: So after figuring out I need to load functions I've tried GLEW to no avail, GL3W doesn't seem to work in linux and all other options seems to be too god damned advanced for what it is and won't work in anyways.</p>\n"}, {"tags": ["c++", "visual-studio-2008", "visual-studio-2015", "native", "multi-targeting"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453309000, "post_id": 34905488, "comment_id": 57547910, "body": "It is not only possible, it is <i>required</i> if you need to build C++/CLI assemblies that are still compatible with CLR v2.0.  What went wrong or did you not even try it yet?"}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453311428, "post_id": 34905488, "comment_id": 57549529, "body": "Not tried yet, wanted to ask others first."}, {"owner": {"reputation": 741, "user_id": 1375154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0be211e8b0bc62cff79987699470843?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/1375154/luke"}, "edited": false, "score": 0, "creation_date": 1510243192, "post_id": 34905488, "comment_id": 81361425, "body": "It&#39;s a pity there is no &quot;official&quot; way to only install the old toolset without the whole old VS setup.. btw I have quite a fear installing and old VS over a new one since I feel that the old setups were not so &quot;clean&quot; ;)"}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1510334069, "post_id": 34905488, "comment_id": 81406224, "body": "I hope one day all kinds of setups will be available by 1 click via some kind of VM technology, both remotely and local. There are a lot of promising developments around containerization... As for old VS less clean, that&#39;s a funny notion. While I recognize how much better new VS has become, it also got bigger and more complex. I regard many proven old software versions as more respectful, humble and benign than newest versions. Not much to hold though against newest VS except maybe the telemetry."}], "answers": [{"comments": [{"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1453720588, "post_id": 34988155, "comment_id": 57710664, "body": "Thanks for reporting your experience! Which SDKs and Visual Studio versions are installed side by side in your setup?"}, {"owner": {"reputation": 36, "user_id": 5835959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/310bfd83d54c29950faefdb7cf388bb4?s=128&d=identicon&r=PG&f=1", "display_name": "pruf", "link": "https://stackoverflow.com/users/5835959/pruf"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 1, "creation_date": 1453733817, "post_id": 34988155, "comment_id": 57719122, "body": "Visual Studio 6.0, Visual Studio .NET 2003, Visual Studio 2008 and Visual Studio 2015. SDK&#39;s: Only the SDK&#39;s that come along with the Visual Studios. At the moment still looking for a solution to make this work without switching-off the file tracker (I think this should normally work out of the box as long as there is Visual Studio 2008 installed side by side)."}, {"owner": {"reputation": 36, "user_id": 5835959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/310bfd83d54c29950faefdb7cf388bb4?s=128&d=identicon&r=PG&f=1", "display_name": "pruf", "link": "https://stackoverflow.com/users/5835959/pruf"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 1, "creation_date": 1454942057, "post_id": 34988155, "comment_id": 58255754, "body": "News on this topic: Windows SDK 7.1 has been installed manually Prior to the Visual Studio 2015 installation (this was missed in my first comment). Without Windows SDK7.1 it is not even possible to choose the Visual Studio 2008 (v90) tools."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1454952283, "post_id": 34988155, "comment_id": 58262714, "body": "Thanks @pruf. So my best bet is to install Visual Studio 2008, Windows SDK 7.1 and then Visual Studio 2015 (although problem with TrackFileAccess is expected). Will do that once I get the 2nd workstation which I can safely trash. If you already have the setup, could you perhaps also check whether Code Maps can be used at all in vs2015 on a C++ project that uses v90/vs2008 toolset? This was actually my main reason for wanting to create such setup."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1454954034, "post_id": 34988155, "comment_id": 58263754, "body": "About TrackFileAccess: in <a href=\"http://stackoverflow.com/a/35118409/5140740\">stackoverflow.com/a/35118409/5140740</a> they say &quot;Use WindowsSdkVer.exe to set current SDK to 7.1 to defeat cryptic error in Microsoft.Cpp.x64.Targets(63,5) about missing unnamed required file&quot;."}, {"owner": {"reputation": 36, "user_id": 5835959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/310bfd83d54c29950faefdb7cf388bb4?s=128&d=identicon&r=PG&f=1", "display_name": "pruf", "link": "https://stackoverflow.com/users/5835959/pruf"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 2, "creation_date": 1455182413, "post_id": 34988155, "comment_id": 58377970, "body": "@V-R: Newest Information is that Visual Studio 2010 needs to be installed side by side with Visual Studio 2008 and Visual Studio 2015. What a pity! Looks like one needs to have all Visual Studios installed just to compile with a certain tool chain. Code Maps test ist not possible."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1497275966, "post_id": 34988155, "comment_id": 75996260, "body": "Native MultiTargeting Platform Toolset installer: <a href=\"http://daffodil.codeplex.com/\" rel=\"nofollow noreferrer\">daffodil.codeplex.com</a> &quot;Visual Studio 2012/2013/2015 Daffodil works fine in VS 2012 and later versions as long as VS 2010 is also installed.&quot;"}], "tags": [], "owner": {"reputation": 36, "user_id": 5835959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/310bfd83d54c29950faefdb7cf388bb4?s=128&d=identicon&r=PG&f=1", "display_name": "pruf", "link": "https://stackoverflow.com/users/5835959/pruf"}, "is_accepted": true, "score": 2, "last_activity_date": 1453710965, "creation_date": 1453710965, "answer_id": 34988155, "question_id": 34905488, "link": "https://stackoverflow.com/questions/34905488/using-v90-vs2008-platform-toolset-in-visual-studio-2015/34988155#34988155", "title": "Using v90 (VS2008) Platform Toolset in Visual Studio 2015", "body": "<p>It should be possible. I have tried it but MSBuild fails with the following message:</p>\n\n<p>1>C:\\Program Files\\MSBuild\\Microsoft.Cpp\\v4.0\\Platforms\\Win32\\Microsoft.Cpp.Win32.Targets(57,5): error : Required file \"\" is missing.</p>\n\n<p>The only solution I have found so far was to add the following line in vcxproj file:</p>\n\n<pre><code>&lt;PropertyGroup Label=\"Globals\"&gt;\n  ...\n  &lt;TrackFileAccess&gt;false&lt;/TrackFileAccess&gt;\n&lt;/PropertyGroup&gt;\n</code></pre>\n\n<p>Disadvantage: Always a complete build for every change</p>\n"}], "owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5359, "favorite_count": 2, "accepted_answer_id": 34988155, "answer_count": 1, "score": 4, "last_activity_date": 1496838256, "creation_date": 1453307709, "last_edit_date": 1453328174, "question_id": 34905488, "link": "https://stackoverflow.com/questions/34905488/using-v90-vs2008-platform-toolset-in-visual-studio-2015", "title": "Using v90 (VS2008) Platform Toolset in Visual Studio 2015", "body": "<p><strong>Is it possible (and how) to use VS2015 IDE to build native C++ projects using the compiler, linker, the STL and everything else that comes with VS2008?</strong></p>\n\n<p>What I'm trying to do is called <em>\"C++ Native Multi-Targeting\"</em> and is known that e.g. VS2012 allows usage of VS2008 (v90) toolset, for C++ projects, via Project Properties->Configuration Properties->General->Platform Toolset=v90. Normally, out-of-the-box v90 will not be available, but will appear if you make side-by-side installations of VS2008+VS2010+VS2012 or VS2008+win7.1sdk+VS2012.</p>\n\n<p>But I couldn't find so far any reported attempts at bridging the bigger gap between vs2008 and vs2015 for C++ projects. According to <a href=\"https://msdn.microsoft.com/en-US/library/ff770576%28v=vs.140%29.aspx\" rel=\"noreferrer\">MSDN</a> it seems that officially it's not supported. But I'd like to know if it might work anyway.   </p>\n\n<p>for reference, platform toolset values are:</p>\n\n<pre><code>Visual Studio .NET 2002 (Platform Toolset = 'v70')\nVisual Studio .NET 2003 (Platform Toolset = 'v71')\nVisual Studio 2005      (Platform Toolset = 'v80')\nVisual Studio 2008      (Platform Toolset = 'v90')\nVisual Studio 2010      (Platform Toolset = 'v100')\nVisual Studio 2012      (Platform Toolset = 'v110')\nVisual Studio 2013      (Platform Toolset = 'v112')\nVisual Studio 2015      (Platform Toolset = 'v114')\n</code></pre>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1453308233, "post_id": 34905486, "comment_id": 57547380, "body": "because <code>e</code> is a <code>double</code>, not an <code>int</code>?"}, {"owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1453308397, "post_id": 34905486, "comment_id": 57547505, "body": "changed int, my mistake"}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 1, "last_activity_date": 1453309044, "last_edit_date": 1453309044, "creation_date": 1453308739, "answer_id": 34905872, "question_id": 34905486, "link": "https://stackoverflow.com/questions/34905486/difference-between-input-type-and-argument-type/34905872#34905872", "title": "Difference between input type and argument type", "body": "<p>Because <code>myFunction</code> expects <code>double *[24]</code>, which is an array with 24 elements of type <code>double*</code>, not <code>double (*)[24]</code>, which is a pointer to array <code>double[24]</code>, they're not the same.</p>\n\n<p>Try</p>\n\n<pre><code>double a, b, *c[24], *d[30];\nmyFunction(a, b, c, d, e);\n</code></pre>\n\n<p><a href=\"http://ideone.com/SPAQTj\" rel=\"nofollow\">LIVE</a></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1453308740, "last_edit_date": 1495541248, "creation_date": 1453308740, "answer_id": 34905873, "question_id": 34905486, "link": "https://stackoverflow.com/questions/34905486/difference-between-input-type-and-argument-type/34905873#34905873", "title": "Difference between input type and argument type", "body": "<p>The compiler is telling you that the argument types in the function declaration do not match with the way the function is getting called.</p>\n\n<p>When you have such an error, you'll need to go through each argument type and figure out which one(s) are responsible for the error.</p>\n\n<p>In your case, the third and fourth arguments are problematic.</p>\n\n<p>The argument type, <code>double *c[24]</code> means an array of 24 pointers to <code>double</code>.</p>\n\n<p>The argument being used is <code>&amp;c</code>, which, given your declaration of</p>\n\n<pre><code>double c[24];\n</code></pre>\n\n<p>means a pointer to an array of 24 <code>double</code>s.</p>\n\n<p>Methods to fix the problem:</p>\n\n<p><strong>Method 1: Change the declaration to use a pointer to an array</strong></p>\n\n<pre><code>void myClass::myFunction(double&amp; a,  double&amp; b, double (*c)[24], double (*d)[30], int&amp; e)\n</code></pre>\n\n<p>Then, the call can remain the same.</p>\n\n<p><strong>Method 2: Change the declaration to use a pointer</strong></p>\n\n<pre><code>void myClass::myFunction(double&amp; a,  double&amp; b, double *c, double *d, int&amp; e)\n</code></pre>\n\n<p>and then change the call to:</p>\n\n<pre><code>myFunction(a, b, c, d,e);\n//               ^^ No &amp; operator\n// An array decays to a pointer to the first element\n</code></pre>\n\n<p>More on pointers to arrays and arrays of pointers: <a href=\"https://stackoverflow.com/questions/859634/c-pointer-to-array-array-of-pointers-disambiguation\">C pointer to array/array of pointers disambiguation</a></p>\n"}], "owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34905873, "answer_count": 2, "score": 0, "last_activity_date": 1453309044, "creation_date": 1453307706, "last_edit_date": 1453308387, "question_id": 34905486, "link": "https://stackoverflow.com/questions/34905486/difference-between-input-type-and-argument-type", "title": "Difference between input type and argument type", "body": "<p>My question is: is there a difference between the types/reference/pointer symbols for calling a function and the arguments in the function definition?</p>\n\n<p>This question came up due to the following error I had:</p>\n\n<pre><code>myClass.cpp:358:44: error: no matching function for call to 'myClass::myFunction(double&amp;, double&amp;, double (*)[24], double (*)[30], int&amp;)'\nmyClass.cpp:358:44: note: candidate is:\nmyClass.h:29:8: note: void myClass::myFunction(double&amp;, double&amp;, double**, double**, int&amp;)\n</code></pre>\n\n<p>It is very weird that the compiler suggests that I should use <code>double&amp;</code> for the first argument, because in fact a give a variable that is just <code>double</code>. Same for the second argument. But ok I can accept that... Why is the third and fourth argument not matching? </p>\n\n<pre><code>double a,b,c[24],d[30];\nmyFunction(a, b, &amp;c, &amp;d,e);\n</code></pre>\n\n<p><code>e</code> is a <code>int</code> attribute of <code>myClass</code>. The function is </p>\n\n<pre><code>void myClass::myFunction(double&amp; a,  double&amp; b, double *c[24], double *d[30], int&amp; e)\n</code></pre>\n"}, {"tags": ["c++", "exit", "argc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453306872, "post_id": 34905175, "comment_id": 57546401, "body": "[not the problem] <code>void main</code> is wrong.  <code>main</code> must always return an <code>int</code>"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1453307005, "post_id": 34905175, "comment_id": 57546504, "body": "How are you running your program?  It sounds like you&#39;re looking for command line parameters but you haven&#39;t actually given any.  If you had then argc/argv would have that data."}, {"owner": {"reputation": 5844, "user_id": 4481808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3030aa9dce2e94a4e889ab2ea65d929?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Stigler", "link": "https://stackoverflow.com/users/4481808/sebastian-stigler"}, "edited": false, "score": 1, "creation_date": 1453307311, "post_id": 34905175, "comment_id": 57546743, "body": "For a program with two arguments <code>argc</code> will be 3!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1453307394, "post_id": 34905175, "comment_id": 57546806, "body": "As above, 2 arguments will make <code>argc = 3</code> as the first argument <code>argv[0]</code> is always the name used to invoke the executable. However, &quot;How do I make the command prompt stay and give two inputs&quot;? How should we know without you providing any indication of which shell/IDE/debugger you are using? In simple terms, you just run the executable with those arguments, but we don&#39;t know what you&#39;re using to run it, which might change the answer significantly."}], "answers": [{"tags": [], "owner": {"reputation": 14813, "user_id": 717898, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fca765c2ca8ea02f1897879ec60c4ab0?s=128&d=identicon&r=PG", "display_name": "Andrew Lazarus", "link": "https://stackoverflow.com/users/717898/andrew-lazarus"}, "is_accepted": false, "score": 1, "last_activity_date": 1453307058, "creation_date": 1453307058, "answer_id": 34905259, "question_id": 34905175, "link": "https://stackoverflow.com/questions/34905175/how-is-the-argc-value-initialized-if-i-dont-enter-it-in-the-command-prompt/34905259#34905259", "title": "How is the ARGC value initialized if I don&#39;t enter it in the command prompt?", "body": "<p><code>argc</code> is taken from what you type at the command prompt. There isn't enough info here to see what the name of the executable is, but let's say <code>foo</code>. Then</p>\n\n<pre><code>% foo # argc == 1\n% foo banana # argc == 2, etc.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1453308462, "post_id": 34905273, "comment_id": 57547542, "body": "<i>&quot;that&#39;s why you are getting nothing in argc and argv&quot;</i> You are aware that you&#39;ll get always at least the program name in argv?"}], "tags": [], "owner": {"reputation": 460, "user_id": 5408918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/83dbde93fdcbfdf59e1d65d8ceae946e?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Zeeshan", "link": "https://stackoverflow.com/users/5408918/muhammad-zeeshan"}, "is_accepted": true, "score": 0, "last_activity_date": 1453307083, "creation_date": 1453307083, "answer_id": 34905273, "question_id": 34905175, "link": "https://stackoverflow.com/questions/34905175/how-is-the-argc-value-initialized-if-i-dont-enter-it-in-the-command-prompt/34905273#34905273", "title": "How is the ARGC value initialized if I don&#39;t enter it in the command prompt?", "body": "<p>It seems you haven't given any command line argument, that's why you are getting nothing in argc and argv.</p>\n\n<p>Well you can give any number of command line arguments. If you are using Visual Studio, go to project properties -> Debugging. There you can see a box \"Command line arguments\" Give as many as you want</p>\n"}], "owner": {"reputation": 3, "user_id": 5816933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8fabb5ee5f40a500348929ab22fcf19?s=128&d=identicon&r=PG&f=1", "display_name": "Isha ", "link": "https://stackoverflow.com/users/5816933/isha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 34905273, "answer_count": 2, "score": -3, "last_activity_date": 1453307083, "creation_date": 1453306813, "last_edit_date": 1453307012, "question_id": 34905175, "link": "https://stackoverflow.com/questions/34905175/how-is-the-argc-value-initialized-if-i-dont-enter-it-in-the-command-prompt", "title": "How is the ARGC value initialized if I don&#39;t enter it in the command prompt?", "body": "<p>When I run the following code: </p>\n\n<pre><code>void main(int argc, char** argv)\n{\n\n    if (argc != 2){\n        fprintf(stderr, \"Usage: %s video-dir-path\\n\", argv[0]);\n\n        exit(-1);\n    }\n\n\n    XFishTracker ft(argv[1]);\n\n    int id = 0;\n\n    while (true)\n    {\n        id++;\n...\n...\n</code></pre>\n\n<p>It exits since the value of ARGC is obviously NOT 2. \nIf I comment out the exit (-1) line, I get an ASSERTION ERROR. \nI think because the ARGC isn't 2, my program does not run or proceed. How do I initialize argc to 2 and make the program run, when it exits before I can even see the command prompt properly. </p>\n\n<p>How do I make the command prompt stay and give two inputs so that argc == 2?</p>\n"}, {"tags": ["c++", "qt", "gridview", "asynchronous", "qml"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1453388130, "post_id": 34905146, "comment_id": 57587431, "body": "See <a href=\"http://stackoverflow.com/a/32100486/1329652\">this answer</a> for some ideas."}, {"owner": {"reputation": 595, "user_id": 3417815, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/941b04b0ac31da43b62a5bdbc1387577?s=128&d=identicon&r=PG&f=1", "display_name": "user3417815", "link": "https://stackoverflow.com/users/3417815/user3417815"}, "edited": false, "score": 0, "creation_date": 1586222620, "post_id": 34905146, "comment_id": 108043807, "body": "Why don&#39;t you <code>emit dataChanged()</code> signal? Actually, in the case of QML UIs, it should be emited to sync your UI each time model content changed. This is how you can avoid long freezes of UI elements. Check this paragraph <a href=\"https://doc.qt.io/qt-5/qabstractitemmodel.html#dataChanged\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qabstractitemmodel.html#dataChanged</a> . Sorry if it doesn&#39;t answer your question. I hope it helps."}], "answers": [{"tags": [], "owner": {"reputation": 2221, "user_id": 1145417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dee3f4f911a230888a2924f1ad05620?s=128&d=identicon&r=PG", "display_name": "JuliusG", "link": "https://stackoverflow.com/users/1145417/juliusg"}, "is_accepted": false, "score": 3, "last_activity_date": 1453358987, "last_edit_date": 1495539894, "creation_date": 1453358987, "answer_id": 34917109, "question_id": 34905146, "link": "https://stackoverflow.com/questions/34905146/asynchronous-qt-model-loading-to-qml-gridview/34917109#34917109", "title": "Asynchronous Qt Model loading to QML GridView", "body": "<p>Take a look at <a href=\"https://stackoverflow.com/questions/32082901/custom-listmodel-does-not-notify-the-view/32087965#32087965\">this question</a>. I believe you are having the same issue. The problem with asynchronous model loading is that you can load the model data from a separate thread i.e. call your <code>append(Item *item)</code> function from non GUI thread. But you have to make sure that both <code>beginInsertRows(...)</code> and <code>endInsertRows()</code> functions are run from the main GUI thread. The linked question explains how you can do that.</p>\n"}], "owner": {"reputation": 242, "user_id": 3826400, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e19d35f670143dfa500e299ae6a7f2a1?s=128&d=identicon&r=PG&f=1", "display_name": "Sajmplus", "link": "https://stackoverflow.com/users/3826400/sajmplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1996, "favorite_count": 4, "answer_count": 1, "score": 3, "last_activity_date": 1453358987, "creation_date": 1453306760, "question_id": 34905146, "link": "https://stackoverflow.com/questions/34905146/asynchronous-qt-model-loading-to-qml-gridview", "title": "Asynchronous Qt Model loading to QML GridView", "body": "<p>I have problem with loading <code>QAbstractListModel</code> items to QML <code>GridView</code> asynchronously. When I execute method that loads items to model I have to wait for every item is loaded. How can I get items dynamically (i.e. one by one)?</p>\n\n<p>I have pretty big model objects with 17 fields (<code>QString</code> and <code>QStringList</code>'s). Objects are contained in custom model:</p>\n\n<pre><code>class MyListModel : public QAbstractListModel \n{\n    Q_OBJECT\npublic:\n    enum ListItemRole {\n        IdRole  = Qt::UserRole,\n        VisualIndexRole,\n        NameRole,\n        ...\n    };\n\n    MyListModel(QObject *parent = 0) \n        : QAbstractListModel(parent)\n    {\n    }\n    int rowCount(const QModelIndex &amp;parent) const\n    {\n        Q_UNUSED(parent)\n        return m_data.size();\n    }\n    QVariant data(const QModelIndex &amp;index, int role) const\n    {\n        if( !index.isValid() || index.row() &gt;= m_data.size() || index.row() &lt; 0)\n            return QVariant();\n\n        switch(role) {\n        case NameRole:\n            return QVariant(m_data.at(index.row())-&gt;name());\n\n        ...\n        (rest of the roles)\n        ...\n        }\n    }\n\n\n    QHash&lt;int, QByteArray&gt; roleNames() const\n    {\n        QHash&lt;int, QByteArray&gt; roles;\n        roles[IdRole] = \"folderName\";\n        ...\n        return roles;\n\n    }\n\nprivate:\n    QList&lt;Item*&gt; m_data;\n\n}\n</code></pre>\n\n<p>I'm inserting items to model by append method:</p>\n\n<pre><code>void append(Item *item)\n{\n    beginInsertRows(QModelIndex(), m_data.size(), m_data.size());\n    m_data.append(item);\n    endInsertRows();\n}\n</code></pre>\n\n<p>Items is created in loop in other function. This function loads data from 3 JSON files. It takes about 2 seconds to load 50 items.</p>\n\n<p>On top of this list model, there are two <code>QSortFilterProxyModel</code>'s responsible for sorting and filtering view. Filtering model is registered as QML type and used in <code>GridView</code>.</p>\n\n<p>What I tried:</p>\n\n<ul>\n<li>Use <code>QtConcurrent::run()</code> method for function that create item - FAIL ( view not refreshed after every item) </li>\n<li>Make <code>QThread</code> for every list item, and load it with <code>Worker</code> class - FAIL ( crashes and strange behavior of application, i.e. empty items, empty spaces between delegates and - as in the first point - not async)</li>\n<li>Move model to <code>QThread</code> and use item creating loop in <code>Worker</code> class - Partiall Success ( when I use <code>QCoreApplication::processEvents(QEventLoop::AllEvents,100);</code> as a sleep function I could get one by one items, but there is heavy performance issues and - as i read - it is not good approach)</li>\n</ul>\n\n<p>Is there any possible workarounds for my problem?</p>\n"}, {"tags": ["c++", "input", "char", "integer"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453307250, "post_id": 34905136, "comment_id": 57546693, "body": "Read about <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>std::istream::get</code></a>. Reading the numbers might prove harder though, especially if the limit on using <code>&gt;</code> also prevents <code>&gt;&gt;</code>."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 2, "creation_date": 1453307386, "post_id": 34905136, "comment_id": 57546804, "body": "Can&#39;t use ostream or istream?  Which pretty much puts the kibosh on doing anything with iostream."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453307392, "post_id": 34905136, "comment_id": 57546805, "body": "Also, you can&#39;t use <code>class</code>, but what about <code>struct</code>?"}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "edited": false, "score": 0, "creation_date": 1453307445, "post_id": 34905136, "comment_id": 57546854, "body": "struct is allowed - without it the task would be rather impossible"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1453307527, "post_id": 34905136, "comment_id": 57546899, "body": "If this is indeed the list of your restrictions verbatim, your instructor has no idea what he&#39;s doing. Just have to inform you."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453307616, "post_id": 34905136, "comment_id": 57546957, "body": "Then how about creating a double-linked list (once you know how to get the numbers that is)?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453307725, "post_id": 34905136, "comment_id": 57547037, "body": "Also, you <i>can</i> get the numbers digit by digit (i.e. character by character) and use multiplication to create the final number. So <i>if</i> you can call <code>std::cin.get</code> then it can be solved."}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "edited": false, "score": 0, "creation_date": 1453307830, "post_id": 34905136, "comment_id": 57547104, "body": "So far, 41 out of ~ 120 students succeed. This is introductory course in Programming. Unfortunately I have very little contact with other students, as this is my additional course I took after I graduated, so I don&#39;t know how they did it."}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453307926, "post_id": 34905136, "comment_id": 57547161, "body": "@Joachim Pileborg I like this idea. I would try to get it work."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1453308286, "post_id": 34905136, "comment_id": 57547423, "body": "so basically this is a c program not a c++ program. use scanf etc."}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "edited": false, "score": 0, "creation_date": 1453308630, "post_id": 34905136, "comment_id": 57547668, "body": "scanf is in cstdio, which is forbidden :("}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453308936, "post_id": 34905136, "comment_id": 57547867, "body": "&quot;how to read three letters&quot;. Can you read one letter? can you count to three?"}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "edited": false, "score": 0, "creation_date": 1453309053, "post_id": 34905136, "comment_id": 57547953, "body": "those letters are to be typed without spaces between them"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453309466, "post_id": 34905136, "comment_id": 57548221, "body": "The idea of forbid <code>class</code> but allow <code>struct</code> is... funny. I&#39;m wondering what does your teacher think the differences between the two are."}, {"owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "edited": false, "score": 0, "creation_date": 1453309703, "post_id": 34905136, "comment_id": 57548383, "body": "class is forbidden because it was not in the lecture yet. this is introductory course. I guess it is to prevent students from copying solutions (the list implementation part) from the internet and to make them think."}, {"owner": {"reputation": 2165, "user_id": 1297125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C83I.png?s=128&g=1", "display_name": "AngelCastillo", "link": "https://stackoverflow.com/users/1297125/angelcastillo"}, "edited": false, "score": 0, "creation_date": 1453311958, "post_id": 34905136, "comment_id": 57549885, "body": "std::cin is of type std::istream btw, maybe your teacher want you to feed the program using main arguments. This restriction &quot; Cant use symbols [ , ] , &lt;: and :&gt;&quot; is nonsensical."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1453314916, "post_id": 34905136, "comment_id": 57551641, "body": "I&#39;m tempted to suggest nonsense like building the word <code>string</code> from preprocessor instead of writing it in readable code but I guess that would be unfair to the question. I think you have to be a bit more specific about your problems... Do you know, how to read in a single number character by character? Do you know, how to read in a sequence of numbers? Do you know how to store the read-in numbers? What are the output requirements of the program (storing is no use in itself)?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1453318455, "post_id": 34905136, "comment_id": 57553591, "body": "How do you input characters or numbers if you can&#39;t use <code>iostream</code> or <code>stdio</code>?  The <code>cstdio</code> contains information for <code>stdin</code>, <code>stdout</code>, <code>getchar</code>, etc.  Are you allowed to use OS API to fetch characters?  Or do you have to use hard-coded input?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453359642, "post_id": 34905136, "comment_id": 57568953, "body": "Regarding that edit, you tell <code>get</code> that it can read <i>two</i> characters, and put into a <i>single</i> character. That will lead to problems (and something called <i>undefined behavior</i>). Instead just do e.g. <code>std::cin.get(x1)</code> to read a single character."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453359819, "post_id": 34905136, "comment_id": 57569021, "body": "As for the number, lets say the input is <code>123</code>, then you read the <code>1</code> and add to a (zero initialized) variable. Read another <i>character</i> and if it&#39;s a digit then multiply the variable with <code>10</code> and add the second digit (which leads to the variables value being <code>12</code>), the do the same for the next character (the variable is now <code>123</code>). When you read the next character it will no longer be a digit and you stop reading the number."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453359916, "post_id": 34905136, "comment_id": 57569056, "body": "Also note that <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\">the <code>get</code> function</a> <i>returns</i> the stream, and that a stream <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">can be used as a boolean</a>, so if there&#39;s no more input you can check e.g. <code>if (!std::cin) { &#47;* nothing more to read *&#47; }</code>."}], "owner": {"reputation": 255, "user_id": 4852614, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iM0We.jpg?s=128&g=1", "display_name": "ltw", "link": "https://stackoverflow.com/users/4852614/ltw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453409761, "creation_date": 1453306716, "last_edit_date": 1592644375, "question_id": 34905136, "link": "https://stackoverflow.com/questions/34905136/c-how-can-i-read-lines-in-form-zab-1-2-3-4-5-s-without-being-allowed-to-us", "title": "c++ : How can I read lines in form &quot;zab 1 2 3 4 5 S&quot; without being allowed to use string?", "body": "<p>So I have this really annoying homework - it's about self implemented lists.\nBut horror starts much sooner - at the level of feeding the program with data.</p>\n<p>I need to be able to read input in format:</p>\n<ul>\n<li>three small letters without space (this would be unique identifier of list)</li>\n<li>unlimited number of integers ( from -2^31 to 2^31 ) (this would be the content of list)</li>\n<li>letter R or S (this would mean if numbers are to be stored in the same order that they were entered or in the reverse order) - those letters mean end of input for a given list</li>\n</ul>\n<p>So input should look like this:</p>\n<ul>\n<li>zab 1 2 3 4 5 S</li>\n<li>cvr 9 8 7 R</li>\n<li>xxx S</li>\n</ul>\n<p>The trick is that I'm not allowed to use ANYTHING BESIDES iostream.\nIn particular, this mean that:</p>\n<ul>\n<li>sstream, fstream, istream, ostream, cstdio etc.</li>\n<li>array, list, vector, queue etc.</li>\n<li>symbols [ , ] , &lt;: and :&gt;</li>\n<li>words string and class</li>\n</ul>\n<p>ARE FORBIDDEN.</p>\n<p>My problems are:</p>\n<ul>\n<li>I have no idea how to read three letters ( like zab, gad, pkf ) with restrictions as above? I guess I would store them as three chars, but first i must get them.</li>\n<li>I have no idea how to read any number of integers and stop when there is S or R as an input, but still be able to read and store S or R.</li>\n</ul>\n<p>Any suggestions will be much appreciated.</p>\n<p>EDIT:\nThe solution to read three letters provided by Joachim Pileborg:</p>\n<h1>include </h1>\n<p>using namespace std;</p>\n<p>int main () {</p>\n<pre><code>char x1;\nchar x2;\nchar x3;\n\ncin.get(x1);\ncin.get(x2);\ncin.get(x3);\n\ncout &lt;&lt; x1 &lt;&lt;  x2 &lt;&lt;  x3 &lt;&lt; endl;\n\nreturn 0;\n</code></pre>\n<p>}</p>\n<p>The rest I will try to do in similar way, with integers produced via multiplication of chars that have been read.</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "uwp"], "comments": [{"owner": {"reputation": 16951, "user_id": 2147652, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WqlGm.jpg?s=128&g=1", "display_name": "mybirthname", "link": "https://stackoverflow.com/users/2147652/mybirthname"}, "edited": false, "score": 0, "creation_date": 1453306793, "post_id": 34905089, "comment_id": 57546344, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5107694/how-do-i-add-a-reference-to-an-unmanaged-c-project-called-by-a-c-sharp-project\">How do I add a reference to an unmanaged C++ project called by a C# project?</a>"}, {"owner": {"reputation": 380, "user_id": 5459855, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/897c1572102049496f487271461caf97?s=128&d=identicon&r=PG&f=1", "display_name": "mjw", "link": "https://stackoverflow.com/users/5459855/mjw"}, "reply_to_user": {"reputation": 16951, "user_id": 2147652, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WqlGm.jpg?s=128&g=1", "display_name": "mybirthname", "link": "https://stackoverflow.com/users/2147652/mybirthname"}, "edited": false, "score": 0, "creation_date": 1453307436, "post_id": 34905089, "comment_id": 57546846, "body": "In my new created fresh project it has been solved by adding &quot;Microsoft Visual C++ 2013 Runtime Package for Windows Universal&quot; but in my own project everything is included, but it still doesn&#39;t work. Maybe a wrong configuration in my Runtime Component project."}, {"owner": {"reputation": 2252, "user_id": 2422224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519bb5a0059ea4682209d00f1a5f2b41?s=128&d=identicon&r=PG", "display_name": "Ma3x", "link": "https://stackoverflow.com/users/2422224/ma3x"}, "edited": false, "score": 0, "creation_date": 1453307477, "post_id": 34905089, "comment_id": 57546870, "body": "The only requirements that I can think of are that it&#39;s referenced by the C# project and that the WR component was actually successfully built at least once for VS to recognize the namespace exists."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453307775, "post_id": 34905089, "comment_id": 57547072, "body": "Compile the C++ project so the .winmd file gets created and IntelliSense can work."}, {"owner": {"reputation": 380, "user_id": 5459855, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/897c1572102049496f487271461caf97?s=128&d=identicon&r=PG&f=1", "display_name": "mjw", "link": "https://stackoverflow.com/users/5459855/mjw"}, "edited": false, "score": 0, "creation_date": 1453308177, "post_id": 34905089, "comment_id": 57547342, "body": "Thanks for all your answers, I did all of that, it seems like it really was a strange configuration. I created a new Runtime Component project and everything worked out, I&#39;m doing copy and paste with my code right now, I let you now if that even works."}, {"owner": {"reputation": 380, "user_id": 5459855, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/897c1572102049496f487271461caf97?s=128&d=identicon&r=PG&f=1", "display_name": "mjw", "link": "https://stackoverflow.com/users/5459855/mjw"}, "edited": false, "score": 0, "creation_date": 1453381861, "post_id": 34905089, "comment_id": 57582850, "body": "Ok, it works now, it has been solved by creating a new project im my solution, so it was just something strange."}], "owner": {"reputation": 380, "user_id": 5459855, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/897c1572102049496f487271461caf97?s=128&d=identicon&r=PG&f=1", "display_name": "mjw", "link": "https://stackoverflow.com/users/5459855/mjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1584607463, "creation_date": 1453306563, "last_edit_date": 1584607463, "question_id": 34905089, "link": "https://stackoverflow.com/questions/34905089/use-c-namespace-in-c", "title": "Use C++ namespace in C#", "body": "<p>I am developing a UWP App in C# and I would like to use a C++ function from a C++ \"Windows Runtime Component\" project in the same solution, however, when I add a project reference of the C++ project to the main app, I cant use it's namespace in C# files. When I write </p>\n\n<pre><code>using WindowsRuntimeComponent1;\n</code></pre>\n\n<p>the compiler says that the namespace can't be found. What am I doing wrong?</p>\n\n<p>Here is the C++ header file \"Class1.h\" (Visual Studio Created Class1 by default, I didn't change anything)</p>\n\n<pre><code>#pragma once\nnamespace WindowsRuntimeComponent1\n{\n   public ref class Class1 sealed\n   {\n   public:\n      Class1();\n   };\n }\n</code></pre>\n"}, {"tags": ["c++", "function", "oop", "pointers"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1453306399, "post_id": 34904875, "comment_id": 57546060, "body": "just add the parameter to the <code>AddTask</code> method, or provide an overload to it. I don&#39;t understand what is the problem."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 1, "creation_date": 1453306401, "post_id": 34904875, "comment_id": 57546061, "body": "You need to overload the function AddTask in VirtualGridDriver class"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453311484, "post_id": 34904875, "comment_id": 57549574, "body": "@bolov I have tried to do this but I get the error:  error LNK2001: unresolved external symbol &quot;public: static class std::basic_ofstream&lt;char,struct std::char_traits&lt;char&gt; &gt; CSchedulerDlg::impFl&quot;. Any ideas?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453312646, "post_id": 34904875, "comment_id": 57550351, "body": "@Pii without seeing the code that generated error, no"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453312833, "post_id": 34904875, "comment_id": 57550470, "body": "@bolov I have added the relevant code to my question. If I didn&#39;t include enough code please let me know and I will add as necessary. thank you"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453318882, "post_id": 34904875, "comment_id": 57553845, "body": "need a definition for <code>AddTask</code> with the extra <code>int</code>, like you have done for <code>runJob</code>"}], "owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453312253, "creation_date": 1453306061, "last_edit_date": 1453312253, "question_id": 34904875, "link": "https://stackoverflow.com/questions/34904875/pass-an-additional-parameter-into-a-function-whose-first-argument-is-a-function", "title": "Pass an additional parameter into a function whose first argument is a function pointer", "body": "<p>Suppose we have have the class <code>VirtualGridDriver</code> with public member function:</p>\n\n<pre><code>static CString AddTask(void (*proc)(VGridTaskParam parameters, CString str),\n                       VGridTaskParam parameters, CString str);\n</code></pre>\n\n<p>Moreover, suppose we have the class <code>CSchedulerDlg</code> with public member function:</p>\n\n<pre><code>static void runJob(VGridTaskParam parameters, CString str);\n</code></pre>\n\n<p>Note that the class <code>VGridTaskParam</code>contains <strong>some</strong> necessary paramaters to add a task to a queue. </p>\n\n<p>In my <code>main()</code> source code, I can write, and successful run the function call:</p>\n\n<pre><code>VirtualGridDriver::AddTask(&amp;CSchedulerDlg::runJob, parameters, m_strConnection);\n</code></pre>\n\n<p>I am simply interested in passing an additional parameter into <code>VirtualGridDriver::AddTask</code> as follows: </p>\n\n<pre><code>VirtualGridDriver::AddTask(&amp;CSchedulerDlg::runJob, parameters, m_strConnection, x);\n</code></pre>\n\n<p>where x is an <code>int</code>.</p>\n\n<p>Please notice the additional integer (<strong>which would be instantiated in main() scope</strong>) is passed into the above function. I am not interested in changing the <code>VGridTaskParam</code> class.</p>\n\n<p><strong>Please comment if anything is unclear. I will quickly add additional information.</strong></p>\n\n<hr>\n\n<p><strong>Update</strong>: I have done as the comments suggested, but I now I get an error. \nThis is what I changed:</p>\n\n<p>In <code>VirtualGridDriver</code>, I now have:</p>\n\n<pre><code>static CString AddTask(void (*proc)(VGridTaskParam parameters, CString str, int x), VGridTaskParam parameters, CString str, int x);\n</code></pre>\n\n<p>In <code>CSchedulerDlg</code>, I now have:</p>\n\n<pre><code>static void runJob(VGridTaskParam parameters, CString strConnection, int x);\n</code></pre>\n\n<p>The error I get from these changes is:</p>\n\n<p>error LNK2001: unresolved external symbol \"public: static class std::basic_ofstream > CSchedulerDlg::impFl\" (?impFl@CSchedulerDlg@@2V?$basic_ofstream@DU?$char_traits@D@std@@@std@@A)</p>\n\n<p>Usually this error is because the function definition is not found in the .cpp file, but I have it as follows:</p>\n\n<pre><code>void CSchedulerDlg::runJob(VGridTaskParam parameters, CString strConnection, int x) {// do stuff}\n</code></pre>\n\n<p>With these changes, I should be able to invoke the method as:</p>\n\n<pre><code>int x = 1;\nVirtualGridDriver::AddTask(&amp;CSchedulerDlg::runJob, parameters, m_strConnection, x);\n</code></pre>\n\n<p>However, I still receive the aforementioned error message. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453305953, "post_id": 34904811, "comment_id": 57545743, "body": "<i>But it collapse if I debug.</i> Can you explain that?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453306186, "post_id": 34904811, "comment_id": 57545906, "body": "Have you tried to debug your code? Step through it using a debugger, line by line, to see that it actually does what you expect it to, and that all variables are set as you expect them to?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1453306354, "post_id": 34904811, "comment_id": 57546036, "body": "Looks like you are trying to convert the text &quot;$GPRMC&quot; into an integer.  I don&#39;t see any decimal digits in that string."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453306642, "post_id": 34904811, "comment_id": 57546248, "body": "By the way, floating point data types on computers are not really good enough to store coordinates received by a GPS, unless you are content with there being some slight errors. Same with the time."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453308625, "post_id": 34904811, "comment_id": 57547663, "body": "<a href=\"http://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\">This</a> might be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1453306484, "creation_date": 1453306484, "answer_id": 34905052, "question_id": 34904811, "link": "https://stackoverflow.com/questions/34904811/c-string-to-double/34905052#34905052", "title": "C++ string to double", "body": "<pre><code>Kind=stod(kind);\n</code></pre>\n\n<p>does not seem right. The value of <code>kind</code> is going to be <code>\"$GPRMC\"</code>. You cannot extract a <code>double</code> from it.</p>\n\n<p><strong>PS</strong> Fixing it may not fix any other problems you might have.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1453306636, "creation_date": 1453306636, "answer_id": 34905119, "question_id": 34904811, "link": "https://stackoverflow.com/questions/34904811/c-string-to-double/34905119#34905119", "title": "C++ string to double", "body": "<p>In a review, let us consider how you parse the first datum.  </p>\n\n<pre><code>   com_1=gps.find(\",\");\n</code></pre>\n\n<p>The above line finds the position of the first comma, good.  </p>\n\n<p>Next, you extract the substring of the first item:  </p>\n\n<pre><code>kind=gps.substr(0,com_1);\n</code></pre>\n\n<p>The variable <code>kind</code> should be \"$GPRMC\", according to your input.</p>\n\n<p>Finally, you convert this text to a double:  </p>\n\n<pre><code>Kind=stod(kind);\n// In other words, this is equivalent to  \n// Kind = stod(\"$GPRMC\");  \n</code></pre>\n\n<p>The <code>stod</code> function fails because there are no digits in the string.  </p>\n\n<p>BTW, differing variable names by case, such as <code>kind</code> vs. <code>Kind</code>, is considered as poor coding practices.  Most coding guidelines forbid this and require variable names to differ by more than case.  </p>\n"}], "owner": {"reputation": 23, "user_id": 5773969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ItZpwLZkcQs/AAAAAAAAAAI/AAAAAAAAABw/ddP0E6WoFuU/photo.jpg?sz=128", "display_name": "Kim Dohyeong", "link": "https://stackoverflow.com/users/5773969/kim-dohyeong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 34905119, "answer_count": 2, "score": 0, "last_activity_date": 1453306636, "creation_date": 1453305845, "last_edit_date": 1453305901, "question_id": 34904811, "link": "https://stackoverflow.com/questions/34904811/c-string-to-double", "title": "C++ string to double", "body": "<p>I was trying to make a program parsing gps value($GPRMC).</p>\n\n<p>First successfully parse the string from whole line.</p>\n\n<pre><code>$GPRMC,062513.000,A,3645.9487,N,12716.8382,E,1.76,295.08,160116,,,A*6E\n</code></pre>\n\n<p>After I did it, I used the function <code>stod()</code> for string to be double.</p>\n\n<p>But it collapse if I debug.</p>\n\n<p>code here.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\n\nusing namespace std;\n\n\n//\"$GPRMC,062513.000,A,3645.9487,N,12716.8382,E,1.76,295.08,160116,,,A*6E\";\n\nint main()\n{\n    string gps=\"$GPRMC,062516.000,A,3645.9494,N,12716.8365,E,1.82,302.69,160116,,,A*63\";\n\n    int com_1;\n    int com_2;\n    int com_3;\n    int com_4;\n    int com_5;\n    int com_6;\n    int com_7;\n    int com_8;\n    int com_9;\n\n    string kind;\n    string time;\n    string state;\n    string latitude;\n    string n_s;\n    string longitude;\n    string e_w;\n    string knot;\n    string degree;\n\n    double Kind;\n    double Time;\n\n    double Latitude;\n\n    double Longitude;\n\n    double Knot;\n    double Degree;\n\n    com_1=gps.find(\",\");\n    com_2=gps.find(\",\",com_1+1);\n    com_3=gps.find(\",\",com_2+1);\n    com_4=gps.find(\",\",com_3+1);\n    com_5=gps.find(\",\",com_4+1);\n    com_6=gps.find(\",\",com_5+1);\n    com_7=gps.find(\",\",com_6+1);\n    com_8=gps.find(\",\",com_7+1);\n    com_9=gps.find(\",\",com_8+1);\n\n\n    kind=gps.substr(0,com_1);\n    time=gps.substr(com_1+1,com_2-com_1-1);\n    //state=gps.substr(com_2+1,com_3-com_2-1);\n    latitude=gps.substr(com_3+1,com_4-com_3-1);\n    //n_s=gps.substr(com_4+1,com_5-com_4-1);\n    longitude=gps.substr(com_5+1,com_6-com_5-1);\n    //e_w=gps.substr(com_6+1,com_7-com_6-1);\n    knot=gps.substr(com_7+1,com_8-com_7-1);\n    degree=gps.substr(com_8+1,com_9-com_8-1);\n\n\n    Kind=stod(kind);\n    Time=stod(time);\n    //State=stod(state);\n    Latitude=stod(latitude);\n    //N_s=stod(n_s);\n    Longitude=stod(longitude);\n    //E_w=stod(e_w);\n    Knot=stod(knot);\n    Degree=stod(degree);\n</code></pre>\n"}, {"tags": ["c++", "qt"], "owner": {"reputation": 4437, "user_id": 258418, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4677591288653a8dcc9041884e95c38c?s=128&d=identicon&r=PG", "display_name": "ted", "link": "https://stackoverflow.com/users/258418/ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1453310696, "creation_date": 1453305340, "last_edit_date": 1453310696, "question_id": 34904640, "link": "https://stackoverflow.com/questions/34904640/qt-qitemdelegate-customeditor-and-starting-edit-on-hover", "title": "QT QItemDelegate, CustomEditor and starting edit on hover", "body": "<p>I have a problem that my custom editor opens properly on hovering the cell it is in, however it does not close reliably when the mouse leaves the editor area, resulting in errors when the hover tries to open an editor for the next cell that is beeing hovered.</p>\n\n<p>I wrote my own delegate with its own editor, and would like to start editing cells on hover. To do so I added the following event filter to my delegate:</p>\n\n<pre><code>bool starDelegate::eventFilter(QObject* watched, QEvent* event) {\n    switch(event-&gt;type()) {\n        case QEvent::MouseMove: {\n            QAbstractItemView* table = dynamic_cast&lt;QAbstractItemView*&gt;(watched-&gt;parent());\n\n            if(!table) {\n                return false;\n            }\n\n            QMouseEvent* mouseEvent = static_cast&lt;QMouseEvent*&gt;(event);\n            QModelIndex index = table-&gt;indexAt(mouseEvent-&gt;pos());\n\n            if(index.isValid() &amp;&amp; index.row() != editRow &amp;&amp; index.column() == column) {\n                editRow = index.row();\n                view-&gt;edit(index);\n            }\n            } break;\n        case QEvent::Leave:\n            editRow = -1;\n            break;\n        default:;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>While the <code>editRow</code> prevents me from opening the Editor multiple times, which results in the error message <code>edit: editing failed</code>. </p>\n\n<p>I also close the editor when the mouse leaves the editor (to avoid having to editors open), with the following code:</p>\n\n<pre><code>void starEditor::leaveEvent(QEvent* event) {\n    (void)event;\n    //TODO: hint top/bottom?\n    emit closeEditor(this, QAbstractItemDelegate::NoHint);\n}\n</code></pre>\n\n<p>I still sometimes get this error message when I move the mouse very quickly. When this is the case I see that the editor was not closed and I keep receiving this error message until I hover over the row that still has the editor open and leave it again so that the code that closes the editor triggers.</p>\n\n<p>I assume the cause is, that the editor misses the <code>leaveEvent</code>. How could I remedy this? I.e. how can I know that the Editor I created in <code>createEditor</code> still exists, and needs to be closed before I can create a new editor? Or is there a sane way to <em>reliably</em> close the editor?</p>\n"}, {"tags": ["c++", "deque", "push-back", "double-free", "invalid-pointer"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1453305437, "post_id": 34904632, "comment_id": 57545344, "body": "What&#39;s inside your containers? Ideally, you&#39;d provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1453305464, "post_id": 34904632, "comment_id": 57545369, "body": "Was the documentation for <a href=\"http://en.cppreference.com/w/cpp/container/deque/front\" rel=\"nofollow noreferrer\"><code>front</code></a> and<a href=\"http://en.cppreference.com/w/cpp/container/deque/push_back\" rel=\"nofollow noreferrer\"><code>push_back</code></a> not clear on what happens?"}, {"owner": {"reputation": 61, "user_id": 4966326, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Qgd-WBhMZIQ/AAAAAAAAAAI/AAAAAAAAAMk/k743r_vJu6A/photo.jpg?sz=128", "display_name": "Filipe Santos", "link": "https://stackoverflow.com/users/4966326/filipe-santos"}, "edited": false, "score": 0, "creation_date": 1453306167, "post_id": 34904632, "comment_id": 57545897, "body": "@StoryTeller, you were right. It was a mistake commited here, but not in the program. Thank you! I edited the post."}, {"owner": {"reputation": 61, "user_id": 4966326, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Qgd-WBhMZIQ/AAAAAAAAAAI/AAAAAAAAAMk/k743r_vJu6A/photo.jpg?sz=128", "display_name": "Filipe Santos", "link": "https://stackoverflow.com/users/4966326/filipe-santos"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453306184, "post_id": 34904632, "comment_id": 57545904, "body": "@5gon12eder, the container has doubles."}, {"owner": {"reputation": 61, "user_id": 4966326, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Qgd-WBhMZIQ/AAAAAAAAAAI/AAAAAAAAAMk/k743r_vJu6A/photo.jpg?sz=128", "display_name": "Filipe Santos", "link": "https://stackoverflow.com/users/4966326/filipe-santos"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453306195, "post_id": 34904632, "comment_id": 57545911, "body": "@NathanOliver, perhaps I am having a problem to interpret the documentation (translation issues) :p it is not very clear, to me. I don&#39;t understand if i am copying (push_back) the reference given by front() or if I am copying the value given by the reference of front()."}, {"owner": {"reputation": 61, "user_id": 4966326, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Qgd-WBhMZIQ/AAAAAAAAAAI/AAAAAAAAAMk/k743r_vJu6A/photo.jpg?sz=128", "display_name": "Filipe Santos", "link": "https://stackoverflow.com/users/4966326/filipe-santos"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453306236, "post_id": 34904632, "comment_id": 57545941, "body": "@AndyG, sorry for the lack of information in the original post. I am using mutexes already :/"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453306252, "post_id": 34904632, "comment_id": 57545955, "body": "If the deque contains native types like <code>double</code>, then the problem is not with the <code>deque</code> (or the underlying <code>vector</code>) but in how you use them. And if you have multiple thread then you <i>really</i> need to protect the containers (or container adapters) if you multiple threads can access them simultaneously. Read more about the <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">standard thread support library</a>, especially about its <a href=\"http://en.cppreference.com/w/cpp/thread#Mutual_exclusion\" rel=\"nofollow noreferrer\">mutual exclusion</a> facilities."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453306828, "post_id": 34904632, "comment_id": 57546372, "body": "You cannot &quot;push back a reference&quot; because the deque (or its underlying container) does not contain references. You pass a reference to <code>push_back</code> but there its lifetime ends."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1453306021, "creation_date": 1453306021, "answer_id": 34904859, "question_id": 34904632, "link": "https://stackoverflow.com/questions/34904632/what-exactly-happens-when-i-do-buffer1-push-backbuffer2-front-in-c/34904859#34904859", "title": "What exactly happens when I do buffer1.push_back(buffer2.front()) in C++?", "body": "<p>To start lets take a look at the functions you're calling. The <a href=\"http://en.cppreference.com/w/cpp/container/deque/push_back\" rel=\"nofollow\"><code>std::deque::push_back</code></a> function takes its argument by reference, so no copying there. And <a href=\"http://en.cppreference.com/w/cpp/container/deque/front\" rel=\"nofollow\"><code>std::deque::front</code></a> returns a <code>reference</code> (or <code>const_reference</code>) so no copying there either.</p>\n\n<p>Now lets take a look at the underlying container, which defaults to <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a>, and it's the same story with its <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow\"><code>push_back</code></a> and <a href=\"http://en.cppreference.com/w/cpp/container/vector/front\" rel=\"nofollow\"><code>front</code></a> functions as for <code>std::deque</code>.</p>\n\n<p>However if you look closer at the <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow\"><code>std::vector::push_back</code></a> reference, you will see that for the first overload the data needs to be <a href=\"http://en.cppreference.com/w/cpp/concept/CopyInsertable\" rel=\"nofollow\"><em>CopyInsertable</em></a>, because that's really how the element inside the vector is initialized, by <em>copying</em> the object you \"push back\" (or <em>moving</em> if your compiler and the data type supports it).</p>\n\n<p>So in the end, if you have a complex class you should follow <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow\">the rules of three, five or zero</a>, and if it does that then you should be alright and not have memory problem regarding this anyway. If you <em>do</em> follow the rules of three, five or zero, and still have problems, then the problem might be somewhere else. Try to use a memory debugger like e.g. <a href=\"http://valgrind.org/\" rel=\"nofollow\">Valgrind</a> or similar. And if you have a multi-threaded application you need to protect resources that can be modified by multiple threads simultaneously (using e.g. mutexes or semaphores).</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 4651414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567bf8fab2fc52aec82cef5bdf88a2f3?s=128&d=identicon&r=PG&f=1", "display_name": "Randir", "link": "https://stackoverflow.com/users/4651414/randir"}, "is_accepted": false, "score": 0, "last_activity_date": 1453306745, "creation_date": 1453306745, "answer_id": 34905139, "question_id": 34904632, "link": "https://stackoverflow.com/questions/34904632/what-exactly-happens-when-i-do-buffer1-push-backbuffer2-front-in-c/34905139#34905139", "title": "What exactly happens when I do buffer1.push_back(buffer2.front()) in C++?", "body": "<p>According to <a href=\"http://www.cplusplus.com/reference/deque/deque/front/\" rel=\"nofollow\">this</a> std::deque::front returns a reference to the first element: </p>\n\n<blockquote>\n  <p>deque::front:</p>\n  \n  <p>Returns a reference to the first element in the deque container.</p>\n</blockquote>\n\n<p>And according to <a href=\"http://www.cplusplus.com/reference/deque/deque/push_back/\" rel=\"nofollow\">this</a> deque::push_back copies (or moves) the content of the given element:</p>\n\n<blockquote>\n  <p>deque::push_back:</p>\n  \n  <p>Adds a new element at the end of the deque container, after its\n  current last element. The content of val is copied (or moved) to the\n  new element.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 446252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/3fWRI.jpg?s=128&g=1", "display_name": "Adam Trhon", "link": "https://stackoverflow.com/users/446252/adam-trhon"}, "is_accepted": false, "score": 0, "last_activity_date": 1453307212, "creation_date": 1453307212, "answer_id": 34905323, "question_id": 34904632, "link": "https://stackoverflow.com/questions/34904632/what-exactly-happens-when-i-do-buffer1-push-backbuffer2-front-in-c/34905323#34905323", "title": "What exactly happens when I do buffer1.push_back(buffer2.front()) in C++?", "body": "<p>I would say your problem is somewhere else. Since you have the snippets in different threads, <em>their order may not be defined</em>. You can either end up with this sequence:</p>\n\n<pre><code>double a = 20.1;\nbuffer1.push_back(a);\nbuffer2.push_back(buffer1.front());\n</code></pre>\n\n<p>in which case everything goes ok, or with this sequence:</p>\n\n<pre><code>buffer2.push_back(buffer1.front());\ndouble a = 20.1;\nbuffer1.push_back(a);\n</code></pre>\n\n<p>in which case you call <code>buffer1.front()</code> on an empty container. Copy constructor gets called on some random data and yields memory problems.</p>\n"}], "owner": {"reputation": 61, "user_id": 4966326, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Qgd-WBhMZIQ/AAAAAAAAAAI/AAAAAAAAAMk/k743r_vJu6A/photo.jpg?sz=128", "display_name": "Filipe Santos", "link": "https://stackoverflow.com/users/4966326/filipe-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1453307212, "creation_date": 1453305310, "last_edit_date": 1453306303, "question_id": 34904632, "link": "https://stackoverflow.com/questions/34904632/what-exactly-happens-when-i-do-buffer1-push-backbuffer2-front-in-c", "title": "What exactly happens when I do buffer1.push_back(buffer2.front()) in C++?", "body": "<p>Help me understand this.\nHere is the context.</p>\n\n<ul>\n<li>I am writing a program in C++.</li>\n<li>I have 2 buffers (deque). Let's call    them buffer1 and buffer2;</li>\n<li>I have 2 threads: one thread is filling buffer1 with random values. The other one is copying the oldest buffer1 value to buffer2;</li>\n<li>I am using mutexes.</li>\n</ul>\n\n<p>I want to copy the value inside the 1st position of buffer1 to the buffer2 and, in order to perform to do this, I write the following code line:</p>\n\n<p>THREAD 1</p>\n\n<pre><code>   double a = 20.1;\n   buffer1.push_back(a);\n</code></pre>\n\n<p>THREAD 2</p>\n\n<pre><code>buffer2.push_back(buffer1.front());\n</code></pre>\n\n<p>My question is:\n<strong>performing this, am I copying the value or passing the value by reference?</strong>\nI explain my question. I am having a random memory problem while running the program. I want to be sure if the source of the problem is here.</p>\n\n<p>Thank you, everyone.</p>\n"}, {"tags": ["c++", "qt", "post", "qt5", "qiodevice"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1453369886, "post_id": 34904432, "comment_id": 57574524, "body": "I remember digging through the code, and <code>QNAM</code> buffers on upload iff 1) the <code>QIODevice</code> is sequential, <i>and</i> 2) a <code>Content-Size</code> header is missing from the network request. IOW: if Qt can&#39;t know how big is the data to upload unless it reads it all. Is it your case?"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1453452834, "post_id": 34904432, "comment_id": 57616669, "body": "@peppe - thanks for the response. Actually (and I&#39;m quite sorry about wasting your time) the data was actually sent - the other party did respond prematurely with 413 (entity too large) and for some reason Wireshark didn&#39;t catch this as a valid HTTP request. But I also debugged Qt (since Wireshark gave me the impression that nothing was sent) and Qt works fine - if you set a Content-Length on the request then it just reads from the device and transmits in parallel unitl all the data is read."}], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453447717, "creation_date": 1453304750, "last_edit_date": 1453447717, "question_id": 34904432, "link": "https://stackoverflow.com/questions/34904432/how-to-prevent-qnetworkaccessmanager-from-buffering-post-contents-from-qiodevice", "title": "How to prevent QNetworkAccessManager from buffering POST contents from QIODevice?", "body": "<p>I am not sure if the functionality I need isn't something that Qt is just not capable of but it seems that since there are multiple valid use cases maybe I am doing something wrong and someone has already dealt with this.</p>\n\n<p>What I want do to is pretty simple - I want to issue a POST request with a given content length and provide the actual POST contents on the fly from a <code>QIODevice</code>. <code>QNetworkAccessManager</code> has a method <code>QNetworkReply * QNetworkAccessManager::post(const QNetworkRequest &amp; request, QIODevice * data)</code> which seems to be ideal for this. The content length is large (lets assume 8 GB) and it seems that Qt tries to call <code>QIODevice::readData</code> to obtain all of the data before anything is emitted to the network (at least Wireshark is not showing anything whereas setting a small content length, for example 4, produces the behavior where 4 bytes are read and everything is transmitted). This has lead me to believe that Qt actually wants to buffer all of the POST content. I have explicitly set the <code>QNetworkRequest::DoNotBufferUploadDataAttribute</code> attribute but that does not change this.</p>\n\n<p>It could be that it actually works like this and there is nothing I can do about it, but in that case, how would huge file upload that simply do not fit in memory work? Anyhow, any feedback from people who have experienced the same problem is welcome while I debug to see if Qt is actually buffering the whole thing.</p>\n"}, {"tags": ["c++", "visual-studio", "opengl", "graphics", "vertex"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1453304675, "post_id": 34904339, "comment_id": 57544772, "body": "&quot;has stopped working&quot; is a bit vague. What happens when you run the code, how does it differ from what you are expecting? Are there any compile-time / run-time errors?"}, {"owner": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1453304842, "post_id": 34904339, "comment_id": 57544894, "body": "Ah my bad, it used to create a visible mesh for the vertices that I had, whether that was the simple square or a large set of vertices from a matrix. Then it simply stopped creating the mesh, no errors to be seen, it just no longer draws anything."}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1453352754, "post_id": 34904339, "comment_id": 57566471, "body": "Try calling <code>glGetError()</code> if you have not already done so. What type/version of context are you creating?"}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "edited": false, "score": 0, "creation_date": 1453305085, "post_id": 34904464, "comment_id": 57545078, "body": "Somehow missed that line in my question, updated the code in the top. But it&#39;s definitely there in original code. Even if that was the issue, the first 2D square should work. To clarify, this is not a fix."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1453305090, "post_id": 34904464, "comment_id": 57545081, "body": "is this a question or an answer?"}, {"owner": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "edited": false, "score": 0, "creation_date": 1453305448, "post_id": 34904464, "comment_id": 57545356, "body": "Surely the initial 2D square should work fine though, as it not affected by this?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "edited": false, "score": 0, "creation_date": 1453305685, "post_id": 34904464, "comment_id": 57545540, "body": "@Calco Yes it works but what about <code>short indices2[(amountOfHorizontalScans * 480 * 3)];</code> did you declare <code>amountOfHorizontalScans</code> as constant?"}, {"owner": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "edited": false, "score": 0, "creation_date": 1453373629, "post_id": 34904464, "comment_id": 57577219, "body": "amountOfHorizontalScans is a constant. I am inclined to believe it is something memory related, as it works again after turning my PC off and on again! Creating the pointer and calling delete as above now causes an &#39;Access Violation&#39; at runtime when calling glDrawElements."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "edited": false, "score": 0, "creation_date": 1453386290, "post_id": 34904464, "comment_id": 57586044, "body": "@Calco &#39;Access Violation&#39; can also be caused by invalid index specification means out of array border read. So check your index calculation the issue may lay in that place."}], "tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 2, "last_activity_date": 1453306161, "last_edit_date": 1453306161, "creation_date": 1453304871, "answer_id": 34904464, "question_id": 34904339, "link": "https://stackoverflow.com/questions/34904339/gldrawelements-has-stopped-working/34904464#34904464", "title": "glDrawElements has stopped working", "body": "<p>You cannot allocate dynamically arrays in stack:</p>\n\n<pre><code>short indices2[(amountOfHorizontalScans * 480 * 3)];\n</code></pre>\n\n<p>In code:</p>\n\n<pre><code>short indices2[(amountOfHorizontalScans * 480 * 3)];\nfor (int row = 0; row&lt;amountOfHorizontalScans - 1; row++) {\n    if ((row &amp; 1) == 0) { // even rows\n        for (int col = 0; col&lt;480; col++) {\n            indices2[i++] = col + row * 480;\n            indices2[i++] = col + (row + 1) * 480;\n        }\n    }\n    else { // odd rows\n        for (int col = 480 - 1; col&gt;0; col--) {\n            indices2[i++] = col + (row + 1) * 480;\n            indices2[i++] = col - 1 + +row * 480;\n        }\n    }\n}\n</code></pre>\n\n<p>Must be </p>\n\n<pre><code>short* indices2 = new short[(amountOfHorizontalScans * 480 * 3)];\n</code></pre>\n\n<p>than free allocated memory </p>\n\n<pre><code>delete [] indices2;\n</code></pre>\n\n<p>Triangle strip is pretty tricky mode did you try to work directly with <code>GL_TRIANGLES</code>.</p>\n"}], "owner": {"reputation": 1190, "user_id": 5178283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a4CHB.jpg?s=128&g=1", "display_name": "Calco", "link": "https://stackoverflow.com/users/5178283/calco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453375216, "creation_date": 1453304502, "last_edit_date": 1453375216, "question_id": 34904339, "link": "https://stackoverflow.com/questions/34904339/gldrawelements-has-stopped-working", "title": "glDrawElements has stopped working", "body": "<p>I had <code>glDrawElements</code> working consistently, initially with a simple box and then with more complex shapes made up of a large amount of vertices. Then it simply stopped drawing the mesh. I have taken the code back to it's most basic, just drawing 2 triangles to make a 2D square. This also no longer works.</p>\n\n<pre><code>void createMesh(void) {\n    float vertices[12];\n    vertices[0] = -0.5; vertices[1] = -0.5; vertices[2] = 0.0; // Bottom left corner\n    vertices[3] = -0.5; vertices[4] = 0.5; vertices[5] = 0.0; // Top left corner\n    vertices[6] = 0.5; vertices[7] = 0.5; vertices[8] = 0.0; // Top Right corner\n    vertices[9] = 0.5; vertices[10] = -0.5; vertices[11] = 0.0; // Bottom right corner\n\n    short indices[] = { 0, 1, 2, 0, 2, 3};\n\n    glEnableClientState(GL_VERTEX_ARRAY);        // Enable Vertex Arrays\n\n    glVertexPointer(3, GL_FLOAT, 0, vertices); // Set The Vertex Pointer To Our Vertex Data\n\n    glDrawElements(GL_TRIANGLES,6 , GL_UNSIGNED_SHORT, indices); \n\n    glDisableClientState(GL_VERTEX_ARRAY);\n}\n</code></pre>\n\n<p>The more advanced code that used to work is shown below:</p>\n\n<pre><code>void createMesh(void) {\nfloat vertices[(amountOfHorizontalScans * 480 * 3)];// Amount of vertices\n    //build the array of vertices from a matrix of data\n    int currentVertex = -1;\n    std::vector &lt;std::vector&lt;double&gt;&gt; currentPointCloudMatrix = distanceCalculator.getPointCloudMatrix();\n    double plotY = 0;\n    double plotX = 0;\n    for (int j = 0; j &lt; currentPointCloudMatrix.size(); j++){\n        std::vector &lt;double&gt; singleDistancesVector = currentPointCloudMatrix.at(j); \n        for (int i = 0; i &lt; singleDistancesVector.size(); i++){\n            if (singleDistancesVector.at(i) != 0){\n                vertices[++currentVertex] = plotX;\n                vertices[++currentVertex] = plotY;\n                vertices[++currentVertex] = singleDistancesVector.at(i);\n            }\n            plotX += 0.1;\n        }\n        plotX = 0;\n        plotY += 0.2; //increment y by 0.02     \n    }\n\n    //Creating the array of indices, 480 is the amount of columns\n    int i = 0;\n    short indices2[(amountOfHorizontalScans * 480 * 3)];\n    for (int row = 0; row&lt;amountOfHorizontalScans - 1; row++) {\n        if ((row &amp; 1) == 0) { // even rows\n            for (int col = 0; col&lt;480; col++) {\n                indices2[i++] = col + row * 480;\n                indices2[i++] = col + (row + 1) * 480;\n            }\n        }\n        else { // odd rows\n            for (int col = 480 - 1; col&gt;0; col--) {\n                indices2[i++] = col + (row + 1) * 480;\n                indices2[i++] = col - 1 + +row * 480;\n            }\n        }\n    }\n\n    glEnableClientState(GL_VERTEX_ARRAY);        // Enable Vertex Arrays\n\n    glVertexPointer(3, GL_FLOAT, 0, vertices); // Set The Vertex Pointer To Our Vertex Data\n\n    glDrawElements(GL_TRIANGLE_STRIP, (amountOfHorizontalScans * 480 * 3), GL_UNSIGNED_SHORT, indices2);\n\n    glDisableClientState(GL_VERTEX_ARRAY);\n}\n</code></pre>\n\n<p>I am at a complete loss as to why it has stopped working as it was working perfectly for a good number of runs, then just completely stopped. I have debugged through and all the code is being reached, also the vertices and indices are populated with data. What could cause this to stop working?</p>\n\n<p>EDIT:\nSo I am really quite confused now. I came back to this issue this morning, and everything worked fine again, as in the meshes would draw with no issues. After doing some tests and running the program a number of times it has simply stopped drawing meshes again!</p>\n\n<p>Could this be something memory related? I am not 100% sure on how glDrawElements stores the data passed to it, so could it be that I have to clear something somewhere that I keep filling up with data?</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1453306138, "post_id": 34904254, "comment_id": 57545874, "body": "&quot;D:\\output.yml&quot;; Maybe you should escape that or use / instead of \\"}, {"owner": {"reputation": 103, "user_id": 2648705, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6714e7d88add2932fd3d7fbd24ecfce?s=128&d=identicon&r=PG", "display_name": "Julia", "link": "https://stackoverflow.com/users/2648705/julia"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1453308091, "post_id": 34904254, "comment_id": 57547274, "body": "That worked.. thanks a lot :)"}], "owner": {"reputation": 103, "user_id": 2648705, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6714e7d88add2932fd3d7fbd24ecfce?s=128&d=identicon&r=PG", "display_name": "Julia", "link": "https://stackoverflow.com/users/2648705/julia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453305001, "creation_date": 1453304258, "last_edit_date": 1453305001, "question_id": 34904254, "link": "https://stackoverflow.com/questions/34904254/opencv-filestorage-to-store-in-yml-in-directory-other-than-that-of-project", "title": "OpenCV FileStorage to store in yml in directory other than that of project", "body": "<p>I am trying to store a <code>yml</code> file using <code>FileStorage</code> into the <code>D:\\</code> directory but it keeps storing it in the project directory.. Any help??</p>\n\n<p>This is the code I use:</p>\n\n<pre><code>cv:: String outputFile = \"D:\\output.yml\";\n\ncv::FileStorage fstest2(outputFile, cv::FileStorage::WRITE);\n</code></pre>\n\n<p>I am working with (c++/cli) in windows..</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "sorting", "c++11", "metaprogramming", "c++14"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453304730, "post_id": 34904049, "comment_id": 57544810, "body": "Are you allowed to change data?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1453305245, "post_id": 34904049, "comment_id": 57545186, "body": "Have you considered the Boost metaprogramming library (boost.mpl). See for example: <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/mpl/doc/refmanual/sort.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_60_0/libs/mpl/doc/refmanual/sort.html</a> You could roll your own sort, but it is easier to use one someone else has already written."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 2, "creation_date": 1453305648, "post_id": 34904049, "comment_id": 57545516, "body": "Your question is tagged with C++11. If you can use C++14, it would be a lot simpler."}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453307065, "post_id": 34904049, "comment_id": 57546549, "body": "@5gon12eder: I can use C++14"}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453307208, "post_id": 34904049, "comment_id": 57546663, "body": "@simon: I do not understand the question. If you refer to &lt;i&gt;data&lt;/i&gt;, yes, it is constructed based on other data, so it does change. I hard coded some values just for illustration."}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453307298, "post_id": 34904049, "comment_id": 57546734, "body": "@rici: yep, I know boost. Unfortunately there is no support for the stl in avr-gcc and boost relies on the stl, as far as I know. Plus it is quite a heavy dependency to have for such a small project as mine."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453307936, "post_id": 34904049, "comment_id": 57547167, "body": "@Fabio: I meant wether there are some restrictions on which structures can be modified."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453310843, "post_id": 34904049, "comment_id": 57549157, "body": "@fabio: afaik, boost.mpl has no such dependencies. It is header only and has been around for a long time."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453316952, "post_id": 34904049, "comment_id": 57552772, "body": "@5gon12eder what non-standard-library C++14 feature are you thinking of that could help here?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1453317536, "post_id": 34904049, "comment_id": 57553079, "body": "@Fabio: boost libs often use the stl, but boost mpl mostly does not use the stl -- stl is not very useful for <i>metaprogramming</i> as it is mostly about providing data-structures for use at runtime. For instance compile time data structure cannot make heap allocations, and most STL data structures do that. If there is a &quot;compile time&quot; map in the mpl that fits your needs, you probably can use it without using the stl at all. If not, there certainly is one in boost hana which requires c++14"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 1, "creation_date": 1453317582, "post_id": 34904049, "comment_id": 57553099, "body": "@fish2000 In C++14, you could simply store the information in a <code>constexpr</code> array and use ordinary C++ code for searching and sorting. Since the standard library has no relevant <code>constexpr</code> functions yet, you&#39;ll have to write them yourself which is why it still isn&#39;t a trivial task and which is why I didn&#39;t write an answer yet."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1453317771, "post_id": 34904049, "comment_id": 57553199, "body": "@5gon12eder that\u2019s a great suggestion in general \u2013 even in non-embedded environments <code>constexpr</code> arrays are more legible and less awkward than using <code>std::index_sequence</code> and friends"}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453323736, "post_id": 34904049, "comment_id": 57556546, "body": "@simon: You cannot change X and data. Worth nothing is that what I posted is a simplification, in my actual code I is not an int, but a type. Also I want obtain a structure which I can use at compile time as in rumburak&#39;s answer to <a href=\"http://stackoverflow.com/questions/34836104/how-to-extract-a-selected-set-of-arguments-of-a-variadic-function-and-use-them-t\">this question</a>"}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453325304, "post_id": 34904049, "comment_id": 57557445, "body": "@simon: however, we could change both I and J into integral_constant&lt;&gt;, if that helps."}], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1453444950, "post_id": 34928027, "comment_id": 57612976, "body": "Very nice! Thanks. +1"}, {"owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "reply_to_user": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1453534897, "post_id": 34928027, "comment_id": 57652644, "body": "Glad you like it :-) BTW: When you think you got the answer you&#39;re looking for and don&#39;t expect something better to arrive soon, you should mark one answer as the correct one. Currently, all your questions are listed as unanswered."}], "tags": [], "owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "is_accepted": true, "score": 1, "last_activity_date": 1453390945, "creation_date": 1453390945, "answer_id": 34928027, "question_id": 34904049, "link": "https://stackoverflow.com/questions/34904049/how-to-create-a-sorted-mapping-integer-index-with-templates/34928027#34928027", "title": "How to create a sorted mapping integer index with templates", "body": "<p>When you are facing something complex in C++ template programming, it mostly helps to try to break it into several smaller steps (like with most programming problems). Here is a possible path:</p>\n\n<ol>\n<li>Select the X which match the selected I and store them in a new data type replacing the I with the position (use recursion for this)</li>\n<li>Sort the X in the selected_data by J. This is a bit annoying to write, I think. Maybe you should create a separate question for that.</li>\n<li>Extract the positions from the sorted and selected X</li>\n</ol>\n\n<p>And here is the corresponding code. I am using <code>std::conditional</code>, but that is easy to replace of course. I am using <code>std::is_same</code> in the tests, you do not really need that of course (and it would be trivial to implement otherwise).</p>\n\n<p>Your stuff + utility header for std::conditional and std::is_same</p>\n\n<pre><code>#include &lt;utility&gt;\n\ntemplate &lt;int... I&gt;\nstruct index\n{\n};\n\ntemplate &lt;typename... T&gt;\nstruct data\n{\n};\n\ntemplate &lt;int I, int J&gt;\nstruct X\n{\n  static constexpr int i = I;\n  static constexpr int j = J;\n};\n\ntypedef data&lt;X&lt;0, 4&gt;, X&lt;1, 2&gt;, X&lt;2, 1&gt;, X&lt;1, 6&gt;, X&lt;1, 3&gt;&gt; data_t;\n</code></pre>\n\n<p>Extract the <code>X</code>s that match the <code>I</code> we are looking for and replace the <code>i</code>s with the position.</p>\n\n<pre><code>template &lt;int Pos, int I, typename Extracted, typename Rest&gt;\nstruct ExtractImpl;\n\ntemplate &lt;int Pos, int I, typename... ExtractedX&gt;\nstruct ExtractImpl&lt;Pos, I, data&lt;ExtractedX...&gt;, data&lt;&gt;&gt;\n{\n  using type = data&lt;ExtractedX...&gt;;\n};\n\ntemplate &lt;int Pos, int I, typename... ExtractedX, typename T, typename... Rest&gt;\nstruct ExtractImpl&lt;Pos, I, data&lt;ExtractedX...&gt;, data&lt;T, Rest...&gt;&gt;\n{\n  using type = typename std::conditional&lt;\n      (T::i == I),\n      typename ExtractImpl&lt;Pos + 1,\n                           I,\n                           data&lt;ExtractedX..., X&lt;Pos, T::j&gt;&gt;,\n                           data&lt;Rest...&gt;&gt;::type,\n      typename ExtractImpl&lt;Pos + 1, I, data&lt;ExtractedX...&gt;, data&lt;Rest...&gt;&gt;::\n          type&gt;::type;\n};\n\ntemplate &lt;int I, typename Data&gt;\nstruct Extract\n{\n  using type = typename ExtractImpl&lt;0, I, data&lt;&gt;, Data&gt;::type;\n};\n\nusing extracted = typename Extract&lt;1, data_t&gt;::type;\nstatic_assert(std::is_same&lt;extracted, data&lt;X&lt;1, 2&gt;, X&lt;3, 6&gt;, X&lt;4, 3&gt;&gt;&gt;::value, \"\");\n</code></pre>\n\n<p>Sort by J. This is done by incrementally inserting elements into a sorted list. There might be more elegant ways to do it.</p>\n\n<pre><code>template &lt;typename T, typename LessList, typename RestList&gt;\nstruct insert_impl;\n\ntemplate &lt;typename T, typename... Lesser&gt;\nstruct insert_impl&lt;T, data&lt;Lesser...&gt;, data&lt;&gt;&gt;\n{\n  using type = data&lt;Lesser..., T&gt;;\n};\n\ntemplate &lt;typename T, typename... Lesser, typename Next, typename... Rest&gt;\nstruct insert_impl&lt;T, data&lt;Lesser...&gt;, data&lt;Next, Rest...&gt;&gt;\n{\n  using type = typename std::conditional&lt;\n      (T::j &lt; Next::j),\n      data&lt;Lesser..., T, Next, Rest...&gt;,\n      typename insert_impl&lt;T, data&lt;Lesser..., Next&gt;, data&lt;Rest...&gt;&gt;::type&gt;::\n      type;\n};\n\ntemplate &lt;typename T, typename SortedList&gt;\nstruct insert\n{\n  using type = typename insert_impl&lt;T, data&lt;&gt;, SortedList&gt;::type;\n};\n\ntemplate &lt;typename SortedList, typename UnsortedList&gt;\nstruct SortImpl;\n\ntemplate &lt;typename SortedList&gt;\nstruct SortImpl&lt;SortedList, data&lt;&gt;&gt;\n{\n  using type = SortedList;\n};\n\ntemplate &lt;typename SortedList, typename T, typename... UnsortedX&gt;\nstruct SortImpl&lt;SortedList, data&lt;T, UnsortedX...&gt;&gt;\n{\n  using type = typename SortImpl&lt;typename insert&lt;T, SortedList&gt;::type,\n                                 data&lt;UnsortedX...&gt;&gt;::type;\n};\n\ntemplate &lt;typename UnsortedList&gt;\nstruct Sort\n{\n  using type = typename SortImpl&lt;data&lt;&gt;, UnsortedList&gt;::type;\n};\n\nusing sorted = typename Sort&lt;extracted&gt;::type;\nstatic_assert(std::is_same&lt;sorted, data&lt;X&lt;1, 2&gt;, X&lt;4, 3&gt;, X&lt;3, 6&gt;&gt;&gt;::value, \"\");\n</code></pre>\n\n<p>Finally, extract the indexes you are looking for:</p>\n\n<pre><code>template &lt;typename List&gt;\nstruct Indexes;\n\ntemplate &lt;typename... Data&gt;\nstruct Indexes&lt;data&lt;Data...&gt;&gt;\n{\n  using type = index&lt;Data::i...&gt;;\n};\n\nusing result = typename Indexes&lt;sorted&gt;::type;\nstatic_assert(std::is_same&lt;result, index&lt;1, 4, 3&gt;&gt;::value, \"\");\n</code></pre>\n\n<p>Word of warning: While I don't see any problems in the code, I have not tested it beyond your example...</p>\n"}, {"tags": [], "owner": {"reputation": 6439, "user_id": 2968284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7oI4c.jpg?s=128&g=1", "display_name": "mpark", "link": "https://stackoverflow.com/users/2968284/mpark"}, "is_accepted": false, "score": 2, "last_activity_date": 1454216247, "last_edit_date": 1454216247, "creation_date": 1453894158, "answer_id": 35036118, "question_id": 34904049, "link": "https://stackoverflow.com/questions/34904049/how-to-create-a-sorted-mapping-integer-index-with-templates/35036118#35036118", "title": "How to create a sorted mapping integer index with templates", "body": "<p>I'll share my approach to this problem which I think is kind of neat. I used C++11 <code>std::conditional</code>, and C++14 <code>std::integer_sequence</code> and <code>std::make_integer_sequence</code>, all of which you can find implementations of online.</p>\n\n<p>Let's start with the data structures you had.</p>\n\n<pre><code>template &lt;int... Is&gt; struct index {};\ntemplate &lt;typename... Ts&gt; struct list {};\ntemplate &lt;int L, int R&gt; struct pair {};\n</code></pre>\n\n<p>We'll use a metafunction <code>concat</code>, which concatenates <code>N</code> list of types. We use it to filter a list by returning <code>list&lt;T&gt;</code> when the predicate returns <code>true</code>, and <code>list&lt;&gt;</code> otherwise.</p>\n\n<p>For example, to filter the even numbers from <code>list&lt;1, 3, 2, 4, 2&gt;</code>, we can perform <code>std::conditional_t&lt;I % 2 == 0, list&lt;I&gt;, list&lt;&gt;&gt;</code> for each <code>I</code> to get <code>concat_t&lt;list&lt;&gt;, list&lt;&gt;, list&lt;2&gt;, list&lt;4&gt;, list&lt;2&gt;&gt;</code> = <code>list&lt;2, 4, 2&gt;</code>.</p>\n\n<pre><code>template &lt;typename... Ts&gt; struct concat;\n\ntemplate &lt;&gt; struct concat&lt;&gt; { using type = list&lt;&gt;; }\n\ntemplate &lt;typename... Ts&gt;\nstruct concat&lt;list&lt;Ts...&gt;&gt; { using type = list&lt;Ts...&gt;; };\n\ntemplate &lt;typename... Ts, typename... Us&gt;\nstruct concat&lt;list&lt;Ts...&gt;, list&lt;Us...&gt;&gt; { using type = list&lt;Ts..., Us...&gt;; };\n\ntemplate &lt;typename... Ts, typename... Us, typename... Tail&gt;\nstruct concat&lt;list&lt;Ts...&gt;, list&lt;Us...&gt;, Tail...&gt;\n    : concat&lt;list&lt;Ts..., Us...&gt;, Tail...&gt; {};\n\ntemplate &lt;typename... Ts&gt;\nusing concat_t = typename concat&lt;Ts...&gt;::type;\n</code></pre>\n\n<p>Now we get to <code>build_index</code>. We perform bucket sort within the known range of <code>[0, 32)</code>. We could have used a generic sorting algorithm, but it was more fun to cheat.</p>\n\n<pre><code>template &lt;int N, typename T&gt; struct build_index;\n\n// e.g., `build_index&lt;\n//            1, list&lt;pair&lt;0, 4&gt;, pair&lt;1, 2&gt;, pair&lt;2, 1&gt;, pair&lt;1, 6&gt;, pair&lt;1, 3&gt;&gt;`\ntemplate &lt;int N, int... Ls, int... Rs&gt;\nstruct build_index&lt;N, list&lt;pair&lt;Ls, Rs&gt;...&gt;&gt; {\n  // Filter for pairs where `N == lhs`, and replace the `lhs` with the index.\n  template &lt;int... Is&gt;\n  static auto filter(std::integer_sequence&lt;int, Is...&gt;)\n      -&gt; concat_t&lt;std::conditional_t&lt;N == Ls, list&lt;pair&lt;Is, Rs&gt;&gt;, list&lt;&gt;&gt;...&gt;;\n\n  // e.g., `list&lt;pair&lt;1, 2&gt;, pair&lt;3, 6&gt;, pair&lt;4, 3&gt;&gt;`\n  using filtered =\n      decltype(filter(std::make_integer_sequence&lt;int, sizeof...(Ls)&gt;{}));\n\n  // `get&lt;I&gt;(set)` returns the `lhs` if `set` can implicitly convert to\n  // `pair&lt;lhs, I&gt;` for some `lhs`, and nothing otherwise.\n  template &lt;typename... Ts&gt; struct set : Ts... {};\n  template &lt;int I, int L&gt; static list&lt;index&lt;L&gt;&gt; get(pair&lt;L, I&gt;);\n  template &lt;int I&gt; static list&lt;&gt; get(...);\n\n  // We invoke `get&lt;I&gt;` for `I` in `[0, 32)` to sort `filtered`.\n  template &lt;int... Is, typename... Ts&gt;\n  static auto sort(std::integer_sequence&lt;int, Is...&gt;, list&lt;Ts...&gt;)\n      -&gt; concat_t&lt;decltype(get&lt;Is&gt;(set&lt;Ts...&gt;{}))...&gt;;\n\n  // e.g., `list&lt;index&lt;1&gt;, index&lt;4&gt;, index&lt;3&gt;&gt;`\n  using sorted =\n      decltype(sort(std::make_integer_sequence&lt;int, 32&gt;{}, filtered{}));\n\n  // e.g., `list&lt;1, 4, 3&gt;`\n  template &lt;int... Is&gt; static index&lt;Is...&gt; indices(list&lt;index&lt;Is&gt;...&gt;);\n  using type = decltype(indices(sorted{}));\n};\n\ntemplate &lt;int N, typename... Ts&gt;\nusing build_index_t = typename build_index&lt;N, Ts...&gt;::type;\n</code></pre>\n\n<p>With which we get:</p>\n\n<pre><code>using index_t = build_index_t&lt;\n    1, list&lt;pair&lt;0, 4&gt;, pair&lt;1, 2&gt;, pair&lt;2, 1&gt;, pair&lt;1, 6&gt;, pair&lt;1, 3&gt;&gt;&gt;;\nstatic_assert(std::is_same&lt;index&lt;1, 4, 3&gt;, index_t&gt;::value, \"\");\n</code></pre>\n"}], "owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 4, "accepted_answer_id": 34928027, "answer_count": 2, "score": 5, "last_activity_date": 1454216247, "creation_date": 1453303725, "last_edit_date": 1453322639, "question_id": 34904049, "link": "https://stackoverflow.com/questions/34904049/how-to-create-a-sorted-mapping-integer-index-with-templates", "title": "How to create a sorted mapping integer index with templates", "body": "<p>I have the data structure:</p>\n\n<pre><code>template &lt;int...I&gt; struct index {};\n\ntemplate &lt;typename...T&gt; struct data {};\n\ntemplate &lt;int I, int J&gt; struct X\n{\n   static constexpr int i = I;\n   static constexpr int j = J;\n};\n\ntypedef data&lt; X&lt;0,4&gt;, X&lt;1,2&gt;, X&lt;2,1&gt;, X&lt;1,6&gt;, X&lt;1,3&gt; &gt; data_t;\n</code></pre>\n\n<p>Where <i>data</i> does not contain duplicates and the indices J are small, in the range 0-31.</p>\n\n<p>I want to create a static index which contains the position in <i>data</i> of all X with index I equal to some given value (e.g. I=1), sorted by index J. It is the \"sorting\" bit which I find difficult.</p>\n\n<p>For example, I would like to implement a class build_index such that:</p>\n\n<pre><code>typedef build_index&lt;1,data&gt;::type_t index_t;\n</code></pre>\n\n<p>generates the same as:</p>\n\n<pre><code>typedef index&lt;1, 4, 3&gt; index_t;\n</code></pre>\n\n<p>which reflects the positions in <i>data</i> of the elements X(1,J) ordered by J:\nX(1,2) at data(1), X(1,3) at data(4), X(1,6) at data(3)</p>\n\n<p>I would prefer not to use the STL, as it is not available for gcc-avr, although I could port selected snippets.</p>\n"}, {"tags": ["c++", "qt", "qsharedpointer"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453303654, "post_id": 34903925, "comment_id": 57543998, "body": "Possibly <a href=\"http://doc.qt.io/qt-5/qshareddatapointer.html\" rel=\"nofollow noreferrer\"><code>QSharedDataPointer</code></a>"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453303874, "post_id": 34903925, "comment_id": 57544158, "body": "@NathanOliver Unfortunately, not. From the docs: &quot;QSharedDataPointer implements thread-safe reference counting&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453303938, "post_id": 34903925, "comment_id": 57544213, "body": "I don&#39;t think you will be able to get away from that.  Even boost and C++11 do that.  At least the access to the underlying pointer is not thread safe so that takes care of most of the overhead."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 6, "creation_date": 1453305272, "post_id": 34903925, "comment_id": 57545205, "body": "It&#39;s not that expensive.  As far as system operation and/or CPU commands sure, they take a lot longer than not doing that...but compared to the rest of the application&#39;s activity is generally very rare that it&#39;ll show up on a profile as significant in any way whatsoever."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 1, "creation_date": 1453306910, "post_id": 34903925, "comment_id": 57546435, "body": "I&#39;d like to add that it&#39;s not just inexpensive, it&#39;s inexpensive because it doesn&#39;t do any locking. It&#39;s just about atomic increment/decrement instructions which are really fast. Slower than non-atomic, of course, but not that much. It it used mutexes, then it would probably be expensive, but it doesn&#39;t. And if you have some ridiculously complicated algorithm that uses that pointer a lot, you can always query the internal pointer, save it in a local variable and use that in your crazy nested loops."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453388227, "post_id": 34903925, "comment_id": 57587508, "body": "You offer no substance to your assertion that there <i>is</i> an overhead to begin with. You cannot just muse about such things, you absolutely must measure the overhead and prove to yourself that you&#39;re not imagining things. Or at least you should point out to Qt code that introduces the overhead, with some understanding/explanation of why you expect the overhead to be important in your application. Side note: &quot;Turning on&quot; C++11 is the logical thing to do - you&#39;re making your code look much worse for not using it."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453473825, "post_id": 34903925, "comment_id": 57630039, "body": "@KubaOber I thought there is a non-zero overhead. I don&#39;t know how big, though. Do you mean there is no overhead, or just that it&#39;s a small overhead?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453475494, "post_id": 34903925, "comment_id": 57631206, "body": "@sashoalm There is no way to answer it. Modern CPUs are clever enough that there may be no overhead at all. Measure it. Compare to your own code. My bet is that any time you spend thinking about it will be much greater than the overhead in your application over 24hr of runtime."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453480132, "post_id": 34903925, "comment_id": 57634443, "body": "@KubaOber Fair enough. I just assumed that the Qt guys themselves wouldn&#39;t have created QScopedPointer if they didn&#39;t think QSharedPointer has some overhead. I mean, you can just use QSharedPointer instead of QScopedPointer otherwise. But maybe it&#39;s the reference counting they wanted to skip and not the thread-safety, especially when you need a heap allocation for it (I think the reference counter is heap-allocated). Here&#39;s a performance test I found - <a href=\"http://justinfx.com/2015/06/07/comparing-performance-of-qt-smart-pointer-options/\" rel=\"nofollow noreferrer\">justinfx.com/2015/06/07/&hellip;</a>. It seems there is indeed an overhead."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1453483018, "post_id": 34903925, "comment_id": 57636375, "body": "<code>QScopedPointer</code> guarantees unique ownership. You can get some nice memory leaks if you use <code>QSharedPointer</code> indiscriminately in place of <code>QScopedPointer</code>: it won&#39;t stop you from certain ways of shooting yourself in the foot. The reason for existence of these two pointer types isn&#39;t overhead but clarity of intent and preventing errors."}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": false, "score": 0, "last_activity_date": 1453315777, "last_edit_date": 1453315777, "creation_date": 1453314577, "answer_id": 34907744, "question_id": 34903925, "link": "https://stackoverflow.com/questions/34903925/qsharedpointer-without-the-thread-safety-overhead/34907744#34907744", "title": "QSharedPointer without the thread-safety overhead?", "body": "<p>Qt 5 has <a href=\"http://woboq.com/blog/internals-of-qmutex-in-qt5.html\" rel=\"nofollow\">very clever realization of class QMutex</a>. And it must not to use Synchronization Primitives of OS in a single-thread applications. So, I think that using of Qt's smart pointers is a good solution.</p>\n"}], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 540, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1453315777, "creation_date": 1453303408, "question_id": 34903925, "link": "https://stackoverflow.com/questions/34903925/qsharedpointer-without-the-thread-safety-overhead", "title": "QSharedPointer without the thread-safety overhead?", "body": "<p>I need to use a <code>QSharedPointer</code> for the reference counting, but I'll use it in a single-thread application so I don't want the thread-safety overhead (which I assume is fairly expensive).</p>\n\n<p>Is there a way to turn off the thread-safety, or is there an equivalent Qt class that offers reference-counting only? If not, are there stand-alone classes that don't require me to include a big library like boost, or turn on c++11?</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1453303662, "post_id": 34903920, "comment_id": 57544006, "body": "Would you understand why <code>Derived d; Base&amp; b = d;</code> would be valid? If so, can you <a href=\"https://stackoverflow.com/posts/34903920/edit\">edit</a> your question to explain where you feel the difference is?"}], "answers": [{"comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 3, "creation_date": 1453303940, "post_id": 34904058, "comment_id": 57544215, "body": "References are references, plain and simple. +1"}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 8, "last_activity_date": 1453303957, "last_edit_date": 1495540424, "creation_date": 1453303737, "answer_id": 34904058, "question_id": 34903920, "link": "https://stackoverflow.com/questions/34903920/c-slicing-to-base-rvalue/34904058#34904058", "title": "C++ : Slicing to base rvalue?", "body": "<p>This is binding a temporary to an r-value reference. Temporaries may be bound to both constant l-value references and r-value references. </p>\n\n<p>As for why it's properly calling the derived function, that's because you're calling a virtual function. Dynamic dispatch is taking place as normal.</p>\n\n<p>This is sort of the same as using a function call with an r-value reference parameter:</p>\n\n<pre><code>void callHi(Base&amp;&amp; b){\n  b.say_hi();\n}\n\n...\n\ncallHi(Derived{}); // ultimately calls derived say_hi method\n</code></pre>\n\n<p>You mention slicing. For slicing to occur, <a href=\"https://stackoverflow.com/a/14461532/4892076\">the sequence of events is a bit more complex than simply calling a virtual function.</a></p>\n"}], "owner": {"reputation": 1854, "user_id": 3439945, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dad28193639b0f8b99da3f1e8fb1665f?s=128&d=identicon&r=PG&f=1", "display_name": "Julien__", "link": "https://stackoverflow.com/users/3439945/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 34904058, "answer_count": 1, "score": 1, "last_activity_date": 1469651317, "creation_date": 1453303397, "last_edit_date": 1469651317, "question_id": 34903920, "link": "https://stackoverflow.com/questions/34903920/c-slicing-to-base-rvalue", "title": "C++ : Slicing to base rvalue?", "body": "<p>I came across the following code and I couldn't find on google why the following statement is valid C++ : </p>\n\n<pre><code>Base&amp;&amp; b = Derived();\n</code></pre>\n\n<p>Please explain or give reference</p>\n\n<p>Here is a sample code : </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Base{\npublic:\n    virtual ~Base(){}\n    virtual void say_hi() { cout &lt;&lt; \"hi base\"; }\n};\nclass Derived : public Base{\npublic:\n    virtual ~Derived(){}\n    virtual void say_hi() { cout &lt;&lt; \"hi derived\"; }\n};\n\nint main(int argc, const char * argv[]) {\n    Base&amp;&amp; b = Derived();\n    b.say_hi();\n\n    return 0;\n}\n</code></pre>\n\n<p>prints : </p>\n\n<pre><code>hi derived\n</code></pre>\n"}, {"tags": ["c++", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 1, "last_activity_date": 1453310930, "creation_date": 1453310930, "answer_id": 34906637, "question_id": 34903916, "link": "https://stackoverflow.com/questions/34903916/how-to-refer-to-a-built-in-op-when-writing-a-custom-user-op/34906637#34906637", "title": "How to refer to a built-in op when writing a custom user op", "body": "<p>The answer to this is \"it depends.\" Only some of the built-in ops are factored in a reusable way. For example, the component-wise ops are implemented as <a href=\"https://github.com/tensorflow/tensorflow/blob/04de87f1204103cf9b753858ecae33099aafb4c2/tensorflow/core/kernels/cwise_ops.h#L573\" rel=\"nofollow\">reusable functors</a>, so you may be able to <code>#include \"tensorflow/core/kernels/cwise_ops.h\"</code> and use the <code>UnaryFunctor</code> or <code>BinaryFunctor</code> classes if your needs to borrow some of their functionality.</p>\n\n<p>Most other ops have their implementations inlined into the <code>Compute()</code> method of the corresponding <code>OpKernel</code>. For your own custom ops, you are free to define the implementation in free functions, or to use inheritance to define common functionality that is shared between ops.</p>\n"}], "owner": {"reputation": 1273, "user_id": 2954187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/27e9edd22ce0533aa62e399b96df4796?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/2954187/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 34906637, "answer_count": 1, "score": 0, "last_activity_date": 1453310930, "creation_date": 1453303385, "question_id": 34903916, "link": "https://stackoverflow.com/questions/34903916/how-to-refer-to-a-built-in-op-when-writing-a-custom-user-op", "title": "How to refer to a built-in op when writing a custom user op", "body": "<p>I'm writing a custom op in tensorflow, and I would like to refer to an op that already exists, either one of my own user ops, or one of the built-in ops. Is there any way to do this without just copy pasting the code from the other op that I'm referring to?</p>\n"}, {"tags": ["java", "c++", "opencv", "jna"], "comments": [{"owner": {"reputation": 150, "user_id": 4262710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181d14041d17ea0d17cd08ed030653c?s=128&d=identicon&r=PG&f=1", "display_name": "Freewister", "link": "https://stackoverflow.com/users/4262710/freewister"}, "edited": false, "score": 0, "creation_date": 1453303785, "post_id": 34903847, "comment_id": 57544080, "body": "I use the table on the site <a href=\"https://github.com/java-native-access/jna/blob/master/www/Mappings.md\" rel=\"nofollow noreferrer\">github.com/java-native-access/jna/blob/master/www/Mappings.m&zwnj;&#8203;d</a> to know which types i can use. char* is in jna string."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453313207, "post_id": 34903847, "comment_id": 57550712, "body": "The mapping is correct.  You should focus your attention on what about the JVM execution environment is different from your C environment.  When you call the function &quot;without JNA&quot;, are you invoking it as a shared library or linking directly to the code?  You may be inadvertently referencing some uninitialized global or static state."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453313274, "post_id": 34903847, "comment_id": 57550755, "body": "Try adding a line after your last line in <code>main</code> referencing the string <code>path</code>.  It might be possible that an aggressive GC might be disposing of the <code>String</code> before the callee gets to it."}, {"owner": {"reputation": 150, "user_id": 4262710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181d14041d17ea0d17cd08ed030653c?s=128&d=identicon&r=PG&f=1", "display_name": "Freewister", "link": "https://stackoverflow.com/users/4262710/freewister"}, "reply_to_user": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453316420, "post_id": 34903847, "comment_id": 57552485, "body": "Further in my code i call many opencv functions like cv::imread, cv::findContours, cv::drawContours. I dont know why cv::split throws this kind of exception. I post tomorrow my whole code."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453318759, "post_id": 34903847, "comment_id": 57553780, "body": "You could turn off <code>jna.protected</code> and let the JVM core dump.  That might give you a bit of a native stack which might provide some insight."}, {"owner": {"reputation": 150, "user_id": 4262710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181d14041d17ea0d17cd08ed030653c?s=128&d=identicon&r=PG&f=1", "display_name": "Freewister", "link": "https://stackoverflow.com/users/4262710/freewister"}, "reply_to_user": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453361752, "post_id": 34903847, "comment_id": 57569906, "body": "I set jna.protected to false and got this  message # JRE version: Java(TM) SE Runtime Environment (8.0_66-b18) (build 1.8.0_66-b18) # Java VM: Java HotSpot(TM) Client VM (25.66-b18 mixed mode, sharing windows-x86 ) # Problematic frame: # C  [opencv_world300.dll+0xb0fbfe] But I use the opencv_world300.dll before. Only the split method throws this kind of exception."}, {"owner": {"reputation": 150, "user_id": 4262710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181d14041d17ea0d17cd08ed030653c?s=128&d=identicon&r=PG&f=1", "display_name": "Freewister", "link": "https://stackoverflow.com/users/4262710/freewister"}, "reply_to_user": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453362063, "post_id": 34903847, "comment_id": 57570077, "body": "I found the problem. In my project properties of my dll i had this kind of additional libraries opencv_ts300.lib opencv_ts300d.lib I deleted the release versions and know i works fine. opencv_world300.lib opencv_world300d.lib But why is java using the release lib and why can i execute some methods and others not?"}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1453392822, "post_id": 34903847, "comment_id": 57590728, "body": "Most likely it&#39;s a difference in <code>PATH</code>.  That gets copied into <code>java.library.path</code> (along with some other things) by the JVM.   Your IDE might modify it additionally, so it&#39;s best to check that there are no differences between direct JVM invocation, IDE invocation, and native code invocation."}], "owner": {"reputation": 150, "user_id": 4262710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181d14041d17ea0d17cd08ed030653c?s=128&d=identicon&r=PG&f=1", "display_name": "Freewister", "link": "https://stackoverflow.com/users/4262710/freewister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 966, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1453303428, "creation_date": 1453303178, "last_edit_date": 1453303428, "question_id": 34903847, "link": "https://stackoverflow.com/questions/34903847/exception-in-thread-main-java-lang-error-invalid-memory-access-with-jna-and-o", "title": "Exception in thread &quot;main&quot; java.lang.Error: Invalid memory access with JNA and OpenCV", "body": "<p>I have an application with two parts. One part is a c++ program for opencv calculation. The other part is a Java part. I control a camera with JNA und edit the pictures from this camera with OpenCV.\nI can call my function with JNA.</p>\n\n<p>My Funtion in C++</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) int createScript(char* imagePath)\n</code></pre>\n\n<p>In This function i call the function</p>\n\n<pre><code>void BladeCutter::calcMeanValues(cv::Mat image)\n{\n    std::vector&lt;cv::Mat&gt; bgr_planes;\n    cv::split(image, bgr_planes);\n    cv::Scalar blue = cv::mean(bgr_planes[0]);\n    cv::Scalar green = cv::mean(bgr_planes[1]);\n    cv::Scalar red = cv::mean(bgr_planes[2]);\n    meanValues.scalar = cv::Scalar(blue[0], green[0], red[0]);\n    meanValues.brightness = calcBrightness(image);\n}\n</code></pre>\n\n<p>and get a Invalid memory access at cv::split(image, bgr_planes);\nIf i call the program without jna the program works fine.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Invalid memory access\n  at com.sun.jna.Native.invokePointer(Native Method)\n  at com.sun.jna.Function.invokePointer(Function.java:477)\n  at com.sun.jna.Function.invokeString(Function.java:658)\n  at com.sun.jna.Function.invoke(Function.java:402)\n  at com.sun.jna.Function.invoke(Function.java:323)\n  at com.sun.jna.Library$Handler.invoke(Library.java:236)\n  at com.sun.proxy.$Proxy0.createScript(Unknown Source)\n  at de.test.BladeTileLocator.main(BladeTileLocator.java:14)\n</code></pre>\n\n<p>BladeTileLocator is the Java-Class.</p>\n\n<pre><code>package de.test;\n\nimport com.sun.jna.Native;\n\nimport de.interfaces.IBladeTileLocator;\n\npublic class BladeTileLocator {\n\n    public static void main(String[] args) {\n\n        final byte[] ba = new byte[50];\n        final IBladeTileLocator bladeTileLocator = (IBladeTileLocator) Native.loadLibrary(\"BladeTileLocator\", IBladeTileLocator.class);\n        final String path = \"C:\\\\Users\\\\bak\\\\Pictures\\\\Bildanalyse\\\\Bild.JPG\";\n        bladeTileLocator.createScript(path);\n    }\n}\n</code></pre>\n\n<p>My JNA Interface to call the function:</p>\n\n<pre><code>package de.interfaces;\n\nimport com.sun.jna.Library;\n\npublic interface IBladeTileLocator extends Library {\n    int createScript(String imagePath);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "c++14", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1453303828, "post_id": 34904074, "comment_id": 57544113, "body": "This way, he needs an auxiliary template <code>bar_t</code>, right?"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1453303874, "post_id": 34904074, "comment_id": 57544157, "body": "@Columbo Yes, <code>bar_t</code> is in my answer."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1453303919, "post_id": 34904074, "comment_id": 57544197, "body": "The point is that he is precisely trying to avoid any additional entities for each name. <code>bar_t</code> is part of the implementation he doesn&#39;t want hardcoded names in."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1453304413, "post_id": 34904074, "comment_id": 57544578, "body": "@Columbo I took &quot;hardcoded into the implementation&quot; to be in the <code>has_member_type</code> trait."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1453305336, "post_id": 34904074, "comment_id": 57545258, "body": "better to mimic <code>std::experimental::is_detected&lt;Op, Args&gt;</code> instead of <code>is_detected&lt;Args, Op&gt;</code> as you&#39;ve written here, makes it easer to drop-in the <code>&lt;experimental&#47;type_traits&gt;</code> header when it become available on the OP&#39;s system"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1453305500, "post_id": 34904074, "comment_id": 57545404, "body": "@TemplateRex I kept the arguments that way round so that OP could easily compare this solution to his original code. I&#39;ll mention that in the answer."}, {"owner": {"reputation": 3326, "user_id": 991000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-_7QtSrCkQE0/AAAAAAAAAAI/AAAAAAAAAEo/OgQ89VSFZMM/photo.jpg?sz=128", "display_name": "CJCombrink", "link": "https://stackoverflow.com/users/991000/cjcombrink"}, "edited": false, "score": 0, "creation_date": 1499929465, "post_id": 34904074, "comment_id": 77119644, "body": "Isn&#39;t there a way to remove the need for the <code>using bar_t = ...</code> part?"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 3326, "user_id": 991000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-_7QtSrCkQE0/AAAAAAAAAAI/AAAAAAAAAEo/OgQ89VSFZMM/photo.jpg?sz=128", "display_name": "CJCombrink", "link": "https://stackoverflow.com/users/991000/cjcombrink"}, "edited": false, "score": 0, "creation_date": 1499944429, "post_id": 34904074, "comment_id": 77130146, "body": "@TheBadger Not really; you need a template so that it SFINAEs when you instantiate it with a bad type."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 6, "last_activity_date": 1453305612, "last_edit_date": 1453305612, "creation_date": 1453303773, "answer_id": 34904074, "question_id": 34903845, "link": "https://stackoverflow.com/questions/34903845/checking-if-class-t-has-member-type-member-with-void-t/34904074#34904074", "title": "Checking if class T has member type Member with void_t", "body": "<p>Your code doesn't work because <code>typename foo::bar</code> just directly resolves to <code>int</code>, rather than passing in some construct you can use for SFINAE.</p>\n\n<p>A possible solution is to make an alias template which will tell you what the type of <code>T::bar</code> is, then pass that into your checker. This is what <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow\"><code>std::experimental::is_detected</code></a> does. Here is a simplified version which is close to what you had already*:</p>\n\n<pre><code>template&lt;typename, template &lt;typename&gt; class, typename = void&gt;\nstruct is_detected : false_type {};\n\ntemplate&lt;typename T, template &lt;typename&gt; class Op&gt;\nstruct is_detected&lt;T, Op, void_t&lt;Op&lt;T&gt;&gt;&gt; : true_type {};\n</code></pre>\n\n<p>Then you write your alias template which you want to detect:</p>\n\n<pre><code>template &lt;typename T&gt; using bar_t = typename T::bar;\n</code></pre>\n\n<p>And usage looks like this:</p>\n\n<pre><code>is_detected &lt;foo, bar_t&gt;::value\n</code></pre>\n\n<p>*: I kept the template parameters the same way around as in your sample code so that you can easily compare. Flipping them around so that you can make the operator arguments variadic is better in a more generic context. It would also make it easier to migrate to <code>std::experimental::is_detected</code> when available for you.</p>\n"}, {"comments": [{"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453767961, "post_id": 34904384, "comment_id": 57737857, "body": "Nice, but should return an <code>integral_constant</code> instead."}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453768563, "post_id": 34904384, "comment_id": 57738056, "body": "So it can be passed to parameters of functions and that value can be used in overloading(such as tag dispatching) and in <code>static_assert</code>. In addition, it can be cleaner in some cases. For example, passing it in as a template parameter for member functions requires <code>.template</code> to disambiguate it, whereas passing it as a function parameter does not."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453769157, "post_id": 34904384, "comment_id": 57738256, "body": "@Paul If you use tag dispatching, encapsulate the result value in <code>bool_constant</code>. I don&#39;t see why the application of a macro named &quot;HAS_...&quot; should return something other than a <code>bool</code>."}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453769944, "post_id": 34904384, "comment_id": 57738481, "body": "But why require the user to use <code>bool_constant</code>? In addition, type traits already work this way. So why make <code>HAS_*</code> less capable by returning a raw <code>bool</code>? There is no advantage."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453802372, "post_id": 34904384, "comment_id": 57749448, "body": "@Paul HAS_ is not less capable of anything. And <code>integral_constant</code> is a C++11 remnant. With concepts and variable templates, idiomatic semantics change. You&#39;ll write <code>requires HAS_TYPE(T, bar)</code>. If you want to write <code>requires HAS_TYPE(T, bar)::value</code> instead, well, that&#39;s your choice.. but I won&#39;t impose it on future C++17 readers."}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "edited": false, "score": 0, "creation_date": 1453821471, "post_id": 34904384, "comment_id": 57761123, "body": "It is less capable, as a raw <code>bool</code> cannot be used in many constructs in C++(I have explained earlier). Also, template variables doesn&#39;t change that, they can be template variables to <code>integral_constant</code> Unfortunately, concepts does not work with <code>integral_constant</code>, so in C++ you currently write <code>enable_if&lt;(HAS_TYPE(T, bar))&gt;</code> or <code>static_assert(HAS_TYPE(T, bar))</code> however in concepts you have to write <code>requires bool{HAS_TYPE(T, bar)}</code>. Hopefully this changes in the future. Either way, APIs shouldn&#39;t be built less capable because newer C++ features are less capable."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 2, "last_activity_date": 1453368041, "last_edit_date": 1453368041, "creation_date": 1453304589, "answer_id": 34904384, "question_id": 34903845, "link": "https://stackoverflow.com/questions/34903845/checking-if-class-t-has-member-type-member-with-void-t/34904384#34904384", "title": "Checking if class T has member type Member with void_t", "body": "<p>Once <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4487.pdf\" rel=\"nofollow\">N4487</a> gets accepted, you'll be able to employ generic lambdas in constant expressions:</p>\n\n<pre><code>template &lt;typename T, typename F&gt;\nconstexpr auto test(F f) -&gt; decltype(f(std::declval&lt;T&amp;&gt;()), true) {return true;}\n\ntemplate &lt;typename, typename... F&gt;\nconstexpr bool test(F...) {return false;}\n\n#define HAS_DATA(Name, ...) (test&lt;__VA_ARGS__&gt;([] (auto&amp; t) -&gt; decltype(&amp;std::decay_t&lt;decltype(t)&gt;::Name) {}))\n#define HAS_TYPE(Name, ...) (test&lt;__VA_ARGS__&gt;([] (auto&amp; t) -&gt; typename std::decay_t&lt;decltype(t)&gt;::Name {}))\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/67a90668a2189eef\" rel=\"nofollow\"><strong>Demo</strong></a> with <code>cout</code>.</p>\n"}], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 1, "accepted_answer_id": 34904074, "answer_count": 2, "score": 4, "last_activity_date": 1453767927, "creation_date": 1453303170, "last_edit_date": 1453303516, "question_id": 34903845, "link": "https://stackoverflow.com/questions/34903845/checking-if-class-t-has-member-type-member-with-void-t", "title": "Checking if class T has member type Member with void_t", "body": "<p>So here's the code:</p>\n\n<pre><code>template&lt;typename, typename, typename = void&gt;\nstruct has_member_type : false_type {};\n\ntemplate&lt;typename T, typename Member&gt;\nstruct has_member_type&lt;T, Member, void_t&lt;typename T::Member&gt;&gt; : true_type {};\n\nstruct foo { using bar = int; };\n\nint main()\n{\n    std::cout &lt;&lt; has_member_type&lt;foo, typename foo::bar&gt;::value;\n}\n</code></pre>\n\n<p>I'm trying to check whether <code>foo</code> has a <code>bar</code> type member. It works fine if the implementation doesn't specify the type member's name, but that way the name is hardcoded into the implementation, which doesn't work for me.</p>\n\n<p>The question said to be duplicate doesn't come close to answering my question. As I explained in the paragraph above, it's fine when the type is hardcoded into the implementation, but I can't get it to work when I specify the type from outside (that's the specific problem). The code compiles fine, but produces wrong results.</p>\n"}, {"tags": ["c++", "excel", "parsing", "csv", "stl"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453303622, "post_id": 34903784, "comment_id": 57543974, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c\">How can I read and parse CSV files in C++?</a>"}, {"owner": {"reputation": 80, "user_id": 2744444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adef7a2a8f574e8d877a9849ad22bb43?s=128&d=identicon&r=PG&f=1", "display_name": "bratak", "link": "https://stackoverflow.com/users/2744444/bratak"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1453304108, "post_id": 34903784, "comment_id": 57544346, "body": "@SimonKraemer posted a good answer. You didn&#39;t specify what issue you are having with the endline characters, but maybe <a href=\"http://stackoverflow.com/a/15328493/2744444\">this answer</a> will help. Or at least get you going."}, {"owner": {"reputation": 148, "user_id": 3836982, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9637974738466fa6692cdc1c06362db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3836982", "link": "https://stackoverflow.com/users/3836982/user3836982"}, "edited": false, "score": 0, "creation_date": 1453304487, "post_id": 34903784, "comment_id": 57544630, "body": "My issue is that when i have read the first table, my program continue to read the second table instead i want only read the first."}, {"owner": {"reputation": 80, "user_id": 2744444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adef7a2a8f574e8d877a9849ad22bb43?s=128&d=identicon&r=PG&f=1", "display_name": "bratak", "link": "https://stackoverflow.com/users/2744444/bratak"}, "edited": false, "score": 0, "creation_date": 1453304873, "post_id": 34903784, "comment_id": 57544919, "body": "I would think that the link I shared would work then. You said each table is separated by a blank line, then <code>if (entry == &quot;&quot;)</code> is true, then you could write it to your matrix and then maybe reset the stream?"}, {"owner": {"reputation": 148, "user_id": 3836982, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9637974738466fa6692cdc1c06362db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3836982", "link": "https://stackoverflow.com/users/3836982/user3836982"}, "edited": false, "score": 0, "creation_date": 1453305417, "post_id": 34903784, "comment_id": 57545323, "body": "&#39;entry&#39; is a string? I cant adapt the code to my problem, it continue to read all table."}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 2744444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adef7a2a8f574e8d877a9849ad22bb43?s=128&d=identicon&r=PG&f=1", "display_name": "bratak", "link": "https://stackoverflow.com/users/2744444/bratak"}, "is_accepted": false, "score": 1, "last_activity_date": 1453317219, "last_edit_date": 1453317219, "creation_date": 1453310307, "answer_id": 34906409, "question_id": 34903784, "link": "https://stackoverflow.com/questions/34903784/parse-csv-file-c/34906409#34906409", "title": "Parse csv file c++", "body": "<p>Maybe try <code>if (entry.empty())</code>, or some condition like that. \nAlso, I think that getline() returns the length of the line (0 being empty, so a blank line will be > 0). So it should be as simple as finding the size of the blank line.</p>\n\n<pre><code>while (getline(file, intvalue)) \n{\n    if (intvalue &gt; 0) \n    {\n        getline(file, intvalue, ';');\n        JobTime.push_back(intvalue);\n\n        getline(file, intvalue, ';');\n        MachineId.push_back(intvalue);\n\n        getline(file, intvalue, '\\n');\n        ProcTime.push_back(intvalue);\n\n    } else {\n        break;\n    }\n}\n</code></pre>\n\n<p>Or something of the like. If <code>intvalue &gt; 0</code> doesn't work, then find what the size is of the empty line and use that as the condition.</p>\n\n<p><b>EDIT</b>:\nAs an alternative, getline() can return a string as well. In my opinion, this has the benefit of being searchable. I wrote a quick example of this below. </p>\n\n<pre><code>size_t pos;\nstd::string str;\nstd::string token;\nstd::vector&lt;std::string&gt; line;\n\n// get the entire line\nwhile ( getline(file, str) )\n{\n    while ( (pos = str.find(';')) != std::string::npos)\n    {\n        // get content up to next semicolon     \n        token = str.substr(0, pos);\n        line.push_back(token);\n        str.erase(0, pos + 1);\n    }\n    // get content to the end\n    token = str.substr(0, pos);\n    line.push_back(token);\n}\n</code></pre>\n\n<p>The second while loop looks for each semicolon, pushes the content, and then erases it. After the while loop, the push_back() is for the rest of the line from the last semicolon to the end. </p>\n"}, {"tags": [], "owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "is_accepted": false, "score": 2, "last_activity_date": 1453311315, "creation_date": 1453311315, "answer_id": 34906765, "question_id": 34903784, "link": "https://stackoverflow.com/questions/34903784/parse-csv-file-c/34906765#34906765", "title": "Parse csv file c++", "body": "<p>You can use the peek() function.<br>\ncheck for file.peek()!='\\n'<br>\nThe following code should work for you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint i = 0, j = 0 , z=0;\n\nint main()\n{\n    ifstream file(\"I_30_2_02_02_1.csv\"); // declare file stream\n    if(!file)\n        return 0;\n    string value;\n    string intvalue;\n    string check;\n    int jobs;\n    int machines;\n    int resources;\n    vector&lt;string&gt; JobTime;\n    vector&lt;string&gt; MachineId;\n    vector&lt;string&gt; ProcTime; //archiviato come JobId MachineId ProcTime\n\n    //prime tre righe\n\n    getline(file, value, ';'); // #jobs\n    getline(file, intvalue, '\\n');  \n    jobs = stoi(intvalue);\n    cout &lt;&lt; \"Jobs: \" &lt;&lt;jobs &lt;&lt; \"\\n\";    \n\n    getline(file, value, ';'); //#machines\n    getline(file, intvalue, '\\n');\n    machines = stoi(intvalue);\n    cout &lt;&lt; \"Machines: \" &lt;&lt; machines &lt;&lt; \"\\n\";\n\n    getline(file, value, ';'); //#resources\n    getline(file, intvalue, '\\n');\n    resources = stoi(intvalue);\n    cout &lt;&lt; \"Resources: \" &lt;&lt; resources &lt;&lt; \"\\n\";\n\n    //scritte inutili\n    getline(file, value, ';');\n    cout &lt;&lt; value &lt;&lt; \" \";\n    getline(file, value, ';');\n    cout &lt;&lt; value &lt;&lt; \" \";\n    getline(file, value, '\\n');\n    cout &lt;&lt; value &lt;&lt; \"\\n\";\n    //primo ciclo\n    while (file.peek()!='\\n') \n    {\n\n        getline(file, intvalue, ';');\n        JobTime.push_back(intvalue);\n        getline(file, intvalue, ';');\n        MachineId.push_back(intvalue);\n        getline(file, intvalue, '\\n');\n        ProcTime.push_back(intvalue);\n        //getline(file, intvalue, '\\n');\n    }\n\n    for (i = 0; i &lt; ProcTime.size(); i++)\n        cout &lt;&lt; JobTime[i] &lt;&lt; \" \" &lt;&lt; MachineId[i] &lt;&lt; \" \" &lt;&lt; ProcTime[i] &lt;&lt;endl;\n\n    cin &gt;&gt; intvalue;\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 3836982, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9637974738466fa6692cdc1c06362db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3836982", "link": "https://stackoverflow.com/users/3836982/user3836982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1453317219, "creation_date": 1453302992, "last_edit_date": 1453304613, "question_id": 34903784, "link": "https://stackoverflow.com/questions/34903784/parse-csv-file-c", "title": "Parse csv file c++", "body": "<p>I have to parse several csv files with the same basic structure and I have to save the values in different matrixes.\nI'd like to save each table in a single matrix but the problem is that I have some issues with the endline character.\nI tried to use the <code>getline</code>function but I can't terminate the while cycle when the table is parsed.</p>\n\n<p>I use this code:</p>\n\n<pre><code>// MMDS.cpp : definisce il punto di ingresso dell'applicazione console.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint i = 0, j = 0 , z=0;\n\nint main()\n{\n    ifstream file(\"I_30_2_02_02_1.csv\"); // declare file stream\n    string value;\n    string intvalue;\n    string check;\n    int jobs;\n    int machines;\n    int resources;\n    vector&lt;string&gt; JobTime;\n    vector&lt;string&gt; MachineId;\n    vector&lt;string&gt; ProcTime; //archiviato come JobId MachineId ProcTime\n\n    //prime tre righe\n    getline(file, value, ';'); // #jobs\n    getline(file, intvalue, '\\n');\n    jobs = stoi(intvalue);\n    cout &lt;&lt; \"Jobs: \" &lt;&lt;jobs &lt;&lt; \"\\n\";\n\n    getline(file, value, ';'); //#machines\n    getline(file, intvalue, '\\n');\n    machines = stoi(intvalue);\n    cout &lt;&lt; \"Machines: \" &lt;&lt; machines &lt;&lt; \"\\n\";\n\n    getline(file, value, ';'); //#resources\n    getline(file, intvalue, '\\n');\n    resources = stoi(intvalue);\n    cout &lt;&lt; \"Resources: \" &lt;&lt; resources &lt;&lt; \"\\n\";\n\n    //scritte inutili\n    getline(file, value, ';');\n    cout &lt;&lt; value &lt;&lt; \" \";\n    getline(file, value, ';');\n    cout &lt;&lt; value &lt;&lt; \" \";\n    getline(file, value, '\\n');\n    cout &lt;&lt; value &lt;&lt; \"\\n\";\n\n    //primo ciclo\n    while (getline(file, intvalue)) {\n\n        getline(file, intvalue, ';');\n        JobTime.push_back(intvalue);\n        getline(file, intvalue, ';');\n        MachineId.push_back(intvalue);\n        getline(file, intvalue, '\\n');\n        ProcTime.push_back(intvalue);\n        //getline(file, intvalue, '\\n');\n    }\n\n    for (i = 0; i &lt;= ProcTime.size(); i++)\n        cout &lt;&lt; JobTime[i] &lt;&lt; \" \" &lt;&lt; MachineId[i] &lt;&lt; \" \" &lt;&lt; ProcTime[i] &lt;&lt;endl;\n\n    cin &gt;&gt; intvalue;\n\n    return 0;\n}\n</code></pre>\n\n<p>The csv file is :</p>\n\n<pre><code>#Jobs;30\n#Machines;2\n#Resources;4\n\nJobId;MachineId;PrTime\n1;1;12\n2;0;97\n3;1;54\n4;1;83\n5;1;56\n6;0;5\n7;0;18\n8;1;17\n9;0;15\n10;0;83\n\nJobId;DueDate;RelDate;TardPenalty\n1;575;4;1\n2;563;70;2\n3;483;1;8\n4;519;68;1\n5;540;64;10\n6;546;126;8\n7;550;2;6\n</code></pre>\n\n<p>Each table is separated by the others with one blank line.\nCan someone help me to read each table?\nThanks a lot</p>\n"}]