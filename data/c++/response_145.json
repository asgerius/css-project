[{"tags": ["c++", "corrupt", "stack-corruption"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1508371095, "post_id": 46820934, "comment_id": 80589311, "body": "Did you implement all 5 special functions <b>correctly</b>?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1508371165, "post_id": 46820934, "comment_id": 80589337, "body": "FTR: Your constructor can be improved. And you could have simply used a <code>std::vector&lt;float&gt;</code> as <code>data</code>;"}, {"owner": {"reputation": 107, "user_id": 7498022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424559614230532/picture?type=large", "display_name": "Bernardo Bacalhau", "link": "https://stackoverflow.com/users/7498022/bernardo-bacalhau"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1508372010, "post_id": 46820934, "comment_id": 80589579, "body": "I can&#39;t use <code>std::vector&lt;float&gt;</code> because my teacher doesnt allow. I just can&#39;t understand why is &#39;m&#39; corrupted, if i&#39;m initializing it correctly."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508372359, "post_id": 46820934, "comment_id": 80589666, "body": "Do you have a copy constructor for <code>matrix4</code>? Does it make a copy of the <code>data</code> array? If the destructor deletes <code>data</code>, and you use the default copy constructor, the copy that&#39;s returned by <code>createScaleMat4</code> will have a pointer to the deleted array, resulting in undefined behavior when you use it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508372908, "post_id": 46820934, "comment_id": 80589786, "body": "@BernardoBacalhau -- <i>(I&#39;ve created the vector3D class too)</i> -- And if it has the same issues as your <code>matrix4</code> class, passing it by value as you&#39;re doing now here <code>createScaleMat4(vector3D v)</code> will lead to memory corruption.  Did your teacher tell you about these very important things that persons already have mentioned, such as copy constructor, assignment operator, etc?"}, {"owner": {"reputation": 107, "user_id": 7498022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424559614230532/picture?type=large", "display_name": "Bernardo Bacalhau", "link": "https://stackoverflow.com/users/7498022/bernardo-bacalhau"}, "edited": false, "score": 0, "creation_date": 1508405249, "post_id": 46820934, "comment_id": 80600879, "body": "Here&#39;s my destructor: <code>matrix4::~matrix4() { \tdelete data; }</code>"}, {"owner": {"reputation": 107, "user_id": 7498022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424559614230532/picture?type=large", "display_name": "Bernardo Bacalhau", "link": "https://stackoverflow.com/users/7498022/bernardo-bacalhau"}, "edited": false, "score": 0, "creation_date": 1508405318, "post_id": 46820934, "comment_id": 80600918, "body": "And my copy constructor: <code>matrix4::matrix4(matrix4&amp; m) { \tdata = new float[16]; \tfor (int i = 0; i &lt; 16; i++) \t\tdata[i] = m.get_data(i); }</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508461459, "post_id": 46820934, "comment_id": 80629807, "body": "@BernardoBacalhau -- Your code uses the wrong form of <code>delete[]</code>, and has no assignment operator for <code>matrix4</code>.  In addition, your <code>vector3D</code> class better have correct copy semantics, as passing it by value will also cause undefined behavior (you are doing that now, and you didn&#39;t post that class).  That <code>vector3D</code> is a likely candidate for contributing to what is causing your memory issues, and <code>matrix4</code> could be just a red-herring making you look in the wrong direction.  This is why a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is always best, not code snippets."}], "owner": {"reputation": 107, "user_id": 7498022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424559614230532/picture?type=large", "display_name": "Bernardo Bacalhau", "link": "https://stackoverflow.com/users/7498022/bernardo-bacalhau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1508377936, "answer_count": 0, "score": 0, "last_activity_date": 1508370832, "creation_date": 1508370832, "question_id": 46820934, "link": "https://stackoverflow.com/questions/46820934/c-stack-around-the-variable-m-was-corrupted", "closed_reason": "Duplicate", "title": "c++ - Stack around the variable &#39;m&#39; was corrupted", "body": "<p>I just made a class called \"matrix4\" which has a pointer to float, called data.</p>\n\n<pre><code>class matrix4\n{\npublic:\n    float * data;\n</code></pre>\n\n<p>The constructor, receives 16 floats, allocates space and inicializes every cell with the respective float: </p>\n\n<pre><code>matrix4::matrix4(float c0, float c1, float c2, float c3, float c4, float c5, float c6, float c7, float c8, float c9, float c10, float c11, float c12, float c13, float c14, float c15) {\n    data = new float[16];\n    float input_vector[16] = { c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15 };\n    for (int i = 0; i &lt; 16; i++) {\n        data[i] = input_vector[i];\n    }\n}\n</code></pre>\n\n<p>Now I'm doing a factory class that produces matrix4. This specific one,receives a vector of scale (I've created the vector3D class too) and returns a scale matrix: </p>\n\n<pre><code> matrix4 factory::createScaleMat4(vector3D v) {\n    matrix4 m = matrix4(v.get_x(), 0, 0, 0,\n                        0, v.get_y(), 0, 0,\n                        0, 0, v.get_z(), 0,\n                        0, 0, 0, 1);\n    return m;\n};\n</code></pre>\n\n<p>The problem is that it gives me this error: \"Run-Time Check Failure #2 - Stack around the variable 'm' was corrupted\", and I can't understand why...</p>\n"}, {"tags": ["c++", "3d", "qml", "qt5", "qt3d"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1508392560, "post_id": 46820903, "comment_id": 80594435, "body": "What did you already do? What problem did you face while writing the code?"}], "answers": [{"comments": [{"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1508418244, "post_id": 46824339, "comment_id": 80608389, "body": "Thank you for this superb answer! I actually ran across your GitHub repo for this while researching. Nice to have an explanation to go along with it."}, {"owner": {"reputation": 1170, "user_id": 632150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90d870c57e93d34fac6328699b82f9c?s=128&d=identicon&r=PG", "display_name": "dragly", "link": "https://stackoverflow.com/users/632150/dragly"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1508449068, "post_id": 46824339, "comment_id": 80626335, "body": "You&#39;re welcome! I was actually thinking about this repository the other day and that it could have been a bit more user-friendly and documented. Glad you posted the question and reminded me to have another look at it. Let me know if you have any more questions."}], "tags": [], "owner": {"reputation": 1170, "user_id": 632150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90d870c57e93d34fac6328699b82f9c?s=128&d=identicon&r=PG", "display_name": "dragly", "link": "https://stackoverflow.com/users/632150/dragly"}, "is_accepted": true, "score": 9, "last_activity_date": 1508396760, "creation_date": 1508396760, "answer_id": 46824339, "question_id": 46820903, "link": "https://stackoverflow.com/questions/46820903/billboarding-using-qt3d-2-0/46824339#46824339", "title": "Billboarding using Qt3D 2.0", "body": "<p>If you want to draw just one billboard, you can add a plane and rotate it whenever the camera moves. However, if you want to do this efficiently with thousands or millions of billboards, I recommend using custom shaders. We did this to draw impostor spheres in Qt3D.</p>\n\n<p>However, we didn't use a geometry shader because we were targeting systems that didn't support geometry shaders. Instead, we used only the vertex shader by placing four vertices in the origin and moved these on the shader. To create many copies, we used instanced drawing. We moved each set of four vertices according to the positions of the spheres. Finally, we moved each of the four vertices of each sphere such that they result in a billboard that is always facing the camera. </p>\n\n<p>Start out by subclassing QGeometry and created a buffer functor that creates four points, all in the origin (see <a href=\"https://github.com/ovilab/SimVis/blob/cbe33cc85d38e54a50a1c34542a3afdcb6098d38/src/render/geometry/spherespointgeometry.cpp\" rel=\"noreferrer\">spherespointgeometry.cpp</a>). Give each point an ID that we can use later. If you use geometry shaders, the ID is not needed and you can get away with creating only one vertex.</p>\n\n<pre><code>class SpheresPointVertexDataFunctor : public Qt3DRender::QBufferDataGenerator\n{\npublic:\n    SpheresPointVertexDataFunctor()\n    {\n    }\n\n    QByteArray operator ()() Q_DECL_OVERRIDE\n    {\n        const int verticesCount = 4;\n        // vec3 pos\n        const quint32 vertexSize = (3+1) * sizeof(float);\n\n        QByteArray verticesData;\n        verticesData.resize(vertexSize*verticesCount);\n        float *verticesPtr = reinterpret_cast&lt;float*&gt;(verticesData.data());\n\n        // Vertex 1\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        // VertexID 1\n        *verticesPtr++ = 0.0;\n\n        // Vertex 2\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        // VertexID 2\n        *verticesPtr++ = 1.0;\n\n        // Vertex 3\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        // VertexID3\n        *verticesPtr++ = 2.0;\n\n        // Vertex 4\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        *verticesPtr++ = 0.0;\n        // VertexID 4\n        *verticesPtr++ = 3.0;\n\n        return verticesData;\n    }\n\n    bool operator ==(const QBufferDataGenerator &amp;other) const Q_DECL_OVERRIDE\n    {\n        Q_UNUSED(other);\n        return true;\n    }\n\n    QT3D_FUNCTOR(SpheresPointVertexDataFunctor)\n};\n</code></pre>\n\n<p>For the real positions, we used a separate QBuffer. We also set color and scale, but I have omitted those here (see <a href=\"https://github.com/ovilab/SimVis/blob/cbe33cc85d38e54a50a1c34542a3afdcb6098d38/src/render/geometry/spheredata.cpp\" rel=\"noreferrer\">spheredata.cpp</a>):</p>\n\n<pre><code>void SphereData::setPositions(QVector&lt;QVector3D&gt; positions, QVector3D color, float scale)\n{\n    QByteArray ba;\n    ba.resize(positions.size() * sizeof(QVector3D));\n    SphereVBOData *vboData = reinterpret_cast&lt;QVector3D *&gt;(ba.data());\n    for(int i=0; i&lt;positions.size(); i++) {\n        QVector3D &amp;position = vboData[i];\n        position = positions[i];\n    }\n    m_buffer-&gt;setData(ba);\n    m_count = positions.count();\n}\n</code></pre>\n\n<p>Then, in QML, we connected the geometry with the buffer in a QGeometryRenderer. This can also be done in C++, if you prefer (see \n<a href=\"https://github.com/ovilab/SimVis/blob/cbe33cc85d38e54a50a1c34542a3afdcb6098d38/src/imports/SimVis/Spheres.qml\" rel=\"noreferrer\">Spheres.qml</a>):</p>\n\n<pre><code>GeometryRenderer {\n    id: spheresMeshInstanced\n    primitiveType: GeometryRenderer.TriangleStrip\n    enabled: instanceCount != 0\n    instanceCount: sphereData.count\n\n    geometry: SpheresPointGeometry {\n        attributes: [\n            Attribute {\n                name: \"pos\"\n                attributeType: Attribute.VertexAttribute\n                vertexBaseType: Attribute.Float\n                vertexSize: 3\n                byteOffset: 0\n                byteStride: (3 + 3 + 1) * 4\n                divisor: 1\n                buffer: sphereData ? sphereData.buffer : null\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p>Finally, we created custom shaders to draw the billboards. Note that because we were drawing impostor spheres, the billboard size was increased to handle raytracing in the fragment shader from awkward angles. You likely do not need the <code>2.0*0.6</code> factor in general.</p>\n\n<p>Vertex shader:</p>\n\n<pre><code>#version 330\n\nin vec3 vertexPosition;\nin float vertexId;\nin vec3 pos;\nin vec3 col;\nin float scale;\n\nuniform vec3 eyePosition = vec3(0.0, 0.0, 0.0);\n\nuniform mat4 modelMatrix;\nuniform mat4 mvp;\n\nout vec3 modelSpherePosition;\nout vec3 modelPosition;\nout vec3 color;\nout vec2 planePosition;\nout float radius;\nvec3 makePerpendicular(vec3 v) {\n    if(v.x == 0.0 &amp;&amp; v.y == 0.0) {\n        if(v.z == 0.0) {\n            return vec3(0.0, 0.0, 0.0);\n        }\n        return vec3(0.0, 1.0, 0.0);\n    }\n    return vec3(-v.y, v.x, 0.0);\n}\n\nvoid main() {\n    vec3 position = vertexPosition + pos;\n    color = col;\n    radius = scale;\n    modelSpherePosition = (modelMatrix * vec4(position, 1.0)).xyz;\n\n    vec3 view = normalize(position - eyePosition);\n    vec3 right = normalize(makePerpendicular(view));\n    vec3 up = cross(right, view);\n\n    float texCoordX = 1.0 - 2.0*(float(vertexId==0.0) + float(vertexId==2.0));\n    float texCoordY = 1.0 - 2.0*(float(vertexId==0.0) + float(vertexId==1.0));\n    planePosition = vec2(texCoordX, texCoordY);\n\n    position += 2*0.6*(-up - right)*(scale*float(vertexId==0.0));\n    position += 2*0.6*(-up + right)*(scale*float(vertexId==1.0));\n    position += 2*0.6*(up - right)*(scale*float(vertexId==2.0));\n    position += 2*0.6*(up + right)*(scale*float(vertexId==3.0));\n\n    vec4 modelPositionTmp = modelMatrix * vec4(position, 1.0);\n    modelPosition = modelPositionTmp.xyz;\n\n    gl_Position = mvp*vec4(position, 1.0);\n}\n</code></pre>\n\n<p>Fragment shader:</p>\n\n<pre><code>#version 330\n\nin vec3 modelPosition;\nin vec3 modelSpherePosition;\nin vec3 color;\nin vec2 planePosition;\nin float radius;\n\nout vec4 fragColor;\n\nuniform mat4 modelView;\nuniform mat4 inverseModelView;\nuniform mat4 inverseViewMatrix;\nuniform vec3 eyePosition;\nuniform vec3 viewVector;\n\nvoid main(void) {\n    vec3 rayDirection = eyePosition - modelPosition;\n    vec3 rayOrigin = modelPosition - modelSpherePosition;\n\n    vec3 E = rayOrigin;\n    vec3 D = rayDirection;\n\n    // Sphere equation\n    //      x^2 + y^2 + z^2 = r^2\n    // Ray equation is\n    //     P(t) = E + t*D\n    // We substitute ray into sphere equation to get\n    //     (Ex + Dx * t)^2 + (Ey + Dy * t)^2 + (Ez + Dz * t)^2 = r^2\n    float r2 = radius*radius;\n    float a = D.x*D.x + D.y*D.y + D.z*D.z;\n    float b = 2.0*E.x*D.x + 2.0*E.y*D.y + 2.0*E.z*D.z;\n    float c = E.x*E.x + E.y*E.y + E.z*E.z - r2;\n\n    // discriminant of sphere equation\n    float d = b*b - 4.0*a*c;\n    if(d &lt; 0.0) {\n        discard;\n    }\n\n    float t = (-b + sqrt(d))/(2.0*a);\n    vec3 sphereIntersection = rayOrigin + t * rayDirection;\n\n    vec3 normal = normalize(sphereIntersection);\n    vec3 normalDotCamera = color*dot(normal, normalize(rayDirection));\n\n    float pi = 3.1415926535897932384626433832795;\n\n    vec3 position = modelSpherePosition + sphereIntersection;\n\n    // flat red\n    fragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n</code></pre>\n\n<p>It has been some time since we first implemented this, and there might be easier ways to do it now, but this should give you an idea of the pieces you need.</p>\n"}], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 2, "accepted_answer_id": 46824339, "answer_count": 1, "score": 5, "last_activity_date": 1508396760, "creation_date": 1508370596, "question_id": 46820903, "link": "https://stackoverflow.com/questions/46820903/billboarding-using-qt3d-2-0", "title": "Billboarding using Qt3D 2.0", "body": "<p>I am looking for the best way to create a billboard in Qt3D. I would like a plane which faces the camera wherever it is and does not change sized when the camera dollies forward or back. I have read how to do this using GLSL vertex and geometry shaders, but I am looking for the Qt3D way, unless customer shaders is the most efficient and best way of billboarding.</p>\n\n<p>I have looked, and it appears I can set the Matrix on a <code>QTransform</code> via properties, but it isn't clear to me how I would manipulate the matrix, or perhaps there is a better way? I am using the C++ api, but a QML answer would do. I could port it to C++.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1508370189, "post_id": 46820762, "comment_id": 80589094, "body": "For this limited example, just put <code>return</code> after the <code>else</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 1, "creation_date": 1508370041, "post_id": 46820807, "comment_id": 80589053, "body": "Not quite, OP wants to set <code>somethingWasTrue</code> to false if they reach the final <code>else</code> (i.e. they don&#39;t want to run &quot;code that uses z&quot; if the last else is hit)."}], "tags": [], "owner": {"reputation": 11, "user_id": 7944876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/csRc9.jpg?s=128&g=1", "display_name": "A. Walker", "link": "https://stackoverflow.com/users/7944876/a-walker"}, "is_accepted": false, "score": 0, "last_activity_date": 1508369954, "creation_date": 1508369954, "answer_id": 46820807, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain/46820807#46820807", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>You could try this:</p>\n\n<pre><code>bool somethingWasTrue = true;\nif( x )\n    z = 0;\nelse if( y )\n    z = ResultOfSomething();\nelse\n    // code that uses z\n</code></pre>\n\n<p>Since you are wanting a \"default\" selection to fire if the first two \"ifs\" are false, just put an \"else\" on the end.</p>\n"}, {"tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 2, "last_activity_date": 1508370316, "creation_date": 1508370316, "answer_id": 46820865, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain/46820865#46820865", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>You can <code>break</code> out of a loop to early terminate the <code>else</code>, and continue processing otherwise.</p>\n\n<pre><code>do {\n    if( x )\n        z = 0;\n    else if( y )\n        z = ResultOfSomething();\n    else\n        break;\n\n    // code that uses z\n} while( 0 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1508405306, "post_id": 46820867, "comment_id": 80600910, "body": "If your intent is <code>goto</code>, then why don&#39;t you use it? Why this <code>do&#47;break&#47;while (false)</code>?"}], "tags": [], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "is_accepted": false, "score": 4, "last_activity_date": 1508370322, "creation_date": 1508370322, "answer_id": 46820867, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain/46820867#46820867", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>You don't need that <code>somethingWasTrue</code> variable at all. Use breakable block: </p>\n\n<pre><code>do {\n  if( x )\n    z = 0;\n  else if( y )\n    z = ResultOfSomething();\n  else\n    break;\n\n  // code that uses z\n} while(false);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1508370925, "creation_date": 1508370925, "answer_id": 46820948, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain/46820948#46820948", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>I would go with your \"obvious implementation\".  I think it's most legible.</p>\n\n<p>And it's not really wasteful. Both g++ and clang++ eliminate the <code>bool</code> at even the -O1 optimization level: <a href=\"https://godbolt.org/g/ZmzDEP\" rel=\"nofollow noreferrer\">see here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1508371707, "creation_date": 1508371707, "answer_id": 46821055, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain/46821055#46821055", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>How about creating sub function:</p>\n\n<pre><code>void foo(int z)\n{\n    // code that uses z\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>if (x)\n    foo(0);\nelse if( y )\n    foo(ResultOfSomething());\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8798428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3c9148ccf8c75ab92b7efdb799702?s=128&d=identicon&r=PG&f=1", "display_name": "disjointed", "link": "https://stackoverflow.com/users/8798428/disjointed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 46820948, "answer_count": 5, "score": 2, "last_activity_date": 1508371707, "creation_date": 1508369581, "question_id": 46820762, "link": "https://stackoverflow.com/questions/46820762/is-there-any-simple-way-to-do-an-opposite-of-else-at-the-end-of-an-if-else-chain", "title": "is there any simple way to do an opposite of else at the end of an if-else chain?", "body": "<p>Is there a simpler generic way to have a set of code run that uses the values set in an if-else chain, only if one of the if-else conditions was true? I'd sort of like to close the chain with a statement that means the opposite of else... like \"if\", \"else\", \"ok one of those was true now do this.\"</p>\n\n<p>Generically an obvious implementation is this:</p>\n\n<pre><code>bool somethingWasTrue = true;\nif( x )\n    z = 0;\nelse if( y )\n    z = ResultOfSomething();\nelse\n    somethingWasTrue = false;\n\nif( somethingWasTrue )\n{\n    // code that uses z\n}\n</code></pre>\n\n<p>The best potential solution i can come up with is using an optional z, then instead of if( somethingWasTrue ) having if( z )</p>\n"}, {"tags": ["c++", "id3", "wchar-t"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1508369050, "post_id": 46820667, "comment_id": 80588812, "body": "The two first bytes look like an UTF-16 byte order mark, BOM. The rest is consistent with an UTF-16 encoding. UCS2 is a subset of UTF-16, and the comment in the code does say &quot;UCS-2 encoded Unicode with BOM&quot;; how did you produce that code without being aware of what that means?"}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508369191, "post_id": 46820667, "comment_id": 80588848, "body": "I will look at this after you write that code in a format recognized by anybody. Just why."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1508369387, "post_id": 46820667, "comment_id": 80588890, "body": "Are you missing a line with <code>}</code> in the middle of that code?"}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508369451, "post_id": 46820667, "comment_id": 80588904, "body": "Yes there definitely is a missing <code>}</code>"}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "edited": false, "score": 0, "creation_date": 1508369473, "post_id": 46820667, "comment_id": 80588911, "body": "Corrected now, my bad!"}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508369485, "post_id": 46820667, "comment_id": 80588915, "body": "Answer the other questions @AlexOsheter"}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1508369725, "post_id": 46820667, "comment_id": 80588973, "body": "Not entirely sure I understand the question.. @Cheersandhth.-Alf  I wrote the code based off the ID3 documentation, I know what kind of data I&#39;m expecting, but purely on a logical level. I have no experience with Unicode on C++."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1508370139, "post_id": 46820667, "comment_id": 80589081, "body": "Unicode BOM: <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Byte_order_mark</a>"}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508370338, "post_id": 46820667, "comment_id": 80589133, "body": "You edited this to add <code>char encoding[1];</code> inside the while loop. Take that out, you don&#39;t want to create a variable every time in the while loop. Put it at the top."}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "edited": false, "score": 0, "creation_date": 1508371048, "post_id": 46820667, "comment_id": 80589300, "body": "Edited. But how is it different from <code>frameHeader[10]</code> I always create?  Did you read my clarification regarding question 2? Is this the correct way to do it? If so, how can this be done? If not, what&#39;s the correct way?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508371605, "post_id": 46820667, "comment_id": 80589459, "body": "@CoreyLakey: There&#39;s no cost associated with having the variable in the loop. You can look at the assembly to confirm what I&#39;m saying. However, there is a code reading cost in using a size 1 array. A <code>char</code> variable on its own is all that&#39;s needed."}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508371829, "post_id": 46820667, "comment_id": 80589528, "body": "Didnt mean theres a cost, just bad practice."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1508371928, "post_id": 46820667, "comment_id": 80589557, "body": "@AlexOsheter: Given the data you present it looks like <b>big-endian</b> UTF-16. Your system is not necessarily big-endian (e.g. Windows runs on little-endian architectures such as the ordinary PC). This means you have two issues when you convert to <code>wchar_t</code> sequence, namely: (1) skipping the BOM, and (2) using some means of converting to the host byte order. Unfortunately the C++ standard library offers no way to detect byte order at compile time."}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1508372254, "post_id": 46820667, "comment_id": 80589636, "body": "@Cheersandhth.-Alf Big-endian? On the linked wiki page, it says that <code>if the 16-bit units use little-endian order, the sequence of bytes will have 0xFF followed by 0xFE</code>. My first byte was -1 (signed). <code>(uint8_t) -1 == 255</code>, second was 254.  255 is 0xFF, no?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1508372364, "post_id": 46820667, "comment_id": 80589667, "body": "@AlexOsheter: Sorry, you&#39;re right. My bad. Mea culpa. It&#39;s little-endian all right. Still you may want to consider whether the code will be used on big-endian system."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508482593, "post_id": 46820667, "comment_id": 80635102, "body": "Are you doing this on Windows?"}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508483361, "post_id": 46820667, "comment_id": 80635475, "body": "@BarmakShemirani Yes. Why?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508483841, "post_id": 46820667, "comment_id": 80635690, "body": "Windows has <code>WideCharToMultiByte</code> and <code>MultiByteToWideChar</code> for this purpose."}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508485693, "post_id": 46820667, "comment_id": 80636611, "body": "@BarmakShemirani wow that&#39;s awesome. Thank you! I&#39;ll keep that in mind next time."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508538671, "post_id": 46820667, "comment_id": 80663939, "body": "Actually I don&#39;t think you need <code>MultiByteToWideChar</code> here."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508482532, "post_id": 46830103, "comment_id": 80635076, "body": "Your solution may work for English and other Latin languages only. UCS-2 and UTF-16 are different. UCS-2 is outdated. UTF-8 and UTF-16 are supposed to handle all languages."}, {"owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508483278, "post_id": 46830103, "comment_id": 80635427, "body": "I&#39;ve tested it with English, Hebrew, Russian and Simplified Chinese. Works well. Also, there&#39;s not much I can do, seeing as some ID3v2 tags are encoded this way."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508483799, "post_id": 46830103, "comment_id": 80635673, "body": "That&#39;s odd! It must be UCS-2 then."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508539013, "post_id": 46830103, "comment_id": 80664034, "body": "I think your code will work for either UCS-2 or UTF-16 (in this specific usage), but you can shorten it."}], "tags": [], "owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "is_accepted": false, "score": 1, "last_activity_date": 1508483073, "last_edit_date": 1508483073, "creation_date": 1508416802, "answer_id": 46830103, "question_id": 46820667, "link": "https://stackoverflow.com/questions/46820667/alternate-reading-as-char-and-wchar-t/46830103#46830103", "title": "Alternate reading as char* and wchar_t*", "body": "<p>I figured out a decent solution: create a new wchar_t buffer and add the characters from the char array in pairs.</p>\n\n<pre><code>wchar_t* charToWChar(char* cArray, int len) {\n    char wideChar[2];\n    wchar_t wideCharW;\n    wchar_t *wArray = (wchar_t *) malloc(sizeof(wchar_t) * len / 2);\n    int counter = 0;\n    int endian = BIGENDIAN;\n\n    // Check endianness\n    if ((uint8_t) cArray[0] == 255 &amp;&amp; (uint8_t) cArray[1] == 254)\n        endian = LITTLEENDIAN;\n    else if ((uint8_t) cArray[1] == 255 &amp;&amp; (uint8_t) cArray[0] == 254)\n        endian = BIGENDIAN;\n\n    for (int j = 2; j &lt; len; j+=2){\n        switch (endian){\n            case LITTLEENDIAN: {wideChar[0] = cArray[j]; wideChar[1] = cArray[j + 1];} break;\n            default:\n            case BIGENDIAN: {wideChar[1] = cArray[j]; wideChar[0] = cArray[j + 1];} break;\n        }\n\n        wideCharW = (uint16_t)((uint8_t)wideChar[1] &lt;&lt; 8 | (uint8_t)wideChar[0]);\n        wArray[counter] = wideCharW;\n        counter++;\n    }\n    wArray[counter] = '\\0';\n    return wArray;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>    if (encoding[0] == 1){\n        // We're dealing with UCS-2 encoded Unicode with BOM\n        char data[frame.size];\n        mp3File.read(data, frame.size);\n        wcout &lt;&lt; charToWChar(data, frame.size) &lt;&lt; endl;\n    }\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 5611506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-MPVU4OAEZGo/AAAAAAAAAAI/AAAAAAAAAFY/0vnbRwOBTm4/photo.jpg?sz=128", "display_name": "Alex Osheter", "link": "https://stackoverflow.com/users/5611506/alex-osheter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508539581, "creation_date": 1508368969, "last_edit_date": 1508370556, "question_id": 46820667, "link": "https://stackoverflow.com/questions/46820667/alternate-reading-as-char-and-wchar-t", "title": "Alternate reading as char* and wchar_t*", "body": "<p>I'm trying to write a program that parses ID3 tags, for educational purposes (so please explain in depth, as I'm trying to learn). So far I've had great success, but stuck on an encoding issue.</p>\n\n<p>When reading the mp3 file, the default encoding for all text is ISO-8859-1. All header info (frame IDs etc) can be read in that encoding. </p>\n\n<p>This is how I've done it:</p>\n\n<pre><code>ifstream mp3File(\"../myfile.mp3\");\nmp3File.read(mp3Header, 10);  // char mp3Header[10];\n\n// .... Parsing the header\n\n// After reading the main header, we get into the individual frames.\n// Read the first 10 bytes from buffer, get size and then read data \nchar encoding[1]; \nwhile(1){\n    char frameHeader[10] = {0};\n    mp3File.read(frameHeader, 10);\n    ID3Frame frame(frameHeader);  // Parses frameHeader \n    if (frame.frameId[0] == 'T'){ // Text Information Frame\n        mp3File.read(encoding, 1); // Get encoding\n        if (encoding[0] == 1){\n            // We're dealing with UCS-2 encoded Unicode with BOM\n            char data[frame.size];\n            mp3File.read(data, frame.size);\n        }\n    }\n}\n</code></pre>\n\n<p>This is bad code, because <code>data</code> is a <code>char*</code>, its' inside should look like this (converted undisplayable chars to int):</p>\n\n<pre><code>char = [0xFF, 0xFE, C, 0, r, 0, a, 0, z, 0, y, 0]\n</code></pre>\n\n<p>Two questions: </p>\n\n<ol>\n<li>What are the first two bytes? - Answered.</li>\n<li>How can I read wchar_t from my already open file? And then get back to reading the rest of it?</li>\n</ol>\n\n<p>Edit Clarification: I'm not sure if this is the correct way to do it, but essentially what I wanted to do was.. Read the first 11 bytes to a char array (header+encoding), then the next 12 bytes to a wchar_t array (the name of the song), and then the next 10 bytes to a char array (the next header). Is that possible?</p>\n"}, {"tags": ["c++", "static-analysis", "clang-static-analyzer", "clang-tidy"], "answers": [{"tags": [], "owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "is_accepted": true, "score": 1, "last_activity_date": 1508720565, "creation_date": 1508720565, "answer_id": 46880648, "question_id": 46820540, "link": "https://stackoverflow.com/questions/46820540/getting-clang-tidy-to-spot-a-statically-deducible-logic-error/46880648#46880648", "title": "Getting clang-tidy to spot a statically deducible logic error", "body": "<p>So, yeah, it turns out that this cannot be done in clang-tidy at least, and probably most other static analysers.</p>\n\n<p>The gory details of why not can be found at <a href=\"https://lists.llvm.org/pipermail/cfe-dev/2017-June/054120.html\" rel=\"nofollow noreferrer\">https://lists.llvm.org/pipermail/cfe-dev/2017-June/054120.html</a>, but in essence:</p>\n\n<ol>\n<li>The halting problem i.e. no idea if and how loops are executed.</li>\n<li>clang-tidy and other analysers are built to avoid seeing dead code as much as possible. This exactly is opposite to what is needed for the kind of check above.</li>\n</ol>\n"}], "owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 46880648, "answer_count": 1, "score": 2, "last_activity_date": 1508720565, "creation_date": 1508368092, "question_id": 46820540, "link": "https://stackoverflow.com/questions/46820540/getting-clang-tidy-to-spot-a-statically-deducible-logic-error", "title": "Getting clang-tidy to spot a statically deducible logic error", "body": "<p>I don't know if what I'd like is possible, but I figure give it an ask anyway.</p>\n\n<p>I have some Boost library code where I'd like to hint to clang-tidy to issue a warning where through static analysis, a clear instance of undefined behaviour could occur due to bad logic. <a href=\"https://akrzemi1.wordpress.com/2016/12/12/concealing-bugs/\" rel=\"nofollow noreferrer\">https://akrzemi1.wordpress.com/2016/12/12/concealing-bugs/</a> suggests that <code>__builtin_unreachable()</code> might get clang-tidy to trip like this, but I have failed to make it happen (though it trips the UB sanitiser very nicely):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;optional&gt;\n\nint main()\n{\n  std::optional&lt;int&gt; f;\n  // Spot the UB before it happens and flag it\n  if(!f)\n  {\n    __builtin_unreachable();\n  }\n  // Here is the UB\n  return *f;\n}\n</code></pre>\n\n<p>In the code above, a static analyser can clearly tell that <code>__builtin_unreachable()</code> must be called. I want clang-tidy to report this, yet <code>clang-tidy-5.0 -checks=* -header-filter=.* temp.cpp -- -std=c++17</code> reports nothing.</p>\n\n<p>Note I don't need to use <code>__builtin_unreachable()</code>, it's just what Andrzej's C++ Blog suggested. <strong>Any</strong> technique for getting the clang static analyser, or the MSVC static analyser, or ideally clang-tidy, to deduce when UB must obviously occur through static deduction and flag it at compile time is what I am looking for.</p>\n\n<p>What I am not looking for is a construct which <em>always</em> trips a warning during static analysis irrespective of use case. I only want the static analysis warning to appear when through static analysis alone, it is obvious at compile time that UB could be invoked given some statically deducible logic error.</p>\n\n<p>My thanks in advance!</p>\n"}, {"tags": ["c#", "c++", "interop", "pinvoke"], "comments": [{"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 1, "creation_date": 1508368264, "post_id": 46820530, "comment_id": 80588605, "body": "std::wstring is a C++ class... you cannot expect a C# string to be converted into that &quot;automagically&quot;."}, {"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1508368325, "post_id": 46820530, "comment_id": 80588623, "body": "Read here: <a href=\"https://social.msdn.microsoft.com/Forums/en-US/fec28110-7a53-4fb5-8db6-3463aee768e1/marshalling-a-string-by-reference-from-c-to-unmanaged-c-and-back?forum=clr\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 1764, "user_id": 488336, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/36a13e5f78aa4b60b02a4106b2916056?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/488336/jeff"}, "reply_to_user": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1508369183, "post_id": 46820530, "comment_id": 80588844, "body": "I implemented your suggestion and left the C# call alone but expect a LPTSTR as the parameter in the C++ dll.  I am able to call it but the data I get in the dll is garbage myArgsPtr = 0x000000f3cabfec80 L&quot;\u502f\u7461\u2068\u3a63\u745c\u6d65\u5c70\u736a\u2e72\u7874\u2074\u422f\u6361\u756b\u5370\u6365\u7275\u7469\u2079\u736a\u2e72p&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 2727, "user_id": 336511, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/51f8d82b3af6acd50a0fe8a76eceb5db?s=128&d=identicon&r=PG", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/336511/daniel-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1508369517, "creation_date": 1508369517, "answer_id": 46820754, "question_id": 46820530, "link": "https://stackoverflow.com/questions/46820530/calling-c-dll-from-c-and-c/46820754#46820754", "title": "Calling C++ DLL from C++ and C#", "body": "<p>Based on yr last comment u might need to: </p>\n\n<pre><code>[DllImport(\"rep.dll\", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]\n</code></pre>\n\n<p>anyway since I dont have rep.dll it's hard to guess</p>\n"}, {"tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": true, "score": 2, "last_activity_date": 1508372067, "creation_date": 1508372067, "answer_id": 46821104, "question_id": 46820530, "link": "https://stackoverflow.com/questions/46820530/calling-c-dll-from-c-and-c/46821104#46821104", "title": "Calling C++ DLL from C++ and C#", "body": "<p>Specify Unicode but also, in your C or C++ function, use <code>printf</code> with \"%S\" (upper-case 'S' means wide-character string).. OR <code>std::wcout</code>.</p>\n\n<p>Without that, it might print weird or terminate at the first null char it finds. Also, you might want to actually pass the length of the string, but that's entirely up to you.</p>\n\n<p>Note the signature of the C++ function uses <code>LPCWSTR</code> (<code>const wchar_t*</code>) for the <code>myArgs</code> parameter..</p>\n\n<pre><code>public static class DllHelper\n{\n\n    [DllImport(\"rep.dll\", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]\n    public static extern int mymain(int iArgs, string aArgs);\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        string s = \"my string data\";\n        DllHelper.mymain(0, s);\n    }\n}\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nint __declspec(dllexport) mymain(int i, const wchar_t* myArgs)\n{\n    #ifdef __cplusplus\n    std::wcout&lt;&lt;std::wstring(myArgs)&lt;&lt;L\"\\n\";\n    #else\n    printf(L\"%S\\n\", myArgs);\n    #endif\n}\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1508405495, "last_edit_date": 1508405495, "creation_date": 1508404760, "answer_id": 46826587, "question_id": 46820530, "link": "https://stackoverflow.com/questions/46820530/calling-c-dll-from-c-and-c/46826587#46826587", "title": "Calling C++ DLL from C++ and C#", "body": "<p>The naming used in your code:</p>\n\n<blockquote>\n<pre><code>mymain(int iArgs, string aArgs);\n</code></pre>\n</blockquote>\n\n<p>makes me think that what you are trying to do is probably passing an <em>array</em> of strings (similar to <code>wmain(int argc, wchar_t** argv)</code>).</p>\n\n<p>If this is what you want, then on the native DLL side your function prototype would look like this:</p>\n\n<pre><code>extern \"C\" int __declspec(dllexport) mymain(int iArgs, wchar_t** aArgs)\n</code></pre>\n\n<p>And on the C# side, you would write a PInvoke declaration like this:</p>\n\n<pre><code>[DllImport(\"rep.dll\", \n    CallingConvention=CallingConvention.Cdecl, \n    CharSet=CharSet.Unicode)]\npublic static extern int mymain(int iArgs, [In] string[] aArgs);\n</code></pre>\n\n<p>that you can invoke in C# like this:</p>\n\n<pre><code>string[] test = { \"C64\", \"Bravo\", \"Charlie\" };\nint returnCode = mymain(test.Length, test);\n</code></pre>\n"}], "owner": {"reputation": 1764, "user_id": 488336, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/36a13e5f78aa4b60b02a4106b2916056?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/488336/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 46821104, "answer_count": 3, "score": 3, "last_activity_date": 1508405495, "creation_date": 1508368018, "last_edit_date": 1508405084, "question_id": 46820530, "link": "https://stackoverflow.com/questions/46820530/calling-c-dll-from-c-and-c", "title": "Calling C++ DLL from C++ and C#", "body": "<p>I have a C++ application that I have to convert to a DLL.  I have all the source.</p>\n\n<p>my function is \nextern \"C\"\n__declspec(dllexport) int mymain(int i, std::wstring myArgs)</p>\n\n<p>I need to be able to pass in the arguments from a c++ or c# wrapper.  I am able to call this from a c++ console application without error.  I am now trying to call it from C#.</p>\n\n<p>This is my c# code:</p>\n\n<pre><code>    public static class DllHelper\n{\n\n    [DllImport(\"rep.dll\", CallingConvention = CallingConvention.Cdecl)]\n    public static extern int mymain(int iArgs, string aArgs);\n}\n\nclass Program\n{\n\n\n\n    static void Main(string[] args)\n    {\n        string s = \"my string data\";\n        DllHelper.mymain(0, s);\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>When I run it I get</p>\n\n<blockquote>\n  <p>System.Runtime.InteropServices.SEHException: 'External component has thrown an exception.'</p>\n</blockquote>\n\n<p>I am out of ideas.</p>\n\n<p>TIA</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1508367709, "post_id": 46820488, "comment_id": 80588464, "body": "Don&#39;t tag spam."}, {"owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "reply_to_user": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1508367861, "post_id": 46820488, "comment_id": 80588502, "body": "@shmosel Sorry, I didn&#39;t understand"}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1508367939, "post_id": 46820488, "comment_id": 80588524, "body": "Why did you tag this with <code>java</code>?"}, {"owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "reply_to_user": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1508368028, "post_id": 46820488, "comment_id": 80588542, "body": "@shmosel my bad sorry"}], "answers": [{"comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508368301, "post_id": 46820522, "comment_id": 80588617, "body": "i like your answer better.  i&#39;m deleting mine."}, {"owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 0, "creation_date": 1508368496, "post_id": 46820522, "comment_id": 80588665, "body": "I tried what you did but it&#39;s saying the function cannot be overloaded!!"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 1, "creation_date": 1508368571, "post_id": 46820522, "comment_id": 80588686, "body": "@helperaskhelp In general case you need to declare the both. For example an object of the class can be passed to a function by constant reference. In this case you need the first operator. If you want to change the object you need the second operator."}, {"owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 0, "creation_date": 1508368672, "post_id": 46820522, "comment_id": 80588714, "body": "I already have this function to get the value  double operator[](int index) const; I think is it the reason it can&#39;t be overload?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 0, "creation_date": 1508368774, "post_id": 46820522, "comment_id": 80588744, "body": "@helperaskhelp It can be overloaded but sometimes instead of a copy of an object of the type double there is required the object itself as for example as in reference_wrapper.  In this case it is better to return constant reference instead of a copy."}, {"owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 0, "creation_date": 1508368794, "post_id": 46820522, "comment_id": 80588749, "body": "Are you returning the address?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "edited": false, "score": 0, "creation_date": 1508368858, "post_id": 46820522, "comment_id": 80588759, "body": "@helperaskhelp Your operator returns a temporary object of the type double that is a copy of the original object. In my operator declaration there is returned a constant reference to the original object."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1508367983, "creation_date": 1508367983, "answer_id": 46820522, "question_id": 46820488, "link": "https://stackoverflow.com/questions/46820488/square-bracket-overloading-operator-to-set-instead-of-get-c/46820522#46820522", "title": "Square bracket overloading operator to set instead of get c++", "body": "<p>Just declare two operators</p>\n\n<pre><code>const double &amp; myArray::operator[](int index) const {\n\n    *//your code*\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>double &amp; myArray::operator[](int index)  {\n\n    *//your code*\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8798408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QVVZoTvahhY/AAAAAAAAAAI/AAAAAAAAAHc/5lOUHIqjzqA/photo.jpg?sz=128", "display_name": "helper ask help", "link": "https://stackoverflow.com/users/8798408/helper-ask-help"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 46820522, "answer_count": 1, "score": 0, "last_activity_date": 1508368198, "creation_date": 1508367663, "last_edit_date": 1508368198, "question_id": 46820488, "link": "https://stackoverflow.com/questions/46820488/square-bracket-overloading-operator-to-set-instead-of-get-c", "title": "Square bracket overloading operator to set instead of get c++", "body": "<p>For getting the value(i.e the function returns the value)</p>\n\n<p>for ex - </p>\n\n<p>if we do this in main.cpp</p>\n\n<pre><code>cout &lt;&lt; Object[0] &lt;&lt; endl;\n</code></pre>\n\n<p>it will print the first element of the object array.</p>\n\n<p>and the function will look like this</p>\n\n<pre><code>double myArray::operator[](int index) const {\n\n    *//your code*\n}\n</code></pre>\n\n<p>but what if we need to set the value what would be the prototype going to look like?</p>\n\n<p>Let's say in main.cpp, we have </p>\n\n<pre><code>object[0] = 5;\n</code></pre>\n\n<p>Now this should set the first element as 5 we know that it shouldn't return anything!! so return_type is void!! but how we going to pass the index(i.e 0) and the RHS(Right hand side) value into the function?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 5, "creation_date": 1508367712, "post_id": 46820486, "comment_id": 80588465, "body": "Use std::vector&lt;std::string&gt; instead."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1508367783, "post_id": 46820486, "comment_id": 80588480, "body": "<a href=\"https://i.imgur.com/5r143L6.png\" rel=\"nofollow noreferrer\">i.imgur.com/5r143L6.png</a>"}, {"owner": {"reputation": 251, "user_id": 8791363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f7c40e21f9a00ffeab320ac2f7258d?s=128&d=identicon&r=PG&f=1", "display_name": "Blastosphere", "link": "https://stackoverflow.com/users/8791363/blastosphere"}, "edited": false, "score": 0, "creation_date": 1508368969, "post_id": 46820486, "comment_id": 80588788, "body": "Thanks Vlad, and how can I reputate you for answering?"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 8734650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f-94_3ociko/AAAAAAAAAAI/AAAAAAAAAEY/xvbfFyQWewQ/photo.jpg?sz=128", "display_name": "Vaibhav Karani", "link": "https://stackoverflow.com/users/8734650/vaibhav-karani"}, "is_accepted": false, "score": 0, "last_activity_date": 1508369468, "creation_date": 1508369468, "answer_id": 46820744, "question_id": 46820486, "link": "https://stackoverflow.com/questions/46820486/how-to-define-an-array-with-no-initial-value-of-size-in-c/46820744#46820744", "title": "How to define an array with no initial value of size in c++", "body": "<p>As suggested in comments, try using std::vector instead.</p>\n\n<p>However, if you do want to use arrays, you have to define the size of the array in advance.</p>\n\n<p>You may use  the new command and set the size of the array dynamically, at run time.</p>\n\n<pre><code>   // Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string *listOfItems;\n\nvoid getInfoToArray(int n)\n{\n    listOfItems = new std::string[n];\n    for (int i = 0;i&lt;n; i++)\n    {\n        //Get the info of the array.\n        std::cin &gt;&gt; listOfItems[i];\n\n        //Check if the user input is -1.\n        if (listOfItems[i] == \"-1\") break;\n    }\n}\n\nint main()\n{\n\n//    getInfoToArray();\n    int size;\n    std::cout&lt;&lt;\"enter size of array\"\n    std::cin &gt;&gt; size;\n        getInfoToArray(size);\n    for(int i=0;i&lt;size;i++){\n        std::cout&lt;&lt;listOfItems[i]&lt;&lt;\"  \";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>the other way to do it without getting that input from the user is to set a predefined max size. This is static allocation, compile time. Something like,</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string listOfItems[10];\n\nvoid getInfoToArray()\n{\n    for (int i = 0;; i++)\n    {\n        //Get the info of the array.\n        std::cin &gt;&gt; listOfItems[i];\n\n        //Check if the user input is -1.\n        if (listOfItems[i] == \"-1\" &amp;&amp; i&lt;9) break;\n    }\n}\n\nint main()\n{\n        getInfoToArray();\n    return 0;\n}\n</code></pre>\n\n<p>This is all because memory is alloted in the start for an array, unless you use a pointer.</p>\n\n<p>Please feel free to comment if you have any doubts</p>\n"}], "owner": {"reputation": 251, "user_id": 8791363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f7c40e21f9a00ffeab320ac2f7258d?s=128&d=identicon&r=PG&f=1", "display_name": "Blastosphere", "link": "https://stackoverflow.com/users/8791363/blastosphere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "closed_date": 1508369757, "answer_count": 1, "score": 0, "last_activity_date": 1508369730, "creation_date": 1508367646, "last_edit_date": 1508368931, "question_id": 46820486, "link": "https://stackoverflow.com/questions/46820486/how-to-define-an-array-with-no-initial-value-of-size-in-c", "closed_reason": "Duplicate", "title": "How to define an array with no initial value of size in c++", "body": "<p>I'm trying to create a program that gets user's input to an array of the type string, but as I don't know how many items the user gonna put in, I have to create the array empty as I know, so when I try to create the array with no initial value that error comes in.</p>\n\n<p>ERROR:  <a href=\"https://i.stack.imgur.com/ipLYE.png\" rel=\"nofollow noreferrer\">Error's Image</a></p>\n\n<pre><code>LNK2001 unresolved external symbol \"class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * listOfItems\" (?listOfItems@@3PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)   \n</code></pre>\n\n<p>Here is the image of the code<a href=\"https://i.stack.imgur.com/Z2sUC.png\" rel=\"nofollow noreferrer\"> CODE</a>.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string listOfItems[];\n\nvoid getInfoToArray()\n{\n    for (int i = 0;; i++)\n    {\n        //Get the info of the array.\n        std::cin &gt;&gt; listOfItems[i];\n\n        //Check if the user input is -1.\n        if (listOfItems[i] == \"-1\") break;\n    }\n}\n\nint main()\n{\n    getInfoToArray();\n    return 0;\n}\n</code></pre>\n\n<p>If anyone has a better solution than trying to create an empty array, I'd be thankful.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1508367182, "post_id": 46820423, "comment_id": 80588314, "body": "This has nothing to do with <code>&lt;&lt;</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1508367258, "post_id": 46820423, "comment_id": 80588342, "body": "Maybe this helps: <a href=\"https://stackoverflow.com/questions/12120944/how-does-concatenation-of-two-string-literals-work\">How does concatenation of two string literals work?</a>"}, {"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1508367471, "post_id": 46820423, "comment_id": 80588406, "body": "@WhozCraig Thank you! That helps answer why the string literals are concatenated but why are string literals treated differently than string variables in this respect?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1508367636, "post_id": 46820423, "comment_id": 80588451, "body": "The literals form one string (the type will be <code>const char*</code>). The preprocessor concats them if i&#39;m not mistaken, so the compiler sees one string. For the <code>std::string</code>s they are always 2 strings (string class objects the compiler itself does nothing special with) and they need another <code>&lt;&lt;</code> in between them for it to be valid syntax."}, {"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1508367811, "post_id": 46820423, "comment_id": 80588486, "body": "@PaulRooney according to the C89 Commitee, &quot;An explicit concatenation operator was not introduced because the concatenation is a lexical construct rather than a run-time operation.&quot; Why would string literal concatenation be considered a lexical construct while string variable concatenation is considered a runtime operation?"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1508367825, "post_id": 46820423, "comment_id": 80588494, "body": "It&#39;s a feature. The compiler knows that the only thing syntactically valid to do with two string literals is to concatenate them. If it has two symbols without an operator in between it&#39;s much more indeterminate."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1508368098, "post_id": 46820423, "comment_id": 80588560, "body": "It was a mistake to make the first one work. Don&#39;t use it."}, {"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1508368601, "post_id": 46820423, "comment_id": 80588695, "body": "@MarkRansom Thank you! That&#39;s exactly the information I was looking for (even if I didn&#39;t know how to quite ask the question (I&#39;ve updated the question now to better reflect the information requested)). The question seems different than the one linked to but is it close enough to a duplicate that I should delete it? If not, do you want to add your response as an answer and I&#39;ll mark it as the answer?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1508371608, "post_id": 46820423, "comment_id": 80589462, "body": "@PaulRooney: The type of a string literal is <code>const char[N]</code>, where N is the length plus 1. It decays to <code>const char*</code> in some but not all contexts."}, {"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "edited": false, "score": 1, "creation_date": 1508375795, "post_id": 46820423, "comment_id": 80590411, "body": "If you&#39;re going to downvote, please let me know why you did so I can improve the question. If it was because it was flagged as a duplicate, please explain why my explanation of why it&#39;s not a duplicate is incorrect."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508412914, "post_id": 46820423, "comment_id": 80605164, "body": "Now I&#39;m wondering if anything would break if this were specified to happen during phase 7 (compilation) rather than phase 6."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 1, "creation_date": 1508447553, "post_id": 46820423, "comment_id": 80625667, "body": "@Patrick: &quot;<i>Why would string literal concatenation be considered a lexical construct while string variable concatenation is considered a runtime operation?</i>&quot; - because string literals are known to the preprocessor/compiler at compile time, so it is very easy for them to concatenate consecutive literals of the same type together, whereas <code>std::string</code> is a class type so instances of it are constructed only at runtime and concatenation requires a function call to <code>operator+</code>."}, {"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508457223, "post_id": 46820423, "comment_id": 80628770, "body": "Thanks @RemyLebeau that helps pieces together the information I&#39;ve received."}], "answers": [{"comments": [{"owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "edited": false, "score": 0, "creation_date": 1508447091, "post_id": 46838648, "comment_id": 80625479, "body": "Thank you! The detail is very much appreciated. I even learned Stroustrup has a sense a humor :)"}], "tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": true, "score": 2, "last_activity_date": 1508447202, "last_edit_date": 1508447202, "creation_date": 1508446060, "answer_id": 46838648, "question_id": 46820423, "link": "https://stackoverflow.com/questions/46820423/why-can-2-string-literals-be-concatenated-but-not-two-string-variables/46838648#46838648", "title": "Why can 2 string literals be concatenated but not two string variables?", "body": "<p>Concatenation of string literals happens at compile time, in fact very early in the process of compilation, while concatenation of <code>std::string</code> requires generating code which calls an overloaded operator on <code>std::string</code> (<code>std::basic_string&lt;T&gt;::operator+</code>). Concatenation of string literals is a surface level syntactic feature which can be handled just above tokenization in C-based languages. It comes from C, not C++ and C originally didn't even have string concatenation with automatic memory allocation in its library.</p>\n\n<p>(It is instructive to go through the low-level calls that happen in the following:</p>\n\n<pre><code>std::string a(\"a\");\nstd::string a(\"b\");\n\nauto foo = a + b;\nauto bar = a + \"b\";\nauto baz = std::string(\"a\") + b;\n</code></pre>\n\n<p>)    </p>\n\n<p>With <code>constexpr</code>, it might be possible to evaluate concatenation of constant strings at compile time even using <code>std::string</code> but one should appreciate all the machinery involved in doing so and certainly that parts of it are only fairly recent additions to C++.</p>\n\n<p>In order for C++ to support the type of concatenation proposed transparently on <code>std::string</code>, one would have to be able to overload the \"whitespace operator.\" See the following April Fools proposal: <a href=\"http://www.stroustrup.com/whitespace98.pdf\" rel=\"nofollow noreferrer\">http://www.stroustrup.com/whitespace98.pdf</a> .</p>\n"}], "owner": {"reputation": 5247, "user_id": 1101602, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/141bc9a3d98f85b746c6825316c81fd7?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1101602/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 46838648, "answer_count": 1, "score": 0, "last_activity_date": 1508447202, "creation_date": 1508367133, "last_edit_date": 1508368848, "question_id": 46820423, "link": "https://stackoverflow.com/questions/46820423/why-can-2-string-literals-be-concatenated-but-not-two-string-variables", "title": "Why can 2 string literals be concatenated but not two string variables?", "body": "<p>It seems the &lt;&lt; operator is able to stream two string literals to cout side by side whereas it's not able to stream two string variables side by side because two string literals are implicitly concatenated whereas two string variables are not. Here's a code example to showcase this:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    string string1 = \"C\";\n    string string2 = \"D\";\n\n    cout &lt;&lt; \"A\" \"B\"; //This compiles and outputs \"AB\"\n    cout &lt;&lt; string1 string2; //This doesn't compile\n\n    return 0;\n}\n</code></pre>\n\n<p>As noted in the comments the line <code>cout &lt;&lt; \"A\" \"B\";</code> compiles and outputs \"AB\". There seems to be some sort of implicit concatenation of these two string literals. But the next line doesn't not compile. That seems to indicate that a lack of that same implicit concatenation for some reason.</p>\n\n<p><strong>Why does the compiler treat these two lines differently? If it's concatenating string literals, shouldn't it also concatenate string variables?</strong> </p>\n\n<p><strong>What is happening implicitly and why doesn't it happen to both string literals and variables?</strong></p>\n\n<p>EDIT: It does seem close to the linked possible duplicate question but that question asks \"Why is this behavior (implicit concatenation of string literals) in the language?\" whereas mine asks, \"Why is this done with string literals but not string variables.</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508366935, "post_id": 46820248, "comment_id": 80588245, "body": "If you were using C++17, it allows: <code>while ( obj.reset( LIBRARY_CALL() ); obj )</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508379233, "post_id": 46820248, "comment_id": 80591164, "body": "@aschepler: what now?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508392171, "post_id": 46820248, "comment_id": 80594312, "body": "<code>C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT</code> which you <code>delete</code>? That&#39;s suspicious."}, {"owner": {"reputation": 213, "user_id": 1861260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e222458123ec0b16920c5eac65d988?s=128&d=identicon&r=PG", "display_name": "ndawson", "link": "https://stackoverflow.com/users/1861260/ndawson"}, "edited": false, "score": 2, "creation_date": 1508394540, "post_id": 46820248, "comment_id": 80595093, "body": "Possibly I simplified the example too much - in reality the unique_ptr is defined with a custom deleter which call&#39;s the library&#39;s clean up function."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1508413472, "post_id": 46820248, "comment_id": 80605486, "body": "@KerrekSB <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0305r1.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0305r1.html</a>, accepted June 2016."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508417000, "post_id": 46820248, "comment_id": 80607559, "body": "@aschepler: <i>selection</i> statements?! <code>while</code>? Hm...."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1508366278, "post_id": 46820266, "comment_id": 80588057, "body": "The <code>while</code> checks if the <code>unique_ptr</code> is null (via its <code>bool</code> conversion operator), so there is no need to check if <code>obj</code> is null inside the loop body"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 5, "creation_date": 1508366449, "post_id": 46820266, "comment_id": 80588110, "body": "You can lose the auto by writing <code>while (std::unique_ptr&lt;Object&gt; obj{ LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() })</code>.    Note that it must be a C++ library call, not a C library, because the C allocators and C++ new/delete aren&#39;t compatible."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1508366548, "post_id": 46820266, "comment_id": 80588130, "body": "The downside to the answer&#39;s approach is that this limits the scope of the pointer, so you can&#39;t <code>break;</code> out of the while loop and keep using the pointer."}, {"owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1508366682, "post_id": 46820266, "comment_id": 80588169, "body": "@BenVoigt, I like the <code>auto</code> and the left hand side definition. I really like the concept presented by Herb Sutter in CppCon where he say that type definitions are moving to the right side."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1508366693, "post_id": 46820266, "comment_id": 80588175, "body": "@BenVoigt I would say that is also the upside - limiting the scope."}, {"owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1508366736, "post_id": 46820266, "comment_id": 80588188, "body": "@Galik, the <code>auto</code> definition limits <code>obj</code> to the exact same scope"}, {"owner": {"reputation": 213, "user_id": 1861260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e222458123ec0b16920c5eac65d988?s=128&d=identicon&r=PG", "display_name": "ndawson", "link": "https://stackoverflow.com/users/1861260/ndawson"}, "edited": false, "score": 1, "creation_date": 1508369257, "post_id": 46820266, "comment_id": 80588861, "body": "The scope limitation is a plus to me - the original implementation would loop until a nullptr was returned, so any use outside of the loop would be invalid anyway."}, {"owner": {"reputation": 213, "user_id": 1861260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e222458123ec0b16920c5eac65d988?s=128&d=identicon&r=PG", "display_name": "ndawson", "link": "https://stackoverflow.com/users/1861260/ndawson"}, "edited": false, "score": 0, "creation_date": 1508369290, "post_id": 46820266, "comment_id": 80588868, "body": "Thanks - this answer seems obvious now!"}], "tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": true, "score": 9, "last_activity_date": 1508366375, "last_edit_date": 1508366375, "creation_date": 1508366095, "answer_id": 46820266, "question_id": 46820248, "link": "https://stackoverflow.com/questions/46820248/assign-smart-pointer-in-condition-or-loop/46820266#46820266", "title": "Assign smart pointer in condition or loop", "body": "<p>How about:</p>\n\n<pre><code>while ( auto obj = std::unique_ptr&lt;Object&gt;( C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() ) )\n{\n   // do something with obj\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 1861260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e222458123ec0b16920c5eac65d988?s=128&d=identicon&r=PG", "display_name": "ndawson", "link": "https://stackoverflow.com/users/1861260/ndawson"}, "edited": false, "score": 0, "creation_date": 1508480766, "post_id": 46840759, "comment_id": 80634315, "body": "I&#39;d never encountered this use of comma before - but in this case it&#39;s a very elegant solution!"}], "tags": [], "owner": {"reputation": 1344, "user_id": 1019990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ae752103140fb371af11b1719a36eaa?s=128&d=identicon&r=PG", "display_name": "Joshua Green", "link": "https://stackoverflow.com/users/1019990/joshua-green"}, "is_accepted": false, "score": 2, "last_activity_date": 1508459400, "creation_date": 1508459400, "answer_id": 46840759, "question_id": 46820248, "link": "https://stackoverflow.com/questions/46820248/assign-smart-pointer-in-condition-or-loop/46840759#46840759", "title": "Assign smart pointer in condition or loop", "body": "<p>If you want to keep <code>obj</code> alive outside the loop, you can use the comma operator:</p>\n\n<pre><code>std::unique_ptr&lt; Object &gt; obj;\nwhile ( obj.reset(  C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() ), obj )\n{\n    // do something with obj\n}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 1861260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e222458123ec0b16920c5eac65d988?s=128&d=identicon&r=PG", "display_name": "ndawson", "link": "https://stackoverflow.com/users/1861260/ndawson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "accepted_answer_id": 46820266, "answer_count": 2, "score": 6, "last_activity_date": 1508459400, "creation_date": 1508365940, "last_edit_date": 1508391907, "question_id": 46820248, "link": "https://stackoverflow.com/questions/46820248/assign-smart-pointer-in-condition-or-loop", "title": "Assign smart pointer in condition or loop", "body": "<p>I'm updating some pre c++11 code to use c++11 unique_ptrs.</p>\n\n<p>One thing I'm unsure how to handle is when the old code was using pointer assignment as a condition. E.g.</p>\n\n<pre><code>Object* obj;\nwhile ( obj = C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() )\n{\n   // do something with obj\n   delete obj;\n}\n</code></pre>\n\n<p>Given that std::unique_ptr::reset has no return value, it's not possible to translate this directly to:</p>\n\n<pre><code>std::unique_ptr&lt; Object &gt; obj;\nwhile ( obj.reset( C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() ) )\n{\n   // do something with obj\n}\n</code></pre>\n\n<p>So, what's the cleanest way to upgrade this code to use unique_ptrs? The best I can come up with is:</p>\n\n<pre><code>std::unique_ptr&lt; Object &gt; obj;\nobj.reset(  C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() );\nwhile ( obj )\n{\n   // do something with obj\n   obj.reset(  C_LIBRARY_CALL_WHICH_RETURNS_NEW_OBJECT() );\n}\n</code></pre>\n\n<p>But that adds the messy double call to the library function, which ideally I'd like to avoid.</p>\n"}, {"tags": ["c#", "c++", ".net", ".net-core", "interop"], "comments": [{"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1508365792, "post_id": 46820197, "comment_id": 80587920, "body": "Is &#39;Convert&#39; a type of reserved word in NET Core perhaps?"}, {"owner": {"reputation": 653, "user_id": 1709039, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1af849bc343a21e40d8deb9b3cf8f9dc?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/1709039/bacon"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 2, "creation_date": 1508365924, "post_id": 46820197, "comment_id": 80587959, "body": "The original name of the method is not Convert.  There is a suffix that I removed that gives away what project the method belongs to."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1508366021, "post_id": 46820197, "comment_id": 80587990, "body": "Have you tried using StringBuilder as the types rather than string?  In the DLL call?"}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 1709039, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1af849bc343a21e40d8deb9b3cf8f9dc?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/1709039/bacon"}, "edited": false, "score": 0, "creation_date": 1508430379, "post_id": 46820265, "comment_id": 80616782, "body": "This is what I expect from a BadImageFormatException but the project is built from a script which is using the same MSBuild command as before to build the projects."}, {"owner": {"reputation": 83, "user_id": 2853654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/maF2m.jpg?s=128&g=1", "display_name": "NattyMan0007", "link": "https://stackoverflow.com/users/2853654/nattyman0007"}, "reply_to_user": {"reputation": 653, "user_id": 1709039, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1af849bc343a21e40d8deb9b3cf8f9dc?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/1709039/bacon"}, "edited": false, "score": 0, "creation_date": 1508499138, "post_id": 46820265, "comment_id": 80643669, "body": "Perhaps MSBuild is targeting a different .NET version than it should. Check the details of the file and see if it&#39;s not later than 4.5.2"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1541804617, "post_id": 46820265, "comment_id": 93355429, "body": "This is the basic answer for mixing x86/x64 libraries as OP is already aware of obviously. The problem arises when porting to netcore/standard. Since there are no executables, it is launched by first <code>dotnet</code> found in the <code>PATH</code>, which is not matching the project architecture. This is supposed to be fixed in 3.0."}], "tags": [], "owner": {"reputation": 83, "user_id": 2853654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/maF2m.jpg?s=128&g=1", "display_name": "NattyMan0007", "link": "https://stackoverflow.com/users/2853654/nattyman0007"}, "is_accepted": false, "score": 2, "last_activity_date": 1508366069, "creation_date": 1508366069, "answer_id": 46820265, "question_id": 46820197, "link": "https://stackoverflow.com/questions/46820197/badimageformatexception-when-calling-dll-built-from-c-project-in-net-core/46820265#46820265", "title": "BadImageFormatException When Calling .dll Built from C++ Project In NET Core", "body": "<p>See here <a href=\"https://msdn.microsoft.com/en-us/library/k7137bfe.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/k7137bfe.aspx</a></p>\n\n<p>Check that the dll isn't specifically for an architecture other than what you're running as. Check what you complied the C++ dll as</p>\n\n<p>i.e. Don't use a 64-bit dll in a 32-bit application and vice versa</p>\n\n<p>EDIT: I also see that you tagged this as ASP.NET. If you're running this in IIS and get this issue then you can try to change the <strong>Enable 32-bit Applications</strong> option in the Advanced settings for the app pool assigned to the project</p>\n"}], "owner": {"reputation": 653, "user_id": 1709039, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1af849bc343a21e40d8deb9b3cf8f9dc?s=128&d=identicon&r=PG", "display_name": "Bacon", "link": "https://stackoverflow.com/users/1709039/bacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508372123, "creation_date": 1508365645, "last_edit_date": 1508372123, "question_id": 46820197, "link": "https://stackoverflow.com/questions/46820197/badimageformatexception-when-calling-dll-built-from-c-project-in-net-core", "title": "BadImageFormatException When Calling .dll Built from C++ Project In NET Core", "body": "<p>I have two preexisting projects (C++, C# NET 4.5.2) where the C# projects calls into the C++ project.  This worked perfectly until I ported the NET 4.5.2 project to NET Core.  Now I get a BadImageFormatException when trying to access the assembly built from the C++ project.  Is it possible to call this assembly from a NET Core assembly?</p>\n\n<pre><code>public static string CallCPlusPlusConvert(string inputFileName)\n{\n    if (inputFileName == null) { throw new ArgumentNullException(nameof(inputFileName)); };\n\n    return SafeNativeMethods.Convert(inputFileName);\n}\n\ninternal class SafeNativeMethods\n{\n    [return: MarshalAs(UnmanagedType.BStr)]\n    [DllImport(\"CPlusPlusProject\", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode)]\n    internal static extern string Convert([MarshalAs(UnmanagedType.BStr)][In]string filePath);\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "binding", "textures"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1508380086, "post_id": 46820188, "comment_id": 80591383, "body": "Why do you: 1) do a lot of <code>this-&gt;_someName</code>? The <i>whole point</i> of putting an underscore in front is to let people know it&#39;s a member. The <code>this-&gt;</code> is just pointless. 2) always surround the return value with parenthesis? That can actually inhibit some kinds of optimizations."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 0, "last_activity_date": 1508380122, "creation_date": 1508380122, "answer_id": 46822004, "question_id": 46820188, "link": "https://stackoverflow.com/questions/46820188/texture-binding-isnt-working-c-opengl/46822004#46822004", "title": "Texture binding isn&#39;t working / C++ / OpenGL", "body": "<p>OK, let's look at this:</p>\n\n<pre><code>Texture Texture::CreateTexture(std::string const&amp; texPath) {\n\n     Texture tex(texPath);\n     return (tex);\n}\n</code></pre>\n\n<p>I'm going to assume that this is a static function. So it creates a <code>Texture</code> object on the stack. And <code>tex</code> contains an OpenGL texture object. The function then returns this object.</p>\n\n<p>By the rules of C++, the lifetime of <code>tex</code> is limited to the scope in which it is created. Namely, <code>Texture::CreateTexture</code>. Which means that, at the end of this function, <code>tex</code> will be destroyed by having its destructor invoked.</p>\n\n<p>But since you returned <code>tex</code>, before that happens, <code>tex</code> will be used to initialize the return value of the function. That return value happens to be an object of type <code>Texture</code>, so the compiler will invoke <code>Texture</code>'s copy constructor to initialize the return value.</p>\n\n<p>So, right before <code>tex</code> is destroyed, there are two <code>Texture</code> objects: <code>tex</code> itself and the return value of type <code>Texture</code> that was copied from <code>tex</code>. So far, so good.</p>\n\n<p>Now, <code>tex</code> is destroyed. <code>Texture::~Texture</code> calls <code>glDestroyTexture</code> on the texture object contained within it. That destroys the texture created in the constructor. Fine.</p>\n\n<p>So... what happens now? Well, let's back up to the creation of the return value from <code>CreateTexture</code>. I said that it would invoke the copy constructor of <code>Texture</code> to construct it, passing <code>tex</code> as the object to copy from.</p>\n\n<p>You did not post your complete code, but given the nature of the other code you've written, I'd bet that you <em>didn't write</em> a copy constructor for <code>Texture</code>. That's fine, because the compiler will make one for you.</p>\n\n<p>Only that's not fine. Why? Because right before <code>tex</code> gets destroyed, there are two <code>Texture</code> objects. And <em>both of them</em> store the same OpenGL texture object name. How did that happen?</p>\n\n<p>Because you copied the texture object from <code>tex</code> into the return value. That's what the compiler-generated copy constructor does: it copies everything in the class.</p>\n\n<p>So when <code>tex</code> is destroyed, it is destroying the OpenGL texture <em>it just returned</em>.</p>\n\n<p><code>Texture</code> should not be a copyable class. It should be move-only, just like many resource-containing classes in C++.</p>\n"}], "owner": {"reputation": 3, "user_id": 8798240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e7c10ef38df4293afef30d9e92b58e?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Nawell", "link": "https://stackoverflow.com/users/8798240/drake-nawell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "closed_date": 1508398061, "accepted_answer_id": 46822004, "answer_count": 1, "score": -1, "last_activity_date": 1508450846, "creation_date": 1508365607, "last_edit_date": 1508374919, "question_id": 46820188, "link": "https://stackoverflow.com/questions/46820188/texture-binding-isnt-working-c-opengl", "closed_reason": "Duplicate", "title": "Texture binding isn&#39;t working / C++ / OpenGL", "body": "<p>I'm trying to create a Texture class for my project which initializes and load a texture from an image. The texture loads well but whenever I want to get the texture ID from outside the class by calling GetTexture() function, glIsTexture() does not consider the return value (the texture ID) as a texture anymore. And the face I want to texture stays blank.</p>\n\n<p>Also, I tried to bind the texture with glBindTexture() directly from the Texture class itself with the function Texture::SetActive() but it still doesn't work.</p>\n\n<p>And finally, when I return the texture ID directly from the function, the texture displays correctly.</p>\n\n<p>Is there something I'm missing here ? I don't really know what to look for at this point.</p>\n\n<p>Thanks in advance for your help !</p>\n\n<p>Here's my Texture class :</p>\n\n<pre><code>// Constructor\nTexture::Texture(std::string const&amp; texPath) {\n\n    SDL_Surface *texture = nullptr, *newFormatTexture = nullptr, *flippedTexture = nullptr;\n    SDL_PixelFormat tmpFormat;\n    Uint32 amask, rmask, gmask, bmask;\n\n#if SDL_BYTEORDER == SDL_BIG_ENDIAN\n\n    rmask = 0xFF000000;\n    gmask = 0x00FF0000;\n    bmask = 0x0000FF00;\n    amask = 0x000000FF;\n\n#else\n\n    rmask = 0x000000FF;\n    gmask = 0x0000FF00;\n    bmask = 0x00FF0000;\n    amask = 0xFF000000;\n\n#endif\n\n    if ((texture = IMG_Load(texPath.c_str())) == nullptr) {\n        std::cerr &lt;&lt; \"[ERROR] : Could not load texture \" &lt;&lt; texPath &lt;&lt; \". Skipping...\" &lt;&lt; std::endl;\n    }\n\n    tmpFormat = *(texture-&gt;format);\n    tmpFormat.BitsPerPixel = 32;\n    tmpFormat.BytesPerPixel = 4;\n    tmpFormat.Rmask = rmask;\n    tmpFormat.Gmask = gmask;\n    tmpFormat.Bmask = bmask;\n    tmpFormat.Amask = amask;\n\n    if ((newFormatTexture = SDL_ConvertSurface(texture, &amp;tmpFormat, SDL_SWSURFACE)) == nullptr)  {\n        std::cerr &lt;&lt; \"[ERROR] : Couldn't convert surface to given format.\" &lt;&lt; std::endl;\n    }\n\n    if ((flippedTexture = this-&gt;FlipSurface(newFormatTexture)) == nullptr) {\n        std::cerr &lt;&lt; \"[ERROR] : Couldn't flip surface.\" &lt;&lt; std::endl;\n    }\n\n    glGenTextures(1, &amp;(this-&gt;_textureID));\n\n    glBindTexture(GL_TEXTURE_2D, this-&gt;_textureID);\n\n    glTexImage2D(GL_TEXTURE_2D, 0, 4, flippedTexture-&gt;w, flippedTexture-&gt;h, 0, GL_RGBA, GL_UNSIGNED_BYTE, flippedTexture-&gt;pixels);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glBindTexture(GL_TEXTURE_2D, 0);\n\n    SDL_FreeSurface(flippedTexture);\n    SDL_FreeSurface(newFormatTexture);\n    SDL_FreeSurface(texture);\n\n}\n\nTexture::Texture(unsigned char *texData, int width, int height) {\n\n    glGenTextures(1, &amp;(this-&gt;_textureID));\n    glBindTexture(GL_TEXTURE_2D, this-&gt;_textureID);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, texData);\n    glBindTexture(GL_TEXTURE_2D, 0);\n\n}\n\nTexture::~Texture() {\n    glDeleteTextures(1, &amp;(this-&gt;_textureID));\n}\n\nTexture Texture::CreateTexture(std::string const&amp; texPath) {\n\n     Texture tex(texPath);\n     return (tex);\n}\n\nTexture Texture::CreateTexture(unsigned char *texData, int width, int height) {\n\n    Texture tex(texData, width, height);\n    return (tex);\n}\n\nunsigned int Texture::GetTexture() const {\n    return (this-&gt;_textureID);\n}\n\nvoid Texture::SetActive() {\n    glBindTexture(GL_TEXTURE_2D, this-&gt;_textureID);\n}\n</code></pre>\n\n<p>The main class where I load and use my texture :</p>\n\n<pre><code>int WinMain(void) {\n\n    Window window(\"Hello\", 640, 480);\n    double angleX, angleZ;\n    Texture tex;\n    int height;\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(70, (double)640/480, 1, 1000);\n    glEnable(GL_TEXTURE_2D);\n    glEnable(GL_DEPTH_TEST);\n\n    tex = Texture::CreateTexture(\"caisse.jpg\");\n\n    while (!window.Quit()) {\n\n        Input::Update();\n\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        gluLookAt(3,4,2,0,0,0,0,0,1);\n\n        tex.SetActive();\n\n        glBegin(GL_QUADS);\n\n            glTexCoord2d(0, 1);\n                 glVertex3d(1, 1, 1);\n\n            glTexCoord2d(0, 0);\n                 glVertex3d(1, 1, -1);\n\n            glTexCoord2d(1, 0);\n                 glVertex3d(-1, 1, -1);\n\n            glTexCoord2d(1, 1);\n                glVertex3d(-1, 1, 1);\n\n        glEnd();\n\n        glFlush();\n        window.RefreshDisplay();\n    }\n\n    return (0);\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I solved my problem.\nAs described in this topic : <a href=\"https://stackoverflow.com/questions/740151/what-are-the-usual-troubleshooting-steps-for-opengl-textures-not-showing\">What are the usual troubleshooting steps for OpenGL textures not showing?</a> , the initialisation of the texture must not be done in the constructor.</p>\n\n<p>Thanks for the help :)</p>\n"}, {"tags": ["c++", "qt", "qt4"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1508369016, "post_id": 46820137, "comment_id": 80588804, "body": "You want Group 3 to move to the top position but before that there are 2 cases, the first is to update the size of the widget and the second is to leave a space in place. Which one do you want?"}, {"owner": {"reputation": 2175, "user_id": 3449335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RXFq9.jpg?s=128&g=1", "display_name": "akashrajkn", "link": "https://stackoverflow.com/users/3449335/akashrajkn"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1508396468, "post_id": 46820137, "comment_id": 80595916, "body": "@eyllanesc I want to update the size of the widget (without leaving any space)"}, {"owner": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1508426673, "post_id": 46820137, "comment_id": 80614432, "body": "Did you use setAlignment(Qt::AlignTop);"}, {"owner": {"reputation": 2622, "user_id": 575491, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/HplcM.png?s=128&g=1", "display_name": "bkausbk", "link": "https://stackoverflow.com/users/575491/bkausbk"}, "edited": false, "score": 0, "creation_date": 1508489725, "post_id": 46820137, "comment_id": 80638716, "body": "At least in Qt 4.x I knew that problem, however in Qt 5 it seems to work as expected. Can you show us your object tree?"}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1508508458, "post_id": 46820137, "comment_id": 80649183, "body": "Have you any spacer in between or max-height properties ? Why do you use a grid-box instead of vertical-box ?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4030529, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0jkr4AjtGbQ/AAAAAAAAAAI/AAAAAAAABso/_YsjLh-kZqo/photo.jpg?sz=128", "display_name": "Roman Schaub", "link": "https://stackoverflow.com/users/4030529/roman-schaub"}, "is_accepted": false, "score": 0, "last_activity_date": 1513584286, "creation_date": 1513584286, "answer_id": 47864269, "question_id": 46820137, "link": "https://stackoverflow.com/questions/46820137/remove-space-on-removing-qt-widget/47864269#47864269", "title": "Remove space on removing qt widget", "body": "<p>In order for the layout to do what you want, its child widgets have to 'behave' correctly.\nI.e. if one of your group boxes contains a vertical spacer, it might mess up your layout.</p>\n\n<p>I found that setting a stylesheet to the toplevel widget helps with debugging layout issues:</p>\n\n<pre><code>pWidget-&gt;setStyleSheet(\"border: 1px solid red;\");\n</code></pre>\n\n<p>This will paint a red border around (some) widgets and clarifies who uses which space.</p>\n\n<p>You could try to add a vertical spacer below the third group box to \"push\" them all upwards. If one of the group boxes is then set to invisible, the others should get pushed up and the space between group box 1 and 3 should disappear.</p>\n"}], "owner": {"reputation": 2175, "user_id": 3449335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RXFq9.jpg?s=128&g=1", "display_name": "akashrajkn", "link": "https://stackoverflow.com/users/3449335/akashrajkn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513584286, "creation_date": 1508365223, "question_id": 46820137, "link": "https://stackoverflow.com/questions/46820137/remove-space-on-removing-qt-widget", "title": "Remove space on removing qt widget", "body": "<p>I have a grid layout on top of which there are 4 group boxes. When I try to hide one of the QGroupBoxes using <code>groupBox-&gt;hide()</code>, the group box is not visible anymore. But the space is retained in the layout (I am <strong>not</strong> using <code>QSizePolicy</code> to retain the space)</p>\n\n<p>How do I make sure that space is automatically used by the remaining widgets?</p>\n\n<p><a href=\"https://i.stack.imgur.com/lPHqV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lPHqV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>In the picture, I have hidden 'Group 2'. I want Group 3 to automatically fill up the space. How do I do this?</p>\n"}, {"tags": ["c++", "audio", "codec", "opus"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7191987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cbe907057b4bef53e4cefd8cedae37?s=128&d=identicon&r=PG&f=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/7191987/rex"}, "edited": false, "score": 0, "creation_date": 1510953962, "post_id": 46820408, "comment_id": 81671806, "body": "If FEC is enabled, shouldn&#39;t the fecFlag in question 2 be the other way round, according to <a href=\"https://github.com/gcp/opus/blob/master/src/opus_demo.c#L777\" rel=\"nofollow noreferrer\">opus_demo.c</a>? When decoding pktN-1, we go through line 785, and when decoding pktN, we go through line 781?"}, {"owner": {"reputation": 3185, "user_id": 1519939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b475f2c218b347c815314aa5710264a?s=128&d=identicon&r=PG", "display_name": "Dmitry Poroh", "link": "https://stackoverflow.com/users/1519939/dmitry-poroh"}, "reply_to_user": {"reputation": 51, "user_id": 7191987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cbe907057b4bef53e4cefd8cedae37?s=128&d=identicon&r=PG&f=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/7191987/rex"}, "edited": false, "score": 0, "creation_date": 1511001138, "post_id": 46820408, "comment_id": 81682852, "body": "opus_demo code is pretty messy. I think statement that FEC is added to subsequent packet is good proof that you need packet N FEC data to recovery packet N-1: <a href=\"https://tools.ietf.org/html/rfc6716#section-2.1.7\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc6716#section-2.1.7</a> But if you do not believe you can add some print to OPUS demo and check how it works"}], "tags": [], "owner": {"reputation": 3185, "user_id": 1519939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b475f2c218b347c815314aa5710264a?s=128&d=identicon&r=PG", "display_name": "Dmitry Poroh", "link": "https://stackoverflow.com/users/1519939/dmitry-poroh"}, "is_accepted": true, "score": 2, "last_activity_date": 1508367009, "creation_date": 1508367009, "answer_id": 46820408, "question_id": 46819965, "link": "https://stackoverflow.com/questions/46819965/what-does-useinbandfec-is-a-unidirectional-receive-only-parameter-mean-in-opus/46820408#46820408", "title": "What does &quot;useinbandfec is a unidirectional receive-only parameter&quot; mean in Opus?", "body": "<p><strong>Parameter useinbandfec</strong></p>\n\n<p>This parameter means that encoder puts additional information to the stream to recover lost packets. How it works, when encoder encodes number N+1 packet it add there some information about packet N that is useful for decoder if it supports recovery.</p>\n\n<p>If decoder does not support recovery then this information is useless and wasting bandwidth.</p>\n\n<p><strong>Unidirectional receive only parameter meaning</strong></p>\n\n<p>This means that if you specify it in session descriptor (SDP) then this parameters describes capability of receiver and advise sender to use or not to use inbound FEC</p>\n\n<p><strong>Questions:</strong></p>\n\n<p><strong>1</strong></p>\n\n<blockquote>\n  <p>For example, Alice is calling Bob. Alice uses Opus codec with\n  useinbandfec=1, while Bob doesn't use Opus. Therefore, there should be\n  a Opus transcoder between the two. If so, how can I configure the\n  settings of Opus encoder and decoder?</p>\n</blockquote>\n\n<p>In this configuration you need transcoder between Alice and Bob. If transcoder supports FEC you may prefer to include useinbandfec=1 to SDP fmtp attribute. If encoder (sender on Alice device) is also under your control you MAY set ask encoder to add FEC to the stream in following condtions:</p>\n\n<ul>\n<li>Losses in network (may be detected by RTCP)</li>\n<li>Transcoder capability to decode it (may be known from SDP parameter)</li>\n</ul>\n\n<p><strong>2</strong></p>\n\n<blockquote>\n  <p>As for Alice->Bob where opus_decode() is needed, what value should be\n  sent as the 5th parameter (fecFlag)?</p>\n</blockquote>\n\n<p>opus_decode FEC flag is used when you detect packet loss (for example by RTP sequence number). Lets assume that you receive packet N and N-1 packet is lost. Then you may restore packet N-1 by calling opus_decode with fecFlag set to true and then decode packet N:</p>\n\n<pre><code>packets[N-1] = decode_opus(pktN, fecFlag=true)\npackets[N]   = decode_opus(pktN, fecFlag=false)\n</code></pre>\n\n<p><strong>3</strong></p>\n\n<blockquote>\n  <p>And as for Bob->Alice where a Opus encoder is needed, what value\n  should be sent with OPUS_SET_INBAND_FEC() in opus_encoder_ctl()?</p>\n</blockquote>\n\n<p>OPUS_SET_INBAND_FEC is better to set from useinbandfec parameter retrieved from Alice SDP. Also beware that FEC is not included into encoded stream unless you do not set <a href=\"http://opus-codec.org/docs/opus_api-1.2/group__opus__encoderctls.html#gafda1c951dea919ba54432cd03827f1a9\" rel=\"nofollow noreferrer\">OPUS_SET_PACKET_LOSS_PERC</a></p>\n"}], "owner": {"reputation": 51, "user_id": 7191987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cbe907057b4bef53e4cefd8cedae37?s=128&d=identicon&r=PG&f=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/7191987/rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "accepted_answer_id": 46820408, "answer_count": 1, "score": 0, "last_activity_date": 1508367009, "creation_date": 1508364175, "last_edit_date": 1592644375, "question_id": 46819965, "link": "https://stackoverflow.com/questions/46819965/what-does-useinbandfec-is-a-unidirectional-receive-only-parameter-mean-in-opus", "title": "What does &quot;useinbandfec is a unidirectional receive-only parameter&quot; mean in Opus?", "body": "<p>I am trying to implement a Opus transcoder in C++, and I have some conceptual questions.\nAs for the useinbandfec parameter, I don't quite understand the meaning of &quot;unidirectional receive-only parameter&quot;, as written in <a href=\"https://tools.ietf.org/html/rfc7587#page-15\" rel=\"nofollow noreferrer\">RFC7587, section 7.1</a>:</p>\n<blockquote>\n<p>The &quot;useinbandfec&quot; parameter is a unidirectional receive-only\nparameter.</p>\n</blockquote>\n<p>For example, Alice is calling Bob. Alice uses Opus codec with useinbandfec=1, while Bob doesn't use Opus. Therefore, there should be a Opus transcoder between the two. If so, how can I configure the settings of Opus encoder and decoder?</p>\n<p>As for Alice-&gt;Bob where <code>opus_decode()</code> is needed, what value should be sent as the 5th parameter (fecFlag)? And as for Bob-&gt;Alice where a Opus encoder is needed, what value should be sent with <code>OPUS_SET_INBAND_FEC()</code> in <code>opus_encoder_ctl()</code>?</p>\n<p>Thank you!</p>\n"}, {"tags": ["c++", "pointers", "singly-linked-list"], "comments": [{"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1508364354, "post_id": 46819952, "comment_id": 80587457, "body": "Hi, can you post the full code? We cannot tell what you do or don&#39;t do if you are leaving out some parts."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1508364535, "post_id": 46819952, "comment_id": 80587534, "body": "If you (<i>really</i>) want a singly linked list data structure, then for the love of $DEITY, just use <code>std::forward_list</code> and be done with it. Please. Don&#39;t reinvent the wheel badly - please. Even better, just use <code>std::vector</code>; it&#39;s likely to do better in real life conditions more or less always (regardless of algorithmic complexity etc and other theoretical things)."}, {"owner": {"reputation": 856, "user_id": 1722492, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/66a1e7876d18c8b419246a9e12eb04f9?s=128&d=identicon&r=PG", "display_name": "Duxa", "link": "https://stackoverflow.com/users/1722492/duxa"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1508365023, "post_id": 46819952, "comment_id": 80587683, "body": "@JesperJuhl unfortunately I have to do it as the assignment dictates. Not my choice."}, {"owner": {"reputation": 856, "user_id": 1722492, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/66a1e7876d18c8b419246a9e12eb04f9?s=128&d=identicon&r=PG", "display_name": "Duxa", "link": "https://stackoverflow.com/users/1722492/duxa"}, "reply_to_user": {"reputation": 2229, "user_id": 2883579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/819d54c16f8b8c93c0fd4c7f642c59f4?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Aguiar", "link": "https://stackoverflow.com/users/2883579/samir-aguiar"}, "edited": false, "score": 1, "creation_date": 1508365063, "post_id": 46819952, "comment_id": 80587697, "body": "@SamirAguiar This is how we learn, dont we :) Observe something, then question how it works :)"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1508368259, "post_id": 46819952, "comment_id": 80588602, "body": "@Duxa: in case you are doing an assignment; please let us know in your question. It&#39;s helps to prevent chatty comments."}], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 1722492, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/66a1e7876d18c8b419246a9e12eb04f9?s=128&d=identicon&r=PG", "display_name": "Duxa", "link": "https://stackoverflow.com/users/1722492/duxa"}, "edited": false, "score": 0, "creation_date": 1508364787, "post_id": 46820029, "comment_id": 80587611, "body": "Yes thank you. That is what I was thinking about writing (plus handing removal from beginning and end of list), but I just wasnt sure why the heck my implementation worked :/"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1508364617, "creation_date": 1508364617, "answer_id": 46820029, "question_id": 46819952, "link": "https://stackoverflow.com/questions/46819952/not-exactly-sure-why-my-recursive-linked-list-deletion-function-works-would-lov/46820029#46820029", "title": "Not exactly sure why my recursive linked list deletion function works? Would love an explanation", "body": "<blockquote>\n  <p>Now this code works, and I dont think it should because I never connect the previous node to the one after the node i delete.</p>\n</blockquote>\n\n<p>That's correct. Your function might appear to work but it is really showing signs of undefined behavior. You need to use:</p>\n\n<pre><code>if ( pointer-&gt;next != nullptr &amp;&amp; pointer-&gt;value == pointer-&gt;next-&gt;value){\n    auto toDelete = pointer-&gt;next;\n    pointer-&gt;next = pointer-&gt;next-&gt;next;\n    delete toDelete;\n\n    // Recurse with the same pointer since you might have 4 4 4\n    // in the original list.\n    recur(pointer);\n}\nelse {    \n   recur(pointer-&gt;next);\n}\n</code></pre>\n"}], "owner": {"reputation": 856, "user_id": 1722492, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/66a1e7876d18c8b419246a9e12eb04f9?s=128&d=identicon&r=PG", "display_name": "Duxa", "link": "https://stackoverflow.com/users/1722492/duxa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 46820029, "answer_count": 1, "score": 0, "last_activity_date": 1508364689, "creation_date": 1508364116, "last_edit_date": 1508364689, "question_id": 46819952, "link": "https://stackoverflow.com/questions/46819952/not-exactly-sure-why-my-recursive-linked-list-deletion-function-works-would-lov", "title": "Not exactly sure why my recursive linked list deletion function works? Would love an explanation", "body": "<p>I wrote a program, and it works, but I dont think it should. Can someone explain why it works?</p>\n\n<p>I have a singly linked list. This is for a project so I cant post direct code, but Ill change the problem a bit</p>\n\n<p>Lets say my linked list is a list of numbers 1, 2, 3, 4, 4, 5</p>\n\n<p>I need to scan the list and delete any duplicates, so I need to remove one of the 4's. And I need to do it via recursion.</p>\n\n<p>The function I am writing has its argument/parameter as the pointer to the beginning of the list, I shall call this <strong>pointer</strong></p>\n\n<pre><code>//Base cases up here\nif (pointer-&gt;value == pointer-&gt;next-&gt;value){\n    *toDelete = pointer;\n     pointer = pointer-&gt;next;\n     delete toDelete;\n     recur the function\n} else recur(pointer-&gt;next);\n</code></pre>\n\n<p>Now this code works, and I dont think it should because I never connect the previous node to the one after the node i delete. yet when I look at the result all proper nodes are connected and all the ones that were supposed to be removed are removed. Am I misunderstanding something here? does <strong>pointer = pointer->next</strong> do more than just point <strong>pointer</strong> to address of the next node?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1509480216, "post_id": 46819854, "comment_id": 81034604, "body": "File a [rejects-valid] bug report against GCC. Most likely they&#39;ll admit it&#39;s a bug, but maybe they&#39;ll tell you why they think it&#39;s ill-formed."}, {"owner": {"reputation": 873, "user_id": 929037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a2dff20933d7adaf7df4f2c32d1cdd?s=128&d=identicon&r=PG", "display_name": "w1th0utnam3", "link": "https://stackoverflow.com/users/929037/w1th0utnam3"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1509567250, "post_id": 46819854, "comment_id": 81074016, "body": "@Brian Yes, thank you. I already did this in the last weeks but forgot to update the question/provide an answer."}], "answers": [{"tags": [], "owner": {"reputation": 873, "user_id": 929037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a2dff20933d7adaf7df4f2c32d1cdd?s=128&d=identicon&r=PG", "display_name": "w1th0utnam3", "link": "https://stackoverflow.com/users/929037/w1th0utnam3"}, "is_accepted": true, "score": 0, "last_activity_date": 1509567238, "creation_date": 1509567238, "answer_id": 47062946, "question_id": 46819854, "link": "https://stackoverflow.com/questions/46819854/access-private-definitions-in-base-clause-of-friend-class-template/47062946#47062946", "title": "Access private definitions in base clause of friend class template", "body": "<p>Apparantly this is a bug in GCC. Submitted as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82613\" rel=\"nofollow noreferrer\">Bug 82613</a>.</p>\n"}], "owner": {"reputation": 873, "user_id": 929037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07a2dff20933d7adaf7df4f2c32d1cdd?s=128&d=identicon&r=PG", "display_name": "w1th0utnam3", "link": "https://stackoverflow.com/users/929037/w1th0utnam3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 47062946, "answer_count": 1, "score": 4, "last_activity_date": 1509567238, "creation_date": 1508363629, "last_edit_date": 1508365486, "question_id": 46819854, "link": "https://stackoverflow.com/questions/46819854/access-private-definitions-in-base-clause-of-friend-class-template", "title": "Access private definitions in base clause of friend class template", "body": "<p>Is it legal in C++ to make a base class specification of a class template <code>B</code> dependent on private definitions of a class <code>A</code> which is friends with the class template <code>B</code>? Example code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Empty {};\n\ntemplate &lt;typename T&gt;\nstruct B;\n\nstruct A\n{\n    friend struct B&lt;A&gt;;\n\nprivate:\n    using Base = Empty;\n};\n\ntemplate &lt;typename T&gt;\nstruct B : T::Base\n{\n};\n\nint main()\n{\n    B&lt;A&gt; test;\n    return 0;\n}\n</code></pre>\n\n<p>Godbolt link: <a href=\"https://godbolt.org/g/HFKaTQ\" rel=\"nofollow noreferrer\">https://godbolt.org/g/HFKaTQ</a></p>\n\n<p>The code compiles fine with Clang trunk (and older versions) and MSVC 19 (VS 2017) but fails to compile with GCC trunk (and older version):</p>\n\n<pre><code>test.cpp: In instantiation of 'class B&lt;A&gt;':\ntest.cpp:21:7:   required from here\ntest.cpp:15:8: error: 'using Base = class Empty' is private within this context\n struct B : T::Base\n        ^\ntest.cpp:11:20: note: declared private here\n  using Base = Empty;\n                    ^\n</code></pre>\n\n<p>Which compiler is wrong?</p>\n\n<p>EDIT: By the way, the code compiles in GCC if <code>B</code> is converted into a regular class (removing the template parameter). So, I guess it is also supposed to work in the class template case. Also cppreference says: \"The friend itself can also inherit from private and protected members of this class. (since C++11)\"</p>\n"}, {"tags": ["c++", "pipe", "fork", "wait"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1508366459, "post_id": 46819781, "comment_id": 80588112, "body": "You cannot wait for a grandchild.  child1 has to wait for child2"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508368162, "post_id": 46819781, "comment_id": 80588578, "body": "The lines <code>cin&gt;&gt;cmd1;</code> and <code>cin&gt;&gt;cmd2;</code> can overflow the arrays if a malicious user types a long enough string without whitespace, causing Undefined Behavior. This is C++, so please just use <code>std::string</code>, not <code>char[128]</code>."}, {"owner": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508369159, "post_id": 46819781, "comment_id": 80588838, "body": "I have to use char since execvp won&#39;t work with strings."}, {"owner": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1515606029, "post_id": 46819781, "comment_id": 83366752, "body": "I ended up using execvp with strtok in order to run my commands"}], "answers": [{"comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508364164, "post_id": 46819835, "comment_id": 80587386, "body": "Yeah, I realized what you&#39;re doing now - I made an error in the original answer. I&#39;ll need to edit the answer"}, {"owner": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508371209, "post_id": 46819835, "comment_id": 80589350, "body": "I moved the while loop above the pipe and made its condition <code>true</code> so that it can continuously ask for 2 commands, execute and then ask for 2 more etc... But on the first run through with putting in <code>ls</code> and <code>wc</code> it shows <code>0   0   0</code> then on the second it starts to give correct data? Any ideas as to why?"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508398884, "post_id": 46819835, "comment_id": 80597290, "body": "yeah, it would have only worked on the first time round, so moving the pipe inside the while loop was a fix to my changes. I don&#39;t know why you&#39;re getting a <code>0 0 0</code> on the first time round - if the execvp failed you might see that so I&#39;ve gone ahead and made an additional error check after both execvps to display an error message in that case."}, {"owner": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508437904, "post_id": 46819835, "comment_id": 80620779, "body": "Is it possible to print out the error using perror?"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "edited": false, "score": 0, "creation_date": 1508440369, "post_id": 46819835, "comment_id": 80621976, "body": "You can replace the fprintf with a simple perror - the reason I used the fprintf was to get the command that was being invoked, so it can be checked for a typo, etc"}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1508398932, "last_edit_date": 1508398932, "creation_date": 1508363553, "answer_id": 46819835, "question_id": 46819781, "link": "https://stackoverflow.com/questions/46819781/waitnull-seems-to-cause-child-to-stop-executing/46819835#46819835", "title": "wait(NULL) seems to cause child to stop executing", "body": "<p>You have:</p>\n\n<pre><code>parent\n  1. child1\n    2. child2\n    2. exec()\n  1. exec()\n</code></pre>\n\n<p>When you exec in child1, child2 gets reparented to init, and you can no longer wait for child2 to terminate.</p>\n\n<p>So we need to do a little bit of refactoring to get something looking like:</p>\n\n<pre><code>parent\n  1. child1\n  1. exec()\n  2. child2\n  2. exec()\nwait() x 2\n</code></pre>\n\n<p>Basing this on your own code, with the refactoring to accomplish something like the look-alike code (some comments in-line):</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/wait.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;signal.h&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    int pid1, pid2, errchk;\n    int pip[2];\n    char cmd1[128];\n    char cmd2[128];\n    int status;\n\n    while(true)\n    {\n        errchk = pipe(pip);//make pipe\n        if(errchk == -1)//check for error in pipe\n        {\n            perror(\"pipe\");\n            exit(1);\n        }\n\n        //Enter commands here\n        cout&lt;&lt;\"Enter cmd1: \";\n        cin&gt;&gt;cmd1;\n        cout&lt;&lt;\"Enter cmd2: \";\n        cin&gt;&gt;cmd2;\n        //if a command is quit... quit\n        if(strcmp(cmd1,\"quit\")==0 || strcmp(cmd2,\"quit\") == 0)\n        {\n            cout&lt;&lt;\"Quitting...\\n\";\n            exit(1);\n        }\n\n        pid1 = fork();\n        cout&lt;&lt;\"first fork makes pids: \"&lt;&lt;pid1&lt;&lt;endl;\n        if(pid1 &lt; 0)\n        {\n            perror(\"fork\");\n            exit(1);\n        }\n        if (pid1 == 0) // in child\n        {\n            cout&lt;&lt;\"In child of first fork\"&lt;&lt;endl;\n            close(pip[0]); // close read-end of pipe\n            close(0); // close stdin\n            close(1); // close stdout\n            dup2(pip[1], 1); // write-end of pipe is stdout of cmd1\n            argv[0] = cmd1; // make it look like the command in the ps output\n            execvp(cmd1,argv);//execute command1 and die\n            fprintf(stderr, \"execvp(1): `%s': %s\\n\", cmd1, strerror(errno));\n            return 0;\n        }\n        pid2 = fork();\n        cout&lt;&lt;\"second fork makes pids: \"&lt;&lt;pid2&lt;&lt;endl;\n        if (pid2 &lt; 0)\n        {\n            perror(\"fork2\");\n            exit(1);\n        }\n        if (pid2 == 0)\n        {\n            cout&lt;&lt;\"In child of second fork\"&lt;&lt;endl;\n            close(pip[1]); // close write-end of pipe\n            close(0); // close stdin\n            dup2(pip[0], 0); // read-end of pipe is stdin of cmd2\n            argv[0] = cmd2; // update ps output\n            execvp(cmd2,argv);//execute command2 and die\n            fprintf(stderr, \"execvp(1): `%s': %s\\n\", cmd2, strerror(errno));\n            return 0;\n        }\n        if(pid1 &gt; 0) //MAIN PARENT\n        {\n            // close remaining pipe handles in parent\n            close(pip[0]);\n            close(pip[1]);\n            wait(0);//wait for one command to run\n            wait(0);//wait for a second command to run\n            cout&lt;&lt;\"DONE executing\"&lt;&lt;endl; //keep going\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8798168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtUJU.jpg?s=128&g=1", "display_name": "bogus", "link": "https://stackoverflow.com/users/8798168/bogus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 46819835, "answer_count": 1, "score": 1, "last_activity_date": 1515605983, "creation_date": 1508363283, "last_edit_date": 1515605983, "question_id": 46819781, "link": "https://stackoverflow.com/questions/46819781/waitnull-seems-to-cause-child-to-stop-executing", "title": "wait(NULL) seems to cause child to stop executing", "body": "<p>I'm writing a simple pipe program that will ask for two commands then run the programs as if they were entered into bash as <code>cmd1 | cmd2</code>. Then it should loop and ask again until one of the commands is <code>quit</code>.</p>\n\n<p>I've already written this much:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/wait.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;signal.h&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    int pid1, pid2, errchk;\n    int pip[2];\n    char cmd1[128];\n    char cmd2[128];\n    int i = 0;\n    int status;\n\n    errchk = pipe(pip);//make pipe\n    if(errchk == -1)//check for error in pipe\n    {\n        perror(\"pipe\");\n        exit(1);\n    }\n\n    while(i&lt;3)\n    {\n        i++;\n        //Enter commands here\n        cout&lt;&lt;\"Enter cmd1: \";\n        cin&gt;&gt;cmd1;\n        cout&lt;&lt;\"Enter cmd2: \";\n        cin&gt;&gt;cmd2;\n        //if a command is quit... quit\n        if(strcmp(cmd1,\"quit\")==0 || strcmp(cmd2,\"quit\") == 0)\n        {\n            cout&lt;&lt;\"Quitting...\\n\";\n            exit(1);\n        }\n\n        pid1 = fork();\n        cout&lt;&lt;\"first fork makes pids: \"&lt;&lt;pid1&lt;&lt;endl;\n        if(pid1 &lt; 0)\n        {\n            perror(\"fork\");\n            exit(1);\n        }\n\n        else if(pid1 == 0) //MAIN CHILD\n        {\n            cout&lt;&lt;\"In main child with pid: \"&lt;&lt;pid1&lt;&lt;endl;\n            pid2 = fork();\n            cout&lt;&lt;\"second fork makes pids: \"&lt;&lt;pid2&lt;&lt;endl;\n            if(pid2 == 0)//SUB CHILD 2 to run cmd2\n            {\n                cout&lt;&lt;\"In child of second fork\"&lt;&lt;endl;\n                close(0);\n                close(pip[1]);\n                dup(pip[0]);\n                execvp(cmd2,argv);//execute command2 and die\n            }\n            else if(pid2 &gt; 0)//SUB CHILD 1 to run cmd1\n            {\n                cout&lt;&lt;\"In parent of second fork\"&lt;&lt;endl;\n                close(1);\n                close(pip[0]);\n                dup(pip[1]);\n                execvp(cmd1,argv);//execute command1 and die\n            }\n        }\n        else if(pid1 &gt; 0) //MAIN PARENT\n        {\n            wait(NULL);//wait for cmd1\n            wait(NULL);//wait for cmd2\n            cout&lt;&lt;\"DONE executing\"&lt;&lt;endl; //keep going\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I run it and enter <code>ls</code> and <code>wc</code>\nThe output I get is:</p>\n\n<pre><code>Enter cmd1: ls\nEnter cmd2: wc\nfirst fork makes pids: 5785\nfirst fork makes pids: 0\nIn main child with pid: 0\nsecond fork makes pids: 5786\nIn parent of second fork\nsecond fork makes pids: 0\nIn child of second fork\nDONE executing\n      5       5      54\n</code></pre>\n\n<p>The main problem I have is that I should have <code>Done executing</code> come after <code>ls|wc</code> not the other way around.\nI'm thinking the <code>wait(NULL)</code> isn't working but I'm not sure.</p>\n\n<p>Please advise.\nAnd Thank you.</p>\n"}, {"tags": ["c++", "templates", "boost", "generic-programming"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1508363578, "post_id": 46819711, "comment_id": 80587163, "body": "Shot in the dark: try removing the <code>&amp;</code> from <code>&amp;function</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1508364136, "post_id": 46819711, "comment_id": 80587381, "body": "Just currious; why <code>boost::bind</code> rather than <code>std::bind</code>?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1508365128, "post_id": 46819711, "comment_id": 80587717, "body": "remove <code>&amp;</code> before <code>function</code> and replace <code>this</code> with <code>classPtr</code>."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1508365334, "post_id": 46819711, "comment_id": 80587783, "body": "C++03 with tr1 has <code>std::tr1::bind</code>, C++11 has <code>std::bind</code>, but it also has lambdas, which are more handy."}, {"owner": {"reputation": 207, "user_id": 6896009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ff1ki.jpg?s=128&g=1", "display_name": "Pins", "link": "https://stackoverflow.com/users/6896009/pins"}, "edited": false, "score": 0, "creation_date": 1508386242, "post_id": 46819711, "comment_id": 80592766, "body": "updated question with additional picture after the removal of the &amp; and change of the pointer"}, {"owner": {"reputation": 207, "user_id": 6896009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ff1ki.jpg?s=128&g=1", "display_name": "Pins", "link": "https://stackoverflow.com/users/6896009/pins"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1508386396, "post_id": 46819711, "comment_id": 80592795, "body": "@JesperJuhl Im used to it and remember that long time ago had some troubles with std::bind, so started using boost as it builds upon std::bind"}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 6896009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ff1ki.jpg?s=128&g=1", "display_name": "Pins", "link": "https://stackoverflow.com/users/6896009/pins"}, "edited": false, "score": 0, "creation_date": 1508431701, "post_id": 46823075, "comment_id": 80617545, "body": "That was exactly the problem ! I totally forgot about the wrapper class and the fact im not assigning it to std::function. Just curious about your addition constructor with default keyword, why should I use it ?"}], "tags": [], "owner": {"reputation": 2365, "user_id": 611117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d70f88638c52101b1f0c5d9a87a803e?s=128&d=identicon&r=PG", "display_name": "vasek", "link": "https://stackoverflow.com/users/611117/vasek"}, "is_accepted": true, "score": 1, "last_activity_date": 1508390521, "last_edit_date": 1508390521, "creation_date": 1508389104, "answer_id": 46823075, "question_id": 46819711, "link": "https://stackoverflow.com/questions/46819711/error-using-boostbind/46823075#46823075", "title": "Error using boost::bind", "body": "<p>There are several problems with your code:</p>\n\n<ol>\n<li><p>You can't assign your <code>bind</code> result to the array since your array member type is <code>Function</code>, not <code>std::function</code>.</p></li>\n<li><p>You need to remove <code>&amp;</code> as said before in comments. </p></li>\n<li><p>Your member named <code>Function</code> is same as class name so compiler may think you are trying to call class constructor.</p></li>\n</ol>\n\n<p>The following code should work:</p>\n\n<pre><code>class Function {\npublic:\n    std::function&lt;void(float)&gt; func;\n\n    void exec(float dt) {\n        func(dt);\n    }\n};\n</code></pre>\n\n<p>and <code>bindFunction</code> code:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid bindFunction(int action, void (T::*function)(float), T* classPtr)\n{\n    _actions[action].func = boost::bind(function, classPtr, boost::placeholders::_1);\n}\n</code></pre>\n\n<p>However I would suggest slight improvement of Function class so that it doesn't expose its members directly:</p>\n\n<pre><code>class Function\n{\nprivate:\n    std::function&lt;void(float)&gt; func;\n\npublic:\n    Function() = default;\n    Function(std::function&lt;void(float)&gt; f) : func(f) { }\n\n    void exec(float dt) {\n        func(dt);\n    }\n};\n</code></pre>\n\n<p>And corresponding change of your <code>bindFunction</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid bindFunction(int action, void (T::*function)(float), T* classPtr)\n{\n    _actions[action] = Function(boost::bind(function, classPtr, boost::placeholders::_1));\n}\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 6896009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ff1ki.jpg?s=128&g=1", "display_name": "Pins", "link": "https://stackoverflow.com/users/6896009/pins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46823075, "answer_count": 1, "score": 0, "last_activity_date": 1508390521, "creation_date": 1508362896, "last_edit_date": 1508386219, "question_id": 46819711, "link": "https://stackoverflow.com/questions/46819711/error-using-boostbind", "title": "Error using boost::bind", "body": "<p>Lets say I have an array of functions :</p>\n\n<pre><code>name::Function _actions[10];\n</code></pre>\n\n<p>The name::Function is just a wrapper for std::function:</p>\n\n<pre><code>class Function{\n    public :\n        std::function&lt;void(float dt)&gt; Function;\n\n        void exec(float dt){\n\n\n            Function(dt);\n        }\n};\n</code></pre>\n\n<p>And now I have a function to make it generic so it can bind any classes functions : </p>\n\n<pre><code>template&lt;class T&gt;\nvoid bindFunction(int action,void (T::*function)(float) , T* classPtr)\n{\n    _actions[action] = boost::bind(&amp;function, this, boost::placeholders::_1);\n}\n</code></pre>\n\n<p>And want to use it inside a class that inherits this method (the base class is generic but I think it shouldn\u00b4t be a problem)</p>\n\n<pre><code>    DefaultMovableEntity()\n    {\n        bindFunction(1, &amp;DefaultMovableEntity::func1, this);\n    }\n\n    void func1(float dt)\n    {\n        //Code\n    }\n</code></pre>\n\n<p>However I keep getting erros :\n<a href=\"https://i.stack.imgur.com/Fm4PJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fm4PJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the main problem? I thought im doing everything right. Thanks.</p>\n\n<p><strong>Edit1</strong>\nAfter removing the &amp; from the function and replacing this got following error:\n<a href=\"https://i.stack.imgur.com/CmANT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CmANT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c", "multithreading", "file"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508362197, "post_id": 46819473, "comment_id": 80586558, "body": "Well, obviously <code>fread()</code> <i>can</i> be non-reentrant.  I guess the question is whether it <i>is</i> non-reentrant on Win32, and perhaps whether that would be conforming."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1508363249, "post_id": 46819473, "comment_id": 80587033, "body": "According to microsoft (look at remarks in <a href=\"https://msdn.microsoft.com/en-us/library/0ys3hc0b.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/0ys3hc0b.aspx</a> ) the return value from <code>ftell()</code> or (as you&#39;re using) <code>_ftelli64()</code>  is determined by the last I/O operation.  They wouldn&#39;t have made that sort of remark unless there was potential for some mismatch, such as what you have seen."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1508363739, "post_id": 46819473, "comment_id": 80587223, "body": "@Peter, those comments seem to be directed mainly at files opened in append mode, where the next write will always occur at the end of the file, which may not be immediately following the last read."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508368892, "post_id": 46819473, "comment_id": 80588770, "body": "Those deviations don&#39;t look like race conditions to me. They look like error returns being misinterpreted as byte counts. Try logging more information about mismatches. (Starting position, bytes reported read, reported ending position, filename.)"}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508396745, "post_id": 46819473, "comment_id": 80596061, "body": "@rici : I updated the example and typical output"}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1508396870, "post_id": 46819473, "comment_id": 80596122, "body": "<code>ferror</code> never reports any error even when there is a mismatch. Besides this 1)I&#39;m reading from hdd not from a faulty IO source 2)This happens on all systems I have tested so this is not due to the hardware/system 3)It does not happen with 1 thread 4)It does not happen with std::iostream =&gt; To me this is a race condition"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508400956, "post_id": 46819473, "comment_id": 80598384, "body": "Unicode filenames work like a charm in fstreams under cygwin g++."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508426134, "post_id": 46819473, "comment_id": 80614046, "body": "@galinette: Thanks, that seems like useful information."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508429502, "post_id": 46819473, "comment_id": 80616297, "body": "@n.m. you mean that std::fstream has a wstring constructor? I&#39;d like a proof of this..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508430086, "post_id": 46819473, "comment_id": 80616626, "body": "No, it works with narrow strings (converts to and from utf8?)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508435246, "post_id": 46819473, "comment_id": 80619373, "body": "@galinette: ok, i&#39;m convinced that it is not related to an error return. The regularity of your test output, however, leads me to still be a bit skeptical about the race condition theory, although it is of course possible. But there are many other possibilities. One question I have is whether your _ftelli64 is really calling that msvcrt function, or whether it might be using <code>_telli64(fileno(f))</code> instead, which I believe has slightly different semantics."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1508492631, "post_id": 46819473, "comment_id": 80640329, "body": "Windows systems do <code>fopen</code> in text mode by eliminating CRLF sequences and converting them into <code>\\n</code> chars.... this can lead to reading some chars less or more than you expect, if you have this sequences in a binary file that&#39;s being read in text mode.  Be careful and check you didn&#39;t <code>fopen</code> in text mode."}], "answers": [{"comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1508397203, "post_id": 46820063, "comment_id": 80596297, "body": "fread always returns the number of bytes I have asked. ferror always returns 0 (no error)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1508422045, "post_id": 46820063, "comment_id": 80611172, "body": "Well then, @galinette, unless two of your threads are reading from the same file, you are observing a bug in Microsoft&#39;s C library.  Do note that multiple threads reading the same file really could produce the results you describe, though.  Two different threads&#39; <code>fread()</code> calls on the same file could occasionally occur between between the <code>_ftelli64()</code> calls of one or both threads, producing the behavior you observe.  That would be consistent with the fact that the differences you observe appear to balance out to zero on a file-by-file basis."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1508429688, "post_id": 46820063, "comment_id": 80616399, "body": "Rather a bug from MinGW dll. One of the MinGW developpers told me that _ftelli64 is not exported by msvcrt.dll, so they reimplemented it (and possibly broke it)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1508432610, "post_id": 46820063, "comment_id": 80617998, "body": "@galinette, in that event, yes, it is plausible that the bug is in MinGW rather than in msvcrt.  I&#39;m not sure how one would prove it, but I&#39;m also not sure it matters which one is to blame.  Anyway, the bottom line remains that the behavior you observe does not conform to the requirements of the standard."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508439301, "post_id": 46820063, "comment_id": 80621419, "body": "@john: but that code does not read from the same  <code>FILE</code> in two different threads. It doesn&#39;t even read from the same file in two threads. Also: <code>_ftelli64</code> does not form part of any standard and according to OP, there is no problem when the standard <code>ftell</code> is used."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508441608, "post_id": 46820063, "comment_id": 80622622, "body": "@rici, if the problem is indeed in <code>_ftelli64()</code> then you&#39;re right.  Although the fact that the problem is not observed when <code>ftell()</code> is used instead is suggestive that this is the case, it is not definitive.  Anyway, I don&#39;t really care in which function the problem lies.  The bottom line -- as I should have said it -- is that the observed joint behavior of the two functions does not conform to the functions&#39; respective specifications."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1508365232, "last_edit_date": 1508365232, "creation_date": 1508364858, "answer_id": 46820063, "question_id": 46819473, "link": "https://stackoverflow.com/questions/46819473/can-fread-be-non-rentrant/46820063#46820063", "title": "Can fread be non rentrant?", "body": "<p>Since you're asking mostly about the C standard library, the C standard says:</p>\n\n<blockquote>\n  <p>Each stream has an associated lock that is used to prevent data races when multiple threads of execution access a stream, and to restrict the interleaving of stream operations performed by multiple threads. Only one thread may hold this lock at a time. The lock is reentrant: a single thread may hold the lock multiple times at a given time.</p>\n  \n  <p>All functions that read, write, position, or query the position of a stream lock the stream before accessing it. They release the lock associated with the stream when the access is complete.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.2p7\" rel=\"nofollow noreferrer\">C2011 7.21.2/7-8</a>)</p>\n\n<p>C++ folks should note that in C, \"stream\" means the kind of thing accessed via a <code>FILE *</code>.  Of <code>fread()</code>, the standard says, in part,</p>\n\n<blockquote>\n  <p>The file position indicator for the stream (if defined) is advanced by the number of characters successfully read.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The fread function returns the number of elements successfully read</p>\n</blockquote>\n\n<p>but also</p>\n\n<blockquote>\n  <p>If an error occurs, the resulting value of the file position indicator for the stream is indeterminate.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.8.1p2\" rel=\"nofollow noreferrer\">C2011, 7.21.8.1/2-3</a>)</p>\n\n<p>It seems not to characterize reaching the end of the stream as an error.</p>\n\n<p>Although C11 does not specifically say that <code>fread()</code> must be thread-safe, it does acknowledge the existence of multithreaded programs and define their semantics.  It specifies that in such programs,</p>\n\n<blockquote>\n  <p>The execution of each thread proceeds as defined by the remainder of this standard.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.4p1\" rel=\"nofollow noreferrer\">C2011, 5.1.2.4/1</a>)</p>\n\n<p>That does not afford the possibility of <code>fread()</code> failing to behave as documented when called in parallel on different streams, and the locking requirements I cited earlier prevent data races and the attending undefined behavior even when it is called in parallel on <em>the same</em> stream.</p>\n\n<p><code>_ftelli64()</code> is not a standard library function in ISO C, but the Win32 docs specify its behavior in the same terms that that they specify the behavior of <code>ftell()</code>, which <em>is</em> a standard library function.  Both</p>\n\n<blockquote>\n  <p>retrieve the current position of the file pointer (if any) associated with <code>stream</code>. The position is expressed as an offset relative to the beginning of the stream. </p>\n</blockquote>\n\n<p>(<a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/ftell-ftelli64\" rel=\"nofollow noreferrer\">Microsoft C library documentation</a>)</p>\n\n<p>Microsoft's \"file pointer\" is the same thing as ISO C's \"file position\".  Overall, then, the only way I can see the observed behavior conforming is if a few of the <code>fread()</code> calls encounter errors.  You can check for this by calling <code>ferror()</code> in the event that <code>fread()</code> returns 0.  If there are errors, then all bets are off.</p>\n"}], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1508397001, "creation_date": 1508361782, "last_edit_date": 1508397001, "question_id": 46819473, "link": "https://stackoverflow.com/questions/46819473/can-fread-be-non-rentrant", "title": "Can fread be non rentrant?", "body": "<p>In a program written in C++ and compiled with MinGW-w64 under windows, I read several files concurrently in separate threads. Since the file names may have non ASCII characters, I cannot use the C++ standard library <code>std::ifstream</code> as it does not support <code>wchar</code> file names. So I need to use the C library with <code>_wfopen</code> from the Win32 API.</p>\n\n<p>However, I get a very strange bug which I have reproduced in a MCVE. After reading n bytes with fread(), the result from <code>_ftelli64</code> is sometimes not increased by n, but by a few bytes less or more.</p>\n\n<p>With single thread reading, the issue is gone, and with <code>std::ifstream</code> as well.</p>\n\n<p>It acts as if there was a race condition in fread, which would then be non-reentrant.</p>\n\n<p>In the following example, I replaced <code>_wfopen</code> by <code>fopen</code> as the bug is still there.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;thread&gt;\n\nconstexpr const int numThreads = 8;\nconstexpr const int blockSize = 65536+8;\nconstexpr const int fileBlockCount = 48; //3MB files\n\nvoid readFile(const std::string &amp; path)\n{\n    std::cout &lt;&lt; \"Reading file \" &lt;&lt; path &lt;&lt; \"\\n\";\n    std::vector&lt;char&gt; buffer(blockSize);\n\n    FILE * f = fopen(path.c_str(), \"rb\");\n    for(int i=0;i&lt;fileBlockCount;++i)\n    {\n\n        int64_t pos_before = _ftelli64(f);\n        int64_t n = fread(buffer.data(), 1, buffer.size(),f);\n        int64_t pos_after = _ftelli64(f);\n        int64_t posMismatch = (int64_t)pos_after-(pos_before+n);\n        if(ferror(f))\n        {\n            std::cout &lt;&lt; \"fread error\\n\";\n        }\n        if(posMismatch!=0)\n        {\n            std::cout &lt;&lt; \"Error \" &lt;&lt; path\n                  &lt;&lt; \" / ftell before \" &lt;&lt; pos_before\n                  &lt;&lt; \" / fread returned \" &lt;&lt; n\n                  &lt;&lt; \" / ftell after \" &lt;&lt; pos_after\n                  &lt;&lt; \" / mismatch \" &lt;&lt; posMismatch &lt;&lt; \"\\n\";\n        }\n    }\n    fclose(f);\n}\n\nint main()\n{\n    //Generate file names\n    std::vector&lt;std::string&gt; fileNames(numThreads);\n    for(int i=0;i&lt;numThreads;++i)\n    {\n        std::ostringstream oss;\n        oss &lt;&lt; i &lt;&lt; \".dat\";\n        fileNames[i] = oss.str();\n    }\n\n\n    //Create dummy data files\n    for(int i=0;i&lt;numThreads;++i)\n    {\n        std::ofstream f(fileNames[i], std::ios_base::binary);\n        for(int j=0;j&lt;blockSize*fileBlockCount;++j)\n        {\n            f.put((char)(j&amp;255));\n        }\n    }\n\n\n    //Read data files in separate threads\n    std::vector&lt;std::thread&gt; threads;\n    for(int i=0;i&lt;numThreads;++i)\n    {\n        threads.emplace_back(readFile, fileNames[i]);\n    }\n\n    //This waits for the threads to finish\n    for(int i=0;i&lt;numThreads;++i)\n    {\n        threads[i].join();\n    }\n    threads.clear();\n\n    std::cout &lt;&lt; \"Done\";\n}\n</code></pre>\n\n<p>The output is randomly something like:</p>\n\n<pre><code>Error 3.dat / ftell before 65544 / fread returned 65544 / ftell after 131089 / mismatch 1\nError 7.dat / ftell before 0 / fread returned 65544 / ftell after 65543 / mismatch -1\nError 7.dat / ftell before 65543 / fread returned 65544 / ftell after 131088 / mismatch 1\nError 3.dat / ftell before 2162953 / fread returned 65544 / ftell after 2228498 / mismatch 1\nError 7.dat / ftell before 2162952 / fread returned 65544 / ftell after 2228497 / mismatch 1\nError 3.dat / ftell before 3080570 / fread returned 65544 / ftell after 3146112 / mismatch -2\nError 7.dat / ftell before 3080569 / fread returned 65544 / ftell after 3146112 / mismatch -1\nError 2.dat / ftell before 65544 / fread returned 65544 / ftell after 131089 / mismatch 1\nError 6.dat / ftell before 0 / fread returned 65544 / ftell after 65543 / mismatch -1\nError 6.dat / ftell before 65543 / fread returned 65544 / ftell after 131088 / mismatch 1\nError 2.dat / ftell before 2162953 / fread returned 65544 / ftell after 2228498 / mismatch 1\nError 6.dat / ftell before 2162952 / fread returned 65544 / ftell after 2228497 / mismatch 1\nError 2.dat / ftell before 3080570 / fread returned 65544 / ftell after 3146112 / mismatch -2\nError 6.dat / ftell before 3080569 / fread returned 65544 / ftell after 3146112 / mismatch -1\n</code></pre>\n\n<p><strong><em>EDIT : This seems related to <code>_ftelli64</code></em></strong></p>\n\n<p>If I replace <code>_ftelli64</code> by <code>ftell</code>, the issue is not there anymore\nSo is this a broken not reentrent implementation of <code>_ftelli64</code> ?</p>\n"}, {"tags": ["c++", "loops", "for-loop", "arduino"], "comments": [{"owner": {"reputation": 1462, "user_id": 445159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db78d0607a60347d9f61acf0b0451ef?s=128&d=identicon&r=PG", "display_name": "bigtlb", "link": "https://stackoverflow.com/users/445159/bigtlb"}, "edited": false, "score": 0, "creation_date": 1508362053, "post_id": 46819437, "comment_id": 80586499, "body": "You need an outside loop that runs forever and keeps polling the button state....  Your else doesn&#39;t need a loop, it just needs to turn all the lights on, wait, then turn them all off."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8798122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690f1f3b007be95dfe992d55ac340d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Burleson", "link": "https://stackoverflow.com/users/8798122/chase-burleson"}, "edited": false, "score": 0, "creation_date": 1508379765, "post_id": 46819572, "comment_id": 80591298, "body": "Thanks, Ron! I upvoted your answer, but apparently, users under a certain level do not publically affect the answers upvotes."}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1508362961, "last_edit_date": 1508362961, "creation_date": 1508362221, "answer_id": 46819572, "question_id": 46819437, "link": "https://stackoverflow.com/questions/46819437/for-loop-leds-will-not-display-correctly-on-arduino/46819572#46819572", "title": "For Loop: LED&#39;s Will Not Display Correctly on Arduino", "body": "<p>Your second <code>foor</code> loop <em>init-statement</em> of <code>led_num &gt;= 10</code> is wrong as it has no effect. Instead of:</p>\n\n<pre><code>for (led_num &gt;= 10; led_num &lt;= 13; led_num++)\n</code></pre>\n\n<p>it should probably be:</p>\n\n<pre><code>for (led_num = 11; led_num &lt;= 13; led_num++)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8798122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690f1f3b007be95dfe992d55ac340d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Burleson", "link": "https://stackoverflow.com/users/8798122/chase-burleson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508362961, "creation_date": 1508361600, "question_id": 46819437, "link": "https://stackoverflow.com/questions/46819437/for-loop-leds-will-not-display-correctly-on-arduino", "title": "For Loop: LED&#39;s Will Not Display Correctly on Arduino", "body": "<p>Here is the code so far:</p>\n\n<pre><code>bool t1 = true;\nbool f1 = false;\nbool button_state = 0;\nint delay_led = 100;\nint led_num = 1, buzzer_delay = 75;\nvoid setup() {\n  // put your setup code here, to run once:\npinMode(2, INPUT); pinMode(10, OUTPUT); pinMode(11, OUTPUT); \npinMode(12, OUTPUT); pinMode(13, OUTPUT);\n}\n\nvoid loop() {\n  // put your main code here, to run repeatedly:\ndigitalRead(2);\nbutton_state = digitalRead(2);\n\nif (button_state == 0)\n{\n  for (led_num = 10; led_num &lt;= 13; led_num++)\n  {\n  digitalWrite(led_num, t1);\n  delay(delay_led);\n  digitalWrite(led_num, f1);\n  }\n}\n\nelse\n{\n    for (led_num &gt;= 10; led_num &lt;= 13; led_num++)\n  {\n  digitalWrite(led_num, t1);\n  }\n}\n}\n</code></pre>\n\n<p>I'm trying to get the LEDs to light up at once, which is what the else statement is used for. However, our instructor specifically stated to use loops to accomplish this. Here is our assignment:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z7oIE.png\" rel=\"nofollow noreferrer\">Here is an image of our assignment</a></p>\n\n<p>I cannot figure out how to use loops instead on the if/else and I cannot get the LEDs to light up at once. Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "c++11", "move-semantics", "rvo"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1508361493, "post_id": 46819338, "comment_id": 80586185, "body": "<a href=\"https://stackoverflow.com/a/11540204/3484570\">&quot;C++11 has a special rule that allows returning automatic objects from functions without having to write <code>std::move</code>. In fact, you should never use std::move to move automatic objects out of functions, as this inhibits the &quot;named return value optimization&quot; (NRVO)&quot;</a>. Not sure if it is good enough as a duplicate as the answer is hidden in a wall of text."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1508362249, "post_id": 46819338, "comment_id": 80586586, "body": "trust RVO. as of c++17 it&#39;s mandated."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1508379410, "post_id": 46819338, "comment_id": 80591198, "body": "@RichardHodges: Kind of, and kind of not at all, not in any way related to this question. Terms like &quot;mandatory foo&quot; that are fed as twitter-sized sound bites are dangerous when they&#39;re so easily misunderstood to be whatever the listener wants them to be."}], "owner": {"user_type": "does_not_exist", "display_name": "user3191398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "closed_date": 1508361690, "answer_count": 0, "score": 0, "last_activity_date": 1508361889, "creation_date": 1508361201, "question_id": 46819338, "link": "https://stackoverflow.com/questions/46819338/should-i-trust-in-rvo-or-use-move-semantic", "closed_reason": "Duplicate", "title": "Should I trust in RVO or use move semantic?", "body": "<p>my question is how to write function which creates object.</p>\n\n<p>For example:</p>\n\n<pre><code>class MyVector {\npublic:\n  std::vector&lt;int&gt; vec_;\n  MyVector() = default;\n  MyVector(const MyVector&amp;) = default;\n  MyVector&amp; operator=(const MyVector&amp;) = default;\n  MyVector(MyVector&amp;&amp;) = default;\n  MyVector&amp; operator=(MyVector&amp;&amp;) = default;\n  void add(int value) {\n    vec_.push_back(value);\n  }\n};\n</code></pre>\n\n<p>// Ver. 1 of functions:</p>\n\n<pre><code>std::string to_string(const MyVector&amp; vec) {\n    std::string vecStr;\n    for(const auto value: vec.vec_) {\n        vecStr += std::to_string(value);\n    }\n    return vecStr;\n}\n\nMyVector create_vector() {\n    MyVector vec;\n    for(int i = 0; i &lt; 1000; ++i) {\n        cout &lt;&lt; i &lt;&lt; endl;\n        vec.add(i);\n    }\n    return vec;\n}\n</code></pre>\n\n<p>// Ver. 2 of functions:</p>\n\n<pre><code>std::string toString(const MyVector&amp; vec) {\n    std::string vecStr;\n    for(const auto value: vec.vec_) {\n        vecStr += std::to_string(value);\n    }\n    return std::move(vecStr);\n}\n\nMyVector createVector() {\n    MyVector vec;\n    for(int i = 0; i &lt; 1000; ++i) {\n        vec.add(i);\n    }\n    return std::move(vec);\n}\n</code></pre>\n\n<p>main: </p>\n\n<pre><code>int main()\n{\n    MyVector vec1 = create_vector();\n    MyVector vec2 = std::move(createVector());\n    std::string vec1Str = to_string(vec1);\n    std::string vec2Str = std::move(toString(vec2));\n    std::cout &lt;&lt; vec1Str &lt;&lt; std::endl;\n    std::cout &lt;&lt; vec2Str &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Which version of functions is preferred? Do Ver.1 always guarantee RVO even if the content of vector wont be a fundamental type?</p>\n"}, {"tags": ["c++", "io"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508361543, "post_id": 46819332, "comment_id": 80586216, "body": "Looks like you could lose a loop and save some math with <code>for(int i=0;i&lt;m*n;i++)  cin &gt;&gt; base[i];</code> Dunno if that will do much for you, though."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1508362076, "post_id": 46819332, "comment_id": 80586508, "body": "It would also be necessary for array index to be at at least a <code>long</code> (guaranteed able to represent more than 9 million) rather than an <code>int</code> (which is not guaranteed to represent that many values).   Beyond that, reading is always a relatively slow operation even if you fiddle with buffering and synchronisation, since it is then determined by whatever device is being read from - if you want to read a large number of values from standard input (which will usually be a distinct device rather than, say, redirected from a RAM drive) you need to accept it will take time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508362643, "post_id": 46819332, "comment_id": 80586778, "body": "<i>is exceeding time</i> and that time is? You have enabled the optimizer?"}, {"owner": {"reputation": 2488, "user_id": 453436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8e7be51a9257fb1f08a7f01c9c29e3?s=128&d=identicon&r=PG", "display_name": "Bowie Owens", "link": "https://stackoverflow.com/users/453436/bowie-owens"}, "edited": false, "score": 0, "creation_date": 1508363601, "post_id": 46819332, "comment_id": 80587172, "body": "Do you have to use a text format for your input or can you use binary?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508407798, "post_id": 46819332, "comment_id": 80602294, "body": "What are you reading <i>from</i>?  Maybe that&#39;s the bottleneck."}], "owner": {"reputation": 1, "user_id": 7600991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a44f78f5e40d4689d8226204964b48?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/7600991/lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508361182, "creation_date": 1508361182, "question_id": 46819332, "link": "https://stackoverflow.com/questions/46819332/more-efficient-input-in-c", "title": "More efficient input in c++", "body": "<p>I have to read 9mln numbers from standard input, i actually wanted to do it like this: </p>\n\n<pre><code>base = new int[3000*3000];\nios_base::sync_with_stdio(0);\ncin.tie(0);\nfor(int i=0;i&lt;m;i++)\n    for(int j=0;j&lt;n;j++)\n    {\n        cin &gt;&gt; base[i*n+j];\n    }\n</code></pre>\n\n<p>but just input reading is exceeding time(algorithmic task), any thoughts how to do this efficiently? </p>\n"}, {"tags": ["c++", "pointers", "string-literals"], "comments": [{"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "edited": false, "score": 0, "creation_date": 1508361268, "post_id": 46819323, "comment_id": 80586050, "body": "Oh boy, see <a href=\"https://www.tutorialspoint.com/cprogramming/c_pointers.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_pointers.htm</a> to learn about pointers. There is much much wrong here. <code>&amp;&quot;stringLiteral&quot;</code> will never work."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508361323, "post_id": 46819323, "comment_id": 80586088, "body": "@Zebrafish You need to declare an intermediate variable of the type char * and initialize it be the string literal. And then you can declare another variable of the type char ** and assign it with the address of the intermediate variable. You may not apply the operator &amp; to an rvalue."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1508361374, "post_id": 46819323, "comment_id": 80586112, "body": "This makes no sense.  A pointer to a pointer cannot possibly be compatible with a pointer to a character array.  The former requires one more level of indirection to reach the character than the latter does.  Try to find a good, basic tutorial on pointers."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508361507, "post_id": 46819323, "comment_id": 80586198, "body": "@Zebrafish  What are you trying to achieve using a pointer of the type char ** instead of a pointer of the type char *?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 1, "creation_date": 1508361639, "post_id": 46819323, "comment_id": 80586274, "body": "I&#39;m learning the Vulkan API, and it has a bit much like the (int argc, char** args), I tried to assign a string literal directly, I thought it was OK, I&#39;ve obviously got things completely wrong"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1508361700, "post_id": 46819323, "comment_id": 80586313, "body": "@Vlad from Moscow No but that&#39;s just it, at first I thought it was an rvalue, but a string literal isn&#39;t an r value is it? It has a place allocated in memory for it."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 3, "creation_date": 1508361766, "post_id": 46819323, "comment_id": 80586349, "body": "@Zebrafish String literals have types of constant character arrays."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508361865, "post_id": 46819323, "comment_id": 80586406, "body": "@Vlad from Moscow And if you assign it to a char pointer it then becomes a char pointer, and then you can make a pointer that points to that char pointer. I just thought you could do it directly."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508361972, "post_id": 46819323, "comment_id": 80586464, "body": "@Zebrafish No you can not do it directly because you may not take an address of an rvalue. Otherwise you could write char **p = &amp;( &quot;String literal&quot; + 0 );"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508362042, "post_id": 46819323, "comment_id": 80586492, "body": "@Vlad from Moscow But you just said a string literal is of type char array, how&#39;s a char array an rvalue?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508362141, "post_id": 46819323, "comment_id": 80586533, "body": "@Zebrafish Used in the expression &quot;String literal&quot; + 0 the string literal is implicitly converted to pointer to its first element. So the expression ( &quot;String literal&quot; + 0 ) has the type char * but it is an rvalue. So you may not apply the operator &amp; to the expression."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1508362278, "post_id": 46819323, "comment_id": 80586600, "body": "@Zebrafish Take into account that for example the expression &amp;&quot;Hello&quot; has the type char ( * )[6]. It is not the same as the type of the expression &quot;Hello&quot; + 0 that has the type char *."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508362403, "post_id": 46819323, "comment_id": 80586662, "body": "String literals are of the type <code>const char[N]</code> for some N. So what you do is casting a  <code>char const (*)[N]</code> to a <code>char const**</code>. You can&#39;t alias an array by a pointer. I say this for what feels like the umpteenth time (on SO), arrays are not pointers. And pointers are not arrays."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508362960, "post_id": 46819323, "comment_id": 80586935, "body": "@Vlad from Moscow I just found out I can do  const char * pptr = (const char*)&amp;&quot;StringLiteral&quot;; std::cout &lt;&lt;  pptr; Works fine. Hmmm, I don&#39;t know what to think."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508363051, "post_id": 46819323, "comment_id": 80586959, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2245664/what-is-the-type-of-string-literals-in-c-and-c\">What is the type of string literals in C and C++?</a>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1508363096, "post_id": 46819323, "comment_id": 80586973, "body": "@Zebrafish There is notfhing to think. You are using a pointer of the type const char * instead of the pointer of the type const char ** that is referred in your question."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508363241, "post_id": 46819323, "comment_id": 80587030, "body": "@Vlad from Moscow Just saying that it goes against what you said, that I can&#39;t apply &amp; operator to the string literal because it&#39;s an rvalue."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508363547, "post_id": 46819323, "comment_id": 80587147, "body": "@VladfromMoscow A string literal is an lvalue. All the other literals are rvalues, but a string literal is an lvalue. You can take its address, which is why the second option even compiles. It just doesn\u2019t do what the OP expected."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508363695, "post_id": 46819323, "comment_id": 80587204, "body": "@Zebrafish I did not say this. I said that you main not apply the operator to the expression &quot;StringLiteral&quot; + 0."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508363729, "post_id": 46819323, "comment_id": 80587218, "body": "@DanielH I do not understand why you are saying this me."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1508363986, "post_id": 46819323, "comment_id": 80587324, "body": "@VladfromMoscow It sure looked like you were saying the string literal itself was an rvalue. Re-reading it I see what you mean, but that was not as clear in your comments as you intended."}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508363839, "post_id": 46819850, "comment_id": 80587263, "body": "I see your point. As someone said I think I got my levels of indirection wrong. As you said it points to the first char. Though, I wonder, when I do cout &lt;&lt; ppchar; or cout &lt;&lt; *ppchar; it should print the word or the first letter, but it throws an exception."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508363964, "post_id": 46819850, "comment_id": 80587318, "body": "@Zebrafish The compiler considers the value stored in the expression *ppchar as a value of an address. But instead of an address it gets the first character of the string literal and interprets it as address trying to access memory using the character as an address."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508364013, "post_id": 46819850, "comment_id": 80587332, "body": "Ohhhhh, that makes sense."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508645504, "post_id": 46819850, "comment_id": 80688138, "body": "&quot;you will get the value that corresponds to the value of the first character of the string literal&quot;  - in fact it&#39;s a strict aliasing violation so anything could happen"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1508364242, "last_edit_date": 1508364242, "creation_date": 1508363610, "answer_id": 46819850, "question_id": 46819323, "link": "https://stackoverflow.com/questions/46819323/can-i-assign-a-pointer-to-char-pointer-directly-to-a-string-literal/46819850#46819850", "title": "Can I assign a pointer to char pointer directly to a string literal?", "body": "<p>This expression</p>\n\n<pre><code>&amp;\"StringLiteral\"\n</code></pre>\n\n<p>has the type <code>const char( * )[14]</code> in C++ and <code>char ( * )[14]</code> in C because the string literal has respectively the type <code>const char[14]</code> or <code>char[14]</code>.</p>\n\n<p>So you may not assign such a pointer to an object of the type <code>const char **</code> or <code>char **</code> because the pointers are incompatible.</p>\n\n<p>And if you will try to use a casting as in this declaration</p>\n\n<pre><code>const char** ppchar = (const char**) &amp;\"StringLiteral\";\n</code></pre>\n\n<p>nevertheless dereferencing this pointer like <code>*ppchar</code> does not make sense because instead of the object of the type <code>char *</code>  as it would be expected you will get the value that corresponds to the value of the first character of the string literal instead of an address value.</p>\n\n<p>You could for example at first convert the string literal to the type <code>const char *</code> (or <code>char *</code> in C) the following way</p>\n\n<pre><code>StringLiteral + 0\n</code></pre>\n\n<p>because in such expressions a string literal is converted to pointer to its first character. However you may not apply the unary operator <code>&amp;</code> to this expression like</p>\n\n<pre><code>&amp;( StringLiteral + 0 )\n</code></pre>\n\n<p>to get an object of the type <code>const char **</code> because you may not apply the operator to an <code>rvalue</code>.</p>\n\n<p>So what you could do is the following</p>\n\n<pre><code>const char *pchar = \"StringLiteral\";\nconst char **ppchar = &amp;pchar;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 1, "creation_date": 1508365121, "post_id": 46820055, "comment_id": 80587715, "body": "That&#39;s almost like what I tried doing, which was const char ** ppchar = &amp;((const char*)&quot;StringLiteral&quot;);  But I think the cast makes it an rvalue, so I can&#39;t take the address of it I guess."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508513728, "post_id": 46820055, "comment_id": 80652399, "body": "Isn&#39;t <code>(const char *){&quot;StringLiteral&quot;}</code> a temporary, making <code>ppchar</code> the address of a temporary and thus unusable without UB?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508642295, "post_id": 46820055, "comment_id": 80687589, "body": "<code>&quot;StringLiteral&quot;</code> is a string literal. In C, <code>(const char *){&quot;StringLiteral&quot;}</code> is a compound literal. In C++ it is not, because C++ doesn&#39;t have the concept of compound literals; there, it is a cast of <code>&quot;StringLiteral&quot;</code> to a temporary <code>const char *</code>. The question is tagged both, but uses C++ constructs. See <a href=\"https://godbolt.org/g/h69wCg\" rel=\"nofollow noreferrer\">here</a> for what Clang in C++ mode makes of the construct."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508644779, "post_id": 46820055, "comment_id": 80688010, "body": "@DanielH Ah yes a <i>compound literal</i> and not a <i>string literal</i>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 1, "creation_date": 1508645709, "post_id": 46820055, "comment_id": 80688180, "body": "@Zebrafish in C there is no cast; this is the syntax for a compound literal, which has superficial similarities to a cast expression. But it is not a cast expression because something enclosed by <code>{ }</code> does not make an expression.  The code is invalid in C++ for the same reason"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1508365343, "last_edit_date": 1508365343, "creation_date": 1508364829, "answer_id": 46820055, "question_id": 46819323, "link": "https://stackoverflow.com/questions/46819323/can-i-assign-a-pointer-to-char-pointer-directly-to-a-string-literal/46820055#46820055", "title": "Can I assign a pointer to char pointer directly to a string literal?", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/46819850/2410359\">@Vlad from Moscow</a> fine answer.</p>\n\n<blockquote>\n  <p>Can I assign a pointer to char pointer directly to a string literal?</p>\n</blockquote>\n\n<p>Almost.  In C, code can use a <em>compound literal</em> to form a <code>const char *</code> initialized with the <em>string literal</em> and then take the address of that pointer to assign to <code>ppchar</code>.</p>\n\n<pre><code>const char **ppchar = &amp;((const char *){\"StringLiteral\"});\nputs(*ppchar);\n</code></pre>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 46819850, "answer_count": 2, "score": 3, "last_activity_date": 1508642393, "creation_date": 1508361158, "last_edit_date": 1508642393, "question_id": 46819323, "link": "https://stackoverflow.com/questions/46819323/can-i-assign-a-pointer-to-char-pointer-directly-to-a-string-literal", "title": "Can I assign a pointer to char pointer directly to a string literal?", "body": "<p>I would like to know if I can assign a pointer to pointer to char directly to a string literal without first assigning the string literal to an lvalue pointer first. Usually if an argument takes a pointer to something, you can pass the address of the object using &amp;, and a string literal seems to be (or at least decays to) a char pointer because you can assign them to char pointers. This is why I expected one of the following to work:</p>\n\n<pre><code>const char ** ppchar = &amp;\"StringLiteral\"; // This doesn't compile\n\nconst char ** ppchar = (const char **)&amp;\"StringLiteral\"; // This compiles, but...\n\nstd::cout &lt;&lt; *ppchar;   // Throws an exception\n</code></pre>\n\n<p>I expected at least the second one of these to work, because \"StringLiteral\" seems to me to at least decay to a pointer, so in:</p>\n\n<pre><code>const char** ppchar = (const char**) &amp;\"StringLiteral\";\n</code></pre>\n\n<p>The first pointer would point to the address of the string literal. If the string literal is assigned to an lvalue pointer first, the first pointer would be pointing to the second pointer, which is essentially holding its address. Seems the same to me.</p>\n\n<p>Edit: Also, it seems I can do:</p>\n\n<pre><code>const char * _pptr = (const char*)&amp;\"StringLiteral\";\nstd::cout &lt;&lt; _pptr; // Prints \"Hello\"\n</code></pre>\n\n<p>So it doesn't seem to a rule against assigning directly to the string literal.</p>\n\n<p>Edit: As is so obvious to many, I have my levels of indirection wrong. This is explained by Vlad from Moscow in his answer. In:</p>\n\n<pre><code>const char ** pptr = (const char**)&amp;\"StringLiteral\";\n</code></pre>\n\n<p>The compiler expects pptr to point to something that stores the address of a char, whereas I've assigned it to the address of the \"StringLiteral\" itself, which means when I cout it dereferences the first pointer to find which address find the char. The problem is it's pointing directly to the address of the \"StringLiteral\", meaning it uses the value of the first letter of \"StringLiteral\" as the address to go to to find the char, basically it'll use \"S\" as the address to go to. Hate being so thick.</p>\n"}, {"tags": ["c++", "vtk", "dicom"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1508442248, "post_id": 46819280, "comment_id": 80622982, "body": "I think that you need an ITK image reader. Here&#39;s an example; <a href=\"https://itk.org/Doxygen/html/Examples_2IO_2DicomImageReadPrintTags_8cxx-example.html\" rel=\"nofollow noreferrer\">itk.org/Doxygen/html/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 1310934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f2e0ec444c5147b6df51f973123db6?s=128&d=identicon&r=PG", "display_name": "g.stevo", "link": "https://stackoverflow.com/users/1310934/g-stevo"}, "is_accepted": true, "score": 1, "last_activity_date": 1508814250, "creation_date": 1508814250, "answer_id": 46901538, "question_id": 46819280, "link": "https://stackoverflow.com/questions/46819280/how-to-read-imagetype-0008-0008-in-vtk-dicom-reader/46901538#46901538", "title": "How to read ImageType (0008,0008) in VTK DICOM Reader?", "body": "<pre><code>#include \"gdcmReader.h\"\n#include \"gdcmMediaStorage.h\"\n\nint main(int argc, char *argv [])\n{\n  if( argc &lt; 2 ) return 1;\n  const char *filename = argv[1];\n\n  gdcm::Reader reader;\n  reader.SetFileName( filename);\n  if( !reader.Read() )\n    {\n    std::cerr &lt;&lt; \"Could not read: \" &lt;&lt; filename &lt;&lt; std::endl;\n    return 1;\n    }\n  std::stringstream strm;\n\n  gdcm::File &amp;file = reader.GetFile();\n  gdcm::DataSet &amp;ds = file.GetDataSet();\n  gdcm::FileMetaInformation &amp;fmi = file.GetHeader();\n\n  ConstIterator it = ds.GetDES().begin();\n\n  for( ; it != ds.GetDES().end(); ++it){\n      if (it-&gt;GetTag()==gdcm::Tag (0x0008, 0x0008)){\n      std:cout &lt;&lt; it;\n  }  \n</code></pre>\n"}], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 46901538, "answer_count": 1, "score": 0, "last_activity_date": 1508814250, "creation_date": 1508360937, "last_edit_date": 1508363410, "question_id": 46819280, "link": "https://stackoverflow.com/questions/46819280/how-to-read-imagetype-0008-0008-in-vtk-dicom-reader", "title": "How to read ImageType (0008,0008) in VTK DICOM Reader?", "body": "<p>I have an application on hands sitting on top of VTK 5.3. Using vtkDICOMImageReader I'm getting image position, width, height, ..., so far so good.</p>\n\n<p>But is there a good way to read ImageType string with tag (0008,0008)?</p>\n\n<p>More general, could I read any tag back using vtkDICOMImageReader? Pass tag value, get back what's in the DICOM file?</p>\n"}, {"tags": ["c++", "global-variables", "header-files"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1508361042, "post_id": 46819226, "comment_id": 80585938, "body": "Define a method to access this global object, cough... cough... singleton, cough..., instead."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508384089, "post_id": 46819226, "comment_id": 80592324, "body": "I removed the trivial header, separated the important two, and fixed the title (and some spelling and formatting) to make your question clearer and easier to read.  Hope it helps."}], "answers": [{"comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508384144, "post_id": 46819268, "comment_id": 80592339, "body": "That&#39;s good advice, but it doesn&#39;t solve the problem at hand."}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508411710, "post_id": 46819268, "comment_id": 80604456, "body": "Updated my answer."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508417160, "post_id": 46819268, "comment_id": 80607669, "body": "What if they want <code>Clib::func</code> to be inline, or it&#39;s a template?"}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": false, "score": 1, "last_activity_date": 1508418109, "last_edit_date": 1508418109, "creation_date": 1508360909, "answer_id": 46819268, "question_id": 46819226, "link": "https://stackoverflow.com/questions/46819226/how-to-avoid-a-circular-include-involving-a-global-variable/46819268#46819268", "title": "How to avoid a circular #include involving a global variable?", "body": "<p>Add <code>extern</code> in the header file,</p>\n\n<pre><code>// myglobal.h\n#include \"log.h\"\nextern Clog log_file;\n\n// #include \"lib.h\"  DO NOT include this one\nextern Clib main_lib;\n</code></pre>\n\n<p>then define it in the cpp file (log.cpp)</p>\n\n<pre><code> #include \"log.h\"\n Clog log_file;\n</code></pre>\n\n<p>and <code>move</code> the definition of clib also to a cpp file (lib.cpp, for example).</p>\n\n<pre><code> #include \"myglobal.h\"\n\n void Clib::func(void) { log_file &lt;&lt; \"hello\"; }\n</code></pre>\n\n<p>If you cannot move the definition out of the header file, you just need a cpp file to define the <code>Clib main_lib</code>. Other than that, it should be fine as long as you have include guard for all your headers.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1508407928, "creation_date": 1508407928, "answer_id": 46827558, "question_id": 46819226, "link": "https://stackoverflow.com/questions/46819226/how-to-avoid-a-circular-include-involving-a-global-variable/46827558#46827558", "title": "How to avoid a circular #include involving a global variable?", "body": "<p>The root problem of your circular #include is circular thinking. In particular, the idea of a global header both defines and depends on your library.</p>\n\n<p>You solve this by <em>not</em> depending on <code>myglobal.h</code> in the implementation of your library. One simple way would be to move <code>CLib::func</code> to <code>lib.cpp</code></p>\n"}, {"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 0, "last_activity_date": 1508511088, "creation_date": 1508511088, "answer_id": 46851758, "question_id": 46819226, "link": "https://stackoverflow.com/questions/46819226/how-to-avoid-a-circular-include-involving-a-global-variable/46851758#46851758", "title": "How to avoid a circular #include involving a global variable?", "body": "<p>First, as stated in CS Pei's answer, note that you need include guards, and that variable declarations in header files need <code>extern</code> (and a separate definition in a source file).  In C++17, you can <a href=\"http://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">use <code>inline</code> instead</a> and let the linker sort it out.</p>\n\n<p>Meanwhile, there are a few strategies to choose from based on your use case.</p>\n\n<h1>Forward-declare <code>Clib</code></h1>\n\n<p>Have <code>myglobal.h</code> merely declare <code>Clib</code>, not define it:</p>\n\n<pre><code>#include \"log.h\"\nextern Clog log_file;\n\nclass Clib;\nextern Clib main_lib;\n</code></pre>\n\n<p>Then it can be <code>#include</code>d by <code>lib.h</code> without issue.  However, clients which <code>#include\"myglobal.h\"</code> alone will not be able to <em>use</em> <code>main_lib</code>, since its type is incomplete.</p>\n\n<h1>Put <code>log_file</code> in its own header</h1>\n\n<p>Since <code>Clib</code> depends not only on <code>Clog</code> but <code>log_file</code>, it is plainly at a higher level of interface.  Formalize this by creating <code>globallog.h</code>:</p>\n\n<pre><code>#include \"log.h\"\nextern Clog log_file;\n</code></pre>\n\n<p>Then <code>lib.h</code> can include that without circularity:</p>\n\n<pre><code>#include \"globallog.h\"\n\nclass Clib\n{\n  void func(void) { log_file &lt;&lt; \"hello\"; }\n}\n</code></pre>\n\n<p>Finally, <code>myglobal.h</code> includes that and adds <code>main_lib</code>:</p>\n\n<pre><code>#include \"globallog.h\"  // optional: clarifies that log_file is made available\n#include \"lib.h\"\nextern Clib main_lib;\n</code></pre>\n\n<h1>Declare global objects with their classes</h1>\n\n<h2>Declare <code>main_lib</code> in <code>lib.h</code></h2>\n\n<p>If no file wants <code>lib.h</code> without (your current) <code>myglobal.h</code> (perhaps because the only <code>Clib</code> used is <code>main_lib</code>), you can just move the declaration of <code>main_lib</code> into <code>lib.h</code>:</p>\n\n<pre><code>#include \"myglobal.h\"  // only log_file now\n\nclass Clib\n{\n  void func(void) { log_file &lt;&lt; \"hello\"; }\n}\n\nextern Clib main_lib;\n</code></pre>\n\n<p>Note that this is a variation of the previous \"<code>log_file</code> in its own header\" strategy where <code>log_file</code> is instead the only thing <em>left</em> in the existing header.</p>\n\n<h2>Declare <code>log_file</code> in <code>log.h</code></h2>\n\n<p>Symmetrically, if no file wants <code>log.h</code> without using <code>log_file</code>, declare it there and leave <code>myglobal.h</code> with just <code>main_lib</code>:</p>\n\n<pre><code>#include \"lib.h\"\nextern Clib main_lib;\n</code></pre>\n\n<p>Then <code>lib.h</code> is just</p>\n\n<pre><code>#include \"log.h\"\n\nclass Clib\n{\n  void func(void) { log_file &lt;&lt; \"hello\"; }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5570725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9346dac77b63a7346112740492ede371?s=128&d=identicon&r=PG&f=1", "display_name": "mono.libre", "link": "https://stackoverflow.com/users/5570725/mono-libre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1508511088, "creation_date": 1508360722, "last_edit_date": 1508384089, "question_id": 46819226, "link": "https://stackoverflow.com/questions/46819226/how-to-avoid-a-circular-include-involving-a-global-variable", "title": "How to avoid a circular #include involving a global variable?", "body": "<p>I have a header <code>myglobal.h</code> that declares two global objects:</p>\n\n<pre><code>#include \"log.h\"  // defines Clog\nClog log_file;\n\n#include \"lib.h\"\nClib main_lib;\n</code></pre>\n\n<p>However, my <code>lib.h</code> also uses the global header:</p>\n\n<pre><code>#include \"myglobal.h\"  // error: circular #include\n\nclass Clib\n{\n  void func(void) { log_file &lt;&lt; \"hello\"; }\n}\n</code></pre>\n\n<p>How do I write these headers to avoid the <code>#include</code> loop?</p>\n"}, {"tags": ["c++", "cuda", "visual-studio-2017", "nvcc"], "comments": [{"owner": {"reputation": 123, "user_id": 8122035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-BNfFqD_XK2I/AAAAAAAAAAI/AAAAAAAAACU/0whXpAbdoHs/photo.jpg?sz=128", "display_name": "Mishal Shah", "link": "https://stackoverflow.com/users/8122035/mishal-shah"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508360952, "post_id": 46819192, "comment_id": 80585898, "body": "Which feature? may you please elaborate?"}, {"owner": {"reputation": 123, "user_id": 8122035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-BNfFqD_XK2I/AAAAAAAAAAI/AAAAAAAAACU/0whXpAbdoHs/photo.jpg?sz=128", "display_name": "Mishal Shah", "link": "https://stackoverflow.com/users/8122035/mishal-shah"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508361024, "post_id": 46819192, "comment_id": 80585929, "body": "No I don&#39;t think its duplicate of that answer, I went through it, couldn&#39;t find the solution"}, {"owner": {"reputation": 123, "user_id": 8122035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-BNfFqD_XK2I/AAAAAAAAAAI/AAAAAAAAACU/0whXpAbdoHs/photo.jpg?sz=128", "display_name": "Mishal Shah", "link": "https://stackoverflow.com/users/8122035/mishal-shah"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508361068, "post_id": 46819192, "comment_id": 80585951, "body": "Which <i>option</i> ?  I tried a lot of stuff, nothing worked"}], "owner": {"reputation": 123, "user_id": 8122035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-BNfFqD_XK2I/AAAAAAAAAAI/AAAAAAAAACU/0whXpAbdoHs/photo.jpg?sz=128", "display_name": "Mishal Shah", "link": "https://stackoverflow.com/users/8122035/mishal-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "closed_date": 1508382543, "answer_count": 0, "score": 0, "last_activity_date": 1508360577, "creation_date": 1508360577, "question_id": 46819192, "link": "https://stackoverflow.com/questions/46819192/cl-exe-not-found-in-visual-studio-2017", "closed_reason": "Duplicate", "title": "cl.exe not found in Visual Studio 2017", "body": "<p>I installed Visual Studio for Nvidia CUDA Programming, though upon running</p>\n\n<pre><code>nvcc -o 1 hello.cu\n</code></pre>\n\n<p>I get an error saying</p>\n\n<pre><code>nvcc fatal   : Cannot find compiler 'cl.exe' in PATH\n</code></pre>\n\n<p>I searched in This PC/Windows(C:)/Program Files(x86)/Microsoft Visual Studio/2017/Community/VC\nbut there is no bin folder here, neither is cl.exe executable</p>\n"}, {"tags": ["c++", "multithreading", "c++98"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1508360201, "post_id": 46819052, "comment_id": 80585546, "body": "so what&#39;s the actual question? is <code>std::cout</code> thread safe in C++98? no. it wasn&#39;t written at the time to be thread safe. C++98 knows nothing about threads. it&#39;s not &quot;thread safe&quot;, it&#39;s simply non existent for the standard presective."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1508360229, "post_id": 46819052, "comment_id": 80585555, "body": "C++98 has <i>no</i> concept/notion of threads. So whatever you do in that world (as far as threads go) is inherently &#39;implementation defined&#39; (or worse). So the answer to your question has to be &quot;no&quot;."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 4, "creation_date": 1508360290, "post_id": 46819052, "comment_id": 80585584, "body": "To be explicit: Choose an implementation you are asking about. This is outside the scope of C++98 itself."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508360485, "post_id": 46819052, "comment_id": 80585673, "body": "@BaummitAugen you are right, but acutally it was just a general question with no particular use case in mind. Tbh &quot;It is implementation defined&quot; is already a satisfactory answer for me. I knew there is no guarantee, but I was missing the correct term."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508360575, "post_id": 46819052, "comment_id": 80585723, "body": "@BaummitAugen I could change the question to &quot;Do you know any implementation where the two outputs can get interleaved?&quot; but that would probably be too broad and lead nowhere"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508360683, "post_id": 46819052, "comment_id": 80585769, "body": "I agree. Although the question isn&#39;t specific enough as it stands either. The entire question is outside the scope of the standard you are asking about."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1508360766, "post_id": 46819052, "comment_id": 80585808, "body": "Interleaved output isn&#39;t the worst case. The internal state of <code>cout</code> could get mangled and undefined behavior results."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508360915, "post_id": 46819052, "comment_id": 80585881, "body": "@BaummitAugen sometimes I almost know the answer, but have serious doubts and need some confirmation. To be really honest, whether it makes a well received question for SO I dont care too much in such cases (but of course I do highly appreciate any clarification and helpful comments)"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1508361269, "post_id": 46819052, "comment_id": 80586051, "body": "What you can do is put a clarifier like &quot;Is writing a single string to cout thread safe in C++98 <i>in typical implementations</i>&quot;. Of course, this will just result in language lawyers telling you that there is no such thing as a <i>typical implementation</i> in the standard, etc, etc - but at least you might suss out a few answers from the more practical and less legally inclined posters."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1527420661, "post_id": 46819052, "comment_id": 88114173, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/6374264/608639\">Is cout synchronized/thread-safe?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508361846, "post_id": 46819327, "comment_id": 80586399, "body": "changed the question slightly to make it less suspectible to language lawyer arguments. I think the edit doesnt change the fact that your answer fits nicely. It is much more than what i was hoping for btw :)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1508366559, "post_id": 46819327, "comment_id": 80588135, "body": "&quot;After all, using that stream for output is very common&quot;, and in threaded environments is very common to see the odd message scrambled up (typical use case of cout is for trace / debug so nobody profoundly cares about the odd mess)"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1508367223, "post_id": 46819327, "comment_id": 80588328, "body": "@pm100 - agreed. My experience is that <code>std::cout</code> usually offers approximately the &quot;single string is atomic guarantee&quot;, but separate values inserted on the same line are <i>often</i> mixed. It actually means that <code>printf</code> gives a better experience since the entire line generally gets sent down at once. I often also see a lot of interleaving between <code>stdout</code> and <code>stderr</code>  when they are both going to the same place: even when each is atomic, terminal implementations often like to mix them unpredictably."}, {"owner": {"reputation": 21422, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1508367503, "post_id": 46819327, "comment_id": 80588416, "body": "@BeeOnRope: It&#39;s not the terminal that&#39;s to blame - it knows nothing about stdout vs stderr. Usually it will be the buffering in the standard library that is responsible for this behaviour."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 21422, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1508368019, "post_id": 46819327, "comment_id": 80588540, "body": "@psmears - I don&#39;t agree, but maybe I should have said &quot;the shell&quot; not the terminal. The C++ process itself sees two totally different files, <code>stdout</code> and <code>stderr</code>: they aren&#39;t linked at all. The C++ library might write two totally consistent streams to each file (indeed, perhaps there are only two threads: one writing to <code>stdout</code> and one to `stderr), but because both are going to the same <i>display</i> they get interleaved. It&#39;s up to the shell to mux them together at that point, isn&#39;t it?"}, {"owner": {"reputation": 21422, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1508368688, "post_id": 46819327, "comment_id": 80588719, "body": "@BeeOnRope: No, &quot;the shell&quot; would also be wrong. At the kernel level, a C/C++ process will see two file descriptors, 1 and 2, which (via various layers) it maps to objects it calls <code>stdout</code> and <code>stderr</code> respectively. As a general rule both file descriptors 1 and 2 will be opened on the same device, the terminal. In that case, kernel <code>write()</code> calls to either 1 or 2 will be serialised correctly. The issue is that typically the standard library will do buffering separately on each of <code>stdout</code> and <code>stderr</code>, which means that what the main program wrote sequentially can end up interleaved."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 21422, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1508368878, "post_id": 46819327, "comment_id": 80588767, "body": "@psmears - OK, I think we agree here then. From the point of view of the standard library, however, it seems completely reasonable to implement buffering separately on each file - they are after all, separate files, and I wouldn&#39;t expect independent output to two <i>separate</i> streams to have any particular relationship (indeed, it&#39;s common for <code>stderr</code> to use a different, more &quot;immediate&quot; buffering strategy so that output occurs earlier). All we can ask of the standard library, I think, is that output to separate, independent files appears consistent."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1508369009, "post_id": 46819327, "comment_id": 80588801, "body": "The problem then is that in the case that both streams are going to the <i>same place</i>, like the screen of the user&#39;s terminal, some process needs to read <i>independently</i> from both files and &quot;mux&quot; the output together. Not all terminals do this in the same way, but the output often ends up interleaved. A typical example is that a terminal will have two threads reading from the child&#39;s <code>stderr</code> and <code>stdout</code> and when there is output just take a lock and write to the shared &quot;screen buffer&quot; or whatever abstraction they have for the screen."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1508369101, "post_id": 46819327, "comment_id": 80588825, "body": "Depending on exactly the size of the <i>read buffers in the consuming process</i> and the various pipe sizes and such it may result in worse interleaving than you&#39;d expect. I&#39;m not saying the any particular terminal is doing the wrong thing BTW: its just that the terminal is in the hard spot of muxing the two streams, which the standard library in the generating process didn&#39;t even have to worry about. There is a tradeoff between prompt output and interleaving: some users might want line buffering, but not at the cost of indefinitely delaying output, etc."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": true, "score": 6, "last_activity_date": 1508366000, "last_edit_date": 1508366000, "creation_date": 1508361167, "answer_id": 46819327, "question_id": 46819052, "link": "https://stackoverflow.com/questions/46819052/is-writing-a-single-string-to-cout-thread-safe-in-c98/46819327#46819327", "title": "Is writing a single string to cout &quot;thread safe&quot; in C++98", "body": "<p>As has been pointed out in the comments, C++98 doesn't offer any notion of threads in the standard, so you can't answer this question by reference to the standard.</p>\n\n<p>However any reasonable C++98 <em>implementation</em> intended to be used with threads (i.e., most of them outside of some embedded markets) would almost certainly offer at least a more-or-less <em>safe</em> <code>std::cout</code> for \"plain\" use cases. After all, using that stream for output is very common, and using it across threads in a threaded program will also be very common.</p>\n\n<p>Unfortunately, that's about as much as you can say with specificity. Note, in particular, that I'm not even <em>defining</em> \"safe\" in a particular way. At least you probably expect that it won't crash, corrupt your program or produce output \"out of thin air\". Beyond that, it depends. </p>\n\n<h1>What Does it Depend On</h1>\n\n<p>The next step is to check the implementation itself. Hopefully you have the source<sup>1</sup>! </p>\n\n<p>Typically you'll find that the implementation has some thread-agnostic code (e.g,. copying into stack-local buffers) and at some point locks and then manipulates shared state inside the <code>std::cout</code> object. When and where it locks is important.</p>\n\n<h2>Single String</h2>\n\n<p>For example, one would hope that the output of a single item on two threads, like <code>std::cout &lt;&lt; \"AAAA\"</code> on thread 1 and <code>std::cout &lt;&lt; \"BBBB\"</code> on thread 2 would at least result in \"not-interleaved\" output of <code>AAAABBBB</code> or <code>BBBBAAAA</code> but never <code>BBAAAABB</code> or something like that. This <em>may not be true</em> for implementations that buffer in certain ways! For example, the implementation may lock, then copy as much into an internal buffer as possible and if full, output, and then unlock and proceed again.</p>\n\n<p>Keep in mind that even the <code>std::cout</code> object is totally locked (i.e., essentially the entire <code>operator&lt;&lt;(const char *)</code> is run under a lock), you might see interleaving of even single string output when it is run concurrently with other code that is writing to <code>stdout</code> but through a mechanism other than <code>std::cout</code> - such as <code>printf()</code>.</p>\n\n<p>In this case the C/C++ runtimes generally won't share any lock, and you'll be relying on the locking of the underlying <code>write()</code>-type call offered by the OS. Although this call is fully locked and thread-safe, it might not write the entire string in one shot (this is common, for example, when an intermediate buffer fills up such as when <a href=\"https://unix.stackexchange.com/a/68157/87246\">writing to a pipe</a>).</p>\n\n<h2>Multiple Operators</h2>\n\n<p>The main problem with the stream interface is multiple operators. Something like <code>std::cout &lt;&lt; \"AAA\" &lt;&lt; \"BBB\" ...</code> is almost always turned into multiple calls on the shared <code>std::cout</code> object. Without external locking on your part, these are free to be interleaved in any way with other threads. Critically, this pretty much means the stream manipulators in <code>iomanip</code> are impossible to use safely. Something like <code>std::cout &lt;&lt; std::hex &lt;&lt; 123 &lt;&lt; std::dec</code> will modify the stream globally, and some other thread that doesn't want <code>hex</code> output might run at the wrong time and get it anyways. Furthermore, the fact that the stream formatting state and flags can change in the <em>middle</em> of an operation may produce some weird, wonderful or downright terrible results.  </p>\n\n<hr>\n\n<p><sup>1</sup> Certainly the source is available for open source runtimes like libstc++ (used by gcc) and libc++ (used by default by LLVM on most non-Linux platforms). Microsoft appears to be providing the source for their C runtime as well.</p>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 1, "accepted_answer_id": 46819327, "answer_count": 1, "score": 3, "last_activity_date": 1508366000, "creation_date": 1508359965, "last_edit_date": 1508361724, "question_id": 46819052, "link": "https://stackoverflow.com/questions/46819052/is-writing-a-single-string-to-cout-thread-safe-in-c98", "title": "Is writing a single string to cout &quot;thread safe&quot; in C++98", "body": "<p>I know that stricly speaking in C++98 nothing is thread-safe, because in the standard there are no threads prior to C++11. However, in practice threads have been used in C++ long before C++11.</p>\n\n<p>So lets say two <code>pthreads</code> concurrently call this:</p>\n\n<pre><code>void printSomething(){\n    std::cout &lt;&lt; \"something\\n\";\n}\n</code></pre>\n\n<p>What can cause the two outputs to be interleaved? Or will I get in practice always two lines that contain \"something\"?</p>\n\n<p>I ask this because <a href=\"https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls#46818523\">this question</a> made me wonder and I found <a href=\"https://stackoverflow.com/a/15034536/4117728\">this answer</a> stating:</p>\n\n<blockquote>\n  <p>... in C++11, std::cout is thread-safe.</p>\n</blockquote>\n\n<p>but <a href=\"https://stackoverflow.com/a/6374525/4117728\">this answer</a> presents an example along the line of </p>\n\n<pre><code>std::cout &lt;&lt; \"aaaaaaaaaa\" &lt;&lt; \"bbbbbbbbbb\";\n</code></pre>\n\n<p>and draws the conclusion that in C++98, two thread executing this might have interleaving output, but I couldnt find anything about two threads calling the <code>operator&lt;&lt;</code> only once.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 7, "creation_date": 1508359500, "post_id": 46818923, "comment_id": 80585210, "body": "When you move a^2 to the right hand side of the equation it should be negative. In other words, you are adding a^2 when you should be subtracting a^2."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1508359641, "post_id": 46818923, "comment_id": 80585279, "body": "&quot;but I keep getting weirdly large answers&quot; - such as? Care to share? Examples should be <i>part of the question</i>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1508360092, "post_id": 46818923, "comment_id": 80585509, "body": "Please don&#39;t add &quot;SOLVED&quot; into the title. Just accept the answer that helped you."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7589808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RJJ2ZD4IfLo/AAAAAAAAAAI/AAAAAAAAAH4/UztqVm60j34/photo.jpg?sz=128", "display_name": "Dan G", "link": "https://stackoverflow.com/users/7589808/dan-g"}, "edited": false, "score": 0, "creation_date": 1508359800, "post_id": 46818991, "comment_id": 80585359, "body": "Ah! thanks!  I&#39;m a huge dope, I appreciate that you took the time out of your day to help with my silly mistake ^-^"}], "tags": [], "owner": {"reputation": 71, "user_id": 4982701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd75c1d7afb698d820c98d7975dca27c?s=128&d=identicon&r=PG&f=1", "display_name": "Drist", "link": "https://stackoverflow.com/users/4982701/drist"}, "is_accepted": false, "score": 2, "last_activity_date": 1508359687, "creation_date": 1508359687, "answer_id": 46818991, "question_id": 46818923, "link": "https://stackoverflow.com/questions/46818923/code-to-calculate-pythagorean-theorem/46818991#46818991", "title": "Code to calculate pythagorean theorem", "body": "<p>It looks to me like you have a sign error.</p>\n\n<p>If you check your algebra you will find that</p>\n\n<p>a^2 + b^2 = c^2</p>\n\n<p>means</p>\n\n<p>b^2 = c^2 - a^2.</p>\n"}, {"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 2, "last_activity_date": 1508361589, "last_edit_date": 1508361589, "creation_date": 1508360861, "answer_id": 46819256, "question_id": 46818923, "link": "https://stackoverflow.com/questions/46818923/code-to-calculate-pythagorean-theorem/46819256#46819256", "title": "Code to calculate pythagorean theorem", "body": "<p>There are some problems in your code, besides the correct algebra formula already spotted in Drist's answer.</p>\n\n<p>For example, in general it's wrong to compare floating-point numbers with a simple <code>x == y</code>; it's better to use a kind of \"fuzzy\" comparison with a tolerance.</p>\n\n<p>Moreover, computing Pythagoras's theorem simply applying the classical math formula is error prone, as squaring e.g. <code>a*a</code> can overflow. A better approach is described <a href=\"https://www.johndcook.com/blog/2010/06/02/whats-so-hard-about-finding-a-hypotenuse/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Assuming c is the hypotenuse (<code>c &gt; a</code>), you may do:</p>\n\n<pre><code>// b = sqrt(c*c - a*a);\ndouble r = a / c;\ndouble b = c * sqrt(1.0 - r*r);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7589808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RJJ2ZD4IfLo/AAAAAAAAAAI/AAAAAAAAAH4/UztqVm60j34/photo.jpg?sz=128", "display_name": "Dan G", "link": "https://stackoverflow.com/users/7589808/dan-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2600, "favorite_count": 0, "closed_date": 1508361451, "answer_count": 2, "score": -1, "last_activity_date": 1508361589, "creation_date": 1508359407, "last_edit_date": 1508360021, "question_id": 46818923, "link": "https://stackoverflow.com/questions/46818923/code-to-calculate-pythagorean-theorem", "closed_reason": "Not suitable for this site", "title": "Code to calculate pythagorean theorem", "body": "<p>I'm working on an assignment with C++. Basically I take in two sides, assuming their the smaller side or the hypotenuse, then spit out the remaining side using functions. Seems easy enough, and I'm 99% sure my math is right for the function portion, but I keep getting weirdly large answers.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cmath&gt;\nusing namespace std;\n\ndouble otherSideLength(double, double);\n\nint main() {\n   double a_small_side;\n   double hypotenuse;\n   double swapStore = 0;\n   double otherSide = 0;\n   cin &gt;&gt; a_small_side;\n   cin &gt;&gt; hypotenuse;\n   if(a_small_side == hypotenuse){\n      cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n      cout &lt;&lt; \"0\";\n   }\n   if(a_small_side &lt; hypotenuse){\n      otherSide = otherSideLength(a_small_side, hypotenuse);\n      cout &lt;&lt; otherSide;\n   }\n   if(a_small_side &gt; hypotenuse){\n      swapStore = a_small_side;\n      a_small_side = hypotenuse;\n      hypotenuse = swapStore;\n      otherSide = otherSideLength(a_small_side, hypotenuse);\n      cout &lt;&lt; otherSide;\n   }\n}\n\ndouble otherSideLength(double a_small_side, double hypotenuse){\n   //a^2+b^2=c^2,\n   //b^2 = c^2 + a^2\n   //b = sqrt(c^2 + a^2)\ndouble b = sqrt(pow(hypotenuse, 2) + pow(a_small_side, 2));\nreturn b;\n}\n</code></pre>\n\n<p>If someone wants to take a quick peek at this that'd be awesome.</p>\n"}, {"tags": ["c++", "c++11", "constexpr"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1508410220, "post_id": 46818864, "comment_id": 80603578, "body": "This is not really an upcast."}], "answers": [{"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 3, "last_activity_date": 1508409841, "creation_date": 1508409841, "answer_id": 46828101, "question_id": 46818864, "link": "https://stackoverflow.com/questions/46818864/static-cast-of-member-pointer-in-constexpr-context-on-g/46828101#46828101", "title": "static_cast of member pointer in constexpr context on g++", "body": "<p>GCC presumably misapprehends <a href=\"http://eel.is/c++draft/expr.static.cast#12\" rel=\"nofollow noreferrer\">[expr.static.cast]/12</a>, which permits your cast and notes that</p>\n\n<blockquote>\n  <p>If class <code>B</code> contains the original member, or is a base or derived class of the class containing the original member, the resulting pointer to member points to the original member. Otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>Since <code>Base</code> is indeed a base of the class containing the member, the behaviour should be defined, and the constructor call a constant expression.</p>\n"}], "owner": {"reputation": 165, "user_id": 7674036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc24be819777721aaf238b8d369e07a?s=128&d=identicon&r=PG&f=1", "display_name": "jo-art", "link": "https://stackoverflow.com/users/7674036/jo-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 1, "accepted_answer_id": 46828101, "answer_count": 1, "score": 11, "last_activity_date": 1508409841, "creation_date": 1508359155, "question_id": 46818864, "link": "https://stackoverflow.com/questions/46818864/static-cast-of-member-pointer-in-constexpr-context-on-g", "title": "static_cast of member pointer in constexpr context on g++", "body": "<p>I came across a problem with g++ with upcasting of a member pointer in a constexpr context using static_cast. See code example.</p>\n\n<p>When compiling with g++ version 6.3 and 7.0 they give a compilation error saying reinterpret_cast is not a constant expression.\nWhile clang version 4.0 gives no error, which I think is correct since there is no reinterpret_cast here.</p>\n\n<p>Is this a bug in g++ or clang? What is the correct behavior?</p>\n\n<pre><code>struct Base {};\n\nstruct Derived : Base\n{\n  int i;\n};\n\nstruct Ptr\n{\n  constexpr Ptr(int Derived::* p) : p(static_cast&lt;int Base::*&gt;(p)){}\n  int Base::* p;\n};\n\nconstexpr Ptr constexpr_ptr(&amp;Derived::i);\n</code></pre>\n\n<p>Compiler output</p>\n\n<pre><code>g++ -c -std=c++14 test.cpp \ntest.cpp:17:40:   in constexpr expansion of \u2018Ptr(&amp;Derived::i)\u2019\ntest.cpp:11:41: error: a reinterpret_cast is not a constant expression\nconstexpr Ptr(int Derived::* p) : p(static_cast&lt;int Base::*&gt;(p)){}\n                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n"}, {"tags": ["c++", "winapi", "c++builder"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6358289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-YdZPxS1dVb0/AAAAAAAAAAI/AAAAAAAAAHk/ea91UvevqO4/photo.jpg?sz=128", "display_name": "Piero Bird", "link": "https://stackoverflow.com/users/6358289/piero-bird"}, "edited": false, "score": 0, "creation_date": 1508371561, "post_id": 46820690, "comment_id": 80589446, "body": "Thank you, I got it in my head it had something to do with the null terminator. Upvoting your answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1508369102, "creation_date": 1508369102, "answer_id": 46820690, "question_id": 46818784, "link": "https://stackoverflow.com/questions/46818784/why-does-rad-studio-createblobstream-with-cryptunprotectdata-return-extra-charac/46820690#46820690", "title": "Why does RAD Studio CreateBlobStream with CryptUnprotectData return extra characters?", "body": "<p>Your reading and decrypting calls operate on raw bytes only, they know nothing about strings, and don't care about them.  The null-terminator you are adding to <code>pbDataInput</code> is never used, so get rid of it:</p>\n\n<pre><code>//Get our blob size\nint size = Stream2-&gt;Size;\n//Create our buffer\nchar* pbDataInput = new char[size];\n//Write to our buffer\nStream2-&gt;ReadBuffer(pbDataInput, size);\nDWORD cbDataInput = size;\n...\ndelete[] pbDataInput;\ndelete Stream2;\n</code></pre>\n\n<p>Now, when assigning <code>pbData</code> to <code>password</code>, you are casting <code>pbData</code> to <code>char*</code>, so the <code>UnicodeString</code> constructor interprets the data as a null-terminated ANSI string and will convert it to UTF-16 using the system default ANSI codepage, which is potentially a lossy conversion for non-ASCII characters. Is that what you really want?</p>\n\n<p>If so, and if the decrypted data is not actually null-terminated, you have to specify the number of characters to the <code>UnicodeString</code> constructor:</p>\n\n<pre><code>UnicodeString password( (char*)DataVerify.pbData, DataVerify.cbData );\n</code></pre>\n\n<p>On the other hand, if the decrypted output is already in UTF-16, you need to cast <code>pbData</code> to <code>wchar_t*</code> instead:</p>\n\n<pre><code>UnicodeString password = (wchar_t*)DataVerify.pbData;\n</code></pre>\n\n<p>Or, if not null-terminated:</p>\n\n<pre><code>UnicodeString password( (wchar_t*)DataVerify.pbData, DataVerify.cbData / sizeof(wchar_t) );\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6358289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-YdZPxS1dVb0/AAAAAAAAAAI/AAAAAAAAAHk/ea91UvevqO4/photo.jpg?sz=128", "display_name": "Piero Bird", "link": "https://stackoverflow.com/users/6358289/piero-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46820690, "answer_count": 1, "score": 0, "last_activity_date": 1508369102, "creation_date": 1508358839, "last_edit_date": 1508368120, "question_id": 46818784, "link": "https://stackoverflow.com/questions/46818784/why-does-rad-studio-createblobstream-with-cryptunprotectdata-return-extra-charac", "title": "Why does RAD Studio CreateBlobStream with CryptUnprotectData return extra characters?", "body": "<p>I'm writing a recovery app that pulls passwords from Chrome.  It has a GUI, so I've used their SQLite wrapper, which uses both SQLConnection and SQLQuery. Here's a snip of my code:</p>\n\n<pre><code>//Create our blob stream\nTStream *Stream2 = SQLQuery1-&gt;CreateBlobStream(SQLQuery1-&gt;FieldByName(\"password_value\"), bmRead);\n//Get our blob size\nint size = Stream2-&gt;Size;\n//Create our buffer\nchar* pbDataInput = new char[size+1];\n//Adding null terminator to buffer\nmemset(pbDataInput, 0x00, sizeof(char)*(size+1));\n//Write to our buffer\nStream2-&gt;ReadBuffer(pbDataInput, size);\nDWORD cbDataInput = size;\n\nDataOut.pbData = pbDataInput;\nDataOut.cbData = cbDataInput;\n\nLPWSTR pDescrOut = NULL;\n//Decrypt password\nCryptUnprotectData( &amp;DataOut,\n        &amp;pDescrOut,\n        NULL,\n        NULL,\n        NULL,\n        0,\n        &amp;DataVerify);\n\n//Output password\nUnicodeString password = (UnicodeString)(char*)DataVerify.pbData;\npasswordgrid-&gt;Cells[2][i] = password;\n</code></pre>\n\n<p>The output data looks fine, except it behaves as if something went wrong with my null terminator. Here's what output looks like on every line:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IzAYV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IzAYV.png\" alt=\"Output Data With Extra Chars at end of Password\"></a></p>\n\n<p><strong>I've Read</strong></p>\n\n<p>Windows doc for <code>CryptUnprotectData</code>:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa382377.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa382377.aspx</a></p>\n\n<p>Embarcadero documentation for <code>CreateBlobStream</code>:</p>\n\n<p><a href=\"http://docwiki.embarcadero.com/Libraries/en/Data.DB.TDataSet.CreateBlobStream\" rel=\"nofollow noreferrer\">http://docwiki.embarcadero.com/Libraries/en/Data.DB.TDataSet.CreateBlobStream</a></p>\n\n<p>memset:</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstring/memset/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstring/memset/</a></p>\n"}, {"tags": ["c++", "sorting", "iterator", "doubly-linked-list", "sortedlist"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508358997, "post_id": 46818725, "comment_id": 80584972, "body": "unrelated: You may get some performance advantages by taking advantage of the <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Member Initializer List</a>. It will eliminate the need to default construct <code>T</code> before assigning in the constructor&#39;s body."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1508359047, "post_id": 46818725, "comment_id": 80584995, "body": "I&#39;d probably use <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a> and <a href=\"http://en.cppreference.com/w/cpp/algorithm/upper_bound\" rel=\"nofollow noreferrer\"><code>std::upper_bound</code></a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508359129, "post_id": 46818725, "comment_id": 80585038, "body": "Related: <code>if (data &lt; front_-&gt;data_)</code> does not check that <code>front_</code> is not <code>nullptr</code> before dereferencing it. The <code>if (front_ == nullptr)</code> that follows hints that this is a very strong, and fatal, possibility."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508359546, "post_id": 46818725, "comment_id": 80585233, "body": "Strongly consider using a loop to iterate through the list and determine where the new item has to go. A single <code>if</code> statement isn&#39;t going to cut it. You want something like <code>while (front_ &amp;&amp; data &lt; front_-&gt;data)</code>, but if you take advantage of and adapt <a href=\"https://stackoverflow.com/questions/12914917/using-pointers-to-remove-item-from-singly-linked-list\">the advice given here</a>, you can chop down the amount of code required dramatically."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1508361112, "post_id": 46818725, "comment_id": 80585977, "body": "@FredLarson <code>upper_bound</code> isn&#39;t terribly efficient if you don&#39;t have random access iterators. It might be better than a linear search, might not. If you are inserting a large number of items relative to the existing size of the list, it would be better to put them at the head or tail and sort afterwards."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1508361206, "post_id": 46818725, "comment_id": 80586024, "body": "@MarkRansom: Valid point. Thank you. In any event, I wouldn&#39;t be likely to roll my own container and sort algorithm."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1508365996, "last_edit_date": 1508365996, "creation_date": 1508359829, "answer_id": 46819023, "question_id": 46818725, "link": "https://stackoverflow.com/questions/46818725/inserting-data-into-a-double-linked-list-and-sorting-the-data/46819023#46819023", "title": "Inserting data into a double linked list and sorting the data", "body": "<p>You are not checking <code>front_</code> for <code>nullptr</code> before accessing <code>front_-&gt;data</code>.</p>\n\n<p>But more importantly, you are not trying to insert the data in any kind of sorted position.  You are inserting only at the very front or very back of the list.  To insert in the middle, you have to scan through the list looking for the correct place to insert at.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>class SortedList{\n\n    struct Node {\n        T data_;\n        Node* prev_;\n        Node* next_;\n\n        Node(const T&amp; data = T{}, Node* pr = nullptr, Node* nx = nullptr)\n            : data_(data), prev_(pr), next_(nx)\n        {\n        }\n    };\n\n    Node* front_;\n    Node* back_;\n    int size_;\n\n    ...\n\n    iterator insert(const T&amp; data);\n};\n\ntypename SortedList&lt;T&gt;::iterator SortedList&lt;T&gt;::insert(const T&amp; data)\n{\n    Node *nn = front_;\n    while ((nn) &amp;&amp; (data &gt;= nn-&gt;data_)) {\n        nn = nn-&gt;next_;\n    }\n\n    Node *n = new Node(data);\n    if (nn)\n    {\n        n-&gt;prev_ = nn-&gt;prev_;\n        n-&gt;next_ = nn;\n        if (nn-&gt;prev_) nn-&gt;prev_-&gt;next = n;\n        nn-&gt;prev = n;\n    }\n    else\n    {\n        n-&gt;prev_ = back_;\n        if (back_) back_-&gt;next_ = n;\n        back_ = n;\n    }\n\n    if (front_ == nn) front_ = n;\n\n    ++size_;\n\n    return iterator(n);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1830, "user_id": 3145221, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/fd655543ed840b12f1a96ef3cf6bc963?s=128&d=identicon&r=PG&f=1", "display_name": "jpcgt", "link": "https://stackoverflow.com/users/3145221/jpcgt"}, "edited": false, "score": 0, "creation_date": 1508363447, "post_id": 46819141, "comment_id": 80587112, "body": "This is not really an answer, please comment to the question instead next time."}], "tags": [], "owner": {"reputation": 125, "user_id": 4210503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GyLbw.gif?s=128&g=1", "display_name": "flounder", "link": "https://stackoverflow.com/users/4210503/flounder"}, "is_accepted": false, "score": 0, "last_activity_date": 1508360390, "creation_date": 1508360390, "answer_id": 46819141, "question_id": 46818725, "link": "https://stackoverflow.com/questions/46818725/inserting-data-into-a-double-linked-list-and-sorting-the-data/46819141#46819141", "title": "Inserting data into a double linked list and sorting the data", "body": "<p>I did not see any code that searches the list to find where to insert the element.  You have not specified the number of elements you expect to have; the performance of a linear insertion into a sorted list is on the average O(n/2), which leads to the conclusion that you will overall have O(n^2/2) [that's n-squared over 2] which is intolerable if n is, say, 10,000 and irrelevant if n &lt; 10.  I faced this problem 20 years ago with n > 200, on an 8088.  There is a solution that is approximately O(log2(n)), but without knowing n I don't want to spend the time to explain it if it is not relevant.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1508427203, "last_edit_date": 1508427203, "creation_date": 1508360948, "answer_id": 46819282, "question_id": 46818725, "link": "https://stackoverflow.com/questions/46818725/inserting-data-into-a-double-linked-list-and-sorting-the-data/46819282#46819282", "title": "Inserting data into a double linked list and sorting the data", "body": "<p>Your code points to lack of clarity in your thinking.</p>\n\n<p>You have to deal with the following cases:</p>\n\n<ol>\n<li>The list is empty.</li>\n<li>The new data is less than the values of all the items in the list.</li>\n<li>The new data is greater than the values of all the items in the list.</li>\n<li>The new data is in between the lowest and highest values of the items in the list.</li>\n</ol>\n\n<p>Also, your use of \"prev\" and \"next\" seems a bit strange to me. When I think of a doubly linked list, I think of it as:</p>\n\n<pre><code>          front -&gt; next -&gt; next -&gt; next -&gt; nullptr\nnullptr &lt;- prev &lt;- prev &lt;- prev &lt;- back\n</code></pre>\n\n<p>You seem to be using:</p>\n\n<pre><code>          front -&gt; prev -&gt; prev -&gt; prev -&gt; nullptr\nnullptr &lt;- next &lt;- next &lt;- next &lt;- back\n</code></pre>\n\n<p>My answer corresponds to what I think you are using, the second version. If that is incorrect, the usages of \"next\" and \"prev\" need to be updated in a few places.</p>\n\n<h2>Case 1</h2>\n\n<p>Add the following at the start of your function:</p>\n\n<pre><code>if ( front_ == nullptr )\n{\n   Node* n = new Node(data, nullptr, nullptr);\n   front_ = n;\n   back_ = n;\n   return SortedList&lt;T&gt;::iterator(n);\n}\n</code></pre>\n\n<h2>Case 2</h2>\n\n<p>You need:</p>\n\n<pre><code>if ( data &lt; front_-&gt;data_ )\n{\n   Node* n = new Node(data, front_, nullptr);\n   front_-&gt;prev_ = n;\n   return SortedList&lt;T&gt;::iterator(n);\n}\n</code></pre>\n\n<h2>Case 3</h2>\n\n<p>You need:</p>\n\n<pre><code>if ( data &gt; back_-&gt;data_ )\n{\n   Node* n = new Node(data, nullptr, back_);\n   back_-&gt;next_ = n;\n   return SortedList&lt;T&gt;::iterator(n);\n}\n</code></pre>\n\n<h2>Case 4</h2>\n\n<p>You need:</p>\n\n<pre><code>// Find the place where to insert the new Node.\nNode* iter = front_;\nfor ( ; iter != nullptr &amp;&amp; data &lt; iter-&gt;data_; iter = iter-&gt;prev_ );\n\n// Insert the new Node.\nNode* prev = iter-&gt;prev_\nNode* n = new Node(data, iter, prev);\nprev-&gt;next_ = n;\niter-&gt;prev_ = n;\nreturn SortedList&lt;T&gt;::iterator(n);\n</code></pre>\n\n<hr>\n\n<h2>Putting it together:</h2>\n\n<pre><code>typename SortedList&lt;T&gt;::iterator SortedList&lt;T&gt;::insert(const T&amp; data)\n{\n   // Case 1\n   if ( front_ == nullptr )\n   {\n      Node* n = new Node(data, nullptr, nullptr);\n      front_ = n;\n      back_ = n;\n      return SortedList&lt;T&gt;::iterator(n);\n   }\n\n   // Case 2\n   if ( data &lt; front_-&gt;data_ )\n   {\n      Node* n = new Node(data, front_, nullptr);\n      front_-&gt;prev_ = n;\n      return SortedList&lt;T&gt;::iterator(n);\n   }\n\n   // Case 3\n   if ( data &gt; back_-&gt;data_ )\n   {\n      Node* n = new Node(data, nullptr, back_);\n      back_-&gt;next_ = n;\n      return SortedList&lt;T&gt;::iterator(n);\n   }\n\n   // Case 4\n\n   // Find the place where to insert the new Node.\n   Node* iter = front_;\n   for ( ; iter != nullptr &amp;&amp; data &lt; iter-&gt;data_; iter = iter-&gt;prev_ );\n\n   // Insert the new Node.\n   Node* prev = iter-&gt;prev_\n   Node* n = new Node(data, iter, prev);\n   prev-&gt;next_ = n;\n   iter-&gt;prev_ = n;\n   return SortedList&lt;T&gt;::iterator(n);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4521909, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/776177dbcd27340b49478a9e3f564114?s=128&d=identicon&r=PG&f=1", "display_name": "Adi", "link": "https://stackoverflow.com/users/4521909/adi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 46819023, "answer_count": 3, "score": 0, "last_activity_date": 1508427203, "creation_date": 1508358604, "question_id": 46818725, "link": "https://stackoverflow.com/questions/46818725/inserting-data-into-a-double-linked-list-and-sorting-the-data", "title": "Inserting data into a double linked list and sorting the data", "body": "<p>I would like to insert the data in a sorted manner in a sorted linked list. I am able to insert the data but it is not sorted. Can anyone help me as to what i am doing wrong?\nHere is my function:</p>\n\n<pre><code>typename SortedList&lt;T&gt;::iterator SortedList&lt;T&gt;::insert(const T&amp; data) {\n\n\nif (data &lt; front_-&gt;data_) {\n    Node* n = new Node(data, front_, nullptr);\n\n    //if empty\n    if (front_ == nullptr) {\n        //make back pt to node\n        back_ = n;\n    }\n    else {\n        //make front's previous point to node\n        front_-&gt;prev_ = n;\n    }\n    //make front point at node\n    front_ = n;\n    return SortedList&lt;T&gt;::iterator(n);\n}\nelse {\n    Node* nn = new Node(data, nullptr, back_);\n\n    //if empty\n    if (front_ == nullptr) {\n        //make front_ pt to node\n        front_ = nn;\n    }\n    else {\n        //make back's next point to node\n        back_-&gt;next_ = nn;\n    }\n    //make back point at node\n    back_ = nn;\n    return SortedList&lt;T&gt;::iterator(nn);\n}\n</code></pre>\n\n<p>And here is my class</p>\n\n<pre><code>class SortedList{\n\nstruct Node {\n    T data_;\n    Node* next_;\n    Node* prev_;\n    Node(const T&amp; data = T{}, Node* nx = nullptr, Node* pr = nullptr) {\n        data_ = data;\n        next_ = nx;\n        prev_ = pr;\n    }\n};\n\nNode* front_;\nNode* back_;\nint sizelist;\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1508357530, "post_id": 46818426, "comment_id": 80584226, "body": "@DreamsOfElectricSheep Thanks (serves me right for trying to watch sports at the same time...)"}], "tags": [], "owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "is_accepted": false, "score": 3, "last_activity_date": 1508357495, "last_edit_date": 1508357495, "creation_date": 1508357420, "answer_id": 46818426, "question_id": 46818409, "link": "https://stackoverflow.com/questions/46818409/error-variable-was-not-declared-in-this-scope-c/46818426#46818426", "title": "error: variable was not declared in this scope c++", "body": "<p><code>m_new</code> is declared inside the while loop. Anything declared inside a <code>{...}</code> block will only exist inside that block. The final use of it:</p>\n\n<pre><code>    cout &lt;&lt; \"The position\" &lt;&lt; n &lt;&lt; \"Of integer\" &lt;&lt; m &lt;&lt; \"is:\" &lt;&lt; m_new.substr(n,1);\n</code></pre>\n\n<p>is outside the block, and therefore the variable no longer exists.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508357853, "post_id": 46818443, "comment_id": 80584373, "body": "The <code>to_string</code> should be called on the value input by the user"}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 4, "last_activity_date": 1508359039, "last_edit_date": 1508359039, "creation_date": 1508357496, "answer_id": 46818443, "question_id": 46818409, "link": "https://stackoverflow.com/questions/46818409/error-variable-was-not-declared-in-this-scope-c/46818443#46818443", "title": "error: variable was not declared in this scope c++", "body": "<p>The <code>m_new</code> variable is local to nested <code>while</code> loop and can't be used outside of its scope. Scope represented by braces <code>{}</code> determines visibility: </p>\n\n<pre><code>int main() {\n    // can't be used here\n    while (true) {\n        // can't be used here\n        while (true) {\n            string m_new = to_string(m);\n            // can only be used here\n        }\n        // can't be used here\n        while (check != 'y'&amp;&amp; check != 'n') {\n            // can't be used here\n        }\n        // can't be used here\n    }\n    // can't be used here\n}\n</code></pre>\n\n<p>Rethink the design to use only one <code>while</code> loop:</p>\n\n<pre><code>int main(){\n    char check = 'y';\n    while (std::cin &amp;&amp; choice == 'y') {\n        int m = 0, n = 10;\n        std::cout &lt;&lt; \"Enter please number m and which digit you want to select\";\n        std::cin &gt;&gt; m &gt;&gt; n;\n        string m_new = to_string(m);\n        // the rest of your code\n        std::cout &lt;&lt; \"Please enter y or n\\n\";\n        std::cin &gt;&gt; check;\n    }\n}\n</code></pre>\n\n<p>Now the <code>m_new</code> variable is visible to everything inside the <code>while</code> loop.</p>\n"}], "owner": {"reputation": 9, "user_id": 8784708, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66cdc41e42d9d8379031a78429c0794e?s=128&d=identicon&r=PG&f=1", "display_name": "soc5", "link": "https://stackoverflow.com/users/8784708/soc5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2151, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1508359039, "creation_date": 1508357321, "last_edit_date": 1508357451, "question_id": 46818409, "link": "https://stackoverflow.com/questions/46818409/error-variable-was-not-declared-in-this-scope-c", "title": "error: variable was not declared in this scope c++", "body": "<p>I want to write the programm, that takes two numbers m and n as input and gives n-th digit of m number. Example m=1358 n=2 Output: 5</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(){\n    while(true){\n        int m = 0,n = 10;\n        char check;\n        while(true){\n            cout &lt;&lt; \"Enter please number m and which digit you want to select\";\n            cin &gt;&gt; m &gt;&gt; n;\n            string m_new = to_string(m);\n            if(m_new.length() &gt; n)\n                break;\n            else\n                cout &lt;&lt; \"n must be less than or equal to m\";    \n        }\n        cout &lt;&lt; \"The position\" &lt;&lt; n &lt;&lt; \"Of integer\" &lt;&lt; m &lt;&lt; \"is:\" &lt;&lt; m_new.substr(n,1);\n        cout &lt;&lt; \"Do you want to try again?(y/n)\\n\";\n        cin &gt;&gt; check;\n        while(check != 'y'&amp;&amp; check != 'n'){\n            cout &lt;&lt;\"Please enter y or n\\n\";\n            cin &gt;&gt; check;\n        }\n        if(check == 'n'){\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But i got an error: 'm_new' was not declared in this scope. Why do I get this error and how to fix it?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1508357389, "post_id": 46818392, "comment_id": 80584152, "body": "Simple - do not start second thread until first is finished."}, {"owner": {"reputation": 83, "user_id": 7627084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9860cb7e7bd551151c8bc9567bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "bananas", "link": "https://stackoverflow.com/users/7627084/bananas"}, "edited": false, "score": 0, "creation_date": 1508357484, "post_id": 46818392, "comment_id": 80584198, "body": "I did that by putting t1.join() after creating thread t1, if that is what you mean. I was told this essentially violates multithreading since you&#39;re creating a thread and then ending it."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1508357540, "post_id": 46818392, "comment_id": 80584231, "body": "From the phrasing, it sounds like this is a homework assignment, so the constraints here have to be met. But in general, if you have requirements to do one task to completion then do another task, that&#39;s not a good fit for multiple threads which, after all, are about simultaneous execution."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1508357607, "post_id": 46818392, "comment_id": 80584256, "body": "@bananas -- in response to your comment, yes, that&#39;s inconsistent with multi-threading, and that&#39;s because the <b>requirements</b> are inconsistent with multi-threading. (My previous comment was written before your latest comment)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1508358319, "post_id": 46818392, "comment_id": 80584600, "body": "sounds like a class assignment where the teacher has got some special trick in mind. Its like the usual junk &#39;do x without using a,b, c&#39; where a,b,c are the correct , normal ways to do things"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1508358363, "post_id": 46818392, "comment_id": 80584630, "body": "if the teacher tells you the answer you should post it here so we can all see what the trick is"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1508358495, "post_id": 46818392, "comment_id": 80584701, "body": "@pm100 -- the answer by Slava is the &quot;trick&quot;. Despite my comments, this is a legitimate solution, and not an absurd requirement."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1508360167, "post_id": 46818392, "comment_id": 80585533, "body": "&quot;<i>not allowed to use mutex locks or block threads</i>&quot; - you know cout writes to stdout, which has a mutex inside right?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1527421383, "post_id": 46818392, "comment_id": 88114389, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6374264/is-cout-synchronized-thread-safe\">Is cout synchronized/thread-safe?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7627084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9860cb7e7bd551151c8bc9567bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "bananas", "link": "https://stackoverflow.com/users/7627084/bananas"}, "edited": false, "score": 0, "creation_date": 1508357635, "post_id": 46818434, "comment_id": 80584266, "body": "Yes I&#39;ve already tried this, but was told that this is not a valid solution as you essentially only have one thread running at a time now instead of multiple threads at the same time."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1508357726, "post_id": 46818434, "comment_id": 80584314, "body": "Not using any additional threads would be a more efficient and elegant solution."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 83, "user_id": 7627084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9860cb7e7bd551151c8bc9567bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "bananas", "link": "https://stackoverflow.com/users/7627084/bananas"}, "edited": false, "score": 0, "creation_date": 1508357750, "post_id": 46818434, "comment_id": 80584323, "body": "@bananas in that case your task cannot be solved, you cannot have two things concurrently and sequential at the same time"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 2, "last_activity_date": 1508357457, "creation_date": 1508357457, "answer_id": 46818434, "question_id": 46818392, "link": "https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls/46818434#46818434", "title": "C++ Multithreading avoiding interleaving during function calls", "body": "<p>Have the main thread wait on <code>t1</code> before starting <code>t2</code>:</p>\n\n<pre><code>thread t1([] {printer(\"*\", 100); });\nt1.join();\nthread t2([] {printer(\"+\", 100); });\nt2.join();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1508358521, "post_id": 46818523, "comment_id": 80584719, "body": "Right, I dislike them too. I don&#39;t think there&#39;s anything wrong with your answer, and I think anyone with cute \u041b\u043e\u0441\u044f\u0448 on its user pic deserves an upvote :-)"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 9, "last_activity_date": 1508357803, "creation_date": 1508357803, "answer_id": 46818523, "question_id": 46818392, "link": "https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls/46818523#46818523", "title": "C++ Multithreading avoiding interleaving during function calls", "body": "<p>Accumulate data and then output as one shot:</p>\n\n<pre><code>void printer(string c, int num)\n{\n     std::string buff;\n     for (int i = 1; i &lt;= num; i++)\n         buff += c;\n     cout &lt;&lt; buff &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1508358513, "post_id": 46818576, "comment_id": 80584712, "body": "@drescherjm actually since c++11 it is fine to use <code>cout</code> simultaneously"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508358558, "post_id": 46818576, "comment_id": 80584736, "body": "@Slava Did you mean to reply to tobi303&#39;s comment to cwschmidt&#39;s answer?"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 11, "last_activity_date": 1508996070, "last_edit_date": 1508996070, "creation_date": 1508357986, "answer_id": 46818576, "question_id": 46818392, "link": "https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls/46818576#46818576", "title": "C++ Multithreading avoiding interleaving during function calls", "body": "<p>Give each <code>printer</code> its own buffer, and print the results from the <code>main</code>:</p>\n\n<pre><code>void printer(ostream&amp; oss, string c, int num) {\n    for (int i = 1; i &lt;= num; i++) {\n        oss &lt;&lt; c;\n    }\n}\n\nint main() {\n    stringstream s1, s2;\n    thread t1([&amp;] {printer(s1, \"*\", 10); });\n    thread t2([&amp;] {printer(s2, \"+\", 10); });\n    t1.join();\n    t2.join();\n    cout &lt;&lt; s1.str() &lt;&lt; s2.str() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><code>main</code> prepares separate output buffers for each thread, lets each thread fill its buffer concurrently, and waits for the threads to complete. Once both threads return, <code>main</code> prints the results to <code>cout</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358446, "post_id": 46818593, "comment_id": 80584675, "body": "If you would have multiple &quot;&lt;&lt;&quot; operator calls, yes ... but if you just have a single one, it does not interleave, otherwise it would be even impossible without locking and slava&#39;s solution will have the very same problem"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358511, "post_id": 46818593, "comment_id": 80584709, "body": "hum.. you maybe right, though i am not convinced ;). have to do some research"}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358586, "post_id": 46818593, "comment_id": 80584754, "body": "Deleting your comment, makes my response meaningless, please research next time, before downvoting ..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358874, "post_id": 46818593, "comment_id": 80584918, "body": "I retracted my downvote, I dont see a problem with deleting my comment and your response isnt meaningless either. It made me reconsider my statement, so it fullfilled its purpose..."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358918, "post_id": 46818593, "comment_id": 80584944, "body": "Yes, sure. But new readers don&#39;t know, why my response is there, without your initial comment ;-)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358979, "post_id": 46818593, "comment_id": 80584965, "body": "comments can come and go at any time, if you think the comment is essential for other readers you should add it to the answer (imho it would add quite some clarification)"}], "tags": [], "owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "is_accepted": false, "score": 3, "last_activity_date": 1508358040, "creation_date": 1508358040, "answer_id": 46818593, "question_id": 46818392, "link": "https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls/46818593#46818593", "title": "C++ Multithreading avoiding interleaving during function calls", "body": "<p>Writing to a stringstream first instead of direct output would solve the problem of synchronization:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;thread&gt;\n\nvoid printer(std::string c, int num) {\n  std::stringstream strm;    \n  for (int i = 1; i &lt;= num; i++) {\n    strm &lt;&lt; c;\n  }\n  std::cout &lt;&lt; strm.str() &lt;&lt; std::endl;\n}\n\nint main() {\n  std::thread t1([] {printer(\"*\", 100); });\n  std::thread t2([] {printer(\"+\", 100); });\n  t1.join();\n  t2.join();\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7627084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9860cb7e7bd551151c8bc9567bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "bananas", "link": "https://stackoverflow.com/users/7627084/bananas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 1, "accepted_answer_id": 46818523, "answer_count": 4, "score": 6, "last_activity_date": 1508996070, "creation_date": 1508357276, "last_edit_date": 1508360661, "question_id": 46818392, "link": "https://stackoverflow.com/questions/46818392/c-multithreading-avoiding-interleaving-during-function-calls", "title": "C++ Multithreading avoiding interleaving during function calls", "body": "<pre><code>int main() {\nthread t1([] {printer(\"*\", 100); });\nthread t2([] {printer(\"+\", 100); });\nt1.join();\nt2.join();\n}\n\nvoid printer(string c, int num)\n{\n  for (int i = 1; i &lt;= num; i++)\n  {\n    cout &lt;&lt; c;\n  }\ncout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Right now this prints something like ****+++** I want it to print *** all in one line then +++ all in one line. We are not allowed to use mutex locks or block thread access to the printer function. The code must still be multithreaded. </p>\n\n<p>Any ideas on how to do this? </p>\n"}, {"tags": ["c++", "mongodb"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 1, "creation_date": 1508363361, "post_id": 46818226, "comment_id": 80587078, "body": "There is a <a href=\"https://docs.mongodb.com/ecosystem/drivers/driver-compatibility-reference/\" rel=\"nofollow noreferrer\">general matrix of all drivers</a> and of course a <a href=\"https://docs.mongodb.com/ecosystem/drivers/driver-compatibility-reference/#reference-compatibility-mongodb-cpp\" rel=\"nofollow noreferrer\">specific C++ section</a>. There really should not be any breaking changes and it&#39;s more &quot;features&quot; ( Decimal128, collation aware methods ) that are introduced. The specific reason it&#39;s &quot;incompatible&quot; is because these &quot;new features&quot; which can be present in the database ( notably Decimal128 BSON ) that is not supported in the driver and would break it."}], "answers": [{"tags": [], "owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "is_accepted": true, "score": 3, "last_activity_date": 1508359636, "creation_date": 1508359636, "answer_id": 46818981, "question_id": 46818226, "link": "https://stackoverflow.com/questions/46818226/mongodb-c-legacy-1-1-x-compatibility-with-mongodb-3-4/46818981#46818981", "title": "MongoDB C++ legacy-1.1.x compatibility with MongoDB 3.4", "body": "<p>That matrix should be read as \"recommended\". As you suggest, there are MongoDB 3.4 features that cannot be accessed via the legacy driver, and there are no plans to add support. However, I would not find it surprising that if your tests do not require any 3.4 features, that the driver would continue to work as designed.</p>\n\n<p>However, I cannot recommend strongly enough that you upgrade to the new mongocxx driver as soon as possible. The legacy driver is in critical bugfix only maintenance and will head to EOL sooner rather than later.</p>\n\n<p>The new driver offers a much better programming model, conforms with modern MongoDB driver designs and principles, and will be updated to express support for new database features on an ongoing basis.</p>\n"}], "owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 46818981, "answer_count": 1, "score": 1, "last_activity_date": 1508367323, "creation_date": 1508356642, "last_edit_date": 1508367323, "question_id": 46818226, "link": "https://stackoverflow.com/questions/46818226/mongodb-c-legacy-1-1-x-compatibility-with-mongodb-3-4", "title": "MongoDB C++ legacy-1.1.x compatibility with MongoDB 3.4", "body": "<p>I'm a developer in a C++ project that uses MongoDB. In particular, we are using MongoDB 3.2 with driver legacy-1.1.x. We have a test regression suite of around ~2000 tests (between unit test and black-box tests) most of them triggering interactions with the MongoDB server.</p>\n\n<p>We have tested to change the MongoDB server, from 3.2. to 3.4. We have run the test suite with 3.4 and all tests have worked without any problem.</p>\n\n<p>That seems to be good news. However, looking to <a href=\"http://mongodb.github.io/mongo-cxx-driver/\" rel=\"nofollow noreferrer\">MongoDB C++ driver documentation</a> I see legacy-1.1.x driver is not compatible with MongoDB 3.4.</p>\n\n<p>So I wonder, why my code (all the ~2000 regression tests) is working? Maybe the compatibility matrix in the documentation is the recommended setup but it is not mandatory? Or maybe the incompability raises when using some new feature in MongoDB 3.4 that my code is not using (given it was designed with the functionality set of MongoDB 3.2 in mind)?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "dynamic"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1508357071, "post_id": 46818218, "comment_id": 80583993, "body": "You need to crack open your C++ textbook and read the chapter about arrays. This site cannot teach you such basic concepts. Your program compiles by sheer accident (because you are using wrong compilation flags)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1508357465, "post_id": 46818218, "comment_id": 80584189, "body": "In your <code>make</code> function the <code>int a[n];</code> is create a Variable Length Array (VLA) which is not part of the standard C++ language.  Search the internet for &quot;c++ array dynamic memory new&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508357618, "post_id": 46818218, "comment_id": 80584260, "body": "Use std::vector!"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 3572917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d141ffefd1da88e75e073164631bc2fb?s=128&d=identicon&r=PG&f=1", "display_name": "user3572917", "link": "https://stackoverflow.com/users/3572917/user3572917"}, "is_accepted": false, "score": 0, "last_activity_date": 1508357749, "creation_date": 1508357749, "answer_id": 46818511, "question_id": 46818218, "link": "https://stackoverflow.com/questions/46818218/accessing-dynamic-arrays-through-pointers/46818511#46818511", "title": "Accessing Dynamic Arrays Through Pointers", "body": "<p>First of all you say you are supposed to read and write to a file but when you use <code>cin</code> and <code>cout</code> you are actually using standard input and output. You need to look into reading and writing into files in C++.\nSecondly, in the <code>findmax</code> function you are passing 5 arguments which you never use and also declare a variable <code>n</code> which you never use. Also the loop at the end of the <code>make</code> function makes no sense. You need to read each line separately, store the numbers in an array and then use the <code>findmax</code> function passing that array as an argument. You then output the result for that line in the output file.</p>\n"}], "owner": {"reputation": 1, "user_id": 8651429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3723305d519c8a297384988bd2a6695b?s=128&d=identicon&r=PG&f=1", "display_name": "dfg724", "link": "https://stackoverflow.com/users/8651429/dfg724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508357749, "creation_date": 1508356596, "question_id": 46818218, "link": "https://stackoverflow.com/questions/46818218/accessing-dynamic-arrays-through-pointers", "title": "Accessing Dynamic Arrays Through Pointers", "body": "<p>Sorry if this is a stupid question, but I'm a novice programmer learning C++.</p>\n\n<p>I have an assignment in which an input txt file is provided with 16 lines of 1-5 digit numbers with 5 numbers max in each row. We are supposed to write a function findmax to use in main to output the max number in each row into another txt file.</p>\n\n<p>My code has no current compiling errors I'm more just stuck on how to actually utilize this function in main and pass it into the outuput file. Sorry again if this is really simple.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint *make( int n)\n{\n#if 0\n    int *a = new int[n];\n#else\n    int a[n];\n#endif\n    for( int i=0; i &lt; n; ++i) a[i] = i;\n\n    return a;\n }\n\nint findmax(int x1,int x2,int x3,int x4, int x5)\n{\n    for(int i=0;i&lt;5;i++)\n    {\n        int n, temp;\n        int a[i];\n        if(a[i]&gt;temp)\n            temp=a[i];\n        return temp;\n    }\n\n}\nint main() \n{\n    int n;\n    int x1, x2, x3, x4, x5, y1, y2, y3, y4, y5;\n    cout &lt;&lt; \"Enter number of lines n in the input file.\" &lt;&lt; endl;\n    cin &gt;&gt; n;\n    int *a = make(n);\n\n    for( int i = 0; i &lt; n; ++i) cout &lt;&lt; a[i] &lt;&lt; \" \"; cout &lt;&lt; endl;\n\n    ifstream infile; infile.open(\"/home/labs/lab4/lab4_input.txt\");\n    ofstream outfile; outfile.open(\"/home/labs/lab4/lab4_output.txt\");\n    if( !infile.is_open()) cout &lt;&lt; \"open infile failed\\n\";\n\n    infile &gt;&gt; x1 &gt;&gt; x2 &gt;&gt; x3 &gt;&gt; x4 &gt;&gt; x5;\n    findmax( x1, x2, x3, x4, x5);\n    outfile &lt;&lt; y1 &lt;&lt; \" \" &lt;&lt; y2 &lt;&lt; \" \" &lt;&lt; y3 &lt;&lt; \" \" &lt;&lt; y4 &lt;&lt; \" \" &lt;&lt; y5 &lt;&lt; endl;\n    infile.close();\n    outfile.close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "visual-studio-2012", "args", "variadic"], "comments": [{"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 0, "creation_date": 1508356929, "post_id": 46818159, "comment_id": 80583935, "body": "It sounds like you are trying to mix compile-time and run-time logic. Templates are compile time, and you need to know the number of parameters and their type at compile time. Is it really something else you are trying to achieve?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1508357151, "post_id": 46818159, "comment_id": 80584027, "body": "Well if you can build a tuple then you can use <a href=\"https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer\">this</a> to turn the tuple into a function call."}, {"owner": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "reply_to_user": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 0, "creation_date": 1508362508, "post_id": 46818159, "comment_id": 80586715, "body": "@TommyAndersen That sounds accurate. I don&#39;t really have any way around that. I&#39;m just trying to make a helper console command for easily triggering events, which can have variable number of args and types for each one. If this gets out of hand I&#39;ll probably just punt on the idea, which it&#39;s starting to seem like might be the case."}, {"owner": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1508362800, "post_id": 46818159, "comment_id": 80586858, "body": "@NathanOliver That&#39;s super neat! But wouldn&#39;t I have to build a tuple for every single permutation of the combination of number of args and their types? That&#39;s a crazy amount of tuples. That&#39;s a big part of this problem that I have no idea how to deal with. Even if I can figure out the type of each argument, I have no idea how to store them in some common container so it doesn&#39;t require an insane number of permutations."}, {"owner": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "edited": false, "score": 0, "creation_date": 1508434180, "post_id": 46818159, "comment_id": 80618794, "body": "OK, I&#39;m probably going to punt on this idea since it doesn&#39;t seem possible. I&#39;ll just stick with support for passing no arguments. It&#39;s just meant for debugging and testing anyways so not super important :) Thanks for the info everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "edited": false, "score": 0, "creation_date": 1508362676, "post_id": 46818648, "comment_id": 80586801, "body": "Sorry, I forgot to mention I&#39;m rather limited on newer language features. I&#39;m doing this in VS2012 so I don&#39;t think most of this is available. I updated the original post with that information."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "edited": false, "score": 0, "creation_date": 1508362759, "post_id": 46818648, "comment_id": 80586837, "body": "@Shenjoku Oh, then no, you cannot.  I mean, there is the Turing Tar Pit, where you can do anything, but you&#39;d basically be expanding the above work manually into a whole mess of spaghetti code.  Far easier to upgrade your C++ compiler than write it in the sublanguage of C++ that VS 2012 supports.  Maybe if you can find an ancient version of boost that supports variant yet works in VS 2012 and manually write the function objects to replace the lambdas and all that pain."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1508358278, "creation_date": 1508358278, "answer_id": 46818648, "question_id": 46818159, "link": "https://stackoverflow.com/questions/46818159/how-to-pass-a-variable-number-and-type-of-arguments-to-template-function/46818648#46818648", "title": "How to pass a variable number and type of arguments to template function?", "body": "<pre><code>using basic_type = std::variant&lt;int, float, bool, std::string&gt;;\n\nusing flat_arguments = std::vector&lt;basic_type&gt;;\n\ntemplate&lt;std::size_t...Ns&gt;\nusing packed_arguments = std::variant&lt; std::array&lt;basic_type, Ns&gt;... &gt;;\n\ntemplate&lt;class T, std::size_t...Ns&gt;\nstd::array&lt;T, sizeof...(Ns)&gt; pack_one( std::vector&lt;T&gt; n, std::index_sequence&lt;Ns...&gt; ) {\n  return {{ std::move(n[Ns])... }};\n}\n\ntemplate&lt;class T, std::size_t...Ns&gt;\nstd::optional&lt;std::variant&lt; std::array&lt;T, Ns&gt;... &gt;&gt;\npack_all(std::vector&lt;T&gt; n, std::index_sequence&lt;Ns...&gt; ) {\n  std::optional&lt;std::variant&lt; std::array&lt;T, Ns&gt;... &gt;&gt; retval;\n  if (n.size() &gt;= sizeof...(Ns)) { return retval; }\n  (\n    (\n      (n.size()==Ns)?\n        void(retval.emplace( pack_one( std::move(n), std::make_index_sequence&lt;Ns&gt;{} ):\n        void()\n    ),...\n  );\n  return retval;\n}\n\nflat_arguments get_arguments( int argc, char const* const*argv); // write this\n\nauto invoke_somefunc = [](auto&amp;&amp;...args){\n  return SomeFunc( decltype(args)(args)... );\n};\n\nint main(int argc, char const*const* argv) {\n  auto args = get_arguments(argc, argv);\n  auto args_packed = pack_all(std::move(args), std::make_index_sequence&lt;9&gt;{} );\n  if (!args_packed) return -1;\n  std::visit( [](auto&amp;&amp; args){\n    std::apply( [](auto&amp;&amp;...args){\n      std::visit( invoke_somefunc, args... );\n    }, args );\n  }, args_packed );\n}\n</code></pre>\n\n<p>that should do it.  Probably contains typos.  <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>.</p>\n\n<p><code>boost</code> has equivalent types (<code>variant</code> and <code>optional</code>) that could replace the <code>std</code> use above, with some tweaks.</p>\n\n<p>The fold pack expansion can be replaced with the expand-in-array hack in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> or greater.</p>\n"}], "owner": {"reputation": 716, "user_id": 1107100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/73e204959463d8996067e7e0c975f922?s=128&d=identicon&r=PG", "display_name": "Justin G", "link": "https://stackoverflow.com/users/1107100/justin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508362630, "creation_date": 1508356418, "last_edit_date": 1508362630, "question_id": 46818159, "link": "https://stackoverflow.com/questions/46818159/how-to-pass-a-variable-number-and-type-of-arguments-to-template-function", "title": "How to pass a variable number and type of arguments to template function?", "body": "<p>I'm setting up a console command that takes a variable number of arguments, each of which can be basic types (int, float, bool, string) and then pass them to a function that has 8 overloads for supporting a different number of arguments of varying types. How would I parse the command line string into values based on their type and then pass them to the function?</p>\n\n<p>I can retrieve each argument via the function <code>const char* GetArg(int index)</code>. Converting the <code>char*</code> to the proper type isn't an issue so don't worry about that part. Storing the values and somehow passing to the template function is the part I'm stuck on.</p>\n\n<p>For example, if the command was executed with the following string: \"command 66 true 5 \"string value\" 0.56\"</p>\n\n<p>It would then be broken up into the following args and stored somehow:</p>\n\n<pre><code>int arg1 = GetArg(1); // 66\nbool arg2 = GetArg(2); // true\nint arg3 = GetArg(3); // 5\nchar* arg4 = GetArg(4); // \"string value\"\nfloat arg5 = GetArg(5); // 0.56\n</code></pre>\n\n<p>And then based on the number of args, call the correct template function:</p>\n\n<pre><code>// The function definition looks something like this:\nvoid SomeFunc();\ntemplate&lt;typename T1&gt;\nvoid SomeFunc(const T1&amp; arg1);\ntemplate&lt;typename T1, typename T2&gt;\nvoid SomeFunc(const T1&amp; arg1, const T2&amp; arg2);\n// etc...\n\n// And then somehow it would be called. This is just an example. I don't\n// know how to call it in a way that would work with variable number and\n// type of args.\nswitch (argCount)\n{\ncase 0:\n    SomeFunc();\n    break;\ncase 1:\n    SomeFunc(arg1);\n    break;\ncase 2:\n    SomeFunc(arg1, arg2);\n    break;\ncase 3:\n    SomeFunc(arg1, arg2, arg3);\n    break;\ncase 4:\n    SomeFunc(arg1, arg2, arg3, arg4);\n    break;\ncase 5:\n    SomeFunc(arg1, arg2, arg3, arg4, arg5);\n    break;\n}\n</code></pre>\n\n<p>How would you make this possible? Storing the args in some way that can be passed to the template function so that it knows the type of each argument doesn't seem possible, but I feel like I'm just not thinking of something.</p>\n\n<p>I can't change this interface either. This is a third party function that I just have to deal with. So no matter how it is implemented, eventually it has to go through <code>SomeFunc()</code>.</p>\n\n<p>IMPORTANT: I'm doing this in Visual Studio 2012 so I'm rather limited on newer C++ features. It can do a little bit of C++11 but that's it. Trying to upgrade the project to a newer version but for now that's what I have to deal with.</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1508360436, "post_id": 46818143, "comment_id": 80585652, "body": "This is correct in the <a href=\"https://docs.opencv.org/master/db/da5/tutorial_how_to_scan_images.html\" rel=\"nofollow noreferrer\">last doc</a> with <code>CV_Assert(I.depth() == CV_8U);</code>. Forget about the OpenCV version 3.0-beta, it&#39;s buggy and bad documented ;)"}], "answers": [{"tags": [], "owner": {"reputation": 1266, "user_id": 8315956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37d7cc9564e76a4fd51a12b2c90476a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Bystricky", "link": "https://stackoverflow.com/users/8315956/vladimir-bystricky"}, "is_accepted": true, "score": 2, "last_activity_date": 1508356871, "creation_date": 1508356871, "answer_id": 46818287, "question_id": 46818143, "link": "https://stackoverflow.com/questions/46818143/opencv3-image-depth-is-zero/46818287#46818287", "title": "OpenCV3 image.depth() is zero", "body": "<p><code>I.depth()</code> doesn't return size of elements. It returns one of <a href=\"https://github.com/opencv/opencv/blob/a6c02af0991fd359cf4501e02acf5f3f9d4ae91d/modules/core/include/opencv2/core/hal/interface.h#L67\" rel=\"nofollow noreferrer\">depth defines</a>:</p>\n\n<pre><code>#define CV_8U   0\n#define CV_8S   1\n#define CV_16U  2\n#define CV_16S  3\n#define CV_32S  4\n#define CV_32F  5\n#define CV_64F  6\n</code></pre>\n\n<p>If you want get size of element, you can use <code>I.elemSize1()</code></p>\n"}], "owner": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 46818287, "answer_count": 1, "score": 0, "last_activity_date": 1508356871, "creation_date": 1508356350, "question_id": 46818143, "link": "https://stackoverflow.com/questions/46818143/opencv3-image-depth-is-zero", "title": "OpenCV3 image.depth() is zero", "body": "<p>I tried to follow <a href=\"https://docs.opencv.org/3.0-beta/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html#the-efficient-way\" rel=\"nofollow noreferrer\">this OpenCV tutorial</a> about loading and modifying an image. I load the image like this:</p>\n\n<pre><code>I = imread( filename, IMREAD_COLOR );\n</code></pre>\n\n<p>Later in the code there is a <code>CV_Assert</code>:</p>\n\n<pre><code>CV_Assert(I.depth() != sizeof(uchar));\n</code></pre>\n\n<p>It is not true, because <code>I.depth()</code> is zero and <code>sizeof(uchar)</code> is one.</p>\n\n<p>What do I wrong? If I call <code>imshow</code>, then the image is displayed correctly</p>\n"}, {"tags": ["c++", "arrays", "string", "file", "while-loop"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 5, "creation_date": 1508355907, "post_id": 46818008, "comment_id": 80583404, "body": "<code>char dimension</code> its 1 character and you are checking dimension == &quot;length&quot; .. etc"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508356020, "post_id": 46818008, "comment_id": 80583455, "body": "<code>dimension == &quot;length&quot;</code> compares a <code>char</code> with a <code>const char[7]</code>, hence the error message."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1508356060, "post_id": 46818008, "comment_id": 80583484, "body": "@Catholic_Ryanite  Use std::string dimension; instead of char dimension; and initialize it before the loop"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1508356123, "post_id": 46818008, "comment_id": 80583520, "body": "btw your title is rather misleading and does not really relate to the question, formatting isnt really the problem (apart from poor intendation maybe)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508356199, "post_id": 46818008, "comment_id": 80583552, "body": "The first time through the loop you&#39;ll report an error, even though the user hasn&#39;t entered anything. You should put the check <i>after</i> the <code>cin</code> statement."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508356245, "post_id": 46818008, "comment_id": 80583570, "body": "@Barmar actually the first time through the loop is UB, isnt it?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508356275, "post_id": 46818008, "comment_id": 80583585, "body": "Use <code>while (true) { cin &gt;&gt; dimension; if (...) { print error message } else {break;}}</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1508356297, "post_id": 46818008, "comment_id": 80583599, "body": "@tobi303 If he changes to <code>std::string</code>, it defaults to an empty string."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508356333, "post_id": 46818008, "comment_id": 80583616, "body": "@Barmar you were one step ahead of me ;)"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508356642, "post_id": 46818008, "comment_id": 80583765, "body": "Maybe utilize the <code>switch</code> statement inside your <code>while</code> loop which could then depend on one simple flag whose value is determined in one of the <code>case</code> blocks."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508357876, "post_id": 46818267, "comment_id": 80584385, "body": "Sorry, this wasn&#39;t what I was looking for."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1508357923, "post_id": 46818267, "comment_id": 80584409, "body": "this wasn&#39;t what you were looking for? Come on, thats all you comment? What are you looking for??"}, {"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508357946, "post_id": 46818267, "comment_id": 80584418, "body": "My intentions were to allow the user to ask whether they want length, mass or time for the dimensions. If the user, for whatever reason, did not type their inputs correctly, the program is supposed to let them know that they must use correct spelling."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508357979, "post_id": 46818267, "comment_id": 80584429, "body": "@Catholic_Ryanite and thats what my code does, you just have to fill in the blanks"}, {"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358274, "post_id": 46818267, "comment_id": 80584575, "body": "I get the following errors: [Error] &#39;vector&#39; is not a member of &#39;std&#39; [Error] expected primary-expression before &#39;&gt;&#39; token [Error] &#39;correct_input&#39; was not declared in this scope [Error] &#39;it&#39; does not name a type [Error] &#39;it&#39; was not declared in this scope"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358328, "post_id": 46818267, "comment_id": 80584610, "body": "@Catholic_Ryanite c++11 enabled?"}, {"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358392, "post_id": 46818267, "comment_id": 80584647, "body": "What do you mean?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358421, "post_id": 46818267, "comment_id": 80584662, "body": "@Catholic_Ryanite I mean: did you enable c++11 ?"}, {"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358535, "post_id": 46818267, "comment_id": 80584728, "body": "How do I enable it? Sorry, I am really new to C++ and I may not know what I am supposed to do, or rather, what to look for."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508358605, "post_id": 46818267, "comment_id": 80584767, "body": "add the -std=c++11 compiler flag"}, {"owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 0, "creation_date": 1508358638, "post_id": 46818267, "comment_id": 80584793, "body": "Oh, I see. Is that everything?"}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "reply_to_user": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "edited": false, "score": 1, "creation_date": 1508359816, "post_id": 46818267, "comment_id": 80585366, "body": "I think that will quickly degrade to something discussionary-tutorial-ish, what is, to some extent, frowned upon here. @Catholic_Ryanite, if what you are looking for is some kind of interactive wizard/walkthrough/menu/guide-me-by-hand-error-handling/etc, please include the specifics in the question. And, frankly, better do it as a new question, because that one you opened here now is about conversion warning/error and this request you made now is a completely different story."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508360087, "post_id": 46818267, "comment_id": 80585506, "body": "I can only agree with quetzalcoatl and to be honest the best advice I can give you here is to <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">read a book</a>"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1508357066, "last_edit_date": 1508357066, "creation_date": 1508356813, "answer_id": 46818267, "question_id": 46818008, "link": "https://stackoverflow.com/questions/46818008/is-there-a-better-way-to-format-this-while-loop/46818267#46818267", "title": "Is there a better way to format this while-loop?", "body": "<p>The comments are already quite exhaustive, so I just sum them up:</p>\n\n<p><code>dimension</code> is a single <code>char</code> that you cannot compare to string literals, hence the error. You should use a <code>std::string</code> instead. </p>\n\n<p>Once you changed that the problem remains that you check user input before anything was read from <code>cin</code>. You should do it the other way around. </p>\n\n<p>Your condition will be more readable if you use a container and try to find the user input in that container.</p>\n\n<p>So it would be something like this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; correct_input{\"Foo\",\"foo\",\"f00\"};\nwhile(true) {\n    std::string dimension;\n    std::cin &gt;&gt; dimension;\n    auto it = std::find(correct_input.begin(),correct_input.end(),dimension);\n    if (std::cin.fail() || it==correct_input.end()) {\n        // print error and continue to ask for input\n        std::cin.clear();  // clear possible error flags\n    } else {\n       // do something with input\n       break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8797735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6aa07755bbbf4dc9f3ede0753687f41?s=128&d=identicon&r=PG", "display_name": "Catholic_Ryanite", "link": "https://stackoverflow.com/users/8797735/catholic-ryanite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1508357066, "creation_date": 1508355760, "last_edit_date": 1508356256, "question_id": 46818008, "link": "https://stackoverflow.com/questions/46818008/is-there-a-better-way-to-format-this-while-loop", "title": "Is there a better way to format this while-loop?", "body": "<p>While searching for potential errors on a program that I am creating, I got\n  \"[Error] ISO C++ forbids comparison between pointer and integer [-fpermissive].\"</p>\n\n<p>The error is coming from my while loop, wherein I intended that the program accepts only the following inputs from the user. Right now, I am considering to use an array for this one. </p>\n\n<p>How should I fix this? If anybody any more details, I am more than happy to provide them by showing what I am (as of late).</p>\n\n<pre><code>int main () // While using one of the three functions to make conversions, \n// the program will create the table based on following information. \n{\n    char dimension;\n    double u1, u2;  \n    int starting_value, ending_value, increment, startingUnitDigits, \n    endingUnitDigits;\n    cout &lt;&lt; \"-------------------------------------------------------------------------------------------------\";\n    cout &lt;&lt; \"Please answer the following questions as they appear.\";\n    cout &lt;&lt; \"Check spelling, use correct abbreviation for units of measurement, and avoid negative values.\";\n    cout &lt;&lt; \"-------------------------------------------------------------------------------------------------\";\n    cout &lt;&lt; \"Enter the dimensions from the following choices: length, mass and time. (i.e.: 'length,' 'Length').\";\n    while (!(dimension == \"length\" || dimension == \"Length\" || dimension == \"mass\" || dimension == \"Mass\" || dimension == \"time\" || dimension == \"Time\"))\n    {\n        cout &lt;&lt; \"----------------------------------------------------------------------------------------------------\";\n        cout &lt;&lt; \"Error! Input for Dimension, \" &lt;&lt; dimension &lt;&lt; \", was either an invalid choice or typed incorrectly.\";\n        cout &lt;&lt; \"Please know that this programs accepts length, mass, and time only!\";  \n        cout &lt;&lt; \"----------------------------------------------------------------------------------------------------\";\n        cout &lt;&lt; \"Enter the dimensions from the following choices: length, mass and time. (i.e.: 'length,' 'Length').\";\n        cin &gt;&gt; dimension;   \n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "bazel"], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 2872579, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/higqD.png?s=128&g=1", "display_name": "Potion", "link": "https://stackoverflow.com/users/2872579/potion"}, "edited": false, "score": 0, "creation_date": 1604775332, "post_id": 46891982, "comment_id": 114451997, "body": "What if we installed it with gRPC which installs protobufs like here <a href=\"https://grpc.io/docs/languages/cpp/quickstart/#setup\" rel=\"nofollow noreferrer\">grpc.io/docs/languages/cpp/quickstart/#setup</a>? Where is protobuf header filels located"}], "tags": [], "owner": {"reputation": 3270, "user_id": 7778502, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/LjybV.png?s=128&g=1", "display_name": "L&#225;szl&#243;", "link": "https://stackoverflow.com/users/7778502/l%c3%a1szl%c3%b3"}, "is_accepted": false, "score": 0, "last_activity_date": 1508769202, "creation_date": 1508769202, "answer_id": 46891982, "question_id": 46817141, "link": "https://stackoverflow.com/questions/46817141/getting-vscode-c-plugin-to-locate-protocol-buffer-headers/46891982#46891982", "title": "Getting vscode c++ plugin to locate protocol buffer headers", "body": "<p>You can hardcode <code>&lt;bazel_workspace_path&gt;\\bazel-genfiles</code> or <code>&lt;bazel_workspace_path&gt;\\bazel-bin</code> as include directories.</p>\n\n<p><code>bazel-bin</code> and <code>bazel-genfiles</code> are junctions (~= directory symlinks) that point to the corresponding output directories. (They are called convenience symlinks. See the <a href=\"https://docs.bazel.build/versions/master/command-line-reference.html\" rel=\"nofollow noreferrer\"><code>--symlink_prefix</code> flag</a> for more info.)</p>\n"}], "owner": {"reputation": 4897, "user_id": 795053, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7281b1d9f19c2c5f8a9c5fc45e81450e?s=128&d=identicon&r=PG", "display_name": "Alex Flint", "link": "https://stackoverflow.com/users/795053/alex-flint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 773, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1508769202, "creation_date": 1508352306, "question_id": 46817141, "link": "https://stackoverflow.com/questions/46817141/getting-vscode-c-plugin-to-locate-protocol-buffer-headers", "title": "Getting vscode c++ plugin to locate protocol buffer headers", "body": "<p>I am using bazel to build a c++ application that includes protocol buffers. This means that bazel runs the protocol buffer compiler as part of the build process, and squirrels the generated files away somewhere within the bazel output directory. VSCode is then unable to resolve these #include directives since they are not on any include path that vscode knows about.</p>\n\n<p>But I'd rather not hardcode some frequently-changing bazel output directory in my vscode config. Does anyone have any suggested strategy for resolving this?</p>\n"}, {"tags": ["java", "c++", "cmake"], "comments": [{"owner": {"reputation": 101, "user_id": 6221872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCSN9.jpg?s=128&g=1", "display_name": "GrozaiL", "link": "https://stackoverflow.com/users/6221872/grozail"}, "edited": false, "score": 0, "creation_date": 1508373387, "post_id": 46817072, "comment_id": 80589885, "body": "After long time searching, I found solution! <a href=\"https://stackoverflow.com/questions/7715804/how-to-use-find-jni-on-cmake/7716814#7716814\" title=\"how to use find jni on cmake\">stackoverflow.com/questions/7715804/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7358174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5ecaeb879e4f790df93f586c12f05c?s=128&d=identicon&r=PG&f=1", "display_name": "lidongze", "link": "https://stackoverflow.com/users/7358174/lidongze"}, "is_accepted": false, "score": 0, "last_activity_date": 1539228519, "last_edit_date": 1539228519, "creation_date": 1539224849, "answer_id": 52751265, "question_id": 46817072, "link": "https://stackoverflow.com/questions/46817072/cmake-add-java-libraries-to-cpp-project/52751265#52751265", "title": "CMAKE add java libraries to cpp project", "body": "<p>You can use the following example to solve your problem:</p>\n\n<pre><code>find_package(JNI)\n    if (JNI_FOUND)\n        include_directories(SYSTEM ${JAVA_INCLUDE_PATH})\n        include_directories(SYSTEM ${JAVA_INCLUDE_PATH2})\n    endif()\n\nif (JNI_FOUND)\n    target_link_libraries(&lt;example&gt; ${JAVA_JVM_LIBRARY})\nendif()\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6221872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCSN9.jpg?s=128&g=1", "display_name": "GrozaiL", "link": "https://stackoverflow.com/users/6221872/grozail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539228519, "creation_date": 1508352016, "last_edit_date": 1508353184, "question_id": 46817072, "link": "https://stackoverflow.com/questions/46817072/cmake-add-java-libraries-to-cpp-project", "title": "CMAKE add java libraries to cpp project", "body": "<p>I'm trying to build an app that can invoke java code from c++.</p>\n\n<p>So that I could write something like this</p>\n\n<pre><code>#include&lt;jni.h&gt;\n</code></pre>\n\n<p>Then do something like this <a href=\"https://stackoverflow.com/questions/992836/how-to-access-the-java-method-in-a-c-application\">How to access the Java method in a C++ application</a> \nI have problem adding libraries to CMakeLists.txt\nThats what I have now:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(test_cpp_jni)\n\nset(CMAKE_CXX_STANDARD 11)    \ninclude_directories(\"${JAVA_HOME}/include ${JAVA_HOME}/include/linux\")\n\nlink_libraries(${JAVA_HOME}/jre/lib/amd64/server/libjvm.so)\n\nset(SOURCE_FILES\n    main.cpp\n    wrapper/WrapperJNI.cpp\n    wrapper/WrapperJNI.h)\n\n\nadd_executable(test_cpp_jni ${SOURCE_FILES})\n\ntarget_link_libraries(test_cpp_jni ${JAVA_HOME}/jre/lib/amd64/server/libjvm.so)\n</code></pre>\n\n<p>What shall I correct/add to make this work.\nThanks in advance for any help </p>\n"}, {"tags": ["c++", "arrays", "performance"], "comments": [{"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 2, "creation_date": 1508351340, "post_id": 46816848, "comment_id": 80580996, "body": "Did you take a look at the assembly output?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1508357524, "post_id": 46816848, "comment_id": 80584223, "body": "I <a href=\"https://github.com/travisdowns/uarch-bench\" rel=\"nofollow noreferrer\">wrote a benchmark</a> which among other things tests exactly this: the cost of <code>BYTE</code>, <code>WORD</code>, <code>DWORD</code> and <code>QWORD</code> writes. The result is that they all take exactly 1 cycle on a modern Intel CPU, except if they cross a cache-line boundary at which point they take 2 cycles. Note that if you write randomly at byte-granular locations, larger values are more likely to cross a cache line boundary. In practice, this benchmark and most code will use aligned buffers, so crossing boundaries won&#39;t occur at all."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1508913236, "post_id": 46816848, "comment_id": 80797641, "body": "Your &quot;main point&quot; is garbled, can you edit it to be clear? PS You should not worry about being &quot;efficient&quot; in your C++ other than at the level of algorithms/library &amp; the C++ abstract machine &amp; its objects &amp; datatypes until you experience &amp; locate specific bottlenecks, at which point you should still seek solutions at the algorithm/datatype/object level and then allocators, all still in C++, and if you ever do come to care about machine code you should be addressing the problem in machine code not C++."}], "answers": [{"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1508353168, "post_id": 46816945, "comment_id": 80581985, "body": "This is helpful, but the question asks why does <code>mov QWORD</code> take twice as long as <code>mov DWORD</code>?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 5, "creation_date": 1508353264, "post_id": 46816945, "comment_id": 80582033, "body": "@rex It doesn&#39;t. The only reason why the OP thinks that&#39;s the case is because the compiler broke the benchmark. I guess I&#39;ll clarify that."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1508354558, "post_id": 46816945, "comment_id": 80582731, "body": "Ok, so with <code>-O2</code> did you see similar times for the different word sizes? I&#39;m trying to replicate and I see a <a href=\"http://coliru.stacked-crooked.com/a/2b9e3e32649afcb5\" rel=\"nofollow noreferrer\">difference</a> for the different word sizes. Even with <code>-O2</code>. I also get a difference (each time is double the previous one) with MSVC. The asm instructions are reported as <code>rep stos    byte</code>, <code>rep stos    word</code>, <code>rep stos    dword</code> and <code>rep stos    qword</code> with times of 25344, 47447, 89533 and 178087. So I&#39;m trying to understand how the answer could be that this isn&#39;t really happening."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1508354685, "post_id": 46816945, "comment_id": 80582788, "body": "@rex I&#39;m seeing similar things and am expanding my answer. The OP&#39;s benchmark code is hitting a memory bottleneck on bandwidth as well as possible page-commit issues."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1508357175, "post_id": 46816945, "comment_id": 80584047, "body": "@rex The reason why you&#39;re still seeing the linearity is because the dataset doesn&#39;t fit in the cache and the # of bytes in each test is also growing with the word size. So you&#39;re benchmarking memory bandwidth instead of the actual code. Admittedly, the <code>memset()</code> replacement part was so obvious to me that I completely overlooked the bandwidth issue."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1508357299, "post_id": 46816945, "comment_id": 80584113, "body": "Memory bandwidth makes sense to me. So each of the instruction variants take the same amount of time, but the memory doubles for each array. Thank you for a comprehensive answer! :)"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1508357650, "post_id": 46816945, "comment_id": 80584271, "body": "If you wanted to do an &quot;equal bandwidth&quot; comparison, you could use the same size (in bytes) arrays for each test, but write every 8 bytes for the byte test, every 4 bytes for <code>WORD</code>, ..., contiguously for <code>QWORD</code>. Then you are touching the same number of cache lines in each case and I expect them to come out equal (in fact, I pretty much am certain of it)."}, {"owner": {"reputation": 13337, "user_id": 441899, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/368fb99f86e2264ceec0539a3746b9d3?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/441899/jules"}, "edited": false, "score": 1, "creation_date": 1508373221, "post_id": 46816945, "comment_id": 80589856, "body": "(4) - Even if your compiler didn&#39;t optimize all of your memory accesses to use the most optimal width the CPU supports, the CPU is perfectly capable of doing this itself.  The CPU will use internal cache to handle any requests to manipulate small quantities of memory and will then just use the same large unit size to transfer the data to and from main memory when necessary.  The CPU&#39;s internal cache is an order of magnitude or more faster than the external memory, so you won&#39;t notice if that is being accessed in a non-optimal fashion."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 13337, "user_id": 441899, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/368fb99f86e2264ceec0539a3746b9d3?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/441899/jules"}, "edited": false, "score": 0, "creation_date": 1508393118, "post_id": 46816945, "comment_id": 80594611, "body": "@Jules True, but only to a certain extent. Yes, memory bandwidth is slow, but it&#39;s not nearly slow as 1 byte/cycle on current hardware. It seems the crossover point on the machine that coliru runs on is about 2 - 4 bytes/cycle. So even if the dataset doesn&#39;t fit in cache, you&#39;d still need to use ~4-byte word sizes in this benchmark to saturate it. So no, the CPU is not capable of &quot;doing this itself&quot; if the code is copying one byte at a time. But it is if the code is copying 4+bytes or more at a time. (Of course these numbers will vary by system and how many threads are running at once.)"}], "tags": [], "owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "is_accepted": true, "score": 66, "last_activity_date": 1508369247, "last_edit_date": 1508369247, "creation_date": 1508351528, "answer_id": 46816945, "question_id": 46816848, "link": "https://stackoverflow.com/questions/46816848/why-do-arrays-of-different-integer-sizes-have-different-performance/46816945#46816945", "title": "Why do arrays of different integer sizes have different performance?", "body": "<blockquote>\n  <p>Why does a 32-bit system need 4 times more time to save 32-bit values than to save 8-bit values?</p>\n</blockquote>\n\n<p>It doesn't. But there are 3 different issues with your benchmark that are giving you those results.</p>\n\n<ol>\n<li>You're not pre-faulting the memory. So you're page-faulting the arrays during the benchmark. These page faults along with the OS kernel interaction are a dominant factor in the time.</li>\n<li>The compiler with <code>-O3</code> is completely defeating your benchmark by converting all your loops into <code>memset()</code>.</li>\n<li>Your benchmark is memory-bound. So you're measuring the speed of your memory instead of the core.</li>\n</ol>\n\n<hr>\n\n<p><strong>Problem 1: The Test Data is not Prefaulted</strong></p>\n\n<p>Your arrays are declared, but not used before the benchmark. Because of the way the kernel and memory allocation works, they are not mapped into memory yet. It's only when you first touch them does this happen. And when it does, it incurs a very large penalty from the kernel to map the page.</p>\n\n<p>This can be done by touching all the arrays before the benchmark.</p>\n\n<p>No Pre-Faulting: <a href=\"http://coliru.stacked-crooked.com/a/1df1f3f9de420d18\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/1df1f3f9de420d18</a></p>\n\n<pre><code>g++ -O3 -Wall main.cpp &amp;&amp; ./a.out\nTime of processing int8 array:  28983us.\nTime of processing int16 array: 57100us.\nTime of processing int32 array: 113361us.\nTime of processing int64 array: 224451us.\n</code></pre>\n\n<p>With Pre-Faulting: <a href=\"http://coliru.stacked-crooked.com/a/7e62b9c7ca19c128\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/7e62b9c7ca19c128</a></p>\n\n<pre><code>g++ -O3 -Wall main.cpp &amp;&amp; ./a.out\nTime of processing int8 array:  6216us.\nTime of processing int16 array: 12472us.\nTime of processing int32 array: 24961us.\nTime of processing int64 array: 49886us.\n</code></pre>\n\n<p>The times drop by roughly a factor of 4. In other words, your original benchmark was measuring more of the kernel than the actual code.</p>\n\n<hr>\n\n<p><strong>Problem 2: The Compiler is Defeating the Benchmark</strong></p>\n\n<p>The compiler is recognizing your pattern of writing zeros and is completely replacing all your loops with calls to <code>memset()</code>. So in effect, you're measuring calls to <code>memset()</code> with different sizes.</p>\n\n<pre><code>  call std::chrono::_V2::system_clock::now()\n  xor esi, esi\n  mov edx, 67108864\n  mov edi, OFFSET FLAT:int8Array\n  mov r14, rax\n  call memset\n  call std::chrono::_V2::system_clock::now()\n  xor esi, esi\n  mov edx, 134217728\n  mov edi, OFFSET FLAT:int16Array\n  mov r13, rax\n  call memset\n  call std::chrono::_V2::system_clock::now()\n  xor esi, esi\n  mov edx, 268435456\n  mov edi, OFFSET FLAT:int32Array\n  mov r12, rax\n  call memset\n  call std::chrono::_V2::system_clock::now()\n  xor esi, esi\n  mov edx, 536870912\n  mov edi, OFFSET FLAT:int64Array\n  mov rbp, rax\n  call memset\n  call std::chrono::_V2::system_clock::now()\n</code></pre>\n\n<p>The optimization that's doing this is <code>-ftree-loop-distribute-patterns</code>. Even if you turn that off, the vectorizer will give you a similar effect.</p>\n\n<hr>\n\n<p>With <code>-O2</code>, vectorization and pattern recognition are both disabled. So the compiler gives you what you write.</p>\n\n<pre><code>.L4:\n  mov BYTE PTR [rax], 0         ;; &lt;&lt;------ 1 byte at a time\n  add rax, 1\n  cmp rdx, rax\n  jne .L4\n  call std::chrono::_V2::system_clock::now()\n  mov rbp, rax\n  mov eax, OFFSET FLAT:int16Array\n  lea rdx, [rax+134217728]\n.L5:\n  xor ecx, ecx\n  add rax, 2\n  mov WORD PTR [rax-2], cx      ;; &lt;&lt;------ 2 bytes at a time\n  cmp rdx, rax\n  jne .L5\n  call std::chrono::_V2::system_clock::now()\n  mov r12, rax\n  mov eax, OFFSET FLAT:int32Array\n  lea rdx, [rax+268435456]\n.L6:\n  mov DWORD PTR [rax], 0        ;; &lt;&lt;------ 4 bytes at a time\n  add rax, 4\n  cmp rax, rdx\n  jne .L6\n  call std::chrono::_V2::system_clock::now()\n  mov r13, rax\n  mov eax, OFFSET FLAT:int64Array\n  lea rdx, [rax+536870912]\n.L7:\n  mov QWORD PTR [rax], 0        ;; &lt;&lt;------ 8 bytes at a time\n  add rax, 8\n  cmp rdx, rax\n  jne .L7\n  call std::chrono::_V2::system_clock::now()\n</code></pre>\n\n<p>With <code>-O2</code>: <a href=\"http://coliru.stacked-crooked.com/a/edfdfaaf7ec2882e\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/edfdfaaf7ec2882e</a></p>\n\n<pre><code>g++ -O2 -Wall main.cpp &amp;&amp; ./a.out\nTime of processing int8 array:  28414us.\nTime of processing int16 array: 22617us.\nTime of processing int32 array: 32551us.\nTime of processing int64 array: 56591us.\n</code></pre>\n\n<p>Now it's clear that the smaller word sizes are slower. But you would expect the times to be flat if all the word sizes were the same speed. And the reason they aren't is because of memory bandwidth.</p>\n\n<hr>\n\n<p><strong>Problem 3: Memory Bandwidth</strong></p>\n\n<p>Because the benchmark (as written) is only writing zeros, it is easily saturating the memory bandwidth for the core/system. So the benchmark becomes affected by how much memory is touched.</p>\n\n<p>To fix that, we need to shrink the dataset so that it fits into cache. To compensate for this, we loop over the same data multiple times.</p>\n\n<pre><code>std::array&lt;std::int8_t, 512&gt; int8Array;\nstd::array&lt;std::int16_t, 512&gt; int16Array;\nstd::array&lt;std::int32_t, 512&gt; int32Array;\nstd::array&lt;std::int64_t, 512&gt; int64Array;\n\n...\n\nauto point1 = std::chrono::high_resolution_clock::now();\nfor (int c = 0; c &lt; 64 * 1024; c++) for (auto &amp;v : int8Array) v = 0;\nauto point2 = std::chrono::high_resolution_clock::now();\nfor (int c = 0; c &lt; 64 * 1024; c++) for (auto &amp;v : int16Array) v = 0;\nauto point3 = std::chrono::high_resolution_clock::now();\nfor (int c = 0; c &lt; 64 * 1024; c++) for (auto &amp;v : int32Array) v = 0;\nauto point4 = std::chrono::high_resolution_clock::now();\nfor (int c = 0; c &lt; 64 * 1024; c++) for (auto &amp;v : int64Array) v = 0;\nauto point5 = std::chrono::high_resolution_clock::now();\n</code></pre>\n\n<p>Now we see timings that are a lot more flat for the different word-sizes:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f534f98f6d840c5c\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/f534f98f6d840c5c</a></p>\n\n<pre><code>g++ -O2 -Wall main.cpp &amp;&amp; ./a.out\nTime of processing int8 array:  20487us.\nTime of processing int16 array: 21965us.\nTime of processing int32 array: 32569us.\nTime of processing int64 array: 26059us.\n</code></pre>\n\n<p>The reason why it isn't completely flat is probably because there are numerous other factors involved with the compiler optimizations. You might need to resort to loop-unrolling to get any closer.</p>\n"}], "owner": {"reputation": 399, "user_id": 2340284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689f78a3ee75c97b57bd72d0f511f00e?s=128&d=identicon&r=PG", "display_name": "wrealcon", "link": "https://stackoverflow.com/users/2340284/wrealcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 7, "accepted_answer_id": 46816945, "answer_count": 1, "score": 31, "last_activity_date": 1508369247, "creation_date": 1508351166, "last_edit_date": 1508369224, "question_id": 46816848, "link": "https://stackoverflow.com/questions/46816848/why-do-arrays-of-different-integer-sizes-have-different-performance", "title": "Why do arrays of different integer sizes have different performance?", "body": "<p>I have following issue:</p>\n\n<p>The write times to an <code>std::array</code> for <code>int8</code>, <code>int16</code>, <code>int32</code> and <code>int64</code> are doubling with each size increase. I can understand such behavior for an 8-bit CPU, but not 32/64-bit.</p>\n\n<p>Why does a 32-bit system need 4 times more time to save 32-bit values than to save 8-bit values?</p>\n\n<p>Here is my test code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;chrono&gt;\n\nstd::array&lt;std::int8_t, 64 * 1024 * 1024&gt; int8Array;\nstd::array&lt;std::int16_t, 64 * 1024 * 1024&gt; int16Array;\nstd::array&lt;std::int32_t, 64 * 1024 * 1024&gt; int32Array;\nstd::array&lt;std::int64_t, 64 * 1024 * 1024&gt; int64Array;\n\nvoid PutZero()\n{\n    auto point1 = std::chrono::high_resolution_clock::now();\n    for (auto &amp;v : int8Array) v = 0;\n    auto point2 = std::chrono::high_resolution_clock::now();\n    for (auto &amp;v : int16Array) v = 0;\n    auto point3 = std::chrono::high_resolution_clock::now();\n    for (auto &amp;v : int32Array) v = 0;\n    auto point4 = std::chrono::high_resolution_clock::now();\n    for (auto &amp;v : int64Array) v = 0;\n    auto point5 = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Time of processing int8 array:\\t\" &lt;&lt; (std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(point2 - point1)).count() &lt;&lt; \"us.\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Time of processing int16 array:\\t\" &lt;&lt; (std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(point3 - point2)).count() &lt;&lt; \"us.\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Time of processing int32 array:\\t\" &lt;&lt; (std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(point4 - point3)).count() &lt;&lt; \"us.\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Time of processing int64 array:\\t\" &lt;&lt; (std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(point5 - point4)).count() &lt;&lt; \"us.\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    PutZero();\n    std::cout &lt;&lt; std::endl &lt;&lt; \"Press enter to exit\" &lt;&lt; std::endl;\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>I compile it under linux with: <code>g++ -o array_issue_1 main.cpp -O3 -std=c++14</code></p>\n\n<p>and my results are following:     </p>\n\n<pre><code>Time of processing int8 array:  9922us.   \nTime of processing int16 array: 37717us.   \nTime of processing int32 array: 76064us.   \nTime of processing int64 array: 146803us.   \n</code></pre>\n\n<p>If I compile with <code>-O2</code>, then results are 5 times worse for <code>int8</code>!   </p>\n\n<p>You can also compile this source in Windows. You will get similar relation between results.</p>\n\n<p><strong>Update #1</strong>  </p>\n\n<p>When I compile with -O2, then my results are following:</p>\n\n<pre><code>Time of processing int8 array:  60182us.  \nTime of processing int16 array: 77807us.  \nTime of processing int32 array: 114204us.  \nTime of processing int64 array: 186664us.  \n</code></pre>\n\n<p>I didn't analyze assembler output. My main point is that I would like to write efficient code in C++ and things like that show, that things like <code>std::array</code> can be challenging from performance perspective and somehow counter-intuitive.  </p>\n"}, {"tags": ["c++", "tree", "binary-search-tree", "tree-traversal"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1508351246, "post_id": 46816770, "comment_id": 80580954, "body": "There&#39;s nothing special about pointers. Assigning to a pointer parameter is no different from assigning to an <code>int</code> parameter."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 0, "last_activity_date": 1508352236, "creation_date": 1508352236, "answer_id": 46817120, "question_id": 46816770, "link": "https://stackoverflow.com/questions/46816770/binary-search-tree-traversal/46817120#46817120", "title": "Binary search tree traversal", "body": "<blockquote>\n  <p>... but each time while adding a new node it is adding to the same root\n  node</p>\n</blockquote>\n\n<p>This is because you are adding it always to the same root, as here</p>\n\n<pre><code>if(addNode(newOne, start))\n</code></pre>\n\n<p><code>start</code> is always the same. You could make <code>addNode</code> return the new root and call it like that:</p>\n\n<pre><code>start = addNode(newOne,start);\n</code></pre>\n\n<p>I'll leave it to you to implement it. </p>\n\n<p>Note that parameters are always passed by value in c++ (unless you pass-by-reference), thus changing the parameter inside the method, <code>root = dest;</code>, has no effect on the <code>start</code> in <code>main</code>. </p>\n"}], "owner": {"reputation": 162, "user_id": 3780351, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2e7a974eb78f6a898bdbbab77faf420f?s=128&d=identicon&r=PG&f=1", "display_name": "susil95", "link": "https://stackoverflow.com/users/3780351/susil95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46817120, "answer_count": 1, "score": -2, "last_activity_date": 1508352236, "creation_date": 1508350822, "last_edit_date": 1508350908, "question_id": 46816770, "link": "https://stackoverflow.com/questions/46816770/binary-search-tree-traversal", "title": "Binary search tree traversal", "body": "<p>Hi guys I have a doubt in inserting a new node in BST. In the <strong>addNode</strong> module I am trying to insert an element in the BST, but each time while adding a new node it is adding to the same root node which I passed from <strong>main</strong> function initially without traversing inside the tree.</p>\n\n<p>This is the code which I have written.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;cstdio&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nstruct node\n{\n    int data;\n    struct node *left;\n    struct node *right;\n};\nstruct node* newNode(int data)\n{\n    node* temp = (node*)malloc(sizeof(struct node));\n    //struct temp = new node;\n    temp-&gt;data = data;\n    temp-&gt;left = NULL;\n    temp-&gt;right = NULL;\n    return(temp);\n};\nint addNode(node *dest, node *root)\n{\n    if(root == NULL)\n    {\n        cout&lt;&lt;\"adding data to node for \"&lt;&lt; dest-&gt;data&lt;&lt;endl;\n        root = dest;\n        cout&lt;&lt;\"ROOT VALUE = root-&gt;data \"&lt;&lt;root-&gt;data&lt;&lt;endl;\n        return 1;\n    }\n    if(dest-&gt;data &gt; root-&gt;data)\n    {\n        cout&lt;&lt;\"Traverse right for \"&lt;&lt;dest-&gt;data&lt;&lt;endl;\n        addNode(dest, root-&gt;right);\n    }\n    else if(dest-&gt;data &lt; root-&gt;data)\n    {\n        cout&lt;&lt;\"Traverse left for \"&lt;&lt;dest-&gt;data&lt;&lt;endl;\n        addNode(dest, root-&gt;left);\n    }\n}\nvoid printNodes(node *root)\n{\n    if(root != NULL)\n    {\n        printNodes(root-&gt;left);\n        if(root-&gt;left != NULL &amp;&amp; root-&gt;right != NULL)\n            std::cout&lt;&lt; root-&gt;data &lt;&lt;\" \";\n        printNodes(root-&gt;right);\n    }\n}\nint main()\n{\n    int i, j, k, flag;\n    int arr[6] = {4, 2,8, 1, 0, 10};\n    node *start = newNode(arr[0]);\n    for(i = 1; i &lt; 6; i++)\n    {\n        node *newOne = newNode(0);\n        newOne-&gt;data = arr[i];\n        cout&lt;&lt;\"NODE DATA - start-&gt;data \"&lt;&lt;start-&gt;data;\n        if(addNode(newOne, start))\n            std::cout&lt;&lt;\"\\nNode added\"&lt;&lt;endl;\n    }\n    printNodes(start);\n    return 1;\n}\n</code></pre>\n\n<p>I am quite new to trees concept as well as pointers concept in trees. Any help is appreciated and thank you.</p>\n"}, {"tags": ["c++", "visual-studio", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1508350580, "post_id": 46816642, "comment_id": 80580603, "body": "What version of MSVS are you using?  Did you set the standard setting to C++17 or latest?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 3, "creation_date": 1508350684, "post_id": 46816642, "comment_id": 80580667, "body": "Are you confusing VS 2017 with proposed c++17?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1508350887, "post_id": 46816642, "comment_id": 80580772, "body": "Apparently it is not supported by VS2017 yet, even if it is set to C++17 mode."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508361374, "post_id": 46816642, "comment_id": 80586114, "body": "@user0042 strike that &quot;proposed&quot; -- C++17 is live :)"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1510805586, "last_edit_date": 1510805586, "creation_date": 1508351255, "answer_id": 46816872, "question_id": 46816642, "link": "https://stackoverflow.com/questions/46816642/using-inline-variables-in-visual-studio/46816872#46816872", "title": "Using inline variables in visual studio", "body": "<p>As of Nov. 15, 2017, inline variables are scheduled to be supported in Visual Studio 15.5.  You can see the \"current\" status of features <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/05/10/c17-features-in-vs-2017-3/\" rel=\"nofollow noreferrer\">here</a>\n or <a href=\"https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance\" rel=\"nofollow noreferrer\">here</a> .</p>\n"}], "owner": {"reputation": 83, "user_id": 7195603, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a119494c2da0c7ac74bb0de9cf726de?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Buchholz", "link": "https://stackoverflow.com/users/7195603/tim-buchholz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 0, "accepted_answer_id": 46816872, "answer_count": 1, "score": 1, "last_activity_date": 1510805586, "creation_date": 1508350440, "last_edit_date": 1508352636, "question_id": 46816642, "link": "https://stackoverflow.com/questions/46816642/using-inline-variables-in-visual-studio", "title": "Using inline variables in visual studio", "body": "<p>I am currently using Visual Studio 2017 Community Edition and I tried to declare this in my header file:</p>\n\n<pre><code>inline static int counter{1};\n</code></pre>\n\n<p>Now VS underlines it red and tells me that 'inline' can only be used for functions, although it should be possible since C++17.</p>\n\n<p>Is there a way to still use it in VS or do I have to work around?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 1430, "user_id": 703764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e0f702b5287daf26382d035d915480d8?s=128&d=identicon&r=PG", "display_name": "jack_carver", "link": "https://stackoverflow.com/users/703764/jack-carver"}, "edited": false, "score": 0, "creation_date": 1508351993, "post_id": 46816643, "comment_id": 80581325, "body": "Thanks ! I sort of understand now :) In the compare function we need to do compare_impl&lt;T&gt;:: instead, I guess"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1430, "user_id": 703764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e0f702b5287daf26382d035d915480d8?s=128&d=identicon&r=PG", "display_name": "jack_carver", "link": "https://stackoverflow.com/users/703764/jack-carver"}, "edited": false, "score": 0, "creation_date": 1508352052, "post_id": 46816643, "comment_id": 80581364, "body": "@jack_carver - Ack, I knew I&#39;d miss something."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508352173, "post_id": 46816643, "comment_id": 80581435, "body": "You also switch from parameters <code>(l, r)</code> to <code>(a, b)</code> in the <code>compare</code> function."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1508352077, "last_edit_date": 1508352077, "creation_date": 1508350441, "answer_id": 46816643, "question_id": 46816556, "link": "https://stackoverflow.com/questions/46816556/c-enable-if-t-sfinae/46816643#46816643", "title": "C++ enable_if_t SFINAE", "body": "<p>You didn't specialize <code>compare</code> (it's impossible to partially specialize a function template anyway). Instead you provide an overload.</p>\n\n<p>And the overload is always illegal:</p>\n\n<ol>\n<li>Either <code>enable_if_t</code> is not defined.</li>\n<li>Or it specifies a non-type template parameter of type <code>void</code>.</li>\n</ol>\n\n<p>So it's never going to be called, because SFINAE discards it in favor of the always valid overload at the top.</p>\n\n<p>Specialization is usually the wrong answer for function templates. Instead you should delegate to a class template, which <em>will</em> behave as expected upon true specialization:</p>\n\n<pre><code>template&lt;typename T, typename = void&gt;\nstruct compare_impl { \n  static void execute(T const&amp; l, T const&amp; r) { /*Base case code*/ }\n};\n\ntemplate&lt;typename T&gt;\nstruct compare_impl&lt;T, std::enable_if_t&lt;std::is_same&lt;T, Foo&gt;::value&gt;&gt; {\n   static void execute(T const&amp; l, T const&amp; r) { /*Special case code*/ }\n};\n\ntemplate&lt;typename T&gt;\nvoid compare (T const&amp; l, T const&amp; r) { compare_impl&lt;T&gt;::execute(a, b); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1508351433, "creation_date": 1508351433, "answer_id": 46816917, "question_id": 46816556, "link": "https://stackoverflow.com/questions/46816556/c-enable-if-t-sfinae/46816917#46816917", "title": "C++ enable_if_t SFINAE", "body": "<p>Deferring to a specialised function object allows a lot of flexibility on how argument types and/or whether they are rvalues or lvalues.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;type_traits&gt;\nusing namespace std;\n\n\n// general case\ntemplate&lt;class T&gt; \nstruct compare_impl\n{\n    template&lt;class U, class V&gt;\n    auto operator()(U&amp;&amp; a, V&amp;&amp; b) const {\n        cout &lt;&lt; \"default\" &lt;&lt; endl;\n    }\n};\n\n// compare interface\ntemplate&lt;class T, class U&gt;\nauto compare(T &amp;&amp; a, U &amp;&amp; b)\n{\n    using ctype = std::common_type_t&lt;std::decay_t&lt;T&gt;, std::decay_t&lt;U&gt;&gt;;\n    auto impl = compare_impl&lt;ctype&gt;();\n    return impl(a, b);\n}\n\n\n// now specialise for objects for which we want custom behaviour\nstruct Foo {\n\n};\n\ntemplate&lt;&gt;\nstruct compare_impl&lt;Foo&gt;\n{\n    template&lt;class U, class V&gt;\n    auto operator()(U&amp;&amp; a, V&amp;&amp; b) const {\n        cout &lt;&lt; \"In object\" &lt;&lt; endl;\n    }\n};\n\n\nint main(int argc, char const *argv[]) {\n\n    compare(1, 2);\n\n    {\n        vector&lt;int&gt; a, b;\n        compare(a, b);\n    }\n\n    {\n        Foo a, b;\n        compare(a, b);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1508352652, "creation_date": 1508352652, "answer_id": 46817208, "question_id": 46816556, "link": "https://stackoverflow.com/questions/46816556/c-enable-if-t-sfinae/46817208#46817208", "title": "C++ enable_if_t SFINAE", "body": "<p>Using a class template is a valid solution, here's another way to achieve this result with tag dispatching:</p>\n\n<pre><code>    template &lt;class T&gt;\n    void compare(const T &amp; l, const T &amp; r, std::true_type)\n    {\n      cout &lt;&lt; \"In object\" &lt;&lt; endl;\n    }\n\n    template &lt;class T&gt;\n    void compare(const T &amp; l, const T &amp; r, std::false_type)\n    {\n      cout &lt;&lt; \"default\" &lt;&lt; endl;\n    }\n\n    template &lt;class T&gt;\n    void compare(const T &amp; l, const T &amp; r)\n    {\n      compare(l, r, std::is_same&lt;T, Foo&gt;{});\n    }\n</code></pre>\n"}], "owner": {"reputation": 1430, "user_id": 703764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e0f702b5287daf26382d035d915480d8?s=128&d=identicon&r=PG", "display_name": "jack_carver", "link": "https://stackoverflow.com/users/703764/jack-carver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 1, "accepted_answer_id": 46816643, "answer_count": 3, "score": 3, "last_activity_date": 1508352652, "creation_date": 1508350127, "question_id": 46816556, "link": "https://stackoverflow.com/questions/46816556/c-enable-if-t-sfinae", "title": "C++ enable_if_t SFINAE", "body": "<p>I am trying to understand why this piece is code isn't working as expected</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;type_traits&gt;\nusing namespace std;\n\nstruct Foo {\n\n};\n\ntemplate&lt;typename T, typename = void&gt;\nvoid compare(const T&amp;a, const T&amp;b) {\n    cout &lt;&lt; \"default\" &lt;&lt; endl;\n}\n\ntemplate&lt;typename T, std::enable_if_t&lt;std::is_same&lt;T, Foo&gt;::value&gt;&gt;\nvoid compare(const T&amp; a, const T &amp;b) {\n    cout &lt;&lt; \"In object\" &lt;&lt; endl;\n}\n\nint main(int argc, char const *argv[]) {\n    compare(1, 2);\n\n    {\n        vector&lt;int&gt; a, b;\n        compare(a, b);\n    }\n\n    {\n        Foo a, b;\n        compare(a, b);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>In all cases \"default\" is printed. For the last case I would expect that the 2nd function to get invoked. </p>\n"}, {"tags": ["c++", "pointers", "polymorphism", "downcast", "template-argument-deduction"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508350332, "post_id": 46816523, "comment_id": 80580473, "body": "Because the concrete derived type isn&#39;t known at compile time in the general case, you can&#39;t use that type anywhere a type is expected."}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508350455, "post_id": 46816523, "comment_id": 80580536, "body": "is there any type of trick through template programming?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508350527, "post_id": 46816523, "comment_id": 80580572, "body": "Template metaprogramming runs at compile time. Run-time information can&#39;t be taken into account. What you are asking would require the derived types to be known, in other words it falls back to using <code>std::tuple</code> or equivalent."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508350781, "post_id": 46816523, "comment_id": 80580722, "body": "In any case, you will need an instance of any code that would use this system for each possible derived type, which implies templating. If you are not limited in the number of possible derived types, the only practical way of doing this is to cause each new derived type to generate an new instance of the code you want to run. And the easiest way of doing that is to simply add a virtual member function. In all practical cases, the code that depends on the concrete type of your derived type will need to be templated in some way that depends on that type and instantiated for each derived type."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508354323, "post_id": 46816523, "comment_id": 80582610, "body": "Not sure, but maybe <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a> can help you"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508359854, "post_id": 46816523, "comment_id": 80585389, "body": "virtual method or <code>variant&lt;Wrapper &lt;int&gt;, Wrapper &lt;float&gt;&gt;</code> ?"}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1508365825, "post_id": 46816523, "comment_id": 80587929, "body": "how would a virtual method help? can u explain please?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508415530, "post_id": 46816523, "comment_id": 80606675, "body": "Something like <a href=\"https://ideone.com/CjZQow\" rel=\"nofollow noreferrer\">that</a>. <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">Visitor_pattern</a> can complement that to avoid to pollute base class with too many methods (but then hierarchy should be known)."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1508982040, "post_id": 46936128, "comment_id": 80836434, "body": "thanx but what if I want to call a non-polymorphic method? I guess , I need to do the right type casting."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "reply_to_user": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1509010754, "post_id": 46936128, "comment_id": 80848743, "body": "I guess I don&#39;t understand what you&#39;re trying to achieve. Assuming you could do the cast, what were you expecting the code to uses that to look like?"}], "tags": [], "owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "is_accepted": false, "score": 0, "last_activity_date": 1508944547, "creation_date": 1508944547, "answer_id": 46936128, "question_id": 46816523, "link": "https://stackoverflow.com/questions/46816523/finding-the-type-of-a-templated-derived-class/46936128#46936128", "title": "finding the type of a templated derived class", "body": "<p>To answer the problem as stated in the question header, you often don't need to do that, you can use virtual methods instead.</p>\n\n<p>To show how this helps with the issue in the body of the question of passing the right type to operator &lt;&lt; you could:-</p>\n\n<p>add a public friend function to Wrapper_base</p>\n\n<pre><code>friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp; stream, const Wrapper_base&amp; wb)\n{\n    wb.ToStream(stream);\n    return stream;\n}\n</code></pre>\n\n<p>and a pure virtual function \n        virtual void ToStream(std::ostream&amp; stream) const = 0;</p>\n\n<p>(which can be private or public as you see fit)</p>\n\n<p>in template class Wrapper, implement ToStream</p>\n\n<pre><code>virtual void ToStream(std::ostream&amp; stream) const\n{\n    stream &lt;&lt; t_;   \n}\n</code></pre>\n\n<p>and then the following works</p>\n\n<pre><code>std::cout &lt;&lt; *w[0] &lt;&lt; ' ' &lt;&lt; *w[1] &lt;&lt; ' ' &lt;&lt; *w[2];\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508944547, "creation_date": 1508350030, "question_id": 46816523, "link": "https://stackoverflow.com/questions/46816523/finding-the-type-of-a-templated-derived-class", "title": "finding the type of a templated derived class", "body": "<p>I have a vector container holding pointers of a base class:</p>\n\n<pre><code>class Wrapper_base {\n\npublic:\n    virtual ~Wrapper_base() {}\n};\n\ntemplate &lt;typename T&gt;\nclass Wrapper : public Wrapper_base {\n\nprivate:\nT t_;\n\npublic:\n\nWrapper(const T t) : t_(t) {}\n\n};\n\nWrapper&lt;int&gt; a (1);\nWrapper&lt;float&gt; f = 2.0;\nWrapper&lt;double&gt; d = 3.1415;\n\nvector&lt;Wrapper_base*&gt; w;\n\nw.push_back(&amp;a);\nw.push_back(&amp;f);\nw.push_back(&amp;d);\n</code></pre>\n\n<p>now, I am looking for a way to find the value wrapped by the Wrapper function. and the problem is I don't know what is the type of the derived class to down cast the base class pointer.</p>\n\n<pre><code>cout &lt;&lt; ( (Wrapper&lt;ReturnType?&gt;) (w[0]) ) -&gt; t_;\n</code></pre>\n\n<p>is there a way to achieve this? I don't want to check typeid value or use dynamic_cast because the design is supposed to support the general case and not a limited of number of types. I am also not looking for something like std::tuple or bost::tuple.</p>\n\n<p>any suggestion? </p>\n"}, {"tags": ["c#", "c++", "interface", "com", "com-interop"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508355715, "post_id": 46816511, "comment_id": 80583290, "body": "When you&#39;re the caller (like with IFileOperation), you must specify the same number/layout of methods, but you don&#39;t have to define all methods with details if you don&#39;t use it. Plus if the only method you use is the 3rd, say, then you can just define method1(), method2() w/o args (as placeholders) and then the real method3 with the exact same signature. But when someone&#39;s calling you (like when you implement IFileOperationProgressSink ), then you must define all methods with all signatures. Interfaces are just binary contracts."}, {"owner": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508355837, "post_id": 46816511, "comment_id": 80583365, "body": "The 3rd in what order, alphabetical?"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508355894, "post_id": 46816511, "comment_id": 80583396, "body": "Nope, names are just for humans. In the end, an interface is just a table of pointers to methods. Remember: it&#39;s all binary, not like .NET with namespaces or classes names, etc."}, {"owner": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508356158, "post_id": 46816511, "comment_id": 80583538, "body": "Can I find these tables on MSDN or do I have to dig deeper?"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508356535, "post_id": 46816511, "comment_id": 80583701, "body": "They&#39;re defined in an  .idl and/or in a .h from the Windows SDK. For example: IFileOperation is in C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.15063.0\\um\\ShObjIdl_core.h on my PC. The table is the list of methods (and base interface methods, including IUnknown ones). Don&#39;t trust MSDN for that, order of methods is not meaningul, it&#39;s just for documentation."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "edited": false, "score": 0, "creation_date": 1508353717, "post_id": 46817429, "comment_id": 80582269, "body": "It&#39;s not that I &quot;dislike&quot; them, it&#39;s just that I feel like it&#39;s extra work to write them out manually, as I do it, when I personally won&#39;t be calling some of them. I did remove all the functions of IShellItem and it still works. I guess it just depends on the interface in question."}, {"owner": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "reply_to_user": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "edited": false, "score": 0, "creation_date": 1508354371, "post_id": 46817429, "comment_id": 80582633, "body": "I&#39;m still a bit unclear on what you were doing. Note that copying an interface from the documentation and calling it IFileOperation does not make it <i>the</i> <code>IFileOperation</code>. Interface names are arbitrary and for the benefit of the developer. The real name of the IFileOperation in your documentation link is <code>IID {947AAB5F-0A5C-4C13-B4D6-4BF7836FC9F8}</code>. If you make a new interface with a similar layout and you call it IFileOperation, fine - but your interface is whatever IID you assign to it in the IDL - and then you just need to make sure <i>both sides</i> know to use that one, not IID {947...9F8}."}, {"owner": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "edited": false, "score": 0, "creation_date": 1508354526, "post_id": 46817429, "comment_id": 80582716, "body": "I declared the two interfaces and linked them with their respective GUIDs. I&#39;m able to use IFileOperation and IShellItem to delete things but I just realised that if I removed the functions from my declaration of IFileOperations, the ones I&#39;m not calling, then the program crashes but if I do the same to IShellItem, it works just fine."}, {"owner": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "reply_to_user": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "edited": false, "score": 0, "creation_date": 1508358493, "post_id": 46817429, "comment_id": 80584698, "body": "I see. Don&#39;t delete anything from the existing interfaces; even if they &quot;work&quot; today, it might blow up at the next Windows patch, or on older versions of Windows, or future ones, or when you install another shell utility, or on someone else&#39;s machine, or when you do something on Explorer you haven&#39;t tried yet, or when running Word... If a method is missing from the VTable, the shell will eventually be jumping to random memory. If you absolutely don&#39;t have the time to investigate the interface contract more fully, implement methods that returns E_NOIMPL; at least you won&#39;t risk hard-crashing."}], "tags": [], "owner": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "is_accepted": true, "score": 0, "last_activity_date": 1508353488, "creation_date": 1508353488, "answer_id": 46817429, "question_id": 46816511, "link": "https://stackoverflow.com/questions/46816511/com-interface-declaration-and-use-or-lack-thereof/46817429#46817429", "title": "COM interface declaration and use (or lack thereof)", "body": "<p>Your code doesn't run in isolation. A COM interface is a binary contract between code offering a service, and code using those services. The contract is an all-or-nothing agreement (with the caveat that E_NOTIMPL can be used to indicate certain optional methods are not available, <em>if the interface documentation indicates that this is allowed</em>).</p>\n\n<p><code>IFileOperation</code> is not your contract. It belongs to Microsoft. It's used to interact with Microsoft code and other 3rd party code. That code (which you don't own) expects classes implementing the interface to provide a function pointer for each method in the interface (and put it in a VTable). That's what the interface means. You don't get to not provide that function pointer. And that code <em>will call</em> any method in the interface it sees fit to call, according to the documented rules of the interface. It's not your choice. </p>\n\n<p>If you are absolutely sure the method is not called it means you're not using it to interact with the shell. If you don't like some of the methods and you don't interact with the shell (or other 3rd party code) you can always make up your own interface; nobody forces you to borrow someone else's. Make sure both the COM server and Client agree on the interface definition. </p>\n\n<p>On the other hand, if you are interacting with the shell, you don't know which methods the shell will call on you. You have to provide implementations for all of them, even if all you do is return an error. I'm not super-familiar with <code>IFileOperation</code> so read the documentation carefully. It's possible that some methods can return specific error messages (like E_NOTIMPL) to indicate the specific functionality is not available.</p>\n\n<p>The fact that you are getting an invalid access violation strongly suggests one of those methods you dislike is indeed being called.</p>\n"}], "owner": {"reputation": 327, "user_id": 8056359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7dcf947841d1f16a3a2efdf86913900?s=128&d=identicon&r=PG&f=1", "display_name": "user8056359", "link": "https://stackoverflow.com/users/8056359/user8056359"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 46817429, "answer_count": 1, "score": 0, "last_activity_date": 1508353488, "creation_date": 1508349986, "question_id": 46816511, "link": "https://stackoverflow.com/questions/46816511/com-interface-declaration-and-use-or-lack-thereof", "title": "COM interface declaration and use (or lack thereof)", "body": "<p>As I understand it, COM interfaces are abstract classes in C++ but for some reason translate to C# interfaces. Why must one declare all methods of an interface in C#, even when one does not intend to use any of its members? Take for example <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775771(v=vs.85).aspx\" rel=\"nofollow noreferrer\">IFileOperation</a>, I've tried removing function declarations which I have verified are never called in my code but it results in System.AccessViolationException being thrown.</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 1, "creation_date": 1508349931, "post_id": 46816445, "comment_id": 80580239, "body": "You have to add more information. What have you tried, what behaviour do you expect?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1508350061, "post_id": 46816445, "comment_id": 80580307, "body": "<a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8797056"}, "edited": false, "score": 0, "creation_date": 1508350305, "post_id": 46816445, "comment_id": 80580461, "body": "after compression when I read that file for decompressing couple of characters get missed"}, {"owner": {"reputation": 921, "user_id": 4499969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6dprL.png?s=128&g=1", "display_name": "unDeadHerbs", "link": "https://stackoverflow.com/users/4499969/undeadherbs"}, "edited": false, "score": 0, "creation_date": 1508350529, "post_id": 46816445, "comment_id": 80580574, "body": "As noted by melpomene, asking <code>eof</code> doesn&#39;t do the expected behavior. I would use <code>peek</code> to make sure the <code>eof</code> flag is valid. <code>while((inFile.peek(),!inFile.eof()))</code> (The comma operator allows us to peak in the condition without using the returned value.)"}], "owner": {"user_type": "does_not_exist", "display_name": "user8797056"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1508350224, "answer_count": 0, "score": 0, "last_activity_date": 1508349915, "creation_date": 1508349744, "last_edit_date": 1508349915, "question_id": 46816445, "link": "https://stackoverflow.com/questions/46816445/c-not-able-to-read-whole-file", "closed_reason": "Duplicate", "title": "C++ Not able to read whole file", "body": "<p>I am working on an assignment \"Text file compression\" using Bitwise operators. I dunno why it isn't reading the whole file(compressed text file). Whereas simple text file is read as fine why is that?</p>\n\n<pre><code>int main()\n{\n    ifstream inFile;\n    inFile.open(\"Compressed.txt\");\n    int counter = 0;\n    inFile.seekg (0, inFile.end);\n    int length = inFile.tellg();\n    inFile.seekg (0, inFile.beg);\n    cout &lt;&lt; \"The real file size:  \" &lt;&lt; length &lt;&lt; \"\\n\\n\\n\";\n\n    while(!inFile.eof())\n    {\n        char ch;\n        inFile.get(ch);\n        counter ++;\n    }\n    inFile.close();\n    cout &lt;&lt; endl &lt;&lt;\"Number of characters read before eof:  \"&lt;&lt; counter;\n\n    counter = 0;\n    inFile.open(\"Compressed.txt\", ios_base::binary);\n    while(!inFile.eof())\n    {\n        char ch;\n        inFile.get(ch);\n        counter ++;\n    }\n    inFile.close();\n    cout &lt;&lt; endl &lt;&lt;\"Number of characters read before eof as a binary stream:  \"&lt;&lt; counter &lt;&lt; endl &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "random", "srand"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1508349612, "post_id": 46816370, "comment_id": 80580053, "body": "&quot;<i>i didn&#39;t find any solution yet</i>&quot; Did you, at least, tried something? Please show your attempts with explanations of why it doesn&#39;t suit your needs."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1508349668, "post_id": 46816370, "comment_id": 80580081, "body": "What problem did you have when you extended your daily solution to be weekly?"}, {"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 2, "creation_date": 1508349745, "post_id": 46816370, "comment_id": 80580125, "body": "I wonder why so many downvotes"}, {"owner": {"reputation": 964, "user_id": 1964544, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c6dbc75deaf9b7f19597bbb992890ef?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/1964544/joseph"}, "edited": false, "score": 0, "creation_date": 1508349920, "post_id": 46816370, "comment_id": 80580235, "body": "how can i extend solution to weekly if we don&#39;t have any information about the week of the month on tm? maybe i&#39;m missing something"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508350079, "post_id": 46816370, "comment_id": 80580316, "body": "@Joseph Does <a href=\"https://stackoverflow.com/questions/274861/how-do-i-calculate-the-week-number-given-a-date\">this</a> help?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1508350097, "post_id": 46816370, "comment_id": 80580327, "body": "@Joseph You have information about <i>days since January 1</i> (<code>tm_yday</code>), and <i>days since Sunday</i> (<code>tm_wday</code>). One could use such information to detect if week has changed."}, {"owner": {"reputation": 964, "user_id": 1964544, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c6dbc75deaf9b7f19597bbb992890ef?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/1964544/joseph"}, "edited": false, "score": 0, "creation_date": 1508351559, "post_id": 46816370, "comment_id": 80581097, "body": "i&#39;ve posted a possible solution but i don&#39;t think it works"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508353342, "post_id": 46816370, "comment_id": 80582076, "body": "You are heading off into strange directions, my friend. You claim to want  want a new random number generated every &lt;period&gt;. What you are doing is changing the seed and getting the first random number for that new seed. End result is your random number is not random at all. It is easily calculable given the day (or week). Can you please clarify your goal?"}, {"owner": {"reputation": 964, "user_id": 1964544, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c6dbc75deaf9b7f19597bbb992890ef?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/1964544/joseph"}, "edited": false, "score": 0, "creation_date": 1508370547, "post_id": 46816370, "comment_id": 80589180, "body": "sorry i forgot to specify that i use this generated random on a list of X elements to select 1 randomly each day doing:  int selectedID = rand() % list.size();  It&#39;s not important that it&#39;s predictable but i have to retrieve an element in a casual order each day (in my first case).  The second case instead that is the question itself, is: how can i do the same where the rand remains the same for 7 days and change each Tuesday?"}], "answers": [{"comments": [{"owner": {"reputation": 964, "user_id": 1964544, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c6dbc75deaf9b7f19597bbb992890ef?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/1964544/joseph"}, "edited": false, "score": 0, "creation_date": 1508371671, "post_id": 46818236, "comment_id": 80589486, "body": "My code now perfectly works, following your suggestion. Thank you!  I&#39;ll update my first post"}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": true, "score": 1, "last_activity_date": 1508356703, "creation_date": 1508356703, "answer_id": 46818236, "question_id": 46816370, "link": "https://stackoverflow.com/questions/46816370/c-how-to-generate-random-weekly-integer/46818236#46818236", "title": "C++ how to generate random weekly integer", "body": "<p>You are looking for a value which varies at a particular time.</p>\n\n<p>The easiest way to get this to work is to have a  0 time which suits you.</p>\n\n<p>So calculate a Tuesday in January 1970, at exactly the right time.</p>\n\n<p>Then remove that from the current time_t.  That will give you the number of seconds since that time.</p>\n\n<p>All you need to do, is divide by the 24 * 60 * 60 * 7 to get the repeating value for each Tuesday.</p>\n"}], "owner": {"reputation": 964, "user_id": 1964544, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c6dbc75deaf9b7f19597bbb992890ef?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/1964544/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 46818236, "answer_count": 1, "score": -4, "last_activity_date": 1508371801, "creation_date": 1508349492, "last_edit_date": 1508371801, "question_id": 46816370, "link": "https://stackoverflow.com/questions/46816370/c-how-to-generate-random-weekly-integer", "title": "C++ how to generate random weekly integer", "body": "<p>I've created this code that generates a random integer value each day.\nSo today the rand() will return 3 for example each time I call it, tomorrow it generates another value instead.</p>\n\n<pre><code>    std::vector&lt;MyObject&gt; myList = getMyList(); \n    time_t t = time(NULL);\n    tm *lt = localtime(&amp;t);\n    int seed = lt-&gt;tm_mday + lt-&gt;tm_mon + 1 + lt-&gt;tm_year + 1900;\n    srand(seed);\n    dailyRand=rand();\n    int selectedID=rand() % myList.size();\n    MyObject obj = myList.at(selectedID); \n</code></pre>\n\n<p><strong>Now i'm trying to generate a weekly rand instead, but that changes on Tuesday at 00:00 and stay the same for the entire week, until the next.</strong></p>\n\n<p>Unfortunately i didn't find any solution yet. Could someone help me?</p>\n\n<p>UPDATE:</p>\n\n<p>My Attempt (and maybe solution?):</p>\n\n<pre><code>seed = trunc((lt-&gt;tm_yday + (lt-&gt;tm_year * 365)+1) / 7);\nsrand(seed);\nrand();\n</code></pre>\n\n<p>It should get the number of days since year 0 (+1 because 01/01/1990 was Monday and i need Tuesday instead), then the divided by 7 should give me the number of the week from 1900 starting from Tuesday.\nBut i've tried with some values and </p>\n\n<p>UPDATE 2: \n i've achieved it following @mksteve reply</p>\n\n<pre><code>    time_t t = time(NULL);\n    tm *lt = localtime(&amp;t);\n    int firstTuesday = 432000; // Tuesday 1970/01/06 at 00:00\n    int seed = (((t - firstTuesday)/60/60/24))/7;\n    srand(seed);\n    int r=rand();\n</code></pre>\n"}, {"tags": ["c++", "macos"], "answers": [{"comments": [{"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1508349645, "post_id": 46816368, "comment_id": 80580065, "body": "Thank you, such a stupid typo:) I guess it&#39;s just too late for working:D I&#39;d give this a thousand upvotes if I could:D"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1508349703, "post_id": 46816368, "comment_id": 80580099, "body": "Also, I was about to add.  <code>getopt</code> isn&#39;t returning <code>?</code> as you stated, it&#39;s legitimately returning <code>-1</code>.  Your print statement doesn&#39;t know how to print a <code>-1</code> as a character, so it just prints <code>?</code> instead."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1508349879, "post_id": 46816368, "comment_id": 80580212, "body": "Fair point, thanks. But again, mixing -1 with 1, I feel so bad :D But I guess we all have those moments."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 1, "last_activity_date": 1508349476, "creation_date": 1508349476, "answer_id": 46816368, "question_id": 46816186, "link": "https://stackoverflow.com/questions/46816186/getopt-on-macos-10-12/46816368#46816368", "title": "getopt on MacOS 10.12", "body": "<p>You want <code>-1</code>, not positive one:</p>\n\n<p>This line:</p>\n\n<pre><code>while ((option = getopt(argc, argv, \u201cp:c:\u201c)) != 1)\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>while ((option = getopt(argc, argv, \u201cp:c:\u201c)) != -1)\n</code></pre>\n"}], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 46816368, "answer_count": 1, "score": 0, "last_activity_date": 1508349476, "creation_date": 1508348727, "question_id": 46816186, "link": "https://stackoverflow.com/questions/46816186/getopt-on-macos-10-12", "title": "getopt on MacOS 10.12", "body": "<p>I have a weird experience with <code>getopt</code> on MacOS 10.12. The following example:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/event.h&gt;\n#include &lt;sys/time.h&gt;\n\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n\nvoid print_usage_and_exit()\n{\n  std::cout &lt;&lt; \u201cusage: execute-command -p &lt;pid&gt; -c &lt;command&gt;\\n\u201d;\n  exit(EXIT_FAILURE);\n}\n\nint main(int argc, char** argv)\n{\n  int option;\n  pid_t parent = getppid();\n  std::string command;\n  opterr = 0;\n  while ((option = getopt(argc, argv, \u201cp:c:\u201c)) != 1)\n  {\n    printf(\u201cprocessing argument %d\\n\u201d, optind);\n    switch (option)\n    {\n    case \u2018p\u2019:\n      std::cout &lt;&lt; \u201cpid: \u201d &lt;&lt; parent &lt;&lt; \u201c\\n\u201d;\n      break;\n    case \u2018c\u2019:\n      command = optarg;\n      std::cout &lt;&lt; \u201ccommand: \u201d &lt;&lt; command &lt;&lt; \u201c\\n\u201d;\n      break;\n    default:\n      printf(\u201c%c, err: %d, optopt: %c\\n\u201d, option, opterr, optopt);\n      print_usage_and_exit();\n      break;\n    }\n  }\n  return EXIT_SUCCESS;\n }\n</code></pre>\n\n<p>I am compiling it with <code>clang++</code> and then running like <code>./test -c a -p 12</code> but that results in the usage being printed. The issue is that <code>getopt</code> returns <code>?</code> when it parses all of the arguments instead of -1 (as expected from the manpage). Am I doing something wrong?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1508348073, "post_id": 46816005, "comment_id": 80579252, "body": "Unfortunately, there\u2019s no clean way to do this. What you\u2019d need here is essentially a C interpreter."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 6, "creation_date": 1508348139, "post_id": 46816005, "comment_id": 80579277, "body": "Neither C nor C++ are <i>scripting languages</i>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1508348233, "post_id": 46816005, "comment_id": 80579319, "body": "@user0042 - There&#39;s nothing in the standard the precludes an implementation from implementing C like a scripting language. It&#39;s just not common, and frankly the distinction is somewhat arbitrary."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508348336, "post_id": 46816005, "comment_id": 80579376, "body": "@StoryTeller You mean something like emscripten does?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508348370, "post_id": 46816005, "comment_id": 80579399, "body": "@user0042 - I mean something like <a href=\"http://www.drdobbs.com/cpp/ch-a-cc-interpreter-for-script-computing/184402054\" rel=\"nofollow noreferrer\">Ch</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5905796"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508349160, "post_id": 46816005, "comment_id": 80579802, "body": "@user0042 - I didn&#39;t say C was a scripting language."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508349264, "post_id": 46816005, "comment_id": 80579866, "body": "@MinoTaure Well, as you already know that, how do you imagine you can achieve what you&#39;re asking for in an easy way?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508349332, "post_id": 46816005, "comment_id": 80579903, "body": "I don&#39;t think Mino is expecting it to be easy. They wouldn&#39;t have asked the question and probably would have already written the program if they did."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508349410, "post_id": 46816005, "comment_id": 80579949, "body": "@user4581301 Then he&#39;s either asking for a 3rd party resource or a way too broad question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5905796"}, "edited": false, "score": 0, "creation_date": 1508349936, "post_id": 46816005, "comment_id": 80580240, "body": "Do not think that I did not seek, I preferred posed a question with a wide choice of answer for a greater opening to new possibilities"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1508361551, "post_id": 46816005, "comment_id": 80586220, "body": "Have you considered plugins (delayed-load .so or .dll)s?  You compile them separately, and use your system&#39;s dynamic shared library features to use them later."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5905796"}, "edited": false, "score": 0, "creation_date": 1508349276, "post_id": 46816045, "comment_id": 80579872, "body": "Thank you very much ! This is what I need I things"}, {"owner": {"reputation": 1046, "user_id": 3464870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ef858158709a6e7e8b72ae9b699f6e2?s=128&d=identicon&r=PG", "display_name": "gyurix", "link": "https://stackoverflow.com/users/3464870/gyurix"}, "edited": false, "score": 0, "creation_date": 1508349418, "post_id": 46816045, "comment_id": 80579954, "body": "@user4581301 You are right, extended my answer a little bit. Mino Taure, if my answer helped you please leave an upvote and click to the accept answer button, thanks."}], "tags": [], "owner": {"reputation": 1046, "user_id": 3464870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ef858158709a6e7e8b72ae9b699f6e2?s=128&d=identicon&r=PG", "display_name": "gyurix", "link": "https://stackoverflow.com/users/3464870/gyurix"}, "is_accepted": true, "score": 0, "last_activity_date": 1508349279, "last_edit_date": 1508349279, "creation_date": 1508348170, "answer_id": 46816045, "question_id": 46816005, "link": "https://stackoverflow.com/questions/46816005/how-to-run-a-c-script-code-in-a-c-program/46816045#46816045", "title": "How to run a C script code in a C++ program", "body": "<p>The best way for reaching your goal, is to use a C interpreter library. </p>\n\n<p>For example you can use this one: <a href=\"https://github.com/jpoirier/picoc\" rel=\"nofollow noreferrer\">https://github.com/jpoirier/picoc</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5905796"}, "edited": false, "score": 0, "creation_date": 1508430116, "post_id": 46818715, "comment_id": 80616642, "body": "Ok, I will see and will take precautions"}], "tags": [], "owner": {"reputation": 1202, "user_id": 4047084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OTViRK_YA_U/AAAAAAAAAAI/AAAAAAAAFgI/WyZXUA4tFsg/photo.jpg?sz=128", "display_name": "Stuart Buckingham", "link": "https://stackoverflow.com/users/4047084/stuart-buckingham"}, "is_accepted": false, "score": 0, "last_activity_date": 1508358569, "creation_date": 1508358569, "answer_id": 46818715, "question_id": 46816005, "link": "https://stackoverflow.com/questions/46816005/how-to-run-a-c-script-code-in-a-c-program/46818715#46818715", "title": "How to run a C script code in a C++ program", "body": "<p>You could also do it with libjit. Because you are then running the system compiler, any ISO C/C++ code can be compiled (picoc is not fully ISO C complete)</p>\n\n<p><strong>Obligatory disclaimer: Running user supplied code at runtime is very dangerous unless it is properly sandboxed. Maybe consider doing it another way.</strong> </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5905796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1508361774, "accepted_answer_id": 46816045, "answer_count": 2, "score": 0, "last_activity_date": 1508358569, "creation_date": 1508348017, "last_edit_date": 1508348219, "question_id": 46816005, "link": "https://stackoverflow.com/questions/46816005/how-to-run-a-c-script-code-in-a-c-program", "closed_reason": "Needs more focus", "title": "How to run a C script code in a C++ program", "body": "<p>I would like to run a what I called \"script C code\" from string in my C++ program, for exemple : </p>\n\n<pre><code>int main(){\n    // my string (from a file): printf(\"Hello, Stackoverflow!\")\n    RunScript(MyStringScript);\n    return 0;\n}\n</code></pre>\n\n<p>I could use clang or other, but I have no idea how to do that...</p>\n\n<p>PS: The goal is not to make a C interpreter, no, just run a C code to broaden my program.</p>\n"}, {"tags": ["c++", "gcc", "boolean", "clang", "nullptr"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1508347371, "post_id": 46815821, "comment_id": 80578887, "body": "I get a compiler warning when running it in the live compiler you linked. &quot;warning: implicit conversion of nullptr constant to &#39;bool&#39; [-Wnull-conversion]&quot;"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1508347709, "post_id": 46815821, "comment_id": 80579049, "body": "According to the error given by GCC (and MSVC) and the section in the <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">reference</a> I&#39;d say that it is not allowed by the standard (and Clang allows it as an extension)"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1508347726, "post_id": 46815821, "comment_id": 80579061, "body": "It darn well shouldn&#39;t be. One of the whole points of <code>nullptr</code> was to make using a pointer in a boolean context a well-defined thing to do. :-/ But, I can see how it might be correct to at least warn about direct conversion in the form of an assignment like that. Does the compiler still give an error when you have <code>nullptr &amp;&amp; true</code> instead of just <code>nullptr</code>?"}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 1, "creation_date": 1508348249, "post_id": 46815821, "comment_id": 80579329, "body": "Has anyone confirmed clang version of boolean accepting <code>nullptr</code> on a Linux machine by any chance? Though I wouldn&#39;t be surprised if there existed such a case on a Linux machine. I&#39;ve seen weird things over there."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1508352429, "post_id": 46815821, "comment_id": 80581576, "body": "@VG Clang 3.8 <a href=\"https://godbolt.org/g/yS5Nuv\" rel=\"nofollow noreferrer\">gives a warning</a> on Linux for this even without any <code>-W</code> options."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1508354148, "post_id": 46815821, "comment_id": 80582525, "body": "@Omnifarious The point of <code>nullptr</code> was to be <i>more</i> type-safe than just <code>NULL</code>. It shouldn\u2019t implicitly convert to anything except a pointer or some other type that defines a conversion."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1508347920, "post_id": 46815934, "comment_id": 80579166, "body": "The C++11 standard has different verbiage. See <a href=\"https://timsong-cpp.github.io/cppwp/n3337/conv.bool\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/n3337/conv.bool</a>. Is text in your post from a later version of the standard?"}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 1, "creation_date": 1508347925, "post_id": 46815934, "comment_id": 80579168, "body": "Though, why did it work fine on clang 3.8.0 as OP stated? Did it interpret <code>nullptr</code> as a 0 in clang by any chance? (Less likely though)"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1508347943, "post_id": 46815934, "comment_id": 80579183, "body": "Is there a bit missing? I think it should be &quot;So this declaration is correct&quot; (for the first snippet)"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1508348276, "post_id": 46815934, "comment_id": 80579344, "body": "@RSahu seems that was reported as a defect later on: <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1423\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1423</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508348374, "post_id": 46815934, "comment_id": 80579401, "body": "I do not follow, how em-phased quote leads to conclusion that first snippet is wrong."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508348566, "post_id": 46815934, "comment_id": 80579501, "body": "@Slava, it implies that conversion of <code>nullptr_t</code> to <code>bool</code> is not allowed in any other context. Too bad it&#39;s not explicit."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1508348635, "post_id": 46815934, "comment_id": 80579540, "body": "@RSahu but first snippet is exactly what defined there, is it not?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1508348664, "post_id": 46815934, "comment_id": 80579554, "body": "@Slava There was a typo in my post due to problems with internet.:)"}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1508348886, "post_id": 46815934, "comment_id": 80579660, "body": "@VladfromMoscow I hope you fixed your internet mate. Now I&#39;m slightly confused of why clang accepted and assigned 0 from <code>= nullptr</code> to the boolean value. It shouldn&#39;t work as <code>nullptr</code> is specifically for pointers."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 1, "creation_date": 1508349368, "post_id": 46815934, "comment_id": 80579926, "body": "@VG as you can see in the defect report and the thread linked in the answer the C++11 standard originally allowed this conversion and so compilers implemented it - it was later &quot;fixed&quot;, but apparently Clang still treats it only as a warning (presumably to not break some existing code that might have used this?)"}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1508351199, "post_id": 46815934, "comment_id": 80580930, "body": "@UnholySheep very weird indeed. I&#39;m glad they are aware of its effect on boolean. This could cause some confusion. Maybe on the future versions, they may deprecate it towards non-pointer types."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 11, "last_activity_date": 1508348948, "last_edit_date": 1508348948, "creation_date": 1508347755, "answer_id": 46815934, "question_id": 46815821, "link": "https://stackoverflow.com/questions/46815821/assigned-nullptr-to-bool-type-which-compiler-is-correct/46815934#46815934", "title": "Assigned `nullptr` to `bool` type. Which compiler is correct?", "body": "<p>From the C++ Standard (4.12 Boolean conversions)</p>\n\n<blockquote>\n  <p>1 A prvalue of arithmetic, unscoped enumeration, pointer, or pointer\n  to member type can be converted to a prvalue of type bool. A zero\n  value, null pointer value, or null member pointer value is converted\n  to false; any other value is converted to true. <strong>For\n  direct-initialization (8.5), a prvalue of type std::nullptr_t can be\n  converted to a prvalue of type bool; the resulting value is false.</strong></p>\n</blockquote>\n\n<p>So this declaration</p>\n\n<pre><code>bool b( nullptr );\n</code></pre>\n\n<p>is valid and this</p>\n\n<pre><code>bool b = nullptr;\n</code></pre>\n\n<p>is wrong.</p>\n\n<p>I myself pointed out already this problem at <a href=\"https://groups.google.com/a/isocpp.org/forum/#!topic/std-discussion/UXjHK44aSmQ\" rel=\"noreferrer\">isocpp</a></p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 1, "last_activity_date": 1550235529, "last_edit_date": 1550235529, "creation_date": 1550234738, "answer_id": 54709689, "question_id": 46815821, "link": "https://stackoverflow.com/questions/46815821/assigned-nullptr-to-bool-type-which-compiler-is-correct/54709689#54709689", "title": "Assigned `nullptr` to `bool` type. Which compiler is correct?", "body": "<p>This was changed by <a href=\"https://wg21.link/cwg1423\" rel=\"nofollow noreferrer\">DR 1423</a> so that there is no implicit conversion from <code>nullptr</code> to <code>bool</code>.</p>\n\n<p>(The relevant wording changed again very recently by <a href=\"https://wg21.link/cwg1781\" rel=\"nofollow noreferrer\">DR 1781</a> and <a href=\"https://wg21.link/cwg2133\" rel=\"nofollow noreferrer\">DR 2133</a> but only to move the wording, not change what conversions are valid. At the time of writing, the CWG issues list doesn't show that 1781 has been resolved, but the change to the draft is at <a href=\"https://github.com/cplusplus/draft/commit/df3e38121431afd9adcf7dce725a670a235463ea#diff-64a673ab7a20068092a4cf86b36f4334\" rel=\"nofollow noreferrer\">visible in git</a>.)</p>\n\n<p>So it looks to me like Clang 3.8 implements the pre-1423 rule, and GCC 5.4 implements the post-1423 rule which doesn't allow implicit conversions from <code>nullptr</code> to <code>bool</code>.</p>\n\n<p>Current versions of Clang still allow the conversion, but give a <code>-Wnull-conversion</code> warning.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 1, "accepted_answer_id": 46815934, "answer_count": 2, "score": 7, "last_activity_date": 1550235529, "creation_date": 1508347256, "last_edit_date": 1509019887, "question_id": 46815821, "link": "https://stackoverflow.com/questions/46815821/assigned-nullptr-to-bool-type-which-compiler-is-correct", "title": "Assigned `nullptr` to `bool` type. Which compiler is correct?", "body": "<p>I have a following snippet of code that assigned <code>nullptr</code> to <code>bool</code> type.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    bool b = nullptr;\n    std::cout &lt;&lt; b;\n}\n</code></pre>\n\n<p>In <strong>clang 3.8.0</strong> working fine. it's give an output <code>0</code>. <a href=\"http://rextester.com/l/cpp_online_compiler_clang\" rel=\"nofollow noreferrer\">Clang Demo</a></p>\n\n<p>But <strong>g++  5.4.0</strong> give an error:</p>\n\n<pre><code>source_file.cpp: In function \u2018int main()\u2019:\nsource_file.cpp:5:18: error: converting to \u2018bool\u2019 from \u2018std::nullptr_t\u2019 requires direct-initialization [-fpermissive]\n         bool b = nullptr;\n</code></pre>\n\n<p><strong>Which compiler is correct?</strong></p>\n"}, {"tags": ["c++", "windows", "opengl", "screen-capture"], "comments": [{"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508354711, "post_id": 46815498, "comment_id": 80582799, "body": "+1 because it seems like interesting questions overall. but i don&#180;t really get what the key issue is. you pretty much made it clear the built-in cursor handling in desktops won&#180;t cut it so why not &quot;just do it&quot; based on what you want?"}, {"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1508356659, "post_id": 46815498, "comment_id": 80583783, "body": "1) <code>FindWindow()</code> 2) Continuously capture screenshots of the window 3) Transform the point to be relative to the window 4) <code>SendMessage()</code> a mouse click to the window. <i>I&#39;ll give a more elaborate answer later when I have time, if nobody else has done it by then.</i>"}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508388391, "post_id": 46815498, "comment_id": 80593247, "body": "@Andreas I&#39;m not quite sure what you mean by &quot;just do it&quot;. The problem is that I don&#39;t know how to do it. Could you elaborate please?"}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "reply_to_user": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1508391184, "post_id": 46815498, "comment_id": 80594025, "body": "@Vallentin Thank you for the suggestion. I implemented <code>SendNotifyMessage()</code> and found that when I sent a WM_LBUTTONDOWN message to the application it became the foreground window. I set <code>WS_EX_NOACTIVATE</code> on P2 to stop this behaviour however, it still steals focus. I then need to <code>Sleep()</code>, presumably until P2 processes the messages, and then use <code>SetForegroundWindow()</code>. Note that <code>SetFocus</code> and <code>SetActiveWindow()</code> do not result in my program regaining focus (so maybe focus is the wrong word). Are there any methods to remove this delay while keeping the <code>SendMessage()</code> asynchronous?"}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508516574, "post_id": 46815498, "comment_id": 80653974, "body": "I&#180;ll try elaborate. You have P1 and P2. Both have &quot;cursors&quot;. When P1 is in focus the P1 cursor controls P1 and P2 and vice versa. When PX is out of focus its position is retrieved from PY. Is this a problem?"}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508516831, "post_id": 46815498, "comment_id": 80654111, "body": "Regarding updating rendered image in out-of-focus P this should be possible by configuring your window through the compositor. Which compositor are you using for P1 and P2? Are you developing both P1 and P2?"}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508517361, "post_id": 46815498, "comment_id": 80654411, "body": "@Andreas <code>SendNotifyMessage()</code> seems like a simpler solution than having two cursors. Although I still have the issue of having to <code>SetForegroundWindow()</code> after each click I imagine that would still be present if using two cursors."}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508517379, "post_id": 46815498, "comment_id": 80654423, "body": "@Andreas Currently I am moving (dragging with the mouse currently) P2 to a separate desktop. Here it still updates. I tried to research compositing on Windows but couldn&#39;t find anything applicable to me. How would I configure my window through the compositor?"}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508591745, "post_id": 46815498, "comment_id": 80674657, "body": "One solution might be to set P2 as a child process of P1 (<a href=\"https://stackoverflow.com/questions/3459874\">stackoverflow.com/questions/3459874</a>) and use WS_EX_COMPOSITED to slave the update frequency of P2 to P1. Can&#180;t say i&#180;ve done those shananigans myself but might just work..."}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1508680232, "post_id": 46815498, "comment_id": 80696530, "body": "@Andreas It seems that setting P1 as the parent of P2 brings P2 into the foreground. I have tried hiding P2 using <code>ShowWindow()</code> with <code>SW_HIDE</code> but the image displayed inside P1 is then a blank window."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "edited": false, "score": 0, "creation_date": 1508391508, "post_id": 46823301, "comment_id": 80594125, "body": "Thank you for your answer. I have implemented <code>SendNotifyMessage()</code> but I am having issues with the focus of the windows. I have updated my question to reflect this."}, {"owner": {"reputation": 1693, "user_id": 5731861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKaMT.png?s=128&g=1", "display_name": "Felipe Valdes", "link": "https://stackoverflow.com/users/5731861/felipe-valdes"}, "reply_to_user": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "edited": false, "score": 0, "creation_date": 1508391944, "post_id": 46823301, "comment_id": 80594245, "body": "maybe creating a virtual desktop perhaps?"}, {"owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "edited": false, "score": 0, "creation_date": 1508392172, "post_id": 46823301, "comment_id": 80594313, "body": "P2 is already on another virtual desktop. Before I set <code>WS_EX_NOACTIVATE</code> on P2 it would switch to that desktop. Now I have to <code>Sleep()</code> and then <code>SetForegroundWindow()</code> before my program has keyboard and mouse focus."}], "tags": [], "owner": {"reputation": 1693, "user_id": 5731861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKaMT.png?s=128&g=1", "display_name": "Felipe Valdes", "link": "https://stackoverflow.com/users/5731861/felipe-valdes"}, "is_accepted": false, "score": 0, "last_activity_date": 1508390788, "creation_date": 1508390788, "answer_id": 46823301, "question_id": 46815498, "link": "https://stackoverflow.com/questions/46815498/how-can-i-send-mouse-clicks-and-drags-to-another-program-that-is-in-the-backgrou/46823301#46823301", "title": "How can I send mouse clicks and drags to another program that is in the background?", "body": "<p>I think you can use the WIN32API to simulate clicks and also to capture window contents, I've seen it done before in different 3d \"window\" environments and also I've seen it done in things like Termina Server.</p>\n\n<p>So maybe when \"they click you, you pass the click forward\" (while doing coordinate transformation)?</p>\n\n<p>Some links for your perusal:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/gg153548%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/gg153548%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396</a></p>\n\n<p><a href=\"http://www.cplusplus.com/forum/windows/24162/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/windows/24162/</a></p>\n"}], "owner": {"reputation": 85, "user_id": 2471379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2323db611c060ee8cf7b33b1153cad29?s=128&d=identicon&r=PG", "display_name": "user2471379", "link": "https://stackoverflow.com/users/2471379/user2471379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1508580966, "creation_date": 1508346007, "last_edit_date": 1508580966, "question_id": 46815498, "link": "https://stackoverflow.com/questions/46815498/how-can-i-send-mouse-clicks-and-drags-to-another-program-that-is-in-the-backgrou", "title": "How can I send mouse clicks and drags to another program that is in the background?", "body": "<p>I am trying to write a program that takes in the visual output from another program (we'll call it P2) and displays it on a screen in a 3d world.</p>\n\n<p>The flow of the image capture is as follows:</p>\n\n<pre><code>P2 -&gt; BitBlt -&gt; OpenGL Texture -&gt; 3d World\n</code></pre>\n\n<p>I want the user to be able to look around and click on elements in P2 using a crosshair which would be stationary in the middle of the viewport of my program. However, in my implementation it seems that I would need to have 2 cursors - one to control the camera in my 3d world and one to control P2 - which I don't think is trivial.</p>\n\n<p>Additionally, since a window only updates what part of it is visible and I want to have P2 constantly updating in as high resolution as possible, it makes sense to have P2 on a second virtual desktop. This makes the issue of interaction more difficult.</p>\n\n<p>Some solutions I can think of with their downsides:</p>\n\n<ul>\n<li><p>Make a Compositing Window Manager</p>\n\n<ul>\n<li>Sounds like a lot of work and I haven't been able to find any documentation on how this might be done.</li>\n</ul></li>\n<li><p>Have the actual cursor over P2 but get the change in cursor position and use this to move the camera in the 3d world</p>\n\n<ul>\n<li>This wouldn't be a linear transformation from planar to spherical coordinates. Additionally, I'm not sure if the cursor could be on a different Desktop to the current Desktop.</li>\n</ul></li>\n</ul>\n\n<p>I am open to suggestions of alternative capture methods if they would help.\nOne example would be hooking the DirectX or OpenGL output of P2 and, if necessary, tricking it into rendering while not being active. This might allow P2 to be minimized but would not solve the issue of input.</p>\n\n<p>Maybe it would be possible to hook the input functions of P2? Would this even be advised?</p>\n\n<p>Here are some images to illustrate my program.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RRTya.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RRTya.png\" alt=\"Chrome - Straight On\"></a>\n<a href=\"https://i.stack.imgur.com/fjj8o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fjj8o.png\" alt=\"Chrome - To The Side\"></a></p>\n\n<hr>\n\n<h1>Update:</h1>\n\n<p>I have implemented <code>SendNotifyMessage()</code> and found that when I sent a <code>WM_LBUTTONDOWN</code> message to the application it became the foreground window. I set <code>WS_EX_NOACTIVATE</code> on P2 to stop this behaviour however, it still steals focus. I then need to Sleep(), presumably until P2 processes the messages, and then use <code>SetForegroundWindow()</code>. Note that <code>SetFocus()</code> and <code>SetActiveWindow()</code> do not result in my program regaining focus (so maybe focus is the wrong word). Are there any methods to remove this delay while keeping the <code>SendNotifyMessage()</code> asynchronous?</p>\n\n<p>Additionally, in trying to use <code>PostMessage()</code> I found that the coordinate transformation was not correct. However, it worked perfectly in <code>SendNotifyMessage()</code>. What could be causing this behaviour?</p>\n\n<h2>Relevant Code</h2>\n\n<p>After getting the handle to the window I want to capture I run this:</p>\n\n<pre><code>prevWndStyle = GetWindowLong(hwnd, GWL_EXSTYLE);\nSetWindowLong(hwnd, GWL_EXSTYLE, prevWndStyle | WS_EX_NOACTIVATE);\n</code></pre>\n\n<p>After receiving a <code>WM_INPUT</code> message in my <code>WndProc</code> and processing the input I run this code:</p>\n\n<pre><code>if (raw-&gt;data.mouse.usButtonFlags &amp; RI_MOUSE_LEFT_BUTTON_DOWN) {\n    int hitX, hitY;\n    if (gls-&gt;Click(vec3(0.0f, 0.0f, 1.0f), 0, hitX, hitY)) {\n        LPARAM lParam = MAKELPARAM(hitX, hitY);\n        SendNotifyMessage(gls-&gt;ic.GetHWND(), WM_MOUSEMOVE, 0, lParam);\n        SendNotifyMessage(gls-&gt;ic.GetHWND(), WM_LBUTTONDOWN, MK_LBUTTON, lParam);\n        SendNotifyMessage(gls-&gt;ic.GetHWND(), WM_LBUTTONUP, 0, lParam);\n\n        // I want to get rid of these\n        Sleep(100);\n        SetForegroundWindow(gls-&gt;aw.GetHWND());\n    }\n}\n</code></pre>\n\n<h1>Update 2</h1>\n\n<p>I have found that <code>WS_EX_NOACTIVATE</code> stops the switch to the second desktop however when P2 is on the same desktop, P2 is brought to the foreground.</p>\n"}, {"tags": ["c++", "infinite-loop", "fstream"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508387706, "post_id": 46815482, "comment_id": 80593084, "body": "It&#39;s not really fair to criticize a homework assignment that isn&#39;t even finished, but you <i>need</i> to know that this code is <i>atrocious</i>.  If you didn&#39;t know that already, you need to start with some basic tutorial material before worrying about this program."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508388596, "post_id": 46815482, "comment_id": 80593294, "body": "I formatted the code and moved the explanatory comments into it.  I also fixed the title to not refer to the details of the code.  Hope this helps."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 0, "last_activity_date": 1508389303, "creation_date": 1508389303, "answer_id": 46823106, "question_id": 46815482, "link": "https://stackoverflow.com/questions/46815482/why-does-this-file-based-login-program-hang/46823106#46823106", "title": "Why does this file-based login program hang?", "body": "<ol>\n<li>It's invalid to <a href=\"http://en.cppreference.com/w/cpp/io/basic_fstream/basic_fstream\" rel=\"nofollow noreferrer\">construct</a> an <code>fstream</code> with <a href=\"http://en.cppreference.com/w/cpp/io/basic_filebuf/open\" rel=\"nofollow noreferrer\">just <code>ios::binary</code></a> as the mode.  Since you have no error checking, the loop to read from the unopened file doesn't terminate.  (For reference, proper looping <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong?s=1|126.5202\">doesn't involve <code>eof</code></a>.)</li>\n<li>Yes; you need <code>#include&lt;fstream&gt;</code> for <code>std::fstream</code> and <code>#include&lt;iostream&gt;</code> for <code>std::cout</code> and friends.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 8796809, "user_type": "registered", "profile_image": "https://graph.facebook.com/1462370593859313/picture?type=large", "display_name": "Abhinand Hari", "link": "https://stackoverflow.com/users/8796809/abhinand-hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508389303, "creation_date": 1508345959, "last_edit_date": 1508388596, "question_id": 46815482, "link": "https://stackoverflow.com/questions/46815482/why-does-this-file-based-login-program-hang", "title": "Why does this file-based login program hang?", "body": "<ol>\n<li>Why does this code hang after logging in (option 1, then enter user name and password)?</li>\n<li>Do I need to include both <code>fstream</code> and <code>iostream</code>?</li>\n</ol>\n\n\n\n<pre><code>#include&lt;fstream&gt;\n#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;process.h&gt;\n#include&lt;stdlib.h&gt;\nusing namespace std;\n\nclass Admin\n{\n    char Uname[20];\n    char Pass[20];\npublic:\n    Admin()\n    {\n        strcpy(Uname,\"Null\");\n        strcpy(Pass,\"Null\");\n    }\n    Admin(int)\n    {\n        strcpy(Uname,\"Aha\");\n        strcpy(Pass,\"you345\");\n    }\n    Admin(char)\n    {\n        strcpy(Uname,\"Mahi\");\n        strcpy(Pass,\"852963\");\n    }\n    char* GetUname()\n    {return Uname;}\n    char* GetPass()\n    {return Pass;}\n};\n\nint Adchecker()\n{\n    fstream F(\"Admin.dat\",ios::binary);\n    Admin A,B(1),C('A');          // different data via overloads above\n    F.write((char*)&amp;B,sizeof(B)); // so that the file admin has something\n    F.write((char*)&amp;C,sizeof(C));\n    char U[20],P[20];\n    cout&lt;&lt;\"\\nEnter Username:\";\n    cin&gt;&gt;U;\n    int z=0;                      // return flag\n    cout&lt;&lt;\"\\nEnter Password:\";\n    cin&gt;&gt;P;\n    F.write((char*)&amp;A,sizeof(A));\n    F.seekg(0,ios::beg);\n    while(!F.eof())\n    {\n        F.read((char*)&amp;A,sizeof(A));\n        if(strcmp(A.GetUname(),U)==0)\n        {\n            z=2;\n            if(strcmp(A.GetPass(),P)==0)\n            {\n                z=5;\n                break;\n            }\n            else\n                break;\n        }\n\n    }\n    return z;\n    F.close();\n}\n\nint main()\n{\n    int B=0;\n    int c=4,i=0;\n    char A='y';\n    char status[20];\n    ofstream F(\"Log.txt\",ios::app);\n    cout&lt;&lt;\"\\n\\t\\t\\tWELCOME TO.......\\n ~~~***This place!!!***~~~ \";\n    while(A=='y'||A=='Y')\n    {\n        cout&lt;&lt;\"\\nAre you an...\\n1.Admin\\n2.Customer(1/2)???\";\n        cin&gt;&gt;B;\n        switch(B)\n        {\n        case 1:\n                while(c!=5)\n                {\n                    c=Adchecker();\n                    i++;\n                    if(c==5)\n                    {\n                        i=0;\n                        cout&lt;&lt;\"Welcome sire :3\";\n                        break;\n                    }\n                    if(c==2)\n                    {\n                        cout&lt;&lt;\"Your password is wrong...\\nYou have \"&lt;&lt;(3-i)&lt;&lt;\"chances left\";\n                    }\n                    if(c==0)\n                    {\n                        cout&lt;&lt;\"Your Username is incorrect..\\nYou have \"&lt;&lt;(3-i)&lt;&lt;\"chances left\";\n                    }\n                    if(i==3)\n                    {\n                        cout&lt;\"Nope\";\n                        exit(0);\n                    }\n\n                }\n                break;\n        case 2:\n            cout&lt;&lt;\"\\nLater, customer :p\\n\";\n            break;\n        default:\n            cout&lt;&lt;\"good bye\";\n            exit(0);\n        }\n        cout&lt;&lt;\"Again(Y/n)?)\";\n        cin&gt;&gt;A;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", ".net", "pinvoke", "calling-convention"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1508347135, "post_id": 46815170, "comment_id": 80578791, "body": "The CallingConvention is missing, this is Cdecl.  Why you got away with it before is not obvious, presumably you used to build the 64-bit version or used /Gz."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1508349099, "post_id": 46815170, "comment_id": 80579771, "body": "You code is no more or less broken. The system is just warning you now."}, {"owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "edited": false, "score": 0, "creation_date": 1508352092, "post_id": 46815170, "comment_id": 80581384, "body": "I dont think, that a broken stack is not only a warning. Its a serious error."}], "answers": [{"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 1, "last_activity_date": 1508348707, "last_edit_date": 1592644375, "creation_date": 1508348304, "answer_id": 46816079, "question_id": 46815170, "link": "https://stackoverflow.com/questions/46815170/pinvoke-stackimbalance-error-when-using-net-4-0-but-not-when-using-net-2-0/46816079#46816079", "title": "PInvoke StackImbalance error when using .Net 4.0 but not when using .Net 2.0", "body": "<p>The default calling convention for your C++ DLL code is <a href=\"https://msdn.microsoft.com/en-us/library/zkwh89ks.aspx\" rel=\"nofollow noreferrer\"><code>__cdecl</code></a>.</p>\n<p>On the other hand, the default calling convention used by <a href=\"https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention(v=vs.110).aspx\" rel=\"nofollow noreferrer\">PInvoke is <code>StdCall</code></a>, i.e. <a href=\"https://msdn.microsoft.com/en-us/library/zxk0tw93.aspx\" rel=\"nofollow noreferrer\"><code>__stdcall</code></a> for native code (this is the calling convention used to call Win32 APIs).</p>\n<p>So, you have a calling convention mismatch: basically, the caller code and the called code disagree on things like how to pass parameters on the stack, who is responsible for popping arguments from the stack, etc., causing a stack imbalance error, that is correctly detected in your case.</p>\n<p>If you don't want to modify your native C++ DLL, you should specify the calling convention <em>explicitly</em> in your PInvoke declarations, adding a <code>CallingConvention=CallingConvention.Cdecl</code> specification, e.g.:</p>\n<pre><code>[DllImport(&quot;bms.dll&quot;, ..., CallingConvention=CallingConvention.Cdecl)\n...\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 5627004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d69032ea3d27e87d4303b8ae5e3ee07?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Roth", "link": "https://stackoverflow.com/users/5627004/wolfgang-roth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 46816079, "answer_count": 1, "score": 0, "last_activity_date": 1532447937, "creation_date": 1508344866, "last_edit_date": 1508348633, "question_id": 46815170, "link": "https://stackoverflow.com/questions/46815170/pinvoke-stackimbalance-error-when-using-net-4-0-but-not-when-using-net-2-0", "title": "PInvoke StackImbalance error when using .Net 4.0 but not when using .Net 2.0", "body": "<p>I am having a weird problem:\nMy Application was a very old VS project from 2009 / 2011. Today I converted it into an VS 2012 project and was able to compile and run fine. \nThe App consist of an C# part and a C / C++ DLL that is being referenced like this:</p>\n\n<pre><code>class clsBMS_KommInternal\n{\n    // initialization and deinitialization\n    [DllImport(\"bms.dll\", EntryPoint = \"InitBMS_SM\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal unsafe static extern bool _InitBMS_SM(UInt32* p_dwGroesse, ushort** pp_ptrBase, UInt32* p_dwError);\n\n    [DllImport(\"bms.dll\", EntryPoint = \"DeInitBMS_SM\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal unsafe static extern bool _DeInitBMS_SM(UInt32* p_dwError);\n\n    [DllImport(\"bms.dll\", EntryPoint = \"InitHeaderSM\", SetLastError = true, CharSet = CharSet.Auto)]\n    // internal unsafe static extern bool _InitHeaderSM(UInt32* p_dwError);\n    internal unsafe static extern bool _InitHeaderSM(UInt32* p_dwError);\n\n    [DllImport(\"bms.dll\", EntryPoint = \"GetBasePointerBMS_SM\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal unsafe static extern Byte* _GetBasePointerBMS_SM();\n\n    [DllImport(\"bms.dll\", EntryPoint = \"GetBasePointerBMS_SMHeader\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal unsafe static extern Byte* _GetBasePointerBMS_SMHeader();\n\n    // Claim and release Mutex to GDB\n    [DllImport(\"bms.dll\", EntryPoint = \"ClaimMutexBMS_SM\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal static extern bool _ClaimMutexBMS_SM(UInt32 dwTimeout);\n\n    [DllImport(\"bms.dll\", EntryPoint = \"ReleaseMutexBMS_SM\", SetLastError = true, CharSet = CharSet.Auto)]\n    internal static extern bool _ReleaseMutexBMS_SM();\n}\n</code></pre>\n\n<p>If I use the old project settings (with .Net Framework 2.0) the App runs fine.\nBut then I wanted to include another C# Assembly, that required me to switch over to .Net Framework 4.0.</p>\n\n<p>Now my code fails:</p>\n\n<pre><code> UInt32 dwGroesse;\n UInt32 dwFehler;\n int iFehler;\n ushort* pBase;\n // Zuerst die allgemeine Initialisierung\n clsBMS_KommInternal._InitHeaderSM(&amp;dwFehler);\n</code></pre>\n\n<p>Visual Studio gives the following message:</p>\n\n<pre><code>PInvokeStackImbalance occurred\nMessage: Managed Debugging Assistant 'PInvokeStackImbalance' has detected a problem in 'D:\\Wolfgang\\Documents\\Visual Studio 2015\\Projects\\BPara_CS\\WindowsFormsApplication1\\bin\\x86\\Debug\\WindowsFormsApplication1.vshost.exe'.\nAdditional information: Ein Aufruf an die PInvoke-Funktion \"WindowsFormsApplication1!FlexCommInternal.BMS_KommDLLImport.clsBMS_KommInternal::_InitHeaderSM\" hat das Gleichgewicht des Stapels gest\u00f6rt. Wahrscheinlich stimmt die verwaltete PInvoke-Signatur nicht mit der nicht verwalteten Zielsignatur \u00fcberein. \u00dcberpr\u00fcfen Sie, ob die Aufrufkonvention und die Parameter der PInvoke-Signatur mit der nicht verwalteten Zielsignatur \u00fcbereinstimmen.\n</code></pre>\n\n<p>For the non german readers here, i would say, that C# replaces the correct signature of the method in .Net2.0 with a wrong one in .Net4.0</p>\n\n<p>But why?\nAnd how can I correct this error?</p>\n\n<p>Greetings\nWolfgang</p>\n\n<p>Addon:</p>\n\n<p>Source code of the bms library:</p>\n\n<pre><code>// bms.cpp : Definiert den Einstiegspunkt f\u00fcr die DLL-Anwendung.\n//\n\n#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;winbase.h&gt;\n#include \"include/bms.h\"\n//*****************************************************************************\n//\n// Defines\n//\n//*****************************************************************************\n// Name des SharedMemory fuer die Bundmutter-Station\n#define SHMEM_BPARA_ID \"B-PARA-SM\"\n\n// Name des SharedMemory fuer die Header-Struktur\n#define SHMEM_BPARA_HEADER_ID \"B-PARA-SM_HEADER\"\n\n// Name des Mutex fuer den exclusiven Zugriff\n#define SHMEM_BPARA_MUTEX \"MUTEX_BPARA_SM\"\n\n\n\n#define TIMEOUT_MUTEX_BPARA_SM INFINITE \n\n\n//*****************************************************************************\n//\n// globale Variable\n//\n//*****************************************************************************\nHANDLE hMutexSM    = 0 ; \n\nHANDLE hSMHeader    = 0 ;\nHANDLE hSMBPARA       = 0 ;\n\n// Zeiger auf das SharedMemory fuer die Header-Struktur\n// ToDo: Typ definieren\npsBMSDLLHEADER pSMBParaHeader = 0 ;\nLPVOID pSharedMemBPara;   // Zeiger auf den Shared-Memory-Bereich\n\n// internal functions\nstatic BOOL CheckOffset(DWORD dwOffsetHighByte);\nstatic BOOL CreateMutexBMS(DWORD* p_dwError);\nstatic BOOL OpenMutexBMS(DWORD* p_dwError);\n\n\n\n\n\n\nBOOL APIENTRY DllMain( HANDLE hModule, \n                      DWORD  ul_reason_for_call, \n                      LPVOID lpReserved\n                      )\n{\n    switch (ul_reason_for_call)\n    {\n    case DLL_PROCESS_ATTACH:\n    case DLL_THREAD_ATTACH:\n    case DLL_THREAD_DETACH:\n    case DLL_PROCESS_DETACH:\n        break;\n    }\n    return TRUE;\n}\n\nHANDLE OpenSharedMemory(DWORD DesiredAccess,BOOL bInheritHandle,LPCTSTR lpName,VOID ** location)\n{\n    HANDLE hMapFile;\n    LPVOID pBuf;\n\n    hMapFile = OpenFileMapping(\n        FILE_MAP_ALL_ACCESS,   // read/write access\n        bInheritHandle,                 // do not inherit the name\n        lpName);               // name of mapping object \n\n    if (hMapFile == NULL || hMapFile == INVALID_HANDLE_VALUE) \n    { \n        return NULL;\n    }\n    pBuf = (LPVOID) MapViewOfFile(hMapFile,   // handle to map object\n        FILE_MAP_ALL_ACCESS, // read/write permission\n        0,                   \n        0,                   \n        0);           \n\n    if (pBuf == NULL) \n    { \n        return NULL;\n    }\n    *location = pBuf;\n    return hMapFile;\n} \n\nHANDLE CreateSharedMemory(DWORD flProtect,DWORD MaximumSizeHigh,DWORD MaximumSizeLow,LPCTSTR lpName,VOID ** location)\n{\n    HANDLE hMapFile;\n    VOID *pBuf;\n\n    hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL,flProtect, MaximumSizeHigh,MaximumSizeLow,lpName);\n\n    if (hMapFile == NULL || hMapFile == INVALID_HANDLE_VALUE) \n    { \n        return NULL;\n    }\n    pBuf = (LPVOID) MapViewOfFile(hMapFile,   // handle to map object\n        FILE_MAP_ALL_ACCESS, // read/write permission\n        0,\n        0,\n        0);\n\n    if (pBuf == NULL) \n    { \n        return NULL;\n    }\n    *location = pBuf;\n    return hMapFile;\n\n}\n\n\n\n//****************************************************************************\n//\n//  static BOOL InitHeaderSM()\n//  \n//  SharedMemory fuer Header anlegen bzw. laden\n//  \n//  Parameter:\n//      keiner\n//\n//  Return:\n//      TRUE, wenn alles ok,\n//      FALSE, bei Fehler\n//\n//****************************************************************************\nBOOL InitHeaderSM(DWORD* p_dwError)\n{\n    LPVOID  pHeader;\n\n\n    * p_dwError = kBMSSuccess;\n\n    // Gibt es bereits ein SharedMemory fuer den Header , so bekomme ich hier das Handle zurueck\n    hSMHeader = OpenSharedMemory(PAGE_READWRITE, FALSE, SHMEM_BPARA_HEADER_ID, (void **)&amp;pHeader);\n\n    // Es gab kein SharedMenory\n    if(NULL == hSMHeader)\n    {\n        // SharedMenory explizit anlegen und initialisieren\n        hSMHeader= CreateSharedMemory(PAGE_READWRITE, 0, sizeof(sBMSDLLHEADER), SHMEM_BPARA_HEADER_ID, (void **)&amp;pHeader);\n\n        // wenn SharedMenory vorhanden, initialisieren\n        if(NULL != hSMHeader &amp;&amp; NULL != pHeader)\n        {\n            //            ClaimMutexBMS(INFINITE);\n            {\n                memset(pHeader,0x00,sizeof(sBMSDLLHEADER));\n                pSMBParaHeader = (psBMSDLLHEADER) pHeader;\n                pSMBParaHeader-&gt;dwVersion   = SHMEM_BMS_SM_VERSION + sizeof(sBMSDLLHEADER);  // momentan gueltige Version der BMS\n                pSMBParaHeader-&gt;dwClients ++;\n\n            }\n            //            ReleaseMutexBMS();\n        }\n        else\n        {\n            // error creating shared memory\n            pHeader = NULL;\n            pSMBParaHeader = (psBMSDLLHEADER)pHeader;\n\n            if(NULL != p_dwError)\n            {\n                *p_dwError = kBMSErrorNotCreated;\n            }\n            return FALSE;\n\n        }\n    }\n    else\n    {\n        // es gibt bereits ein SharedMemory fuer den Header\n        // Zeiger auf den Header des SharedMenory wurde bereits durch\n        // OpenSharedMemory gesetzt\n\n        pSMBParaHeader = (psBMSDLLHEADER)pHeader;\n        //        ClaimMutexBMS(INFINITE);\n        {\n            pSMBParaHeader-&gt;dwClients ++;\n        }\n        //        ReleaseMutexBMS();\n\n        return TRUE;\n\n    }\n    pSMBParaHeader = (psBMSDLLHEADER)pHeader;\n    return TRUE;\n\n\n}\n//****************************************************************************\n//\n//  static BOOL DeInitHeaderSM()\n//  \n//  SharedMemory entladen, bzw. loeschen\n//  \n//  Parameter:\n//      keiner\n//\n//  Return:\n//      TRUE, wenn alles ok,\n//      FALSE, bei Fehler\n//\n//****************************************************************************\nBOOL DeInitHeaderSM(DWORD* p_dwError)\n{\n    BOOL bErg;\n    bErg  =TRUE;\n    *p_dwError = kBMSSuccess;\n    //    ClaimMutexBMS(INFINITE);\n    {\n        pSMBParaHeader-&gt;dwClients --;\n\n        if(pSMBParaHeader-&gt;dwClients == 0)\n        {\n            if (hSMBPARA != 0)\n            {\n                CloseHandle(hSMBPARA);\n                hSMBPARA = 0;\n                pSMBParaHeader = NULL;\n            }\n\n            CloseHandle(hSMHeader);\n            hSMHeader = 0;\n            pSMBParaHeader = NULL;\n        }\n    }\n    //    ReleaseMutexBMS();\n\n\n    return bErg;\n\n}\n\n//****************************************************************************\n//\n//  Die Funktion erzeugt den shared memory-Bereich f\u00fcr die BMS und \n//  initialisiert mit NULL.\n//  \n//    Parameter:\n//    p_dwSize - Pointer zur Gr\u00f6\u00dfenangabe f\u00fcr die BMS \n//    pp_bBase - Pointer zur R\u00fcckgabe des Base Pointers\n//    p_dwError - Pointer zur R\u00fcckgabe des Error-Codes\n//    \n//    Return:\n//    BOOL - TRUE bei erfolgreichem \u00d6ffnen bzw. Erzeugung und Initialisierung, \n//           FALSE bei einem Fehler. siehe ErrorCode in p_dwError.\n//      \n//****************************************************************************\nBOOL InitBMS_SM(DWORD* p_dwSize, BYTE** pp_bBase, DWORD* p_dwError)\n{\n    BOOL bErg = FALSE;\n    if(NULL != p_dwError)\n        *p_dwError = kBMSSuccess;\n\n    // Ueberpruefen auf Parameter\n    if(NULL == p_dwSize || NULL == pp_bBase)\n    {\n        if(NULL != p_dwError)\n            *p_dwError = kBMSErrorInvalidParam;\n        return bErg;\n    }\n\n    //    ClaimMutexBMS(INFINITE);\n\n    // Gibt es bereits ein SharedMemory, so bekomme ich hier das Handle zurueck\n    hSMBPARA= OpenSharedMemory(PAGE_READWRITE, FALSE, SHMEM_BPARA_ID, &amp;pSharedMemBPara);\n\n    // Es gab kein SharedMenory\n    if(NULL == hSMBPARA)\n    {\n        // SharedMenory explizit anlegen und initialisieren\n        hSMBPARA= CreateSharedMemory(PAGE_READWRITE, 0, *p_dwSize, SHMEM_BPARA_ID, &amp;pSharedMemBPara);\n\n        // wenn SharedMenory vorhanden, initialisieren\n        if(NULL != hSMBPARA &amp;&amp; NULL != pSharedMemBPara)\n        {\n            // Zeiger auf den Header des SharedMenory Durch Aufruf abgedeckt \n\n\n            // Adresse der BMS zurueck geben \n            *pp_bBase = (BYTE*)pSharedMemBPara;\n\n            // Header-Infos beschreiben\n            pSMBParaHeader-&gt;dwClients       = 1;                  // ich habe es angelegt, also 1\n            pSMBParaHeader-&gt;dwUsers         = 1;                  // InitBMS wird gerade ausgefuehrt\n            pSMBParaHeader-&gt;dwGroesse       = *p_dwSize;          // Groesse, so wie es der User moechte\n\n            // initialize BMS (beginning after header of sharedmem)\n            memset((BYTE*)pSharedMemBPara,0,*p_dwSize);\n            bErg =TRUE;\n        }\n        else\n        {\n            // error creating shared memory\n            *pp_bBase = NULL;\n\n            if(NULL != p_dwError)\n            {\n                *p_dwError = kBMSErrorNotCreated;\n            }\n            bErg = FALSE;\n        }\n    }\n    else\n    {\n        // es gibt bereits ein BMS\n\n        // Zeiger auf den Header des SharedMenory wurde bereits durch\n        // OpenSharedMemory gesetzt\n\n        // Versionskontrolle\n        if (pSMBParaHeader-&gt;dwVersion != SHMEM_BMS_SM_VERSION + sizeof(sBMSDLLHEADER))\n        {\n            if(NULL != p_dwError)\n                *p_dwError = kBMSErrorInvalidDLLVersion;\n            bErg = FALSE;\n        }\n        else\n\n        {\n            // aktuelle Groesse des BMS-Speichers zurueckgeben\n\n            *p_dwSize = pSMBParaHeader-&gt;dwGroesse;\n            // Anzahl Benutzer um eins erhoehen\n            pSMBParaHeader-&gt;dwUsers++;\n\n            *pp_bBase = (BYTE*)pSharedMemBPara;\n\n            if(NULL != p_dwError)\n                *p_dwError = kBMSErrorInitAlreadyDone;\n            bErg = TRUE;\n        }\n    }\n    //    ReleaseMutexBMS();\n    return bErg;\n}\n\n//****************************************************************************\n//\n//  BOOL DeInitBMS(DWORD* p_dwError)\n//  \n//  Das BMS-Sharedmemory freigeben\n//  \n//  Parameter:\n//    p_dwError - Pointer zur R\u00fcckgabe des Error-Codes\n//    \n//    Return:\n//    BOOL - TRUE bei erfolgreichem \u00d6ffnen bzw. Erzeugung und Initialisierung, \n//           FALSE bei einem Fehler. siehe ErrorCode in p_dwError.\n//****************************************************************************\nBOOL DeInitBMS_SM(DWORD* p_dwError)\n{\n    BOOL bErg;\n    * p_dwError = kBMSSuccess;\n    //    ClaimMutexBMS(INFINITE);\n\n    pSMBParaHeader-&gt;dwUsers--;\n    if (pSMBParaHeader-&gt;dwUsers == 0 )\n    {\n        CloseHandle(hSMBPARA);\n        hSMBPARA = NULL;\n        pSMBParaHeader = NULL;\n    }\n\n    bErg = TRUE;\n    //    ReleaseMutexBMS();\n    return bErg;\n\n}\n\n//****************************************************************************\n//\n//  BYTE* GetBasePointerBMS()\n//  \n//  Den Zeiger auf den Anfang des SharedMemory zurueckgeben\n//  \n//  Parameter:\n//      keiner\n//\n//  Return:\n//      Byte-Zeiger\n//\n//\n//****************************************************************************\nBYTE* GetBasePointerBMS_SM()\n{\n    return (BYTE*) pSharedMemBPara;\n}\n\n//****************************************************************************\n//\n//  BYTE* GetBasePointerBMSHeader()\n//  \n//  Den Zeiger auf den Anfang des SharedMemory zurueckgeben\n//  \n//  Parameter:\n//      keiner\n//\n//  Return:\n//      Byte-Zeiger\n//\n//\n//****************************************************************************\nBYTE* GetBasePointerBMS_SMHeader()\n{\n    return (BYTE*) pSMBParaHeader;\n}\n\n\n// Read or write Bytes, Words, DWords or many Bytes from BMS_SM\nBYTE ReadByteBMS_SM                      (DWORD dwOffset, DWORD* dwError)\n{\nreturn 0;\n}\nWORD ReadWordBMS_SM                      (DWORD dwOffset, DWORD* dwError)\n{\nreturn 0;\n}\nDWORD ReadDwordBMS_SM                    (DWORD dwOffset, DWORD* dwError)\n{\nreturn 0;\n}\nBOOL ReadManyBMS_SM                      (DWORD dwOffset, BYTE* p_bTarget, DWORD dwLength, DWORD* p_dwError)\n{\nreturn 0;\n}\nBOOL ReadManyBMS_SMDownward             (DWORD dwOffset, BYTE* p_bTarget, DWORD dwLength, DWORD* p_dwError)\n{\nreturn 0;\n}\nBOOL WriteByteBMS_SM                     (DWORD dwOffset, BYTE bWert, DWORD* dwError)\n{\nreturn 0;\n}\nBOOL WriteWordBMS_SM                     (DWORD dwOffset, WORD wWert, DWORD* dwError)\n{\nreturn 0;\n}\nBOOL WriteDwordBMS_SM                    (DWORD dwOffset, DWORD dwWert, DWORD* dwError)\n{\nreturn 0;\n}\nBOOL WriteManyBMS_SM                     (DWORD dwOffset, BYTE* p_bSource, DWORD dwLength, DWORD* p_dwError)\n{\nreturn 0;\n}\nBOOL WriteManyBMS_SMDownward            (DWORD dwOffset, BYTE* p_bSource, DWORD dwLength, DWORD* p_dwError)\n{\nreturn 0;\n}\n\n\n//****************************************************************************\n//\n//  Die Funktion erzeugt ein Mutex f\u00fcr den Zugriff auf das shared memory GDB.\n//  \n//    Parameter:\n//    p_dwError - Pointer zur R\u00fcckgabe des Error-Codes\n//    \n//      Return:\n//      TRUE - Mutex erfolgreich erzeugt\n//      FALSE - Fehler beim Erzeugen\n//      \n//****************************************************************************\nBOOL CreateMutexBPARA_SM(DWORD* p_dwError)\n{\n    // requests MUTEX_ALL_ACCESS access to the existing mutex object\n    hMutexSM = CreateMutex(NULL, FALSE, SHMEM_BPARA_MUTEX);\n\n    if(NULL == hMutexSM)\n    {\n        if(NULL != p_dwError)\n            *p_dwError = kBMSErrorMutexNotCreated;\n        return FALSE;\n    }\n    return TRUE;\n}\n\n//****************************************************************************\n//\n//  Die Funktion \u00f6ffnet das Mutex f\u00fcr den Zugriff auf das shared memory GDB.\n//  Das Mutex muss zuvor mit CreateMutexGDB erzeugt werden. Andernfalls wird \n//  FALSE zur\u00fcckgegeben.\n//  \n//    Parameter:\n//    p_dwError - Pointer zur R\u00fcckgabe des Error-Codes\n//    \n//      Return:\n//      TRUE - Mutex erfolgreich ge\u00f6ffnet\n//      FALSE - Mutex nicht ge\u00f6ffnet\n//      \n//****************************************************************************\nBOOL OpenMutexBPARA_SM(DWORD* p_dwError)\n{\n    // The first two parameters are ignored (see RTX 6.0 documentation)\n    hMutexSM = OpenMutex(NULL, FALSE, SHMEM_BPARA_MUTEX);\n\n    if(NULL == hMutexSM)\n    {\n        if(NULL != p_dwError)\n            *p_dwError = kBMSErrorMutexNotOpened;\n        return FALSE;\n    }\n    return TRUE;\n\n}\n\n//****************************************************************************\n//\n//  Die Funktion wartet auf die Freigabe des Mutex f\u00fcr den Zugriff auf die GDB. \n//  \n//    Parameter:\n//    dwTimeout - Maximale Wartezeit in ms. Nach Verstreichen der Zeit wird\n//                die Mutexanforderung abgebrochen.\n//    \n//      Return:\n//      TRUE - Mutex erfolgreich angefordert\n//      FALSE - Mutex nicht angefordert\n//      \n//****************************************************************************\nBOOL ClaimMutexBMS_SM(DWORD dwTimeout)\n{\n    DWORD dwWaitResult;\n    DWORD dwError;\n\n    if(NULL == hMutexSM)\n    {\n        if(!OpenMutexBPARA_SM(&amp;dwError))\n            CreateMutexBPARA_SM(&amp;dwError);\n    }\n\n    dwWaitResult = WaitForSingleObject(hMutexSM, dwTimeout);\n    switch (dwWaitResult) \n    {\n        // The thread got mutex ownership.\n    case WAIT_OBJECT_0: \n        return TRUE;\n\n        // Cannot get mutex ownership due to time-out.\n    case WAIT_TIMEOUT: \n        return FALSE; \n\n        // Got ownership of the abandoned mutex object.\n    case WAIT_ABANDONED: \n        return FALSE; \n    }\n\n    return FALSE;\n}\n//****************************************************************************\n//\n//  Die Funktion gibt das Mutex f\u00fcr den Zugriff auf die GDB wieder frei.\n//  \n//    Parameter:\n//      keine\n//    \n//      Return:\n//      TRUE - Mutex freigegeben\n//      FALSE - Mutex nicht freigegeben\n//      \n//****************************************************************************\nBOOL ReleaseMutexBMS_SM()\n{\n    if(NULL != hMutexSM)\n    {\n        return ReleaseMutex(hMutexSM);\n    }\n    else\n        return FALSE;\n}\n</code></pre>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1508344757, "post_id": 46815062, "comment_id": 80577587, "body": "The only thing I can think of is the fact that you&#39;re incrementing the pointer <i>before</i> doing the null check. That would invoke undefined behavior on an empty string. I don&#39;t know why it&#39;s an issue here. Altering your code in Godbolt to check before incrementing doesn&#39;t seem to fix the issue, either."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508345081, "post_id": 46815062, "comment_id": 80577763, "body": "Pretty clearly a bug. Even if that code was invalid, this is not the message MSVC should give you."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1508345225, "creation_date": 1508345225, "answer_id": 46815272, "question_id": 46815062, "link": "https://stackoverflow.com/questions/46815062/errsehsetup-exception-stack-overflow-when-compiling-constexpr-code-in-msvc/46815272#46815272", "title": "&quot;err:seh:setup_exception stack overflow&quot; when compiling constexpr code in MSVC", "body": "<p>I was able to get it to compile by removing the reference qualifier from the function signature (<a href=\"https://godbolt.org/g/eYquBd\" rel=\"nofollow noreferrer\">Godbolt</a>):</p>\n\n<pre><code>constexpr bool f(const char *s) {//No longer passes a pointer by reference\n  while(*s) { //This avoids undefined behavior when the passed string is empty\n    ++s;\n  }\n  return true;\n}\n\nconstexpr bool g(const char *s) {\n  return f(s);\n}\n\nint main() {\n  static_assert(g(\"x\"), \"\");\n}\n</code></pre>\n\n<p>I don't know why passing the pointer by reference causes this error, though, and I maintain that this is probably a bug in MSVC's compiler. You should post the bug to their <a href=\"https://developercommunity.visualstudio.com/spaces/8/index.html\" rel=\"nofollow noreferrer\">bug tracking forum</a>.</p>\n"}], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 46815272, "answer_count": 1, "score": 3, "last_activity_date": 1508345225, "creation_date": 1508344475, "question_id": 46815062, "link": "https://stackoverflow.com/questions/46815062/errsehsetup-exception-stack-overflow-when-compiling-constexpr-code-in-msvc", "title": "&quot;err:seh:setup_exception stack overflow&quot; when compiling constexpr code in MSVC", "body": "<p>Compiling the following code (<a href=\"https://godbolt.org/g/rsLgBm\" rel=\"nofollow noreferrer\">godbolt</a>):</p>\n\n<pre><code>constexpr bool f(const char *&amp;s) {\n  do {\n    ++s;\n  } while (*s);\n  return true;\n}\n\nconstexpr bool g(const char *s) {\n  return f(s);\n}\n\nint main() {\n  static_assert(g(\"x\"), \"\");\n}\n</code></pre>\n\n<p>gives this error on MSVC:</p>\n\n<pre><code>err:seh:setup_exception stack overflow 1552 bytes in thread 0058 eip 000000007b48dad8 esp 0000000000131000 stack 0x130000-0x131000-0x1130000\n</code></pre>\n\n<p>while other compilers (GCC and Clang) happily accept it.</p>\n\n<p>Why doesn't this code compile on MSVC and how can I fix it?</p>\n"}, {"tags": ["c++", "compilation", "cmake", "libraries"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 8796713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a977ed4c49fb4ae9c22c7c49c74fdd21?s=128&d=identicon&r=PG&f=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/8796713/i%c3%b1igo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508349640, "creation_date": 1508349640, "answer_id": 46816413, "question_id": 46814996, "link": "https://stackoverflow.com/questions/46814996/android-studio-trying-to-compile-a-c-multiple-libraries-code-with-interdepend/46816413#46816413", "title": "Android Studio: Trying to compile a c++ multiple libraries code with interdependencies", "body": "<p>Okay I found the answer...</p>\n\n<p>target_include_directories(profile PRIVATE\n                            ${base_dir}\n                            \"..\"\n                            \"../..\"\n                            \"../base/include\"\n                            \"../../base/include\"\n                            \"../../../base/include\"\n                            \"./include\"\n                            )</p>\n\n<p>Moving from PRIVATE to PUBLIC did the trick so I am now able to access to the include folders.\nStill cant understand the real use of the PRIVATE word, why define an include directory for afterwards not being able to use it? It has no sense...</p>\n"}], "owner": {"reputation": 59, "user_id": 8796713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a977ed4c49fb4ae9c22c7c49c74fdd21?s=128&d=identicon&r=PG&f=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/8796713/i%c3%b1igo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508349640, "creation_date": 1508344230, "last_edit_date": 1508344777, "question_id": 46814996, "link": "https://stackoverflow.com/questions/46814996/android-studio-trying-to-compile-a-c-multiple-libraries-code-with-interdepend", "title": "Android Studio: Trying to compile a c++ multiple libraries code with interdependencies", "body": "<h2>This is my code structure:</h2>\n\n<ul>\n<li>main executable(CMakeLists.txt)\n|\n\n<ul>\n<li>base library(CMakeLists.txt)</li>\n<li>profiler library(CMakeLists.txt)</li>\n<li>log library(CMakeLists.txt)</li>\n</ul></li>\n</ul>\n\n<p>Every library is using the base library.\nThe main is using every library.</p>\n\n<h2>Actually this is the CMakeLists.txt of the main executable:</h2>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n# build native_app_glue as a static lib\nadd_library(native_app_glue STATIC\n    ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11 -Wall -fno-exceptions -fno-rtti\")\n\n# build the ndk-helper library\nset(ndk_helper_dir ../../../../common/ndk_helper)\nadd_subdirectory(${ndk_helper_dir} ndk_helper)\n\n# build the base library\nset(base_dir ../../../../common/base)\nadd_subdirectory(${base_dir} base)\n\n# build the profile library\nset(profile_dir ../../../../common/profile)\nadd_subdirectory(${profile_dir} profile)\n\n# build the log library\nset(log_dir ../../../../common/log)\nadd_subdirectory(${log_dir} log)\n\n# Export ANativeActivity_onCreate(),\u00e2\u20ac\u00a8\n# Refer to: https://github.com/android-ndk/ndk/issues/381.\nset(CMAKE_SHARED_LINKER_FLAGS\n    \"${CMAKE_SHARED_LINKER_FLAGS} -u ANativeActivity_onCreate\")\n\n# now build app's shared lib\nadd_library(MainActivity SHARED\n    MainActivity.cpp\n    MainRenderer.cpp)\n\ntarget_include_directories(MainActivity PRIVATE\n    ${ANDROID_NDK}/sources/android/cpufeatures\n    ${ANDROID_NDK}/sources/android/native_app_glue\n    ${ndk_helper_dir}\n    ${base_dir}\n    ${profile_dir}\n    ${log_dir}\n    )\n\n# add lib dependencies\ntarget_link_libraries(MainActivity\n    android\n    native_app_glue\n    atomic\n    EGL\n    GLESv2\n    log\n    ndk-helper\n    base\n    profile\n    log\n    )\n</code></pre>\n\n<p>I am unable to add include paths on compile time from any of the libraries to the base library. I am tryint to do it in this way:</p>\n\n<p>On the profile library corresponding CMakeLists.txt</p>\n\n<pre><code>include_directories(        \"..\"\n                            \"../..\"\n                            \"../base/include\"\n                            \"../../base/include\"\n                            \"../../../base/include\"\n                            \"./include\"\n                            \"include\"\n                            )\n\ntarget_include_directories(profile PRIVATE\n                            ${base_dir}\n                            \"..\"\n                            \"../..\"\n                            \"../base/include\"\n                            \"../../base/include\"\n                            \"../../../base/include\"\n                            \"./include\"\n                            )\n</code></pre>\n\n<p>And at compile time I am having an error saying that for example \"something.h\" which is located on the base library isnt found. If I instead change for \"../../base/include/something.h\" everything works...</p>\n\n<p>I would like to add those default auto paths for include folders. Is there a  way to do it? How can i do it?</p>\n\n<p>I have been struggling through this for long time. Any help is appreciated.</p>\n"}, {"tags": ["c++", "node.js", "google-street-view", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 9819256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a1bd94bf31a2a58349cdf87d00bae9?s=128&d=identicon&r=PG&f=1", "display_name": "TrueCP5", "link": "https://stackoverflow.com/users/9819256/truecp5"}, "is_accepted": false, "score": 0, "last_activity_date": 1563802437, "last_edit_date": 1563802437, "creation_date": 1563787134, "answer_id": 57142818, "question_id": 46814915, "link": "https://stackoverflow.com/questions/46814915/downloading-google-street-view-panoramas-programmatically-from-a-url-request/57142818#57142818", "title": "Downloading google street view panoramas programmatically from a URL request", "body": "<p>Streetview panoramas are divided into an equal grid from an equirectangular image. <a href=\"http://www.newtonscannon.com/2014/01/26/capturing-spherical-scenes-from-google-streetview/\" rel=\"nofollow noreferrer\">This article</a> explains how to get the url of every tile. For zoom level 5 (the highest resolution) there are 26 by 13 tiles (each tile being 512x512). All that is left is to download every image and draw each one onto a large empty image to their respective place using their position on the grid.</p>\n\n<p><strong>Note: by doing this you will be breaking Google's terms of service</strong></p>\n"}], "owner": {"reputation": 339, "user_id": 1524637, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/343a2291134bced0aa8272eb68c6fbe7?s=128&d=identicon&r=PG", "display_name": "Taylor Bishop", "link": "https://stackoverflow.com/users/1524637/taylor-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1563802437, "creation_date": 1508343964, "question_id": 46814915, "link": "https://stackoverflow.com/questions/46814915/downloading-google-street-view-panoramas-programmatically-from-a-url-request", "title": "Downloading google street view panoramas programmatically from a URL request", "body": "<p>I'm currently trying to download the equirectangular images Google displays in their 360 view of Google street view to an image file so that I may display them in VR in Unreal Engine 4. I've tried a few things - </p>\n\n<p>Requesting the panorama tiles from a constructed URL <a href=\"https://developers.google.com/maps/documentation/javascript/examples/streetview-custom-simple\" rel=\"nofollow noreferrer\">in the format described in the Street View API</a>. This ends up returning a file-not-found error for any pano ID that isn't the example one outlined. Perhaps I'm using the wrong method of getting a panorama ID? I used the <a href=\"https://developers.google.com/maps/documentation/streetview/metadata\" rel=\"nofollow noreferrer\">following example</a> to extract the pano ID and plugged that into the URL with tileX = tileY = 0 and Zoom level of 1 to no avail.</p>\n\n<p>I've also tried <a href=\"https://developers.google.com/maps/documentation/streetview/intro#size\" rel=\"nofollow noreferrer\">downloading separate 2D images taken at 90-degree angles</a> but when I go to display them on the inside of a cube, the images are misaligned.</p>\n\n<p>There's a tool called <a href=\"https://github.com/ncsoft/Unreal.js-core\" rel=\"nofollow noreferrer\">UnrealJS</a> that I've been looking into in order to grab the panorama data and save it off, but my inexperience with Node.js and server-side JS has made this a very confusing, fruitless endeavor. Other programs I've looked into that allow you to extract these panoramic images use canvas tags to request the maps API and then save what Google's API writes to the canvas into a buffer. Is this the way to go? UnrealJS does support a bastardized version of HTML that I may be able to use - this, however, is less than ideal.</p>\n"}, {"tags": ["c++", "type-conversion", "include", "header-files"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508344035, "post_id": 46814855, "comment_id": 80577198, "body": "Your error doesn&#39;t have anything to do with the header files included. What type is <code>intpart?</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1508344069, "post_id": 46814855, "comment_id": 80577221, "body": "You need to differentiate between compile time and run-time, but in either case you should never have included that header  - it&#39;s an implemantation feature that might change or be removed at any time."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1508344891, "post_id": 46814855, "comment_id": 80577657, "body": "More reasons not to <code>#include &lt;bits&#47;stdc++.h&gt;</code>: <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\" title=\"why should i not include bits stdc h\">stackoverflow.com/questions/31816095/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1508344170, "post_id": 46814932, "comment_id": 80577279, "body": "By adding cmath it works, but the c++ reference(<a href=\"http://www.cplusplus.com/reference/cmath/modf/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cmath/modf</a>) says to include &lt;math.h&gt;"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 3, "creation_date": 1508344234, "post_id": 46814932, "comment_id": 80577322, "body": "@KarinaK cplusplus.com has a rather poor reputation regarding its accuracy. Anyway, see my previous comment about the difference between the two headers."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 2, "creation_date": 1508344837, "post_id": 46814932, "comment_id": 80577626, "body": "@Karina K  <code>math.h</code> is deprecated in modern versions of the C++ standard. The <i>correct</i> C++ header is <code>cmath</code>. Also; stay away from cplusplus.com - too much bad info there. Prefer cppreference.com. See also: <a href=\"http://en.cppreference.com/w/cpp/header\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/header</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 1, "creation_date": 1508349362, "post_id": 46814932, "comment_id": 80579921, "body": "@KarinaK it says to include cmath (look at the upper right corner), but indeed shows math.h in the example. The example seems to show C code, maybe because they explain the C and the C++ version on one page."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 11, "last_activity_date": 1508344600, "last_edit_date": 1508344600, "creation_date": 1508344025, "answer_id": 46814932, "question_id": 46814855, "link": "https://stackoverflow.com/questions/46814855/which-header-file-should-i-use-instead-of-include-bits-stdc-h/46814932#46814932", "title": "Which header file should I use instead of #include &lt;bits/stdc++.h&gt;", "body": "<p>The solution for problems like this is to consult a suitable reference for the function in question. One well-regarded C++ reference site is <a href=\"http://en.cppreference.com/\" rel=\"noreferrer\">cppreference.com</a>. In this case, its <a href=\"http://en.cppreference.com/w/cpp/numeric/math/modf\" rel=\"noreferrer\">reference for <code>modf</code></a> starts with:</p>\n\n<blockquote>\n  <p>Defined in header <code>&lt;cmath&gt;</code></p>\n</blockquote>\n\n<p>There's your answer.</p>\n\n<p>Compare the above reference for the C++ version (a family of overloaded functions) defined in the C++ header <code>&lt;cmath&gt;</code> with <a href=\"http://en.cppreference.com/w/c/numeric/math/modf\" rel=\"noreferrer\">reference for the C version</a> defined in the C header <code>&lt;math.h&gt;</code>:</p>\n\n<pre><code>float modff( float arg, float* iptr );\ndouble modf( double arg, double* iptr );\nlong double modfl( long double arg, long double* iptr );\n</code></pre>\n\n<p>C doesn't have function overloading, so <code>modf</code> in <code>&lt;math.h&gt;</code> is only the <code>double</code> version. <code>&lt;cmath&gt;</code>, being C++, declares all the 3 C++ overloads (<code>float</code>, <code>double</code>, <code>long double</code>), of which you're using the last one.</p>\n\n<p>This is actually one of the reasons to stay clear of C standard library headers (<code>&lt;*.h&gt;</code>) and use C++ standard library ones (<code>&lt;c*&gt;</code>).</p>\n"}], "owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6038, "favorite_count": 1, "closed_date": 1541073385, "accepted_answer_id": 46814932, "answer_count": 1, "score": 2, "last_activity_date": 1508344600, "creation_date": 1508343781, "last_edit_date": 1508344206, "question_id": 46814855, "link": "https://stackoverflow.com/questions/46814855/which-header-file-should-i-use-instead-of-include-bits-stdc-h", "closed_reason": "Duplicate", "title": "Which header file should I use instead of #include &lt;bits/stdc++.h&gt;", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n//#include &lt;bits/stdc++.h&gt;\n#include &lt;iomanip&gt;      // std::setprecision\n#include &lt;math.h&gt; \nusing namespace std;\n</code></pre>\n\n<p>I want to remove the header <code>#include &lt;bits/stdc++.h&gt;</code>, because it significantly slows down my compile time. </p>\n\n<p>When I remove it, I get the following error: </p>\n\n<pre><code>error: cannot convert \u2018long double*\u2019 to \u2018double*\u2019 for argument \u20182\u2019 to \u2018double modf(double, double*)\u2019\n       fractpart = modf(val, &amp;intpart);\n</code></pre>\n\n<p>I think the problem is with a missing header file, but have no clue which one it is.</p>\n\n<p>The code I'm getting the error for is:</p>\n\n<pre><code>fractpart = modf(val, &amp;intpart);\nif (fractpart != 0) {\n    throw Error(\"ERR\");\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stringstream"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1508343862, "post_id": 46814812, "comment_id": 80577076, "body": "Always check <code>if (t)</code> before reading from it to see if the state is still good."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1508343876, "post_id": 46814812, "comment_id": 80577087, "body": "You are not reading the file.  Just read the file into a std::string and be done with it.  You can google how."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1508343902, "post_id": 46814812, "comment_id": 80577103, "body": "@AnonMail OP is actually reading the file by using <code>rdbuf()</code>."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1508344003, "post_id": 46814812, "comment_id": 80577168, "body": "@RickAstley my bad.  But why read it into a std::stringstream?"}, {"owner": {"reputation": 648, "user_id": 1981061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf8c5be4f273295132879954ce1e7b11?s=128&d=identicon&r=PG", "display_name": "Griffin", "link": "https://stackoverflow.com/users/1981061/griffin"}, "edited": false, "score": 0, "creation_date": 1508344024, "post_id": 46814812, "comment_id": 80577186, "body": "<code>rdbuf()</code> will give you a pointer to <code>filebuf</code>. Please read on <a href=\"http://www.cplusplus.com/reference/fstream/ifstream/rdbuf/\" rel=\"nofollow noreferrer\">how to read from <code>rdbuf()</code></a>."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1508344026, "post_id": 46814812, "comment_id": 80577187, "body": "@AnonMail Ask the OP, not me :P."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1508344274, "post_id": 46814812, "comment_id": 80577339, "body": "See this link on how to read an entire file into a std::string.  Check out the 8th answer in this post: <a href=\"https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\" title=\"what is the best way to read an entire file into a stdstring in c\">stackoverflow.com/questions/116038/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8794200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da04dd8621d87f7a405ef0c5bdb55e9?s=128&d=identicon&r=PG&f=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/8794200/fabian"}, "edited": false, "score": 0, "creation_date": 1508345091, "post_id": 46814939, "comment_id": 80577767, "body": "Thank you for the fast reply! However, i would like to make use of the function&#39;s ability to read spaces in between strings too.  for now, im just try to read with one line of string in the text file. i had some difficulty with reading spaces in text file using while and for loops before, and i came across this reading of text file without using loops."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5, "user_id": 8794200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da04dd8621d87f7a405ef0c5bdb55e9?s=128&d=identicon&r=PG&f=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/8794200/fabian"}, "edited": false, "score": 0, "creation_date": 1508345245, "post_id": 46814939, "comment_id": 80577855, "body": "@fabian, in that case, you need to use <code>std::getline</code>. <code>std::getline(u, text);</code>. That will include any spaces but will exclude the ending newline character."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1508345344, "last_edit_date": 1508345344, "creation_date": 1508344052, "answer_id": 46814939, "question_id": 46814812, "link": "https://stackoverflow.com/questions/46814812/stdstringstream-output-does-not-work-the-same-as-stdstring/46814939#46814939", "title": "std::stringstream output does not work the same as std::string", "body": "<blockquote>\n<pre><code>std::ifstream u(\"plaintext.txt\"); //getting content from plainfile.txt, string is text\nstd::stringstream plaintext;\nplaintext &lt;&lt; u.rdbuf();\ntext = plaintext.str(); //to get text\n</code></pre>\n</blockquote>\n\n<p>When you use the above lines of code to extract <code>text</code>, you are getting any whitespace characters in the file too -- most likely a newline character. Simplify that block of code to:</p>\n\n<pre><code>std::ifstream u(\"plaintext.txt\");\nu &gt;&gt; text;\n</code></pre>\n\n<p>Same change needs to be done to read the cipher.</p>\n\n<p>If you need to include the whitespaces but exclude the newline character, use <code>std::getline</code>.</p>\n\n<pre><code>std::ifstream u(\"plaintext.txt\");\nstd::getline(u, text);\n</code></pre>\n\n<p>If you need to be able to deal with multiline text, you will need to change your program a bit.</p>\n"}], "owner": {"reputation": 5, "user_id": 8794200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da04dd8621d87f7a405ef0c5bdb55e9?s=128&d=identicon&r=PG&f=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/8794200/fabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 46814939, "answer_count": 1, "score": -1, "last_activity_date": 1508345344, "creation_date": 1508343665, "question_id": 46814812, "link": "https://stackoverflow.com/questions/46814812/stdstringstream-output-does-not-work-the-same-as-stdstring", "title": "std::stringstream output does not work the same as std::string", "body": "<p>i am currently working on a program whereby i can substitute alphabets in a text file(called plaintext.txt), along with a keyfile, and create a ciphertext when i run a command to mix them together. The working code is as shown below:</p>\n\n<pre><code>string text;\nstring cipherAlphabet;\n\nstring text = \"hello\";\nstring cipherAlphabet = \"yhkqgvxfoluapwmtzecjdbsnri\";\n\nstring cipherText;\nstring plainText;\n\nbool encipherResult = Encipher(text, cipherAlphabet, cipherText);\nbool decipherResult = Decipher(cipherText, cipherAlphabet, plainText);  \n\ncout &lt;&lt; cipherText;\ncout &lt;&lt; plainText;\n</code></pre>\n\n<p>Output for the above code will be below</p>\n\n<pre><code>fgaam\nhello\n</code></pre>\n\n<p>However, i want to convert my \"text\" and \"cipherAlphabet\" into a string where i obtain the both of them through different text files.  </p>\n\n<pre><code>string text;\nstring cipherAlphabet;\n\n\nstd::ifstream u(\"plaintext.txt\"); //getting content from plainfile.txt, string is text\nstd::stringstream plaintext;\nplaintext &lt;&lt; u.rdbuf();\ntext = plaintext.str(); //to get text\n\n\nstd::ifstream t(\"keyfile.txt\"); //getting content from keyfile.txt, string is cipherAlphabet\nstd::stringstream buffer;\nbuffer &lt;&lt; t.rdbuf();\ncipherAlphabet = buffer.str(); //get cipherAlphabet;*/\n\nstring cipherText;\nstring plainText;\n\nbool encipherResult = Encipher(text, cipherAlphabet, cipherText);\nbool decipherResult = Decipher(cipherText, cipherAlphabet, plainText);  \n\ncout &lt;&lt; cipherText;\ncout &lt;&lt; plainText;\n</code></pre>\n\n<p>However if i do this, i get no output and no error? Is there anyone out there that can help me with this please? Thank you!!</p>\n"}, {"tags": ["c++", "sorting", "counting-sort"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508343573, "post_id": 46814723, "comment_id": 80576941, "body": "Please <a href=\"https://stackoverflow.com/posts/46814723/edit\">edit</a> your question and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1508344219, "post_id": 46814723, "comment_id": 80577309, "body": "<code>int C[k + 1];</code> is not legal C++. There are no VLAs. You may want to use std::vector instead."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344326, "post_id": 46814723, "comment_id": 80577371, "body": "I&#39;m restricted from using vectors unfortunately"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508355732, "post_id": 46814723, "comment_id": 80583300, "body": "Restricted from using vectors but not restricted from using non-standard non-portable constructs? You are taking an interesting class (from the entomological perspective)."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344030, "post_id": 46814845, "comment_id": 80577194, "body": "So i changed that section and still got the same output, however I did change the last for loop to <code>for(int i = size; i &gt;= 0; i++)</code> and I got <code>0 0 0  1 2 2 3 3 4 5</code> which is close but it has an extra 0 at the beginning and not the 6 at the end."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344069, "post_id": 46814845, "comment_id": 80577220, "body": "@zsloan112.: <code>i=size-1</code> You have iterated one extra time that&#39;s why geeting an extra 0. Make it frm <code>i=size-1</code> and <code>for(int i = size-1; i &gt;= 0; i--)</code>"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344146, "post_id": 46814845, "comment_id": 80577269, "body": "As soon as I changed it to <code>i = size - 1</code> i got a segmentation fault"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344174, "post_id": 46814845, "comment_id": 80577284, "body": "@zsloan112.: You should decrement <code>i</code>. Check <code>for(int i = size-1; i &gt;= 0; i--)</code>"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344247, "post_id": 46814845, "comment_id": 80577328, "body": "That is what I have: <code>for(int i = size - 1; i &gt;= 0; i--)</code>"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508344328, "post_id": 46814845, "comment_id": 80577373, "body": "@zsloan112.: Sitting here I can&#39;t debug your code. Just use the debugger or post the full code...There manybe othr reason why your code is failing...BTW as n.m. said you should use vector here ..VLA is not allowed."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508350499, "post_id": 46814845, "comment_id": 80580558, "body": "I added my main function to the original post"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1508351260, "post_id": 46814845, "comment_id": 80580962, "body": "Works perfectly. Thanks for all your help!"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1508350917, "last_edit_date": 1508350917, "creation_date": 1508343766, "answer_id": 46814845, "question_id": 46814723, "link": "https://stackoverflow.com/questions/46814723/not-getting-correct-sorted-array-with-a-counting-sort/46814845#46814845", "title": "Not getting correct sorted array with a counting sort", "body": "<pre><code>for(int i = 1; i &lt; k + 1; i++){\n    C[i] = C[i] + C[i - 1];\n}\n</code></pre>\n\n<p>Otherwise you are getting undefined behavior.</p>\n\n<p>Also in the output array formation </p>\n\n<pre><code>for(int i = size-1; i &gt;= 0; i--){\n    B[C[A[i]]] = A[i];\n    C[A[i]] = C[A[i]] - 1;\n}\n</code></pre>\n\n<p>You got the algorithm right. Now just dry run a bit. That way you can find these kind of errors in your code.</p>\n\n<p><sub>As the OP used the <code>0-indexing</code>. I am using the same in my answer</sub></p>\n\n<p><sub>In case you can't use vector ..allocate memory using <code>new</code>. Check the reference a bit for this.</sub></p>\n\n<p><sub>Another thing is whenever you code counting sort always try to prove that you can hold the range in the auxiliary arrays. That helps.</sub></p>\n\n<h3>Counting sort code:</h3>\n\n<pre><code>void countingSort(int A[], int B[], int k, int size){\n    int C[k + 1];\n    for(int i = 0; i &lt; k + 1; i++){\n        C[i] = 0;\n    }\n    for(int i = 0; i &lt; size; i++){\n        C[A[i]] = C[A[i]] + 1;\n    }\n    for(int i = 0; i &lt; k + 1; i++){\n        C[i] = C[i] + C[i - 1];\n    }\n    for(int i = size-1; i &gt;= 0; i--){\n        B[C[A[i]]] = A[i];\n        C[A[i]] = C[A[i]] - 1;\n    }\n}\n</code></pre>\n\n<h3>main code</h3>\n\n<pre><code>int sizeCount1 = 10;\nint countOne[10] = {2, 0, 3, 2, 5, 4, 3 ,6, 1, 0};\n\ncout &lt;&lt; \"Counting Sort Version 1 (Pre Sort)\" &lt;&lt; endl;\n\nfor(int i = 0; i &lt; sizeCount1; i++){\n    countTemp[i] = 0;\n}\nint max = 0;\nfor(int i = 0; i &lt; sizeCount1; i++){\n    if(countOne[i] &gt; max){\n        max = countOne[i];\n    }\n}\n\ncout &lt;&lt; \"Max: \" &lt;&lt; max &lt;&lt; endl;\n\n\ncountingSort(countOne, countTemp, max, sizeCount1);\ncout &lt;&lt; \"Counting Sort Version 1 (Post Sort)\" &lt;&lt; endl;\nfor(int i = 0; i &lt; 10; i++){\n    cout &lt;&lt; countTemp[i] &lt;&lt; \" \";\n}\n\ncout &lt;&lt; endl &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 46814845, "answer_count": 1, "score": 1, "last_activity_date": 1508350917, "creation_date": 1508343325, "last_edit_date": 1508350534, "question_id": 46814723, "link": "https://stackoverflow.com/questions/46814723/not-getting-correct-sorted-array-with-a-counting-sort", "title": "Not getting correct sorted array with a counting sort", "body": "<p>I am working on the Counting Sort Algorithm currently. I have set up two temporary arrays <code>C</code> and <code>B</code>. <code>C</code> is to count the number of times a  number in the original array appears. It then uses the elements in <code>C</code> to place the elements in <code>A</code> (original array) into the correct location in <code>B</code>. I have my <code>countingSort</code> function print out <code>C</code> after each loop to ensure that it has the correct values in it (which it does, I'm testing it with a small sample size). The problem occurs when I go to insert the elements of <code>A</code> into <code>B</code> with the help of <code>C</code>.</p>\n\n<p>Here is my function for <code>countingSort</code>:</p>\n\n<p>Note: I pass an array of 10 integers <code>2 0 3 2 5 4 3 6 10</code> to the function,the temporary array <code>B</code>, the <code>maximum</code> value (so I know what size to make <code>C</code>) and the size of array <code>A</code></p>\n\n<pre><code>void countingSort(int A[], int B[], int k, int size){\n    int C[k + 1];\n    cout &lt;&lt; \"K: \" &lt;&lt; k &lt;&lt; endl;\n\n    for(int i = 0; i &lt; k + 1; i++){\n        C[i] = 0;\n    }\n\n\n\n    for(int i = 0; i &lt; k + 1; i++){\n        cout &lt;&lt; C[i] &lt;&lt; \" \";\n    }\n\n\n    for(int i = 0; i &lt; size; i++){\n        C[A[i]] = C[A[i]] + 1;\n    }\n\n    cout &lt;&lt; endl;\n\n\n    for(int i = 0; i &lt; k + 1; i++){\n        cout &lt;&lt; C[i] &lt;&lt; \" \";\n    }\n\n\n    for(int i = 0; i &lt; k + 1; i++){\n        C[i] = C[i] + C[i - 1];\n    }\n\n\n    cout &lt;&lt; endl;\n    for(int i = 0; i &lt; k + 1; i++){\n        cout &lt;&lt; C[i] &lt;&lt; \" \";\n    }\n\n\n\n    for(int i = size + 1; i &gt; 0; i--){\n        B[C[A[i]]] = A[i];\n        C[A[i]] = C[A[i]] - 1;\n    }\n\n\n    cout &lt;&lt; endl;\n    for(int i = 0; i &lt; size; i++){\n        cout &lt;&lt; B[i] &lt;&lt; \" \";\n    }\n\n\n}\n</code></pre>\n\n<p>As you can see I print out <code>C</code> after each loop, so after the first loop it should show that <code>C</code> is <code>0 0 0 0 0 0</code>, which it does print out correctly. After the next for loop it <code>C</code> should be <code>2 1 2 2 1 1 1</code>, which it also prints out correctly. Next it adds the elements of <code>C</code> up to get <code>2 3 5 7 8 9 10</code>, which is also printed out correctly. Now my issue arises here when I try to put the elements of <code>A</code> into <code>B</code>. It is supposed to print <code>0 0 1 2 2 3 3 4 5 6</code>, but it prints <code>0 0 0 1 0 2 3 3 4  5</code> instead. </p>\n\n<p>I have tried playing around with my indexes on the last for loop, but just cant seem to figure out what is causing <code>B</code> to be incorrect. How could I fix this issue? My overall goal is to get the count sort to work for a randomly generated array of size <code>40</code> with numbers between 1 and 25.</p>\n\n<p>Edit: Main Function where I call <code>countingSort</code>:</p>\n\n<pre><code>int sizeCount1 = 10;\nint countOne[10] = {2, 0, 3, 2, 5, 4, 3 ,6, 1, 0};\n\ncout &lt;&lt; \"Counting Sort Version 1 (Pre Sort)\" &lt;&lt; endl;\n\nfor(int i = 0; i &lt; sizeCount1; i++){\n    cout &lt;&lt; countOne[i] &lt;&lt; \" \";\n}\n\ncout &lt;&lt; endl;\n\n\nfor(int i = 0; i &lt; sizeCount1; i++){\n    countTemp[i] = 0;\n}\n\n\n\nint max = 0;\nfor(int i = 0; i &lt; sizeCount1; i++){\n    if(countOne[i] &gt; max){\n        max = countOne[i];\n    }\n}\n\ncout &lt;&lt; \"Max: \" &lt;&lt; max &lt;&lt; endl;\n\n\ncountingSort(countOne, countTemp, max, sizeCount1);\n\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Counting Sort Version 1 (Post Sort)\" &lt;&lt; endl;\n\n\nfor(int i = 1; i &lt; 10; i++){\n    cout &lt;&lt; countTemp[i] &lt;&lt; \" \";\n}\n\ncout &lt;&lt; endl &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "qt", "styles"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1508344521, "post_id": 46814701, "comment_id": 80577470, "body": "use  pobjWidget-&gt;raise()"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1508345133, "post_id": 46814701, "comment_id": 80577785, "body": "@Programmer_ARM, raise isn&#39;t good enough, it just promotes the widget calling it to the very top, I need to define the order"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1508346362, "post_id": 46814701, "comment_id": 80578424, "body": "But if you know the required widget order from back to front <code>a, b, c, ..., z</code> you can simply do <code>a-&gt;raise(); b-&gt;raise(); ...; z-&gt;raise();</code>, right?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1508357833, "post_id": 46814701, "comment_id": 80584361, "body": "If you have to resort to manual layering your ui is probably not structured correctly. That&#39;s the wrong way to fix it IMO"}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1508446134, "post_id": 46814701, "comment_id": 80625036, "body": "Why is child/parent relationship not sufficient for your application?"}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "is_accepted": true, "score": 5, "last_activity_date": 1508425253, "creation_date": 1508425253, "answer_id": 46832968, "question_id": 46814701, "link": "https://stackoverflow.com/questions/46814701/qt-correct-way-to-set-z-or-z-index-programmatically/46832968#46832968", "title": "Qt correct way to set z or z-index (Programmatically)", "body": "<p>I assume you have a handle to every widget you want to order. If raise and lower are too crude for you, you can use</p>\n\n<pre><code>void QWidget::stackUnder(QWidget *w)\n</code></pre>\n\n<p>Quoting from the docs: \"Places the widget under w in the parent widget's stack.\nTo make this work, the widget itself and w must be siblings.\"</p>\n\n<p>The important bit is that they must be siblings, i.e. need to have the same QObject as parent.</p>\n"}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7711, "favorite_count": 0, "accepted_answer_id": 46832968, "answer_count": 1, "score": 3, "last_activity_date": 1508425253, "creation_date": 1508343226, "last_edit_date": 1508343890, "question_id": 46814701, "link": "https://stackoverflow.com/questions/46814701/qt-correct-way-to-set-z-or-z-index-programmatically", "title": "Qt correct way to set z or z-index (Programmatically)", "body": "<p>I want to ensure that objects are layer correctly, I've read online that the way to achieve this is by setting the z-index style.</p>\n\n<p>However so far I haven't been able to do this, I want to set the style programmatically.</p>\n\n<p>I've tried:</p>\n\n<pre><code>  pobjWidget-&gt;setStyleSheet(\"z-index: 5\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  pobjWidget-&gt;setStyleSheet(\"z: 5\");\n</code></pre>\n\n<p>Both of these result in \"Unknown property z-index\" or \"Unknown property z\" being displayed in the console.</p>\n\n<p>pobjWidget is an a pointer to a QWidget.</p>\n\n<p>The reason I need this is that I'm rendering widgets with a transparent background onto live video widgets and I need to ensure that the widgets on top do not flicker, this is an attempt to illuminate the flicker.</p>\n"}, {"tags": ["c++", "linked-list", "iterator"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 2, "creation_date": 1508343098, "post_id": 46814605, "comment_id": 80576658, "body": "Where is the code that uses your linked list?"}, {"owner": {"reputation": 144, "user_id": 7931772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf1fc1338fb0cdb5d9d9a5ae7da6ef6?s=128&d=identicon&r=PG&f=1", "display_name": "RH6", "link": "https://stackoverflow.com/users/7931772/rh6"}, "edited": false, "score": 0, "creation_date": 1508343144, "post_id": 46814605, "comment_id": 80576692, "body": "This is almost certainly an off by one error"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 2, "creation_date": 1508343243, "post_id": 46814605, "comment_id": 80576760, "body": "This <code>Node&lt;T&gt; newNode = Node&lt;T&gt;(input);</code> will be destroyed when the scope ends."}, {"owner": {"reputation": 79, "user_id": 8700590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57288ed4c6be199f192634595cb5230?s=128&d=identicon&r=PG&f=1", "display_name": "A. Floyd", "link": "https://stackoverflow.com/users/8700590/a-floyd"}, "edited": false, "score": 0, "creation_date": 1508343680, "post_id": 46814605, "comment_id": 80577000, "body": "I am successfully pushing elements into the list, but I cannot retrieve elements from the iterator"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1508345194, "post_id": 46814605, "comment_id": 80577817, "body": "No, definitely not. Use a debugger and see for yourself."}, {"owner": {"reputation": 79, "user_id": 8700590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57288ed4c6be199f192634595cb5230?s=128&d=identicon&r=PG&f=1", "display_name": "A. Floyd", "link": "https://stackoverflow.com/users/8700590/a-floyd"}, "edited": false, "score": 0, "creation_date": 1508345491, "post_id": 46814605, "comment_id": 80578003, "body": "Alright, I&#39;ve seen the issue, how to I make sure the variable doesn&#39;t become out of scope?"}, {"owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "edited": false, "score": 0, "creation_date": 1508346901, "post_id": 46814605, "comment_id": 80578683, "body": "You have to allocate the node dynamically using new (remind to delete it when it becomes useless)"}, {"owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "edited": false, "score": 0, "creation_date": 1508346980, "post_id": 46814605, "comment_id": 80578730, "body": "The answer from dcrivelli is also true as the first element inserted is both head and tail"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508351658, "post_id": 46814605, "comment_id": 80581145, "body": "<code>Node&lt;T&gt; newNode = Node&lt;T&gt;(input);</code> does not compile.  You need to use <code>Node&lt;T&gt; *newNode = Node&lt;T&gt;(input);</code> instead.  And then get rid of <code>&amp;</code> when assigning <code>head</code> and <code>tail</code>."}], "answers": [{"tags": [], "owner": {"reputation": 227, "user_id": 447227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oj0Pv.jpg?s=128&g=1", "display_name": "8znr", "link": "https://stackoverflow.com/users/447227/8znr"}, "is_accepted": false, "score": 1, "last_activity_date": 1508344057, "last_edit_date": 1508344057, "creation_date": 1508343669, "answer_id": 46814813, "question_id": 46814605, "link": "https://stackoverflow.com/questions/46814605/iterator-pointer-does-not-reference-the-first-element/46814813#46814813", "title": "Iterator pointer does not reference the first element", "body": "<p>The <code>push_back()</code> implementation requires that if <code>head</code> is null it has to be set, the same for the <code>push_front</code> with respect to the <code>tail</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1508353418, "last_edit_date": 1508353418, "creation_date": 1508351598, "answer_id": 46816972, "question_id": 46814605, "link": "https://stackoverflow.com/questions/46814605/iterator-pointer-does-not-reference-the-first-element/46816972#46816972", "title": "Iterator pointer does not reference the first element", "body": "<p>You are allocating your node objects on the stack, so they are destroyed automatically when they go out of scope.  You are storing pointers to those objects, which leaves the pointers dangling when the objects are destroyed.  You need to allocate the nodes on the heap using <code>new</code> instead.</p>\n\n<p>Also, <code>push_front()</code> is not updating <code>tail</code> when the list is empty, and is not updating an existing <code>head</code> to point at the new node when the list is not empty.  Similar with <code>push_back()</code>.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Node\n{\n    T data;\n    Node *left;\n    Node *right;\n\n    Node(const T &amp;d = T(), Node *l = nullptr, Node *r = nullptr)\n        : data(d), left(l), right(r) {}\n};\n\ntemplate &lt;typename T&gt;\nclass NodeIterator {\npublic:\n    typedef std::ptrdiff_t difference_type;\n    typedef T value_type;\n    typedef T* pointer;\n    typedef T&amp; reference;\n    typedef std::bidirectional_iterator_tag iterator_category;\n\n    NodeIterator(Node&lt;T&gt; *input = nullptr) : cur(input) {}\n    NodeIterator(const NodeIterator &amp;) = default;\n    NodeIterator(NodeIterator &amp;&amp;) = default;\n    ~NodeIterator() = default;\n\n    NodeIterator&amp; operator=(const NodeIterator &amp;) = default;\n    NodeIterator&amp; operator=(NodeIterator &amp;&amp;) = default;\n\n    reference operator*() {\n        return cur-&gt;data;\n    }\n\n    NodeIterator&amp; operator++ () {\n        if (cur) cur = cur-&gt;right;\n        return *this;\n    }\n\n    NodeIterator operator++ (int) {\n        NodeIterator tmp(*this);\n        if (cur) cur = cur-&gt;right;\n        return tmp;\n    }\n\n    NodeIterator&amp; operator-- () {\n        if (cur) cur = cur-&gt;left;\n        return *this;\n    }\n\n    NodeIterator operator-- (int) {\n        NodeIterator tmp(*this);\n        if (cur) cur = cur-&gt;left;\n        return tmp;\n    }\n\n    bool operator==(const NodeIterator &amp;rhs) const {\n        return (rhs.cur == cur);\n    }\n\n    bool operator!=(const NodeIterator &amp;rhs) const {\n        return (rhs.cur != cur);\n    }\n\nprivate:\n    Node&lt;T&gt; *cur;\n};\n\ntemplate &lt;typename T&gt;\nclass LinkedList {\npublic:\n    typedef NodeIterator&lt;T&gt; iterator;\n\n    LinkedList() : count(0), head(nullptr), tail(nullptr) {}\n\n    ~LinkedList() {\n        while (head) {\n            Node&lt;T&gt; *tmp = head;\n            head = head-&gt;right;\n            delete tmp;\n        }\n    }\n\n    void push_front(const T &amp;input) {\n        Node&lt;T&gt; *newNode = new Node&lt;T&gt;(input, nullptr, head);\n\n        if (head) head-&gt;left = newNode;\n        head = newNode;\n\n        if (!tail) tail = newNode;\n\n        ++count;\n    }\n\n    T&amp; front() {\n        return head-&gt;data;\n    }\n\n    void push_back(const T &amp;input) { \n        Node&lt;T&gt; *newNode = new Node&lt;T&gt;(input, tail, nullptr);\n\n        if (!head) head = newNode;\n\n        if (tail) tail-&gt;right = newNode;\n        tail = newNode;\n\n        ++count;\n    }\n\n    T&amp; back() {\n        return tail-&gt;data;\n    }\n\n    iterator begin() {\n        return iterator(head);\n    }\n\n    iterator end() {\n        return iterator();\n    }\n\nprivate:\n    int count;\n    Node&lt;T&gt; *head;\n    Node&lt;T&gt; *tail;    \n};\n</code></pre>\n\n<p>Then you can do this:</p>\n\n<pre><code>LinkedList&lt;int&gt; ll;\n\nll.push_back(7);\nll.push_back(9);\n\nauto iter = ll.begin();\nif (*iter == 7) {\n    cout &lt;&lt; \"pass\" &lt;&lt; endl;\n} else {\n    cout &lt;&lt; \"returned : \" &lt;&lt; *iter &lt;&lt; endl;\n}\n</code></pre>\n\n<p></p>\n\n<p>You can even do things like this now:</p>\n\n<pre><code>for (LinkedList&lt;int&gt;::iterator iter = ll.begin(), end = ll.end(); iter != end; ++iter) {\n    cout &lt;&lt; *iter &lt;&lt; endl;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>for (int i : ll) {\n    cout &lt;&lt; i &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8700590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57288ed4c6be199f192634595cb5230?s=128&d=identicon&r=PG&f=1", "display_name": "A. Floyd", "link": "https://stackoverflow.com/users/8700590/a-floyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 46816972, "answer_count": 2, "score": 0, "last_activity_date": 1508454111, "creation_date": 1508342918, "last_edit_date": 1508454111, "question_id": 46814605, "link": "https://stackoverflow.com/questions/46814605/iterator-pointer-does-not-reference-the-first-element", "title": "Iterator pointer does not reference the first element", "body": "<p>I am trying to implement a LinkedList which can be iterated through in c++.</p>\n\n<p>I have therefore made an Iterator class, such that dereferencing an Iterator would return the first element. However, this has not been working. When I then instantiate a new int LinkedList and attempt to access the first element by dereferencing the result of begin(), I do not retrieve the first element of the list, but a 10 digit number such as '1453755360'</p>\n\n<p>My node class is just composed of two right/left node pointers and a data variable</p>\n\n<p>linkedlist class</p>\n\n<pre><code>template &lt;typename T&gt;\nclass LinkedList{\n\npublic:\n    LinkedList(){\n        count =(0);\n        head =(nullptr);\n        tail =(nullptr);\n    }\n\n    void push_head(T input){\n\n        Node&lt;T&gt; newNode = Node&lt;T&gt;(input);\n        newNode.left = nullptr;\n        newNode.right = head;\n\n        head = &amp;newNode;\n        count++;\n    }\n\n    T front(){\n        T&amp; data = (head-&gt;data);\n        return data;\n    }\n\n    void push_tail(T input){\n\n        Node&lt;T&gt; newNode = Node&lt;T&gt;(input);\n        newNode.right = tail;\n        newNode.left = nullptr;\n\n        tail = &amp;newNode;\n        count++;\n    }\n\n    T back(){\n        T&amp; data = (tail-&gt;data);\n        return data;\n    }\n\n\n    Iterator&lt;T&gt; begin(){\n        Iterator&lt;T&gt; test = Iterator&lt;T&gt;(head);\n        return test;\n    }\n\n\nprivate:\n    int count;\n    Node&lt;T&gt; *head;\n    Node&lt;T&gt; *tail;\n\n};\n</code></pre>\n\n<p>Here is where I am testing the code</p>\n\n<pre><code>    LinkedList&lt;int&gt; ll;\n\n    ll.push_tail(7);\n    ll.push_tail(9);\n\n    if (*(ll.begin()) == 9) {\n        cout &lt;&lt; \"pass\" &lt;&lt; endl;\n    } else {\n        cout &lt;&lt; \"returned : \" &lt;&lt; *(ll.begin()) &lt;&lt; endl;\n    }\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "typedef", "forward-declaration", "function-definition"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1508342709, "post_id": 46814486, "comment_id": 80576428, "body": "The parser used by IntelliSense inside Visual Studio is not the same parser used by the actual compiler. Therefore there are cases (like your apparently) where the two differs."}, {"owner": {"reputation": 351, "user_id": 2304458, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/abe914d66ade7f7f6330eb7b3101676e?s=128&d=identicon&r=PG", "display_name": "user2304458", "link": "https://stackoverflow.com/users/2304458/user2304458"}, "edited": false, "score": 0, "creation_date": 1508348799, "post_id": 46814486, "comment_id": 80945506, "body": "I made a copy of your file and build it using GCC on Cygwin with Eclipse and it worked without any problems. Have you missed something? Are the source code organised differently than stated? are some of the code in a header file?"}], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 3064869, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c852a90d3481f6b5b376d5185d6b9f65?s=128&d=identicon&r=PG&f=1", "display_name": "user3064869", "link": "https://stackoverflow.com/users/3064869/user3064869"}, "is_accepted": true, "score": 2, "last_activity_date": 1509275257, "last_edit_date": 1509275257, "creation_date": 1509269957, "answer_id": 46998721, "question_id": 46814486, "link": "https://stackoverflow.com/questions/46814486/why-does-vs2017-warn-function-definition-not-found-for-functions-forward-decla/46998721#46998721", "title": "Why does VS2017 warn &quot;Function definition not found&quot; for functions forward declared with input typedef&#39;d but defined with original?", "body": "<p><a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">Some programmer dude</a> provided the answer in <a href=\"https://stackoverflow.com/questions/46814486/why-does-vs2017-warn-function-definition-not-found-for-functions-forward-decla#comment80576428_46814486\">a comment</a>:</p>\n\n<blockquote>\n  <p>The parser used by IntelliSense inside Visual Studio is not the same parser used by the actual compiler. Therefore there are cases (like your apparently) where the two differs.</p>\n</blockquote>\n"}], "owner": {"reputation": 520, "user_id": 3064869, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c852a90d3481f6b5b376d5185d6b9f65?s=128&d=identicon&r=PG&f=1", "display_name": "user3064869", "link": "https://stackoverflow.com/users/3064869/user3064869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1423, "favorite_count": 0, "accepted_answer_id": 46998721, "answer_count": 1, "score": 1, "last_activity_date": 1509275257, "creation_date": 1508342499, "question_id": 46814486, "link": "https://stackoverflow.com/questions/46814486/why-does-vs2017-warn-function-definition-not-found-for-functions-forward-decla", "title": "Why does VS2017 warn &quot;Function definition not found&quot; for functions forward declared with input typedef&#39;d but defined with original?", "body": "<p>I'm trying to imitate how CURL seems to implement CURL struct internally as Curl_easy such that API users use struct name CURL, and the API internally references CURL as Curl_easy.</p>\n\n<p>This is done by having</p>\n\n<pre><code>typedef struct Curl_easy CURL\n</code></pre>\n\n<p>in curl/curl.h and then having</p>\n\n<pre><code>CURL_EXTERN CURL *curl_easy_init(void);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct Curl_easy *curl_easy_init(void)\n</code></pre>\n\n<p>in curl/easy.h and easy.c, respectively.</p>\n\n<p>So I copied that idea and made a small example which should do the same thing:</p>\n\n<pre><code>typedef struct IntStruct IS;\n\nIS* initializeIS();\nvoid countUpIS( IS* is );\n\nstruct IntStruct\n{\n    int i;\n};\n\nIntStruct* initializeIS()\n{\n    IntStruct* is = new IntStruct;\n    is-&gt;i = 0;\n    return is;\n}\n\nvoid countUpIS( IntStruct* is )\n{\n    is-&gt;i++;\n}\n\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main( int argc, char* argv[] )\n{\n    IS* is = initializeIS();\n    countUpIS( is );\n    cout &lt;&lt; is-&gt;i &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Which leaves the users of those functions initializeIS() and countUpIS() use struct name \"IS\" but developers of those functions refer to it as \"IntStruct\".</p>\n\n<p>This code compiles and runs fine, but VS2017 seems to green-underline countUpIS as \"Function definition for 'countUpIs' not found\".</p>\n\n<p>Any insights to why is this the case? Something perfectly legal but just not parsed well within VS2017?</p>\n"}, {"tags": ["c++", "c", "printf", "format-specifiers"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1508341931, "post_id": 46814308, "comment_id": 80575890, "body": "Have you looked at <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 159018, "user_id": 57428, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e2cef525cef5d7b0078f33b707e30c69?s=128&d=identicon&r=PG", "display_name": "sharptooth", "link": "https://stackoverflow.com/users/57428/sharptooth"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 3, "creation_date": 1508342033, "post_id": 46814308, "comment_id": 80575963, "body": "@Kevin Yes, sure, and I&#39;m looking for a catch."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 4, "creation_date": 1508342200, "post_id": 46814308, "comment_id": 80576057, "body": "Well <code>x</code>/<code>X</code> and <code>u</code> (and <code>o</code>) all have the same types for each width specifier. Isn&#39;t that what you&#39;re asking?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1508342514, "post_id": 46814308, "comment_id": 80576298, "body": "There&#39;s no catch. (And the same is true of <code>e</code>, <code>f</code> and <code>g</code> format specifiers: a given datum can be presented in different ways.)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1508342995, "post_id": 46814308, "comment_id": 80576597, "body": "<code>o</code>, <code>u</code>, <code>x</code>, and <code>X</code> all expect the same argument type for a given width specifier."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1508343405, "last_edit_date": 1508343405, "creation_date": 1508342988, "answer_id": 46814630, "question_id": 46814308, "link": "https://stackoverflow.com/questions/46814308/are-x-and-u-printf-scanf-conversion-specifiers-equally-applicable-to-the-sam/46814630#46814630", "title": "Are &quot;x&quot; and &quot;u&quot; printf/scanf conversion specifiers equally applicable to the same types?", "body": "<blockquote>\n  <p>Is it true than no matter if it ends in <code>x</code> or in <code>u</code> with the same width specifier in front I can pass values of the same time and it'll always be legal?</p>\n</blockquote>\n\n<p>Yes, if a width specifier is valid for use with one of those then it is valid for use with both, and also with <code>o</code> and <code>X</code>, and the resulting directives serve the same data type -- an unsigned integer of the specified width.  The only difference is the way the output is formatted (or for <code>scanf</code>, the format that is expected of the input).</p>\n\n<blockquote>\n  <p>There's a whole bunch of width specifiers (<code>h</code>, <code>hh</code>, <code>L</code>, <code>I</code>, etc) and looks\n  like each of them can be used with both u and x conversion specifier\n  but each time I'm allowed to pass values of unsigned type of the right\n  width.</p>\n</blockquote>\n\n<p>There indeed is a wide variety of width specifiers.  Most, but not all, of them are applicable to and intended for integer types, both the unsigned ones corresponding to <code>x</code>, <code>X</code>, <code>o</code>, and <code>u</code> and the signed ones corresponding to <code>d</code> and <code>i</code>.  The standard does not specify <code>L</code> among those, however, and it does not specify <code>I</code> at all.  Some implementations might nevertheless accept those as integer width specifiers, with implementation-specific behavior.</p>\n"}], "owner": {"reputation": 159018, "user_id": 57428, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e2cef525cef5d7b0078f33b707e30c69?s=128&d=identicon&r=PG", "display_name": "sharptooth", "link": "https://stackoverflow.com/users/57428/sharptooth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 46814630, "answer_count": 1, "score": 3, "last_activity_date": 1508343405, "creation_date": 1508341866, "question_id": 46814308, "link": "https://stackoverflow.com/questions/46814308/are-x-and-u-printf-scanf-conversion-specifiers-equally-applicable-to-the-sam", "title": "Are &quot;x&quot; and &quot;u&quot; printf/scanf conversion specifiers equally applicable to the same types?", "body": "<p>Suppose I have</p>\n\n<pre><code>printf(\"%llu %llx\", one, two);\n</code></pre>\n\n<p>and then both <code>one</code> and <code>two</code> can be of type <code>unsigned long long</code> and the difference will be just that they are printed as decimal or hexadecimal respectively.</p>\n\n<p>There's a whole bunch of width specifiers (<code>h</code>, <code>hh</code>, <code>L</code>, <code>I</code>, etc) and looks like each of them can be used with both <code>u</code> and <code>x</code> conversion specifier but each time I'm allowed to pass values of unsigned type of the right width.</p>\n\n<p>Is it true than no matter if it ends in <code>x</code> or in <code>u</code> with the same width specifier in front I can pass values of the same time and it'll always be legal?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 6, "creation_date": 1508342008, "post_id": 46814301, "comment_id": 80575943, "body": "a) Why would you expect that and b) why do you care to begin with?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1508342150, "post_id": 46814301, "comment_id": 80576022, "body": "I dont really get what the question is about. Can you include the output in the question instead of just screenshots and maybe highlight the addresses that you expect to be same/differrent?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1508342252, "post_id": 46814301, "comment_id": 80576097, "body": "do you expect the address of <code>x</code> in the second snippet to be the same as the address of <code>x</code> in the first snippet? If yes, why? You cant even count on <code>x</code> being stored in the same memory when you run the same code twice"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508342366, "post_id": 46814301, "comment_id": 80576182, "body": "There is no conflict, only wrong expectation."}, {"owner": {"reputation": 11, "user_id": 8387526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5603da7dac967afe26973246874d43b3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Amer", "link": "https://stackoverflow.com/users/8387526/mohammed-amer"}, "edited": false, "score": 0, "creation_date": 1508342655, "post_id": 46814301, "comment_id": 80576389, "body": "for the first block of code this is the result (the value of x is 7, the address of x is 0x28ff08, the address stored at the pointer is 0x28ff08)"}, {"owner": {"reputation": 11, "user_id": 8387526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5603da7dac967afe26973246874d43b3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Amer", "link": "https://stackoverflow.com/users/8387526/mohammed-amer"}, "edited": false, "score": 0, "creation_date": 1508342738, "post_id": 46814301, "comment_id": 80576452, "body": "the result for the second block of code is (the value of x is 7, the address of x is 0x28ff0c, the address stored at the pointer is 0x28ff08)"}, {"owner": {"reputation": 11, "user_id": 8387526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5603da7dac967afe26973246874d43b3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Amer", "link": "https://stackoverflow.com/users/8387526/mohammed-amer"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508343457, "post_id": 46814301, "comment_id": 80576881, "body": "@Slava why is it a wrong expectation?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508344022, "post_id": 46814301, "comment_id": 80577184, "body": "@MohammedAmer because there is nothing that would provide such guarantee, you just expect it based on your idea, which is wrong."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508344186, "post_id": 46814301, "comment_id": 80577292, "body": "please add it to the question, and I am still not sure what addresses you expect to be same..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508346565, "post_id": 46814301, "comment_id": 80578539, "body": "In the first case no one cares about where <code>ip</code> is, so the compiler has tonnes of leeway. <code>ip</code> might not have an address at all; it could just be sitting in a register. In the second, <code>ip</code> must have an address, because the program prints it, and this moves stuff around on you."}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 7707324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mScNc.jpg?s=128&g=1", "display_name": "FirePower", "link": "https://stackoverflow.com/users/7707324/firepower"}, "is_accepted": false, "score": 1, "last_activity_date": 1508352497, "last_edit_date": 1508352497, "creation_date": 1508352181, "answer_id": 46817105, "question_id": 46814301, "link": "https://stackoverflow.com/questions/46814301/conflict-in-c-between-the-address-of-the-pointer-and-the-address-stored-in-the/46817105#46817105", "title": "Conflict in c++ between the address of the pointer and the address stored in the pointer", "body": "<p>The values in first code is same because the value of ip is address of x (same thing, ip keeping address of x). But in second code results are different because address of x is not address of ip (ip is different variable - pointer capable to hold addresses of other variables). Where computer will decide to create them - who knows. I think that was just coincidence where one variable is created on same address and second on different.</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 1, "last_activity_date": 1508379032, "creation_date": 1508379032, "answer_id": 46821889, "question_id": 46814301, "link": "https://stackoverflow.com/questions/46814301/conflict-in-c-between-the-address-of-the-pointer-and-the-address-stored-in-the/46821889#46821889", "title": "Conflict in c++ between the address of the pointer and the address stored in the pointer", "body": "<p>I think you may be getting confused between the value of the pointee, the address of the pointee, the value of the pointer, and the address of the pointer. I think this is probably best explained through a picture. If you write</p>\n\n<pre><code>int  x  = 7;\nint* ip = &amp;x;\n</code></pre>\n\n<p>then, in memory, things look something like this:</p>\n\n<pre><code>  +-----------+                 +-----------+\n  |     7     |  &lt;------------  | Address A |\n  +-----------+                 +-----------+\n      int x                        int* ip\n    Address A                     Address B\n</code></pre>\n\n<p>Here, the variable <code>x</code> is stored at some location (call it <code>A</code>) and it holds the value <code>7</code>. The variable <code>ip</code> is stored at some location (call it <code>B</code>) and it holds as its value the address <code>A</code>. Note that <code>A</code> and <code>B</code> have to be different from one another, because <code>x</code> and <code>ip</code> occupy separate memory locations.</p>\n\n<p>Now, think about what happens when you write</p>\n\n<pre><code>cout &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n\n<p>This prints out the value stored in <code>x</code>, which is <code>7</code>. (I assume that's not very surprising.)</p>\n\n<p>If you write</p>\n\n<pre><code>cout &lt;&lt; &amp;x &lt;&lt; endl;\n</code></pre>\n\n<p>you are printing out the address that <code>x</code> sits at. That will be whatever the value of <code>A</code> happens to be, and it'll vary from program run to program run.</p>\n\n<p>If you write</p>\n\n<pre><code>cout &lt;&lt; ip &lt;&lt; endl;\n</code></pre>\n\n<p>you are printing out the value stored in <code>ip</code>. Since <code>ip</code> points to <code>x</code>, the value stored in <code>ip</code> is the address of <code>x</code>, which is whatever <code>A</code> happens to be.</p>\n\n<p>However, if you write</p>\n\n<pre><code>cout &lt;&lt; &amp;ip &lt;&lt; endl;\n</code></pre>\n\n<p>you are printing out the address of the <code>ip</code> variable. That address is denoted above by <code>B</code> and it depends on the particular run of the program. Note that <code>A</code> and <code>B</code> are <em>not</em> the same thing, so you should expect to see different values here.</p>\n\n<p>To recap:</p>\n\n<pre><code>  +-----------+                 +-----------+\n  |     7     |  &lt;------------  | Address A |\n  +-----------+                 +-----------+\n      int x                        int* ip\n    Address A                     Address B\n\n       cout &lt;&lt;   x &lt;&lt; endl; // Prints 7, the contents of x.\n       cout &lt;&lt;  &amp;x &lt;&lt; endl; // Prints A, the address of x.\n       cout &lt;&lt;  ip &lt;&lt; endl; // Prints A, the contents of ip.\n       cout &lt;&lt; &amp;ip &lt;&lt; endl; // Prints B, the address of ip.\n</code></pre>\n\n<p>In your case, it seems like <code>A</code>, the address of <code>x</code>, was <code>0x28ff0c</code> and the address of <code>ip</code> (<code>B</code>) was <code>0x28ff08</code>. This doesn't mean that the address of <code>x</code> changed, but rather indicates that <code>ip</code> and <code>x</code> occupy different memory addresses.</p>\n"}], "owner": {"reputation": 11, "user_id": 8387526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5603da7dac967afe26973246874d43b3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Amer", "link": "https://stackoverflow.com/users/8387526/mohammed-amer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1508382260, "answer_count": 2, "score": -2, "last_activity_date": 1508719889, "creation_date": 1508341827, "last_edit_date": 1508719889, "question_id": 46814301, "link": "https://stackoverflow.com/questions/46814301/conflict-in-c-between-the-address-of-the-pointer-and-the-address-stored-in-the", "closed_reason": "Needs details or clarity", "title": "Conflict in c++ between the address of the pointer and the address stored in the pointer", "body": "<p>Consider this C++ program:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int x = 7;\n    int *ip = &amp;x;\n    cout &lt;&lt; \"the value of x is \" &lt;&lt; x &lt;&lt;endl;\n    cout &lt;&lt; \"the address of x is \" &lt;&lt; &amp;x &lt;&lt;endl;\n    cout &lt;&lt; \"the address stored at ip is \"&lt;&lt; ip &lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here's what I get as output:</p>\n\n<pre><code>the value of x is 7\nthe address of x is 0x28ff08\nthe address stored at the pointer is 0x28ff08\n</code></pre>\n\n<p>This makes sense to me. However, if I change the code to the following, I get a different set of outputs:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int x = 7;\n    int *ip = &amp;x;\n    cout &lt;&lt; \"the value of x is \" &lt;&lt; x &lt;&lt;endl;\n    cout &lt;&lt; \"the address of x is \" &lt;&lt; &amp;x &lt;&lt;endl;\n    cout &lt;&lt; \"the address of the ip itself is \"&lt;&lt; &amp;ip &lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now, I'm getting this output:</p>\n\n<pre><code>the value of x is 7\nthe address of x is 0x28ff0c\nthe address of the ip itself is 0x28ff08\n</code></pre>\n\n<p>In the first code, the address of the variable <code>x</code> and the address stored at the pointer <code>ip</code> are the same, which makes sense to me. But in the second program, the address of <code>ip</code> itself remains the same, but the address of <code>x</code> seems to be changing, which I find confusing. I'd expected the address of the variable <code>x</code> remains the same as in the first program and for the address of the pointer to change.</p>\n\n<p>Can someone explain what's going on here?</p>\n"}, {"tags": ["c++", "constructor", "copy-constructor", "temporary"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1508341884, "post_id": 46814296, "comment_id": 80575857, "body": "Search for &quot;copy elision&quot;. Basically the compiler is allowed (and since C++17 required) to optimize out the copy."}, {"owner": {"reputation": 59, "user_id": 7965754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/656f5eb5ffc08179ea8458bb6924e3f0?s=128&d=identicon&r=PG&f=1", "display_name": "R34", "link": "https://stackoverflow.com/users/7965754/r34"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508342071, "post_id": 46814296, "comment_id": 80575978, "body": "Wow! Thank you so much. I&#39;ll read more into this. For the mean time feel free to school me with more details if you are generous enough to do so."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1508342227, "post_id": 46814296, "comment_id": 80576077, "body": "@R34 There are a lot of details about it <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">here</a>"}, {"owner": {"reputation": 59, "user_id": 7965754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/656f5eb5ffc08179ea8458bb6924e3f0?s=128&d=identicon&r=PG&f=1", "display_name": "R34", "link": "https://stackoverflow.com/users/7965754/r34"}, "reply_to_user": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1508342341, "post_id": 46814296, "comment_id": 80576163, "body": "@Steve Thank you. Appreciate the link."}], "owner": {"reputation": 59, "user_id": 7965754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/656f5eb5ffc08179ea8458bb6924e3f0?s=128&d=identicon&r=PG&f=1", "display_name": "R34", "link": "https://stackoverflow.com/users/7965754/r34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508341806, "creation_date": 1508341806, "question_id": 46814296, "link": "https://stackoverflow.com/questions/46814296/object-creation-using-anonymous-temporary", "title": "Object creation using anonymous temporary", "body": "<p>I was wondering what is happening internally when assigning an anonymous object temporary to a named object:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Object {\npublic:\n  Object (void) {\n    this-&gt;PrintAddress();\n  }\n  Object (const Object&amp; another_object) {\n    std::cout &lt;&lt; \"Copy constructor is called!\\n\";\n  }\n  ~Object (void) noexcept {}\n  void PrintAddress (void) const {\n    std::cout &lt;&lt; \"Object Address: \" &lt;&lt; this &lt;&lt; '\\n';\n  }\n};\n\nint main (int arg_count, char* arg_vector[]) {\n  // The following line:\n  Object object = Object();\n  object.PrintAddress();\n  return 0;\n}\n</code></pre>\n\n<p>Compiling and executing the resulting binary shows that the copy constructor is not called and both the named object ('object') and the RHS temporary have the same address meaning they are the same object. I somehow feel like the compiler associates the temporary to the name hence why no constructor is executed (besides when creating the RHS temporary). To better see this, take a look at the following:</p>\n\n<pre><code>Object object (Object()); // Line 1\nobject.PrintAddress() // Line 2\n</code></pre>\n\n<p>Notice that although line 1 has the same syntax as an object that performs a copy constructor, it also has a syntax resembling a function pointer. Commenting Line 2 doesn't affect the ability of the program to compile and yet uncommenting Line 2 (assuming I just created an Object named object) yield a compile error (likely due to the fact that you cannot execute member functions on a function pointer).</p>\n\n<p>Sorry if this has dragged on for too long, but what is happening internally when you do this? </p>\n\n<p>Thank you for your time!</p>\n"}, {"tags": ["c++", "c", "plugins", "opencl", "openfx"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1508345326, "post_id": 46813907, "comment_id": 80577906, "body": "cl::Context instance has a <code>.getInfo()</code> that can be useful to get necessary info (maybe with <code>CL_CONTEXT_DEVICES</code>) to rebuild a clone."}, {"owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "edited": false, "score": 0, "creation_date": 1516645676, "post_id": 46813907, "comment_id": 83763649, "body": "Did you manage to figure this out? The retain function is protected so i cant use the approach below"}, {"owner": {"reputation": 299, "user_id": 350301, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2Q58p.jpg?s=128&g=1", "display_name": "Nick C", "link": "https://stackoverflow.com/users/350301/nick-c"}, "edited": false, "score": 0, "creation_date": 1516701137, "post_id": 46813907, "comment_id": 83785141, "body": "Yes - as @Dithermaster says in his comment, you need to use clRetainContext()"}], "answers": [{"comments": [{"owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "edited": false, "score": 0, "creation_date": 1516645572, "post_id": 46820535, "comment_id": 83763581, "body": "Hey you didn&#39;t answer the question. So how exactly do I do it, it cannot be done? For example Caffe uses the old API, but if we want to get a cl_context from caffe and use it in our API which uses cl::Context, its not possible? Retain is protected"}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "reply_to_user": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "edited": false, "score": 0, "creation_date": 1516658965, "post_id": 46820535, "comment_id": 83770070, "body": "You can create a Context object from your <code>cl_context</code> handle (there&#39;s a constructor for that, enabled by __CL_EXPLICIT_CONSTRUCTORS), or you can use the assignment operator to assign your <code>cl_context</code> handle to a Context object. The Context object now &quot;owns&quot; that context and will release it when it goes out of scope. If you still want to use your cl_context handle, then after creating or assigning the Context object, also call <code>clRetainContext</code> on the handle (which offsets the release done in the object&#39;s destructor). It&#39;s all the same <code>cl_content</code> regardless of C or C++ API."}], "tags": [], "owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "is_accepted": true, "score": 3, "last_activity_date": 1508368080, "creation_date": 1508368080, "answer_id": 46820535, "question_id": 46813907, "link": "https://stackoverflow.com/questions/46813907/create-opencl-context-from-cl-context-without-taking-ownership/46820535#46820535", "title": "Create OpenCL Context from cl_context without taking ownership", "body": "<p>Fortunately you can inspect the OpenCL C++ header to see exactly what it does (at the bottom it just makes C API calls), and you can step into the code to verify it. When working with both C and C++ API, you must be careful about the OpenCL object retain/release counts, in particular if the C++ constructor doesn't retain but the destructor does release, then you have a problem (because you'd be releasing the host's context out from under them). However, it is easily fixed because you can just call retain yourself on the object after constructing to balance things out. I've mixed C API and C++ API in OpenCL and it was the retain/release philosophy of the C++ header that got me too, so I feel your pain. Curious, is the OpenFX host Resolve, Vegas, Catalyst, or something else? There's a unified OpenCL extension on the way for OpenFX.</p>\n"}], "owner": {"reputation": 299, "user_id": 350301, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2Q58p.jpg?s=128&g=1", "display_name": "Nick C", "link": "https://stackoverflow.com/users/350301/nick-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 46820535, "answer_count": 1, "score": 2, "last_activity_date": 1508368080, "creation_date": 1508340609, "question_id": 46813907, "link": "https://stackoverflow.com/questions/46813907/create-opencl-context-from-cl-context-without-taking-ownership", "title": "Create OpenCL Context from cl_context without taking ownership", "body": "<p>I'm creating an OpenFX plugin to do some image processing for a VR system.</p>\n\n<p>As both our existing processing code, and the host the plugin is intended for, are based on OpenCL, the host developers have given me an extension to OFX to share the OpenCL environment.</p>\n\n<p>However - our code uses the C++ API (cl::Context), and the extension they've provided gives me a pointer to a C cl_context.</p>\n\n<p>Is there any way for me to create a cl::Context from a cl_context, without taking ownership of the latter? (and the same for the cl::CommandQueue from cl_command_queue). The API docs online suggest that both the copy constructor and assignment operator take ownership.</p>\n"}, {"tags": ["c++", "computer-vision", "opencv3.0", "robotics"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1508341039, "post_id": 46813846, "comment_id": 80575208, "body": "There are a lot of ways you can use keypoints in this manner. Are you interested in odometry or something else? I guess the generalized term is homography."}, {"owner": {"reputation": 29, "user_id": 8796465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47cacdd5ed78aa1e7cd20a2209b9a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/8796465/ahmad"}, "edited": false, "score": 0, "creation_date": 1508342943, "post_id": 46813846, "comment_id": 80576568, "body": "so if I used the homography technique can this coordinates be mapped to real coordinates to be operated by the manipulator"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1508343027, "post_id": 46813846, "comment_id": 80576611, "body": "Sure. There is some discussion of that here: <a href=\"https://stackoverflow.com/q/30502687/1531971\">stackoverflow.com/q/30502687/1531971</a> (and others) This question feels like it might be a bit broad, and needs more research on your part."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 9238248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQzsm6S2tLs/AAAAAAAAAAI/AAAAAAAACDY/OfnQ4L6Gza8/photo.jpg?sz=128", "display_name": "Vipin Raj C", "link": "https://stackoverflow.com/users/9238248/vipin-raj-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1516354830, "creation_date": 1516354830, "answer_id": 48338054, "question_id": 46813846, "link": "https://stackoverflow.com/questions/46813846/how-to-convert-the-pixel-coordinates-to-world-coordinates/48338054#48338054", "title": "how to convert the pixel coordinates to world coordinates?", "body": "<p>Just map the coordinate system to the robot's base coordinate system and make it origin. Before doing this make sure, you have properly calibrated your vision with mm accuracy.</p>\n"}], "owner": {"reputation": 29, "user_id": 8796465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47cacdd5ed78aa1e7cd20a2209b9a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/8796465/ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516354830, "creation_date": 1508340400, "last_edit_date": 1508340729, "question_id": 46813846, "link": "https://stackoverflow.com/questions/46813846/how-to-convert-the-pixel-coordinates-to-world-coordinates", "title": "how to convert the pixel coordinates to world coordinates?", "body": "<p>I'm working on a robotic project is that I need to detect key points get the coordinates of this points and transfer them to the robot to manipulate.\nI made the camera calibration and used the calibration information to un-distort the image from my camera and then applied ORB technique to detect the key points. till now everything is good but I don't know how to map these key points coordinates to work with the robot.</p>\n\n<p>Here is code I'm using:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n\nstd::vector&lt;KeyPoint&gt; kp;\nMat frame;\nMat frame_un;\nMat camera_matrix =(Mat_&lt;double&gt;(3,3) &lt;&lt; 7.4191833420713715e+02, 0.0, 320.0, 0.0, 7.4191833420713715e+02, 240.0, 0.0, 0.0,\n    1.0);\nMat distortion_coefficients =(Mat_&lt;double&gt;(5,1) &lt;&lt; -1.5271566741564191e-01, 1.5488166759164064e+00, 0.0, 0.0,\n    -7.6517765981508861e+00);\n\nVideoCapture cap(1); // open the default camera\nif (!cap.isOpened())  // check if we succeeded\n    return -1;\n\nfor (;;)\n{\n\n    cap.read(frame); // get a new frame from camera\n    if (frame.empty()) \ncontinue;\nundistort(frame, frame_un, camera_matrix, distortion_coefficients);\n // Default parameters of ORB\n    int nfeatures=30;\n    float scaleFactor=1.2f;\n    int nlevels=8;\n    int edgeThreshold=31; // Changed default (31);\n    int firstLevel=0;\n    int WTA_K=2;\n    int scoreType=ORB::HARRIS_SCORE;\n    int patchSize=31;\n    int fastThreshold=20;\n\nPtr&lt;ORB&gt; detector = ORB::create(\n    nfeatures,\n    scaleFactor,\n    nlevels,\n    edgeThreshold,\n    firstLevel,\n    WTA_K,\n    scoreType,\n    patchSize,\n    fastThreshold );\n\n    detector-&gt;detect(frame_un, kp);\n    std::cout &lt;&lt; \"Found \" &lt;&lt; kp.size() &lt;&lt; \" Keypoints \" &lt;&lt; std::endl;\nfor(int i=0; i&lt;=kp.size();i++)\n{ \nint x = kp[i].pt.x;\nint y = kp[i].pt.y;\ncout &lt;&lt; \"Point \"&lt;&lt;i&lt;&lt;\" Xpos = \" &lt;&lt; x &lt;&lt;  \" Point \"&lt;&lt;i&lt;&lt; \" Ypos = \" &lt;&lt; y &lt;&lt; \"\\n\";\n\n}    \nMat out;\n\n    //drawKeypoints(img, kp, out, Scalar::all(255));\ndrawKeypoints(frame_un, kp, out, Scalar::all (255));\nnamedWindow(\"Kpts\", WINDOW_FREERATIO);\n    imshow(\"Kpts\", out);\nwaitKey(0);\ndestroyWindow(\"Kpts\");\n}\n   // waitKey(0);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "openssl", "swig", "bignum"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1508378670, "post_id": 46813827, "comment_id": 80591052, "body": "On a quick reading, I think you need <code>int keygen(int bits, char **p, char **q, char **g, char **hk, char **tk)</code> so the function can change the pointer in the caller. Something like <code>*p = BN_bn2hex(bn_p)</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1508378810, "post_id": 46813827, "comment_id": 80591079, "body": "Regarding <code>auxchash.so: undefined symbol: BN_bn2hex</code>, what does <code>ldd auxchash.so</code> show? Is there a dependency on <code>libcrypto.so</code>?"}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1508404629, "post_id": 46813827, "comment_id": 80600514, "body": "Yes @jww you&#39;re right, what you wrote is absolutely correct. But I&#39;ve experienced trouble even with swig and char **.  I decided to adopt this approach since I cannot able to handle double pointer to a char * in swig. See this <a href=\"https://stackoverflow.com/questions/46776757/swig-char-as-a-pointer-to-a-char?noredirect=1#comment80538743_46776757\">link</a>."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1508427914, "post_id": 46813827, "comment_id": 80615263, "body": "If you showed real working code for your other question I would have answered it already. Without real code it&#39;s just wasting time. You can wrap <code>char**</code> entirely sensibly though, if you can actually show such a function that works."}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1508493855, "post_id": 46813827, "comment_id": 80640975, "body": "@Flexo u&#39;re right. Sorry it was my first question and I&#39;m new in StackOverflow. I deleted the previous question and wrote it better here <a href=\"https://stackoverflow.com/questions/46846754/swig-char-as-a-pointer-to-a-char\">link</a>."}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1508754652, "post_id": 46813827, "comment_id": 80721398, "body": "Sorry @Flexo but I didn&#39;t resolve <a href=\"https://stackoverflow.com/questions/46846754/swig-char-as-a-pointer-to-a-char\">that</a> question yet. Since u wrote u&#39;d have answered it already if the question would written properly, can u help me now? I&#39;m really stuck on that yet."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "edited": false, "score": 0, "creation_date": 1508405219, "post_id": 46824380, "comment_id": 80600868, "body": "Thank you very much! Yep, adding the libraries parameter, it seems to work. (:"}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "edited": false, "score": 0, "creation_date": 1508409173, "post_id": 46824380, "comment_id": 80603036, "body": "It works, but now I get another problem. Printing the return variables on my python main it prints some indecipherable characters. On other hand, inside the C++ function, printing the same values I got the correct value. So it&#39;s like there is something wrong in the output of the swing module. But <code>%cstring_bounded_output</code> should return correctly a char *. Is this linked to the libraries?"}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "edited": false, "score": 0, "creation_date": 1508412047, "post_id": 46824380, "comment_id": 80604647, "body": "I tried, to better understand, to write into the return variables the simple string &quot;hello&quot;. The python main is unable to get them properly (i.e. it still prints indecipherable characters."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "edited": false, "score": 0, "creation_date": 1508427802, "post_id": 46824380, "comment_id": 80615184, "body": "I have literally no idea what your keygen function actually does since you&#39;ve not shown it, or what you wrote in the test case. but likely you&#39;re not getting the semantics of output arguments right."}, {"owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "edited": false, "score": 0, "creation_date": 1508489307, "post_id": 46824380, "comment_id": 80638493, "body": "Problem solved! it was just assigning stuff. Instead of using <code>p = BN_bn2hex(bn_p)</code>, just use the library function <code>strcpy(p ,BN_bn2hex(bn_p)</code>. Thks @Flexo."}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 0, "last_activity_date": 1508396910, "creation_date": 1508396910, "answer_id": 46824380, "question_id": 46813827, "link": "https://stackoverflow.com/questions/46813827/swig-c-to-python-with-openssl-bn-h/46824380#46824380", "title": "swig c++ to python with openssl/bn.h", "body": "<p>You need to link your module against OpenSSL, e.g.something like:</p>\n\n<pre><code>auxchash_module = Extension('_auxchash',\n                       sources=['auxchash_wrap.cxx', 'auxchash.cpp'],\n                       libraries=['crypto', 'ssl'],\n                       )\n</code></pre>\n\n<p>(You might only need crypto in that list, I can't quite remember/tell right now)</p>\n"}], "owner": {"reputation": 23, "user_id": 8760538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531194b12b70d409916d7b4c0553dada?s=128&d=identicon&r=PG&f=1", "display_name": "lorsp000", "link": "https://stackoverflow.com/users/8760538/lorsp000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 46824380, "answer_count": 1, "score": 1, "last_activity_date": 1508396910, "creation_date": 1508340353, "last_edit_date": 1508340936, "question_id": 46813827, "link": "https://stackoverflow.com/questions/46813827/swig-c-to-python-with-openssl-bn-h", "title": "swig c++ to python with openssl/bn.h", "body": "<p>I'm trying to create a *.so file for further use in Python using SWIG. In particular I'm using some libraries from openssl (such opensll/bn.h). But somehow it return error <code>ImportError: [...]/auxchash.so: undefined symbol: BN_bn2hex</code>.</p>\n\n<p>I have the file.cpp, auxchash.cpp:</p>\n\n<pre><code>#include auxchash.h\n\nint keygen(int bits, char *p, char *q, char *g, char *hk, char *tk){\n  BN_CTX *ctx = BN_CTX_new();\n  BIGNUM *bn_p = BN_new();\n  BIGNUM *bn_q = BN_new();\n  BIGNUM *bn_g = BN_new();\n  BIGNUM *bn_hk = BN_new();\n  BIGNUM *bn_tk = BN_new();\n  BIGNUM *bn_two = BN_new();\n\n  BN_CTX_init(ctx);\n\n  BN_dec2bn(&amp;bn_two, \"2\"); //initialize a BIGNUM with value 2\n\n  //on non-unix platform needs to initialize the PRNG with randomness\n  //or BN_generate_prime_ex may fail\n\n  //computing the safe prime p and q = (p-1)/2\n  BN_generate_prime_ex(bn_p, bits, 1, NULL, NULL, NULL);\n  BN_sub(bn_q, bn_p, BN_value_one());\n  BN_div(bn_q, NULL, bn_q, bn_two, ctx);\n\n  //finding the generator g (for the group QR_p)\n  BN_rand_range(bn_g, bn_p);\n  BN_mod_exp(bn_g, bn_g, bn_two, bn_p, ctx);\n\n  //choosing the keys hk and tk\n  BN_rand_range(bn_tk, bn_q);\n  BN_mod_exp(bn_hk, bn_g, bn_tk, bn_p, ctx);\n\n  //converting from BIGNUM to hex\n  p = BN_bn2hex(bn_p);\n  q = BN_bn2hex(bn_q);\n  g = BN_bn2hex(bn_g);\n  hk = BN_bn2hex(bn_hk);\n  tk = BN_bn2hex(bn_tk);\n\n  //freeing the resources\n  BN_CTX_free(ctx);\n  BN_free(bn_two);\n  BN_free(bn_p);\n  BN_free(bn_q);\n  BN_free(bn_g);\n  BN_free(bn_hk);\n  BN_clear_free(bn_tk);\n\n  return 0;\n}\n</code></pre>\n\n<p>The file.h, auxchash.h:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;openssl/bn.h&gt;\n#include&lt;openssl/sha.h&gt;\n#include&lt;openssl/rand.h&gt;\n\nint keygen(int bits, char *p, char *q, char *g, char *hk, char *tk);\n</code></pre>\n\n<p>The file.i for the swig module, auxchash.i:</p>\n\n<pre><code>%module auxchash\n%{\n#define SWIG_FILE_WITH_INIT\n#include \"auxchash.h\"\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;openssl/bn.h&gt;\n#include&lt;openssl/sha.h&gt;\n#include&lt;openssl/rand.h&gt;\n%}\n\n%include \"typemaps.i\"\n%include \"cstring.i\"\n\n%cstring_bounded_output(char *p, 1024);\n%cstring_bounded_output(char *q, 1024);\n%cstring_bounded_output(char *g, 1024);\n%cstring_bounded_output(char *hk, 1024);\n%cstring_bounded_output(char *tk, 1024);\nextern int keygen(int bits, char *p, char *q, char *g, char *hk, char *tk);\n</code></pre>\n\n<p>Finally a file setup.py to create all the needed swig files, setup.py:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\n\nauxchash_module = Extension('_auxchash',\n                       sources=['auxchash_wrap.cxx', 'auxchash.cpp'],\n                       )\n\nsetup (name = 'auxchash',\n   version = '0.1',\n   author      = \"SWIG Docs\",\n   description = \"\"\"Simple swig example from docs\"\"\",\n   ext_modules = [auxchash_module],\n   py_modules = [\"auxchash\"],\n   )\n</code></pre>\n\n<p>And all of them are compiled with terminal commands:</p>\n\n<pre><code>swig -c++ -python auxchash.i\npython setup.py build_ext --inplace\n</code></pre>\n\n<p>So far so good, it compile without errors. But then when I run a python main:</p>\n\n<pre><code>import auxchash\nres,p,q,g,hk,tk = auxchash.keygen(10)\n</code></pre>\n\n<p>It gives my the following error:</p>\n\n<pre><code>File: \"[...]/auxchash.py\" import auxchash\nFile: \"[...]/auxchash.py\" auxchash=swig_import_helper()\nFile: \"[...]/auxchash.py\" return=importlib.import_module('_auxchash')\nFile: \"[...]/__init.py__\" __import__(name)`\nImportError: [...]/auxchash.so: undefined symbol: BN_bn2hex\n</code></pre>\n\n<p>I don't know how to figure it out.</p>\n"}, {"tags": ["c++", "parallel-processing", "c++17"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 7, "creation_date": 1508339569, "post_id": 46813513, "comment_id": 80574174, "body": "The last question is easy to answer. <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_tags\" rel=\"nofollow noreferrer\">Yes they can detect the type of iterator</a> and can use that information when it is beneficial. Also <code>std::list</code> supports more than a forward iterator, it supports a <a href=\"http://en.cppreference.com/w/cpp/concept/BidirectionalIterator\" rel=\"nofollow noreferrer\">BidirectionalIterator</a> (which probably doesn&#39;t make a difference in this case)."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 6, "last_activity_date": 1508343606, "last_edit_date": 1508343606, "creation_date": 1508340514, "answer_id": 46813881, "question_id": 46813513, "link": "https://stackoverflow.com/questions/46813513/parallelism-with-forwarditerator/46813881#46813881", "title": "Parallelism with ForwardIterator?", "body": "<p>The reason that the parallel algorithms support forward iterators is that parallelizing can improve the performance of those algorithms. </p>\n\n<p>Yes, a forward iterator only moves one step at a time through the controlled sequence. But there's more to an algorithm than just movement -- you also have to look at the <strong>other things</strong> that the algorithm does. </p>\n\n<p>For example, if copying an object is expensive, <code>std::copy</code> with forward iterators can be faster in parallel, because the time needed to copy the objects dominates the traversal time; spitting out parallel copies improves the overall speed, even though the forward iterators mean that the parallel algorithm does more work than the serial one.</p>\n"}], "owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 46813881, "answer_count": 1, "score": 4, "last_activity_date": 1508343606, "creation_date": 1508339404, "last_edit_date": 1508341680, "question_id": 46813513, "link": "https://stackoverflow.com/questions/46813513/parallelism-with-forwarditerator", "title": "Parallelism with ForwardIterator?", "body": "<p>I was just thinking about whether we could speed up the extraction of distinct elements that appear in a sorted <code>std::list&lt;int&gt;</code> by running the <a href=\"http://en.cppreference.com/w/cpp/experimental/parallelism\" rel=\"nofollow noreferrer\">parallelized version</a> of <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique_copy\" rel=\"nofollow noreferrer\"><code>std::unique_copy()</code></a>.</p>\n\n<p>My conception of how this would work is this:</p>\n\n<ul>\n<li>Split the data in sections.</li>\n<li>Apply the algorithm to those sections in parallel.</li>\n<li>Merge the results, while working out the edge cases between the sections.</li>\n</ul>\n\n<p>But as I see this, having only a ForwardIterator instead of a RandomAccessIterator, would require at least two passes to solve this in parallel: one pass to set up the sections, next pass applies the algorithm.</p>\n\n<p>I understand, that not every problem will benefit from the virtues of parallelization.</p>\n\n<p>Is my conception of how this works correct (approximately)?</p>\n\n<p>Then my question would be, why don't the parallel algorithms require RandomAccessIterators? Is it beneficial to support ForwardIterator here? Can the algorithms detect which type of iterator they have, and pick a more efficient version accordingly?</p>\n"}, {"tags": ["c++", "xml", "qt", "rss", "feed"], "answers": [{"tags": [], "owner": {"reputation": 1830, "user_id": 1047746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82514a7e1e60593716e3460af8676a0d?s=128&d=identicon&r=PG", "display_name": "Xplatforms", "link": "https://stackoverflow.com/users/1047746/xplatforms"}, "is_accepted": false, "score": 0, "last_activity_date": 1508410757, "creation_date": 1508410757, "answer_id": 46828381, "question_id": 46813402, "link": "https://stackoverflow.com/questions/46813402/print-item-from-qdomnodelist-with-qt/46828381#46828381", "title": "Print item from QDomNodeList with QT", "body": "<p>It doesn't look like attribute. It is an element.</p>\n\n<pre><code>    QDomDocument doc;\n    doc.setContent(reply-&gt;readAll());\n    QDomNodeList list = doc.elementsByTagName(\"item\");\n    qDebug() &lt;&lt; \"Count\" &lt;&lt; list.count(); //this list get 39 items from url\n    for (int i = 0; i &lt; list.size(); i++)\n    {\n        QDomElement first_title = list.at(i).toElement().firstChildElement(\"title\");\n        qDebug() &lt;&lt; first_title.text();\n    }\n</code></pre>\n"}], "owner": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508410757, "creation_date": 1508339081, "question_id": 46813402, "link": "https://stackoverflow.com/questions/46813402/print-item-from-qdomnodelist-with-qt", "title": "Print item from QDomNodeList with QT", "body": "<p>I've called NYT xml url:\n<a href=\"http://www.nytimes.com/services/xml/rss/nyt/HomePage.xml\" rel=\"nofollow noreferrer\">http://www.nytimes.com/services/xml/rss/nyt/HomePage.xml</a></p>\n\n<p>and i received 39 records that I put in QDomDocument.\nSo how to get the properties from single item ?\nThis is my code but don't work, print empty.</p>\n\n<pre><code>QDomDocument doc;\n    doc.setContent(reply-&gt;readAll());\n    QDomNodeList list = doc.elementsByTagName(\"item\");\n\n    qDebug() &lt;&lt; \"Count\" &lt;&lt; list.count(); //this list get 39 items from url\n\n    for (int i = 0; i &lt; list.size(); i++) {\n        qDebug() &lt;&lt; list.at(i).attributes().namedItem(\"title\").nodeValue();\n    }\n</code></pre>\n\n<p>can you help me ??\nThanks</p>\n"}, {"tags": ["c++", "cmake", "sdl", "conan"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1508338877, "post_id": 46813317, "comment_id": 80573670, "body": "Copy-paste the errors, instead of posting screenshots of them."}, {"owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1508339350, "post_id": 46813317, "comment_id": 80574017, "body": "The error indicates that CMake cannot find the MSVC compiler installed with visual studio. Can you confirm that you installed VS 2015, and select the C++ compiler as part of its installed components?"}, {"owner": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "edited": false, "score": 0, "creation_date": 1508339562, "post_id": 46813317, "comment_id": 80574165, "body": "I currently use VS 2017 (C++ is installed and I am able to make projects), my friend recommended i uninstall VS 2015 to fix the problem but it didnt work :/ &quot;Visual Studio 15 2017&quot; has been selected in the CMake gui."}, {"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1508344007, "post_id": 46813317, "comment_id": 80577172, "body": "Is there some reason you&#39;re not using this conan package for zlib? <a href=\"https://bintray.com/conan-community/conan/zlib%3Aconan/1.2.8%3Astable\" rel=\"nofollow noreferrer\">bintray.com/conan-community/conan/zlib%3Aconan/1.2.8%3Astabl&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "edited": false, "score": 0, "creation_date": 1508346012, "post_id": 46813317, "comment_id": 80578275, "body": "Unfortunately I don&#39;t understand what this last comment means."}, {"owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "edited": false, "score": 0, "creation_date": 1508346905, "post_id": 46813317, "comment_id": 80578686, "body": "You also need to provide all the reproducible steps towards this error. Like: 1) this is my conanfile.txt, I am using. 2) I have this setup (machine, compiler, etc) 3) I am executing these commands: &quot;conan install ...&quot; 4) My output is this"}, {"owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "edited": false, "score": 0, "creation_date": 1508346982, "post_id": 46813317, "comment_id": 80578733, "body": "Take into account that the existing SDL package in conan-transit bintray repository might not be perfect. Those packages are provided by the community and are  not reviewed, not guarantee to work. There is an ongoing effort to provide high quality packages in conan-center repository."}, {"owner": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "edited": false, "score": 0, "creation_date": 1508347691, "post_id": 46813317, "comment_id": 80579040, "body": "All updated, if there is anything please don&#39;t hesitate to ask"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1508353387, "post_id": 46813317, "comment_id": 80582111, "body": "@ChristopherRoss you state that you are using Visual Studio 2017, why then are you generating a solution for VS2015? <code>cmake .. -G &quot;Visual Studio 14 2015 Win64&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "edited": false, "score": 0, "creation_date": 1508356716, "post_id": 46817500, "comment_id": 80583817, "body": "I did this, still no hope. Exact same error. I&#39;ve tried all of them, each and every one."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "edited": false, "score": 0, "creation_date": 1508410828, "post_id": 46817500, "comment_id": 80603954, "body": "What I would suggest you try then is uninstalling CMake, removing all its files (verify that <code>Program Files\\CMake</code> is 100% empty and gone), and reinstalling it where it will re-detect your compiler, and then use the generator for the version of Visual Studio you have installed only. I&#39;ve felt this pain before and had success by doing a clean reinstall."}], "tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": false, "score": 0, "last_activity_date": 1508353720, "creation_date": 1508353720, "answer_id": 46817500, "question_id": 46813317, "link": "https://stackoverflow.com/questions/46813317/cmake-errors-using-conan/46817500#46817500", "title": "CMake Errors - Using Conan", "body": "<p>\"My machine is x64, I have Visual Studio 2017 with all C++ elements installed.\"</p>\n\n<p>You're generating a solution for the wrong version of Visual Studio..</p>\n\n<pre><code>cmake .. -G \"Visual Studio 14 2015 Win64\"\n</code></pre>\n\n<p>Change that line in your batch script to:</p>\n\n<pre><code>cmake .. -G \"Visual Studio 15 2017 Win64\"\n</code></pre>\n\n<p>Then you <em>must</em> remove all generated files (<code>CMakeCache.txt', 'CMakeFiles</code> dir, etc`) and try again. Please also double check that your conan profile settings match the compiler you are using.</p>\n"}], "owner": {"reputation": 11, "user_id": 8795649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXArgeZWLUI/AAAAAAAAAAI/AAAAAAAAAFA/nHh_THaOgH0/photo.jpg?sz=128", "display_name": "Christopher Ross", "link": "https://stackoverflow.com/users/8795649/christopher-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1861, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508353720, "creation_date": 1508338842, "last_edit_date": 1508347227, "question_id": 46813317, "link": "https://stackoverflow.com/questions/46813317/cmake-errors-using-conan", "title": "CMake Errors - Using Conan", "body": "<p>I just cant figure out why I am getting this error, would anyone mind giving me some help? </p>\n\n<p>I have added Cmake to the Environment variables, but am still getting an error. I'm currently a University Student trying to get SDL to work.</p>\n\n<p>My machine is x64, I have Visual Studio 2017 with all C++ elements installed.</p>\n\n<p>Here is the CMD error:\n<a href=\"https://i.stack.imgur.com/1UsPl.jpg\" rel=\"nofollow noreferrer\">CMD Error</a></p>\n\n<p>Here is the GUI error:\n<a href=\"https://i.stack.imgur.com/hkD19.jpg\" rel=\"nofollow noreferrer\">GUI Error</a></p>\n\n<p>Copy - Paste CMD Version:</p>\n\n<pre><code>-- The C compiler identification is unknown\n-- The CXX compiler identification is unknown\nCMake Error at CMakeLists.txt:1 (PROJECT):\n  No CMAKE_C_COMPILER could be found.\n\n\n\nCMake Error at CMakeLists.txt:1 (PROJECT):\n  No CMAKE_CXX_COMPILER could be found.\n\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"C:/Users/Chris Ross/.conan/data/zlib/1.2.8/lasote/stable/build/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/_build/CMakeFiles/CMakeOutput.log\".\nSee also \"C:/Users/Chris Ross/.conan/data/zlib/1.2.8/lasote/stable/build/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/_build/CMakeFiles/CMakeError.log\".\nzlib/1.2.8@lasote/stable:\nzlib/1.2.8@lasote/stable: ERROR: Package '6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7' build failed\nzlib/1.2.8@lasote/stable: WARN: Build folder C:\\Users\\Chris Ross\\.conan\\data\\zlib\\1.2.8\\lasote\\stable\\build\\6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7\nERROR: zlib/1.2.8@lasote/stable: Error in build() method, line 60\n        self.run('%s &amp;&amp; cmake .. %s' % (cd_build, cmake.command_line))\n        ConanException: Error 1 while executing cd _build &amp;&amp; cmake .. -G \"Visual Studio 15 2017 Win64\" -DCONAN_LINK_RUNTIME=\"/MD\" -DCONAN_EXPORTED=\"1\" -DCONAN_COMPILER=\"Visual Studio\" -DCONAN_COMPILER_VERSION=\"15\" -DCONAN_CXX_FLAGS=\"/MP4\" -DCONAN_C_FLAGS=\"/MP4\" -Wno-dev\nINFO: Conan job finished.\nINFO: Starting cmake\nCMake Error: Error: generator : Visual Studio 14 2015 Win64\nDoes not match the generator used previously: Visual Studio 15 2017 Win64\nEither remove the CMakeCache.txt file and CMakeFiles directory or choose a different binary directory.\nINFO: CMake job finished.\n</code></pre>\n\n<p>Copy - Paste GUI Version:</p>\n\n<pre><code>    CMAKE_CONFIGURATION_TYPES              Debug;Release;MinSizeRel;RelWithDebInfo\n    CMAKE_INSTALL_PREFIX                   C:/Program Files (x86)/lab1\n\nConfiguring incomplete, errors occurred!\nSee also \"C:/Users/Chris Ross/Desktop/lab2template/bin/CMakeFiles/CMakeOutput.log\".\nSee also \"C:/Users/Chris Ross/Desktop/lab2template/bin/CMakeFiles/CMakeError.log\".\n</code></pre>\n\n<p>My conanfile.txt:</p>\n\n<pre><code>[requires]\nSDL2/2.0.5@dotfloat/stable\nSDL2_image/2.0.1@lasote/stable\nSDL2_mixer/2.0.1@a_teammate/testing\nSDL2_ttf/2.0.14@hilborn/stable\n\n[options]\nSDL2:shared=True\nSDL2_image:shared=False\nSDL2_mixer:shared=True\nSDL2_ttf:shared=False\n\n[generators]\ncmake\n\n[imports]\nbin, *.dll -&gt; ./bin # Copies all dll files from packages bin folder to my \"bin\" folder\nlib, *.dylib* -&gt; ./bin # Cop\n</code></pre>\n\n<p>Using this .bat file:</p>\n\n<pre><code>@echo off\n\n:start\necho INFO: I am running from '%cd%'\nif exist src goto changetobin\n\n:conan\necho INFO: Starting conan\nconan install --build missing\necho INFO: Conan job finished.\ngoto cmake\n\n:cmake\necho INFO: Starting cmake\ncmake .. -G \"Visual Studio 14 2015 Win64\"\necho INFO: CMake job finished.\ngoto end\n\n:changetobin\necho ERROR: I'm in the wrong directory.. moving into bin\ncd bin\necho INFO: Retrying..\ngoto start\n\n:end\nif exist bin goto quit\ncd ..\ngoto quit\n\n:quit\necho.\necho.\necho INFO: Conan and CMake ran successfully. Open up your solution file (listed below) to open your project.\necho.\ndir /b *.sln\n</code></pre>\n\n<p>(I have also attempted a manual build (conan install --build missing))</p>\n"}, {"tags": ["c++", "rtsp", "live555"], "answers": [{"tags": [], "owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "is_accepted": false, "score": 0, "last_activity_date": 1508593969, "creation_date": 1508593969, "answer_id": 46863966, "question_id": 46813139, "link": "https://stackoverflow.com/questions/46813139/stop-live555-from-re-using-session/46863966#46863966", "title": "Stop Live555 from re-using session", "body": "<p>If you look to the code of <a href=\"https://github.com/rayl/live555/blob/master/testProgs/playCommon.cpp\" rel=\"nofollow noreferrer\">playCommon.cpp</a>, you could see </p>\n\n<pre><code>void sessionAfterPlaying(void* /*clientData*/) {\n  if (!playContinuously) {\n    shutdown(0);\n  } else {\n    // We've been asked to play the stream(s) over again.\n    // First, reset state from the current session:\n    if (env != NULL) {\n      env-&gt;taskScheduler().unscheduleDelayedTask(periodicFileOutputTask);\n      env-&gt;taskScheduler().unscheduleDelayedTask(sessionTimerTask);\n      env-&gt;taskScheduler().unscheduleDelayedTask(arrivalCheckTimerTask);\n      env-&gt;taskScheduler().unscheduleDelayedTask(interPacketGapCheckTimerTask);\n      env-&gt;taskScheduler().unscheduleDelayedTask(qosMeasurementTimerTask);\n    }\n    totNumPacketsReceived = ~0;\n\n    startPlayingSession(session, initialSeekTime, endTime, scale, continueAfterPLAY);\n  }\n}\n</code></pre>\n\n<p>As you see in your log, it send a PLAY and doesnot reinitiate the Session.\nIn order to change this behaviour, you need to modify the code of openRTSP. </p>\n"}], "owner": {"reputation": 21, "user_id": 8691659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faad8404d5ee8e31994ec527f0d10837?s=128&d=identicon&r=PG&f=1", "display_name": "Tim W", "link": "https://stackoverflow.com/users/8691659/tim-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508593969, "creation_date": 1508338338, "last_edit_date": 1508582625, "question_id": 46813139, "link": "https://stackoverflow.com/questions/46813139/stop-live555-from-re-using-session", "title": "Stop Live555 from re-using session", "body": "<p>I'm using Live555 to pull in data from a IP webcam on a remote connection. From time to time, there are brief interruptions to the stream (which might be a network QOS issues), however, live555 dies every time this happens instead of successfully restarting the connection. The debug output looks like this:</p>\n\n<pre><code>Closing session, because we stopped receiving packets.itrate=N/A speed=1.37x\nCreated new TCP socket 3 for connection\nConnecting to 10.8.1.14, port 10111 on socket 3...\n...remote connection opened\nSending request: PLAY rtsp://mycamera.test/live/ch0/ RTSP/1.0\nCSeq: 6\nUser-Agent: /bin/openRTSP (LIVE555 Streaming Media v2017.07.18)\nSession: 1487641045855494467\nRange: npt=0.000-\n\nReceived 199 new bytes of response data.\nReceived a complete PLAY response:\nRTSP/1.0 500 Internal Server Error\nServer: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )\nCseq: 6\nSession: 1487641045855494467\nConnection: Close\n\nFailed to start playing session: 500 Internal Server Error\nCreated new TCP socket 3 for connection\nConnecting to 10.8.1.14, port 10111 on socket 3...\n...remote connection opened\nSending request: TEARDOWN rtsp://mycamera.test/live/ch0/ RTSP/1.0\nCSeq: 7\nUser-Agent: /bin/openRTSP (LIVE555 Streaming Media v2017.07.18)\nSession: 1487641045855494467\n\nReceived 180 new bytes of response data.\nReceived a complete TEARDOWN response:\nRTSP/1.0 200 OK\nServer: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )\nCseq: 7\nSession: 1487641045855494467\nConnection: Close\n</code></pre>\n\n<p>It would seem that the reason live555 bails out is because the camera throws a 500 error when attempting to restart the stream for an existing session. Since starting a new session works, is there any way to tell live555 to discard the existing session and start again rather than just giving up? I do have a cron job which detects when live555 has stopped and restarts it, but there are knock on issues when I do this so it would be much cleaner if I could persuade live555 to compensate for the bug in the camera firmware.</p>\n\n<p>I'm happy to patch the live555 code and rebuild if necessary!</p>\n"}, {"tags": ["c++", "string", "vector"], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 1, "creation_date": 1508338537, "post_id": 46813148, "comment_id": 80573412, "body": "and an int is implicitly castable to a char"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 3, "creation_date": 1508338841, "post_id": 46813148, "comment_id": 80573637, "body": "@Steve Correct terminology would be &quot;implicitly convertible&quot;, casts are always explicit."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 9, "last_activity_date": 1508338698, "last_edit_date": 1508338698, "creation_date": 1508338354, "answer_id": 46813148, "question_id": 46813043, "link": "https://stackoverflow.com/questions/46813043/the-differences-between-a-string-and-an-element-of-a-vectorstring/46813148#46813148", "title": "The differences between a string and an element of a vector&lt;string&gt;", "body": "<p><code>std::vector</code> has nothing to do with that, your sample with <code>std::vector</code> is similar to</p>\n\n<pre><code>std::string s;\ns = 42;\n</code></pre>\n\n<p>but</p>\n\n<pre><code>std::string s = 42; // Constructor: \"equivalent\" to std::string s = std::string(42)\n</code></pre>\n\n<p>is different than</p>\n\n<pre><code>std::string s;\ns = 42; // assignation: s.operator =(42)\n</code></pre>\n\n<p>and <code>std::string::operator=(char)</code> exists whereas constructor taking <code>char</code> doesn't.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 6, "last_activity_date": 1508338506, "creation_date": 1508338506, "answer_id": 46813192, "question_id": 46813043, "link": "https://stackoverflow.com/questions/46813043/the-differences-between-a-string-and-an-element-of-a-vectorstring/46813192#46813192", "title": "The differences between a string and an element of a vector&lt;string&gt;", "body": "<p><code>std::vector</code> is a red herring. If you simply try the following, it will also compile fine :</p>\n\n<pre><code>#include &lt;string&gt;\nint main()\n{\n    std::string str;\n    str = 42;\n}\n</code></pre>\n\n<p>What you are actually doing is using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%3D\" rel=\"noreferrer\"><code>std::string::operator=(char)</code></a> which assigns a single character to the string. <code>42</code> is implicitly convertible to <code>char</code>. According to the ascii table, the value 42 is represented by the <code>'*'</code> character. We can verify this with the following :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nint main()\n{\n    std::string str;\n    str = 42;\n    std::cout &lt;&lt; str; // Prints *\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 8617622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd6de65e9b258771f6c0e525f76666e?s=128&d=identicon&r=PG&f=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/8617622/lightweight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "closed_date": 1508338713, "accepted_answer_id": 46813148, "answer_count": 2, "score": 4, "last_activity_date": 1508338698, "creation_date": 1508338092, "question_id": 46813043, "link": "https://stackoverflow.com/questions/46813043/the-differences-between-a-string-and-an-element-of-a-vectorstring", "closed_reason": "Duplicate", "title": "The differences between a string and an element of a vector&lt;string&gt;", "body": "<p>I'm a newcomer to programming. I am learning <code>vector</code> in C++. I am curious about why <code>string s = 42;</code> causes error but</p>\n\n<pre><code>vector&lt;string&gt;vec(3);\nvec[0] = 42;\n</code></pre>\n\n<p>does not. Thank you!</p>\n"}, {"tags": ["c++", "templates", "c++17", "template-templates"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1508339020, "post_id": 46813152, "comment_id": 80573784, "body": "<code>template &lt;class, auto...&gt;</code> seems sufficient? :) Probably covers all the real cases (<code>std::array</code>, <code>std::integer_sequence</code>) anyway."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1508339345, "post_id": 46813152, "comment_id": 80574013, "body": "@Barry: it probably is good enough in 99% of the cases, but if I were distributing a library containing <code>construct</code> I would probably generate a few more cases just to make sure it can handle 99.9999% :)"}, {"owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1508345006, "post_id": 46813152, "comment_id": 80577721, "body": "<i>sigh</i> thanks, that was the answer I was expecting but I thought there might be a fancy workaround. &quot;Sounds like you have a good idea for a proposal&quot; -- I was thinking about this <a href=\"https://groups.google.com/a/isocpp.org/forum/?utm_medium=email&amp;utm_source=footer#!msg/std-proposals/LssgltuyOF4/Hp0K2KJgAQAJ\" rel=\"nofollow noreferrer\">a while ago</a>, pre-C++17. <code>std::is_aggregate</code> and constructor type deduction change things a bit though."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 5, "last_activity_date": 1508339279, "last_edit_date": 1508339279, "creation_date": 1508338361, "answer_id": 46813152, "question_id": 46812945, "link": "https://stackoverflow.com/questions/46812945/generic-template-template-parameters/46813152#46813152", "title": "Generic template template parameters", "body": "<p>Unfortunately, there is no proper way of doing this without code repetition. The newly added \"<code>auto</code> as template parameter\" in C++17 only supports <em>non-type template parameters</em>.</p>\n\n<p>The only way I can think this could work is by using a code generator to generate a fixed amount of permutations of <code>auto</code> and <code>class</code>. E.g.</p>\n\n<pre><code>template &lt;\n    template &lt;class, auto...&gt; class T,\n    class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args) // ...\n\ntemplate &lt;\n    template &lt;class, auto, class...&gt; class T,\n    class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args) // ...\n\ntemplate &lt;\n    template &lt;auto, class, auto...&gt; class T,\n    class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args) // ...\n\ntemplate &lt;\n    template &lt;auto, class, auto, class...&gt; class T,\n    class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args) // ...\n\ntemplate &lt;\n    template &lt;auto, class, auto, class, auto...&gt; class T,\n    class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args) // ...\n\n// and so on...\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/rR9dr0zIjnvEbO11\" rel=\"nofollow noreferrer\"><strong>live example on wandbox</strong></a></p>\n\n<p><em>Sounds like you have a good idea for a proposal...</em></p>\n"}], "owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 3, "accepted_answer_id": 46813152, "answer_count": 1, "score": 3, "last_activity_date": 1508339279, "creation_date": 1508337833, "last_edit_date": 1508338622, "question_id": 46812945, "link": "https://stackoverflow.com/questions/46812945/generic-template-template-parameters", "title": "Generic template template parameters", "body": "<p>Fed up with \"uniform initialisation\" not being very uniform, I decided to write a generic <code>construct()</code> wrapper which uses aggregate initialisation if a type is an aggregate, and direct initialisation otherwise:</p>\n\n<pre><code>template &lt;class T, class... Args,\n          std::enable_if_t&lt;std::is_aggregate_v&lt;T&gt;, int&gt; = 0&gt;\nconstexpr auto construct(Args&amp;&amp;... args)\n    -&gt; decltype(T{std::forward&lt;Args&gt;(args)...})\n{\n    return T{std::forward&lt;Args&gt;(args)...};\n}\n\ntemplate &lt;class T, class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args)\n   -&gt; decltype(T(std::forward&lt;Args&gt;(args)...))\n{\n    return T(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>This works well enough:</p>\n\n<pre><code>template &lt;class T, class U&gt;\nstruct my_pair { T first; U second; };\n\nauto p = construct&lt;my_pair&lt;int, float&gt;&gt;(1, 3.14f);\nauto v = construct&lt;std::vector&lt;int&gt;&gt;(5, 0);\n</code></pre>\n\n<p>I'd like to extend this to use template argument deduction for constructors. So I added another pair of overloads:</p>\n\n<pre><code>template &lt;template &lt;class...&gt; class T, // &lt;-- (1) \n          class... Args,\n          class A = decltype(T{std::declval&lt;Args&gt;()...}),\n          std::enable_if_t&lt;std::is_aggregate_v&lt;A&gt;, int&gt; = 0&gt;\nconstexpr auto construct(Args&amp;&amp;... args)\n    -&gt; decltype(T{std::forward&lt;Args&gt;(args)...})\n{\n     return T{std::forward&lt;Args&gt;(args)...};\n}\n\ntemplate &lt;template &lt;class...&gt; class T, // &lt;-- (1)\n          class... Args&gt;\nconstexpr auto construct(Args&amp;&amp;... args)\n    -&gt; decltype(T(std::forward&lt;Args&gt;(args)...))\n{\n    return T(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>Perhaps surprisingly (at least to me), this works for simple cases:</p>\n\n<pre><code>// deduction guide for my_pair\ntemplate &lt;class T, class U&gt; my_pair(T&amp;&amp;, U&amp;&amp;) -&gt; my_pair&lt;T, U&gt;;\n\nauto p = construct&lt;my_pair&gt;(1, 3.14f); // my_pair&lt;int, float&gt;\nauto v = construct&lt;std::vector&gt;(5, 0); // vector of 5 ints\n</code></pre>\n\n<p>Unfortunately however this fails when trying to call</p>\n\n<pre><code>auto a = construct&lt;std::array&gt;(1, 2, 3); // No matching call to construct()\n</code></pre>\n\n<p>because <code>std::array</code> has a non-type template parameter, so it doesn't match the <code>template &lt;class...&gt; class T</code> template template parameter at (1).</p>\n\n<p>So my question is, is there a way to formulate the parameter at (1) such that it can accept <em>any</em> class template name, regardless of the kind (type or non-type) of its template parameters?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1508337237, "post_id": 46812657, "comment_id": 80572490, "body": "All this and more is explained in any <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508337381, "post_id": 46812657, "comment_id": 80572601, "body": "That <code>const</code> is not qualifying the function itself. It qualifies the return type. Same goes for the potential <code>const</code> you mention for that parameters, they would qualify those parameters&#39; type. Member function qualifiers come at the very end, like <code>void foo() const</code>."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1508337422, "post_id": 46812657, "comment_id": 80572627, "body": "You&#39;re over-complicating it, just return <code>Type</code> and not <code>const Type&amp;</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1508337476, "post_id": 46812657, "comment_id": 80572671, "body": "@acraig5075 Those two aren&#39;t necessarily equivalent. Some types are not copyable and others are expensive to copy. In this case, the function is returning a reference to one of the arguments. Changing the return type would drastically change the function&#39;s usage."}, {"owner": {"reputation": 117, "user_id": 8771450, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449323461824619/picture?type=large", "display_name": "Simon Maghiar", "link": "https://stackoverflow.com/users/8771450/simon-maghiar"}, "edited": false, "score": 0, "creation_date": 1508337555, "post_id": 46812657, "comment_id": 80572731, "body": "So If I put a const at the begining of the function especially in this case it means that the return type can&#39;t be modified right?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508337613, "post_id": 46812657, "comment_id": 80572781, "body": "<code>const T &amp;</code> means you can&#39;t use that reference  to modified the referred object. It doesn&#39;t necessarily mean that it can&#39;t be modified. It could still potentially be modified using a different non-const reference in another part of your code."}, {"owner": {"reputation": 117, "user_id": 8771450, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449323461824619/picture?type=large", "display_name": "Simon Maghiar", "link": "https://stackoverflow.com/users/8771450/simon-maghiar"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508337764, "post_id": 46812657, "comment_id": 80572884, "body": "Ohh yea I got it ! Thank you @Fran&#231;oisAndrieux !"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508337893, "post_id": 46812657, "comment_id": 80572978, "body": "also note that returning a non-const reference to a member breaks encapsulation, in that case you could as well make the member public."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1508338054, "post_id": 46812657, "comment_id": 80573088, "body": "If there is no duplicate Q&amp;A, these comments should be potential answers...."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 5524469, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059307350777600/picture?type=large", "display_name": "Sahil Shah", "link": "https://stackoverflow.com/users/5524469/sahil-shah"}, "is_accepted": true, "score": 0, "last_activity_date": 1508341250, "creation_date": 1508341250, "answer_id": 46814129, "question_id": 46812657, "link": "https://stackoverflow.com/questions/46812657/why-do-we-need-to-put-const-at-the-begining-of-the-function-getmax/46814129#46814129", "title": "Why do we need to put const at the begining of the function GetMax?", "body": "<p>I am going to put forth a few points about const so that it is clear when and what can you use as required:</p>\n\n<p>Case 1: <code>GetMax(const Type value1)</code> </p>\n\n<p>Here value1 is a local copy, I can think of a couple of points </p>\n\n<p>I can think of a few reasons:</p>\n\n<p>1) When someone reads the code and see <code>const Type value1</code>, they know that <code>value1</code> should not be modified in the body of the function.</p>\n\n<p>2) The compiler will tell you when you try to modify <code>value1</code> in the body of the function. Therefore, adding <code>const</code> can prevent mistakes.</p>\n\n<p>3) However, there is another difference in C++11. A constant object cannot be moved from, as a move operation modifies the object. Therefore, you can only make a copy of <code>value1</code> in the function body and cannot move from it.</p>\n\n<p>4) Also, if this is a class type, you cannot call non-const members functions on a const object. </p>\n\n<p>Case 2: <code>GetMax(const Type&amp; value1)</code> </p>\n\n<p>We don't know how <code>value1</code> is used outside the function, so we want to protect it from being modified.</p>\n\n<p>Case 3: <code>const Type&amp; GetMax()</code></p>\n\n<p>Talking about the <code>const</code> before the function, means it will return a <code>const</code> reference to <code>Type</code> (here <code>GetMax</code>)</p>\n\n<p>Take this example: </p>\n\n<pre><code>Class xyz;\nType&amp; t = xyz.GetMax()           //This is INCORRECT\nconst Type&amp; tc = xyz.GetMax()    //This is OKAY!\n</code></pre>\n\n<p>So, to sum up, you do not \"need to use\" <code>const</code> unless you have such requirements as mentioned above, although it might be good practice to do so in a few situations.</p>\n"}], "owner": {"reputation": 117, "user_id": 8771450, "user_type": "registered", "profile_image": "https://graph.facebook.com/1449323461824619/picture?type=large", "display_name": "Simon Maghiar", "link": "https://stackoverflow.com/users/8771450/simon-maghiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1508452058, "accepted_answer_id": 46814129, "answer_count": 1, "score": -6, "last_activity_date": 1508341250, "creation_date": 1508337109, "last_edit_date": 1508337254, "question_id": 46812657, "link": "https://stackoverflow.com/questions/46812657/why-do-we-need-to-put-const-at-the-begining-of-the-function-getmax", "closed_reason": "Needs more focus", "title": "Why do we need to put const at the begining of the function GetMax?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\ntemplate &lt;typename Type&gt;\nconst Type&amp; GetMax(Type&amp; value1,Type&amp; value2)\n{\n    if(value1 &gt; value2)\n        return value1;\n    else\n        return value2;\n}\ntemplate&lt;typename Type&gt;\nvoid DisplayComparison(const Type&amp; value1,const Type&amp; value2)\n{\n    cout&lt;&lt;\"GetMax(\"&lt;&lt;value1&lt;&lt;\",\"&lt;&lt;value2&lt;&lt;\") = \";\n    cout&lt;&lt;GetMax(value1,value2)&lt;&lt;endl;\n}\nint main()\n{\n    int Int1 = -102, Int2 = 2001;\n    DisplayComparison(Int1,Int2);\n\n    double d1 = 3.14,d2 = 3.1416;\n    DisplayComparison(d1,d2);\n\n    string Name1(\"Jack\"),Name2(\"John\");\n    DisplayComparison(Name1,Name2);\n\n    return 0;\n}\n</code></pre>\n\n<p><code>const Type&amp; GetMax</code> ... is <code>const</code> necessary? If yes why? \nand if I write like this--> <code>const Type&amp; GetMax(const Type&amp; value1,const Type&amp; value)</code> what those two <code>const</code> are doing? :(</p>\n"}, {"tags": ["c++", "algorithm", "optimization", "g++", "compiler-optimization"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1508336994, "post_id": 46812511, "comment_id": 80572325, "body": "And what is your question? &quot;Explain how exactly gcc&#39;s optimizer works and how this happened&quot; or &quot;How do I avoid this issue&quot; or &quot;How can I make the code run faster&quot;?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 3, "creation_date": 1508337080, "post_id": 46812511, "comment_id": 80572378, "body": "Is the first line of data supposed to be 35083,34051 ?  It would be really helpful if you turned the table into a fixed width table, with spaces between."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508337151, "post_id": 46812511, "comment_id": 80572430, "body": "What does the assembly look like in both cases?  (Particularly for the recursive calls, but is the first bit identical or not?)"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 2, "creation_date": 1508337334, "post_id": 46812511, "comment_id": 80572565, "body": "Caution: this is a bad implementation because the recursive calls can very well explode the stack. Always process the shortest subarray first !"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508337668, "post_id": 46812511, "comment_id": 80572812, "body": "Without having looked at the details here, it is not a universal truth that <code>-O2</code> or <code>-O3</code> is the best possible combination of the complex optimization setting the compilers provide for every single piece of code. One can certainly beat the two big defaults by tweaking sometimes."}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508338146, "post_id": 46812511, "comment_id": 80573153, "body": "@MartinBonner, I have absolutely no idea about x86 assembly."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 2, "creation_date": 1508338230, "post_id": 46812511, "comment_id": 80573219, "body": "@YvesDaoust : Of course, that only helps if the compiler is actually eliminating tail calls!"}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1508338259, "post_id": 46812511, "comment_id": 80573235, "body": "@BaummitAugen, part of the reason I implemented this was to see effect of tail-call optimization firsthand."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 3, "creation_date": 1508342253, "post_id": 46812511, "comment_id": 80576099, "body": "ShihabShahriar: As @YvesDaoust says, the main point of tail-calling in quicksort is not to speed up the quicksort but rather to prevent stack blowup. By <i>recursing</i> on the shorter partition and then <i>looping</i> on the longer one, you guarantee that the recursion depth is less than the log2 of the number of elements, which can be considered a small constant on most practical hardware. (eg. much smaller than 64)"}], "answers": [{"comments": [{"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1508530765, "post_id": 46818441, "comment_id": 80661020, "body": "You did not answer any of the three questions posed by the OP. You did not explain how gcc&#39;s tail call optimizer works. You did not explain why that optimization reduced the performance of qsort. You did not explain how to fix qsort so that the optimization works better on it. All you have done here is a general, imprecise introduction to tail call optimization. The amazing part is, despite all that, the OP accepted your answer and you got 5 upvotes and 0 downvotes. People who can actually answer the questions would no longer be motivated to do that because nobody cares anymore."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1508562018, "post_id": 46818441, "comment_id": 80667983, "body": "@HadiBrais sorry to hear, my answer ruined this question for you, I did my best (there are a lot of people who could do a lot better, for sure), still I hope it was not completely useless for others. If you are interested in a better answer, you can start a bounty or post your own more specific question (because &quot;explain how gcc works&quot; will most probably not trigger a lot of precise answers)."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1508562221, "post_id": 46818441, "comment_id": 80668023, "body": "@HadiBrais or if you would like to give a more precise answer, I would be happy to start a bounty if this would motivate you."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1508570126, "post_id": 46818441, "comment_id": 80669344, "body": "Your answer is not useless. It is just that this is not the right place for it. I was interested in giving an answer. I don&#39;t want any bounty. The OP accepted your answer and moved on. So there is no point in spending any effort on this anymore."}], "tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 5, "last_activity_date": 1508439789, "last_edit_date": 1508439789, "creation_date": 1508357482, "answer_id": 46818441, "question_id": 46812511, "link": "https://stackoverflow.com/questions/46812511/tail-call-optimisation-seems-to-slightly-worsen-performance/46818441#46818441", "title": "Tail call optimisation seems to slightly worsen performance", "body": "<p><strong>On speed:</strong></p>\n\n<p>As already pointed out in the comments, the primary goal of tail-call-optimization is to reduce the usage of the stack.</p>\n\n<p>However, often there is a collateral: the program becomes faster because there is no overhead needed for a call of a function. This gain is most prominent if the work in the function itself is not that big, so the overhead has some weight. </p>\n\n<p>If there is a lot of work done during a function call, the overhead can be neglected and there is no noticeable speed-up. </p>\n\n<p>On the other hand, if tail call optimization is done, that means that potentially other optimization cannot be done, which could otherwise speed-up your code.</p>\n\n<p>The case of your quick-sort is not that clear cut: There are some calls with a lot of workload and a lot of calls with a very small work load.</p>\n\n<p>So, for 1M elements there are more disadvantages from tail-call-optimization as advantages. On my machine the tail-call-optimized function becomes faster than the non-optimized function for arrays smaller than <code>50000</code> elements.</p>\n\n<p>I must confess, I cannot say, why this is the case alone from looking at the <a href=\"https://godbolt.org/g/Un9ovr\" rel=\"nofollow noreferrer\">assembly</a>. All I can understand, is that the resulting assemblies are pretty different and that the <code>quicksort</code> is really called once for the optimized version.</p>\n\n<p>There is a clear cut example, for which tail-call-optimization is much faster (because there is not very much happening in the function itself and the overhead is noticeable):</p>\n\n<pre><code>//fib.cpp\n#include &lt;iostream&gt;\n\nunsigned long long int fib(unsigned long long int n){\n  if (n==0 || n==1)\n    return 1;\n  return fib(n-1)+fib(n-2);\n}\n\nint main(){\n  unsigned long long int N;\n  std::cin &gt;&gt; N;\n  std::cout &lt;&lt; fib(N);\n}\n</code></pre>\n\n<p>running <code>time echo \"40\" | ./fib</code>, I get <code>1.1</code> vs. <code>1.6</code> seconds for tail-call-optimized version vs. non-optimized version. Actually, I'm pretty impressed, that the compiler is able to use tail-call-optimization here - but it really does, as can be see at <a href=\"https://godbolt.org/g/TV8BbU\" rel=\"nofollow noreferrer\">godbolt.org</a>, - the second call of <code>fib</code>  is optimized.</p>\n\n<hr>\n\n<p><strong>On tail call optimization:</strong></p>\n\n<p>Usually, tail-call optimization can be done if the recursion call is the last operation (prior to <code>return</code>) in the function - the variables on the stack can be reused for the next call, i.e. the function should be of the form</p>\n\n<pre><code>ResType f( InputType input){\n    //do work\n    InputType new_input = ...;\n    return f(new_input);\n}\n</code></pre>\n\n<p>There are some languages which don't do tail call optimization at all  (e.g. python) and some for which you can explicitely ask the compiler to do it  and the compiler will fail if it were not able to (e.g. clojure). c++ goes a way in beetween: the compiler tries its best (which is amazingly good!), but you have no guarantee it will succseed and if not, it silently falls to a version without tail-call-optimization.</p>\n\n<p>Let's take look at this simple and standard implementation of tail call recursion:</p>\n\n<pre><code>//should be called fac(n,1)\nunsigned long long int \nfac(unsigned long long int n, unsigned long long int res_so_far){\n  if (n==0)\n    return res_so_far;\n  return fac(n-1, res_so_far*n);\n}\n</code></pre>\n\n<p>This classical form of tail-call makes it easy for compiler to optimize: see result <a href=\"https://godbolt.org/g/2ahVMd\" rel=\"nofollow noreferrer\">here</a> - no recursive call to <code>fac</code>!</p>\n\n<p>However, the gcc compiler is able to perform the TCO also for less obvious cases:</p>\n\n<pre><code>unsigned long long int \nfac(unsigned long long int n){\n  if (n==0)\n    return 1;\n  return n*fac(n-1);\n}\n</code></pre>\n\n<p>It is easier to read and write for us humans, but harder to optimize for compiler (fun fact: TCO is not performed if the return type would be <code>int</code> instead of <code>unsigned long long int</code>): after all the result from the recursive call is used for further calculations (multiplication) before it is returned. But gcc <a href=\"https://godbolt.org/g/pcjtJU\" rel=\"nofollow noreferrer\">manages</a> to perform TCO here as well!</p>\n\n<p>At hand of this example, we can see the result of TCO at work:</p>\n\n<pre><code>//factorial.cpp\n#include &lt;iostream&gt;\n\nunsigned long long int \nfac(unsigned long long int n){\n  if (n==0)\n    return 1;\n  return n*fac(n-1);\n}\n\nint main(){\n  unsigned long long int N;\n  std::cin &gt;&gt; N;\n  std::cout &lt;&lt; fac(N);\n}\n</code></pre>\n\n<p>Running <code>time echo \"40000000\" | ./factorial</code> will get you the result (0) in no time if the tail-call-optimization was on, or \"Segmentation fault\" otherwise - because of the stack-overflow due to recursion depth.</p>\n\n<p>Actually it is a simple test to see whether the tail-call-optimization was performed or not: \"Segmentation fault\" for non-optimized version and large recursion depth.</p>\n\n<hr>\n\n<p><strong>Corollary:</strong></p>\n\n<p>As already pointed out in the comments: Only the second call of the <code>quick-sort</code> is optimized via TLO. In you implementation, if you are unlucky and the second half of the array always consist of only one element you will need <code>O(n)</code> space on the stack.</p>\n\n<p>However, if the first call would be always with the smaller half and the second call with the larger half were TLO, you would need at most <code>O(log n)</code> recursion depth and thus only <code>O(log n)</code> space on the stack.</p>\n\n<p>That means you should check for which part of the array you call the <code>quicksort</code> first as it plays a huge role.</p>\n"}], "owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 46818441, "answer_count": 1, "score": 6, "last_activity_date": 1508439789, "creation_date": 1508336665, "last_edit_date": 1508402141, "question_id": 46812511, "link": "https://stackoverflow.com/questions/46812511/tail-call-optimisation-seems-to-slightly-worsen-performance", "title": "Tail call optimisation seems to slightly worsen performance", "body": "<p>In a quicksort implementation, the data on left is for pure <code>-O2</code> optimized code, and data on right is <code>-O2</code> optimized code with  <code>-fno-optimize-sibling-calls</code> flag turned on i.e with tail-call optimisation turned off. This is average of 3 different runs, variation seemed negligible. Values were of range 1-1000, time in millisecond. Compiler was MinGW g++, version 6.3.0.</p>\n\n<pre><code>size of array     with TLO(ms)    without TLO(ms)\n      8M                35,083           34,051 \n      4M                 8,952            8,627\n      1M                   613              609\n</code></pre>\n\n<p>Below is my code: </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint N = 4000000;\n\nvoid qsort(int* arr,int start=0,int finish=N-1){\n    if(start&gt;=finish) return ;\n    int i=start+1,j = finish,temp;\n    auto pivot = arr[start];\n    while(i!=j){\n        while (arr[j]&gt;=pivot &amp;&amp; j&gt;i) --j;\n        while (arr[i]&lt;pivot &amp;&amp; i&lt;j) ++i;\n        if(i==j) break;\n        temp=arr[i];arr[i]=arr[j];arr[j]=temp; //swap big guy to right side\n    }\n    if(arr[i]&gt;=arr[start]) --i;\n\n    temp = arr[start];arr[start]=arr[i];arr[i]=temp; //swap pivot\n    qsort(arr,start,i-1);\n    qsort(arr,i+1,finish);\n}\n\nint main(){\n    srand(time(NULL));\n    int* arr = new int[N];\n    for(int i=0;i&lt;N;i++) {arr[i] = rand()%1000+1;}\n\n    auto start = clock();\n    qsort(arr);\n    cout&lt;&lt;(clock()-start)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>I heard <code>clock()</code> isn't the perfect way to measure time. But this effect seems to be consistent.</p>\n\n<p>EDIT: as response to a comment, I guess my question is : Explain how exactly gcc's tail-call optimizer works and how this happened and what should I do to leverage tail-call to speed up my program?</p>\n"}, {"tags": ["c++", "qt", "module", "raspberry-pi3"], "answers": [{"tags": [], "owner": {"reputation": 665, "user_id": 6367098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mdK2PtRe5co/AAAAAAAAAAI/AAAAAAAAAGs/hwJ0kn0htaw/photo.jpg?sz=128", "display_name": "Martin H&#246;her", "link": "https://stackoverflow.com/users/6367098/martin-h%c3%b6her"}, "is_accepted": false, "score": 0, "last_activity_date": 1508596465, "creation_date": 1508596465, "answer_id": 46864371, "question_id": 46812384, "link": "https://stackoverflow.com/questions/46812384/cross-compile-qtmodules-for-raspberry-pi-3/46864371#46864371", "title": "Cross compile QtModules for raspberry pi 3", "body": "<p>Looking into <a href=\"https://github.com/qt/qtserialport/blob/5.10/tests/auto/cmake/cmake.pro\" rel=\"nofollow noreferrer\">this file</a> in the QtSerialPort repository, it seems like there is some kind of integration with CMake's CTest framework. Hence, to get rid of the message, I guess you could try to install CMake:</p>\n\n<pre><code>sudo apt-get install cmake\n</code></pre>\n\n<p>However, I am not sure if this actually is an error (as it says <code>Project MESSAGE</code> - it might just be informational and safe to ignore).</p>\n"}], "owner": {"reputation": 143, "user_id": 3276787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7951bd9a41d6fe00428ba92f11ddd18c?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Del Sannio", "link": "https://stackoverflow.com/users/3276787/antonio-del-sannio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508596465, "creation_date": 1508336262, "question_id": 46812384, "link": "https://stackoverflow.com/questions/46812384/cross-compile-qtmodules-for-raspberry-pi-3", "title": "Cross compile QtModules for raspberry pi 3", "body": "<p>I need to cross compile QSerialPort module and QtChart Module for the pi cm3 on Ubuntu x64, after having successfully compiled qtbase following the <a href=\"https://wiki.qt.io/RaspberryPi2EGLFS#Step_by_step\" rel=\"nofollow noreferrer\">https://wiki.qt.io/RaspberryPi2EGLFS#Step_by_step</a> guide.</p>\n\n<p>In the same guide is told to compile other modules in the following way:</p>\n\n<pre><code>git clone git://code.qt.io/qt/&lt;qt-module&gt;.git -b &lt;qt-version&gt;\ncd &lt;qt-module&gt;\n\n~/raspi/qt5/bin/qmake -r\nmake\nmake install\n</code></pre>\n\n<p>I tried that method with </p>\n\n<pre><code>git clone git://code.qt.io/qt/qtserialport.git\ncd qtserialPort\n</code></pre>\n\n<p>but doing </p>\n\n<pre><code>~/raspi/qt5/bin/qmake -r\n</code></pre>\n\n<p>i get the error</p>\n\n<pre><code>Project MESSAGE: cmake executable not found. Not running CMake unit tests\n</code></pre>\n\n<p>How to fix the error?</p>\n"}, {"tags": ["c++", "multithreading", "concurrency"], "comments": [{"owner": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "edited": false, "score": 1, "creation_date": 1508336150, "post_id": 46812308, "comment_id": 80571748, "body": "Generally when you use new, you allocate memory and you need to use delete to remove it or the memory region will remain allocated until the program ends"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "edited": false, "score": 3, "creation_date": 1508336186, "post_id": 46812308, "comment_id": 80571765, "body": "@TemaniAfif You probably meant <code>delete</code>."}, {"owner": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1508336258, "post_id": 46812308, "comment_id": 80571817, "body": "@Ron yes ! free is with malloc, just a mistake ..."}], "answers": [{"tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 0, "last_activity_date": 1508336352, "creation_date": 1508336352, "answer_id": 46812411, "question_id": 46812308, "link": "https://stackoverflow.com/questions/46812308/c-are-these-threads-destroyed-after-the-for-loop-is-completed/46812411#46812411", "title": "C++ - are these threads destroyed after the for loop is completed", "body": "<p>Here </p>\n\n<pre><code>thread *t = new thread(example_function);\n</code></pre>\n\n<p>you already loose the formerly allocated <code>thread</code> instance and have a memory leak.</p>\n\n<p><code>join()</code> doesn't free the allocated memory, but picks up the asynchonously ended function.</p>\n"}, {"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 45, "user_id": 3572917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d141ffefd1da88e75e073164631bc2fb?s=128&d=identicon&r=PG&f=1", "display_name": "user3572917", "link": "https://stackoverflow.com/users/3572917/user3572917"}, "edited": false, "score": 1, "creation_date": 1508336723, "post_id": 46812412, "comment_id": 80572117, "body": "@user3572917 Yea, because you don&#39;t immediately wait for the thread you just started. You create them all, then start waiting for each."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508336949, "post_id": 46812412, "comment_id": 80572287, "body": "<code>make_unique</code> does not need <code>new</code> inside  (not to say that whole dynamic allocation is unnecessary)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508337264, "post_id": 46812412, "comment_id": 80572517, "body": "@Slava You are right, they forward parameters to the actual <code>new</code>. Thank you! Ah, and you are right about there being no need for dynamic allocation in this example."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1508337151, "last_edit_date": 1508337151, "creation_date": 1508336355, "answer_id": 46812412, "question_id": 46812308, "link": "https://stackoverflow.com/questions/46812308/c-are-these-threads-destroyed-after-the-for-loop-is-completed/46812412#46812412", "title": "C++ - are these threads destroyed after the for loop is completed", "body": "<p>No, <code>thread</code> objects created inside the <code>for</code> loop are not destroyed, which means that they create memory leaks.</p>\n\n<p>In order to make sure that the threads are destroyed you need to call <code>delete</code> on them in one of several ways:</p>\n\n<ul>\n<li>Call <code>delete</code> at the end of the scope, or</li>\n<li>Add thread pointers to a container of pointers, and call <code>delete</code> in a separate loop, or</li>\n<li>Add thread pointer to a smart pointer that ensures deletion when the scope ends, or</li>\n<li>Add thread pointers to a container of smart pointers, and let the container delete the threads when it goes out of scope.</li>\n</ul>\n\n<p>Note that since you are calling <code>join</code> on each loop iteration your \"concurrent\" program is as good as a single-threaded one. Here is how to run your threads concurrently, and ensure thread deletions at the end:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;std::thread&gt;&gt;&gt; threads;\nfor (int i = 0; i &lt; 10; i++) {\n    threads.push_back(std::make_unique&lt;thread&gt;(example_function));\n}\nfor (int i = 0; i &lt; 10; i++) {\n    threads[i]-&gt;join();\n}\n</code></pre>\n\n<p>Once <code>threads</code> vector goes out of scope, it deletes <code>std::unique_ptr&lt;thread&gt;</code> objects inside it, which in turn calls <code>delete</code> on the individual <code>std::thread</code> objects.</p>\n"}, {"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1508336581, "post_id": 46812453, "comment_id": 80572026, "body": "I was thinking about the same, except for putting the code into <code>{ }</code> to make a scope for concurrent execution."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1508337039, "last_edit_date": 1508337039, "creation_date": 1508336488, "answer_id": 46812453, "question_id": 46812308, "link": "https://stackoverflow.com/questions/46812308/c-are-these-threads-destroyed-after-the-for-loop-is-completed/46812453#46812453", "title": "C++ - are these threads destroyed after the for loop is completed", "body": "<blockquote>\n  <p>I am doing something similar in a coding project of mine and was wondering if since the threads get defined inside the loop they are destroyed after the loop ends</p>\n</blockquote>\n\n<p>Whole purpose of dynamic allocation using operator <code>new</code> is to provide manual control over object lifetime. So no, until you explicitly call <code>delete</code> or you use a smart pointer that does it for you under the hood your object would not be destroyed. Note, calling <code>std::thread::join()</code> inside the loop effectively would make your program single threaded. More proper use would be:</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\nwhile( threads.size() &lt; 10 )\n    threads.emplace_back(example_function);\n\nfor( auto &amp;thread : threads )\n    thread.join(); // join in a separate loop, let all threads to start\n\nthreads.clear(); // or let it go out of scope\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1508336636, "creation_date": 1508336636, "answer_id": 46812504, "question_id": 46812308, "link": "https://stackoverflow.com/questions/46812308/c-are-these-threads-destroyed-after-the-for-loop-is-completed/46812504#46812504", "title": "C++ - are these threads destroyed after the for loop is completed", "body": "<p>No. The caller is responsible for ensuring objects allocated using <code>new</code> are <code>delete</code>d.</p>\n\n<p>The code is of course pretty pointless because no meaningful concurrency occurs but to avoid a memory leak should be:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) {\n    thread *t = new thread(example_function);\n    t-&gt;join();\n    delete t;\n}\n</code></pre>\n\n<p>In any version of C++11 onwards it is recommended you use <code>std::unique_ptr</code> in these cases:</p>\n\n<p>The most recommended form is:</p>\n\n<pre><code>auto t{std::make_unique&lt;std::thread&gt;(example_function)};\n</code></pre>\n\n<p>Which is almost equivalent to:</p>\n\n<pre><code>std::unique_ptr&lt;std::thread&gt; t(new std::thread(example_function));\n</code></pre>\n\n<p>A <code>std::unique_ptr</code> is an object that has operator overloading to behave a lot like a pointer with the difference of deleting the thing it points to (if anything) at the end of its life-time.</p>\n"}], "owner": {"reputation": 45, "user_id": 3572917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d141ffefd1da88e75e073164631bc2fb?s=128&d=identicon&r=PG&f=1", "display_name": "user3572917", "link": "https://stackoverflow.com/users/3572917/user3572917"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 46812412, "answer_count": 4, "score": 1, "last_activity_date": 1508337151, "creation_date": 1508336044, "question_id": 46812308, "link": "https://stackoverflow.com/questions/46812308/c-are-these-threads-destroyed-after-the-for-loop-is-completed", "title": "C++ - are these threads destroyed after the for loop is completed", "body": "<pre><code>for (int i = 0; i &lt; 10; i++) {\n    thread *t = new thread(example_function);\n    t-&gt;join();\n}\n</code></pre>\n\n<p>I am doing something similar in a coding project of mine and was wondering if since the threads get defined inside the loop they are destroyed after the loop ends (I know the pointer to the thread probably gets deleted but what about the thread itself?).</p>\n"}, {"tags": ["c#", "c++", "ubuntu", ".net-core", "cross-platform"], "comments": [{"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "edited": false, "score": 0, "creation_date": 1508336482, "post_id": 46812185, "comment_id": 80571968, "body": "I doubt you can do it with interface (because interface means having some object that implements it). I&#39;m not much into .Net Core, but check if <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.marshal.getdelegateforfunctionpointer?view=netframework-4.7.1#System_Runtime_InteropServices_Marshal_GetDelegateForFunctionPointer_System_IntPtr_System_Type_\" rel=\"nofollow noreferrer\"><code>Marshal.GetDelegateForFunctionPointer</code></a> is available to you. You can try to use it to invoke C-style callback."}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 3553138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Gjmch.jpg?s=128&g=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/3553138/pavel"}, "edited": false, "score": 0, "creation_date": 1531154456, "post_id": 48064059, "comment_id": 89479465, "body": "From what I can tell, this is about Mono and not .NET Core."}, {"owner": {"reputation": 652, "user_id": 5106759, "user_type": "registered", "profile_image": "https://graph.facebook.com/959139744106160/picture?type=large", "display_name": "Madars Vi", "link": "https://stackoverflow.com/users/5106759/madars-vi"}, "reply_to_user": {"reputation": 860, "user_id": 3553138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Gjmch.jpg?s=128&g=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/3553138/pavel"}, "edited": false, "score": 0, "creation_date": 1531253899, "post_id": 48064059, "comment_id": 89524746, "body": "Why you think so?  Check the Makefile there:   <code>all: \tclang++ -shared -fPIC -std=c++11 .&#47;reversepinvokefromthread.cpp -o reversepinvokefromthread.so \tdotnet run</code>  It is running dotnet command and not mono."}, {"owner": {"reputation": 860, "user_id": 3553138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Gjmch.jpg?s=128&g=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/3553138/pavel"}, "edited": false, "score": 0, "creation_date": 1531253973, "post_id": 48064059, "comment_id": 89524770, "body": "Oh, that was my bad. I&#39;d been searching for a solution and had a bunch of tabs open, so I accidentally commented in the wrong one."}], "tags": [], "owner": {"reputation": 652, "user_id": 5106759, "user_type": "registered", "profile_image": "https://graph.facebook.com/959139744106160/picture?type=large", "display_name": "Madars Vi", "link": "https://stackoverflow.com/users/5106759/madars-vi"}, "is_accepted": false, "score": 1, "last_activity_date": 1514908823, "creation_date": 1514908823, "answer_id": 48064059, "question_id": 46812185, "link": "https://stackoverflow.com/questions/46812185/call-c-net-core-method-from-c/48064059#48064059", "title": "Call (C#) .NET Core method from C++", "body": "<p>See <a href=\"https://github.com/dotnet/corefx/issues/14540\" rel=\"nofollow noreferrer\">See this issue</a> from comments I constructed code where C# calls C and gives it callback delegate. Thus from C then it calls C#, and passes additional int type argument. <a href=\"http://www.endurox.org/issues/23\" rel=\"nofollow noreferrer\">See comments here from endurox project</a>, and attached c-callback.tar.gz  for working example.</p>\n"}], "owner": {"reputation": 290, "user_id": 7141549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f23b32f51fdcc624d4f9d415c372c3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/7141549/andrew-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2282, "favorite_count": 3, "answer_count": 1, "score": 9, "last_activity_date": 1514908823, "creation_date": 1508335716, "question_id": 46812185, "link": "https://stackoverflow.com/questions/46812185/call-c-net-core-method-from-c", "title": "Call (C#) .NET Core method from C++", "body": "<p>I have 2 components:<br>\n - .Net Core Application running on Ubuntu OS.<br>\n - C++ shared library (.so)  </p>\n\n<p>Now I want C++ component to be able to call .Net Core method, either passing interface to C++ component which will use this interface to callback method implementation or passing method as a parameter to C++ component.</p>\n\n<p>High-level example what I am trying to achieve:<br>\nC# component :</p>\n\n<pre><code>public interface IDevice\n{\n   void OnDataAvailable(string data);\n}\n\npublic class Device: IDevice\n{\n   [DllImport(\"sampleCPPLibrary.so\")]\n   private static extern int SetReceiver(IDevice receiver);  \n   public void OnDataAvailable(string data)\n   {\n      Console.WriteLine(data);\n   }\n   public void Initialize()\n   {\n      SetReceiver(IDevice(this))\n   }\n}\n</code></pre>\n\n<p>C++ component:</p>\n\n<pre><code>extern \"C\" {\nvoid SetReceiver(IReceiver * receiver)\n{\n    receiver-&gt;OnDataAvailable(10);\n}\n}\n</code></pre>\n\n<p><strong>Basically, what I am trying to do is just to pass some kind of \"callback\" to C++ component and call this \"callback\" when some event occurs in C++ component.</strong></p>\n"}, {"tags": ["c++", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 2363, "user_id": 1217998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/536ab18f11a1222292ccfbc9d1cdda75?s=128&d=identicon&r=PG", "display_name": "Souradeep Nanda", "link": "https://stackoverflow.com/users/1217998/souradeep-nanda"}, "edited": false, "score": 0, "creation_date": 1508335578, "post_id": 46811833, "comment_id": 80571386, "body": "Please include a <a href=\"https://stackoverflow.com/help/mcve\">complete, runable code</a>. Where is <code>#include &quot;Eigen&#47;Dense&quot;</code> ?"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 2363, "user_id": 1217998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/536ab18f11a1222292ccfbc9d1cdda75?s=128&d=identicon&r=PG", "display_name": "Souradeep Nanda", "link": "https://stackoverflow.com/users/1217998/souradeep-nanda"}, "edited": false, "score": 2, "creation_date": 1508335785, "post_id": 46811833, "comment_id": 80571518, "body": "@SouradeepNanda: It&#39;s a part of the <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">Eigen library</a>, which this question is about. I think it&#39;s fine for the OP&#39;s example to include it, since that&#39;s what this question is specifically about (and their attempt to further reduce the problem by using their own <code>struct T</code> fails to reproduce the problem)."}, {"owner": {"reputation": 2363, "user_id": 1217998, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/536ab18f11a1222292ccfbc9d1cdda75?s=128&d=identicon&r=PG", "display_name": "Souradeep Nanda", "link": "https://stackoverflow.com/users/1217998/souradeep-nanda"}, "edited": false, "score": 0, "creation_date": 1508335827, "post_id": 46811833, "comment_id": 80571538, "body": "Sorry about that."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1508346404, "post_id": 46811833, "comment_id": 80578438, "body": "<code>(v1.array() &lt;= v2.array()).all() and (v1 != v2)</code> defines only a half-ordering, i.e., you will have vectors where <code>!(v1&lt;v2) &amp;&amp; !(v2&lt;v1) &amp;&amp; (v1!=v2)</code>, which is not what most std-algorithms/containers expect. If you want a full-ordering of vectors, you can, e.g., implement a lexicographical ordering."}, {"owner": {"reputation": 2875, "user_id": 2299477, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/xppB7.jpg?s=128&g=1", "display_name": "Alaya", "link": "https://stackoverflow.com/users/2299477/alaya"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1508402333, "post_id": 46811833, "comment_id": 80599110, "body": "@chtz I know that my implementation of <code>operator&lt;</code> is only partial order, actually I am implementing a multi-objective optimization algorithm, where &quot;&lt;&quot; is commonly used to represent the Pareto-dominance.  the comparison function won&#39;t be passed to std-algorithms."}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1508336927, "post_id": 46812491, "comment_id": 80572266, "body": "The alternative is re-opening <code>namespace Eigen</code> to put that <code>operator&lt;</code> into, but <code>VectorXdCompare</code> is preferable, with the alternative for when you don&#39;t control the place using <code>std::less</code> rather than accepting a comparator"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508337205, "post_id": 46812491, "comment_id": 80572471, "body": "Seems to work fine with <code>T</code> in a namespace, too. <a href=\"https://wandbox.org/permlink/TMNXF26aL1QUzCNl\" rel=\"nofollow noreferrer\">wandbox.org/permlink/TMNXF26aL1QUzCNl</a> Edit: Nvm, forgot I need to actually call it. <a href=\"https://wandbox.org/permlink/hf3jV8rWubgU0ov8\" rel=\"nofollow noreferrer\">wandbox.org/permlink/hf3jV8rWubgU0ov8</a> +1"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1508353822, "post_id": 46812491, "comment_id": 80582337, "body": "That&#39;s a brilliant answer!"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1508402986, "post_id": 46812491, "comment_id": 80599546, "body": "@vsoftco - Thanks! Though I think it would have been better had I not resisted the urge to add a &quot;shooting oneself in the <code>Foo::T</code>&quot; pun :)"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1508336587, "creation_date": 1508336587, "answer_id": 46812491, "question_id": 46811833, "link": "https://stackoverflow.com/questions/46811833/why-does-stdlesseigenvectorxd-fail-to-compile/46812491#46812491", "title": "Why does std::less&lt;Eigen::VectorXd&gt; fail to compile?", "body": "<p>Here's the thing. Your <code>T</code> doesn't recreate the situation reliably. You omitted the namespace, which is very important. A closer example to the case with <code>Eigen</code> would be this:</p>\n\n<pre><code>namespace Foo {\n  struct T\n  {\n    int x;\n  };\n}\n\nbool operator&lt;(const Foo::T&amp; t1, const Foo::T&amp; t2)\n{\n    return t1.x &lt; t2.x;\n}\n</code></pre>\n\n<p>And it will produce the exact same error. That is because a template will only consider overloads of this operator that are found at the point of the template <strong>definition</strong> (and not instantiation), or by <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"noreferrer\">argument dependent lookup</a> on the types of the operands.</p>\n\n<p>And for argument dependent lookup to work, the operator and the type must be defined in the same namespace, which yours clearly isn't.</p>\n\n<p>So what happens is this, you include <code>functional</code>. That defines the template <code>std::less</code> in your translation unit. At that time, there is no <code>operator&lt;</code> for <code>Eigen::VectorXd</code> in sight. So the template definition will not take it into consideration when it's defined later.</p>\n\n<p>When you instantiate the template, it attempts to look for a suitable overload among those it was made aware off, and then by ADL. Since your <code>operator&lt;</code> is not inside the <code>Eigen</code> namespace, it isn't found by ADL either.</p>\n\n<p>So long story short, it's impractical to overload operators for library types. What you should do, is to define a custom comparator type:</p>\n\n<pre><code>struct VectorXdCompare {\n  bool operator()(const VectorXd&amp; v1, const VectorXd&amp; v2) {\n     return (v1.array() &lt;= v2.array()).all() and (v1 != v2);\n  }\n};\n</code></pre>\n\n<p>And pass that <code>VectorXdCompare</code> as the type, whenever the standard library needs it.</p>\n"}], "owner": {"reputation": 2875, "user_id": 2299477, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/xppB7.jpg?s=128&g=1", "display_name": "Alaya", "link": "https://stackoverflow.com/users/2299477/alaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 1, "accepted_answer_id": 46812491, "answer_count": 1, "score": 7, "last_activity_date": 1508336587, "creation_date": 1508334718, "last_edit_date": 1508335269, "question_id": 46811833, "link": "https://stackoverflow.com/questions/46811833/why-does-stdlesseigenvectorxd-fail-to-compile", "title": "Why does std::less&lt;Eigen::VectorXd&gt; fail to compile?", "body": "<p>I implemented a comparison operator <code>operator&lt;</code> for <code>Eigen::VectorXd</code>, and sometimes, I need to pass a compare function to another of my function, I am tired of wrapping the <code>operator&lt;</code> into <code>[](const VectorXd&amp; v1, const VectorXd&amp; v2)-&gt;bool{return v1 &lt; v2}</code>, so I think the <code>std::less</code> class would be useful, as, to my understanding, it can generate the lambda function as long as <code>operator&lt;</code> is defined.</p>\n\n<p>However, I found that <code>std::less&lt;VectorXd&gt;</code> didn't work for me, for example, the below code works fine:</p>\n\n<pre><code>#include \"Eigen/Dense\"\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\nusing namespace Eigen;\n\nstruct T\n{\n    int x;\n};\n\nbool operator&lt;(const T&amp; t1, const T&amp; t2)\n{\n    return t1.x &lt; t2.x;\n}\n\nbool operator&lt;(const VectorXd&amp; v1, const VectorXd&amp; v2)\n{\n    return (v1.array() &lt;= v2.array()).all() and (v1 != v2);\n}\nint main()\n{\n    T t1, t2;\n    t1.x = 3;\n    t2.x = 2;\n\n    auto ft = std::less&lt;T&gt;();\n    cout &lt;&lt; ft(t1, t2) &lt;&lt; endl;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>However, if I use <code>std::less&lt;VectorXd&gt;</code> like this:</p>\n\n<pre><code>#include \"Eigen/Dense\"\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\nusing namespace Eigen;\n\nstruct T\n{\n    int x;\n};\n\nbool operator&lt;(const T&amp; t1, const T&amp; t2)\n{\n    return t1.x &lt; t2.x;\n}\n\nbool operator&lt;(const VectorXd&amp; v1, const VectorXd&amp; v2)\n{\n    return (v1.array() &lt;= v2.array()).all() and (v1 != v2);\n}\nint main()\n{\n    T t1, t2;\n    t1.x = 3;\n    t2.x = 2;\n\n    auto ft = std::less&lt;T&gt;();\n    cout &lt;&lt; ft(t1, t2) &lt;&lt; endl;\n\n    VectorXd v1(3);\n    VectorXd v2(3);\n    v1 &lt;&lt; 1, 2, 3;\n    v2 &lt;&lt; 2, 3, 4;\n    auto fv = std::less&lt;VectorXd&gt;();\n    cout &lt;&lt; fv(v1, v2) &lt;&lt; endl;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The code fails to compile, and I get error messages like below:</p>\n\n<pre><code>In file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h: In instantiation of \u2018bool std::less&lt;_Tp&gt;::operator()(const _Tp&amp;, const _Tp&amp;) const [with _Tp = Eigen::Matrix&lt;double, -1, 1&gt;]\u2019:\ntest.cpp:36:26:   required from here\n/usr/include/c++/5/bits/stl_function.h:387:20: error: no match for \u2018operator&lt;\u2019 (operand types are \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 and \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019)\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_pair.h:220:5: note: candidate: template&lt;class _T1, class _T2&gt; constexpr bool std::operator&lt;(const std::pair&lt;_T1, _T2&gt;&amp;, const std::pair&lt;_T1, _T2&gt;&amp;)\n     operator&lt;(const pair&lt;_T1, _T2&gt;&amp; __x, const pair&lt;_T1, _T2&gt;&amp; __y)\n     ^\n/usr/include/c++/5/bits/stl_pair.h:220:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::pair&lt;_T1, _T2&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:298:5: note: candidate: template&lt;class _Iterator&gt; bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_Iterator&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:298:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::reverse_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:348:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:348:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::reverse_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:1089:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator&lt;(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:1089:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::move_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:1095:5: note: candidate: template&lt;class _Iterator&gt; bool std::operator&lt;(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_Iterator&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:1095:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::move_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:4987:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:4987:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:4999:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const _CharT*)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:4999:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:5011:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const _CharT*, const std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const _CharT* __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:5011:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   mismatched types \u2018const _CharT*\u2019 and \u2018Eigen::Matrix&lt;double, -1, 1&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/bits/ios_base.h:46:0,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/system_error:200:3: note: candidate: bool std::operator&lt;(const std::error_code&amp;, const std::error_code&amp;)\n   operator&lt;(const error_code&amp; __lhs, const error_code&amp; __rhs) noexcept\n   ^\n/usr/include/c++/5/system_error:200:3: note:   no known conversion for argument 1 from \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 to \u2018const std::error_code&amp;\u2019\n/usr/include/c++/5/system_error:274:3: note: candidate: bool std::operator&lt;(const std::error_condition&amp;, const std::error_condition&amp;)\n   operator&lt;(const error_condition&amp; __lhs,\n   ^\n/usr/include/c++/5/system_error:274:3: note:   no known conversion for argument 1 from \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 to \u2018const std::error_condition&amp;\u2019\nIn file included from /usr/include/c++/5/tuple:39:0,\n                 from /usr/include/c++/5/functional:55,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:262,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/array:250:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; bool std::operator&lt;(const std::array&lt;_Tp, _Nm&gt;&amp;, const std::array&lt;_Tp, _Nm&gt;&amp;)\n     operator&lt;(const array&lt;_Tp, _Nm&gt;&amp; __a, const array&lt;_Tp, _Nm&gt;&amp; __b)\n     ^\n/usr/include/c++/5/array:250:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::array&lt;_Tp, _Nm&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/functional:55:0,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:262,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/tuple:928:5: note: candidate: template&lt;class ... _TElements, class ... _UElements&gt; constexpr bool std::operator&lt;(const std::tuple&lt;_Elements ...&gt;&amp;, const std::tuple&lt;_Elements ...&gt;&amp;)\n     operator&lt;(const tuple&lt;_TElements...&gt;&amp; __t,\n     ^\n/usr/include/c++/5/tuple:928:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::tuple&lt;_Elements ...&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/5/vector:64:0,\n                 from /usr/include/c++/5/bits/random.h:34,\n                 from /usr/include/c++/5/random:49,\n                 from /usr/include/c++/5/bits/stl_algo.h:66,\n                 from /usr/include/c++/5/algorithm:62,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:269,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_vector.h:1528:5: note: candidate: template&lt;class _Tp, class _Alloc&gt; bool std::operator&lt;(const std::vector&lt;_Tp, _Alloc&gt;&amp;, const std::vector&lt;_Tp, _Alloc&gt;&amp;)\n     operator&lt;(const vector&lt;_Tp, _Alloc&gt;&amp; __x, const vector&lt;_Tp, _Alloc&gt;&amp; __y)\n     ^\n/usr/include/c++/5/bits/stl_vector.h:1528:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/string:48:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/istream:38,\n                 from /usr/include/c++/5/sstream:38,\n                 from /usr/include/c++/5/complex:45,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Core:80,\n                 from /home/alaya/.softwares/linear_algebra/eigen3.3/include/eigen3/Eigen/Dense:1,\n                 from test.cpp:1:\n/usr/include/c++/5/bits/stl_function.h:387:20: note:   \u2018const Eigen::Matrix&lt;double, -1, 1&gt;\u2019 is not derived from \u2018const std::vector&lt;_Tp, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nmake: *** [try] Error 1\n</code></pre>\n\n<p>I am using g++ 5.4.0 and Eigen 3.3</p>\n"}, {"tags": ["c++", "visual-studio-2017", "static-libraries"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1508334243, "post_id": 46811605, "comment_id": 80570409, "body": "There is no such thing as a class internal to a static library (the story is different with DLLs). The fact that a name is not mentioned in a header doesn&#39;t mean anything. Your program violates One Definition Rule by containing two non-identical definitions of the same class."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1508334379, "post_id": 46811605, "comment_id": 80570515, "body": "use namespaces. Even ignoring the problem you describe I wonder how you manage to not get confused with two classes sharing the same name"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508334746, "post_id": 46811723, "comment_id": 80570764, "body": "Don&#39;t try to make up &quot;unique&quot; namespaces on your own. Use anonymous namespaces. They, and everything in them has internal linkage. It&#39;s as though the compiler itself generated a unique namespace for you."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508334987, "post_id": 46811723, "comment_id": 80570981, "body": "@StoryTeller While anonymous namespaces are best, they only work inside a single translation unit. For a library internal data-structures may need to be shared between multiple translation units, and then anonymous namespaces won&#39;t work."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1508335158, "post_id": 46811723, "comment_id": 80571112, "body": "But that&#39;s the thing. The OP supposedly has two classes in the same namespace form different libraries. I won&#39;t be surprised if the namesapce may just be <code>PRIVATE</code>, or something generic like that that&#39;s meant to &quot;protect&quot; the class definition. Anyway, this is another point in favor of modules (hopefully in C++2a)."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1508334558, "last_edit_date": 1508334558, "creation_date": 1508334391, "answer_id": 46811723, "question_id": 46811605, "link": "https://stackoverflow.com/questions/46811605/name-collision-of-classes-not-exposed-in-static-libraries-interface-c/46811723#46811723", "title": "Name collision of classes not exposed in static libraries interface (c++)", "body": "<p>Static libraries are seldom more than archives of object files. When linking with a static library it's the same as linking with the separate object files. And an object file is basically a single <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\"><em>translation unit</em></a>. And because of <a href=\"http://en.cppreference.com/w/cpp/language/definition#One_Definition_Rule\" rel=\"nofollow noreferrer\">the One Definition Rule</a> you can't have two different classes in different translation units with the same name, as that will lead to <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>If you want to have \"private\" classes inside a library, use <em>namespaces</em> and define the \"private\" classes inside the (uniquely named) namespace.</p>\n"}], "owner": {"reputation": 984, "user_id": 788314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a6e0849824c145086d4a5ddee59cf8a4?s=128&d=identicon&r=PG", "display_name": "Tadzys", "link": "https://stackoverflow.com/users/788314/tadzys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 46811723, "answer_count": 1, "score": 0, "last_activity_date": 1508334765, "creation_date": 1508334034, "last_edit_date": 1508334765, "question_id": 46811605, "link": "https://stackoverflow.com/questions/46811605/name-collision-of-classes-not-exposed-in-static-libraries-interface-c", "title": "Name collision of classes not exposed in static libraries interface (c++)", "body": "<p>I have two static libraries (<code>a.lib</code> and <code>b.lib</code>)\ninternally, library <code>a</code> has class <code>Foo</code>, but it is not exposed in any publicly available includes. Library <code>b.lib</code> also has class <code>Foo</code> and it is also not exposed in interface. Those classes are in the same namespace and have the same constructor signature.</p>\n\n<p>When I am debugging or running executable (which is using both libraries) I see that wrong class from <code>lib a</code> instead of <code>lib b</code> is created.\nTrying to understand how is this happening. Is it a linker problem? (i.e. class names are the same and linker is inserting whatever it finds first)</p>\n"}, {"tags": ["c++", "qt", "sqlite"], "comments": [{"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 2, "creation_date": 1508334682, "post_id": 46811514, "comment_id": 80570716, "body": "Can you find the <code>qsqlited.dll</code> as well (note the <b>d</b> suffix)? If it&#39;s missing, your Qt installation is propably broken. In that case you need to reinstall Qt (make shure to use the online installer)"}, {"owner": {"reputation": 3, "user_id": 8562493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5724d46b04ea351989687f5b3365c0?s=128&d=identicon&r=PG&f=1", "display_name": "user30248", "link": "https://stackoverflow.com/users/8562493/user30248"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508403799, "post_id": 46811514, "comment_id": 80600050, "body": "Oh deary me, yes. I suspected something like this, but in my google search it never shoiwed up and I didn&#39;t miss them since they weren&#39;t there. Not sure if they disappeared or what happened exactly, but after a reinstallation it works now. Thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "is_accepted": true, "score": 1, "last_activity_date": 1508419637, "creation_date": 1508419637, "answer_id": 46831008, "question_id": 46811514, "link": "https://stackoverflow.com/questions/46811514/qsqldatabase-qsqlite-driver-not-loaded-only-in-debug-mode/46831008#46831008", "title": "QSqlDatabase: QSQLITE driver not loaded - Only in Debug Mode", "body": "<p>To summarize as an answer:</p>\n\n<p>The fact that release builds work, but debug fails is because on windows there are actually 2 files per plugin - in this case <code>qsqlite.dll</code> and <code>qsqlited.dll</code>. The one with the <em>d</em> is used for debug builds, and the other one for release builds.</p>\n\n<p>As the debug variant is missing, a reinstallation of Qt is the only way to get back the missing files.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7626139, "user_type": "registered", "profile_image": "https://graph.facebook.com/1388694337869953/picture?type=large", "display_name": "Igor Lopatin", "link": "https://stackoverflow.com/users/7626139/igor-lopatin"}, "is_accepted": false, "score": -1, "last_activity_date": 1550685392, "creation_date": 1550685392, "answer_id": 54792554, "question_id": 46811514, "link": "https://stackoverflow.com/questions/46811514/qsqldatabase-qsqlite-driver-not-loaded-only-in-debug-mode/54792554#54792554", "title": "QSqlDatabase: QSQLITE driver not loaded - Only in Debug Mode", "body": "<p>In my case:\nSo does not work:</p>\n\n<pre><code>db = QSqlDatabase::addDatabase(\"QSQLITE\", \"MyConnection\"); //MyConnection as connection name - Driver not loaded\n</code></pre>\n\n<p>and it works:</p>\n\n<pre><code>db = QSqlDatabase::addDatabase(\"QSQLITE\");\n</code></pre>\n\n<p>Both versions work in Release.</p>\n\n<p>QT 5.10</p>\n"}], "owner": {"reputation": 3, "user_id": 8562493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5724d46b04ea351989687f5b3365c0?s=128&d=identicon&r=PG&f=1", "display_name": "user30248", "link": "https://stackoverflow.com/users/8562493/user30248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "accepted_answer_id": 46831008, "answer_count": 2, "score": 0, "last_activity_date": 1550685392, "creation_date": 1508333741, "last_edit_date": 1508334123, "question_id": 46811514, "link": "https://stackoverflow.com/questions/46811514/qsqldatabase-qsqlite-driver-not-loaded-only-in-debug-mode", "title": "QSqlDatabase: QSQLITE driver not loaded - Only in Debug Mode", "body": "<p>I am attempting within my code to connect to an SQLite database: </p>\n\n<pre><code>bool MainWindow::connOpen(){\n\nmydb=QSqlDatabase::addDatabase(\"QSQLITE\");\n\n//qDebug ( )  &lt;&lt;  QSqlDatabase::drivers();\n\nQString dbpath = \"dbname.sqlite\";\nmydb.setDatabaseName(dbpath);\n}\n</code></pre>\n\n<p>which gives me the Error Message: \"QSqlDatabase: QSQLITE driver not loaded\"\nas well as an error window \"Driver not Loaded Driver not Loaded\". The QSqlDatabase mydb declaration is in the MainWindow header file.</p>\n\n<p>Strangely, this only happens in Debug Mode, in Release Mode everything ist fine. Even weirder, this used to work before (I think) an automatic QT Update. I am using QTCreator 4.4.1 and QT 5.9.2. Also, I checked, the sqlite.dll is within the sqldrivers folders, where I understand it should be. But for some reason the Qt Folder is called QT 5.9.1 unlike my actual version, only this does not seem to have any effect. Everything else works fine. </p>\n\n<p>Also, when I uncomment the QSqlDatabase::drivers(); line, the output in Debug Mode is (), while in Release Mode I get (\"QSQLITE\", \"QMYSQL\", \"QMYSQL3\", \"QODBC\", \"QODBC3\", \"QPSQL\", \"QPSQL7\"). Clearly, the drivers are not being found.</p>\n\n<p>Does anybody have an idea where the difference betweeen debug and release could come from? Thanks a lot!  </p>\n"}, {"tags": ["c++", "qt", "ms-word", "screenshot", "clipboard"], "comments": [{"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508335002, "post_id": 46811414, "comment_id": 80570996, "body": "Can you paste the image to other applications? If it works on paint, it&#39;s most likely an error of MS Office. You can try a clipboard viewer to check whats actually copied to the clipboard (like <a href=\"http://www.freeclipboardviewer.com/\" rel=\"nofollow noreferrer\">freeclipboardviewer.com</a>)"}, {"owner": {"reputation": 67, "user_id": 6031395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ca9d4d04f78c2db420c3f6b3084136d?s=128&d=identicon&r=PG&f=1", "display_name": "h_e_u_r_e_k_a", "link": "https://stackoverflow.com/users/6031395/h-e-u-r-e-k-a"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508335332, "post_id": 46811414, "comment_id": 80571222, "body": "Yes I can! I can perfectly fine paste it into Paint and other programs like Gimp"}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508335450, "post_id": 46811414, "comment_id": 80571303, "body": "If you paste to paint, and the copy <b>from paint</b> and paste in MS Office - is that possible?"}, {"owner": {"reputation": 67, "user_id": 6031395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ca9d4d04f78c2db420c3f6b3084136d?s=128&d=identicon&r=PG&f=1", "display_name": "h_e_u_r_e_k_a", "link": "https://stackoverflow.com/users/6031395/h-e-u-r-e-k-a"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508335608, "post_id": 46811414, "comment_id": 80571400, "body": "Yes, indeed it is..."}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1508335778, "post_id": 46811414, "comment_id": 80571511, "body": "Then it&#39;s most likely a format error. Try using a clipboard viewer to find out the differences (Qt provides the image in multiple formats). You may have to convert the image to a native one and use the native clipboard. Have a look at <a href=\"https://doc.qt.io/qt-5/qwinmime.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qwinmime.html</a> to achieve this."}], "owner": {"reputation": 67, "user_id": 6031395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ca9d4d04f78c2db420c3f6b3084136d?s=128&d=identicon&r=PG&f=1", "display_name": "h_e_u_r_e_k_a", "link": "https://stackoverflow.com/users/6031395/h-e-u-r-e-k-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508338889, "creation_date": 1508333509, "last_edit_date": 1508338889, "question_id": 46811414, "link": "https://stackoverflow.com/questions/46811414/screenshot-grabbing-of-widget-is-not-working-for-new-microsoft-office-versions", "title": "Screenshot grabbing of widget is not working for new Microsoft Office versions", "body": "<p>I have a little piece of code which allowes me to make a screenshot of a single widget in my Qt Application. For YEARS my code has worked fine for Paint and Microsoft Office 2013, at least until I downloaded Office 2016. Since then the screenshot code is not working properly anymore.</p>\n\n<p>When I execute this code (by pressing a button), the image is created, and everything works fine in Paint. But when I try to paste it in MS Office Word 2016, nothing happenes. The Image was put into place by pressing CTRL+V, just like if you pasted some text snippet. </p>\n\n<p>This is my code:</p>\n\n<pre><code>QPixmap shot(tableView-&gt;grab());\nQImage ishot = shot.toImage();\nQApplication::clipboard()-&gt;setImage(ishot, QClipboard::Clipboard);\n</code></pre>\n\n<p>The tableView Object is completely fine, I already searched there, found nothing. I really don't know where to start fixing this, because I don't even get an error ore something like that. Please tell me why the paste stuff doesn't work anymore or how to change my code so it works again.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Some poor guy posted the same question ten years ago, he never got an answer... <a href=\"http://www.qtforum.org/article/19592/qimage-to-clipboard-some-question-about-it.html?s=0aa8cfd8ba0fc842089ad56b324d62d55f96149f#post74250\" rel=\"nofollow noreferrer\"> Here </a></p>\n"}, {"tags": ["c++", "cmake", "tensorflow-serving"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6175691, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d65bcfdab5cd5fae919a65d4534887ab?s=128&d=identicon&r=PG&f=1", "display_name": "Maja", "link": "https://stackoverflow.com/users/6175691/maja"}, "edited": false, "score": 0, "creation_date": 1513171794, "post_id": 47640387, "comment_id": 82549358, "body": "I gave up. What I was able to find is, that CMake command (GENERATE_CPP) only generates the .pb files in its build tree. What I did is copy all the needed proto files to a seperate folder (keeping the directory structure) and generated the .pb files explicitly by calling the protoc shell command. And then built a seperate prrotobuf library with cmake."}, {"owner": {"reputation": 61, "user_id": 6175691, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d65bcfdab5cd5fae919a65d4534887ab?s=128&d=identicon&r=PG&f=1", "display_name": "Maja", "link": "https://stackoverflow.com/users/6175691/maja"}, "edited": false, "score": 0, "creation_date": 1513772679, "post_id": 47640387, "comment_id": 82778738, "body": "I used <a href=\"https://github.com/philosophus/tf-serving-demo\" rel=\"nofollow noreferrer\">this</a>  as a reference. Explained in more detail <a href=\"http://fdahms.com/2017/03/05/tensorflow-serving-jvm-client/\" rel=\"nofollow noreferrer\">here</a> by Florian Dahms"}], "tags": [], "owner": {"reputation": 13, "user_id": 9035168, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gzfiyzr5Yr0/AAAAAAAAAAI/AAAAAAAAAZU/p2_WN9YY9Uo/photo.jpg?sz=128", "display_name": "Eddie Ng", "link": "https://stackoverflow.com/users/9035168/eddie-ng"}, "is_accepted": false, "score": 0, "last_activity_date": 1512416954, "last_edit_date": 1512416954, "creation_date": 1512414902, "answer_id": 47640387, "question_id": 46811399, "link": "https://stackoverflow.com/questions/46811399/building-tensorflow-serving-client-with-cmake/47640387#47640387", "title": "Building tensorflow serving client with cmake", "body": "<p>I was able to get it to work in the layout you have where the CMakeLists.txt file is placed in the same level as the <code>serving</code> repository <a href=\"https://github.com/wardsng/serving/commit/a19d11b82b22a735e1af3539c8fda7fd4e17863b\" rel=\"nofollow noreferrer\">here</a>. You'll need to install Tensorflow too though (using <a href=\"https://github.com/FloopCZ/tensorflow_cc\" rel=\"nofollow noreferrer\">tensorflow_cc</a>).</p>\n\n<p><strong>However</strong>, you probably don't want to muck with a fork of the official <code>tensorflow/serving</code> repository so I went a step further and moved the CMakeLists.txt out so you can just submodule the official repository. I made an example <a href=\"https://github.com/wardsng/inception_cmake\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The gist is that the protobuf CMake submodule expects proto files to be laid out in the <a href=\"https://stackoverflow.com/questions/19343018/cmake-and-findprotobuf\">same directory</a> from which it's called. I made some modifications to the submodules to let us call it from a level above <code>serving</code> and to ensure it invokes the compiler with the include paths in the right order to support the nested structure of the proto files in <code>serving/tensorflow_serving/apis/*</code> (and placing it accordingly in the specified build directory)</p>\n\n<p>Hopefully someone else with better knowhow can make this better!</p>\n"}, {"tags": [], "owner": {"reputation": 383, "user_id": 5504692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IfpUyEOZ8SI/AAAAAAAAAAI/AAAAAAAAAEU/j_Ka3vfEOGc/photo.jpg?sz=128", "display_name": "B Abali", "link": "https://stackoverflow.com/users/5504692/b-abali"}, "is_accepted": false, "score": 0, "last_activity_date": 1550439595, "creation_date": 1550439595, "answer_id": 54737952, "question_id": 46811399, "link": "https://stackoverflow.com/questions/46811399/building-tensorflow-serving-client-with-cmake/54737952#54737952", "title": "Building tensorflow serving client with cmake", "body": "<p>These worked for me.</p>\n\n<p><a href=\"https://github.com/wardsng/inception_cmake\" rel=\"nofollow noreferrer\">https://github.com/wardsng/inception_cmake</a></p>\n\n<p><a href=\"https://github.com/FloopCZ/tensorflow_cc\" rel=\"nofollow noreferrer\">https://github.com/FloopCZ/tensorflow_cc</a></p>\n\n<p>You can choose a private install directory instead of the default, e.g. /usr/local/... </p>\n\n<p>cmake -DCMAKE_INSTALL_PREFIX= ..</p>\n"}], "owner": {"reputation": 61, "user_id": 6175691, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d65bcfdab5cd5fae919a65d4534887ab?s=128&d=identicon&r=PG&f=1", "display_name": "Maja", "link": "https://stackoverflow.com/users/6175691/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 728, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1550439595, "creation_date": 1508333470, "last_edit_date": 1508336943, "question_id": 46811399, "link": "https://stackoverflow.com/questions/46811399/building-tensorflow-serving-client-with-cmake", "title": "Building tensorflow serving client with cmake", "body": "<p>I searched for the best way to do this, but I was unable to find a clear answer. </p>\n\n<p>Was anyone able to build a tensorflow-serving client using cmake?</p>\n\n<p>I am having difficulties with generating CPP files from proto, since they are needed for prediction service. Those proto files also include proto files from tensorflow.</p>\n\n<p>so far I have come up with this:</p>\n\n<pre><code>project(serving C CXX)\nfind_package(Protobuf REQUIRED)\n\nfile(GLOB_RECURSE proto_files RELATIVE ${serving_SOURCE_DIR}/tensorflow/\n    \"${serving_SOURCE_DIR}/tensorflow/*.proto\")\n\nset(PROTOBUF_GENERATE_CPP_APPEND_PATH OFF)\ninclude_directories(${PROTOBUF_INCLUDE_DIRS})\ninclude_directories( ${CMAKE_CURRENT_BINARY_DIR} )\nPROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS ${proto_files})\n\nadd_library(tf_protos ${PROTO_SRCS} ${PROTO_HDRS})\ntarget_link_libraries(tf_protos PUBLIC ${PROTOBUF_LIBRARIES})\n</code></pre>\n\n<p>Cmake builds successfully but the make command gives me an error:</p>\n\n<pre><code>No rule to make target '../tensorflow/tools/proto_text/test.proto', needed by 'tensorflow/tools/proto_text/test.pb.cc'.  Stop.\n</code></pre>\n\n<p>To overcome the problem of <code>.proto</code> includes not being found I used command</p>\n\n<pre><code>set(PROTOBUF_GENERATE_CPP_APPEND_PATH OFF)\n</code></pre>\n\n<p>which was explained here: <a href=\"https://groups.google.com/forum/#!topic/protobuf/eow2fNDUHvc\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/#!topic/protobuf/eow2fNDUHvc</a></p>\n\n<p>My current folder structure is</p>\n\n<pre><code>serving/\n    CmakeLists.txt\n    tensorflow/\n    tensorflow_serving/\n        apis/\n</code></pre>\n\n<p>Folder <code>apis</code> contains <code>.proto</code> files that are needed in the client implementation and they include <code>.proto</code> files from the folder <code>tensorflow</code>.</p>\n\n<p>Is this even the right way to go?</p>\n\n<p>Any help/advice would be much appreciated.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 3, "creation_date": 1508333675, "post_id": 46811374, "comment_id": 80569973, "body": "You declare a 3 dimensions array. For first dimension, you have written 3, but give 4 elements, so yes, too many initializers. And you use c++, so use containers (like std::vector) instead of raw array"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1508333846, "post_id": 46811374, "comment_id": 80570100, "body": "I think perhaps you expect index [3] to correspond to the 3 characters in your &quot;\u26601&quot;? If so the array declaration order is wrong, should be  char count[5][14][3]"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1508333953, "post_id": 46811374, "comment_id": 80570196, "body": "That is a <code>[4][13][3]</code> array."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1508334071, "post_id": 46811374, "comment_id": 80570280, "body": "I think you want a <code>std::string count[4][13]</code> 2D array instead."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508334109, "post_id": 46811374, "comment_id": 80570298, "body": "@Ron 1 and aces aren&#39;t same ? (I&#39;m not an cards player)"}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 1, "creation_date": 1508334255, "post_id": 46811374, "comment_id": 80570418, "body": "That&#39;s a 3d char array or 2d string array, that you are asking for, not a 3d string array."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508334405, "post_id": 46811374, "comment_id": 80570533, "body": "@Ron it depends if he want to store string inside array or just store pointer to a string"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1508334425, "post_id": 46811374, "comment_id": 80570546, "body": "@Garf365 I see."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "edited": false, "score": 0, "creation_date": 1508336211, "post_id": 46811374, "comment_id": 80571782, "body": "Also note that the card signs are Unicode, and might be more than 1 byte."}], "answers": [{"comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1508333994, "post_id": 46811504, "comment_id": 80570224, "body": "Excellent answer, probably not one expected (see molbdnilo comment) but, actually the best IMHO"}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "edited": false, "score": 1, "creation_date": 1508336094, "post_id": 46811504, "comment_id": 80571710, "body": "Seems more likely that the OP is asking to learn rather than to do the best application, so IMHO it is better to give him the array solution 1st, and suggest the vector solution 2nd."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 2, "last_activity_date": 1508333716, "creation_date": 1508333716, "answer_id": 46811504, "question_id": 46811374, "link": "https://stackoverflow.com/questions/46811374/how-to-declare-3-dimensions-string-array-in-c/46811504#46811504", "title": "How to declare 3 dimensions string array in c++", "body": "<p>The C++ way would be using a string class like <code>std::string</code> and a container like <code>std::vector</code> (not raw C-style <code>char</code> strings and raw arrays), e.g.:</p>\n\n<pre><code> vector&lt;vector&lt;vector&lt;string&gt;&gt;&gt; x;\n</code></pre>\n\n<p>If what you really want is a two-dimension string array, then that would be:</p>\n\n<pre><code> vector&lt;vector&lt;string&gt;&gt; x;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1508334195, "post_id": 46811633, "comment_id": 80570371, "body": "You store a pointer to constant string, please, use at least  <code>const char *</code>, or <code>const char * const</code>"}, {"owner": {"reputation": 2710, "user_id": 4532326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aeb4dabdec3bf43bba4a71124b0d67f7?s=128&d=identicon&r=PG&f=1", "display_name": "granmirupa", "link": "https://stackoverflow.com/users/4532326/granmirupa"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1508334325, "post_id": 46811633, "comment_id": 80570475, "body": "@Garf365 approved :)"}], "tags": [], "owner": {"reputation": 2710, "user_id": 4532326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aeb4dabdec3bf43bba4a71124b0d67f7?s=128&d=identicon&r=PG&f=1", "display_name": "granmirupa", "link": "https://stackoverflow.com/users/4532326/granmirupa"}, "is_accepted": false, "score": 3, "last_activity_date": 1508334289, "last_edit_date": 1508334289, "creation_date": 1508334121, "answer_id": 46811633, "question_id": 46811374, "link": "https://stackoverflow.com/questions/46811374/how-to-declare-3-dimensions-string-array-in-c/46811633#46811633", "title": "How to declare 3 dimensions string array in c++", "body": "<p>What you want to do is maybe this:</p>\n\n<pre><code>const char * count[4][13]= {{\"\u26601\",\"\u26602\",\"\u26603\",\"\u26604\",\"\u26605\",\"\u26606\",\"\u26607\",\"\u26608\",\"\u26609\",\"\u266010\",\"\u2660J\",\"\u2660Q\",\"\u2660K\"},\n                            {\"\u25c71\",\"\u25c72\",\"\u25c73\",\"\u25c74\",\"\u25c75\",\"\u25c76\",\"\u25c77\",\"\u25c78\",\"\u25c79\",\"\u25c710\",\"\u25c7J\",\"\u25c7Q\",\"\u25c7K\"},\n                            {\"\u26631\",\"\u26632\",\"\u26633\",\"\u26634\",\"\u26635\",\"\u26636\",\"\u26637\",\"\u26638\",\"\u26639\",\"\u266310\",\"\u2663J\",\"\u2663Q\",\"\u2663K\"},\n                            {\"\u26611\",\"\u26612\",\"\u26613\",\"\u26614\",\"\u26615\",\"\u26616\",\"\u26617\",\"\u26618\",\"\u26619\",\"\u266110\",\"\u2661J\",\"\u2661Q\",\"\u2661K\"}};\n</code></pre>\n\n<p>Anyway as already suggested <code>std::vector</code> and <code>std::string</code> should be preferred</p>\n"}], "owner": {"reputation": 1, "user_id": 8795846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1233aa940580c135c5ed732927a0e6a?s=128&d=identicon&r=PG&f=1", "display_name": "K.Juhyeon", "link": "https://stackoverflow.com/users/8795846/k-juhyeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508334289, "creation_date": 1508333378, "last_edit_date": 1508333739, "question_id": 46811374, "link": "https://stackoverflow.com/questions/46811374/how-to-declare-3-dimensions-string-array-in-c", "title": "How to declare 3 dimensions string array in c++", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nchar count[3][5][14]={{\"\u26601\",\"\u26602\",\"\u26603\",\"\u26604\",\"\u26605\",\"\u26606\",\"\u26607\",\"\u26608\",\"\u26609\",\"\u266010\",\"\u2660J\",\"\u2660Q\",\"\u2660K\"},\n                            {\"\u25c71\",\"\u25c72\",\"\u25c73\",\"\u25c74\",\"\u25c75\",\"\u25c76\",\"\u25c77\",\"\u25c78\",\"\u25c79\",\"\u25c710\",\"\u25c7J\",\"\u25c7Q\",\"\u25c7K\"},\n                            {\"\u26631\",\"\u26632\",\"\u26633\",\"\u26634\",\"\u26635\",\"\u26636\",\"\u26637\",\"\u26638\",\"\u26639\",\"\u266310\",\"\u2663J\",\"\u2663Q\",\"\u2663K\"},\n                            {\"\u26611\",\"\u26612\",\"\u26613\",\"\u26614\",\"\u26615\",\"\u26616\",\"\u26617\",\"\u26618\",\"\u26619\",\"\u266110\",\"\u2661J\",\"\u2661Q\",\"\u2661K\"};\n</code></pre>\n\n<p>I want to declare this type of array but it always makes errors such as\"Too many initializers\". How can I fix this error?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1508333424, "post_id": 46811355, "comment_id": 80569800, "body": "The C++ standard version is a &quot;compiler thing&quot;, not a runtime value. Also a compiler may not support all features of a given standard, so such a value wouldn&#39;t be able to inform you of everything"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1508333424, "post_id": 46811355, "comment_id": 80569801, "body": "You&#39;re never really using a specific version because none of them are fully implemented (yet). In the case of other compilers, they remain partially implemented for quite a while. To be more reliable, <i>features</i> need to be checked for, not versions."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1508333486, "post_id": 46811355, "comment_id": 80569841, "body": "Visual C++ and g++ are two different compilers. Unclear what the question is."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1508333499, "post_id": 46811355, "comment_id": 80569856, "body": "<code>g++</code> is the <a href=\"https://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC (GNU Compiler Collection)</a> frontend or driver program for C++, which doesn&#39;t come with Visual Studio. The Microsoft Visual C++ frontend program is called <code>cl</code>."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 3, "creation_date": 1508333650, "post_id": 46811355, "comment_id": 80569957, "body": "it&#39;s complicated with Visual C++ because they don&#39;t yet implement all of C++98 (that&#39;s still in C++17) so they refuse to update that until they do."}, {"owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "edited": false, "score": 0, "creation_date": 1508333711, "post_id": 46811355, "comment_id": 80570012, "body": "Thanks for all the comments, so how does one see which functionality is available or do you just need to try and find out? I&#39;m trying async but when i copy the example my syntax is not valid, thats when i checked for the version number. (the example : <a href=\"https://solarianprogrammer.com/2012/10/17/cpp-11-async-tutorial/\" rel=\"nofollow noreferrer\">solarianprogrammer.com/2012/10/17/cpp-11-async-tutorial</a> )"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1508333866, "post_id": 46811355, "comment_id": 80570114, "body": "@SvenvandenBoogaart there is a compiler flag you&#39;ll need to <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/04/29/more-about-resumable-functions-in-c/\" rel=\"nofollow noreferrer\">enable for coroutines</a>"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1508334103, "post_id": 46811355, "comment_id": 80570294, "body": "@Mgetz nothing in the link he provided uses coroutines, it&#39;s just plain C++11 std::async which is supported just fine in VS2017"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1508334154, "post_id": 46811355, "comment_id": 80570330, "body": "@SvenvandenBoogaart, There are nice <a href=\"http://en.cppreference.com/w/cpp/compiler_support\" rel=\"nofollow noreferrer\">tables</a> that work well if you know which compilers you plan to support/use."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508334715, "post_id": 46811355, "comment_id": 80570741, "body": "@SvenvandenBoogaart&gt; I&#39;d say usually it&#39;s the other way around: first you define your needs, and then choose a tool that matches those needs. Only if you then find none exists you might lower your expectations. (as for compilers you&#39;ll find most support different dialects of the language and you need to specify which you want to use)"}, {"owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508334805, "post_id": 46811355, "comment_id": 80570813, "body": "@Ron I tried to implement some examples (see comment above) but my syntax was not valid, i tried finding out if i was using a c++ version which supports the syntax i was trying but i could not find the vesion. comments showed version of c++ dosnt mather. I still dont know how to find out how i can check if i can use some syntax like &quot;std::future&lt;void&gt; result( std::async(called_from_async));&quot; from the example."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508334973, "post_id": 46811355, "comment_id": 80570965, "body": "@SvenvandenBoogaart&gt; you need to configure your compiler. I don&#39;t know VC++, but for instance with gcc you tell it when you invoke it which version of the language you want. Say, <code>gcc -std=c++11</code> or <code>gcc -std=c++14</code> or ... if you don&#39;t, your compiler will pick one for you."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1508335066, "post_id": 46811355, "comment_id": 80571038, "body": "VS2017 in particular has a setting <code>&#47;std:c++latest</code> which enables as much support as it has for new features."}], "answers": [{"tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": false, "score": 1, "last_activity_date": 1508333656, "creation_date": 1508333656, "answer_id": 46811480, "question_id": 46811355, "link": "https://stackoverflow.com/questions/46811355/c-version-98-in-visual-studio-2017/46811480#46811480", "title": "C++ version 98 in visual studio 2017", "body": "<p>Run:</p>\n\n<pre><code>cl\n</code></pre>\n\n<p>The output should be something like this:</p>\n\n<pre><code>Microsoft (R) C/C++ Optimizing Compiler Version 18.00.40629 for x86\n</code></pre>\n\n<p>Then, see <a href=\"https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance\" rel=\"nofollow noreferrer\">Visual C++ Language Conformance</a> to check exactly which features are supported by your compiler.</p>\n"}], "owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1508334897, "creation_date": 1508333313, "last_edit_date": 1508334897, "question_id": 46811355, "link": "https://stackoverflow.com/questions/46811355/c-version-98-in-visual-studio-2017", "title": "C++ version 98 in visual studio 2017", "body": "<p>I'm trying to get the C++ version I'm using, which I assumed was an easy task as developers need the version number to see which functionality is available (or is that a wrong assumption)?\nI tried the advised method from <a href=\"https://stackoverflow.com/a/7132549/1667868\">here</a>:</p>\n\n<pre><code>auto someversion = __cplusplus;\nstd::cout &lt;&lt; someversion;\n</code></pre>\n\n<p>which shows:</p>\n\n<blockquote>\n  <p>199711</p>\n</blockquote>\n\n<p>According to the linked answer that means im using C++98.\nIs this correct or is there another method to get the right version number?</p>\n\n<p>I also tried running the <a href=\"https://stackoverflow.com/a/10026195/1667868\">command</a>:</p>\n\n<pre><code>g++ --version\n</code></pre>\n\n<p>But the command did not run (Command \"g++\" is not valid.).\nHow do I find out which C++ version I am running?</p>\n\n<p>edit: context</p>\n\n<p><em>So how does one see which functionality is available or do you just need to try and find out? I'm trying async but when i copy the example my syntax is not valid, thats when I checked for the version number to see if the syntax from the example was useable with my setup. (the <a href=\"http://solarianprogrammer.com/2012/10/17/cpp-11-async-tutorial\" rel=\"nofollow noreferrer\">example</a> :  )</em></p>\n"}, {"tags": ["c++", "function", "templates", "pointers"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508332846, "post_id": 46811181, "comment_id": 80569411, "body": "That is by design. You are supposed to use <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\"><code>using</code></a> instead. <code>template &lt;typename type&gt; using calculator = type(*)(type, type);</code>."}, {"owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508333211, "post_id": 46811181, "comment_id": 80569649, "body": "Thanks it works, but why i should use using and not typedef ?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1508333340, "post_id": 46811181, "comment_id": 80569745, "body": "The reason you can&#39;t use <b>type</b>def is that a <b>type</b>def defines a <b>type</b>. A template is not a type."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508333371, "post_id": 46811181, "comment_id": 80569764, "body": "Because the standard committee failed to agree on a syntax that works in all cases for <code>typedef</code>. There are some details <a href=\"https://stackoverflow.com/a/24916837/3484570\">here</a>."}, {"owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1508333436, "post_id": 46811181, "comment_id": 80569810, "body": "But i still can&#39;t pass calculator into print function. template &lt;typename type&gt; void print(type x, type y, calculator func)"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508333765, "post_id": 46811181, "comment_id": 80570053, "body": "Because <code>calculator</code> is a template, not a type. You would need <code>calculator&lt;type&gt;</code> to generate a type. And then you run into the problem that the signature of <code>calculator&lt;type&gt;</code> doesn&#39;t match the one on <code>add&lt;type&gt;</code> because <code>calculator&lt;type&gt;</code> returns <code>type</code> whereas <code>add&lt;type&gt;</code> returns <code>const type &amp;</code>. <a href=\"http://coliru.stacked-crooked.com/a/8d889b9d62fa1982\" rel=\"nofollow noreferrer\">This</a> might get you on the right track."}], "owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "closed_date": 1508332833, "answer_count": 0, "score": 0, "last_activity_date": 1508332963, "creation_date": 1508332733, "last_edit_date": 1508332963, "question_id": 46811181, "link": "https://stackoverflow.com/questions/46811181/i-cant-use-typedef-with-template", "closed_reason": "Duplicate", "title": "I can&#39;t use typedef with template", "body": "<p>I can't use typedef with template, how can I change it? There is a syntax error \"a typedef template is illegal\". I want to use <code>print()</code> function like this: <code>print&lt;double&gt;(1, 2, add);</code> for any kind of data type.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n\n    template &lt;typename type&gt; /*typedef*/ type(*calculator)(type, type);\n\n    template &lt;typename type&gt; inline const type&amp; add(type x, type y) { return (type) x + y; }\n    template &lt;typename type&gt; inline const type&amp; sub(type x, type y) { return (type) x - y; }\n    template &lt;typename type&gt; inline const type&amp; mul(type x, type y) { return (type) x * y; }\n    template &lt;typename type&gt; inline const type&amp; dev(type x, type y) { return (type) x / y; }\n\n    template &lt;typename type&gt; void print(type x, type y, calculator func) {\n        cout &lt;&lt; \"(\" &lt;&lt; x &lt;&lt; \",\" &lt;&lt; y &lt;&lt; \")=\" &lt;&lt; func(x, y);\n    }\n\n    int main(void) {\n        print&lt;float&gt;(1, 2, add);\n        print&lt;float&gt;(1, 2, sub);\n        print&lt;float&gt;(1, 2, mul);\n        print&lt;float&gt;(1, 2, dev);\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pointers"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1508332708, "post_id": 46811129, "comment_id": 80569330, "body": "Any reason you can&#39;t return a struct with both the status and the pointer?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508332836, "post_id": 46811129, "comment_id": 80569403, "body": "(1) Use <code>emplace</code>, cut the middle-man. (2) Why not do as UKMonkey said? Maybe even as the standard library does <code>std::pair&lt;Status, ObjectType&gt;</code>. (3) Btw, are you sure you want to return a copy?"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1508333027, "post_id": 46811129, "comment_id": 80569527, "body": "IMO: regarding <a href=\"https://google.github.io/styleguide/cppguide.html#Reference_Arguments\" rel=\"nofollow noreferrer\">google.github.io/styleguide/cppguide.html#Reference_Argument&zwnj;&#8203;s</a> - try to change this rule - it is well... maybe I won&#39;t exactly say what I think about it..."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508333238, "post_id": 46811129, "comment_id": 80569669, "body": "@StoryTeller (2) I&#39;ll consider that (currently I prefer not to because the current class I&#39;m enhancing has most his methods return Status, and I find it very elegant) . Either way I still would like an answer to the X. (3) If you are asking about Status the answer is yes. If you are asking about the object I definitely want NOT TO return a copy."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1508333248, "post_id": 46811129, "comment_id": 80569680, "body": "@PiotrNycz - You don&#39;t have to. <a href=\"https://stackoverflow.com/users/273767/cubbi\">Someone already did</a>."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1508333281, "post_id": 46811129, "comment_id": 80569708, "body": "@PiotrNycz Would be hard to change :) Google is a big company :)"}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1508333534, "post_id": 46811129, "comment_id": 80569882, "body": "@UKMonkey Currently I prefer not to because the current class I&#39;m enhancing has most his methods return Status, and I find it very elegant."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508333673, "post_id": 46811129, "comment_id": 80569972, "body": "@EladWeiss - I&#39;d rather not start a debate about elegance. Error statuses are rarely adhered to properly... so whatever. Anyway, as long as the return value is hogged, you don&#39;t have too many options. Maybe a <code>boost::optional</code>? That way at least the caller doesn&#39;t have to default construct an <code>Object</code> (an anti-pattern)."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1508340267, "post_id": 46811129, "comment_id": 80574649, "body": "If your existing method styles is to return status, then you have no choice when you want to return more info than to use a pointer to caller storage, but I would add it as a third argument, which is optional and could be NULL from the caller.  The loss of return semantics to statuses was part of why exceptions were invented, though.  Emplace can help you get the data into the map without constructing the empty or the copy, but you may need the piecewise_construct pair complication to be able to index your map without first constructing the map object."}], "answers": [{"tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": false, "score": 0, "last_activity_date": 1508332844, "creation_date": 1508332844, "answer_id": 46811210, "question_id": 46811129, "link": "https://stackoverflow.com/questions/46811129/is-it-ok-to-use-double-pointer-output-parameters-when-return-value-is-occupied/46811210#46811210", "title": "Is it ok to use double pointer output parameters when return value is occupied?", "body": "<p>How about using smart pointers:</p>\n\n<pre><code>std::pair&lt;Status, std::shared_ptr&lt;ObjectType&gt;&gt; GetOrCreate(KeyType key) {\n  Status s = OK;\n  decltype(my_map)::iterator iter;\n  bool inserted_new;\n  std::tie(iter, inserted_new) = clients_.insert(key, ObjectType(...));\n  if (inserted_new) {\n    // s = ... Initialize the new ObjectType ...\n  }\n  return std::pair&lt;Status, std::shared_ptr&lt;ObjectType&gt;&gt;(s, iter-&gt;second);\n}\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>auto ret = GetOrCreate(key, result);\n// ret-&gt;first is Status\n// ret-&gt;second is std::shared_ptr&lt;ObjectType&gt;\n</code></pre>\n"}], "owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508332844, "creation_date": 1508332614, "question_id": 46811129, "link": "https://stackoverflow.com/questions/46811129/is-it-ok-to-use-double-pointer-output-parameters-when-return-value-is-occupied", "title": "Is it ok to use double pointer output parameters when return value is occupied?", "body": "<p>I'm trying to implement a simple GetOrCreate() method - get an object by key, or create a new one if not already exists. So far no brainer. I also would like my function's return value to be a <code>Status</code>. So I created the following:</p>\n\n<pre><code>Status GetOrCreate(KeyType key, ObjectType* object) {\n  Status s = OK;\n  decltype(my_map)::iterator iter;\n  bool inserted_new;\n  std::tie(iter, inserted_new) = clients_.insert(key, ObjectType(...));\n  if (inserted_new) {\n    // s = ... Initialize the new ObjectType ...\n  }\n  *object = iter-&gt;second;\n  return s;\n}\n</code></pre>\n\n<p>And calling the function:</p>\n\n<pre><code>ObjectType result(...);\nStatus s = GetOrCreate(key, &amp;result);\n</code></pre>\n\n<p>Now, I feel it's somewhat wasteful, because:</p>\n\n<ol>\n<li>There is an unnecessary copy in <code>*object = iter-&gt;second;</code></li>\n<li>There is an unnecessary object initialization in <code>ObjectType result(...)</code>;</li>\n</ol>\n\n<p>(Not sure. I may be wrong, or perhaps c++11 elides them. Still I would like to explicitly know what I'm doing).</p>\n\n<p>So I created a version #2 which passes <code>ObjectType** object</code> instead. I'm not afraid of double pointers but might require more explaining to my reviewers. <code>*&amp;</code> is not an option due to <a href=\"https://google.github.io/styleguide/cppguide.html#Reference_Arguments\" rel=\"nofollow noreferrer\">project code-style</a>.</p>\n\n<p>Seems like a very basic design problem, but I'm scratching my head. So, is it justified to use double pointer here? Is there a better approach?</p>\n\n<p>I'm using C++11 (most of my experience is 98).</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1508332254, "post_id": 46810978, "comment_id": 80569053, "body": "<code>goldCoin[ROW][COLUMN]</code> refers to a single <code>int</code> (except it accesses the array out of bounds) and the function expects a 2-dimensional array - what is unclear?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1508332277, "post_id": 46810978, "comment_id": 80569068, "body": "<code>show</code> takes an <code>int [][]</code> but when you call <code>goldCoin[ROW][COLUMN]</code> you are indexing into the array which produces a single <code>int</code>. I assume you just meant <code>show(goldCoin, 1, 1)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8746377"}, "edited": false, "score": 0, "creation_date": 1508332414, "post_id": 46810978, "comment_id": 80569153, "body": "Thank&#39;s CoryKramer. I didn&#39;t know that."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1508332937, "post_id": 46810978, "comment_id": 80569472, "body": "As a side note the <code>goldCoin[ROW][COLUMN]</code> expression is reading out of bounds."}], "answers": [{"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1508335868, "last_edit_date": 1508335868, "creation_date": 1508332378, "answer_id": 46811046, "question_id": 46810978, "link": "https://stackoverflow.com/questions/46810978/what-is-the-meaning-of-error-invalid-conversion-from-int-to-int-8-f/46811046#46811046", "title": "What is the meaning of &quot;error: invalid conversion from &#39;int&#39; to &#39;int (*)[8]&#39; [-fpermissive]&quot;?", "body": "<p>It's the wrong way to pass in the argument. Pass in the array name identifier without the brackets:</p>\n\n<pre><code>show(goldCoin, 1, 1);\n</code></pre>\n\n<p>The expression <code>goldCoin[ROW][COLUMN]</code> represents one single value of type <code>int</code> in your 2D array. So you are passing <code>int</code> value in place of a <code>int (*)[]</code> value which is what the function expects. In this case this is actually reading out of bounds as there is no element with coordinates of  <code>[7][8]</code> represented with the <code>goldCoin[7][8]</code> because arrays are zero indexed.\nOnly in function declaration / definition the signature is:</p>\n\n<pre><code>void show(int matrix[][COLUMN], int, int);\n</code></pre>\n\n<p>Don't confuse the two.</p>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "is_accepted": true, "score": 1, "last_activity_date": 1508332388, "creation_date": 1508332388, "answer_id": 46811049, "question_id": 46810978, "link": "https://stackoverflow.com/questions/46810978/what-is-the-meaning-of-error-invalid-conversion-from-int-to-int-8-f/46811049#46811049", "title": "What is the meaning of &quot;error: invalid conversion from &#39;int&#39; to &#39;int (*)[8]&#39; [-fpermissive]&quot;?", "body": "<p>In calling <code>show(goldCoin[ROW][COLUMN], 1, 1);</code>, you are passing an <code>int</code> as first argument, not 2D array, as you probably wanted to. </p>\n\n<p>I believe that you meant to do <code>show(goldCoin, 1, 1);</code> instead.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8746377"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 46811049, "answer_count": 2, "score": 0, "last_activity_date": 1508354755, "creation_date": 1508332168, "last_edit_date": 1508354755, "question_id": 46810978, "link": "https://stackoverflow.com/questions/46810978/what-is-the-meaning-of-error-invalid-conversion-from-int-to-int-8-f", "title": "What is the meaning of &quot;error: invalid conversion from &#39;int&#39; to &#39;int (*)[8]&#39; [-fpermissive]&quot;?", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nenum {ROW = 7, COLUMN = 8};\n\nvoid show(int matrix[][COLUMN], int, int);\n\nint main (){\n\n    int horizontal = 0;\n    int vertical = 5;\n    int goldCoin[ROW][COLUMN] = {\n                            {5, 1, 0, 4, 1, 1, 2, 0},\n                            {0, 3, 2, 1, 0, 3, 0, 1},\n                            {4, 3, 0, 6, 5, 0, 1, 0},\n                            {3, 1, 0, 3, 4, 0, 1, 3},\n                            {0, 5, 2, 0, 1, 1, 5, 1},\n                            {2, 1, 6, 1, 6, 0, 2, 1},\n                            {0, 0, 4, 3, 2, 3, 0, 2}\n                        };\n\n    show(goldCoin[ROW][COLUMN], 1, 1);\n    return 0;\n}\n\nvoid show(int matrix[][COLUMN], int x, int y){\n    if(y &gt;= COLUMN)\n        cout &lt;&lt; \"[error: column index is beyond array limit]\" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"[\" &lt;&lt; matrix[x][y] &lt;&lt; \"]\" &lt;&lt; endl;\n}\n</code></pre>\n\n<blockquote>\n  <p>The error is pointing to the function call 'show(goldCoin[ROW][COLUMN], 1, 1);' inside main. As a beginner I don't see any syntactical errors on that statement. Can somebody help?</p>\n</blockquote>\n"}, {"tags": ["c++", "opencv", "robotics", "ar.drone", "parrot"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508331977, "post_id": 46810894, "comment_id": 80568863, "body": "Unfortunately this is too broad for SO format. Please take <a href=\"https://stackoverflow.com/tour\">the tour</a> and read <a href=\"https://stackoverflow.com/help\">the help page</a>. Welcome to SO."}, {"owner": {"reputation": 6764, "user_id": 42473, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/4sdGf.png?s=128&g=1", "display_name": "Mark Booth", "link": "https://stackoverflow.com/users/42473/mark-booth"}, "edited": false, "score": 0, "creation_date": 1508340410, "post_id": 46810894, "comment_id": 80574753, "body": "This question has been <a href=\"https://robotics.stackexchange.com/q/14463/37\">cross-posted to Robotics</a>."}], "owner": {"reputation": 53, "user_id": 8696481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ac759f87c4bdfdabc7c532a647d003?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/8696481/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508332846, "creation_date": 1508331911, "last_edit_date": 1508332846, "question_id": 46810894, "link": "https://stackoverflow.com/questions/46810894/how-to-make-a-line-following-algortihm-for-an-a-r-drone-2-0", "title": "How to make a line following algortihm for an A.R Drone 2.0?", "body": "<p>I am trying to develop a line following algorithm where a drone will detect a region of interest by color filtering.I am filtering all the colors to only see the color white. Once that color is detected, I want the drone to go in a straight line from one end of the region to the other essentially following  line. Maybe it is easier using the draw line function on openCV but I am not sure. Any way, my biggest problem is telling the drone to follow the color or in other words the detected stationary object. I am using this repository from GitHub:<a href=\"https://github.com/tekkies/cvdrone/blob/master/src/main.cpp\" rel=\"nofollow noreferrer\">https://github.com/tekkies/cvdrone/blob/master/src/main.cpp</a>. </p>\n\n<pre><code> #include \"ardrone/ardrone.h\"\n\n\n\nint main(int argc, char *argv[])\n\n{\n\n    // AR.Drone class\n\n    ARDrone ardrone;\n\n\n\n    // Initialize\n\n    if (!ardrone.open()) {\n\n        std::cout &lt;&lt; \"Failed to initialize.\" &lt;&lt; std::endl;\n\n        return -1;\n\n    }\n\n\n\n    // Thresholds\n\n    int minH = 0, maxH = 255;\n\n    int minS = 0, maxS = 255;\n\n    int minV = 0, maxV = 255;\n\n\n\n    // XML save data\n\n    std::string filename(\"thresholds.xml\");\n\n    cv::FileStorage fs(filename, cv::FileStorage::READ);\n\n\n\n    // If there is a save file then read it\n\n    if (fs.isOpened()) {\n\n        maxH = fs[\"H_MAX\"];\n\n        minH = fs[\"H_MIN\"];\n\n        maxS = fs[\"S_MAX\"];\n\n        minS = fs[\"S_MIN\"];\n\n        maxV = fs[\"V_MAX\"];\n\n        minV = fs[\"V_MIN\"];\n\n        fs.release();\n\n    }\n\n\n\n    // Create a window\n\n    cv::namedWindow(\"binalized\");\n\n    cv::createTrackbar(\"H max\", \"binalized\", &amp;maxH, 255);\n\n    cv::createTrackbar(\"H min\", \"binalized\", &amp;minH, 255);\n\n    cv::createTrackbar(\"S max\", \"binalized\", &amp;maxS, 255);\n\n    cv::createTrackbar(\"S min\", \"binalized\", &amp;minS, 255);\n\n    cv::createTrackbar(\"V max\", \"binalized\", &amp;maxV, 255);\n\n    cv::createTrackbar(\"V min\", \"binalized\", &amp;minV, 255);\n\n    cv::resizeWindow(\"binalized\", 0, 0);\n\n\n\n    // Kalman filter\n\n    cv::KalmanFilter kalman(4, 2, 0);\n\n\n\n    // Sampling time [s]\n\n    const double dt = 1.0;\n\n\n\n    // Transition matrix (x, y, vx, vy)\n\n    cv::Mat1f A(4, 4);\n\n    A &lt;&lt; 1.0, 0.0,  dt, 0.0,\n\n         0.0, 1.0, 0.0,  dt,\n\n         0.0, 0.0, 1.0, 0.0,\n\n         0.0, 0.0, 0.0, 1.0;\n\n    kalman.transitionMatrix = A;\n\n\n\n    // Measurement matrix (x, y)\n\n    cv::Mat1f H(2, 4);\n\n    H &lt;&lt; 1, 0, 0, 0,\n\n         0, 1, 0, 0;\n\n    kalman.measurementMatrix = H;\n\n\n\n    // Process noise covairance (x, y, vx, vy)\n\n    cv::Mat1f Q(4, 4);\n\n    Q &lt;&lt; 1e-5,  0.0,  0.0,  0.0,\n\n          0.0, 1e-5,  0.0,  0.0,\n\n          0.0,  0.0, 1e-5,  0.0,\n\n          0.0,  0.0,  0.0, 1e-5;\n\n    kalman.processNoiseCov = Q;\n\n\n\n    // Measurement noise covariance (x, y)\n\n    cv::Mat1f R(2, 2);\n\n    R &lt;&lt; 1e-1,  0.0,\n\n          0.0, 1e-1;\n\n    kalman.measurementNoiseCov = R;\n\n\n\n    char textBuffer[80];\n\n    cv::Scalar green = CV_RGB(0,255,0);\n\n    float speed = 0.0;\n\n    bool learnMode = false;\n\n\n\n    // Main loop\n\n    while (1) {\n\n        // Key input\n\n        int key = cv::waitKey(33);\n\n        if (key == 0x1b) break;\n\n\n\n        // Get an image\n\n        cv::Mat image = ardrone.getImage();\n\n\n\n        // HSV image\n\n        cv::Mat hsv;\n\n        cv::cvtColor(image, hsv, cv::COLOR_BGR2HSV_FULL);\n\n\n\n        // Binalize\n\n        cv::Mat binalized;\n\n        cv::Scalar lower(minH, minS, minV);\n\n        cv::Scalar upper(maxH, maxS, maxV);\n\n        cv::inRange(hsv, lower, upper, binalized);\n\n\n\n        // Show result\n\n        cv::imshow(\"binalized\", binalized);\n\n\n\n        // De-noising\n\n        cv::Mat kernel = getStructuringElement(cv::MORPH_RECT, cv::Size(3, 3));\n\n        cv::morphologyEx(binalized, binalized, cv::MORPH_CLOSE, kernel);\n\n        //cv::imshow(\"morphologyEx\", binalized);\n\n\n\n        // Detect contours\n\n        std::vector&lt;std::vector&lt;cv::Point&gt;&gt; contours;\n\n        cv::findContours(binalized.clone(), contours, cv::RETR_CCOMP, cv::CHAIN_APPROX_SIMPLE);\n\n\n\n        // Find largest contour\n\n        int contour_index = -1;\n\n        double max_area = 0.0;\n\n        for (size_t i = 0; i &lt; contours.size(); i++) {\n\n            double area = fabs(cv::contourArea(contours[i]));\n\n            if (area &gt; max_area) {\n\n                contour_index = i;\n\n                max_area = area;\n\n            }\n\n        }\n\n\n\n        // Object detected\n\n        if (contour_index &gt;= 0) {\n\n            // Moments\n\n            cv::Moments moments = cv::moments(contours[contour_index], true);\n\n            double marker_y = (int)(moments.m01 / moments.m00);\n\n            double marker_x = (int)(moments.m10 / moments.m00);\n\n\n\n            // Measurements\n\n            cv::Mat measurement = (cv::Mat1f(2, 1) &lt;&lt; marker_x, marker_y);\n\n\n\n            // Correction\n\n            cv::Mat estimated = kalman.correct(measurement);\n\n\n\n            // Show result\n\n            cv::Rect rect = cv::boundingRect(contours[contour_index]);\n\n            cv::rectangle(image, rect, cv::Scalar(0, 255, 0));\n\n        }\n\n\n\n        // Prediction\n\n        cv::Mat1f prediction = kalman.predict();\n\n        int radius = 1e+3 * kalman.errorCovPre.at&lt;float&gt;(0, 0);\n\n\n\n        // Calculate object heading fraction\n\n        float heading = -((image.cols/2)-prediction(0, 0))/(image.cols/2);\n\n        sprintf(textBuffer, \"heading = %+3.2f\", heading);\n\n        putText(image, textBuffer, cvPoint(30,30), cv::FONT_HERSHEY_COMPLEX_SMALL, 0.8, green, 1, CV_AA);\n\n\n\n        // Show predicted position\n\n        cv::circle(image, cv::Point(prediction(0, 0), prediction(0, 1)), radius, green, 2);\n\n\n\n        //Speed\n\n        if ((key &gt;= '0') &amp;&amp; (key &lt;= '9')) \n\n        {\n\n            speed = (key-'0')*0.1;\n\n            //printf(\"speed = %3.2f\\n\", speed);\n\n        }\n\n        sprintf(textBuffer, \"speed = %3.2f\", speed);\n\n        putText(image, textBuffer, cvPoint(30,60), cv::FONT_HERSHEY_COMPLEX_SMALL, 0.8, green, 1, CV_AA);\n\n        // Drone control\n\n        double vx = 0.0, vy = 0.0, vz = 0.0, vr = 0.0;\n\n\n\n        // Auto-follow\n\n        vx = speed;\n\n        vr = -heading;\n\n             if (key == 0x260000) vx =  1.0;\n\n    if (key == 0x280000) vx = -1.0;\n\n    if (key == 0x250000) vr =  1.0;\n\n    if (key == 0x270000) vr = -1.0;\n\n    if (key == 'q')      vz =  1.0;\n\n    if (key == 'a')      vz = -1.0;\n        ardrone.move3D(vx, vy, vz, vr);\n\n\n\n    // See you\n\n    ardrone.close();\n\n\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "ldap-query"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1508333506, "post_id": 46810484, "comment_id": 80569865, "body": "What way you have used ldap_search_ext_s for years? What is &quot;The Code Analyzer&quot;? What it is complaining? Proper way to query what? What warning?"}, {"owner": {"reputation": 227, "user_id": 447227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oj0Pv.jpg?s=128&g=1", "display_name": "8znr", "link": "https://stackoverflow.com/users/447227/8znr"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1508343101, "post_id": 46810484, "comment_id": 80576662, "body": "@&#214;&#246;Tiib using null meaning &quot;no filter&quot;...? complaining about using null as filter...? proper way to query using no filters...? Warning of the analyzer about using null as filter...?"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1508361986, "post_id": 46810484, "comment_id": 80586471, "body": "I think in Linux filter may be NULL to mean all objects but in Windows you must use filter &quot;(objectClass=*)&quot; to mean all objects, but I may be wrong."}], "owner": {"reputation": 227, "user_id": 447227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oj0Pv.jpg?s=128&g=1", "display_name": "8znr", "link": "https://stackoverflow.com/users/447227/8znr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1508342955, "creation_date": 1508330650, "last_edit_date": 1508342955, "question_id": 46810484, "link": "https://stackoverflow.com/questions/46810484/ldap-search-ext-s-filter-compiler-warning", "title": "ldap_search_ext_s filter compiler warning", "body": "<p>Does <a href=\"https://msdn.microsoft.com/it-it/library/windows/desktop/aa366972(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ldap_search_ext_s</code></a> accepts null filters? I've used it in this way for years but the Visual Studio Code Analyzer is complaining about that. What is the proper way to query with no filters without this warning?</p>\n"}, {"tags": ["c++", "c", "floating-point", "language-lawyer"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508331050, "post_id": 46810474, "comment_id": 80568293, "body": "Why not use the <a href=\"http://en.cppreference.com/w/cpp/string/byte/strtof\" rel=\"nofollow noreferrer\">std::strtod</a> in the first place, because C++?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508331085, "post_id": 46810474, "comment_id": 80568318, "body": "@ron yes, std::strtod could be used, but the question remains the same. And it applies to C and C++."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1508331134, "post_id": 46810474, "comment_id": 80568359, "body": "Try reading some of these (they will start to explain some the floating point and library issues): <a href=\"https://randomascii.wordpress.com/category/floating-point/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/category/floating-point</a>  especially: <a href=\"https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2013/07/16/floating-point-determin&zwnj;&#8203;ism</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508331254, "post_id": 46810474, "comment_id": 80568434, "body": "For inf and NaN there are no literals, I suppose you want to exclude those?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 9, "creation_date": 1508331269, "post_id": 46810474, "comment_id": 80568445, "body": "Throwing <a href=\"https://stackoverflow.com/q/588004/4389800\">Is floating point math broken?</a> or <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> in the face for any question on floating point math is like throwing the C standard for any C question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1508331278, "post_id": 46810474, "comment_id": 80568450, "body": "@BaummitAugen yes <code>inf</code> and <code>NaN</code>  are excluded."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508331382, "post_id": 46810474, "comment_id": 80568511, "body": "@MichaelWalz&gt; did you try changing the floating point environment to see whether the test still succeeds? Most notably the rounding direction?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1508331399, "post_id": 46810474, "comment_id": 80568523, "body": "I don&#39;t think there&#39;s a definitive answer. This is a QOI issue IMO. I think it most likely will not result in the same binary representation <i>in general</i>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508331423, "post_id": 46810474, "comment_id": 80568542, "body": "@spectras I did a few tests on a few different platforms, the outcome was always the same."}, {"owner": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1508332231, "post_id": 46810474, "comment_id": 80569039, "body": "If you are <i>ever</i> testing two floating point numbers for exact equality, then you are doing something wrong. You should always at least be checking that the difference is less than some epsilon value..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508363632, "post_id": 46810474, "comment_id": 80587183, "body": "@MichaelWalz In your platform testing, consider reporting the value of <code>FLT_EVAL_METHOD</code>.  When 0 or 1, I expect code will report <code>value == 7.7</code>.  When 2, I expect <code>value != 7.7</code>."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1508331817, "post_id": 46810797, "comment_id": 80568779, "body": "@YSC I&#39;m surprised cppreference mentions it. That site is improving every day."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1508331966, "post_id": 46810797, "comment_id": 80568860, "body": "You can actually join the effort: <a href=\"http://en.cppreference.com/w/Cppreference:FAQ#What.3F_This_is_a_wiki.3F_Can_I_change_stuff.3F\" rel=\"nofollow noreferrer\">cppreference is a wiki</a>!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508332221, "post_id": 46810797, "comment_id": 80569035, "body": "@RichardHodges What is <i>[lex.fcon]</i>?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1508332292, "post_id": 46810797, "comment_id": 80569081, "body": "That certainly sounds like the safest assumption to make.  My experience has been that it&#39;s easy to get burned by things like this.  For one thing, I&#39;m not sure how much I trust the conversion done by <code>fscanf</code> to match the conversion done by the compiler at compile time.  Another is that values sometimes end up in registers, with higher precision than one might expect.  But if the representation is exact in a double, then it seems like it should be safe."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508332679, "post_id": 46810797, "comment_id": 80569310, "body": "@MichaelWalz it&#39;s the name of a section in the c++ standard."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1508352954, "post_id": 46810797, "comment_id": 80581846, "body": "@Tom Yeah relying on that seems incredibly, incredibly fragile. &quot;This code works because X can be represented perfectly by a IEEE-754 double which our compiler happens to guarantee is used for doubles&quot;.."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 18, "last_activity_date": 1508332724, "last_edit_date": 1592644375, "creation_date": 1508331621, "answer_id": 46810797, "question_id": 46810474, "link": "https://stackoverflow.com/questions/46810474/comparing-floating-point-values-converted-from-strings-with-literals/46810797#46810797", "title": "Comparing floating point values converted from strings with literals", "body": "<p>From the c++ standard:</p>\n<blockquote>\n<h3>[lex.fcon]</h3>\n<p>... If the scaled value is in the range\nof representable values for its type, the result is the scaled value if representable, else the larger or smaller\nrepresentable value nearest the scaled value, <strong>chosen in an implementation-defined manner</strong>...</p>\n</blockquote>\n<p>emphasis mine.</p>\n<p>So you can only rely on equality if the value is strictly representable by a double.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508332143, "post_id": 46810818, "comment_id": 80568982, "body": "This sounds convincing. So I&#39;ll replace the <code>==</code> with the call to some <code>AmostEqual</code> function."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508333628, "post_id": 46810818, "comment_id": 80569945, "body": "@MichaelWalz&gt; you tagged both C and C++. I&#39;m wondering whether they agree on that one. In <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C99</a>, normative annex F, subsection 7.2 reads: \u201cDuring translation the IEC 60559 default modes are in effect: \u2014 The rounding direction mode is rounding to nearest [...]\u201d. So it would appear your sample code is guaranteed to work in C99, as long as you don&#39;t change the floating point environment of your code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508345729, "post_id": 46810818, "comment_id": 80578120, "body": "So, @YSC, your point with respect to C11 is that it is only a recommendation, not a requirement, that the translation-time and runtime conversions agree?"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508346262, "post_id": 46810818, "comment_id": 80578381, "body": "@YSC&gt; the recommendation is about the fact that they should match. However, annex F, which is normative gives the exact rules for translation-time, so by explicitly configuring the floating-point environment with those, the match should be guaranteed."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508352648, "post_id": 46810818, "comment_id": 80581682, "body": "@Michael One simple reason how this could fail on x86 is that reading a value from memory will only get you 64bit precision, while a value could have 80-bit precision when in a register.Loading a constant might very well be done directly via registers, while the fscanf loaded value might have been stored in memory somewhere. For that reason alone it&#39;s pretty much never safe to assume equality between floats."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1508398535, "post_id": 46810818, "comment_id": 80597073, "body": "@spectras a norme about translation-time rules and nothing about execution-time library&#39;s string functions does not guarantee a match ;)"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 17, "last_activity_date": 1508398758, "last_edit_date": 1508398758, "creation_date": 1508331695, "answer_id": 46810818, "question_id": 46810474, "link": "https://stackoverflow.com/questions/46810474/comparing-floating-point-values-converted-from-strings-with-literals/46810818#46810818", "title": "Comparing floating point values converted from strings with literals", "body": "<p>About C++, <a href=\"http://en.cppreference.com/w/c/language/floating_constant\" rel=\"noreferrer\">from cppreference one can read</a>:</p>\n\n<p><strong><code>[lex.fcon]</code></strong> (\u00a76.4.4.2)</p>\n\n<blockquote>\n  <p>The result of evaluating a floating constant is either the nearest representable value or the larger or smaller representable value immediately adjacent to the nearest representable value, chosen in an implementation-defined manner (in other words, default rounding direction during translation is implementation-defined).</p>\n</blockquote>\n\n<p>Since the representation of a floating literal is unspecified, I guess you cannot conclude about its comparison with a <code>scanf</code> result.</p>\n\n<hr>\n\n<p>About C11 (standard ISO/IEC 9899:2011):</p>\n\n<p><strong><code>[lex.fcon]</code></strong> (\u00a76.4.4.2)</p>\n\n<blockquote>\n  <p><strong>Recommended practice</strong></p>\n  \n  <p>7 The  translation-time  conversion  of  floating  constants  should  match  the  execution-time conversion  of  character  strings  by  library functions,  such  as <code>strtod</code>,  given  matching inputs  suitable  for  both  conversions,  the  same  result  format,  and  default  execution-time\n  rounding.</p>\n</blockquote>\n\n<p>So clearly for C11, this is not guaranteed to match.</p>\n"}, {"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1508343876, "post_id": 46814017, "comment_id": 80577084, "body": "I&#39;d almost upvote, but the <code>union</code> type punning breaks C++ aliasing restrictions (which are a recurring topic also). A well-formed solution would e.g. use <code>memcpy</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1508344110, "post_id": 46814017, "comment_id": 80577249, "body": "@ArneVogel Fair enough about C++.  Yet post is also tagged C which this answer does not break aliasing restrictions.  Given <code>fscanf()</code>, OP code smells more like C than C++."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1508351715, "last_edit_date": 1508351715, "creation_date": 1508340902, "answer_id": 46814017, "question_id": 46810474, "link": "https://stackoverflow.com/questions/46810474/comparing-floating-point-values-converted-from-strings-with-literals/46814017#46814017", "title": "Comparing floating point values converted from strings with literals", "body": "<blockquote>\n  <p>If the string is the same as the literal, will the comparison using <code>==</code> be true in all cases?</p>\n</blockquote>\n\n<p>A common consideration not yet explored: <code>FLT_EVAL_METHOD</code></p>\n\n<pre><code>#include &lt;float.h&gt;\n...\nprintf(\"%d\\n\", FLT_EVAL_METHOD);\n</code></pre>\n\n<blockquote>\n  <p>2 evaluate all operations and constants to the range and precision of the\n  <code>long double</code> type.</p>\n</blockquote>\n\n<p>If this returns 2, then the math used in <code>value == 7.7</code> is <code>long double</code> and <code>7.7</code> treated as <code>7.7L</code>.  In OP's case, this may evaluate to false.</p>\n\n<p>To account for this wider precision, assign values which will removes all extra range and precision.</p>\n\n<pre><code>scanf(file, \"%lf\", &amp;value);\ndouble seven_seven = 7.7;\nif (value == seven_seven)\n  printf(\"strictly equal\\n\");\n</code></pre>\n\n<p>IMO, this is a more likely occurring problem than variant rounding modes or variations in library/compiler conversions.</p>\n\n<hr>\n\n<p>Note that this case is akin to the below, a well known issue.</p>\n\n<pre><code>float value;\nfscanf(file, \"%f\", &amp;value);\nif (value == 7.7)\n   printf(\"strictly equal\\n\");\n</code></pre>\n\n<hr>\n\n<p>Demonstration</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\nint main() {\n  printf(\"%d\\n\", FLT_EVAL_METHOD);\n  double value;\n  sscanf(\"7.7\", \"%lf\", &amp;value);\n  double seven_seven = 7.7;\n  if (value == seven_seven) {\n    printf(\"value == seven_seven\\n\");\n  } else {\n    printf(\"value != seven_seven\\n\");\n  }\n  if (value == 7.7) {\n    printf(\"value == 7.7\\n\");\n  } else {\n    printf(\"value != 7.7\\n\");\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>2\nvalue == seven_seven\nvalue != 7.7\n</code></pre>\n\n<hr>\n\n<p><strong>Alternative Compare</strong></p>\n\n<p>To compare 2 <code>double</code> that are \"near\" each other, we need a definition of \"near\".    A useful approach is to consider all the finite <code>double</code> values sorted into a ascending sequence and then compare their sequence numbers from each other.  <code>double_distance(x, nextafter(x, 2*x)</code> --> 1</p>\n\n<p>Following code makes various assumptions about <code>double</code> layout and size. </p>\n\n<pre><code>#include &lt;assert.h&gt;\n\nunsigned long long double_order(double x) {\n  union {\n    double d;\n    unsigned long long ull;\n  } u;\n  assert(sizeof(double) == sizeof(unsigned long long));\n  u.d = x;\n  if (u.ull &amp; 0x8000000000000000) {\n    u.ull ^= 0x8000000000000000;\n    return 0x8000000000000000 - u.ull;\n  }\n  return u.ull + 0x8000000000000000;\n}\n\nunsigned long long double_distance(double x, double y) {\n  unsigned long long ullx = double_order(x);\n  unsigned long long ully = double_order(y);\n  if (x &gt; y) return ullx - ully;\n  return ully - ullx;\n}\n\n....\nprintf(\"%llu\\n\", double_distance(value, 7.7));                       // 0\nprintf(\"%llu\\n\", double_distance(value, nextafter(value,value*2)));  // 1\nprintf(\"%llu\\n\", double_distance(value, nextafter(value,value/2)));  // 1\n</code></pre>\n\n<p>Or just use</p>\n\n<pre><code>if (nextafter(7.7, -INF) &lt;= value &amp;&amp; value &lt;= nextafter(7.7, +INF)) {\n  puts(\"Close enough\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1508361495, "creation_date": 1508361495, "answer_id": 46819416, "question_id": 46810474, "link": "https://stackoverflow.com/questions/46810474/comparing-floating-point-values-converted-from-strings-with-literals/46819416#46819416", "title": "Comparing floating point values converted from strings with literals", "body": "<p>There's no guarantee. </p>\n\n<p>You can hope that the compiler uses a high quality algorithm for the conversion of literals, and that the standard library implementation uses a high quality conversion as well, and two high quality algorithms should agree quite often. </p>\n\n<p>It's also possible that both use the exact same algorithm (for example, the compiler converts the literal by putting the characters into a char array and calling sscanf. </p>\n\n<p>BTW. I had one bug caused by the fact that a compiler didn't convert the literal 999999999.5 exactly. Replaced it with 9999999995 / 10.0 and everything was fine. </p>\n"}], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 3, "accepted_answer_id": 46810818, "answer_count": 4, "score": 24, "last_activity_date": 1508399055, "creation_date": 1508330607, "last_edit_date": 1508399055, "question_id": 46810474, "link": "https://stackoverflow.com/questions/46810474/comparing-floating-point-values-converted-from-strings-with-literals", "title": "Comparing floating point values converted from strings with literals", "body": "<p><strong>This is not a duplicate of the famous <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\"><em>Is floating point math broken</em></a>, even if it looks like one at first sight.</strong></p>\n\n<p>I'm reading a <code>double</code> from a text file using <code>fscanf(file, \"%lf\", &amp;value);</code> and comparing it with the <code>==</code> operator against a double literal. If the string is the same as the literal, will the comparision using <code>==</code> be <code>true</code> in all cases?</p>\n\n<p><strong>Example</strong></p>\n\n<p>Text file content:</p>\n\n<pre><code>7.7\n</code></pre>\n\n<p>Code snippet:</p>\n\n<pre><code>double value;\nfscanf(file, \"%lf\", &amp;value);     // reading \"7.7\" from file into value\n\nif (value == 7.7)\n   printf(\"strictly equal\\n\");\n</code></pre>\n\n<p>The expected and actual output is</p>\n\n<pre><code>strictly equal\n</code></pre>\n\n<p>But this supposes that the compiler converts the double literal <code>7.7</code> into a double exactly the same way as does the <code>fscanf</code> function, but the compiler may or may not use the same library for converting strings to double.</p>\n\n<p>Or asked otherwise: does the conversion from string to double result in a unique binary representation or may there be slight implementation dependent differences?</p>\n\n<p><strong><a href=\"https://www.ideone.com/HmSuGo\" rel=\"noreferrer\">Live demonstration</a></strong></p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 1605, "user_id": 4179302, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-71QIq2eev8E/AAAAAAAAAAI/AAAAAAAAA0c/KCUZGf1P-7Y/photo.jpg?sz=128", "display_name": "apalomer", "link": "https://stackoverflow.com/users/4179302/apalomer"}, "edited": false, "score": 0, "creation_date": 1508330653, "post_id": 46810463, "comment_id": 80568023, "body": "it does not find the header because you need all the header files for your library to be in the <code>lib</code> folder."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 5188558, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jM3AN.jpg?s=128&g=1", "display_name": "mstranne", "link": "https://stackoverflow.com/users/5188558/mstranne"}, "edited": false, "score": 0, "creation_date": 1508331749, "post_id": 46810654, "comment_id": 80568740, "body": "I dont have any header files, are they not in the lib?"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 88, "user_id": 5188558, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jM3AN.jpg?s=128&g=1", "display_name": "mstranne", "link": "https://stackoverflow.com/users/5188558/mstranne"}, "edited": false, "score": 1, "creation_date": 1508332191, "post_id": 46810654, "comment_id": 80569015, "body": "@mstranne no, they are not. in C/C++, there are two parts to a library, the library and the headers which include all library method declarations."}, {"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1508344340, "post_id": 46810654, "comment_id": 80577377, "body": "I&#39;d recommend <code>target_include_directories</code> instead of <code>include_directories</code>.  See <a href=\"https://www.youtube.com/watch?v=eC9-iRN2b04\" rel=\"nofollow noreferrer\">this presentation</a> for best practices of modular CMake build."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1508331141, "creation_date": 1508331141, "answer_id": 46810654, "question_id": 46810463, "link": "https://stackoverflow.com/questions/46810463/how-include-external-library-in-c-with-cmake/46810654#46810654", "title": "how include external library in c++ with cmake", "body": "<p>You need to use <a href=\"https://cmake.org/cmake/help/v3.0/command/include_directories.html\" rel=\"nofollow noreferrer\"><code>include_directories</code></a> to point CMake to your header search folders.</p>\n\n<blockquote>\n  <p>Add the given directories to those the compiler uses to search for include files. Relative paths are interpreted as relative to the current source directory.</p>\n</blockquote>\n"}], "owner": {"reputation": 88, "user_id": 5188558, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jM3AN.jpg?s=128&g=1", "display_name": "mstranne", "link": "https://stackoverflow.com/users/5188558/mstranne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1562, "favorite_count": 0, "accepted_answer_id": 46810654, "answer_count": 1, "score": 0, "last_activity_date": 1508331141, "creation_date": 1508330554, "question_id": 46810463, "link": "https://stackoverflow.com/questions/46810463/how-include-external-library-in-c-with-cmake", "title": "how include external library in c++ with cmake", "body": "<p>I got my directory like:</p>\n\n<pre><code>-lib\n-- mylibrary.dll\n-- mylibrary.lib\n-- mylibrary.exp\n-main.cpp\n-cmakelist\n</code></pre>\n\n<p>and i want my cmake to include the library into the main project like following: </p>\n\n<pre><code>link_directories(${CMAKE_BINARY_DIR}/lib)\nadd_executable(test_app main.cpp)\ntarget_link_libraries(testapp mylibrary)\n</code></pre>\n\n<p>but the the include do not find the header. I tried find_package but that did not work...</p>\n\n<p>anyone can help me?</p>\n"}, {"tags": ["c++", "lambda"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1508330013, "post_id": 46810236, "comment_id": 80567651, "body": "this won&#39;t compile . <code>a_</code> is immutable because the lambda is not marked <code>mutable</code>"}, {"owner": {"reputation": 11, "user_id": 5604292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d041fef64d44cdf5cf50bbe1371c1?s=128&d=identicon&r=PG&f=1", "display_name": "J. Klimczak", "link": "https://stackoverflow.com/users/5604292/j-klimczak"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1508330183, "post_id": 46810236, "comment_id": 80567763, "body": "@RichardHodges I know, it&#39;s just example for ilustrating problem"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5604292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d041fef64d44cdf5cf50bbe1371c1?s=128&d=identicon&r=PG&f=1", "display_name": "J. Klimczak", "link": "https://stackoverflow.com/users/5604292/j-klimczak"}, "edited": false, "score": 0, "creation_date": 1508332039, "post_id": 46810369, "comment_id": 80568915, "body": "so, if I understand corectly:  when compiler find some variable (a_ here) in lambda body, it search it in body as local variable or as passed parameter, if it not found it then search this var in lambda captures (lambda &#39;members&#39;) and if there is no such lambda members it tries to get (A::sth::lambda::l::)_this-&gt;a_ , is that correct ? And this is defined rule, yes ?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 11, "user_id": 5604292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d041fef64d44cdf5cf50bbe1371c1?s=128&d=identicon&r=PG&f=1", "display_name": "J. Klimczak", "link": "https://stackoverflow.com/users/5604292/j-klimczak"}, "edited": false, "score": 0, "creation_date": 1508332388, "post_id": 46810369, "comment_id": 80569133, "body": "@J.Klimczak in this case we are explicitly capturing this (A&#39;s this) and A&#39;s a_. We are storing them in the lambda&#39;s <i>this and the lambda&#39;s a</i>. If we had also specified &amp; in the capture block. When referencing variables in code in the lambda&#39;s definition, the lambda&#39;s names are searched first, then any outer scope."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1508331677, "last_edit_date": 1508331677, "creation_date": 1508330241, "answer_id": 46810369, "question_id": 46810236, "link": "https://stackoverflow.com/questions/46810236/distinguish-b-w-captured-this-members-from-captured-variables-in-c-lambdas/46810369#46810369", "title": "Distinguish b/w captured `this` members from captured variables in C++ lambdas", "body": "<p>breaking it down (and fixing the bug):</p>\n\n<pre><code>class A {\n    int a_ = 0;  // this is A::a_\npublic:\n    void sth() {\n        auto l = \n          [\n              this,  // A::sth::lambda::l::_this \n              a_=a_   // A::sth::lambda::l::a_ = A::a_  // because the lambda's a_ does not exist until it's defined.\n          ](int a) mutable \n          { \n              a_ = a;  // A::sth::lambda::l::a_ = argument a \n          };\n        l(1);\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5604292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9d041fef64d44cdf5cf50bbe1371c1?s=128&d=identicon&r=PG&f=1", "display_name": "J. Klimczak", "link": "https://stackoverflow.com/users/5604292/j-klimczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508331677, "creation_date": 1508329773, "last_edit_date": 1508330304, "question_id": 46810236, "link": "https://stackoverflow.com/questions/46810236/distinguish-b-w-captured-this-members-from-captured-variables-in-c-lambdas", "title": "Distinguish b/w captured `this` members from captured variables in C++ lambdas", "body": "<p>I'm wondering about captures in lambdas in C++.\nI know that lambda expression is just \"generator\" for some functor class.\nI'm wondering how compiler does distinguish between members from captured 'this' from members of generated functor class? </p>\n\n<p>And, second question:</p>\n\n<p>In example below <code>a_</code> from capture list shadows <code>A::a_</code>. Is this behavior described in standard? I can't find answer for that anywhere.</p>\n\n<pre><code>class A {\n    int a_ = 0;\npublic:\n    void sth() {\n        auto l = [this, a_=1](int a) { a_ = a; };\n        l(1);\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 2, "creation_date": 1508329789, "post_id": 46810136, "comment_id": 80567538, "body": "Why exactly does <code>testVec.push_back(A::test);</code>not work? It should ..."}, {"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "reply_to_user": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508329925, "post_id": 46810136, "comment_id": 80567609, "body": "@Rene because static should be defined somewhere and stored somewhere"}, {"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "reply_to_user": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508330007, "post_id": 46810136, "comment_id": 80567649, "body": "@Rene It will not link and I have tried this with the MULTI compiler for my embedded system and with Cygwin GCC. Output: undefined reference to `A::test&#39;"}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508330036, "post_id": 46810136, "comment_id": 80567671, "body": "Don&#39;t tell  me. I want the OP to post the error he gets, so we can solve this error. The casts however are not the right solution."}, {"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "reply_to_user": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508330104, "post_id": 46810136, "comment_id": 80567709, "body": "@Rene I know the solution is forward declaration, and that it will link with that. But why does the cast work? That is my question."}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508330156, "post_id": 46810136, "comment_id": 80567749, "body": "@9Breaker As I expected. Sometimes <code>static const int ...</code> member variables are not directly replaced by the compiler, means you have to add a definition line in your A.cpp: <code>const int A::test;</code>"}, {"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "reply_to_user": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1508330717, "post_id": 46810136, "comment_id": 80568075, "body": "@Rene Right, I know that works. But how does casting essentially achieve the same thing?"}], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 0, "creation_date": 1508330294, "post_id": 46810306, "comment_id": 80567840, "body": "Yes, but it does not link without forward declaration even when the header A.h is included. Casting will work and it links fine. Or forward declaration of const int A::test in main or in B.h will also link well. My question is how does the cast make the linking work without forward declaration?"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1508330036, "creation_date": 1508330036, "answer_id": 46810306, "question_id": 46810136, "link": "https://stackoverflow.com/questions/46810136/static-cast-to-access-static-const-class-member/46810306#46810306", "title": "Static Cast to access static const class member", "body": "<p>The cast is not needed, and it has nothing to do with the question.</p>\n\n<p>The <code>#include \"B.h\"</code> at the top of <code>main</code> says to include the contents of the file <code>\"B.h\"</code>. When that's done, the <code>#include \"A.h\"</code> in <code>\"B.h\"</code> says to include the contents of the file <code>\"A.h\"</code>. <code>\"A.h\"</code> has the definition of <code>A</code>, and that's how the compiler knows about <code>A::test</code>. There's no need for a forward declaration (in fact, you can't have a forward declaration of a class member) because the compiler has seen the full definition of the class.</p>\n\n<p>The linking problem is because you must also <strong>define</strong> the static member somewhere. Typically you'll have a .cpp file that has the definitions of the member functions of the class. That file should also define the static member:</p>\n\n<pre><code>const int A::test;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 0, "creation_date": 1508330657, "post_id": 46810313, "comment_id": 80568024, "body": "That is all right and I agree with what you have said. My main question is more on why casting works (which I know would not be accepted coding standard, but I am wondering why the cast works)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 1, "creation_date": 1508331268, "post_id": 46810313, "comment_id": 80568444, "body": "@9Breaker casting creates temporary. I was about to add it but aschepler beat me to it ;)"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1508330059, "creation_date": 1508330059, "answer_id": 46810313, "question_id": 46810136, "link": "https://stackoverflow.com/questions/46810136/static-cast-to-access-static-const-class-member/46810313#46810313", "title": "Static Cast to access static const class member", "body": "<p>Your code is equivalent to this simplified<sup>1</sup> snippet:</p>\n\n<pre><code>struct A { static const int value = 5; };\nstruct B { const int&amp; n ; B() : n(A::value) {} };\n\nint main()\n{\n    B b;\n}\n</code></pre>\n\n<p>Which is ill-formed since <code>A::value</code> is not defined (only declared). My compiler report a linker error:</p>\n\n<blockquote>\n  <p>main.cpp:(.text._ZN1BC2Ev[_ZN1BC5Ev]+0xf): undefined reference to `A::value'</p>\n</blockquote>\n\n<p>A solution would be to define it properly:</p>\n\n<pre><code>struct A { static const int value = 5; };\nstruct B { const int&amp; n ; B() : n(A::value) {} };\nconst int A::value;\n\nint main()\n{\n    B b;\n}\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup>) The important part of your example is the usage of a reference to <code>A::test</code> (see <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow noreferrer\">definition of <code>std::vector::push_back()</code></a>. This is why I defined <code>B</code> to use a reference to <code>A::value</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1508330583, "post_id": 46810449, "comment_id": 80567984, "body": "Nice answer. Have my vote."}, {"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 0, "creation_date": 1508331025, "post_id": 46810449, "comment_id": 80568270, "body": "Great answer and taught me a lot. Thanks!"}, {"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "edited": false, "score": 0, "creation_date": 1508331356, "post_id": 46810449, "comment_id": 80568493, "body": "Thank you for a great answer."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 7, "last_activity_date": 1508330522, "creation_date": 1508330522, "answer_id": 46810449, "question_id": 46810136, "link": "https://stackoverflow.com/questions/46810136/static-cast-to-access-static-const-class-member/46810449#46810449", "title": "Static Cast to access static const class member", "body": "<p>A declaration of a <code>static</code> member within a class like <code>static const int test = 5;</code> is a declaration but not a definition, even if it has an initializer.  A declaration should normally have a corresponding definition.  This definition looks like <code>const int A::test;</code> (which is not a \"forward declaration\".)</p>\n\n<p>However, there's an additional rule that a <code>static const</code> class member of integer type does not need to be defined if only its value is used, its address is not taken, and no reference binds to it (which would be similar to taking its address).</p>\n\n<p>The function you're calling is <code>void std::vector&lt;int&gt;::push_back(const int&amp;);</code>.  So passing <code>A::test</code> directly will bind the function parameter reference directly to the object, and require a definition.</p>\n\n<p>On the other hand, if you pass <code>(const int)A::test</code> or <code>static_cast&lt;const int&gt;(A::test)</code>, this forces a temporary <code>int</code> value to be created using the value of <code>A::test</code>, and the reference binds to that temporary instead.  So in that case, a definition of <code>A::test</code> is not necessary.</p>\n\n<p>Note in C++17, the definition of <code>A::test</code> won't be necessary in any case, since a <code>static</code> class member with an initializer in the class definition is implicitly an <code>inline</code> variable and a definition.</p>\n\n<p>Until then, be sure to define all your class <code>static</code> members in some *.cpp file, in case you do use them in a way that requires a definition.</p>\n"}], "owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "closed_date": 1508330664, "accepted_answer_id": 46810449, "answer_count": 3, "score": 4, "last_activity_date": 1508330852, "creation_date": 1508329485, "last_edit_date": 1508330852, "question_id": 46810136, "link": "https://stackoverflow.com/questions/46810136/static-cast-to-access-static-const-class-member", "closed_reason": "Duplicate", "title": "Static Cast to access static const class member", "body": "<p>So yesterday I was looking on SO and could not find an answer to the following. This situation came from some come code I am working with, but here is the MCVE to demonstrate it. </p>\n\n<p>I have a class A defined in A.h that just has one static const in it. I already initialized it in the header. </p>\n\n<pre><code>#ifndef A_H_\n#define A_H_\nclass A {\npublic:\n    static const int test = 5;\n    ~A(){};\n};\n\n\n#endif /* A_H_ */\n</code></pre>\n\n<p>I then have a class B that needs to access the public static const from class A. In this example it will deep copy the value to a vector. </p>\n\n<pre><code>#ifndef B_H_\n#define B_H_\n\n#include \"A.h\"\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nclass B {\nprivate:\n    std::vector&lt;int&gt; testVec;\n\npublic:\n    B(){\n\n        testVec.push_back((const int)A::test);\n        //testVec.push_back(static_cast&lt;const int&gt;(A::test)); //Also works\n        //testVec.push_back(A::test); //Doesn't work without forward declaration of const int A::test in main or in this header \n        //(Compiler link error: undefined reference to `A::test')  \n        std::cout&lt;&lt; testVec.front() &lt;&lt; std::endl;\n    }\n\n    ~B(){};\n};\n\n#endif /* B_H_ */\n</code></pre>\n\n<p>Then in main I simple call the constructor of class B.</p>\n\n<pre><code>#include \"B.h\"\n\nint main() {\n\n    B b;\n\n    return 0;\n}\n//Does the cout from ctor of B and prints 5 to the screen. \n</code></pre>\n\n<p>My question is why does a normal cast or static cast allow me to access this static const variable that has not been forward declared. In normal code, I would forward declare the variable or declare it an extern since it has already been defined. What is the reason as to why the casting allows me to access this variable without a forward declaration? (This may seem like a simple question and may have a simple answer, but I am trying to further my knowledge here). </p>\n\n<p>The output from the compiler link error is:</p>\n\n<pre><code>Invoking: Cygwin C++ Linker\ng++  -o \"S_Test_p1.exe\"  ./src/S_Test_p1.o   \n./src/S_Test_p1.o:S_Test_p1.cpp:(.rdata$.refptr._ZN1A4testE[.refptr._ZN1A4testE]+0x0): undefined reference to `A::test'\ncollect2: error: ld returned 1 exit status\nmake: *** [makefile:47: S_Test_p1.exe] Error 1\n</code></pre>\n\n<p><strong>My main question here is why the casting works and not that the solution is to define A::test in main or in B.h (which I know works). I understand that would be accepted and proper. The main question is about the unaccepted way, which is casting. Behind the scenes why does casting work for linking?</strong></p>\n"}, {"tags": ["c++", "qt", "qtranslator"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508330432, "post_id": 46810108, "comment_id": 80567897, "body": "Why not calling the display function with the string <b>with</b> <code>tr</code> and the logging function with the same string, but <b>without</b> tr?"}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508330562, "post_id": 46810108, "comment_id": 80567974, "body": "@scopchanov, because it is inconvenient to do: you can only achieve that b copy-pasting the string two times. It won&#39;t work to put the string into some variable and use it with and without <code>tr</code> - <code>tr</code> must be used along with string <i>literal</i>, otherwise the translation simply won&#39;t work. It is due to the mechanics of Qt&#39;s translation system - the strings to be translated are extracted from the source code by <code>lupdate</code> utility which looks at string literals within <code>tr</code> and some helper macros like <code>QT_TR_NOOP</code>."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1508330853, "post_id": 46810108, "comment_id": 80568146, "body": "@Dmitry, <code>It won&#39;t work to put the string into some variable</code> != <code>m_originalString(str), m_localizedString(tr(str))</code>."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1508330942, "post_id": 46810108, "comment_id": 80568213, "body": "Ok, correction: it would only work if you wrap the original string into a special macro <code>QT_TR_NOOP</code> or one of its relatives. Which is exactly what I describe in my answer."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1508331087, "post_id": 46810108, "comment_id": 80568319, "body": "@Dmitry, So, basically we describe the same approach. Your explanation is more comprehensive though."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508331277, "post_id": 46810108, "comment_id": 80568449, "body": "@scopchanov Well, yes but you did not mention the most necessary part - <code>QT_TR_NOOP</code> :-P"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508331355, "post_id": 46810108, "comment_id": 80568492, "body": "That&#39;s why I said - <i>more elaborate</i>. It is a positive thing ;)"}], "answers": [{"comments": [{"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1508414108, "post_id": 46810423, "comment_id": 80605854, "body": "Thx ! Just a thought after reading this. It seems like it would be more practical to inherit from QString and just add the original-string as a member. So you can use your LocalizedString directly with all Qt function expecting a QString."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "reply_to_user": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 1, "creation_date": 1508414728, "post_id": 46810423, "comment_id": 80606225, "body": "@ymoreau, you can do so if you wish, however, you&#39;d need to beware of potential slicing if you assign <code>LocalizedString</code> to <code>QString</code>."}], "tags": [], "owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "is_accepted": false, "score": 6, "last_activity_date": 1508330803, "last_edit_date": 1508330803, "creation_date": 1508330432, "answer_id": 46810423, "question_id": 46810108, "link": "https://stackoverflow.com/questions/46810108/how-to-log-the-original-string-of-qobjecttr-and-still-display-to-the-gui-the-t/46810423#46810423", "title": "How to log the original string of QObject::tr and still display to the GUI the translation?", "body": "<p>I solved this problem in one of my own projects by introducing a special helper class holding both the original string and the translated one. Here's the rough sketch of how it looks:</p>\n\n<pre><code>class LocalizedString\n{\npublic:\n    LocalizedString(const char * str) :\n        m_originalString(str),\n        m_localizedString(tr(str))\n    {}\n\n    const char * originalString() const { return m_originalString; }\n    const QString &amp; localizedString() const { return m_localizedString; }\n\nprivate:\n    const char *     m_originalString;\n    QString          m_localizedString;\n}\n</code></pre>\n\n<p>Then the code using this class works like this:</p>\n\n<pre><code>// In one place within the code:\nLocalizedString errorDescription = QT_TR_NOOP(\"Some message which should go both to the log and to the user\");\nqDebug() &lt;&lt; errorDescription.originalString();\n&lt;...&gt;\n// In some other place within the code which gets errorDescription variable from somewhere and needs to show it to the user\nshowErrorMessage(errorDescription.localizedString());\n</code></pre>\n\n<p>The main part within the approach is the use of <a href=\"https://doc.qt.io/qt-5/qtglobal.html#QT_TR_NOOP\" rel=\"noreferrer\">QT_TR_NOOP</a> macro. What it does is marking the string literal enclosed into it as the one requiring extraction during <code>qmake</code> step for <em>further</em> translation. Unlike <code>QObject::tr</code>, this macro does not convert the non-translated text into the translated one. If you want to access the translated text, you need to call <code>tr</code> manually later on - as I did in the above example within the constructor of <code>LocalizedString</code>.</p>\n\n<p>Note that <code>QT_TR_NOOP</code> is designed to be used within classes i.e. the context for translation would be the name of the class inside some method of which the macro is present. If you have free standing functions or if you want to specify the context yourself, use <a href=\"https://doc.qt.io/qt-5/qtglobal.html#QT_TRANSLATE_NOOP\" rel=\"noreferrer\">QT_TRANSLATE_NOOP</a> macro instead - its second argument is the translation context.</p>\n\n<p><strong>Upd.:</strong> one more tip: in my real implementation of <code>LocalizedString</code> it has <code>operator&lt;&lt;</code> which prints the original, non-localized string. It is convenient because this way you can just pass the object of <code>LocalizedString</code> class to <code>QDebug</code> without calling its <code>originalString</code> method.</p>\n"}], "owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508330803, "creation_date": 1508329390, "question_id": 46810108, "link": "https://stackoverflow.com/questions/46810108/how-to-log-the-original-string-of-qobjecttr-and-still-display-to-the-gui-the-t", "title": "How to log the original string of QObject::tr and still display to the GUI the translation?", "body": "<p>In my project we want to translate the user-interface but keep the technical logs in English. I agree those two kind of messages should remain separated but sometimes we have some error messages that we want to display and log at the same time.<br>\nUsing <a href=\"http://doc.qt.io/qt-5/qobject.html#tr\" rel=\"nofollow noreferrer\">QObject::tr</a> you get the translated string and no way to retrieve the source string.</p>\n\n<p>How could I manage <em>log of original version</em> + <em>display of translated version</em> without copy/pasting ?<br>\nI am open to any suggestion, including design constraints.</p>\n"}, {"tags": ["c++", "macos", "dcmtk"], "answers": [{"tags": [], "owner": {"reputation": 1395, "user_id": 3154372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffJOd.jpg?s=128&g=1", "display_name": "J. Riesmeier", "link": "https://stackoverflow.com/users/3154372/j-riesmeier"}, "is_accepted": false, "score": 0, "last_activity_date": 1508394795, "creation_date": 1508394795, "answer_id": 46823959, "question_id": 46810074, "link": "https://stackoverflow.com/questions/46810074/weird-library-behavior-with-dcmtk/46823959#46823959", "title": "Weird library behavior with DCMTK", "body": "<p>My first guess would be: Did you make sure that the DICOM data dictionary is actually loaded (if not built into the library)? This could be done from your program by calling dcmDataDict.isDictionaryLoaded().</p>\n\n<p>For details, see the documentation: <a href=\"http://support.dcmtk.org/docs/file_datadict.html\" rel=\"nofollow noreferrer\">http://support.dcmtk.org/docs/file_datadict.html</a></p>\n"}], "owner": {"reputation": 41, "user_id": 6364481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c744e1de1e751f44b097b0d02fa47404?s=128&d=identicon&r=PG&f=1", "display_name": "RunesCarved", "link": "https://stackoverflow.com/users/6364481/runescarved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508394795, "creation_date": 1508329282, "last_edit_date": 1508339791, "question_id": 46810074, "link": "https://stackoverflow.com/questions/46810074/weird-library-behavior-with-dcmtk", "title": "Weird library behavior with DCMTK", "body": "<p>I'm facing a weird problem concerning the deployment of my software. </p>\n\n<p>I have compiled a library for opening Dicom files with <em>DCMTK</em> in the backend. Also linked in are <em>Qt5</em> and a tiny fraction of the Boost libs.\nWhen I use the library on my System, everything just works fine, as it does on the systems of the other developers in the team. </p>\n\n<p>Now it comes to the deployment. Since the frontend uses Python, I created a wrapper (Boost Python) around the library, and again everything works just fine. However, as soon as I transfer the library to another system (the same Mac OS X system as I use for developing, i.e, same Mac, same OS version) things start to get weird. </p>\n\n<p>I can open the DICOM set, except one: Hereby, the DCMTK part of the library complains that it cannot find reasonable values (<code>.bad()</code> delivers <code>true</code>) on opening various DicomTags and indeed, most values are 0 or the respective max value. \nWhen the same colleague with the same system compiles the library from scratch, everything works just fine.</p>\n\n<p>To create the library I first link my sources against <em>DCMTK</em> to create a state library. This is then linked against the Boost Python Module which is a shared library. </p>\n\n<p>I hope someone has an idea where I could search, since I'm quite lost here.</p>\n\n<p>How can it be that the same library produces different results on the same system? Somehow I think, the compilation step changes something, but I don't know where to look.</p>\n\n<p>Any help is very appreciated.</p>\n"}, {"tags": ["c++", "lambda", "closures"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1508328835, "post_id": 46809901, "comment_id": 80566930, "body": "Do note all the rules are detailed <a href=\"http://en.cppreference.com/w/cpp/language/lambda#Lambda_capture\" rel=\"nofollow noreferrer\">here</a> quite well."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1508328836, "post_id": 46809901, "comment_id": 80566932, "body": "I am genuinely asking myself each time I write or read a lambda capture and have to search the web. Haven&#39;t find a simple clean explanation yet. I think this would be a valuable post here."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1508328949, "post_id": 46809901, "comment_id": 80567005, "body": "@NathanOliver yes, I know, and I still don&#39;t know if <code>[a]</code> is by ref or value. In truth, I only scan the page. But honestly I don&#39;t have neither the will nor the time to read a complex description just when I want to know 1 simple answer. I don&#39;t know, maybe it is just me. Regardless, I think a post on SO should exist."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1508329423, "post_id": 46809901, "comment_id": 80567315, "body": "For sure.  The fact that it isn&#39;t here means it should be :-)  I just added the link so if people really want to see the subject in depth they had a good reference."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508331622, "post_id": 46809901, "comment_id": 80568667, "body": "Is this meant to go into the <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b-faq\">c++-faq</a>?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508332178, "post_id": 46809901, "comment_id": 80569008, "body": "@StoryTeller feel free to add the tag if you think so."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508332263, "post_id": 46809901, "comment_id": 80569059, "body": "Oh, I thought that was you intent, and hence the way it&#39;s phrased. It certainly looks like it was designed for inclusion :)"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1508338190, "post_id": 46809901, "comment_id": 80573189, "body": "I un-tagged it."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1508340728, "post_id": 46809901, "comment_id": 80574985, "body": "@Puppy I saw. What was the reason?"}], "answers": [{"tags": [], "owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "is_accepted": false, "score": 3, "last_activity_date": 1508331207, "last_edit_date": 1508331207, "creation_date": 1508329135, "answer_id": 46810027, "question_id": 46809901, "link": "https://stackoverflow.com/questions/46809901/lambda-captures/46810027#46810027", "title": "Lambda Captures", "body": "<ul>\n<li><p>nothing</p>\n\n<pre><code>[]\n</code></pre></li>\n<li><p>all by reference</p>\n\n<pre><code>[&amp;]\n</code></pre></li>\n<li><p>all by value</p>\n\n<pre><code>[=]\n</code></pre></li>\n<li><p><code>r1</code>, <code>r2</code> by reference. Nothing else.</p>\n\n<pre><code>[&amp;r1, &amp;r2]\n</code></pre></li>\n<li><p><code>v1</code>, <code>v2</code> by value. Nothing else.</p>\n\n<pre><code>[v1, v2]\n</code></pre></li>\n<li><p><code>r1</code>, <code>r2</code> by reference. Rest by value.</p>\n\n<pre><code>[=, &amp;r1, &amp;r2]\n</code></pre></li>\n<li><p><code>v1</code>, <code>v2</code> by value. Rest by reference.</p>\n\n<pre><code>[&amp;, v1, v2]\n</code></pre></li>\n<li><p><code>r1</code>, <code>r2</code> by reference, <code>v1</code>, <code>v2</code> by value. Nothing else.</p>\n\n<pre><code>[&amp;r1, &amp;r2, v1, v2]\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508331119, "post_id": 46810032, "comment_id": 80568349, "body": "In addition, instead of members capture (in &quot;everything&quot; capture), it is <code>this</code> which is captured."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 11, "last_activity_date": 1508329633, "last_edit_date": 1508329633, "creation_date": 1508329143, "answer_id": 46810032, "question_id": 46809901, "link": "https://stackoverflow.com/questions/46809901/lambda-captures/46810032#46810032", "title": "Lambda Captures", "body": "<p>In short:</p>\n\n<pre><code>[]{ }          // do not capture anything\n[foo]{ }       // capture `foo` by value\n[&amp;foo]{ }      // capture `foo` by reference\n[foo, &amp;bar]{ } // capture `foo` by value, `bar` by reference\n[=, &amp;foo]{ }   // capture everything by value, `foo` by reference\n[&amp;, foo]{ }    // capture everything by reference, `foo` by value\n</code></pre>\n\n<p>In C++14, you also have <em>generalized lambda captures</em>:</p>\n\n<pre><code>[i=0]{ }  // create closure with `i` data member initialized to `0`\n[i=j]{ }  // create closure with `i` data member initialized to `j`\n[i{0}]{ } // create closure with `i` data member initialized to `0`\n[i{j}]{ } // create closure with `i` data member initialized to `j`\n\n// create closure with `uptr` data member initialized to `std::move(uptr)`\n[uptr = std::move(uptr)]{ } \n\n// create closure with `foo` reference data member initialized to `something`\n[&amp;foo = something]{ }\n</code></pre>\n\n<hr>\n\n<p>If you want to conditionally capture either by reference or by value, you can use <em>generalized lambda captures</em> to implement some sort of \"perfect-forwarding capture\": <a href=\"https://vittorioromeo.info/index/blog/capturing_perfectly_forwarded_objects_in_lambdas.html\" rel=\"nofollow noreferrer\">\"capturing perfectly-forwarded objects in lambdas\"</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Let's completely ignore <code>this</code> as that is another bag of worms.</p>\n</blockquote>\n\n<pre><code>[this]{ }  // capture `this` by value (the pointer)\n[*this]{ } // store a copy of `*this` inside the closure\n</code></pre>\n\n<ul>\n<li><p><code>[*this]</code> <a href=\"https://stackoverflow.com/questions/41637451/c17-lambda-capture-this\">was introduced in C++17</a>.</p></li>\n<li><p>Note that <code>[&amp;this]</code> is <a href=\"https://stackoverflow.com/questions/16323032/why-cant-i-capture-this-by-reference-this-in-lambda\">a syntax error</a>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 8, "last_activity_date": 1508330173, "last_edit_date": 1508330173, "creation_date": 1508329165, "answer_id": 46810037, "question_id": 46809901, "link": "https://stackoverflow.com/questions/46809901/lambda-captures/46810037#46810037", "title": "Lambda Captures", "body": "<pre class=\"lang-none prettyprint-override\"><code>| Capture                                       | Syntax             |\n| --------------------------------------------- | ------------------ |\n| nothing                                       | []                 |\n| all by reference                              | [&amp;]                |\n| all by value                                  | [=]                |\n| r1, r2 by reference. Nothing else.            | [&amp;r1, &amp;r2]         |\n| v1, v2 by value. Nothing else.                | [v1, v2]           |\n| r1, r2 by reference. Rest by value.           | [=, &amp;r1, &amp;r2]      |\n| v1, v2 by value. Rest by reference.           | [&amp;, v1, v2]        |\n| r1, r2 by ref, v1, v2 by value. Nothing else. | [v1, v2, &amp;r1, &amp;r2] |\n</code></pre>\n\n<p>The rule is simple: preceded by an <code>&amp;</code>, capture by reference. Name only, capture by value.</p>\n\n<p>Defaults: <code>=</code> all by value, <code>&amp;</code> all by reference. Things to exclude from \"all\" use the simple rule above.</p>\n\n<hr>\n\n<p>The full rules can be read on <a href=\"http://en.cppreference.com/w/cpp/language/lambda#Lambda_capture\" rel=\"nofollow noreferrer\">cppreference</a>.</p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 46810037, "answer_count": 3, "score": 3, "last_activity_date": 1508333358, "creation_date": 1508328743, "last_edit_date": 1508333358, "question_id": 46809901, "link": "https://stackoverflow.com/questions/46809901/lambda-captures", "title": "Lambda Captures", "body": "<p>I always get confused by the lambda capture and I don't know if a variable is captured by reference or by value. For instance if I have <code>[a]</code> I don't know if <code>a</code> is captured by value or by ref.</p>\n\n<p>I think a simple way to get it would be by examples. So let's have one for each of the cases (more if there are more ways of expressing the same thing):</p>\n\n<p>Capture:</p>\n\n<ul>\n<li>nothing</li>\n<li>all by reference</li>\n<li>all by value</li>\n<li><code>r1</code>, <code>r2</code> by reference. Nothing else.</li>\n<li><code>v1</code>, <code>v2</code> by value. Nothing else.</li>\n<li><code>r1</code>, <code>r2</code> by reference. Rest by value.</li>\n<li><code>v1</code>, <code>v2</code> by value. Rest by reference.</li>\n<li><code>r1</code>, <code>r2</code> by reference, <code>v1</code>, <code>v2</code> by value. Nothing else.</li>\n</ul>\n\n<p>Let's completely ignore <code>this</code> as that is another bag of worms.</p>\n"}, {"tags": ["c++", "winapi", "search"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1508327910, "post_id": 46809602, "comment_id": 80566323, "body": "How about not converting it to hex?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1508327993, "post_id": 46809602, "comment_id": 80566387, "body": "I don&#39;t understand the <code>ToHex(inputString);</code>. Wouldn&#39;t it be faster to convert the <code>searchStr</code> the opposite direction? It&#39;s probably much smaller than the <code>fileData</code>. Btw. the latter has to be done only once for all files..."}, {"owner": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 0, "creation_date": 1508327999, "post_id": 46809602, "comment_id": 80566391, "body": "And why you avoided regular expressions?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1508328093, "post_id": 46809602, "comment_id": 80566446, "body": "<i>Convert into Hex</i> - this is for what ?"}, {"owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1508328125, "post_id": 46809602, "comment_id": 80566467, "body": "@UKMonkey I also use <code>.exe</code> and &#39; <code>.dll&#39;</code> for search. It&#39;s need to be convert to hex otherwise search process takes null-terminated and exit."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 1, "creation_date": 1508328142, "post_id": 46809602, "comment_id": 80566482, "body": "@MatteoRagni Well using regex could as easily <a href=\"https://xkcd.com/1171/\" rel=\"nofollow noreferrer\"><i>add</i> a problem</a> as take it away."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508328197, "post_id": 46809602, "comment_id": 80566508, "body": "and main here can be not how you search some data in memory buffer, but how you enumerate and read files"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1508328201, "post_id": 46809602, "comment_id": 80566512, "body": "The advantage of a <code>std::string</code> is that it can contain/consider even <code>&#39;\\0&#39;</code> bytes as the length is stored separately. The only exception: You shouldn&#39;t count on the result of <code>std::string::c_str()</code>."}, {"owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508328291, "post_id": 46809602, "comment_id": 80566568, "body": "@RbMm I should convert into Hex because of the search string in executable files."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1508328327, "post_id": 46809602, "comment_id": 80566588, "body": "@Scheff That&#39;s true of a <code>std::vector&lt;uint8_t&gt;</code> as well."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508328347, "post_id": 46809602, "comment_id": 80566602, "body": "@AliSepehri-Amin - nothing understand. <i>executable files</i> and so what ?? the type of files at all no play any role"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1508328422, "post_id": 46809602, "comment_id": 80566660, "body": "Considering that <code>std::string</code> (as well as <code>std::vector&lt;uint8_t&gt;</code>) can handle 0-bytes correctly I see no necessity for the &quot;Convert to Hex&quot;."}, {"owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508328533, "post_id": 46809602, "comment_id": 80566727, "body": "@RbMm I use <code>ReadFile</code> and get the file&#39;s data in binary mode, then put it into char[] and finally string, The <code>exe</code> file has <code>NULL</code> character so search process can&#39;t search anymore after 1 null-terminated character and read only 4 first characters of the file."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1508328572, "post_id": 46809602, "comment_id": 80566750, "body": "As well as converting to hex being a performance hog, it will get the answer wrong.  Consider search for the byte &quot;AB&quot; in &quot;0A B0&quot; - it will find a match half-way through the first byte!"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508328583, "post_id": 46809602, "comment_id": 80566756, "body": "@Someprogrammerdude The <code>std::string</code> would provide the required <code>std::string::find()</code> which might be an optimized version for string search. Don&#39;t know about <code>std::vector&lt;uint8_t&gt;</code>. Do you have something in mind out of <code>&lt;algorithm&gt;</code>?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508328722, "post_id": 46809602, "comment_id": 80566840, "body": "@AliSepehri-Amin - <i>I use ReadFile and get the file&#39;s data in binary mode</i> - and in this mode you and need search. you not need any convertations"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508328756, "post_id": 46809602, "comment_id": 80566866, "body": "@AliSepehri-Amin: You have to use the right constructor to get the nul bytes into a string, but it is very easy.  <code>const char *buffer = ???; size_t buflen = ???; std::string binaryText {buffer, buflen};</code> will give you a string contain the binary contents of <code>buffer</code>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508328905, "post_id": 46809602, "comment_id": 80566970, "body": "@MartinBonner: Given that the search string is 11 nibbles, having half-matches seems to be intentional."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1508329064, "post_id": 46809602, "comment_id": 80567082, "body": "I believe the &quot;half byte&quot; is a dead path. Looks like an error in the conversion. I believe the last hex number must be acutally &quot;0A&quot; - the newline character which accidentally was appended without leading 0. But, it&#39;s just my assumption..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1508329264, "post_id": 46809602, "comment_id": 80567208, "body": "The idea with the broken &quot;0A&quot; came from the preceding hex digits where I can see the &quot;Hello&quot; in..."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1508332516, "post_id": 46809602, "comment_id": 80569222, "body": "@Scheff Oh good grief!  I had assumed it was a sloppy copy-and-paste.  Well that will cause all sorts of interesting effects!"}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1508329522, "post_id": 46809897, "comment_id": 80567384, "body": "better base not on thread count but on simultaneous io requests count. recently test this solution on nvme disk - got the best results when we have ~32  simultaneous io requests. but this of course very depend from disk. and instead threads which do synchronous io, use asynchronous io requests"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1508329220, "last_edit_date": 1508329220, "creation_date": 1508328729, "answer_id": 46809897, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data/46809897#46809897", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>If you have a smaller file (like a few megabytes, or even a couple of hundred megabytes, depending on the amount of memory your system have) then read it all into memory, otherwise I recommend using <em>memory mapped files</em>. If the file is to big to be mapped you can use a sliding window or double-buffering algorithm to read blocks of the data from the file into memory.</p>\n\n<p>Then to search for a specific sequence of bytes, you do a linear search through the contents of the file, looking for the <em>first</em> byte of the sequence you search for (in the case of <code>0x48656C6C6FA</code> that's <code>0xFA</code>) . If found then you attempt to match the second byte in the sequence (in the example that's <code>0xC6</code>) to the next byte from the file, and so on until you have matched the whole sequence.</p>\n\n<p>If the second (or continuing) byte doesn't match, you continue your search for the first byte.</p>\n\n<p>This has O(n) complexity, where <code>n</code> is the number of bytes in the file. Unless you know beforehand that the data you search for is in a specific part of the file, that's the best you're going to get.</p>\n\n<hr>\n\n<p>If the files exists on an SSD you can use threads to search, one thread per file. <strong><em>But</em></strong> not all 2900 files at once, that will swamp the processor. Instead have 4-8 threads doing the search (depending on the number of cores of your system), and as soon as one thread is finished with a file, then it takes the next.</p>\n\n<p>Can't be used on a spinning-disk drive, as it will thrash the disk while the heads are seeking back and forth as the threads are trying to read.</p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508329060, "post_id": 46809931, "comment_id": 80567078, "body": "if use ssd /NVMe disk, exist sense you asynchronous io (for both enumerate folders/read files) hor have many read request at once. this give be very big advantage in search speed"}, {"owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "edited": false, "score": 0, "creation_date": 1508330496, "post_id": 46809931, "comment_id": 80567935, "body": "The I/O hardware is not in my hand, users have different PCs."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "edited": false, "score": 0, "creation_date": 1508331213, "post_id": 46809931, "comment_id": 80568403, "body": "@AliSepehri-Amin at which point there&#39;s nothing you can do to make it faster than loading all the files and doing nothing. If the rest of the program is 1% rather than 0.001% of that time, no-one will care"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1508328840, "creation_date": 1508328840, "answer_id": 46809931, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data/46809931#46809931", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>For search strings as short as the ones you have (5 1/2 bytes apparently), the bottleneck will often be the disk I/O. I suspect that those 2900 files may be on a harddisk. That would translate to roughly 4 ms per file, which is quite decent.</p>\n\n<p>Sure, the conversion to hex may be a bit clumsy, but given the 5 1/2 bytes (11 hex digits) it might not be entirely unreasonable. I.e. you might not get a major speed improvement if the HDD is the real bottleneck.</p>\n\n<p>So to check, measure how much time you spend if you <em>don't</em> search in the 2900 fies, and just read them in. Don't even convert them to hex. No matter how smart the search algorithm, the time you'll need for disk I/O is a lower bound. If this isn't good enough, get a fast SSD.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1508329265, "creation_date": 1508329265, "answer_id": 46810070, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data/46810070#46810070", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>Speed: use a memory mapped file</p>\n\n<p>Accuracy: use std::search using binary values.</p>\n\n<p>e.g.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;cstdint&gt;\n#include &lt;tuple&gt;\n#include &lt;vector&gt;\n\n// some function to return a pointer to the first byte in the file and the length \nextern std::tuple&lt;const std::uint8_t*, std::size_t&gt; get_file_bounds();\n\nint main()\n{\n    auto [begin, size] = get_file_bounds();\n    auto search_string = std::vector&lt;std::uint8_t&gt; {\n        0x48,\n        0x65,\n        0x6C,\n        0x6C,\n        0x6F\n    };\n\n    auto iter = std::search(begin, begin + size, \n                            search_string.begin(), search_string.end());\n\n    if (iter != begin + size)\n    {\n        // found the sequence \n    }\n    else \n    {\n        // didn't find it\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 1, "last_activity_date": 1508329860, "creation_date": 1508329860, "answer_id": 46810260, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data/46810260#46810260", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>For a faster string search algorithm, take a look at the Boyer Moore search algorithm. Boost (and c++17) has such an implementation.</p>\n\n<p>Also, avoid converting the file into hex (std::strings can contain '\\0' characters).</p>\n\n<p>And if you file IO is limiting, memory mapped files might be the way forward.. </p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1509302128, "creation_date": 1509302128, "answer_id": 47003807, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data/47003807#47003807", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>While this is probably a storage bottleneck problem there are string search algorithms that can be significantly faster than linear, for example Boyer Moore (described at <a href=\"https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm</a> ), they do require processing the search pattern and ave some memory overhead compared to a linear search.</p>\n\n<p>The basic idea is to know how many characters can be skipped based on what you find at a given index. (i.E. start at fileData[patternLLen-1] and if the character isn't even in the search pattern you can next look at fileData[patternLen+patternLen-1] and so on.</p>\n\n<p>The longer your pattern the more likely such an algorithm is to be an improvement over a straight linear search. The boost library already has implementations of several such improved string search algorithms (found in boost/algorithm\\searching/).</p>\n"}], "owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 46809897, "answer_count": 5, "score": 1, "last_activity_date": 1509302128, "creation_date": 1508327741, "question_id": 46809602, "link": "https://stackoverflow.com/questions/46809602/c-search-algorithms-processing-huge-data", "title": "C++ Search Algorithms - Processing Huge Data", "body": "<p>I have a code that searches in files for a string, File(s) can be 1mg of size or 1gig or bigger. </p>\n\n<p>I get the file data with <code>ReadFile()</code> WinAPI and Convert into Hex, Then search for a string (Which is hexed before) in the Converted Data.</p>\n\n<p>I used this code for search (string search):</p>\n\n<pre><code>std::string searchStr = \"48656C6C6FA\"\nstd::string fileData = ToHex(inputString);\n\nif(fileData.find(searchStr, 0) != std::string::npos)\n{\n    std::cout &lt;&lt; FileName;\n}\n</code></pre>\n\n<p>It takes almost <strong>11</strong> sec to search for string in <strong>2900</strong> files. </p>\n\n<p>Is there any other search algorithm or function to be faster? This way (above) sometimes missed the string and not perfectly works.</p>\n"}]