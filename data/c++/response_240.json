[{"tags": ["c++", "architecture"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565826564, "post_id": 57503175, "comment_id": 101475411, "body": "To fully answer this question requires someone with sufficient expertise in both C++ and Matlab. I venture to guess there won&#39;t be a lot of people like that, here on stackoverflow.com. You apparently are trying to figure out how to do something in C++. In which case I would suggest that you reframe, and then <a href=\"https://stackoverflow.com/posts/57503175/edit\">edit</a> your question in terms of C++ terms only, without any mention of Matlab. Describe what you are trying to do in C++, and explain exactly what your specific question is, regarding the C++ programming language."}, {"owner": {"reputation": 11, "user_id": 11929336, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3agRzGt1ko8/AAAAAAAAAAI/AAAAAAAAAE0/s-b788Sy6Lo/photo.jpg?sz=128", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/11929336/jeremy"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565827175, "post_id": 57503175, "comment_id": 101475524, "body": "Thanks for the advice @SamVarshavchik, I&#39;ll try to reframe..."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11929336, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3agRzGt1ko8/AAAAAAAAAAI/AAAAAAAAAE0/s-b788Sy6Lo/photo.jpg?sz=128", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/11929336/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1565996880, "creation_date": 1565996880, "answer_id": 57532024, "question_id": 57503175, "link": "https://stackoverflow.com/questions/57503175/c-architecture-for-compile-time-array-dimensionality-and-named-indexing/57532024#57532024", "title": "C++ architecture for compile-time array dimensionality and named indexing", "body": "<p>I ended up getting most of the way there using template meta-programming... [see below]</p>\n\n<p>I'd like to find a way to add the state to <code>state_enum</code> and define its corresponding <code>set_state</code> struct at the same time ie:</p>\n\n<p><code>add_state(quaternion,{0,0,0,1},{1,1,1})</code></p>\n\n<p>just for cleanliness and to prevent one happening without the other... if anyone has ideas on how to do this (preferably without using <code>__COUNTER__</code> or boost), let me know. Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct state_enum{\n    enum{quaternion,position,last};\n};\n\ntemplate &lt;int state_num&gt; struct set_state{\n    static constexpr double x0[] = {};\n    static constexpr double sx0[] = {};\n};\n\ntemplate &lt;&gt; struct set_state&lt;state_enum::quaternion&gt;{\n    static constexpr double x0[] = {0,0,0,1};\n    static constexpr double sx0[] = {1,1,1};\n};\n\ntemplate &lt;&gt; struct set_state&lt;state_enum::position&gt;{\n    static constexpr double x0[] = {0,0,0};\n    static constexpr double sx0[] = {2,2,2};\n};\n\ntemplate &lt;int state_num&gt; struct state{\n\n    enum{\n        m_x  = sizeof(set_state&lt;state_num&gt;::x0)/sizeof(set_state&lt;state_num&gt;::x0[0]),\n        m_dx = sizeof(set_state&lt;state_num&gt;::sx0)/sizeof(set_state&lt;state_num&gt;::sx0[0])\n    };\n    enum{\n        m_x_cummulative = state&lt;state_num-1&gt;::m_x_cummulative+m_x,\n        m_dx_cummulative=state&lt;state_num-1&gt;::m_dx_cummulative+m_dx,\n        i_x0=state&lt;state_num-1&gt;::m_x_cummulative,\n        i_dx0=state&lt;state_num-1&gt;::m_dx_cummulative,\n        i_x1=state&lt;state_num-1&gt;::m_x_cummulative+m_x-1,\n        i_dx1=state&lt;state_num-1&gt;::m_dx_cummulative+m_dx-1\n    };\n};\n\ntemplate &lt;&gt; struct state&lt;-1&gt;{\n    enum{m_x = 0, m_dx=0};\n    enum{m_x_cummulative = 0, m_dx_cummulative=0, i_x0 = 0, i_dx0=0, i_x1 = 0, i_dx1=0};\n};\n\nint main(int argc, const char * argv[]) {\n\n    std::cout &lt;&lt; \"Summary of model indexing and dimensions...\\n\\n\";\n    std::printf(\"%-32s %02i\\n\",\"quaternion  first state index\",state&lt;state_enum::quaternion&gt;::i_x0);\n    std::printf(\"%-32s %02i\\n\",\"quaternion  final state index\",state&lt;state_enum::quaternion&gt;::i_x1);\n    std::printf(\"%-32s %02i\\n\",\"position    first state index\",state&lt;state_enum::position&gt;::i_x0);\n    std::printf(\"%-32s %02i\\n\",\"position    final state index\",state&lt;state_enum::position&gt;::i_x1);\n    std::printf(\"%-32s %02i\\n\",\"full state vector dimensionality\",state&lt;state_enum::last&gt;::m_x_cummulative);\n    std::cout &lt;&lt; \"\\n\";\n    std::printf(\"%-32s %02i\\n\",\"quaternion  first error index\",state&lt;state_enum::quaternion&gt;::i_dx0);\n    std::printf(\"%-32s %02i\\n\",\"quaternion  final error index\",state&lt;state_enum::quaternion&gt;::i_dx1);\n    std::printf(\"%-32s %02i\\n\",\"position    first error index\",state&lt;state_enum::position&gt;::i_dx0);\n    std::printf(\"%-32s %02i\\n\",\"position    final error index\",state&lt;state_enum::position&gt;::i_dx1);\n    std::printf(\"%-32s %02i\\n\",\"full error vector dimensionality\",state&lt;state_enum::last&gt;::m_dx_cummulative);\n    std::cout &lt;&lt; \"\\n\\n\";\n\n    return 0;\n}\n\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11929336, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3agRzGt1ko8/AAAAAAAAAAI/AAAAAAAAAE0/s-b788Sy6Lo/photo.jpg?sz=128", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/11929336/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565996880, "creation_date": 1565824902, "last_edit_date": 1565828814, "question_id": 57503175, "link": "https://stackoverflow.com/questions/57503175/c-architecture-for-compile-time-array-dimensionality-and-named-indexing", "title": "C++ architecture for compile-time array dimensionality and named indexing", "body": "<p>I can work with code in C++, but it's not where I spend most of my time. I usually work in another language, where, over the course of my career, I have put together a well defined architecture for building predictor/corrector (e.g Kalman filter) type algorithms that are easily maintained and modified. For the sake of a ground up deployment of a recently designed filter, <strong>I am hoping to replicate this architecture within a C++ framework.</strong> Hopefully, we can get the same level of extensibility built into the deployed product, so I don't need to keep jumping back-and-forth to another language whenever I want to modify the model being used by the filter.</p>\n\n<p>The idea here is that we're going to have an array that contains a bunch of different information about the state of a given system. Let's say, for example, we have a an object with a position and orientation in 3D... We'll use a quaternion for the orientation, but the specifics of that aren't super important. </p>\n\n<p>Here's some pseudo-code to demonstrate what I'm trying to accomplish:</p>\n\n<pre><code>function build_model()\n\n    model.add_state('quaternion',[0;0;0;1],[1;1;1]);\n    model.add_state('position',[0;0;0],[10;10;10]);\n\n    model.add_input('velocity',[0;0;0]);\n    model.add_input('angular_rate',[0;0;0]);\n\n    model.add_noise('velocity_noise',[1;1;1]);    \n    model.add_noise('angular_rate_noise',0.01*[1;1;1]);\n\nend\n</code></pre>\n\n<p>where the above have the form:</p>\n\n<pre><code>add_state(state_name, initial_state_estimate, init_error_std_deviation_estimate)\n\nadd_input(input_name, initial_input_value)\n\nadd_noise(noise_name, noise_std_deviation)\n</code></pre>\n\n<p>After calling build_model() happens, I end up with a bunch of information about the estimator.</p>\n\n<ul>\n<li>The state space is of dimension 7</li>\n<li>The state error space is of dimension 6</li>\n<li>The input vector is of dimension 6</li>\n<li>The \"process noise\" vector is of dimension 6</li>\n</ul>\n\n<p>Further (indexed from 0), I have some arrays, such that:</p>\n\n<ul>\n<li>state[0:3] holds the quaternion</li>\n<li><p>state[4:6] holds the position</p></li>\n<li><p>state_err[0:2] holds quaternion error</p></li>\n<li><p>state_err[3:5] holds position error</p></li>\n<li><p>input[0:2] holds velocity</p></li>\n<li><p>input[3:5] holds angular_rate</p></li>\n<li><p>process_noise[0:2] holds velocity noise</p></li>\n<li>process_noise[3:5] holds angular rate noise</li>\n</ul>\n\n<p>... but, I don't want a bunch of hard-coded indices... in fact, once the model is built, the rest of the code should be designed to be completely agnostic to the positions/dimensions/etc of the variables/model/state/error-space etc.</p>\n\n<p>Since the estimator and the model don't really care about each other, I try to keep them encapsulated... i.e. the estimator just has state/error/noise of known dimensions and processes it with functions of a generic format, and then the model specific stuff is presented in the appropriate format. This, unfortunately, makes using an indexed array (rather than a struct or something) preferable.</p>\n\n<p><strong>Essentially what I'm looking for, is a pre-compiler way to associate names (like a structure) and indices (like an array) with the same data... ideally building it up piece by piece using simple language as shown above, to a final dimension, determined by the pre-compiler based on the model definition, to be used for defining the size of various arrays within the estimator runtime algorithm.</strong> </p>\n\n<p>I'm not looking for someone to do this for me, but I'd love a push in the right direction. Good architecture early pays dividends in the long run, so I'm willing to invest some time to get it right.</p>\n\n<p>So, a couple of things I've thought about:</p>\n\n<p>There are definitely ways to do this at run-time with dynamic memory and things like std:vector, structures, enums, and so forth. But, since the deployed version of this is going to be running in real-time, performance is an issue... besides, all of this stuff shouldn't need to happen at run-time anyway. If we had sufficiently sophisticated precompiler, it could just calculate all of this out, define some constants/macros/whatever to manipulate the model by name while using indices behind the scenes... unfortunately, fancy precompiler stuff is a pretty niche area that I have little experience with.</p>\n\n<p>It seems like template meta-programming and/or macros might be a way to go, but I'm hesitant to dive head-first into that without guidance, and I recognize that this is shady at best in terms of modern software design.</p>\n\n<p>I could always write code to write the C++ code for me... i.e. spit out a bunch of #defines or enums for the indices by name, as well as the dimensionality of the model/estimator components, and just copy paste this into the C++ code... but that feels wrong for different reasons. On the other hand, that's one way to get a \"sufficiently sophisticated pre-compiler\".</p>\n\n<p>Giving up on the compile-time dimensioning of my arrays would also solve the problem, but since the all of this is constant once computed, run-time seems like the wrong place for it...</p>\n\n<p>So, is there an elegant solution out there? I'd hate to just brute force this, but I don't see a clear alternative. Also, much of the above may be WAY OFF for any number of reasons... apologies if so, and I appreciate any input you might have :-)</p>\n"}, {"tags": ["c++", "virtual-functions", "vtable", "pure-virtual"], "comments": [{"owner": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "reply_to_user": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 1, "creation_date": 1565824641, "post_id": 57503135, "comment_id": 101475082, "body": "@iz_  According to this example, it can be implemented in the base class <a href=\"https://en.cppreference.com/book/intro/abstract_classes\" rel=\"nofollow noreferrer\">en.cppreference.com/book/intro/abstract_classes</a>"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1565824761, "post_id": 57503135, "comment_id": 101475098, "body": "@TerenceChow My bad, then. However, the base class version of the function will never be called implicitly."}], "answers": [{"comments": [{"owner": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 0, "creation_date": 1565825333, "post_id": 57503200, "comment_id": 101475197, "body": "So if you did not have any casting to the parent, and simply called <code>Child().pure()</code> in main, would a compiler be smart enough to simply do away with the vtable?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "edited": false, "score": 2, "creation_date": 1565826041, "post_id": 57503200, "comment_id": 101475320, "body": "@TerenceChow The vtable would still be present in the (temporary) <code>Child()</code> object, but the function call to <code>pure</code> could be made without using the vtable because the full object type is known."}, {"owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "edited": false, "score": 0, "creation_date": 1565826078, "post_id": 57503200, "comment_id": 101475323, "body": "Godbold says yes: <a href=\"https://godbolt.org/z/DVr546\" rel=\"nofollow noreferrer\">godbolt.org/z/DVr546</a>. The whole temporary object is optimized away."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1565827019, "post_id": 57503200, "comment_id": 101475497, "body": "devirtualization is gaining traction thanks to <code>final</code>, so it&#39;s not entirely accurate to say they&#39;re resolved at runtime fullstop."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1565828548, "post_id": 57503200, "comment_id": 101475740, "body": "The vtable isn&#39;t in the object. A pointer to to is in the object."}], "tags": [], "owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "is_accepted": true, "score": 0, "last_activity_date": 1565826365, "last_edit_date": 1565826365, "creation_date": 1565825118, "answer_id": 57503200, "question_id": 57503135, "link": "https://stackoverflow.com/questions/57503135/are-pure-virtual-functions-early-binding-compile-time-or-late-binding-run-tim/57503200#57503200", "title": "Are pure virtual functions early binding (compile time) or late binding (run time)?", "body": "<p>As you already found out, virtual functions are resolved at runtime. You need a vtable for this situation:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Parent {\n public:\n  virtual void pure() = 0;\n};\n\nclass Child : public Parent {\n public:\n  void pure() {}\n};\n\nvoid do_pure(Parent&amp; x){\n   x.pure();\n}\n\nint main(){\n  do_pure(Child());\n}\n</code></pre>\n\n<p>The <code>Child()</code> instance is cast to a <code>Parent</code> when it is passed to <code>do_pure</code>. The vtable is then required for the line <code>x.pure()</code> to be able to locate the memory adress of the implementation of <code>pure()</code>.</p>\n\n<p>If <code>Child</code> wouldn't implement <code>do_pure</code>, this wouldn't compile, because the line <code>x.pure()</code> could only crash.</p>\n"}, {"comments": [{"owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "edited": false, "score": 0, "creation_date": 1565826534, "post_id": 57503258, "comment_id": 101475403, "body": "It cannot be marked as final in the base class, as there are no pure final virtual functions. Thus a class that inherits from the base could override it."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "edited": false, "score": 0, "creation_date": 1565826958, "post_id": 57503258, "comment_id": 101475486, "body": "@Chronial It may be weird, but standard doesn&#39;t forbid pure virtual final functions (see syntax #1 in <a href=\"https://en.cppreference.com/w/cpp/language/final\" rel=\"nofollow noreferrer\">cppreference</a> ). What I meant is that first class that provides an implementation for the pure virtual function (probably the <code>Child</code>), also marks it as <code>final</code>, I&#39;ll try to clarify that more."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1565827053, "post_id": 57503258, "comment_id": 101475502, "body": "devirtualization is gaining traction thanks to <code>final</code>, so it&#39;s not entirely accurate to say they&#39;re &quot;all&quot; late binding."}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 0, "last_activity_date": 1565827110, "last_edit_date": 1565827110, "creation_date": 1565825656, "answer_id": 57503258, "question_id": 57503135, "link": "https://stackoverflow.com/questions/57503135/are-pure-virtual-functions-early-binding-compile-time-or-late-binding-run-tim/57503258#57503258", "title": "Are pure virtual functions early binding (compile time) or late binding (run time)?", "body": "<p>All <code>virtual</code> functions need to have late binding.</p>\n\n<p>Imagine the following class hierarchy:</p>\n\n<pre><code>struct Base {\n    virtual void foo() = 0;\n    virtual ~Base() = default;\n};\n\nstruct Child: public Base {\n    void foo() override { std::cout &lt;&lt; \"I'm good!\"; }\n};\n\nstruct Grandchild: public Child {\n    void foo() final { std::cout &lt;&lt; \"But I'm better!\"; }\n};\n\nvoid fooCaller(const Base&amp; b) {\n    //Which foo() do I call here? Child::foo() or Grandchild::foo()?\n    b.foo();\n}\n\nint main() {\n    Grandchild g;\n    fooCaller(g);\n}\n</code></pre>\n\n<p>A <code>virtual</code> function remains virtual in <em>all</em> derived classes, which means you can override is anywhere you want (unless it's declared <code>final</code> at some point). Compiler cannot know which version will be in use.</p>\n\n<p>In theory, if we have <code>virtual void foo() = 0;</code> in <code>Base</code> and <code>void foo() final;</code> in <code>Child</code>, compiler could notice that there is only one possible implementation of <code>foo</code> and optimize it out of the vtable, but I never heard about any compiler doing that.<br>\nAnd such use case kind of defeats the purpose of pure virtual functions.</p>\n"}], "owner": {"reputation": 9207, "user_id": 1455043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/be8dfeb32eb4db2ac21bc9a95b23dd68?s=128&d=identicon&r=PG", "display_name": "Terence Chow", "link": "https://stackoverflow.com/users/1455043/terence-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 57503200, "answer_count": 2, "score": 0, "last_activity_date": 1565864495, "creation_date": 1565824428, "last_edit_date": 1565864495, "question_id": 57503135, "link": "https://stackoverflow.com/questions/57503135/are-pure-virtual-functions-early-binding-compile-time-or-late-binding-run-tim", "title": "Are pure virtual functions early binding (compile time) or late binding (run time)?", "body": "<p>I see in various online resources that <code>virtual functions</code> are runtime bound.</p>\n\n<p>However a <code>pure virtual function</code> must be implemented in a derived class. So, it doesn't make sense to me why a <code>vtable</code> would be needed in that scenario. Therefore I was wondering if a <code>pure virtual function</code> is bound at runtime or compile time. </p>\n\n<p>If it is bound at runtime, is it just for the case that a <code>pure virtual function</code> has an implementation and the derived class calls the base implementation? What happens if no implementation is provided? Does the compiler then <code>inline</code> the implementation?</p>\n"}, {"tags": ["c++", "multithreading", "stl"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1565823731, "post_id": 57503048, "comment_id": 101474921, "body": "Don&#39;t <code>join</code> a thread in a loop. <code>join</code> blocks until the thread completes, and this kinda defeats the point. Store the threads (the <code>vector</code>&#39;s usually pretty good)  and <code>join</code> them later, outside the loop."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1565824110, "post_id": 57503048, "comment_id": 101474985, "body": "Note: <a href=\"https://stackoverflow.com/a/27484157/4581301\">Mike Seymour&#39;s answer here using <code>emplace_back</code></a> is a bit more direct than what&#39;s done in the duplicate. Depending on the compiler, might be faster, too."}], "owner": {"reputation": 19, "user_id": 11390517, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L1z54Z4sXrk/AAAAAAAAAAI/AAAAAAAAAAc/fSFNalIjnwY/photo.jpg?sz=128", "display_name": "Yevheniy Sierhieiev", "link": "https://stackoverflow.com/users/11390517/yevheniy-sierhieiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1565823953, "answer_count": 0, "score": 0, "last_activity_date": 1565823601, "creation_date": 1565823601, "question_id": 57503048, "link": "https://stackoverflow.com/questions/57503048/the-best-efficiency-of-creating-temporary-threads-in-a-loop", "closed_reason": "Duplicate", "title": "The best efficiency of creating temporary threads in a loop", "body": "<p>I still can\u2019t find the answer.\nI have an array of objects. I need them to perform the function in parallel. The problem is that I'm not sure if the created thread will continue to work at the next iteration. Will this code work correctly?</p>\n\n<pre><code> std::vector&lt;SomeObject&gt; Objects;\n ...\n for( auto it : Objects)\n {\n  std::thread tr(&amp;ObjectClass::SomeFunction, it);\n  tr.join();\n }\n</code></pre>\n\n<p>Or do I need to use this version?</p>\n\n<pre><code>std::vector&lt;SomeObject&gt; Objects;\n...\nstd::set&lt;thread&gt; ThreadSet;\nfor( auto it : Objects)\n{\n ThreadSet.insert(std::thread(&amp;ObjectClass::SomeFunction, it));\n ThreadSet.end().join();\n}\nThreadSet.clear()\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 6, "creation_date": 1565822955, "post_id": 57502957, "comment_id": 101474781, "body": "Have you checked a <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/reset\" rel=\"nofollow noreferrer\">reference</a>?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1565826011, "post_id": 57502957, "comment_id": 101475313, "body": "Signal handlers are very constrained as to what they can do reliably.  I&#39;m pretty sure I/O is not allowed.  (I know this is just a small example program, but if someone did <i>Monkey C++, Monkey Doo-doo</i> programming, they may form a misunderstanding.)"}, {"owner": {"reputation": 43, "user_id": 10127279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19614afe38c88f013130a59dc1ef12de?s=128&d=identicon&r=PG&f=1", "display_name": "RAR", "link": "https://stackoverflow.com/users/10127279/rar"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1565826492, "post_id": 57502957, "comment_id": 101475396, "body": "@Eljay What do you mean by I/O is not allowed? I ran the program and it works, are you saying it&#39;s bad style?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1565826681, "post_id": 57502957, "comment_id": 101475438, "body": "Even if the code is invalid you often shouldn&#39;t expect an error since many things in C++ exhibit undefined behavior which means that anything can happen, including your program appearing to work fine."}, {"owner": {"reputation": 43, "user_id": 10127279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19614afe38c88f013130a59dc1ef12de?s=128&d=identicon&r=PG&f=1", "display_name": "RAR", "link": "https://stackoverflow.com/users/10127279/rar"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1565827017, "post_id": 57502957, "comment_id": 101475495, "body": "@AlexanderZhang I see, thanks for clarifying. I looked at this reference when I wrote this program (<a href=\"http://www.cplusplus.com/reference/csignal/signal/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/csignal/signal</a>) and it does not mention that I/O is not allowed in a signal handler. Can you recommend any resources about signal handling which will explain details like this?"}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 1, "creation_date": 1565829534, "post_id": 57502957, "comment_id": 101475866, "body": "@RAR <a href=\"https://en.cppreference.com/w/cpp/utility/program/signal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/program/signal</a> discusses the limitations on signal handlers. They are very extensive. In particular, almost all standard library functions are forbidden, including both <code>operator&lt;&lt;(std::ostream)</code> and <code>std::unique_ptr::reset</code>. Until C++17, referring to <code>std::cout</code> or your <code>mc</code> object would also have been undefined behaviour - signals weren&#39;t allowed to access static variables unless they were atomic or volatile!"}], "answers": [{"tags": [], "owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "is_accepted": false, "score": 5, "last_activity_date": 1565823093, "creation_date": 1565823093, "answer_id": 57502995, "question_id": 57502957, "link": "https://stackoverflow.com/questions/57502957/what-happens-when-reset-is-called-by-a-unique-ptr-twice/57502995#57502995", "title": "What happens when reset() is called by a unique_ptr twice?", "body": "<p>See <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/reset\" rel=\"noreferrer\">the reference of reset()</a>:</p>\n\n<blockquote>\n  <ol>\n  <li>Saves a copy of the current pointer <code>old_ptr = current_ptr</code></li>\n  <li>Overwrites the current pointer with the argument <code>current_ptr = ptr</code></li>\n  <li>If the old pointer was non-empty, deletes the previously managed object <code>if(old_ptr) get_deleter()(old_ptr)</code>.</li>\n  </ol>\n</blockquote>\n\n<p>So calling <code>reset()</code> a second time on a <code>unique_ptr</code> does nothing, since the old pointer is then empty. And the new pointer (also empty) is the same as the old pointer.</p>\n"}], "owner": {"reputation": 43, "user_id": 10127279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19614afe38c88f013130a59dc1ef12de?s=128&d=identicon&r=PG&f=1", "display_name": "RAR", "link": "https://stackoverflow.com/users/10127279/rar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1565823177, "creation_date": 1565822710, "last_edit_date": 1565823177, "question_id": 57502957, "link": "https://stackoverflow.com/questions/57502957/what-happens-when-reset-is-called-by-a-unique-ptr-twice", "title": "What happens when reset() is called by a unique_ptr twice?", "body": "<p>I have the following program where I call mc.reset() twice. I thought this would give me an error but this works without errors.</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;csignal&gt; \n#include &lt;memory&gt;  // for unique pointer\nusing namespace std; \n\nstd::unique_ptr&lt;int&gt; mc;\n\nvoid signal_handler( int signal_num ) { \n    cout &lt;&lt; \"The interrupt signal is (\" &lt;&lt; signal_num &lt;&lt; \"). \\n\"; \n\n    mc.reset();\n    mc.reset();\n\n    // terminate program   \n    exit(signal_num);   \n} \n\nint main () {\n    mc.reset (new int); \n    *mc = 5;\n\n    // Press Control + c to raise SIGINT\n    signal (SIGINT, signal_handler);\n\n    while(true) \n        cout &lt;&lt; \"Hello...\" &lt;&lt; endl; \n    return 0;\n}\n</code></pre>\n\n<p>I used valgrind to check for memory leaks and found none:</p>\n\n<pre><code>==5467== \n==5467== HEAP SUMMARY:\n==5467==     in use at exit: 0 bytes in 0 blocks\n==5467==   total heap usage: 3 allocs, 3 frees, 73,732 bytes allocated\n==5467== \n==5467== All heap blocks were freed -- no leaks are possible\n==5467== \n==5467== For counts of detected and suppressed errors, rerun with: -v\n==5467== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>What is actually happening when reset is called? Why am I able to call it twice without any problems? </p>\n"}, {"tags": ["c++", "variables", "if-statement"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1565820358, "post_id": 57502622, "comment_id": 101474222, "body": "The title is there to summarize your problem, not state that you&#39;re having a problem."}, {"owner": {"reputation": 2400, "user_id": 1123685, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbe89bfc6b7f4a6f83d222baa20f51ee?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1123685/brad"}, "edited": false, "score": 0, "creation_date": 1565820362, "post_id": 57502622, "comment_id": 101474224, "body": "If you&#39;re asking about an error, please provide the compiler / program output.  Don&#39;t require your readers to guess.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "is_accepted": false, "score": 2, "last_activity_date": 1565820354, "creation_date": 1565820354, "answer_id": 57502658, "question_id": 57502622, "link": "https://stackoverflow.com/questions/57502622/reference-to-overloaded-function-could-not-be-resolved-did-you-mean-to-call-it/57502658#57502658", "title": "reference to overloaded function could not be resolved; did you mean to call it?", "body": "<p>The following line is not well-formed:</p>\n\n<pre><code>double discounted_price = discount_rate * original_price&lt;&lt;endl;\n</code></pre>\n\n<p><code>std::endl</code> is used with <code>std::cout</code> to end a line and flush the output. You can only really invoke <code>operator&lt;&lt;(std::endl)</code> on an output stream, not on a <code>double</code>. In fact, there is no real meaning to trying to attach an end-of-line to a numerical value in this way.</p>\n\n<p>Do the following instead:</p>\n\n<pre><code>double discounted_price = discount_rate * original_price;\ncout &lt;&lt; \"discounted_price: \"&lt;&lt; discounted_price &lt;&lt; endl;\n</code></pre>\n\n<p>This computes the discounted price, and then prints it with <code>std::endl</code> used to add a newline and flush the standard output stream.</p>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 9988199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWaFH.jpg?s=128&g=1", "display_name": "H4ze", "link": "https://stackoverflow.com/users/9988199/h4ze"}, "edited": false, "score": 0, "creation_date": 1565821253, "post_id": 57502660, "comment_id": 101474444, "body": "<code>endl</code> is function, thus the unresolved function type in error."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1565826102, "post_id": 57502660, "comment_id": 101475326, "body": "<code>endl</code> adds a newline <b>and a flush</b>. Inserting <code>\u2019\\n\u2019</code> starts a new line."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 2, "last_activity_date": 1565820367, "creation_date": 1565820367, "answer_id": 57502660, "question_id": 57502622, "link": "https://stackoverflow.com/questions/57502622/reference-to-overloaded-function-could-not-be-resolved-did-you-mean-to-call-it/57502660#57502660", "title": "reference to overloaded function could not be resolved; did you mean to call it?", "body": "<p>Much better but you are still putting <code>endl</code> in the wrong place.</p>\n\n<pre><code>double discounted_price = discount_rate * original_price&lt;&lt;endl;\ncout &lt;&lt; \"discounted_price: \"&lt;&lt; discounted_price;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>double discounted_price = discount_rate * original_price;\ncout &lt;&lt; \"discounted_price: \"&lt;&lt; discounted_price &lt;&lt; endl;\n</code></pre>\n\n<p><code>endl</code> is an output operation, its used to add a newline to your output, it has no place when you are doing calculations.</p>\n"}], "owner": {"reputation": 19, "user_id": 11671869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OTfAKYdYHC8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlNPK_SblB_lV0d35dnfhWjYdpfQ/mo/photo.jpg?sz=128", "display_name": "moon na", "link": "https://stackoverflow.com/users/11671869/moon-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "closed_date": 1565863642, "answer_count": 2, "score": -1, "last_activity_date": 1565827276, "creation_date": 1565820140, "last_edit_date": 1565827276, "question_id": 57502622, "link": "https://stackoverflow.com/questions/57502622/reference-to-overloaded-function-could-not-be-resolved-did-you-mean-to-call-it", "closed_reason": "Not suitable for this site", "title": "reference to overloaded function could not be resolved; did you mean to call it?", "body": "<p>Problem desc: The university bookstore has a Kilobyte Day sale every October 24, giving an 8 percent discount on all computer accessory purchases if the price is less than $128, and a 16 percent discount if the price is at least $128. Write a program that asks the cashier for the original price and then prints the discounted price.</p>\n\n<p>I am trying to solve this problem. and I am getting errors in line #24. </p>\n\n<pre><code>\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{ \n    double original_price;\n    double discount_rate;\n    double discount_price;\n\n    cout &lt;&lt; \"Enter Original Price:\" &lt;&lt; endl;\n\n    cin &gt;&gt; original_price;\n\n    //cout &lt;&lt; original_price &lt;&lt; endl;\n\n    if (original_price &lt; 128)\n    {\n        discount_rate = 0.92;\n    }\n    else\n    {\n        discount_rate = 0.84;\n    }\n    double discounted_price = discount_rate * original_price &lt;&lt; endl;\n    cout &lt;&lt; \"discounted_price: \" &lt;&lt; discounted_price;\n\n    return 0;\n}\n</code></pre>\n\n<p>error: reference to overloaded function could not be resolved; did you mean to call it?</p>\n"}, {"tags": ["c++", "gcc", "boost", "compiler-errors"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1565819806, "post_id": 57502492, "comment_id": 101474065, "body": "boost libs usually give a list of compilers they work on . If the intel compiler/version is listed, then it&#39;s a bug and submit it to boost.   If not, submit it to intel.  Workarounds can be hard to find.   For MS often if you search their bug database for the error message you&#39;ll find a workaround, but they&#39;re often not really sensical, since they revolve around a compiler bug... for isntance I had to change is_const_v&lt;T&gt; to is_const&lt;T&gt;::value for a MSVC bug recently.   But there&#39;s no &quot;logic&quot; to be had about why that&#39;s the case without understanding the actual implementation bug involved."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1565823973, "post_id": 57502492, "comment_id": 101474964, "body": "Easy workaround in this case is to use <code>std::to_string</code>"}, {"owner": {"reputation": 1088, "user_id": 2343779, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/029cf86907c4176eaaa833dda677a134?s=128&d=identicon&r=PG", "display_name": "stix", "link": "https://stackoverflow.com/users/2343779/stix"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1565990803, "post_id": 57502492, "comment_id": 101528618, "body": "@M.M That&#39;s only a workaround if you have access to a c++17 compiler ;P"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1565995017, "post_id": 57502492, "comment_id": 101529503, "body": "@stix It was added in C++11"}, {"owner": {"reputation": 1088, "user_id": 2343779, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/029cf86907c4176eaaa833dda677a134?s=128&d=identicon&r=PG", "display_name": "stix", "link": "https://stackoverflow.com/users/2343779/stix"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1565995411, "post_id": 57502492, "comment_id": 101529585, "body": "@M.M Not according to gcc 4.8.5"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1565996950, "post_id": 57502492, "comment_id": 101529866, "body": "@stix it&#39;s part of the standard library, not the compiler per se. You might have a buggy implementation, <a href=\"https://stackoverflow.com/questions/12975341/to-string-is-not-a-member-of-std-says-g-mingw\">see here</a>"}, {"owner": {"reputation": 1088, "user_id": 2343779, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/029cf86907c4176eaaa833dda677a134?s=128&d=identicon&r=PG", "display_name": "stix", "link": "https://stackoverflow.com/users/2343779/stix"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1566229753, "post_id": 57502492, "comment_id": 101581859, "body": "@M.M That&#39;s.... weird... Using Intel std::to_string is present, but using gcc 4.8.5, it isn&#39;t. Both are using --std=c++11..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1566254997, "post_id": 57502492, "comment_id": 101591126, "body": "@stix as I said, you&#39;re using a buggy port of gcc"}, {"owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "edited": false, "score": 0, "creation_date": 1581794035, "post_id": 57502492, "comment_id": 106557627, "body": "I raised this issue upstream at <a href=\"https://github.com/boostorg/type_traits/issues/138\" rel=\"nofollow noreferrer\">github.com/boostorg/type_traits/issues/138</a>"}], "owner": {"reputation": 1088, "user_id": 2343779, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/029cf86907c4176eaaa833dda677a134?s=128&d=identicon&r=PG", "display_name": "stix", "link": "https://stackoverflow.com/users/2343779/stix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565819339, "creation_date": 1565819339, "question_id": 57502492, "link": "https://stackoverflow.com/questions/57502492/why-does-the-following-program-using-boost-lexical-cast-fail-on-the-intel-compil", "title": "Why does the following program using boost lexical cast fail on the Intel Compiler but not gcc (compiler bug)?", "body": "<p>I have the following very simple program that seems to fail on the Intel compiler but not gcc when using boost::lexical_cast (boost version 1.67.0):</p>\n\n<pre><code>#include &lt;boost/lexical_cast.hpp&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nfloat getSomeNumber()\n{\n  return 10.0;\n}\n\nint main(int argc, char** argv)\n{\n   std::string mystring(\"Hello: \" + boost::lexical_cast&lt;std::string&gt;(getSomeNumber());\n   std::cout &lt;&lt; mystring &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>When compiling, Intel returns the following error:</p>\n\n<pre><code> /boost/1.67.0/include/boost/type_traits/is_complete.hpp(45): warning #70: incomplete type is not allowed\n\n       ok_tag&lt;sizeof(T)&gt; check_is_complete(int);\n       detected during ....\n       ...\n\n/boost/1.67.0/include/boost/type_traits/is_complete.hpp(51): error: template instantiation resulted in unexpected function type of \"boost::detail::ok_tag&lt;1U&gt; (int)\" (the meaning of a name may have changed since the template declaration -- the type of the template is \"boost::detail::ok_tag&lt;sizeof(T)&gt; (int)\")\n       ...\n\n     detected during: \n        instantiation of \"boost::detail::check_is_complete\" based on template argument &lt;void&gt; at line 51\n        instantiation of class \"boost::is_complete&lt;T&gt; [with T=void]\" at line 484 of \"/Path/to/boost/include/boost/type_traits/is_convertible.hpp\"\n        ...\n        instantiation of \"Target boost::lexical_cast&lt;Target, Source&gt;(const Source &amp;) [with Target=std::string, Source=float]\" at line 11 of \"boostTest.cc\"\n</code></pre>\n\n<p>The best I can tell from this error is it seems like the compiler can't complete the template resolution, but then the very end it seems like it does? I tried compiling the same thing under gcc (version 4.8.5) and it worked fine. This code also previously worked fine under boost 1.64.0 with both gcc and Intel. </p>\n\n<p><strong><em>Is this a bug in the Intel Compiler, or perhaps a bug in boost? Is there a way to modify my program as a workaround?</em></strong></p>\n\n<p><strong>Software versions</strong></p>\n\n<p>gcc: 4.8.5</p>\n\n<p>Intel Compiler: 2015.3.187</p>\n\n<p>Boost: 1.67.0</p>\n\n<p>OS: RHEL 7.5 (Maipo)</p>\n\n<p><strong>Compile line:</strong></p>\n\n<p>icpc/gcc --std=c++11 boostTest.cc -o boostTest -Ipath/to/boost/include -lstdc++</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 8, "creation_date": 1565819135, "post_id": 57502452, "comment_id": 101473883, "body": "Use <code>std::vector</code> instead of arrays.It will make your life a lot easier."}, {"owner": {"reputation": 710, "user_id": 2165772, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9abde6d46310cd882aa4bfdfd833f4f?s=128&d=identicon&r=PG", "display_name": "Arne Fischer", "link": "https://stackoverflow.com/users/2165772/arne-fischer"}, "edited": false, "score": 1, "creation_date": 1565819222, "post_id": 57502452, "comment_id": 101473919, "body": "or even std::array it also exists nowadays. C arrays make your live unnecessarily hard. If I have to use them I always work with the size as a separate parameter."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1565819294, "post_id": 57502452, "comment_id": 101473940, "body": "If you&#39;re using <code>new[]</code> you&#39;re already missing a large part of what makes modern C++ enjoyable. Make use of Standard Library containers like <code>std::vector</code> or <code>std::array</code> and don&#39;t mess around with manual allocations like this unless you absolutely have to."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1565819498, "post_id": 57502452, "comment_id": 101473991, "body": "The default initialization for a <code>char</code>  is to do nothing. If nothing was expressly written to  <code>v[0]</code>, the odds are against <code>r[0]</code> being 0. if <code>r</code> is <code>NULL</code>, that&#39;s a different test and <code>r[0]</code> would be dereferencing a null pointer. Even <a href=\"https://www.youtube.com/watch?v=bLHL75H_VEM\" rel=\"nofollow noreferrer\">Ol&#39; Hitman Hart knows not to do that.</a>"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565819510, "post_id": 57502452, "comment_id": 101473993, "body": "There is no way in C++ to determine the length of an array from a pointer, of any size. Use a vector instead."}, {"owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "edited": false, "score": 1, "creation_date": 1565821496, "post_id": 57502452, "comment_id": 101474485, "body": "You are allocating memory with new then returning NULL, leaving memory leaks. So move the allocation down a few lines."}, {"owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "edited": false, "score": 0, "creation_date": 1565821823, "post_id": 57502452, "comment_id": 101474561, "body": "With an empty array r[0] will be accessing beyond the array. You shouldn&#39;t do this. Arrays are not null terminated."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565819849, "post_id": 57502500, "comment_id": 101474077, "body": "From the parameters specified in the question I don&#39;t think the intent is to return NULL, but a zero length array."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1565819748, "last_edit_date": 1565819748, "creation_date": 1565819419, "answer_id": 57502500, "question_id": 57502452, "link": "https://stackoverflow.com/questions/57502452/how-to-check-an-empty-array-returned-from-a-function-in-c/57502500#57502500", "title": "How to check an empty array returned from a function in C++", "body": "<p>Don't use <code>if(!r[0])</code> to check if <code>NULL</code> was returned.  You want to compare directly to <code>NULL</code> using <code>if(!r)</code> or <code>if(r == NULL)</code>.  This will tell you if the string is empty.  Doing <code>if(!r[0])</code> when you return <code>NULL</code> is undefined behavior so you definitely want to make sure the address is valid before you try and access what it points to.</p>\n\n<hr>\n\n<p>Another thing to note is that in the case that you return <code>NULL</code>, you function has a memory leak.  You need to move <code>char* v = new char[len];</code> to after you decide if you are going to return <code>NULL</code>.  You could call <code>delete [] v;</code> in the if statement, but that makes the code more brittle.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11929562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2d0ef438dbf247a4bdc1c8fd92d083?s=128&d=identicon&r=PG", "display_name": "beaverTheory", "link": "https://stackoverflow.com/users/11929562/beavertheory"}, "is_accepted": false, "score": 1, "last_activity_date": 1565823741, "last_edit_date": 1565823741, "creation_date": 1565823317, "answer_id": 57503012, "question_id": 57502452, "link": "https://stackoverflow.com/questions/57502452/how-to-check-an-empty-array-returned-from-a-function-in-c/57503012#57503012", "title": "How to check an empty array returned from a function in C++", "body": "<p>There are a few things going on here. Firstly, I would replace that</p>\n\n<pre><code>if((start+len) == start)\n</code></pre>\n\n<p>with just </p>\n\n<pre><code>if(len == 0) // if(!len) works too\n</code></pre>\n\n<p>And also note that you don't need to take the address of an index, so </p>\n\n<pre><code>&amp;c[start] is the same thing as c + start\n</code></pre>\n\n<p>I would read <a href=\"http://www.cplusplus.com/reference/algorithm/copy/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/algorithm/copy/</a> to make sure you understand that the value being passed is an iterator.</p>\n\n<p>But secondly, your char* v = new char[len] statement is invoking undefined behavior. When you call </p>\n\n<pre><code>new char[len];\n</code></pre>\n\n<p>You're merely telling the compiler that you want to give space to a new character array. Remember that std::cout is a function. It is going to detect a char array as a c string. This means that the char array needs to be null terminated. If it's not, you are truly just invoking undefined behavior because you're reading memory on places that have been allocated but not initialized.</p>\n\n<p>When you call</p>\n\n<pre><code>if(!r[0])\n</code></pre>\n\n<p>This doesn't really mean anything at all. r[0] is technically initialized, so it is not a nullptr, but it doesn't have any data in it so it is going to evaluate to true with undefined behavior.</p>\n\n<p>Now, if you want to make this more concrete, I would fill the array with zeros</p>\n\n<pre><code>char* v = new char[len];\nmemset(v, 0, len);\n</code></pre>\n\n<p>Now your char is a truly \"empty\" array. </p>\n\n<p>I think it's just a misunderstanding of what an \"empty\" array actually means.</p>\n\n<p>Finally, don't listen to the guys who say just use std::vector. They're absolutely right, it's better practice, but it's better to understand how those classes work before you pull out the real power of the standard library. Just saying.</p>\n"}], "owner": {"reputation": 311, "user_id": 8665639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1dXbd.png?s=128&g=1", "display_name": "Eyong Kevin Enowanyo", "link": "https://stackoverflow.com/users/8665639/eyong-kevin-enowanyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565858428, "creation_date": 1565819070, "last_edit_date": 1565858428, "question_id": 57502452, "link": "https://stackoverflow.com/questions/57502452/how-to-check-an-empty-array-returned-from-a-function-in-c", "title": "How to check an empty array returned from a function in C++", "body": "<p>I was asked to write a function that accepts a character array, a zero-based start position, and a length.\nIt should return a character array containing length characters (len) starting with the start character of the input array</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;iterator&gt; \n\nusing namespace std;\n\nchar* lengthChar(char c[],int array_len, int start, int len)\n{\n    char* v = new char[len];\n    if(start &lt; 0 || len &gt; array_len || (start + len - 1) &gt;= array_len){\n        return NULL;\n    }\n    if((start + len) == start) \n    {\n        return v;\n    }\n\n    copy(&amp;c[start], &amp;c[len+start], &amp;v[0]);\n\n    return v;\n}\n</code></pre>\n\n<p>My question is when I call my function as </p>\n\n<p><code>char* r = lengthChar(t,3, 1, 0);</code></p>\n\n<p>Normally based on my implementation, it should return a pointer pointing to an empty array. However, I can't seem to verify this. When I do <code>if(!r[0])</code>, it doesn't detect it. I even did</p>\n\n<pre><code>char s[] = {};\nchar* tt = &amp;s[0];\nif(r[0] == *tt)\n</code></pre>\n\n<p>Still nothing. The strange thing is when I <code>cout</code> the value of r[0], nothing is printed. So I don't know what actually is return. How do I verify that it is empty?</p>\n"}, {"tags": ["c++", "visual-studio-code"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1565818180, "post_id": 57502306, "comment_id": 101473586, "body": "Looks like the bug is right here: <b><i>cd &quot;c:\\Users\\dree\\Desktop\\TestRun\\&quot; &amp;&amp; g++ main.cpp -o main &amp;&amp;</i></b> Notice it&#39;s not building <code>test.cpp</code> you probably have to show your <code>json</code> files to get help."}, {"owner": {"reputation": 109, "user_id": 11929350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99af8380c3bd63ffd8f2dc786309e12?s=128&d=identicon&r=PG&f=1", "display_name": "dree", "link": "https://stackoverflow.com/users/11929350/dree"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1565818430, "post_id": 57502306, "comment_id": 101473666, "body": "@drescherjm Do you mean settings.json?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565818981, "post_id": 57502306, "comment_id": 101473835, "body": "@dree No it means you have to add the file test.cpp to your VS Code project. VS Code (like any other IDE) has to be told which files to compile, it doesn&#39;t work it out for itself."}, {"owner": {"reputation": 109, "user_id": 11929350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99af8380c3bd63ffd8f2dc786309e12?s=128&d=identicon&r=PG&f=1", "display_name": "dree", "link": "https://stackoverflow.com/users/11929350/dree"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565819519, "post_id": 57502306, "comment_id": 101473996, "body": "@john I know that, but is there a way to fix the Code Runner extension to run all .cpp files in the directory of the file being ran? <code>&quot;g++ *.cpp -o $fileNameWithoutExt &amp;&amp; .&#47;$fileNameWithoutExt.exe&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 11929350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99af8380c3bd63ffd8f2dc786309e12?s=128&d=identicon&r=PG&f=1", "display_name": "dree", "link": "https://stackoverflow.com/users/11929350/dree"}, "edited": false, "score": 0, "creation_date": 1565819333, "post_id": 57502454, "comment_id": 101473951, "body": "Is there a way to change this for the Code Runner extension to include all cpp files? As an example <code>&quot;g++ *.cpp -o $fileNameWithoutExt &amp;&amp; .&#47;$fileNameWithoutExt.exe&quot;</code>. There is a setting for code-runner called executorMapByFileExtension, but no idea how to use it."}], "tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1565819083, "creation_date": 1565819083, "answer_id": 57502454, "question_id": 57502306, "link": "https://stackoverflow.com/questions/57502306/running-c-with-vstudio-code-using-coderunner-extension/57502454#57502454", "title": "Running C++ with VStudio Code using CodeRunner extension", "body": "<p>As pointed out by drescherjm, the problem is in the arguments passed to the compiler: the output shows that the command that was used is <code>g++ main.cpp -o main</code>. There's no reference to test.cpp!</p>\n\n<p>You probably think that telling g++ to compile main.cpp is enough, because it includes test.h and <em>obviously</em> the definition of whatever is in test.h can be found in test.cpp. Unfortunately, it is obvious to you but not to the compiler. The fact that files with the same name but different extension (like test.cpp and test.h) are related is very convenient for us programmers, but the compiler doesn't know it. All it knows is that test.h declares a class called MyClass, but it has no clue that its definition is inside test.cpp. To solve it, you must call g++ like this:</p>\n\n<pre><code>g++ main.cpp test.cpp -o main\n</code></pre>\n\n<p>That is, <strong>you must explicitly list all the source files that must be used to build main.</strong></p>\n\n<p>That's why replacing <code>#include \"test.h\"</code> with <code>#include \"test.cpp\"</code> works: because this way you are telling the compiler to take the content of test.cpp and paste it at the top of main.cpp, so that the definition of MyClass is available. But this is a code smell: if you are including a .cpp file, you can be pretty sure you are doing something wrong. The compiler doesn't care about the extension, .h or .cpp is the same to it, that's why it works. But you should avoid it.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 11929350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99af8380c3bd63ffd8f2dc786309e12?s=128&d=identicon&r=PG&f=1", "display_name": "dree", "link": "https://stackoverflow.com/users/11929350/dree"}, "is_accepted": false, "score": 2, "last_activity_date": 1565820050, "creation_date": 1565820050, "answer_id": 57502607, "question_id": 57502306, "link": "https://stackoverflow.com/questions/57502306/running-c-with-vstudio-code-using-coderunner-extension/57502607#57502607", "title": "Running C++ with VStudio Code using CodeRunner extension", "body": "<p>Solved by changing a setting for Code Runner extension;</p>\n\n<p>Added this into my settings.json file;</p>\n\n<pre><code>\"code-runner.executorMap\": {\n        \"cpp\": \"cd $dir &amp;&amp; g++ *.cpp -o $fileNameWithoutExt &amp;&amp; $fileNameWithoutExt.exe\"\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15498487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58cbdd98077a688b447858f54635c6cb?s=128&d=identicon&r=PG&f=1", "display_name": "GotItFromEbay", "link": "https://stackoverflow.com/users/15498487/gotitfromebay"}, "is_accepted": false, "score": 0, "last_activity_date": 1616920450, "creation_date": 1616920450, "answer_id": 66839651, "question_id": 57502306, "link": "https://stackoverflow.com/questions/57502306/running-c-with-vstudio-code-using-coderunner-extension/66839651#66839651", "title": "Running C++ with VStudio Code using CodeRunner extension", "body": "<p>Just wanted to post the thing that helped me. I tried dree's answer, but kept getting errors</p>\n<p>Edit the code-runner executor map settings, but use this:</p>\n<pre><code>&quot;cpp&quot;: &quot;cd $dir &amp;&amp; g++ -o $fileNameWithoutExt *.cpp &amp;&amp; $dir$fileNameWithoutExt&quot;,\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 11929350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99af8380c3bd63ffd8f2dc786309e12?s=128&d=identicon&r=PG&f=1", "display_name": "dree", "link": "https://stackoverflow.com/users/11929350/dree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4816, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1616920450, "creation_date": 1565818076, "last_edit_date": 1565819659, "question_id": 57502306, "link": "https://stackoverflow.com/questions/57502306/running-c-with-vstudio-code-using-coderunner-extension", "title": "Running C++ with VStudio Code using CodeRunner extension", "body": "<p>I am unable to run my .cpp files from VStudio Code using the Code Runner extension. </p>\n\n<p>When I replace <code>#include \"test.h\"</code> with <code>#include \"test.cpp\"</code> in main it works fine but replacing it back gives me the following error;</p>\n\n<blockquote>\n  <p>[Running] cd \"c:\\Users\\dree\\Desktop\\TestRun\\\" &amp;&amp; g++ main.cpp -o main\n  &amp;&amp; \"c:\\Users\\dres\\Desktop\\TestRun\\\"main\n  c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe:\n  C:\\Users\\dree\\AppData\\Local\\Temp\\ccm2RSvw.o:main.cpp:(.text+0x15):\n  undefined reference to `MyClass::foo()' collect2.exe: error: ld\n  returned 1 exit status</p>\n  \n  <p>[Done] exited with code=1 in 1.1 seconds</p>\n</blockquote>\n\n<p>Main.cpp</p>\n\n<pre><code>#include \"test.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    MyClass a;\n    a.foo();\n    return 0;\n}\n</code></pre>\n\n<p>test.cpp</p>\n\n<pre><code>#include \"test.h\"\n#include &lt;iostream&gt;\n\nvoid MyClass::foo()\n{\n    std::cout &lt;&lt; \"Hello World\" &lt;&lt; std:: endl;\n}\n</code></pre>\n\n<p>test.h</p>\n\n<pre><code>class MyClass\n{\npublic:\n    void foo();\n    int bar;\n};\n</code></pre>\n\n<p>settings.json</p>\n\n<pre><code>{\n    \"workbench.colorTheme\": \"Visual Studio Dark\",\n    \"workbench.iconTheme\": \"material-icon-theme\",\n    \"python.linting.flake8Enabled\": false,\n    \"terminal.integrated.shell.windows\": \"C:\\\\WINDOWS\\\\System32\\\\cmd.exe\",\n    \"editor.minimap.enabled\": false,\n    \"liveServer.settings.donotShowInfoMsg\": true,\n    \"python.pythonPath\": \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\Shared\\\\Python36_86\\\\python.exe\",\n    \"python.linting.pylintEnabled\": true,\n    \"python.linting.enabled\": true,\n    \"explorer.confirmDelete\": false\n\n\n}\n</code></pre>\n\n<p>Is there a way to change the Code Runner extension to call the g++ command with all of the .cpp files in the directory of the file being ran?</p>\n\n<p>For example:\nIt is running the following command;</p>\n\n<pre><code>cd \"c:\\Users\\drees\\Desktop\\TestRun\\\" &amp;&amp; g++ main.cpp -o main &amp;&amp; \"c:\\Users\\drees\\Desktop\\TestRun\\\"main\n</code></pre>\n\n<p>Can I somehow change it to this?</p>\n\n<pre><code>cd \"c:\\Users\\drees\\Desktop\\TestRun\\\" &amp;&amp; g++ *.cpp -o main &amp;&amp; \"c:\\Users\\drees\\Desktop\\TestRun\\\"main\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "stl", "containers", "time-complexity"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1565817522, "post_id": 57502103, "comment_id": 101473397, "body": "I just have a sneaky hunch that an <code>erase()</code> on the beginning of a vector requires copying all elements in the vector, from start to finish, but nothing of that sort with <code>std::set</code>. Just a gut feeling that I have. Surely you must understand that&#39;s how vectors work, right?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565817603, "post_id": 57502103, "comment_id": 101473424, "body": "@SamVarshavchik Per <a href=\"https://en.cppreference.com/w/cpp/container/priority_queue/pop\" rel=\"nofollow noreferrer\"><code>pop()</code></a> it should be calling <code>pop_back</code> which is <code>O(1)</code> for a <code>vector</code> or <code>deque</code>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565817668, "post_id": 57502103, "comment_id": 101473447, "body": "Except that the question clearly states: &quot;pop was m_data.erase(m_data.begin())&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565817700, "post_id": 57502103, "comment_id": 101473455, "body": "@SamVarshavchik That is for the <code>std::set</code> only"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1565817805, "post_id": 57502103, "comment_id": 101473490, "body": "Optimized build?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565817829, "post_id": 57502103, "comment_id": 101473497, "body": "I really don&#39;t get the confusion of the question.  <code>std::set</code> is <code>O(logN)</code> insert and <code>O(1)</code> removal.  The other two are <code>O(logN)</code> for both.  That means set should be faster, for a decently size container (vector might be faster for smaller data sets due to cache efficiency.)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565820255, "post_id": 57502103, "comment_id": 101474195, "body": "<code>std::priority_queue</code> is usually implemented as a binary heap. Removing the smallest item from a min heap is likely more involved than removing the smallest item from a red-black tree like <code>std::set</code> usually uses"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1565823835, "post_id": 57502103, "comment_id": 101474938, "body": "@NathanOliver One would think that being specifically designed for priority queue operations, <code>std::priority_queue</code> would be faster than a more general container like <code>std::set</code>. What&#39;s the point of <code>std::priority_queue</code> if <code>std::set</code> can do everything <code>std::priority_queue</code> can do faster?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1565823882, "post_id": 57502103, "comment_id": 101474946, "body": "Are you compiling with optimizations?"}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1565964946, "post_id": 57502103, "comment_id": 101518907, "body": "i mean, without seeing your code, who knows? post a minimal example. Also what platform/STL implementation are you trying this on?"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1566009653, "post_id": 57502103, "comment_id": 101531382, "body": "I&#39;m gonna guess that it&#39;s because you picked an element type for the priority queue that makes swapping elements too expensive.  We&#39;ll never know until you post the code."}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "edited": false, "score": 0, "creation_date": 1566030250, "post_id": 57502103, "comment_id": 101534253, "body": "The code\u2019s a bot verbose. What exactly is missing?"}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "reply_to_user": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1566030322, "post_id": 57502103, "comment_id": 101534264, "body": "@MattTimmermans There\u2019s a struct with two ints and one pointer."}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1566030381, "post_id": 57502103, "comment_id": 101534270, "body": "@RetiredNinja I didn\u2019t change any levels of optimization (cmake . and then make)."}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "reply_to_user": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1566030577, "post_id": 57502103, "comment_id": 101534317, "body": "@jwezorek I\u2019m compiling on MacOS with C++17"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 1, "creation_date": 1566041274, "post_id": 57502103, "comment_id": 101536452, "body": "Comparator&lt;NotLess&gt; is not a valid weak ordering, because it returns true for equal items.  Also, if you have a lot of equal cost items, the data comparison is expensive and unnecessary.  priority_queue will do more comparisons than set"}], "owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565816985, "creation_date": 1565816985, "question_id": 57502103, "link": "https://stackoverflow.com/questions/57502103/why-does-stdset-outperform-stdpriority-queue-on-stdvector-and-stdpriorit", "title": "Why does std::set outperform std::priority_queue on std::vector and std::priority_queue on std::deque?", "body": "<p>While implementing A* I experimented with three types of containers: <code>std::set</code>, <code>std::priority_queue</code> on <code>std::vector</code>, and <code>std::priority_queue</code> on <code>std::deque</code>.</p>\n\n<p>The only operations I used were <code>push(e)</code>, <code>pop()</code>, and <code>top()</code>.</p>\n\n<p><code>push(e)</code> on <code>std::set</code> was implemented using <code>insert(e)</code> only. <code>pop</code> was <code>m_data.erase(m_data.begin())</code>, and <code>top()</code> was <code>*m_data.begin()</code>.</p>\n\n<p>No extra implementation was done for <code>std::priority_queue</code> on <code>std::vector</code>, and <code>std::priority_queue</code> on <code>std::deque</code> for the given operations.</p>\n\n<p><strong>With everything else unchanged, <code>std::set</code> worked somewhere around two times faster than the other two options.</strong></p>\n\n<p><em>Why is it so? If it is always true, why use <code>std::priority_queue</code> in terms of efficiency?</em></p>\n\n<p>P.S. The complexity of <code>push(e)</code> is <code>logn</code> (where <code>n</code> is the number of elements in the container) for all of them. The given implementation of <code>pop()</code> for <code>std::set</code> is amortized <code>const</code>, as indicated <a href=\"https://en.cppreference.com/w/cpp/container/set/erase\" rel=\"nofollow noreferrer\">here</a>, and it is <code>logn</code> (where <code>n</code> is the number of comparisons) for the other two options, as indicated <a href=\"https://en.cppreference.com/w/cpp/container/priority_queue/pop\" rel=\"nofollow noreferrer\">here</a>. <code>top</code> is <code>const</code> for all of them.</p>\n\n<p>P.P.S. I don't quite get what <code>the number of comparisons</code> means <a href=\"https://en.cppreference.com/w/cpp/container/priority_queue/pop\" rel=\"nofollow noreferrer\">here</a>. Is it the depth of the heap?</p>\n\n<p>The details on the implementation may be found <a href=\"https://github.com/nestoroprysk/NPuzzleSimplified\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["c++", "string", "suffix-tree"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11611504, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ruD4qVhKPJo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXsfq5WRAs9tRm7PjkwUKMHgMLb3A/mo/photo.jpg?sz=128", "display_name": "hussain sagar", "link": "https://stackoverflow.com/users/11611504/hussain-sagar"}, "edited": false, "score": 0, "creation_date": 1565979800, "post_id": 57502507, "comment_id": 101524959, "body": "Thank you for your answer! Does this algorithm have a name?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 31, "user_id": 11611504, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ruD4qVhKPJo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXsfq5WRAs9tRm7PjkwUKMHgMLb3A/mo/photo.jpg?sz=128", "display_name": "hussain sagar", "link": "https://stackoverflow.com/users/11611504/hussain-sagar"}, "edited": false, "score": 0, "creation_date": 1565979938, "post_id": 57502507, "comment_id": 101525003, "body": "@hussainsagar I have no idea."}, {"owner": {"reputation": 31, "user_id": 11611504, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ruD4qVhKPJo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXsfq5WRAs9tRm7PjkwUKMHgMLb3A/mo/photo.jpg?sz=128", "display_name": "hussain sagar", "link": "https://stackoverflow.com/users/11611504/hussain-sagar"}, "edited": false, "score": 0, "creation_date": 1565983439, "post_id": 57502507, "comment_id": 101526154, "body": "I have a doubt about what you mean by depth. You have said depth is the total number of edges from the root to p and not edge length. How are edge length and the number of edges different?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 31, "user_id": 11611504, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ruD4qVhKPJo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXsfq5WRAs9tRm7PjkwUKMHgMLb3A/mo/photo.jpg?sz=128", "display_name": "hussain sagar", "link": "https://stackoverflow.com/users/11611504/hussain-sagar"}, "edited": false, "score": 0, "creation_date": 1565983644, "post_id": 57502507, "comment_id": 101526233, "body": "@hussainsagar Sorry, when I talk about the length of an edge, I mean the length of the substring label that that edge carries. For the string &quot;abcabd&quot;, the suffix tree would have a node that is linked to the root with an edge with label &quot;ab&quot;. So that node&#39;s depth would be 2 since &quot;ab&quot; has length 2, even though it&#39;s only 1 edge."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565819458, "creation_date": 1565819458, "answer_id": 57502507, "question_id": 57502012, "link": "https://stackoverflow.com/questions/57502012/how-to-construct-suffix-tree-from-lcp-array-and-suffix-array/57502507#57502507", "title": "How to construct Suffix tree from LCP array and Suffix array", "body": "<p>It's actually very simple. The suffix array tells you the sequence of suffixes that you encounter if you do a left-to-right depth-first traversal of the suffix tree. The LCP array tells you how far up you need to go before starting a new edge corresponding to the next suffix. Assuming the string <code>s</code> has some unique character at the end (so each suffix is represented by a leaf node), the algorithm looks roughly like this:</p>\n\n<pre><code>let root = new node\nlet p = new node\nmake p a child of root with edge label S[0] (the least suffix)\nfor (int i = 1; i &lt; s.size(); i++) {\n    let l = LCP[i-1] (the LCP length of S[i] and S[i-1])\n    let prevP = null\n    while ((depth of p) &gt; l) {\n        // note that \"depth\" means total edge length from root to p, not\n        // total number of edges from root to p\n        prevP := p\n        p := (parent of p)\n    }\n    if ((depth of p) == l) {\n        let q = new node\n        make q a child of p, with edge label S[i][l...]\n        p := q\n    } else {\n        // we need to \"split\" the edge from p to prevP\n        let q = new node\n        let prevDepth = depth of prevP\n        unlink prevP from p\n        make q a child of p, with edge label S[i-1][(depth of p)...(l - 1)]\n        make prevP a child of q, with edge label S[i-1][l...(prevDepth - 1)]\n        let r = new node\n        make r a child of q, with edge label S[i][l...]\n        p := r\n    }\n}\nreturn root\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11611504, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ruD4qVhKPJo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXsfq5WRAs9tRm7PjkwUKMHgMLb3A/mo/photo.jpg?sz=128", "display_name": "hussain sagar", "link": "https://stackoverflow.com/users/11611504/hussain-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565819458, "creation_date": 1565816578, "question_id": 57502012, "link": "https://stackoverflow.com/questions/57502012/how-to-construct-suffix-tree-from-lcp-array-and-suffix-array", "title": "How to construct Suffix tree from LCP array and Suffix array", "body": "<p>The title pretty much.</p>\n\n<p>I created a suffix array in O(n) time using the DC3 algorithm. I then created an LCP array using Kasai's algorithm in O(n) time. Now I need to create a suffix tree from the two arrays I have. How does one do that? \nI looked at journal papers and looked around using Google but I could not find a way to do it. </p>\n\n<p>There is one coursera video that I came across that describes the process but they do not state what method they use and I doubt it is a linear time algorithm.</p>\n"}, {"tags": ["c++", "templates", "clang", "constexpr", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 3, "creation_date": 1565816935, "post_id": 57501997, "comment_id": 101473238, "body": "Clang enforces the rule that functions must be declared before they are instantiated by a template, move your function declaration higher up and it&#39;ll probably work"}, {"owner": {"reputation": 1238, "user_id": 11279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufGay.png?s=128&g=1", "display_name": "Dr. Gut", "link": "https://stackoverflow.com/users/11279879/dr-gut"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1565977712, "post_id": 57501997, "comment_id": 101524151, "body": "Neither of the three compilers enforce this. If you remove <code>constexpr</code> in the commented line, all thee compile it successfully."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572378092, "post_id": 57501997, "comment_id": 103538555, "body": "An extremely bizarre observation!"}], "answers": [{"comments": [{"owner": {"reputation": 1238, "user_id": 11279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufGay.png?s=128&g=1", "display_name": "Dr. Gut", "link": "https://stackoverflow.com/users/11279879/dr-gut"}, "edited": false, "score": 0, "creation_date": 1565977942, "post_id": 57505968, "comment_id": 101524246, "body": "Neither of the three compilers enforce that declarations should be visible at the point of instantiation. If you remove <code>constexpr</code> in the commented line, all thee compile it successfully."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1565979794, "last_edit_date": 1565979794, "creation_date": 1565852668, "answer_id": 57505968, "question_id": 57501997, "link": "https://stackoverflow.com/questions/57501997/adl-does-not-work-in-constexpr-functions-clang-only/57505968#57505968", "title": "ADL does not work in constexpr functions (clang only)", "body": "<p>Declaration should be visible at the point of instantiation, so clang has right to reject your code. Reordering functions fixes compilation:</p>\n\n<pre><code>constexpr void Foo (Apple)\n{\n}\n\nint main ()\n{\n    CallFoo&lt;Apple&gt; ();\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/R6cRlW\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Fact is that end of file is a point of instantiation too, and gcc/MSVC should only consider this one :/</p>\n"}], "owner": {"reputation": 1238, "user_id": 11279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufGay.png?s=128&g=1", "display_name": "Dr. Gut", "link": "https://stackoverflow.com/users/11279879/dr-gut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1566567054, "creation_date": 1565816491, "last_edit_date": 1566567054, "question_id": 57501997, "link": "https://stackoverflow.com/questions/57501997/adl-does-not-work-in-constexpr-functions-clang-only", "title": "ADL does not work in constexpr functions (clang only)", "body": "<p>The following code compiles with MSVC and gcc, but not with clang. Why is that so?</p>\n\n<p>It seems like if ADL would not work if <code>CallFoo ()</code> is <code>constexpr</code>. See the comment.</p>\n\n<pre><code>template &lt;class T&gt;\nconstexpr void CallFoo  ()          // Remove constexpr to fix clang compilation error.\n{\n    Foo (T ());\n}\n\n\nclass Apple {};\n\n\nint main ()\n{\n    CallFoo&lt;Apple&gt; ();\n}\n\n\nconstexpr void Foo (Apple)\n{\n}\n</code></pre>\n\n<p>Clang error message (<a href=\"https://godbolt.org/z/9Gh5LG\" rel=\"noreferrer\">see on godbolt.org</a>):</p>\n\n<pre><code>&lt;source&gt;:4:5: error: use of undeclared identifier 'Foo'\n    Foo (T ());\n    ^\n&lt;source&gt;:13:5: note: in instantiation of function template specialization 'CallFoo&lt;Apple&gt;' requested here\n    CallFoo&lt;Apple&gt; ();\n    ^\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1565816698, "post_id": 57501971, "comment_id": 101473162, "body": "TL;DR: <code>_for.template each&lt;Head...&gt;();</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1565816822, "post_id": 57501971, "comment_id": 101473195, "body": "@HolyBlackCat Not sure if we want to dupe close this as it is only half the problem.  Even after using <code>template</code> it wont compile because the function call is ambiguous when only one template parameter is used."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1565817115, "post_id": 57501971, "comment_id": 101473293, "body": "also <code>template &lt;typename = void&gt; void each() { }</code> as ground case for recursion (removing the version with only one <code>int</code> parameter)."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565817936, "post_id": 57501971, "comment_id": 101473519, "body": "@NathanOliver I figured the dupe was good enough, since it solves the one error OP was stuck on. Feel free to reopen if you think the question deserves a more complete answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1565818018, "post_id": 57501971, "comment_id": 101473541, "body": "@HolyBlackCat After more though I&#39;ll leave it.  The ambiguity issue is a duplicate as well so we can add it here if the OP needs it."}], "owner": {"reputation": 31, "user_id": 5922707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/efC3g.jpg?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/5922707/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1565816679, "answer_count": 0, "score": 2, "last_activity_date": 1565816383, "creation_date": 1565816383, "question_id": 57501971, "link": "https://stackoverflow.com/questions/57501971/how-to-fix-compile-error-with-unexpanded-parameter-pack", "closed_reason": "Duplicate", "title": "How to fix compile error with unexpanded parameter pack", "body": "<p>I get a error for an unexpanded parameter pack while expanding it.</p>\n\n<p>This code is for testing purposes.</p>\n\n<p>Later i want to call a differrent function with the head, tail and element.\nI need the element to call another template function and want to maintain the other argument to later call a different template function.</p>\n\n<p>Current output of clang (version: 8.0.0)</p>\n\n<p>test.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\ntemplate &lt;int... Tail&gt;\nclass for_each_type {\n    public:\n    template &lt;int element, int... Head&gt;\n    int each() {\n        for_each_type&lt;Tail..., element&gt; _for;\n\n        _for.each&lt;Head...&gt;();\n        return element;\n    }\n\n    template &lt;int element&gt;\n    int each() {\n        return element;\n    }\n};\n\nint main() {\n    for_each_type&lt;&gt; _for;\n\n    std::cout &lt;&lt; _for.each&lt;1, 1, 2, 2&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I expect the code to output <code>6</code>, but the actual output is a error message.</p>\n\n<p>To run start the compiler i just run <code>clang++ test.cpp</code></p>\n\n<p>The current error message is:</p>\n\n<pre><code>C:\\Users\\HP\\Documents\\GitHub\\CPP-Game-Engine\\src&gt;clang++ test.cpp\ntest.cpp:10:23: error: expected ';' after expression\n        _for.each&lt;Head...&gt;();\n                      ^\n                      ;\ntest.cpp:10:9: error: expression contains unexpanded parameter pack 'Head'\n        _for.each&lt;Head...&gt;();\n        ^         ~~~~\ntest.cpp:10:23: error: expected expression\n        _for.each&lt;Head...&gt;();\n                      ^\n3 errors generated.\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "vscode-settings"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1565816751, "post_id": 57501940, "comment_id": 101473176, "body": "So there&#39;s a file /Users/cjm10000/Desktop/7701X/7701x_code/src/auton_functions&zwnj;&#8203;.cpp that includes a file called main.h and you are expecting it to find that in your workspace folder? Is that correct, because it seems a little weird to me. Maybe you should describe where all the files you have are."}, {"owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565817356, "post_id": 57501940, "comment_id": 101473361, "body": "Ok, I updated the summary and added an image of how the folders are set up. The workspace folder should be 7701x_code."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565817499, "post_id": 57501940, "comment_id": 101473393, "body": "So your workspace folder is <code>&#47;Users&#47;cjm10000&#47;Desktop&#47;7701X&#47;7701x_code</code> or is it 7701x_code in some other location? Sorry to keep on at this but the precise details matter."}, {"owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565817813, "post_id": 57501940, "comment_id": 101473492, "body": "Yeah <code>&#47;Users&#47;cjm10000&#47;Desktop&#47;7701X&#47;7701x_code</code> is the workspace folder"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1565818739, "post_id": 57501940, "comment_id": 101473759, "body": "Sorry but I don&#39;t know the answer. I wonder if it&#39;s an Intellisense caching issue, try the instructions here <a href=\"https://code.visualstudio.com/docs/cpp/faq-cpp#_how-do-i-recreate-the-intellisense-database\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/cpp/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565819590, "post_id": 57501940, "comment_id": 101474018, "body": "I reinstalled VScode and still have the same problem. I don&#39;t know what to do exactly with the intellisense cache."}], "owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4923, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1607991559, "creation_date": 1565816209, "last_edit_date": 1607180004, "question_id": 57501940, "link": "https://stackoverflow.com/questions/57501940/vs-code-include-errors-detected-cannot-open-source-file-main-h", "title": "VS Code Include Errors Detected. &quot;cannot open source file &#39;main.h&#39; &quot;", "body": "<p>This questions might look similar to other questions but nothing I've tried has worked. I'm using a library called PROS for Vex robotics. I get the include detected error where it can't find the <code>main.h</code> file located in the workspace folder. I checked the <code>c_cpp_properties.json</code> to check if the folder was somehow not included.</p>\n<p>Additionally, I tried re-installing VS code, updating the PROS library, making a new project. Nothing seems to be working, maybe I'm just overlooking a simple problem.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;configurations&quot;: [\n        {\n            &quot;name&quot;: &quot;Mac&quot;,\n            &quot;includePath&quot;: [\n                &quot;${workspaceFolder}/**&quot;,\n                &quot;/Users/cjm10000/Desktop/7701X/7701x_code/include&quot;\n            ],\n            &quot;defines&quot;: [],\n            &quot;macFrameworkPath&quot;: [\n                &quot;/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Frameworks&quot;\n            ],\n            &quot;compilerPath&quot;: &quot;/usr/bin/clang&quot;,\n            &quot;cStandard&quot;: &quot;c11&quot;,\n            &quot;cppStandard&quot;: &quot;c++17&quot;,\n            &quot;intelliSenseMode&quot;: &quot;clang-x64&quot;,\n            &quot;compileCommands&quot;: &quot;${workspaceFolder}/compile_commands.json&quot;,\n            &quot;browse&quot;: {\n                &quot;path&quot;: [\n                    &quot;${workspaceFolder}/**&quot;\n                ]\n            }\n        }\n    ],\n    &quot;version&quot;: 4\n}\n</code></pre>\n<p>Here's the <a href=\"https://i.stack.imgur.com/YAeDZ.png\" rel=\"nofollow noreferrer\">folder structure</a> and error output:</p>\n<p><img src=\"https://i.stack.imgur.com/9W44j.png\" alt=\"error output\" /></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565814273, "post_id": 57501532, "comment_id": 101472388, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11910577"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565814432, "post_id": 57501532, "comment_id": 101472460, "body": "The thing is my program is not deviating from anything. It is giving the correct solution on array without duplicates. I just don&#39;t know what changes to make to make it work for duplicates"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565814581, "post_id": 57501532, "comment_id": 101472514, "body": "@jamesgem Not sure your approach can be made to work. Presence of duplicates means that you cannot discard either the left or the right bound without further analysis, Is there any reason not to use the simple brute force approach?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11910577"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565814822, "post_id": 57501532, "comment_id": 101472592, "body": "@john It has O(N^3) complexity. That&#39;s why"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565814901, "post_id": 57501532, "comment_id": 101472630, "body": "@jamesgem Sure, you should make any constraints on solving this problem clear in the question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11910577"}, "edited": false, "score": 0, "creation_date": 1565815038, "post_id": 57501532, "comment_id": 101472675, "body": "@Fran&#231;oisAndrieux edited"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1565815114, "post_id": 57501532, "comment_id": 101472708, "body": "@jamesgem -- Did you get this question from one of the &quot;online judge&quot; sites?  If so, please note that these sites are notorious for giving questions that have na&#239;ve solutions that work for simple cases, but do not work with the massive amounts of data they may give it or with the special requirements.  The goal is for you to come up with the non-na&#239;ve solution, and that may require doing things much differently than the na&#239;ve approach."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11910577"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1565815306, "post_id": 57501532, "comment_id": 101472778, "body": "@PaulMcKenzie I am a beginner in programming and that&#39;s why i asked this doubt because i was not able to formulate a solution further than this"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1565815981, "post_id": 57501532, "comment_id": 101472978, "body": "@jamesgem Well your issue has very little to do with programming.  It comes down to formulating a solution with pencil and paper first, and then writing the code.  Second, note that many of these questions may involve getting into having knowledge of data structures and algorithms to reduce the complexity, even if on the surface the questions sound &quot;simple&quot; (maybe not this question, but it may).  If you never dealt with data structures, then you will have further issues."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1565817921, "post_id": 57501532, "comment_id": 101473512, "body": "After sorting, <code>std::unique()</code> can be used to remove duplicates (by moving them to the end)."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1565853756, "post_id": 57501532, "comment_id": 101480341, "body": "Correct me if I&#39;m wrong... you do not want duplicates right? then why don&#39;t you stop the loop when you find a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819253, "creation_date": 1565819253, "answer_id": 57502478, "question_id": 57501532, "link": "https://stackoverflow.com/questions/57501532/find-all-triplets-in-an-array-that-sum-to-a-given-value-there-are-duplicates-in/57502478#57502478", "title": "Find all triplets in an array that sum to a given value.There are duplicates in the array", "body": "<p>You'd better make use of STL classes. I wrote some code for you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nvoid findTripletSums(const std::vector&lt;int&gt;&amp; arr, int tripleSum)\n{\n    std::map&lt;int,int&gt; arrMap; // counts the number of times the number is repeated\n    for(auto a : arr)\n    {\n        arrMap[a]++;\n    }\n\n    for(auto itrI = arrMap.begin(); itrI != arrMap.end(); ++itrI)\n    {\n        int arrI = itrI-&gt;first;\n        if(arrI*3 == tripleSum &amp;&amp; itrI-&gt;second &gt;= 3)\n        {\n            cout &lt;&lt; arrI &lt;&lt; \" \" &lt;&lt; arrI &lt;&lt; \" \" &lt;&lt; arrI &lt;&lt; \"; \";\n            return;\n        }\n        auto itrJ   = itrI;\n        for(++itrJ; itrJ != arrMap.end(); ++itrJ)\n        {\n            int arrJ        = itrJ-&gt;first;\n            int complement  = tripleSum-arrI-arrJ;\n\n            if(complement &lt; itrJ-&gt;first)\n            {\n                break;\n            }\n\n            if(complement == arrJ)\n            {\n                if(itrJ-&gt;second &gt;= 2)\n                {\n                     cout &lt;&lt; arrI &lt;&lt; \" \" &lt;&lt; arrJ &lt;&lt; \" \" &lt;&lt; arrJ &lt;&lt; \"; \";\n                }\n                break;\n            }\n\n            if(arrMap.find(complement) != arrMap.end())\n            {\n                cout &lt;&lt; arrI &lt;&lt; \" \"  &lt;&lt; arrJ &lt;&lt; \" \" &lt;&lt; complement &lt;&lt; \"; \";\n            }\n        }\n    }\n}\n\nint main()\n{\n    findTripletSums({0,1,3,3,2,4,6}, 7);\n    cout &lt;&lt; \"\\n\";\n    findTripletSums({1,2,3,4,5,6}, 7);\n    cout &lt;&lt; \"\\n\";\n    findTripletSums({0,1,1,1,1,2}, 3);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>0 1 6; 0 3 4; 1 2 4; 1 3 3;                                                                                                                                                        \n1 2 4;                                                                                                                                                                             \n0 1 2; 1 1 1;  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1565852248, "creation_date": 1565852248, "answer_id": 57505893, "question_id": 57501532, "link": "https://stackoverflow.com/questions/57501532/find-all-triplets-in-an-array-that-sum-to-a-given-value-there-are-duplicates-in/57505893#57505893", "title": "Find all triplets in an array that sum to a given value.There are duplicates in the array", "body": "<p>You have do handle duplicates when you found correct sum:</p>\n\n<pre><code>if (sum==x)\n{\n    // skip and count duplicates\n    const auto oldL = l;\n    do {\n        ++l;\n    } while (l &lt;= r &amp;&amp; arr[oldL] == arr[l]);\n    const auto oldR = r;\n    do {\n        --r;\n    } while (l &lt;= r &amp;&amp; arr[oldR] == arr[r]);\n\n    // resulting count\n    const auto count = (arr[oldL] == arr[oldR]\n                       ? (l - oldL) * (l - oldL - 1) / 2\n                       : ((l - oldL) * (oldR - r)));\n\n    for (int j = 0; j != count; ++j) {\n        std::cout &lt;&lt; arr[i] &lt;&lt; \" \" &lt;&lt; arr[oldL] &lt;&lt; \" \" &lt;&lt; arr[oldR] &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/P7SbcZ\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11910577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 57505893, "answer_count": 2, "score": -1, "last_activity_date": 1565857703, "creation_date": 1565814124, "last_edit_date": 1565857703, "question_id": 57501532, "link": "https://stackoverflow.com/questions/57501532/find-all-triplets-in-an-array-that-sum-to-a-given-value-there-are-duplicates-in", "title": "Find all triplets in an array that sum to a given value.There are duplicates in the array", "body": "<p>This is the code I wrote-</p>\n\n<pre><code>void FindTriplet(int arr[], int size, int x) {\n    sort(arr,arr+size);\n    for(int i=0;i&lt;size-2;i++)\n    {\n        int l=i+1;\n        int r=size-1;\n        while(l&lt;r)\n        {\n            int sum=arr[i]+arr[l]+arr[r];\n            if(sum==x)\n            {\n                cout &lt;&lt; arr[i] &lt;&lt; \" \" &lt;&lt; arr[l] &lt;&lt; \" \" &lt;&lt; arr[r] &lt;&lt; endl;\n                l++;\n                r--;\n            }\n            else if(sum&lt;x)\n            {\n                l++;\n            }\n            else \n            {\n                r--;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The complexity of O(n^3) is not acceptable.\nBut this code is failing on cases like-\n1 1 1 1 where required sum is 3.\nAns. 1 1 1  repeated 4 times</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1565813773, "post_id": 57501427, "comment_id": 101472194, "body": "From a glance, it looks like there&#39;s a <a href=\"https://github.com/snaewe/loki-lib/blob/7c29d87ecdecd60e39db969125753f6a4f549131/include/loki/Typelist.h\" rel=\"nofollow noreferrer\"><code>loki&#47;Typelist.h</code></a> file. Are you sure that&#39;s not what you&#39;re looking for? (as opposed to <code>loki&#47;Typelists</code> like you have written)"}, {"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1565813847, "post_id": 57501427, "comment_id": 101472225, "body": "@scohe001 Thanks, fixed it. Also added link to Loki Library."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1565813891, "post_id": 57501427, "comment_id": 101472246, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, command line, etc? I suspect that you are including files strangely."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1565813980, "post_id": 57501427, "comment_id": 101472287, "body": "@User10482 you misunderstand. I&#39;m talking about how you have a plural Typelist<b><i>s</i></b> as opposed to the singular that lives in that repo."}, {"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1565814374, "post_id": 57501427, "comment_id": 101472432, "body": "@scohe001 Oh, I see. That was just a made up directive to explain question. I have attached my Test.cpp code."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565814436, "post_id": 57501427, "comment_id": 101472464, "body": "All questions on stackoverflow.com must include all pertinent information <b><i>in the question itself as plain text</i></b>. Suspicious links to shady external web sites, that can stop working at any time and render the question meaningless, are not acceptable."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1565814890, "post_id": 57501427, "comment_id": 101472626, "body": "I am with Marc Glisse, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> directly here, as text."}, {"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565814922, "post_id": 57501427, "comment_id": 101472641, "body": "@Sam Varshavchik I will edit it.  Funny enough, someone on stackoverflow suggested me to use it to share code."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1565815022, "post_id": 57501427, "comment_id": 101472671, "body": "Sorry to hear that. Not all recommendations are good. Not even those of multi-digit-reputation users.... (making fun of myself, yes; but otherwise serious)"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1565815155, "post_id": 57501427, "comment_id": 101472724, "body": "Please also provide more details on what error you get (quote completely, verbatim and as text) and on how you build (build commandline, makefile, GUI config)."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1565815964, "post_id": 57501427, "comment_id": 101472970, "body": "I don&#39;t see the relation between the code you link to (where there is no file Function.h, of course) and the question. There is a search path, composed for instance of path1 and path2 (you can add to it with -I), and <code>#include &lt;X&gt;</code> looks for path1/X or path2/X. If X is a/b, that means it looks for path1/a/b or path2/a/b. It is weird to put your Test.cpp file in include/loki, and it doesn&#39;t mean you can skip adding -I/some/path."}, {"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1565819018, "post_id": 57501427, "comment_id": 101473848, "body": "@MarcGlisse #include &quot;Functor.h&quot; directive works as expected, since the Test.cpp is in the same folder as it. The error occurs after the pre-processor for the #include &lt;loki/Typelist.h&gt; line inside Functor.h. It fails to find it. I understand what you mean. I was trying to use the header files directly without utilizing the makefile (which I am guessing would copy/link &quot;loki/all_header_files&quot; to the default search path"}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "edited": false, "score": 0, "creation_date": 1565818904, "post_id": 57502128, "comment_id": 101473805, "body": "Thanks for the answer. The last point solved the issue. I added the path myself instead depending on the makefile, and going through the make process."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1565818965, "last_edit_date": 1565818965, "creation_date": 1565817154, "answer_id": 57502128, "question_id": 57501427, "link": "https://stackoverflow.com/questions/57501427/meaning-of-include-path-to-header-directive-like-include-loki-functor-h/57502128#57502128", "title": "Meaning of &quot;#include &lt;path/to/header&gt;&quot; directive (like &quot;#include &lt;loki/Functor.h&gt;&quot;)", "body": "<blockquote>\n  <p>Meaning of \"<code>#include &lt;path/to/header&gt;</code>\" directive (like \"<code>#include &lt;loki/Functor.h&gt;</code>\")</p>\n</blockquote>\n\n<p>The c++ standard (latest draft) says:</p>\n\n<blockquote>\n  <p>A preprocessing directive of the form</p>\n\n<pre><code># include &lt; h-char-sequence &gt; new-line\n</code></pre>\n  \n  <p>searches a sequence of implementation-defined places for a header identified uniquely by the specified sequence between the &lt; and > delimiters, and causes the replacement of that directive by the entire contents of the header.\n  How the places are specified or the header identified is implementation-defined.</p>\n</blockquote>\n\n<hr>\n\n<p>Implementation defined behaviour depends on the implementation of the language that you are using. Example documentation for the GCC compiler:</p>\n\n<blockquote>\n<pre><code>#include &lt;file&gt;\n</code></pre>\n  \n  <p>This variant is used for system header files. It searches for a file named file in a standard list of system directories. You can prepend directories to this list with the -I option (see Invocation).</p>\n</blockquote>\n\n<p>According to the <a href=\"https://refspecs.linuxfoundation.org/FHS_3.0/fhs-3.0.html#usrincludeDirectoryForStandardInclu\" rel=\"nofollow noreferrer\">Filesystem Hierarchy Standard</a>, the standard location should be <code>/usr/include</code> on Linux systems for example.</p>\n\n<p><code>-v</code> option of the GCC compiler should reveal the exact list of system include directories used by the compiler.</p>\n\n<hr>\n\n<blockquote>\n  <p>Am I right to assume that the library inserts itself into one of the standard paths that the compiler searches in?</p>\n</blockquote>\n\n<p>The compiler searches for the standard directories, yes. If the headers aren't in searched directories, then they will not be found. </p>\n\n<blockquote>\n  <p>If so, any way to use it without inserting the library into said path.</p>\n</blockquote>\n\n<p>As per the quoted documentation, you can use the <code>-I</code> (capital i) option to add a non standard include location, if you use GCC. </p>\n"}, {"tags": [], "owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "is_accepted": false, "score": 1, "last_activity_date": 1565818783, "creation_date": 1565818783, "answer_id": 57502422, "question_id": 57501427, "link": "https://stackoverflow.com/questions/57501427/meaning-of-include-path-to-header-directive-like-include-loki-functor-h/57502422#57502422", "title": "Meaning of &quot;#include &lt;path/to/header&gt;&quot; directive (like &quot;#include &lt;loki/Functor.h&gt;&quot;)", "body": "<p>Though it's technically implementation-defined, in practice, most systems (Windows and Linux) use slashes (forward or backward) to specify paths (directories), as I'm sure you're aware. Some compilers, I believe GCC included, automatically convert paths specified in #include directives to the correct directory separator for the system on which they are running. The path in the specific example you list, <code>loki/Typelist.h</code>, is a relative path. So the compiler will look, beginning in all of the directories in its #include file search path, for a file whose relative path, beginning in any of those directories, matches <code>loki/Typelist.h</code>.</p>\n\n<p>BTW you can add paths to the #include search path by adding <code>-I</code> options to your compiler command line; e.g. <code>-IC:\\OpenSSL-Win32\\include</code>. If you use a makefile, you might be able to add these by appending to the <code>COPTS</code> (or similar) variable.</p>\n"}], "owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 57502128, "answer_count": 2, "score": -1, "last_activity_date": 1565818965, "creation_date": 1565813578, "last_edit_date": 1565817955, "question_id": 57501427, "link": "https://stackoverflow.com/questions/57501427/meaning-of-include-path-to-header-directive-like-include-loki-functor-h", "title": "Meaning of &quot;#include &lt;path/to/header&gt;&quot; directive (like &quot;#include &lt;loki/Functor.h&gt;&quot;)", "body": "<p>I am trying to use code (mostly header files) from the <a href=\"https://github.com/snaewe/loki-lib\" rel=\"nofollow noreferrer\">Loki library</a> to test it's functionalities. I am getting error for lines that have <code>#include &lt;loki/Typelist.h&gt;</code> directives. I have never seen a path inside the &lt; > or such. (I know about the normal <code>#include &lt;strings&gt;</code> etc directives, and that it searches predefined path)</p>\n\n<p>How does the include directives of the form <code>&lt;path/to/header&gt;</code> work? </p>\n\n<p>Am I right to assume that the library inserts itself into one of the standard paths that the compiler searches in? If so, any way to use it without inserting the library into said path. (I just want to test a function that includes these headers)</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>Test.cpp</strong></p>\n\n<pre><code>#include \"Functor.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct TestFunctor\n{\n    void operator()(int i, double d)\n    {\n        cout &lt;&lt; \" TestFunctor called.\\n\";\n    }\n};\n\nint main()\n{\n    TestFunctor f;\n    Functor&lt;void, TYPELIST_2(int, double)&gt; cmd(f);\n    cmd(4, 4.5);\n}\n</code></pre>\n\n<p><strong>Note:</strong> The Test.cpp file rests in loki-lib/include/loki</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>$ gcc Test.cpp\nIn file included from Test.cpp:1:0:\nFunctor.h:34:10: fatal error: loki/Typelist.h: No such file or directory\n #include &lt;loki/Typelist.h&gt;\n          ^~~~~~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1565812685, "post_id": 57501134, "comment_id": 101471771, "body": "What didn&#39;t you undersant from the <a href=\"http://sdl.beuc.net/sdl.wiki/SDL_Surface\" rel=\"nofollow noreferrer\">SDL Documentstion</a>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11797232"}, "edited": false, "score": 0, "creation_date": 1565812869, "post_id": 57501248, "comment_id": 101471841, "body": "Thanks, I was a bit stuck with that for a while. Now I see it&#39;s a basic thing."}], "tags": [], "owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "is_accepted": true, "score": 1, "last_activity_date": 1565812735, "creation_date": 1565812735, "answer_id": 57501248, "question_id": 57501134, "link": "https://stackoverflow.com/questions/57501134/what-is-the-meaning-of-screensurface-format-in-sdl/57501248#57501248", "title": "What is the meaning of screenSurface-&gt;format in SDL?", "body": "<p>Have you taken a look at the <a href=\"https://wiki.libsdl.org/SDL_ConvertSurface\" rel=\"nofollow noreferrer\">documentation</a>? The format is an SDL Pixel Format detailing how the pixels are set in memory.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1565812757, "creation_date": 1565812757, "answer_id": 57501253, "question_id": 57501134, "link": "https://stackoverflow.com/questions/57501134/what-is-the-meaning-of-screensurface-format-in-sdl/57501253#57501253", "title": "What is the meaning of screenSurface-&gt;format in SDL?", "body": "<p>Not quite sure what you are asking, but <code>gScreenSurface-&gt;format</code> means \"dereference the pointer in <code>gScreenSurface</code> to get the value <code>format</code> in whatever it points to\". What's not clear about that? That's basic pointer use.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11797232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57501248, "answer_count": 2, "score": 2, "last_activity_date": 1565828177, "creation_date": 1565812181, "last_edit_date": 1565828177, "question_id": 57501134, "link": "https://stackoverflow.com/questions/57501134/what-is-the-meaning-of-screensurface-format-in-sdl", "title": "What is the meaning of screenSurface-&gt;format in SDL?", "body": "<p>I have recently started studying SDL and I would like to get a good understanding of it. I have followed Lazy Foo' Productions' tutorials and there is one statement that I don't get. What is the meaning behind the <code>gScreenSurface-&gt;format</code> or <code>screenSurface-&gt;format</code> in the examples below?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>SDL_ConvertSurface( screenSurface, gScreenSurface-&gt;format, 0 );\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>SDL_FillRect( screenSurface, NULL, SDL_MapRGB( screenSurface-&gt;format, 0xFF, 0xFF, 0xFF ));\n</code></pre>\n\n<p>Hope someone can explain it, brief explanation needed only. Thanks!</p>\n"}, {"tags": ["c++", "templates", "operator-overloading"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1565812023, "post_id": 57501025, "comment_id": 101471523, "body": "When you write <code>friend inline Matrix operator*(Matrix lhs, const Matrix &amp;rhs)</code>, the compiler sees this as exactly the same as if you wrote <code>friend inline Matrix&lt;T, nbRows, nbColumns&gt; operator*(Matrix&lt;T, nbRows, nbColumns&gt; lhs, const Matrix&lt;T, nbRows, nbColumns&gt; &amp;rhs)</code>. See <a href=\"https://en.cppreference.com/w/cpp/language/injected-class-name\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/injected-class-name</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1565813534, "post_id": 57501100, "comment_id": 101472105, "body": "Should you not restrict it to cases were LhsRows == RhsColumns so that matrix with unrelated sizes can&#39;t be multiplied ? You could probably do it by reusing the type in the template definition"}, {"owner": {"reputation": 81, "user_id": 11929053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbe5da49ccd3dbd4db9dec2d5cb3bb?s=128&d=identicon&r=PG&f=1", "display_name": "vasama", "link": "https://stackoverflow.com/users/11929053/vasama"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1565813844, "post_id": 57501100, "comment_id": 101472223, "body": "@Jeffrey <code>static_assert</code> in the body is a good way to do this. This also allows for a message describing the problem, which is generally preferable to template error spew."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1565815391, "post_id": 57501100, "comment_id": 101472799, "body": "@vasama, can you please edit the static_assert in the answer? It makes the answer quite satisfactory."}, {"owner": {"reputation": 166, "user_id": 1541782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdde21a273ff5e6c1a3d453ec23b4ce4?s=128&d=identicon&r=PG", "display_name": "Ben1980", "link": "https://stackoverflow.com/users/1541782/ben1980"}, "edited": false, "score": 0, "creation_date": 1565844780, "post_id": 57501100, "comment_id": 101478258, "body": "@Jeffey @vasama, yes <code>static_assert</code> the number rows and columns is necessary. But that wasn&#39;t the question. The clarification was only necessary for the operators header."}], "tags": [], "owner": {"reputation": 81, "user_id": 11929053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbe5da49ccd3dbd4db9dec2d5cb3bb?s=128&d=identicon&r=PG&f=1", "display_name": "vasama", "link": "https://stackoverflow.com/users/11929053/vasama"}, "is_accepted": true, "score": 4, "last_activity_date": 1565816358, "last_edit_date": 1565816358, "creation_date": 1565812054, "answer_id": 57501100, "question_id": 57501025, "link": "https://stackoverflow.com/questions/57501025/how-to-fix-no-match-for-operator-operand-types-are-matrixdouble-2-3-a/57501100#57501100", "title": "How to fix &#39;no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)&#39; with templates", "body": "<p>Your <code>operator*</code> applies to <code>Matrix&lt;A, B&gt;</code> and <code>Matrix&lt;A, B&gt;</code> (same types) but not <code>Matrix&lt;A, B&gt;</code> and <code>Matrix&lt;B, A&gt;</code> (different types). Instead of defining the operator within the class template, do it as a free function outside of the class template like so:</p>\n\n<pre><code>template&lt;typename T, size_t LhsRows, size_t LhsColumns, size_t RhsRows, size_t RhsColumns&gt;\nauto operator*(const Matrix&lt;T, LhsRows, LhsColumns&gt;&amp; lhs, const Matrix&lt;T, RhsRows, RhsColumns&gt;&amp; rhs)\n{\n    static_assert(LhsColumns == RhsRows, \"unrelated matrix sizes\");\n\n    // ...\n}\n</code></pre>\n\n<p>This way you can apply the operator to two different instantiations of the <code>Matrix</code> class template.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1565812096, "creation_date": 1565812096, "answer_id": 57501110, "question_id": 57501025, "link": "https://stackoverflow.com/questions/57501025/how-to-fix-no-match-for-operator-operand-types-are-matrixdouble-2-3-a/57501110#57501110", "title": "How to fix &#39;no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)&#39; with templates", "body": "<p>Make the <code>operator*</code> function a template, that takes other sets of \"rows\" and \"columns\":</p>\n\n<pre><code>template&lt;size_t rows1, size_t cols1, size_t rows2, size_t cols2&gt;\nfriend inline Matrix operator*(Matrix&lt;T, rows1, cols1&gt; lhs, const Matrix&lt;T, rows2, cols2&gt; &amp;rhs) {\n    // Compute the product of lhs and rhs\n    return lhs;\n}\n</code></pre>\n\n<p>Or if you only want to handle the reverse (switching \"rows\" and \"columns\") then use that for the classes in the argument list:</p>\n\n<pre><code>friend inline Matrix operator*(Matrix&lt;T, nbRows, nbColumns&gt; lhs, const Matrix&lt;T, nbColumns, nbRows&gt; &amp;rhs) {\n    // Compute the product of lhs and rhs\n    return lhs;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1565813624, "post_id": 57501157, "comment_id": 101472143, "body": "That. Reusing nbColumns twice is the way to maintain matrix compatibility"}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 2, "last_activity_date": 1565812584, "last_edit_date": 1565812584, "creation_date": 1565812266, "answer_id": 57501157, "question_id": 57501025, "link": "https://stackoverflow.com/questions/57501025/how-to-fix-no-match-for-operator-operand-types-are-matrixdouble-2-3-a/57501157#57501157", "title": "How to fix &#39;no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)&#39; with templates", "body": "<p>The two arguments for your operator have different types. You need to introduce a template argument for the number of columns in the second argument and the number of columns in the resulting type. You can then replace <code>Matrix</code> with the proper type for each use :</p>\n\n<pre><code>template&lt;size_t nbOther&gt;\nfriend inline Matrix&lt;T, nbRows, nbOther&gt; operator*(\n    const Matrix&lt;T, nbRows, nbColumns&gt; &amp; lhs,\n    const Matrix&lt;T, nbColumns, nbOther&gt; &amp;rhs)\n{\n    // Do math\n}\n</code></pre>\n\n<p>Since matrix multiplication requires that the inner dimension are the same, you only need 1 additional template argument. Any other information you need is already provided by the <code>class</code> template arguments.</p>\n\n<p>As a final note, <code>operator*</code> should not return <code>lhs</code>. Normally the <code>operator*=</code> variant of the operator would return a reference to <code>lhs</code> but you won't be able to implement it here since the operation would need to change the type of <code>lhs</code> which is not possible in c++. The return value will be a distinct matrix of type <code>Matrix&lt;T, nbRows, nbOther&gt;</code> which generally wont be the same type as either of the parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": false, "score": 0, "last_activity_date": 1565813026, "creation_date": 1565813026, "answer_id": 57501320, "question_id": 57501025, "link": "https://stackoverflow.com/questions/57501025/how-to-fix-no-match-for-operator-operand-types-are-matrixdouble-2-3-a/57501320#57501320", "title": "How to fix &#39;no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)&#39; with templates", "body": "<p>As you said a &amp; b have different types <code>Matrix&lt;double, 2, 3&gt; and Matrix&lt;double, 3, 2&gt;</code></p>\n\n<p>so your operator overload will become something like this</p>\n\n<pre><code>friend inline Matrix&lt;double, 2, 3&gt; operator*(Matrix&lt;double, 2, 3&gt; lhs, const Matrix&lt;double, 2, 3&gt; &amp;rhs) {\n    // Compute the product of lhs and rhs\n    return lhs;\n}\n</code></pre>\n\n<p>that is the reason of why the compiler cannot find the proper operator overload for your class, so in order to solve this you should add an overload where rhs columns are equal to lhs rows but rhs has a different rows count</p>\n\n<pre><code>template&lt;size_t nbColsR&gt;\nfriend inline Matrix&lt;T, nbRows, nbColsR&gt; operator*(Matrix lhs, const Matrix&lt;T, nbColumns, nbColsR&gt; &amp;rhs) {\n        // Compute the product of lhs and rhs\n        return lhs;\n}\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 1541782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdde21a273ff5e6c1a3d453ec23b4ce4?s=128&d=identicon&r=PG", "display_name": "Ben1980", "link": "https://stackoverflow.com/users/1541782/ben1980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 57501100, "answer_count": 4, "score": 2, "last_activity_date": 1565816358, "creation_date": 1565811610, "last_edit_date": 1565811889, "question_id": 57501025, "link": "https://stackoverflow.com/questions/57501025/how-to-fix-no-match-for-operator-operand-types-are-matrixdouble-2-3-a", "title": "How to fix &#39;no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)&#39; with templates", "body": "<p>I'm trying to implement a template based Matrix class in C++17. The class should override operator*() to allow formulations such as</p>\n\n<pre><code>Matrix&lt;double, 2, 3&gt; a = {{{3,2,1},{1,0,2}}};\nMatrix&lt;double, 3, 2&gt; b = {{{1,2},{0,1},{4,0}}};\nMatrix c = a * b;\n</code></pre>\n\n<p>but this is causing a compiler error.</p>\n\n<pre><code>no match for \u2018operator*\u2019 (operand types are \u2018Matrix&lt;double, 2, 3&gt;\u2019 and \u2018Matrix&lt;double, 3, 2&gt;\u2019)\n   43 |     Matrix c = a * b;\n      |                ~ ^ ~\n      |                |   |\n      |                |   Matrix&lt;[...],3,2&gt;\n      |                Matrix&lt;[...],2,3&gt;\n</code></pre>\n\n<p>I know in principle Matrix a and b are completely different types but somehow I think it should be possible because both, 2nd and 3rd, template arguments are of type size_t.</p>\n\n<pre><code>template &lt;typename T, size_t nbRows, size_t nbColumns&gt;\nclass Matrix {\npublic:\n    Matrix(std::vector&lt;std::vector&lt;T&gt;&gt; &amp;&amp;vector) {\n        assert(vector.size() == nbRows);\n        assert(vector.front().size() == nbColumns);\n\n        auto matrixIter = matrix.begin();\n        for(auto &amp;&amp; row : vector) {\n            std::copy_n(std::make_move_iterator(row.begin()), nbColumns, matrixIter);\n            std::advance(matrixIter, nbColumns);\n        }\n    }\n\n    friend inline Matrix operator*(Matrix lhs, const Matrix &amp;rhs) {\n        // Compute the product of lhs and rhs\n        return lhs;\n    }\n\nprivate:\n    std::array&lt;T, nbRows * nbColumns&gt; matrix;\n};\n</code></pre>\n"}, {"tags": ["c++", "string-literals", "static-assert"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1565811720, "post_id": 57501016, "comment_id": 101471429, "body": "Not possible. It must be a string literal."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1565811763, "post_id": 57501016, "comment_id": 101471442, "body": "Related: <a href=\"https://stackoverflow.com/q/7778734/1896169\">stackoverflow.com/q/7778734/1896169</a>"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565811774, "post_id": 57501016, "comment_id": 101471446, "body": "I&#39;ve used <code>static constexpr auto name[] = &quot;&quot;</code> before, have you tried that already?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565811895, "post_id": 57501016, "comment_id": 101471478, "body": "@JVApen Are you sure.  <code>static_assert</code> requires the message to be a string literal."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565811944, "post_id": 57501016, "comment_id": 101471492, "body": "No, ain&#39;t sure, I know it works in some template situations where everything else ain&#39;t working"}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565812082, "post_id": 57501016, "comment_id": 101471546, "body": "@JVApen It doesn&#39;t seem to work"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565812292, "post_id": 57501016, "comment_id": 101471621, "body": "@JesperJuhl The compiler will most likely not even include those strings in the executable. I&#39;d be surprised if they existed even on <code>-O0</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1565812419, "post_id": 57501016, "comment_id": 101471672, "body": "@Justin - Well, it has to include them at least <i>once</i> ;-)"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1565812466, "post_id": 57501016, "comment_id": 101471695, "body": "@JesperJuhl No, it doesn&#39;t. The string literal is being used inside a <code>static_assert</code> and is never used at runtime"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1565812532, "post_id": 57501016, "comment_id": 101471715, "body": "@Justin - my bad. Right you are."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1565812606, "creation_date": 1565812606, "answer_id": 57501226, "question_id": 57501016, "link": "https://stackoverflow.com/questions/57501016/how-to-pass-a-not-explicitly-string-literal-error-message-to-a-static-assert/57501226#57501226", "title": "How to pass a not explicitly string literal error message to a static_assert?", "body": "<p>You either have to copy-paste the literal, or use the preprocessor.  Per <a href=\"https://timsong-cpp.github.io/cppwp/dcl.dcl#1\" rel=\"nofollow noreferrer\">[dcl.dcl]/1</a> The grammar of <code>static_assert</code> is defined as</p>\n\n<blockquote>\n<pre><code>static_assert-declaration:\n      static_\u00adassert ( constant-expression ) ;\n      static_\u00adassert ( constant-expression , string-literal ) ;\n</code></pre>\n</blockquote>\n\n<p>So you either provide a string literal, or you don't.  There is no other way to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 3, "last_activity_date": 1565848407, "creation_date": 1565848407, "answer_id": 57505373, "question_id": 57501016, "link": "https://stackoverflow.com/questions/57501016/how-to-pass-a-not-explicitly-string-literal-error-message-to-a-static-assert/57505373#57505373", "title": "How to pass a not explicitly string literal error message to a static_assert?", "body": "<p>Your question sounds a lot like a variation: <a href=\"https://stackoverflow.com/a/55800316/2466431\">How to make static_assert block re-usable in template classes?</a></p>\n\n<p>You have defined it a bit to generic, however, as you want to reuse the same 'error' message, I would assume that your check will also be similar. Let's use an example where you want to force inheritance:</p>\n\n<pre><code> struct Interface {};\n struct Impl : Interface {};\n struct Other {};\n static_assert(std::is_base_of_v&lt;Interface, Impl&gt;, \"Implementations should inherit from the interface. See document at ... for more details.\"); // Success\n static_assert(std::is_base_of_v&lt;Interface, Other&gt;, \"Implementations should inherit from the interface. See document at ... for more details.\"); // Failure\n</code></pre>\n\n<p>Here, it might make sense to implement your own type trait. For example:</p>\n\n<pre><code> template&lt;typename T&gt; using FrameworkInjectionRequirement = std::is_base_of&lt;Interface, T&gt;\n template&lt;typename T&gt; constexpr bool FrameworkInjectionRequirement_v = FrameworkInjectionRequirement&lt;T&gt;::value;\n\n  static_assert(FrameworkInjectionRequirement_v&lt;Impl&gt;);\n</code></pre>\n\n<p>By doing this, you already gave a good name to what you try to check, which could be sufficient in order to use the terse version of static_assert instead, without needing an explanation.</p>\n\n<p>Alternatively, you could wrap you assert into a struct:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct FrameworkInjectionRequirement {\n    static_assert(std::is_base_of_v&lt;Interface, T&gt;, \"Implementations should inherit from the interface. See document at ... for more details.\");\n};\nconstexpr static FrameworkInjectionRequirement&lt;Impl&gt; check{}; // Success\nconstexpr static FrameworkInjectionRequirement&lt;Other&gt; check{}; // Failure\n</code></pre>\n\n<p>By instantiating this zero-size struct at compile time (thanks to <code>constexpr</code> on the variable), the assert will be checked.\nNot only can you reuse the message into it, you again gave your check a good name. As a bonus, you can split up the different elements creating the boolean expression into it's distinct elements, which will assist you if one of them fails.</p>\n"}], "owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 57501226, "answer_count": 2, "score": 2, "last_activity_date": 1565848407, "creation_date": 1565811568, "last_edit_date": 1565812853, "question_id": 57501016, "link": "https://stackoverflow.com/questions/57501016/how-to-pass-a-not-explicitly-string-literal-error-message-to-a-static-assert", "title": "How to pass a not explicitly string literal error message to a static_assert?", "body": "<p>I have a few static asserts in different places in code.</p>\n\n<pre><code>static_assert(bool_constexpr_1, error_message);\n...\nstatic_assert(bool_constexpr_2, error_message);\n</code></pre>\n\n<p>And want all of them to share the same <code>error_message</code>.</p>\n\n<p>The first solution is to copy-paste the message.</p>\n\n<p>The second one is to <code>#define</code> the <code>error_message</code>.</p>\n\n<p>Is there something better?</p>\n\n<p>P.S. I expected <code>static constexpr auto</code> to work, yet it failed.</p>\n"}, {"tags": ["c++", "multithreading", "qtconcurrent"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565810837, "post_id": 57500822, "comment_id": 101471130, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful to illustrate your problem."}, {"owner": {"reputation": 15329, "user_id": 4207306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJ1g9.jpg?s=128&g=1", "display_name": "Eklavya", "link": "https://stackoverflow.com/users/4207306/eklavya"}, "edited": false, "score": 0, "creation_date": 1565810949, "post_id": 57500822, "comment_id": 101471173, "body": "please illustrate your problem with example"}, {"owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "edited": false, "score": 0, "creation_date": 1565811319, "post_id": 57500822, "comment_id": 101471301, "body": "Sorry I should have put more effort into my initial post."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565811735, "post_id": 57500822, "comment_id": 101471434, "body": "Why <code>string args[7]</code> rather than <code>std::array</code>? Why would you <i>ever</i> prefer a raw C-style array over <code>std::array</code> or <code>std::vector</code>?"}, {"owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "edited": false, "score": 0, "creation_date": 1565811846, "post_id": 57500822, "comment_id": 101471467, "body": "I did not know about that but I will look into it. So far in c++ i have only used vectors and c-style arrays."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565812074, "post_id": 57500822, "comment_id": 101471544, "body": "<a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/array</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "is_accepted": false, "score": 0, "last_activity_date": 1565815526, "creation_date": 1565815526, "answer_id": 57501818, "question_id": 57500822, "link": "https://stackoverflow.com/questions/57500822/how-do-you-pass-a-string-array-into-qtconcurrentrun/57501818#57501818", "title": "How do you pass a string array into QtConcurrent::run?", "body": "<p>Never use C-Style Arrays in QtConcurrent::run. Use C++ std::array instead. Thank you Jesper Juhl!</p>\n"}], "owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1565815526, "creation_date": 1565810568, "last_edit_date": 1565811555, "question_id": 57500822, "link": "https://stackoverflow.com/questions/57500822/how-do-you-pass-a-string-array-into-qtconcurrentrun", "title": "How do you pass a string array into QtConcurrent::run?", "body": "<p>In my program QtConcurrent Run does not accept my array of strings or my array of bools. Do I need to convert them into QByteArrays for the data to be passed in?</p>\n\n<p>According to the documentation this works:</p>\n\n<pre><code>extern QString someFunction(const QByteArray &amp;input);\n\nQByteArray bytearray = ...;\n\nQFuture&lt;QString&gt; future = QtConcurrent::run(someFunction, bytearray);\n...\nQString result = future.result();\n</code></pre>\n\n<p>In my program this does not work:</p>\n\n<pre><code>extern void test(string args[]);\nstring args[7]={\"blue\"};\nQFuture&lt;void&gt; future = QtConcurrent::run(test, args);\n</code></pre>\n\n<p>Error: C2075-- array initialization requires a brace-enclosed initializer list</p>\n"}, {"tags": ["c++", "visual-studio-code"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565810437, "post_id": 57500703, "comment_id": 101470991, "body": "Why do you care what intellisense says? What <i>matters</i> is what the actual compiler says. Intellisense is just (unreliable) sugar in your IDE."}, {"owner": {"reputation": 345, "user_id": 6562851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe826ca6a948af29e85abdecb68bd3e0?s=128&d=identicon&r=PG&f=1", "display_name": "brenzo", "link": "https://stackoverflow.com/users/6562851/brenzo"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 7, "creation_date": 1565810558, "post_id": 57500703, "comment_id": 101471039, "body": "Yes of course, but I&#39;d like to use intellisense without having all my source files covered in red lines."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1565815857, "post_id": 57500703, "comment_id": 101472940, "body": "@brenzo Try closing the project and deleting the intellisense database file from your project. It will be regenerated the next time you open your project."}, {"owner": {"reputation": 345, "user_id": 6562851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe826ca6a948af29e85abdecb68bd3e0?s=128&d=identicon&r=PG&f=1", "display_name": "brenzo", "link": "https://stackoverflow.com/users/6562851/brenzo"}, "edited": false, "score": 0, "creation_date": 1565884150, "post_id": 57500703, "comment_id": 101492981, "body": "Unfortunately this did not resolve the issue."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1579773637, "post_id": 57500703, "comment_id": 105881610, "body": "This might not be the exact same issue, but this solution helped me (I also had these annoying red lines): <a href=\"https://stackoverflow.com/a/56008710/5462551\">stackoverflow.com/a/56008710/5462551</a>"}], "owner": {"reputation": 345, "user_id": 6562851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe826ca6a948af29e85abdecb68bd3e0?s=128&d=identicon&r=PG&f=1", "display_name": "brenzo", "link": "https://stackoverflow.com/users/6562851/brenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3282, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1565809939, "creation_date": 1565809939, "question_id": 57500703, "link": "https://stackoverflow.com/questions/57500703/vscode-c-c-intellisense-identifier-undefined-but-can-resolve-definition", "title": "VSCode C/C++ IntelliSense identifier undefined, but can resolve definition", "body": "<p>New install of VSCode. The only extension I have installed is the Microsoft C/C++ Intellisense plugin. Version 0.24.1</p>\n\n<p>I'm working with a codebase that has some header files with #define X foo macros. In the .cpp files it underlines these in red and says \"identifier X is undefined\". However if I ctrl+click/F12 it takes me to the .h file(s) with the macro defined. </p>\n\n<p>This is the only extension I have right now so I don't think it's an issue of plugins competing. It seems common to macros with multiple definitions. i.e. we have</p>\n\n<p><code>chipset1/include/registers.h</code> and</p>\n\n<p><code>chipset2/include/registers.h</code> </p>\n\n<p>which might both <code>#define REG1 0xF00</code> or similar. However I only have <code>\"${workspaceFolder}/chipset1/include\"</code> in my <code>.vscode/c_cpp_properties.json</code> file. So I don't know why it's searching the chipset2 definitions as well. Perhaps this is causing the issue and the error message is misleading and should really say something like \"multiple definitions found\"? Still unsure why this behavior is occurring.</p>\n"}, {"tags": ["c++", "performance", "if-statement", "function-pointers", "ternary-operator"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 15, "creation_date": 1565807747, "post_id": 57500261, "comment_id": 101469995, "body": "Any decent compiler will output the same assembly for both. This is next-level premature optimization and something you shouldn&#39;t care about. Pick the one that is most readable and fits into your project style."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565807830, "post_id": 57500261, "comment_id": 101470027, "body": "Any benchmarks you did so far? Why would you assume that either method should be superior about the other one. Your question is unclear."}, {"owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565808004, "post_id": 57500261, "comment_id": 101470095, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yes, but the results seem inconsistent."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1565808083, "post_id": 57500261, "comment_id": 101470118, "body": "@Hydren what are the signatures for <code>foo</code> and <code>bar</code>? Can you show an example where the results are inconsistent?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1565808087, "post_id": 57500261, "comment_id": 101470122, "body": "@SombreroChicken Your answer has been migrated to the proper place."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565808092, "post_id": 57500261, "comment_id": 101470123, "body": "@Hydren Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show the inconsitency."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1565808210, "post_id": 57500261, "comment_id": 101470169, "body": "@SombreroChicken Looks like <a href=\"https://godbolt.org/z/R-qR__\" rel=\"nofollow noreferrer\">gcc</a> and <a href=\"https://godbolt.org/z/_frz38\" rel=\"nofollow noreferrer\">clang</a> both produce different assembly for the two cases though it&#39;s not clear to me if there is any real performance difference. Notice that the one with the conditional operator first determines which function to call, then actually performs the call outside of the conditional branch."}, {"owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565808294, "post_id": 57500261, "comment_id": 101470202, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 This was the <a href=\"http://codepad.org/RdX4UTnx\" rel=\"nofollow noreferrer\">code</a> I used to test"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565808360, "post_id": 57500261, "comment_id": 101470226, "body": "@Hydren <a href=\"https://stackoverflow.com/posts/57500261/edit\">Edit</a> your question please! Your links don&#39;t help much."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1565808772, "post_id": 57500261, "comment_id": 101470379, "body": "<code>time_t</code> is a blunt force instrument when benchmarking. It provides seconds. Next, the cost of the conditional is insignificant compared to the cost of the writing to the console. I think you are mostly measuring <code>cout &lt;&lt; blah</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565809230, "post_id": 57500261, "comment_id": 101470540, "body": "@Hydren 1st you ask about perfomance, then you ask about result correcteness? Be more specific please!"}, {"owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565809444, "post_id": 57500261, "comment_id": 101470610, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m asking about performance. I&#39;m not sure when I asked about correcteness."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565809547, "post_id": 57500261, "comment_id": 101470652, "body": "@Hydren <i>&quot;Yes, but the results seem inconsistent.&quot;</i> Explain inconsitency then please. Your question is still unclear."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1565809856, "post_id": 57500261, "comment_id": 101470778, "body": "with both <a href=\"https://wandbox.org/permlink/VlwFykoVC6J2d9Kd\" rel=\"nofollow noreferrer\">gcc</a> and <a href=\"https://wandbox.org/permlink/TU7OCN83ONU46y01\" rel=\"nofollow noreferrer\">clang</a>, and a more useful version of OP&#39;s code, if-else seems to perform slightly better consistently, but negligibly so. Without optimizations the gap is a bit wider."}, {"owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565810028, "post_id": 57500261, "comment_id": 101470840, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I meant the <i>performance results</i> of my tests seemed inconsistent. Sometimes the ternary ran faster, sometimes the if-else ran faster, sometimes equal..."}, {"owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1565810154, "post_id": 57500261, "comment_id": 101470882, "body": "@RyanHaining, can you provide an improved of my test code, so I can edit the question with it?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1565810207, "post_id": 57500261, "comment_id": 101470896, "body": "@Hydren First, you should get rid of all the <code>cout</code>s within the timed sections of your code. Printing is comparatively slow, so you are likely just timing how long it takes to print your output."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1565810268, "post_id": 57500261, "comment_id": 101470923, "body": "@Hydren click the links in my previous comment. global <code>&#47;dev&#47;null</code> object is a bad idea typically, I just used it to be fast"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565810484, "post_id": 57500261, "comment_id": 101471011, "body": "@Hydren Again: Show your benchmarks that show the performance difference."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1565812418, "post_id": 57500261, "comment_id": 101471671, "body": "Your <code>if</code> statement will compile into assembly language as:  compare; branch if false to A:, call foo; jump Around; A: call bar; Around: return; That&#39;s not many instructions.  You bottleneck is elsewhere.  Your ternary operator should evaluate to the same code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1565823362, "post_id": 57500261, "comment_id": 101474849, "body": "Regarding the revised code: <code>pow</code> is not as expensive as <code>cout &lt;&lt; blah &lt;&lt; pow</code>, but <code>pow</code> is still quite expensive and will be drowning the minor difference between the two conditionals. To be honest, the difference is also probably lost in the expense of the for loops. If there is any, it&#39;s really, really small. You&#39;ll probably need billions and billions of iterations to be able to see it above the general noise of the system."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565809325, "post_id": 57500332, "comment_id": 101470565, "body": "There&#39;s probably a reason why comments are commrents and not answers."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565809853, "post_id": 57500332, "comment_id": 101470776, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I think that the quote is just in time and looks good as an answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565826335, "post_id": 57500332, "comment_id": 101475372, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Unfortunately, much of the time, that reason is wrong. This is one of those times! Comments are for requesting clarification, and for having arguments :)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1565808064, "creation_date": 1565808064, "answer_id": 57500332, "question_id": 57500261, "link": "https://stackoverflow.com/questions/57500261/if-else-vs-ternary-function-call-performance/57500332#57500332", "title": "if-else vs Ternary function call performance", "body": "<p>Migrated from comments:</p>\n\n<blockquote>\n  <p>Any decent compiler will output the same assembly for both. This is next-level premature optimization and something you shouldn't care about. Pick the one that is most readable and fits into your project style. &mdash;<a href=\"https://stackoverflow.com/users/1870760/sombrero-chicken\">Sombrero Chicken</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1565874424, "last_edit_date": 1565874424, "creation_date": 1565808822, "answer_id": 57500485, "question_id": 57500261, "link": "https://stackoverflow.com/questions/57500261/if-else-vs-ternary-function-call-performance/57500485#57500485", "title": "if-else vs Ternary function call performance", "body": "<p>There is no problem with the performance. The compiler can generate the same object code for the both cases.</p>\n\n<p>However there is a difference in applying these constructions.</p>\n\n<p>For the conditional operator there must be deduced the common type of its second and third operands.</p>\n\n<p>For example if you have the following functions</p>\n\n<pre><code>void foo( int, int, int ) {}\nint bar( int, int, int ) { return 10; } \n</code></pre>\n\n<p>then you can use the if-statement as it is shown in the demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid foo( int, int, int ) {}\nint bar( int, int, int ) { return 10; }         \n\nint main()\n{\n    int x;\n    std::cin &gt;&gt; x;\n\n    if ( x &lt; 10 )\n    {\n        foo( x, x, x );\n    }\n    else\n    {\n        bar( x, x, x );\n    }\n}\n</code></pre>\n\n<p>However you may not write as it seems an equivalent code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid foo( int, int, int ) {}\nint bar( int, int, int ) { return 10; }         \n\nint main()\n{\n    int x;\n    std::cin &gt;&gt; x;\n\n    x &lt; 10 ? foo( x, x, x ) : bar( x, x, x );\n}\n</code></pre>\n\n<p>because the compiler is unable to deduce the common type of the calls <code>foo( x, x, x )</code> and <code>bar( x, x, x )</code>. The first one has the type <code>void</code> and the second one has the type <code>int</code>.</p>\n\n<p>Of course you could write instead</p>\n\n<pre><code>    x &lt; 10 ? foo( x, x, x ) : ( void )bar( x, x, x );\n</code></pre>\n\n<p>but sometimes this makes code less readable when compound expressions are used. And moreover sometimes it is even impossible to deduce the common type because there is no  explicit or implicit conversion between expressions especially for user-defined types.</p>\n\n<p>Another example. You can write a function to allow the compiler to deduce its return type.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nconstexpr auto factorial( unsigned long long int n )\n{\n    if ( n &lt; 2 )\n    {\n        return n;\n    }\n    else\n    {\n        return n * factorial( n - 1 );\n    }        \n}\n\nint main()\n{\n    int a[factorial( 5 )];\n\n    std::cout &lt;&lt; \"The array has \" &lt;&lt; sizeof( a ) / sizeof( *a ) &lt;&lt; \" elements\\n\";\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>The array has 120 elements\n</code></pre>\n\n<p>On the other hand, you may not write</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nconstexpr auto factorial( unsigned long long int n )\n{\n    return n &lt; 2 ? n : n * factorial( n - 1 );\n}\n\nint main()\n{\n    int a[factorial( 5 )];\n\n    std::cout &lt;&lt; \"The array has \" &lt;&lt; sizeof( a ) / sizeof( *a ) &lt;&lt; \" elements\\n\";\n}\n</code></pre>\n\n<p>The compiler is unable to deduce the return type of the function.</p>\n\n<p>So sometimes there is even no choice between whether to use the if-statement or the conditional expression:)</p>\n"}], "owner": {"reputation": 323, "user_id": 1869505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b2c5411e7c9389e48edb56725c981e6d?s=128&d=identicon&r=PG", "display_name": "Hydren", "link": "https://stackoverflow.com/users/1869505/hydren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "closed_date": 1565925268, "answer_count": 2, "score": 0, "last_activity_date": 1565874424, "creation_date": 1565807680, "last_edit_date": 1565810874, "question_id": 57500261, "link": "https://stackoverflow.com/questions/57500261/if-else-vs-ternary-function-call-performance", "closed_reason": "Duplicate", "title": "if-else vs Ternary function call performance", "body": "<p>In my C++ code, I have to select between two functions that take the same arguments based on a given condition. I could write:</p>\n\n<pre><code>if (condition) \n   return foo(a, b, c);\nelse\n   return bar(a, b, c);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>return (condition? foo : bar)(a, b, c);\n</code></pre>\n\n<p>But which of these two ways is faster?</p>\n\n<p>EDIT:</p>\n\n<p>I tried to test using this code:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid foo(float x, float y, int param)\n{\n    pow(x+y, param);\n}\n\nvoid bar(float x, float y, int param)\n{\n    pow(x+y, param);\n}\n\nint main() {\n\n    const int loops = 1000;\n\n    auto t1 = chrono::high_resolution_clock::now();\n    for(int i = 0; i &lt; loops; i++)\n        for(int j = 0; j &lt; loops; j++)\n            (i==j? foo : bar)(i, j, 2);\n\n    auto t2 = chrono::high_resolution_clock::now();\n\n    for(int i = 0; i &lt; loops; i++)\n        for(int j = 0; j &lt; loops; j++)\n            if(i==j)\n                foo(i, j, 2);\n            else\n                bar(i, j, 2);\n\n    auto t3 = chrono::high_resolution_clock::now();\n\n    cout &lt;&lt; \"ternary: \" &lt;&lt; (chrono::duration_cast&lt;chrono::microseconds&gt;(t2-t1).count()) &lt;&lt; \"us\" &lt;&lt; endl;\n    cout &lt;&lt; \"if-else: \" &lt;&lt; (chrono::duration_cast&lt;chrono::microseconds&gt;(t3-t2).count()) &lt;&lt; \"us\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>With the updated test code I got:</p>\n\n<pre><code> ternary: 70951us\n if-else: 67962us\n</code></pre>\n"}, {"tags": ["c++", "arduino", "c++14"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1565807935, "post_id": 57500244, "comment_id": 101470074, "body": "@EugeneSh. If you have the answer, please write it in the <i>answer section</i>, not here. Thanks."}, {"owner": {"reputation": 973, "user_id": 3249421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/1539529362/picture?type=large", "display_name": "JaSHin", "link": "https://stackoverflow.com/users/3249421/jashin"}, "edited": false, "score": 0, "creation_date": 1565808113, "post_id": 57500244, "comment_id": 101470132, "body": "Oh. Sorry. I have fixeed it but value is still wrong. Instead of <code>\u2e2e\u2e2e</code> there is now <code>220</code> but is wrong. Correct value is <code>1500</code>"}], "answers": [{"comments": [{"owner": {"reputation": 973, "user_id": 3249421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/1539529362/picture?type=large", "display_name": "JaSHin", "link": "https://stackoverflow.com/users/3249421/jashin"}, "edited": false, "score": 0, "creation_date": 1565809045, "post_id": 57500407, "comment_id": 101470477, "body": "How can I get all bytes?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 973, "user_id": 3249421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/1539529362/picture?type=large", "display_name": "JaSHin", "link": "https://stackoverflow.com/users/3249421/jashin"}, "edited": false, "score": 0, "creation_date": 1565809159, "post_id": 57500407, "comment_id": 101470520, "body": "I think <code>SoftwareSerial</code> can only read one byte at a time. So loop."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1565808445, "creation_date": 1565808445, "answer_id": 57500407, "question_id": 57500244, "link": "https://stackoverflow.com/questions/57500244/cant-get-original-value-after-sending-by-serial-port/57500407#57500407", "title": "Can&#39;t get original value after sending by serial port", "body": "<p><a href=\"https://www.arduino.cc/en/Reference/SoftwareSerialRead\" rel=\"nofollow noreferrer\"><code>SoftwareSerial::read</code></a> is returning a single byte read.\nIf you examine the expected <code>1500</code> in hexadecimal it is <code>0x05DC</code>, and it's lower byte is <code>0xDC</code> which is exactly <code>220</code> in decimal. </p>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1565810267, "post_id": 57500708, "comment_id": 101470922, "body": "<code>write</code> can work with multibyte data according to <a href=\"https://www.arduino.cc/en/Reference/SoftwareSerialWrite\" rel=\"nofollow noreferrer\">documentation</a>."}, {"owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1565810593, "post_id": 57500708, "comment_id": 101471050, "body": "Interesting it&#39;s not in linked source code. Maybe different library."}, {"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1565810870, "post_id": 57500708, "comment_id": 101471146, "body": "all methods are in the base class Print and are implemented using pure virtual write(byte) which must be implemented in derived class. and learn how to decompose a multibyte value to bytes before writing an answer on Stack Overflow"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1565811945, "post_id": 57500708, "comment_id": 101471493, "body": "The point is that with this method you will have three byte transmissions to transmit a single byte such as <code>112</code> <i>and</i> you will have three relatively heavy divide-by-10 and three modulus-10 operations to do so."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1565812143, "post_id": 57500708, "comment_id": 101471571, "body": "Another issue: <code>BTSerial.read()</code>  return <code>-1</code> if no byte is available."}, {"owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1565814743, "post_id": 57500708, "comment_id": 101472558, "body": "@thebusybee Good point, corrected my code. Rest of my code I leave as it is. It is not meant to be good to go solution, but inspiration - especially since the library offers API for integers."}], "tags": [], "owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "is_accepted": false, "score": 0, "last_activity_date": 1565814677, "last_edit_date": 1565814677, "creation_date": 1565809968, "answer_id": 57500708, "question_id": 57500244, "link": "https://stackoverflow.com/questions/57500244/cant-get-original-value-after-sending-by-serial-port/57500708#57500708", "title": "Can&#39;t get original value after sending by serial port", "body": "<p>In documentation <a href=\"https://github.com/PaulStoffregen/SoftwareSerial/blob/master/SoftwareSerial.cpp\" rel=\"nofollow noreferrer\">https://github.com/PaulStoffregen/SoftwareSerial/blob/master/SoftwareSerial.cpp</a>, you can see that both functions work with uint_8t -- which is guaranteed to have 8 bits (1 byte). That holds up to 256 of value, so <strong>1500 mod 256 is 220</strong>.</p>\n\n<p>Looks like the library is prepared to transmit only char-sized data, so you need to convert bigger numbers on both size.</p>\n\n<p>For sending int:</p>\n\n<pre><code>int n = pwmValue;\n\nwhile (n &gt; 0) {\n    int digit = n % 10;\n    n = n / 10;\n    BTSerial.write(digit);\n}\n</code></pre>\n\n<p>For receiving int:</p>\n\n<pre><code>int n = 0; //future result\nint decs = 1;\nint temp;\n\nwhile ((temp = BTSerial.read()) != -1) {\n    n += temp * decs;\n    decs *= 10;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1565811421, "post_id": 57500843, "comment_id": 101471336, "body": "Oh, I&#39;m sorry. I was misled by <code>Serial.read()</code> that has this overloaded variant. I&#39;ll edit the answer."}], "tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 1, "last_activity_date": 1565816003, "last_edit_date": 1565816003, "creation_date": 1565810654, "answer_id": 57500843, "question_id": 57500244, "link": "https://stackoverflow.com/questions/57500244/cant-get-original-value-after-sending-by-serial-port/57500843#57500843", "title": "Can&#39;t get original value after sending by serial port", "body": "<p>With the multi-byte variant of <code>write()</code> you could use:</p>\n\n<pre><code>BTSerial.write(&amp;pwmValue, sizeof pwmValue);\n</code></pre>\n\n<p>For receiving you need a loop:</p>\n\n<pre><code>union {\n    int  i;\n    char c[0];\n} pwmValue;\nint receivedBytes = 0;\n\nvoid loop() {\n    if (BTSerial.available()) {\n        pwmValue.c[receivedBytes] = BTSerial.read();\n        receivedBytes++;\n        if (receivedBytes == sizeof pwmValue) {\n            Serial.println(pwmValue.i);\n            receivedBytes = 0;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 973, "user_id": 3249421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/1539529362/picture?type=large", "display_name": "JaSHin", "link": "https://stackoverflow.com/users/3249421/jashin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1565816003, "creation_date": 1565807600, "last_edit_date": 1565815638, "question_id": 57500244, "link": "https://stackoverflow.com/questions/57500244/cant-get-original-value-after-sending-by-serial-port", "title": "Can&#39;t get original value after sending by serial port", "body": "<p>I have written a simple code for sending int value using bluetooth serial port. </p>\n\n<p>Transmitter:</p>\n\n<pre><code>#include &lt;SoftwareSerial.h&gt;\n#include \"PWM.hpp\"\n\nPWM PWM(2);\nSoftwareSerial BTSerial(8,9);\n\nvoid setup()\n{\n  Serial.begin(9600);   \n  Serial.println(\"Go\");\n  BTSerial.begin(9600);  \n  BTSerial.write(\"AT+INQ\\r\\n\");\n  delay(10000); \n  BTSerial.write(\"AT+CONN1\\r\\n\");\n  delay(100);\n  PWM.begin(true);\n}\n\nvoid loop()\n{\n  int pwmValue = PWM.getValue();\n  Serial.println(pwmValue);\n  BTSerial.write(pwmValue); \n  delay(100);\n}\n</code></pre>\n\n<p>Output of <code>Serial.println</code> of transmitter part is correct:</p>\n\n<pre><code>1500\n</code></pre>\n\n<p>but on receiver part isn't. This is the code of receiver:</p>\n\n<pre><code>#include &lt;SoftwareSerial.h&gt;\n\nSoftwareSerial BTSerial(8, 9);\n\nvoid setup() {\n  Serial.begin(9600);\n  BTSerial.begin(9600);\n  BTSerial.write(\"AT+NAME=Remote\\r\\n\");\n}\n\nvoid loop() {\n\n if (BTSerial.available()) {\n  int pwmValue = BTSerial.read();\n  Serial.println(pwmValue);\n }\n</code></pre>\n\n<p>Incorrect output of <code>Serial.println</code> is:</p>\n\n<pre><code>220\n</code></pre>\n\n<p>I think the issue is in typecasting.</p>\n"}, {"tags": ["c++", "gcc", "c++14", "thread-sanitizer"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1565806529, "post_id": 57499943, "comment_id": 101469477, "body": "Regarding the close vote: how can I make the question clearer?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1565806678, "post_id": 57499943, "comment_id": 101469540, "body": "Just curious; <i>why</i> do you need this?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565806748, "post_id": 57499943, "comment_id": 101469574, "body": "@JesperJuhl TSAN does not instrument some things correctly in the older gcc-based versions. Eg. inline assembly"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565806793, "post_id": 57499943, "comment_id": 101469593, "body": "&quot;Detect&quot; how? When? Why? On what?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565806891, "post_id": 57499943, "comment_id": 101469647, "body": "@LightnessRacesinOrbit I&#39;m not sure what you mean, isn&#39;t there just one meaning for &quot;detecting&quot; in this context? Similar to <a href=\"https://en.cppreference.com/w/cpp/feature_test\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/feature_test</a>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565806952, "post_id": 57499943, "comment_id": 101469679, "body": "&quot;TSAN does not instrument some things correctly in the older gcc-based versions&quot; - Isn&#39;t the solution then to just use <i>newer</i> gcc versions (which may also bring other benefits)?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565806963, "post_id": 57499943, "comment_id": 101469688, "body": "What I&#39;m saying is you did not tell us what sort of outcome you want. Do you need a macro? A variable? A function call? A command-line utility? What?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565807025, "post_id": 57499943, "comment_id": 101469719, "body": "@JesperJuhl I would, but some libraries that we support rely can&#39;t yet migrate to the newer versions of the compiler since the targetted client code uses the older version"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565807167, "post_id": 57499943, "comment_id": 101469759, "body": "@LightnessRacesinOrbit Not quite sure what it means to be binary-safe in this context, but I can&#39;t really control when everyone using the library upgrades their compiler. Nor can I do it myself"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 4, "creation_date": 1565807417, "post_id": 57499943, "comment_id": 101469860, "body": "<code>__SANITIZE_THREAD__</code> is only present in gcc-7+."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565807474, "post_id": 57499943, "comment_id": 101469887, "body": "@LightnessRacesinOrbit I have to what exactly?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565807758, "post_id": 57499943, "comment_id": 101470002, "body": "@LightnessRacesinOrbit I see; the build model for this library is not the typical &quot;distribute binary and include headers&quot; one that you might be talking about (correct me if I am wrong). It gets included and built from scratch along with the client code."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565808086, "post_id": 57499943, "comment_id": 101470121, "body": "@LightnessRacesinOrbit I didn&#39;t even consider binary compatibility? You bought it up no? What am I missing? I just need the library code to compile and run without error on older compiler versions (which is why I need the feature check macro)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565808171, "post_id": 57499943, "comment_id": 101470154, "body": "@Curious Okay, that makes sense"}], "answers": [{"comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1565807602, "post_id": 57500218, "comment_id": 101469945, "body": "It isn&#39;t a last resort, it comes not long after checking the doc. Sadly, in this case, with gcc-5, the output is empty."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1565808433, "post_id": 57500218, "comment_id": 101470256, "body": "Could you explain how this command works? And what it&#39;s doing? Curious :)"}, {"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1565809056, "post_id": 57500218, "comment_id": 101470483, "body": "@Curious <code>-E</code> invokes the preprocessor and sends the output to stdout.  <code>-dM</code> displays defined macros (requires <code>-E</code> to be specified).  <code>-x c</code> forces compilation as a C file. (you could alternatively use <code>-x c++</code>) and finally <code>&#47;dev&#47;null</code> sets the input file to <code>&#47;dev&#47;null</code> (nothing).  Then it diffs this preprocessor output with and without the <code>-fsanitize=thread</code> flag."}], "tags": [], "owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "is_accepted": true, "score": 3, "last_activity_date": 1565808435, "last_edit_date": 1565808435, "creation_date": 1565807467, "answer_id": 57500218, "question_id": 57499943, "link": "https://stackoverflow.com/questions/57499943/how-to-detect-thread-sanitizer-for-gcc-5/57500218#57500218", "title": "How to detect thread sanitizer for gcc 5", "body": "<p>I don't know, but as a last resort, the following command line will find a <em>#define</em> if it exists:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>diff &lt;(gcc -dM -E -x c /dev/null) &lt;(gcc -fsanitize=thread -dM -E -x c /dev/null)\n</code></pre>\n\n<p>On my gcc 7.4.0 it outputs:</p>\n\n<pre>\n> #define __SANITIZE_THREAD__ 1\n</pre>\n\n<p>...which means that <code>__SANITIZE_THREAD__</code> is defined to be <code>1</code> if you are using <code>-fsanitize=thread</code>, but is <strong>not defined</strong> if you don't.  So you should guard your code behind an <code>#ifdef __SANITIZE_THREAD__</code> rather than just using the symbol directly.</p>\n\n<h2>Additional Info:</h2>\n\n<p>I <a href=\"https://github.com/gcc-mirror/gcc/commit/ed0b0569e1f4ee44bddb565f3331b4f09a5f592b\" rel=\"nofollow noreferrer\">checked the gcc source</a> and the <code>__SANITIZE_THREAD__</code> macro was not introduced until version 7.1.0.</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 57500218, "answer_count": 1, "score": 3, "last_activity_date": 1565808435, "creation_date": 1565806097, "last_edit_date": 1565807091, "question_id": 57499943, "link": "https://stackoverflow.com/questions/57499943/how-to-detect-thread-sanitizer-for-gcc-5", "title": "How to detect thread sanitizer for gcc 5", "body": "<p>How can I detect whether thread sanitizer has been turned on for a build using gcc 5? Neither one of the two between <code>__has_feature(thread_sanitizer)</code> nor <code>__SANITIZE_THREAD__</code> work </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::cout;\nusing std::endl;\n\nint main() {\n    cout &lt;&lt; __has_feature(thread_sanitizer) &lt;&lt; endl;\n    cout &lt;&lt; __SANITIZE_THREAD__ &lt;&lt; endl;\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/t5qYme4Whyj54aYV\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/t5qYme4Whyj54aYV</a>. This compiles on the versions of clang that have thread sanitizer; but not for some gcc versions (5 in particular)</p>\n\n<hr>\n\n<p>Both the feature check and the <code>__SANITIZE_THREAD__</code> macro are useful in detecting when the thread sanitizer has been turned on so tests can suppress false-negatives (eg. when thread sanitizer catches a bug that's not actually a data race) See <a href=\"https://github.com/google/sanitizers/wiki/ThreadSanitizerCppManual#suppressing-reports\" rel=\"nofollow noreferrer\">this</a> for more</p>\n"}, {"tags": ["c++", "c++17", "variadic-templates"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1565805377, "post_id": 57499767, "comment_id": 101469031, "body": "<code>std::unique_ptr&lt;FeatureInterface1&gt;</code> isn&#39;t going to work, <code>FeatureInterface1</code> isn&#39;t a type is a template. Did you really mean <code>unique_ptr&lt;Feature1&gt;</code>? But still <code>get&lt;FeatureInterface1&gt;</code> (as in, taking a template?)"}, {"owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1565805767, "post_id": 57499767, "comment_id": 101469185, "body": "@Barry Your are right, a small typo, sorry - I have updated my post to reflect that. Thank you"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1565805864, "post_id": 57499767, "comment_id": 101469216, "body": "<code>std::unique_ptr&lt;FeatureInterface1&lt;Feature1&gt;&gt; f = get&lt;FeatureInterface1&lt;Feature1&gt;&gt;(device);</code> cannot be a pointer to the feature in device; unique ptr owns what it points to, and it does not own device.  You probably want to return a <code>FeatureInterface&lt;Feature1&gt;&amp;</code>."}, {"owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1565805944, "post_id": 57499767, "comment_id": 101469251, "body": "@Yakk Ok, another change, let assume raw pointers.. thank you."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1565806835, "post_id": 57499767, "comment_id": 101469621, "body": "&quot;In other words something like get&lt;0&gt;, get&lt;1&gt; ... accessors of std::tuple but interface-class-defined rather than index-defined.&quot; - but there is also the type-based <code>std::get()</code> version for <code>std::tuple</code> (if the types are all different); are you sure that <code>std::tuple</code> isn&#39;t good for your needs?"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1565806413, "post_id": 57499934, "comment_id": 101469426, "body": "You are missing <code>friend</code>, friend: OP doesn&#39;t want a member."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1565819595, "post_id": 57499934, "comment_id": 101474019, "body": "@Yakk-AdamNevraumont nop. That &#39;friend&#39; decl - I guess - is just a lubricant for CRTP. Also,  a none member wrapper difinition for the member impl can be as easy as a one-liner template."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 4, "last_activity_date": 1565848031, "last_edit_date": 1565848031, "creation_date": 1565806062, "answer_id": 57499934, "question_id": 57499767, "link": "https://stackoverflow.com/questions/57499767/access-variadic-template-structure-by-its-interface/57499934#57499934", "title": "Access variadic template structure by its interface", "body": "<p>This is quite simple actually with <code>if constexpr</code>:</p>\n\n<pre><code>template&lt;typename FEATURE, typename... OTHERS&gt;\nclass Device&lt;FEATURE, OTHERS...&gt; : public Device&lt;OTHERS...&gt; {\npublic:\n    ...\n    template &lt;typename FEATURE_INTERFACE&gt;\n    FEATURE_INTERFACE&amp; get()\n    {\n        if constexpr (std::is_base_of_v&lt;FEATURE_INTERFACE, FEATURE&gt;)\n            return m_feature;\n        else\n            return Device&lt;OTHERS...&gt;::template get&lt;FEATURE_INTERFACE&gt;();\n    }\n    ...\n};\n</code></pre>\n\n<p>Note that you'll get a compilation error if the <code>Device</code> doesn't support the requested interface. However, if you want a <code>nullptr</code> instead it's not that hard either with an additional specialization for empty <code>Device</code>:</p>\n\n<pre><code>template&lt;&gt;\nclass Device&lt;&gt; {\npublic:\n    template &lt;typename FEATURE_INTERFACE&gt;\n    FEATURE_INTERFACE* get()\n    {\n        return nullptr;\n    }\n};\n</code></pre>\n\n<p>And then just change the main implementation to return a pointer:</p>\n\n<pre><code>template &lt;typename FEATURE_INTERFACE&gt;\nFEATURE_INTERFACE* get()\n{\n    if constexpr (std::is_base_of_v&lt;FEATURE_INTERFACE, FEATURE&gt;)\n        return &amp;m_feature;\n    else\n        return Device&lt;OTHERS...&gt;::template get&lt;FEATURE_INTERFACE&gt;();\n}\n</code></pre>\n\n<p>I used a member function instead of non-member because in my opinion the implementation is way simpler this way and I also personally don't like those non-member friend getters :). Also, as Red.Wave mentioned in comments, it's quite easy to make a non-member getter using the member:</p>\n\n<pre><code>template &lt;typename FEATURE_INTERFACE, typename... FEATURES&gt;\nFEATURE_INTERFACE* get(Device&lt;FEATURES...&gt;&amp; device)\n{\n    return device.template get&lt;FEATURE_INTERFACE&gt;();\n}\n</code></pre>\n\n<p>You might also want to add const-overloads to all these getters for completeness.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1565806285, "creation_date": 1565806285, "answer_id": 57499974, "question_id": 57499767, "link": "https://stackoverflow.com/questions/57499767/access-variadic-template-structure-by-its-interface/57499974#57499974", "title": "Access variadic template structure by its interface", "body": "<pre><code>template&lt;typename FEATURE, typename... OTHERS&gt;\nclass Device&lt;FEATURE, OTHERS...&gt; : public Device&lt;OTHERS...&gt; {\npublic:\n  /* Contructor */\n  Device(FEATURE feature, OTHERS... others)\n    : Device&lt;OTHERS...&gt;(others...),\n      m_feature( feature ) {\n  }\n  template&lt;class T&gt;\n  friend std::enable_if_t&lt;std::is_base_of&lt;T, FEATURE&gt;{}, T&amp;&gt;\n  get( Device&amp; d ){ return d.m_feature; }\n  template&lt;class T&gt;\n  friend std::enable_if_t&lt;std::is_base_of&lt;T, FEATURE&gt;{}, T const&amp;&gt;\n  get( Device const&amp; d ){ return d.m_feature; }\n</code></pre>\n\n<p>that should do it.</p>\n\n<p>You may need some <code>template&lt;class T,class U&gt; decltype(auto) get(U&amp;u, ...){ return get&lt;T&gt;(u); }</code> to enable ADL (but I don't like the error messages that gives), or a get-template that bounces to a <code>get_impl</code> or something.</p>\n"}], "owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57499934, "answer_count": 2, "score": 0, "last_activity_date": 1565848031, "creation_date": 1565805161, "last_edit_date": 1565805990, "question_id": 57499767, "link": "https://stackoverflow.com/questions/57499767/access-variadic-template-structure-by-its-interface", "title": "Access variadic template structure by its interface", "body": "<p>There is a hierarchy of classes:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass FeatureInterface1 {\npublic:\n    void f1( void ) { static_cast&lt;T&amp;&gt;(*this)._f1(); }\n}\n\nclass Feature1 : public FeatureInterface1&lt;Feature1&gt; {\n    /* Allow interface class to access private elements */\n    friend class FeatureInterface&lt;Feature1&gt;;\nprivate:\n    void _f1(void) { /* Do something there */ }\n}\n\ntemplate&lt;typename T&gt;\nclass FeatureInterface2 {\npublic:\n    void f2( void ) { static_cast&lt;T&amp;&gt;(*this)._f2(); }\n}\n\nclass Feature2 : public FeatureInterface2&lt;Feature2&gt; {\n    /* Allow interface class to access private elements */\n    friend class FeatureInterface&lt;Feature2&gt;;\nprivate:\n    void _f2(void) { /* Do something there */ }\n}\n</code></pre>\n\n<p>Then there is a variadic data class:</p>\n\n<pre><code>template&lt;typename... FEATURES&gt; class Device {};\n\ntemplate&lt;typename FEATURE, typename... OTHERS&gt;\nclass Device&lt;FEATURE, OTHERS...&gt; : public Device&lt;OTHERS...&gt; {\npublic:\n    /* Contructor */\n    Device(FEATURE feature, OTHERS... others)\n        : Device&lt;OTHERS...&gt;(others...),\n          m_feature( feature ) {\n    }\nprivate:\n    FEATURE m_feature;\n};\n</code></pre>\n\n<p>and finally the full featured object made at compile time:</p>\n\n<pre><code>Device&lt;Feature1, Feature2&gt; device;\n</code></pre>\n\n<p><strong>The task is to design a <code>get&lt;&gt;()</code> function which returns the pointer to particular object using it's interface.</strong> Sample usage:</p>\n\n<pre><code>FeatureInterface1&lt;Feature1&gt;* ptr_f = get&lt;FeatureInterface1&lt;Feature1&gt;&gt;(device);\n</code></pre>\n\n<p>In other words something like <code>get&lt;0&gt;</code>, <code>get&lt;1&gt;</code> ... accessors of <code>std::tuple</code> but interface-class-defined rather than index-defined.</p>\n\n<p>My idea is to use <code>std::enable_if</code> in connection with <code>std::is_base_of</code> ...</p>\n\n<p>The inspiration was taken from <a href=\"https://eli.thegreenplace.net/2014/variadic-templates-in-c/\" rel=\"nofollow noreferrer\">https://eli.thegreenplace.net/2014/variadic-templates-in-c/</a></p>\n\n<p>I would be very glad to whatever willing to help me. Thanks in advance!</p>\n"}, {"tags": ["c++", "c", "libc", "libstdc++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565804860, "post_id": 57499615, "comment_id": 101468816, "body": "You might be better off posting this on GitHub as a patchelf issue. Also what version are you using?"}, {"owner": {"reputation": 228, "user_id": 8365526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a91811f965b369b7ce83c056f4df139?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8365526/andy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565806291, "post_id": 57499615, "comment_id": 101469379, "body": "You think this is a bug? I&#39;m using patchelf 0.9, which is the latest version avaialble via Ubuntu 18.04&#39;s package repositories."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565806318, "post_id": 57499615, "comment_id": 101469399, "body": "I don&#39;t know but I do think it&#39;s worth trying 0.10 if you can build a copy."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 2, "creation_date": 1565810910, "post_id": 57499615, "comment_id": 101471161, "body": "You need to use <code>ldd</code> from the custom glibc for testing, not system <code>ldd</code> (which will always use the system loader). Did you patch your glibc with multiarch path support? Upstream glibc doesn&#39;t have that."}], "answers": [{"comments": [{"owner": {"reputation": 228, "user_id": 8365526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a91811f965b369b7ce83c056f4df139?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8365526/andy"}, "edited": false, "score": 1, "creation_date": 1565813883, "post_id": 57500916, "comment_id": 101472242, "body": "glibc-2.23_install/bin/ldd suggested all executables I tried were &quot;not a dynamic execuatable&quot; (not sure what that is about), but I was able to work through your resolution half-blind to symlink  libstdc++.so.6 and one other library that were missing from glibc-2.23_install."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1565810978, "creation_date": 1565810978, "answer_id": 57500916, "question_id": 57499615, "link": "https://stackoverflow.com/questions/57499615/libstdc-so-not-found-when-using-patchelf-and-alternate-glibc-version/57500916#57500916", "title": "libstdc++.so not found when using patchelf and alternate glibc version", "body": "<blockquote>\n  <p>Can you explain why this is happening?</p>\n</blockquote>\n\n<p>Your <code>/path_to/glibc-2.23_install/lib/ld-2.23.so</code> does <em>not</em> look in <code>/usr/lib/x86_64-linux-gnu</code>, and thus doesn't find <code>/usr/lib/x86_64-linux-gnu/libstdc++.so.6</code>.</p>\n\n<p>You should learn to <em>never</em> use <code>ldd</code> on your patched binary, as it will lie to you. Instead, use <code>/path_to/glibc-2.23_install/bin/ldd</code>, and it should tell you the same thing (that it can't find <code>libstdc++.so.6</code>).</p>\n\n<blockquote>\n  <p>What do I need to do?</p>\n</blockquote>\n\n<p>You need to arrange for <code>libstdc++.so.6</code> to be found someplace where <code>/path_to/glibc-2.23_install/lib/ld-2.23.so</code> is <em>actually</em> looking.</p>\n\n<p>Something like:</p>\n\n<pre><code>ln -s /usr/lib/x86_64-linux-gnu/libstdc++.so.6 /path_to/glibc-2.23_install/lib\n</code></pre>\n\n<p>should do the trick. You will likely need to repeat this for <code>libgcc_s.so.1</code> as well.</p>\n"}], "owner": {"reputation": 228, "user_id": 8365526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a91811f965b369b7ce83c056f4df139?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8365526/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 1, "accepted_answer_id": 57500916, "answer_count": 1, "score": 1, "last_activity_date": 1565810978, "creation_date": 1565804569, "last_edit_date": 1565805439, "question_id": 57499615, "link": "https://stackoverflow.com/questions/57499615/libstdc-so-not-found-when-using-patchelf-and-alternate-glibc-version", "title": "libstdc++.so not found when using patchelf and alternate glibc version", "body": "<p>I am working on a system with a system wide glibc 2.27 and am using pathelf to patch some executable to a customized version of glibc 2.23. The executables are compiled with a custom version of LLVM. This has been working fine on C programs, but doesn't work on C++ programs.</p>\n\n<pre><code># cp Xalan_base.cc-v2 Xalan_base.cc-v2_patched\n# /usr/bin/patchelf --set-interpreter /path_to/glibc-2.23_install/lib/ld-2.23.so --set-rpath /path_to/glibc-2.23_install/lib Xalan_base.cc-v2_patched\n# ./Xalan_base.cc-v2_patched -v t5.xml xalanc.xsl\n/path_to/Xalan_base.cc-v2_patched: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory\n# ldd Xalan_base.cc-v2\n        linux-vdso.so.1 (0x00007ffe9efb8000)\n        libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f8db1524000)\n        libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8db1186000)\n        libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f8db0f6e000)\n        libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8db0b7d000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007f8db18ad000)\n# ldd Xalan_base.cc-v2_patched\n        linux-vdso.so.1 (0x00007ffe08b7c000)\n        libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f43a5af0000)\n        libm.so.6 =&gt; /path_to/glibc-2.23_install/lib/libm.so.6 (0x00007f43a57eb000)\n        libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f43a55d3000)\n        libc.so.6 =&gt; /path_to/glibc-2.23_install/lib/libc.so.6 (0x00007f43a5233000)\n        /path_to/glibc-2.23_install/lib/ld-2.23.so =&gt; /lib64/ld-linux-x86-64.so.2 (0x00007f43a5e79000)\n# ls -lah /usr/lib/x86_64-linux-gnu/libstdc++.so.6\nlrwxrwxrwx 1 root root 19 May  8 08:51 /usr/lib/x86_64-linux-gnu/libstdc++.so.6 -&gt; libstdc++.so.6.0.25\n</code></pre>\n\n<p>As I understand, libstdc++ is a compiler library. I'm not seeing any paths to my LLVM installation here, and those I do see all appear valid.</p>\n\n<p>Can you explain why this is happening? What do I need to do?</p>\n"}, {"tags": ["c++", "arduino", "interrupt", "volatile", "c++-standard-library"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1565803846, "post_id": 57499440, "comment_id": 101468396, "body": "What are you hoping <code>volatile</code> should do?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 3, "creation_date": 1565803994, "post_id": 57499440, "comment_id": 101468454, "body": "You only need volatile when writing and reading to something like a pin and other things considered to have a side effect."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565804039, "post_id": 57499440, "comment_id": 101468478, "body": "Expand on this &quot;correctly dealing with interrupt&quot; notion. I don&#39;t think <code>volatile</code> does what you think it does, or if it does, you&#39;re going to be SOL"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565804111, "post_id": 57499440, "comment_id": 101468514, "body": "Also worth noting that there&#39;s a reason C++ is uncommon on embedded :P (Or used to be, at least)"}, {"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "edited": false, "score": 0, "creation_date": 1565804259, "post_id": 57499440, "comment_id": 101468557, "body": "My understanding of volatile is to ensure the variables are not optimised. I don&#39;t know what kind of optimisations might occur, but from what I understand, the optimiser never assumes that a variable has been untouched."}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 3, "creation_date": 1565804265, "post_id": 57499440, "comment_id": 101468560, "body": "Actually, C++ is becoming increasingly popular for embedded systems. See <a href=\"https://www.embedded.com/design/programming-languages-and-tools/4438660/Modern-C--in-embedded-systems---Part-1--Myth-and-Reality\" rel=\"nofollow noreferrer\">embedded.com/design/programming-languages-and-tools/4438660/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565804336, "post_id": 57499440, "comment_id": 101468584, "body": "You only need to use <code>volatile</code> on variables where the hardware can change the value of the variable because the compiler can&#39;t know about that.  This is what <code>volatile</code> is for, letting the compiler know this is a special variable that could be changed in a manner it doesn&#39;t know about.  If the hardware cant change the value on you, then you don&#39;t need volatile."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1565804574, "post_id": 57499440, "comment_id": 101468687, "body": "Be <i>very</i> careful with <code>volatile</code>. Most people don&#39;t understand what it <i>actually</i> does and what it <i>does</i> is rarely what they want. In almost all cases, use of <code>volatile</code> is a bug and there is something else you <i>actually</i> want to be using. Most importantly; <code>volatile</code> does <i>Not</i> mean &quot;thread safe&quot;. It will also, effectively, disable your compilers optimizer. See also: <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/volatile-considered-harmful.txt?h=v5.3-rc4&amp;id=27641b953c54643acfd28fcd9ebbe03cdc724605\" rel=\"nofollow noreferrer\">git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/t&zwnj;&#8203;ree/&hellip;</a> , <a href=\"https://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cv</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565805620, "post_id": 57499440, "comment_id": 101469127, "body": "@light <i>&quot;Also worth noting that there&#39;s a reason C++ is uncommon on embedded :P&quot;</i> I have to disagree. I&#39;ve been using c++ with embedded programming for a long time and very successfully. There are good reasons if you simply know what you&#39;re doing."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565805678, "post_id": 57499440, "comment_id": 101469153, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Me too, just saying it&#39;s more common to stick with C in that environment for various reasons. Although decreasingly so in the Arduino/Pi era. Outside of that sphere... still not so much."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565805791, "post_id": 57499440, "comment_id": 101469193, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 &quot;know what you&#39;re doing&quot; - That, right there, really is the clincher. Unfortunately it&#39;s so often ignored :("}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565805823, "post_id": 57499440, "comment_id": 101469203, "body": "@light Well, that might be the difference of tinkering vs. doing serious software development and architectures."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565805872, "post_id": 57499440, "comment_id": 101469221, "body": "@Jesper You&#39;ll need to grasp the whole picture 1st."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565805939, "post_id": 57499440, "comment_id": 101469247, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Of course."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565805996, "post_id": 57499440, "comment_id": 101469267, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yes, I think so - and if you&#39;re doing <i>serious</i> embedded work a lot of the time it&#39;ll be critical and it will be C, even now. Despite: <i>(cont.)</i>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1565806018, "post_id": 57499440, "comment_id": 101469273, "body": "@J.AntonioPerez I did say &quot;used to be&quot; ;)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565806119, "post_id": 57499440, "comment_id": 101469315, "body": "@light Well, sometimes working on <i>sugar coating</i> c, I agree thus far."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "edited": false, "score": 0, "creation_date": 1565806741, "post_id": 57499584, "comment_id": 101469568, "body": "Pretty much everywhere else says that global variables accessed/written within an ISR need to be marked as volatile. I don&#39;t understand how my situation is different."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565807306, "post_id": 57499584, "comment_id": 101469816, "body": "Can you specify: everywhere? I suspect you have some articles or books?"}, {"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565807661, "post_id": 57499584, "comment_id": 101469965, "body": "@JVApen, <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/volatile-cpp?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/cpp/volatile-cpp?view=vs-2019</a>, <a href=\"https://barrgroup.com/Embedded-Systems/How-To/C-Volatile-Keyword\" rel=\"nofollow noreferrer\">barrgroup.com/Embedded-Systems/How-To/C-Volatile-Keyword</a> as well as the SO answers linked in my original post."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565807889, "post_id": 57499584, "comment_id": 101470056, "body": "<code>be aware that the C++11 ISO Standard\u00a0volatile\u00a0keyword is different and is supported in MSVC when the\u00a0&#47;volatile:iso\u00a0compiler option is specified</code> -&gt; Microsoft is by default not standard compliant"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565808053, "post_id": 57499584, "comment_id": 101470107, "body": "That said, it doesn&#39;t state that you should make globals volatile. However, it does mention that the non-standard behavior works as atomics"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565808167, "post_id": 57499584, "comment_id": 101470151, "body": "I haven&#39;t read the other article, it&#39;s from 2001, C++ has evolved a lot. What by accident happened by compilers back than, can be completely different now"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1565808245, "post_id": 57499584, "comment_id": 101470183, "body": "Check the compiler specs for how it handles volatile. Embedded systems often use compilers with extensions to support interrupts and hardware I/o. Much of this precedes Modern, C11 and later where the memory model was ad hoc with no idea about multi-threading."}, {"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565809548, "post_id": 57499584, "comment_id": 101470653, "body": "@JVApen The site for my specific microcontroller recommends it here: <a href=\"https://www.pjrc.com/teensy/interrupts.html\" rel=\"nofollow noreferrer\">pjrc.com/teensy/interrupts.html</a>"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565809922, "post_id": 57499584, "comment_id": 101470799, "body": "The only global it mentions are global interrupts"}, {"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565810271, "post_id": 57499584, "comment_id": 101470925, "body": "@JVApen &quot;Shared variables must be declared with the &quot;volatile&quot; keyword, which instructs the compiler to always access the variable. Without volatile, the compiler may apply optimizations which assume the variable can not change on its own.&quot;"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565810346, "post_id": 57499584, "comment_id": 101470954, "body": "Sounds like that should be <code>std::atomic</code> instead"}, {"owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1565810872, "post_id": 57499584, "comment_id": 101471149, "body": "@JVApen std::atomic is not related to optimisation; it&#39;s to ensure that the type will always hold valid data and won&#39;t be read in the middle of a multi-byte write, from what I undestand. That&#39;s my next step. You seem to know a lot about this topic, so would you personally recommend not marking variables as volatile, even if they a are accessed from an ISR?"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 1, "creation_date": 1565810969, "post_id": 57499584, "comment_id": 101471182, "body": "Volatile only makes sense when you have an address mapped to hardware to which to write, all other cases are bugs"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1565811086, "post_id": 57499584, "comment_id": 101471225, "body": "I\u2019m the context of your problem, it seems appropriate to make global variables that are modified from an ISR as volatile. What I would <i>not</i> do is try to invoke complex member functions on a volatile variable. You should get better performance by creating a local copy of the volatile variable, modifying the local copy as needed, and then writing it back to memory"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "reply_to_user": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "edited": false, "score": 0, "creation_date": 1565813658, "post_id": 57499584, "comment_id": 101472157, "body": "@user4913118 I updated the answer with some proposals on how to make using volatile simpler for your code."}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 7, "last_activity_date": 1565813597, "last_edit_date": 1565813597, "creation_date": 1565804418, "answer_id": 57499584, "question_id": 57499440, "link": "https://stackoverflow.com/questions/57499440/using-methods-of-volatile-standard-template-objects/57499584#57499584", "title": "Using Methods of Volatile Standard Template Objects", "body": "<p>You should <em>not</em> be setting everything to volatile. Volatile has a specific purpose, and that's to prevent the compiler from optimizing out reads and writes to memory. Let's look at a really simple example.</p>\n\n<pre><code>int regular_sum(int* ptr) {\n    int a = *ptr;\n    int b = *ptr;\n    return a + b;\n}\nint volatile_sum(int volatile* ptr) {\n    int a = *ptr;\n    int b = *ptr;\n    return a + b; \n}\n</code></pre>\n\n<p>When we look at the assembly, we see that in <code>regular_sum</code>, the compiler realizes you're dereferencing the same pointer twice, and it optimizes it to just one dereference. But in <code>volatile_sum</code>, the compiler inserts both dereferences:</p>\n\n<pre><code>regular_sum(int*):\n        mov     eax, DWORD PTR [rdi]\n        add     eax, eax\n        ret\nvolatile_sum(int volatile*):\n        mov     eax, DWORD PTR [rdi]\n        mov     edx, DWORD PTR [rdi]\n        add     eax, edx\n        ret\n</code></pre>\n\n<p><strong>Optimizations are good</strong>, and most of the time, you won't need to use volatile. If you're doing memory-mapped IO, or you're writing values to pins as though they were a pointer, <em>that's</em> where you use volatile. To reiterate what Nathan Oliver said,</p>\n\n<blockquote>\n  <p>You only need to use volatile on variables where the hardware can change the value of the variable because the compiler can't know about that. This is what volatile is for, letting the compiler know this is a special variable that could be changed in a manner it doesn't know about. If the hardware cant change the value on you, then you don't need volatile. </p>\n</blockquote>\n\n<p>But if you're doing computations on an object, <em>don't</em> use volatile. Do the computations on a normal object, and then copy the result to your volatile pointer. </p>\n\n<p><strong>Volatile and Interrupt Service Routines.</strong></p>\n\n<p>It is appropriate to use <code>volatile</code> on global variables that might be modified by Interrupt Service Routines. That being said, <code>volatile</code> cannot be used with objects like <code>std::bitset</code> because <code>std::bitset</code> does not have support for volatile operations, and <code>std::bitset</code> is not trivially copyable. </p>\n\n<p>In this regard, you have two options:</p>\n\n<ul>\n<li>Use a container that contains volatile primitives (e.g, <code>std::vector&lt;volatile bool&gt;</code></li>\n<li>Write your own class, with support for volatile. </li>\n</ul>\n\n<p>If you have a class that <em>is</em> trivially copyable, then you can do something like the following. First, we have to define functions to allow us to copy to and from volatile types:</p>\n\n<pre><code>template&lt;class T&gt;\nT volatile_copy(T const volatile&amp; source) {\n    static_assert(std::is_trivially_copyable_v&lt;T&gt;, \"Input must be trivially copyable\");\n    T dest;\n    auto* dest_ptr = dynamic_cast&lt;char*&gt;(&amp;dest);\n    auto* source_ptr = dynamic_cast&lt;char const volatile*&gt;(&amp;source);\n\n    for(int i = 0; i &lt; sizeof(T); i++) {\n        dest_ptr[i] = source_ptr[i];\n    }\n\n    return dest;\n}\n\ntemplate&lt;class T&gt;\nvoid volatile_assign(T volatile&amp; dest, T const&amp; source) {\n    static_assert(std::is_trivially_copyable_v&lt;T&gt;, \"Input must be trivially copyable\");\n    auto* source_ptr = dynamic_cast&lt;char*&gt;(&amp;source);\n    auto* dest_ptr   = dynamic_cast&lt;char volatile*&gt;(&amp;dest);\n\n    for(int i = 0; i &lt; sizeof(T); i++) {\n        dest_ptr[i] = source_ptr[i];\n    }\n}\n</code></pre>\n\n<p>Then, we may write a class normally, and as long as it's trivially copyable we can create a copy from a volatile version:</p>\n\n<pre><code>struct MyBitset {\n    uint64_t bits;\n    // Logic\n\n    void flip() {\n        bits = ~bits;\n    }\n    void addOne() {\n        bits++;\n    }\n};\n\nvolatile MyBitset flags;\n\nvoid interrupt_handler() {\n    auto local = volatile_copy(flags);\n\n    // Do stuff to local\n\n    volatile_assign(flags, local); \n};\n</code></pre>\n\n<p>We can also encapsulate this behavior in a class, so that we can \"check out\" volatile variables:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct Checkout {\n    T local;\n    T volatile&amp; source;\n    Checkout(T volatile&amp; source)\n      : local(volatile_copy(source))\n      , source(source) {}\n    void save() {\n        volatile_assign(source, local);\n    }\n    ~Checkout() {\n        save();\n    }\n};\n</code></pre>\n\n<p>Using this allows us to create local copies of <code>volatile</code> variables, make modifications to them, and the result will be saved automatically:</p>\n\n<pre><code>volatile MyBitset flags;\n\nvoid interrupt_handler() {\n    auto f = Checkout(::flags);\n\n    f.local.flip(); //We can call whatever member functions we want on the local\n\n    // When the function exits, changes made to the local are automatically assigned to the volatile global\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4913118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba76ee4ba9d55082bf8adbc6865151b8?s=128&d=identicon&r=PG&f=1", "display_name": "user4913118", "link": "https://stackoverflow.com/users/4913118/user4913118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 57499584, "answer_count": 1, "score": 0, "last_activity_date": 1565813597, "creation_date": 1565803790, "last_edit_date": 1565807171, "question_id": 57499440, "link": "https://stackoverflow.com/questions/57499440/using-methods-of-volatile-standard-template-objects", "title": "Using Methods of Volatile Standard Template Objects", "body": "<p>I have some code that I now wish to run inside a timer-based interrupt on a Teensy 3.6 microcontroller. The code accesses a [global] array of objects of a class. I have marked that array and all of the member variables as volatile, which I believe is the first step for correctly dealing with interrupts.</p>\n\n<p>One of the member variables which I have marked volatile is an std::bitset and I would like to call it's non-volatile methods, which I can't do as</p>\n\n<pre><code>\"passing 'volatile std::bitset&lt;16u&gt;' as 'this' argument discards qualifiers [-fpermissive]\"\n</code></pre>\n\n<p>I think I could just duplicate the bitset library and switch everything to volatile, but I don't think that should be required, so I think there is either a better solution, or I am thinking about things incorrectly.</p>\n\n<p>Please let me know what should be done.</p>\n\n<p>These answers seem to recommend the use of volatile when accessing global variables in an ISR:\n<a href=\"https://stackoverflow.com/questions/12738672/c-volatile-keyword-in-isr-and-multithreaded-program\">C &#39;Volatile&#39; keyword in ISR and multithreaded program?</a>,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/246127/why-is-volatile-needed-in-c\">Why is volatile needed in C?</a>, </p>\n\n<p><a href=\"https://stackoverflow.com/questions/28847007/what-is-the-correct-way-of-using-c-objects-and-volatile-inside-interrupt-rou\">What is the correct way of using C++ objects (and volatile) inside interrupt routines?</a>, </p>\n\n<p><a href=\"https://stackoverflow.com/questions/55278198/is-volatile-needed-when-variable-is-only-read-during-interrupt\">Is volatile needed when variable is only read during interrupt</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/41502926/volatile-keyword-usage-in-isr-function-in-micro-controller-programing\">volatile keyword usage in ISR function in micro-controller programing</a></p>\n\n<p>This is in addition to many external sources recommending the use. Maybe my original message was not clear or maybe my situation differs from these.</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 151, "user_id": 597175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2c31d8cb41f835cc582b93eb44320826?s=128&d=identicon&r=PG", "display_name": "chinthakarukshan", "link": "https://stackoverflow.com/users/597175/chinthakarukshan"}, "edited": false, "score": 0, "creation_date": 1565804154, "post_id": 57499271, "comment_id": 101468527, "body": "This is not a duplicate because I&#39;m asking for a recommendation"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1565805113, "post_id": 57499271, "comment_id": 101468924, "body": "questions asking for recommendations are off-topic because they attract opinionated answers"}, {"owner": {"reputation": 151, "user_id": 597175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2c31d8cb41f835cc582b93eb44320826?s=128&d=identicon&r=PG", "display_name": "chinthakarukshan", "link": "https://stackoverflow.com/users/597175/chinthakarukshan"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1565806159, "post_id": 57499271, "comment_id": 101469338, "body": "@kmdreko then how to get the recommendations? could you please guide me"}, {"owner": {"reputation": 8957, "user_id": 3345375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TbVFk.png?s=128&g=1", "display_name": "jkdev", "link": "https://stackoverflow.com/users/3345375/jkdev"}, "edited": false, "score": 0, "creation_date": 1565845876, "post_id": 57499271, "comment_id": 101478435, "body": "A different Stack Exchange site such as <a href=\"https://softwarerecs.stackexchange.com\">Software Recommendations</a> might be a better place for this question."}], "owner": {"reputation": 151, "user_id": 597175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2c31d8cb41f835cc582b93eb44320826?s=128&d=identicon&r=PG", "display_name": "chinthakarukshan", "link": "https://stackoverflow.com/users/597175/chinthakarukshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "closed_date": 1565803047, "answer_count": 0, "score": 2, "last_activity_date": 1565804230, "creation_date": 1565802965, "last_edit_date": 1565804230, "question_id": 57499271, "link": "https://stackoverflow.com/questions/57499271/determine-cpu-memory-disk-usage-data-for-c-application", "closed_reason": "Duplicate", "title": "Determine CPU, Memory, Disk Usage data for C++ Application", "body": "<p>I've an application which runs on linux where I need to gather the performance statistics (CPU usage, Memory usage, Disk usage etc) from inside the application itself.</p>\n\n<p>As I observed there are two methods to achieve this.</p>\n\n<p>First one is to execute a tool like pidstat or sar from the c++ code and process the result and gather information and save them in a database\nSecond method is to follow the method mentioned in below ticket.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process\">How to determine CPU and memory consumption from inside a process?</a></p>\n\n<p>I need to know the recommended way of doing this. I might need to gather around 10 performance statistics fields (like CPU Usage, Memory Usage, Disk Usage etc).</p>\n"}, {"tags": ["c++", "serialization", "boost", "boost-serialization"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1565801215, "post_id": 57498880, "comment_id": 101467373, "body": "It&#39;s hard telling where the problem could be without looking at more code. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1565802128, "post_id": 57498880, "comment_id": 101467758, "body": "Remember that just because something compiles it doesn&#39;t necessarily mean it&#39;s logically correct. Deserializing like this to a pointer doesn&#39;t feel right. usually <code>&gt;&gt;</code> operates on a reference to a value."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 3, "creation_date": 1565802793, "post_id": 57498880, "comment_id": 101468006, "body": "<code>is &gt;&gt; this</code>, is illegal for the same reason that <code>this = that;</code> is illegal. You can&#39;t assign to the <code>this</code> pointer."}, {"owner": {"reputation": 352, "user_id": 3985632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pl18c.jpg?s=128&g=1", "display_name": "Alan Ka\u0142u\u017ca", "link": "https://stackoverflow.com/users/3985632/alan-ka%c5%82u%c5%bca"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566491354, "post_id": 57498880, "comment_id": 101682348, "body": "thanks @john I realised exactly what i&#39;m doing with &gt;&gt; operator and it makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1565801686, "post_id": 57498943, "comment_id": 101467589, "body": "Some other reading to help understand the above: <a href=\"https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\">What are rvalues, lvalues, xvalues, glvalues, and prvalues?</a>"}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": true, "score": 5, "last_activity_date": 1565801387, "creation_date": 1565801387, "answer_id": 57498943, "question_id": 57498880, "link": "https://stackoverflow.com/questions/57498880/why-is-passing-this-pointer-directly-to-archive-an-error-but-another-pointer/57498943#57498943", "title": "Why is passing &#39;this&#39; pointer directly to archive an error, but another pointer of same type is ok?", "body": "<p>The only difference is that <code>this</code> is a prvalue, and assigning it to <code>dest</code> would make it an lvalue.</p>\n\n<p>I would assume that the operator looks something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class T&gt;\nboost::archive::text_iarchive&amp; operator&gt;&gt;(\n    boost::archive::text_iarchive&amp; ia,\n    T&amp; archive_to\n);\n</code></pre>\n\n<p>And an rvalue like <code>this</code> can't bind to the non-const lvalue reference, as it's trying to set the pointer to the deserialised value (probably not what you want).</p>\n"}], "owner": {"reputation": 352, "user_id": 3985632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pl18c.jpg?s=128&g=1", "display_name": "Alan Ka\u0142u\u017ca", "link": "https://stackoverflow.com/users/3985632/alan-ka%c5%82u%c5%bca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57498943, "answer_count": 1, "score": 0, "last_activity_date": 1565801387, "creation_date": 1565801011, "question_id": 57498880, "link": "https://stackoverflow.com/questions/57498880/why-is-passing-this-pointer-directly-to-archive-an-error-but-another-pointer", "title": "Why is passing &#39;this&#39; pointer directly to archive an error, but another pointer of same type is ok?", "body": "<p>Passing a <code>this</code> pointer assigned to another one works fine, but passing just it itself directly doesn't as below:</p>\n\n<pre><code>table_row* table_row::deserialize_row(std::string src_serialized_row) {\n        std::stringstream ss(src_serialized_row);\n        boost::archive::text_iarchive ia(ss);\n        table_row * dest = this;\n        ia &gt;&gt; dest; // this is fine, compiles.\n        return dest;\n    }\n</code></pre>\n\n<pre><code>table_row* table_row::deserialize_row(std::string src_serialized_row) {\n        std::stringstream ss(src_serialized_row);\n        boost::archive::text_iarchive ia(ss);\n        ia &gt;&gt; this; //error, &gt;&gt; operator does not match [error]\n        return this;\n    }\n</code></pre>\n\n<p><a href=\"https://i.imgur.com/0YwL9CQ.png\" rel=\"nofollow noreferrer\">[error]</a>\nI don't really understand this. I'm passing the same pointer in both code examples, right? Why would it be an error?</p>\n"}, {"tags": ["c++", "oop", "static"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565801053, "post_id": 57498834, "comment_id": 101467309, "body": "You can only ever instantiate something once.  Trying to do so again is an error."}, {"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565801228, "post_id": 57498834, "comment_id": 101467378, "body": "@NathanOliver The question is if by defining in the global with =0; wont set the value of the existing instance to 0 each time the object is created. It does not make sense, i just want to validate this"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565801367, "post_id": 57498834, "comment_id": 101467452, "body": "I&#39;m saying you can&#39;t do <code>uint32_t MyClassName::s_MyStaticMember;</code> followed by <code>uint32_t MyClassName::s_MyStaticMember = 0;</code>.  That is a redefinition and not allowed.  If that&#39;s not what you are asking then having a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful."}, {"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565801809, "post_id": 57498834, "comment_id": 101467635, "body": "@NathanOliver I dont mean to redefine it, i meant, modify the line in code and recompile, instead of member; to do member=1. The below answer is the correct, my assumption was true, thanks for help"}], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "is_accepted": false, "score": 3, "last_activity_date": 1565801562, "last_edit_date": 1565801562, "creation_date": 1565801087, "answer_id": 57498893, "question_id": 57498834, "link": "https://stackoverflow.com/questions/57498834/cpp-static-object-instantiation/57498893#57498893", "title": "cpp static object instantiation", "body": "<p>Yes. Static member variables are akin to global variables in a namespace. They only have one instance. Their initialization will happen only once before the execution even enters your main().</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 3, "last_activity_date": 1565801516, "creation_date": 1565801516, "answer_id": 57498968, "question_id": 57498834, "link": "https://stackoverflow.com/questions/57498834/cpp-static-object-instantiation/57498968#57498968", "title": "cpp static object instantiation", "body": "<p>Static variables are only initialized once, in the static initialization phase of program startup (reference: <a href=\"http://eel.is/c++draft/basic.start.static\" rel=\"nofollow noreferrer\">[basic.start.static]</a>). The compiler is responsible for making sure there's only one instance of <code>Counted::count</code>, and that it gets initialized exactly once, before any of your other code runs.</p>\n\n<p>Note that if you don't explicitly initialize a static (so you just define it without the <code>= 0</code>), it is anyway zero-initialized by default.</p>\n\n<p>Constucting instances of your class has no effect on non-instance (ie, static) members at all, <em>unless</em> your constructor explicitly writes to them, eg.</p>\n\n<pre><code>struct Counted {\n  static unsigned count;\n  Counted() { ++count; }\n  ~Counted() { --count; }\n};\n\nunsigned Counted::count;\n</code></pre>\n\n<p>the constructor <em>does</em> alter the static, but it <em>doesn't</em> re-initialize it.</p>\n"}], "owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57498968, "answer_count": 2, "score": 0, "last_activity_date": 1565801562, "creation_date": 1565800829, "question_id": 57498834, "link": "https://stackoverflow.com/questions/57498834/cpp-static-object-instantiation", "title": "cpp static object instantiation", "body": "<p>I am newbie to CPP.<br>\nI need to add static member that can be called from a static method.<br>\nSo in the .h i declare it:   </p>\n\n<pre><code>static uint32_t s_MyStaticMember; \n</code></pre>\n\n<p>Above my constructor (in the \"namespace\") I initialize it:  </p>\n\n<pre><code>uint32_t MyClassName::s_MyStaticMember;\n</code></pre>\n\n<p>Now I can use this static member from my static method.<br>\nThe question is, if I initialize the member with =0;   </p>\n\n<pre><code>uint32_t MyClassName::s_MyStaticMember=0;\" \n</code></pre>\n\n<p>What will happen on the next instantiation of the class ?<br>\nI assume it will not reset the static member to 0 because this is the reason the initialize is out of the class, the =0 will happen <strong>only once</strong>.</p>\n\n<p>Is my assumption correct ?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565802112, "post_id": 57498792, "comment_id": 101467747, "body": "What did you discover when you stepped through your code, line by line, in your debugger (while inspecting control flow and variable values)?"}, {"owner": {"reputation": 1, "user_id": 8910300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ume1W.jpg?s=128&g=1", "display_name": "Davor Jordacevic", "link": "https://stackoverflow.com/users/8910300/davor-jordacevic"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565818726, "post_id": 57498792, "comment_id": 101473757, "body": "I can&#39;t run a debugger right now. Some error with libraries. I will add a result when I fix this error, if first problem is not solved till then."}, {"owner": {"reputation": 1, "user_id": 8910300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ume1W.jpg?s=128&g=1", "display_name": "Davor Jordacevic", "link": "https://stackoverflow.com/users/8910300/davor-jordacevic"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1565888853, "post_id": 57498792, "comment_id": 101494978, "body": "The problem was solved. The problem was that descriptors should not be converted to CV_32F and that I need to check if (matches[i].size() &gt;= 2). Thanks!"}], "owner": {"reputation": 1, "user_id": 8910300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ume1W.jpg?s=128&g=1", "display_name": "Davor Jordacevic", "link": "https://stackoverflow.com/users/8910300/davor-jordacevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565802011, "creation_date": 1565800678, "last_edit_date": 1565802011, "question_id": 57498792, "link": "https://stackoverflow.com/questions/57498792/c-orb-feature-matching-with-flann-lsh-error", "title": "C++ ORB Feature Matching with FLANN Lsh Error", "body": "<p>I am trying to match Orb features using FLANN matcher and LSH, and it gives me this error:</p>\n\n<p>OpenCV: terminate handler is called! The last OpenCV error is:</p>\n\n<blockquote>\n  <p>OpenCV(4.1.0) Error: Unsupported format or combination of formats (> type=5 > ) in buildIndex_, file\n  C:\\opencv\\source\\opencv-4.1.0\\modules\\flann\\src\\miniflann.cpp, line\n  315</p>\n</blockquote>\n\n<p>What is the reason for this?</p>\n\n<p>Descriptors are already converted to CV_32F.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>cv::FlannBasedMatcher matcher = cv::FlannBasedMatcher(cv::makePtr&lt;cv::flann::LshIndexParams&gt;(12, 20, 2));\n\nstd::vector&lt; std::vector&lt;cv::DMatch&gt; &gt; matches;\n\nmatcher.knnMatch(descriptors1, descriptors2, matches, 2 );\n</code></pre>\n"}, {"tags": ["c++", "c++14", "boost-spirit", "boost-spirit-x3"], "comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1565884847, "post_id": 57498473, "comment_id": 101493309, "body": "If you are going to use lambdas, you would pass in the target <code>[&amp;my_var]</code>. But, don&#39;t use semantic action unless you absolutely must. Parse into your object directly. <a href=\"https://github.com/lakeweb/BXL_Reader\" rel=\"nofollow noreferrer\">an example</a>"}, {"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1565917831, "post_id": 57498473, "comment_id": 101503413, "body": "Could you elaborate a bit on why not to use this approach? Is it slow? Anything wrong with it?"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566230802, "post_id": 57498473, "comment_id": 101582400, "body": "Hi @drinker The trouble with semantic actions is that as your parser evolves, it makes it more difficult to maintain. I did it the first time I used spirit to propagate data on &#39;the back end&#39;. What a nightmare. As long as your data can be placed directly from the parser to your objects, the only way to go. sehe addresses this."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "edited": false, "score": 0, "creation_date": 1565904157, "post_id": 57516243, "comment_id": 101500660, "body": "Thanks for the great answer. Just fyi I was not looking for a way to read the data in a uniform way but rather to take specific actions depending on the provided data - that&#39;s why the lambdas and not optionals."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "edited": false, "score": 0, "creation_date": 1565910825, "post_id": 57516243, "comment_id": 101502256, "body": "Great, You might be interested in this one: <a href=\"https://stackoverflow.com/questions/57048008/spirit-x3-is-this-error-handling-approach-useful/57067207#57067207\" title=\"spirit x3 is this error handling approach useful\">stackoverflow.com/questions/57048008/&hellip;</a> Specifically, you can expand on the <code>on_success</code> idea and use that instead of synthesizing into attributes. (As that example shows, it jells well with Fusion Adapation, just for the duration of the rule/on_success handler)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1565903160, "creation_date": 1565903160, "answer_id": 57516243, "question_id": 57498473, "link": "https://stackoverflow.com/questions/57498473/parsing-file-input-with-spirit/57516243#57516243", "title": "Parsing file input with spirit", "body": "<p>I'm with @lakeweb, see also <a href=\"http://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil\">http://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil</a></p>\n\n<p>However to answer your specific question: the attributes are fusion sequences. Including <code>fusion/include/io.hpp</code> enables you to just print them:</p>\n\n<pre><code>    auto pri = [&amp;](auto &amp;ctx){std::cout &lt;&lt; \"got this: \" &lt;&lt; _attr(ctx) &lt;&lt; std::endl;};\n    auto bri = [&amp;](auto &amp;ctx){std::cout &lt;&lt; \"got that: \" &lt;&lt; _attr(ctx) &lt;&lt; std::endl;};\n</code></pre>\n\n<p>Prints</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2b90e3ffcb8fd27b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>got this: (321 a 321 3.14)\nParsed\ngot that: (432 b 432)\nParsed\n</code></pre>\n\n<h2>Doing Useful Stuff</h2>\n\n<p>Doing useful stuff is always more exciting. You <strong>could</strong> manually take apart these fusion sequences. Defining the simplest data struct I can think of to receive our data:</p>\n\n<pre><code>struct MyData {\n    int a = 0;\n    char b = 0;\n    int c = 0;\n    double d = 0;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, MyData const&amp; md) {\n        return os &lt;&lt; \"MyData{\" &lt;&lt; md.a &lt;&lt; \",\" &lt;&lt; md.b &lt;&lt; \",\" &lt;&lt; md.c &lt;&lt; \",\" &lt;&lt; md.d &lt;&lt; \"}\";\n    }\n};\n</code></pre>\n\n<p>Now, we can \"enhance\" (read: complicate) stuff to parse into it:</p>\n\n<pre><code>auto pri = [&amp;](auto &amp;ctx) {\n    auto&amp; attr = _attr(ctx);\n    std::cout &lt;&lt; \"got this: \" &lt;&lt; attr &lt;&lt; std::endl;\n    using boost::fusion::at_c;\n    _val(ctx) = { at_c&lt;0&gt;(attr), at_c&lt;1&gt;(attr), at_c&lt;2&gt;(attr), at_c&lt;3&gt;(attr) };\n};\nauto bri = [&amp;](auto &amp;ctx)\n{ \n    auto&amp; attr = _attr(ctx);\n    std::cout &lt;&lt; \"got that: \" &lt;&lt; attr &lt;&lt; std::endl;\n    using boost::fusion::at_c;\n    _val(ctx) = { at_c&lt;0&gt;(attr), at_c&lt;1&gt;(attr), at_c&lt;2&gt;(attr), std::numeric_limits&lt;double&gt;::infinity()};\n};\n\nauto const pri_rule = x3::rule&lt;struct _pri, MyData&gt; {\"pri_rule\"} = \n        (x3::int_ &gt;&gt; x3::char_ &gt;&gt; x3::int_ &gt;&gt; x3::double_)[pri];\nauto const bri_rule = x3::rule&lt;struct _bri, MyData&gt; {\"bri_rule\"} = \n        (x3::int_ &gt;&gt; x3::char_ &gt;&gt; x3::int_)[bri];\n</code></pre>\n\n<p>And yes, this \"works\":</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/a01b4f6419ec7fdc\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>for(std::string const line : {\n        \"321 a 321 3.14\",\n        \"432 b 432\"\n    })\n{\n    MyData data;\n\n    bool r = x3::phrase_parse(\n            line.begin(), line.end(),\n            pri_rule | bri_rule,\n            x3::space,\n            data);\n\n    if (r)\n        std::cout &lt;&lt; \"Parsed \" &lt;&lt; data &lt;&lt; \"\\n\";\n    else\n        std::cout &lt;&lt; \"Failed\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>got this: (321 a 321 3.14)\nParsed MyData{321,a,321,3.14}\ngot that: (432 b 432)\nParsed MyData{432,b,432,inf}\n</code></pre>\n\n<p>However this seems horribly complicated.</p>\n\n<h2>SIMPLIFY!!!</h2>\n\n<p>It seems you merely have an optional trailing <code>double_</code>. With a little bit of help:</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(MyData, a,b,c,d);\n</code></pre>\n\n<p>You can have the same effect without any of the mess:</p>\n\n<pre><code>bool r = x3::phrase_parse(\n        line.begin(), line.end(),\n        x3::int_ &gt;&gt; x3::char_ &gt;&gt; x3::int_ &gt;&gt; (x3::double_ | x3::attr(9999)),\n        x3::space, data);\n</code></pre>\n\n<p>Which would print <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/0da7db9345766b82\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>Parsed MyData{321,a,321,3.14}\nParsed MyData{432,b,432,9999}\n</code></pre>\n\n<h2>Optional: Optionality</h2>\n\n<p>If you don't have a valid default for the <code>double</code> you could make it an optional:</p>\n\n<pre><code>            x3::int_ &gt;&gt; x3::char_ &gt;&gt; x3::int_ &gt;&gt; -x3::double_,\n</code></pre>\n\n<p>And could still parse it:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/95cfd60bca901381\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;boost/fusion/adapted.hpp&gt;\n#include &lt;boost/optional/optional_io.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace x3 = boost::spirit::x3;\n\nstruct MyData {\n    int a = 0;\n    char b = 0;\n    int c = 0;\n    boost::optional&lt;double&gt; d;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, MyData const&amp; md) {\n        return os &lt;&lt; \"MyData{\" &lt;&lt; md.a &lt;&lt; \",\" &lt;&lt; md.b &lt;&lt; \",\" &lt;&lt; md.c &lt;&lt; \",\" &lt;&lt; md.d &lt;&lt; \"}\";\n    }\n};\n\nBOOST_FUSION_ADAPT_STRUCT(MyData, a,b,c,d)\n\nint main() {\n    for(std::string const line : { \"321 a 321 3.14\", \"432 b 432\" }) {\n        MyData data;\n\n        bool r = x3::phrase_parse(\n                line.begin(), line.end(),\n                x3::int_ &gt;&gt; x3::char_ &gt;&gt; x3::int_ &gt;&gt; -x3::double_,\n                x3::space, data);\n\n        if (r)\n            std::cout &lt;&lt; \"Parsed \" &lt;&lt; data &lt;&lt; \"\\n\";\n        else\n            std::cout &lt;&lt; \"Failed\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Parsed MyData{321,a,321, 3.14}\nParsed MyData{432,b,432,--}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 57516243, "answer_count": 1, "score": -1, "last_activity_date": 1565903456, "creation_date": 1565799207, "last_edit_date": 1565903456, "question_id": 57498473, "link": "https://stackoverflow.com/questions/57498473/parsing-file-input-with-spirit", "title": "Parsing file input with spirit", "body": "<p>I played around with boost::spirit recently and wanted to use it to parse file input. What i got is this: defining some semantic actions:</p>\n\n<pre><code>data = ifstream(\"herpderp\", ios::in);\nstd::string line;\nauto pri = [&amp;](auto &amp;ctx){cout &lt;&lt; \"got this\" &lt;&lt; endl;};\nauto bri = [&amp;](auto &amp;ctx){cout &lt;&lt; \"got that\" &lt;&lt; endl;};\n</code></pre>\n\n<p>and the actual reading happens like this:</p>\n\n<pre><code>while(getline(data, line, '\\n'))                                        \n{                                                                       \n    bool r = phrase_parse(line.begin(), line.end(), (int_ &gt;&gt; char_ &gt;&gt; int_ &gt;&gt; double_)[pri] | (int_ &gt;&gt; char_ &gt;&gt; int_)[bri], space);\n}\n</code></pre>\n\n<p>However the problem is - I have no idea how to access the contents of <code>_attr(ctx)</code> inside the lambdas <code>pri</code> and <code>bri</code>. I know they work as intended, depending on the contents of the file because of the <code>cout</code> prints (they alternate) - they are however compound type as one can tell from the parsing rules. If anyone can shed some light on this, I'd be grateful.</p>\n\n<p><strong>Edit:</strong>\nGot this to work the way I wanted it to. It required another import</p>\n\n<pre><code>#include &lt;boost/mpl/int.hpp&gt;\n</code></pre>\n\n<p>And each of the lambdas looks like this:</p>\n\n<pre><code>\nauto bri = [&amp;](auto &amp;ctx)\n{\n    int    firstIntFromMatch  = at&lt;boost::mpl::int_&lt;0&gt;&gt;(_attr(ctx));\n    char   charFromMatch      = at&lt;boost::mpl::int_&lt;1&gt;&gt;(_attr(ctx));\n    int    secondIntFromMatch = at&lt;boost::mpl::int_&lt;2&gt;&gt;(_attr(ctx));\n\n    doSomething(firstIntFromMatch, charFromMatch, secondIntFromMatch);\n};\nauto pri = [&amp;](auto &amp;ctx)\n{\n    int    firstIntFromMatch  = at&lt;boost::mpl::int_&lt;0&gt;&gt;(_attr(ctx));\n    char   charFromMatch      = at&lt;boost::mpl::int_&lt;1&gt;&gt;(_attr(ctx));\n    int    secondIntFromMatch = at&lt;boost::mpl::int_&lt;2&gt;&gt;(_attr(ctx));\n    double doubleFromMatch    = at&lt;boost::mpl::int_&lt;3&gt;&gt;(_attr(ctx));\n\n    doSomething(firstIntFromMatch, charFromMatch, secondIntFromMatch);\n    doSomethingElse(doubleFromMatch);\n};\n</code></pre>\n"}, {"tags": ["c++", "cmake", "compiler-errors"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3489620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3242d417eefc7ef8687a067dfc88a925?s=128&d=identicon&r=PG&f=1", "display_name": "user3489620", "link": "https://stackoverflow.com/users/3489620/user3489620"}, "edited": false, "score": 0, "creation_date": 1565801313, "post_id": 57498400, "comment_id": 101467422, "body": "Could you please explain what would need to change in order to use the precompiled library without including the header file?"}], "tags": [], "owner": {"reputation": 21, "user_id": 4314597, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7Z5oWBiuPwQ/AAAAAAAAAAI/AAAAAAAAADg/TpAaJLC2DNc/photo.jpg?sz=128", "display_name": "Vinayaka Belavadi", "link": "https://stackoverflow.com/users/4314597/vinayaka-belavadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565798940, "creation_date": 1565798940, "answer_id": 57498400, "question_id": 57498096, "link": "https://stackoverflow.com/questions/57498096/handling-shared-library-dependencies-with-cmake-and-c/57498400#57498400", "title": "Handling Shared Library Dependencies with CMake and C++", "body": "<p>Since you have the compiled library you do not need to add the paths of the source files.\nAll the function calls, external variable access etc will be linked to this precompiled library.</p>\n\n<p>Whereas when you include header file this is not the case.\nMake creates a list of dependencies before compilation where it tries to locate all the headers.\nHence paths of all the headers which are included directly or indirectly must be provided.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3489620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3242d417eefc7ef8687a067dfc88a925?s=128&d=identicon&r=PG&f=1", "display_name": "user3489620", "link": "https://stackoverflow.com/users/3489620/user3489620"}, "edited": false, "score": 1, "creation_date": 1565801406, "post_id": 57498702, "comment_id": 101467468, "body": "I added <code>PUBLIC</code> as shown, but this did not fix the problem"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 45, "user_id": 3489620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3242d417eefc7ef8687a067dfc88a925?s=128&d=identicon&r=PG&f=1", "display_name": "user3489620", "link": "https://stackoverflow.com/users/3489620/user3489620"}, "edited": false, "score": 0, "creation_date": 1565809027, "post_id": 57498702, "comment_id": 101470471, "body": "@user3489620 Updated my answer. Hope this helps!"}, {"owner": {"reputation": 45, "user_id": 3489620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3242d417eefc7ef8687a067dfc88a925?s=128&d=identicon&r=PG&f=1", "display_name": "user3489620", "link": "https://stackoverflow.com/users/3489620/user3489620"}, "edited": false, "score": 0, "creation_date": 1565811052, "post_id": 57498702, "comment_id": 101471213, "body": "Yes, thank you!  I updated the post to show these changes."}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 0, "last_activity_date": 1565809010, "last_edit_date": 1565809010, "creation_date": 1565800290, "answer_id": 57498702, "question_id": 57498096, "link": "https://stackoverflow.com/questions/57498096/handling-shared-library-dependencies-with-cmake-and-c/57498702#57498702", "title": "Handling Shared Library Dependencies with CMake and C++", "body": "<p>In your Shared Libraries <code>CMakeLists.txt</code> file, consider adding the <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html#libraries-for-a-target-and-or-its-dependents\" rel=\"nofollow noreferrer\"><code>PUBLIC</code></a> keyword to ensure that the transitive dependencies (i.e. the <code>bar</code> library) can be propagated to the final target. Also, modern CMake encourages the use of <a href=\"https://cmake.org/cmake/help/latest/command/target_include_directories.html#command:target_include_directories\" rel=\"nofollow noreferrer\"><code>target_include_directories()</code></a> instead of <code>include_directories()</code>. Similarly, you should add the <code>PUBLIC</code> keyword here also:</p>\n\n<pre><code>target_include_directories(bar PUBLIC\n    ${PROJECT_ROOT}/lib/bar/include\n)\ntarget_include_directories(bar_tool PUBLIC\n    ${PROJECT_ROOT}/lib/bar_tool/include\n)\n\ntarget_link_libraries(\n    ${LIB_NAME} PUBLIC\n        bar\n)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3489620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3242d417eefc7ef8687a067dfc88a925?s=128&d=identicon&r=PG&f=1", "display_name": "user3489620", "link": "https://stackoverflow.com/users/3489620/user3489620"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1464, "favorite_count": 1, "accepted_answer_id": 57498702, "answer_count": 2, "score": 2, "last_activity_date": 1565810970, "creation_date": 1565797758, "last_edit_date": 1565810970, "question_id": 57498096, "link": "https://stackoverflow.com/questions/57498096/handling-shared-library-dependencies-with-cmake-and-c", "title": "Handling Shared Library Dependencies with CMake and C++", "body": "<p>I have a c++ project that utilizes shared libraries, some of which have dependencies of their own.  However, I am being forced to include the header files for the shared library dependencies within my main.cpp file.  I'm assuming that this is an issue with how I have structured my project, but I'm not sure.</p>\n\n<p>Project Structure:</p>\n\n<pre><code>- myproject\n|-&gt; foo1\n  |-&gt; include\n    |-&gt; foo1_stuff.hpp\n  |-&gt; src\n    |-&gt; main.cpp\n  |-&gt; build\n  |-&gt; CMakeLists.txt\n|-&gt; foo2\n  |-&gt; include\n    |-&gt; foo2_stuff.hpp\n  |-&gt; src\n    |-&gt; main.cpp\n  |-&gt; build\n  |-&gt; CMakeLists.txt\n|-&gt; lib\n  |-&gt; bar\n    |-&gt; include\n      |-&gt; bar.hpp\n    |-&gt; src\n      |-&gt; bar.cpp\n  |-&gt; bar_tool\n    |-&gt; include\n      |-&gt; bar_tool.hpp\n    |-&gt; src\n      |-&gt; bar_tool.cpp\n  |-&gt; CmakeLists.txt\n</code></pre>\n\n<p>foo1's main.cpp:</p>\n\n<pre><code>#include &lt;bar_tool.hpp&gt;\n\nint main()\n{\n    bar_tool tool;\n    tool.doStuff();\n\n    return 0;\n}\n</code></pre>\n\n<p>bar_tool.hpp:</p>\n\n<pre><code>#include &lt;bar.hpp&gt;\n\nclass bar_tool\n{\npublic:\n    bar_tool();\n    ~bar_tool();\n    int var;\n    void doStuff();\n};\n</code></pre>\n\n<p>bar_tool.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bar_tool.hpp&gt;\n\nbar_tool::bar_tool() : var(0) {}\nbar_tool::~bar_tool() {}\n\nvoid bar_tool::doStuff()\n{\n    std::cout &lt;&lt; barFunction(var) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>bar.cpp:</p>\n\n<pre><code>int barFunction(int value)\n{\n    return value + 2;\n}\n</code></pre>\n\n<p>Foo1 CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10.2)\nproject(foo)\n\nset(PROJECT_ROOT ~/myproject/)\nset(\n    CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_ROOT}/bin/\n)\n\nlink_directories(\n    /usr/local/lib\n    /usr/lib\n    ${PROJECT_ROOT}/lib\n)\n\ninclude_directories(\n    include\n    ${PROJECT_ROOT}/lib/bar_tool/include\n)\n\nfile(GLOB SOURCES \"src/*.cpp\")\n\nadd_executable(${PROJECT_NAME} ${SOURCES})\ntarget_link_libraries(\n    ${PROJECT_NAME}\n    bar_tool\n)\n</code></pre>\n\n<p>Shared Libraries CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10.2)\nproject(myproject)\n\nset(PROJECT_ROOT ~/myproject/)\nset(\n    CMAKE_LIBRARY_OUTPUT_DIRECTORY\n    ${PROJECT_ROOT}/lib/\n)\n\nlink_directories(\n    /usr/local/lib\n    /usr/lib\n    ${PROJECT_ROOT}/lib\n)\n\ninclude_directories(\n    include\n    ${PROJECT_ROOT}/lib/bar/include\n    ${PROJECT_ROOT}/lib/bar_tool/include\n)\n\n# bar library\nset(LIB_NAME \"bar\")\nfile(GLOB LIB_SRC \"${LIB_NAME}/src/*.cpp\")\nadd_library(${LIB_NAME} SHARED ${LIB_SRC})\n\n# bar_tool library\nset(LIB_NAME \"bar_tool\")\nfile(GLOB LIB_SRC \"${LIB_NAME}/src/*.cpp\")\nadd_library(${LIB_NAME} SHARED ${LIB_SRC})\ntarget_link_libraries(\n    ${LIB_NAME}\n        bar\n)\n</code></pre>\n\n<p>I would expect that using the compiled bar_tool shared library (<code>libbar_tool.so</code>) would not require having to include <code>bar.hpp</code> in the <code>include_directories</code> section of foo1's CMakeLists.  However, I get following error if I don't:</p>\n\n<pre><code>In file included from /home/mrd/Development/compile_test/foo/src/main.cpp:1:0:\n/home/mrd/Development/compile_test/lib/bar_tool/include/bar_tool.hpp:1:10: fatal error: bar.hpp: No such file or directory\n #include &lt;bar.hpp&gt;\n          ^~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>Am I not using shared libraries or CMake (or both) correctly?</p>\n\n<p><strong>FIX:</strong></p>\n\n<p><strong>UPDATED</strong> Shared Libraries CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10.2)\nproject(myproject)\n\nset(PROJECT_ROOT ~/myproject/)\nset(\n    CMAKE_LIBRARY_OUTPUT_DIRECTORY\n    ${PROJECT_ROOT}/lib/\n)\n\n# bar library\nset(LIB_NAME \"bar\")\nfile(GLOB LIB_SRC \"${LIB_NAME}/src/*.cpp\")\nadd_library(${LIB_NAME} SHARED ${LIB_SRC})\ntarget_include_directories(\n    ${LIB_NAME} PUBLIC\n    ${PROJECT_ROOT}/lib/bar/include\n)\n\n# bar_tool library\nset(LIB_NAME \"bar_tool\")\nfile(GLOB LIB_SRC \"${LIB_NAME}/src/*.cpp\")\nadd_library(${LIB_NAME} SHARED ${LIB_SRC})\ntarget_include_directories(\n    ${LIB_NAME} PUBLIC\n    ${PROJECT_ROOT}/lib/bar_tool/include\n)\ntarget_link_libraries(\n    ${LIB_NAME} PUBLIC\n    bar\n)\n</code></pre>\n\n<p><em>Not sure if this had any effect, but I changed this also:</em></p>\n\n<p><strong>UPDATED</strong> Foo1 CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10.2)\nproject(foo)\n\nset(PROJECT_ROOT /home/mrd/Development/compile_test)\nset(\n    CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_ROOT}/bin/\n)\n\nadd_subdirectory(${PROJECT_ROOT}/lib/ bin)\n\nfile(GLOB SOURCES \"src/*.cpp\")\n\nadd_executable(${PROJECT_NAME} ${SOURCES})\ntarget_link_libraries(\n    ${PROJECT_NAME}\n    bar_tool\n)\n</code></pre>\n\n<p>Any other suggestions are more than welcome!</p>\n"}, {"tags": ["c++", "cmake", "catch2"], "comments": [{"owner": {"reputation": 311, "user_id": 1239389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXSZI.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1239389/mike"}, "edited": false, "score": 0, "creation_date": 1601625003, "post_id": 57497918, "comment_id": 113470065, "body": "link to the &quot;similar question&quot;?"}, {"owner": {"reputation": 311, "user_id": 1239389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXSZI.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1239389/mike"}, "edited": false, "score": 0, "creation_date": 1601659774, "post_id": 57497918, "comment_id": 113484603, "body": "Why not set an environment variable and read it in CMake, write it to <code>add_test()</code> (or <code>catch_discover_tests()</code> <code>EXTRA_ARGS</code>)?"}], "owner": {"reputation": 88, "user_id": 9656396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3691f27f994b21fac028087b64ecf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jer", "link": "https://stackoverflow.com/users/9656396/jer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1604610328, "creation_date": 1565797148, "last_edit_date": 1604610328, "question_id": 57497918, "link": "https://stackoverflow.com/questions/57497918/how-to-pass-command-line-arguments-in-ctest-at-runtime", "title": "How to pass command-line arguments in CTest at runtime?", "body": "<p>I would like to pass parameters to our Catch2 tests via ctest when running through bamboo or jenkins so that they product junit test results. So I would like to do something like:</p>\n<pre><code>make test ARGS=&quot;-r junit -o test_results.xml&quot;\n</code></pre>\n<p>That would forward these on to my test:</p>\n<pre><code>unittest -r junit -o test_results.xml\n</code></pre>\n<p>That way when I run <code>make tests</code> it just runs the tests normally which pretty prints results to the console.</p>\n<p>I know args can be added in the add_test() command but I'm looking for something more dynamic.</p>\n<p>I'm hoping there is a way to do this in modern CMake.</p>\n"}, {"tags": ["c++", "templates", "overloading", "variadic-templates", "sfinae"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1565797015, "post_id": 57497828, "comment_id": 101465480, "body": "FWIW your last function will work with both cases.  Having <code>template &lt;typename Function, typename... Params&gt; void callFunc(Function fu, Params... params) {     fu(std::forward&lt;decltype(params)&gt;(params)...); }</code> lets you do <code>callFunc([](){});</code> and <code>callFunc([](int value1,int value2){}, 1, 2);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "is_accepted": false, "score": 3, "last_activity_date": 1565796979, "creation_date": 1565796979, "answer_id": 57497872, "question_id": 57497828, "link": "https://stackoverflow.com/questions/57497828/enable-template-if-functor-passed-as-argument-takes-no-argument/57497872#57497872", "title": "Enable template if functor passed as argument takes no argument", "body": "<p>You can use the detection idiom with <code>std::void_t</code> and <code>std::declval</code> to detect such features.</p>\n\n<pre><code>template &lt;typename FuncT&gt;\nusing invocable_without_args_t = std::void_t&lt;decltype(std::declval&lt;FuncT&gt;()())&gt;;\n</code></pre>\n\n<p>More information is <a href=\"https://blog.tartanllama.xyz/detection-idiom/\" rel=\"nofollow noreferrer\">available here</a>; this post helped me a lot to understand how this works.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1565797400, "creation_date": 1565797400, "answer_id": 57497987, "question_id": 57497828, "link": "https://stackoverflow.com/questions/57497828/enable-template-if-functor-passed-as-argument-takes-no-argument/57497987#57497987", "title": "Enable template if functor passed as argument takes no argument", "body": "<p>If you need two template functions, just write them:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;class R&gt;\nvoid callFunc(R (*f)()) {\n    std::cout &lt;&lt; \"Called no-arg template\\n\";\n    f();\n}\n\ntemplate &lt;class R, class T, class... Types, class... Params&gt;\nvoid callFunc(R (*f)(T, Types...), Params... params) {\n    std::cout &lt;&lt; \"Called multi-arg template\\n\";\n    f(params...);\n}\n\nvoid g() {\n    std::cout &lt;&lt; \"Called g\\n\";\n}\n\nvoid h(int) {\n    std::cout &lt;&lt; \"Called h\\n\";\n}\n\nint main() {\n    callFunc(g);\n    callFunc(h, 3);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[temp]$ clang++ -std=c++11 test.cpp\n[temp]$ ./a.out\nCalled no-arg template\nCalled g\nCalled multi-arg template\nCalled h\n[temp]$ \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1565798998, "creation_date": 1565798998, "answer_id": 57498412, "question_id": 57497828, "link": "https://stackoverflow.com/questions/57497828/enable-template-if-functor-passed-as-argument-takes-no-argument/57498412#57498412", "title": "Enable template if functor passed as argument takes no argument", "body": "<ol>\n<li>Here is your version with a fixed syntax:</li>\n</ol>\n\n<pre><code>template &lt;typename R, typename... Types&gt;\nconstexpr size_t argumentCount(R (*f)(Types...))\n{\n    return sizeof...(Types);\n}\n\ntemplate &lt;typename Function&gt;\ntypename std::enable_if&lt;argumentCount&lt;Function&gt;() == 0, int&gt; callFunc(Function fu)\n{\n    fu();\n}\n\ntemplate &lt;typename Function, typename... Params&gt;\ntypename std::enable_if&lt;argumentCount&lt;Function&gt;() == 0, int&gt; callFunc(Function fu, Params... params)\n{\n    fu(std::forward&lt;decltype(params)&gt;(params)...);\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>In this particular example you do not need an extra overload, <code>Types...</code> can be empty.</li>\n</ol>\n\n<pre><code>    template &lt;typename Function, typename... Params&gt;\n    auto callFunc(Function fu, Params... params)\n    {\n        fu(std::forward&lt;decltype(params)&gt;(params)...);\n    }\n</code></pre>\n\n<p>works perfectly well.</p>\n"}, {"comments": [{"owner": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "edited": false, "score": 0, "creation_date": 1565861393, "post_id": 57500250, "comment_id": 101483045, "body": "Obviously this is very close to solution among the other ideas I tried. But this checks the number of parameters passed not the number of parameters that function accepts."}, {"owner": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "edited": false, "score": 0, "creation_date": 1565861547, "post_id": 57500250, "comment_id": 101483098, "body": "Consider , Qt Signal Slot implementation. where signal is passing arguments while slot does not have to take all parameters."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "edited": false, "score": 0, "creation_date": 1565869307, "post_id": 57500250, "comment_id": 101485822, "body": "@MuhammetAliAsan - as explained at the end of the answer, if you want to select the correct function through the number of parameter accepted by the functional, you can use <code>std::integral_constant&lt;bool, 0u == argumentCount&lt;Function&gt;()&gt;{}</code> instead of <code>std::integral_constant&lt;bool, 0u == sizeof...(Prs)&gt;{}</code>"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1565807623, "creation_date": 1565807623, "answer_id": 57500250, "question_id": 57497828, "link": "https://stackoverflow.com/questions/57497828/enable-template-if-functor-passed-as-argument-takes-no-argument/57500250#57500250", "title": "Enable template if functor passed as argument takes no argument", "body": "<p>If you can add a level of indirection... what about using tag-dispatching instead of SFINAE?</p>\n\n<p>I mean, something as follows</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename F&gt;\nvoid callFunc_helper (F fu, std::true_type)\n {\n   std::cout &lt;&lt; \"zero version\" &lt;&lt; std::endl;\n\n   fu();\n }\n\ntemplate &lt;typename F, typename... Prs&gt;\nvoid callFunc_helper (F fu, std::false_type, Prs &amp;&amp; ... params)\n {\n   std::cout &lt;&lt; \"non zero version\" &lt;&lt; std::endl;\n\n   fu(std::forward&lt;Prs&gt;(params)...);\n }\n\ntemplate &lt;typename F, typename... Prs&gt;\nvoid callFunc (F fu, Prs &amp;&amp; ... params)\n { callFunc_helper(fu, std::integral_constant&lt;bool, 0u == sizeof...(Prs)&gt;{},\n                   std::forward&lt;Prs&gt;(params)...); }\n\nint main ()\n {\n   callFunc([]{});\n   callFunc([](int, int){}, 0, 1);\n }\n</code></pre>\n\n<p>Obviously you can use <code>std::integral_constant&lt;bool, 0u == argumentCount&lt;Function&gt;()&gt;{}</code> if you really want to check the number of the functional arguments instead of the number of the following parameters (but why?).</p>\n"}], "owner": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 57500250, "answer_count": 4, "score": 3, "last_activity_date": 1565896291, "creation_date": 1565796802, "last_edit_date": 1565896291, "question_id": 57497828, "link": "https://stackoverflow.com/questions/57497828/enable-template-if-functor-passed-as-argument-takes-no-argument", "title": "Enable template if functor passed as argument takes no argument", "body": "<p>I am trying to define two overload for a template function. \nFirst overload is generated if functor passed as an argument has no parameter otherwise second overload is generated. \nI started to implement like this : </p>\n\n<pre><code>template &lt;typename R, typename... Types&gt;\nconstexpr size_t argumentCount(R (*f)(Types...))\n{\n    return sizeof...(Types);\n}\n\ntemplate &lt;typename Function&gt;\ntypename std::enable_if&lt;argumentCount&lt;Function&gt;() == 0, int&gt;::value = 0 &gt; callFunc(Function fu)\n{\n    fu();\n}\n\ntemplate &lt;typename Function, typename... Params&gt;\ntypename std::enable_if&lt;argumentCount&lt;Function&gt;() == 0, int&gt;::value = 0 &gt; callFunc(Function fu, Params... params)\n{\n    fu(std::forward&lt;decltype(params)&gt;(params)...);\n}\n</code></pre>\n\n<p>This does not compile for several reasons including parse error.What I want to do is, </p>\n\n<p><code>callFunc([](){});</code> will call overload 1 while <code>callFunc([](int value1,int value2){});</code> will call overload 2.</p>\n\n<p>How can I achieve this ? </p>\n"}, {"tags": ["c++", "shared-ptr", "c-api", "raw-pointer"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 7, "creation_date": 1565795725, "post_id": 57497517, "comment_id": 101464760, "body": "Why are you using <code>std::shared_ptr</code> for pointers you don&#39;t own? That goes squarely against the whole point of <code>std::shared_ptr</code>..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1565795808, "post_id": 57497517, "comment_id": 101464817, "body": "It seems you are under the impression that <code>shared_ptr</code> should substitute all uses of pointers. This is not the case. It should only be used for pointers you own (pointers you are responsible for cleaning up after). If your pointer does not own the object it points to, it should not be a <code>std::shared_ptr</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1565795992, "post_id": 57497517, "comment_id": 101464918, "body": "In this question it is also unclear what came first: The C API or the C++ class. You say you wrote a C API for a C++ class, but what you actually do is <i>receive</i> a raw pointer <i>from</i> a C API. So who owns the pointer? Your C++ code or some external C code? We are missing the other side of the API here."}, {"owner": {"reputation": 21, "user_id": 11927968, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214582337541288/picture?type=large", "display_name": "Lars Reimer", "link": "https://stackoverflow.com/users/11927968/lars-reimer"}, "edited": false, "score": 0, "creation_date": 1565810641, "post_id": 57497517, "comment_id": 101471066, "body": "I receive this raw-pointer from the C-API of another class (Environment). There it&#39;s normally a unique-pointer, but has been made available in C by releasing it.  Now I must have a C-API from my class (Traffic) which only uses the stuff available in C. That&#39;s why I must handle the raw-pointer e."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11927968, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214582337541288/picture?type=large", "display_name": "Lars Reimer", "link": "https://stackoverflow.com/users/11927968/lars-reimer"}, "edited": false, "score": 0, "creation_date": 1565811154, "post_id": 57497604, "comment_id": 101471254, "body": "Thank you! I will try this out. Alternatively I could change my C++ functions to use raw-pointers. Since my class should not be responsible for the object behind &quot;e&quot; and it&#39;s not possible that this object vanishs while my functions are executed, this might be a way to go. I just was told to better use smart-pointers, so I left this option out for now."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 21, "user_id": 11927968, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214582337541288/picture?type=large", "display_name": "Lars Reimer", "link": "https://stackoverflow.com/users/11927968/lars-reimer"}, "edited": false, "score": 0, "creation_date": 1565811566, "post_id": 57497604, "comment_id": 101471385, "body": "@LarsReimer I would say somewhere around 80-90% of the time, it&#39;s correct to only use smart pointers. But the kind of scenario you&#39;re working with here, where you&#39;re passing around pointers to objects you don&#39;t own, and whose lifetime is at least guaranteed through the execution of a given function, is where you don&#39;t need them."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 12, "last_activity_date": 1565796331, "last_edit_date": 1592644375, "creation_date": 1565795885, "answer_id": 57497604, "question_id": 57497517, "link": "https://stackoverflow.com/questions/57497517/how-to-prevent-deletion-of-a-raw-pointer-that-is-used-as-shared-pointer/57497604#57497604", "title": "How to prevent deletion of a raw pointer that is used as shared pointer?", "body": "<h1>Don't put the pointer in a <code>std::shared_ptr</code></h1>\n<p>The purpose of Smart Pointers in C++ is to provide automatic Lifetime management. When you write <code>std::shared_ptr&lt;int&gt; ptr{raw_ptr};</code>, the expectation is that when <code>ptr</code> goes out of scope, the object pointed to by <code>raw_ptr</code> will be <code>delete</code>'d. If this is not the intent, then you should not be placing the pointer in a smart pointer.</p>\n<p>So if your application does not manage the lifetime of a pointer, then it is perfectly acceptable to store a raw pointer.</p>\n<p>If the API behind the function cannot be altered, you will instead need to construct the <code>std::shared_ptr</code> with a no-op deleter function, so that when clean-up is called, nothing will happen to the pointer.</p>\n<pre><code>try {\n    std::shared_ptr&lt;Environment&gt; temp_ptr{e, [](int *) {}/*No-Op Deleter*/};\n    t-&gt;doStep(temp_ptr, cycletime);\n    return true;\n}\n</code></pre>\n<p>This will solve your problem, but this is, of course, an Antipattern; don't do this unless you've been forced to by API design constraints that you cannot control.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565796524, "post_id": 57497663, "comment_id": 101465237, "body": "(Apologies for my earlier comment, I was misinformed!)"}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565797007, "post_id": 57497663, "comment_id": 101465475, "body": "@MaxLanghof It&#39;s great that you commented. It made me include a clarification."}], "tags": [], "owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "is_accepted": false, "score": 2, "last_activity_date": 1565796942, "last_edit_date": 1565796942, "creation_date": 1565796091, "answer_id": 57497663, "question_id": 57497517, "link": "https://stackoverflow.com/questions/57497517/how-to-prevent-deletion-of-a-raw-pointer-that-is-used-as-shared-pointer/57497663#57497663", "title": "How to prevent deletion of a raw pointer that is used as shared pointer?", "body": "<p>You may provide a custom deleter of a shared pointer.</p>\n\n<p>Here is a viable constructor:</p>\n\n<pre><code>template&lt; class Y, class Deleter &gt; \nshared_ptr( Y* ptr, Deleter d );\n</code></pre>\n\n<p>But I would rather use a unique pointer and then release it.</p>\n"}], "owner": {"reputation": 21, "user_id": 11927968, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214582337541288/picture?type=large", "display_name": "Lars Reimer", "link": "https://stackoverflow.com/users/11927968/lars-reimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 57497604, "answer_count": 2, "score": 1, "last_activity_date": 1565798105, "creation_date": 1565795550, "last_edit_date": 1565798105, "question_id": 57497517, "link": "https://stackoverflow.com/questions/57497517/how-to-prevent-deletion-of-a-raw-pointer-that-is-used-as-shared-pointer", "title": "How to prevent deletion of a raw pointer that is used as shared pointer?", "body": "<p>I implemented a C-API for a C++ class which uses shared-pointers of other objects to access them.\nIn my C-API I can of course only get raw pointers.\nSo I \"convert\" the raw pointer in my C-API to a shared-pointer and use this then with my C++ class methods:</p>\n\n<pre><code>method(std::shared_ptr&lt;dataType&gt;(raw-pointer));\n</code></pre>\n\n<p>Now I have the problem that at the end of \"method\" always the shared-pointer destructor is called and it unfortunately kills the object my raw-pointer is pointing at (which I don't want).\nSo, how can I prevent the raw-pointer from being killed?</p>\n\n<p>I already tried shared-pointer functions like reset() or swap(), but they all didn't let my raw-pointer go...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool Traffic_doStep(traffic_handle t, environment_handle e, double cycletime) {\n    if (!valid(t, __FUNCTION__)) return false;\n    if (!valid(e, __FUNCTION__)) return false;\n    if (!valid(cycletime, __FUNCTION__)) return false;\n\n    try {\n        t-&gt;doStep(std::shared_ptr&lt;Environment&gt;(e), cycletime);\n        return true;\n    }\n    catch (const std::exception&amp; e) {\n        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;\n        return false;\n    }\n}\n</code></pre>\n\n<p>Expected result would be that the raw-pointer e is still pointing to a valid object after this function returned.\nActually the raw-pointer points then to a deleted object.</p>\n"}, {"tags": ["python", "c++", "testing", "bazel"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "edited": false, "score": 0, "creation_date": 1566020908, "post_id": 57499321, "comment_id": 101532598, "body": "It should work. But according to documentation, this situation is exactly mentioned! &quot;If you want to <b>run</b> a <code>py_binary</code> from within another binary or test (for example, running a python binary to set up some mock resource from within a <code>java_test</code>) then the correct approach is to make the other binary or test depend on the <code>py_binary</code> in its data section.&quot; see <a href=\"https://docs.bazel.build/versions/master/be/python.html#py_binary_examples\" rel=\"nofollow noreferrer\">the link I mentioned above</a>"}, {"owner": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "edited": false, "score": 0, "creation_date": 1566021395, "post_id": 57499321, "comment_id": 101532678, "body": "I guess that my mentioned scenario may not work as dependencies are not run, but just build! But so what does the doc above say?!"}, {"owner": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "edited": false, "score": 0, "creation_date": 1566023689, "post_id": 57499321, "comment_id": 101533071, "body": "In <code>cmd</code> section, what is <code>$@</code> for?"}, {"owner": {"reputation": 2556, "user_id": 6327445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bedc05d161365453ce0020096562de?s=128&d=identicon&r=PG&f=1", "display_name": "ahumesky", "link": "https://stackoverflow.com/users/6327445/ahumesky"}, "reply_to_user": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "edited": false, "score": 2, "creation_date": 1566239770, "post_id": 57499321, "comment_id": 101586167, "body": "The documentation describes making a binary available to another binary so that one can run the other. But what you&#39;re asking about is making the output of one binary available to another. To do that you&#39;d need to either depend directly on the binary as you did in your post, and then manually run the binary in test.cc, or ask bazel to do it by putting a genrule between the two binary rules."}, {"owner": {"reputation": 2556, "user_id": 6327445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bedc05d161365453ce0020096562de?s=128&d=identicon&r=PG&f=1", "display_name": "ahumesky", "link": "https://stackoverflow.com/users/6327445/ahumesky"}, "reply_to_user": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "edited": false, "score": 0, "creation_date": 1566239841, "post_id": 57499321, "comment_id": 101586192, "body": "<code>$@</code> is a shortcut for &quot;the path to the output file, if there is only one output&quot;. See <a href=\"https://docs.bazel.build/versions/master/be/general.html#genrule.cmd\" rel=\"nofollow noreferrer\">docs.bazel.build/versions/master/be/general.html#genrule.cmd</a> and <a href=\"https://docs.bazel.build/versions/master/be/make-variables.html#predefined_genrule_variables\" rel=\"nofollow noreferrer\">docs.bazel.build/versions/master/be/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2556, "user_id": 6327445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bedc05d161365453ce0020096562de?s=128&d=identicon&r=PG&f=1", "display_name": "ahumesky", "link": "https://stackoverflow.com/users/6327445/ahumesky"}, "is_accepted": false, "score": 2, "last_activity_date": 1565803219, "creation_date": 1565803219, "answer_id": 57499321, "question_id": 57497270, "link": "https://stackoverflow.com/questions/57497270/bazel-how-to-run-py-binary-to-produce-input-files-before-testing/57499321#57499321", "title": "Bazel: How to run py_binary to produce input files before testing", "body": "<p><code>data = [\":testInputs\"]</code> on the <code>cc_test</code> will make the <code>py_binary</code> itself available to the <code>cc_test</code>, not anything the <code>py_binary</code> might produce when run.</p>\n\n<p>You'll want something like this:</p>\n\n<pre><code>cc_test(\n  name = \"test\",\n  src = [\"test.cc\"],\n  data = [\":test_input.txt\"],\n)\n\ngenrule(\n  name = \"gen_test_inputs\",\n  tools = [\":test_input_generator\"],\n  outs = [\"test_input.txt\"],\n  cmd = \"$(location :test_input_generator) $@\"\n)\n\npy_binary(\n  name = \"test_input_generator\",\n  srcs = [\"test_input_generator.py\"],\n)\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 1655335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6d305c6285b81ffdbeca01708b87ab?s=128&d=identicon&r=PG", "display_name": "Emran BatmanGhelich", "link": "https://stackoverflow.com/users/1655335/emran-batmanghelich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1565803219, "creation_date": 1565794765, "last_edit_date": 1565795862, "question_id": 57497270, "link": "https://stackoverflow.com/questions/57497270/bazel-how-to-run-py-binary-to-produce-input-files-before-testing", "title": "Bazel: How to run py_binary to produce input files before testing", "body": "<p>I have a <code>py_binary</code> rule like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>py_binary(\n  name = \"testInputs\",\n  srcs = [\"testInputs.py\"],\n)\n</code></pre>\n\n<p>and a <code>cc_test</code> like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cc_test(\n  name = \"test\",\n  src = [\"test.cc\"],\n  data = [\":testInputs\"],\n)\n</code></pre>\n\n<p>test.cc needs an input file next to it (say <code>input.txt</code>) that is generated by <code>testInputs.py</code>.\nI want <code>testInputs</code> to get run and provide the input file to the <code>test</code>.</p>\n\n<p>As mentioned <a href=\"https://docs.bazel.build/versions/master/be/python.html#py_binary_examples\" rel=\"nofollow noreferrer\">here</a>, I tried to to depend on <code>testInputs</code> in the <code>data</code> section. But the test doesn't find the input file nearby.\nResult of <code>tree bazel-out | grep -F input.txt</code> shows that even <code>testInput</code> rule has not run at all - since <code>input.txt</code> file not exists at all.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "vector", "stl"], "answers": [{"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 8, "last_activity_date": 1565795336, "last_edit_date": 1565795336, "creation_date": 1565794545, "answer_id": 57497196, "question_id": 57497105, "link": "https://stackoverflow.com/questions/57497105/using-set-union-for-strings/57497196#57497196", "title": "Using set_union for strings", "body": "<p>Two things wrong with your code:</p>\n\n<ol>\n<li>you didn't read the requirements of <code>std::set_union</code> - the input ranges have to be sorted according to the given comparison function (<code>operator&lt;</code> in your case) - this does not hold for <code>b</code>.</li>\n<li>the algorithm cannot resize <code>c</code> through <code>c.begin()</code>; it remains empty and you write out of bounds. Use <code>std::back_insert_iterator</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 8897762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a571d1eda67f31ce9ffa23f65c7cfb7?s=128&d=identicon&r=PG&f=1", "display_name": "mayaa", "link": "https://stackoverflow.com/users/8897762/mayaa"}, "edited": false, "score": 0, "creation_date": 1565797031, "post_id": 57497433, "comment_id": 101465489, "body": "Thanks! It seems to work with unsorted input vectors also though."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 9, "last_activity_date": 1565943467, "last_edit_date": 1565943467, "creation_date": 1565795257, "answer_id": 57497433, "question_id": 57497105, "link": "https://stackoverflow.com/questions/57497105/using-set-union-for-strings/57497433#57497433", "title": "Using set_union for strings", "body": "<p>The algorithm <code>std::set_union</code> requires ordered sequences.\nIn your example of strings the first vector is ordered in the ascending order and the second one - in the descending order.</p>\n\n<p>Moreover the vector <code>c</code> is empty so you may not use the expression <code>c.begin()</code> in the call of the algorithm. You need to use <code>std::back_insert_iterator</code>.</p>\n\n<p>For your example of strings the call of the algorithm can look the following way as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\n\nint main() \n{\n    std::vector&lt;std::string&gt; a = { \"a\", \"b\" };\n    std::vector&lt;std::string&gt; b = { \"d\", \"c\" };\n\n    std::vector&lt;std::string&gt; c;\n\n    std::set_union( std::begin( a ), std::end( a ), \n                    std::rbegin( b ), std::rend( b ),\n                    std::back_inserter( c ) );\n\n    for ( const auto &amp;s : c ) std::cout &lt;&lt; s &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is </p>\n\n<pre><code>a b c d \n</code></pre>\n\n<p>Otherwise you need to sort vectors.</p>\n\n<p>If you may not sort the original vectors then you can use the following approach</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\n\nint main() \n{\n    std::vector&lt;std::string&gt; a = { \"a\", \"b\" };\n    std::vector&lt;std::string&gt; b = { \"d\", \"c\", \"a\" };\n\n    std::vector&lt;std::string&gt; c( a );\n    c.insert( std::end( c ), std::begin( b ), std::end( b ) );\n\n    std::sort( std::begin( c ), std::end( c ) );\n\n    c.erase( std::unique( std::begin( c ), std::end( c ) ), std::end( c ) );\n\n    for ( const auto &amp;s : c ) std::cout &lt;&lt; s &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>a b c d\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 3, "last_activity_date": 1565801913, "creation_date": 1565801913, "answer_id": 57499036, "question_id": 57497105, "link": "https://stackoverflow.com/questions/57497105/using-set-union-for-strings/57499036#57499036", "title": "Using set_union for strings", "body": "<p>An alternative to using the <code>std::set_union()</code> algorithm would be to use either the <a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set</code></a> or <a href=\"https://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\"><code>std::unordered_set</code></a> container for storing all the elements of both vectors and then initialising the resulting vector from that container.</p>\n\n<p>The drawback to this approach is that the additional container requires linear space in the number of unique elements across the two vectors.</p>\n\n<p>Which container you use, will depend on whether or not you need the resulting vector to be sorted. If you don't need the resulting vector to be sorted, you can just use <code>std::unordered_set</code>:</p>\n\n<pre><code>std::vector&lt;std::string&gt; make_unsorted_union(const std::vector&lt;std::string&gt;&amp; a,\n                                             const std::vector&lt;std::string&gt;&amp; b)\n{\n   std::unordered_set&lt;std::string&gt; st;\n\n   for (auto&amp; str: a)\n      st.insert(str);\n\n   for (auto&amp; str: b)\n      st.insert(str);\n\n   return std::vector&lt;std::string&gt;(st.begin(), st.end());\n}\n</code></pre>\n\n<p>Inserting an element into an <code>std::unordered_set</code> can be done in constant time on average.</p>\n\n<p>If you need the resulting vector to be sorted, then you can use <code>std::set</code> instead:</p>\n\n<pre><code>std::vector&lt;std::string&gt; make_sorted_union(const std::vector&lt;std::string&gt;&amp; a,\n                                            const std::vector&lt;std::string&gt;&amp; b)\n{\n   std::set&lt;std::string&gt; st;\n\n   for (auto&amp; str: a)\n      st.insert(str);\n\n   for (auto&amp; str: b)\n      st.insert(str);\n\n   return std::vector&lt;std::string&gt;(st.begin(), st.end());\n}\n</code></pre>\n\n<p>These functions can be used as follows:</p>\n\n<pre><code>int main() {\n   std::vector&lt;std::string&gt; a = {\"a\", \"z\", \"z\", \"b\", \"z\"};\n   std::vector&lt;std::string&gt; b = {\"d\", \"v\", \"c\", \"x\", \"e\"};\n\n   std::vector&lt;std::string&gt; c = make_unsorted_union(a, b);\n\n   for (auto&amp; str: c)\n      std::cout &lt;&lt; str &lt;&lt; ' ';\n   std::cout &lt;&lt; '\\n';\n\n   c = make_sorted_union(a, b);\n\n   for (auto&amp; str: c)\n      std::cout &lt;&lt; str &lt;&lt; ' ';\n   std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>My output of this program is:</p>\n\n<pre><code>e c x b v d z a \na b c d e v x z \n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8897762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a571d1eda67f31ce9ffa23f65c7cfb7?s=128&d=identicon&r=PG&f=1", "display_name": "mayaa", "link": "https://stackoverflow.com/users/8897762/mayaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 57497433, "answer_count": 3, "score": 6, "last_activity_date": 1565943467, "creation_date": 1565794229, "last_edit_date": 1565795615, "question_id": 57497105, "link": "https://stackoverflow.com/questions/57497105/using-set-union-for-strings", "title": "Using set_union for strings", "body": "<p>I have two vectors, I need their union in a third vector (without specifying the size of the third vector)</p>\n\n<pre><code>std::vector&lt;std::string&gt; a = {\"a\",\"b\"};\nstd::vector&lt;std::string&gt; b = {\"d\",\"c\"};\n\nstd::vector&lt;std::string&gt; c;\n\nstd::set_union(a.begin(),a.end(),b.begin(),b.end(),c.begin());\nstd::cout&lt;&lt;c[1];\n</code></pre>\n\n<p>This compiles but gives an empty output.</p>\n"}, {"tags": ["python", "c++", "jenkins"], "comments": [{"owner": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1565824024, "post_id": 57496912, "comment_id": 101474973, "body": "Can we convince you to upgrade to something released in the last 5 years?"}, {"owner": {"reputation": 15, "user_id": 3572761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe5362a48d30c9a1117a81a860746df?s=128&d=identicon&r=PG&f=1", "display_name": "user3572761", "link": "https://stackoverflow.com/users/3572761/user3572761"}, "reply_to_user": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1565851722, "post_id": 57496912, "comment_id": 101479704, "body": "Ha! Obvious solution, the issue is the company I work for have to ensure their products can work on a host of legacy applications and OS."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4992344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7vFp.png?s=128&g=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/4992344/nikki"}, "is_accepted": false, "score": 0, "last_activity_date": 1565935232, "creation_date": 1565935232, "answer_id": 57519538, "question_id": 57496912, "link": "https://stackoverflow.com/questions/57496912/python-package-cx-oracle-5-1-3-microsoft-visual-c-9-0-is-required-for/57519538#57519538", "title": "Python package cx_Oracle==5.1.3 Microsoft Visual C++ 9.0 is required for", "body": "<p>To avoid this build problem with Jenkins, what I did is install the old cx_Oracle version under the default python site packages. I use virtualenv so I can create a virtual environment and basically tell it to inherit the default python site packages like this:</p>\n\n<pre><code>mkvirtualenv --system-site-packages env_name\n</code></pre>\n\n<p>So this environment will have access to the default cx_Oracle package. Since the requirement will already be satisfied, pip will not try to install it again when building in Jenkins. </p>\n\n<p>I would love to upgrade a lot of things but it's just not seen as priority as long as everything works. </p>\n"}], "owner": {"reputation": 15, "user_id": 3572761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe5362a48d30c9a1117a81a860746df?s=128&d=identicon&r=PG&f=1", "display_name": "user3572761", "link": "https://stackoverflow.com/users/3572761/user3572761"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565935232, "creation_date": 1565793560, "question_id": 57496912, "link": "https://stackoverflow.com/questions/57496912/python-package-cx-oracle-5-1-3-microsoft-visual-c-9-0-is-required-for", "title": "Python package cx_Oracle==5.1.3 Microsoft Visual C++ 9.0 is required for", "body": "<p>Trying to install cx_Oracle==5.1.3 package onto windows 2012 server Through Jenkins. Using python 2.7 with setuptools-41.1.0.dist-info. I have installed Microsoft C++ Compiler for Python 9.0 but pip complains it can't find it</p>\n\n<p>Run the pip install code from the command line and it works. Tried setting various paths, tried calling the C++ environment from Jenkins. Scoured the internet for advice, not getting anywhere :(</p>\n\n<p>call \"C:\\Users*****\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\vcvarsall.bat\" x86_amd64</p>\n\n<p>%WORKON_HOME%\\emileTest\\Scripts\\pip install cx_Oracle==5.1.3</p>\n\n<p>This is the Jenkins error log</p>\n\n<blockquote>\n  <p>Collecting cx_Oracle==5.1.3\n    Using cached <a href=\"https://files.pythonhosted.org/packages/be/25/afc07a79ed268f6ab2e8959cfcff997504ce09500b881a1d93f92904762e/cx_Oracle-5.1.3.tar.gz\" rel=\"nofollow noreferrer\">https://files.pythonhosted.org/packages/be/25/afc07a79ed268f6ab2e8959cfcff997504ce09500b881a1d93f92904762e/cx_Oracle-5.1.3.tar.gz</a></p>\n  \n  <p>Building wheels for collected packages: cx-Oracle</p>\n  \n  <p>Building wheel for cx-Oracle (setup.py): started</p>\n  \n  <p>Building wheel for cx-Oracle (setup.py): finished with status 'error'\n    ERROR: Command errored out with exit status 1:</p>\n  \n  <p>command: 'c:\\envs\\emiletest\\scripts\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'c:\\windows\\temp\\pip-install-umf517\\cx-Oracle\\setup.py'\"'\"'; <strong>file</strong>='\"'\"'c:\\windows\\temp\\pip-install-umf517\\cx-Oracle\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(<strong>file</strong>);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, <strong>file</strong>, '\"'\"'exec'\"'\"'))' bdist_wheel -d 'c:\\windows\\temp\\pip-wheel-kg80iv' --python-tag cp27\n         cwd: c:\\windows\\temp\\pip-install-umf517\\cx-Oracle\\</p>\n  \n  <p>Complete output (5 lines):\n    running bdist_wheel</p>\n  \n  <p>running build</p>\n  \n  <p>running build_ext</p>\n  \n  <p>building 'cx_Oracle' extension</p>\n  \n  <p>error: Microsoft Visual C++ 9.0 is required. Get it from <a href=\"http://aka.ms/vcpython27\" rel=\"nofollow noreferrer\">http://aka.ms/vcpython27</a></p>\n</blockquote>\n"}, {"tags": ["c++", "algorithm", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1565794157, "post_id": 57496900, "comment_id": 101463835, "body": "What happens if you remove the +1 in merge_sort(vec, vec_mid+1, vec_size);"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1565794302, "post_id": 57496900, "comment_id": 101463934, "body": "Your <code>merge</code> function is horribly broken. You&#39;re accessing memory outside the bounds of the vectors you&#39;ve allocated. I&#39;d take a look online at some working merge functions. You&#39;re trying to be too clever in the loop. You&#39;ll need at least two separate loops for that function to work."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1565794538, "post_id": 57496900, "comment_id": 101464064, "body": "When initializing <code>Right_Vec</code>, you copy <code>vec</code> upto <code>std::end(vec)</code>, even when sorting a part of it."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1565795652, "post_id": 57496900, "comment_id": 101464722, "body": "The conceptual error here is that the merge function should only work on the specific parts it is told to merge. Your variable names indicate that you think it is supposed to work on the whole vector, and the code does just that."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1565796480, "post_id": 57496900, "comment_id": 101465211, "body": "<a href=\"https://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">Please see the merge sort implementation here</a>."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1565830686, "post_id": 57496900, "comment_id": 101476043, "body": "It would be more efficient to do a one time allocation of a full size working vector, then merge between the two vectors depending on the level of recursion, similar to the example in the <a href=\"https://en.wikipedia.org/wiki/Merge_sort#Top-down_implementation\" rel=\"nofollow noreferrer\">wiki article</a>, but with a more efficient merge. The initial copy to the temp vector can be avoided using a pair of mutually recursive functions (one the merges original back to original, one that merges original to temp, each calls the other)."}], "answers": [{"tags": [], "owner": {"reputation": 2128, "user_id": 6597851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/062788bb60b016a39edb038616166902?s=128&d=identicon&r=PG&f=1", "display_name": "krisz", "link": "https://stackoverflow.com/users/6597851/krisz"}, "is_accepted": true, "score": 0, "last_activity_date": 1565876830, "last_edit_date": 1565876830, "creation_date": 1565802134, "answer_id": 57499081, "question_id": 57496900, "link": "https://stackoverflow.com/questions/57496900/recursive-merge-sort-algorithm-implementation/57499081#57499081", "title": "Recursive Merge Sort Algorithm Implementation", "body": "<p>There are a couple of problems. These changes will fix the code:</p>\n\n<pre><code>void merge(std::vector&lt;int&gt;&amp; vec, size_t vec_start, size_t vec_mid, size_t vec_end) {\n  size_t leftLoop = 0;\n  size_t rightLoop = 0;\n  size_t vecLoop = 0;\n  // Not needed, much simpler if mid is relative to vec.begin()\n  //size_t mid = vec_mid - vec_init + 1;\n\n  // You didn't take vec_init and vec_size into account when calculating the ranges.\n  std::vector&lt;int&gt; Left_Vec(std::begin(vec) + vec_start, std::begin(vec) + vec_mid);\n  std::vector&lt;int&gt; Right_Vec(std::begin(vec) + vec_mid, std::begin(vec) + vec_end);\n\n  // Values are not uniformly distributed in the left and right vec. You have to check for\n  // running out of elements in any of them.\n  for (/*size_t*/ vecLoop = vec_start; leftLoop &lt; Left_Vec.size() &amp;&amp; rightLoop &lt; Right_Vec.size(); ++vecLoop) {\n    //   ^~~~~ shadowed outer vecLoop  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    vec[vecLoop] = Left_Vec[leftLoop] &lt;= Right_Vec[rightLoop] ? Left_Vec[leftLoop++] : Right_Vec[rightLoop++];\n  }\n\n  // Copy the rest of the values into vec.\n  if (leftLoop == Left_Vec.size())\n    std::copy(Right_Vec.begin() + rightLoop, Right_Vec.end(), vec.begin() + vecLoop);\n  else\n    std::copy(Left_Vec.begin() + leftLoop, Left_Vec.end(), vec.begin() + vecLoop);\n}\n\nvoid merge_sort(std::vector&lt;int&gt;&amp; vec, size_t vec_start, size_t vec_end) {\n  // Should only run the function if there are at least 2 elements, otherwise vec_mid\n  // would be always at least vec_start + 1 and the recursion would never stop.\n  if (vec_end - vec_start &gt;= 2) {\n    size_t vec_mid = (vec_start + vec_end) / 2;\n    merge_sort(vec, vec_start, vec_mid);\n    merge_sort(vec, vec_mid /* + 1 */, vec_end);\n    //                         ^~~ + 1 here would skip an element\n    merge(vec, vec_start, vec_mid, vec_end);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 422, "user_id": 11153062, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aIm_-qXM7pI/AAAAAAAAAAI/AAAAAAAAAuA/pZybNU3B-bE/photo.jpg?sz=128", "display_name": "Murat Hepeyiler", "link": "https://stackoverflow.com/users/11153062/murat-hepeyiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 57499081, "answer_count": 1, "score": 1, "last_activity_date": 1565876830, "creation_date": 1565793518, "last_edit_date": 1565864875, "question_id": 57496900, "link": "https://stackoverflow.com/questions/57496900/recursive-merge-sort-algorithm-implementation", "title": "Recursive Merge Sort Algorithm Implementation", "body": "<p>I am a newbie to Algorithm. I try to implement recursive merge sorting using <code>std::vector</code>. But I am stuck. The code does not work. </p>\n\n<p>I have looked at the algorithm from Introduction To Algorithms, Cormen/Leiserson/Rivest/Stein 3rd edition. The pseudocode which is I try to implement.</p>\n\n<p>Here my merge function:</p>\n\n<pre><code>void merge(std::vector&lt;int&gt;&amp; vec, size_t vec_init, size_t vec_mid, size_t vec_size) {\n  int leftLoop = 0;\n  int rightLoop = 0;\n  int vecLoop = 0;\n  size_t mid = vec_mid - vec_init + 1;\n\n  std::vector&lt;int&gt; Left_Vec(std::begin(vec), std::begin(vec) + mid);\n  std::vector&lt;int&gt; Right_Vec(std::begin(vec) + mid, std::end(vec));\n\n  for (size_t vecLoop = vec_init; vecLoop&lt;vec_size; ++vecLoop) {\n      vec[vecLoop] = (Left_Vec[leftLoop] &lt;= Right_Vec[rightLoop]) ? Left_Vec[leftLoop++] : Right_Vec[rightLoop++];\n  }\n}\n</code></pre>\n\n<p>And here my Merge-Sort function</p>\n\n<pre><code>void merge_sort(std::vector&lt;int&gt;&amp; vec, size_t vec_init, size_t vec_size) {\n    if (vec_init &lt; vec_size) {\n      size_t vec_mid = (vec_init + vec_size) / 2;\n      merge_sort(vec, vec_init, vec_mid);\n      merge_sort(vec, vec_mid + 1, vec_size);\n      merge(vec, vec_init, vec_mid, vec_size);\n   }\n} \n</code></pre>\n\n<p>When the input <code>vec = {30,40,20,10}</code>, the output <code>vec = {10, 10, 0, 20}</code>:</p>\n\n<pre><code>int main() {\n    auto data = std::vector{ 30, 40, 20, 10 };\n    merge_sort(data, 0, data.size());\n    for (auto e : data) std::cout &lt;&lt; e &lt;&lt; \", \";\n    std::cout &lt;&lt; '\\n';\n    // outputs 10, 10, 0, 20, \n}\n</code></pre>\n\n<p>Where is my mistake about the algorithm or code?</p>\n"}, {"tags": ["c++", "c++17", "optional", "unions"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 7, "creation_date": 1565796795, "post_id": 57497579, "comment_id": 101465374, "body": "For those hunting for the standard quote: <a href=\"http://eel.is/c++draft/dcl.dcl#dcl.constexpr-4.1\" rel=\"nofollow noreferrer\">eel.is/c++draft/dcl.dcl#dcl.constexpr-4.1</a>"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1565798746, "post_id": 57497579, "comment_id": 101466312, "body": "@TedLyngmo, which version? Tried on 7.4.0 - got an error."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1565798876, "post_id": 57497579, "comment_id": 101466376, "body": "@r3musn0x 9.1.1. I don&#39;t think 7.4.0 implements <a href=\"https://gcc.gnu.org/ml/libstdc%2B%2B/2017-03/msg00109.html\" rel=\"nofollow noreferrer\">LWG 2900</a>."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1565799358, "post_id": 57497579, "comment_id": 101466589, "body": "@TedLyngmo, it looks to me that LWG 2900 is only related to the library implementation of optional, so I don&#39;t really see the connection... Anyway look <a href=\"https://godbolt.org/z/EVyLfL\" rel=\"nofollow noreferrer\">here</a> - an error! :)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1565800262, "post_id": 57497579, "comment_id": 101467023, "body": "@r3musn0x You are probably correct. Here&#39;s a <a href=\"https://godbolt.org/z/0eaNDg\" rel=\"nofollow noreferrer\">comparison</a> between g++ and clang++ and also a bugreport that seems to be connected to this: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86581\" rel=\"nofollow noreferrer\">bugzilla #886581</a> It seems to hit my example when templates are involved, but in the bugreport they&#39;ve managed to trigger the bug without templates."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 28, "last_activity_date": 1566393957, "last_edit_date": 1592644375, "creation_date": 1565795781, "answer_id": 57497579, "question_id": 57496628, "link": "https://stackoverflow.com/questions/57496628/why-is-there-a-dummy-union-member-in-some-implementations-of-stdoptional/57497579#57497579", "title": "Why is there a dummy union member in some implementations of std::optional?", "body": "<p>Single member union creates all sorts of problem when trying to be default constructible and be constexpr compatible.</p>\n<p>Consider this code:</p>\n<pre><code>struct nontrivial {\n    constexpr nontrivial(int o) : u{o} {}\n    int u;\n};\n\nunion storage {\n    nontrivial nt;\n};\n\nstruct optional {\n    storage s;\n};\n\nconstexpr auto run() -&gt; int {\n    optional o;\n    return o.s.nt.u;\n}\n\nint main() {\n    constexpr int t = run();\n}\n</code></pre>\n<p>This is ill formed because <code>optional</code> has a deleted constructor.</p>\n<p>Then a simple fix would be to add a constructor that initialize no union member:</p>\n<pre><code>union storage {\n    constexpr storage() {} // standard says no\n    nontrivial nt;\n};\n</code></pre>\n<p>But it won't work. Constexpr unions must have at least one active member. It cannot be an empty union. To workaround this limitation, a dummy member is added. This makes <code>std::optional</code> useable in constexpr context.</p>\n<p>(Thanks @Barry!) From <a href=\"http://eel.is/c++draft/dcl.dcl#dcl.constexpr-4.1\" rel=\"nofollow noreferrer\">[dcl.constexpr]/4</a> (emphasis mine):</p>\n<blockquote>\n<p>The definition of a constexpr constructor whose function-body is not = delete shall additionally satisfy the following requirements:</p>\n<ul>\n<li><p><strong>if the class is a union having variant members ([class.union]), exactly one of them shall be initialized;</strong></p>\n</li>\n<li><p>if the class is a union-like class, but is not a union, for each of its anonymous union members having variant members, exactly one of them shall be initialized;</p>\n</li>\n<li><p>for a non-delegating constructor, every constructor selected to initialize non-static data members and base class subobjects shall be a constexpr constructor;</p>\n</li>\n<li><p>for a delegating constructor, the target constructor shall be a constexpr constructor.</p>\n</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 3, "accepted_answer_id": 57497579, "answer_count": 1, "score": 28, "last_activity_date": 1566393957, "creation_date": 1565792685, "last_edit_date": 1566329719, "question_id": 57496628, "link": "https://stackoverflow.com/questions/57496628/why-is-there-a-dummy-union-member-in-some-implementations-of-stdoptional", "title": "Why is there a dummy union member in some implementations of std::optional?", "body": "<p>Both libstdc++ (GNU) and libc++ (LLVM) implement <code>std::optional</code> value storage using a union and both of them include a dummy member.</p>\n\n<p>GNU implementation:</p>\n\n<pre><code>using _Stored_type = remove_const_t&lt;_Tp&gt;;\nstruct _Empty_byte { };\nunion {\n    _Empty_byte _M_empty;\n    _Stored_type _M_payload;\n};\n</code></pre>\n\n<p>LLVM implementation:</p>\n\n<pre><code>union\n{\n    char __null_state_;\n    value_type __val_;\n};\n</code></pre>\n\n<p>My question is: Why do we need these <code>_M_empty</code>/<code>__null_state_</code> members? Is there something wrong with a single-member union?</p>\n"}, {"tags": ["c++", "winapi", "64-bit", "user32"], "comments": [{"owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "edited": false, "score": 2, "creation_date": 1565792662, "post_id": 57496586, "comment_id": 101463037, "body": "Dude how can anyone help you with so little info?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565792723, "post_id": 57496586, "comment_id": 101463066, "body": "Present your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Spend at least as much time constructing your question, as you want to be taken constructing your free solution."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565793476, "post_id": 57496586, "comment_id": 101463471, "body": "Sorry for the bad question, I&#39;ve used the code from the example on Microsoft page, and didn&#39;t do anything to the code except changing the target build to x64; Since I need a x64 .dll."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565793557, "post_id": 57496586, "comment_id": 101463502, "body": "You need to present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> IJM. This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Thanks."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565793603, "post_id": 57496586, "comment_id": 101463527, "body": "You don&#39;t even tell us how you&#39;re building and executing the code, assuming you have a full program somewhere"}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565794047, "post_id": 57496586, "comment_id": 101463779, "body": "Ok, sorry for that. I&#39;ll make sure to ask my questions with more details in the future."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565794334, "post_id": 57496586, "comment_id": 101463955, "body": "@IJM Since this is a Q&amp;A repo rather than a helpdesk, you should still edit this question into a complete form. Not just &quot;in the future&quot;, but now! That&#39;s how you contribute back."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565792907, "post_id": 57496681, "comment_id": 101463175, "body": "Possibly true but should we not discourage questions like this until they are complete and resplendent in all necessary detail?"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565793037, "post_id": 57496681, "comment_id": 101463256, "body": "@LightnessRacesinOrbit I guess you&#39;re a lot more optimistic than I am."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565793173, "post_id": 57496681, "comment_id": 101463324, "body": "Thanks bro. In the example i found it was set to 40, I didn&#39;t change that. Setting dwSize to 65000 fixed the problem."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565793604, "post_id": 57496681, "comment_id": 101463528, "body": "Sorry for my noob question, this is my firs question on StackOverflow ever, in general I find everything by Googling. I&#39;ve updated my question to include dwSize. btw. I found other people with same problem, but no answers; So I thought that solution will be a bit more complicated."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1565793655, "post_id": 57496681, "comment_id": 101463553, "body": "Don&#39;t leave it at 65000 though. Find out what it <i>should</i> be and use that."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565793671, "post_id": 57496681, "comment_id": 101463564, "body": "Changing the dwSize did fix the problem, so this answer is correct. If I ever post another question, I&#39;ll make sure to do a much better job."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565793899, "post_id": 57496681, "comment_id": 101463698, "body": "All right, now that I know that was the problem I&#39;ll resolve it. I had no idea what was wrong."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 0, "creation_date": 1565794113, "post_id": 57496681, "comment_id": 101463810, "body": "btw. You guys are super quick, expected to get an answer in like 3 days ;)"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 1, "creation_date": 1565794229, "post_id": 57496681, "comment_id": 101463883, "body": "@IJM it could have been even quicker if you had shown more code initially as Lightness had suggested. I had to go out on a limb and guess the answer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "edited": false, "score": 1, "creation_date": 1565801904, "post_id": 57496681, "comment_id": 101467676, "body": "@IJM <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getrawinputdata\" rel=\"nofollow noreferrer\">Read the documentation</a>! <b><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/ns-winuser-rawinput\" rel=\"nofollow noreferrer\"><code>RAWINPUT</code></a> mouse data is 46 bytes on x64, vs 38 bytes on x86</b>. For mouse/keyboard data, use <code>sizeof(RAWINPUT)</code> instead of a hard-coded number. HID data is variable-sized, so call <code>GetRawInputData()</code> with <code>pData</code> set to NULL to get the actual buffer size needed, then allocate the buffer and pass it to <code>GetRawInputData()</code> to fill in (you can optionally do the same for mouse/keyboard data)."}, {"owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1566203590, "post_id": 57496681, "comment_id": 101568233, "body": "@RemyLebeau Thanks for explaining that. I wish Microsoft could write stuff like that in their examples."}], "tags": [], "owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": -1, "last_activity_date": 1565793730, "last_edit_date": 1565793730, "creation_date": 1565792857, "answer_id": 57496681, "question_id": 57496586, "link": "https://stackoverflow.com/questions/57496586/getrawinputdata-not-working-for-x64-build/57496681#57496681", "title": "GetRawInputData not working for x64 build", "body": "<p><code>dwSize</code> should be set to the size of the buffer. The buffer appears to be of different sizes on the two targets (which is to be expected as integer sizes vary, for example).</p>\n\n<p>In the below example I pick 65,000 arbitrarily, but you'll need to work out the correct value for your application.</p>\n\n<pre><code>dwSize = 65000;\nBYTE * lpb = new BYTE[dwSize];\nGetRawInputData((HRAWINPUT)lparam, RID_INPUT, lpb, &amp;dwSize, sizeof(RAWINPUTHEADER));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 499644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68a73f40081c1df7990fb50d1dc8938?s=128&d=identicon&r=PG", "display_name": "IJM", "link": "https://stackoverflow.com/users/499644/ijm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "closed_date": 1565800131, "accepted_answer_id": 57496681, "answer_count": 1, "score": 1, "last_activity_date": 1565801626, "creation_date": 1565792475, "last_edit_date": 1565801626, "question_id": 57496586, "link": "https://stackoverflow.com/questions/57496586/getrawinputdata-not-working-for-x64-build", "closed_reason": "Not suitable for this site", "title": "GetRawInputData not working for x64 build", "body": "<p>GetRawInputData works fine with x86 build, but not with x64.</p>\n\n<pre><code>UINT32 dwSize = 40;\nstatic BYTE lpb[40];\nGetRawInputData((HRAWINPUT)lparam, RID_INPUT, lpb, &amp;dwSize, sizeof(RAWINPUTHEADER));\n</code></pre>\n\n<p>I'm using it to get mouse input. In x86 build I get proper values, but on x64 it returns 0 for lLastX and lLastY.</p>\n\n<pre><code>RAWINPUT* raw = (RAWINPUT*)lpb;\n\nif (raw-&gt;header.dwType == RIM_TYPEMOUSE)\n{\n  int xPosRelative = raw-&gt;data.mouse.lLastX;\n  int yPosRelative = raw-&gt;data.mouse.lLastY;\n  ...\n</code></pre>\n\n<p>I'm pretty much using the code from the Microsoft website, so I'm not sure where to go from this point. Google didn't help. Thanks!</p>\n"}, {"tags": ["c++", "language-lawyer", "std-function", "argument-dependent-lookup"], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1565792777, "last_edit_date": 1565792777, "creation_date": 1565792464, "answer_id": 57496585, "question_id": 57496519, "link": "https://stackoverflow.com/questions/57496519/adl-with-stdfunction-can-functions-taking-stdfunction-objects-be-found-via/57496585#57496585", "title": "ADL with std::function: Can functions taking std::function objects be found via the types in the std::function&#39;s argument list?", "body": "<blockquote>\n  <p>Is the code using Arg valid according to the C++ standard?</p>\n</blockquote>\n\n<p>It is. The associated namespaces for ADL include the associated namespaces of any template argument for a specialization, according to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.lookup.argdep#2.2\" rel=\"noreferrer\">[basic.lookup.argdep/2.2]</a></p>\n\n<blockquote>\n  <p>... Furthermore, if T is a class template specialization, its\n  associated namespaces and classes also include: the namespaces and\n  classes associated with the types of the template arguments provided\n  for template type parameters (excluding template template parameters);\n  the namespaces of which any template template arguments are members;\n  and the classes of which any member templates used as template\n  template arguments are members. [\u2009Note: Non-type template arguments do\n  not contribute to the set of associated namespaces.\u2009\u2014\u2009end note\u2009]</p>\n</blockquote>\n\n<p><code>std::function&lt;int(Arg)&gt;</code> is a class template specialization, and <code>ns</code> is associated with one of its arguments. Therefore <code>ns</code> is included in the set of namespaces that is searched for <code>operator+</code> by ADL.</p>\n\n<p>This rule exists to make reusable components more useful. The idea is to allow a library to expose say an API that takes a <code>std::unique_ptr&lt;ns::Foo&gt;</code> as a handle type, and for ADL to pick up the correct functions from <code>ns</code> when presented with a handle.</p>\n"}], "owner": {"reputation": 1081, "user_id": 2296653, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f95969c3d20a10e91470c21dc2ed80f?s=128&d=identicon&r=PG", "display_name": "user2296653", "link": "https://stackoverflow.com/users/2296653/user2296653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57496585, "answer_count": 1, "score": 6, "last_activity_date": 1565792777, "creation_date": 1565792254, "question_id": 57496519, "link": "https://stackoverflow.com/questions/57496519/adl-with-stdfunction-can-functions-taking-stdfunction-objects-be-found-via", "title": "ADL with std::function: Can functions taking std::function objects be found via the types in the std::function&#39;s argument list?", "body": "<p>Consider the following code snippet:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nnamespace ns {\n    struct Arg{};\n    using Func = std::function&lt;int(Arg)&gt;;\n\n    Func operator+(Func lhs, Func rhs) {\n        return [lhs, rhs](Arg arg) {\n            return lhs(arg) + rhs(arg);\n        };\n    }\n}\n\nint main() {\n    ns::Func foo = [](ns::Arg i) {return 5;};\n    ns::Func bar = [](ns::Arg i) {return 2;};\n    auto foobar = foo + bar;\n    return foobar(ns::Arg());\n}\n</code></pre>\n\n<p>The above code compiles with various compilers. In contrast, the following code snippet does not compile. The only difference is the type of the argument used inside <code>Func</code> (<code>Arg</code> vs <code>int</code>):</p>\n\n<pre><code>#include &lt;functional&gt;\n\nnamespace ns {\n    using Func = std::function&lt;int(int)&gt;;\n\n    Func operator+(Func lhs, Func rhs) {\n        return [lhs, rhs](int i) {\n            return lhs(i) + rhs(i);\n        };\n    }\n}\n\nint main() {\n  ns::Func foo = [](int i) {return i + 5;};\n  ns::Func bar = [](int i) {return i * 2;};\n  auto foobar = foo + bar; // BANG! Error here!\n  return foobar(2);\n}\n</code></pre>\n\n<p>I understand the error of the latter version: The called <code>operator+</code> is defined in a namespace and thus not found without explicit specification of the namespace. Argument dependent lookup will not help here, because the <code>operator+</code> is defined in a different namespace (<code>ns</code>) than the type of the argument (<code>std::function</code> is defined in <code>namespace std</code>, the <code>using</code> declaration is irrelevant for this).</p>\n\n<p>But why is the correct <code>operator+</code> found in the case where <code>Func</code> takes an argument <code>ns::Arg</code>? The namespace of <code>Func</code> has not changed. Is the code using <code>Arg</code> valid according to the C++ standard?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "tcp", "windows-embedded"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1565792094, "post_id": 57496234, "comment_id": 101462717, "body": "Welcome to StackOverflow! Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 2572309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6295b63d0d0c4438b5c5ec034c5c03dd?s=128&d=identicon&r=PG", "display_name": "user2572309", "link": "https://stackoverflow.com/users/2572309/user2572309"}, "is_accepted": false, "score": 0, "last_activity_date": 1565938019, "creation_date": 1565938019, "answer_id": 57520046, "question_id": 57496234, "link": "https://stackoverflow.com/questions/57496234/ucrtbase-dll-crash-on-c-windows-embedded-standard-involving-tcp-communication/57520046#57520046", "title": "ucrtbase.dll crash on c++ windows embedded standard involving tcp communication", "body": "<p>In case someone stumbles upon this question, i have found my problem.</p>\n\n<p>My software uses 4 circular buffers for incoming data (RX,TX) and outgoing data (RX, TX) when monitoring the buffer loads, i was seeing that one buffer fills up and reaches its maximum. It seems like that communication line can not handle the amount of data. When i reduce the traffic for that buffer everything works fine. </p>\n\n<p>So in conclusion the error was in my circular buffer that somehow did not send me a \"buffer full\" and let my application crash. This crash only occurred when a specific client is connected that could not handle the traffic.</p>\n\n<p>Hope this will help someone else seeing ucrtbase.dll errors.</p>\n"}], "owner": {"reputation": 13, "user_id": 2572309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6295b63d0d0c4438b5c5ec034c5c03dd?s=128&d=identicon&r=PG", "display_name": "user2572309", "link": "https://stackoverflow.com/users/2572309/user2572309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 860, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565938019, "creation_date": 1565791190, "question_id": 57496234, "link": "https://stackoverflow.com/questions/57496234/ucrtbase-dll-crash-on-c-windows-embedded-standard-involving-tcp-communication", "title": "ucrtbase.dll crash on c++ windows embedded standard involving tcp communication", "body": "<p>I am developing a software for windows embedded standard x64 (win 7) and keep getting a ucrtbase.dll crash. I would like to know how to solve this.</p>\n\n<p>The application is going to receive data via TCP from a client and foreward it to a different application. The application works fine on the development maschine (Win 10 with Visual Studio 2017 ...).</p>\n\n<p>When the application is copied to the windows embedded system environment it is not working. When the Server-Client connection is established, some data is received and printed to the console, but finally my application will crash within a few seconds (5s or less).</p>\n\n<p>I am using the Visual Studio 2015 - Windows XP (v140_xp) toolset\nPlatform version 10.0.17763.0\nI have tested it with a multi threaded runtime library (Multi-threaded DLL) and also with staticly linked multi-threaded runtime library, because i thought it is a environment error. </p>\n\n<p>The application uses a socket-library from here <a href=\"https://github.com/DFHack/clsocket\" rel=\"nofollow noreferrer\">https://github.com/DFHack/clsocket</a></p>\n\n<p>I have also observed that when i connect to my target and send data at slower datarates i do not get this error. But running the software on my development maschine will run in all configurations. The cpu of my target should be fast enough Core i7-3xxxQE, 4GB RAM and i have installed many redistributables installed 2010, 2012, 2013, 2015-2019, non of which match the platform version number. The closest is 10.0.30319. Is there a way to determine the correct redistributable for my application?</p>\n\n<p>Here is the fault that i am getting.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>Problem signature:\n  Problem Event Name:   APPCRASH\n  Application Name: t50adapter.exe\n  Application Version:  0.0.0.0\n  Application Timestamp:    5d52aabc\n  Fault Module Name:    ucrtbase.DLL\n  Fault Module Version: 10.0.10586.788\n  Fault Module Timestamp:   5879aa7b\n  Exception Code:   40000015\n  Exception Offset: 0008469a\n  OS Version:   6.1.7601.2.1.0.320.65\n  Locale ID:    1033\n  Additional Information 1: 1c3c\n  Additional Information 2: 1c3cee0f1ec6458708cdeeeb1a339ee4\n  Additional Information 3: 204a\n  Additional Information 4: 204a8c5270b5b704eeac649e2bb5f58c\n\nRead our privacy statement online:\n  http://go.microsoft.com/fwlink/?linkid=104288&amp;clcid=0x0409\n\nIf the online privacy statement is not available, please read our privacy statement offline:\n  C:\\Windows\\system32\\en-US\\erofflps.txt\n</code></pre>\n\n<p>I was expecting, that my application will work when the correct redistributable packages are installed. What am i missing?</p>\n\n<p>Please tell me, in case you need more information.</p>\n"}, {"tags": ["c++", "memory-management", "boolean"], "comments": [{"owner": {"reputation": 118, "user_id": 3005141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UQ9Tq.png?s=128&g=1", "display_name": "stalker2106", "link": "https://stackoverflow.com/users/3005141/stalker2106"}, "edited": false, "score": 2, "creation_date": 1565791523, "post_id": 57496231, "comment_id": 101462414, "body": "The answer depends a lot on the compiler and system. I guess you can find your answer by reading about padding/aligment of c++ compilers, wikipedia talks about it <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Data_structure_alignment</a>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1565791577, "post_id": 57496231, "comment_id": 101462449, "body": "The smallest piece of memory that can be addressed is a byte, so packing Booleans creates other problems that are likely to be less efficient in terms of execution time. <a href=\"https://stackoverflow.com/a/17794965/10077\"><code>vector&lt;bool&gt;</code> helps illustrate some of these</a>."}], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1565791602, "answer_count": 0, "score": 1, "last_activity_date": 1565791178, "creation_date": 1565791178, "question_id": 57496231, "link": "https://stackoverflow.com/questions/57496231/how-are-bools-stored-in-c", "closed_reason": "Duplicate", "title": "How are bools stored in C++?", "body": "<p>The size of a bool is claimed to be 1 byte using this command:</p>\n\n<pre><code>printf(\"%ld\\n\", sizeof(bool));\n</code></pre>\n\n<p>But this doesn't seem very efficient. So how are bools stored in memory?</p>\n\n<p>Will the OS search for other bools and store up to 8 bools in a byte, will each bool be stored in a single byte, resulting in 7 unused bits or are they stored differently?</p>\n"}, {"tags": ["c++", "c++11", "eos"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565791139, "post_id": 57496184, "comment_id": 101462193, "body": "Also this form of attribute was introduced in C++17, not C++11"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1565791055, "creation_date": 1565791055, "answer_id": 57496203, "question_id": 57496184, "link": "https://stackoverflow.com/questions/57496184/variable-as-c11-attribute-argument/57496203#57496203", "title": "Variable as C++11 attribute argument", "body": "<p>No.</p>\n\n<p>Attributes are baked into your source code literally.</p>\n\n<p>You could use the preprocessor though, with help from your build system to define the desired macro.</p>\n"}], "owner": {"reputation": 1773, "user_id": 1887860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vTWIU.png?s=128&g=1", "display_name": "Matei Radu", "link": "https://stackoverflow.com/users/1887860/matei-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57496203, "answer_count": 1, "score": 1, "last_activity_date": 1565791055, "creation_date": 1565790989, "question_id": 57496184, "link": "https://stackoverflow.com/questions/57496184/variable-as-c11-attribute-argument", "title": "Variable as C++11 attribute argument", "body": "<p>Given an attribute that accepts a string argument, like <a href=\"https://en.cppreference.com/w/cpp/language/attributes/deprecated\" rel=\"nofollow noreferrer\"><code>[[deprecated(\"reason\")]]</code></a>, is it possible to use anything else other than a hardcoded string literal?</p>\n\n<p>In my case, I'm developing a smart contract for the EOS.IO blockchain which exposes the <a href=\"https://eosio.github.io/eosio.cdt/1.6.0/guides/generator-attributes.html#eosioonnotify\" rel=\"nofollow noreferrer\"><code>[[eosio::on_notify(\"account::action\")]]</code></a> attribute and I would like to extract the <code>\"account::action\"</code> part in a configuration file.</p>\n\n<p>I understand that there is an EOS.IO specific Stack Exchange network but I think this question applies to all C++11 attributes.</p>\n\n<h3>Attempts so far</h3>\n\n<p>I tried defining these parameters as static const strings in a namespace in a <code>config.hpp</code> header:</p>\n\n<pre><code>// ...omitting irrelevant parts\n\nnamespace config {\n    static const std::string test = \"eosio.token::transfer\";\n}\n</code></pre>\n\n<p>and later importing the header and using the static string:</p>\n\n<pre><code>// contract.cpp\n\n// ...omitting irrelevant parts\n\n#include \"config.hpp\"\n\nclass [[eosio::contract]] myapp : public contract {\npublic:\n\n    [[eosio::on_notify(config::test)]]\n    void on_transfer();\n};\n</code></pre>\n\n<p>However, the compiler complains:</p>\n\n<blockquote>\n  <p>error: 'on_notify' attribute requires a string [[eosio::on_notify(config::test)]]</p>\n</blockquote>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "edited": false, "score": 3, "creation_date": 1565791069, "post_id": 57496148, "comment_id": 101462155, "body": "This is called &quot;serialization&quot; and C++ is not supporting this out-of-the-box. You have to implement the logic yourself. However, that is not easy."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1565791223, "post_id": 57496148, "comment_id": 101462240, "body": "Hi, There are many approaches to this, and your question is too broad for this forum.  Serialization is just one tiny slice of it.   Anyway, why reinvent the wheel? There are tools to do this; I would start by searching for relevant questions on Worldbuilding SE or even GIS SE."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11923376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--NKD0Inm4a0/AAAAAAAAAAI/AAAAAAAAAME/VEVLC9ByISQ/photo.jpg?sz=128", "display_name": "xTankky", "link": "https://stackoverflow.com/users/11923376/xtankky"}, "edited": false, "score": 0, "creation_date": 1565791668, "post_id": 57496256, "comment_id": 101462490, "body": "Ok thanks, I understand the concept. I may have a look on Unity but for now, I&#39;m just doing this for fun and learning"}], "tags": [], "owner": {"reputation": 118, "user_id": 3005141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UQ9Tq.png?s=128&g=1", "display_name": "stalker2106", "link": "https://stackoverflow.com/users/3005141/stalker2106"}, "is_accepted": true, "score": 0, "last_activity_date": 1565791257, "creation_date": 1565791257, "answer_id": 57496256, "question_id": 57496148, "link": "https://stackoverflow.com/questions/57496148/creating-and-saving-objects-in-c/57496256#57496256", "title": "Creating and Saving objects in C++", "body": "<p>This question is insanely vague.</p>\n\n<p>Long answer: YES, you can turn your game into a map editor, there is no \"built-in\" way to do that. You will have to write all editor/serialization logic yourself. You should use a game engine like Unity or Unreal if you want to achieve this kind of features/Behaviour out of the box.</p>\n\n<p>Short anwser: WHY BOTHER doing so, knowing awesome map editors like <a href=\"https://www.mapeditor.org/\" rel=\"nofollow noreferrer\">\"Tiled\"</a> exists exactly for this purpose, and lots of binding to read maps exists in numerous languages on github.</p>\n"}], "owner": {"reputation": 3, "user_id": 11923376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--NKD0Inm4a0/AAAAAAAAAAI/AAAAAAAAAME/VEVLC9ByISQ/photo.jpg?sz=128", "display_name": "xTankky", "link": "https://stackoverflow.com/users/11923376/xtankky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1565791301, "accepted_answer_id": 57496256, "answer_count": 1, "score": 0, "last_activity_date": 1565812886, "creation_date": 1565790881, "last_edit_date": 1565812886, "question_id": 57496148, "link": "https://stackoverflow.com/questions/57496148/creating-and-saving-objects-in-c", "closed_reason": "Needs more focus", "title": "Creating and Saving objects in C++", "body": "<p><br>\nI'm trying to create a game using C++ / SDL / OpenGL and Box2D and I was wondering if I can create objects and save them to use later.</p>\n\n<p>To be more precise, I want to create a map this way :\nWhen I click somewhere in the window, it creates an object of my choice (a wall, a ground, etc..) and it will save it into a file that I can use to display the map. <br><br>\nIt would save me much time as I will not have to set the x and y positions, length, rendering and all this shit manually and open debugger each time, then re-adjusting, etc.. <br><br>\nSo, can I do this and if so, how can I do it ?</p>\n"}, {"tags": ["c++", "pthreads"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565791003, "post_id": 57496138, "comment_id": 101462115, "body": "Do you have to use pthreads?  C++&#39;s thread library is, IMHO, a lot easier to use and lets you get away from all of the <code>void*</code>&#39;s."}, {"owner": {"reputation": 31, "user_id": 11577370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a13997d07134676ab33ee8a7cd1d13?s=128&d=identicon&r=PG&f=1", "display_name": "Yeoh", "link": "https://stackoverflow.com/users/11577370/yeoh"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565791141, "post_id": 57496138, "comment_id": 101462195, "body": "My compiler is an older version and i do not have option to upgrade it. Gotta stick to pthread somehow."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1565791272, "post_id": 57496138, "comment_id": 101462270, "body": "What is <code>IntS</code>?  i.e. is <code>threadCnt</code> correctly initialized?  Also, you appear to increment <code>threadCnt</code> <i>before</i> its first use which seems slightly odd (difficult to tell from just the code shown though)."}, {"owner": {"reputation": 31, "user_id": 11577370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a13997d07134676ab33ee8a7cd1d13?s=128&d=identicon&r=PG&f=1", "display_name": "Yeoh", "link": "https://stackoverflow.com/users/11577370/yeoh"}, "edited": false, "score": 0, "creation_date": 1565791696, "post_id": 57496138, "comment_id": 101462500, "body": "Sorry, there were typo on the variable type and i have corrected it. Also, the threadCnt is initialized to -1 some where in my code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11577370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a13997d07134676ab33ee8a7cd1d13?s=128&d=identicon&r=PG&f=1", "display_name": "Yeoh", "link": "https://stackoverflow.com/users/11577370/yeoh"}, "edited": false, "score": 0, "creation_date": 1565793099, "post_id": 57496560, "comment_id": 101463285, "body": "I initialize the threadCnt to -1 so as my threadID array will always start at 0 index. FunctionA will be called few times and each time new thread will be created with the threadID array increment by 1. Can you provide some sample code how can i safely expose the threadID to another class for the pthread_join?"}, {"owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "reply_to_user": {"reputation": 31, "user_id": 11577370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a13997d07134676ab33ee8a7cd1d13?s=128&d=identicon&r=PG&f=1", "display_name": "Yeoh", "link": "https://stackoverflow.com/users/11577370/yeoh"}, "edited": false, "score": 0, "creation_date": 1565793562, "post_id": 57496560, "comment_id": 101463503, "body": "Why the name of threadCnt is not maxThreadIndex if it is an index ? Or start it at 0, but use it with a -1. What is &quot;a few times&quot; ? Is it inside of a loop ? Is she dynamic ? Are you sure that thread array does not contain wrongly created or deleted thread ? My way of doing things in C++ is to have a main as little as possible with an Application object managing my application. So you could have your threads as attributes of it."}], "tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": false, "score": 0, "last_activity_date": 1565793589, "last_edit_date": 1565793589, "creation_date": 1565792374, "answer_id": 57496560, "question_id": 57496138, "link": "https://stackoverflow.com/questions/57496138/intermittent-application-crash-when-execute-pthread-join/57496560#57496560", "title": "Intermittent application crash when execute pthread_join", "body": "<p>This will be a global answer :</p>\n\n<p>First of all, your code is 99% C and 1% C++. I don't know why, but if you want to write C++ write C++, not C like code. Or do C, that can be what you need.\nFor example, you are using ton of global function, static array, raw pointers etc. Replace them with <a href=\"https://en.cppreference.com/w/cpp/language/classes\" rel=\"nofollow noreferrer\">classes</a> and methods, <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a>, <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">smart_pointers</a> etc. The STL is here to be used. You can write a class to wrap your pthread object and, instead of having free functions, use a constructor. If smart pointers are not available, replace your mallocs / free with (at least) <a href=\"https://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow noreferrer\">new</a> and <a href=\"https://en.cppreference.com/w/cpp/language/delete\" rel=\"nofollow noreferrer\">delete</a>. By the way, NULL as its equivalent in <a href=\"https://en.cppreference.com/w/cpp/language/nullptr\" rel=\"nofollow noreferrer\">nullptr</a> in C++.</p>\n\n<p>Secondly, DO NOT USE GLOBAL VARIABLES. It is not necessary in 99.99% of the case as it can be variable declared then passed as pointers / <a href=\"https://en.cppreference.com/w/cpp/language/reference_initialization\" rel=\"nofollow noreferrer\">references</a> to functions.</p>\n\n<p>For what can crash your program there are several things to test :\nAre you variables correctly initialized ?\nYou said that threadCount is initialized with -1. Why ? Since it is a count it should has start at 0, or maybe it is an index and not a count.</p>\n\n<p>If you can, give use more informations :</p>\n\n<ul>\n<li>Where are these functions used, and how, by who ?</li>\n<li>What is you compiler and which version are you using ?</li>\n<li>What is the C++ version you are using ?</li>\n<li>What is the goal of this projet ? Maybe there are better ways of doing it.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1565807052, "creation_date": 1565807052, "answer_id": 57500139, "question_id": 57496138, "link": "https://stackoverflow.com/questions/57496138/intermittent-application-crash-when-execute-pthread-join/57500139#57500139", "title": "Intermittent application crash when execute pthread_join", "body": "<p>One problem I see is that when you collect the data there is an access to <code>result_pool</code> without a lock. One of the threads that is still running could be accessing <code>result_pool</code> adding more keys to it at the same time you're accessing it to collect the data.</p>\n"}], "owner": {"reputation": 31, "user_id": 11577370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a13997d07134676ab33ee8a7cd1d13?s=128&d=identicon&r=PG&f=1", "display_name": "Yeoh", "link": "https://stackoverflow.com/users/11577370/yeoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565807052, "creation_date": 1565790851, "last_edit_date": 1565791420, "question_id": 57496138, "link": "https://stackoverflow.com/questions/57496138/intermittent-application-crash-when-execute-pthread-join", "title": "Intermittent application crash when execute pthread_join", "body": "<p>Sometimes my application crash when executing <em>pthread_join</em> and sometime it is OK. Can someone please advise what could be the problem with my code below?</p>\n\n<p><em>functionA</em> will pass some arguments and create a thread that do some calculation and store the result into <em>ResultPool</em> (global) for later use. The functionA will be called few times and each time it passes different arguments and create a new thread. All the thread_id will be store in global variable and at the end of the execution, the thread_id will be retrieved from the <em>ThreadIdPool</em> and check the completion of the thread, and then output the result from the <em>ResultPool</em>. The thread status checking and output the result are at different class and the <em>ThreadIdPool</em> is a global variable.</p>\n\n<p>The threadCnt will be initialized to -1 before start of <em>functionA</em> and it is defined somewhere in my code.</p>\n\n<pre><code>int threadCnt;\nstruct ThreadData\n{\n  int        td_tnum;\n  float      td_Freq;\n  bool       td_enablePlots; \n  int        td_ifBin;\n  int        td_RAT;\n };\n typedef struct ThreadData structThreadDt;\n void *thread_A(void *td);\n map&lt;int, float&gt; ResultPool;\n map&lt;int, pthread_t&gt; ThreadIdPool;\n pthread_mutex_t mutex2 = PTHREAD_MUTEX_INITIALIZER;\n pthread_t thread_id[10];\n\n void FunctionA(int tnum, float msrFrequency, bool enablePlots)\n {\n    //Pass the value to the variables.\n   int ifBin;\n   int RAT;\n\n  /*\n    Some calculation here and the results are assigned to ifBin and RAT\n  */\n\n  structThreadDt *td;     \n  td =(structThreadDt *)malloc(sizeof(structThreadDt));\n  td-&gt;td_tnum = tnum;\n  td-&gt;td_Freq = msrFrequency;\n  td-&gt;td_enablePlots = enablePlots; \n  td-&gt;td_ifBin = ifBin;\n  td-&gt;td_RAT = RAT;\n\n   threadCnt = threadCnt+1;\n   pthread_create(&amp;thread_id[threadCnt], NULL, thread_A, (void*) td);    \n\n   //Store the thread id to be check for the status later.   \n   ThreadIdPool[tnum]=thread_id[threadCnt]; \n  }\n\nvoid* thread_A(void* td)\n{\n  int   ifBin; \n  int   RAT;\n\n  bool enablePlots;\n  float msrFrequency;\n  int tnum;   \n\n  structThreadDt *tds;\n  tds=(structThreadDt*)td;        \n  enablePlots = tds-&gt;td_enablePlots;\n  msrFrequency = tds-&gt;td_Freq;\n  tnum = tds-&gt;td_tnum;\n  ifBin = tds-&gt;td_ifBin ;\n  RAT = tds-&gt;td_RAT;       \n\n  /*\n    Do some calculation here with those ifBIN, RAT, TNUM and frequency.\n\n  */\n\n  //Store the result to shared variable with mutex lock\n  pthread_mutex_lock( &amp;mutex2 );\n  ResultPool[tnum] = results;\n  pthread_mutex_unlock( &amp;mutex2 );\n\n  free(tds);\n\n  return NULL;\n\n }\n</code></pre>\n\n<p>And here is the threadId status checking. It will first iterate the ThreadIdPool to retrieve the threadID and check the completion of the thread. If the thread is completed, it will output the result. The pthread_join execution will sometimes crash my application. </p>\n\n<pre><code>void StatusCheck()\n{\n    int tnum;\n\n\n    pthread_t threadiD;\n    map&lt;int, pthread_t&gt;::iterator itr;\n    float res;\n\n        int ret;\n        //Just to make sure it has been done\n        for (itr = ThreadIdPool.begin(); itr != ThreadIdPool.end(); ++itr) { \n            tnum = itr-&gt;first;\n            threadiD = itr-&gt;second;          \n\n           //Check if the thread is completed before get the results.\n           ret=pthread_join(threadiD, NULL);\n\n            if (ret!=0)\n            {\n                cout&lt;&lt;\"Tnum=\"&lt;&lt;tnum&lt;&lt;\":Error in joining thread.\"&lt;&lt;endl;\n            }          \n\n            res  =  ResultPool[tnum];\n            cout&lt;&lt;\"Results=\"&lt;&lt;res&lt;&lt;endl;\n\n        } \n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "optimization", "constraints", "z3"], "comments": [{"owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 0, "creation_date": 1566200285, "post_id": 57496124, "comment_id": 101566818, "body": "Update: bit-blasting ended up being way slower, even for a very small amount of bits (6/8/10). I think it&#39;s because every query essentially has a push/pop, which makes it impossible to use large number of the bultin optimizations / precomputation techniques? [br]  Replacing enumeration_sort() with int_sort(), by manually encoding the strings into ints, didn&#39;t help at all. The only thing that seemed to help was to assert range-inequalities, as Patrick proposed. (if domain of X is {1,3,4,5,8}, it&#39;s useful to also assert X &gt;= 1 &amp;&amp; X &lt;= 8)  It turns out that I can&#39;t use Z3 for this after all."}, {"owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 0, "creation_date": 1566287799, "post_id": 57496124, "comment_id": 101598766, "body": "Update: it&#39;s more fitting to use a more specialized CSP solver for this. I&#39;m trying out Gecode, and it seems to be working faster."}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1566289388, "post_id": 57496124, "comment_id": 101599560, "body": "I concur with the idea of using CSP solvers."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 0, "creation_date": 1565811149, "post_id": 57496949, "comment_id": 101471252, "body": "Thanks a lot! The link was very informative. I&#39;ll try to edit the code to care about booleans more. (Currently, I have expressions like (b == 0) everywhere)"}], "tags": [], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "is_accepted": false, "score": 2, "last_activity_date": 1565793684, "creation_date": 1565793684, "answer_id": 57496949, "question_id": 57496124, "link": "https://stackoverflow.com/questions/57496124/advice-about-how-to-make-z3-evaluate-simple-constraints-faster/57496949#57496949", "title": "Advice about how to make Z3 evaluate simple constraints faster", "body": "<p>Is it always slow? Or does it get progressively slower as you query for more and more configurations using the same solver?</p>\n\n<p>If it's the former, then your problem is just too hard and this is the price to pay. I don't see anything obviously wrong in what you've shown; though you should never use booleans as integers. (Just looking at your <code>b</code> variable in there. Stick to booleans as booleans, and integers as integers, and unless you really have to, don't mix the two together. See this answer for some further elaboration on this point: <a href=\"https://stackoverflow.com/questions/55978097/why-is-z3-slow-for-tiny-search-space/55996274#55996274\">Why is Z3 slow for tiny search space?</a>)</p>\n\n<p>If it's the latter, you might want to create a solver from scratch for each query to clean-up all the extra stuff the solver created. While additional lemmas always help, they could also hurt performance if the solver cannot make good use of them in subsequent queries. And if you follow this path, then you can simply \"parallelize\" the problem yourself in your C++ program; i.e., create many threads and call the solver separately for each problem, taking advantage of many-cores your computer no doubt has and OS-level multi-tasking.</p>\n\n<p>Admittedly, this is very general advice and may not apply directly to your situation. But, without a particular \"running\" example that we can see and inspect, it's hard to be any more specific than this.</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 0, "creation_date": 1565810503, "post_id": 57500694, "comment_id": 101471020, "body": "Thank you SO much for taking the time to share these ideas. I&#39;ll try implement them, and will post here what had the best effect.  I think I&#39;ll be able to &quot;bit-blast&quot; it.   As for the wider context,  I&#39;m trying to write a generator for combinatorial testing (IPOG), but one that would only generate tests that satisfy a set of constraints. These testsets get huge, so there&#39;s a lot of checking to do.  About the bools, I think this is interpreted as (b || !b), and the solver just simplifies the assertion away. It is a messy way to write it, sure."}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "reply_to_user": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 0, "creation_date": 1566289187, "post_id": 57500694, "comment_id": 101599460, "body": "@LeonardInkret I just read the comments you added under your question. Instead of listing by hand the assignments that you want to check, did you by any chance try the other way around? <b>i.e.</b> Incrementally extract all the models of the formula using a blocking clause to remove each previously visited solution one by one. In this way there is no <code>push&#47;pop</code> and the solver can explore the solutions in the order it makes it more sense to him [it may benefit from locality]."}, {"owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "edited": false, "score": 1, "creation_date": 1569850733, "post_id": 57500694, "comment_id": 102719461, "body": "Thanks for the idea, but there are easily millions/billions of models that could be extracted, and I&#39;m only interested in certain ones.   I&#39;m currently using the Gecode library, and it&#39;s working fast enough"}], "tags": [], "owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1566030543, "last_edit_date": 1566030543, "creation_date": 1565809858, "answer_id": 57500694, "question_id": 57496124, "link": "https://stackoverflow.com/questions/57496124/advice-about-how-to-make-z3-evaluate-simple-constraints-faster/57500694#57500694", "title": "Advice about how to make Z3 evaluate simple constraints faster", "body": "<p>Some Ideas:</p>\n\n<ul>\n<li><p><strong>1.</strong> Replace <code>x == 1 || x == 3 || x == 3 || x == 7 || x == 8</code> with <code>(1 &lt;= x &amp;&amp; x &lt;= 8) &amp;&amp; (x &lt;= 1 || (3 &lt;= x) &amp;&amp; (x &lt;= 4 || 7 &lt;= x)</code>. Similar change with <code>y</code>. </p>\n\n<p><strong>rationale:</strong> the solver for linear arithmetic now knows that <code>x</code> is always confined in the interval <code>[1,8]</code>, this can be useful information for other linear equalities/inequalities; it may be useful to also learn the trivial mutual exclusion constraints <code>not(x &lt;= 1) || not(3 &lt;= x)</code> and <code>not(x &lt;= 4) || not(7 &lt;= x)</code>; there are now exactly <code>3</code> boolean assignments that cover your original <code>5</code> cases, this makes the reasoning of the linear arithmetic solver more cost-efficient because each invocation deals with a larger chunk of the search space. (Furthermore, it is more likely that clauses learned from conflicts are going to be useful with subsequent calls to the solver)</p>\n\n<p>(Your queries may also contain set of values rather than specific assignments of values; this may allow one to prune some unsatisfiable ranges of values with fewer queries)</p></li>\n<li><p><strong>2.</strong> Just like @alias mentioned, Boolean variables ought to be Booleans and not 0/1 Integer variables. The example you provided is a bit confusing, <code>b</code> is declared as a bool const but then you state <code>b == 0 || b == 1</code></p></li>\n<li><p><strong>3.</strong> I am not familiar with the <code>enum_sort</code> of <code>z3</code>, meaning that I don't know how it is internally encoded and what solving techniques are applied to deal with it. Therefore, I am not sure whether the solver may try to generate trivially inconsistent truth-assignments in which <code>e == enum_value(\"green\")</code> e <code>e == enum_value(\"red\")</code> are both assigned to <code>true</code> at the same time. This might be worth a bit of investigation. For instance, another possibility could be to declare <code>e</code> and <code>f</code> as <code>Int</code> and give them an appropriate interval domain (as contiguous as possible) with the same approach shown in  <strong>1.</strong>, that will be interpreted by your software as a list of <code>enum</code> values. This should remove a number of Boolean assignments from the search space, make conflict clauses more effective and possibly speed-up the search.</p></li>\n<li><p><strong>4.</strong> Given the small number of problem variables, values and constraints, I would suggest you to try to encode everything using just the Bit-Vector theory and nothing else (using small-but-big-enough domains). If you then configure the solver to encode Bit-Vectors <em>eagerly</em>, then everything is bit-blasted into SAT, and <code>z3</code> should only use Boolean Constraint Propagation for satisfiability, which is the cheapest technique.</p></li>\n</ul>\n\n<hr>\n\n<p>This might be an X Y problem, why are you performing thousands of queries, what are you trying to achieve? Are you trying to explore all possible combination of values? Are you trying to perform model counting?</p>\n"}], "owner": {"reputation": 115, "user_id": 4441172, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h9e3doydUJ8/AAAAAAAAAAI/AAAAAAAAACM/UmT19yl36Jw/photo.jpg?sz=128", "display_name": "Leonard Inkret", "link": "https://stackoverflow.com/users/4441172/leonard-inkret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 57500694, "answer_count": 2, "score": 1, "last_activity_date": 1566030543, "creation_date": 1565790801, "last_edit_date": 1565791165, "question_id": 57496124, "link": "https://stackoverflow.com/questions/57496124/advice-about-how-to-make-z3-evaluate-simple-constraints-faster", "title": "Advice about how to make Z3 evaluate simple constraints faster", "body": "<p>I'm trying to use Z3 (with C++ API) to check if lots of variable configurations satisfy my constraints, but I'm having big performance issues. </p>\n\n<p>I'm looking for advice about which logic or parameter setting I might be able to use to improve the runtime, or hints about how I could try and feed the problem to Z3 in a different way. </p>\n\n<p>Short description of what I'm doing and how I'm doing it:</p>\n\n<pre><code>//_______________Pseudocode and example_______________\n\ncontext ctx()\nsolver s(ctx)\n\n// All my variables are finite domain, maybe some 20 values at most, but usually less. \n// They can only be ints, bools, or enums. \n// There are not that many variables, maybe 10 or 20 for now.\n//\n// Since I need to be able to solve constraints of the type (e == f), where\n// e and f are two different enum variables, all my\n// enum types are actually contained in only one enumeration_sort(), populated\n// with all the different values.\n\nsort enum_sort = {\"green\", \"red\", \"yellow\", \"blue\", \"null\"}\n\nexpr x = ctx.int_const(\"x\")\nexpr y = ctx.int_const(\"y\")\nexpr b = ctx.bool_const(\"b\")\nexpr e = ctx.constant(\"e\", enum_sort)\nexpr f = ctx.constant(\"f\", enum_sort)\n\n// now I assert the finite domains, for each variable\n// enum_value(s) is a helper function, that returns the matching enum expression\n//\n// Let's say that these are the domains:\n//\n// int x is from {1, 3, 4, 7, 8}\n// int y is from {1, 2, 3, 4}\n// bool b is from {0, 1}\n// enum e is from {\"green\", \"red\", \"yellow\"}\n// enum f is from {\"red\", \"blue\", \"null\"}\n\ns.add(x == 1 || x == 3 || x == 3 || x == 7 || x == 8)\ns.add(y == 1 || y == 2 || y == 3 || y == 4)\ns.add(b == 0 || b == 1)\ns.add(e == enum_value(\"green\") || e == enum_value(\"red\") || enum_value(\"yellow\"))\ns.add(f == enum_value(\"red\") || f == enum_value(\"blue\") || enum_value(\"null\"))\n\n// now I add in my constraints. There are also about 10 or 20 of them, \n// and each one is pretty short\n\ns.add(b =&gt; (x + y &gt;= 5))\ns.add((x &gt; 1) =&gt; (e != f))\ns.add((y == 4 &amp;&amp; x == 1) || b)\n\n// setup of the solver is now done. Here I start to query different combinations\n// of values, and ask the solver if they are \"sat\" or \"unsat\"\n// some values are left empty, because I don't care about them\nexpr_vector vec1 = {x == 1, y == 3, b == 1, e == \"red\"}\nprint(s.check(vec1))\n\nexpr_vector vec2 = {x == 4, e == \"green\", f == \"null\"}\nprint(s.check(vec2))\n\n....\n\n// I want to answer many such queries.\n</code></pre>\n\n<p>Of course, in my case this isn't hardcoded, but I read and parse the constraints, variables and their domains from files, then feed the info to Z3.</p>\n\n<p>But it's slow.</p>\n\n<p>Even for something like ten thousand queries, my program is already running over 10s. All of this is inside s.check(). Is it possible to make it run faster? </p>\n\n<p>Hopefully it is, because what I'm asking of the solver doesn't look like it's overly difficult. \nNo quantifiers, finite domain, no functions, everything is a whole number or an enum, domains are small, the values of the numbers are small, there's only simple arithmetic, constraints are short, etc. </p>\n\n<p>If I try to use parameters for parallel processing, or set the logic to \"QF_FD\", the runtime doesn't change at all. </p>\n\n<p>Thanks in advance for any advice.</p>\n"}, {"tags": ["java", "c++", "c", "dll", "java-native-interface"], "comments": [{"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 3, "creation_date": 1565792105, "post_id": 57496029, "comment_id": 101462726, "body": "How did you end up with this task in the first place? This is not a job for someone with no C++ experience. No, there isn&#39;t a way to clone/port the whole thing - not even if the .H file was available. DepWalk can help somewhat if you&#39;re lucky (e. g. the interface is not too hairy), but still, this will be an extremely manual job. To answer your question, the best approach would be to walk away from this task."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1565792539, "post_id": 57496029, "comment_id": 101462964, "body": "I&#39;ll add to the previous comment.  Unless you know, and really know C++, doing JNI work is not going to go too well for you.  The JNI is fragile as it is, and it takes someone with experience to know how to work around the fragilities."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1565792824, "post_id": 57496029, "comment_id": 101463124, "body": "What are the <i>exact</i> details of this &quot;unknown DLL&quot;? You need to know details before you can even tell if the task can be done or not. Because you simply can&#39;t write code that calls something that&#39;s &quot;unknown&quot;."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1565793878, "post_id": 57496029, "comment_id": 101463687, "body": "@sstankov That&#39;s my entire point.  Just what are you supposed to &quot;wrap&quot;? &quot;Write a wrapper for this.&quot;  You:  &quot;What does it do?&quot;  &quot;Unknown.&quot;  Do you even know if this &quot;unknown DLL&quot; is a <a href=\"https://stackoverflow.com/questions/2265023/load-32bit-dll-library-in-64bit-application\">32- or 64-bit DLL?</a>"}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 1, "creation_date": 1565794759, "post_id": 57496029, "comment_id": 101464210, "body": "There is another way. Find someone who has ample experience with both C++ and JNI (and, potentially, reverse engineering of compiled code), and pay them a ton of money. How important is this for the management, financially speaking? OBTW, C++ has no reflection."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1565808376, "post_id": 57496029, "comment_id": 101470234, "body": "@sstankov you can&#39;t call into a DLL if you don&#39;t know what its functions look like.  There is no way to solve this without knowing the function declarations. Period. If you don&#39;t have the function declarations, the only way to get them is to reverse engineer the DLL itself, as there is no reflection in C++."}], "answers": [{"tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": true, "score": 0, "last_activity_date": 1582366921, "last_edit_date": 1582366921, "creation_date": 1566165088, "answer_id": 57548629, "question_id": 57496029, "link": "https://stackoverflow.com/questions/57496029/jni-java-using-dll-function-which-takes-an-object-as-param/57548629#57548629", "title": "JNI Java using DLL function which takes an object as param", "body": "<p>The best way here is to use adapter pattern (<a href=\"https://en.wikipedia.org/wiki/Adapter_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Adapter_pattern</a>). Inside your <code>JNI</code> code you have to call <code>DLL</code> by creating all the objects, as expected by <code>C++</code> API.</p>\n\n<p>You can find sample here: <a href=\"http://jnicookbook.owsiak.org/recipe-No-021/\" rel=\"nofollow noreferrer\">http://jnicookbook.owsiak.org/recipe-No-021/</a> and here <a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo025\" rel=\"nofollow noreferrer\">https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo025</a></p>\n\n<p>You can also take a look at the code where one shared library (<code>JNI</code>) calls the code from another one: <a href=\"http://jnicookbook.owsiak.org/recipe-No-023/\" rel=\"nofollow noreferrer\">http://jnicookbook.owsiak.org/recipe-No-023/</a></p>\n\n<p>Basically, what you have to do is to create <code>JNI</code> based wrapper code that translates <code>Java</code> calls to native methods into <code>C++</code> calls, and vice versa - the code that translates return values into something that is expected by Java.</p>\n"}], "owner": {"reputation": 93, "user_id": 11926388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cfb7c8b6a78e538a3ed75e68d15b67?s=128&d=identicon&r=PG&f=1", "display_name": "s.stkvc", "link": "https://stackoverflow.com/users/11926388/s-stkvc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 57548629, "answer_count": 1, "score": 1, "last_activity_date": 1582366921, "creation_date": 1565790464, "last_edit_date": 1565792438, "question_id": 57496029, "link": "https://stackoverflow.com/questions/57496029/jni-java-using-dll-function-which-takes-an-object-as-param", "title": "JNI Java using DLL function which takes an object as param", "body": "<p>I will need to use an external, unknown DLL and build a java wrapper around it. I do not have the DLL nor the header file at the moment, and maybe will not even get the header-file, but I'd like to prepare myself. (I have no experience with C++ )</p>\n\n<p>Following situation:</p>\n\n<p>Let's say this DLL has a function, which contains one or more C++ classes as method signature. Then how could I call this function with JNI, as in my java project those custom classes in the DLL are non-existent?  Is there a option to \"clone\" or \"port\" the C++ class to java? Is there anything I could do with a tool like Dependency Walker to resolve this problem?</p>\n\n<p>What would be the best / most simple approach to accomplish that?</p>\n\n<p>Here is some code which I already tried, to find out how it behaves:</p>\n\n<p><strong>Java Class with main</strong></p>\n\n<pre><code>public class FourthJNI {\n\n    public static native int returnAgeOfHuman(int zuQuadrierendeZahl);\n\n    public static void main(String[] args) {\n//      /* This message will help you determine whether\n//        LD_LIBRARY_PATH is correctly set\n//       */\n//      System.out.println(\"library: \"\n//              + System.getProperty(\"java.library.path\"));\n\n        Human testHuman = new Human(\"abcde\", 23, \"M\");\n\n        /* Call to shared library */\n        int ageOfHuman = FourthJNI.returnAgeOfHuman(5);\n        System.out.println(testHuman.toString());\n        System.out.println(\"Age: \" + ageOfHuman);\n    }\n} \n</code></pre>\n\n<p><strong>generatd h-file</strong></p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class FourthJNI */\n\n#ifndef _Included_FourthJNI\n#define _Included_FourthJNI\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     FourthJNI\n * Method:    returnAgeOfHuman\n * Signature: (I)I\n */\nJNIEXPORT jint JNICALL Java_FourthJNI_returnAgeOfHuman\n  (JNIEnv *, jclass, jint);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n"}, {"tags": ["c++", "out-of-memory", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1565790458, "post_id": 57496015, "comment_id": 101461807, "body": "What the deuce are you going to put into this array? Is every element populated?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1565790500, "post_id": 57496015, "comment_id": 101461829, "body": "How much ram do you have?  How much is available when you start the program?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1565790573, "post_id": 57496015, "comment_id": 101461866, "body": "By the size of the array, this is for <a href=\"https://www.kaggle.com/jieyima/netflix-recommendation-collaborative-filtering\" rel=\"nofollow noreferrer\">kaggle.com/jieyima/&hellip;</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1565790614, "post_id": 57496015, "comment_id": 101461893, "body": "Do some research about <i>sparse arrays</i>, or <i>memory mapping</i> together with using <i>windows</i> into the &quot;array&quot;."}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1565790638, "post_id": 57496015, "comment_id": 101461909, "body": "On my platform (and probably on yours as well, where sizeof(double)=8), this array takes more than GBytes. Probably doesn&#39;t worth it to hold all of it in RAM."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 4, "creation_date": 1565790837, "post_id": 57496015, "comment_id": 101462017, "body": "You\u2019re off by two orders of magnitude. <a href=\"https://www.google.com/search?q=2649429+%2A+17770+%2A+64+bit+in+GiB\" rel=\"nofollow noreferrer\">This array needs 350 GiB</a>, not 3 GiB."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1565792267, "post_id": 57496015, "comment_id": 101462824, "body": "The value of <code>row*col</code> gives a result that requires (at least) a 35-bit integral type to avoid overflow.  Practically, this means either <code>row</code> or <code>col</code> must be a 64-bit type to do the calculation correctly (i.e. not being truncated if the result is unsigned, and not giving undefined behaviour if the result is signed).   It also means, at minimum, free memory of (well) over 350GB, and a 64-bit operating system to address that amount of memory to allocate without error.   350GB (to say the least) exceeds what even a lot of high end computer systems have"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1565792268, "post_id": 57496015, "comment_id": 101462825, "body": "If it&#39;s for the Netflix competition: &quot;<i>The grand prize was $1,000,000 and was won by BellKor&#39;s Pragmatic Chaos team.</i>&quot;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1565792648, "post_id": 57496015, "comment_id": 101463031, "body": "Stop everything and answer a simple question -- is your application 32-bit or 64-bit?  If it&#39;s 32-bit, then this is not going to work."}, {"owner": {"reputation": 9, "user_id": 4741498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2a97d39fa743b5bb85d2a02a14386d?s=128&d=identicon&r=PG&f=1", "display_name": "ph0123", "link": "https://stackoverflow.com/users/4741498/ph0123"}, "edited": false, "score": 0, "creation_date": 1565793349, "post_id": 57496015, "comment_id": 101463409, "body": "64 bit. I think it is a sparse matrix. I try to use it as an array."}, {"owner": {"reputation": 9, "user_id": 4741498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2a97d39fa743b5bb85d2a02a14386d?s=128&d=identicon&r=PG&f=1", "display_name": "ph0123", "link": "https://stackoverflow.com/users/4741498/ph0123"}, "edited": false, "score": 0, "creation_date": 1565793749, "post_id": 57496015, "comment_id": 101463609, "body": "I think I will using map for this. map&lt;int, double&gt; X int is i*col+j double is the value of rating.  What do you think about this."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1565794500, "post_id": 57496015, "comment_id": 101464048, "body": "@ph0123 That\u2019s a reasonable strategy if your <code>int</code>s are 64 bit. Alternatively, use <code>std::pair&lt;int, int&gt;</code> as the key and don\u2019t bother about computing the offsets yourself."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1565821017, "post_id": 57496015, "comment_id": 101474379, "body": "It means that always the majority (eg. over 95%) of your array elements are supposed to be set to a specific value (say 0 or 1 or PI...); Hence you&#39;ll avoid allocations for elements with that specific popular value."}], "answers": [{"tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 5, "last_activity_date": 1565791257, "last_edit_date": 1565791257, "creation_date": 1565790723, "answer_id": 57496097, "question_id": 57496015, "link": "https://stackoverflow.com/questions/57496015/create-dynamic-array-with-very-large-size/57496097#57496097", "title": "Create dynamic array with very large size", "body": "<p>Assuming this is for <a href=\"https://www.kaggle.com/jieyima/netflix-recommendation-collaborative-filtering\" rel=\"nofollow noreferrer\">https://www.kaggle.com/jieyima/netflix-recommendation-collaborative-filtering</a> by the size of the array.</p>\n\n<p>You need to use a sparse array of some kind. For example, a vector of list, where you list the movies each customer has seen.</p>\n\n<p>That, or you train in batches, reading small part of the data at a time.</p>\n\n<p>A flat array as you suggested would be filled with mostly 0. This is way too inefficient. It only make sense if on average every customer had seen half the movies.</p>\n\n<p>And using <em>double</em> is a really bad idea, anyway. Rating from 1 to 5 would fit in a char, or less, saving much data.</p>\n\n<p>Lastly, notice: </p>\n\n<blockquote>\n  <p>CustomerIDs range from 1 to 2649429, with gaps. There are 480189\n  users.</p>\n</blockquote>\n\n<p>You should still use a sparse structure. But even if you went flat, you should then <em>only</em> have 480189 rows, not 2649429.</p>\n"}], "owner": {"reputation": 9, "user_id": 4741498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2a97d39fa743b5bb85d2a02a14386d?s=128&d=identicon&r=PG&f=1", "display_name": "ph0123", "link": "https://stackoverflow.com/users/4741498/ph0123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565791257, "creation_date": 1565790420, "last_edit_date": 1565790704, "question_id": 57496015, "link": "https://stackoverflow.com/questions/57496015/create-dynamic-array-with-very-large-size", "title": "Create dynamic array with very large size", "body": "<p>I create an array as below (row =2649429, col = 17770, the size of array is 47,080,353,330 ~ 47 billions)</p>\n\n<pre><code>double* a= new double [row*col];\n</code></pre>\n\n<p>the error as below</p>\n\n<pre><code>terminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\n</code></pre>\n\n<p>The train data is around 3GB. </p>\n\n<p>Please tell me how to to with the array? solution for this. \nThanks.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1565790289, "post_id": 57495806, "comment_id": 101461704, "body": "Have you seen <a href=\"https://doc.qt.io/qt-5/qtlocation-places-map-example.html\" rel=\"nofollow noreferrer\">this</a> example, <a href=\"https://doc.qt.io/qt-5/qml-qtlocation-placesearchmodel.html\" rel=\"nofollow noreferrer\">PlaceSearchModel</a>?"}, {"owner": {"reputation": 63, "user_id": 10406824, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7xe3EYeOWGY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJN2U1qZ1Kznd9ItAvJHyg_efpzg/mo/photo.jpg?sz=128", "display_name": "Pascal S.", "link": "https://stackoverflow.com/users/10406824/pascal-s"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1565896695, "post_id": 57495806, "comment_id": 101498116, "body": "Yes I have, thanks. But it&#39;s not working with the search engine."}], "owner": {"reputation": 63, "user_id": 10406824, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7xe3EYeOWGY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJN2U1qZ1Kznd9ItAvJHyg_efpzg/mo/photo.jpg?sz=128", "display_name": "Pascal S.", "link": "https://stackoverflow.com/users/10406824/pascal-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565789553, "creation_date": 1565789553, "question_id": 57495806, "link": "https://stackoverflow.com/questions/57495806/how-to-display-openstreetmap-tags-in-qt", "title": "How to display OpenStreetMap Tags in Qt?", "body": "<p>I want to display certain tags of OpenStreetMap in my Qt app. For example, I want to be able to display all <code>drink:coffee</code> tags in the map.\nDisplaying a map with QtLocation is no problem. </p>\n\n<p>Here you can see a map example:\n<a href=\"https://doc-snapshots.qt.io/qt5-5.9/qtlocation-minimal-map-example.html\" rel=\"nofollow noreferrer\">https://doc-snapshots.qt.io/qt5-5.9/qtlocation-minimal-map-example.html</a></p>\n\n<p>This is how I want to display the data in Qt: <a href=\"https://taginfo.openstreetmap.org/keys/drink%3Acoffee#map\" rel=\"nofollow noreferrer\">https://taginfo.openstreetmap.org/keys/drink%3Acoffee#map</a></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "eclipse", "gcc", "arm", "cmsis"], "comments": [{"owner": {"reputation": 1487, "user_id": 607434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b458e94231d885c11b9d87773264bd?s=128&d=identicon&r=PG", "display_name": "andy mango", "link": "https://stackoverflow.com/users/607434/andy-mango"}, "edited": false, "score": 0, "creation_date": 1565815735, "post_id": 57495728, "comment_id": 101472912, "body": "What does the &quot;file&quot; command say is the type of libarm_cortexM31_math.a?"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11927480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8111f6e8c5d50a7efd639da989879e49?s=128&d=identicon&r=PG&f=1", "display_name": "Antonino", "link": "https://stackoverflow.com/users/11927480/antonino"}, "is_accepted": false, "score": 0, "last_activity_date": 1565853067, "creation_date": 1565853067, "answer_id": 57506033, "question_id": 57495728, "link": "https://stackoverflow.com/questions/57495728/compilation-of-cmsis-dsp-application-a-library-not-recognized/57506033#57506033", "title": "Compilation of CMSIS-DSP application, .a library not recognized", "body": "<p>I realized that, despite those files look like libraries, they were kind of a placeholder, as they were just few bytes. I then downloaded and unpacked the CMSIS packs from here:\n<a href=\"https://developer.arm.com/tools-and-software/embedded/cmsis/cmsis-packs\" rel=\"nofollow noreferrer\">https://developer.arm.com/tools-and-software/embedded/cmsis/cmsis-packs</a>\n(Submenu ARM->CMSIS)\nand the same files now work.</p>\n\n<p>So I guess they were not compiled yet? But there was no makefile in the repository, how was I supposed to build them?</p>\n\n<p>@andy mango, thanks, the file command indeed returned just 'ASCII text file'</p>\n"}], "owner": {"reputation": 9, "user_id": 11927480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8111f6e8c5d50a7efd639da989879e49?s=128&d=identicon&r=PG&f=1", "display_name": "Antonino", "link": "https://stackoverflow.com/users/11927480/antonino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1565853067, "creation_date": 1565789304, "question_id": 57495728, "link": "https://stackoverflow.com/questions/57495728/compilation-of-cmsis-dsp-application-a-library-not-recognized", "title": "Compilation of CMSIS-DSP application, .a library not recognized", "body": "<p>I am using GNU MCU ECLIPSE and the ARM toolchain to target CortexM MCUs, and I want to use functions from CMSIS DSP library.\nI have downloaded the library from the repository from <a href=\"https://github.com/ARM-software/CMSIS_5\" rel=\"nofollow noreferrer\">https://github.com/ARM-software/CMSIS_5</a>, added to the compiler settings the paths to the includes, and in the linker options I have added the folder C:/workspace/CMSIS/DSP/Lib/GCC as path to search for libraries, and added 'arm_cortexM3l_math' to the libraries.\nWhen I try to build I get the error</p>\n\n<pre><code>arm-none-eabi-g++ -mcpu=cortex-m3 -mthumb -O0 -fmessage-length=0 -fsigned-char -ffunction-sections -fdata-sections  -g3 -Xlinker --gc-sections -L\"C:\\workspace\\eclipse_tools\\CMSIS_5-develop\\CMSIS\\DSP\\Lib\\GCC\" -Wl,-Map,\"hello6.map\" --specs=rdimon.specs -Wl,--start-group -lgcc -lc -lc -lm -lrdimon -Wl,--end-group -o \"hello6.elf\"  ./src/main.o   -larm_cortexM3l_math\nc:/workspace/eclipse_tools/arm embedded gcc/8.2.1-1.7-20190524-0603/bin/../lib/gcc/arm-none-eabi/8.2.1/../../../../arm-none-eabi/bin/ld.exe:C:\\workspace\\eclipse_tools\\CMSIS_5-develop\\CMSIS\\DSP\\Lib\\GCC\\libarm_cortexM3l_math.a: file format not recognized; treating as linker script\nc:/workspace/eclipse_tools/arm embedded gcc/8.2.1-1.7-20190524-0603/bin/../lib/gcc/arm-none-eabi/8.2.1/../../../../arm-none-eabi/bin/ld.exe:C:\\workspace\\eclipse_tools\\CMSIS_5-develop\\CMSIS\\DSP\\Lib\\GCC\\libarm_cortexM3l_math.a:1: syntax error\n</code></pre>\n\n<p>I don't understand why can't the linker read the library in .a format. I have tried with a clean eclipse installation both on windows and linux and with both the GNU MCU Eclipse ARM Embedded GCC and the GNU ARM Embedded Toolchain.\nBuild tools for windows are also correctly installed.</p>\n"}, {"tags": ["c++", "cmake", "linker", "std"], "comments": [{"owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "edited": false, "score": 0, "creation_date": 1565789018, "post_id": 57495609, "comment_id": 101460928, "body": "what platform are you using?"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1565789140, "post_id": 57495609, "comment_id": 101461010, "body": "Could you please post the exact error message? Also specific versions of software. Are you using libstdc++ that comes with the compiler or the one that comes with the system (if not the same)?"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1565789430, "post_id": 57495609, "comment_id": 101461204, "body": "See also this: <a href=\"https://stackoverflow.com/questions/56615841/passing-stdfilesystempath-to-a-function-segfaults\" title=\"passing stdfilesystempath to a function segfaults\">stackoverflow.com/questions/56615841/&hellip;</a>"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1565789504, "post_id": 57495609, "comment_id": 101461245, "body": "And this: <a href=\"https://www.reddit.com/r/cpp/comments/c87o36/clang_800_and_stdcfs_doesnt_work_with_o3/\" rel=\"nofollow noreferrer\">reddit.com/r/cpp/comments/c87o36/&hellip;</a>"}, {"owner": {"reputation": 1216, "user_id": 5905951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff173749b1e47759eeecb9768c223c1?s=128&d=identicon&r=PG&f=1", "display_name": "Omegastick", "link": "https://stackoverflow.com/users/5905951/omegastick"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1565790002, "post_id": 57495609, "comment_id": 101461519, "body": "@IlyaPopov Thanks for the help. I&#39;ve added more details to the OP. I&#39;m not sure which version of stdc++ is being linked by CMake, do you know how I&#39;d check? I&#39;ll give g++-9 a go."}], "answers": [{"tags": [], "owner": {"reputation": 1216, "user_id": 5905951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff173749b1e47759eeecb9768c223c1?s=128&d=identicon&r=PG&f=1", "display_name": "Omegastick", "link": "https://stackoverflow.com/users/5905951/omegastick"}, "is_accepted": true, "score": 2, "last_activity_date": 1565790719, "creation_date": 1565790719, "answer_id": 57496095, "question_id": 57495609, "link": "https://stackoverflow.com/questions/57495609/cant-link-stdfilesystem-even-with-lstdcfs/57496095#57496095", "title": "Can&#39;t link std::filesystem even with -lstdc++fs", "body": "<p>Upgrading to g++ 9 fixed the problem, but if anyone knows how to fix the problem and still use g++ 8 I'll accept that answer.</p>\n"}], "owner": {"reputation": 1216, "user_id": 5905951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff173749b1e47759eeecb9768c223c1?s=128&d=identicon&r=PG&f=1", "display_name": "Omegastick", "link": "https://stackoverflow.com/users/5905951/omegastick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 57496095, "answer_count": 1, "score": 0, "last_activity_date": 1565790719, "creation_date": 1565788868, "last_edit_date": 1565789883, "question_id": 57495609, "link": "https://stackoverflow.com/questions/57495609/cant-link-stdfilesystem-even-with-lstdcfs", "title": "Can&#39;t link std::filesystem even with -lstdc++fs", "body": "<p>I'm trying to compile an application that uses std::filesystem. I'm using CMake for the build system, and g++-8 as a compiler.</p>\n\n<p>My CMakeLists.txt includes <code>target_link_libraries(&lt;target_name&gt; PUBLIC stdc++fs)</code> and <code>set(CMAKE_CXX_STANDARD 17)</code></p>\n\n<p><code>make VERBOSE=1</code> shows that <code>-lstdc++fs</code> is used in the linker command.</p>\n\n<p>Despite this, I get undefined references to std::filesystem components everywhere they are used.</p>\n\n<p>It compiles fine in Docker, so it's clearly an environment issue.</p>\n\n<p>Any tips for tracking this down?</p>\n\n<p>EDIT:\nI can't post the exact error message because of company rules, and it's also super long. I'll post a truncated, anonymized version though:</p>\n\n<pre><code>CMakeFiles/ProjectName.dir/src/ui/dir_a/file_a.cpp.o: In function `ProjectName::ClassName::update(ProjectName::Body&amp;)':\n/home/username/prog/bots/src/ui/dir_a/file_a.cpp:30: undefined reference to `std::filesystem::current_path[abi:cxx11]()'\n/home/username/prog/bots/src/ui/dir_a/file_a.cpp:35: undefined reference to `std::filesystem::create_directories(std::filesystem::__cxx11::path const&amp;)'\nCMakeFiles/ProjectName.dir/src/ui/dir_a/file_a.cpp.o: In function `std::filesystem::__cxx11::path::operator+=(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)':\n/usr/include/c++/8/bits/fs_path.h:817: undefined reference to `std::filesystem::__cxx11::path::_M_split_cmpts()'\nCMakeFiles/ProjectName.dir/src/ui/dir_a/file_a.cpp.o: In function `std::filesystem::__cxx11::path::operator+=(char const*)':\n/usr/include/c++/8/bits/fs_path.h:825: undefined reference to `std::filesystem::__cxx11::path::_M_split_cmpts()'\nCMakeFiles/ProjectName.dir/src/ui/dir_a/file_a.cpp.o: In function `std::filesystem::exists(std::filesystem::__cxx11::path const&amp;)':\n/usr/include/c++/8/bits/fs_ops.h:121: undefined reference to `std::filesystem::status(std::filesystem::__cxx11::path const&amp;)'\nCMakeFiles/ProjectName.dir/src/ui/dir_b/file_b.cpp.o: In function `ProjectName::ClassName::update[abi:cxx11]()':\n/home/username/prog/bots/src/ui/dir_b/file_b.cpp:30: undefined reference to `std::filesystem::current_path[abi:cxx11]()'\n/home/username/prog/bots/src/ui/dir_b/file_b.cpp:34: undefined reference to `std::filesystem::create_directories(std::filesystem::__cxx11::path const&amp;)'\n/home/username/prog/bots/src/ui/dir_b/file_b.cpp:36: undefined reference to `std::filesystem::__cxx11::directory_iterator::operator*() const'\n/home/username/prog/bots/src/ui/dir_b/file_b.cpp:40: undefined reference to `std::filesystem::__cxx11::path::replace_extension(std::filesystem::__cxx11::path const&amp;)'\n/home/username/prog/bots/src/ui/dir_b/file_b.cpp:36: undefined reference to `std::filesystem::__cxx11::directory_iterator::operator++()'\nCMakeFiles/ProjectName.dir/src/ui/dir_b/file_b.cpp.o: In function `std::filesystem::__cxx11::path::path(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&amp;&amp;, std::filesystem::__cxx11::path::format)':\n/usr/include/c++/8/bits/fs_path.h:177: undefined reference to `std::filesystem::__cxx11::path::_M_split_cmpts()'\n</code></pre>\n\n<p>It continues like that for a hundred or so lines.</p>\n\n<p>Software versions:</p>\n\n<pre><code>Ubuntu 18.04\ng++-8 (installed with `apt`)\nCMake 3.14.2\n</code></pre>\n"}, {"tags": ["c++", "gcc", "auto", "perfect-forwarding", "c++-concepts"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1565789209, "post_id": 57495608, "comment_id": 101461058, "body": "Try <code>-std=c++2a</code>, though you mind need a newer GCC for that to work still"}, {"owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1565789294, "post_id": 57495608, "comment_id": 101461113, "body": "@StoryTeller Fails as well."}, {"owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1565789356, "post_id": 57495608, "comment_id": 101461162, "body": "@1201ProgramAlarm <code>error: invalid initialization of reference of type &#39;auto&amp;&amp;&#39; from expression of type &#39;int&#39;</code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1565789365, "post_id": 57495608, "comment_id": 101461165, "body": "Compiles for me with g++ 8.3.0 (with or without <code>-fconcepts</code>)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1565789417, "post_id": 57495608, "comment_id": 101461200, "body": "Well then, either as an extension or as a standard feature, seems GCC doesn&#39;t support it correctly still."}, {"owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1565789443, "post_id": 57495608, "comment_id": 101461211, "body": "@TobySpeight Are you sure? The live example at <code>godbolt</code> shows that it doesn&#39;t."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1565789501, "post_id": 57495608, "comment_id": 101461242, "body": "@Vahagn - The live example builds fine. You may have linked to the wrong version when (un)commenting stuff."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1565789569, "post_id": 57495608, "comment_id": 101461282, "body": "@Vahagn, yes, I copy-pasted from the question and compiled it without any errors."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 1, "creation_date": 1565790660, "post_id": 57495608, "comment_id": 101461923, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=69448\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=69448</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 4, "last_activity_date": 1565789388, "creation_date": 1565789388, "answer_id": 57495754, "question_id": 57495608, "link": "https://stackoverflow.com/questions/57495608/perfect-forwarding-return-type-of-a-template-class-member-function/57495754#57495754", "title": "Perfect forwarding return type of a template class member function", "body": "<p>Indeed it look like a compiler bug.</p>\n\n<p>A simple workaround would be to use trailing return type:</p>\n\n<pre><code>static auto ban(auto&amp;&amp;...) -&gt; auto&amp;&amp; // strangely work\n{ return TEN; }\n</code></pre>\n\n<p>Also, note that this syntax is not yet fully supported by GCC. The concept terse template syntax should allow this:</p>\n\n<pre><code>template&lt;typename&gt;\nconcept /* bool */ test = true;\n\nauto func(test auto) -&gt; void {}\n</code></pre>\n\n<p>And don't quite work yet with GCC concepts implementation.</p>\n"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57495754, "answer_count": 1, "score": 3, "last_activity_date": 1565789967, "creation_date": 1565788866, "last_edit_date": 1565789967, "question_id": 57495608, "link": "https://stackoverflow.com/questions/57495608/perfect-forwarding-return-type-of-a-template-class-member-function", "title": "Perfect forwarding return type of a template class member function", "body": "<p>Consider <a href=\"https://godbolt.org/z/ujjXsP\" rel=\"nofollow noreferrer\">this</a> code:</p>\n\n<pre><code>int TEN = 10;\n\ntemplate &lt; typename &gt;\nstruct XX\n{\n    //static auto&amp;&amp; ban(auto&amp;&amp;...) // FAILS!?\n    template &lt; typename... Args &gt; static auto&amp;&amp; ban(Args&amp;&amp;...)\n    { return TEN; }\n};\n\nint main()\n{\n    XX&lt;void&gt;::ban();\n    return 0;\n}\n</code></pre>\n\n<p>The declaration of <code>ban(auto&amp;&amp;...)</code> fails with </p>\n\n<pre><code>error: invalid initialization of reference of type 'auto&amp;&amp;' from expression of type 'int'\n</code></pre>\n\n<p>when compiling with <code>gcc-8.3 -std=c++17 -fconcepts</code>.</p>\n\n<p>So, is this a bug in the implementation of GCC?</p>\n\n<p>Note that it passes when class <code>XX</code> is not a template.</p>\n"}, {"tags": ["c++", "reference", "containers", "unique-ptr"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1565788971, "post_id": 57495516, "comment_id": 101460901, "body": "<code>return (*x == n) ? true : false;</code> looks like code obfuscation"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1565789107, "post_id": 57495516, "comment_id": 101460986, "body": "See this <a href=\"https://stackoverflow.com/questions/56779682/pass-c-vector-of-unique-ptrt-without-passing-ownership\">question</a>."}, {"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565793807, "post_id": 57495516, "comment_id": 101463635, "body": "I see I have missed to add the case that the value was not found. so actually there should be a <code>if (iter == l.end()) return false;</code> right before the element assignment."}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1565794729, "post_id": 57495516, "comment_id": 101464185, "body": "Try <code>element.reset(iter-&gt;get()); </code> in place of <code>element = *iter;</code>"}, {"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "reply_to_user": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1565799268, "post_id": 57495516, "comment_id": 101466551, "body": "@seccpur actually that is a nice approach. Maybe you should rather post this as an answer than a comment since it really fulfills all demands."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1565794453, "post_id": 57495747, "comment_id": 101464015, "body": "Returning <code>int *</code> directly and <code>nullptr</code> in case item not found  is even simpler than <code>std::optional</code>"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1565794816, "post_id": 57495747, "comment_id": 101464244, "body": "@Slava Yep. Was overthinking it :-)"}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1565794796, "last_edit_date": 1565794796, "creation_date": 1565789376, "answer_id": 57495747, "question_id": 57495516, "link": "https://stackoverflow.com/questions/57495516/how-to-code-outgoing-references-for-searching-on-container-with-unique-ptr/57495747#57495747", "title": "How to code outgoing references for searching on container with unique_ptr", "body": "<blockquote>\n  <p>I don't intend to share the ownership of the element, so <code>shared_ptr</code> is not an option. Also I do not want to take the ownership so a move operation isn't a good idea.</p>\n</blockquote>\n\n<p>The current popular convention is that a raw pointer is just an observer. It doesn't participate in any kind of ownership of the object. It also shouldn't be stored anywhere that can possibly outlive the object it points to. It's fine to use raw pointers in such cases (in fact, many people <em>recommend</em> to use raw pointers for this.) So whenever you use a raw pointer in an API, it should always be a non-owning pointer that only provides access to an object owned by someone else.</p>\n\n<p>However, if you want to be able to give the caller the option to actually participate in ownership, then you need to switch to <code>shared_ptr</code>. But from what you said, you just want to return an observer pointer that is going to be short-lived, so just use a raw pointer.</p>\n\n<p>Herb Sutter has a nice article about this:</p>\n\n<p><a href=\"https://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow noreferrer\">https://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/</a></p>\n\n<hr>\n\n<h2>(Off-topic)</h2>\n\n<p>By the way, instead of having an out-parameter, you can directly return an <code>int*</code> instead of a <code>bool</code>. Return <code>nullptr</code> if the element was not found. So your function signature would be:</p>\n\n<pre><code>int* find_ref_in_list(int n, const std::list&lt;int*&gt;&amp;l);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565792203, "post_id": 57495854, "comment_id": 101462787, "body": "What kind of reference would you return in case you can&#39;t find the element?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565793722, "post_id": 57495854, "comment_id": 101463592, "body": "I already mention that as a problem in my answer. You would have to throw an exception for example. I did not say it is a good solution I only see it as viable solution returning reference. But you better not doing that. And point is in your case you do not have <b>outgoing reference</b> you simply return <b>value</b> using reference as a mechanism. When you return value type pointer to <code>int</code> you are fine, when you try to return value of type <code>std::unique_ptr</code> you have obvious issue."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1565789736, "creation_date": 1565789736, "answer_id": 57495854, "question_id": 57495516, "link": "https://stackoverflow.com/questions/57495516/how-to-code-outgoing-references-for-searching-on-container-with-unique-ptr/57495854#57495854", "title": "How to code outgoing references for searching on container with unique_ptr", "body": "<blockquote>\n  <p>So the question if it is possible to provide the outgoing reference to a unique_ptr or which is the right technique to encode this problem for unique_ptrs.</p>\n</blockquote>\n\n<p>You invented your own term <code>outgoing reference</code> and using it you fool yourself. You do not have <code>outgoing reference</code> in your code, you simply return <strong>value</strong> thru reference. As you return value you cannot return <code>std::unique_ptr</code> without loosing ownership. To return reference you must use it as a return value, for example:</p>\n\n<pre><code>int*&amp; find_ref_in_list(int n, const std::list&lt;int*&gt;&amp;l, bool &amp;found)\n</code></pre>\n\n<p>but now you have different issue, what to return when item is not found and function usage is difficult. There is no way to return reference through parameter as there is no such thing as reference to reference. So either return raw pointer by value or <code>std::shared_ptr</code> if you want to share ownership. Be careful with inventing your own terminology, you stop understanding what is really happening there.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565791940, "post_id": 57495859, "comment_id": 101462645, "body": "Your solution with <code>std::reference_wrapper</code> is what I have searched for, but I think it is not possible to declare a variable for this type. The following code is failing: <code>std::reference_wrapper&lt;const std::unique_ptr&lt;int&gt;&gt; element;</code>"}], "tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1565789758, "creation_date": 1565789758, "answer_id": 57495859, "question_id": 57495516, "link": "https://stackoverflow.com/questions/57495516/how-to-code-outgoing-references-for-searching-on-container-with-unique-ptr/57495859#57495859", "title": "How to code outgoing references for searching on container with unique_ptr", "body": "<p>At the line </p>\n\n<pre><code>element = *iter; // causes error because assignment operator=\n</code></pre>\n\n<p>you are trying not to make reference <code>element</code> point to the <code>*iter</code> but to assign the content of the reference (std::unique_ptr in your case). BTW there is also an issue with <code>const</code>.</p>\n\n<p>There are two possible workarounds:</p>\n\n<ol>\n<li>Pass element by pointer to unique_ptr:</li>\n</ol>\n\n<pre><code>    bool find_ref_in_list(int n, const std::list&lt;std::unique_ptr&lt;int&gt;&gt;&amp;l, const std::unique_ptr&lt;int&gt;* element)\n    {\n        auto iter = std::find_if(l.begin(), l.end(), [n](const std::unique_ptr&lt;int&gt;&amp; x)\n        {\n            return (*x == n) ? true : false;\n        });\n\n        element = &amp;*iter;\n\n        return true;\n    }\n</code></pre>\n\n<ol start=\"2\">\n<li>Use <code>std::reference_wrapper</code> which is a kind of assignable reference.</li>\n</ol>\n\n<pre><code>bool find_ref_in_list(int n, const std::list&lt;std::unique_ptr&lt;int&gt;&gt;&amp;l, std::reference_wrapper&lt;const std::unique_ptr&lt;int&gt;&gt;&amp; element)\n{\n    auto iter = std::find_if(l.begin(), l.end(), [n](const std::unique_ptr&lt;int&gt;&amp; x)\n    {\n        return (*x == n) ? true : false;\n    });\n\n    element = std::ref(*iter);\n\n    return true;\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565801336, "post_id": 57497386, "comment_id": 101467433, "body": "I&#39;m sorry. When you have posted this as a comment above I was quite happy about this approach and therefor recommended you should post this as an answer. However thinking about this twice I see that this concept destroys the idea of an <code>unque_ptr</code>. Now the lifetime of our internal raw pointer is bound on the list and on the unique_ptr variable element. So when on of them goes out of scope the other becomes a dangling pointer. Sorry about that."}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565834350, "post_id": 57497386, "comment_id": 101476661, "body": "@AchimSch&#246;n: You also <code>element.reset(nullptr);</code> if the search result is negative so the calling program can also verify that."}, {"owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1565884591, "post_id": 57497386, "comment_id": 101493186, "body": "the problem only occurs for successful searches. If the list l is for example globally defined, but element is on stack you will damage l as soon as element is destroyed."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1565834390, "last_edit_date": 1565834390, "creation_date": 1565795115, "answer_id": 57497386, "question_id": 57495516, "link": "https://stackoverflow.com/questions/57495516/how-to-code-outgoing-references-for-searching-on-container-with-unique-ptr/57497386#57497386", "title": "How to code outgoing references for searching on container with unique_ptr", "body": "<p>You have to check the return value of the std::find_if statement. A return value  <code>iter == l.end()</code> indicates the search failed and the function could return false. If the iterator is valid, the element should be reset to take a new ownership and the function could terminate by returning true;</p>\n\n<pre><code>bool find_ref_in_list(int n, const std::list&lt;std::unique_ptr&lt;int&gt;&gt;&amp;l, std::unique_ptr&lt;int&gt;&amp; element)\n{\n    auto iter = std::find_if(l.begin(), l.end(), [n](const std::unique_ptr&lt;int&gt;&amp; x)\n    {\n        return (*x == n) ? true : false;\n    });\n\n    if (iter == l.end()){\n      element.reset(nullptr);\n      return false;\n    }\n    element.reset(iter-&gt;get());  \n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6863317, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6a808c246ae882f7fd97150a769316db?s=128&d=identicon&r=PG&f=1", "display_name": "Achim Sch&#246;n", "link": "https://stackoverflow.com/users/6863317/achim-sch%c3%b6n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1565834390, "creation_date": 1565788541, "question_id": 57495516, "link": "https://stackoverflow.com/questions/57495516/how-to-code-outgoing-references-for-searching-on-container-with-unique-ptr", "title": "How to code outgoing references for searching on container with unique_ptr", "body": "<p>I'm trying to replace a function which searches a container of pointers and provides the found element as an outgoing reference by using <code>unique_ptr</code>.</p>\n\n<p>Below is a simple example to demonstrate the situation when using plain pointers:</p>\n\n<pre><code>bool find_ref_in_list(int n, const std::list&lt;int*&gt;&amp;l, int*&amp; element)\n{\n    auto iter = find_if(l.begin(), l.end(), [n](int* x)\n    {\n        return (*x == n) ? true : false;\n    });\n\n    element = *iter;\n\n    return true;\n}\n</code></pre>\n\n<p>Trying to encode this by using <code>unique_ptr</code> leads me to the following code which causes an error when storing the result to the element reference.</p>\n\n<pre><code>bool find_ref_in_list(int n, const std::list&lt;std::unique_ptr&lt;int&gt;&gt;&amp;l, std::unique_ptr&lt;int&gt;&amp; element)\n{\n    auto iter = std::find_if(l.begin(), l.end(), [n](const std::unique_ptr&lt;int&gt;&amp; x)\n    {\n        return (*x == n) ? true : false;\n    });\n\n    element = *iter; // causes error because assignment operator=\n\n    return true;\n}\n</code></pre>\n\n<p>In this situation I don't intend to share the ownership of the element, so <code>shared_ptr</code> is not an option. Also I do not want to take the ownership so a <code>move</code> operation isn't a good idea.</p>\n\n<p>I'm aware that I could simply use an <code>iterator</code> as outgoing reference or the raw pointer by <code>get()</code>, but I think that would somehow obstruct the idea of unique_ptrs.</p>\n\n<p>So the question if it is possible to provide the outgoing reference to a unique_ptr or which is the right technique to encode this problem for unique_ptrs. I'm looking especially for a solution which works without using 3rd party libraries like boost.</p>\n"}, {"tags": ["c++", "function", "include", "preprocessor", "undef"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565788958, "post_id": 57495513, "comment_id": 101460886, "body": "Do you have control over the headers?  If so I would just move the constants to their own header (as an <code>inline constexpr</code> if you can use C++17) and then include that header in headers."}, {"owner": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565789048, "post_id": 57495513, "comment_id": 101460947, "body": "Unfortunately I am not able to do any changes in the headers."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1565789145, "post_id": 57495513, "comment_id": 101461011, "body": "How is <code>MY_CONSTANT</code> defined in the headers?"}, {"owner": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "edited": false, "score": 0, "creation_date": 1565789186, "post_id": 57495513, "comment_id": 101461034, "body": "It is defined like <code>#define MY_CONSTANT 99</code>"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1565789895, "post_id": 57495513, "comment_id": 101461473, "body": "Is there a <code>#if</code> conditional around the definition in <code>header2</code>?  That second error message doesn&#39;t make sense if <code>MY_CONSTANT</code> is defined as a macro."}, {"owner": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1565790714, "post_id": 57495513, "comment_id": 101461944, "body": "Of course @1201ProgramAlarm - this was a very good hint. There is a include guard added. Since I am including the header several times in my project, the redefine is only done once. Looks like I need to do the check only at first include. Is there a simple way to ensure this?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1565791850, "post_id": 57495513, "comment_id": 101462594, "body": "How can I put it kindly... Don&#39;t. If you have two APIs (each of them defined in one of two headers you cannot control) which conflict in some or even one of their identifiers, then do not include both into one file. Split the including file in one part which uses one API and one part which uses the other. If the two parts need to communicate, then define your own, clean API betwenn them and communicate cleanly across the clean border."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1565800874, "post_id": 57495513, "comment_id": 101467248, "body": "The error says that the constant is not defined in header2 or header1 - depending on error line."}], "owner": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1565788531, "creation_date": 1565788531, "question_id": 57495513, "link": "https://stackoverflow.com/questions/57495513/c-check-assert-a-defined-constant-at-its-redefinition", "title": "C++: Check / Assert a defined constant at its redefinition", "body": "<p>I am currently trying to use two headers defining (partially) the same constants. Typically the constants should be the same but my plan is to add a check to be absolutely sure. The problem can be described by the following minimal example:</p>\n\n<pre><code>#include \"header1.h\" //Defines MY_CONSTANT 99\n#include \"header2.h\" //Also defines MY_CONSTANT 99\n</code></pre>\n\n<p>Compiling is possible but the warning</p>\n\n<blockquote>\n  <p>warning: \"MY_CONSTANT\" redefined</p>\n</blockquote>\n\n<p>should not be ignored since I want to be sure both headers are defining the same value.</p>\n\n<p>My plan was to undef the define before including the second header with checking the values are equal. I've tried to save the first value of the constant as C++ const and added a static assertion but it seems like the compiler is not doing what I need:</p>\n\n<pre><code>#include \"header1.h\" //Defines MY_CONSTANT 99\nconst uint64_t MY_CONSTANT_OLD = MY_CONSTANT;\n#undef MY_CONSTANT\n#include \"header2.h\" //Defines again MY_CONSTANT 99\nstatic_assert(MY_CONSTANT_OLD == MY_CONSTANT, \"Redefined with other value\"); //Check same definition\n</code></pre>\n\n<blockquote>\n  <p>MY_CONSTANT\u2019 was not declared in this scope</p>\n</blockquote>\n\n<p>How could I solve the problem of redefining the constants with getting a compiler error if the values are not equal?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 1, "creation_date": 1565788340, "post_id": 57495365, "comment_id": 101460496, "body": "Your code only shows definitions. There is no code to inspect. The bug(s) is somewhere in your memory management"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1565788557, "post_id": 57495365, "comment_id": 101460624, "body": "If <code>string *friends;</code> is the array in quest (actually it&#39;s a pointer) then <code>std::vector&lt;std::string&gt; friends;</code> might be the solution you&#39;re looking for. (Similar for <code>receipt *rece;</code>.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1565788767, "post_id": 57495365, "comment_id": 101460764, "body": "After your edit, I warmly recommend: Throw all this <code>new</code> fiddling away and switch to <code>std::vector&lt;&gt;</code>. It provides all out of the box you&#39;re fighting with without the need of any pointer or <code>new</code> (or <code>delete</code>)."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1565789163, "post_id": 57495365, "comment_id": 101461022, "body": "What&#39;s the purpose of the two &quot;receipt *rece = 0;&quot; lines (in constructor and readin function)? Does nothing that I can see."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1565789282, "post_id": 57495365, "comment_id": 101461106, "body": "Your <code>receiptlist::resize()</code> doesn&#39;t look that bad (but I debugged by eyes). The <code>receiptlist::addOne()</code> as well. Your constructor <code>receiptlist::receiptlist()</code> is strange. I would recommend <code>receiptlist::receiptlist(): amountr(0), rece(nullptr) { }</code> (initialization instead of assignments)."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1565789528, "post_id": 57495365, "comment_id": 101461256, "body": "Can we see the code for your constructor and assignment operator for class &quot;receipt&quot;. If it&#39;s the assignment that&#39;s causing the crash, then that&#39;s a good place to start looking!"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1565789608, "post_id": 57495365, "comment_id": 101461306, "body": "The copy constructor of <code>receipt</code> is not overloaded. Please, have a look on the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">rule of three</a>. It might be an issue when passing instances of <code>receipt</code> by value (e.g. in function call)."}, {"owner": {"reputation": 11, "user_id": 11927311, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zTU2WeIZfgw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdoVz3NO7lyevHYb4qcVNITmCq1zQ/photo.jpg?sz=128", "display_name": "Ollbee", "link": "https://stackoverflow.com/users/11927311/ollbee"}, "edited": false, "score": 0, "creation_date": 1565789931, "post_id": 57495365, "comment_id": 101461486, "body": "Thank you all for your comments and sorry for my lack of memory understanding ( im new and trying to learn)! Im trying to bypass vectors in this code and i have also included a operator constructor in Class1 that should work in this case."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1565791254, "post_id": 57495365, "comment_id": 101462259, "body": "What is your &quot;Transaktion&quot; class? You define &quot;addOne(Transaktion &amp; T)&quot; but call addOne with a receipt &amp;R."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1565802311, "post_id": 57495365, "comment_id": 101467823, "body": "&quot;Im trying to bypass vectors in this code...&quot;  That&#39;s not a good idea.  If you are learning C++, you should start with <code>std::vector</code> as your go-to container.  You should not need or be using <code>new</code> in modern C++ (at least until you get into advanced C++)."}], "owner": {"reputation": 11, "user_id": 11927311, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zTU2WeIZfgw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdoVz3NO7lyevHYb4qcVNITmCq1zQ/photo.jpg?sz=128", "display_name": "Ollbee", "link": "https://stackoverflow.com/users/11927311/ollbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565792695, "creation_date": 1565788042, "last_edit_date": 1565791897, "question_id": 57495365, "link": "https://stackoverflow.com/questions/57495365/change-static-array-to-dynamic-array-in-class", "title": "Change static array to dynamic array in class", "body": "<p>The code is supposed to read lines from a text file, where each line is an object of Class1, and put them in a list of Class2 object. I'm trying to change all static arrays to dynamic, but with no luck.</p>\n\n<p>The program includes two classes. Class1 include attributes like date, name etc. Class2 is an list of class1 objects. I have not included all methods of the program. The Class1 objects are correctly formed from reading the file.  </p>\n\n<p>The problem appears when I'm trying to copy objects from class1 into the dynamic attribute receipt in Class2.</p>\n\n<p>Testing shows that program stops at \"rece[amountr- 1] = R;\". Can someone help me figure out what I'm missing?\nThanks in advance. </p>\n\n<pre><code>class receipt // 1\n {\n  private:\n      string date;\n      string name;\n      int amount;\n      string *friends;\n\n  public:\n      receipt();\n      ~receipt();\n      receipt&amp; operator=( const receipt&amp; R);\n      bool readreceipt( istream &amp;is );\n};\n\nclass receiptlist     // 2\n {\n  private:\n      int amountr;\n      receipt *rece;\n\n  public:\n      receiptlist();\n      ~receiptlist();\n      void resize ( int n );\n      void readin ( istream &amp; is );\n      void addOne( receipt &amp; R );\n};\n\nMain:\nreceiptlist RL;\nifstream is( \"supermarkadoreceipts.txt\" );\nRL.readin (is)\n\n\nConstructor:\nreceiptlist::receiptlist()\n{\n    amountr = 0;\n    rece = new receipt [amountr ];\n    receipt *rece = 0;\n}\n\nreceipt &amp; receipt::operator=( const receipt &amp; R)\n{\n  if (this != &amp;R)\n    {\n      delete[] friends;\n      date = R.date ;\n      name = R.name;\n      amount = R.amount;\n      friends = new string[amount];\n      for (int i=0; i &lt; amount; i++)\n        friends [i] = R.friends [i];\n    }\n  return *this;\n}\n\nMethods:\nvoid receiptlist::readin ( istream &amp; is )\n{\n    receipt *rece = 0;\n\n    receipt  R;\n\n    while (R.readreceipt(is))\n    {\n        addOne(R);\n    }\n}\n\nvoid receiptlist::addOne( receipt  &amp; R ) \n{\n    resize(amountr+ 1);\n    rece[amountr- 1] = R;\n}\n\nvoid receiptlist::resize( int n )\n{\n    receipt *p = 0;\n\n    if ( n &gt; 0 )\n    {\n      p = new receipt[n];\n\n      int i\n      for (i = 0; i &lt; n &amp;&amp; i &lt; amountr; i++ )\n      {\n          p[i] = rece[i];\n      }\n\n    }\n    delete [] rece;\n    rece = p;\n    amountr = n;\n}\n</code></pre>\n\n<p>The program compiles but gives a pointer error, which I cannot solve.</p>\n"}, {"tags": ["c++", "c++11", "lambda", "access-control"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1565788465, "post_id": 57495363, "comment_id": 101460562, "body": "What does the compiler say when you try to compile the code? The compiler should know if the lambda is a member function or not and if you can access the private data member. (Solution: it is not a member function.)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565788472, "post_id": 57495363, "comment_id": 101460567, "body": "Very related:<a href=\"https://stackoverflow.com/questions/24237729/c11-lambdas-can-access-my-private-members-why\" title=\"c11 lambdas can access my private members why\">stackoverflow.com/questions/24237729/&hellip;</a> Not sure whether to dupe close or not since the questions have different circumstances."}, {"owner": {"reputation": 78, "user_id": 9138025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3cf0c134420a2bcc224bb5c238130e?s=128&d=identicon&r=PG&f=1", "display_name": "H1KHC", "link": "https://stackoverflow.com/users/9138025/h1khc"}, "edited": false, "score": 0, "creation_date": 1565788569, "post_id": 57495363, "comment_id": 101460629, "body": "There isn&#39;t any errors or warnings when I&#39;m compiling it. It just, passed compiling."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1565789022, "post_id": 57495363, "comment_id": 101460931, "body": "OK, now I get it. Strange and interesting! If you want a pointer to the relevant parts from the standard, you might consider adding the tag &quot;language-lawyer&quot;."}, {"owner": {"reputation": 78, "user_id": 9138025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3cf0c134420a2bcc224bb5c238130e?s=128&d=identicon&r=PG&f=1", "display_name": "H1KHC", "link": "https://stackoverflow.com/users/9138025/h1khc"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1565878066, "post_id": 57495363, "comment_id": 101489971, "body": "@Werner Henze Mayby both are similar, because both lambdas are defined in the scope of the class, even though mine is called outside."}], "owner": {"reputation": 78, "user_id": 9138025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3cf0c134420a2bcc224bb5c238130e?s=128&d=identicon&r=PG&f=1", "display_name": "H1KHC", "link": "https://stackoverflow.com/users/9138025/h1khc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "closed_date": 1565789064, "answer_count": 0, "score": 3, "last_activity_date": 1565788661, "creation_date": 1565788012, "last_edit_date": 1565788410, "question_id": 57495363, "link": "https://stackoverflow.com/questions/57495363/is-a-lambda-expression-declared-in-a-class-a-member-of-that-class", "closed_reason": "Duplicate", "title": "Is a lambda expression declared in a class a member of that class?", "body": "<p>Here's another title of my question: <em>Is private/protected member access in a lambda expression allowed?</em></p>\n\n<p>And yet another, <em>A lambda can access variables from the surrounding scope. What exactly is the surrounding scope?</em></p>\n\n<hr>\n\n<p>Facts I know:</p>\n\n<ul>\n<li><blockquote>\n  <p>Class members declared as private can be used <em>only</em> by member functions and friends (classes or functions) of the class.   --- <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/member-access-control-cpp?view=vs-2019#member-access-control\" rel=\"nofollow noreferrer\">Microsoft Doc</a></p>\n</blockquote></li>\n<li><blockquote>\n  <p>A lambda can access, or capture, variables from the <em>surrounding</em> scope. \n  --- <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/lambda-expressions-in-cpp?view=vs-2019#capture-clause\" rel=\"nofollow noreferrer\">Microsoft Doc</a></p>\n</blockquote></li>\n<li>A lambda that captures nothing can convert to a function pointer.</li>\n</ul>\n\n<hr>\n\n<p>In short, below is a code snippet that demonstrates my confusion.</p>\n\n<p>I've tested it on <code>GCC 7.4.0</code>(Ubuntu 18.04 on WSL) and <code>CL 19.22.27905</code>(VS2019 Community), and on both platform this code has been passed.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nclass A {\n    int a = 0;\n public:\n    void access();\n};\n\nA* getPointer() {\n    static A a;\n    return &amp;a;\n}\n\nvoid runFunction(void(*fp)(int i)) {\n    fp(1);\n}\n\nvoid A::access() {\n    runFunction([](int i){\n        getPointer()-&gt;a = i;  // Here, is the access of variable `a` legal?\n    });\n}\n\n\n// Just for running the program\nint main() {\n    getPointer()-&gt;access();\n}\n\n</code></pre>\n\n<p>On one hand, this is legal because this variable is used by member functions(<code>access()</code>) the class(Fact 2).</p>\n\n<p>But on the other hand, it isn't directly accessed by that function. Rather, it is accessed in the lambda expression, which is converted to a function pointer.</p>\n\n<p>In this case, the <code>A::access()</code> should be similar as this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void lambda(int i) {\n    getPointer()-&gt;a = i;\n}\n\nvoid A::access() {\n    runFunction(lambda);\n}\n</code></pre>\n\n<p>This code certainly has syntax error.</p>\n\n<p>And I'm a bit confused.</p>\n"}, {"tags": ["c++", "vector", "boost", "buffer"], "comments": [{"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "reply_to_user": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1565788697, "post_id": 57495300, "comment_id": 101460709, "body": "I changed it to &quot;NumOfChannels&quot; avoid confusion..!"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1565789369, "post_id": 57495300, "comment_id": 101461170, "body": "I&#39;m not really familiar with pointer arithmetic magic, but I&#39;m confused with <code>reinterpret_cast&lt;const float*&gt;(_begin )) + (sizeof(uint32_t) * (GetChannelCount() + Index::SIZE))</code> You first convert a pointer to uint32_t into a pointer to float, and afterwards trying to advance bytes of ints. Does it work well at this point? As far as I remember, pointer addition requires same type, so here you shoulf first advance the adress at the end of an int array, and then cast a pointer to float."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "reply_to_user": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1565789753, "post_id": 57495300, "comment_id": 101461383, "body": "<code>uint32_t OFFSET = sizeof(uint32_t) * (GetChannelCount() + LidarMeasurement::Index::SIZE);       begin_azi = const_cast&lt;float*&gt;(reinterpret_cast&lt;const float*&gt;(_begin + OFFSET));</code> Even this does not work"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1565790144, "post_id": 57495300, "comment_id": 101461607, "body": "And what is GetTotalPointCount()? Is it&#39;s return value bigger or equal to 104 when you are trying to call GetAzimuth ?"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1565790820, "post_id": 57495300, "comment_id": 101462007, "body": "Returning back to pointer arithmetic magic. You shouldn&#39;t really show the compiler how many bytes is occupied by an element, so multiplication number of elements at sizeof(uint32_t) is unnecessary. Compiler should deduct it just by the type of an element and the number of elements. <code>begin_azi = const_cast&lt;float*&gt;(reinterpret_cast&lt;const float*&gt;(_begin + GetChannelCount() + LidarMeasurement::Index::SIZE)); </code> Please, let me know if this comment was more usefull."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "reply_to_user": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1565793983, "post_id": 57495300, "comment_id": 101463746, "body": "Thank you so much... It works like a charm... But could you tell me why it doesn&#39;t work or take 18 junk values if I use it?"}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1565794777, "post_id": 57497256, "comment_id": 101464223, "body": "P.S. as I told in my comment to the question, I&#39;m not really familiar with such manipulations, but I hope they should work this way."}], "tags": [], "owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "is_accepted": true, "score": 1, "last_activity_date": 1565794709, "creation_date": 1565794709, "answer_id": 57497256, "question_id": 57495300, "link": "https://stackoverflow.com/questions/57495300/accessing-data-from-buffer-created-from-boost/57497256#57497256", "title": "Accessing data from buffer created from boost", "body": "<p>The problem is caused bt wrong begin adress calculation.</p>\n\n<p><code>begin_azi = const_cast&lt;float*&gt;(reinterpret_cast&lt;const float*&gt;(_begin )) + (sizeof(uint32_t) * (GetChannelCount() + Index::SIZE));</code></p>\n\n<p>1) Pointer arithmetic requires only the pointer and number of elements to advance. Number of bytes the compiler should deduct by himself, based on the pointers type. So multiplication at <code>sizeof(uint32_t)</code> is redundant. The correct way of pointer advance is shown at <code>float* end_azi = begin_azi + GetTotalPointCount();</code></p>\n\n<p>2) Adress offset should be calculated for <em>pointer to uint32_t</em> type, and only then converted to <em>pointer to float</em> type.</p>\n\n<p>So correct way of <code>begin_azi</code> should look this way:</p>\n\n<p><code>begin_azi = const_cast&lt;float*&gt;(reinterpret_cast&lt;const float*&gt;(_begin + GetChannelCount() + Index::SIZE));</code></p>\n\n<p>Why did it partially worked earlier? from <a href=\"https://en.cppreference.com/w/c/language/operator_arithmetic#Pointer_arithmetic\" rel=\"nofollow noreferrer\">cppreference</a></p>\n\n<blockquote>\n  <p>Pointer arithmetic</p>\n  \n  <p>If the pointer P points at an element of an array with index I, then</p>\n  \n  <ul>\n  <li>P+N and N+P are pointers that point at an element of the same array with index I+N</li>\n  <li>P-N is a pointer that points at an element of the same array with index {tt|I-N}} </li>\n  </ul>\n  \n  <p>The behavior is defined only if both the original pointer and the result pointer are pointing at elements of the same array or <strong>one past the end</strong> of that array. </p>\n</blockquote>\n\n<p>Noone knows where did the pointed <code>begin_azi</code> pointed after wrong calculation. So noone guarantee that the program will execute in correct or wrong way.</p>\n"}], "owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 57497256, "answer_count": 1, "score": 2, "last_activity_date": 1565794709, "creation_date": 1565787799, "last_edit_date": 1565788624, "question_id": 57495300, "link": "https://stackoverflow.com/questions/57495300/accessing-data-from-buffer-created-from-boost", "title": "Accessing data from buffer created from boost", "body": "<p>I am trying to access the data that is serialized using boost buffer function and would like to fill it into two vectors. I am having problem with address to fill the second vector. Following class shows the two vectors and how they are filled.</p>\n\n<pre><code>class LidarMeasurement {\n  private:\n    std::vector&lt;uint32_t&gt; _header;\n    std::vector&lt;float&gt; _azimuth;\n\n  public:\n\n    //The header consists of an array of uint32_t's in the following layout\n    enum Index : size_t {\n         HorizontalAngle,\n         ChannelCount,\n         SIZE\n         };\n\n    explicit LidarMeasurement(uint32_t NumOfChannels = 0u): _header(Index::SIZE + NumOfChannels, 0u) {\n        _header[Index::ChannelCount] = NumOfChannels;\n    }\n\n    // called before filling vectors\n    void Reset(uint32_t total_point_count) {\n        std::memset(_header.data() + Index::SIZE, 0, sizeof(uint32_t) * GetChannelCount());\n        _azimuth.clear();\n        _azimuth.reserve(total_point_count);\n    }\n\n    // after reset,Write point function starts filling vectors.. following function is called 104 times (not constant) before next reset\n    void WritePoint(uint32_t channel, float angle_hor) {\n        _header[Index::SIZE + channel] += 1u;\n        _azimuth.emplace_back(angle_hor);\n    }\n\n    uint32_t GetChannelCount() const {\n       return _header[Index::ChannelCount];\n    }\n}\n</code></pre>\n\n<p>Once they are filled, its serialized and sent to a client. its serialized using the function below:</p>\n\n<pre><code>template &lt;typename Sensor&gt;\n  inline Buffer LidarSerializer::Serialize(\n      const Sensor &amp;,\n      const LidarMeasurement &amp;measurement,\n      Buffer &amp;&amp;output) {\n    std::array&lt;boost::asio::const_buffer, 2u&gt; seq = {\n        boost::asio::buffer(measurement._header),\n        boost::asio::buffer(measurement._azimuth)};\n    output.copy_from(seq);\n    return std::move(output);\n  }\n</code></pre>\n\n<p>Once I receive the serialized data, I need to put azimuth back to vector.\nI am using the following function to get the vector. <code>_begin</code> is the address to the buffer.</p>\n\n<pre><code>std::vector&lt;float&gt; GetAzimuth(const uint32_t* _begin) const{\n      std::vector&lt;float&gt; localAzimuthMemCopy;\n      begin_azi = const_cast&lt;float*&gt;(reinterpret_cast&lt;const float*&gt;(_begin )) + (sizeof(uint32_t) * (GetChannelCount() + Index::SIZE));\n      end_azi = begin_azi + GetTotalPointCount();//Total point count is the addition of individual channel point counts (not shown here)\n      for(float* i = begin_azi; i &lt; end_azi; i++){\n        localAzimuthMemCopy.emplace_back(*i);\n      }\n      return localAzimuthMemCopy;\n    }\n</code></pre>\n\n<p>However, the result i get has a memory offset. I am getting 104 values but the last 18 values are junk. vector is read from a wrong start address. What is wrong with the code?</p>\n\n<p><a href=\"https://i.stack.imgur.com/xC95S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xC95S.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1565787693, "post_id": 57495216, "comment_id": 101460109, "body": "What is the reason you use strongly typed <a href=\"https://en.cppreference.com/w/cpp/language/enum#Scoped_enumerations\" rel=\"nofollow noreferrer\">scoped enumerations</a>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565787786, "post_id": 57495216, "comment_id": 101460151, "body": "It is totally possible to do this in C++, but you commonly use <code>enum class</code> because you <i>don&#39;t</i> want this to be done."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565787891, "post_id": 57495216, "comment_id": 101460214, "body": "That this can&#39;t be done implicitly is (in part) <i>the whole point</i> of scoped enums. Presumably your book does explain this..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565788522, "post_id": 57495216, "comment_id": 101460604, "body": "You can have <code>int a = static_cast&lt;int&gt;(foo::foo1);</code>."}], "owner": {"reputation": 1, "user_id": 11927405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kGW1WgvdCFY/AAAAAAAAAAI/AAAAAAAAAAc/o7vZwTmWcPs/photo.jpg?sz=128", "display_name": "Cullen Jemison", "link": "https://stackoverflow.com/users/11927405/cullen-jemison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1565787598, "answer_count": 0, "score": 0, "last_activity_date": 1565787536, "creation_date": 1565787536, "question_id": 57495216, "link": "https://stackoverflow.com/questions/57495216/cannot-set-an-int-variable-to-enum-class-with-underlying-type-int", "closed_reason": "Duplicate", "title": "Cannot set an int variable to enum class with underlying type int", "body": "<p>I have an <code>enum class foo</code> with the underlying type of <code>int</code>, but when I try to assign the enum to an <code>int</code> variable, I get a <code>cannot convert 'foo' to 'int' in initialization</code> error when compiling.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nenum class foo : int {\n        foo1,\n        foo2,\n        foo3,\n};\n\nint main(void) {\n        int a = foo::foo1;\n        std::cout &lt;&lt; a;\n}\n</code></pre>\n\n<p>And the compiler output:</p>\n\n<pre><code>$ g++ test.cpp -o test\ntest.cpp: In function \u2018int main()\u2019:\ntest.cpp:10:15: error: cannot convert \u2018foo\u2019 to \u2018int\u2019 in initialization\n  int a = foo::foo1;\n               ^~~~\n</code></pre>\n\n<p>Is there something obvious that I'm missing here or is this just not possible in C++?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565787443, "post_id": 57495150, "comment_id": 101459972, "body": "Please show the C++ code you are trying to compile. This is probably a name mangling issue."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565787448, "post_id": 57495150, "comment_id": 101459974, "body": "C and C++ are not the same language.  Just because a lot of C code is valid C++ does not mean every valid C program is a valid C++ program.  More than likely you&#39;ll need to make some changes to the code as C++ has different name mangling than C."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565787625, "post_id": 57495150, "comment_id": 101460065, "body": "In particular, it is very likely that <a href=\"https://stackoverflow.com/a/12574420/9528746\">this</a> answer applies. But we can&#39;t be sure until we see the code you are giving to your compiler."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565787815, "post_id": 57495150, "comment_id": 101460167, "body": "@MaxLanghof Looking at the linked code, yes, I&#39;m almost certain that&#39;s the right answer."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1565787936, "post_id": 57495150, "comment_id": 101460255, "body": "Possibly only some <code>extern &quot;C&quot;</code> lacking?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1565788662, "post_id": 57495150, "comment_id": 101460688, "body": "The attached duplicate is somewhat correct, but the correct answer is here : <a href=\"https://stackoverflow.com/questions/27215256/unresolved-external-symbol-c-with-assembler#35359098\" title=\"unresolved external symbol c with assembler%2335359098\">stackoverflow.com/questions/27215256/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1565788227, "post_id": 57495371, "comment_id": 101460419, "body": "I don&#39;t consider it a good idea to edit 3rd party library headers... If the library author really failed to apply the correct C++ guards, I personally would prefer placing them around the header <i>include</i> like in the referenced answer at the end (not nice either, I know...)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565788509, "post_id": 57495371, "comment_id": 101460592, "body": "@Aconcagua Yeah, all I was saying is most popular libraries <i>do</i> have those guards and that&#39;s why OP might not have seen the problem before."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1565788060, "creation_date": 1565788060, "answer_id": 57495371, "question_id": 57495150, "link": "https://stackoverflow.com/questions/57495150/undefined-reference-to-inline-assembly-code-while-calling-in-c/57495371#57495371", "title": "Undefined reference to inline assembly code while calling in c++", "body": "<p>Assuming you are compiling the code from your link verbatim, change these lines of <code>md5-test.c</code>...</p>\n\n<pre><code>// Link this program with an external C or x86 compression function\nextern void md5_compress(uint32_t state[static STATE_LEN],\n                         const uint8_t block[static BLOCK_LEN]);\n</code></pre>\n\n<p>to read instead</p>\n\n<pre><code>// Link this program with an external C or x86 compression function\n#ifdef __cplusplus\nextern \"C\" {\n#endif\nextern void md5_compress(uint32_t state[static STATE_LEN],\n                         const uint8_t block[static BLOCK_LEN]);\n#ifdef __cplusplus\n} // extern \"C\"\n#endif\n</code></pre>\n\n<p>and it should start working.  To understand <em>why</em> this is the problem, see <a href=\"https://stackoverflow.com/a/12574420/9528746\">this old answer</a>.</p>\n\n<p>In a complete application, the declaration of <code>md5_compress</code> would be in a header file provided by the library that contains the MD5 implementation, and it would be that library's responsibility to put the <code>extern \"C\"</code> annotations in its header files.  This is why you may not have encountered this problem when working with off-the-shelf libraries.</p>\n"}], "owner": {"reputation": 1, "user_id": 9941030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uThlPJPUuBU/AAAAAAAAAAI/AAAAAAAAAf4/bydBIiZh-tM/photo.jpg?sz=128", "display_name": "Sujit chourasia", "link": "https://stackoverflow.com/users/9941030/sujit-chourasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "closed_date": 1565788070, "answer_count": 1, "score": 0, "last_activity_date": 1565788060, "creation_date": 1565787296, "question_id": 57495150, "link": "https://stackoverflow.com/questions/57495150/undefined-reference-to-inline-assembly-code-while-calling-in-c", "closed_reason": "Duplicate", "title": "Undefined reference to inline assembly code while calling in c++", "body": "<p>Link <a href=\"https://www.nayuki.io/page/fast-md5-hash-implementation-in-x86-assembly\" rel=\"nofollow noreferrer\">Fast MD5 Assembly</a></p>\n\n<p>above given link has assembly implementation of MD5.\nwhen i am trying to call the following code in c with given execute  instruction, it run successfully. but when as i try to call or execute in C++11, i got error as undefined reference to <code>Md5_hash</code> function </p>\n\n<p>for compiling in c </p>\n\n<pre><code>gcc --std=c99 md5-test.c md5-fast-x8664.S -o md5-test\n</code></pre>\n\n<p>same is used for c++11</p>\n\n<pre><code>gcc --std=c++11 md5-test.cpp md5-fast-x8664.S -o md5-test\n</code></pre>\n\n<p>it show error  </p>\n\n<pre><code>/staticLibmd5/main.cpp|32|undefined reference to md5_compress(unsigned char \nconst*, unsigned long, unsigned int*)'\n</code></pre>\n\n<p>is there any other instruction to that in c++ that is missing.</p>\n"}, {"tags": ["c++", "visual-studio", "cryptography", "pkcs#11", "botan"], "comments": [{"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "edited": false, "score": 0, "creation_date": 1565791546, "post_id": 57494986, "comment_id": 101462429, "body": "Try to copy debug symbols from output directory of Botan library into Debug folder of your project and start debugging. This can explain some details of point of rising exception."}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "reply_to_user": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "edited": false, "score": 0, "creation_date": 1565791747, "post_id": 57494986, "comment_id": 101462531, "body": "@Alexander Would you please explain more what should I do, thanks"}, {"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "edited": false, "score": 3, "creation_date": 1565792181, "post_id": 57494986, "comment_id": 101462776, "body": "Build debug version of Botan. Copy <code>botan.dll</code> and <code>botan.pdb</code> file into Debug folder of your test project. When you start to debug your test application the exception point will not be the dummy address in memory."}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "reply_to_user": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "edited": false, "score": 0, "creation_date": 1565961617, "post_id": 57494986, "comment_id": 101517145, "body": "@Alexander I build debug version of Botan, copied those files in debug folder. But the problem is how I include in application. I mean in this case The &#39;#include &lt;botan/p11.h&gt;&#39; does not work because building in debug mode have different include path and there is no lib folder. botan.lib and botan.dll is created in the main root of botan folder. how can I deal with include and library directories?"}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "reply_to_user": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "edited": false, "score": 0, "creation_date": 1565961946, "post_id": 57494986, "comment_id": 101517326, "body": "@Alexander I would be appreciate if you help me choose the best cryptography library. The project I begin a web extension which should negotiate with a c++ native application that connects to a hardware token in order to sign a document. How I best implement it using C++. Thanks in advance"}, {"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 1, "creation_date": 1565980930, "post_id": 57494986, "comment_id": 101525335, "body": "@BzH It might be worth trying with another pkcs#11 library (e.g. <a href=\"https://github.com/disig/SoftHSM2-for-Windows\" rel=\"nofollow noreferrer\">SoftHSM</a>)...Good luck!"}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "reply_to_user": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 0, "creation_date": 1566103657, "post_id": 57494986, "comment_id": 101547363, "body": "@vlp Botan is one of dependencies for SoftHSM. Should I configure Botan for SoftHSM. Can you provide a step by step configuration and using SoftHSM with VS2019? thanks"}, {"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 0, "creation_date": 1566144223, "post_id": 57494986, "comment_id": 101555664, "body": "@BzH I try to keep myself as far as possible from VS -- so can&#39;t help here. AFAIK SoftHSM can work with OpenSSL backend (without Botan). The link I gave is to a precompiled version for Windows which you could try in place of your pkcs#11 (ShuttleCsp11_3003.dll) to avoid possible errors in this dll. Btw -- I tested your code on linux and it works correctly (i.e. no segfault) with my pkcs#11 library..."}], "answers": [{"comments": [{"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 0, "creation_date": 1566095946, "post_id": 57528219, "comment_id": 101546627, "body": "How can I deal with includes after integrating. everything went fine with vcpkg but after I created a new console App in VS2019 how can I use Botan methods. Should I use the namespace or not. Should I set any configuration? Thanks alot"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 0, "creation_date": 1566100345, "post_id": 57528219, "comment_id": 101547065, "body": "If you use integrate install  botan libraries will be automatically linked to your vs 2019 projects. Otherwise you can manually linked from the vcpkg installed directories."}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 0, "creation_date": 1566101537, "post_id": 57528219, "comment_id": 101547157, "body": "I used integrate install successfully, but the line of code <code>Botan::PKCS11::Module module(&quot;C:\\\\Windows\\\\System32\\\\ShuttleCsp11_3003.dll&quot;);</code> has error which says it does not know Botan. Also I tried to write <code>#include &lt;botan.h&gt;</code> but VS does not recognize it. &#39;Using namespace Botan;&#39; also didn&#39;t work. I&#39;m new in C++. maybe there is a easy mistake there. cause I&#39;m sure everything went successful with VCPKG"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 1, "creation_date": 1566116640, "post_id": 57528219, "comment_id": 101549219, "body": "Resort to manual linking. Include the header folder and lib folder under vcpkg\\installed and copy the dll files to your application folder. May sure you select x64 project with multi-threaded DLL in the vs project settings."}, {"owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 0, "creation_date": 1566293919, "post_id": 57528219, "comment_id": 101602013, "body": "thanks a lot. You solved my problem. Would you please tell me how to debug Unhandled Exceptions in Botan. Does VCPKG had any option building the library in a way to debug these kinds of errors? Because I add another line in the source code <code>Botan::PKCS11::secure_string pin(4, &#39;0&#39;);</code> and again there is another Unhadled Exception. thanks"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "edited": false, "score": 1, "creation_date": 1566299949, "post_id": 57528219, "comment_id": 101605203, "body": "vcpkg generates both release and debug versions of the libraries. So you can debug your code in VC by introducing suitable breakpoints. Several botan codes are available under github.com/randombit/botan for testing. So you can find out if the exception is rather during the session login through your specified pin."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": true, "score": 2, "last_activity_date": 1566183294, "last_edit_date": 1566183294, "creation_date": 1565973344, "answer_id": 57528219, "question_id": 57494986, "link": "https://stackoverflow.com/questions/57494986/stdbad-alloc-using-botan-for-pkcs11/57528219#57528219", "title": "std::bad_alloc using Botan for PKCS#11", "body": "<p>Use Vcpkg, which is a tool created by Microsoft that helps acquire and build open source C and C++ libraries, to install <code>botan</code> automatically using a one liner shell command line and integrate to your VS 2019 project.</p>\n\n<p>After installing vcpkg from GitHub, type the following command from a PowerShell prompt to download and install the library including all the dependencies:</p>\n\n<pre><code>.\\vcpkg install botan:x86-windows\n</code></pre>\n\n<p>Use this to automatically (or you can do it manually) integrate the library to your VS project.</p>\n\n<pre><code>.\\vcpkg integrate install\n</code></pre>\n\n<p>This is serious error here, which is the reason why the namespace and include files are not recognized by your project,  <strong>Include Directories \u2192 add C:\\Botan\\include\\botan-2 is incorrect</strong> Check the directory/file name botan-2, it should not exist.</p>\n\n<blockquote>\n  <ul>\n  <li>should be C:\\Botan\\include; as your program includes botan in the folder path (eg #include \"botan/botan.h\")</li>\n  </ul>\n</blockquote>\n\n<p>Copy the dll files to your project directory( for debug testing) and to your application folder (debug or release version) and don't forget to correct the dll folder path while loading PKCS#11 shared library.</p>\n"}], "owner": {"reputation": 1797, "user_id": 2922639, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5nKFs.jpg?s=128&g=1", "display_name": "BzH", "link": "https://stackoverflow.com/users/2922639/bzh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 57528219, "answer_count": 1, "score": 2, "last_activity_date": 1566183294, "creation_date": 1565786692, "last_edit_date": 1565906986, "question_id": 57494986, "link": "https://stackoverflow.com/questions/57494986/stdbad-alloc-using-botan-for-pkcs11", "title": "std::bad_alloc using Botan for PKCS#11", "body": "<p>I'm new in C++ and I really stuck using Botan to connect to a hardware cryptography token. I don't know If I missed any setups for libs or dlls.</p>\n\n<p>I built Botan library based on <a href=\"https://www.youtube.com/watch?v=IMiupOC__9Q\" rel=\"nofollow noreferrer\">Building Botan library in Windows 10</a>. <code>botan.lib</code> and <code>botan.dll</code> is created in lib folder after building.</p>\n\n<p>Then I create a consoleApplication in Visual Studio 2019 with this simple code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;botan/botan.h&gt;\n\n#include &lt;botan/p11.h&gt;\n#include &lt;botan/p11_slot.h&gt;\n#include &lt;botan/p11_session.h&gt;\n#include &lt;botan/p11_module.h&gt;\n#include &lt;botan/p11_object.h&gt;\n#include &lt;botan/p11_randomgenerator.h&gt;\n\n#include &lt;botan/p11_x509.h&gt;\n#include &lt;botan/x509_dn.h&gt;\n\nusing namespace Botan; \nusing namespace PKCS11;\n\nint main()\n{\n    Botan::PKCS11::Module module(\"C:\\\\Windows\\\\System32\\\\ShuttleCsp11_3003.dll\");\n    // Sometimes useful if a newly connected token is not detected by the PKCS#11 module\n    module.reload();\n\n    Botan::PKCS11::Info info = module.get_info();\n\n    // print library version\n    std::cout &lt;&lt; std::to_string(info.libraryVersion.major) &lt;&lt; \".\"\n        &lt;&lt; std::to_string(info.libraryVersion.minor) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This is the settings I prepared to run:</p>\n\n<p>Configuration Properties\u2192VC++ Directories:</p>\n\n<ol>\n<li>Include Directories \u2192 add C:\\Botan\\include\\botan-2;</li>\n<li>Executable Directories \u2192 add C:\\Botan\\bin;</li>\n<li>Library Directory \u2192 add C:\\Botan\\lib;</li>\n<li>Source Directory \u2192 add C:\\Botan\\src;</li>\n<li>Additional Include Library \u2192 add C:\\Botan\\include\\botan-2</li>\n</ol>\n\n<p>Linker</p>\n\n<ol>\n<li>Additional Library Directory \u2192 add C:\\Botan\\lib;</li>\n<li>Input \u2192 Additional Dependencies \u2192 add C:\\Botan\\lib\\botan.lib</li>\n</ol>\n\n<p>Also I installed token driver which dll is in System32 folder;</p>\n\n<p>As I build the Botan Library with x86 so I debug the project with this config:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1cMZE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1cMZE.png\" alt=\"enter image description here\"></a></p>\n\n<p>The error which I need your help to solve is:</p>\n\n<pre><code>Unhandled exception at 0x74CD2CF2 in ConsoleApplication1.exe: Microsoft C++ exception:\nstd::bad_alloc at memory location 0x004FF1AC.\n</code></pre>\n\n<p>This error occurred in this line of Code:</p>\n\n<pre><code>Botan::PKCS11::Module module(\"C:\\\\Windows\\\\System32\\\\ShuttleCsp11_3003.dll\");\n</code></pre>\n\n<p>And this is the call stack</p>\n\n<p><a href=\"https://i.stack.imgur.com/XLJFC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XLJFC.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that I copied botan.dll and ShuttleCsp11_3003.dll in debug folder.</p>\n\n<p>Somebody please help, thanks</p>\n"}, {"tags": ["c++", "arrays", "class", "object", "vector"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1565786745, "post_id": 57494942, "comment_id": 101459566, "body": "Post the definition of <code>Process</code> and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 57, "user_id": 11101827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e5f191905080ac4d03399742e5f82b?s=128&d=identicon&r=PG&f=1", "display_name": "trail99", "link": "https://stackoverflow.com/users/11101827/trail99"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1565787865, "post_id": 57494942, "comment_id": 101460190, "body": "`  enum status { NOT_ARRIVED, ARRIVED, EXECUTING, FINISHED };  struct Process {      int id;     status stat;     float arrivalTime;     float burstTime;     float finishTime;     float turnAroundTime;     float waitingTime;      //void queueProcess();     void scheduleProcess(int);  }; `"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1565818679, "post_id": 57494942, "comment_id": 101473741, "body": "Please <a href=\"https://stackoverflow.com/posts/57494942/edit\">edit</a> the additional code into the question body."}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1565788298, "post_id": 57495053, "comment_id": 101460464, "body": "This also has the benefit of simplifying the calculation <code>finishTime = burstTime + prevFinishTime</code>"}, {"owner": {"reputation": 57, "user_id": 11101827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e5f191905080ac4d03399742e5f82b?s=128&d=identicon&r=PG&f=1", "display_name": "trail99", "link": "https://stackoverflow.com/users/11101827/trail99"}, "edited": false, "score": 0, "creation_date": 1565789755, "post_id": 57495053, "comment_id": 101461385, "body": "Literally the same thing I wrote :D"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1565795164, "post_id": 57495053, "comment_id": 101464444, "body": "Or could you just pass a pointer to the previous process (null if there ain&#39;t one)?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1565795269, "post_id": 57495053, "comment_id": 101464510, "body": "@Adrian You could, but passing the previous time is (IMHO) cleaner and more generic, as the time could potentially come from something other than a process."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1565795311, "post_id": 57495053, "comment_id": 101464537, "body": "Or, as you presumably have to store the array of objects (processes) somewhere anyway, why not make that array a static member of the class?"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1565786936, "creation_date": 1565786936, "answer_id": 57495053, "question_id": 57494942, "link": "https://stackoverflow.com/questions/57494942/how-to-access-array-of-objects-inside-member-function-in-c/57495053#57495053", "title": "How to access array of objects inside member function in C++?", "body": "<p>Since <code>scheduleProcess</code> is a member of <code>Process</code>, it only knows what the <code>Process</code> object knows.  The previous process is unknown at this level.  There are ways that use Undefined Behavior and make more assumptions about your code to get around this, but these should be avoided.</p>\n\n<p>One portable solution to avoid all that is to simply pass in the previous process's finish time as a parameter, since you know this value at the point of the call to <code>scheduleProcess</code>.  Where there is not a previous process (the first entry in the array), this finish time would be 0.</p>\n"}], "owner": {"reputation": 57, "user_id": 11101827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e5f191905080ac4d03399742e5f82b?s=128&d=identicon&r=PG&f=1", "display_name": "trail99", "link": "https://stackoverflow.com/users/11101827/trail99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57495053, "answer_count": 1, "score": 0, "last_activity_date": 1565786936, "creation_date": 1565786531, "question_id": 57494942, "link": "https://stackoverflow.com/questions/57494942/how-to-access-array-of-objects-inside-member-function-in-c", "title": "How to access array of objects inside member function in C++?", "body": "<p>I'm writing an Object Oriented version of FCFS scheduling algorithm, and I've hit a problem. I need to know if there's any way to access an array of objects inside the member function definition, without passing it as  a parameter explicitly.</p>\n\n<p>I've tried using \"this-pointer\", but since the calculation of finish time of current process requires the finish time of the previous, \"this\" won't work. Or at least I think it won't. I have no idea how to access \"previous\" object using \"this\"</p>\n\n<pre><code>void Process :: scheduleProcess(int pid) {\n     if(pid == 0) finishTime = burstTime;\n     else finishTime = burstTime + \n     this-&gt;[pid-1].finishTime;\n\n     turnAroundTime = finishTime - arrivalTime;\n     waitingTime = turnAroundTime - burstTime;\n}\n</code></pre>\n\n<p>I can obviously send the array of objects as a parameter and use it directly. I just want to know if there's a better way to do this:</p>\n\n<p>This is the part that's calling the aforementioned function:</p>\n\n<pre><code> for(int clockTime = 0; clockTime &lt;= maxArrivalTime(process); \n clockTime++) {\n    // If clockTime occurs in arrivalTime, return pid of that \n process\n         int pid = arrivalTimeOf(clockTime, process);\n         if(pid &gt;= 0) {            \n             process[pid].scheduleProcess(pid);\n\n         } else continue;\n }\n</code></pre>\n\n<p>Since I'm calling scheduleProcess() using process[pid], which is a vector of objects, I should be able to manipulate the variables pertaining to process[pid] object. How do I access process[pid-1] in the function itself? (Without passing process vector as an argument)</p>\n"}, {"tags": ["c++", "visual-studio-code"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1565786258, "post_id": 57494832, "comment_id": 101459286, "body": "Not sure if it is the same for VSCode but in VS when you step over input in the debugger you can switch over to the console window and type in the input, press enter, and then go back to stepping through the code."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1565786258, "post_id": 57494832, "comment_id": 101459287, "body": "@Jos Place a breekpoint to this statement a += &#39;b&#39;"}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1565786432, "post_id": 57494832, "comment_id": 101459398, "body": "@VladfromMoscow Yes, I did that and the debugging pauses there. Where can I provide my inputs?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1565786469, "post_id": 57494832, "comment_id": 101459418, "body": "@Jos Use the console window."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1565786560, "post_id": 57494832, "comment_id": 101459461, "body": "@VladfromMoscow Is that the same as <code>Terminal</code> OR <code>Debug Console</code>? I mean, where is that present?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1565786600, "post_id": 57494832, "comment_id": 101459486, "body": "@Jos I did not use this IDE. Try to use Terminal."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1565786650, "post_id": 57494832, "comment_id": 101459519, "body": "Do I need to run my program? I guess so. Nope running doesn&#39;t help."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1565786729, "post_id": 57494832, "comment_id": 101459559, "body": "The terminal just shows the command that I had executed before debugging ie - <code>Ajays-Air:cppnew ajay$ g++ -g d.cpp</code>"}, {"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1565790492, "post_id": 57494832, "comment_id": 101461821, "body": "Where is the location/window/panel that shows the output of <code>cout&lt;&lt;a</code>?"}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "reply_to_user": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1565797163, "post_id": 57494832, "comment_id": 101465558, "body": "@rioV8 The output is shown in the <code>Debug console</code>."}, {"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1565807390, "post_id": 57494832, "comment_id": 101469845, "body": "That should be the location where to enter the program keyboard input"}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "reply_to_user": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1565849585, "post_id": 57494832, "comment_id": 101479128, "body": "@rioV8 Unfortunately, that&#39;s NOT."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7151170, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106084696105464/picture?type=large", "display_name": "Orestes Kappa", "link": "https://stackoverflow.com/users/7151170/orestes-kappa"}, "edited": false, "score": 1, "creation_date": 1582457306, "post_id": 57498269, "comment_id": 106777433, "body": "This does not seem to work with piping input from stdin like <code>.&#47;program &lt; input.txt</code>. Is there an alternative for that?"}, {"owner": {"reputation": 99, "user_id": 7151170, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106084696105464/picture?type=large", "display_name": "Orestes Kappa", "link": "https://stackoverflow.com/users/7151170/orestes-kappa"}, "edited": false, "score": 2, "creation_date": 1586992697, "post_id": 57498269, "comment_id": 108338397, "body": "Turns out that it works if you put &quot;&lt;&quot; and &quot;input.txt&quot; as separate arguments."}, {"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1616095158, "post_id": 57498269, "comment_id": 117903201, "body": "sadly this isn&#39;t an option for me. the debugger never launches. same as <a href=\"https://stackoverflow.com/questions/53108690/visual-studio-code-c-debugger-doesnt-start\" title=\"visual studio code c debugger doesnt start\">stackoverflow.com/questions/53108690/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "is_accepted": true, "score": 15, "last_activity_date": 1565798446, "creation_date": 1565798446, "answer_id": 57498269, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/57498269#57498269", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>As stated in <a href=\"https://github.com/Microsoft/vscode-cpptools/issues/449\" rel=\"noreferrer\">Here</a></p>\n\n<blockquote>\n  <p>if you enable <strong>\"externalConsole\":true</strong> in the <strong>launch.json</strong> then you will get a pop up console window that you can type in.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 10096812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3205f7cfdc992e5c4c2679701625a881?s=128&d=identicon&r=PG&f=1", "display_name": "\u5085\u7ee7\u6657", "link": "https://stackoverflow.com/users/10096812/%e5%82%85%e7%bb%a7%e6%99%97"}, "is_accepted": false, "score": 0, "last_activity_date": 1574816551, "creation_date": 1574816551, "answer_id": 59061583, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/59061583#59061583", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>I also encountered the same problem, my solution was to replace cygwin's gdb and g ++ with mingw64's.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11404192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6583c434fcfef4ac889e0528255147?s=128&d=identicon&r=PG&f=1", "display_name": "tachyon", "link": "https://stackoverflow.com/users/11404192/tachyon"}, "is_accepted": false, "score": 1, "last_activity_date": 1576607976, "last_edit_date": 1576607976, "creation_date": 1576599222, "answer_id": 59378139, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/59378139#59378139", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>I hope this helps anyone who comes around here:</p>\n\n<p>by (1) setting \"externalConsole\" to <code>true</code> and (2) checking (enabling) \"Run In Terminal\" in Code-Runner Extension configuration, you can plug-in your input to your code by typing the input on the external console, that would pop up when you run your code.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 7911130, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-miH-j5yFnOk/AAAAAAAAAAI/AAAAAAAAAGM/1511gdxqvVA/photo.jpg?sz=128", "display_name": "Joseph Pena", "link": "https://stackoverflow.com/users/7911130/joseph-pena"}, "is_accepted": false, "score": 8, "last_activity_date": 1585618853, "creation_date": 1585618853, "answer_id": 60942159, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/60942159#60942159", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>To debug with inputs, you can edit the arg section as shown below:</p>\n\n<pre><code>\"program\": \"${workspaceFolder}/main\",\n\"args\": [\"&lt;\", \"input_file.in\"]\n</code></pre>\n\n<p>The example above should be the same as: <code>./main &lt; input_file.in</code></p>\n"}, {"tags": [], "owner": {"reputation": 6101, "user_id": 2573069, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/eb2b483ce40a13f95468dcb3cb8e09bc?s=128&d=identicon&r=PG&f=1", "display_name": "Union find", "link": "https://stackoverflow.com/users/2573069/union-find"}, "is_accepted": false, "score": 0, "last_activity_date": 1607020991, "creation_date": 1607020991, "answer_id": 65132150, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/65132150#65132150", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>In my case this was a two-step process.</p>\n<ol>\n<li>Enable externalConsole: true, as described in other responses.</li>\n<li><a href=\"https://github.com/microsoft/vscode-cpptools/issues/5079#issuecomment-626090192\" rel=\"nofollow noreferrer\">Let VS code control the terminal.</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 13834075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67b66f8d0abd0b4c0a1194fb6621de8?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay jangid", "link": "https://stackoverflow.com/users/13834075/ajay-jangid"}, "is_accepted": false, "score": 0, "last_activity_date": 1612264812, "creation_date": 1612264812, "answer_id": 66008681, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code/66008681#66008681", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>simply:-<br />\nstep1. click on small gear-icon of debugger window.<br />\nstep2. make &quot;true&quot; to this [&quot;externalConsole&quot;: false,] in launch.json file.<br />\nstep3. and just restart your debugger.</p>\n"}], "owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8708, "favorite_count": 3, "accepted_answer_id": 57498269, "answer_count": 6, "score": 5, "last_activity_date": 1612264812, "creation_date": 1565786152, "last_edit_date": 1565797480, "question_id": 57494832, "link": "https://stackoverflow.com/questions/57494832/how-to-read-input-when-debugging-in-c-in-visual-studio-code", "title": "How to read input when debugging in C++ in Visual Studio Code?", "body": "<p>I'm using <strong>VSCode</strong> for debugging my <strong>CPP</strong> program in <strong>MacOSX</strong>.</p>\n\n<p>I've 2 programs.</p>\n\n<p><strong>Program1</strong></p>\n\n<pre><code>int main(){\n\n    string a;\n    a = \"a\";\n    a += 'b';\n    cout&lt;&lt;a&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Program2</strong></p>\n\n<pre><code>int main(){\n\n    string a;\n    cin&gt;&gt;a;\n    a += 'b'\n    cout&lt;&lt;a;\n    return 0;\n}\n</code></pre>\n\n<p>In <strong>program1</strong> I'm directly assigning the <code>string a</code> and when I debug the program in <code>VSCode</code> by first compiling it in terminal using : </p>\n\n<p><code>g++ -g filename.cpp</code> </p>\n\n<p>and then selecting the <strong>Starting Debugging</strong> option in the <strong>Debugging menu</strong>. I'm able to see the state of the <code>string a</code> variable by moving forward in breakpoints.</p>\n\n<p>The <strong>VARIABLES</strong> section shows the state of different variables and the <strong>CALL STACK</strong> show the stack frame.</p>\n\n<p>But, for <strong>program2</strong>, when I go past the breakpoint of the <code>cin&gt;&gt;a;</code>, the contents of <strong>VARIABLES</strong> and of <strong>CALL STACK</strong> get cleared up. </p>\n\n<p>Here are the contents of the <code>launch.json</code> file:</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [    \n        {\n            \"name\": \"(lldb) Launch\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${workspaceFolder}/a.out\",\n            \"args\": [],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${workspaceFolder}\",\n            \"environment\": [],\n            \"externalConsole\": false,\n            \"MIMode\": \"lldb\"\n        }\n    ]\n}\n</code></pre>\n\n<p>How can I get user-input and move forward to debug my code?</p>\n"}, {"tags": ["python", "c++", "numpy", "boost"], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 2451329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b4df8fff4fb97b59ae7b6238062f4f?s=128&d=identicon&r=PG", "display_name": "gst", "link": "https://stackoverflow.com/users/2451329/gst"}, "is_accepted": false, "score": 2, "last_activity_date": 1571171787, "creation_date": 1571171787, "answer_id": 58402305, "question_id": 57494774, "link": "https://stackoverflow.com/questions/57494774/pass-numpy-array-to-c-using-boost-python/58402305#58402305", "title": "Pass numpy array to C++ using Boost.Python", "body": "<p>I had the same problem and apparently solved it by putting</p>\n\n<p><code>boost::python::numpy::initialize();</code></p>\n\n<p>at top of my BOOST_PYHON_MODULE definition.</p>\n"}], "owner": {"reputation": 101, "user_id": 10889578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78476bc1c02eb1723c94d8439406cf12?s=128&d=identicon&r=PG&f=1", "display_name": "zaphod", "link": "https://stackoverflow.com/users/10889578/zaphod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1571171787, "creation_date": 1565785930, "question_id": 57494774, "link": "https://stackoverflow.com/questions/57494774/pass-numpy-array-to-c-using-boost-python", "title": "Pass numpy array to C++ using Boost.Python", "body": "<p>I am trying to pass a numpy array to C++ using Boost.Python.</p>\n\n<p>The C++ code is:</p>\n\n<pre><code>#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n\nvoid f(boost::python::numpy::ndarray&amp; x){}\n\nBOOST_PYTHON_MODULE(libtest)\n{\n  boost::python::def(\"f\", f);\n}\n</code></pre>\n\n<p>The Python code is:</p>\n\n<pre><code>import libtest\nimport numpy\nx=numpy.array(range(3))\nlibtest.f(x)\n</code></pre>\n\n<p>This gives a segmentation fault. This happens when passing the variable by value and by reference.</p>\n\n<p>I have found a way to do what I needed. However the purpose of using Boost.Python was to be able to simply call the functions from the module without having to write a wrapper on the Python side as is the case with ctypes where certain types or return values have to be dealt with.</p>\n\n<p>Is is possible to simply pass a reference to a numpy array?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "overload-resolution"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1565785815, "post_id": 57494708, "comment_id": 101459040, "body": "You can overload the operators for <code>Variant</code> and &quot;do the right thing&quot; in them."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 5, "creation_date": 1565785888, "post_id": 57494708, "comment_id": 101459072, "body": "<i>&quot;I&#39;m trying to create my own variant class that can be cast to and from many types.&quot;</i> Implicitly? Doesn&#39;t sound like a great idea."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565786128, "post_id": 57494708, "comment_id": 101459226, "body": "This is too vague to be possible to suggest a solution. You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the ambiguous overload, that anyone can reproduce themselves, in order to determine the best way to resolve the ambiguity. There are many possible solution. Unfortunately there is no universal solution to solving ambiguous overloads that works for every C++ class in existence, therefore you need to <a href=\"https://stackoverflow.com/posts/57494708/edit\">edit</a> your question and include <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, otherwise it is unlikely that anyone will be able to help you."}, {"owner": {"reputation": 19, "user_id": 11927294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/925989d19f67c3a7ee527bb1bb567a5d?s=128&d=identicon&r=PG&f=1", "display_name": "haporise", "link": "https://stackoverflow.com/users/11927294/haporise"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565786543, "post_id": 57494708, "comment_id": 101459454, "body": "@NathanOliver Yes that&#39;s what I was afraid of. That requires defining +(int, Variant), +(Variant, int), -(int, Variant), -(Variant, int), etc. ? Was hoping there was a way to somehow say, &#39;if the resolution is ambiguous and you can worth with a double, just use that. But that&#39;s kind of messy too I guess"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1565786746, "post_id": 57494708, "comment_id": 101459568, "body": "@haporise Fortunately there are templates.  You can define a <code>template &lt;typename T&gt; auto Variant::operator+(Variant, T)</code> and <code>template &lt;typename T&gt; auto Variant::operator+(T, Variant)</code> so at least you only need to write a pair of functions for each operator.  This is generally what you want to do.  As you&#39;ve found, too many implicit conversions can make your code not work.  There is no way to tell the compiler how to break a tie on ambiguity."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1565787024, "post_id": 57494708, "comment_id": 101459752, "body": "You can always mark your constructors and conversion operators as <code>explicit</code>, but it sounds like that goes against your plans for this class."}], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "is_accepted": false, "score": 0, "last_activity_date": 1565788481, "last_edit_date": 1565788481, "creation_date": 1565787756, "answer_id": 57495284, "question_id": 57494708, "link": "https://stackoverflow.com/questions/57494708/create-a-preference-for-ambiguous-overloads/57495284#57495284", "title": "Create a preference for ambiguous overloads", "body": "<p>You may do something like</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct S\n{\n\ntemplate &lt;typename T2&gt;\nT2 operator-(const T2&amp; i_lhs) const\n{\n    static_assert(std::is_convertible_v&lt;T, T2&gt;);\n    auto result = static_cast&lt;T2&gt;(m_member);\n    result -= i_lhs;\n    return result;\n}\n\nT m_member = 20;\n};\n</code></pre>\n\n<p>And use it</p>\n\n<pre><code>int main()\n{\n  auto s = S&lt;int&gt;();\n  auto s3 = s - 10.0;\n  std::cout &lt;&lt; s3 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>One more thing, so as to make the behaviour intuitive, provide a number of operators (i.e. Numeric + Variant, Variant + Numeric, and Variant + Variant).</p>\n\n<p>And, the provided code returns a <code>double</code>. It may be more intuitive to return a new <code>Variant</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 11927294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/925989d19f67c3a7ee527bb1bb567a5d?s=128&d=identicon&r=PG&f=1", "display_name": "haporise", "link": "https://stackoverflow.com/users/11927294/haporise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565788481, "creation_date": 1565785700, "last_edit_date": 1565786747, "question_id": 57494708, "link": "https://stackoverflow.com/questions/57494708/create-a-preference-for-ambiguous-overloads", "title": "Create a preference for ambiguous overloads", "body": "<p>I'm trying to create my own variant class that can be cast to and from many types. This leads to issues with ambiguous calls for operators like '+' and '-'. Is it possible to create a preference for which casts occur to avoid this?</p>\n\n<pre><code>#include &lt;string&gt;\n\nclass Variant\n{\npublic:\n    Variant() {}\n    Variant(int i) : mData(std::to_string(i)) {}\n    Variant(double d) : mData(std::to_string(d)) {}\n\n    operator         int() const { return lround(atof(mData.c_str())); }\n    operator      double() const { return atof(mData.c_str()); }\n\nprivate:\n    std::string mData;\n};\n\n\nint main() {\n    Variant v = 1.2;\n    int i = v; //fine\n    double d = v; //fine\n\n    double x = v - 1.0; //error, ambiguous, would be nice to prefer a double cast\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "inner-classes"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1565785629, "post_id": 57494660, "comment_id": 101458955, "body": "<code>void func(typename Foo&lt;T&gt;::Bar g) { }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1565789310, "post_id": 57494729, "comment_id": 101461129, "body": "How about adding a few words on why the snippet in the question did not work in the first place?"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1565789509, "last_edit_date": 1565789509, "creation_date": 1565785753, "answer_id": 57494729, "question_id": 57494660, "link": "https://stackoverflow.com/questions/57494660/nested-class-in-templated-class-used-in-templated-function-syntax-error/57494729#57494729", "title": "Nested class in templated class used in templated function syntax error", "body": "<p>Use</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid func( typename Foo&lt;T&gt;::Bar g ) { }\n</code></pre>\n\n<p>Otherwise the construction <code>Foo&lt;T&gt;::Bar</code> is not considered by the compiler as a type specifier but as an expression.</p>\n"}], "owner": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "closed_date": 1565785677, "accepted_answer_id": 57494729, "answer_count": 1, "score": 1, "last_activity_date": 1565789509, "creation_date": 1565785559, "question_id": 57494660, "link": "https://stackoverflow.com/questions/57494660/nested-class-in-templated-class-used-in-templated-function-syntax-error", "closed_reason": "Duplicate", "title": "Nested class in templated class used in templated function syntax error", "body": "<p>Suppose I have the following: </p>\n\n<pre><code>template&lt;typename T&gt;\n    struct Foo\n    {\n    public:\n        class Bar\n        {           \n        };\n    };\n</code></pre>\n\n<p>If I then define the function </p>\n\n<pre><code>template &lt;typename T&gt;\nvoid func(Foo&lt;T&gt;::Bar g) { }\n</code></pre>\n\n<p>I get an error:\nsyntax error: identifier 'Bar'</p>\n\n<p>Why do I get the error and how can I solve it so that I can use the templated function.</p>\n"}, {"tags": ["c++", "macos", "header-files", "llvm-clang", "libc++"], "comments": [{"owner": {"reputation": 71, "user_id": 11819414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bc883386b1b8fa88175003477cf9b2?s=128&d=identicon&r=PG&f=1", "display_name": "kiimmm", "link": "https://stackoverflow.com/users/11819414/kiimmm"}, "edited": false, "score": 0, "creation_date": 1565789042, "post_id": 57494601, "comment_id": 101460944, "body": "If I compile <i>HelloWorld</i> in <b>C</b>, include <code>&lt;stdio.h&gt;</code>, it just compiles well"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 11819414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bc883386b1b8fa88175003477cf9b2?s=128&d=identicon&r=PG&f=1", "display_name": "kiimmm", "link": "https://stackoverflow.com/users/11819414/kiimmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1566825460, "creation_date": 1566825460, "answer_id": 57658697, "question_id": 57494601, "link": "https://stackoverflow.com/questions/57494601/clang-cant-compile-basic-header-files-like-iostream-in-macos/57658697#57658697", "title": "Clang can&#39;t compile basic header files (like &lt;iostream&gt;) in macOS", "body": "<p>It can be compiled through</p>\n\n<p><code>clang++ -std=c++11 -stdlib=libc++ -nostdinc++ -I/.../llvm-project/libcxx/include -L/.../llvm-project/libcxx/lib -Wl,-rpath,/.../llvm-project/libcxx/lib test.cpp -o test</code></p>\n"}], "owner": {"reputation": 71, "user_id": 11819414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bc883386b1b8fa88175003477cf9b2?s=128&d=identicon&r=PG&f=1", "display_name": "kiimmm", "link": "https://stackoverflow.com/users/11819414/kiimmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1349, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1566825460, "creation_date": 1565785339, "question_id": 57494601, "link": "https://stackoverflow.com/questions/57494601/clang-cant-compile-basic-header-files-like-iostream-in-macos", "title": "Clang can&#39;t compile basic header files (like &lt;iostream&gt;) in macOS", "body": "<p>My macOS version is <code>10.14</code></p>\n\n<p>Xcode version is <code>10.2</code></p>\n\n<p>To write the plugin for clang. I just install the llvm and clang from Github with following commands.</p>\n\n<pre><code>git clone https://github.com/llvm/llvm-project.git\ncd llvm-project\nmkdir build\ncd build\ncmake -G \"Unix Makefiles\" -DLLVM_ENABLE_PROJECTS=\"clang;libcxx;libcxxabi\" ../llvm\n</code></pre>\n\n<p>Then with <code>clang --version</code>, it shows:</p>\n\n<pre><code>clang version 10.0.0 (https://github.com/llvm/llvm-project.git 73f702ff192475b27039325a7428ce037771a5de)\nTarget: x86_64-apple-darwin18.6.0\nThread model: posix\nInstalledDir: /Users/kim/GitHub/llvm-project/build/bin\n</code></pre>\n\n<p>Now, I just try to compile very easy <em>Hello World</em> program:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; \"Hello World!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>with command <code>clang++ test.cpp -o test</code></p>\n\n<p>But unfortunately, it can't compile with error:</p>\n\n<pre><code>In file included from test.cpp:1:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iostream:37:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/ios:214:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iosfwd:95:\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:136:77: error: use of undeclared\n      identifier 'wcschr'\nwchar_t* __libcpp_wcschr(const wchar_t* __s, wchar_t __c) {return (wchar_t*)wcschr(__s, __c);}\n                                                                            ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:143:87: error: use of undeclared\n      identifier 'wcspbrk'\nwchar_t* __libcpp_wcspbrk(const wchar_t* __s1, const wchar_t* __s2) {return (wchar_t*)wcspbrk(__s1, __s2);}\n                                                                                      ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:150:78: error: use of undeclared\n      identifier 'wcsrchr'; did you mean 'wcschr'?\nwchar_t* __libcpp_wcsrchr(const wchar_t* __s, wchar_t __c) {return (wchar_t*)wcsrchr(__s, __c);}\n                                                                             ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:138:16: note: 'wcschr' declared here\nconst wchar_t* wcschr(const wchar_t* __s, wchar_t __c) {return __libcpp_wcschr(__s, __c);}\n               ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:157:86: error: use of undeclared\n      identifier 'wcsstr'; did you mean 'wcschr'?\nwchar_t* __libcpp_wcsstr(const wchar_t* __s1, const wchar_t* __s2) {return (wchar_t*)wcsstr(__s1, __s2);}\n                                                                                     ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:140:16: note: 'wcschr' declared here\n      wchar_t* wcschr(      wchar_t* __s, wchar_t __c) {return __libcpp_wcschr(__s, __c);}\n               ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:157:86: error: no matching function for\n      call to 'wcschr'\nwchar_t* __libcpp_wcsstr(const wchar_t* __s1, const wchar_t* __s2) {return (wchar_t*)wcsstr(__s1, __s2);}\n                                                                                     ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:140:16: note: candidate disabled: &lt;no\n      message provided&gt;\n      wchar_t* wcschr(      wchar_t* __s, wchar_t __c) {return __libcpp_wcschr(__s, __c);}\n               ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:157:93: error: cannot initialize a\n      parameter of type 'wchar_t *' with an lvalue of type 'const wchar_t *'\nwchar_t* __libcpp_wcsstr(const wchar_t* __s1, const wchar_t* __s2) {return (wchar_t*)wcsstr(__s1, __s2);}\n                                                                                            ^~~~\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:140:38: note: passing argument to\n      parameter '__s' here\n      wchar_t* wcschr(      wchar_t* __s, wchar_t __c) {return __libcpp_wcschr(__s, __c);}\n                                     ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:164:60: error: unknown type name\n      'size_t'\nwchar_t* __libcpp_wmemchr(const wchar_t* __s, wchar_t __c, size_t __n) {return (wchar_t*)wmemchr(__...\n                                                           ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:166:57: error: unknown type name\n      'size_t'\nconst wchar_t* wmemchr(const wchar_t* __s, wchar_t __c, size_t __n) {return __libcpp_wmemchr(__s, _...\n                                                        ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:168:57: error: unknown type name\n      'size_t'\n      wchar_t* wmemchr(      wchar_t* __s, wchar_t __c, size_t __n) {return __libcpp_wmemchr(__s, _...\n                                                        ^\nIn file included from test.cpp:1:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iostream:37:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/ios:214:\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iosfwd:189:14: error: use of undeclared\n      identifier 'mbstate_t'\ntypedef fpos&lt;mbstate_t&gt;    streampos;\n             ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iosfwd:190:14: error: use of undeclared\n      identifier 'mbstate_t'\ntypedef fpos&lt;mbstate_t&gt;    wstreampos;\n             ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iosfwd:195:14: error: use of undeclared\n      identifier 'mbstate_t'\ntypedef fpos&lt;mbstate_t&gt;    u16streampos;\n             ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iosfwd:196:14: error: use of undeclared\n      identifier 'mbstate_t'\ntypedef fpos&lt;mbstate_t&gt;    u32streampos;\n             ^\nIn file included from test.cpp:1:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iostream:37:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/ios:215:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/__locale:14:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string:504:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string_view:175:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/__string:56:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/algorithm:641:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/cstring:60:\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:73:64: error: use of undeclared\n      identifier 'strchr'\nchar* __libcpp_strchr(const char* __s, int __c) {return (char*)strchr(__s, __c);}\n                                                               ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:80:75: error: use of undeclared\n      identifier 'strpbrk'\nchar* __libcpp_strpbrk(const char* __s1, const char* __s2) {return (char*)strpbrk(__s1, __s2);}\n                                                                          ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:87:65: error: use of undeclared\n      identifier 'strrchr'; did you mean 'strchr'?\nchar* __libcpp_strrchr(const char* __s, int __c) {return (char*)strrchr(__s, __c);}\n                                                                ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:75:13: note: 'strchr' declared here\nconst char* strchr(const char* __s, int __c) {return __libcpp_strchr(__s, __c);}\n            ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:94:76: error: use of undeclared\n      identifier 'memchr'; did you mean 'wmemchr'?\nvoid* __libcpp_memchr(const void* __s, int __c, size_t __n) {return (void*)memchr(__s, __c, __n);}\n                                                                           ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/wchar.h:166:16: note: 'wmemchr' declared here\nconst wchar_t* wmemchr(const wchar_t* __s, wchar_t __c, size_t __n) {return __libcpp_wmemchr(__s, _...\n               ^\nIn file included from test.cpp:1:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/iostream:37:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/ios:215:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/__locale:14:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string:504:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string_view:175:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/__string:56:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/algorithm:641:\nIn file included from /Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/cstring:60:\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:101:74: error: use of undeclared\n      identifier 'strstr'; did you mean 'strchr'?\nchar* __libcpp_strstr(const char* __s1, const char* __s2) {return (char*)strstr(__s1, __s2);}\n                                                                         ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:77:13: note: 'strchr' declared here\n      char* strchr(      char* __s, int __c) {return __libcpp_strchr(__s, __c);}\n            ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:101:74: error: no matching function for\n      call to 'strchr'\nchar* __libcpp_strstr(const char* __s1, const char* __s2) {return (char*)strstr(__s1, __s2);}\n                                                                         ^\n/Users/kim/GitHub/llvm-project/build/bin/../include/c++/v1/string.h:77:13: note: candidate disabled: &lt;no\n      message provided&gt;\n      char* strchr(      char* __s, int __c) {return __libcpp_strchr(__s, __c);}\n            ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n20 errors generated.\n</code></pre>\n\n<p>I have tried adding <code>-std=c++11</code>, <code>-stdlib=libc++</code>, but there are same errors.</p>\n"}, {"tags": ["c++", "lambda", "arduino"], "comments": [{"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1565785714, "post_id": 57494571, "comment_id": 101458998, "body": "You make a template function if you want to pass a lambda. Captureless lambdas aren&#39;t convertible to functions - at least thus far, IIRC C++20 supports this feature."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 2, "creation_date": 1565785974, "post_id": 57494571, "comment_id": 101459134, "body": "@ALX23z captureless lambdas are convertible to function pointers"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1565786222, "post_id": 57494571, "comment_id": 101459269, "body": "When you say &quot; I couldn&#39;t make it work&quot; what does that mean? Didn&#39;t compile? Crashed? Soemthing else?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565787019, "post_id": 57494571, "comment_id": 101459748, "body": "Are you in control of the packet-serial&#39;s interface, i. e. can you modify it?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1565787316, "post_id": 57494571, "comment_id": 101459913, "body": "The &#39;most promising&#39; approach requires an <i>additional</i> <code>void*</code> parameter for the callback function; if you had such, you could simply pass <code>this</code> as exactly this additional argument..."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1565789031, "post_id": 57494571, "comment_id": 101460936, "body": "That library (is bad and) assumes you only ever have one <code>PacketSerial</code> at a time. If you have more, you are out of luck. Otherwise you can (ab)use a global <code>ArduinoDriver *</code> and a free function"}], "owner": {"reputation": 3, "user_id": 11000855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a42a30635189c17f4d410848827758?s=128&d=identicon&r=PG&f=1", "display_name": "MTH", "link": "https://stackoverflow.com/users/11000855/mth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565813024, "creation_date": 1565785231, "last_edit_date": 1565813024, "question_id": 57494571, "link": "https://stackoverflow.com/questions/57494571/passing-lambda-function-without-stdfunction-with-capture-this", "title": "Passing Lambda function without std::function with capture [this]", "body": "<p>I'm using the 'PacketSerial' library from Github in an Arduino program. In the examples provided with the library, everything is in loop() or setup(). I would like to move all that to the instance 'arDriver', but run into some trouble..</p>\n\n<p>I initialize it like this, which works fine (just like the examples provided);</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//in app.ino\nvoid setup()\n{\n  arDriver.setup();  //&lt;- I want to move the 2 functions below in here\n  arDriver.myPacketSerial.begin(115200);\n  arDriver.myPacketSerial.setPacketHandler([](const uint8_t* buffer, size_t size) \n    {\n    arDriver.communicationCOBS(arDriver.myPacketSerial, buffer, size);\n    });\n}\n\n//in ArduinoDriver.cpp\nvoid ArduinoDriver::communicationCOBS(const PacketSerial&amp; sender, const uint8_t* buffer, size_t size)\n{ ... }\n\n//in PacketSerial.h\ntypedef void (*PacketHandlerFunction)(const uint8_t* buffer, size_t size);\nvoid setPacketHandler(PacketHandlerFunction onPacketFunction)\n{ ... }\n\n\n</code></pre>\n\n<p>When I move the 2 PacketSerial functions into arDriver::setup(), I get the following;\n(after solving an error that I need to capture [this])</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void ArduinoDriver::setup()\n{\n  ...\n  myPacketSerial.begin(115200);\n  myPacketSerial.setPacketHandler([this](const uint8_t* buffer, size_t size)\n    {\n        communicationCOBS(myPacketSerial, buffer, size);\n    });\n}\n</code></pre>\n\n<p>Now I get following error which I can't solve;</p>\n\n<hr>\n\n<p>Error (active)  E0304   no instance of overloaded function \"PacketSerial_::setPacketHandler [with EncoderType=COBS, PacketMarker=(uint8_t)'\\000', ReceiveBufferSize=256U]\" matches the argument list\nargument types are: (lambda []void (const uint8_t *buffer, size_t size) -> void)\nobject type is: PacketSerial</p>\n\n<hr>\n\n<p>I found several posts and questions about similar problems, but lack the skill or knowledge to implement these in my particular application.\nBelow is what I think is the most promising, but so far, I couldn't make it work..\nI prefer not to use a solution based on std::function</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// from: https://bannalia.blogspot.com/2016/07/passing-capturing-c-lambda-functions-as.html\n\nvoid do_something(void(*callback)(void*),void* callback_arg)\n{\n  ...\n  callback(callback_arg);\n}\n\nint num_callbacks=0;\n...\nauto callback=[&amp;](){\n  std::cout&lt;&lt;\"callback called \"&lt;&lt;++num_callbacks&lt;&lt;\" times \\n\";\n};\nauto thunk=[](void* arg){ // note thunk is captureless\n  (*static_cast&lt;decltype(callback)*&gt;(arg))();\n};\ndo_something(thunk,&amp;callback);\n\noutput: callback called 1 times\n\n</code></pre>\n"}, {"tags": ["c++", "c++11", "random", "cross-platform"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1565785160, "post_id": 57494539, "comment_id": 101458736, "body": "You can always code your own distribution, or an entire pseudo-random generator from scratch, that would be consistent across your platforms. For something as meaningless as a mobile game, I doubt that the mathematical qualities of pseudo-random number generation are very important."}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1565785472, "post_id": 57494539, "comment_id": 101458881, "body": "@SamVarshavchik thanks, I agree with you that one more mobile game with not big ranges of required numbers doesn&#39;t need high mathematical quality."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1565785671, "post_id": 57494539, "comment_id": 101458976, "body": "related/maybe dupe: <a href=\"https://stackoverflow.com/q/38367976/4342498\">stackoverflow.com/q/38367976/4342498</a>"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 1, "creation_date": 1565786910, "post_id": 57494569, "comment_id": 101459671, "body": "@UmNyobe: <a href=\"http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/ARTICLES/mt.pdf\" rel=\"nofollow noreferrer\">math.sci.hiroshima-u.ac.jp/~m-mat/MT/ARTICLES/mt.pdf</a> for the generator along with the standard for the specification of the implementation. For <code>std::uniform_int_distribution</code> see the standard again; the transformation function is not specified. <a href=\"https://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">en.cppreference.com/w</a> is an adequate proxy for the standard, and it&#39;s free."}, {"owner": {"reputation": 313, "user_id": 4059001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dc4ca4a934730700e61b41289148d2?s=128&d=identicon&r=PG&f=1", "display_name": "user515430", "link": "https://stackoverflow.com/users/4059001/user515430"}, "edited": false, "score": 0, "creation_date": 1565795454, "post_id": 57494569, "comment_id": 101464623, "body": "The paper mentioned by @Bathsheba specifies the state transitions. It does not specify the seeding used in the C++ Standard."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1565785220, "creation_date": 1565785220, "answer_id": 57494569, "question_id": 57494539, "link": "https://stackoverflow.com/questions/57494539/can-i-use-a-random-generator-without-specifying-a-number-distribution/57494569#57494569", "title": "Can I use a random generator without specifying a number distribution?", "body": "<p>The random number <em>generator</em> <code>std::mt19937</code> will generate the same values for any platform, but alas the standard allows <code>std::uniform_int_distribution</code> to be flexible.</p>\n\n<p>So you need to do the transformation yourself alas.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1565786194, "post_id": 57494624, "comment_id": 101459255, "body": "@rustyx; You have to be very rich."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 6, "last_activity_date": 1565785691, "last_edit_date": 1565785691, "creation_date": 1565785445, "answer_id": 57494624, "question_id": 57494539, "link": "https://stackoverflow.com/questions/57494539/can-i-use-a-random-generator-without-specifying-a-number-distribution/57494624#57494624", "title": "Can I use a random generator without specifying a number distribution?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine\" rel=\"noreferrer\"><code>std::mt19937</code></a> produces uniform random numbers in the range [0, 2<sup>32</sup>-1]. It implements the <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"noreferrer\">Mersenne Twister</a> alrogithm and is guaranteed to provide reproducible results across implementations.</p>\n\n<p>If you need a different range, you need to somehow reduce [0, 2<sup>32</sup>-1] to your desired range. <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"noreferrer\"><code>std::uniform_int_distribution</code></a> is a convenience tool for doing that (but provides no guarantee of portability across implementations).</p>\n"}], "owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57494624, "answer_count": 2, "score": 3, "last_activity_date": 1565785691, "creation_date": 1565785044, "last_edit_date": 1565785376, "question_id": 57494539, "link": "https://stackoverflow.com/questions/57494539/can-i-use-a-random-generator-without-specifying-a-number-distribution", "title": "Can I use a random generator without specifying a number distribution?", "body": "<p>I'm working on a mobile game, and I needed to create a possibility to play the same level in an absolutely same way. This sounded easy because I knew about a seed for a random generator, which should be the same for this purpose.</p>\n\n<p>The problem arised later, when I used <code>std::mt19937</code> together with <code>std::uniform_int_distribution</code> as it was in many tutorials. As it was noticed in another question <a href=\"https://stackoverflow.com/questions/34903356/c11-random-number-distributions-are-not-consistent-across-platforms-what-al\">here</a> , random number distributions aren't consistent between platforms, while the engine is consistent (how can it be differenent, if it is based on a mathematical algorithm?).</p>\n\n<p>I didn't pay much attention at this problem and just used <code>std::mt19937</code> without a distribution.</p>\n\n<p>Is it a correct way of usage, if there is no particular requirements on number distribution?</p>\n"}, {"tags": ["c++", "xcode", "memory-leaks", "sdl", "instruments"], "comments": [{"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1565785260, "post_id": 57494515, "comment_id": 101458782, "body": "<code>I&#39;m using...Xcode</code> Well there&#39;s your problem. :P"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1565788185, "post_id": 57494515, "comment_id": 101460395, "body": "You didn&#39;t flush your renderer with <code>SDL_RenderPresent</code>. It is possible that underlying renderer implementation (e.g. opengl) records every <code>RenderClear</code> into command buffer but flush never happens and buffer grows. As for leaks, can your instruments provide information where it was allocated or stacktrace?"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1565789173, "post_id": 57494515, "comment_id": 101461026, "body": "@keltar Thanks for your trick, now the memory doesn&#39;t keep growing. I don&#39;t really know what this memory stuff means, do you have Xcode? Because if you have, I can send you a save from Instruments."}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "edited": false, "score": 0, "creation_date": 1565790106, "post_id": 57495508, "comment_id": 101461583, "body": "I&#39;m using SDL 2.0.10, I downloaded that version two days ago. I don&#39;t know what you mean in your first sentence. I showed the whole source code. Also I don&#39;t know why you can&#39;t reproduce the leaks, I could.   Strangely all leaks disappear if I render something. Do you know why. And when using OpenGL I can&#39;t render something using the SDL functions. Do you know what to do there?"}], "tags": [], "owner": {"reputation": 141, "user_id": 5618998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61f2887403d0ab5a3330a32cf413b51?s=128&d=identicon&r=PG", "display_name": "Wohlstand", "link": "https://stackoverflow.com/users/5618998/wohlstand"}, "is_accepted": true, "score": 2, "last_activity_date": 1565788516, "creation_date": 1565788516, "answer_id": 57495508, "question_id": 57494515, "link": "https://stackoverflow.com/questions/57494515/has-sdl2-a-memory-leak/57495508#57495508", "title": "Has SDL2 a memory leak?", "body": "<p>It's possible some mistake where you didn't remove a certain object, or you are re-creating it in a loop. SDL2 itself shouldn't have any memory leaks. However, I highly recommend you to use the freshest version (2.0.10 on this moment is). Please try to draw something in your demo program to verify here is no any memory leaks. Try to repeat a small part of your project's code to render similar. This code doesn't anything and can't reproduce your issue. However, if you have found here is a real memory leak on SDL2 side, please submit a report here <a href=\"https://bugzilla.libsdl.org/\" rel=\"nofollow noreferrer\">https://bugzilla.libsdl.org/</a>. Before that, please pull most fresh sources from official Mercurial repository <a href=\"https://hg.libsdl.org/SDL/\" rel=\"nofollow noreferrer\">https://hg.libsdl.org/SDL/</a> and retry your test to confirm that bug is still presented in the mainstream.</p>\n"}], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 57495508, "answer_count": 1, "score": 0, "last_activity_date": 1565789417, "creation_date": 1565784953, "last_edit_date": 1565789417, "question_id": 57494515, "link": "https://stackoverflow.com/questions/57494515/has-sdl2-a-memory-leak", "title": "Has SDL2 a memory leak?", "body": "<p>I noticed that all of my projects that use SDL2 have memory leaks, so I have written a little test program that looks like this:</p>\n\n<pre><code>SDL_Init(SDL_INIT_VIDEO);\nSDL_Window *win = SDL_CreateWindow(\"\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 100, 100, SDL_WINDOW_RESIZABLE);\nSDL_Renderer *ren = SDL_CreateRenderer(win, 0, 0);\n\nbool running = true;\nSDL_Event event;\nwhile (running) {\n    while(SDL_PollEvent(&amp;event) != 0) {\n        if(event.type == SDL_QUIT) {\n            running = false;\n        }\n    }\n\n    SDL_RenderClear(ren);\n    SDL_RenderPresent(ren); //Thanks to keltar \n}\nSDL_DestroyRenderer(ren);\nSDL_DestroyWindow(win);\nSDL_Quit();\n</code></pre>\n\n<p>I haven't noticed anything that could produce a leak here. </p>\n\n<p>I'm using Instruments, from Xcode, to detect the leaks. The first ten seconds there are no leaks. In the next ten seconds about 15 leaks are created. This will continue less intense up to 40 seconds after the  program has started. From 40 seconds on no new leaks are created, but the allocated memory still grows constantly. Edit: The memory no longer grows, when I use SDL_RenderPresent.</p>\n\n<p>So has SDL2 a memory leak, did I make a mistake in the code or is Instruments creating some false positives?</p>\n"}, {"tags": ["android", "c++", "x86", "arm", "centrifuge"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1565784763, "post_id": 57494416, "comment_id": 101458558, "body": "is <i>&quot;...couldn&#39;t find &quot;libgojni.so&quot;...&quot;</i> in your APK? And build for 64-bit Arm?"}, {"owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1565784804, "post_id": 57494416, "comment_id": 101458577, "body": "@RichardCritten ?"}, {"owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1565785194, "post_id": 57494416, "comment_id": 101458756, "body": "@RichardCritten yes in my APK, but this error happens only in arm system."}], "owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565785413, "creation_date": 1565784560, "last_edit_date": 1565785413, "question_id": 57494416, "link": "https://stackoverflow.com/questions/57494416/fatal-exception-java-lang-unsatisfiedlinkerror-centrifuge-android", "title": "Fatal Exception: java.lang.UnsatisfiedLinkError centrifuge-android", "body": "<p>We use centrifuge lib to communicate with Sockets. Everything works well but \nthis code : </p>\n\n<pre><code>val credentials = Centrifuge.newCredentials(\n            getCurrentUserId(),\n            webSocketToken.timestamp,\n            EMPTY_STRING,\n            webSocketToken.token\n    )\n</code></pre>\n\n<p>throws this error, it only happens with android based on arm structure. Here is the output:</p>\n\n<pre><code>Fatal Exception: java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file \"/system/framework/org.apache.http.legacy.boot.jar\", zip file \"/data/app/com.namba-_dbpnhlp0R3PyG4erhR_2w==/base.apk\"],nativeLibraryDirectories=[/data/app/com.namba-_dbpnhlp0R3PyG4erhR_2w==/lib/arm64, /system/lib64, /vendor/lib64]]] couldn't find \"libgojni.so\"\n   at java.lang.Runtime.loadLibrary0 + 1012(Runtime.java:1012)\n   at java.lang.System.loadLibrary + 1669(System.java:1669)\n   at go.LoadJNI.&lt;clinit&gt; + 23(LoadJNI.java:23)\n   at java.lang.Class.classForName(Class.java)\n   at java.lang.Class.forName + 453(Class.java:453)\n   at java.lang.Class.forName + 378(Class.java:378)\n   at go.Seq.&lt;clinit&gt; + 28(Seq.java:28)\n   at go.Seq.touch()\n   at centrifuge.Centrifuge.&lt;clinit&gt; + 11(Centrifuge.java:11)\n   at centrifuge.Centrifuge.newCredentials(Centrifuge.java)\n   at com.namba.websocket.CentrifugoWebSocketClient.createClient + 214(CentrifugoWebSocketClient.kt:214)\n   at com.namba.websocket.CentrifugoWebSocketClient$initClient$1.invokeSuspend + 145(CentrifugoWebSocketClient.kt:145)\n   at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith + 32(ContinuationImpl.kt:32)\n   at kotlinx.coroutines.DispatchedTask$DefaultImpls.run + 235(Dispatched.kt:235)\n   at kotlinx.coroutines.DispatchedContinuation.run + 81(Dispatched.kt:81)\n   at kotlinx.coroutines.scheduling.Task.run + 94(Tasks.kt:94)\n   at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely + 586(CoroutineScheduler.kt:586)\n   at kotlinx.coroutines.scheduling.CoroutineScheduler.access$runSafely + 60(CoroutineScheduler.kt:60)\n   at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run + 732(CoroutineScheduler.kt:732)\n</code></pre>\n"}, {"tags": ["c++", "libcurl", "put"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565784286, "post_id": 57494291, "comment_id": 101458321, "body": "What about using <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">raw string literals</a>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1565785082, "post_id": 57494291, "comment_id": 101458706, "body": "<code>curl_easy_setopt(curl, CURLOPT_POSTFIELDS, send);</code> -- Where do you initialize the <code>send</code> pointer?"}, {"owner": {"reputation": 1, "user_id": 11819831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b59f42fcef15b25ca54a2efce1319c8f?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Roach", "link": "https://stackoverflow.com/users/11819831/richard-roach"}, "edited": false, "score": 0, "creation_date": 1565786566, "post_id": 57494291, "comment_id": 101459466, "body": "I pass &#39;send&#39; to the function as a string (for the sake of concatenate) then convert to char. If I print &#39;send&#39; as a char and then copy and paste the output into the first example then everything works the way that is is supposed to."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1565786849, "post_id": 57494291, "comment_id": 101459627, "body": "When you <code>CURLOPT_POSTFIELDS</code>, <code>curl_easy_setopt</code> does not copy the argument, so you need to make sure that the pointer stays valid until you&#39;re done. You can use <code>CURLOPT_COPYPOSTFIELDS</code> instead, but that has some other caveats. Read the documentation thoroughly."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1565808786, "post_id": 57494291, "comment_id": 101470386, "body": "<code>std::string send = &quot;{\\&quot;var\\&quot;:\\&quot;info\\&quot;}&quot;; curl_easy_setopt(curl, CURLOPT_POSTFIELDS, send.c_str());</code> Just make sure <code>send</code> stays in scope, and is not modified, until <code>curl_easy_perform()</code> is done."}], "owner": {"reputation": 1, "user_id": 11819831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b59f42fcef15b25ca54a2efce1319c8f?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Roach", "link": "https://stackoverflow.com/users/11819831/richard-roach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565786767, "creation_date": 1565784024, "question_id": 57494291, "link": "https://stackoverflow.com/questions/57494291/char-escape-are-being-lost-in-libcurls-postfield", "title": "char* escape &quot;\\&quot; are being lost in libcurl&#39;s POSTFIELD", "body": "<p>I have two examples of using POSTFIELDS - the first works fine and the second does not</p>\n\n<p>I am not sure if this is down to libcurl or the compiler removing the escape \"\\\" from the character 'send'.</p>\n\n<p>if I make 'send' an std::string rather that a char* then I get a bad request error saying \"unexpected token in Json\" </p>\n\n<p>this is a comparison of how I am using POSTFIELDS</p>\n\n<pre><code>char* send;\ncurl_easy_setopt(curl, CURLOPT_POSTFIELDS, \"{\\\"var\\\":\\\"info\\\"}\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_POSTFIELDS, send);\n</code></pre>\n\n<p>I get a 500 error that shows as </p>\n\n<pre><code>Unhandled error in PUT /random/page 500 AssertionError [ERR_ASSERTION]: The data argument must be an object\n</code></pre>\n\n<p>There is also problem with the output from libcurl</p>\n\n<pre><code>&gt; PUT /random/page HTTP/1.1\nHost: 127.0.0.1:3000\nAccept: application/json\nContent-Type: application/json\ncharsets: utf-8\nContent-Length: 364\n\n* upload completely sent off: 364 out of 364 bytes\n&lt; HTTP/1.1 500 Internal Server Error\n&lt; X-Powered-By: Express\n&lt; Access-Control-Allow-Origin: *\n&lt; Access-Control-Allow-Credentials: true\n&lt; X-Content-Type-Options: nosniff\n&lt; Content-Type: application/json; charset=utf-8\n&lt; Date: Wed, 14 Aug 2019 11:30:55 GMT\n&lt; Connection: keep-alive\n&lt; Content-Length: 62\n</code></pre>\n\n<p>The content length at the bottom does not match the request</p>\n"}, {"tags": ["c++", "list", "function", "singly-linked-list", "definition"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1565783855, "post_id": 57494191, "comment_id": 101458120, "body": "In the C++ Standard Library there are numerous list-like containers, so you don&#39;t need to implement those yourself."}, {"owner": {"reputation": 1269, "user_id": 3294286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o9tJ2.jpg?s=128&g=1", "display_name": "Sebastian D&#39;Agostino", "link": "https://stackoverflow.com/users/3294286/sebastian-dagostino"}, "edited": false, "score": 1, "creation_date": 1565784030, "post_id": 57494191, "comment_id": 101458208, "body": "Try debuggind the code"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1565784084, "post_id": 57494191, "comment_id": 101458235, "body": "Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including minimal input (if any) as well as actual and expected output The problem might be elsewhere than in the <code>deleteAtIndex</code> function."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1565785609, "post_id": 57494191, "comment_id": 101458944, "body": "There is a problem when you try to delete the <i>last</i> node of the list. Take a piece of paper and a pencil and draw a linked list containing for example 2 elements. You should be able to figure out why deleting the last element of the list won&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1565789415, "last_edit_date": 1565789415, "creation_date": 1565784488, "answer_id": 57494396, "question_id": 57494191, "link": "https://stackoverflow.com/questions/57494191/the-output-screen-goes-blank/57494396#57494396", "title": "The output screen goes blank", "body": "<p>For starters the function does not make sense because it deletes nothing. In fact it tries to exclude a node from the list.</p>\n\n<p>However the function has undefined behavior.</p>\n\n<p>Let's assume that <code>start</code> is equal to <code>NULL</code> and <code>index</code> is also equal to <code>0</code>. In this case due to these statements</p>\n\n<pre><code>if(index == 0){\n        current =start;\n    start = current-&gt;next;\n            ^^^^^^^^^^^^^\n}\n</code></pre>\n\n<p>there is an access to the memory using a null-pointer.</p>\n\n<p>Now let's assume that the <code>start</code> is not equal to <code>NULL</code> and it is the only node in the list. And <code>index</code> is equal to <code>1</code>.</p>\n\n<p>In this case <code>x</code> will be equal to <code>1</code>. And due to these statements</p>\n\n<pre><code>else if(index &gt;0 &amp;&amp; index &lt;=x ){\n    current =start;\n    for(i=0; i&lt;index-1; i++){\n        current = current -&gt;next;\n    }\n    current-&gt;next= current-&gt;next-&gt;next;\n                   ^^^^^^^^^^^^^^^^^^^^\n}\n</code></pre>\n\n<p>again there is an access to memory using a null-pointer.</p>\n\n<p>So the function is entirely wrong.</p>\n\n<p>Pay attention to that the function parameter should have an unsigned integer type. The most appropriate type is <code>size_t</code>.</p>\n\n<p>And if there is a function that uses a method by accessing a node by index then the list should keep the number of nodes in it.</p>\n\n<p>If the program is indeed written as a C++ program then the function can look the following way as it is shown in the simplified demonstrative program below. Investigate it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass List\n{\npublic:\n    explicit List() = default;\n\n    List( const List &amp; ) = delete;\n    List &amp; operator =( const List &amp; ) = delete;\n\n    void push_front( int value )\n    {\n        head = new Node { value, head };\n    }\n\n    std::ostream &amp; out( std::ostream &amp;os = std::cout ) const\n    {\n        for ( Node *current = head; current != nullptr; current = current-&gt;next )\n        {\n            os &lt;&lt; current-&gt;value &lt;&lt; \" -&gt; \";\n        }\n        os &lt;&lt; \"nullptr\";\n\n        return os;\n    }\n\n    bool deleteAtIndex( size_t n )\n    {\n        Node **current = &amp;head;\n\n        while ( *current != nullptr &amp;&amp; n )\n        {\n            current = &amp;( *current )-&gt;next;\n            --n;\n        }\n\n        bool success = *current != nullptr;\n\n        if ( success )\n        {\n            Node *tmp = *current;\n            *current = ( *current )-&gt;next;\n            delete tmp;\n        }\n\n        return success;\n    }\n\nprotected:\n    struct Node\n    {\n        int value;\n        Node *next;\n    } *head = nullptr;\n};\n\nstd::ostream &amp; operator &lt;&lt;( std::ostream &amp;os, const List &amp;lst )\n{\n    return lst.out( os );\n}\n\nint main() \n{\n    const size_t N = 10;\n\n    List lst;\n\n    for ( size_t i = N; i != 0; --i ) lst.push_front( int( i - 1 ) );\n\n    std::cout &lt;&lt; lst &lt;&lt; '\\n';\n\n    std::cout &lt;&lt; '\\n';\n\n    for ( size_t i = N; i != 0; --i ) \n    {\n        lst.deleteAtIndex( i - 1 );\n        std::cout &lt;&lt; lst &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; 8 -&gt; 9 -&gt; nullptr\n\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; 8 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; nullptr\n0 -&gt; 1 -&gt; 2 -&gt; nullptr\n0 -&gt; 1 -&gt; nullptr\n0 -&gt; nullptr\nnullptr\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11523128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-87xORgi-LKo/AAAAAAAAAAI/AAAAAAAABOk/B8T2h3arFlI/photo.jpg?sz=128", "display_name": "Gurpartap Singh", "link": "https://stackoverflow.com/users/11523128/gurpartap-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1565789415, "creation_date": 1565783630, "last_edit_date": 1565785394, "question_id": 57494191, "link": "https://stackoverflow.com/questions/57494191/the-output-screen-goes-blank", "title": "The output screen goes blank", "body": "<p>I wrote this code while studying linked lists on leetcode. In this problem, at the end, where deleteAtIndex function is called with index 6, the screen goes blank. It is working for all other values where the index is valid. But for invalid values of the index, there is no output.</p>\n\n<pre><code>/*Delete the index-th node in the linked list, if the index is valid.\nBelow is the function I wrote.*/\n\nvoid deleteAtIndex(int index) {\n\n    Node* current =start;\n    int x=0;\n    int i;\n\n    while(current != NULL){\n        x++;\n        current = current-&gt;next;\n    }\n\n    if(index == 0){\n            current =start;\n        start = current-&gt;next;\n    }\n    else if(index &gt;0 &amp;&amp; index &lt;=x ){\n        current =start;\n        for(i=0; i&lt;index-1; i++){\n            current = current -&gt;next;\n        }\n        current-&gt;next= current-&gt;next-&gt;next;\n    }\n\n\n    if (index &gt; x || index &lt; 0) {\n        cout &lt;&lt; \"Invalid Index\" &lt;&lt; endl;\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565782955, "post_id": 57494000, "comment_id": 101457677, "body": "Simply use <code>cin &gt;&gt; key;</code>"}, {"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1565782997, "post_id": 57494000, "comment_id": 101457695, "body": "Do you have a question?"}, {"owner": {"reputation": 157, "user_id": 11838178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2368282243265007/picture?type=large", "display_name": "Farooq Seedat", "link": "https://stackoverflow.com/users/11838178/farooq-seedat"}, "edited": false, "score": 0, "creation_date": 1565783051, "post_id": 57494000, "comment_id": 101457733, "body": "&gt;&gt; this operator ignores white spaces so the program dont terminates ."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565783164, "post_id": 57494000, "comment_id": 101457780, "body": "&quot;&gt;&gt; this operator ignores white spaces so the program dont terminates&quot; not clear what you mean. Please include a complete example and report the input and output in the question. <code>std::cin &lt;&lt;</code> should do exactly what you want"}, {"owner": {"reputation": 157, "user_id": 11838178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2368282243265007/picture?type=large", "display_name": "Farooq Seedat", "link": "https://stackoverflow.com/users/11838178/farooq-seedat"}, "edited": false, "score": 0, "creation_date": 1565783253, "post_id": 57494000, "comment_id": 101457808, "body": "i want to stop taking input if user dont enter any string and just press enter"}, {"owner": {"reputation": 1269, "user_id": 3294286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o9tJ2.jpg?s=128&g=1", "display_name": "Sebastian D&#39;Agostino", "link": "https://stackoverflow.com/users/3294286/sebastian-dagostino"}, "edited": false, "score": 0, "creation_date": 1565784279, "post_id": 57494000, "comment_id": 101458316, "body": "Please, add intput, output and expected output to know what&#39;s going on and what you expect to achieve. The code seems correct unless you specify what&#39;s your problem."}], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 11517034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207b5cb0a1b0906eb6163af3b999a580?s=128&d=identicon&r=PG&f=1", "display_name": "gimme_danger", "link": "https://stackoverflow.com/users/11517034/gimme-danger"}, "is_accepted": false, "score": 1, "last_activity_date": 1565787249, "last_edit_date": 1565787249, "creation_date": 1565786568, "answer_id": 57494951, "question_id": 57494000, "link": "https://stackoverflow.com/questions/57494000/teminate-string-input-on-white-space/57494951#57494951", "title": "Teminate String Input on white space", "body": "<p>Firstly, you can use <code>std::getline()</code> with default delimiter (<code>\\n</code>) to get the last line from console and check if it is empty (enter has been pressed). When pass this line to <code>std::stringstream</code> and parse it with another <code>std::getline()</code> with whitespace delimiter.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n...\nfor (std::string line; std::getline(std::cin, line) &amp;&amp; !line.empty();)\n  {\n    for (std::stringstream ss(line); getline(ss, line, ' ');)\n      std::cout &lt;&lt; \"Current word: \" &lt;&lt; line &lt;&lt; std::endl;\n  }\nstd::cout &lt;&lt; \"Empty input occurred, reading was finished \" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Input/output example:</p>\n\n<pre><code>hello\nCurrent word: hello\n\nhello world\nCurrent word: hello\nCurrent word: world\n\nhello long string...\nCurrent word: hello\nCurrent word: long\nCurrent word: string...\n\nEmpty input occurred, reading was finished \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 11838178, "user_type": "registered", "profile_image": "https://graph.facebook.com/2368282243265007/picture?type=large", "display_name": "Farooq Seedat", "link": "https://stackoverflow.com/users/11838178/farooq-seedat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1565800707, "answer_count": 1, "score": -1, "last_activity_date": 1565787249, "creation_date": 1565782907, "last_edit_date": 1565783191, "question_id": 57494000, "link": "https://stackoverflow.com/questions/57494000/teminate-string-input-on-white-space", "closed_reason": "Not suitable for this site", "title": "Teminate String Input on white space", "body": "<p>I have a situation where i have to read string from console until a white space occurs. OR stop taking input if user dont enter the string and just press enter. i tried the following code but it dont stop taking input on enter</p>\n\n<pre><code>    getline(cin, key, ' ');\nwhile (!key.empty() )\n{\n     getline(cin, key, ' ');\n  //do some work\n }\n</code></pre>\n"}, {"tags": ["c++", "z3", "bitvector"], "answers": [{"tags": [], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "is_accepted": true, "score": 1, "last_activity_date": 1565787803, "last_edit_date": 1592644375, "creation_date": 1565787803, "answer_id": 57495304, "question_id": 57493819, "link": "https://stackoverflow.com/questions/57493819/why-doesnt-z3-bitvec-object-have-runtime-size-info/57495304#57495304", "title": "Why doesn&#39;t Z3 BitVec object have runtime size info?", "body": "<p>You can surely query the <code>sort</code> of every z3 AST term, and then get the size for <code>bv</code>s; so, yes, they do carry size information along with pretty much everything you need to know.</p>\n<p>The relevant calls are:</p>\n<ul>\n<li><a href=\"https://z3prover.github.io/api/html/classz3_1_1expr.html#a527131da05acd3775a8e3fac627e25ec\" rel=\"nofollow noreferrer\">get_sort</a></li>\n<li><a href=\"https://z3prover.github.io/api/html/z3_09_09_8h_source.html#l00594\" rel=\"nofollow noreferrer\">bv_size</a></li>\n</ul>\n<p>The API documentation has myriad other calls for scrutinizing different parts of terms, see <a href=\"https://z3prover.github.io/api/html/namespacez3.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 118, "user_id": 8873970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XKjPdJ1kaW8/AAAAAAAAAAI/AAAAAAAAFS4/i4XoiAlc_Y0/photo.jpg?sz=128", "display_name": "Alperen Kele\u015f", "link": "https://stackoverflow.com/users/8873970/alperen-kele%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1565803066, "accepted_answer_id": 57495304, "answer_count": 1, "score": 0, "last_activity_date": 1565787803, "creation_date": 1565782162, "question_id": 57493819, "link": "https://stackoverflow.com/questions/57493819/why-doesnt-z3-bitvec-object-have-runtime-size-info", "closed_reason": "Needs details or clarity", "title": "Why doesn&#39;t Z3 BitVec object have runtime size info?", "body": "<p>I'm working with different sizes of Z3 bitvecs and I was working on a way to ease the workload. I'm going to get the info from an object before z3 expression was created so it's not actually a vital problem but I wondered why z3 bitvecs doesn't carry runtime size information.</p>\n"}, {"tags": ["c++", "inheritance", "memory", "memory-management"], "comments": [{"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1565781426, "post_id": 57493570, "comment_id": 101456951, "body": "I would guess this is not guaranteed, but just implementation coincidence, but I know only about 1% of the standard, so this is just <i>guess</i>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1565781817, "post_id": 57493570, "comment_id": 101457153, "body": "<i>&quot;...Each direct and indirect base class is present, as base class subobject, within the object representation of the derived class <b>at implementation-defined offset</b>....&quot;</i> source: <a href=\"https://en.cppreference.com/w/cpp/language/derived_class\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/derived_class</a>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1565782109, "post_id": 57493570, "comment_id": 101457298, "body": "In general, the answer would be &quot;no&quot;.   The order in which base classes are allocated within a derived class is unspecified.   This means, among other things, that if we have a class <code>A</code> that is a base of class <code>B</code>, then the &quot;<code>A</code> part&quot; and the &quot;<code>B</code> part&quot; may have different addresses in memory."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1565782325, "post_id": 57493685, "comment_id": 101457396, "body": "...possibly. Depending on the compiler."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1565788785, "post_id": 57493685, "comment_id": 101460775, "body": "Good point, thank you! But what if Derived does not add any new virtual functions, just overrides those declared in Base? Is such scenario possible in this case?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1565789816, "post_id": 57493685, "comment_id": 101461419, "body": "@Taras I&#39;ve added some reference listing situations when this behavior is guaranteed. rules about base classes are listed in <code>(4.3)</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1565790433, "post_id": 57493685, "comment_id": 101461792, "body": "Perhaps emphasise the impact of standard layoutness on this as that&#39;s where <code>virtual</code> disqualifies your example"}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1565791575, "post_id": 57493685, "comment_id": 101462446, "body": "Thanks. Yes, I understand that a class with virtual functions is not a standard-layout type, so the standard cannot give a <b>guarantee</b> per se. But still, If both <code>Base</code> and <code>Derived</code> have the same virtual functions (<code>Derived</code> does not add any new ones) -- is such situation with a non-zero offset possible <i>in practice</i>? If it is, on which platforms/compilers? Updated the question."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 5, "last_activity_date": 1565790511, "last_edit_date": 1565790511, "creation_date": 1565781603, "answer_id": 57493685, "question_id": 57493570, "link": "https://stackoverflow.com/questions/57493570/does-c-guarantee-that-the-address-of-a-base-subobject-will-be-the-same-as-the/57493685#57493685", "title": "Does C++ guarantee that the address of a Base subobject will be the same as the address of its Derived object in case of single inheritance?", "body": "<p>Property of the pointers to different objects to have the same value is called <em>pointer-interconvertible</em>. The standard lists all possible cases when this is guaranteed:</p>\n\n<blockquote>\n  <p><strong>6.7.2 Compound types [basic.compound]</strong><br>\n  <strong>4</strong> Two objects <code>a</code> and <code>b</code> are pointer-interconvertible if:<br>\n  (4.1) they are the same object, or<br>\n  (4.2) one is a union object and the other is a non-static data member of that object (12.3), or<br>\n  (4.3) one is a standard-layout class object and the other is the first non-static data member of that object, or, if the object has no non-static data members, the first base class subobject of that object (12.2), or<br>\n  (4.4) there exists an object <code>c</code> such that <code>a</code> and <code>c</code> are pointer-interconvertible, and <code>c</code> and <code>b</code> are pointer-interconvertible.<br>\n  <br>\n  If two objects are pointer-interconvertible, then they have the same address, and it is possible to obtain a pointer to one from a pointer to the other via a <code>reinterpret_cast</code> (8.5.1.10). [Note: An array object and its first element are not pointer-interconvertible, even though they have the same address. \u2014end note ]</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>struct Base{};\n\nstruct Derived : Base\n{\n    virtual void Foo() { }\n};\n</code></pre>\n\n<p>offset will be 8 (on typical 64-bit platform) for extra vtable pointer added by <code>Derived</code> infront of Base class subobject.</p>\n"}], "owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1565791056, "creation_date": 1565781088, "last_edit_date": 1565791056, "question_id": 57493570, "link": "https://stackoverflow.com/questions/57493570/does-c-guarantee-that-the-address-of-a-base-subobject-will-be-the-same-as-the", "title": "Does C++ guarantee that the address of a Base subobject will be the same as the address of its Derived object in case of single inheritance?", "body": "<p>Here is a piece of code:</p>\n\n<pre><code>struct Base\n{\n    virtual void Foo() = 0;\n    virtual ~Base() { }\n};\n\nstruct Derived : Base\n{\n    virtual void Foo() override { }\n    unsigned long long some_new_data_members[42];\n};\n\nint test_offset()\n{\n    Derived object{};\n    Base* base_subobject = &amp;object;\n\n    return reinterpret_cast&lt;unsigned char*&gt;(base_subobject) - reinterpret_cast&lt;unsigned char*&gt;(&amp;object);\n}\n</code></pre>\n\n<p>The function <code>test_offset</code> always returns 0 on all versions of gcc, clang and msvc compilers that I have checked.</p>\n\n<p>My question is: does the C++ standard guarantee that this function will be <em>always</em> returning 0 <strong>in case of single inheritance</strong> between <code>Base</code> and <code>Derived</code>?\nIf it does not, can somebody provide a real-life example (maybe with some exotic platform) where this code will return something different from 0?</p>\n\n<p><em>Please do not answer about multiple inheritance!</em></p>\n\n<hr>\n\n<p><em>upd.:</em></p>\n\n<p>As pointed out by user <em>VTT</em>, code like this can lead to a non-zero offset:</p>\n\n<pre><code>struct Base\n{\n};\n\nstruct Derived : Base\n{\n    virtual void Foo() { }\n};\n</code></pre>\n\n<p>It yields an offset equal to the size of a pointer on msvc.</p>\n\n<p>But the fundamental difference of this example from my code snippet is that the <code>Derived</code> class here introduces some new virtual functions. Thus, a new vtable pointer has to appear somewhere in <code>Derived</code>, and it might be placed before the <code>Base</code> subobject, giving us a non-zero offset.</p>\n\n<p>So, now I want to ask more specifically about my scenario.\nWhat if the <code>Base</code> class has already had some virtual functions, and <code>Derived</code> just overrides them without adding any new ones (although it might add some new non-static member fields).\nAre such non-zero offsets possible in this particular case?</p>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1565786090, "post_id": 57493450, "comment_id": 101459204, "body": "I think that you redesign your code as it is half encapsulated. You hide memory management but not the fact that you have an array. At least, using <code>std::vector</code> instead of C style array, you would get <code>size</code>, iterators and more."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1565786184, "post_id": 57493450, "comment_id": 101459250, "body": "Another problem with your code is that it does not follows the rule of 5. For example, copy construction of <code>A</code> will lead to disaster."}, {"owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1565786771, "post_id": 57493450, "comment_id": 101459589, "body": "@Phil1970 I agree, but adding the required copy constructor would not change the question."}], "answers": [{"tags": [], "owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "is_accepted": false, "score": 0, "last_activity_date": 1565781031, "creation_date": 1565781031, "answer_id": 57493555, "question_id": 57493450, "link": "https://stackoverflow.com/questions/57493450/implicit-conversion-to-const-of-dynamically-allocated-arrays/57493555#57493555", "title": "Implicit conversion to const of dynamically allocated arrays", "body": "<p><code>conf()</code> returns a pointer (<code>std::array&lt;T, N&gt; const*</code>). Thus <code>auto x = a.conf();</code> deduces the type of x to be a const pointer <code>std::array&lt;T, N&gt; const*</code>. The address/pointer is copied by value (typically copy 4byte/8byte address depending on your system). No c'tor is called.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565784499, "post_id": 57493707, "comment_id": 101458427, "body": "I would be careful about &quot;proving&quot; things using (optimized) assembly. You have to hide the right things from the compiler (e.g. the constructor body here) or look at the unoptimized code. Even then you can never be sure about compiler bugs (this is of course a very trivial case). Still, good answer!"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565786632, "post_id": 57493707, "comment_id": 101459506, "body": "Yeah, you&#39;re right. Actually, I&#39;ve inspected the unoptimized assembly as well. Of course, there was no copy-constructor call. However, I didn&#39;t report it because the unoptimized assemble version is too long in the scope of this simple question/answer. I think the real problem is the meaning of <code>proof</code>. There is no point in proving something referring to the implementation (compiler). The real proof can only be lead by the standard. I am going to update the section with a more appropriate title, thanks."}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": true, "score": 3, "last_activity_date": 1565786671, "last_edit_date": 1565786671, "creation_date": 1565781697, "answer_id": 57493707, "question_id": 57493450, "link": "https://stackoverflow.com/questions/57493450/implicit-conversion-to-const-of-dynamically-allocated-arrays/57493707#57493707", "title": "Implicit conversion to const of dynamically allocated arrays", "body": "<blockquote>\n  <p>Does the implicit const conversion in A::conf() give rise to an overhead (for example by invoking a copy-constructor of the elements of A::s)?</p>\n</blockquote>\n\n<p><em>No</em>.</p>\n\n<p>There is no <em>\"overhead\"</em>, a pointer can be implicitly converted in its <code>const</code>-version. Generally, the conversion generates zero assembly instruction.</p>\n\n<hr>\n\n<h2>Additional Notes</h2>\n\n<h3>Empirical Proof</h3>\n\n<p><code>A::conf()</code> does not call any <em>copy-constructor</em>. From the generated assembly (<code>gcc -O3</code>):</p>\n\n<pre><code>A&lt;int, 3ul&gt;::conf() const:\n        movq    %rdi, %rax\n        ret\n</code></pre>\n\n<p>As you can see, it just returns the pointer without producing any further instructions.</p>\n\n<p><em>Note: I disabled the \"inlining optimization\" here, otherwise the entire function would be optimized producing zero overhead.</em></p>\n\n<h3>Small Tips</h3>\n\n<ul>\n<li><p>Maybe a little bit off-topic, but it is good practice to avoid managing raw memory in modern C++ (whenever possible).\nWhat about using <code>std::vector</code>?</p></li>\n<li><p>In the signature <code>std::array&lt;T, N&gt; const* const conf() const</code> the second <code>const</code> is always ignored by the compiler. You can omit making it more readable: <code>std::array&lt;T, N&gt; const* conf() const</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57493707, "answer_count": 2, "score": 1, "last_activity_date": 1565786671, "creation_date": 1565780650, "question_id": 57493450, "link": "https://stackoverflow.com/questions/57493450/implicit-conversion-to-const-of-dynamically-allocated-arrays", "title": "Implicit conversion to const of dynamically allocated arrays", "body": "<p>In the following code, a class owns a dynamically-allocated array. It exposes a read-only access to this array via a public method that does an implicit conversion to <code>const</code>.</p>\n\n<pre><code>#include &lt;array&gt;\n\ntemplate &lt;class T, std::size_t N&gt;\nclass A {\n  const unsigned int size;\n  std::array&lt;T, N&gt; *s;\npublic:\n  A(const unsigned int _size, const std::array&lt;T, N&gt;&amp; def) :\n     size(_size),\n     s(new std::array&lt;T, N&gt;[size])\n  {\n    for (unsigned int i = 0; i &lt; size; i++)\n      s[i] = def;\n  }\n  ~A() { delete[] s; }\n\n  std::array&lt;T, N&gt; const* const conf() const { return s; }\n};\n\nint main()\n{\n  A a(10, std::array&lt;int, 3&gt;{0, 0, 0});\n  auto x = a.conf();\n  return 0;\n}\n</code></pre>\n\n<p>Does the implicit const conversion in <code>A::conf()</code> give rise to an overhead (for example by invoking a copy-constructor of the elements of <code>A::s</code>)?</p>\n"}, {"tags": ["c++", "video", "ffmpeg"], "comments": [{"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1565786884, "post_id": 57493383, "comment_id": 101459645, "body": "You could try running FFmpeg as a process and set its output file as <code>-</code> then this send output data back to your program as bytes via <code>stdout</code> (instead of saving to disk)."}, {"owner": {"reputation": 19, "user_id": 9714926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daeb2a36d2c8685c0bcabad249df062e?s=128&d=identicon&r=PG&f=1", "display_name": "gaamaa", "link": "https://stackoverflow.com/users/9714926/gaamaa"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1565819142, "post_id": 57493383, "comment_id": 101473889, "body": "Thanks VC.One,  Parsing the stdout as video stream would be another task. We need direct video atream. Eg streaming raw UDP:// and receiving that UDP:// from my mail app. without latency."}, {"owner": {"reputation": 606, "user_id": 10334333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T6E1x.jpg?s=128&g=1", "display_name": "Vencat", "link": "https://stackoverflow.com/users/10334333/vencat"}, "edited": false, "score": 0, "creation_date": 1565932102, "post_id": 57493383, "comment_id": 101505830, "body": "Have you tried ffmpeg C API --&gt; <a href=\"https://ffmpeg.org/doxygen/trunk/index.html\" rel=\"nofollow noreferrer\">ffmpeg.org/doxygen/trunk/index.html</a>"}, {"owner": {"reputation": 19, "user_id": 9714926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daeb2a36d2c8685c0bcabad249df062e?s=128&d=identicon&r=PG&f=1", "display_name": "gaamaa", "link": "https://stackoverflow.com/users/9714926/gaamaa"}, "edited": false, "score": 0, "creation_date": 1566052882, "post_id": 57493383, "comment_id": 101538960, "body": "Thanks Vencat, not exactly what I wanted."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9714926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daeb2a36d2c8685c0bcabad249df062e?s=128&d=identicon&r=PG&f=1", "display_name": "gaamaa", "link": "https://stackoverflow.com/users/9714926/gaamaa"}, "edited": false, "score": 0, "creation_date": 1568581970, "post_id": 57940002, "comment_id": 102309366, "body": "Thank you so much alexb. Though it seems above my knowledge, let me try."}], "tags": [], "owner": {"reputation": 119, "user_id": 11755861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3MwcyjzXw1k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyiyQj0DjptRcfPkotM7st0JVoCw/photo.jpg?sz=128", "display_name": "alexb", "link": "https://stackoverflow.com/users/11755861/alexb"}, "is_accepted": false, "score": 0, "last_activity_date": 1568503473, "creation_date": 1568503473, "answer_id": 57940002, "question_id": 57493383, "link": "https://stackoverflow.com/questions/57493383/how-to-access-video-frames-from-external-process/57940002#57940002", "title": "How to access video frames from external process?", "body": "<p>It is no ready solutions like you need as I know. Stdout, output to files and another stuffs are not applicable for huge video frames.</p>\n\n<p>I suggest using ffmpeg libraries with shared memory as frame buffer for AVFrame. You may implement it by yourself, it is not so complicated. Don't allocate and free shared memory buffers for every frame, it will cause a bottleneck. You need to allocate shared memory pool for all frames once on start processing and reuse them during decoding/encoding process.</p>\n\n<p>Also you will need to implement IPC mechanism at least for decoders synchronization, you can use same shared memory + global system mutex. </p>\n\n<p>BTW, all that techniques may help you, but will not solve task with 8 HD files in realtime. You need to use GPU codecs (in FFMPEG they named nvenc/nvdec), in that case you can use GPU memory instead RAM.</p>\n"}], "owner": {"reputation": 19, "user_id": 9714926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daeb2a36d2c8685c0bcabad249df062e?s=128&d=identicon&r=PG&f=1", "display_name": "gaamaa", "link": "https://stackoverflow.com/users/9714926/gaamaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568503473, "creation_date": 1565780345, "last_edit_date": 1565786258, "question_id": 57493383, "link": "https://stackoverflow.com/questions/57493383/how-to-access-video-frames-from-external-process", "title": "How to access video frames from external process?", "body": "<p>Windows 32 bit application memory limit is around 2gb approximately.\nI need to play 4 to 8 HD video files or live camera graphs. Which is not possible by a single 32 bit application.\nSo I would like to play each graph in separate 32 bit application and access those video frames from my main application. In this case I could manage my need.</p>\n\n<p>Could some experts give me some clue to do this if c++ ?</p>\n\n<p>Is there any ready solution to achieve this ?</p>\n\n<p>gaamaa</p>\n"}, {"tags": ["c++", "templates", "lua", "variadic-templates", "swig"], "answers": [{"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1565880790, "post_id": 57498112, "comment_id": 101491321, "body": "That&#39;s certainly the simplest solution and the one I was going to recommend."}], "tags": [], "owner": {"reputation": 658, "user_id": 9118298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859f6fd24bf2365734e1a0091e4bc01a?s=128&d=identicon&r=PG&f=1", "display_name": "Pesho_T", "link": "https://stackoverflow.com/users/9118298/pesho-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1565797838, "creation_date": 1565797838, "answer_id": 57498112, "question_id": 57493281, "link": "https://stackoverflow.com/questions/57493281/how-can-i-wrap-a-variadic-template-member-function-of-a-variadic-template-class/57498112#57498112", "title": "How can I wrap a variadic template member function of a variadic template class in SWIG?", "body": "<p>I managed to get the wrapper generated and it works as expected.</p>\n\n<p>This is a snippet of the old SWIG interface file:</p>\n\n<pre><code>...\n  template&lt;typename ... Args&gt;\n  void DoSomething(Args... args);\n...\n</code></pre>\n\n<p>I replaced it with the following:</p>\n\n<pre><code>...\n  void DoSomething(int const, int const);\n...\n</code></pre>\n\n<p>However I am still curious to find out whether there is a better way to do it so any further info (or pointers to reading materials/source code) would be appreciated.</p>\n"}], "owner": {"reputation": 658, "user_id": 9118298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859f6fd24bf2365734e1a0091e4bc01a?s=128&d=identicon&r=PG&f=1", "display_name": "Pesho_T", "link": "https://stackoverflow.com/users/9118298/pesho-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 57498112, "answer_count": 1, "score": 1, "last_activity_date": 1565797838, "creation_date": 1565779963, "question_id": 57493281, "link": "https://stackoverflow.com/questions/57493281/how-can-i-wrap-a-variadic-template-member-function-of-a-variadic-template-class", "title": "How can I wrap a variadic template member function of a variadic template class in SWIG?", "body": "<p>I have a header file containing the definition of a variadic template, which also contains a few variadic templated member functions. Code snippets below have been significantly simplified and cut down for brevity:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\ntemplate&lt;typename T, typename ... CtorArgs&gt;\nclass Foo {\npublic:\n  Foo(CtorArgs... args) : _m(args...) {}\n\n  template&lt;typename ... Args&gt;\n  void DoSomething(Args... args) { _m.DoSomething(args...); }\nprivate:\n  T _m;\n};\n\n</code></pre>\n\n<p>I then have another header defining a class to be used in a template specialization:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass Bar {\npublic:\n  Bar(std::string const &amp; a,\n      std::string const &amp; b) :\n        m_strA(a),\n        m_strB(b) {}\n\n  void DoSomething(int const one, int const two) {\n    std::cout &lt;&lt; \"Str A: \" &lt;&lt; m_strA &lt;&lt; \", Str B: \"&lt;&lt;  m_strB &lt;&lt; \", ints: \" &lt;&lt; one &lt;&lt; \", \" &lt;&lt; two &lt;&lt; std::endl;\n  }\n\nprivate:\n  std::string m_strA;\n  std::string m_strB;\n};\n\n</code></pre>\n\n<p>I would like to wrap the <strong>Foo</strong> specialization using SWIG, as well as its templated member function, so I can use them from a Lua script.</p>\n\n<p>The problem I am encountering is that SWIG is not generating a wrapper for the DoSomething templated function as I expect.</p>\n\n<p>After reading some of the SWIG documentation, I am aware that it is unable to use the <strong>%template</strong> directive with more than 1 substitution for the parameter pack arguments, so I have used <strong>%rename</strong> instead:</p>\n\n<pre><code>%module FooSwig\n%include &lt;std_string.i&gt;\n\n%{\n#include \"foo.hpp\"\n#include \"bar.hpp\"\n%}\n\n%include \"foo.hpp\"\n%include \"bar.hpp\"\n\n%rename(lua_foo) Foo&lt;Bar, std::string const &amp;, std::string const &amp;&gt;;\nclass Foo&lt;Bar, std::string const &amp;, std::string const &amp;&gt; {\npublic:\n  Foo(std::string const &amp;, std::string const &amp;);\n\n  template&lt;typename ... Args&gt;\n  void DoSomething(Args... args);\nprivate:\n  Bar _m;\n};\n</code></pre>\n\n<p>Using the <strong>%template</strong> directive doesn't work (as expected), as there are more than 1 parameters to substitute - I get the following from swig:</p>\n\n<blockquote>\n  <p>Error: Template 'DoSomething' undefined.</p>\n</blockquote>\n\n<p>I imagine I need to get around this using <strong>%rename</strong> again, but I can't figure out how. I've tried the following:</p>\n\n<pre><code>%extend Foo&lt;Bar, std::string const &amp;, std::string const &amp;&gt;\n{\n  %rename(Do_Something) DoSomething&lt;int const, int const&gt;;\n  void DoSomething(int const, int const);\n}\n</code></pre>\n\n<p>And that does generate something, but the wrapper contains a symbol for a function that is undefined:</p>\n\n<pre><code>Foo_Sl_Bar_Sc_std_string_SS_const_SA__Sc_std_string_SS_const_SA__Sg__DoSomething(arg1,arg2,arg3);\n</code></pre>\n\n<p>instead of the expected call to a member function template, something along the lines of</p>\n\n<pre><code>(arg1)-&gt;SWIGTEMPLATEDISAMBIGUATOR DoSomething&lt;int const, int const&gt;(arg2, arg3);\n</code></pre>\n\n<p>I'm running out of things to try, and maybe one of you can help?</p>\n\n<p>Some info about my environment:\nI'm using g++ 7.4.0, c++ 17 and SWIG 3.0.</p>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1565779219, "post_id": 57492923, "comment_id": 101455872, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8400244/boost-python-import-error-module-does-not-define-init-function\">boost_python import error: module does not define init function</a>"}, {"owner": {"reputation": 101, "user_id": 10889578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78476bc1c02eb1723c94d8439406cf12?s=128&d=identicon&r=PG&f=1", "display_name": "zaphod", "link": "https://stackoverflow.com/users/10889578/zaphod"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1565779653, "post_id": 57492923, "comment_id": 101456084, "body": "That was it. Many thanks!"}], "owner": {"reputation": 101, "user_id": 10889578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78476bc1c02eb1723c94d8439406cf12?s=128&d=identicon&r=PG&f=1", "display_name": "zaphod", "link": "https://stackoverflow.com/users/10889578/zaphod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565778557, "creation_date": 1565778557, "question_id": 57492923, "link": "https://stackoverflow.com/questions/57492923/error-importing-a-module-made-with-boost-python", "title": "Error importing a module made with Boost.Python", "body": "<p>I have made a module using Boost.Python.</p>\n\n<pre><code>#include &lt;boost/python.hpp&gt;\n\ndouble product(const long a,  const double x){\n  return a*x;\n}\n\nvoid square(const long n, const double* x, double* x2){\n  for(long i=0; i&lt;n; ++i){\n    x2[i]=x[i]*x[i];\n  }\n}\n\nBOOST_PYTHON_MODULE(test)\n{\n  boost::python::def(\"product\", product);\n  boost::python::def(\"square\", square);\n}\n</code></pre>\n\n<p>I have compiled it using:</p>\n\n<p><code>g++ test.cpp -fPIC -shared -I/usr/include/python2.7 -lpython2.7 -lboost_python -o libtest.so</code></p>\n\n<p>Unfortunately, when I try to import the module, I obtain the following error message:</p>\n\n<p><code>ImportError: dynamic module does not define init function (initlibwrapper)</code></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1565779850, "post_id": 57492243, "comment_id": 101456195, "body": "You&#39;ve already found documentation, but messed it up. It is <code>event.type == SDL_WINDOWEVENT &amp;&amp; event.window.event == SDL_WINDOWEVENT_SIZE_CHANGED</code>."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1565782441, "post_id": 57492243, "comment_id": 101457449, "body": "Thanks, could you write this as answer, so that I can close this question?"}], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 1, "last_activity_date": 1565783582, "creation_date": 1565783582, "answer_id": 57494182, "question_id": 57492243, "link": "https://stackoverflow.com/questions/57492243/sdl-windowevent-size-changed-and-sdl-windowevent-resized-not-working/57494182#57494182", "title": "SDL_WINDOWEVENT_SIZE_CHANGED and SDL_WINDOWEVENT_RESIZED not working?", "body": "<p><code>SDL_WINDOWEVENT_*</code> are not event types but <a href=\"https://wiki.libsdl.org/SDL_WindowEventID\" rel=\"nofollow noreferrer\">SDL_WindowEventID</a>. That is, if your <code>event.type</code> is <code>SDL_WINDOWEVENT</code>, you can access <code>window</code> union field for extra data, including <code>event</code>, e.g.</p>\n\n<pre><code>while(SDL_PollEvent(&amp;event)) {\n    if(event.type == SDL_WINDOWEVENT) {\n        if(event.window.event == SDL_WINDOWEVENT_SIZE_CHANGED) {\n            // ...\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 57494182, "answer_count": 1, "score": 0, "last_activity_date": 1565783582, "creation_date": 1565776024, "last_edit_date": 1565779563, "question_id": 57492243, "link": "https://stackoverflow.com/questions/57492243/sdl-windowevent-size-changed-and-sdl-windowevent-resized-not-working", "title": "SDL_WINDOWEVENT_SIZE_CHANGED and SDL_WINDOWEVENT_RESIZED not working?", "body": "<p>I'm trying to detect, when the size of a SDL2 window changed. But neither SDL_WINDOWEVENT_RESIZED nor SDL_WINDOWEVENT_SIZE_CHANGED are working, at least on MacOS. \nThis is my code:</p>\n\n<pre><code>SDL_Init(SDL_INIT_VIDEO);\nSDL_Window *win = SDL_CreateWindow(\"\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 100, 100, SDL_WINDOW_RESIZABLE);\nSDL_Renderer *ren = SDL_CreateRenderer(win, 0, 0);\n\nbool running = true;\nSDL_Event event;\nwhile (running) {\n    while(SDL_PollEvent(&amp;event) != 0) {\n        if(event.type == SDL_QUIT) {\n            running = false;\n        }\n\n        if(event.type == SDL_WINDOWEVENT_SIZE_CHANGED) {\n            return 3;\n        }\n\n        if(event.type == SDL_WINDOWEVENT_RESIZED) {\n            return 4;\n        }\n    }\n\n    SDL_RenderClear(ren);\n}\nSDL_DestroyRenderer(ren);\nSDL_DestroyWindow(win);\nSDL_Quit();\nreturn 0;\n</code></pre>\n\n<p>When running the program and resizing the window nothing happens. Am I doing something wrong or is it a bug?</p>\n\n<p>Edit: I looked up the documentation on window events(<a href=\"https://wiki.libsdl.org/SDL_WindowEvent\" rel=\"nofollow noreferrer\">https://wiki.libsdl.org/SDL_WindowEvent</a>). \nIt says to write something like this:</p>\n\n<pre><code>event.window.type == SDL_WINDOWEVENT_SIZE_CHANGED \n</code></pre>\n\n<p>But this also isn't working.</p>\n"}, {"tags": ["c++", "boost", "file-io"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565776716, "post_id": 57492242, "comment_id": 101454594, "body": "&quot;It&#39;s impossible for me to know that each line may contain different width&quot; why? just read line by line..."}, {"owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565776907, "post_id": 57492242, "comment_id": 101454676, "body": "@formerlyknownas_463035818 Correct me if I am wrong, but isn&#39;t that comparatively slower?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565776990, "post_id": 57492242, "comment_id": 101454723, "body": "reading from a file is slow, printing to the console is slow, I would not expect that reading it line by line makes a big difference, though I have to admit, I also dont know"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565777044, "post_id": 57492242, "comment_id": 101454760, "body": "anyhow I just wanted to point out that it is not impossible"}, {"owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565777070, "post_id": 57492242, "comment_id": 101454774, "body": "@formerlyknownas_463035818 Gotcha."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "edited": false, "score": 0, "creation_date": 1565777717, "post_id": 57492410, "comment_id": 101455101, "body": "As far as I have seen (which is very limited, am a n00b), even if a string is larger than the terminal width, usually the Terminal wraps around the text to the next line. So say that I implement your function but don&#39;t handle the case where <code>difference &lt; 0</code>. What kind of troubles, if any can I run into?"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "edited": false, "score": 0, "creation_date": 1565779344, "post_id": 57492410, "comment_id": 101455926, "body": "@blizzard_braver I&#39;m not talking about troubles, just about you deciding what happens in that case. What &quot;centering&quot; means for something that is bigger than the line in which it is to be centered. If you do that in something like Word for example, the line created by the wrapping would be centered."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "edited": false, "score": 0, "creation_date": 1565780067, "post_id": 57492410, "comment_id": 101456307, "body": "@blizzard_braver Edited the code for what I&#39;d see as a reasonable solution for <code>difference &lt; 0</code>."}, {"owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "edited": false, "score": 0, "creation_date": 1565780748, "post_id": 57492410, "comment_id": 101456625, "body": "Thanks Aziuth! You have expanded a lot in your answer about all the potential ways this could go and I appreciate your effort in this. And yeah, I have realized that <code>getline()</code> is the way to go for this particular problem."}, {"owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "edited": false, "score": 0, "creation_date": 1565780816, "post_id": 57492410, "comment_id": 101456653, "body": "Also, I&#39;d note the last line of your answer. It seems like an advice that&#39;s rare yet very true these days."}], "tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": true, "score": 1, "last_activity_date": 1565780485, "last_edit_date": 1565780485, "creation_date": 1565776591, "answer_id": 57492410, "question_id": 57492242, "link": "https://stackoverflow.com/questions/57492242/how-to-format-a-files-content-when-printing-it-so-that-the-files-contents-appe/57492410#57492410", "title": "How to format a file&#39;s content when printing it so that the file&#39;s contents appear centered?", "body": "<p>(I assume that you mean centered in respect to the terminal)</p>\n\n<p>Instead of directly printing it, get it as a string, compare it's length to the terminal width (see <a href=\"https://stackoverflow.com/questions/23369503/get-size-of-terminal-window-rows-columns\">Get size of terminal window (rows/columns)</a>) and print padding accordingly.</p>\n\n<p>Note that you have to think about what to do when the string is larger than the terminal.</p>\n\n<pre><code>void print_centered(const string&amp; str)\n{\n    int difference = terminal_width() - str.length() ;\n    if(difference &lt; 0)\n    {\n        // see edit note below\n        cout &lt;&lt; str.substr(0, terminal_width()) &lt;&lt; endl;\n        print_centered(str.substr(terminal_width(), str.length() - terminal_width());\n    }\n    else\n    {\n        cout &lt;&lt; string(difference/2, ' ');\n        cout &lt;&lt; str &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>(with <code>int terminal_width()</code> being implemented as detailed in the link above, probably in several versions if you use multiple platforms)</p>\n\n<p>Edit: Created something for the difference &lt; 0 case that prints what it can and then centers the tail.<br>\nFor a terminal width of 8, the word abcdefghijklmnopqrstuvwxyz would be printed as (with _ for spaces)</p>\n\n<pre><code>abcdefgh\nijklmnop\nqrstuvwx\n___yz___\n</code></pre>\n\n<p>A more sophisticated approach might separate the new line with a hyphen, might try to separate by keeping words intact if possible, or might even be smart enough to separate within words like a person would do (and as text software usually does), although that would require some major effort (or a really good library that knows languages).</p>\n\n<p>Note that the centering would be, in any case, of course cease to be if the terminal window is resized by the user after the printing.</p>\n\n<p>Also, from the comments of your question, as you seem to disfavor <code>getline</code> for reasons of speed:<br>\nYou pretty much have to read line by line if you want to do this, and as somebody already said, reading and printing are both already slow, I'd really wonder if you are able to notice any difference.<br>\nMaybe an important advice here, premature optimization is usually a mistake. Optimize for speed only when it becomes an issue.</p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1565776896, "creation_date": 1565776896, "answer_id": 57492496, "question_id": 57492242, "link": "https://stackoverflow.com/questions/57492242/how-to-format-a-files-content-when-printing-it-so-that-the-files-contents-appe/57492496#57492496", "title": "How to format a file&#39;s content when printing it so that the file&#39;s contents appear centered?", "body": "<p>If you want to center your output, you need to add a variable number of spaces in front of each line, the number being ((width of terminal)-(length of line being printed)/2). In order to be able to tell the length of each line, you need to read your input line by line, instead of character by character. <code>std::getline</code> is a good function for that.</p>\n\n<p>If you want to pad with n spaces in front of each line, print n spaces in front of each line. You could also print n spaces after each line, but that would probably have no effect on the visible output, except for possible ugly and unnecessary line wrap-around. At least with default settings where spaces are invisible. It is convenient to use <code>std::getline</code> in this case too. Alternatively, you can output character by character and watch for newline characters yourself.</p>\n"}], "owner": {"reputation": 130, "user_id": 10910863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KgVnPGyb5N4/AAAAAAAAAAI/AAAAAAAAJkE/DcdJ7mEkrQY/photo.jpg?sz=128", "display_name": "gourabix", "link": "https://stackoverflow.com/users/10910863/gourabix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57492410, "answer_count": 2, "score": 0, "last_activity_date": 1565780485, "creation_date": 1565776021, "question_id": 57492242, "link": "https://stackoverflow.com/questions/57492242/how-to-format-a-files-content-when-printing-it-so-that-the-files-contents-appe", "title": "How to format a file&#39;s content when printing it so that the file&#39;s contents appear centered?", "body": "<p>Let's say I have a file <code>abc.txt</code>. That file contains huge paragraphs of text (for example, this one: <a href=\"https://loremipsum.io/generator/?n=5&amp;t=p\" rel=\"nofollow noreferrer\">https://loremipsum.io/generator/?n=5&amp;t=p</a>).</p>\n\n<p>I'm trying to read and print the contents of <code>abc.txt</code> onto the console using <code>stringstream</code> and <code>rdbuf()</code>. While text displayed on the console is perfect, I would like to pad the beginning of each line by <code>n</code> spaces and it's end also by the same <code>n</code> spaces.</p>\n\n<p>For example, the line:</p>\n\n<pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor\n</code></pre>\n\n<p>should become:</p>\n\n<pre><code>    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor    \n</code></pre>\n\n<p>Here, I have padded the beginning and the end of the line with 4 spaces.</p>\n\n<p>Note that I don't want to alter the file in any way. It itself is opened in <code>read</code> mode, disallowing any writes to it.</p>\n\n<p>I came across a lot of answers on SO about \"centering text in C++\", but most of them use <code>setw</code>. It's impossible for me to know that each line may contain different width (number of characters in a line) and <code>setw</code> needs to be greater than the width of the output (line).</p>\n\n<p>How can I do this? </p>\n\n<p>Here's how I'm reading from the file and sending it to the console out stream now:</p>\n\n<pre><code>string file_slurper(std::ifstream&amp; infile)\n{\n    stringstream ssm;\n    ssm &lt;&lt; infile.rdbuf();\n    return ssm.str();\n}\n\nstd::ifstream read_f(files[ch_index]);\nif (read_f.is_open())\n{\n    cout &lt;&lt; file_slurper(read_f);\n}\n</code></pre>\n\n<p>Also, if it helps I am using <code>Boost</code> libraries is in this file, so you can suggest something from Boost as well if that's better.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565776070, "post_id": 57492168, "comment_id": 101454252, "body": "That occurs because you provide a specialisation for a template that already has been instantiated from the default (even though the two don&#39;t differ \u2013 but they <i>might</i>). Move the specialisation before main and you should get rid of the error."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565776283, "post_id": 57492168, "comment_id": 101454376, "body": "@Aconcagua thanks,But if I define the code like ```template&lt;typename T&gt; struct Test&lt;T,void&gt;{  }````,Then everything will be ok,By reason\uff0cIt&#39;s also provide a specialization after Instantiation and should be have the same error"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565776777, "post_id": 57492168, "comment_id": 101454629, "body": "@jackX please dont put code in comments, instead you can edit the question to clarify it"}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565776784, "post_id": 57492168, "comment_id": 101454632, "body": "@Aconcagua I&#39;m sorry,even the partical specialization ,It also has the same problem,thank you very much for your answer"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565776949, "post_id": 57492168, "comment_id": 101454702, "body": "Would have been pretty surprised if not..."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1565778088, "post_id": 57492500, "comment_id": 101455296, "body": "The correct terminology would be: the implicit specialization <code>Test&lt;int, void&gt;</code> is instantiated :)"}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565792869, "post_id": 57492500, "comment_id": 101463153, "body": "@Aconcagua  So,through the above explanation,The complier also generate specialization of Test&lt;int, void&gt; implicitely  when see the define Test&lt;int,void&gt; global_t,and the implicitely specialization conflicts with the explicite specialization which user defined ,and this is the reason why complied error"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565793151, "post_id": 57492500, "comment_id": 101463311, "body": "@jackX Exactly \u2013 the compiler cannot do anything else than implicitly specialising the base/default template as the explicit specialisation is not yet known at the time when <code>global_t</code> is declared."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565794197, "post_id": 57492500, "comment_id": 101463864, "body": "@Aconcagua  OK,So the specialization the complier generated(implitely specialization) is not at the POI,may be in some other place of translate unit,and At the POI ,the generated code may be struct __Test__char { /* again same interface */ }; as you said before(logically\uff0cmay be this code in memory) Is my understanding correct? thanks"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565798181, "post_id": 57492500, "comment_id": 101466068, "body": "@jackX Why the hell do you need a specialisation <i>&#39;elsewhere&#39;</i> and <i>another</i> class <code>__Test__char</code>??? A template specialisation, whether implicit or explicit, is just an ordinary class like any other class as well. Don&#39;t think about compiler internals (unless you want to build one yourself), that won&#39;t help you here. All you need to know is that the first time you instantiate a specific template, you create a new class. And you cannot re-specialise it differently, just like you cannot define one and the same class twice, such as <code>class C { int n; }; class C { double d; };</code>..."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565837576, "post_id": 57492500, "comment_id": 101477210, "body": "@Aconcagua what complex it is,Now,I&#39;m  confused about what the process of complier to process the specific template,In my idea\uff0cfor example ,Test&lt;int,void&gt; v ;the process is,First,match the best candidate template,obviously,here is primary template(here&#39;s no partial specailization template) ,Second,complier generate template&lt;&gt; struct Test&lt;int,void&gt;{/balabala/} for Test&lt;int,void&gt; ,then complier create instantiation from &#39;template&lt;&gt; struct Test&lt;int,void&gt;{/balabala/}&#39; ,and lastly,the reuslt is just an ordinary  class you said,Is my understanding right,if it wrong,please point out my mistake"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 1, "creation_date": 1565843854, "post_id": 57492500, "comment_id": 101478086, "body": "@jackX Imagine it as follows: The compiler has a lookup table for all classes, key is name, value is a set of information to the class (mainly size of objects to be created and some kind of lookup table for the functions translated). When encountering a name of a concrete class, normal or template instantiation as <code>Test&lt;int, double&gt; t;</code>, it will look up in the table if the class exists. If so, use it if not, then for normal classes fail, for template classes see if a template exists and can be instantiated (with base template or specialisations known <i>so far</i>). If not, fail, otherwise add ..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1565843864, "post_id": 57492500, "comment_id": 101478088, "body": "... the newly created class (implicitly specialised/instantiated template) to the lookup table. Now we are back at the same point as if we had found the class in the table already before: <code>Test&lt;int, double&gt; t;</code> \u2013 the compiler now needs to reserve appropriate space for the object and make sure the constructor gets called; unless the constructor got inlined, this will just be an ordinary function call receiving the memory address of the reserved space as additional (hidden) parameter, which is what you see and can use as <code>this</code> pointer in the constructor (or any other member function later)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565844300, "post_id": 57492500, "comment_id": 101478166, "body": "When the compiler now encounters a new <i>explicit</i> template specialisation (partial or full alike), it can look up all those keys in the table, if one matches the specialisation as well \u2013 the error you discovered already: Redefinition of an already (implicitly) specialised template..."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565845301, "post_id": 57492500, "comment_id": 101478339, "body": "@Aconcagua,Thanks very much for your wonderful answers,I get it,But last questions ,what is &quot;implicitly specialised&quot;,we all know explicitly specialised as &quot;template&lt;&gt; struct Test&lt;int,double&gt;{}&quot; ,what&#39;s the form of &quot;implicitly specialised&quot;"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1565845801, "post_id": 57492500, "comment_id": 101478416, "body": "The result of both is exactly the same, the difference is solely <i>how</i> you get them: the <a href=\"https://www.merriam-webster.com/dictionary/explicit\" rel=\"nofollow noreferrer\">explicit</a> ones you write <i>yourself</i>, the <a href=\"https://www.merriam-webster.com/dictionary/implicit\" rel=\"nofollow noreferrer\">implicit</a> ones you get <i>&#39;from something else&#39;</i> (the compiler generates them for you...). Remember that if you explicitly specialise yourself, the specialisation can look totally different to what the compiler would have generated from non-specialised template, see example in answer."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565846364, "post_id": 57492500, "comment_id": 101478532, "body": "Interesting point about partial specialisations: You specialise explicitly, but only partially; full specialisations still need to be generated implicitly (by the compiler)..."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "edited": false, "score": 0, "creation_date": 1565847090, "post_id": 57492500, "comment_id": 101478628, "body": "@Aconcagua  I understand them, the newly created class has two processes,One is &quot;implicitly specialised&quot; (the complier generated specialization for me,due to I didn&#39;t write explicite specialization)\uff0cand the other is &quot;instantiated template&quot;(this process is the complier generated a ordinary class for  Test&lt;int,double&gt; ,In other words ,the actions like function name mangling,Make Test&lt;int,double&gt; like a common class such as Test_int_double_2 )"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565859451, "post_id": 57492500, "comment_id": 101482331, "body": "Why do you insist on two steps? As soon as you have a full(!) specialisation, you <i>have</i> that ordinary class already, no need to create another one from. Name mangling isn&#39;t standardised, though (it isn&#39;t even mandated, so if compiler finds another way to handle overloading, it can do so...), every compiler can do whatever it wants to, mangling might reveal that the class is derived from a template (most likely...) or it might not."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 0, "last_activity_date": 1565778966, "last_edit_date": 1565778966, "creation_date": 1565776900, "answer_id": 57492500, "question_id": 57492168, "link": "https://stackoverflow.com/questions/57492168/what-actally-reason-of-the-specialization-redefined/57492500#57492500", "title": "what actally reason of the specialization redefined", "body": "<p>To make the issue more obvious: Let's base template and specialisation <em>differ</em>:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nstruct Test\n{\n    T t;\n    U u;\n    void someFunction() { }\n};\n\ntemplate&lt;typename T&gt;\nstruct Test&lt;T, void&gt; // partial specialisation this time - yes, possible, too...\n{\n    std::vector&lt;T&gt; t;\n    double someTotallyDifferentFunction(std::string const&amp;) const { }\n};\n</code></pre>\n\n<p>Now any instantiation with second template parameter being void will have a vector, any other one will have the two members.</p>\n\n<p>If you now, though, instantiate the base template <em>before</em> defining the specialisation, you get into trouble:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nstruct Test { /* as above */ };\n\nTest&lt;int, void&gt; global_t;\n\ntemplate&lt;typename T&gt;\nstruct Test&lt;T, void&gt; { /* as above */ };\n</code></pre>\n\n<p>At the time <code>global_t</code> is declared, there exists only the base template. So it will be instantiated (in given case, this actually will fail to compile, though, as you cannot declare member variables (<code>u</code>!) of type <code>void</code>, but that's another issue, just let's ignore that for now).</p>\n\n<p>Before instantiation, the compiler needs to specialise <code>Test&lt;int, void&gt;</code> <em>implicitly</em> (so one specialisation exists already). But <em>then</em> the compiler discovers the explicit specialisation \u2013 and this one conflicts with the previous implicit one.</p>\n\n<p>Conclusion: you need to specialise <em>before</em> you instantiate...</p>\n"}], "owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57492500, "answer_count": 1, "score": 0, "last_activity_date": 1565778966, "creation_date": 1565775766, "question_id": 57492168, "link": "https://stackoverflow.com/questions/57492168/what-actally-reason-of-the-specialization-redefined", "title": "what actally reason of the specialization redefined", "body": "<p>For example   </p>\n\n<pre><code>template&lt;typename T,typename U&gt;\nstruct Test{\n}\nint main(){\n   Test&lt;int,void&gt; b;\n}\ntemplate&lt;&gt;\nstruct Test&lt;int,void&gt;{\n\n}\n</code></pre>\n\n<p>This code will cause compile error ,the error says \"explicit specialization; 'specialization' has already been defined\",we know duplicate explicit specializations are not allowed,So I guess Whether the complier generate the same code   </p>\n\n<pre><code>template&lt;&gt;\nstruct Test&lt;int,void&gt;{\n\n}\n</code></pre>\n\n<p>at the POI,and the same Code I defined after the main function,this is the reason of redefined explicit specializations?</p>\n"}, {"tags": ["c++", "httpclient", "blockchain", "json-rpc", "eos"], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1565776606, "last_edit_date": 1592644375, "creation_date": 1565776077, "answer_id": 57492258, "question_id": 57492037, "link": "https://stackoverflow.com/questions/57492037/why-does-jsoncpp-http-client-fail-on-a-201-response-code/57492258#57492258", "title": "Why does JsonCpp http client fail on a 201 response code?", "body": "<p><code>201</code> basically means that your request was processed successfully. As <a href=\"https://httpstatuses.com/201\" rel=\"nofollow noreferrer\">this source</a> explains:</p>\n<blockquote>\n<h3>201 CREATED The request has been fulfilled and has resulted in one or more new resources being created.</h3>\n<p>The primary resource created by the request is identified by either a\nLocation header field in the response or, if no Location field is\nreceived, by the effective request URI.</p>\n<p>The 201 response payload typically describes and links to the\nresource(s) created. See Section 7.2 of RFC7231 for a discussion of\nthe meaning and purpose of validator header fields, such as ETag and\nLast-Modified, in a 201 response.</p>\n</blockquote>\n<p>The exception must be thrown when any further processing is applied to the response data.<br />\nI can't tell what exactly causes this without more information.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1565810983, "last_edit_date": 1565810983, "creation_date": 1565809493, "answer_id": 57500622, "question_id": 57492037, "link": "https://stackoverflow.com/questions/57492037/why-does-jsoncpp-http-client-fail-on-a-201-response-code/57500622#57500622", "title": "Why does JsonCpp http client fail on a 201 response code?", "body": "<h2>The issue is caused by a bug in the <code>HttpClient::SendRPCMessage()</code> implementation.</h2>\n\n<p>Internally, <a href=\"https://github.com/cinemast/libjson-rpc-cpp/blob/master/src/jsonrpccpp/client/connectors/httpclient.cpp\" rel=\"nofollow noreferrer\"><code>HttpClient</code></a> uses libcurl for its HTTP handling, and at the very end of the <code>SendRPCMessage()</code> implementation is the following check if <code>curl_easy_perform()</code> is successful:</p>\n\n<pre><code>long http_code = 0;\ncurl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &amp;http_code);\n\nif (http_code != 200) {\n  throw JsonRpcException(Errors::ERROR_RPC_INTERNAL_ERROR, result);\n}\n</code></pre>\n\n<p>As you can see, <code>SendRPCMessage()</code> throws an exception for <em>ANY</em> HTTP response code other than 200.  But <a href=\"https://tools.ietf.org/html/rfc2616#section-10.2\" rel=\"nofollow noreferrer\">per the HTTP standard</a>, <em>ALL</em> 2xx response codes indicate success, not just 200.  In this case, <a href=\"https://tools.ietf.org/html/rfc2616#section-10.2\" rel=\"nofollow noreferrer\">response code 201</a> means:</p>\n\n<blockquote>\n  <p>10.2.2 201 Created</p>\n  \n  <p><strong>The request has been fulfilled and resulted in a new resource being created.</strong> The newly created resource can be referenced by the URI(s) returned in the entity of the response, with the most specific URI for the resource given by a Location header field. The response SHOULD include an entity containing a list of resource characteristics and location(s) from which the user or user agent can choose the one most appropriate. The entity format is specified by the media type given in the Content-Type header field. The origin server MUST create the resource before returning the 201 status code. If the action cannot be carried out immediately, the server SHOULD respond with 202 (Accepted) response instead.</p>\n  \n  <p>A 201 response MAY contain an ETag response header field indicating the current value of the entity tag for the requested variant just created, see <a href=\"https://tools.ietf.org/html/rfc2616#section-14.19\" rel=\"nofollow noreferrer\">section 14.19</a>.</p>\n</blockquote>\n\n<p>This is clearly a logic error in the implementation of <code>SendRPCMessage()</code>.  The check of the <code>http_code</code> should be more like this instead:</p>\n\n<pre><code>if ((http_code / 100) != 2)\n</code></pre>\n\n<p>This will treat all 2xx response codes as success.</p>\n\n<p>I have filed a bug report with json-rpc-cpp's author:</p>\n\n<p><a href=\"https://github.com/cinemast/libjson-rpc-cpp/issues/278\" rel=\"nofollow noreferrer\">#278 HttpClient::SendRPCMessage() throws ERROR_RPC_INTERNAL for successful HTTP responses</a></p>\n"}], "owner": {"reputation": 4293, "user_id": 7035151, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce9aa200c854d26a2cd263f6fc8c24eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh", "link": "https://stackoverflow.com/users/7035151/jayesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "accepted_answer_id": 57500622, "answer_count": 2, "score": 0, "last_activity_date": 1566279645, "creation_date": 1565775268, "last_edit_date": 1565809828, "question_id": 57492037, "link": "https://stackoverflow.com/questions/57492037/why-does-jsoncpp-http-client-fail-on-a-201-response-code", "title": "Why does JsonCpp http client fail on a 201 response code?", "body": "<p>Using the <a href=\"https://github.com/cinemast/libjson-rpc-cpp\" rel=\"nofollow noreferrer\">json-rpc-cpp</a> library, I am creating an EOS Wallet using <a href=\"https://developers.eos.io/keosd/reference\" rel=\"nofollow noreferrer\">wallet RPC</a>.</p>\n\n<pre><code>HttpClient *temp = new HttpClient(\"http://127.0.0.1:30031/v1/wallet/create\"); \n\nstring res;\nstring str = \"testwallet1\";\ntemp-&gt;SendRPCMessage(str, res);\ncout&lt;&lt;\"res : \"&lt;&lt;res&lt;&lt;endl;\n</code></pre>\n\n<p>It is creating the wallet successfully, but after that I am getting the following exception.</p>\n\n<pre><code>unknown file: Failure\nC++ exception with description \"Exception -32603 : INTERNAL_ERROR: : \"PW5JcEu7jTXd7XUYLWkPuCUbr1pqBhusqRFfhSVToqUNcDuZ3oeYK\"\" thrown in the test body.\n</code></pre>\n\n<p>I found that <code>HttpClient</code> receives a 201 response code. I have no idea how to avoid that exception. Does anyone have any idea?</p>\n"}, {"tags": ["c++", "qt", "qml", "qtquick2"], "answers": [{"comments": [{"owner": {"reputation": 656, "user_id": 11629794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3JLL929EAMI/AAAAAAAAAAI/AAAAAAAAABQ/CKCV_Idz2CI/photo.jpg?sz=128", "display_name": "Zer0", "link": "https://stackoverflow.com/users/11629794/zer0"}, "edited": false, "score": 0, "creation_date": 1565776673, "post_id": 57492341, "comment_id": 101454575, "body": "Thanks for the answer, I&#39;ll accept you answer but could you please explain why is qt not recognizing the main.qml. It says that &quot;no such file or directory&quot;"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 656, "user_id": 11629794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3JLL929EAMI/AAAAAAAAAAI/AAAAAAAAABQ/CKCV_Idz2CI/photo.jpg?sz=128", "display_name": "Zer0", "link": "https://stackoverflow.com/users/11629794/zer0"}, "edited": false, "score": 0, "creation_date": 1565776818, "post_id": 57492341, "comment_id": 101454648, "body": "@Zer0 If you use QUrl::fromLocalFile() then it is expected that the main.qml is next to the executable so copy the main.qml in the build folder, if you don&#39;t want to do it then create a qresource and add the main.qml there, then just you change <code>QUrl::fromLocalFile(&quot;main.qml&quot;)</code> to <code>QUrl(&quot;qrc:&#47;main.qml&quot;)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 656, "user_id": 11629794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3JLL929EAMI/AAAAAAAAAAI/AAAAAAAAABQ/CKCV_Idz2CI/photo.jpg?sz=128", "display_name": "Zer0", "link": "https://stackoverflow.com/users/11629794/zer0"}, "edited": false, "score": 0, "creation_date": 1565776935, "post_id": 57492341, "comment_id": 101454695, "body": "@Zer0 Generally when you create a project with Qt Creator it already creates the .qrc and uses QQmlApplicationEngine so you should not modify it if you do not want to have this kind of problem."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1565776336, "creation_date": 1565776336, "answer_id": 57492341, "question_id": 57492032, "link": "https://stackoverflow.com/questions/57492032/how-to-assign-qml-file-to-mainwindow-application/57492341#57492341", "title": "How to assign QML file to MainWindow/Application", "body": "<p>If you are using QQuickView then the root has to be a QQuickItem as Item, Rectangle, etc. since QQuickView is a window.</p>\n\n<p>If instead you want to root Window or ApplicationWindow then you must use QQmlApplicationEngine.</p>\n\n<p>In your case there are 2 windows: One the QQuickView and the other the Window.</p>\n\n<p>Considering the above you have the following 2 options:</p>\n\n<ol>\n<li>QQuickView</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QQuickView view;\n    testApp::Root data;\n    view.view.setResizeMode(QQuickView::SizeRootObjectToView);\n\n    view.rootContext()-&gt;setContextProperty(\"dataContext\", &amp;data);\n    view.setSource(QUrl::fromLocalFile(\"main.qml\"));\n    view.setTitle(\"Hello World!!!\")\n    view.show();\n\n    return app.exec();\n}\n</code></pre>\n\n<pre><code>import QtQuick 2.12\nimport QtQuick.Window 2.12\n\nItem {\n    width: 640\n    height: 480\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>QQmlApplicationEngine</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    testApp::Root data;\n\n    engine.rootContext()-&gt;setContextProperty(\"dataContext\", &amp;data);\n    engine.load(QUrl::fromLocalFile(\"main.qml\"));\n\n    return app.exec();\n}\n</code></pre>\n\n<pre><code>import QtQuick 2.12\nimport QtQuick.Window 2.12\n\nWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World!!!\")\n}\n</code></pre>\n"}], "owner": {"reputation": 656, "user_id": 11629794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3JLL929EAMI/AAAAAAAAAAI/AAAAAAAAABQ/CKCV_Idz2CI/photo.jpg?sz=128", "display_name": "Zer0", "link": "https://stackoverflow.com/users/11629794/zer0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 57492341, "answer_count": 1, "score": 1, "last_activity_date": 1565776336, "creation_date": 1565775250, "question_id": 57492032, "link": "https://stackoverflow.com/questions/57492032/how-to-assign-qml-file-to-mainwindow-application", "title": "How to assign QML file to MainWindow/Application", "body": "<p><strong>SITUATION</strong></p>\n\n<p>I have my <code>main.cpp</code> here</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QQuickView&gt;\n#include &lt;QQmlContext&gt;\n\n#include \"root.h\"\n\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QQuickView view;\n    testApp::Root data;\n\n    view.rootContext()-&gt;setContextProperty(\"dataContext\", &amp;data);\n    view.setSource(QUrl::fromLocalFile(\"main.qml\"));\n    view.show();\n\n    return app.exec();\n}\n</code></pre>\n\n<p>and my <code>main.qml</code>  here</p>\n\n<pre><code>import QtQuick 2.12\nimport QtQuick.Window 2.12\n\nWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World!!!\")\n}\n</code></pre>\n\n<p><strong>PROBELM</strong></p>\n\n<p>whenever i start my app, it does not assign the values from <code>main.qml</code> to my main window.</p>\n\n<p>for example:\n the properties <strong>width</strong>, <strong>height</strong> in main.qml have the values <strong>640</strong>, <strong>480</strong>. But whenever i start the app, my window is much smaller(and yes i have tried to give them different values)</p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>how to say the program: he should use main.qml for my main window.</p>\n"}, {"tags": ["c++", "c++11", "narrowing"], "answers": [{"comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1565776515, "post_id": 57492223, "comment_id": 101454493, "body": "Did that mean that if we change the constant value to another constant value we may get a narrowing warning because that value will not be the same by converting forth and back?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1565776718, "post_id": 57492223, "comment_id": 101454597, "body": "Thanks for giving the rationale. One could still argue that <i>if</i> all possible values of the source type are exactly representable it should be allowed; but there are already so many pages in the standard..."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1565798613, "last_edit_date": 1565798613, "creation_date": 1565775971, "answer_id": 57492223, "question_id": 57491990, "link": "https://stackoverflow.com/questions/57491990/narrowing-conversion-from-char-to-double/57492223#57492223", "title": "Narrowing conversion from char to double", "body": "<p>It is narrowing because the standard says so.</p>\n\n<blockquote>\n  <p>7 A <em>narrowing conversion</em> is an implicit conversion<br>\n  [...]<br>\n  (7.3) \u2014 <strong>from an integer type or unscoped enumeration type to a floating-point type</strong>, except where the source is a constant expression and the actual value after conversion will fit into the target type and will produce the original value when converted back to the original type [...]</p>\n</blockquote>\n\n<p>Narrowing is not allowed in list-initialization. Use an explicit conversion (cast).</p>\n\n<pre><code>double a{static_cast&lt;double&gt;(c)};\n</code></pre>\n\n<p>Yes, theoretically it is allowed for <code>char</code> to be not exactly representable as <code>double</code>, e.g. when both are 32-bit types. This is contrived but the standard allows for such an implementation.</p>\n"}], "owner": {"reputation": 43, "user_id": 9153033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-T2OVz4jaahQ/AAAAAAAAAAI/AAAAAAAAABk/aSNZCDfjfn4/photo.jpg?sz=128", "display_name": "Wichr", "link": "https://stackoverflow.com/users/9153033/wichr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 57492223, "answer_count": 1, "score": 4, "last_activity_date": 1565801515, "creation_date": 1565775126, "last_edit_date": 1565801515, "question_id": 57491990, "link": "https://stackoverflow.com/questions/57491990/narrowing-conversion-from-char-to-double", "title": "Narrowing conversion from char to double", "body": "<p>Why there is a warning </p>\n\n<blockquote>\n  <p>narrowing conversion from char to double</p>\n</blockquote>\n\n<p>I know already that for const char there will be no warning. There are a lot of answers about that. But I would like to know, why for non-const char there is a \"might-narrow\" warning?</p>\n\n<p>Is it possible that on some systems mantissa is not big to perfectly represent char?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n  char c{7};\n  double a{c};\n}\n</code></pre>\n\n<blockquote>\n  <p>4:13: warning: narrowing conversion of 'c' from 'char' to 'double'\n  inside { } [-Wnarrowing]</p>\n</blockquote>\n"}, {"tags": ["java", "c++", "dll", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1565774627, "post_id": 57491663, "comment_id": 101453548, "body": "Your native methods in java should have different names (e.g. <code>intMethod</code> in package <code>Sample1</code>). <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/design.html\" rel=\"nofollow noreferrer\">See this</a>."}, {"owner": {"reputation": 93, "user_id": 11926388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cfb7c8b6a78e538a3ed75e68d15b67?s=128&d=identicon&r=PG&f=1", "display_name": "s.stkvc", "link": "https://stackoverflow.com/users/11926388/s-stkvc"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1565777429, "post_id": 57491663, "comment_id": 101454961, "body": "@Zereges thanks for your contribution. I read through your Link, but I think I could not conclude what is wrong with the naming. Now I changed the int Method _Java_Sample1_intMethod to Java_Sample1_intMethod and it produces nearly the exact same error.                                                               Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: main.java.JNativeTest.Java_Sample1_intMethod(I)I \tat main.java.JNativeTest.Java_Sample1_intMethod(Native Method) \tat main.java.JNativeTest.main(JNativeTest.java:15)"}, {"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "edited": false, "score": 0, "creation_date": 1565777623, "post_id": 57491663, "comment_id": 101455054, "body": "Don&#39;t touch names in Java. <code>javah&#47;javac</code> will translate them into proper ones. Just write them as you want them to be. On the other hand, in <code>C&#47;C++</code> pay attention to use proper names (as generated by <code>javac&#47;javah</code>). Also, make sure to put your <code>dll</code> on <code>PATH</code> so it can be accessible. Alternatively, use <code>loadLibrary</code> and explicitly point to file with your shared library code. Also, take a look here for a very basic sample with description: <a href=\"http://jnicookbook.owsiak.org/recipe-No-001/\" rel=\"nofollow noreferrer\">jnicookbook.owsiak.org/recipe-No-001</a>"}, {"owner": {"reputation": 1908, "user_id": 2543253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a87e0065d4c5036eb7adabe2edfd187?s=128&d=identicon&r=PG", "display_name": "user2543253", "link": "https://stackoverflow.com/users/2543253/user2543253"}, "edited": false, "score": 0, "creation_date": 1566231696, "post_id": 57491663, "comment_id": 101582820, "body": "To rephrase what Oo.oO said ... the steps are: a) Write your method names in Java b) use <code>javac -h</code> to get a header file with the matching C method names c) don&#39;t touch any of the names, only define/fill in the methods in C. If you change anything in the Java native methods, i.e the method name or the class name or the package name, regenerate the C header files and change your method definitions to match."}], "owner": {"reputation": 93, "user_id": 11926388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cfb7c8b6a78e538a3ed75e68d15b67?s=128&d=identicon&r=PG&f=1", "display_name": "s.stkvc", "link": "https://stackoverflow.com/users/11926388/s-stkvc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565774051, "creation_date": 1565774051, "question_id": 57491663, "link": "https://stackoverflow.com/questions/57491663/java-lang-unsatisfiedlinkerror-at-native-method-calling", "title": "java.lang.UnsatisfiedLinkError at native method calling", "body": "<p>I created a DLL for testing purposes, as I need to load a DLL into a java wrapper class and use it's method. Everytime when I try to use a native Method, the following Exception appears:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError:  main.java.JNativeTest._Java_Sample1_intMethod(I)I\nat main.java.JNativeTest._Java_Sample1_intMethod(Native Method)\nat main.java.JNativeTest.main(JNativeTest.java:15)\n</code></pre>\n\n<p>I tried already to rename the methods to beginning with _ and also without leading _. </p>\n\n<p><strong>Java Class</strong></p>\n\n<pre><code>public class JNativeTest {\n\npublic native int _Java_Sample1_intMethod(int n);\npublic native boolean _Java_Sample1_booleanMethod(boolean bool);\npublic native String stringMethod(String text);\npublic native int intArrayMethod(int[] intArray);\n\n\npublic static void main(String[] args) {\n    System.load(\"C:\\\\Users\\\\xxxxxxxxxx\\\\Desktop\\\\JNITest2.dll\");\n    JNativeTest testClass = new JNativeTest();\n    int square = testClass._Java_Sample1_intMethod(5);\n    boolean bool   =  testClass._Java_Sample1_booleanMethod(true);\n\n    System.out.println(\"Int Methode: \" + square);\n    System.out.println(\"Boolean Methode: \" + bool);\n}\n\n}\n</code></pre>\n\n<p><strong>CPP Class</strong></p>\n\n<pre><code>#include \"main_java_JNativeTest.h\"\n\nJNIEXPORT jint JNICALL Java_Sample1_intMethod\n  (JNIEnv * env, jobject obj, jint num) {\n       return num * num;\n\n}\n JNIEXPORT jboolean JNICALL Java_Sample1_booleanMethod\n   (JNIEnv * env, jobject obj, jboolean boolean) {\n       return !boolean;\n\n}\n\n\n JNIEXPORT jint JNICALL Java_Sample1_intArrayMethod\n   (JNIEnv * env, jobject obj, jintArray array) {\n         int i, sum = 0;\n         jsize len = env-&gt;GetArrayLength(array);\n         jint * body = env-&gt;GetIntArrayElements(array, 0);\n         for (i = 0; i &lt; len; i++)\n             {    sum += body[i];\n         }\n     env-&gt;ReleaseIntArrayElements(array, body, 0);\n     return sum;\n\n}\n\nvoid main() {}\n</code></pre>\n\n<p><strong>Header File</strong></p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class main_java_JNativeTest */\n\n#ifndef _Included_main_java_JNativeTest\n#define _Included_main_java_JNativeTest\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     main_java_JNativeTest\n * Method:    intMethod\n * Signature: (I)I\n */\nJNIEXPORT jint JNICALL Java_main_java_JNativeTest_intMethod\n  (JNIEnv *, jobject, jint);\n\n/*\n * Class:     main_java_JNativeTest\n * Method:    booleanMethod\n * Signature: (Z)Z\n */\nJNIEXPORT jboolean JNICALL Java_main_java_JNativeTest_booleanMethod\n  (JNIEnv *, jobject, jboolean);\n\n/*\n * Class:     main_java_JNativeTest\n * Method:    stringMethod\n * Signature: (Ljava/lang/String;)Ljava/lang/String;\n */\nJNIEXPORT jstring JNICALL Java_main_java_JNativeTest_stringMethod\n  (JNIEnv *, jobject, jstring);\n\n/*\n * Class:     main_java_JNativeTest\n * Method:    intArrayMethod\n * Signature: ([I)I\n */\nJNIEXPORT jint JNICALL Java_main_java_JNativeTest_intArrayMethod\n  (JNIEnv *, jobject, jintArray);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vr9J4.png\" rel=\"nofollow noreferrer\">Screenshot of Dependency Walker</a></p>\n\n<p>Id like to mention that I am very new to .NET/C++ and DLL's, I have only looked at it yesterday for work purposes - therefore I think that I maybe have some errors at the .cpp file or header file. </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1565776352, "post_id": 57491800, "comment_id": 101454419, "body": "Why using <code>cmp.rgba64() == color.rgba64()</code> instead of just <code>cmp == color</code>?"}, {"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1565776457, "post_id": 57491800, "comment_id": 101454469, "body": "I didn&#39;t see operator == documented for QColor, that&#39;s all."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1565777080, "post_id": 57491800, "comment_id": 101454782, "body": "I was actually expecting Qt to propose such a function in the API, but as it apparently does not, your answer provides the working implementation. Thanx."}], "tags": [], "owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "is_accepted": true, "score": 2, "last_activity_date": 1565776515, "last_edit_date": 1565776515, "creation_date": 1565774530, "answer_id": 57491800, "question_id": 57491507, "link": "https://stackoverflow.com/questions/57491507/is-there-a-way-to-get-qcolors-smart-name-if-any/57491800#57491800", "title": "Is there a way to get QColor&#39;s smart name if any?", "body": "<p>Seems to me this is what you're looking for</p>\n\n<pre><code>#include &lt;QColor&gt;\n#include &lt;iostream&gt;\n\nint main( int argc, char* argv[] )\n{\n    QColor color( \"red\" );\n    QColor cmp;\n    for(auto i : QColor::colorNames()) {\n        cmp.setNamedColor(i);\n        if(cmp == color)\n            std::cout &lt;&lt; i.toStdString();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>note that anything builtin that would get that color name would probably also use a similar loop.</p>\n\n<p>As a side note you should consider using qDebug instead of cout since you're using Qt.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1565775550, "post_id": 57491830, "comment_id": 101453980, "body": "Good point. You could just have the integer keys and string values in separate vectors (sorted by the integer key), binary search the keys and, if the key is found, use its index to retrieve the string from the second vector. (You could also store the pairs in one vector, sorted only by one pair element, but that&#39;ll make the binary search harder on the cache)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1565776755, "post_id": 57491830, "comment_id": 101454616, "body": "@xception After lunch :)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1565781558, "post_id": 57491830, "comment_id": 101457009, "body": "@xception Done. Please take a look and share your thoughts!"}, {"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1565788386, "post_id": 57491830, "comment_id": 101460519, "body": "nice, upvoted ... sorry for the time it took, had a few busy hours"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 6, "last_activity_date": 1565781542, "last_edit_date": 1565781542, "creation_date": 1565774600, "answer_id": 57491830, "question_id": 57491507, "link": "https://stackoverflow.com/questions/57491507/is-there-a-way-to-get-qcolors-smart-name-if-any/57491830#57491830", "title": "Is there a way to get QColor&#39;s smart name if any?", "body": "<p>The only way I can see from the documentation is to iterate over all the named colors that Qt knows about (provided by <code>QColor::colorNames()</code>), converting each one to a <code>QColor</code> and checking if the colors match (there is an <code>operator==</code> for <code>QColor</code> available).</p>\n\n<p>If you want to do this repeatedly, it is advisable to use some sort of map instead of doing linear searches constantly. <code>QColor</code> does not lend itself directly as map key (no <code>operator&lt;</code> and no hash function), but we can use its underlying RGBA value. If we write custom code for this we might as well get the performance aspect right by avoiding the (for our purposes) inefficient map/unordered_map implementations and using binary search over sorted vectors instead:</p>\n\n<pre><code>// Lookup class that is only accessible from getColorName free function.\nclass NamedQColorLookup\n{\nprivate:\n    NamedQColorLookup()\n    {\n        auto keyList = QColor::colorNames();\n\n        // Simple implementation for filling _keys and _values using std::map.\n        // Alternatively, sort two vectors at once, for example like\n        // https://stackoverflow.com/questions/17074324/how-can-i-sort-two-vectors-in-the-same-way-with-criteria-that-uses-only-one-of\n        // But that's less readable and (since it's only done once) has no meaningful performance impact.\n        std::map&lt;std::uint64_t, QString&gt; colorMap;\n        for (const auto&amp; key : keyList)\n            colorMap.emplace(QColor(key).rgba64(), key);\n\n        // Convert to faster and smaller vector lookup.\n        _keys.reserve(colorMap.size());\n        _values.reserve(colorMap.size());\n        for (const auto&amp; [key, value] : colorMap)\n        {\n            _keys.emplace_back(key);\n            _values.emplace_back(value);\n        }\n    }\n\n    QString getName(const QColor&amp; color) const\n    {\n        auto rgba = color.rgba64();\n        // Binary search for the RGBA value.\n        auto [notLessThan, greaterThan] = std::equal_range(_keys.begin(), _keys.end(), rgba);\n\n        // If this is not a named color, return the RGB code instead.\n        if (notLessThan == greaterThan)\n            return color.name();\n\n        // We found a matching ARGB value, obtain its index.\n        auto index = std::distance(_keys.begin(), notLessThan);\n        return _values[index];\n    }\n\n    std::vector&lt;std::uint64_t&gt; _keys;\n    std::vector&lt;QString&gt; _values; // ...or some kind of string view if you want.\n\n    friend QString getColorName(const QColor&amp; color);\n};\n\n// The interface for color -&gt; name lookups.\nQString getColorName(const QColor&amp; color)\n{\n    static NamedQColorLookup lookup;\n    return lookup.getName(color);\n}\n</code></pre>\n\n<p>We could use a <code>std::vector&lt;std::pair&lt;std::uint64_t, QString&gt;&gt;</code> instead of two separate vectors, but that would make the binary search slower (more cache misses).</p>\n\n<p>Play with it here: <a href=\"https://godbolt.org/z/z1fgyc\" rel=\"noreferrer\">https://godbolt.org/z/z1fgyc</a></p>\n"}], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 57491800, "answer_count": 2, "score": 3, "last_activity_date": 1565781542, "creation_date": 1565773513, "question_id": 57491507, "link": "https://stackoverflow.com/questions/57491507/is-there-a-way-to-get-qcolors-smart-name-if-any", "title": "Is there a way to get QColor&#39;s smart name if any?", "body": "<p>I create a color by name (\"red\", \"green\"), but later when I ask its name I get RGB info. Is there no way to retrieve's color name if any (obviously, they can't all have a name).</p>\n\n<pre><code>#include &lt;QColor&gt;\n#include &lt;iostream&gt;\n\nint main( int argc, char* argv[] )\n{\n    QColor color( \"red\" );\n    std::cout &lt;&lt; color.name().toStdString();\n    return 0;\n}\n</code></pre>\n\n<p>This outputs, \"#ff0000\", I would like it to output \"red\".</p>\n"}, {"tags": ["c++", "performance-testing"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1565773673, "post_id": 57491503, "comment_id": 101453044, "body": "Could it be that you&#39;re simply using <code>sizeof()</code> wrongly?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1565773736, "post_id": 57491503, "comment_id": 101453070, "body": "What do you mean by &quot;object&quot;? An instance of a class or structure? Why do you need the size? What is the problem you&#39;re trying to solve? And for some specific &quot;object&quot;, what is the size you expect, and what is the size you get?"}, {"owner": {"reputation": 3, "user_id": 11926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39284845ec1b443100ea1b0f7d9060f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ada", "link": "https://stackoverflow.com/users/11926423/ada"}, "edited": false, "score": 0, "creation_date": 1565773741, "post_id": 57491503, "comment_id": 101453074, "body": "Yes as I mentioned maybe I am using it wrongly"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1565773797, "post_id": 57491503, "comment_id": 101453104, "body": "i doubt there is a tool that does what you are aiming for. Consider <code>struct foo { int * f; }</code> there is no way to know whether the data stored at <code>f</code> belongs to <code>foo</code> or not, also you cannot know if <code>f</code> points to a single <code>int</code> or to an array of certain size. To know the size of an object <code>sizeof</code> is the right tool"}, {"owner": {"reputation": 3, "user_id": 11926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39284845ec1b443100ea1b0f7d9060f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ada", "link": "https://stackoverflow.com/users/11926423/ada"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1565773892, "post_id": 57491503, "comment_id": 101453155, "body": "@Someprogrammerdude I just made an edit I hope it helps"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1565774033, "post_id": 57491503, "comment_id": 101453218, "body": "Doing <code>sizeof</code> on a pointer will give you the size of the <i>pointer itself</i>, not what it might point to. The size of a pointer will typically be 4 on 32-bit systems and 8 on 64-bit systems. Also remember that structures and classes can contain <i>padding</i> between members, or after the last member, and that is counted with <code>sizeof</code>. And if you have virtual functions then the <code>sizeof</code> operator could include the data needed for the virtual dispatch table."}, {"owner": {"reputation": 3, "user_id": 11926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39284845ec1b443100ea1b0f7d9060f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ada", "link": "https://stackoverflow.com/users/11926423/ada"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1565774742, "post_id": 57491503, "comment_id": 101453600, "body": "@Someprogrammerdude still is there a way to measure the size of an instance and the things that it points to? For example for a simple array in Java if the array is empty the sizeof maven operator will give small number, then the size will increase with the number of elements included within the array"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1565776031, "post_id": 57491503, "comment_id": 101454233, "body": "For pointers it&#39;s not possible, since for an &quot;array&quot; it only points to the first element and there&#39;s no information about the size of the &quot;array&quot;. You simple have to keep track of it yourself (or better yet use <code>std::vector</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39284845ec1b443100ea1b0f7d9060f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ada", "link": "https://stackoverflow.com/users/11926423/ada"}, "edited": false, "score": 0, "creation_date": 1565774789, "post_id": 57491650, "comment_id": 101453621, "body": "could you maybe provide a reference or a simple usage of how to do that? Thank you for the useful answer"}], "tags": [], "owner": {"reputation": 11202, "user_id": 17440, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a46b70049b19294d9981a606765d3e10?s=128&d=identicon&r=PG", "display_name": "MrZebra", "link": "https://stackoverflow.com/users/17440/mrzebra"}, "is_accepted": true, "score": 3, "last_activity_date": 1565774015, "creation_date": 1565774015, "answer_id": 57491650, "question_id": 57491503, "link": "https://stackoverflow.com/questions/57491503/size-of-instance-of-class-in-c/57491650#57491650", "title": "Size of instance of class in c++", "body": "<p>There is no general way to get the total memory usage of an object in C++ including dynamically allocated memory (consider two objects, both of which have a pointer to the same third object.  Should the third object be counted twice?).</p>\n\n<p>If you wish to track memory usage in your application, then you can override <code>operator new</code> and/or create your own allocator for use with STL functions.</p>\n"}], "owner": {"reputation": 3, "user_id": 11926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39284845ec1b443100ea1b0f7d9060f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ada", "link": "https://stackoverflow.com/users/11926423/ada"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1565774041, "accepted_answer_id": 57491650, "answer_count": 1, "score": -5, "last_activity_date": 1565778464, "creation_date": 1565773505, "last_edit_date": 1565778464, "question_id": 57491503, "link": "https://stackoverflow.com/questions/57491503/size-of-instance-of-class-in-c", "closed_reason": "Not suitable for this site", "title": "Size of instance of class in c++", "body": "<p>I am trying to find a proper way to measure the size of objects in c++. Because previously I was using Java I was always using <a href=\"https://mvnrepository.com/artifact/com.carrotsearch/java-sizeof\" rel=\"nofollow noreferrer\">the following library</a> which iterates over the references of an object recursively and calculates the size in KB or in MB. I also saw that there is the possibility to use sizeof, however, this is not suitable for me since for an object it returns always the same size, no matter the data stored inside of it. Could you maybe provide some information or a library which measures the size of objects for performance testing or explain to me if I am mistaken for sizeof in C++? </p>\n\n<p>EDIT:\nI am trying to Measure the size of an instance of a class. \nI am measuring an instance of a class which includes an array. No matter the size of the array the sizeof operator returns 24 as a result. I am trying to compare two methods two types of structures and report on the size saving with the second one, or actually compare which method results in a larger size.</p>\n"}, {"tags": ["c++", "c++11", "boost", "iostream", "boost-iostreams"], "comments": [{"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 0, "creation_date": 1566672854, "post_id": 57491200, "comment_id": 101733227, "body": "Not sure how it will affect your code, but have you tried writing to your file using binary form (<code>ios::binary</code>), rather than text form? Under Windows <code>std::ofstream</code>, when operating in text mode, replaces &quot;\\n&quot; with &quot;\\r\\n&quot; already. So, you may have more &#39;\\r&#39; characters in your file than you expect. Online compilers usually use linux underneath, where sole &#39;\\n&#39; without preceding &#39;\\r&#39; is expected as a line end and <code>std::ofstream</code> in text mode does not add any additional &#39;\\r&#39; to the file."}], "answers": [{"comments": [{"owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "edited": false, "score": 0, "creation_date": 1565791139, "post_id": 57495952, "comment_id": 101462194, "body": "Thanks @lonut! 1) it&#39;s legacy =( 2) i&#39;ve seen examples from boost, but: 3) I don&#39;t understand why returning WOULD_BLOCK from filter::get() causes return eof() in reading func?"}, {"owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "reply_to_user": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "edited": false, "score": 0, "creation_date": 1565794345, "post_id": 57495952, "comment_id": 101463964, "body": "<code>WOULD_BLOCK</code> stops reading from the source and basically returns whatever it already read in the current iteration. Because this happens exactly on the buffer boundary, it hasn&#39;t read anything yet, so it returns <code>0</code>. A read that doesn&#39;t return any data is interpreted as an end of file. Once the eof flag is set, future reads from the stream will fail, so it stops completely."}, {"owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "edited": false, "score": 0, "creation_date": 1565797175, "post_id": 57495952, "comment_id": 101465566, "body": "What you wrote is the logic of these functions - it is more or less clear. But don\u2019t you find it strange that under some conditions, the return value of WOULD_BLOCK allows you to read further, and under others, it considers that the file is finished?But \u201cWOULD_BLOCK - indicates that input is temporarily unavailable\u201d: it doesn\u2019t indicate the end of stream. As a user of this function I have no idea about its internal buffer and its bounds..."}, {"owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "reply_to_user": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "edited": false, "score": 0, "creation_date": 1565953463, "post_id": 57495952, "comment_id": 101513458, "body": "@snake_style I added an update to the answer because it was too long for a comment."}], "tags": [], "owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "is_accepted": false, "score": 3, "last_activity_date": 1565953414, "last_edit_date": 1565953414, "creation_date": 1565790114, "answer_id": 57495952, "question_id": 57491200, "link": "https://stackoverflow.com/questions/57491200/c-getline-with-boostiostreamsfiltering-istream-works-strange/57495952#57495952", "title": "C++ getline() with boost::iostreams::filtering_istream works strange", "body": "<p>What are you trying to do with this part?</p>\n\n<pre><code>if(c == '\\r')\n    return boost::iostreams::WOULD_BLOCK;\n</code></pre>\n\n<p>If you're trying to ignore <code>\\r</code> characters then you should just skip over them and read another character from the source. The Boost docs have an example that shows exactly this:</p>\n\n<pre><code>#include &lt;ctype.h&gt;                 // isalpha\n#include &lt;cstdio.h&gt;                // EOF\n#include &lt;boost/iostreams/categories.hpp&gt; // input_filter_tag\n#include &lt;boost/iostreams/operations.hpp&gt; // get, WOULD_BLOCK\n\nusing namespace std;\nusing namespace boost::iostreams;\n\nstruct alphabetic_input_filter {\n    typedef char              char_type;\n    typedef input_filter_tag  category;\n\n    template&lt;typename Source&gt;\n    int get(Source&amp; src)\n    {\n        int c;\n        while ( (c = boost::iostreams::get(src)) != EOF &amp;&amp;\n                 c != WOULD_BLOCK &amp;&amp;\n                !isalpha((unsigned char) c) )\n            ;\n        return c;\n    }\n};\n</code></pre>\n\n<p>This removes all non-alphabetic characters from the source (see <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/iostreams/doc/concepts/input_filter.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_68_0/libs/iostreams/doc/concepts/input_filter.html</a>).</p>\n\n<p>Now as to why exactly you're seeing the behavior above, this is what's basically happening:</p>\n\n<ul>\n<li><p>you are returning <code>WOULD_BLOCK</code> from <code>get()</code> exactly on a buffer boundary, before any characters were set in the current buffer</p></li>\n<li><p>this gets called from a <code>read()</code> implementation that looks like this (see the two lines with comments towards the end):</p></li>\n</ul>\n\n\n\n<pre><code>template&lt;&gt;\nstruct read_filter_impl&lt;any_tag&gt; {\ntemplate&lt;typename T, typename Source&gt;\nstatic std::streamsize read\n   (T&amp; t, Source&amp; src, typename char_type_of&lt;T&gt;::type* s, std::streamsize n)\n{   // gcc 2.95 needs namespace qualification for char_traits.\n    typedef typename char_type_of&lt;T&gt;::type     char_type;\n    typedef iostreams::char_traits&lt;char_type&gt;  traits_type;\n    for (std::streamsize off = 0; off &lt; n; ++off) {\n        typename traits_type::int_type c = t.get(src);\n        if (traits_type::is_eof(c))\n            return check_eof(off);\n        if (traits_type::would_block(c)) // It gets HERE\n            return off; // and returns 0\n        s[off] = traits_type::to_char_type(c);\n    }\n    return n;\n}\n</code></pre>\n\n<p>(<a href=\"https://www.boost.org/doc/libs/1_70_0/boost/iostreams/read.hpp\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_70_0/boost/iostreams/read.hpp</a>)</p>\n\n<ul>\n<li>this in turn is called from code like this:</li>\n</ul>\n\n\n\n<pre><code>// Read from source.\nstd::streamsize chars =\n    obj().read(buf.data() + pback_size_, buf.size() - pback_size_, next_);\nif (chars == -1) {\n    this-&gt;set_true_eof(true);\n    chars = 0;\n}\nsetg(eback(), gptr(), buf.data() + pback_size_ + chars);\nreturn chars != 0 ?\n    traits_type::to_int_type(*gptr()) :\n    traits_type::eof();\n</code></pre>\n\n<p>(<a href=\"https://www.boost.org/doc/libs/1_70_0/boost/iostreams/detail/streambuf/indirect_streambuf.hpp\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_70_0/boost/iostreams/detail/streambuf/indirect_streambuf.hpp</a>)</p>\n\n<p>So because it hasn't read any characters in the current buffer, it interprets this as end of file and gives up completely.</p>\n\n<hr>\n\n<h2>UPDATE</h2>\n\n<p><strong>(too long for a comment)</strong></p>\n\n<p>You are not the user of that function, that function is actually the user of your code. Your filter comes between the source and the reader. <code>WOULD_BLOCK</code> does indicate that input is temporary unavailable, but it is ultimately the decision of the reader if and when it tries again. The <code>streambuf</code> does the best it can in this regard, it processes whatever it managed to get from the source and then tries to read again (that's why it doesn't stop the first time you return <code>WOULD_BLOCK</code>, after <code>Hello</code>). But if the source doesn't return anything more and the <code>streambuf</code> buffer is empty, it basically has no choice but to consider it reached the end of the source. It has no more characters to process in the buffer and can't get more from the source.</p>\n\n<p>You will see the same behavior if you put two consecutive <code>\\r</code> anywhere. Try this for example:</p>\n\n<pre><code>f &lt;&lt; \"Hello\\r\\r\\n\";\nf &lt;&lt; \"nothing\\r\\n\";\nf &lt;&lt; \"World!\\r\\n\";\n</code></pre>\n\n<p>Note the two <code>\\r</code>s after <code>Hello</code>. And this has nothing to do with buffer sizes. It's just a read from the source that doesn't return anything.</p>\n"}], "owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566404101, "creation_date": 1565772378, "last_edit_date": 1566404101, "question_id": 57491200, "link": "https://stackoverflow.com/questions/57491200/c-getline-with-boostiostreamsfiltering-istream-works-strange", "title": "C++ getline() with boost::iostreams::filtering_istream works strange", "body": "<p>Please, help me to understand the reasons for the difference in the behavior of the following program.</p>\n\n<p>The program creates a test text file and a chain of boost filters (<code>filtering_istream</code>) from one source and one filter. Then it tries to read some lines.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;boost/iostreams/device/file_descriptor.hpp&gt;\n#include &lt;boost/iostreams/filtering_stream.hpp&gt;\n\n\nclass my_filter : public boost::iostreams::input_filter\n{\npublic:\n    explicit my_filter(std::ostream&amp; s) : m_out(s)\n    {}\n\n    template&lt;typename Source&gt;\n    int get(Source&amp; src)\n    {\n        int c = boost::iostreams::get(src);\n        if(c == EOF || c == boost::iostreams::WOULD_BLOCK)\n            return c;\n\n        if(c == '\\r')\n            return boost::iostreams::WOULD_BLOCK;\n\n        if(c == '\\n')\n        {\n            m_out &lt;&lt; m_str &lt;&lt; std::endl;\n            m_str = \"\";\n        }\n        else\n        {\n            m_str += c;\n        }\n        return c;\n    }\nprivate:\n    std::ostream&amp; m_out;\n    std::string m_str;\n};\n\n\nint main()\n{\n    using namespace std;\n    boost::iostreams::filtering_istream file;\n    const std::string fname = \"test.txt\";\n\n    std::ofstream f(fname, ios::out);\n    f &lt;&lt; \"Hello\\r\\n\";\n    f &lt;&lt; \"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111\\r\\n\";\n    f &lt;&lt; \"World!\\r\\n\";\n    f.close();\n\n    file.push(my_filter(std::cout));\n    file.push(boost::iostreams::file_descriptor(fname));\n\n    std::string s;\n    while(std::getline(file, s))\n    {}\n    return 0;\n}\n</code></pre>\n\n<p>Online compilation with clang displays the expected result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OJF1j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OJF1j.png\" alt=\"enter image description here\"></a></p>\n\n<p>But if I change the string \"111...111\" (128 ones) to 127 ones (255 and so on), the result differs:</p>\n\n<p><a href=\"https://i.stack.imgur.com/K2rL6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K2rL6.png\" alt=\"enter image description here\"></a></p>\n\n<p>This behavior seems incorrect to me.</p>\n\n<p><strong>Note</strong>: the length of \"111...111\" (<strong>127 ones</strong>) correlates with <strong>default buffer_size</strong> in <code>boost::iostreams::filtering_istream::push</code> method... </p>\n\n<pre><code>file.push(my_filter(std::cout), default_buf_size=...)\n</code></pre>\n\n<p>You may see and run code here: <a href=\"https://wandbox.org/permlink/JJvKfVja9zEqudQv\" rel=\"nofollow noreferrer\">code_example</a></p>\n\n<h1>Update 1</h1>\n\n<p>I find it strange that under some conditions, the return value of <code>WOULD_BLOCK</code> allows you to read further, and under other conditions, it considers that the file is finished. But according to documentation: </p>\n\n<blockquote>\n  <p><strong>WOULD_BLOCK</strong> - indicates that input is temporarily unavailable</p>\n</blockquote>\n\n<p>So it doesn\u2019t indicate the end of stream.</p>\n"}, {"tags": ["c++", "linux", ".net-core", "pinvoke", "marshalling"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565775408, "post_id": 57490976, "comment_id": 101453900, "body": "Start with some debugging code. Check the offsets of the struct in both C# and C++. Do they match?"}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565782496, "post_id": 57490976, "comment_id": 101457468, "body": "Yes, the offsets match."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565794018, "post_id": 57490976, "comment_id": 101463764, "body": "Now check whether the data is being transferred correctly"}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565849460, "post_id": 57490976, "comment_id": 101479096, "body": "How can I do that?"}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565849511, "post_id": 57490976, "comment_id": 101479110, "body": "I tried to pass a struct with a single int property but got segfault again."}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565854341, "post_id": 57490976, "comment_id": 101480505, "body": "I think the problem is solved. Looks like the app was using wrong .so. I deleted the library and restarted the system. Then rebuilt everything and it started working."}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565857819, "post_id": 57490976, "comment_id": 101481738, "body": "Okay, what actually caused the error to go away is that I changed the function signature from <code>bool process_input(const settings&amp; settings, result* result)</code> to <code>bool process_input(settings settings, result* result)</code>. Why is this a problem on Linux but not on Windows?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565862442, "post_id": 57490976, "comment_id": 101483444, "body": "It&#39;s a problem on Windows too but you are getting lucky. You wouldn&#39;t get the right data on Windows."}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1565867387, "post_id": 57490976, "comment_id": 101485174, "body": "But I do get the right data on Windows. The app has been running on Windows for some time with no problem. How so? What is wrong with passing a struct as const ref in this case?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1565874683, "post_id": 57490976, "comment_id": 101488162, "body": "On WIndows I would have expected the C# to pass the struct by value on the stack. But perhaps the calling convention is not as I expected. Are you running a 64 bit process on Windows? In any case your C# code implied by value, and the C++ code by ref. So that is a mismatch. You should change the C# to pass by ref explicitly."}, {"owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1567413690, "post_id": 57490976, "comment_id": 101944316, "body": "Sorry for the late response, I was busy with another task. Yes, i&#39;m running a 64 bit process. Passing by ref worked. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "is_accepted": true, "score": 2, "last_activity_date": 1571240179, "creation_date": 1571240179, "answer_id": 58416997, "question_id": 57490976, "link": "https://stackoverflow.com/questions/57490976/net-core-on-linux-marshal-structures/58416997#58416997", "title": ".NET Core on Linux - Marshal structures", "body": "<p>As @David Heffernan <a href=\"https://stackoverflow.com/questions/57490976/net-core-on-linux-marshal-structures#comment101488162_57490976\">suggested</a>, I added explicit ref and it worked. \nHere's my function's signature before:</p>\n\n<pre><code>public static extern bool ProcessInput(Settings settings, out Result result);\n</code></pre>\n\n<p>and after:</p>\n\n<pre><code>public static extern bool ProcessInput(ref Settings settings, out Result result);\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4964351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F2T8CvEvJvI/AAAAAAAAAAI/AAAAAAAAAeU/vUOVKOpsBP0/photo.jpg?sz=128", "display_name": "user4964351", "link": "https://stackoverflow.com/users/4964351/user4964351"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 58416997, "answer_count": 1, "score": 1, "last_activity_date": 1571240179, "creation_date": 1565771499, "last_edit_date": 1565771816, "question_id": 57490976, "link": "https://stackoverflow.com/questions/57490976/net-core-on-linux-marshal-structures", "title": ".NET Core on Linux - Marshal structures", "body": "<p>I have a .NET Core console app that calls some functions from C++ library. The function I'm trying to call simpty taken in some <code>settings</code> and outputs the result into <code>result</code>. </p>\n\n<p>C++:</p>\n\n<pre><code>struct settings\n{\n    char* input_path;\n    char* first_file;\n    char* second_file;\n    char* mask;\n    char* log_path;\n    int count_accepted;\n    double confidence;\n    char* device;\n};\n\nstruct result\n{\n    int count;\n    foo* foos;\n    bool is_preprocessed;\n    double duration;\n};\n\nbool process_input(const settings&amp; settings, result* result);\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential)]\npublic struct Settings\n{\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string input_path;\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string first_file;\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string second_file;\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string mask;\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string log_path;\n    [MarshalAs(UnmanagedType.I4)]\n    public int count_accepted;\n    [MarshalAs(UnmanagedType.R8)]\n    public double confidence;\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string device;\n}\n\n[StructLayout(LayoutKind.Sequential)]\npublic struct Result\n{\n    [MarshalAs(UnmanagedType.I4)]\n    public int count;\n    [MarshalAs(UnmanagedType.SysInt)]\n    public IntPtr foos;\n    [MarshalAs(UnmanagedType.I1)]\n    public bool is_preprocessed;\n    [MarshalAs(UnmanagedType.R8)]\n    public double duration;\n}\n\n[DllImport(\"myLib\", EntryPoint = \"process_input\", CallingConvention = CallingConvention.Cdecl)]\n[return:MarshalAs(UnmanagedType.I1)]\npublic static extern bool ProcessInput(Settings settings, out Result result);\n</code></pre>\n\n<p>This all works well on Windows but does not work on Linux. When I print the settings on a C++ side (from <code>process_input</code>), I get completely different values in int and double properties, and a Segmentation Fault when try to access char* property.</p>\n\n<p>I also tried to call this library from C++ code (Windows and Linux) and it works as expected. As I understand, this is a marshaling problem, but I can't pinpoint it myself. I'm a C# developer and don't have much experience with C++ or PInvoke or Linux. </p>\n\n<p>I work with Windows 10 (x64) and Ubuntu 16.04 (x64).</p>\n"}, {"tags": ["c++", "pointers", "ffmpeg", "libav"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565770950, "post_id": 57490833, "comment_id": 101451752, "body": "What about using a <code>std::shared_ptr</code>, instead of raw pointers?"}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565771108, "post_id": 57490833, "comment_id": 101451825, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m aware of shared_ptr benefits, but I don&#39;t control AvFrame, therefore I need to deal with the fact that it uses raw pointers. That being said, I also can&#39;t create a shared_ptr fo AvFrame, because I really need to throw it away almost immediately after its creation, because I need to create a new struct which contains some of its members (why? because I also want to deal with frames decoded from other decoders, so I need a common struct for all of them)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565771220, "post_id": 57490833, "comment_id": 101451881, "body": "Hmm, well. Looks like your chances are low to get away without copies then. You probably should <a href=\"https://stackoverflow.com/posts/57490833/edit\">edit</a> your question to make it clear that you don&#39;t have control over these structures used."}, {"owner": {"reputation": 111, "user_id": 4478264, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kdv2DCwN8ck/AAAAAAAAAAI/AAAAAAAAAPQ/T37EOzNW60Y/photo.jpg?sz=128", "display_name": "Moeren", "link": "https://stackoverflow.com/users/4478264/moeren"}, "edited": false, "score": 0, "creation_date": 1565771318, "post_id": 57490833, "comment_id": 101451939, "body": "Your <code>myNewStruct</code> could just hold the AVFrame itself maybe?"}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 111, "user_id": 4478264, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kdv2DCwN8ck/AAAAAAAAAAI/AAAAAAAAAPQ/T37EOzNW60Y/photo.jpg?sz=128", "display_name": "Moeren", "link": "https://stackoverflow.com/users/4478264/moeren"}, "edited": false, "score": 0, "creation_date": 1565771474, "post_id": 57490833, "comment_id": 101452026, "body": "@Moeren if that&#39;s the only possibility, I&#39;ll have to do it. But I realy wanted to get rid of anything ffmpeg-related and create a struct that is unaware of any decoder, so I don&#39;t need to include android decoder sources into the desktop app, for example"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565771514, "post_id": 57490833, "comment_id": 101452047, "body": "Could you assign the pointer to myStruct and then assign data in AVFrame to null? No idea if that feasible."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565771540, "post_id": 57490833, "comment_id": 101452057, "body": "You could try just stealing the pointers - <code>myNewStruct.buffer[i] = avFrame-&gt;data[i]; avFrame-&gt;data[i] = 0;</code> - but whether that&#39;s supported is another matter."}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565771584, "post_id": 57490833, "comment_id": 101452076, "body": "@molbdnilo you and john had the same idea, but what you mean supported?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565771626, "post_id": 57490833, "comment_id": 101452096, "body": "Unrelated: <code>myNewStruct.buffer[i] = new uint8_t;</code> and then immediately overwriting it is a memory leak. (<code>new</code> is not used to create pointers.)"}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565771653, "post_id": 57490833, "comment_id": 101452103, "body": "@molbdnilo thanks I&#39;ll fix it (unrelated)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565771696, "post_id": 57490833, "comment_id": 101452129, "body": "@GuerlandoOCs You need to investigate whether that is something you&#39;re allowed to do or if something might break."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1565771800, "post_id": 57490833, "comment_id": 101452167, "body": "@GuerlandoOCs According to my very brief reading of the documentation the data is actually held in something called an AVBuffer, and that is reference counted. So maybe you should be looking into that."}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565832802, "post_id": 57490833, "comment_id": 101476382, "body": "@john where did you find this information? I want to learn what a reference count means"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565847964, "post_id": 57490833, "comment_id": 101478798, "body": "Referencing counting is a technique where an object keeps track of how many &#39;references&#39; have been made to is, and only gets freed when that count reaches zero. Reference in this context isn&#39;t the same as a C++ reference, but just means any way that one object can refer to another. Reference counting is a very well known technique and quite easy to implement in C++. I&#39;m sure you can google it if you want to know more."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565848209, "post_id": 57490833, "comment_id": 101478846, "body": "I&#39;m getting my info from <a href=\"https://ffmpeg.org/doxygen/2.8/group__lavu__buffer.html\" rel=\"nofollow noreferrer\">here</a> but I&#39;m no expert on this API. But I think the point is that the AVFrame will be holding a reference to an AVBuffer (so it&#39;s reference count will be 1) if you also make a reference to the same buffer then it&#39;s reference count will increase to 2. When the AVFrame is destroyed the buffers reference count will go back to 1 again but the buffer won&#39;t be deleted because the reference count is still more than zero. Only when you drop you reference will the count go down to zero and the buffer be freed."}], "owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565771529, "creation_date": 1565770854, "last_edit_date": 1565771529, "question_id": 57490833, "link": "https://stackoverflow.com/questions/57490833/making-new-struct-point-to-data-from-old-struct-without-old-struct-deleting-it", "title": "Making new struct point to data from old struct without old struct deleting it", "body": "<p>Here's how I decode videos in ffmpeg:</p>\n\n<pre><code>AVFrame* avFrame;\navFrame = av_frame_alloc();\nint receiveFrameResult = avcodec_receive_frame(avCodecContext, avFrame);\n</code></pre>\n\n<p>Now my <code>AVFrame</code> struct has video data in its <code>uint8_t * data</code> field.</p>\n\n<p>I want to create my own struct <code>myNewStruct</code> which holds the data that <code>AVFrame</code> has in <code>uint8_t * data[]</code>. </p>\n\n<p>The problem is that I don't want to waste CPU time by copying value by value from <code>avFrame-&gt;data</code> to <code>myNewStruct-&gt;buffer</code>.</p>\n\n<p>I also can't simply copy the data like this:</p>\n\n<pre><code>myNewStruct.buffer[i] = new uint8_t;\nmyNewStruct.buffer[i] = avFrame-&gt;data[i];\n</code></pre>\n\n<p>because when <code>avFrame</code> gets destructed, it deletes the allocated data for <code>data</code>. I also can't avoid deleting <code>avFrame</code> because it contains other unuseful fields that I don't want in <code>myNewStruct</code>.</p>\n\n<p>How should I make <code>myNewStruct-&gt;buffer</code> point to the same data as <code>avFrame-&gt;data</code> points, but without worrying if <code>avFrame</code> is going to delete it?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p><code>AVFrame</code> is from ffmpeg so I don't have any control of its contents, therefore I cannot make its pointers of type <code>shared_ptr</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565770017, "post_id": 57490591, "comment_id": 101451267, "body": "Where&#39;s an explicit specialisation??? Such one would look like: <code>template&lt;&gt; struct Test&lt;int&gt; { &#47;* possibly totally different interface... *&#47; };</code> All you have is an <i>instantiation</i> (<code>Test&lt;int&gt; v;</code>)."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565771094, "post_id": 57490591, "comment_id": 101451818, "body": "@Aconcagua  So  the code template&lt;&gt; struct Test&lt;int&gt;{/**/} is what the complier generate at POI?It looks like explicite specilization"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565772762, "post_id": 57490591, "comment_id": 101452621, "body": "<i>Explicit</i> means you write it on your own. Did you do so? No. So at best, you could say that instantiation is <i>implicit</i> specialisation. Explicit specialisations allow you to have totally different implementation: <code>template&lt;&gt; struct Test&lt;int&gt; { int someTotallyDifferentFunction(std::string const&amp;, double) const { &#47;*...*&#47; } };</code> \u2013 note that the original <code>memberfunc</code> disappeared (in code, but the specialised template won&#39;t have it either!)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565773340, "post_id": 57490591, "comment_id": 101452893, "body": "Your questions are very unclear. The generated code &quot;looks like&quot; the code you&#39;re looking at (except it&#39;s most likely a syntax tree, not source code), and generated instantiations can be expected to &quot;look like&quot; specialisations, all with syntactically identical definitions."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565773557, "post_id": 57490591, "comment_id": 101452995, "body": "@Aconcagua Yes,I see the explicite specialization means what,I just want to understand,The form of the code at POI is equivalent the form of explicite specialization,for example,when Complier see the code Test&lt;char&gt; v and immediatly generate the code looks like &quot;template&lt;&gt; struct Test&lt;char&gt;{/* the same content as the primary template  */}&quot; at the POI?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565774152, "post_id": 57490591, "comment_id": 101453276, "body": "Actually, that&#39;s pure internal representation. The compiler most likely won&#39;t generate any real C++ code at all, it rather will directly generate some kind of object code which is equivalent to the instantiated template, but that wouldn&#39;t differ from code generated from a separate <code>struct __Test__char { &#47;* again same interface *&#47; };</code>."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1565774188, "post_id": 57490591, "comment_id": 101453298, "body": "@molbdnilo I&#39;m sorry that I didn&#39;t ask the question clearly,I just want to know when the complier see code Test&lt;char&gt; b and  at the POI,the complier generated code Is it like I wrote these codes in that position looks like &quot;template&lt;&gt; struct Test&lt;char&gt;{ /* the content is same as the primary template */}&quot;?"}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565774672, "post_id": 57490591, "comment_id": 101453571, "body": "@Aconcagua,Thanks ,So The complier may be generate the code like <code>struct __Test__char { &#47;* again same interface *&#47; };</code>  The actally code  only depend complier&#39;s  internal implement,Instead of the form I wrote above?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565775601, "post_id": 57490591, "comment_id": 101454004, "body": "Such code, either as specialised template or as separate class most likely won&#39;t ever exist anywhere in memory. Compiling code is a pretty complex process, starting with parsing the file into separate tokens and organising these appropriately. From these tokens, it will deduce the code structure in some kind of internal representation. Why should now a compiler generate C++ again, which it would need to re-parse and tokenise??? If at all, it instantiates a template directly in its own internal representation, whichever this might be..."}, {"owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565775847, "post_id": 57490591, "comment_id": 101454129, "body": "@Aconcagua ,why I ask this question ,because  <a href=\"https://stackoverflow.com/questions/57492168/what-actally-reason-of-the-specialization-redefined\" title=\"what actally reason of the specialization redefined\">stackoverflow.com/questions/57492168/&hellip;</a>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1565776102, "post_id": 57490591, "comment_id": 101454278, "body": "This has a different reason, see there..."}], "owner": {"reputation": 4331, "user_id": 11796722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hbVqmiJejgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehNL7lbCriSOGqR5fVrWy6CjMYYA/photo.jpg?sz=128", "display_name": "xmh0511", "link": "https://stackoverflow.com/users/11796722/xmh0511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1565769997, "answer_count": 0, "score": 0, "last_activity_date": 1565772756, "creation_date": 1565769828, "last_edit_date": 1565772756, "question_id": 57490591, "link": "https://stackoverflow.com/questions/57490591/at-the-point-of-instantiation-what-the-code-generated-looks-like", "closed_reason": "Duplicate", "title": "At the point of instantiation what the code generated looks like", "body": "<pre><code>template&lt;typename T&gt;\nstruct Test{\n   void memberfunc(){\n   }\n}\ntemplate&lt;typename T&gt;\nint func(T value){\n   std::cout&lt;&lt;value&lt;&lt;std::endl;\n}\n/// may be the  class template POI\n////some code here\nint main(){\n   Test&lt;int&gt; v;\n   func(12.0); \n}\n/// may be the template function POI  \n////some code here\n</code></pre>\n\n<p>when I used the command \"clang++ -Xclang -ast-print -fsyntax-only main.cpp\" and the printed result show the complier generated the code </p>\n\n<pre><code>template&lt;&gt;\nstruct Test&lt;int&gt;{\n   void memberfunc(){\n   }\n}\n\ntemplate&lt;&gt;\nint func&lt;dobule&gt;(double value){\n   std::cout&lt;&lt;value&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>after their primary template,These code looks like User defined explicite Specilization code \nSo<br>\nQuestion 1:<br>\nwhat the code the complier generated looks like at the point of instantiation?</p>\n\n<p>Question 2:<br>\nwhat the difference between the code at the POI and the code explicite Specialization</p>\n"}, {"tags": ["c++", "math", "x86", "micro-optimization", "integer-division"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1565769788, "post_id": 57490540, "comment_id": 101451161, "body": "<code>(C ^ D) &amp; 0x1</code> will be either <code>0</code> or <code>1</code>, and you can simply add it to <code>C</code> unconditionally."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1565769880, "post_id": 57490540, "comment_id": 101451213, "body": "But before you start with such micro-optimizations, build with optimizations enabled and <i>measure</i> and <i>profile</i> and if needed check the generated assembly. Perhaps this isn&#39;t such a bottle-neck that you really think it is?"}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1565801918, "post_id": 57490540, "comment_id": 101467683, "body": "floor(A / B) * B"}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1565771150, "creation_date": 1565771150, "answer_id": 57490907, "question_id": 57490540, "link": "https://stackoverflow.com/questions/57490540/most-efficient-way-to-find-the-greatest-number-not-greater-than-a-which-is-divi/57490907#57490907", "title": "Most efficient way to find the greatest number not greater than A, which is divisible by B", "body": "<p>I assume the inputs <code>A</code> and <code>B</code> are also <code>uint32_t</code>?</p>\n\n<p><strong>The cost of the division dwarfs everything else</strong>, unless <code>B</code> is known at compile time after inlining.  (Even if it's not a power of 2).  The actual <code>div</code> instruction is very expensive compared to anything else, and can't vectorize with SIMD.  (The only SIMD division available on x86 is FP, or of course integer shifts for division by 2).</p>\n\n<p>By far the most useful thing you could do is arrange for <code>B</code>'s value to be visible to the compiler at compile time, or at least with link-time optimization for cross-file inlining.  (<a href=\"https://stackoverflow.com/questions/41183935/why-does-gcc-use-multiplication-by-a-strange-number-in-implementing-integer-divi\">Why does GCC use multiplication by a strange number in implementing integer division?</a>)</p>\n\n<hr>\n\n<p>If <code>B</code> isn't a compile-time constant, x86 division will produce the remainder for free, along with the quotient.  <code>sub</code> is cheaper than <code>imul</code>, so use and let the compiler optimize:</p>\n\n<pre><code>uint32_t D = A / B;\nuint32_t C = A - A % B;\n</code></pre>\n\n<p>And if <code>B</code> is a compile-time constant, the compiler will optimize it to a divide then multiply anyway and (hopefully) optimize this down to as good as you'd get with your original.</p>\n\n<hr>\n\n<p>And no, <code>(C^D) ^ 1</code> should be a more efficient way to check that the low bits differ than <code>(C % 2) != (D % 2)</code>.  Doing something separate to each input before combining would cost more instructions, so it's better to lead the compiler in the direction of the more efficient asm implementation.  (Obviously it's a good idea to have a look at the asm output for both cases).</p>\n\n<p>Possibly useful would be to use <code>+</code> instead of <code>^</code>.  XOR = Addition without carry, but you only care about the low bit.  The low bit of <code>^</code> and <code>+</code> is always the same.  This gives the compiler the option of using an <code>lea</code> instruction to copy-and-add.  (Probably not helpful in this case; it's ok if the compiler destroys the \n value in the register holding <code>D</code>, assuming it's dead after this.  But if you also use D directly)</p>\n\n<hr>\n\n<p>Of course, you don't actually want to branch with <code>if(...)</code> so you should write it as:</p>\n\n<pre><code>C += (C+D) &amp; 1;       // +1 if low bits differ\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 10933370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZYsn6JU77Rw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYSI-zJZ1SreMfXEsGjI4osxKAXUw/mo/photo.jpg?sz=128", "display_name": "Bioliquid", "link": "https://stackoverflow.com/users/10933370/bioliquid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1565787933, "accepted_answer_id": 57490907, "answer_count": 1, "score": -1, "last_activity_date": 1565771150, "creation_date": 1565769667, "last_edit_date": 1565770019, "question_id": 57490540, "link": "https://stackoverflow.com/questions/57490540/most-efficient-way-to-find-the-greatest-number-not-greater-than-a-which-is-divi", "closed_reason": "Opinion-based", "title": "Most efficient way to find the greatest number not greater than A, which is divisible by B", "body": "<p>I have 2 numbers A and B. I want to find <code>C = A - (A % B)</code>, but there are some problems. First of all, if <code>C</code> and <code>D = A / B</code> should have the same parity ((even and even) or (odd and odd)), otherwise C should be incremented (<code>++C</code>). The second problem is that I constantly do this calculation, so I want the cost of it to be as small as possible. Right now my solution looks like this:</p>\n\n<pre><code>uint32_t D = A / B;\nC = D * B;\nif ((C ^ D) &amp; 0x1) ++C;\n</code></pre>\n\n<p>Is there a better way to do this? Maybe <code>(C % 2) != (D % 2)</code> is faster because of compiler optimizations, but I can't proof it. I would also like to know if it can be done with some specific intel functions (registers).</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565768621, "post_id": 57490208, "comment_id": 101450612, "body": "<a href=\"https://en.cppreference.com/w/cpp/types/is_same\" rel=\"nofollow noreferrer\"><code>std::is_same</code></a> should be helpful, in combination with <a href=\"https://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\"><code>std::enable_if</code></a>."}, {"owner": {"reputation": 309, "user_id": 998891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c815e25a8d8638e3b169c8986b78be0d?s=128&d=identicon&r=PG", "display_name": "nihohit", "link": "https://stackoverflow.com/users/998891/nihohit"}, "edited": false, "score": 0, "creation_date": 1565769470, "post_id": 57490208, "comment_id": 101451010, "body": "Just to be clear - the answer that this duplicates doesn&#39;t seem to be for a generic case, but specifically for &#39;char&#39;. Can it be expanded by just adding another template argument, instead of char?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565769796, "post_id": 57490208, "comment_id": 101451173, "body": "@Max OK, I reopened the question, feel free to write an answer."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565770618, "post_id": 57490656, "comment_id": 101451576, "body": "Any comments on <a href=\"https://godbolt.org/z/2r284E\" rel=\"nofollow noreferrer\">the order of <code>_value</code> declaration` and the operator mattering</a> (<a href=\"https://godbolt.org/z/59KeLZ\" rel=\"nofollow noreferrer\">compare</a>)? That took me by surprise at least... I could ask a new question though."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565770774, "post_id": 57490656, "comment_id": 101451660, "body": "Also, the code still has an error: You take <code>T</code> as the second argument and then do <code>second._value</code>. Shouldn&#39;t you take <code>Proxy</code> as the second argument?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565770775, "post_id": 57490656, "comment_id": 101451661, "body": "@MaxLanghof - I&#39;m called into a meeting. I have every intention of fixing the OP&#39;s example in a bit. Sorry for the radio silence."}, {"owner": {"reputation": 309, "user_id": 998891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c815e25a8d8638e3b169c8986b78be0d?s=128&d=identicon&r=PG", "display_name": "nihohit", "link": "https://stackoverflow.com/users/998891/nihohit"}, "edited": false, "score": 0, "creation_date": 1565771139, "post_id": 57490656, "comment_id": 101451846, "body": "BTW, I see that in c++17 the decltype is unnecessary, and this is sufficient:    template &lt;class U&gt;    auto operator==(U const&amp; other) const  { return _value == other; }"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 309, "user_id": 998891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c815e25a8d8638e3b169c8986b78be0d?s=128&d=identicon&r=PG", "display_name": "nihohit", "link": "https://stackoverflow.com/users/998891/nihohit"}, "edited": false, "score": 1, "creation_date": 1565771633, "post_id": 57490656, "comment_id": 101452099, "body": "@nihohit - You won&#39;t get SFINAE if you dispense with the decltype, it will be hard error"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 309, "user_id": 998891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c815e25a8d8638e3b169c8986b78be0d?s=128&d=identicon&r=PG", "display_name": "nihohit", "link": "https://stackoverflow.com/users/998891/nihohit"}, "edited": false, "score": 1, "creation_date": 1565771649, "post_id": 57490656, "comment_id": 101452101, "body": "@nihohit It should still be necessary, because you don&#39;t want the <code>operator==</code> to be considered available if its instantiation leads to a hard error. That may be fine in the immediate moment (&quot;you tried to compare a <code>Proxy</code> to something it couldn&#39;t be compared to and got an error, that&#39;s good&quot;), but you shouldn&#39;t do that. Your operator should itself be SFINAE-friendly (and I believe there are other contexts where this operator would be implicitly instantiated where you will then get an error even though you shouldn&#39;t)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1565772229, "post_id": 57490656, "comment_id": 101452350, "body": "@MaxLanghof - Fleshed it out. It&#39;s not as short and sweet as one would like anymore, but at least it works."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1565772201, "last_edit_date": 1565772201, "creation_date": 1565770107, "answer_id": 57490656, "question_id": 57490208, "link": "https://stackoverflow.com/questions/57490208/finding-template-equality-operators/57490656#57490656", "title": "Finding template equality operators", "body": "<p>Since your criteria is essentially whether or not an expression like <code>_value == other</code> is well-formed, you can just rely on <a href=\"https://stackoverflow.com/questions/12654067/what-is-expression-sfinae\">expression SFINAE</a> to test it.</p>\n\n<pre><code>  template &lt;class U&gt; // this should exist only if the T == U operator is defined\n  auto operator==(U const&amp; other) const -&gt; decltype(_value == other)\n  { return _value == other; }\n\n  template &lt;class U, std::enable_if_t&lt;!std::is_same&lt;U, Proxy&gt;::value, int&gt; = 0&gt; // this should exist only if U == T is defined\n  friend auto operator==(U const&amp; first, Proxy const&amp; second) -&gt; decltype(first == second._value)\n  { return first == second._value; }\n</code></pre>\n\n<p>It may not be very DRY, since we need to repeat the expression twice, but it's a fairly simple way to do SFINAE, which is a major plus.</p>\n\n<p>The other thing to note is that we do not want the second overload to be considered recursively, which may happen upon comparison of two proxies. So we need another SFINAE condition, spelled out the old fashioned way with <code>enable_if</code>, to discard the overload when <code>U</code> is a <code>Proxy</code>. This relies on the C++14 feature whereby substitutions are checked in declaration order. Putting it first prevents the recursion in <code>first == second._value</code>.</p>\n"}], "owner": {"reputation": 309, "user_id": 998891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c815e25a8d8638e3b169c8986b78be0d?s=128&d=identicon&r=PG", "display_name": "nihohit", "link": "https://stackoverflow.com/users/998891/nihohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57490656, "answer_count": 1, "score": 2, "last_activity_date": 1565772201, "creation_date": 1565768525, "last_edit_date": 1565771090, "question_id": 57490208, "link": "https://stackoverflow.com/questions/57490208/finding-template-equality-operators", "title": "Finding template equality operators", "body": "<p>I want to write a proxy class, that takes a template value and can be compared to any class that the template can be compared to.</p>\n\n<pre><code>template &lt;class T&gt;\nclass Proxy {\npublic:\n  Proxy(T value) : _value(value) {}\n\n  template &lt;class U&gt; // this should exist only if the T == U operator is defined\n  bool operator==(U const&amp; other) const  { return _value == other; }\n\n  template &lt;class U&gt; // this should exist only if U == T is defined\n  friend bool operator==(U const&amp; first, Proxy&lt;T&gt; const&amp; second) const  { return first == second._value; }\n\nprivate:\n  T _value;\n};\n</code></pre>\n\n<p>for example, since this is legal code:</p>\n\n<pre><code>bool compare(std::string first, std::string_view second) {\n  return first == second;\n}\n</code></pre>\n\n<p>I want this to be legal, too:</p>\n\n<pre><code>bool compare(std::string first, Proxy&lt;std::string_view&gt; second) {\n  return first == second;\n}\n</code></pre>\n\n<p>but just to clarify, this should work for any classes that can be compared, or can be implicitly converted in order to be compared. Can I define a template conditional that will check for either case?</p>\n"}, {"tags": ["c++", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565768355, "post_id": 57490131, "comment_id": 101450479, "body": "Use <code>new</code> to allocate new nodes, and properly initialize the member variables using a constructor function. Especially <code>next</code> must be initialized with <code>NULL</code> (or even better with <code>nullptr</code>)."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565768476, "post_id": 57490131, "comment_id": 101450550, "body": "It&#39;s funny <code>Program is executing without any errors</code> but <code>running an infinite loop after entering the very first number.</code>"}, {"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565768810, "post_id": 57490131, "comment_id": 101450705, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 tried it using your way, still an infinite loop. Would you mind executing the code on your machine?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565768863, "post_id": 57490131, "comment_id": 101450730, "body": "@HikkiGOAT Would you mind to inspect your code with the debugger please?"}, {"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565768890, "post_id": 57490131, "comment_id": 101450742, "body": "@john I mean the logical error. Lol, my bad. A common beginner mistake"}, {"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565768979, "post_id": 57490131, "comment_id": 101450790, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Sorry bro, but I don&#39;t have any idea how to debug code :("}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1565769046, "post_id": 57490131, "comment_id": 101450818, "body": "@HikkiGOAT That&#39;s an essential skill that every programmer should get familiar with from hour zero."}, {"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1565769619, "post_id": 57490131, "comment_id": 101451074, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Oh! So I must go see some online tutorials on debugging. Thanks for the suggestion :)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "edited": false, "score": 0, "creation_date": 1565769327, "post_id": 57490327, "comment_id": 101450950, "body": "thanks a lot, bro. I meant to write the second snippet. What does the &quot;return;&quot; in the first snippet means? And why should I use the constructor? And thanks a lot for clarifying the problem :)"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "edited": false, "score": 0, "creation_date": 1565770092, "post_id": 57490327, "comment_id": 101451302, "body": "<code>return</code> would exit the function immediately at that point. So the difference between that and what you intended is just a matter of style."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565770228, "post_id": 57490327, "comment_id": 101451396, "body": "It&#39;s actually more important to be using <code>new</code> instead of <code>malloc</code>. The principal difference between <code>new</code> and <code>malloc</code> is that <code>new</code> will call the constructor for the object being created (if it exists) but <code>malloc</code> will not. So using <code>malloc</code> you can end up with unconstructed objects which is often bad news, although it doesn&#39;t matter in this case."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565770349, "post_id": 57490327, "comment_id": 101451437, "body": "As for why you should use constructors, it&#39;s just that how objects are initialised is very important, and in object oriented programming you want to control that process, and in C++ constructors are the way you do that. The need for them will become clearer as you get more experience, but there&#39;s no harm in getting into good habits now."}, {"owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "edited": false, "score": 0, "creation_date": 1565772278, "post_id": 57490327, "comment_id": 101452372, "body": "@john I knew that c++ uses &quot;new&quot; now and whenever we will be creating a new node new will call the constructor and the constructor then will initialize the data field. I was thinking there would be another reason for using constructors other than this. Actually, the tutorial i was following uses  malloc for providing the indepth knowledge on how a memory block is allocated dynamically. And yes  thanks for clarifying this as well :)."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 0, "last_activity_date": 1565770864, "last_edit_date": 1565770864, "creation_date": 1565768931, "answer_id": 57490327, "question_id": 57490131, "link": "https://stackoverflow.com/questions/57490131/inserting-node-at-rear-end-in-a-singly-linked-list/57490327#57490327", "title": "Inserting node at rear end in a singly linked list", "body": "<p>Well the logic of the <code>insert</code> function is clearly wrong</p>\n\n<p>Lets step though it.</p>\n\n<p>First you allocate the node and assign it to <code>temp</code>. Since this is C++ you should use new and you should use a constructor, but we'll let that pass.</p>\n\n<p>Then since <code>head</code> equals NULL you set <code>head</code> to the <code>temp</code>.</p>\n\n<p>Then you set <code>temp1</code> to <code>head</code>, which because of the previous step means <code>temp1</code> equals <code>temp</code>.</p>\n\n<p>Then you loop to the last node pointed to by <code>temp1</code>. In this case you're already at the last node so the loop isn't entered.</p>\n\n<p>Then you set <code>temp1-&gt;next</code> to <code>temp</code>, but remember that <code>temp1</code> equals <code>temp</code>, (see two steps previous), so now you've created a circular list. This explains your infinite loop.</p>\n\n<p>I'm guessing that you meant to write this</p>\n\n<pre><code>if (head == NULL) { head = temp; return; }\n</code></pre>\n\n<p>or maybe this</p>\n\n<pre><code>if (head == NULL)\n{\n    head = temp; \n}\nelse\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11925945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d8848a4eef1ce6597963e5498df99?s=128&d=identicon&r=PG&f=1", "display_name": "HikkiGOAT", "link": "https://stackoverflow.com/users/11925945/hikkigoat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 57490327, "answer_count": 1, "score": 0, "last_activity_date": 1565770864, "creation_date": 1565768199, "question_id": 57490131, "link": "https://stackoverflow.com/questions/57490131/inserting-node-at-rear-end-in-a-singly-linked-list", "title": "Inserting node at rear end in a singly linked list", "body": "<p>I am coding on inserting a node at the end in a singly LinkedList. Program is executing without any errors but running an infinite loop after entering the very first number. I can't find the logical error I have committed in the code. Any help would be appreciable :). </p>\n\n<p>Here is the code and what I've tried:</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nstruct node{\n    int data;\n    node* next;\n};\nnode* head = NULL; // empty list\nnode* temp;\nvoid insert(int x){\n    temp = (node*)malloc(sizeof(node));\n    temp -&gt; data = x;\n    temp -&gt; next = NULL;\n    if (head == NULL) head = temp; \n    node* temp1 = head;\n    // traversing the list\n    while(temp1 -&gt; next != NULL){\n    temp1 = temp1 -&gt; next;\n    }   \n    temp1 -&gt; next = temp;\n}\nvoid print(){\n    node* iterator = head;\n    while(iterator != NULL){\n        cout &lt;&lt; iterator -&gt; data;\n        iterator = iterator -&gt; next;\n    }\n}\nint main(){\n    int n, x;\n    cout &lt;&lt; \"how many numbers\\n\";\n    cin &gt;&gt; n;\n    for(int i = 0; i &lt; n; i++){\n        cout &lt;&lt; \"enter the value\";\n        cin &gt;&gt; x;\n        insert(x);\n        print();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I expect the output to be a linked list but the o/p is an infinite number of first entered number/data ('x' in this case)</p>\n"}, {"tags": ["c++", "qt", "opengl", "glsl", "qt3d"], "comments": [{"owner": {"reputation": 951, "user_id": 11856081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sO5f1.png?s=128&g=1", "display_name": "Eddy Alleman", "link": "https://stackoverflow.com/users/11856081/eddy-alleman"}, "edited": false, "score": 0, "creation_date": 1565767557, "post_id": 57489897, "comment_id": 101450148, "body": "what version of Qt are you using? I&#39;m asking because QPhongAlphaMaterial is marked as deprecated in the QtDocs."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 951, "user_id": 11856081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sO5f1.png?s=128&g=1", "display_name": "Eddy Alleman", "link": "https://stackoverflow.com/users/11856081/eddy-alleman"}, "edited": false, "score": 0, "creation_date": 1565768015, "post_id": 57489897, "comment_id": 101450332, "body": "@EddyAlleman I&#39;m using Qt 5.13.0"}, {"owner": {"reputation": 22694, "user_id": 72312, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7ef82cee7127a5d80d021754e0a5333?s=128&d=identicon&r=PG", "display_name": "Macke", "link": "https://stackoverflow.com/users/72312/macke"}, "edited": false, "score": 1, "creation_date": 1565787675, "post_id": 57489897, "comment_id": 101460100, "body": "You need to enalbe z-buffering / depth-test to fix that."}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1565771072, "post_id": 57490486, "comment_id": 101451803, "body": "Wow! Thanks =) with black background the object looks fine. Do you know how to make it work with any background color?"}, {"owner": {"reputation": 22694, "user_id": 72312, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7ef82cee7127a5d80d021754e0a5333?s=128&d=identicon&r=PG", "display_name": "Macke", "link": "https://stackoverflow.com/users/72312/macke"}, "reply_to_user": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1565787716, "post_id": 57490486, "comment_id": 101460120, "body": "Remove the blendequation state?  I&#39;m not an expert on Qt3D, but I know my OpenGL. :)"}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1565789603, "post_id": 57490486, "comment_id": 101461300, "body": "Thanks! if I remove that, I guess OpenGL would use it&#39;s default blend function/equation. Right?"}, {"owner": {"reputation": 22694, "user_id": 72312, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7ef82cee7127a5d80d021754e0a5333?s=128&d=identicon&r=PG", "display_name": "Macke", "link": "https://stackoverflow.com/users/72312/macke"}, "reply_to_user": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1565857701, "post_id": 57490486, "comment_id": 101481703, "body": "Yes. The default is to replace the color in the framebuffer with that what your blend  state computes. So, since you already mix it with the data, there, you don&#39;t want to do another add."}], "tags": [], "owner": {"reputation": 22694, "user_id": 72312, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7ef82cee7127a5d80d021754e0a5333?s=128&d=identicon&r=PG", "display_name": "Macke", "link": "https://stackoverflow.com/users/72312/macke"}, "is_accepted": false, "score": 1, "last_activity_date": 1565769511, "creation_date": 1565769511, "answer_id": 57490486, "question_id": 57489897, "link": "https://stackoverflow.com/questions/57489897/phong-alpha-material-transparency/57490486#57490486", "title": "Phong-Alpha material transparency", "body": "<p>Try not using blendequation, seems like the color computed by blendstate is added to the gray background. (maybe good for got particle sparks, less so for objects)</p>\n\n<p>How does it look with black background?</p>\n"}, {"comments": [{"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1565858704, "post_id": 57506309, "comment_id": 101482046, "body": "It worked =) I did <code>setSourceAlpha</code> to <code>Zero</code> and did <code>setDestinationAlpha</code> to <code>One</code>. Now transparency works on gray background. I have no idea what&#39;s going on with these settings though!"}], "tags": [], "owner": {"reputation": 951, "user_id": 11856081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sO5f1.png?s=128&g=1", "display_name": "Eddy Alleman", "link": "https://stackoverflow.com/users/11856081/eddy-alleman"}, "is_accepted": true, "score": 2, "last_activity_date": 1565868726, "last_edit_date": 1565868726, "creation_date": 1565854706, "answer_id": 57506309, "question_id": 57489897, "link": "https://stackoverflow.com/questions/57489897/phong-alpha-material-transparency/57506309#57506309", "title": "Phong-Alpha material transparency", "body": "<p>try this to set the blendequation state</p>\n\n<pre><code>set sourceAlphaArg to Qt3DRender::QBlendEquationArguments::Zero\nset destinationAlphaArg to Qt3DRender::QBlendEquationArguments::One\n</code></pre>\n\n<p><strong>info from enum QBlendEquationArguments::Blending</strong></p>\n\n<p>Constant                                    Value   OpenGL\nQt3DRender::QBlendEquationArguments::Zero   0       GL_ZERO\nQt3DRender::QBlendEquationArguments::One    1       GL_ONE</p>\n\n<p>EDIT:\na good explanation can be found here: learnopengl.com/Advanced-OpenGL/Blending </p>\n"}], "owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 1, "accepted_answer_id": 57506309, "answer_count": 2, "score": 5, "last_activity_date": 1565868726, "creation_date": 1565767213, "last_edit_date": 1565858538, "question_id": 57489897, "link": "https://stackoverflow.com/questions/57489897/phong-alpha-material-transparency", "title": "Phong-Alpha material transparency", "body": "<p>I'm using a pre-built material of Qt3D:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Qt3DRender::QMaterial *MyClass::createMaterial()\n{\n    Qt3DExtras::QPhongAlphaMaterial *mat = new Qt3DExtras::QPhongAlphaMaterial();\n    mat-&gt;setAmbient(QColor(\"#576675\"));\n    mat-&gt;setDiffuse(QColor(\"#5F6E7D\"));\n    mat-&gt;setSpecular(QColor(\"#61707F\"));\n    mat-&gt;setShininess(0.0f);\n    mat-&gt;setAlpha(0.5f);\n    return mat;\n}\n</code></pre>\n\n<p>I set alpha to <code>0.5f</code>, so I expect the material be semi-transparent. But the model looks mostly white except some regions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wi2EI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wi2EI.png\" alt=\"Result\"></a></p>\n\n<p>When I check the <a href=\"https://code.qt.io/cgit/qt/qt3d.git/tree/src/extras/defaults/qphongalphamaterial.cpp?h=5.13.0\" rel=\"nofollow noreferrer\">source code</a> I see this settings for alpha-blending:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m_blendState-&gt;setSourceRgb(QBlendEquationArguments::SourceAlpha);\nm_blendState-&gt;setDestinationRgb(QBlendEquationArguments::OneMinusSourceAlpha);\nm_blendEquation-&gt;setBlendFunction(QBlendEquation::Add);\n</code></pre>\n\n<p>I wonder why the model looks white?</p>\n\n<hr>\n\n<p>As suggested by @Macke, the object on black background looks fine!</p>\n\n<p><a href=\"https://i.stack.imgur.com/5ha2Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ha2Y.png\" alt=\"black background\"></a></p>\n\n<p>When I set <code>alpha</code> to <code>1.0</code>, I observe this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rlsA2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rlsA2.png\" alt=\"alpha = 1.0\"></a></p>\n\n<hr>\n\n<h2>UPDATE</h2>\n\n<p>As pointed out by @Macke, one issue was related to depth test. On the <a href=\"https://code.qt.io/cgit/qt/qt3d.git/tree/src/extras/defaults/qphongalphamaterial.cpp?h=5.13.0\" rel=\"nofollow noreferrer\">source code</a>, depth mask is disabled by default:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// ...\n, m_noDepthMask(new QNoDepthMask())\n// ...\n\nm_phongAlphaGL3RenderPass-&gt;addRenderState(m_noDepthMask);\n\nm_phongAlphaGL2RenderPass-&gt;addRenderState(m_noDepthMask);\n\nm_phongAlphaES2RenderPass-&gt;addRenderState(m_noDepthMask);\n</code></pre>\n\n<p>I enabled depth mask by removing <code>QNoDepthMask</code> stuff, and now with <code>alpha = 1.0</code> the rendering result is fine:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rVJCp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rVJCp.png\" alt=\"enable depth mask, alpha = 1.0\"></a></p>\n\n<hr>\n\n<h2>UPDATE</h2>\n\n<p>Suggested by @EddyAlleman, I added such lines of code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>blendState-&gt;setSourceAlpha(Qt3DRender::QBlendEquationArguments::Zero);\nblendState-&gt;setDestinationAlpha(Qt3DRender::QBlendEquationArguments::One);\n</code></pre>\n\n<p>Then, the transparency (<code>alpha = 0.4</code>) is fine even on gray background:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9tyME.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9tyME.png\" alt=\"alpha = 0.4\"></a></p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1565767045, "post_id": 57489777, "comment_id": 101449950, "body": "C? <code>new</code> is 100% C++. And if you are doing C++, better opt for a container like <code>std::vector</code> to handle it."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1565767316, "post_id": 57489777, "comment_id": 101450059, "body": "There is no inbuilt way to do this. You have to store the size yourself. But the good news is <code>std::vector</code> does all that for you and also takes care of properly implementing copies, moves and all that fun stuff that gives you headaches with manual memory management."}, {"owner": {"reputation": 949, "user_id": 11157436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b30f2515b405d62f43877e9a44f98?s=128&d=identicon&r=PG&f=1", "display_name": "keechan", "link": "https://stackoverflow.com/users/11157436/keechan"}, "edited": false, "score": 0, "creation_date": 1565767393, "post_id": 57489777, "comment_id": 101450088, "body": "I have updated my question with an example on what I actually intend to do.  In <code>fillArray()</code> function above, can you suggest a way to check size of <code>a</code> vs <code>matrixSize</code>? I can&#39;t really change it to vector though since I have to preserve the function signature (which is written the C way)."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 3, "creation_date": 1565767600, "post_id": 57489777, "comment_id": 101450164, "body": "If you expected to get the size of an allocation from a pointer then you are going to be disappointed. You&#39;ll be much much happier if you use <code>std::vector&lt;A&gt;</code> instead. <code>std::vector</code> has been part of C++ for well over 20 years, yet people are still being taught to use <code>new</code>, it&#39;s incredible."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1565768056, "post_id": 57489777, "comment_id": 101450348, "body": "@keechan Sorry but what you want to do is impossible. But this being C++ you could provide an <i>overload</i> of your function which uses a vector. The overload could even call the original function. That way you have the safety of a vector and still use the original function. <code>void fillArray(A valueToFill, vector&lt;A&gt;&amp; a) { fillArray(valueToFill, a.size(), a.data(); }</code> It actually very straightforward to use vectors with legacy code. The designers did think of that."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1565768293, "post_id": 57489777, "comment_id": 101450454, "body": "There&#39;s even better news. If you are using C++ you don&#39;t even need <code>fillArray</code> at all. There&#39;s a standard <a href=\"https://en.cppreference.com/w/cpp/algorithm/fill\" rel=\"nofollow noreferrer\"><code>std::fill</code></a> function template that works with any range. It&#39;s also highly optimized, likely to unroll part of the loop."}, {"owner": {"reputation": 949, "user_id": 11157436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b30f2515b405d62f43877e9a44f98?s=128&d=identicon&r=PG&f=1", "display_name": "keechan", "link": "https://stackoverflow.com/users/11157436/keechan"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1565770339, "post_id": 57489777, "comment_id": 101451432, "body": "Thanks so much everyone! I think I will go with suggestion from @john thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1565767303, "last_edit_date": 1565767303, "creation_date": 1565766945, "answer_id": 57489828, "question_id": 57489777, "link": "https://stackoverflow.com/questions/57489777/how-to-determine-the-size-a-struct-array-was-initialized-to/57489828#57489828", "title": "How to determine the size a struct array was initialized to?", "body": "<p>Introduce a new variable (I used <code>na</code> below)</p>\n\n<pre><code>int main()\n{\n    struct A\n    {\n      int x;\n      int y;\n    };\n    size_t na = 20;\n    A* a = new A[na]; // invalid C\n}\n</code></pre>\n\n<p>then, when you need the size, just refer to (the possibly updated) <code>na</code></p>\n\n<pre><code>printf(\"current number of elements: %d\\n\", (int)na);\n</code></pre>\n"}], "owner": {"reputation": 949, "user_id": 11157436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b30f2515b405d62f43877e9a44f98?s=128&d=identicon&r=PG&f=1", "display_name": "keechan", "link": "https://stackoverflow.com/users/11157436/keechan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1565767865, "answer_count": 1, "score": -1, "last_activity_date": 1565767574, "creation_date": 1565766726, "last_edit_date": 1565767574, "question_id": 57489777, "link": "https://stackoverflow.com/questions/57489777/how-to-determine-the-size-a-struct-array-was-initialized-to", "closed_reason": "Duplicate", "title": "How to determine the size a struct array was initialized to?", "body": "<p>In C++, how do I check the allocated value/size a struct array has been initialized to?</p>\n\n<pre><code>int main()\n{\n    struct A\n    {\n      int x;\n      int y;\n    };\n    A* a = new A[20];\n}\n</code></pre>\n\n<pre><code>sizeof(a) / sizeof(a[0]);\n</code></pre>\n\n<p>returns a value of 1. So this is not what I was expecting.</p>\n\n<p>Is there any way I can do this so that I can get the size (20) allocated for <code>a</code>?</p>\n\n<p>Where I am going to use it is in a case like this:</p>\n\n<pre><code>void fillArray(A valueToFill, int matrixSize, A *a)\n{\n    for (int i = 0; i &lt; matrixSize; i++)\n    {\n        a[i] = valueToFill;\n    }\n}\n</code></pre>\n\n<p>I intend to check if size of <code>a</code> is actually <code>matrixSize</code>. Otherwise it will crash if <code>matrixSize</code> is bigger than <code>a</code>.</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "edited": false, "score": 0, "creation_date": 1565792144, "post_id": 57491451, "comment_id": 101462757, "body": "Still wandering why they did not implement a function for this."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1565797804, "post_id": 57491451, "comment_id": 101465851, "body": "About &quot;why&quot;, see my answer."}, {"owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "edited": false, "score": 0, "creation_date": 1565853738, "post_id": 57491451, "comment_id": 101480336, "body": "<code>error: no matching function for call to \u2018sparseMax(Eigen::SparseMatrix&lt;int, 1&gt;&amp;)\u2019      auto max = sparseMax(mat);</code> <code>template argument \u20181\u2019 does not match \u20180\u2019      auto max = sparseMax(mat);</code>"}, {"owner": {"reputation": 21392, "user_id": 4770166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar44f.jpg?s=128&g=1", "display_name": "RHertel", "link": "https://stackoverflow.com/users/4770166/rhertel"}, "reply_to_user": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "edited": false, "score": 1, "creation_date": 1565861723, "post_id": 57491451, "comment_id": 101483169, "body": "@Abolfazl The error appears because you are using a SparseMatrix with <code>RowMajor</code> storage, instead of the default <code>ColMajor</code> order. To handle that special case one could change the template to <code>T sparseMax (SparseMatrix&lt;T, RowMajor&gt;&amp; mat) </code>. Generalizing the answer in order to have a function that accepts both, <code>RowMajor</code> and <code>ColMajor</code> storage is unnecessary as the member function <code>.coeff()</code> seems to be doing exactly that."}], "tags": [], "owner": {"reputation": 21392, "user_id": 4770166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar44f.jpg?s=128&g=1", "display_name": "RHertel", "link": "https://stackoverflow.com/users/4770166/rhertel"}, "is_accepted": false, "score": 2, "last_activity_date": 1565862669, "last_edit_date": 1565862669, "creation_date": 1565773328, "answer_id": 57491451, "question_id": 57489702, "link": "https://stackoverflow.com/questions/57489702/efficient-way-to-find-maximum-value-of-sparse-matrix-eigen/57491451#57491451", "title": "Efficient way to find maximum value of Sparse matrix (Eigen)", "body": "<p>Try this templated function to obtain the maximum non-zero value of an <code>Eigen::SparseMatrix</code>:</p>\n\n<pre><code>template &lt;class T&gt;\nT sparseMax (SparseMatrix&lt;T&gt;&amp; mat) { \n  return Map&lt;Matrix&lt;T, Dynamic, 1&gt; &gt;(mat.valuePtr(), mat.nonZeros()).maxCoeff();\n}\n</code></pre>\n\n<p>The principle here consists in mapping the non-zero elements of the sparse matrix onto a vector (a one-dimensional <code>Eigen::Matrix</code>) from which the maximum is then extracted with <code>.maxCoeff()</code>. This should be a very efficient means to determine the maximum value in the matrix.  Note that the <strong>matrix needs to be compressed</strong> for this method to work.</p>\n\n<p>In the code, the function <code>sparseMax()</code> could be called like this:</p>\n\n<pre><code>if (!mat.isCompressed()) mat.makeCompressed();\nauto max = sparseMax(mat);\n</code></pre>\n\n<p>where <code>mat</code> is an <code>Eigen::SparseMatrix</code>.</p>\n\n<p>The answer in the link is thus almost correct, but<code>.size()</code> should be replaced with <code>.nonZeros()</code>  and it failed to ensure that the matrix is compressed. If you know that you are dealing with a SparseMatrix the <code>if/else</code> construction mentioned in the linked answer is not needed. </p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>The above solution works for a SparseMatrix with the default column major storage order. In the case of RowMajor storage one could change the template to</p>\n\n<pre><code>template &lt;class T&gt;\n T sparseMax_RM (SparseMatrix&lt;T,RowMajor&gt;&amp; mat) { \n return Map&lt;Matrix&lt;T, Dynamic, 1&gt; &gt;(mat.valuePtr(), mat.nonZeros()).maxCoeff();\n}\n</code></pre>\n\n<p>A more robust way is to use the member function <code>.coeffs()</code> instead, as pointed out by @ggael. The <code>.coeffs()</code> function works for compressed SparseMatrix classes of both types, RowMajor and ColMajor storage order.</p>\n"}, {"tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 5, "last_activity_date": 1565797751, "creation_date": 1565797751, "answer_id": 57498092, "question_id": 57489702, "link": "https://stackoverflow.com/questions/57489702/efficient-way-to-find-maximum-value-of-sparse-matrix-eigen/57498092#57498092", "title": "Efficient way to find maximum value of Sparse matrix (Eigen)", "body": "<p>Those functions are not readily available because it might be ambiguous whether the implicit zeros should be taken into account or not. For instance, if all non-zeros are negative, shall <code>maxCoeff</code> returns <code>0</code>?</p>\n\n<p>If you want to consider explicitly stored elements only and that your sparse matrix in is compressed mode, then you can write:</p>\n\n<pre><code>auto max = matrix.coeffs().maxCoeff();\n</code></pre>\n\n<p>The <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1SparseCompressedBase.html#a7cf299e08d2a4f6d6869e631e51b12fe\" rel=\"noreferrer\">coeff</a> method is equivalent to RHertel's answer.</p>\n"}], "owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 1, "accepted_answer_id": 57498092, "answer_count": 2, "score": 3, "last_activity_date": 1565862669, "creation_date": 1565766461, "last_edit_date": 1565767309, "question_id": 57489702, "link": "https://stackoverflow.com/questions/57489702/efficient-way-to-find-maximum-value-of-sparse-matrix-eigen", "title": "Efficient way to find maximum value of Sparse matrix (Eigen)", "body": "<p>I was wondering whether it is possible to find the max/min coefficients in a sparse matrix in an efficient way.</p>\n\n<p>It seems that the minCoeff()/maxCoeff() functions are not implemented for sparse matrices, which is a bit weird.</p>\n\n<p>I found this answer <a href=\"https://forum.kde.org/viewtopic.php?f=74&amp;t=151658#\" rel=\"nofollow noreferrer\">here</a>, but I could not figure it out.</p>\n\n<pre><code> using Tmp = typename remove_cv_ref&lt;decltype(matrix)&gt;::type;\n if constexpr(std::is_base_of&lt;Eigen::SparseMatrixBase&lt;Tmp&gt;, Tmp&gt;::value)\n max = Eigen::Map&lt;const Vector&gt;(matrix.valuePtr(), matrix.size()).maxCoeff();\n else\n    max = matrix.maxCoeff();\n</code></pre>\n\n<p><strong>Edit:</strong>\nThis is my try, I am not sure about the efficiency.</p>\n\n<pre><code>typedef Eigen::SparseMatrix&lt;int, Eigen::RowMajor&gt; SRI;\nint maxCoeff(const SparseMatrix&lt;int, RowMajor&gt; &amp;A)\n{\n    size_t row = A.rows();\n    size_t col = A.cols();\n    int max_value = -10000000;\n    for (size_t k = 0; k &lt; row; k++)\n    {\n        for (SRI::InnerIterator it(A, k); it; ++it)\n        {\n            if (it.value() &gt; max_value)\n                max_value = it.value();\n        }\n    }\n    return max_value;\n}\n</code></pre>\n"}]