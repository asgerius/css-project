[{"tags": ["c++", "templates", "constructor", "reference", "stl"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530144106, "post_id": 51072928, "comment_id": 89135490, "body": "You don&#39;t have different constructors for this case, you only have a single constructor. The object <code>cmt</code> is constant, and the object <code>mt</code> is not, even if both are constructed the same way with the same constructor."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530144237, "post_id": 51072928, "comment_id": 89135528, "body": "You are declaring functions, not classes. Function don&#39;t have a <i>constructor</i>."}, {"owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530144351, "post_id": 51072928, "comment_id": 89135553, "body": "@Ripi2 I think hes declaring an instance of my_template&lt;int&gt; and a const instance, both with arguments (iam,size) to the constructor.."}, {"owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530144472, "post_id": 51072928, "comment_id": 89135584, "body": "@Ripi2 I have the template class <code>my_template</code>, and in that I want these constructors..."}, {"owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530144650, "post_id": 51072928, "comment_id": 89135624, "body": "@Someprogrammerdude are you sure? I tried but didn&#39;t worked for me with only one constructor. Could you give me an example?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "edited": false, "score": 0, "creation_date": 1530144675, "post_id": 51072928, "comment_id": 89135632, "body": "@rmawatson I see. The lack of a mcve messed me."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1530144922, "post_id": 51072928, "comment_id": 89135680, "body": "You really have to show us  a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and tell us <i>what</i> errors you get (copy-pasted as text, in full and complete)."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530145029, "post_id": 51072928, "comment_id": 89135702, "body": "@kortealma Is, by chance, that you want two different ctors, one able to modify some parameter (e.g. the array) and the other ctor unable?"}, {"owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530145550, "post_id": 51072928, "comment_id": 89135785, "body": "@Ripi2 In both cases I want to modify some parameters. But, the <code>cmt</code> I want to be const in the main program."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1530145578, "post_id": 51072928, "comment_id": 89135789, "body": "@kortealma so make it const. what&#39;s the problem? It&#39;s const in your first posted line, how does that <i>not</i> do what you want?"}, {"owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530146528, "post_id": 51072928, "comment_id": 89135970, "body": "@Someprogrammerdude I edited my question with my attempts."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1530241861, "post_id": 51072928, "comment_id": 89175518, "body": "change <code>T&amp;</code> to <code>T*</code>"}, {"owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530256647, "post_id": 51072928, "comment_id": 89180160, "body": "@M.M WOW lot of thanks, can you write mi a bit why? I thought there I must get it as an reference not as a pointer. But, anyway write your comment as an answer, and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1530262191, "creation_date": 1530262191, "answer_id": 51097797, "question_id": 51072928, "link": "https://stackoverflow.com/questions/51072928/which-const-with-which-reference-will-change-the-argument-and-create-an-const-ob/51097797#51097797", "title": "Which const with which reference will change the argument and create an const object?", "body": "<p>One way to make this code work is to change <code>T&amp;</code> to <code>T*</code>.</p>\n\n<p>You are \"passing\" the array by actually passing a pointer to its first element, and also passing the length separately.</p>\n\n<p>It would also be possible to pass the array by reference (in which case you do not need the separate length parameter, since the length is party of the array's type.</p>\n\n<p>I'm not sure what you are talking about with the \"const\" discussion.</p>\n"}], "owner": {"reputation": 37, "user_id": 8863783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7c677f563a3869d53d832bb5464542?s=128&d=identicon&r=PG&f=1", "display_name": "korte alma", "link": "https://stackoverflow.com/users/8863783/korte-alma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530262191, "creation_date": 1530143845, "last_edit_date": 1530232136, "question_id": 51072928, "link": "https://stackoverflow.com/questions/51072928/which-const-with-which-reference-will-change-the-argument-and-create-an-const-ob", "title": "Which const with which reference will change the argument and create an const object?", "body": "<p>I have this template call:</p>\n\n<pre><code>int ia[] = { 9, 2, 5, 1, 8 };\nconst sav&lt;int&gt; sia( ia, sizeof( ia ) / sizeof( ia[ 0 ] ) );\n</code></pre>\n\n<p>And I want to sort  the <code>ia</code>, and create <code>sia</code>. I tried like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass sav {\npublic:\n    sav(T&amp; givenArray,size_t size) {\n         for( int idx = 0; idx &lt; size; ++idx){\n            data.push_back(givenArray[idx]);\n         }\n         std::sort(data.begin(), data.end());\n         for(int idx =0; idx&lt;size; ++idx){\n            givenArray[idx] = data.at(idx);\n         }\n    }\nprivate:\n    std::vector&lt;T&gt; data;\n};\n</code></pre>\n\n<p>But I don't know where I have to write <code>const</code> in this case to get this code to work.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1530143684, "post_id": 51072888, "comment_id": 89135403, "body": "The range of an <code>int</code> on Arduino is -32768 to 32767. Easy fix is to change <code>iso</code> and <code>lux</code> from <code>int</code> to <code>double</code>."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1530143797, "post_id": 51072888, "comment_id": 89135425, "body": "why so many parenthesis ?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1530175966, "post_id": 51072947, "comment_id": 89145812, "body": "Suggest using fixed-width type, e.g. <code>uint32_t</code> for 32-bit values"}], "tags": [], "owner": {"reputation": 375, "user_id": 8581218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df074d95c658bd54fabef46f4e3f1d?s=128&d=identicon&r=PG&f=1", "display_name": "rect0x51", "link": "https://stackoverflow.com/users/8581218/rect0x51"}, "is_accepted": false, "score": 2, "last_activity_date": 1530144515, "last_edit_date": 1530144515, "creation_date": 1530143996, "answer_id": 51072947, "question_id": 51072888, "link": "https://stackoverflow.com/questions/51072888/multiplication-is-returning-me-incorrect-values/51072947#51072947", "title": "Multiplication is returning me incorrect values", "body": "<p>An <code>int</code> type can hold numbers up to a limit.\nIn your case that seems to be 2^16 = 65536 numbers which means you can have numbers in range [-32,768, 32,767].\nYou can use <code>long</code> type to resolve the problem.</p>\n\n<p>Quick note:\n<code>short</code> = 2-byte\n<code>long</code>  = 4-byte\n<code>int</code>   = 2-byte or 4-byte (depending on architecture)</p>\n\n<p><em>Thanks to ChiefTwoPencils for pointing out ambiquity!</em></p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 10002709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78da7f120dc88ae34aeac20229ded2b7?s=128&d=identicon&r=PG&f=1", "display_name": "AGerkis", "link": "https://stackoverflow.com/users/10002709/agerkis"}, "edited": false, "score": 0, "creation_date": 1530146524, "post_id": 51072959, "comment_id": 89135968, "body": "Thanks for your help, I tried to change to a double, and it fixed my problem, and it works for a greater range, but it still breaks for larger numbers (lux values of 10,000). Are there any other ways to fix this?"}, {"owner": {"reputation": 489, "user_id": 5081047, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/99300c8c43d47c91299eb7b774910843?s=128&d=identicon&r=PG&f=1", "display_name": "Byte", "link": "https://stackoverflow.com/users/5081047/byte"}, "edited": false, "score": 0, "creation_date": 1530146859, "post_id": 51072959, "comment_id": 89136045, "body": "If you want arbitrary precision integers, you&#39;ll need to implement &#39;big numbers&#39; or use a bignum library."}, {"owner": {"reputation": 17, "user_id": 10002709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78da7f120dc88ae34aeac20229ded2b7?s=128&d=identicon&r=PG&f=1", "display_name": "AGerkis", "link": "https://stackoverflow.com/users/10002709/agerkis"}, "edited": false, "score": 0, "creation_date": 1530147077, "post_id": 51072959, "comment_id": 89136083, "body": "Oops, realized after some investigation the new problem was not in the size, so thanks a lot for your help!"}], "tags": [], "owner": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "is_accepted": false, "score": 3, "last_activity_date": 1530144076, "creation_date": 1530144076, "answer_id": 51072959, "question_id": 51072888, "link": "https://stackoverflow.com/questions/51072888/multiplication-is-returning-me-incorrect-values/51072959#51072959", "title": "Multiplication is returning me incorrect values", "body": "<p>Depending on what board you have, the <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/int/\" rel=\"nofollow noreferrer\">size of an int</a> will be either two or four bytes. </p>\n\n<p>Multiplying two 2-byte integers together produces another 2-byte integer and, when too large for the range, <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">overflows</a>; this is the behavior you're seeing.</p>\n\n<p>You'll have to go to a <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/long/\" rel=\"nofollow noreferrer\"><code>long</code></a> or, might as well, a <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/double/\" rel=\"nofollow noreferrer\"><code>double</code></a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10002709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78da7f120dc88ae34aeac20229ded2b7?s=128&d=identicon&r=PG&f=1", "display_name": "AGerkis", "link": "https://stackoverflow.com/users/10002709/agerkis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530175908, "creation_date": 1530143446, "last_edit_date": 1530175908, "question_id": 51072888, "link": "https://stackoverflow.com/questions/51072888/multiplication-is-returning-me-incorrect-values", "title": "Multiplication is returning me incorrect values", "body": "<p>I am writing some code for an Arduino project I am working on, and the multiplication is returning me incorrect values, and I can't figure out why.</p>\n\n<pre><code>String calculateShutterSpeed(float fs, int i, int l){\nfloat fstop = fs;\nint iso = i;\nint lux = l;\nfloat c = 1.00;\nfloat shutterspeedTop = 0;\ndouble shutterspeedBottom = 0;\n\nshutterspeedTop = pow(fs, 2)*c;\nshutterspeedBottom = lux*iso;\n\nshutterspeedBottom = shutterspeedBottom/shutterspeedTop;\n</code></pre>\n\n<p>The code giving me the error is the line where I multiply lux by iso, in some cases (with small numbers) it works fine, but as soon as I use larger numbers it starts giving me incorrect numbers, such as a lux of 4833 and iso of 200 will give me a result of -16440.</p>\n"}, {"tags": ["c++", "templates", "vector"], "comments": [{"owner": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "edited": false, "score": 0, "creation_date": 1530142723, "post_id": 51072784, "comment_id": 89135214, "body": "Which part of the code produces the problem?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1530142798, "post_id": 51072784, "comment_id": 89135225, "body": "Also worth a read: <a href=\"//stackoverflow.com/q/1452721\">Why is &quot;using namespace std&quot; considered bad practice?</a>"}, {"owner": {"reputation": 1, "user_id": 8111534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed94f8bfe4eeea477e7da4c88e1553c?s=128&d=identicon&r=PG&f=1", "display_name": "RealHala", "link": "https://stackoverflow.com/users/8111534/realhala"}, "reply_to_user": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "edited": false, "score": 0, "creation_date": 1530155882, "post_id": 51072784, "comment_id": 89137788, "body": "@L.Kue  Not quite sure. The problem happened when I tried to compile the main code.\t  LNK2019\tunresolved external symbol &quot;void __cdecl read_2d&lt;unsigned char&gt;(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::vector&lt;class std::vector&lt;unsigned char,class std::allocator&lt;unsigned char&gt; &gt;,class std::allocator&lt;class std::vector&lt;unsigned char,class std::allocator&lt;unsigned char&gt; &gt; &gt; &gt; &amp;)&quot; (??$read_2d@E@@YAXV?$basic_string@DU?$char_traitsV?$allocato&zwnj;&#8203;r std@@AAV?$vectorV?$vector@EV?$allocatorV?$allocator@V?$vecto&zwnj;&#8203;r@EV?$allocator) referenced in functio"}], "owner": {"reputation": 1, "user_id": 8111534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed94f8bfe4eeea477e7da4c88e1553c?s=128&d=identicon&r=PG&f=1", "display_name": "RealHala", "link": "https://stackoverflow.com/users/8111534/realhala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1530142728, "answer_count": 0, "score": 0, "last_activity_date": 1530142508, "creation_date": 1530142508, "question_id": 51072784, "link": "https://stackoverflow.com/questions/51072784/c-unsolved-external-symbol", "closed_reason": "Duplicate", "title": "c++ Unsolved external symbol", "body": "<p>I am writing a simple code trying to read 2d vector by using template. But get error like:</p>\n\n<p>Severity    Code    Description Project File    Line    Suppression\nStateError  LNK2019 unresolved external symbol </p>\n\n<p>My main.cpp is like:</p>\n\n<pre><code>#include \"header\\\\read_2d.h\"\n#include &lt;iostream&gt;  \n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nint main()\n{\n    //input image array parameters and initialize a 2D array\n    int nx = 200;\n    int ny = 200;\n    std::vector&lt;std::vector&lt;unsigned char&gt; &gt; image(nx, std::vector&lt;unsigned char&gt;(ny));\n    std::vector&lt;std::vector&lt;unsigned char&gt; &gt; mask(nx, std::vector&lt;unsigned char&gt;(ny));\n    string disk_filename = \"disk.dat\";\n\n    //read image\n    read_2d&lt;unsigned char&gt;(disk_filename, image);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>My read_2d.h file is:</p>\n\n<pre><code>#ifndef READ_2D_H    // To make sure you don't declare the function more than once by including the header multiple times.\n#define READ_2D_H\n\n\n#include &lt;iostream&gt;  \n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\ntemplate &lt;typename myType&gt;\nvoid read_2d(string filename, vector&lt; vector&lt;myType&gt; &gt;&amp; image);\n\n#endif\n</code></pre>\n\n<p>My read_2d.cpp is:</p>\n\n<pre><code>#include \"..\\\\header\\\\read_2d.h\"\nusing namespace std;\n\ntemplate &lt;typename myType&gt;\nvoid read_2d(string filename, vector&lt;vector&lt;myType&gt; &gt;&amp; image)\n{\n\n    int nx = image.size();\n    int ny = image[0].size();\n    int sizeOfData = nx*ny*sizeof(myType);\n    std::vector&lt;char&gt; raw_data(sizeOfData);\n    std::ifstream inputFile;\n\n    inputFile.open(filename.c_str(), ios::binary);\n\n    if (inputFile.is_open()) {\n        inputFile.read(&amp;raw_data[0], sizeOfData);\n        inputFile.close();\n\n        for (int i = 0; i &lt; nx; i++) {\n            memcpy(&amp;image[i][0], &amp;raw_data[(i*ny)*sizeof(myType)], ny*sizeof(myType));\n        }\n\n    }\n    else {\n        cerr &lt;&lt; \"Input file for \" &lt;&lt; filename &lt;&lt; \" could not be opened...\\n\" &lt;&lt; endl;\n        exit(EXIT_FAILURE);\n    }\n\n}\n</code></pre>\n\n<p>Can any one help me point out what I have done wrong? Any comments will be very much appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1530140354, "post_id": 51072514, "comment_id": 89134727, "body": "Have you learned about arrays and <code>std::vector</code>?"}, {"owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1530140465, "post_id": 51072514, "comment_id": 89134742, "body": "Not yet, no, and honestly this is for my final, so I doubt we will."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530140529, "post_id": 51072514, "comment_id": 89134750, "body": "How about arrays then? Do you know about those?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1530140597, "post_id": 51072514, "comment_id": 89134764, "body": "On an unrelated note, <code>while (inFile.good())</code> is really no different than <code>while (!inFile.eof())</code>. And <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">that should always be considered wrong</a>."}, {"owner": {"reputation": 338, "user_id": 9343059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7820c2c56986e751526b0a7af1f9fc75?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/9343059/travis"}, "edited": false, "score": 0, "creation_date": 1530142817, "post_id": 51072514, "comment_id": 89135230, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29257495/is-it-possible-to-use-dynamic-name-for-variables-in-c\">Is it possible to use dynamic name for variables in c++</a>"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1530146536, "post_id": 51072514, "comment_id": 89135974, "body": "What kind of C++ course hasn&#39;t covered <code>std::vector</code> by the <i>final</i>?!"}, {"owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1530163440, "post_id": 51072514, "comment_id": 89139538, "body": "@Kevin, it is a 8 week course and we jumped around in the book. Most of my programming courses so far have been like this. It is rather frustrating, as usually I&#39;m just getting a really good handle and then boom here is your final and I have to switch gears for a new course and drop what I was doing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "edited": false, "score": 0, "creation_date": 1530163286, "post_id": 51073152, "comment_id": 89139495, "body": "First to everyone, THANK YOU for the feedback so far.  @ L. Kue&#39;s answer in regards to vectors before I tear my program apart, am I right in thinking that &quot;players&quot; could be defined by a the variable players, that I could then modify?  I ask this because if so, that takes care of my problem....I think... I&#39;m gonna have to fight this more, but I think I may be able to make that work."}, {"owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "edited": false, "score": 0, "creation_date": 1530163634, "post_id": 51073152, "comment_id": 89139612, "body": "Also, am I reading the code you put in correctly where you put Dice and Dice* (Correct me if I&#39;m wrong in that, this designates a pointer). Would I be calling my Dice class in my program as I already have it and just running that class and its function through this new function which creates the Vector(s) / Vector Arrays?"}, {"owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "edited": false, "score": 0, "creation_date": 1530164929, "post_id": 51073152, "comment_id": 89139994, "body": "Question in how to incorporate the vector arrays. From what I understand of this code, it is going to make a new temporary dice object. I am using a switch statement to do my counts and scores based on the rolls within the dice. I&#39;ve seen where people have used an array within a switch and just stated &quot;switch (dice[i])&quot; and it works fine. My question would be this, how would I know the name of the vector array for the dice?  The point of this is I have to roll 6 dice and then when a 1,5, or 3 of a kind come up remove the scoring dice and re roll. So I was using the switch to evaluate."}, {"owner": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "reply_to_user": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "edited": false, "score": 0, "creation_date": 1530184721, "post_id": 51073152, "comment_id": 89151432, "body": "The * after a variable type designates it to be a pointer. If you wanted to alter the number of players through user input, after already having created the initial number of players, you would need to create a function that adds or removes a player, creates a <code>Dice</code> object for them and calls any initializing functions on that object, as well as adds it to the vector for you. The <code>Dice</code> object created by this is in no way temporary, but the pointer to it is."}, {"owner": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "reply_to_user": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "edited": false, "score": 0, "creation_date": 1530184899, "post_id": 51073152, "comment_id": 89151549, "body": "Regarding your last question: you should really do some reading on vectors and arrays, you can access the elements by either index or value (the former being faster, as you don&#39;t need to look at each element)."}], "tags": [], "owner": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "is_accepted": false, "score": 0, "last_activity_date": 1530146381, "last_edit_date": 1530146381, "creation_date": 1530145954, "answer_id": 51073152, "question_id": 51072514, "link": "https://stackoverflow.com/questions/51072514/how-to-call-multiple-classes-in-c/51073152#51073152", "title": "How to call multiple classes in C++", "body": "<p>You cannot give each <code>Dice</code> object a name, but you can create a Vector of <code>Dice</code> object pointers (vectors are basically resizable arrays), like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n//...\n\nstd::cout &lt;&lt; \"Please enter the number of players \" &lt;&lt; std::endl;\nstd::cin &gt;&gt; players;\n\n// do something to make sure players is an integer\n\n// initialize the empty playerDice vector\nstd::vector&lt;Dice*&gt; playerDice = {};\n\nfor (unsigned i = 0; i &lt; players; ++i) {\n    playerDice.push_back(new Dice); // this adds a new Dice object pointer to the end of the vector\n    playerDice.at(i)-&gt;currentDiceSide();\n}\n</code></pre>\n\n<p>You have then called the <code>currentDiceSide()</code> function on each <code>Dice</code> object you created, and have neatly organized them in a Vector, which you can access like this:</p>\n\n<pre><code>// say we want to access the third Dice Object,\n// Vectors start counting at 0, so we acces the element at Index 2.\nplayerDice.at(2)-&gt;doSomething();\n</code></pre>\n\n<p>Now because you instantiated those <code>Dice</code> objects with <code>new</code> you have to remember to <code>delete</code> them when you're finished with them, otherwise this will create a memory leak.</p>\n\n<pre><code>//...\n// this deletes all the Dice objects in the vector, and points the remaining pointers to null\nfor (auto d : playerDice) {\n    delete d;\n    d = nullptr;\n}\n</code></pre>\n\n<p>Or, better yet, if you're using C++11, you can use <code>std::unique_ptr</code> instead of the raw C-style pointers. Those will prevent you from creating memory leaks, because they will be deleted when they go out of scope. Note you have to <code>#include &lt;memory&gt;</code> to use these.</p>\n\n<p>The vector definition then turns into:</p>\n\n<pre><code>std::vector&lt; std::unique_ptr&lt;Dice&gt; &gt; playerDice = {};\n</code></pre>\n\n<p>And the creation of the objects would look like this</p>\n\n<pre><code>for (unsigned i = 0; i &lt; players; ++i) {\n    Dice* temp = new Dice;\n    temp-&gt;currentDiceSide();\n    std::unique_ptr&lt;Dice&gt; uPtr{ temp };\n    playerDice.push_back(std::move(uPtr));\n}\n</code></pre>\n\n<p>You can then just clear the vector when you're done with all the objects:</p>\n\n<pre><code>playerDice.clear();\n</code></pre>\n\n<p>which will <code>delete</code> all the <code>Dice</code> objects that you put into the vector.</p>\n"}], "owner": {"reputation": 11, "user_id": 10002605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7c2d2e75ce190f0a37e99f856a1c34?s=128&d=identicon&r=PG&f=1", "display_name": "bowzer", "link": "https://stackoverflow.com/users/10002605/bowzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530146381, "creation_date": 1530140285, "last_edit_date": 1530142521, "question_id": 51072514, "link": "https://stackoverflow.com/questions/51072514/how-to-call-multiple-classes-in-c", "title": "How to call multiple classes in C++", "body": "<p>Here is the code I'm trying to create, and yes its messy for now. To give some back story I'm trying to figure out how to call a class multiple times without doing it seperately. What I mean is instead of performing:\nDice diceOne;\nDice diceTwo; and so on, I want to know if it is possible to just put it as Dice dicewhatever(*) and have that be a modifiable variable. This is so that I can set that variable to a number and then decrement it based on a score.</p>\n\n<p>I dont know if this is even possible, but at this point I've beat my head against this so much I'm just pulling at straws to see if it would be a fit.</p>\n\n<pre><code>class Dice {\npublic:\n    Dice();\n    int Roll();\n    int currentDiceSide();\n\nprivate:\n    int diceRoll;\n    int diceReRoll; //Declares and initializes the number of dice to allow for      roll next dice throw.\n};\n\nDice::Dice()\n    : //This is the beginning of the class and sets diceRoll to zero\n    diceRoll(0)\n{\n}\n\nint Dice::Roll()\n{ //This function actually does the random roll within the class Dice.\n    diceRoll = ((rand() % 6) + 1);\n    return diceRoll;\n}\n\nint Dice::currentDiceSide()\n{ //This function returns the value of the dice roll for the class call.\n    return diceRoll;\n}\n\nvoid Game::Rules()\n{\n    ifstream inFile;\n    inFile.open(\"Farkle Rules.txt\");\n    string line;\n\n    if (inFile.fail()) {\n        cerr &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n        exit(1);\n    }\n    if (inFile.is_open()) {\n        while (inFile.good()) {\n            getline(inFile, line);\n            cout &lt;&lt; line &lt;&lt; endl;\n        }\n        inFile.close();\n    }\n}\n\nvoid Game::GetPlayerInput(int playerInput)\n{\n    cin &gt;&gt; playerInput;\n}\n\nvoid Game::RunGame()\n{\n    Rules();\n\n    bool farkle = false;\n\n    double turnSum = 0;\n    double value = 0;\n    int i = 0;\n    int w = 6;\n    int players = 0;\n    int numPlayer = 0;\n    int diceOneValue = 0;\n    int diceTwoValue = 0;\n    int diceThreeValue = 0;\n    int diceFourValue = 0;\n    int diceFiveValue = 0;\n    int diceSixValue = 0;\n\n    int num1s = 0; //Declaring and initializing the variables to hold how many times a number shows up in a roll.\n    int num2s = 0;\n    int num3s = 0;\n    int num4s = 0;\n    int num5s = 0;\n    int num6s = 0; //\n\n    srand(static_cast&lt;unsigned int&gt;(time(0)));\n\n    cout &lt;&lt; \"Welcome to Farkle!\" &lt;&lt; endl\n         &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the number of players \" &lt;&lt; endl;\n    cin &gt;&gt; players;\n\n    //Dice diceOne;\n    //diceOne.currentDiceSide();\n    //Dice diceTwo;\n    //diceTwo.currentDiceSide();\n    //Dice diceThree;\n    //diceThree.currentDiceSide();\n    //Dice diceFour;\n    //diceFour.currentDiceSide();\n    //Dice diceFive;\n    //diceFive.currentDiceSide();\n    //Dice diceSix;\n    //diceSix.currentDiceSide();\n\n    Dice diceOne(w);\n&lt; -this is the line that I would like to create with a variable that is modifiable.\n</code></pre>\n"}, {"tags": ["c++", "winapi", "parameters"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1530138793, "post_id": 51072295, "comment_id": 89134359, "body": "I see a problem with your path. You need to escape the \\ or just use /"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1530148538, "post_id": 51072295, "comment_id": 89136357, "body": "Also, your can&#39;t use <code>reinterpret_cast</code> to cast a narrow string literal to a wide string.  Get rid of the <code>reinterpret_cast</code> and use the <code>L</code> prefix instead: <code>const auto http_path L&quot;D:\\\\Some_Path_From_Where_Resource_File_Will_Be_Pushed_To_C&zwnj;&#8203;lient\\\\polyfills.0d7&zwnj;&#8203;4a55d0dbab6b8c32c.js&zwnj;&#8203;&quot;;</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530148628, "post_id": 51072295, "comment_id": 89136378, "body": "And why are you <code>reinterpret_cast</code>&#39;ing the return value of <code>HttpCreateRequestQueue()</code> to a <code>void*</code>? Get rid of that too, as the return value is not a queue handle, it is a status code. The last parameter is the actual queue handle: <code>HANDLE request_queue_handle; ULONG status = HttpCreateRequestQueue(..., &amp;request_queue_handle);</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530148868, "post_id": 51072295, "comment_id": 89136424, "body": "Also, the <code>Path</code> and <code>Query</code> parameters of <code>HttpDeclarePush()</code> are wrong anyway. The <code>Path</code> is NOT a local filesystem path, it is the &quot;path portion of the URL for the resource being pushed&quot;. And the <code>Query</code> is the &quot;query portion of the URL for the resource being pushed&quot;. So, if you were <code>GET</code>&#39;ing something like <code>http:&#47;&#47;server&#47;file.js</code>, the <code>Path</code> is <code>&#47;file.js</code> and the <code>Query</code> is not present, whereas in something like <code>http:&#47;&#47;server&#47;script?file.js</code>, the <code>Path</code> is <code>&#47;script</code> and the <code>Query</code> is <code>file.js</code>"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1530159620, "post_id": 51072295, "comment_id": 89138611, "body": "Can the last parameter be null? Documentation doesn&#39;t mention that."}, {"owner": {"reputation": 17, "user_id": 3994867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3721ccd75eef846afa36b247e061f?s=128&d=identicon&r=PG&f=1", "display_name": "Sayak Bhattacharya", "link": "https://stackoverflow.com/users/3994867/sayak-bhattacharya"}, "edited": false, "score": 0, "creation_date": 1530160063, "post_id": 51072295, "comment_id": 89138691, "body": "Hi Raymond: Any idea what could be the C++ syntax to get the HEADERS and populate it at <code>HTTP_REQUEST_HEADERS* headers</code>? I tried something like <code>pHttpContext-&gt;GetRequest()-&gt;GetHeader;</code> but I believe its incorrect."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1530164784, "post_id": 51072295, "comment_id": 89139955, "body": "You don&#39;t get the headers from somewhere. You make them yourself. Say what headers you want to be used in the HTTP request."}, {"owner": {"reputation": 17, "user_id": 3994867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3721ccd75eef846afa36b247e061f?s=128&d=identicon&r=PG&f=1", "display_name": "Sayak Bhattacharya", "link": "https://stackoverflow.com/users/3994867/sayak-bhattacharya"}, "edited": false, "score": 0, "creation_date": 1530176195, "post_id": 51072295, "comment_id": 89145954, "body": "Do Headers have any role here in server push ? I mean if I am creating some header, how that&#39;s gonna be used ?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 3, "creation_date": 1530199043, "post_id": 51072295, "comment_id": 89161211, "body": "Overall it seems you&#39;re generally confused about how to use the API. Instead of trying things until they work, read the documentation to understand how the API is intended to be used. For example, the documentation for the <code>RequestId</code> parameter says &quot;The request must be from the specified queue handle.&quot; Is the request from the specified queue handle? It doesn&#39;t look that way, since the queue handle was freshly-created and you haven&#39;t yet received a request."}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 3994867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3721ccd75eef846afa36b247e061f?s=128&d=identicon&r=PG&f=1", "display_name": "Sayak Bhattacharya", "link": "https://stackoverflow.com/users/3994867/sayak-bhattacharya"}, "is_accepted": false, "score": 0, "last_activity_date": 1531413951, "creation_date": 1531413951, "answer_id": 51310799, "question_id": 51072295, "link": "https://stackoverflow.com/questions/51072295/error-invalid-parameter-error-connection-invalid-in-vc-code/51310799#51310799", "title": "ERROR_INVALID_PARAMETER &amp; ERROR_CONNECTION_INVALID in VC++ code", "body": "<p>Header has to be created and passed properly as below: </p>\n\n<pre><code>HTTP_REQUEST_ID    request_id;\nconst HTTPAPI_VERSION version = HTTPAPI_VERSION_2;\nauto pHttpRequest = p_http_context-&gt;GetRequest();\nauto phttpRequestRaw = pHttpRequest-&gt;GetRawHttpRequest();\nrequest_id = phttpRequestRaw-&gt;RequestId;\nauto headers = phttpRequestRaw-&gt;Headers;\n\nconst auto is_success = HttpDeclarePush(p_req_queue_handle, request_id, verb, http_path, query, &amp;headers);\n</code></pre>\n\n<p><code>ERROR_CONNECTION_INVALID</code> is the issue which is due one of the _<code>HTTP_HEADER_ID</code> (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/http/ne-http-_http_header_id\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/http/ne-http-_http_header_id</a>) parameter <code>HttpHeaderConnection</code>  taking <code>'Close'</code>, Hence the connection is closed after every request response.\nHence the bottom line is, we have to make the parameters proper to resolve ERROR_INVALID_PARAMETER.</p>\n"}], "owner": {"reputation": 17, "user_id": 3994867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3721ccd75eef846afa36b247e061f?s=128&d=identicon&r=PG&f=1", "display_name": "Sayak Bhattacharya", "link": "https://stackoverflow.com/users/3994867/sayak-bhattacharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531413951, "creation_date": 1530138534, "last_edit_date": 1530217008, "question_id": 51072295, "link": "https://stackoverflow.com/questions/51072295/error-invalid-parameter-error-connection-invalid-in-vc-code", "title": "ERROR_INVALID_PARAMETER &amp; ERROR_CONNECTION_INVALID in VC++ code", "body": "<p>I have written a routine that uses the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/http/nf-http-httpdeclarepush\" rel=\"nofollow noreferrer\"><code>HttpDeclarePush()</code></a> function from <code>Httpapi.dll</code> to utilize server pushes.</p>\n\n<p>I am passing the parameters as below, but I am getting error 87 (<code>ERROR_INVALID_PARAMETER</code>) when calling <code>HttpDeclarePush()</code>:</p>\n\n<pre><code>const HTTPAPI_VERSION version = HTTPAPI_VERSION_2;\nconst auto request_queue_handle = reinterpret_cast&lt;void*&gt;(HttpCreateRequestQueue(version, nullptr, nullptr, 0, &amp;p_req_queue_handle));\n\nconst auto verb = HttpVerbGET;\nconst auto http_path = reinterpret_cast&lt;const wchar_t*&gt;(\"D:\\Some_Path_From_Where_Resource_File_Will_Be_Pushed_To_Client\\polyfills.0d74a55d0dbab6b8c32c.js\");\nconst auto query = \"polyfills.0d74a55d0dbab6b8c32c.js\";\n\nHTTP_REQUEST_HEADERS* headers = nullptr;  //pHttpContext-&gt;GetRequest()-&gt;GetHeader; //lpOutBuffer;\nconst auto is_success = HttpDeclarePush(p_req_queue_handle, request_id, verb, http_path, query, headers);\n</code></pre>\n\n<p>I am not understanding which parameter is potentially the wrong one.  Can someone help me?</p>\n\n<p><strong>EDIT:</strong> Here is the modified code as you mentioned:</p>\n\n<pre><code>const auto request_queue_handle = HttpCreateRequestQueue(version, nullptr, nullptr, 0, &amp;p_req_queue_handle);\nconst auto verb = HttpVerbGET;\nconst auto http_path = L\"/polyfills.0d74a55d0dbab6b8c32c.js\";\nconst auto query = nullptr;\n\nHTTP_REQUEST_HEADERS* headers = nullptr;  //pHttpContext-&gt;GetRequest()-&gt;GetHeader; //lpOutBuffer;\n\nconst auto is_success = HttpDeclarePush(p_req_queue_handle, request_id, verb, http_path, query, headers);\n</code></pre>\n\n<p>I was able to get past the earlier error, but now I am getting error 1229 (<code>ERROR_CONNECTION_INVALID</code>) at <code>HttpDeclarePush(p_req_queue_handle, request_id, verb, http_path, query, headers);</code></p>\n\n<p>I have checked the JS file to be pushed. It is very much available in <code>https://localhost/polyfills.0d74a55d0dbab6b8c32c.js</code>.</p>\n\n<p>Any help on this error? Is it that I need to provide some HEADERS in  <code>HTTP_REQUEST_HEADERS* headers</code>? I tried something like <code>pHttpContext-&gt;GetRequest()-&gt;GetHeader;</code>, but I don't think that is the correct way of doing it.</p>\n\n<p>Pardon me, I am new to VC++.</p>\n"}, {"tags": ["c++", "macos", "input", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530144467, "post_id": 51072247, "comment_id": 89135582, "body": "I&#39;m assuming this is related to how SDL2 and most games check for gamepads vs joysticks. I would have to look at the SDL code to be sure. Gamepads tend to require the drivers being detectable by xinput.dll. I&#39;m pretty sure you need special drivers to be installed such as SCPToolkit. Terraria is an example of this. There are xinput wrappers for DS3 controllers you could look into instead of SDL2 API."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530144999, "post_id": 51072247, "comment_id": 89135699, "body": "I don&#39;t think that&#39;s how it works on mac or generally, as SDL is supposed to handle all the driver craziness for you. The controller works fine with other applications. Also, I need to use SDL&#39;s system to be consistent with the rest of my input system. I was following this: <a href=\"https://davidgow.net/handmadepenguin/ch6.html\" rel=\"nofollow noreferrer\">davidgow.net/handmadepenguin/ch6.html</a>"}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530145889, "post_id": 51072247, "comment_id": 89135844, "body": "I have no idea about Mac. Looking at the source... mac isn&#39;t even a directory in the joystick folder. I do see iphoneos, though. I can tell you that SDL2 doesn&#39;t know the difference between a joystick and a gamepad without it being supported by the developers. IphoneOS only seem to support Steam and &quot;GC&quot; controllers. As can be seen in your link, these are XBox and Steam controllers."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530146150, "post_id": 51072247, "comment_id": 89135893, "body": "SDL uses a text file of controller mappings. I don&#39;t see why mac would require a special folder. I am surprised that this basic thing is so poorly documented. hmm. I think that you&#39;re thinking of how Windows does things."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530190449, "post_id": 51072247, "comment_id": 89155193, "body": "@ffhighwind Mac target folder is the Darwin one"}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1530190748, "post_id": 51072247, "comment_id": 89155395, "body": "@synchronizer Every OS implements drivers (almost) in their own way so they have to make a version of joystick for each one. This shouldn&#39;t affect you tho. You have a newer version available, you could try using #that (2.0.7). Btw are you connecting through USB or bluetooth?"}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1530199984, "post_id": 51072247, "comment_id": 89161826, "body": "It&#39;s plugged in at start @Aram . (USB). I used homebrew to install SDL and it looks like there is no Mavericks bottle for SDL (they are on 2.0.8). I&#39;d rather not install everything again from source, so I am not sure what to do. I would have liked to try a newer version that uses the newer controller syntax, but as far as I&#39;m aware homebrew can&#39;t give me an older version."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1530200553, "post_id": 51072247, "comment_id": 89162189, "body": "@synchronizer I&#39;ve used brew too and I have 2.0.7 thats why I was saying that. If you post a better MVCE I might test it tomorrow with my PS4 controller, I have both first gen and second gen controllers (I don&#39;t have a mac at home)."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1530200786, "post_id": 51072247, "comment_id": 89162310, "body": "@Aram According to this: <a href=\"https://github.com/Homebrew/homebrew-core/blob/master/Formula/sdl2.rb\" rel=\"nofollow noreferrer\">github.com/Homebrew/homebrew-core/blob/master/Formula/sdl2.r&zwnj;&#8203;b</a> Mavericks isn&#39;t an available bottle, unless I&#39;m misinterpreting it and somehow Mavericks would be able to install from those bottled. --or could it somehow install an older version (2.0.7). I just purchased the controller so it&#39;s the second generation. Is it possible that the game controller mapping archive for 2.0.5 doesn&#39;t cover those? It would be great if you could check. I don&#39;t know how to reduce my example though. All I do is create the window and check whether the joystick is a gamepad."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1530203647, "post_id": 51072247, "comment_id": 89163923, "body": "Actually, the brew script has &quot;any&quot; above the other bottle cellars, so this may still work. I&#39;ve seen 2.0.8 used with Mavericks."}], "answers": [{"tags": [], "owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "is_accepted": true, "score": 1, "last_activity_date": 1530217593, "creation_date": 1530217593, "answer_id": 51090750, "question_id": 51072247, "link": "https://stackoverflow.com/questions/51072247/sdl-2-cannot-open-controller-but-joystick-recognized/51090750#51090750", "title": "SDL 2 Cannot Open Controller but Joystick Recognized", "body": "<p>The controller was recognized as a joystick but not as a controller, meaning that none of the available mappings I could find (in 2.0.5 controller mapping format) corresponded with the controller. Updating from SDL 2.0.5 to 2.0.8 also updated available mappings it seems, and now the controller is recognized as a game controller.</p>\n\n<p>Note: normally it is a terrible idea to upgrade tools mid-project, but in this case it was safe to do.</p>\n"}], "owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "accepted_answer_id": 51090750, "answer_count": 1, "score": 3, "last_activity_date": 1530217593, "creation_date": 1530138218, "last_edit_date": 1530213677, "question_id": 51072247, "link": "https://stackoverflow.com/questions/51072247/sdl-2-cannot-open-controller-but-joystick-recognized", "title": "SDL 2 Cannot Open Controller but Joystick Recognized", "body": "<p>I am writing a C++ program using SDL 2 for the platform layer and opengl for graphics and rendering. I have a full working prototype with keyboard and mouse input. Now I am now trying to use SDL's game controller API to connect a gamepad (to replace or supplement keyboard controls). Unfortunately the controller does not seem to be recognized despite the fact that it works perfectly with other software. It's a Sony Dualshock 4 (for the Playstation 4 system). My system is Mac OS 10.9.5, and I am using SDL 2.0.5 with the official community controller database for SDL 2.0.5, which contains ps4 controller mappings:</p>\n\n<pre><code>030000004c050000c405000000000000,PS4 Controller,a:b1,b:b2,back:b8,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b12,leftshoulder:b4,leftstick:b10,lefttrigger:a3,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b11,righttrigger:a4,rightx:a2,righty:a5,start:b9,x:b0,y:b3,platform:Mac OS X,\n4c05000000000000c405000000000000,PS4 Controller,a:b1,b:b2,back:b8,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b12,leftshoulder:b4,leftstick:b10,lefttrigger:a3,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b11,righttrigger:a4,rightx:a2,righty:a5,start:b9,x:b0,y:b3,platform:Mac OS X\n</code></pre>\n\n<p>I also added a new mapping using one of the official tools. That also loads successfully according to the relevant function call.</p>\n\n<p>The following is my code, and it's about as close to a minimal example as I can get:</p>\n\n<pre><code>// in main\n    // window and graphics context initialization here\n    // initialize SDL\n    if (SDL_Init(SDL_INIT_VIDEO | SDL_INIT_GAMECONTROLLER | SDL_INIT_HAPTIC) &lt; 0) {\n        fprintf(stderr, \"%s\\n\", \"SDL could not initialize\");\n        return EXIT_FAILURE;\n    }\n\n    // load controller mappings, I tested this and 35 mappings load successfully, which is expected\n    SDL_GameControllerAddMappingsFromFile(\"./mapping/gamecontrollerdb_205.txt\");\n\n    // the controller handle\n    SDL_GameController* controller = nullptr;\n    // max_joysticks is 1, which means that the device connects at least\n    int max_joysticks = SDL_NumJoysticks();\n\n    if (max_joysticks &lt; 1) {\n        return EXIT_FAILURE;\n    }\n\n    // this returns, which means that the joystick exists, but it isn't recognized as a game controller.\n    if (!SDL_IsGameController(0)) {\n        return EXIT_FAILURE;\n    }\n\n    // I never get passed this.\n    controller = SDL_GameControllerOpen(0);\n\n    fprintf(stdout, \"CONTROLLER: %s\\n\", SDL_GameControllerName(controller));\n</code></pre>\n\n<p>Has anyone encountered this problem? I've done some preliminary searching as I mentioned, but it seems that usually either the number of joysticks is 0, or everything is recognized.</p>\n\n<p>Also, <code>SDL_CONTROLLERDEVICEADDED</code> isn't firing when I connect the controller.</p>\n\n<p>The controller is connected via USB before I start the program. Also, this is one of the new controllers, and I'm not sure whether the mappings work with that new one. I assume so considering that there are two distinct entries.\nThank you.</p>\n\n<p>EDIT:</p>\n\n<p>I double checked and the PS4 controller works fine as a joystick, but it isn't recognized as a controller, which means that the mapping is incorrect or non-existent. This may be because my controller is \"version 2\" of the dualshock 4, and I'm not sure whether a 2.0.5-compatible mapping was added. hmmm</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1530140952, "post_id": 51072081, "comment_id": 89134839, "body": "Can you show the signal in MainWindow.h?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1530141043, "post_id": 51072081, "comment_id": 89134854, "body": "I have tried the logic that shows and works correctly, maybe the error is elsewhere."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1530175075, "post_id": 51072081, "comment_id": 89145250, "body": "Please show the implementation of <code>Worker::process</code>.  Are you sure it&#39;s not blocking the event loop."}, {"owner": {"reputation": 336, "user_id": 3249686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZ7CT.png?s=128&g=1", "display_name": "Eloy", "link": "https://stackoverflow.com/users/3249686/eloy"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1530177951, "post_id": 51072081, "comment_id": 89147091, "body": "@G.M. Thank you, that was indeed the problem."}], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 3249686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZ7CT.png?s=128&g=1", "display_name": "Eloy", "link": "https://stackoverflow.com/users/3249686/eloy"}, "is_accepted": true, "score": 1, "last_activity_date": 1530180640, "creation_date": 1530180640, "answer_id": 51080199, "question_id": 51072081, "link": "https://stackoverflow.com/questions/51072081/qt5-cross-threads-signal-and-slot/51080199#51080199", "title": "Qt5 cross-threads signal and slot", "body": "<p>Found the problem, <code>Worker::process</code> was indeed blocking the event loop. </p>\n"}], "owner": {"reputation": 336, "user_id": 3249686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VZ7CT.png?s=128&g=1", "display_name": "Eloy", "link": "https://stackoverflow.com/users/3249686/eloy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 51080199, "answer_count": 1, "score": 0, "last_activity_date": 1530180640, "creation_date": 1530137187, "last_edit_date": 1530140341, "question_id": 51072081, "link": "https://stackoverflow.com/questions/51072081/qt5-cross-threads-signal-and-slot", "title": "Qt5 cross-threads signal and slot", "body": "<p>Before this question is closed as duplicate: The question that was asked about this same problem is from 2009 and Qt changed how threading should be implemented. </p>\n\n<p>My Qt application has a main thread and a worker thread. I simplified the code for the question, but the problem is as follows:</p>\n\n<p>If The MainWindow object emits a signal, that must be received by the slot of the worker object in a different QThread. </p>\n\n<p>The main functions looks as follows:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv); \n    MainWindow w(0, [lot of irrelevant argumtents], ...)\n\n    QThread* thread = new QThread;\n    Worker *worker = new Worker(&amp;w);\n    QObject::connect(&amp;w, SIGNAL(demoButtonClicked()), worker, SLOT(DemoButton()));\n    QObject::connect(thread, SIGNAL(started()), worker, SLOT(process()));\n    worker-&gt;moveToThread(thread);\n    thread-&gt;start();\n\n    w.show();\n    a.exec();\n}\n</code></pre>\n\n<p>The (simplified) worker class looks as follows:</p>\n\n<pre><code>class Worker : public QObject\n{\n    Q_OBJECT\npublic:\n    Worker(MainWindow *w);\npublic slots:\n    void process();\n    void DemoButton();\n};\n\n\nvoid Worker::DemoButton(){\n    cout &lt;&lt; \"Slot for demo button executed from worker thread!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And the mainwindow class contains this function and just the signal defined in the header:</p>\n\n<pre><code>void MainWindow::on_pushButton_3_clicked()\n{\n    std::cout &lt;&lt; \"Signal for demo button emitted!\" &lt;&lt; std::endl;\n    emit demoButtonClicked();\n}\n</code></pre>\n\n<p>When I exectute the program, the on_pushButton_3_clicked function is executed, but not the slot in the worker object.</p>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1530136756, "post_id": 51071980, "comment_id": 89133782, "body": "Micronag: instead of <code>MAX_WORD_LENGTH + 1</code> all over the place, consider something like <code>const int MAX_WORD_LENGTH_WITH_NULL = MAX_WORD_LENGTH + 1;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1530136911, "post_id": 51071980, "comment_id": 89133847, "body": "Macronag: You will get better results if you show your best attempt at implementing <code>checkEmptyString</code>. For all we know you could be off by something trivial and the fix is small. Plus people are better motivated if they know you have tried to accomplish your homework before crowdsourcing it."}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530136936, "post_id": 51071980, "comment_id": 89133855, "body": "<a href=\"http://www.cplusplus.com/reference/cstring/strlen/\" rel=\"nofollow noreferrer\">strlen</a>(str) == 0."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 3, "creation_date": 1530137011, "post_id": 51071980, "comment_id": 89133873, "body": "@ffhighwind <code>strlen</code> requires iterating the whole string. Testing the first byte for a null char is far less work."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1530159456, "post_id": 51072202, "comment_id": 89138577, "body": "<code>if (!word[i][0]) return false;</code> would work in place of the <code>while</code> and <code>if</code>. All you need is to make sure there is at least one character in each string, so if there is one, no need to count the rest."}], "tags": [], "owner": {"reputation": 701, "user_id": 6626185, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-4Dw-Df4ebNk/AAAAAAAAAAI/AAAAAAAAAA4/_pGdz1AofD0/photo.jpg?sz=128", "display_name": "Zeta", "link": "https://stackoverflow.com/users/6626185/zeta"}, "is_accepted": false, "score": 0, "last_activity_date": 1530137980, "creation_date": 1530137980, "answer_id": 51072202, "question_id": 51071980, "link": "https://stackoverflow.com/questions/51071980/how-to-check-if-two-dimensional-char-array-has-empty-word/51072202#51072202", "title": "How to check if two-dimensional char array has empty word", "body": "<pre><code>for(int i=0; i&lt;numOfWords; i++) {\n    int j=0;\n    while(word[i][j]) j++;\n    if(!j) return true;\n}\nreturn false;\n</code></pre>\n\n<p>I think This will do the job..</p>\n"}], "owner": {"reputation": 5, "user_id": 8970642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca60c149fa370ee783352fed67d236d?s=128&d=identicon&r=PG&f=1", "display_name": "HardStats", "link": "https://stackoverflow.com/users/8970642/hardstats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530137980, "creation_date": 1530136552, "question_id": 51071980, "link": "https://stackoverflow.com/questions/51071980/how-to-check-if-two-dimensional-char-array-has-empty-word", "title": "How to check if two-dimensional char array has empty word", "body": "<p>Here there are two two-dimensional character arrays that hold certain words.\nI'm trying to make a function that will return a false if the double array contains the word that is empty C-string ('') and true if every word it has contains at least one letter.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst int MAX_WORD_LENGTH = 20;\n\nbool checkEmptyString(const char word[][MAX_WORD_LENGTH + 1], int numOfWords);\n\nint main()\n{\n    const char dict1[][MAX_WORD_LENGTH + 1] = {\"Hello\", \"What\", \"\"};\n    const char dict2[][MAX_WORD_LENGTH + 1] = {\"Hello\", \"Hey\" \"Man\", \"Sup\"};\n\n    if (checkEmptyString(dict1, 3))\n         cout &lt;&lt; \"Dictionary 1 is empty!\" &lt;&lt; endl;\n    else \n         cout &lt;&lt; \"Dictionary 1 is not empty!\" &lt;&lt; endl;\n\n    if (checkEmptyString(dict2, 4))\n        cout &lt;&lt; \"Dictionary 2 is empty!\" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"Dictionary 2 is not empty!\" &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n\nbool checkEmptyString(const char word[][MAX_WORD_LENGTH + 1], int numOfWords)\n{\n   // Enter code here ... //\n}\n</code></pre>\n\n<p>How do I implement the function that way the desired outcome is generated?</p>\n"}, {"tags": ["c++", "c++11", "boost", "unsigned-integer", "boost-any"], "comments": [{"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530137632, "post_id": 51071956, "comment_id": 89134059, "body": "Best way to be sure is to try it. I don&#39;t see any issue with uint8_t except pre-c++11 where it could be aliased to char. The principle of any is type erasure. google it"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530138862, "post_id": 51071956, "comment_id": 89134381, "body": "As described in the documentation you linked to, the conversion is via <code>any_cast</code>, not <code>cast_any</code>. If that is a typo in your question, please fix it. If that&#39;s a typo in your code, then maybe that&#39;s what one of your problems is."}, {"owner": {"reputation": 458, "user_id": 3808585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9pd60.jpg?s=128&g=1", "display_name": "demogorgon", "link": "https://stackoverflow.com/users/3808585/demogorgon"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530138952, "post_id": 51071956, "comment_id": 89134408, "body": "@JaMiT yes that is a typo, thank you."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1530139324, "post_id": 51071956, "comment_id": 89134489, "body": "casting to <code>uint8_t</code> with <code>any_cast</code> should work. You may be having <a href=\"https://stackoverflow.com/questions/19562103/uint8-t-cant-be-printed-with-cout\">this</a> problem"}, {"owner": {"reputation": 458, "user_id": 3808585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9pd60.jpg?s=128&g=1", "display_name": "demogorgon", "link": "https://stackoverflow.com/users/3808585/demogorgon"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1530140013, "post_id": 51071956, "comment_id": 89134637, "body": "@vu1p3n0x I think you are correct.  Since I couldn&#39;t see the value, I used <code>sizeof</code> on <code>any_cast</code> and saw that it was 1.  So I think the value is there.. thanks for input"}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 3808585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9pd60.jpg?s=128&g=1", "display_name": "demogorgon", "link": "https://stackoverflow.com/users/3808585/demogorgon"}, "edited": false, "score": 0, "creation_date": 1530142368, "post_id": 51072689, "comment_id": 89135140, "body": "Thanks so much for the insight, extremely helpful.  I realize my second example is misleading using <code>x</code> again and it makes it seem that I did in fact think it was a data member still.  I will edit that so it is more clear for future readers.  Much appreciated!"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 2, "last_activity_date": 1530142488, "last_edit_date": 1530142488, "creation_date": 1530141643, "answer_id": 51072689, "question_id": 51071956, "link": "https://stackoverflow.com/questions/51071956/boostany-with-structs-and-unsigned-ints/51072689#51072689", "title": "boost::any with structs and unsigned ints", "body": "<blockquote>\n  <p>I was wondering if it is possible to assign a struct to a <code>boost::any</code> variable</p>\n</blockquote>\n\n<p>It is.</p>\n\n<blockquote>\n  <p>How would I access the data member <code>x</code>?</p>\n</blockquote>\n\n<p>You would access with <code>any_cast&lt;S&gt;(var).x</code>. Continuing your example:</p>\n\n<pre><code>int&amp; the_x_member = any_cast&lt;S&gt;(var).x;\nstd::cout &lt;&lt; \"s.x is \" &lt;&lt; the_x_member &lt;&lt; \"\\n\";\n</code></pre>\n\n<blockquote>\n  <p>What if variable <code>a</code> is of type <code>uint8_t</code>?</p>\n</blockquote>\n\n<p>It's perfectly possible to assign an unsigned integer type to a <code>boost::any</code> (or <code>std::any</code>, which does the same thing but with somewhat different syntax).</p>\n\n<blockquote>\n  <p>When I tried using <code>boost::any_cast&lt;uint8_t&gt;()</code> it did not print, but did not throw an error. </p>\n</blockquote>\n\n<p>Wouldn't that \"print\" a <code>\\0</code> character? So it would look like nothing was printed.</p>\n\n<blockquote>\n  <p>Is it possible to get the value of a type like <code>uint8_t</code> using Boost? If so how?</p>\n</blockquote>\n\n<p>Just like you'd expect:</p>\n\n<pre><code>uint8_t u = 234;\nboost::any ba = u;\nstd::cout &lt;&lt; \"u is \" &lt;&lt; (int) boost::any_cast&lt;uint8_t&gt;(ba) &lt;&lt; '\\n';\n</code></pre>\n\n<p>This <a href=\"http://coliru.stacked-crooked.com/a/b91237848a39abae\" rel=\"nofollow noreferrer\">does indeed work</a>.</p>\n"}], "owner": {"reputation": 458, "user_id": 3808585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9pd60.jpg?s=128&g=1", "display_name": "demogorgon", "link": "https://stackoverflow.com/users/3808585/demogorgon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 51072689, "answer_count": 1, "score": 0, "last_activity_date": 1530142488, "creation_date": 1530136450, "last_edit_date": 1530142462, "question_id": 51071956, "link": "https://stackoverflow.com/questions/51071956/boostany-with-structs-and-unsigned-ints", "title": "boost::any with structs and unsigned ints", "body": "<p>There are several parts to my question. I have been researching on how/when to use <code>boost::any</code>.  I was wondering if it is possible to assign a <code>struct</code> to a <code>boost::any</code> variable.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>struct S {\n   int x;\n};\n\nS s;\ns.x = 5;\n\nboost::any var = s;\n</code></pre>\n\n<p>It would seem to me that this is possible but it leads me to my next question.  If this is a valid assignment, then how would I access the data member <code>x</code>?  <code>var</code> is not a <code>struct</code> type since it is <code>boost::any</code>.</p>\n\n<p>My next question is not dependent on whether the data member can be accessed or not.  The question then is, what if variable <code>a</code> is of type <code>uint8_t</code>.  </p>\n\n<p><strong>Example:</strong> <em>Edit: as pointed out in the comments, the code below does support uint8_t but it is not printed. See</em> <a href=\"https://stackoverflow.com/questions/19562103/uint8-t-cant-be-printed-with-cout\">uint8_t can't be printed with cout</a>.</p>\n\n<pre><code>uint8_t a = 10;\n\nboost::any b = a;\n\nstd::cout &lt;&lt; boost::any_cast&lt;uint8_t&gt;(b);\n</code></pre>\n\n<p>I found that it is possible to use <code>boost::any_cast</code> but have not found that it supports unsigned types.  When I tried using <code>boost::any_cast&lt;uint8_t&gt;()</code> it did not print, but did not throw an error.  Is it possible to get the value of a type like <code>uint8_t</code> using <code>boost</code>?  If so how?</p>\n\n<p>I will continue reading more documentation of <a href=\"https://theboostcpplibraries.com/boost.any\" rel=\"nofollow noreferrer\">boost::any</a> but if anyone has insight, details, or notes on these questions or the subject, please post as I would love to learn more about how this works.  Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1530135896, "post_id": 51071817, "comment_id": 89133467, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530135984, "post_id": 51071817, "comment_id": 89133496, "body": "In <code>sum += (stoi(ops[i-1]) * 2);</code> and <code>sum += (stoi(ops[i-1]) + stoi(ops[i-2]));</code> you need to make sure <code>ops[...]</code> is a valid integer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1530136130, "post_id": 51071817, "comment_id": 89133538, "body": "It&#39;s not related to the error, but when you process <code>C</code> you need to subtract the last round from <code>sum</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530138330, "post_id": 51071817, "comment_id": 89134250, "body": "<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\"><code>std::stoi()</code></a> throws a <code>std::invalid_argument</code> exception if the input <code>std::string</code> can&#39;t be converted to an <code>int</code>. You are not catching that exception, which ultimately leads the app to terminate itself. Also, what does the content of <code>ops</code> look like? The loop is <code>erase()</code>&#39;ing elements from <code>ops</code>, so there is a risk that <code>i</code> is going out of range. Any time you need a loop that removes elements from the container being looped through, a <code>for</code> loop is a bad choice to use."}, {"owner": {"reputation": 17, "user_id": 10002407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1891d2e8c7797ff8273a5020b10e834e?s=128&d=identicon&r=PG&f=1", "display_name": "PracticingCodeMan", "link": "https://stackoverflow.com/users/10002407/practicingcodeman"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530144020, "post_id": 51071817, "comment_id": 89135468, "body": "@NathanOliver From my analysis I believe I do not need to check whether the stoi is a valid integer or not because I know for sure the first variable can not or at least should not be according to the instructions a non integer value. Therefore, any other following string should be able to be converted regardless because I am removing the characters that I do not need. For example, for the input above, when I get to C, I remove C, so when I get to D, I know for sure all I have is an integer value before. I make sure to remove and non-integer value."}, {"owner": {"reputation": 17, "user_id": 10002407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1891d2e8c7797ff8273a5020b10e834e?s=128&d=identicon&r=PG&f=1", "display_name": "PracticingCodeMan", "link": "https://stackoverflow.com/users/10002407/practicingcodeman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530144128, "post_id": 51071817, "comment_id": 89135494, "body": "@RemyLebeau What do you suggest I use instead of a for loop? I also thought it would be bad, but could not think of anything else. I couldn&#39;t think of a way to use a while loop because the size would not be able to change according to my method because I am not deleting all the values and therefore would not be able to make the conditional statement to be &quot;&gt;=0&quot; etc... Thanks guys."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530147399, "post_id": 51071817, "comment_id": 89136127, "body": "@PracticingCodeMan your whole code is wrong and needs to be re-written. You don&#39;t need to delete anything from the <code>ops</code> vector. I posted an answer to show that."}, {"owner": {"reputation": 17, "user_id": 10002407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1891d2e8c7797ff8273a5020b10e834e?s=128&d=identicon&r=PG&f=1", "display_name": "PracticingCodeMan", "link": "https://stackoverflow.com/users/10002407/practicingcodeman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530149099, "post_id": 51071817, "comment_id": 89136452, "body": "@RemyLebeau Hey Remy, thank you for your help! I am trying to understand your code... I have not learned C++ 11 or beyond yet so it is quite troublesome! I did; however, solve the problem and have it posted on LeetCode. Here is the link: <a href=\"https://leetcode.com/problems/baseball-game/discuss/142911/C++-Solution-Please-Give-Feedback\" rel=\"nofollow noreferrer\">leetcode.com/problems/baseball-game/discuss/142911/&hellip;</a>!"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1530147618, "last_edit_date": 1530147618, "creation_date": 1530147280, "answer_id": 51073285, "question_id": 51071817, "link": "https://stackoverflow.com/questions/51071817/terminate-called-after-throwing-an-instance-of-stdinvalid-argument-what-s/51073285#51073285", "title": "terminate called after throwing an instance of &#39;std::invalid_argument&#39; what(): stoi (Can&#39;t find what is wrong)", "body": "<p><code>std::stoi()</code> throws a <code>std::invalid_argument</code> exception if the input <code>std::string</code> value cannot be converted to an <code>int</code>. You are not catching that exception.  If it escapes from <code>main()</code>, the app will terminate itself.</p>\n\n<p>Also, your loop is <code>erase()</code>'ing elements from <code>ops</code>, so there is a risk that your <code>i</code> index can go out of range if you are not careful, especially since you are not performing any range checks.  And there are indeed logic errors in your case blocks where you are not managing <code>ops</code> and <code>i</code> correctly.</p>\n\n<p>Any time you need a loop that removes elements from the container that is being looped through, a <code>for</code> loop is a bad choice to use.  A <code>while</code> loop is typically better, so that you have more control over the indexing.</p>\n\n<p>However, your whole code is just plain wrong in general and needs to be re-written.  You are not following the instructions that you were given, as you are not calculating the points per round as instructed.  You are performing calculations strictly on the input values in <code>ops</code>, which is not what the instructions asked you to do.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\n#include &lt;stdexcept&gt;\n\nclass Solution {\npublic:\n    int calPoints(const std::vector&lt;std::string&gt; &amp;ops)\n    {\n        std::vector&lt;int&gt; rounds;\n        int points;\n\n        for(auto &amp;op : ops)\n        {\n            if (op == \"C\")\n            {\n                if (rounds.empty())\n                    throw std::out_of_range(\"Not enough valid rounds!\");\n\n                rounds.pop_back();\n            }\n            else if (op == \"D\")\n            {\n                if (rounds.empty())\n                    throw std::out_of_range(\"Not enough valid rounds!\");\n\n                points = rounds.back() * 2;\n                rounds.push_back(points);\n            }\n            else if (op == \"+\")\n            {\n                const std::vector&lt;int&gt;::size_type numRounds = rounds.size();\n                if (numRounds &lt; 2)\n                    throw std::out_of_range(\"Not enough valid rounds!\");\n\n                points = rounds[numRounds-2] + rounds[numRounds-1];\n                rounds.push_back(points);\n            }\n            else\n            {\n                points = std::stoi(op);\n                rounds.push_back(points);\n            }\n        }\n\n        return std::accumulate(rounds.begin(), rounds.end(), 0);\n    }\n};\n</code></pre>\n\n<p>This produces a sum of <code>30</code> from an input of <code>[\"5\",\"2\",\"C\",\"D\",\"+\"]</code>, as expected.</p>\n\n<p><a href=\"https://ideone.com/9ZaNca\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 17, "user_id": 10002407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1891d2e8c7797ff8273a5020b10e834e?s=128&d=identicon&r=PG&f=1", "display_name": "PracticingCodeMan", "link": "https://stackoverflow.com/users/10002407/practicingcodeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3290, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1530147618, "creation_date": 1530135700, "question_id": 51071817, "link": "https://stackoverflow.com/questions/51071817/terminate-called-after-throwing-an-instance-of-stdinvalid-argument-what-s", "title": "terminate called after throwing an instance of &#39;std::invalid_argument&#39; what(): stoi (Can&#39;t find what is wrong)", "body": "<pre><code>class Solution {\npublic:\n    int calPoints(vector&lt;string&gt;&amp; ops) {\n        int sum = 0;\n        for(int i = 0; i &lt; ops.size(); i++){\n            if(ops[i] != \"C\" &amp;&amp; ops[i] !=  \"D\" &amp;&amp; ops[i] != \"+\"){\n                sum += stoi(ops[i]);\n            }\n            else if(ops[i] == \"C\"){\n                ops.erase(ops.begin() + (i-1));\n                ops.erase(ops.begin() + (i-1));\n                i = i-2;\n            }\n            else if(ops[i] == \"D\"){\n                sum += (stoi(ops[i-1]) * 2);\n                ops.erase(ops.begin() + i);\n                i = i-1;\n            }\n            else{\n                sum += (stoi(ops[i-1]) + stoi(ops[i-2]));\n                ops.erase(ops.begin() + i);\n                i = i-1;\n            }\n        }\n        return sum;\n    }\n};\n</code></pre>\n\n<p>I looked up what the error message meant and others stated that I was feeding the argument 'bad information.' However, I personally can not find what is wrong with my code. Could anyone please assist me? Here is the goal:</p>\n\n<pre><code>You're now a baseball game point recorder.\n\nGiven a list of strings, each string can be one of the 4 following types:\n\nInteger (one round's score): Directly represents the number of points you get in this round.\n\"+\" (one round's score): Represents that the points you get in this round are the sum of the last two valid round's points.\n\"D\" (one round's score): Represents that the points you get in this round are the doubled data of the last valid round's points.\n\"C\" (an operation, which isn't a round's score): Represents the last valid round's points you get were invalid and should be removed.\nEach round's operation is permanent and could have an impact on the round before and the round after.\n\nYou need to return the sum of the points you could get in all the rounds.\n\nInput: [\"5\",\"2\",\"C\",\"D\",\"+\"]\nOutput: 30\nExplanation: \nRound 1: You could get 5 points. The sum is: 5.\nRound 2: You could get 2 points. The sum is: 7.\nOperation 1: The round 2's data was invalid. The sum is: 5.  \nRound 3: You could get 10 points (the round 2's data has been removed). The sum is: 15.\nRound 4: You could get 5 + 10 = 15 points. The sum is: 30.\n</code></pre>\n\n<p>This is a LeetCode problem, not homework!</p>\n"}, {"tags": ["c++", "stl", "stl-algorithm"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1530135819, "post_id": 51071805, "comment_id": 89133434, "body": "One good way to understand unknown code is to use common debugging techniques, like &quot;printf&quot; debugging, <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a>, and of course to step through the code line by line in an actual debugger. Try these using a few simple ranges and see what happens with the implementation as shown, and with your modification."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1530136651, "post_id": 51071805, "comment_id": 89133752, "body": "Until you meet a duplicate both iterators point to the same location."}, {"owner": {"reputation": 2051, "user_id": 8539057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7834c2ec493485bbc1867121cdee50ed?s=128&d=identicon&r=PG&f=1", "display_name": "Nichlas Uden", "link": "https://stackoverflow.com/users/8539057/nichlas-uden"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1530137255, "post_id": 51071805, "comment_id": 89133957, "body": "@Galik Hmm, but since <code>result</code> is incremented before the comparison and <code>first</code> is a copy of <code>result</code> which already has been incremented, won&#39;t the two always compare equal?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1530137497, "post_id": 51071805, "comment_id": 89134018, "body": "@NichlasUden No, because the increment after the <code>&amp;&amp;</code> will not always take place because if the left side of the <code>&amp;&amp;</code> is false then the right side is not executed."}, {"owner": {"reputation": 2051, "user_id": 8539057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7834c2ec493485bbc1867121cdee50ed?s=128&d=identicon&r=PG&f=1", "display_name": "Nichlas Uden", "link": "https://stackoverflow.com/users/8539057/nichlas-uden"}, "edited": false, "score": 0, "creation_date": 1530137688, "post_id": 51071805, "comment_id": 89134081, "body": "I see. Thanks :)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1530138826, "post_id": 51071805, "comment_id": 89134366, "body": "Many if you remove control structure and turn that in a bunch of simple tests and <code>goto</code>..."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1530144797, "post_id": 51071805, "comment_id": 89135660, "body": "@NichlasUden first = result UNTIL a dup is found. Then the difference increase with each dup found."}], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "is_accepted": false, "score": 1, "last_activity_date": 1530136325, "creation_date": 1530136325, "answer_id": 51071938, "question_id": 51071805, "link": "https://stackoverflow.com/questions/51071805/confusion-about-stdunique-implementation/51071938#51071938", "title": "Confusion about std::unique implementation?", "body": "<p>If you do <code>if(!(*result++ == *first))</code> you always increment <code>result</code> in your condition. But if <code>!(*result == *first)</code> is false, the second part of the condition never gets evaluated thanks to short-circuit evaluation.</p>\n\n<p>The difference is critical to the meaning of \"unique\".</p>\n"}, {"tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": true, "score": 3, "last_activity_date": 1530140356, "creation_date": 1530140356, "answer_id": 51072524, "question_id": 51071805, "link": "https://stackoverflow.com/questions/51071805/confusion-about-stdunique-implementation/51072524#51072524", "title": "Confusion about std::unique implementation?", "body": "<p>Let's rewrite the code into smaller steps (the code is equivalent to the one in the question - I've just split the if statement into two separate parts):</p>\n\n<pre><code>template&lt;class ForwardIt&gt;\nForwardIt unique(ForwardIt first, ForwardIt last)\n{\n    // are there elements to test?\n    if (first == last)\n        return last;\n\n    // there are elements so point result to the first one\n    ForwardIt result = first;\n\n    // then increment first and check if we are done\n    while (++first != last) {\n\n        // if the value of first is still the same as the value of result\n        // then restart the loop (incrementing first and checking if we are done)\n        // Notice that result isn't moved until the values differ\n        if (*result == *first)\n            continue;\n\n        // increment result and move the value of first to this new spot\n        // as long as they don't point to the same place\n        // So result is only moved when first points to a new (different) value \n        if (++result != first) {\n            *result = std::move(*first);\n        }\n    }\n\n    // return one past the end of the new (possibly shorter) range.\n    return ++result;\n}\n</code></pre>\n\n<p>Here is an example:</p>\n\n<pre><code>result\n   v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  2  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n   ^                                               ^\n first                                           last\n</code></pre>\n\n<p>Step 1 - increment first and compare the value of first with the value of result:</p>\n\n<pre><code>result\n   v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  2  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n         ^                                         ^\n       first                                      last\n</code></pre>\n\n<p>Step 2 - the values differ so increment result but now they point to the same place so moving is superfluous and we don't do it</p>\n\n<pre><code>      result\n         v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  2  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n         ^                                         ^\n       first                                      last\n</code></pre>\n\n<p>Step 3 - increment first and compare the value of first with the value of result:</p>\n\n<pre><code>      result\n         v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  2  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n               ^                                   ^\n             first                                last\n</code></pre>\n\n<p>Step 4 - the values are the same so restart the loop (incrementing first and comparing the value of first with the value of result):</p>\n\n<pre><code>      result\n         v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  2  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                     ^                             ^\n                   first                          last\n</code></pre>\n\n<p>Step 5 - the values differ so increment result, they point to different places so moving the value of first into the value of result:</p>\n\n<pre><code>            result\n               v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                     ^                             ^\n                   first                          last\n</code></pre>\n\n<p>Step 6 - increment first and compare the value of first with the value of result:</p>\n\n<pre><code>            result\n               v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  3  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                           ^                       ^\n                         first                    last\n</code></pre>\n\n<p>Step 7 - the values differ so increment result, they point to different places so moving the value of first into the value of result:</p>\n\n<pre><code>                  result\n                     v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                           ^                       ^\n                         first                    last\n</code></pre>\n\n<p>Step 8 - increment first and compare the value of first with the value of result:</p>\n\n<pre><code>                  result\n                     v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                                 ^                 ^\n                               first              last\n</code></pre>\n\n<p>Step 9 - the values are the same so restart the loop (incrementing first and comparing the value of first with the value of result):</p>\n\n<pre><code>                  result\n                     v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                                       ^           ^\n                                     first        last\n</code></pre>\n\n<p>Step 10 - the values are the same so restart the loop (incrementing first and comparing the value of first with the value of result):</p>\n\n<pre><code>                  result\n                     v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  4  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                                             ^     ^\n                                           first  last\n</code></pre>\n\n<p>Step 11 - the values differ so increment result, they point to different places so moving the value of first into the value of result:</p>\n\n<pre><code>                        result\n                           v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  5  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                                             ^      ^\n                                           first   last\n</code></pre>\n\n<p>Step 12 - increment first and the while loop ends because first and last point to the same place - then after the loop increment result so it becomes the new end iterator for the unique range:</p>\n\n<pre><code>                              result\n                                 v\n+-----+-----+-----+-----+-----+-----+-----+-----+\n|  1  |  2  |  3  |  4  |  5  |  4  |  4  |  5  |\n+-----+-----+-----+-----+-----+-----+-----+-----+\n                                                    ^\n                                                last&amp;first\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1530143804, "creation_date": 1530143804, "answer_id": 51072921, "question_id": 51071805, "link": "https://stackoverflow.com/questions/51071805/confusion-about-stdunique-implementation/51072921#51072921", "title": "Confusion about std::unique implementation?", "body": "<pre><code>ForwardIt result = first;\nwhile (++first != last) {\n    if (!(*result == *first) &amp;&amp; ++result != first) {\n        *result = std::move(*first);\n    }\n}\nreturn ++result;\n</code></pre>\n\n<p>can be rewritten as </p>\n\n<pre><code>ForwardIt result = first;\n\n// result is the last element different from previous values\n// all the equal elements after result=first are useless\n// *result = *first\n// first is the last element examined\n\n// determine largest range of useless elements\n\n// *result = before(*first) \n// i.e. result has the value of former value (before call) of element *first (current value of first)\n// so first is the last element on which we know something\n\nextend_useless_range: \n    // so range ]result,first] is useless \n    first++;\n    // now range ]result,first[ is useless \n    // and first is the first element yet to be examined\n\n    if (first == last) {\n         // ]result,last[ is useless \n         goto end_loop;\n    }\n    if (*result == *first) {\n         // *first is useless\n         // so range ]result,first] is useless \n         goto extend_useless_range;\n    }\n    // *first is useful\n\n    // range ]result,first[ is biggest useless range after result\n    result++; \n    // range [result,first[ is useless (and *first is useful)\n\n    if (result != first) {\n        // [result,first[ is nonempty\n        *result = std::move(*first);\n        // *result is useful and *first is useless (undetermined value)\n        // ]result,first] is useless\n    }\n    else {\n        // [result,first[ = ]result,first] = {} and is useless\n    }\n    // ]result,first] is useless\n    goto extend_useless_range;\n\nend_loop: // ]result,last[ is useless \n    result++; \n    // [result,last[ is useless \n    return result;\n</code></pre>\n"}], "owner": {"reputation": 2051, "user_id": 8539057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7834c2ec493485bbc1867121cdee50ed?s=128&d=identicon&r=PG&f=1", "display_name": "Nichlas Uden", "link": "https://stackoverflow.com/users/8539057/nichlas-uden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 3, "accepted_answer_id": 51072524, "answer_count": 3, "score": 5, "last_activity_date": 1530143804, "creation_date": 1530135637, "last_edit_date": 1530138602, "question_id": 51071805, "link": "https://stackoverflow.com/questions/51071805/confusion-about-stdunique-implementation", "title": "Confusion about std::unique implementation?", "body": "<p>According to <a href=\"https://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"noreferrer\">this article</a>, one possible implementation of <code>std::unique</code> is</p>\n\n<pre><code>template&lt;class ForwardIt&gt;\nForwardIt unique(ForwardIt first, ForwardIt last)\n{\n    if (first == last)\n        return last;\n\n    ForwardIt result = first;\n    while (++first != last) {\n        if (!(*result == *first) &amp;&amp; ++result != first) {\n            *result = std::move(*first);\n        }\n    }\n    return ++result;\n}\n</code></pre>\n\n<p>However, I do not get what the iterator comparison is for? Why <code>if (!(*result == *first) &amp;&amp; ++result != first)</code> and not just <code>if (!(*result++ == *first))</code>? What is the purpose of comparing the two iterators?</p>\n"}, {"tags": ["c++", "visual-studio", "alignment", "atomic"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1530137153, "post_id": 51071777, "comment_id": 89133921, "body": "Look up the error code on MSDN.  It&#39;s quite clear, alignment specifiers are not allowed on function parameters.  The calling convention does not allow this."}, {"owner": {"reputation": 1, "user_id": 10002346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmHN34Eu-Ac/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1XBTZHT4JacB6aIT7NqxZumKLlAA/mo/photo.jpg?sz=128", "display_name": "Ayush Ranjan", "link": "https://stackoverflow.com/users/10002346/ayush-ranjan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1530138061, "post_id": 51071777, "comment_id": 89134178, "body": "@RichardCritten I have used the alignment specifier on the struct not a function parameter. And I removed the alignas specifier and it still spits the same error (as specified in my question)."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530214218, "post_id": 51071777, "comment_id": 89168424, "body": "If removing <code>alignas(x)</code> gives the same error, then likely it is in other code different from what you posted."}, {"owner": {"reputation": 1, "user_id": 10002346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmHN34Eu-Ac/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1XBTZHT4JacB6aIT7NqxZumKLlAA/mo/photo.jpg?sz=128", "display_name": "Ayush Ranjan", "link": "https://stackoverflow.com/users/10002346/ayush-ranjan"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530214719, "post_id": 51071777, "comment_id": 89168630, "body": "@Ripi2 which other code?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530214796, "post_id": 51071777, "comment_id": 89168670, "body": "You have not posted a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>. So I guess you do have more code."}, {"owner": {"reputation": 1, "user_id": 10002346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmHN34Eu-Ac/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1XBTZHT4JacB6aIT7NqxZumKLlAA/mo/photo.jpg?sz=128", "display_name": "Ayush Ranjan", "link": "https://stackoverflow.com/users/10002346/ayush-ranjan"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530219311, "post_id": 51071777, "comment_id": 89170410, "body": "@Ripi2 I have an entire project. But the error occurs when I try to use the above defined struct with the atomic library. Like std::atomic&lt;s&gt; temp;. Constructing this makes my code fail. Just wanted to post the relevant code."}, {"owner": {"reputation": 1, "user_id": 10002346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmHN34Eu-Ac/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1XBTZHT4JacB6aIT7NqxZumKLlAA/mo/photo.jpg?sz=128", "display_name": "Ayush Ranjan", "link": "https://stackoverflow.com/users/10002346/ayush-ranjan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1530644172, "post_id": 51071777, "comment_id": 89306002, "body": "@RichardCritten yes you are right. The error was coming not because I was using alignas() in my function parameters but because I was passing the above defined struct in the parameters."}], "owner": {"reputation": 1, "user_id": 10002346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmHN34Eu-Ac/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1XBTZHT4JacB6aIT7NqxZumKLlAA/mo/photo.jpg?sz=128", "display_name": "Ayush Ranjan", "link": "https://stackoverflow.com/users/10002346/ayush-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530212864, "creation_date": 1530135424, "last_edit_date": 1530212864, "question_id": 51071777, "link": "https://stackoverflow.com/questions/51071777/atomicudt-aligning-to-word-size", "title": "atomic&lt;UDT&gt; aligning to word size", "body": "<p>I have a struct as follows:</p>\n\n<pre><code>#define _ENABLE_ATOMIC_ALIGNMENT_FIX\n\n#ifdef _WIN32\n    struct alignas(4) s {\n        uint16_t a;\n        uint16_t b;\n        uint16_t c;\n        uint8_t d;\n        uint8_t e;\n    };\n#else\n    struct alignas(8) s {\n        uint16_t a; \n        uint16_t b;\n        uint16_t c;\n        uint8_t d;\n        uint8_t e;\n    };\n#endif // _WIN32\n</code></pre>\n\n<p>This is supposed to be run on 64 bit linux machine so I am trying to build a struct of 64 bits which could be atomic and since it is of word size, it will be lock free. However, I am coding and testing this on a 32-bit windows computer. Visual Studio 2015 (Update 3) always throws the following error:</p>\n\n<pre><code>2&gt;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(519): error C2719: '_Right': formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(525) : error C2719 : '_Right' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(542) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(548) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(580) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(587) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(594) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(602) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(610) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(617) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(624) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(632) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(640) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(647) : error C2719 : '_Value' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(680) : error C2719 : '_Val' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(686) : error C2719 : '_Right' : formal parameter with requested alignment of 8 won't be aligned\n2&gt;C:\\Program Files(x86)\\Microsoft Visual Studio 14.0\\VC\\include\\atomic(691) : error C2719 : '_Right' : formal parameter with requested alignment of 8 won't be aligned\n</code></pre>\n\n<p>I have tried using alignas(8) in windows and it still does not compile. I do not understand why the compiler is not able to align with the required fields. If I remove alignas tag, it gives the same error.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c++11", "constructor", "type-conversion"], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 5, "creation_date": 1530135419, "post_id": 51071741, "comment_id": 89133278, "body": "I would add that a <i>braced-init-list</i> is not an <i>expression</i>, so it can only be used in a limited set of contexts where <i>expression</i>s are allowed."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1530150868, "post_id": 51071741, "comment_id": 89136744, "body": "@Brian Until for some reason <code>auto</code> deduced it to be an <code>initializer_list</code>. Ah the joys of C++."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1530168937, "post_id": 51071741, "comment_id": 89141818, "body": "IIRC, there are parsing issues, especially if the braced-init-list is the left operand."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 16, "last_activity_date": 1530135237, "creation_date": 1530135237, "answer_id": 51071741, "question_id": 51071557, "link": "https://stackoverflow.com/questions/51071557/converting-constructor-with-multiple-arguments/51071741#51071741", "title": "Converting constructor with multiple arguments", "body": "<p>You might be especially surprised that:</p>\n\n<pre><code>x = {1, 2, 3};            // ok\nx == {1, 2, 3};           // error\noperator==(x, {1, 2, 3}); // ok\n</code></pre>\n\n<p>This is because there are just specific places where a <em>braced-init-list</em> (basically, a comma-delimited list of stuff between <code>{}s</code>) is allowed to go in the language. It can go on the right-hand side of <code>=</code> because the rules say it can. It can be used as an argument in a function call expression because the rules say it can. But it cannot be used on either side of the comparison operators because the rules don't allow for it. </p>\n\n<p>I do not know if there is a fundamental reason behind this beyond there probably not being a strong need for it. </p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1530147839, "creation_date": 1530147839, "answer_id": 51073329, "question_id": 51071557, "link": "https://stackoverflow.com/questions/51071557/converting-constructor-with-multiple-arguments/51073329#51073329", "title": "Converting constructor with multiple arguments", "body": "<blockquote>\n  <p>I am wondering why converting constructor doesn't convert list <code>{1,2,3}</code> to <code>Date</code> object?</p>\n</blockquote>\n\n<p>Because it's not a \"converting constructor\". It is merely \"a constructor\".</p>\n\n<p>List initialization (the thing that happens when you use a braced-init-list) is used for initializing an object from a list of values, as one might expect from the name. <code>x = {1, 2, 3};</code> is not initializing an object. <code>x</code> is an object that has already been initialized.</p>\n\n<p>As such, braced-init-lists cannot be directly applied to an existing object; they can only be applied to an object that is being initialized. What you want to do is use the list to initialize a <code>Date</code> and then copy that <code>Date</code> into the existing <code>x</code> object. That's spelled <code>x = Date{1, 2, 3};</code>.</p>\n\n<p>A \"converting constructor\" is a constructor which performs implicit conversions. An implicit conversion converts from an object of one type to an object of another type. List initialization is not, and never has been, a <em>conversion</em> operation. <code>Date x = {1, 2, 3};</code> does not convert a list into a <code>Date</code>; it initializes a <code>Date</code> with a list, using the rules of copy-list-initialization.</p>\n"}, {"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 5, "last_activity_date": 1530204518, "last_edit_date": 1530204518, "creation_date": 1530203719, "answer_id": 51087745, "question_id": 51071557, "link": "https://stackoverflow.com/questions/51071557/converting-constructor-with-multiple-arguments/51087745#51087745", "title": "Converting constructor with multiple arguments", "body": "<p>To complete Barry's answere, I made a list of all the statements or expressions where a <code>brace-init-list</code> can appear:</p>\n\n<ul>\n<li>function call : <code>func({/*...*/},arg2)</code></li>\n<li>subscripting: <code>obj[{/*...*/}]</code>;</li>\n<li>explicit type conversion: <code>type{/*...*/}</code></li>\n<li>new expression: <code>new type{/*...*/}</code></li>\n<li>assignment and compound assignments: <code>a = {/*...*/}; b += {/*...*/};...</code></li>\n<li>in the condition of a conditional statement <code>while (atype i={/*.../*})</code></li>\n<li>for-range-initializer <code>for(auto it:{/*...*/})</code></li>\n<li>return statement: <code>return {/*.../*}</code> (not if the return type is deduced)</li>\n<li>initializer: <code>atype a{/*...*}; atype b={/*.../*};</code> or including member initializer: <code>a_memb{/*.../*}</code></li>\n<li>default argument <code>void f(atype a={/*.../*})</code></li>\n</ul>\n"}], "owner": {"reputation": 801, "user_id": 9147662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fb4a650eeaeb33df9d57f04b0185c9?s=128&d=identicon&r=PG&f=1", "display_name": "user27490", "link": "https://stackoverflow.com/users/9147662/user27490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 2, "accepted_answer_id": 51071741, "answer_count": 3, "score": 13, "last_activity_date": 1530204518, "creation_date": 1530134278, "last_edit_date": 1530136235, "question_id": 51071557, "link": "https://stackoverflow.com/questions/51071557/converting-constructor-with-multiple-arguments", "title": "Converting constructor with multiple arguments", "body": "<p>In C++11, a constructor without <code>explicit</code> keyword can be used to convert a list of arguments implicitly to its class. For example:</p>\n\n<pre><code>class Date{\nprivate:\n  int d, m, y;\npublic:\n  Date(int _d, int _m=0, int _y=0) : m(_m), d(_d), y(_y) {}\n  friend bool operator==(const Date &amp;x, const Date &amp;y) {return  x.d==y.d;}\n};\n\nint main()\n{\n  Date x = {1,2,3}; // no error; using converting constructor\n  x == 1; // no error; converting constructor turns int into Date object\n  x == {1,2,3}; // error\n}\n</code></pre>\n\n<p>For <code>x == {1,2,3}</code>, I got the following error:</p>\n\n<pre><code>explicit.cc:16:10: error: expected primary-expression before \u2018{\u2019 token\n       x=={1,2,3};\n          ^\n</code></pre>\n\n<p>I am wondering why converting constructor doesn't convert list <code>{1,2,3}</code> to <code>Date</code> object? Especially since <code>x == 1</code> does not result in an error, why does <code>x == {1,2,3}</code>?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1530133944, "post_id": 51071401, "comment_id": 89132732, "body": "A combo is made of an edit control and a list control. You must get the edit&#39;s handle."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 1, "creation_date": 1530134221, "post_id": 51071401, "comment_id": 89132832, "body": "@ZDF Not to send it <code>CB_GETCOUNT</code>.  OP, you need to trace the messages (if any) that the app sends to the control, it looks to be a custom control."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1530134381, "post_id": 51071401, "comment_id": 89132887, "body": "The correct way is UIAutomation"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1530136360, "post_id": 51071401, "comment_id": 89133640, "body": "That too, if the control will play ball. @DavidHeffernan: how do you find out?"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1530136833, "post_id": 51071401, "comment_id": 89133809, "body": "@PaulSanders Yes."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1530137019, "post_id": 51071401, "comment_id": 89133877, "body": "@ZDF No worries, we all do it :)"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1530137140, "post_id": 51071401, "comment_id": 89133910, "body": "<i>&quot;a dropdown from which I need to get the selected text&quot;</i> I do not understand. Why are you trying to send <code>CB_GETCOUNT</code>? Isn&#39;t the selected text the same as the displayed one? In which case <code>WM_GETTEXT</code> should work (even for a custom control, if written correctly)."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1530137491, "post_id": 51071401, "comment_id": 89134016, "body": "@ZDF I think that was just by way of example."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1530151322, "post_id": 51071401, "comment_id": 89136837, "body": "Use <code>CB_GETCURSEL</code> to retrieve the index of the currently selected item, followed by <code>CB_GETLBTEXT</code> with that index to retrieve the text. See <a href=\"https://docs.microsoft.com/en-us/windows/desktop/Controls/bumper-combobox-control-reference-messages\" rel=\"nofollow noreferrer\">Combobox Control Messages</a>"}, {"owner": {"reputation": 538, "user_id": 345223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49ef10b2c8977cd34cb08ea0849dcfd4?s=128&d=identicon&r=PG", "display_name": "Harsh Shah", "link": "https://stackoverflow.com/users/345223/harsh-shah"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1530153779, "post_id": 51071401, "comment_id": 89137385, "body": "@ZDF and Ken, I tried CB_GETCURSEL with no results, my point is if the control isn&#39;t letting me get the count, it probably won&#39;t let me get anything else. WM_GETTEXT won&#39;t work with ComboBox or ListBox controls, afaik. Have not yet looked into UIAutomation, but thank for suggestion."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 1, "creation_date": 1530168137, "post_id": 51071401, "comment_id": 89141376, "body": "<i>&quot;<a href=\"https://docs.microsoft.com/ro-ro/windows/desktop/winmsg/wm-gettext\" rel=\"nofollow noreferrer\">For a combo box, the text is the content of the edit control (or static-text) portion of the combo box.</a>&quot;</i> Are you sure you&#39;re using the right handle?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1530177217, "post_id": 51071401, "comment_id": 89146612, "body": "It\u2019s a custom control that just happens to look like a combo. There\u2019s no reason to expect it responds to combo control messages."}], "owner": {"reputation": 538, "user_id": 345223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49ef10b2c8977cd34cb08ea0849dcfd4?s=128&d=identicon&r=PG", "display_name": "Harsh Shah", "link": "https://stackoverflow.com/users/345223/harsh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530133575, "creation_date": 1530133575, "question_id": 51071401, "link": "https://stackoverflow.com/questions/51071401/access-combobox-control-in-another-application", "title": "Access combobox control in another application", "body": "<p>I am writing a C++ application that extracts a certain information from another program (I don't have source code to this program). Using Win32 API, I can access all the textboxes. For example, SendMessage(hWnd, WM_GETTEXT, 1024, (LPARAM)charArray) gives me the textbox value correctly. However, there is a dropdown from which I need to get the selected text, and I can't get it. I used spy++ to find the actual handle of the control, and tried</p>\n\n<p>SendMessage(hWnd, CB_GETCOUNT, 0, 0)\nas well as\nSendMessage(hWnd, LB_GETCOUNT, 0, 0)\nbut both return 0.</p>\n\n<p>I used spy++ to inspect the control further. As you can see in the attached image, the class name of the control is \"ClaDrop_xxxxx\". This leads me to believe that maybe it's derived from another type of control, but I can't confirm since I don't have source code to that application.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lthsv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lthsv.png\" alt=\"Spy++ showing the handle and class name of control\"></a></p>\n\n<p>Can anyone help me figure out how to access the selected value of this control?</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1530132900, "post_id": 51071198, "comment_id": 89132325, "body": "Could you maybe tell us <i>what</i> you don&#39;t understand?"}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1530133147, "post_id": 51071198, "comment_id": 89132430, "body": "Well I&#39;ve said that above. I didn&#39;t understand the reason for the change, nor did I understand the new wording in C++17. But I can tell you I understand what was written in C++14."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530134260, "post_id": 51071198, "comment_id": 89132840, "body": "The DR has <i>However, in practice implementations accept a parenthesized declarator in a function definition</i> as the reason.  If you follow <a href=\"http://eel.is/c++draft/dcl.decl#nt:declarator\" rel=\"nofollow noreferrer\"><i>declarator</i></a> it gives you the same but also includes more options."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1530134518, "post_id": 51071198, "comment_id": 89132939, "body": "The intention is to allow stuff like <code>int (f()) { return 1; }</code> which is banned by the previous wording but allowed in practice. But this new wording seems broken, too."}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1530134964, "post_id": 51071198, "comment_id": 89133120, "body": "@T.C. That seems to be the answer. I didn&#39;t know about the <code>f()</code> in between parentheses. Thank you.."}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1530135960, "post_id": 51071198, "comment_id": 89133489, "body": "@T.C. The grammar in C++14 already accepted the <code>f()</code> in beween parentheses. I can see that the definition for the grammar production <i>noptr-declarator</i>  in N4140 is equal to its definition in C++ 17, i.e., both contain the production <code>(</code> <i>ptr-declarator</i> <code>)</code> that allows the alluded extra parentheses."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1530152114, "post_id": 51071198, "comment_id": 89137005, "body": "The grammar allows it. It&#39;s the sentence you quoted from C++14 that disallows it by prescribing that only declarators matching the exact form it specifies are allowed."}], "answers": [{"tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": true, "score": 2, "last_activity_date": 1530256708, "creation_date": 1530256708, "answer_id": 51096307, "question_id": 51071198, "link": "https://stackoverflow.com/questions/51071198/i-didnt-understand-the-change-proposed-in-dr-2145-for-dcl-fct-def-general-2/51096307#51096307", "title": "I didn&#39;t understand the change proposed in DR 2145 for [dcl.fct.def.general]/2", "body": "<p>As T.C. pointed out in the <a href=\"https://stackoverflow.com/questions/51071198/i-didnt-understand-the-change-proposed-in-dr-2145-for-dcl-fct-def-general-2#comment89132939_51071198\">comment</a>, </p>\n\n<blockquote>\n  <p>The intention is to allow stuff like <code>int (f()) { return 1; }</code> which is banned by the previous wording but allowed in practice.</p>\n</blockquote>\n"}], "owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 51096307, "answer_count": 1, "score": 3, "last_activity_date": 1530256708, "creation_date": 1530132591, "last_edit_date": 1530134092, "question_id": 51071198, "link": "https://stackoverflow.com/questions/51071198/i-didnt-understand-the-change-proposed-in-dr-2145-for-dcl-fct-def-general-2", "title": "I didn&#39;t understand the change proposed in DR 2145 for [dcl.fct.def.general]/2", "body": "<p>The change proposed in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#2145\" rel=\"nofollow noreferrer\">DR 2145</a> was responsible for the change in <a href=\"http://eel.is/c++draft/dcl.fct.def.general#2\" rel=\"nofollow noreferrer\">[dcl.fct.def.general]/2</a> from C++14 to C++17, as follows:</p>\n\n<p>C++14:</p>\n\n<blockquote>\n  <p>The declarator in a function-definition shall have the form<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D1 ( <em>parameter-declaration-clause</em> )\n  <em>cv-qualifier-seq</em><sub><em>opt</em></sub> <em>ref-qualifier</em><sub><em>opt</em></sub><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>exception-specification</em><sub><em>opt</em></sub>\n  <em>attribute-specifier-seq</em><sub><em>opt</em></sub>\n  <em>trailing-return-type</em><sub><em>opt</em></sub><br>\n  as described in 8.3.5. A function\n  shall be defined only in namespace or class scope.</p>\n</blockquote>\n\n<p>C++17:  </p>\n\n<blockquote>\n  <p>In a function-definition, either <code>void</code> <em>declarator</em> <code>;</code> or <em>declarator</em> <code>;</code>\n  shall be a well-formed function declaration as described in 11.3.5. A\n  function shall be defined only in namespace or class scope.</p>\n</blockquote>\n\n<p>Frankly, I didn't understand the motivation for the change, neither the new wording in C++17.</p>\n"}, {"tags": ["c++", "arrays", "if-statement", "cin", "cpu-registers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1530131922, "post_id": 51071024, "comment_id": 89131857, "body": "Is this your actual code?  <code>char myArray = {a, 0, 0, 0, 0, 0, 0, 0, 0};</code> and <code>myArray = {a, 1, 0, 0, 0, 0, 0, 0, 0}</code> shouldn&#39;t even compile"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 3, "creation_date": 1530131929, "post_id": 51071024, "comment_id": 89131863, "body": "<code>char var a = 1</code> (among other things) - Are you sure this compiles?"}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 3, "creation_date": 1530132052, "post_id": 51071024, "comment_id": 89131924, "body": "This is not C++."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1530133142, "post_id": 51071024, "comment_id": 89132425, "body": "It looks like you need a good grounding on C++&#39;s syntax and rules."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530134134, "post_id": 51071024, "comment_id": 89132795, "body": "If you want to play with <i>bytes</i>, I recommend using <code>uint8_t</code>, because <code>char</code> can be signed, unsigned or <i>char</i> depending on the compiler settings."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530134233, "post_id": 51071024, "comment_id": 89132836, "body": "What is &quot;<code>char var</code>&quot; supposed to do and how is it different than without the <code>var</code>?"}, {"owner": {"reputation": 23, "user_id": 10002153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvSi_ZsFkBg/AAAAAAAAAAI/AAAAAAAAD4M/SKn0PHBJBuY/photo.jpg?sz=128", "display_name": "Shadow Sniper", "link": "https://stackoverflow.com/users/10002153/shadow-sniper"}, "edited": false, "score": 0, "creation_date": 1530138380, "post_id": 51071024, "comment_id": 89134259, "body": "Thomas, that&#39;s what my compiler told me. If you want, I can send you the original code or the debug. I do have a decent, not professional but adequate background on C++. I simply started with a normal, clean, unrepetitive code, and ended up adding the char, adding the variable, shortening the array, and removing a ton of libraries that I heard would be useful. Let me try to post the debug, you will understand my frustration after that."}, {"owner": {"reputation": 23, "user_id": 10002153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvSi_ZsFkBg/AAAAAAAAAAI/AAAAAAAAD4M/SKn0PHBJBuY/photo.jpg?sz=128", "display_name": "Shadow Sniper", "link": "https://stackoverflow.com/users/10002153/shadow-sniper"}, "edited": false, "score": 0, "creation_date": 1530138616, "post_id": 51071024, "comment_id": 89134321, "body": "In function &#39;int main()&#39;:  error: expected initializer before &#39;a&#39; char var a = 1  error: expected initializer before &#39;pushregister&#39;  char var pushregister; error: &#39;pushregister&#39; was not declared in this scope cin &gt;&gt; pushregister; note: suggested alternative: &#39;register&#39; cin &gt;&gt; pushregister; &#39;a&#39; was not declared in this scope      if(pushregister == a){                         ^ &#39;myArray&#39; was not declared in this scope          myArray = {a, 1, 0, 0, 0, 0, 0, 0, 0}          ^~~~~~~  &#39;myArray&#39; was not declared in this scope      cout &lt;&lt; myArray;              ^~~~~~~"}, {"owner": {"reputation": 23, "user_id": 10002153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvSi_ZsFkBg/AAAAAAAAAAI/AAAAAAAAD4M/SKn0PHBJBuY/photo.jpg?sz=128", "display_name": "Shadow Sniper", "link": "https://stackoverflow.com/users/10002153/shadow-sniper"}, "edited": false, "score": 0, "creation_date": 1530138636, "post_id": 51071024, "comment_id": 89134323, "body": "All of them except the first one I do not understand the reason for"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10002153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvSi_ZsFkBg/AAAAAAAAAAI/AAAAAAAAD4M/SKn0PHBJBuY/photo.jpg?sz=128", "display_name": "Shadow Sniper", "link": "https://stackoverflow.com/users/10002153/shadow-sniper"}, "edited": false, "score": 0, "creation_date": 1530138143, "post_id": 51071731, "comment_id": 89134194, "body": "i did the first one at first, that told me to add variables (not specifically but generally, told me they can not just contain values)"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1530135160, "creation_date": 1530135160, "answer_id": 51071731, "question_id": 51071024, "link": "https://stackoverflow.com/questions/51071024/using-cin-if-statement-and-array-not-working/51071731#51071731", "title": "Using cin, if statement, and array not working", "body": "<p>You code doesn't look like C++.<br>\nDid you want something like this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdlib&gt;\n\n\nint main()\n{\n  uint8_t a = 1;\n  uint8_t my_array[] = {0, 0, 0, 0, 0, 0, 0, 0, 0};\n  static const size_t my_array_capacity =\n    sizeof(my_array) / sizeof(my_array[0]);\n  my_array[0] = a;\n\n  uint8_t push_register;\n  std::cin &gt;&gt; push_register;\n  if (push_register == a)\n  {\n    my_array[1] = 1;\n  }\n\n  for (size_t i = 0; i &lt; my_array_capacity; ++i)\n  {\n    if (i &gt; 0)\n    {\n      std::cout &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; static_cast&lt;unsigned int&gt;(my_array[i]);\n  }\n  std::cout &lt;&lt; \"\\n\";\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Some differences:<br>\n1. Arrays can't contain variables, they contain values.<br>\n2. Use <code>[]</code> to access array slots.<br>\n3. When printing <code>uint8_t</code>, cast to <code>unsigned int</code> to avoid <code>cout</code> treating the variable as a character.  </p>\n"}, {"comments": [{"owner": {"reputation": 16, "user_id": 9921448, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kMhkk-FvlDs/AAAAAAAAAAI/AAAAAAAACwk/ZEdpXtjZumM/photo.jpg?sz=128", "display_name": "Sadik Hassan", "link": "https://stackoverflow.com/users/9921448/sadik-hassan"}, "edited": false, "score": 0, "creation_date": 1530135717, "post_id": 51071797, "comment_id": 89133388, "body": "you can easily write this type of code by using string."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530136195, "post_id": 51071797, "comment_id": 89133568, "body": "I recommend 1) one statement per line. 2) Reformatting using the {} when editing."}, {"owner": {"reputation": 16, "user_id": 9921448, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kMhkk-FvlDs/AAAAAAAAAAI/AAAAAAAACwk/ZEdpXtjZumM/photo.jpg?sz=128", "display_name": "Sadik Hassan", "link": "https://stackoverflow.com/users/9921448/sadik-hassan"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530194335, "post_id": 51071797, "comment_id": 89158016, "body": "Next time i am trying to follow your suggestion.I am beginner.Thank you for your suggestion."}], "tags": [], "owner": {"reputation": 16, "user_id": 9921448, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kMhkk-FvlDs/AAAAAAAAAAI/AAAAAAAACwk/ZEdpXtjZumM/photo.jpg?sz=128", "display_name": "Sadik Hassan", "link": "https://stackoverflow.com/users/9921448/sadik-hassan"}, "is_accepted": true, "score": 0, "last_activity_date": 1530144509, "last_edit_date": 1530144509, "creation_date": 1530135578, "answer_id": 51071797, "question_id": 51071024, "link": "https://stackoverflow.com/questions/51071024/using-cin-if-statement-and-array-not-working/51071797#51071797", "title": "Using cin, if statement, and array not working", "body": "<p>Code:</p>\n\n<pre><code>string myArray= \"a, 0, 0, 0, 0, 0, 0, 0, 0\";\nint pushregister; cin &gt;&gt; pushregister;\n\nif (pushregister == a) {\n    myArray = \"a, 1, 0, 0, 0, 0, 0, 0, 0\"; cout &lt;&lt; myArray;\n}\nelse {\n    cout &lt;&lt; \"Wrong input\" &lt;&lt; endl;\n}\n\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10002153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvSi_ZsFkBg/AAAAAAAAAAI/AAAAAAAAD4M/SKn0PHBJBuY/photo.jpg?sz=128", "display_name": "Shadow Sniper", "link": "https://stackoverflow.com/users/10002153/shadow-sniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 51071797, "answer_count": 2, "score": -5, "last_activity_date": 1530144509, "creation_date": 1530131756, "last_edit_date": 1530131922, "question_id": 51071024, "link": "https://stackoverflow.com/questions/51071024/using-cin-if-statement-and-array-not-working", "title": "Using cin, if statement, and array not working", "body": "<p>I am making a mini-CPU in C++ that uses binary states of an array to activate different events. For example, an array whose 67, 39, and 23th values are 1 might output the date. I was doing an input test where inputting \"a\" would cause the first actual value to be one. As you notice, the array already starts with \"a\", but that is an indicator of a certain section of the CPU.</p>\n\n<p>I did EVERYTHING the bug reports told me to do, but they keep on sending the same results. If you want, I can send the debug.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    char var a = 1 \n\n    char myArray = {a, 0, 0, 0, 0, 0, 0, 0, 0};\n\n    char var pushregister;  \n    cin &gt;&gt; pushregister;\n\n    if (pushregister == a) {\n        myArray = {a, 1, 0, 0, 0, 0, 0, 0, 0}\n    };\n\n    cout &lt;&lt; myArray;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "design-patterns"], "answers": [{"tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 2, "last_activity_date": 1530132641, "last_edit_date": 1530132641, "creation_date": 1530132245, "answer_id": 51071124, "question_id": 51070925, "link": "https://stackoverflow.com/questions/51070925/best-way-to-call-a-function-in-a-class-from-an-object-in-that-class/51071124#51071124", "title": "Best way to call a function in a class from an object in that class", "body": "<p>The most appropriate way to do this is using <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">observer pattern</a>. The idea is to pass a <em>functional object</em> to the source of the event. This will ensure that you will be able to set any action for the event without the source of the event knowing what exactly it is.</p>\n\n<p>The easiest way to implement this in C++ is using <code>std::function</code> class. For example:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nclass Bar {\npublic:\n    using OnClicked = std::function&lt;void(int)&gt;;\n\n    void onClicked(OnClicked callback) {\n        m_OnClicked = std::move(callback);\n    }\n    void barClickEvent() {\n        if (m_OnClicked)\n            m_OnClicked(10);\n    }\nprivate:\n    OnClicked m_OnClicked;\n};\n\nclass Foo {\npublic:\n    Foo() : something(5) {\n        bar.onClicked([this](int value) {\n            changeSomething(value);\n        });\n    }\n    void changeSomething(int x){something = x;}\nprivate:\n    Bar bar;\n    int something;\n};\n</code></pre>\n\n<p>As you can see, <code>Bar</code> knows nothing about <code>Foo</code> which ensures <a href=\"https://en.wikipedia.org/wiki/Loose_coupling\" rel=\"nofollow noreferrer\">loose coupling</a> of your components, and now you can have each instance of <code>Bar</code> do a completely different thing when event occurs.</p>\n"}], "owner": {"reputation": 151, "user_id": 7138270, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e3ba8f371a00b9bae425a480fda3c3a?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Blue", "link": "https://stackoverflow.com/users/7138270/kyle-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 51071124, "answer_count": 1, "score": 0, "last_activity_date": 1530141110, "creation_date": 1530131299, "last_edit_date": 1530141110, "question_id": 51070925, "link": "https://stackoverflow.com/questions/51070925/best-way-to-call-a-function-in-a-class-from-an-object-in-that-class", "title": "Best way to call a function in a class from an object in that class", "body": "<p>Okay sorry if this is a silly question. Lets say I have a class, and i want to call a function from that class using an object inside that class to change something within the class. For example:</p>\n\n<pre><code>class Foo;\nclass Bar{\npublic:\n    Bar(Foo *parent): parent(parent) {}\n    void barClickEvent(){\n        parent-&gt;changeSomething(10);\n    }\nprivate:\n    Foo * parent;\n};\n\nclass Foo {\npublic:\n    Foo():bar(this), something(5) {}\n    void changeSomething(int x){something = x;}\nprivate:\n    Bar bar;\n    int something;\n};\n</code></pre>\n\n<p>I create an object of type Foo (which automatically creates an object of type Bar). In order to all Bar to access the functions in Foo, I pass a pointer to Bar  pointing to Foo(its parent). Is this the most efficient way of doing this?</p>\n\n<p>The reason I ask this, is because I am implementing something similar to this for the GUI of some software, for example I may click a button in a sidebar, which, in turn, changes the colour of the parent (the main window). In this instance it may not be too bad, but what about when I want to change the entire theme of a UI, and need to call functions in many objects from many parents. I would need alot of pointers, and it could get a bit messy.</p>\n\n<p>Any suggestions on the best way to go about a problem such as this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "yaml", "yaml-cpp"], "comments": [{"owner": {"reputation": 4058, "user_id": 754407, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1b5c51ae68d0d76ce0e178f777f1742d?s=128&d=identicon&r=PG", "display_name": "hauron", "link": "https://stackoverflow.com/users/754407/hauron"}, "edited": false, "score": 1, "creation_date": 1530130326, "post_id": 51070579, "comment_id": 89131178, "body": "Looks like the answer is YES, thanks to the MIT license you should be able to freely do it, but the code is rather large - you&#39;ll spend a lot of time compiling it."}, {"owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "edited": false, "score": 1, "creation_date": 1530173632, "post_id": 51070579, "comment_id": 89144451, "body": "If you include just the headers, you&#39;re missing the implementation. You will need to include the implementation located in the non-header source files one way or the other. Whether you compile them separately and link against the generated <code>lib</code> or include them in your project and compile them along with your own source files makes little difference. <i>header only</i> just means that the whole implementation is in the header, which is evidently not the case with yaml-cpp (and is probably not trivial to do)."}, {"owner": {"reputation": 269, "user_id": 3982428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ba09f66a24f5edd07eb0d9210c67bed?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan Enayati", "link": "https://stackoverflow.com/users/3982428/ehsan-enayati"}, "edited": false, "score": 0, "creation_date": 1530200597, "post_id": 51070579, "comment_id": 89162217, "body": "IMO the answer is a definite No and it&#39;s a bad practice of software development. Yamp-cpp supports cmake and it is in fact really easy to build a library out of it, specially with the new version that they are not dependent on Boost anymore."}], "owner": {"reputation": 45, "user_id": 5405798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bd597961e8726668a89332061c86c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Any NOUS", "link": "https://stackoverflow.com/users/5405798/any-nous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1255, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530130462, "creation_date": 1530129827, "last_edit_date": 1530130462, "question_id": 51070579, "link": "https://stackoverflow.com/questions/51070579/can-yaml-cpp-used-as-header-only-library", "title": "Can yaml-cpp used as header only library?", "body": "<p>I am trying to incorporate yaml-cpp in a huge project and don't want to have it as an external dependency(the project only has our internal libraries as dependencies). Is it possible to have just the headers included instead of compiling the whole project for the .lib file?  </p>\n"}, {"tags": ["python", "c++", "shared-libraries"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1530129085, "post_id": 51070398, "comment_id": 89130660, "body": "Notice how it says, <code>undefined symbol: print_array</code>. It seems like the symbol in <b>print.so</b> is <code>_Z11print_arrayRKSt6vectorIS_IfSaIfEESaIS1_EE</code>"}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530133131, "post_id": 51070398, "comment_id": 89132417, "body": "You have been hit by c++ ABI. See <a href=\"https://stackoverflow.com/questions/1615813/how-to-use-c-classes-with-ctypes\" title=\"how to use c classes with ctypes\">stackoverflow.com/questions/1615813/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "edited": false, "score": 0, "creation_date": 1530133213, "post_id": 51071298, "comment_id": 89132463, "body": "agreed, I am going to stick with arrays since I do not need dynamic structures."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530139936, "post_id": 51071298, "comment_id": 89134621, "body": "@mdoubez What are you talking about? It&#39;s absolutely fine to mark C++ functions as <code>extern &quot;C&quot;</code>. <code>extern &quot;C&quot;</code> tells the compiler not to perform name mangling on the function and instead emit a C-compatible symbol."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 1, "creation_date": 1530158979, "post_id": 51071298, "comment_id": 89138473, "body": "it also modifies the calling convention and &quot;C&quot; doesn&#39;t have a calling convention for the parameter std::vector&lt;&gt;&amp;. You couldn&#39;t expose the same function to a C compiler."}, {"owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "edited": false, "score": 0, "creation_date": 1530279825, "post_id": 51071298, "comment_id": 89193599, "body": "Passing in a numpy array is passed as float *var.  I then convert to c++ types in an inner function.  This method worked well for me!"}], "tags": [], "owner": {"reputation": 56, "user_id": 3660540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c032d963dd5492861a0fcd6880845527?s=128&d=identicon&r=PG", "display_name": "Gyroplast", "link": "https://stackoverflow.com/users/3660540/gyroplast"}, "is_accepted": true, "score": 4, "last_activity_date": 1530278154, "last_edit_date": 1530278154, "creation_date": 1530133088, "answer_id": 51071298, "question_id": 51070398, "link": "https://stackoverflow.com/questions/51070398/building-a-shared-object-from-a-single-cpp/51071298#51071298", "title": "Building a shared object from a single .cpp", "body": "<p>You are calling a C++ function while <code>ctypes</code> expects C functions linkage:</p>\n\n<ul>\n<li>C functions have a different (i. e. none) name mangling, as you noticed</li>\n<li>C function cannot have C++ parameters (std objects like std::vector, references, etc.)</li>\n</ul>\n\n<p>To solve your issue, declare a clean C-style API in your headers, and if you intend to implement the functions in C++ and use g++ as your compiler/linker, you must add an <code>extern \"C\"</code> declaration right before the function declaration in the header file, or as a block around your declarations:</p>\n\n<pre><code>extern \"C\" void print_array(...);\n</code></pre>\n\n<p>This will prevent the C++ name mangling.</p>\n\n<p>Using vectors and other C++ types in your interface functions will cause you ABI issues, i. e. \"it won't work\", even if everything links and compiles seemingly cleanly.</p>\n\n<p>Use C functions with the data types supported by ctypes (see <a href=\"https://docs.python.org/3/library/ctypes.html#fundamental-data-types\" rel=\"nofollow noreferrer\">Python docs on ctypes</a>) in your functions as an interface, feel free to implement in C++, but then wrap your C function declarations in an <code>extern \"C\"</code> block to prevent name mangling.</p>\n\n<p>Please do refer to the documentation of ctypes to find out how to <em>correctly</em> use structs, unions, references, etc. as function parameters, as there are many pitfalls and issues to consider.</p>\n"}], "owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51071298, "answer_count": 1, "score": 0, "last_activity_date": 1530278154, "creation_date": 1530128996, "question_id": 51070398, "link": "https://stackoverflow.com/questions/51070398/building-a-shared-object-from-a-single-cpp", "title": "Building a shared object from a single .cpp", "body": "<p>I am trying to build a shared object library from a <code>cpp</code> file that is a simple set of functions.  I want to use <code>ctypes</code> to interface with python.</p>\n\n<p>Say I have  the <code>cpp</code> file:</p>\n\n<pre><code>#include \"print.h\"\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;dlfcn.h&gt;\n\nvoid print_array(const std::vector&lt;std::vector&lt;float&gt;&gt; &amp;A){\n  for(size_t i = 0; i &lt; A.size(); i++) {\n    for(size_t j = 0; j &lt; A[0].size(); j++) {\n      std::cout &lt;&lt; A[i][j] &lt;&lt; \"\\n\";\n    }\n  }\n}\n</code></pre>\n\n<p>and header file </p>\n\n<pre><code>#ifndef ADD_H\n#define ADD_H\n#include &lt;vector&gt;\n\nvoid print_array(const std::vector&lt;std::vector&lt;float&gt;&gt; &amp;A);\n\n#endif\n</code></pre>\n\n<p>I tried to build </p>\n\n<pre><code>g++ -fpic -c print.cpp -o print.o\ng++ -shared -o print.so print.o\n</code></pre>\n\n<p>Then in python</p>\n\n<pre><code>from cytpes import cdll\nprint_lib = cdll.LoadLibrary(\"print.so\")\n</code></pre>\n\n<p>the line </p>\n\n<pre><code>print_lib.print_array()\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>AttributeError: ./print.so: undefined symbol: print_array\n</code></pre>\n\n<p><code>nm -D print.so</code></p>\n\n<p>gives the output</p>\n\n<pre><code>0000000000201060 B __bss_start\n                 U __cxa_atexit\n                 w __cxa_finalize\n0000000000201060 D _edata\n0000000000201068 B _end\n0000000000000c14 T _fini\n                 w __gmon_start__\n0000000000000898 T _init\n                 w _ITM_deregisterTMCloneTable\n                 w _ITM_registerTMCloneTable\n                 w _Jv_RegisterClasses\n0000000000000a50 T _Z11print_arrayRKSt6vectorIS_IfSaIfEESaIS1_EE\n0000000000000bcc W _ZNKSt6vectorIfSaIfEE4sizeEv\n0000000000000bf2 W _ZNKSt6vectorIfSaIfEEixEm\n0000000000000b6a W _ZNKSt6vectorIS_IfSaIfEESaIS1_EE4sizeEv\n0000000000000ba2 W _ZNKSt6vectorIS_IfSaIfEESaIS1_EEixEm\n                 U _ZNSolsEf\n                 U _ZNSt8ios_base4InitC1Ev\n                 U _ZNSt8ios_base4InitD1Ev\n                 U _ZSt4cout\n                 U _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc\n</code></pre>\n\n<p>What am I fundamentally doing wrong in the compilation step?</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1530129106, "post_id": 51070293, "comment_id": 89130667, "body": "Maybe someone could consider this question basic, but how exactly it&#39;s &quot;unclear what you&#39;re asking&quot;?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1530129162, "post_id": 51070293, "comment_id": 89130690, "body": "You are passing <code>a</code> by value, you should pass a reference instead (<code>std::ref(a)</code>)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1530129411, "post_id": 51070293, "comment_id": 89130799, "body": "By default <code>std::thread</code>s take their parameters by value to prevent the many, many ways having multiple threads operating on the same object can break a program. Closely related non-duplicate: <a href=\"https://stackoverflow.com/questions/34078208/passing-object-by-reference-to-stdthread-in-c11\">Passing object by reference to std::thread in C++11</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 6, "last_activity_date": 1530131347, "last_edit_date": 1530131347, "creation_date": 1530129167, "answer_id": 51070437, "question_id": 51070293, "link": "https://stackoverflow.com/questions/51070293/why-thread-has-no-effect-on-change-made-on-class-variable/51070437#51070437", "title": "why thread has no effect on change made on class variable?", "body": "<p>You are passing <code>a</code> by value, so the thread gets its own private copy that is distinct from the <code>a</code> in <code>main</code> - the thread then modifies the copy and when the thread dies that object dies with it and the change to it is nowhere to be found. The <code>a</code> in <code>main</code> is never modified, so it retains its original value. You want to pass a reference or pointer if you want to change the <code>a</code> in <code>main</code> from within the thread.</p>\n\n<p>You probably also want to read up on <em>synchronization</em> and <em>atomic</em> if you are going to be accessing variables from multiple threads.</p>\n"}, {"tags": [], "owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "is_accepted": false, "score": 1, "last_activity_date": 1530132076, "creation_date": 1530132076, "answer_id": 51071084, "question_id": 51070293, "link": "https://stackoverflow.com/questions/51070293/why-thread-has-no-effect-on-change-made-on-class-variable/51071084#51071084", "title": "why thread has no effect on change made on class variable?", "body": "<p>As @JesperJuhl says, you are passing a copy of <code>a</code> so the main's variables is never modified, but, besides, references cannot be passed to other threads. The thread's parameters are always passed by value, so, you need to pass a pointer or a <code>reference_wrapper</code>, which allows to pass a reference, but wrapped in a copyable object:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nstruct A{\n\n void Add(){\n    ++val;\n } \n\n int val = 0;\n};\n\nint main(){\n   A a;\n\n   // Passing a reference_wrapper is the standard way.\n\n   // Passing a pointer would imply to change your method signature\n   // and implementation if it were a free function instead of a \n   // class member function.\n   // In your specific case it is irrelevant though.\n   thread t(&amp;A::Add,std::ref(a));\n   // or thread t(&amp;A::Add,&amp;a);\n\n   t.join();\n\n   std::cout &lt;&lt; a.val &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 9051576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982508d548e8d994adb5eea5a9908a29?s=128&d=identicon&r=PG&f=1", "display_name": "mato", "link": "https://stackoverflow.com/users/9051576/mato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 51070437, "answer_count": 2, "score": 2, "last_activity_date": 1530132076, "creation_date": 1530128492, "last_edit_date": 1530128971, "question_id": 51070293, "link": "https://stackoverflow.com/questions/51070293/why-thread-has-no-effect-on-change-made-on-class-variable", "title": "why thread has no effect on change made on class variable?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nstruct A{\n\n void Add(){\n    ++val;\n } \n\n int val = 0;\n};\n\nint main(){\n   A a;\n   thread t(&amp;A::Add,a);\n   t.join();\n\n   std::cout &lt;&lt; a.val &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Why does the execution of thread which eventually adds +1 to value has no effect? The std::cout is just zero. I was expecting 1.</p>\n"}, {"tags": ["c++", "memory", "cuda", "shared-memory"], "answers": [{"comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1531210955, "post_id": 51070220, "comment_id": 89498923, "body": "Please either correct, reformat, and accept your answer or delete it so the question will fall off the unanswered list for the CUDA tag"}], "tags": [], "owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "is_accepted": true, "score": 0, "last_activity_date": 1530128164, "creation_date": 1530128164, "answer_id": 51070220, "question_id": 51070093, "link": "https://stackoverflow.com/questions/51070093/cuda-error-out-of-bounds/51070220#51070220", "title": "Cuda Error Out of Bounds", "body": "<p>I found my problem.</p>\n\n<p>the line:\n    localBlock[thempIdx] = list[tempIdx]</p>\n\n<p>is trying to access an out of bounds location when it should only be writing to the thread location like so:\n    localBLock[thhreadIdx.x] = list[tempIdx];</p>\n"}], "owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 51070220, "answer_count": 1, "score": -3, "last_activity_date": 1530128164, "creation_date": 1530127602, "question_id": 51070093, "link": "https://stackoverflow.com/questions/51070093/cuda-error-out-of-bounds", "title": "Cuda Error Out of Bounds", "body": "<p>I'm having problems with shared memory allocation within a kernel where I keep getting out of bounds errors. From my understanding each thread can be used to partially load data into the first shared block called private atom, and within the for loop, on each iteration im loading the next consecutive block into a different shared memory in order to compute the spatial distance from my thread to all the threads in the  next consecutive blocks, then i compute the distance between the thread and all other threads within the local block. </p>\n\n<p>Since my error is regarding out of bounds issues I suspect my issue is with how i am copying memory into the shared memory.</p>\n\n<pre><code>pdh_priv(bucket * histogram,atom * list, double width, int size, int BlockSize)\n{\n int t = threadIdx.x;\n int b = blockIdx.x;\n unsigned int reg = t + b * blockDim.x;\n\n extern __shared__ atom private_atom[];\n\nif(t &lt; BlockSize)   \n    private_atom[t] = list[t];\n__syncthreads();\n\n\nfor(int i = b + 1; i &lt; size/BlockSize; ++i)\n{\n     extern __shared__ atom localBlock[];\n\n    unsigned int tempIdx = t + i *blockDim.x;\n        localBlock[tempIdx] = list[tempIdx];\n    __syncthreads();\n    for(int j = 0; j &lt; BlockSize;++j)\n    {\n        double distance = p2p_distance(private_atom[t], localBlock[j]);\n        int pos = (int) (distance/width);\n        atomicAdd(&amp;histogram[pos].d_cnt,1);\n    }\n\n}\n\nfor(int i = t+1;i &lt; BlockSize;++i)\n{\n    double distance = p2p_distance(list,t,i);\n    int pos = (int) (distance/width);\n    atomicAdd( &amp;histogram[pos].d_cnt,1);\n} \n</code></pre>\n\n<p>}</p>\n\n<p>I am initializing the kernel with this call</p>\n\n<pre><code>pdh_priv &lt;&lt;&lt;ceil(PDH_acnt/BlockSize),BlockSize,BlockSize*sizeof(atom) &gt;&gt;&gt;(dev_Histo, dev_atomL,PDH_res,PDH_acnt,BlockSize);\n</code></pre>\n"}, {"tags": ["c++", "ocr", "tesseract"], "answers": [{"comments": [{"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 1, "creation_date": 1530512427, "post_id": 51128257, "comment_id": 89244955, "body": "If the result might differ, then the answer to the question <i>&quot;can I use xapi and yapi interchangeably?&quot;</i> should be <b>NO</b> because there is <b>no guarantee</b> that they will behave the same way!"}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1530517331, "post_id": 51128257, "comment_id": 89247088, "body": "@Nawaz I don&#39;t know what settings you&#39;re fiddling with, so you know the best."}], "tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 4, "last_activity_date": 1530496305, "last_edit_date": 1530496305, "creation_date": 1530495955, "answer_id": 51128257, "question_id": 51069618, "link": "https://stackoverflow.com/questions/51069618/the-semantics-of-tessbaseapiclear/51128257#51128257", "title": "The semantics of TessBaseAPI::Clear()", "body": "<p>According to the <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga953b401286da174e609f09c5f275734e\" rel=\"nofollow noreferrer\">void tesseract::TessBaseAPI::Clear() documentation</a>, the call to this function will free up the image data and the recognition results. It says nothing about configuration data. Moreover, if the authors consider the configuration data as being time-consuming to load, it's going to be kept intact: <code>without actually freeing any recognition data that would be time-consuming to reload</code>.</p>\n\n<p>Answering your other questions:</p>\n\n<ol>\n<li><p>\"After the call to Clear(), can I use xapi and yapi interchangeably?\" -- yes, you may, but results might differ because of different settings you have applied to <code>xapi</code> via <code>SetVariable()</code>, but not to <code>yapi</code>.</p></li>\n<li><p>\"In other words, can I assume that xapi and yapi are identical at this point from behavioral1 perspective?\" -- depending on what settings you have changed with <code>SetVariable()</code>, the results may be or may be not the same.</p></li>\n<li><p>\"Can I say Clear() is actually a reset functionality?\" -- only the recognition results and the image data is discarded, everything else is kept intact. Depending on your definition of <code>reset</code>, you may call it a reset or not, it's a free country after all =)</p></li>\n</ol>\n\n<p>You may check the difference between <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga953b401286da174e609f09c5f275734e\" rel=\"nofollow noreferrer\">Clear()</a> and the full teardown using <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga38027513ee9c0348de1790bddcdc3391\" rel=\"nofollow noreferrer\">End()</a>. It's around line 1400 of <a href=\"https://zdenop.github.io/tesseract-doc/baseapi_8cpp_source.html\" rel=\"nofollow noreferrer\">baseapi.cpp</a>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "edited": false, "score": 0, "creation_date": 1530966411, "post_id": 51222505, "comment_id": 89426767, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/174560/discussion-on-answer-by-yvette-colomb-the-semantics-of-tessbaseapiclear\">moved to chat</a>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "is_accepted": true, "score": 2, "last_activity_date": 1530967813, "last_edit_date": 1530967813, "creation_date": 1530961127, "answer_id": 51222505, "question_id": 51069618, "link": "https://stackoverflow.com/questions/51069618/the-semantics-of-tessbaseapiclear/51222505#51222505", "title": "The semantics of TessBaseAPI::Clear()", "body": "<blockquote>\n  <p>Since the objects are initialized with identical arguments, at this point xapi and yapi are assumed to be identical from behavioral perspective. Is my assumption correct?</p>\n</blockquote>\n\n<p>From the outset there is nothing I can find to dispute this assumption.</p>\n\n<h2>Investigating the source code.</h2>\n\n<p>The following parameters are cleared or reset (if you will):</p>\n\n<p>When calling <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga953b401286da174e609f09c5f275734e\" rel=\"nofollow noreferrer\">Clear()</a> the following are called:</p>\n\n<pre><code>01402 void TessBaseAPI::Clear() {\n01403   if (thresholder_ != NULL)\n01404     thresholder_-&gt;Clear();\n01405   ClearResults();\n01406 }\n</code></pre>\n\n<p>Calling <a href=\"https://zdenop.github.io/tesseract-doc/thresholder_8cpp_source.html#l00045\" rel=\"nofollow noreferrer\"><code>thresholder_-&gt;Clear();</code></a> destroys the pix (if not null) </p>\n\n<pre><code>00044 // Destroy the Pix if there is one, freeing memory.\n00045 void ImageThresholder::Clear() {\n00046   if (pix_ != NULL) {\n00047     pixDestroy(&amp;pix_);\n00048     pix_ = NULL;\n00049   }\n00050   image_data_ = NULL;\n00051 }\n</code></pre>\n\n<p>For <a href=\"https://zdenop.github.io/tesseract-doc/baseapi_8cpp_source.html#l01641\" rel=\"nofollow noreferrer\">Clear Results</a>, as shown below.</p>\n\n<pre><code>01641 void TessBaseAPI::ClearResults() {\n01642   if (tesseract_ != NULL) {\n01643     tesseract_-&gt;Clear();\n01644   }\n01645   if (page_res_ != NULL) {\n01646     delete page_res_;\n01647     page_res_ = NULL;\n01648   }\n01649   recognition_done_ = false;\n01650   if (block_list_ == NULL)\n01651     block_list_ = new BLOCK_LIST;\n01652   else\n01653     block_list_-&gt;clear();\n01654   if (paragraph_models_ != NULL) {\n01655     paragraph_models_-&gt;delete_data_pointers();\n01656     delete paragraph_models_;\n01657     paragraph_models_ = NULL;\n01658   }\n01659 }\n</code></pre>\n\n<p>The page results, block list are set to null, along with associated flags being reset. </p>\n\n<p><a href=\"https://zdenop.github.io/tesseract-doc/tesseractclass_8cpp_source.html#l00413\" rel=\"nofollow noreferrer\">tesseract_->Clear()</a> releases the following:</p>\n\n<pre><code>00413 void Tesseract::Clear() {\n00414   pixDestroy(&amp;pix_binary_);\n00415   pixDestroy(&amp;cube_binary_);\n00416   pixDestroy(&amp;pix_grey_);\n00417   pixDestroy(&amp;scaled_color_);\n00418   deskew_ = FCOORD(1.0f, 0.0f);\n00419   reskew_ = FCOORD(1.0f, 0.0f);\n00420   splitter_.Clear();\n00421   scaled_factor_ = -1;\n00422   ResetFeaturesHaveBeenExtracted();\n00423   for (int i = 0; i &lt; sub_langs_.size(); ++i)\n00424     sub_langs_[i]-&gt;Clear();\n00425 }\n</code></pre>\n\n<p>Noteworthy,\n<a href=\"https://zdenop.github.io/tesseract-doc/classtesseract_1_1_tess_base_a_p_i.html#a2e09259c558c6d8e0f7e523cbaf5adf5\" rel=\"nofollow noreferrer\">SetVariable</a> does not affect init values:</p>\n\n<blockquote>\n  <p>Only works for non-init variables (init variables should be passed to Init()).</p>\n</blockquote>\n\n<pre><code>00143 bool TessBaseAPI::SetVariable(const char* name, const char* value) {\n00144   if (tesseract_ == NULL) tesseract_ = new Tesseract;\n00145   return ParamUtils::SetParam(name, value, SET_PARAM_CONSTRAINT_NON_INIT_ONLY,\n00146                               tesseract_-&gt;params());\n00147 }\n</code></pre>\n\n<blockquote>\n  <p>After the call to Clear(), can I use xapi and yapi interchangeably? </p>\n</blockquote>\n\n<p>No. Certainly not if you used a thresholder. </p>\n\n<blockquote>\n  <p>Can I say Clear() is actually a reset functionality?</p>\n</blockquote>\n\n<p>Not in the sense of restoring it to it's initialised state. It will change some values of the original object to null.  It will keep the grunt work of parameters like <code>const char * datapath, const char * language, OcrEngineMode  oem,</code>. It seems to be a way to free memory without obliterating the object. <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga953b401286da174e609f09c5f275734e\" rel=\"nofollow noreferrer\">Inline with</a> \"without actually freeing any recognition data that would be time-consuming to reload.\".</p>\n\n<p>After calling Clear() call  either <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#gaa463622111f3b11d8fca5863709cc699\" rel=\"nofollow noreferrer\">SetImage</a> or <a href=\"https://zdenop.github.io/tesseract-doc/classtesseract_1_1_tess_base_a_p_i.html#ad34c56e08d999ece9972f4c9a9301f93\" rel=\"nofollow noreferrer\">TesseractRect</a> before using Recognition or Get* functions. </p>\n\n<p>Clear will not dispose of the SetVariables, they will only be reset to default upon destruction of the object by calling End().</p>\n\n<p>Looking at the <a href=\"https://zdenop.github.io/tesseract-doc/baseapi_8cpp_source.html#l00091\" rel=\"nofollow noreferrer\">TessbaseApi() class</a>, you can see what you are initialising and which of these values will be reset using Clear().</p>\n\n<pre><code>00091 TessBaseAPI::TessBaseAPI()\n00092   : tesseract_(NULL),\n00093     osd_tesseract_(NULL),\n00094     equ_detect_(NULL),\n00095     // Thresholder is initialized to NULL here, but will be set before use by:\n00096     // A constructor of a derived API,  SetThresholder(), or\n00097     // created implicitly when used in InternalSetImage.\n00098     thresholder_(NULL),\n00099     paragraph_models_(NULL),\n00100     block_list_(NULL),\n00101     page_res_(NULL),\n00102     input_file_(NULL),\n00103     output_file_(NULL),\n00104     datapath_(NULL),\n00105     language_(NULL),\n00106     last_oem_requested_(OEM_DEFAULT),\n00107     recognition_done_(false),\n00108     truth_cb_(NULL),\n00109     rect_left_(0), rect_top_(0), rect_width_(0), rect_height_(0),\n00110     image_width_(0), image_height_(0) {\n00111 }\n</code></pre>\n\n<p>Given that the base constructor for the class is:</p>\n\n<pre><code>(datapath, language, OEM_DEFAULT, NULL, 0, NULL, NULL, false);\n</code></pre>\n\n<p>These three parameters are always needed, which <a href=\"https://zdenop.github.io/tesseract-doc/classtesseract_1_1_tess_base_a_p_i.html#a96899e8e5358d96752ab1cfc3bc09f3e\" rel=\"nofollow noreferrer\">makes sense</a>.</p>\n\n<blockquote>\n  <p>If the datapath, OcrEngineMode or the language have changed - start again.<br>\n   Note that the language_ field stores the last requested language that was initialized successfully, while tesseract_->lang stores the language actually used. They differ only if the requested language was NULL, in which case tesseract_->lang is set to the Tesseract default (\"eng\").</p>\n</blockquote>\n"}], "owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 51222505, "answer_count": 2, "score": 6, "last_activity_date": 1530967813, "creation_date": 1530125472, "last_edit_date": 1530961839, "question_id": 51069618, "link": "https://stackoverflow.com/questions/51069618/the-semantics-of-tessbaseapiclear", "title": "The semantics of TessBaseAPI::Clear()", "body": "<p>Suppose I've created two objects of <code>TessBaseAPI</code> &mdash; <code>xapi</code> and <code>yapi</code> &mdash; initialized by calling the following overload of <a href=\"https://zdenop.github.io/tesseract-doc/classtesseract_1_1_tess_base_a_p_i.html#a96899e8e5358d96752ab1cfc3bc09f3e\" rel=\"nofollow noreferrer\">Init()</a> function:</p>\n\n<pre><code>int Init(const char * datapath,\n         const char * language,\n         OcrEngineMode  oem,\n         char **    configs,\n         int    configs_size,\n         const GenericVector&lt; STRING &gt; *    vars_vec,\n         const GenericVector&lt; STRING &gt; *    vars_values,\n         bool   set_only_non_debug_params \n);\n</code></pre>\n\n<p>passing exactly identical arguments. </p>\n\n<p>Since the objects are initialized with identical arguments, at this point <code>xapi</code> and <code>yapi</code> are assumed to be identical from behavioral<sup>1</sup> perspective. Is my assumption correct? I hope so, as I don't find any reason for the objects to be non-identical.</p>\n\n<hr>\n\n<p>Now I'm going to use <code>xapi</code> to extract information from an image but before that I  call <a href=\"https://zdenop.github.io/tesseract-doc/classtesseract_1_1_tess_base_a_p_i.html#a2e09259c558c6d8e0f7e523cbaf5adf5\" rel=\"nofollow noreferrer\">SetVariable()</a> a number of times, to set few more configurations. </p>\n\n<pre><code>bool SetVariable(const char * name, const char * value);\n</code></pre>\n\n<p>and then I used <code>xapi</code> to extract some text from an image.  Once I'm done with the extraction, I did this:</p>\n\n<pre><code> xapi.Clear(); //what exactly happens here?\n</code></pre>\n\n<p>After the call to <a href=\"https://zdenop.github.io/tesseract-doc/group___advanced_a_p_i.html#ga953b401286da174e609f09c5f275734e\" rel=\"nofollow noreferrer\">Clear()</a>, can I use <code>xapi</code> and <code>yapi</code> interchangeably? In other words, can I assume that <code>xapi</code> and <code>yapi</code> are identical at this point from behavioral<sup>1</sup> perspective? Can I say <code>Clear()</code> is actually a <em>reset</em> functionality?</p>\n\n<p><sup>1. By \"behavioral\", I meant performance in terms of accuracy, not speed/latency.</sup></p>\n"}, {"tags": ["c++", "linux", "debugging", "unix", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1530251761, "creation_date": 1530251761, "answer_id": 51095132, "question_id": 51069577, "link": "https://stackoverflow.com/questions/51069577/can-gdb-conditionally-break-non-interactively-on-function-only-if-the-functions/51095132#51095132", "title": "Can gdb conditionally break non-interactively on function only if the function&#39;s return value is equal to &quot;Value&quot;?", "body": "<blockquote>\n  <p>Suppose I want to break on SomeSourceFile:123 only if the return of foo(...) is not equal to \"Alice\".</p>\n</blockquote>\n\n<p>This fairly easy to do if you go to the lower (assembly level), and if the code is built without optimization.</p>\n\n<p>It is also <em>trivial</em> to do if you can modify the source like so:</p>\n\n<pre><code>if (foo(...) == \"Alice\") { ...\n} else {\n  int x = 0; if (x) abort(); // break here\n}\n</code></pre>\n\n<p>Now you can simply set breakpoint on line 125, and you are done.</p>\n\n<p>So how can you do this without modifying the source?</p>\n\n<p>You must understand that the compiler invokes some <code>bool operator==()</code>, compares the return to <code>true</code> or <code>false</code>, and conditionally jumps around the body of <code>if</code> when the condition is false.</p>\n\n<p>The <code>(gdb) info line 123</code> will give you range of instructions that were produced for this source line.</p>\n\n<p>Disassembling that range of instructions will allow you to locate the call to <code>operator==</code>, and show you the instruction that compares <code>EAX</code> (<code>JE</code> or <code>JNE</code>) with <code>0</code> or <code>1</code>.</p>\n\n<p>You can then set the breakpoint on the conditional jump instruction, and use <code>$EAX</code> (or <code>$RAX</code> for 64-bit code) is the condition on that breakpoint.</p>\n"}], "owner": {"reputation": 81, "user_id": 5786640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XdhTV.jpg?s=128&g=1", "display_name": "Skip Lester", "link": "https://stackoverflow.com/users/5786640/skip-lester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1530251761, "creation_date": 1530125233, "last_edit_date": 1530126283, "question_id": 51069577, "link": "https://stackoverflow.com/questions/51069577/can-gdb-conditionally-break-non-interactively-on-function-only-if-the-functions", "title": "Can gdb conditionally break non-interactively on function only if the function&#39;s return value is equal to &quot;Value&quot;?", "body": "<p>I'm using gdb with the -x parameter in order to debug without having to interactively continue at each breakpoint.</p>\n\n<pre><code>[root@StackOverflow.com] $ cat gdb_cmds_01\nb SomeSourceFile.cpp:123\ncommands\nbt\ncont\nend\n</code></pre>\n\n<p>I'm then attaching to a process that uses SomeSourceFile.cpp in it's execution:</p>\n\n<pre><code>[root@StackOverflow.com] $ gdb -p 'pidof SomeRunningProgram' -x gdb_cmds_01\nGNU gdb (GDB) Red Hat Enterprise Linux (7.2-92.el6)\n...\n&lt;GDB outputs a set S of backtraces as instructed by gdb_cmds_01&gt;\n</code></pre>\n\n<p>Now, Let SomeSourceFile.cpp:123 contain a line like:</p>\n\n<pre><code>if (foo(person, &amp;place, *time) == \"Alice\") { ... &lt;do stuff &gt; ... }\n</code></pre>\n\n<p>And then Suppose I want to break on SomeSourceFile:123 only if the return of <code>foo(...)</code> is <strong>not</strong> equal to \"Alice\".</p>\n\n<p>Based on: \n<a href=\"https://stackoverflow.com/questions/267674/how-to-inspect-the-return-value-of-a-function-in-gdb\">How to inspect the return value of a function in GDB?</a>, I know that gdb can inspect the return value of a function.</p>\n\n<p>And <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Break-Commands.html\" rel=\"nofollow noreferrer\">https://sourceware.org/gdb/onlinedocs/gdb/Break-Commands.html</a> tells me that I can inspect the value of a variable non-interactively:</p>\n\n<blockquote>\n  <p>&lt;...></p>\n  \n  <p>For example, here is how you could use breakpoint commands to print the value of x at entry to foo whenever x is positive.</p>\n</blockquote>\n\n<pre><code>break foo if x&gt;0\ncommands\nsilent\nprintf \"x is %d\\n\",x\ncont\nend\n</code></pre>\n\n<blockquote>\n  <p>&lt;...></p>\n</blockquote>\n\n<p>I have tried something like:</p>\n\n<pre><code>[root@StackOverflow.com] $ cat gdb_cmds_01\nb SomeSourceFile.cpp:123 if foo(person, &amp;place, *time) != \"Alice\"\ncommands\nbt\ncont\nend\n</code></pre>\n\n<p>But GDB spits out:</p>\n\n<pre><code>gdb_cmds_01:1: Error in sourced command file:\nNo symbol \"place\" in current context.\n</code></pre>\n\n<p>Can this be worked around?</p>\n\n<p>In order to break on SomeSourceFile.cpp:123 only when <code>foo(...) != \"Alice\"</code>, can I also inspect the return value of a function non-interactively?</p>\n\n<p>In other words, I want to see only a subset R of the set of backtraces S such that for all backtraces b in R, the return of <code>foo(...)</code> is always unequal to \"Alice\".</p>\n"}, {"tags": ["c++", "inheritance", "constructor"], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 6042280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdQPb.jpg?s=128&g=1", "display_name": "Riddick", "link": "https://stackoverflow.com/users/6042280/riddick"}, "edited": false, "score": 0, "creation_date": 1530126193, "post_id": 51069523, "comment_id": 89129420, "body": "Thank you for clarifying that; I didn&#39;t know there is no &quot;aggregate constructor&quot;. When I was tinkering with my code to figure out the answer, I explicitly defined a constructor in <code>Foo</code> to initialize <code>value</code>, and it worked with aggregate initialization. Is this actually C++ using the initializer list?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 251, "user_id": 6042280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdQPb.jpg?s=128&g=1", "display_name": "Riddick", "link": "https://stackoverflow.com/users/6042280/riddick"}, "edited": false, "score": 1, "creation_date": 1530126620, "post_id": 51069523, "comment_id": 89129626, "body": "@Riddick, it&#39;s called <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a> which considers class&#39; constructors in a certain order and actually is <b>not the same as initializer list</b>. Initializer list is usually refers to <code>std::initializer_list</code> which can be used to simulate aggregate initialization of array-like classes (e.g. <code>std::vector</code>)."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 3, "last_activity_date": 1530125891, "last_edit_date": 1530125891, "creation_date": 1530125073, "answer_id": 51069523, "question_id": 51069260, "link": "https://stackoverflow.com/questions/51069260/construction-of-child-class-with-added-member-variable/51069523#51069523", "title": "Construction of child class with added member variable", "body": "<p>In your example you need to provide additional empty braces to initialize base class:</p>\n\n<pre><code>Foo f = {{}, 8};\nFoo f{{}, 8};\n</code></pre>\n\n<p>Generally speaking though, not every class can be aggregate-initialized. The class is considered to be an aggregate if it has (see the <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">source</a>):</p>\n\n<ul>\n<li>no private or protected non-static data members </li>\n<li>no user-provided, inherited, or explicit constructors (explicitly defaulted or deleted constructors are allowed) </li>\n<li>no virtual, private, or protected base classes</li>\n<li>no virtual member functions</li>\n</ul>\n\n<p>Also, there is no such thing as an \"aggregate constructor\" and a default constructor is not related to aggregate initialization in any way.</p>\n\n<p>Constructors of base classes <strong>are not inherited</strong> unless you use <code>using Base::Base</code> to do so. Copy and move constructors are <strong>also not inherited</strong>. They are automatically generated by the compiler for each class unless they are explicitly defined or implicitly deleted.</p>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "is_accepted": false, "score": 2, "last_activity_date": 1530125121, "creation_date": 1530125121, "answer_id": 51069539, "question_id": 51069260, "link": "https://stackoverflow.com/questions/51069260/construction-of-child-class-with-added-member-variable/51069539#51069539", "title": "Construction of child class with added member variable", "body": "<p>The default constructor is a constructor which takes no arguments and <a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value initializes</a> all the members of a class; a constructor which takes an <code>int</code> and uses it to initialize <code>value</code> would have to be a user-defined constructor.</p>\n\n<p>Constructors are not passed onto their children. If you add the <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">using declaration</a> <code>using FooBase::FooBase</code> in the definition of <code>Foo</code> then all of the constructors of <code>FooBase</code> will become visible in Foo (although in this example this would have no effect as <code>FooBase</code> only contains the constructors that are provided by default).</p>\n"}], "owner": {"reputation": 251, "user_id": 6042280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdQPb.jpg?s=128&g=1", "display_name": "Riddick", "link": "https://stackoverflow.com/users/6042280/riddick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 1, "accepted_answer_id": 51069523, "answer_count": 2, "score": 3, "last_activity_date": 1530125891, "creation_date": 1530123955, "question_id": 51069260, "link": "https://stackoverflow.com/questions/51069260/construction-of-child-class-with-added-member-variable", "title": "Construction of child class with added member variable", "body": "<p>In my program I have an abstract class from which several classes inherit. Each child class introduces a member variable to store data. I noticed that when attempting to initialize the child class, whether using aggregate initialization or initializer list, I get errors, shown below.</p>\n\n<pre><code>struct FooBase {};\nstruct Foo : FooBase { int value; };\n\nint main()\n{\n    Foo f = {8}; // \"initializer for aggregate with no elements requires explicit braces\"\n    Foo f{8};    // same error as above\n}\n</code></pre>\n\n<p>I figured this is because Foo inherits the constructors from FooBase, but I have a couple questions about the behavior.</p>\n\n<ul>\n<li>Since the type is specified at compile time, why doesn't the aggregate constructor of <code>Foo</code> take precedence? </li>\n<li>Is there a way to force precedence of the default constructor so that above initialization is possible?</li>\n<li>(Bit more broad) In general, how are (standard and aggregate) constructors of classes passed on to their children?</li>\n</ul>\n\n<p>As I understand, the options would be setting the data after initialization (or making a setter method) or explicitly defining a constructor for <code>Foo</code>. However, specifically in the context of the last question, what happens with move and copy constructors? (Is there good practice for ensuring classes are well behaved under inheritance?)</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "answers": [{"tags": [], "owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "is_accepted": true, "score": 3, "last_activity_date": 1530123591, "creation_date": 1530123591, "answer_id": 51069154, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program/51069154#51069154", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>You don't have to modify any headers. What is necessary is to wrap all C declarations with <code>extern C {}</code>. You can do this just as well in you <code>cpp</code> file:</p>\n\n<pre><code>extern \"C\" {\n#include \"some_c_header.h\"\n}\n\nint main() {\n    std::cout &lt;&lt; \"This is C++ code\\n\";\n}\n</code></pre>\n\n<p>It might be useful to create a header file which simply includes C headers with C linkage:</p>\n\n<pre><code>// c_header.hpp\n#pragma once\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif \n\n#include \"c_header_1.h\"\n#include \"c_header_2.h\"\n\n#ifdef __cplusplus\n}\n#endif\n\n// main.cpp\n#include \"c_header.hpp\" // extern \"C\" {} already handled for you\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1530123635, "creation_date": 1530123635, "answer_id": 51069166, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program/51069166#51069166", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>Only those declarations of C functions and objects that are accessed by C++ components need to declared with C linkage, and only <em>to</em> the C++ components.  Presumably, your new C++ library accesses very little, if anything, from the existing C code, so the primary concern would be whatever is accessed (directly) by <code>main()</code>.  Those functions must be declared (to <code>main</code>) with C linkage.  If that turns out to be a significant number of things then you could consider refactoring to make it fewer.</p>\n\n<p>Moreover, no, you do not need to modify existing header files.  The C++ files that reference your C library, and that therefore include some of its headers, can wrap the relevant <code>#include</code> statements an an <code>extern \"C\"</code> block to take care of the issue.</p>\n"}], "owner": {"reputation": 232, "user_id": 9867311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8987fb82181f0e60e832600d8076123?s=128&d=identicon&r=PG&f=1", "display_name": "Rudra", "link": "https://stackoverflow.com/users/9867311/rudra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51069154, "answer_count": 2, "score": 1, "last_activity_date": 1533142664, "creation_date": 1530122964, "last_edit_date": 1533142664, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>Stackoverflow won't let me comment because I am a newbie.</p>\n\n<p>Borrowing the title from the question posted <a href=\"https://stackoverflow.com/questions/19063975/linking-c-compiled-static-library-to-c-program\">here</a>, the accepted solution says that you have to modify the C header file using <code>#ifdef __cplusplus</code> and <code>extern \"C\"</code>.\nI have the exact same question but I have been provided a C library containing over 100 <code>.h</code> C header files and <code>.c</code> C program files and now I have to use a C++ library so my <code>main()</code> will be in C++. </p>\n\n<p>So do I now have to add those modifications to each one of those C header files or is there some other approach? My <code>main()</code> is in a <code>.cpp</code> file which will use functions from this C library.</p>\n\n<p><strong>EDIT</strong>\nThis question has been resolved. I wish for this question to be closed or removed.</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio", "boost-beast"], "comments": [{"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1576051637, "post_id": 51068853, "comment_id": 104768705, "body": "What are your findings?"}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 2996361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fba27942a4030303eaeae33cd35642?s=128&d=identicon&r=PG&f=1", "display_name": "qduyang", "link": "https://stackoverflow.com/users/2996361/qduyang"}, "edited": false, "score": 2, "creation_date": 1543083170, "post_id": 51114714, "comment_id": 93793495, "body": "As a ssl client, if closed by network disruption, the socket looks always get &quot;short read&quot; error on SSL handshake during reconnecting."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 353, "user_id": 2996361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fba27942a4030303eaeae33cd35642?s=128&d=identicon&r=PG&f=1", "display_name": "qduyang", "link": "https://stackoverflow.com/users/2996361/qduyang"}, "edited": false, "score": 0, "creation_date": 1543083740, "post_id": 51114714, "comment_id": 93793653, "body": "I&#39;m not sure if Asio ssl streams are reusable. I have never tried to do it."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1576063885, "post_id": 51114714, "comment_id": 104775254, "body": "I am aslo looking answer for the same question!"}, {"owner": {"reputation": 135, "user_id": 1740065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mf895.jpg?s=128&g=1", "display_name": "Darrin", "link": "https://stackoverflow.com/users/1740065/darrin"}, "edited": false, "score": 0, "creation_date": 1603222071, "post_id": 51114714, "comment_id": 113967440, "body": "I am also looking to implement some &quot;reconnect&quot; logic, as well as sending PING and PONG.  The server end of the message can encounter an OnClose event, then a &quot;close&quot; can get triggered, if the WiFi-connected client slips in and out of WiFi range in a large warehouse.  So it seems I need to implement &quot;reconnect&quot; to avoid forcing the application to bounce users back to a login screen just because of a 500 msec WiFi hiccup."}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": false, "score": 1, "last_activity_date": 1530360039, "creation_date": 1530360039, "answer_id": 51114714, "question_id": 51068853, "link": "https://stackoverflow.com/questions/51068853/boost-beast-reconnect-websocket-connection-after-close/51114714#51114714", "title": "Boost Beast reconnect websocket connection after close", "body": "<p>That should work although to be honest I have not tested it. What happens when you reuse it?</p>\n"}], "owner": {"reputation": 931, "user_id": 2357317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1296380e5d067c1be20ad84761c585e9?s=128&d=identicon&r=PG", "display_name": "john_zac", "link": "https://stackoverflow.com/users/2357317/john-zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1530360039, "creation_date": 1530122273, "question_id": 51068853, "link": "https://stackoverflow.com/questions/51068853/boost-beast-reconnect-websocket-connection-after-close", "title": "Boost Beast reconnect websocket connection after close", "body": "<p>I am using boost::beast to create a websocket connection and so far it seems to work fine. But I am unable to figure out if i should replace the websocket::stream variable after disconnect. </p>\n\n<p>i.e. I have a variable:</p>\n\n<pre><code>boost::beast::websocket::stream&lt;boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt;&gt; _ws\n</code></pre>\n\n<p>After an async disconnect is initiated and completed:</p>\n\n<pre><code>bool WebsocketConnection::startDisconnectSequence()\n{\n    _ws.async_close(\n        boost::beast::websocket::close_code::normal,\n        boost::asio::bind_executor(\n            _strand,\n            std::bind(\n                &amp;WebsocketConnection::onClose,\n                this,\n                std::placeholders::_1)));\n\n    return true;\n}\n</code></pre>\n\n<p>If I want to restart again, should i replace the _ws variable</p>\n\n<pre><code>    boost::asio::async_connect(\n        _ws.next_layer().next_layer(),\n        results.begin(),\n        results.end(),\n        boost::asio::bind_executor(\n            _strand,\n            std::bind(\n                &amp;ASIOConnectionBase::onConnect,\n                this,\n                std::placeholders::_1)));\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 381, "user_id": 2799616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mJviH.png?s=128&g=1", "display_name": "mystery_doctor", "link": "https://stackoverflow.com/users/2799616/mystery-doctor"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1530122805, "post_id": 51068753, "comment_id": 89127799, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/173906/discussion-between-mystery-doctor-and-justin\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 0, "last_activity_date": 1535063245, "last_edit_date": 1535063245, "creation_date": 1530123179, "answer_id": 51069048, "question_id": 51068753, "link": "https://stackoverflow.com/questions/51068753/ostream-iterator-for-vectorvectordouble/51069048#51069048", "title": "ostream_iterator for vector&lt;vector&lt;double&gt;&gt;", "body": "<p>The reason why <code>std::ostream_iterator</code> doesn't work with your code is because the <code>operator&lt;&lt;</code> you defined is in the global namespace, not in namespace <code>std</code>.</p>\n\n<p><code>std::ostream_iterator</code> <a href=\"https://en.cppreference.com/w/cpp/iterator/ostream_iterator/operator%3D\" rel=\"nofollow noreferrer\">is defined</a> to call <code>operator&lt;&lt;</code> like <code>ostr &lt;&lt; value</code>, which performs <a href=\"https://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\"><em>argument-dependent lookup</em></a> (ADL). ADL doesn't find any <code>operator&lt;&lt;</code> in this case, since there is no <code>operator&lt;&lt;</code> between <code>std::ostream&amp;</code> and <code>std::vector&lt;double&gt;</code> defined inside namespace `std.</p>\n\n<p>After ADL finds associated namespaces and classes, the overload set is merged with those found by <a href=\"https://en.cppreference.com/w/cpp/language/unqualified_lookup\" rel=\"nofollow noreferrer\"><em>unqualified name lookup</em></a>. To quote cppreference on unqualified name lookup:</p>\n\n<blockquote>\n  <p>[N]ame lookup examines the scopes as described below, until it finds at least one declaration of any kind, <em>at which time the lookup stops and no further scopes are examined.</em></p>\n</blockquote>\n\n<p><sup>emphasis added</sup></p>\n\n<p>Since <code>std::ostream_iterator</code> is inside the <code>std</code> namespace, its call to <code>ostr &lt;&lt; value</code> is inside the <code>std</code> namespace. There are other <code>operator&lt;&lt;</code>s defined inside the <code>std</code> namespace, so unqualified name lookup finds an <code>operator&lt;&lt;</code> and stops. This happens <em>before</em> the discovered function is considered for whether it could be compatible.</p>\n\n<hr>\n\n<p>Do not add operators to a type you do not own, unless you own the other type. In order to work properly with the language, operators must be defined in the same namespace as the type (so that it can be found via ADL). However, adding functions to a namespace you do not own is not good practice, and it will cause problems. For the case of <code>std</code>, it's actually <a href=\"https://en.cppreference.com/w/cpp/language/extending_std\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n"}], "owner": {"reputation": 381, "user_id": 2799616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mJviH.png?s=128&g=1", "display_name": "mystery_doctor", "link": "https://stackoverflow.com/users/2799616/mystery-doctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1530123428, "accepted_answer_id": 51069048, "answer_count": 1, "score": 3, "last_activity_date": 1535063245, "creation_date": 1530121833, "last_edit_date": 1530123232, "question_id": 51068753, "link": "https://stackoverflow.com/questions/51068753/ostream-iterator-for-vectorvectordouble", "closed_reason": "Duplicate", "title": "ostream_iterator for vector&lt;vector&lt;double&gt;&gt;", "body": "<p>I am trying to understand why the following code doesn't compile</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;ostream&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class ostream&gt;\nostream&amp; operator&lt;&lt;(ostream&amp; o, const std::vector&lt;double&gt;&amp; data)\n{\n    std::copy(data.begin(), data.end(), std::ostream_iterator&lt;double&gt;(o, \" \"));\n    return o;\n}\n\ntemplate&lt;class ostream&gt;\nostream&amp; operator&lt;&lt;(ostream&amp; o, const std::vector&lt;std::vector&lt;double&gt;&gt;&amp; data)\n{\n    std::copy(data.begin(), data.end(), std::ostream_iterator&lt;std::vector&lt;double&gt;&gt;(o, \"\\n\"));\n    return o;\n}\n\nint main(int argc, char **argv)\n{\n    std::vector&lt;std::vector&lt;double&gt;&gt; vecvec = {{1,2,3}, \n                                               {4,5,6}};\n    std::cout &lt;&lt; vecvec &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I thought that since I have defined an <code>operator&lt;&lt;</code> for <code>vector&lt;double&gt;</code> I should be able to take advantage of the <code>ostream_iterator</code></p>\n\n<p>Instead I get a compilation error, and if I change the code to the following, then everything compiles fine. </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;ostream&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class ostream&gt;\nostream&amp; operator&lt;&lt;(ostream&amp; o, const std::vector&lt;double&gt;&amp; data)\n{\n    std::copy(data.begin(), data.end(), std::ostream_iterator&lt;double&gt;(o, \" \"));\n    return o;\n}\n\ntemplate&lt;class ostream&gt;\nostream&amp; operator&lt;&lt;(ostream&amp; o, const std::vector&lt;std::vector&lt;double&gt;&gt;&amp; data)\n{\n    /** changed to manually looping **/\n    for (const auto&amp; line : data)\n    {\n        o &lt;&lt; line &lt;&lt; \"\\n\";\n    }\n    return o;\n}\n\nint main(int argc, char **argv)\n{\n    std::vector&lt;std::vector&lt;double&gt;&gt; vecvec = {{1,2,3}, \n                                               {4,5,6}};\n    std::cout &lt;&lt; vecvec &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Most importantly... could anyone explain to me why <code>ostream_iterator</code> fails to compile here? </p>\n\n<p>I can find a workaround and fix my problem, but it seems that I have not fully understood how the <code>ostream_iterator</code> works</p>\n\n<p>Here is the output of the compiler (gcc 4.8.5)</p>\n\n<pre><code>In file included from /opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/iterator:66:0,from &lt;source&gt;:3:\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stream_iterator.h: In instantiation of 'std::ostream_iterator&lt;_Tp, _CharT, _Traits&gt;&amp; std::ostream_iterator&lt;_Tp, _CharT, _Traits&gt;::operator=(const _Tp&amp;) [with _Tp = std::vector&lt;double&gt;; _CharT = char; _Traits = std::char_traits&lt;char&gt;]':\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stl_algobase.h:335:18:   required from 'static _OI std::__copy_move&lt;false, false, std::random_access_iterator_tag&gt;::__copy_m(_II, _II, _OI) [with _II = std::vector&lt;double&gt;*; _OI = std::ostream_iterator&lt;std::vector&lt;double&gt; &gt;]'\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stl_algobase.h:390:70:   required from '_OI std::__copy_move_a(_II, _II, _OI) [with bool _IsMove = false; _II = std::vector&lt;double&gt;*; _OI = std::ostream_iterator&lt;std::vector&lt;double&gt; &gt;]'\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stl_algobase.h:428:38:   required from '_OI std::__copy_move_a2(_II, _II, _OI) [with bool _IsMove = false; _II = __gnu_cxx::__normal_iterator&lt;std::vector&lt;double&gt;*, std::vector&lt;std::vector&lt;double&gt; &gt; &gt;; _OI = std::ostream_iterator&lt;std::vector&lt;double&gt; &gt;]'\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stl_algobase.h:460:17:   required from '_OI std::copy(_II, _II, _OI) [with _II = __gnu_cxx::__normal_iterator&lt;std::vector&lt;double&gt;*, std::vector&lt;std::vector&lt;double&gt; &gt; &gt;; _OI = std::ostream_iterator&lt;std::vector&lt;double&gt; &gt;]'\n\n&lt;source&gt;:17:96:   required from 'ostream&amp; operator&lt;&lt;(ostream&amp;, std::vector&lt;std::vector&lt;double&gt; &gt;&amp;) [with ostream = std::basic_ostream&lt;char&gt;]'\n\n&lt;source&gt;:26:18:   required from here\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/bits/stream_iterator.h:198:13: error: cannot bind 'std::ostream_iterator&lt;std::vector&lt;double&gt; &gt;::ostream_type {aka std::basic_ostream&lt;char&gt;}' lvalue to 'std::basic_ostream&lt;char&gt;&amp;&amp;'\n\n  *_M_stream &lt;&lt; __value;\n\n             ^\n\nIn file included from &lt;source&gt;:2:0:\n\n/opt/compiler-explorer/gcc-4.8.5/include/c++/4.8.5/ostream:602:5: error:   initializing argument 1 of 'std::basic_ostream&lt;_CharT, _Traits&gt;&amp; std::operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp;, const _Tp&amp;) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Tp = std::vector&lt;double&gt;]'\n\n     operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)\n\n     ^\n\nCompiler returned: 1\n</code></pre>\n"}, {"tags": ["c++", "mysql", "connector"], "comments": [{"owner": {"reputation": 1624, "user_id": 497313, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VUTOp.jpg?s=128&g=1", "display_name": "rossb83", "link": "https://stackoverflow.com/users/497313/rossb83"}, "edited": false, "score": 0, "creation_date": 1530121792, "post_id": 51068708, "comment_id": 89127286, "body": "whats stopping you from connecting to 2 or more databases by making 2 sql::Connection objects?"}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "edited": false, "score": 0, "creation_date": 1530121924, "post_id": 51068708, "comment_id": 89127345, "body": "Why would you ever need to do that?"}, {"owner": {"reputation": 148, "user_id": 9373974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rok", "link": "https://stackoverflow.com/users/9373974/rok"}, "reply_to_user": {"reputation": 1624, "user_id": 497313, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VUTOp.jpg?s=128&g=1", "display_name": "rossb83", "link": "https://stackoverflow.com/users/497313/rossb83"}, "edited": false, "score": 0, "creation_date": 1530122455, "post_id": 51068708, "comment_id": 89127616, "body": "cause i&#39;m operating with 2 or more databases :) .. @rossb83 can&#39;t do that.."}, {"owner": {"reputation": 148, "user_id": 9373974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rok", "link": "https://stackoverflow.com/users/9373974/rok"}, "edited": false, "score": 0, "creation_date": 1530122492, "post_id": 51068708, "comment_id": 89127647, "body": "is it possible to setSchema for multiple databases?"}], "answers": [{"tags": [], "owner": {"reputation": 148, "user_id": 9373974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rok", "link": "https://stackoverflow.com/users/9373974/rok"}, "is_accepted": true, "score": 0, "last_activity_date": 1530185467, "creation_date": 1530185467, "answer_id": 51081838, "question_id": 51068708, "link": "https://stackoverflow.com/questions/51068708/how-to-operate-with-multiple-databases-in-one-query-using-mysql-c-connector/51081838#51081838", "title": "How to operate with multiple databases in one query using MySQL C++ connector", "body": "<p>So I got it working now. I just had to setSchema for one database and it worked for every other database. Don't really know why. If someone could explain would be great. Thanks for all the help anyways guys!</p>\n"}], "owner": {"reputation": 148, "user_id": 9373974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rok", "link": "https://stackoverflow.com/users/9373974/rok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 51081838, "answer_count": 1, "score": 0, "last_activity_date": 1530187077, "creation_date": 1530121625, "question_id": 51068708, "link": "https://stackoverflow.com/questions/51068708/how-to-operate-with-multiple-databases-in-one-query-using-mysql-c-connector", "title": "How to operate with multiple databases in one query using MySQL C++ connector", "body": "<p>I have some queries already written and the problem is that some queries operate with two or more databases. This is how I do it when i'm using only one database..</p>\n\n<pre><code>sql::Driver* driver = get_driver_instance();\nsql::Connection *con(driver-&gt;connect(url, user, pass));\ncon-&gt;setSchema(database);\n\nstd::string query = \"some_query\";\nsql::PreparedStatement *pstmt = con-&gt;prepareStatement(query);\npstmt-&gt;executeQuery();\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qlistwidget", "qradiobutton"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1530125342, "post_id": 51068645, "comment_id": 89129019, "body": "You could explain yourself better, you could show a picture of what you want to get."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530130921, "post_id": 51068645, "comment_id": 89131426, "body": "The dont need to be radio buttons for that. Just use the selected index."}, {"owner": {"reputation": 19, "user_id": 9999836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b12ba0b23e269f7e2ed25f070f91731?s=128&d=identicon&r=PG&f=1", "display_name": "HAB", "link": "https://stackoverflow.com/users/9999836/hab"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1530217027, "post_id": 51068645, "comment_id": 89169547, "body": "@eyllanesc i just want the same output but the stuff in listwidget needs to be in radio boxes"}, {"owner": {"reputation": 19, "user_id": 9999836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b12ba0b23e269f7e2ed25f070f91731?s=128&d=identicon&r=PG&f=1", "display_name": "HAB", "link": "https://stackoverflow.com/users/9999836/hab"}, "reply_to_user": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530217163, "post_id": 51068645, "comment_id": 89169595, "body": "@Mike could you tell how I could do that or link me to a website that could explain that, like I said I am very new to qt."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530217507, "post_id": 51068645, "comment_id": 89169729, "body": "So your using a list widget. That has member fuctions that return active properities of the object. It emits signals... you can use the signals and make slots to handle them (i. e. Save the files) or you can use the object directly. QListWidget::itemClicked signal is probably what you want. Tie it to a slot that takes a QListWidgetItem*  param and there you go."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530217883, "post_id": 51068645, "comment_id": 89169892, "body": "Or whenever you hit the end button to perform the action use functions QListWidget:: currentIndex, currentItem, currentRow, etc. you have control of the selection behavior and appearance."}, {"owner": {"reputation": 19, "user_id": 9999836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b12ba0b23e269f7e2ed25f070f91731?s=128&d=identicon&r=PG&f=1", "display_name": "HAB", "link": "https://stackoverflow.com/users/9999836/hab"}, "reply_to_user": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530352909, "post_id": 51068645, "comment_id": 89214019, "body": "@Mike I want to make sure that the user only selects one item, how do i do that"}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530363861, "post_id": 51068645, "comment_id": 89216557, "body": "SetSelectionBehavior function takes a single selection flag i believe. And if you want some icon to denote selection next to the text you can do that too!"}, {"owner": {"reputation": 19, "user_id": 9999836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b12ba0b23e269f7e2ed25f070f91731?s=128&d=identicon&r=PG&f=1", "display_name": "HAB", "link": "https://stackoverflow.com/users/9999836/hab"}, "reply_to_user": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530366374, "post_id": 51068645, "comment_id": 89217143, "body": "@Mike thanks so much! I have a different question, not related to this topic. In QFileDialog::getOpenFileName how do I add a default directory of my own choice dynamically? What happens is that the user selects the directory through a different push button and after that I want him to select a file in that directory through another pushButton. Could you please help me with that?"}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1530368038, "post_id": 51068645, "comment_id": 89217564, "body": "<i>if i understand correctly</i> if you can get the entryInfoList () (a QDir call) or obtain the files/dirs in the location yoy can sort by time or alphabetically and selcet take the fileName() and set it to a class member m_selectedFile upon initialization of the listWidget. Then if the user clicks a button that file will already be queued. How you want to visually represent that it is selected would be to setSelected () on the listWidget."}], "owner": {"reputation": 19, "user_id": 9999836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b12ba0b23e269f7e2ed25f070f91731?s=128&d=identicon&r=PG&f=1", "display_name": "HAB", "link": "https://stackoverflow.com/users/9999836/hab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530125267, "creation_date": 1530121396, "last_edit_date": 1530125267, "question_id": 51068645, "link": "https://stackoverflow.com/questions/51068645/converting-a-list-of-items-in-qt-listwidget-to-radio-buttons", "title": "Converting a list of items in qt listwidget to radio buttons", "body": "<p>I have created an application where files from a directory are being displayed in the qlistwidget.</p>\n\n<p>Now the problem is that I want this list to be shown as a list of radio buttons so that the user can select a radio button and the address of the selected file can be saved. Also an error need to be shown if the user doesn't select a radio button and clicks next.</p>\n\n<p>I'm using Visual Studio for coding the gui instead of qt creator.</p>\n\n<p>My code so far is:</p>\n\n<p><strong>.hpp file</strong></p>\n\n<pre><code>#pragma once\n#include &lt;QWidget&gt;\n\n#include \"ui_secondform.h\"\n\n#include \"thirdform.hpp\"\n#include &lt;QRegExp&gt;\n#include &lt;QDir&gt;\n#include &lt;QDebug&gt;\n\nclass SecondForm : public QWidget {\n    Q_OBJECT\n\npublic:\n    SecondForm(QWidget * parent = Q_NULLPTR);\n    ~SecondForm();\n    QString processText();\nsignals:\n    void firstform();\npublic slots:\n    void on_pushButton_next2_clicked();\n    void on_pushButton_back2_clicked();\n    void on_lineEdit_textChanged(const QString &amp;arg1);\n    //void onNewTextEntered(const QString &amp;text);\n    //void on_lineEdit_textChanged(const QString &amp;arg1);\nprivate:\n    Ui::SecondForm ui;\n    ThirdForm *third;\n    QStringList fileList;\n};\n</code></pre>\n\n<p><strong>.cpp file:</strong></p>\n\n<pre><code>#include \"secondform.hpp\"\n#include \"firstform.h\"\n\nSecondForm::SecondForm(QWidget * parent) : QWidget(parent) {\n    ui.setupUi(this);\n    third = new ThirdForm();\n    // connected to the slot start the main window on the button in the second window\n    connect(third, &amp;ThirdForm::secondform, this, &amp;SecondForm::show);\n    //QString dir = processText();\n    QDir testPath(\"D://\");\n    testPath.setFilter(QDir::Dirs | QDir::Files | QDir::NoDotAndDotDot);\n    fileList = testPath.entryList();\n    ui.listWidget-&gt;addItems(fileList);\n}\n\nSecondForm::~SecondForm() {\n\n}\nvoid SecondForm::on_pushButton_back2_clicked() {\n    this-&gt;hide();\n    emit firstform();\n}\nvoid SecondForm::on_pushButton_next2_clicked() {\n    this-&gt;close();\n    third-&gt;show();\n}\nvoid SecondForm::on_lineEdit_textChanged(const QString &amp;arg1) {\n    QRegExp regExp(arg1, Qt::CaseInsensitive, QRegExp::Wildcard);\n    ui.listWidget-&gt;clear();\n    ui.listWidget-&gt;addItems(fileList.filter(regExp));\n}\nQString SecondForm::processText()\n{\n    FirstForm first;\n    const QString dir = first.lineEdit()-&gt;text();\n    return dir;\n    // do something with the text\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/u3ktI.png\" alt=\"image for output\"></p>\n"}, {"tags": ["c++", "multithreading", "gcc", "visual-c++", "boost"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1530121248, "post_id": 51068585, "comment_id": 89127025, "body": "Not all Boost libraries are header-only, some have an actual library that you need to link with."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530121732, "post_id": 51068585, "comment_id": 89127263, "body": "@Someprogrammerdude hmm, ok this is indeed my first gcc boost compilation."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530121906, "post_id": 51068585, "comment_id": 89127336, "body": "@Someprogrammerdude wait, I probably need to recompile boost for gcc then, right?"}, {"owner": {"reputation": 3755, "user_id": 252370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b4baabc7a09b9c9a55a1305e59d3bfb?s=128&d=identicon&r=PG", "display_name": "f4.", "link": "https://stackoverflow.com/users/252370/f4"}, "edited": false, "score": 1, "creation_date": 1530122854, "post_id": 51068585, "comment_id": 89127821, "body": "not necessarily your distro probably has it (looks like you may be building on linux)"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 3755, "user_id": 252370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b4baabc7a09b9c9a55a1305e59d3bfb?s=128&d=identicon&r=PG", "display_name": "f4.", "link": "https://stackoverflow.com/users/252370/f4"}, "edited": false, "score": 0, "creation_date": 1530124573, "post_id": 51068585, "comment_id": 89128655, "body": "@f4. actually it&#39;s Bash under Windows10....should work though."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1530125120, "post_id": 51068585, "comment_id": 89128917, "body": "Passing the output through <code>c++filt</code>, to demangle the names, would make it more readable."}, {"owner": {"reputation": 3755, "user_id": 252370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b4baabc7a09b9c9a55a1305e59d3bfb?s=128&d=identicon&r=PG", "display_name": "f4.", "link": "https://stackoverflow.com/users/252370/f4"}, "edited": false, "score": 1, "creation_date": 1530125229, "post_id": 51068585, "comment_id": 89128960, "body": "@JHBonarius you need to pass the appropriate -l option to g++"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 3755, "user_id": 252370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b4baabc7a09b9c9a55a1305e59d3bfb?s=128&d=identicon&r=PG", "display_name": "f4.", "link": "https://stackoverflow.com/users/252370/f4"}, "edited": false, "score": 0, "creation_date": 1530125567, "post_id": 51068585, "comment_id": 89129138, "body": "@f4. <code>cannot find -lboost_thread</code> probably means rebuild is required..."}], "answers": [{"tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": false, "score": 1, "last_activity_date": 1530129160, "creation_date": 1530129160, "answer_id": 51070433, "question_id": 51068585, "link": "https://stackoverflow.com/questions/51068585/boost-tread-code-compiles-under-vc-but-not-under-gcc-how-to-get-better-debug/51070433#51070433", "title": "Boost tread code compiles under VC++ but not under GCC: how to get better debug info", "body": "<p>Dumb me was not linking to the boost libraries and not including pthread. Actually, I hadn't even compiled boost for GCC.</p>\n\n<p>The correct build command was</p>\n\n<pre><code>g++ main.cpp -Wall -Wextra -I../Boost/boost_1_67_0 -L../Boost/boost_1_67_0/stage/lib -lboost_regex -lpthread -std=c++14\n</code></pre>\n"}], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530129160, "creation_date": 1530121157, "question_id": 51068585, "link": "https://stackoverflow.com/questions/51068585/boost-tread-code-compiles-under-vc-but-not-under-gcc-how-to-get-better-debug", "title": "Boost tread code compiles under VC++ but not under GCC: how to get better debug info", "body": "<p>I have a multi-threaded (boost::thread 1.67.0) test application that compiles fine under VC++ (MSVS2017 v15.7) but fails to compile under GCC. The thrown errors are really really difficult to comprehend for me.\nI think it has to do with the way I create a thread.\nIs there a way to get better debug info?</p>\n\n<h1>Code</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\nusing namespace std::chrono;\n\ntemplate&lt;typename T&gt;\nauto toMs(T &amp;&amp;time) {\n    return duration_cast&lt;milliseconds&gt;(time).count();\n}\n\n#include &lt;string&gt;\n#include &lt;regex&gt;\nvoid cxxregex(std::string const&amp;inputString, std::string const&amp;searchRegex)\n{\n    auto startTime = steady_clock::now();\n    std::regex regexObj(searchRegex.data(), std::regex::extended);\n    std::smatch matchObj;\n    regex_search(inputString.begin(), inputString.end(), matchObj, regexObj);\n    std::cout &lt;&lt; toMs(steady_clock::now() - startTime) &lt;&lt; \"ms \" &lt;&lt; matchObj[1] &lt;&lt; std::endl;\n}\n\n#include &lt;boost/regex.hpp&gt;\nvoid boostregex(std::string const&amp;inputString, std::string const&amp;searchRegex)\n{\n    auto startTime = steady_clock::now();\n    boost::regex regexObj(searchRegex.data(), boost::regex::extended);\n    boost::smatch matchObj;\n    regex_search(inputString.begin(), inputString.end(), matchObj, regexObj);\n    std::cout &lt;&lt; toMs(steady_clock::now() - startTime) &lt;&lt; \"ms \" &lt;&lt; matchObj[1] &lt;&lt; std::endl;\n}\n\n#include &lt;future&gt;\nvoid threadFcn(\n    const int threadId,\n    const std::string::const_iterator&amp; subStringBegin,\n    const std::string::const_iterator&amp; subStringEnd,\n    const boost::regex&amp; regexObj,\n    std::promise&lt;std::pair&lt;size_t, std::string&gt;&gt;&amp; matchProm,\n    const std::shared_future&lt;std::pair&lt;size_t, std::string&gt;&gt;&amp; matchFut)\n{\n    boost::smatch matchObj;\n    if (regex_search(subStringBegin, subStringEnd, matchObj, regexObj))\n    {\n        // match is found!\n        if (matchFut.wait_for(0s) != std::future_status::ready) // check of not already set\n            matchProm.set_value(std::make_pair(threadId, matchObj[1]));// matchObj.str()));\n    }\n}\n\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\nusing namespace std::chrono_literals;\nvoid boostparregex(std::string const &amp;inputString, std::string const &amp;searchRegex)\n{\n    auto nrOfCpus = std::thread::hardware_concurrency() / 2;\n    std::cout &lt;&lt; \"(Nr of CPUs: \" &lt;&lt; nrOfCpus &lt;&lt; \") \";\n\n    if (searchRegex.find(\"^\") != std::string::npos || searchRegex.find(\"$\") != std::string::npos) {\n        std::cout &lt;&lt; \"Start-of-line not supported multi-CPU. Defaulting to 1.\\n\";\n        nrOfCpus = 1;\n    }\n\n    auto startTime = steady_clock::now();\n    boost::regex regexObj(searchRegex.data(), boost::regex::extended);\n\n    std::promise&lt;std::pair&lt;size_t, std::string&gt;&gt; foundThreadIdProm;\n    auto foundThreadIdFut = foundThreadIdProm.get_future().share();\n    std::vector&lt;std::thread&gt; threadVector; threadVector.reserve(nrOfCpus);\n    auto stringSizePerThread = inputString.length() / nrOfCpus;\n    for (size_t threadId = 0; threadId &lt; nrOfCpus; threadId++) {\n        // determine string start and end\n        const auto begin = inputString.begin() + (threadId * stringSizePerThread);\n        const auto end = inputString.end(); // all cpu's search to end of input string. they only differ in start\n        // create thread\n        threadVector.push_back(std::thread(threadFcn,\n            (int)threadId, std::ref(begin), std::ref(end), std::ref(regexObj), std::ref(foundThreadIdProm), std::ref(foundThreadIdFut)));\n    }\n\n    if (foundThreadIdFut.wait_for(10s) == std::future_status::ready) std::cout\n        &lt;&lt; toMs(steady_clock::now() - startTime) &lt;&lt; \"ms. \"\n        &lt;&lt; \"Thread \" &lt;&lt; foundThreadIdFut.get().first &lt;&lt; \": \" &lt;&lt; foundThreadIdFut.get().second &lt;&lt; std::endl;\n    else std::cerr &lt;&lt; \"Error: string not found!!\" &lt;&lt; std::endl;\n\n    for (auto&amp; thread : threadVector) thread.join(); // I'd rather detach... but then the references are destroyed, giving problems.\n}\n\nint main()\n{\n    std::string s(1000000000, 'x');\n    {\n        std::string s1 = \"yolo\" + s;\n        std::cout &lt;&lt; \"yolo + ... -&gt; cxxregex \"; cxxregex(s1, \"(yolo)\");\n        std::cout &lt;&lt; \"yolo + ... -&gt; boostregex \"; boostregex(s1, \"(yolo)\");\n        std::cout &lt;&lt; \"yolo + ... -&gt; boostparregex \"; boostparregex(s1, \"(yolo)\");\n    }\n    {\n        std::string s2 = s + \"yolo\";\n        std::cout &lt;&lt; \"... + yolo -&gt; cxxregex \"; cxxregex(s2, \"(yolo)\");\n        std::cout &lt;&lt; \"... + yolo -&gt; boostregex \"; boostregex(s2, \"(yolo)\");\n        std::cout &lt;&lt; \"... + yolo -&gt; boostparregex \"; boostparregex(s2, \"(yolo)\");\n    }\n    {\n        std::string s3 = \"yo\" + s + \"lo\";\n        //std::cout &lt;&lt; \"... + yolo -&gt; cxxregex \"; cxxregex(s3, \"(yo).*(lo)\"); // doesn't even work\n        std::cout &lt;&lt; \"... + yolo -&gt; boostregex \"; boostregex(s3, \"(yo).*(lo)\");\n        std::cout &lt;&lt; \"... + yolo -&gt; boostparregex \"; boostparregex(s3, \"(yo).*(lo)\");\n    }\n\n    std::cin.ignore();\n}\n</code></pre>\n\n<h1>GCC error output</h1>\n\n<pre><code>g++ main.cpp -Wall -Wextra -I../Boost/boost_1_67_0 -std=c++14\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>/tmp/cc9cP6LZ.o: In function `std::thread::thread&lt;void (&amp;)(int, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&amp;, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&amp;, boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, std::promise&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt;&amp;, std::shared_future&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; const&amp;), int, std::reference_wrapper&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&gt;, std::reference_wrapper&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&gt;, std::reference_wrapper&lt;boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; &gt;, std::reference_wrapper&lt;std::promise&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, std::reference_wrapper&lt;std::shared_future&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt; &gt;(void (&amp;)(int, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&amp;, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&amp;, boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, std::promise&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt;&amp;, std::shared_future&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; const&amp;), int&amp;&amp;, std::reference_wrapper&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&gt;&amp;&amp;, std::reference_wrapper&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const&gt;&amp;&amp;, std::reference_wrapper&lt;boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; &gt;&amp;&amp;, std::reference_wrapper&lt;std::promise&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;&amp;&amp;, std::reference_wrapper&lt;std::shared_future&lt;std::pair&lt;unsigned long, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;&amp;&amp;)':\nmain.cpp:(.text._ZNSt6threadC2IRFviRKN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESD_RKN5boost11basic_regexIcNSE_12regex_traitsIcNSE_16cpp_regex_traitsIcEEEEEERSt7promiseISt4pairImSA_EERKSt13shared_futureISP_EEJiSt17reference_wrapperISC_ESZ_SY_ISK_ESY_ISQ_ESY_IST_EEEEOT_DpOT0_[_ZNSt6threadC5IRFviRKN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESD_RKN5boost11basic_regexIcNSE_12regex_traitsIcNSE_16cpp_regex_traitsIcEEEEEERSt7promiseISt4pairImSA_EERKSt13shared_futureISP_EEJiSt17reference_wrapperISC_ESZ_SY_ISK_ESY_ISQ_ESY_IST_EEEEOT_DpOT0_]+0x156): undefined reference to `pthread_create'\n/tmp/cc9cP6LZ.o: In function `bool boost::regex_search&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;(__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, boost::match_results&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt; &gt;&amp;, boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;)':\nmain.cpp:(.text._ZN5boost12regex_searchIN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESaINS_9sub_matchISB_EEEcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEEbT_SJ_RNS_13match_resultsISJ_T0_EERKNS_11basic_regexIT1_T2_EENS_15regex_constants12_match_flagsESJ_[_ZN5boost12regex_searchIN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESaINS_9sub_matchISB_EEEcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEEbT_SJ_RNS_13match_resultsISJ_T0_EERKNS_11basic_regexIT1_T2_EENS_15regex_constants12_match_flagsESJ_]+0xba): undefined reference to `boost::re_detail_106700::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::find()'\n/tmp/cc9cP6LZ.o: In function `boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::assign(char const*, char const*, unsigned int)':\nmain.cpp:(.text._ZN5boost11basic_regexIcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE6assignEPKcS7_j[_ZN5boost11basic_regexIcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE6assignEPKcS7_j]+0x2a): undefined reference to `boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::do_assign(char const*, char const*, unsigned int)'\n/tmp/cc9cP6LZ.o: In function `boost::re_detail_106700::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::perl_matcher(__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, boost::match_results&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt; &gt;&amp;, boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;)':\nmain.cpp:(.text._ZN5boost16re_detail_10670012perl_matcherIN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESaINS_9sub_matchISC_EEENS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEC2ESC_SC_RNS_13match_resultsISC_SF_EERKNS_11basic_regexIcSJ_EENS_15regex_constants12_match_flagsESC_[_ZN5boost16re_detail_10670012perl_matcherIN9__gnu_cxx17__normal_iteratorIPKcNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEESaINS_9sub_matchISC_EEENS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEEC5ESC_SC_RNS_13match_resultsISC_SF_EERKNS_11basic_regexIcSJ_EENS_15regex_constants12_match_flagsESC_]+0x124): undefined reference to `boost::re_detail_106700::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::construct_init(boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 2, "creation_date": 1530120901, "post_id": 51068500, "comment_id": 89126870, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c-or-c\">Single quotes vs. double quotes in C or C++</a>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1530120955, "post_id": 51068500, "comment_id": 89126898, "body": "Sidenote: this is actually undefined behavior--you need a <a href=\"https://softwareengineering.stackexchange.com/questions/181505/what-is-a-null-terminated-string\">terminating null character</a>!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1530121065, "post_id": 51068500, "comment_id": 89126941, "body": "Unlike some languages, in C and C++ there&#39;s a <i>huge difference</i> between <code>&#39;a&#39;</code> and <code>&quot;a&quot;</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1530124926, "post_id": 51068500, "comment_id": 89128822, "body": "Worthwhile warning, but disagree with UB. Asker is not using the array as a string and doesn&#39;t need the nul terminator in their example."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1530125000, "post_id": 51068500, "comment_id": 89128853, "body": "@scohe001 Which terminating null are you referring to?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1530125458, "post_id": 51068500, "comment_id": 89129073, "body": "If I was new to C++, I would start by trying <code>std::string s = &quot;Hello&quot;;</code>. C style arrays are difficult, <i>especially</i> <code>char</code> arrays. Save that for later."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1530134500, "post_id": 51068500, "comment_id": 89132930, "body": "@KillzoneKid C-strings must be null-terminated. In the first example if he tries to pass <code>arr</code> to a function and it decays to a pointer, he&#39;s going to be in trouble."}], "answers": [{"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 0, "last_activity_date": 1530126177, "last_edit_date": 1530126177, "creation_date": 1530125814, "answer_id": 51069702, "question_id": 51068500, "link": "https://stackoverflow.com/questions/51068500/const-char-vs-char-for-array-single-and-double-quotation-in-c/51069702#51069702", "title": "const char* vs char for array (single and double quotation) in c++", "body": "<blockquote>\n  <p>But if i use \"\" for char array or '' for const char* array it doesn't\n  work</p>\n</blockquote>\n\n<p>In the first example you create an array of 4 <code>chars</code> - <code>char arr[4];</code> This means that every element of <code>arr</code> is a <code>char</code>. <code>'H'</code> is a <code>char</code>, <code>'e'</code> is a <code>char</code>, etc. So when you assign a <code>char</code> to array element that is a <code>char</code>, it works.</p>\n\n<p>In your second example you create array of 4 pointers to <code>const char</code> - <code>const char* arr[4];</code> This means every element of your array is a pointer, and it points to <code>char</code> which you promise not to change. <code>\"H\"</code> is a string literal, which is an array of 2 - a <code>char</code> <code>'H'</code> and a terminating null <code>'\\0'</code>. This array decays into a pointer to its first element, which is <code>'H'</code> - a <code>const char</code> (same for the rest of letters). Your array is array of pointers to <code>const char</code>, you assign pointer to <code>const char</code>, so it works.</p>\n\n<p>If you swap <code>''</code> with <code>\"\"</code> it will not work because the types of array elements will not match with data you will be assigning.</p>\n"}], "owner": {"reputation": 29, "user_id": 9457432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xiwPL.jpg?s=128&g=1", "display_name": "Hemant Kumar Chodipilli", "link": "https://stackoverflow.com/users/9457432/hemant-kumar-chodipilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 51069702, "answer_count": 1, "score": -1, "last_activity_date": 1530130935, "creation_date": 1530120815, "last_edit_date": 1530130935, "question_id": 51068500, "link": "https://stackoverflow.com/questions/51068500/const-char-vs-char-for-array-single-and-double-quotation-in-c", "title": "const char* vs char for array (single and double quotation) in c++", "body": "<p>I am new to C++</p>\n\n<p>1)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    char arr[4];\n    arr[0] = 'H';\n    arr[1] = 'e';\n    arr[2] = 'l';\n    arr[3] = 'o';\n    for (int i = 0; i &lt; 4; i++) {\n        cout &lt;&lt; arr[i] &lt;&lt; endl;\n    }\n    system(\"pause\");\n\n}\n</code></pre>\n\n<p>2)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    const char* arr[4];\n    arr[0] = \"H\";\n    arr[1] = \"e\";\n    arr[2] = \"l\";\n    arr[3] = \"o\";\n    for (int i = 0; i &lt; 4; i++) {\n        cout &lt;&lt; arr[i] &lt;&lt; endl;\n    }\n    system(\"pause\");\n}\n</code></pre>\n\n<p>If I use <code>\"\"</code> for <code>char[]</code> array, or <code>''</code> for <code>const char*[]</code> array, it doesn't work.</p>\n\n<p>Could somebody help me figure out the difference why it happens, and explain what <code>const char*</code> actually means.</p>\n"}, {"tags": ["c++", "vector", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1530124403, "post_id": 51068485, "comment_id": 89128567, "body": "there are a number of defects in this code.  However, for the specific error you have identified, it&#39;s not possible to directly use a managed allocator with <code>std::vector</code>.  Instead, a straightforward approach would be to use a C-style array to store your data.  As a side note, you won&#39;t be able to use <code>std::vector</code> in kernel code either."}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": false, "score": 2, "last_activity_date": 1536609091, "last_edit_date": 1536609091, "creation_date": 1530205566, "answer_id": 51088213, "question_id": 51068485, "link": "https://stackoverflow.com/questions/51068485/cudamallocmanaged-with-vectorcomplexlong-double-c-nvidia-cuda/51088213#51088213", "title": "cudaMallocManaged with vector&lt;complex&lt;long double&gt; &gt; C++ - NVIDIA CUDA", "body": "<p>It isn't possible to do what you are trying to do. </p>\n\n<p>To allocate a vector using managed memory you would have to write your own implementation of an allocator which inherits from <a href=\"https://en.cppreference.com/w/cpp/memory/allocator_traits\" rel=\"nofollow noreferrer\"><code>std::allocator_traits</code></a> and calls <code>cudaMallocManaged</code> under the hood. You can then instantiate a <code>std::vector</code> using your allocator class.</p>\n\n<p>Also note that your CUDA kernel code is broken in that you can't use <code>std::vector</code> in device code.</p>\n\n<p>Note that although the question has managed memory in view, this is applicable to other types of CUDA allocation such as pinned allocation.</p>\n\n<p>As another alternative, suggested <a href=\"https://stackoverflow.com/questions/12453691/how-to-make-vector-type-value-to-pinned-memory-in-cuda\">here</a>, you could consider using a thrust host vector in lieu of <code>std::vector</code> and use a custom allocator with it.  A worked example is <a href=\"https://stackoverflow.com/questions/25064383/how-to-asynchronously-copy-memory-from-the-host-to-the-device-using-thrust-and-c/25068346#25068346\">here</a> in the case of pinned allocator (<code>cudaMallocHost</code>/<code>cudaHostAlloc</code>).</p>\n"}], "owner": {"reputation": 1, "user_id": 10001297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445a3d05621d882796899dbe513e07e?s=128&d=identicon&r=PG&f=1", "display_name": "milk", "link": "https://stackoverflow.com/users/10001297/milk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536609091, "creation_date": 1530120738, "last_edit_date": 1530176746, "question_id": 51068485, "link": "https://stackoverflow.com/questions/51068485/cudamallocmanaged-with-vectorcomplexlong-double-c-nvidia-cuda", "title": "cudaMallocManaged with vector&lt;complex&lt;long double&gt; &gt; C++ - NVIDIA CUDA", "body": "<p>I am in the process of implementing multithreading through a NVIDIA GeForce GT 650M GPU for a simulation I have created. In order to make sure everything works properly, I have created some side code to test that everything works. At one point I need to update a vector of variables (they can all be updated separately). </p>\n\n<p>Here is the gist of it:</p>\n\n<pre><code>`\\__device__\nint doComplexMath(float x, float y)\n{\n    return x+y;\n}`\n\n`// Kernel function to add the elements of two arrays\n__global__\nvoid add(int n, float *x, float *y, vector&lt;complex&lt;long double&gt; &gt; *z)\n{\n    int index = blockIdx.x * blockDim.x + threadIdx.x;\n    int stride = blockDim.x * gridDim.x;\n    for (int i = index; i &lt; n; i += stride)\n        z[i] = doComplexMath(*x, *y);\n}`\n\n`int main(void)\n{\n    int iGAMAf = 1&lt;&lt;10;\n    float *x, *y;\n    vector&lt;complex&lt;long double&gt; &gt; VEL(iGAMAf,zero);\n    // Allocate Unified Memory \u2013 accessible from CPU or GPU\n    cudaMallocManaged(&amp;x, sizeof(float));\n    cudaMallocManaged(&amp;y, sizeof(float));\n    cudaMallocManaged(&amp;VEL, iGAMAf*sizeof(vector&lt;complex&lt;long double&gt; &gt;));\n    // initialize x and y on the host\n    *x = 1.0f;\n    *y = 2.0f;\n    // Run kernel on 1M elements on the GPU\n    int blockSize = 256;\n    int numBlocks = (iGAMAf + blockSize - 1) / blockSize;\n    add&lt;&lt;&lt;numBlocks, blockSize&gt;&gt;&gt;(iGAMAf, x, y, *VEL);\n    // Wait for GPU to finish before accessing on host\n    cudaDeviceSynchronize();\n    return 0;\n}`\n</code></pre>\n\n<p>I am trying to allocate unified memory (memory accessible from the GPU and CPU). When compiling using nvcc, I get the following error:</p>\n\n<p>error: no instance of overloaded function \"cudaMallocManaged\" matches the argument list\n            argument types are: (std::__1::vector, std::__1::allocator>> *, unsigned long)</p>\n\n<p>How can I overload the function properly in CUDA to use this type with multithreading?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1530121012, "post_id": 51068471, "comment_id": 89126921, "body": "See <a href=\"https://en.cppreference.com/w/cpp/language/template_parameters#Default_template_arguments\" rel=\"nofollow noreferrer\">default template argument</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1530120928, "creation_date": 1530120928, "answer_id": 51068523, "question_id": 51068471, "link": "https://stackoverflow.com/questions/51068471/template-class-tp-class-alloc-stl-default-allocator-tp-what-mean/51068523#51068523", "title": "&quot;template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;&quot; what = means?", "body": "<p><code>class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp)</code> means that the template accepts a parameter <code>_Alloc</code> , and if you don't supply one then the default <code>__STL_DEFAULT_ALLOCATOR(_Tp)</code> will be used.</p>\n\n<p>The <code>=</code> means \"use by default\".</p>\n"}, {"tags": [], "owner": {"reputation": 3936, "user_id": 7571171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zfVoB.png?s=128&g=1", "display_name": "Thomas Flinkow", "link": "https://stackoverflow.com/users/7571171/thomas-flinkow"}, "is_accepted": true, "score": 2, "last_activity_date": 1530121344, "last_edit_date": 1530121344, "creation_date": 1530121009, "answer_id": 51068545, "question_id": 51068471, "link": "https://stackoverflow.com/questions/51068471/template-class-tp-class-alloc-stl-default-allocator-tp-what-mean/51068545#51068545", "title": "&quot;template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;&quot; what = means?", "body": "<p>The <code>=</code> indicates a default template argument.</p>\n\n<p>e.g.</p>\n\n<pre><code>template &lt;class Foo = std::string&gt;\nclass Bar\n</code></pre>\n\n<p>means \"use <code>std::string</code> if no argument is supplied. You could use <code>Bar</code> like this:</p>\n\n<pre><code>Bar b;\n</code></pre>\n\n<p>which would be equal to</p>\n\n<pre><code>Bar&lt;std::string&gt; b;\n</code></pre>\n\n<hr>\n\n<p>In your case,</p>\n\n<pre><code>template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;\nclass vector\n</code></pre>\n\n<p>means </p>\n\n<blockquote>\n  <p>by default, use <code>__STL_DEFAULT_ALLOCATOR(_TP)</code> if nothing else is specified</p>\n</blockquote>\n\n<p>allowing you to write</p>\n\n<pre><code>vector&lt;int&gt; v;\n</code></pre>\n\n<p>instead of having to write</p>\n\n<pre><code>vector&lt;int, __STL_DEFAULT_ALLOCATOR(int)&gt; v;\n</code></pre>\n\n<p>which would be <em>way more</em> verbose.</p>\n\n<hr>\n\n<p>See <a href=\"https://stackoverflow.com/a/13566409/7571171\">this answer</a> for more details.</p>\n"}], "owner": {"reputation": 33, "user_id": 9183372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R3Nrl.png?s=128&g=1", "display_name": "hello_chenchen", "link": "https://stackoverflow.com/users/9183372/hello-chenchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "closed_date": 1530121516, "accepted_answer_id": 51068545, "answer_count": 2, "score": -1, "last_activity_date": 1530121344, "creation_date": 1530120689, "last_edit_date": 1530120859, "question_id": 51068471, "link": "https://stackoverflow.com/questions/51068471/template-class-tp-class-alloc-stl-default-allocator-tp-what-mean", "closed_reason": "Duplicate", "title": "&quot;template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;&quot; what = means?", "body": "<p>when i see stl source code, i see some code,i couldn't understand?</p>\n\n<pre><code>template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;\nclass vector : protected _Vector_base&lt;_Tp, _Alloc&gt; \n{\n  // requirements:\n\n  __STL_CLASS_REQUIRES(_Tp, _Assignable);\n  ....\n}\n</code></pre>\n\n<p>so, the question is what <code>=</code> means in <code>template &lt;class _Tp, class _Alloc = __STL_DEFAULT_ALLOCATOR(_Tp) &gt;</code>?</p>\n\n<p>can i understand <code>=</code> just like using keywords:</p>\n\n<pre><code>using _Alloc = class __STL_DEFAULT_ALLOCATOR(_Tp)\n</code></pre>\n"}, {"tags": ["c++", "c", "sdl"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1530119941, "post_id": 51068270, "comment_id": 89126374, "body": "That&#39;s a namespace, <code>::</code> being the scope operator."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 9, "creation_date": 1530119956, "post_id": 51068270, "comment_id": 89126382, "body": "C and C++ are different programming languages (and much more different than their apparent similarity). If you don&#39;t want to learn C++ (which is a reasonable decision) don&#39;t try to read or use C++ code. There is no equivalent in C or C++ scope operator."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1530120006, "post_id": 51068270, "comment_id": 89126413, "body": ":: is scope resolution.  NameSpaces or Classes use these to remove ambiguity and to help hide names.  Honestly, a 1 second google of this would explain it.  the .c_str() call is converting a standard c++ string into a C string of which you are familiar.  Again, a quick google explains.  In todays world, not learning C++ at all is going to be a serious handicap - even in embedded land.  You should do yourself a favor and at least become familiar with it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1530120030, "post_id": 51068270, "comment_id": 89126426, "body": "Scope resolution operator. Consider learning C++ from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> instead of a random tutorial."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120099, "post_id": 51068270, "comment_id": 89126452, "body": "@MichaelDorgan A 1 second google wouldn&#39;t explain namespaces, classes and member functions to someone who has never used a language providing those features."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120147, "post_id": 51068270, "comment_id": 89126481, "body": "First google: <a href=\"https://www.geeksforgeeks.org/scope-resolution-operator-in-c/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/scope-resolution-operator-in-c</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120187, "post_id": 51068270, "comment_id": 89126505, "body": "@MichaelDorgan Now put yourself in the position of someone who has never used C++. That link is not useful."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1530120326, "post_id": 51068270, "comment_id": 89126573, "body": "I appreciate where you are coming from.  I was forced to learn C++ kicking and screaming from C as well.  I would say even before I knew anything about C++, I could read the first sentence in that link and see what <code>::</code> does.  <code>.c_str()</code>  would require some more knowledge though.  I do remember wondering why the hell people were putting functions inside of structures. :)"}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "edited": false, "score": 0, "creation_date": 1530120616, "post_id": 51068270, "comment_id": 89126729, "body": "I will be studying C++ next year but for my first year at university, C is where I&#39;m at. I don&#39;t need a direct equivalent, but if any of you know SDL as well, just a different way of doing this would be helpful. My lecturer told me I don&#39;t need to know C++ to follow this tutorial so there should be some uncomplicated way around it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 0, "creation_date": 1530120762, "post_id": 51068270, "comment_id": 89126802, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9338217/why-does-c-need-the-scope-resolution-operator\">Why does C++ need the scope resolution operator?</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1530120918, "post_id": 51068270, "comment_id": 89126880, "body": "In C, to achieve similar (but by very different means, and many nuanced differences), I&#39;ve seen developers use a &quot;prefix-with-underscore&quot; approach.  For example, if I came out with the Next Big Thing library, I may have a <code>NBT_string</code> where the &quot;NBT_&quot; prefix would help to prevent collisions with your <code>RR_string</code>.  SDL itself used &quot;SDL_&quot; prefix."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1530121760, "post_id": 51068270, "comment_id": 89127277, "body": "Your lecturer says you don&#39;t need to know C++ to learn C, and Kate Gregory says you don&#39;t need to know C to learn C++ in her <a href=\"https://www.youtube.com/watch?v=YnWhqhNdYyk\" rel=\"nofollow noreferrer\">lecture</a>."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1530165479, "post_id": 51068270, "comment_id": 89140207, "body": "@RichardRobertson your question is already answered, but if you&#39;ll try to directly use said tutorials in C, things will explode in most unexpected ways, so don&#39;t be surprised. Quesion about <code>close</code> function in lazyfoo tutorials pops every now and then - it just not written with possible C collisions in mind, and beginners rarely have a grasp to see potential quirks."}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1530816213, "post_id": 51068270, "comment_id": 89377706, "body": "@Keltar You&#39;re completely right. I encountered the &#39;close&#39; issue as well. Simple enough just to change the name though. However from what I can tell, the lazyfoo tutorials are still the best free online SDL resource for C students. I&#39;d kill for something this good writted in pure C."}], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 8578679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CeZ5Z.png?s=128&g=1", "display_name": "Ruifeng Xie", "link": "https://stackoverflow.com/users/8578679/ruifeng-xie"}, "is_accepted": false, "score": 1, "last_activity_date": 1530120303, "creation_date": 1530120303, "answer_id": 51068379, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons/51068379#51068379", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>Nothing to do with the <code>::</code> here. The <code>std::string</code> as a whole simply refers to a string, which might be expressed in C as a <code>const char *</code>(or <code>char *</code> maybe, for I guess C programmers do not care about the constness of variables). <code>path.c_str()</code> just means to get a <code>const char *</code> from the <code>std::string</code> variable <code>path</code>, so you can safely ignore it. </p>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120433, "post_id": 51068389, "comment_id": 89126622, "body": "And I give you credit as this exactly answers the question while avoiding the C++.  Nice answer."}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "edited": false, "score": 0, "creation_date": 1530818460, "post_id": 51068389, "comment_id": 89378756, "body": "@hvd That&#39;s perfect. Thank you so much."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 9, "last_activity_date": 1530120322, "creation_date": 1530120322, "answer_id": 51068389, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons/51068389#51068389", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>In C, <code>loadSurface</code> would be declared as simply</p>\n\n<pre><code>SDL_Surface *loadSurface(const char *path)\n</code></pre>\n\n<p>which means the call to <code>SDL_LoadBMP</code> can be written as</p>\n\n<pre><code>SDL_Surface *loadedSurface = SDL_LoadBMP(path);\n</code></pre>\n\n<p>The details of what <code>std::string</code> does and why <code>.c_str()</code> is needed are not relevant if you are not interested in learning C++, and in this case are not relevant to the tutorial either.</p>\n"}], "owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 51068389, "answer_count": 2, "score": -8, "last_activity_date": 1530131026, "creation_date": 1530119839, "last_edit_date": 1530131026, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>I'm studying C and know nothing about C++. LazyFoo's SDL2 tutorial that uses C++ does a thing with double colons that I don't understand and thus cannot follow in C. </p>\n\n<p>If it helps, here's the link to the tutorial:</p>\n\n<p><a href=\"http://lazyfoo.net/tutorials/SDL/04_key_presses/index.php\" rel=\"nofollow noreferrer\">http://lazyfoo.net/tutorials/SDL/04_key_presses/index.php</a></p>\n\n<pre><code>SDL_Surface *loadSurface( std::string path )\n{\n    //Load image at specified path\n    SDL_Surface *loadedSurface = SDL_LoadBMP( path.c_str());\n    if( loadedSurface == NULL )\n    {\n        printf(\"Unable to load image %s! SDL Error: %s\\n\", path.c_str(), SDL_GetError());\n    }\n\n    return loadedSurface:\n}\n</code></pre>\n\n<p>Everything here makes sense to me except the function parameters and LoadBMP parameters. I don't know what the <code>::</code> means, and I don't know what <code>path.c_str()</code> is referring to.</p>\n\n<p>Please, could someone explain it in a way that makes sense in C, or suggest a C-only workaround?</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1530119855, "post_id": 51068230, "comment_id": 89126334, "body": "That reinterpret cast will certainly not work. You need to make a new vector of the appropriate type in your function and return that. The compiler <i>does</i> recognize the relationship between <code>IElement</code> and <code>CConcreteElement</code>, but there is no relationship between <code>std::vector&lt;IElement*&gt;</code> and <code>std::vector&lt;CConcreteElement*&gt;</code> to recognize. Is there a particular reason you return a <code>const</code> value?"}, {"owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1530119908, "post_id": 51068230, "comment_id": 89126359, "body": "Yes, the <code>elements</code> method is supposed to give <code>const</code> access to the elements. Not a copy."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1530119999, "post_id": 51068230, "comment_id": 89126406, "body": "You are returning a value, so the result gets copied anyway. And your vector contains non-<code>const</code> pointers, so it doesn&#39;t protect against modifying the pointed elements. <code>const</code> doesn&#39;t offer any protection here but may disable move semantics for your vector and perhaps other optimizations."}, {"owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1530120061, "post_id": 51068230, "comment_id": 89126434, "body": "Oops, I forgot the reference. I updated the question."}, {"owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1530120136, "post_id": 51068230, "comment_id": 89126474, "body": "It&#39;s true that the inner <code>IElements</code> are non-const, but that&#39;s a minor problem here."}], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "edited": false, "score": 0, "creation_date": 1530122616, "post_id": 51068905, "comment_id": 89127705, "body": "Yes, I thought of that. It&#39;s kind of a workaround. If I need more of the things provided by std:vector, I&#39;ll have to write lots of those accessors..."}, {"owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "edited": false, "score": 0, "creation_date": 1530122766, "post_id": 51068905, "comment_id": 89127778, "body": "What do you think of <code>return *(const std::vector&lt;IElement *&gt; *)&amp;m_vecElements;</code>? Since pointers are always the same size, couldn&#39;t this work?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "edited": false, "score": 1, "creation_date": 1530123077, "post_id": 51068905, "comment_id": 89127923, "body": "@digorydoo, this <b>might</b> work but strictly speaking it&#39;s undefined behavior because you are casting between unrelated types."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 2, "last_activity_date": 1530122492, "creation_date": 1530122492, "answer_id": 51068905, "question_id": 51068230, "link": "https://stackoverflow.com/questions/51068230/incompatible-template-instances/51068905#51068905", "title": "Incompatible template instances", "body": "<p>You cannot perform this cast because <code>std::vector</code> is <strong>invariant</strong> on its element type which means that there's no relation (in the inheritance sense) between different vectors even if their elements are related. For more information about type variance please see <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p>The short answer is that you cannot do this exact thing with <code>std::vector</code> but you can do this by providing an <strong>element getter</strong> instead of <strong>all elements getter</strong>:</p>\n\n<pre><code>class IContainer\n{\npublic:\n    virtual ~IContainer() {}\n    virtual const IElement *element(size_t index) const = 0;\n};\n\nclass CConcreteContainer: public IContainer\n{\nprivate:\n    std::vector&lt;CConcreteElement *&gt; m_vecElements;\n\npublic:\n    virtual ~CConcreteContainer() {}\n    virtual const CConcreteElement *element(size_t index) const override\n    {\n        return m_vecElements[index];\n    }\n};\n</code></pre>\n\n<p>Note that return type of the overriding method is <strong>different</strong> from the base method. This is possible because C++ supports covariant return types.</p>\n"}], "owner": {"reputation": 1378, "user_id": 1823332, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rTbPP.jpg?s=128&g=1", "display_name": "digory doo", "link": "https://stackoverflow.com/users/1823332/digory-doo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51068905, "answer_count": 1, "score": 0, "last_activity_date": 1530122492, "creation_date": 1530119690, "last_edit_date": 1530120579, "question_id": 51068230, "link": "https://stackoverflow.com/questions/51068230/incompatible-template-instances", "title": "Incompatible template instances", "body": "<p>I have two interfaces:</p>\n\n<pre><code>class IElement\n{\n    public:\n    virtual ~IElement() {}\n};\nclass IContainer\n{\n    public:\n    virtual ~IContainer() {}\n    virtual const std::vector&lt;IElement *&gt; &amp;elements() const = 0;\n};\n</code></pre>\n\n<p>The member <code>elements</code> of <code>IContainer</code> is supposed to return a vector of pointers to <code>IElement</code>.</p>\n\n<p>Then I have two concrete implementations:</p>\n\n<pre><code>class CConcreteElement: public IElement\n{\n    public:\n    virtual ~CConcreteElement() {}\n    void doSomething() { /* ... */ }\n};\nclass CConcreteContainer: public IContainer\n{\n    private:\n    std::vector&lt;CConcreteElement *&gt; m_vecElements;\n\n    public:\n    virtual ~CConcreteContainer() {}\n    virtual const std::vector&lt;IElement *&gt; &amp;elements() const override\n        { return m_vecElements; }  // PROBLEM HERE\n    void doSomething()\n    {\n        for (CConcreteElement *pE : m_vecElements)\n        {\n            pE-&gt;doSomething();\n        }\n    }\n};\n</code></pre>\n\n<p>The above does not compile, because <code>m_vecElements</code> has the type <code>const std::vector&lt;CConcreteElement *&gt;</code> while the return value is supposed to have the type <code>const std::vector&lt;IElement *&gt;</code>. Apparently, C++ does not realize the types <code>IElement</code> and <code>CConcreteElement</code> are related when they appear as a template argument.</p>\n\n<p>I also tried:</p>\n\n<pre><code>return static_cast&lt;const std::vector&lt;IElement *&gt;&gt;(m_vecElements);\n</code></pre>\n\n<p>But this doesn't compile either. Any ideas how I could get this to work?</p>\n"}, {"tags": ["c++", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530126833, "post_id": 51067953, "comment_id": 89129723, "body": "What operation are you trying to accomplish with <code>centered.rowwise()&#47;std_</code>? As far as I know, mathematics does not have a standard way to divide one matrix by another, so I don&#39;t see what the intent is."}, {"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530127134, "post_id": 51067953, "comment_id": 89129879, "body": "As I had explained above, I&#39;m trying to simply normalize the data(i.e. zero mean and unit standard deviation).  <code>Xnorm = (X - np.mean(X, axis=0))&#47;(np.std(X, axis=0))</code> is the equivalent numpy operation."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530127685, "post_id": 51067953, "comment_id": 89130088, "body": "No, you did not explain that above. You just said that this is &quot;a function&quot; in the main normalization step, but you neglected to say what this particular &quot;Transform&quot; is supposed to accomplish within that step. (Please make that clearer if you wish.) Anyway, the normalizations that I am familiar with involve multiplication/division by a scalar, not a vector, so I&#39;ll leave this for people who understand what you&#39;re talking about."}, {"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1530128174, "post_id": 51067953, "comment_id": 89130296, "body": "Sure, I&#39;ve added the description in the question. Thanks for your suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 5, "last_activity_date": 1530136062, "creation_date": 1530136062, "answer_id": 51071893, "question_id": 51067953, "link": "https://stackoverflow.com/questions/51067953/eigen-matrix-vector-division/51071893#51071893", "title": "Eigen Matrix Vector Division", "body": "<p>The the question:</p>\n\n<blockquote>\n  <p>how exactly do I do something like <code>centered.rowwise().array()</code></p>\n</blockquote>\n\n<p>the answer is as simple as:</p>\n\n<pre><code>centered.array().rowwise()\n</code></pre>\n\n<p>You should thus write the division as:</p>\n\n<pre><code>return centered.array().rowwise() / std_.array();\n</code></pre>\n\n<p>BTW, there is also an error in the definition of <code>vector_eig</code>. If you want a row vector, then it's:</p>\n\n<pre><code>typedef Eigen::Matrix&lt;float, 1, Eigen::Dynamic&gt; vector_eig;\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>typedef Eigen::RowVectorXf vector_eig;\n</code></pre>\n"}], "owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2454, "favorite_count": 1, "accepted_answer_id": 51071893, "answer_count": 1, "score": 1, "last_activity_date": 1530136062, "creation_date": 1530118549, "last_edit_date": 1530130079, "question_id": 51067953, "link": "https://stackoverflow.com/questions/51067953/eigen-matrix-vector-division", "title": "Eigen Matrix Vector Division", "body": "<p>I'm trying to implement a Normalizer within Eigen. </p>\n\n<p>The functionality it tries to achieve is as follows:</p>\n\n<p><code>Xnorm = (X - np.mean(X, axis=0))/(np.std(X, axis=0))</code>(equivalent numpy)</p>\n\n<p>In the main normalization step I have a function as follows:</p>\n\n<pre><code>typedef Eigen::Matrix&lt;float, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor&gt;\n    matrix_eig;\ntypedef Eigen::Matrix&lt;float, Eigen::Dynamic, Eigen::RowMajor&gt; vector_eig;\n\nmatrix_eig Normalizer::Transform(const matrix_eig &amp;X) {\n  // mean_ and std_ are vector_eig types\n  matrix_eig centered = X.rowwise() - mean_.transpose();\n  // Below line doesnt work since '/' is not allowed for matrices\n  return centered.rowwise()/std_;\n}\n</code></pre>\n\n<p>My question is how exactly do I do something like <code>centered.rowwise().array()</code>?</p>\n"}, {"tags": ["c++", "c++17", "string-literals", "string-view"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1530119403, "post_id": 51067817, "comment_id": 89126135, "body": "Did you mean <code>static auto constexpr something1</code>?"}, {"owner": {"reputation": 3273, "user_id": 242552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08141339adc3cd0402b4f1fca059dda1?s=128&d=identicon&r=PG", "display_name": "leecbaker", "link": "https://stackoverflow.com/users/242552/leecbaker"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1530120155, "post_id": 51067817, "comment_id": 89126486, "body": "@MaximEgorushkin I accidentally left out the type, <code>std::string_view</code>. Fixed"}], "answers": [{"comments": [{"owner": {"reputation": 662, "user_id": 1984766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff111893f024a88150673280c824c24?s=128&d=identicon&r=PG", "display_name": "Xatian", "link": "https://stackoverflow.com/users/1984766/xatian"}, "edited": false, "score": 0, "creation_date": 1586414871, "post_id": 51068752, "comment_id": 108120108, "body": "The first imposed solution is wrong. <code>sv(&quot;Alice&quot;)</code> still invokes the &quot;const char*&quot; constructor effectively forcing a strlen-call on the parameter --&gt; defeating the purpose of the literal. <code>std::string_view (&quot;alice\\0foo&quot;).length (); &#47;&#47;--&gt; 5</code> <code>&quot;alice\\0foo&quot;sv.length (); &#47;&#47; --&gt; 9</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 662, "user_id": 1984766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff111893f024a88150673280c824c24?s=128&d=identicon&r=PG", "display_name": "Xatian", "link": "https://stackoverflow.com/users/1984766/xatian"}, "edited": false, "score": 0, "creation_date": 1586438557, "post_id": 51068752, "comment_id": 108132048, "body": "@Xatian Is OP using string literals with embedded nulls? Otherwise, it doesn&#39;t defeat the purpose of the literal..."}, {"owner": {"reputation": 662, "user_id": 1984766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff111893f024a88150673280c824c24?s=128&d=identicon&r=PG", "display_name": "Xatian", "link": "https://stackoverflow.com/users/1984766/xatian"}, "edited": false, "score": 0, "creation_date": 1586440494, "post_id": 51068752, "comment_id": 108133118, "body": "what is the purpose of a literal if it is not to avoid constructing the object? (in this case const char* to string_view). please explain..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 662, "user_id": 1984766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff111893f024a88150673280c824c24?s=128&d=identicon&r=PG", "display_name": "Xatian", "link": "https://stackoverflow.com/users/1984766/xatian"}, "edited": false, "score": 0, "creation_date": 1586440794, "post_id": 51068752, "comment_id": 108133279, "body": "@Xatian There&#39;s no cost to constructing any objects here - it happens at compile time. And even if the <code>string_view</code>s themselves weren&#39;t <code>constexpr</code>, the compiler would certainly optimize the strlen calls - since it knows what&#39;s going on."}, {"owner": {"reputation": 662, "user_id": 1984766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff111893f024a88150673280c824c24?s=128&d=identicon&r=PG", "display_name": "Xatian", "link": "https://stackoverflow.com/users/1984766/xatian"}, "edited": false, "score": 0, "creation_date": 1586527317, "post_id": 51068752, "comment_id": 108165728, "body": "You are right. I found no way to init a (none <code>constexpr</code>) string_view where a none-ancient compiler doesn&#39;t remove the strlen-call. But still --&gt; It should be stated in the answer that you expect the compiler to help you out since that would add to the understanding of what is going on. Therefore I think my comment is still fine :-) Thank you!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 9, "last_activity_date": 1530121829, "creation_date": 1530121829, "answer_id": 51068752, "question_id": 51067817, "link": "https://stackoverflow.com/questions/51067817/string-view-literals-in-header-file/51068752#51068752", "title": "String view literals in header file", "body": "<p>This is pretty short and doesn't pollute anything:</p>\n\n<pre><code>class T {\n    using sv = std::string_view;\n    static constexpr auto something1 = sv(\"Alice\");\n    static constexpr auto something2 = sv(\"Bob\");\n    static constexpr auto something3 = sv(\"Charlie\");\n};\n</code></pre>\n\n<p>If you really want to use the literal, you could wrap your class in another not-intended-to-be-named <code>namespace</code> and then bring it back into the outer namespace:</p>\n\n<pre><code>namespace _private {\n    using namespace std::string_view_literals;\n\n    class T {\n        static constexpr auto something1 = \"Alice\"sv;\n        static constexpr auto something2 = \"Bob\"sv;\n        static constexpr auto something3 = \"Charlie\"sv;\n    };\n}\n\nusing _private::T;\n</code></pre>\n\n<hr />\n\n<p>Note that writing <code>static constexpr const</code> is redundant. <code>constexpr</code> variables are implicitly <code>const</code>.</p>\n"}], "owner": {"reputation": 3273, "user_id": 242552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08141339adc3cd0402b4f1fca059dda1?s=128&d=identicon&r=PG", "display_name": "leecbaker", "link": "https://stackoverflow.com/users/242552/leecbaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2580, "favorite_count": 3, "accepted_answer_id": 51068752, "answer_count": 1, "score": 5, "last_activity_date": 1530121834, "creation_date": 1530117990, "last_edit_date": 1592644375, "question_id": 51067817, "link": "https://stackoverflow.com/questions/51067817/string-view-literals-in-header-file", "title": "String view literals in header file", "body": "<p>I've got a class that has a bunch of constant strings, in the form of:</p>\n<pre><code>using namespace std::string_view_literals;\nclass T {\n  static const constexpr std::string_view something1 = &quot;Alice&quot;sv;\n  static const constexpr std::string_view something2 = &quot;Bob&quot;sv;\n  static const constexpr std::string_view something3 = &quot;Charlie&quot;sv;\n\n  ...\n};\n</code></pre>\n<p>I'm currently <code>using</code> the <code>string_view_literals</code> namespace, but this isn't good practice in a header file, and generates warnings:</p>\n<p><code>Using namespace directive in global context in header [-Wheader-hygiene]</code> (clang)</p>\n<p><code>literal operator suffixes not preceded by '_' are reserved for future standardization [-Wliteral-suffix]</code> (gcc7)</p>\n<p>I'd like to look at other options.</p>\n<ol>\n<li><p>Ignore the warnings</p>\n</li>\n<li><p>Directly import the one literal I'm using, instead of the whole namespace</p>\n<p><code>using std::string_view_literals::operator&quot;&quot;sv</code></p>\n</li>\n<li><p>Since this is a constexpr constant, perhaps I should just call the constructor directly, knowing it has no runtime memory or CPU overhead:</p>\n<p><code>static const constexpr something1 = std::string_view(&quot;Alice&quot;);</code></p>\n</li>\n<li><p>Something else?</p>\n</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530116844, "post_id": 51067408, "comment_id": 89124880, "body": "Why are you asking? What is the actual problem you have? Or it it just curiosity? Did you see something like that in some other code? And what do <i>you</i> think some possibly disadvantages could be?"}], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 9848932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a484cace64c76f71d3bb1fab9410761?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/9848932/jdc"}, "is_accepted": false, "score": -2, "last_activity_date": 1530139283, "last_edit_date": 1530139283, "creation_date": 1530117365, "answer_id": 51067651, "question_id": 51067408, "link": "https://stackoverflow.com/questions/51067408/what-are-the-disadvantages-of-define-a-field-in-class-as-a-reference/51067651#51067651", "title": "What are the disadvantages of define a field (in class) as a reference?", "body": "<p>Let's look at an example that shows a disadvantage of having references as members of a class:</p>\n\n<pre><code>template &lt;typename T&gt;\nA&lt;T&gt;::A(T &amp; obj) : x(obj) {} // constructor (this would probably go in the header)\n\nint main(void) {\n    int * num = new int;\n    *num = 42;\n    A&lt;int&gt; a(*num); // a.x references *num\n    delete num; // uh-oh, *num is no longer valid and a.x cannot rebind\n    return 0;\n}\n</code></pre>\n\n<p>Of course, if the member variable was declared <code>T x;</code>, then <code>x</code> would be another instance of <code>T</code> capable of storing a copy the data of <code>*num</code> even after <code>num</code> is deleted.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1530117983, "post_id": 51067757, "comment_id": 89125445, "body": "I think you mean &quot;does not&quot;."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1530118007, "post_id": 51067757, "comment_id": 89125457, "body": "@NeilButterworth Well spotted."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": -1, "last_activity_date": 1530118001, "last_edit_date": 1530118001, "creation_date": 1530117789, "answer_id": 51067757, "question_id": 51067408, "link": "https://stackoverflow.com/questions/51067408/what-are-the-disadvantages-of-define-a-field-in-class-as-a-reference/51067757#51067757", "title": "What are the disadvantages of define a field (in class) as a reference?", "body": "<p>A reference member (silently) breaks value semantics because assigning to a reference does not re-points the reference. Some people avoid using reference members for this reason.</p>\n\n<p>E.g.</p>\n\n<pre><code>int a = 1, b = 2;\nint&amp; r1 = a;\nint&amp; r2 = b;\nr1 = r2; // does a = b\n// r1 still refers to a\n// r2 still refers to b\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 9499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18476ecb3774bfcda403a3c69cfc0e5c?s=128&d=identicon&r=PG&f=1", "display_name": "AskMath", "link": "https://stackoverflow.com/users/9499466/askmath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "closed_date": 1530118013, "answer_count": 2, "score": -1, "last_activity_date": 1530172625, "creation_date": 1530116476, "last_edit_date": 1530172625, "question_id": 51067408, "link": "https://stackoverflow.com/questions/51067408/what-are-the-disadvantages-of-define-a-field-in-class-as-a-reference", "closed_reason": "Duplicate", "title": "What are the disadvantages of define a field (in class) as a reference?", "body": "<p>What are the disadvantages of defining a field (in a class) as a reference?<br>\nFor example:  </p>\n\n<pre><code>template &lt;typename T&gt;\nclass A {  \n    T&amp; x; \npublic:  \n    //....\n}\n</code></pre>\n\n<p>In addition, are there special things that I need to do while I define a reference member?</p>\n"}, {"tags": ["c++", "language-lawyer", "move-semantics"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1530116112, "post_id": 51067280, "comment_id": 89124444, "body": "Unrelated to your question, but returning a <code>const</code> value from a function is really quite meaningless. Nothing will stop the caller from storing the value in a non-const variable anyway."}, {"owner": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530116270, "post_id": 51067280, "comment_id": 89124533, "body": "@Someprogrammerdude, how can you get const rvalues then?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1530116507, "post_id": 51067280, "comment_id": 89124678, "body": "Just for kicks, <a href=\"https://ideone.com/0x2Hda\" rel=\"nofollow noreferrer\">try your sample with a non-scalar type</a>. ttbomk a const prvalue for a scalar is fictitious."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1530116567, "post_id": 51067280, "comment_id": 89124717, "body": "@sanjivgupta Const &quot;values&quot; of what type? What do you mean? What is the use case?"}, {"owner": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1530116858, "post_id": 51067280, "comment_id": 89124890, "body": "@curiousguy, yes for aggregates it calls the const T&amp;&amp; version. Why the variance? is it not something covered by standard?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1530117830, "post_id": 51067280, "comment_id": 89125386, "body": "@sanjivgupta There is no such thing as a <code>const int</code> rvalue."}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "edited": false, "score": 0, "creation_date": 1530117024, "post_id": 51067511, "comment_id": 89124979, "body": "Ah!! I thought one of the design goals of C++ was to make user-defined types behave as built-in types do."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "edited": false, "score": 0, "creation_date": 1530117417, "post_id": 51067511, "comment_id": 89125175, "body": "Design goals are often conflicting.  Another design goal of C++ was to be compatible with C."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "edited": false, "score": 0, "creation_date": 1530118482, "post_id": 51067511, "comment_id": 89125712, "body": "@sanjivgupta Being silly isn&#39;t a design goal. A scalar can just be copied. Moving from <code>int</code> is just pointless!"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1530151477, "post_id": 51067511, "comment_id": 89136866, "body": "Oooh What an interesting tidbit!"}, {"owner": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1530170575, "post_id": 51067511, "comment_id": 89142740, "body": "@curiousguy, remembering different rules for scalar and aggregates is even more silly."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "edited": false, "score": 1, "creation_date": 1530171670, "post_id": 51067511, "comment_id": 89143371, "body": "@sanjivgupta Copying a scalar is cheap; cheaper than stealing its value. So it&#39;s reasonable that a move from a scalar is a normal copy and doesn&#39;t change the source. And BTW, builtin operators are not overloaded operators. <code>1 + 1.</code> doesn&#39;t go through overloading resolution. Implicit conversions of scalars are unlike user defined conversions. Pointers conversions are unlike smart pointer conversion. Covariant return types work with pointers not classes. <code>static_cast</code>, <code>dynamic_cast</code>... cannot be overloaded on classes. Etc."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 13, "last_activity_date": 1530116820, "creation_date": 1530116820, "answer_id": 51067511, "question_id": 51067280, "link": "https://stackoverflow.com/questions/51067280/why-is-a-non-const-rvalue-move-constructor-called-in-this-case/51067511#51067511", "title": "Why is a non-const rvalue move constructor called in this case?", "body": "<p>Here is a slightly modified version of your code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#if 0\nusing T = int;\n#else\nstruct T {T(int){}};\n#endif\n\n    using namespace std;\n    class A {\n      public:\n      A (T const &amp;&amp;i) { cout &lt;&lt; \"const rvalue constructor\"; }\n      A (T &amp;&amp;i) { cout &lt;&lt; \"non const rvalue constructor\"; }\n   };\n\n\n   T const\n   foo (void)\n   {\n     const T i = 3;\n     return i;\n   }\n\n  int main()\n  {\n    A a(foo());\n  }\n</code></pre>\n\n<p>When <code>T == int</code>, you get the non-const overload.  When <code>T</code> is a class type, you get the const overload.  This behavior falls out of section 8.2.2 [expr.type]/p2:</p>\n\n<blockquote>\n  <p>If a prvalue initially has the type \u201c<em>cv</em> <code>T</code>\u201d, where <code>T</code> is a cv-unqualified non-class, non-array type, the type of the expression is adjusted to <code>T</code> prior to any further analysis.</p>\n</blockquote>\n\n<p>Translation:  The language doesn't have <code>const</code>-qualified scalar prvalues.  They simply don't exist.</p>\n"}], "owner": {"reputation": 285, "user_id": 3173716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf0d3c03570f2190e3172e80869f8a?s=128&d=identicon&r=PG&f=1", "display_name": "sanjivgupta", "link": "https://stackoverflow.com/users/3173716/sanjivgupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 2, "accepted_answer_id": 51067511, "answer_count": 1, "score": 8, "last_activity_date": 1530191681, "creation_date": 1530115982, "last_edit_date": 1530191681, "question_id": 51067280, "link": "https://stackoverflow.com/questions/51067280/why-is-a-non-const-rvalue-move-constructor-called-in-this-case", "title": "Why is a non-const rvalue move constructor called in this case?", "body": "<p>I have seen the related questions and they mostly talk about if we should have const rvalue references as a parameter or not. But I still fail to reason why a <em>non-const move constructor</em> is being called in the following code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n\n    class A \n    {\n    public:\n      A (int const &amp;&amp;i) { cout &lt;&lt; \"const rvalue constructor\"; }\n      A (int &amp;&amp;i) { cout &lt;&lt; \"non const rvalue constructor\"; }\n   };\n\n\n   int const foo (void)\n   {\n     const int i = 3;\n     return i;\n   }\n\n  int main (void)\n  {\n     A a(foo());\n  }\n</code></pre>\n"}, {"tags": ["c++", "reference", "unique-ptr"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1530115716, "post_id": 51067140, "comment_id": 89124242, "body": "<code>std::vector::push_back</code> <i>&quot;If the new size() is greater than capacity() then all iterators and references (including the past-the-end iterator) are invalidated. Otherwise only the past-the-end iterator is invalidated.&quot;</i> <a href=\"https://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/push_back</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530115768, "post_id": 51067140, "comment_id": 89124272, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/37991037/priority-queue-changes-its-content/37991143#37991143\" title=\"priority queue changes its content\">stackoverflow.com/questions/37991037/&hellip;</a>"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530115953, "post_id": 51067140, "comment_id": 89124351, "body": "@NathanOliver will <code>std::vector::reserve(some size)</code> will resolve this? Just for clarification."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 1, "creation_date": 1530116020, "post_id": 51067140, "comment_id": 89124391, "body": "@JeJo Yes.  The OP could also move to a <code>std::shared_ptr</code>"}, {"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 0, "creation_date": 1530116136, "post_id": 51067140, "comment_id": 89124466, "body": "Thanks for the explanation. Unfortunately I only have to use <code>std::_unique_ptr</code> because of project restrictions."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1530116249, "post_id": 51067140, "comment_id": 89124520, "body": "To clarify, the same problem would exist with a reference to a <code>std::shared_ptr</code> -- only by replacing both vectors with plain <code>shared_ptr</code>s would things work as expected."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1530117986, "post_id": 51067140, "comment_id": 89125446, "body": "@Cameron replacing only the first vector, maybe. Second could be as it is as it uses to store the refs."}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 0, "creation_date": 1530115922, "post_id": 51067232, "comment_id": 89124335, "body": "Thank you very much for the explanation, I thought this was working like a linked list."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 3, "creation_date": 1530116052, "post_id": 51067232, "comment_id": 89124407, "body": "In that case it&#39;s really worth reading the documentation linked in Richard&#39;s comment carefully, and/or getting a good book. Knowing what data structure you&#39;re using is generally a good idea."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1530116141, "post_id": 51067232, "comment_id": 89124470, "body": "One of the (standardized) features of a <code>std::vector</code> (and <code>std::string</code>, by the way) is that its storage is guaranteed to be contiguous. This gives it O(1) random access, and makes it handy as a replacement where fixed-size arrays are normally used, except with an unknown size."}], "tags": [], "owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "is_accepted": true, "score": 3, "last_activity_date": 1530115767, "creation_date": 1530115767, "answer_id": 51067232, "question_id": 51067140, "link": "https://stackoverflow.com/questions/51067140/vector-of-references-to-unique-ptr-invalid-read/51067232#51067232", "title": "Vector Of References To Unique Ptr Invalid Read", "body": "<p>You're taking a reference to an element stored in the vector. This is fine as long as the vector doesn't resize itself, since the storage location of the element will not change. But, as soon as the <code>vec</code> vector needs to resize to hold one more element than its capacity, it moves all its current elements over to a new backing memory block, and the references you took now refer to freed memory (i.e. garbage).</p>\n"}], "owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 51067232, "answer_count": 1, "score": 1, "last_activity_date": 1530115767, "creation_date": 1530115469, "question_id": 51067140, "link": "https://stackoverflow.com/questions/51067140/vector-of-references-to-unique-ptr-invalid-read", "title": "Vector Of References To Unique Ptr Invalid Read", "body": "<p>I have a loop which I create a unique_ptr in and move it into a vector. I also need to store it in another vector so I store a reference of it in another vector using the <code>end()</code> method of the first vector.</p>\n\n<p>For some reason I happen to have some invalid read errors which seem to affect the element before the last one of the list containing the references.</p>\n\n<p>Here is a simple snippet to illustrate my sayings:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nint main(void)\n{\n    std::vector&lt;std::unique_ptr&lt;int&gt;&gt; other;\n    std::vector&lt;std::reference_wrapper&lt;std::unique_ptr&lt;int&gt;&gt;&gt; vec;\n\n    for (int it = 0; it &lt; 2; ++it)\n    {\n        std::unique_ptr&lt;int&gt; ptr = std::make_unique&lt;int&gt;(it);\n        other.push_back(std::move(ptr));\n        vec.push_back(*(other.end() - 1));\n    }\n\n    for (auto &amp;it : vec)\n        std::cout &lt;&lt; \"Vec: \" &lt;&lt; *it.get() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This will output something like that:</p>\n\n<pre><code>$ ./a.out \nVec: 35716160\nVec: 1\n</code></pre>\n\n<p>As you can see the first element holds garbage, I suspect pushing from the <code>end()</code> of the first vector causes the issue, but I can't seem to figure why.</p>\n"}, {"tags": ["c++", "class", "templates", "operators", "overriding"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530114953, "post_id": 51066937, "comment_id": 89123832, "body": "<code>operator =</code> should assign one <code>MyClass</code> to another <code>MyClass</code>.  If you want to assign to an element then access the element with your <code>operator()</code> like you do with <code>mt(2,4) = 3.5;</code>"}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530115556, "post_id": 51066937, "comment_id": 89124143, "body": "@NathanOliver it doesn&#39;t work, I get &quot; error: lvalue required as left operand of assignment&quot;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1530115593, "post_id": 51066937, "comment_id": 89124175, "body": "<code>operator=</code> has a very limited set of parameters it can take. Effectively there is one parameter, and it is the object being copied. Recommended reading: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1530116077, "post_id": 51067076, "comment_id": 89124424, "body": "Thank you, I was missing the reference bit!"}], "tags": [], "owner": {"reputation": 896, "user_id": 9996322, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKb7ymEsXic/AAAAAAAAAAI/AAAAAAAAAUE/PhlIctjmhPI/photo.jpg?sz=128", "display_name": "Jacob Boertjes", "link": "https://stackoverflow.com/users/9996322/jacob-boertjes"}, "is_accepted": true, "score": 10, "last_activity_date": 1530134360, "last_edit_date": 1530134360, "creation_date": 1530115185, "answer_id": 51067076, "question_id": 51066937, "link": "https://stackoverflow.com/questions/51066937/how-overload-the-operator-with-arguments/51067076#51067076", "title": "How overload the &#39;=&#39; operator with arguments?", "body": "<p>When you overload the <code>=</code> operator, you only want to have the right-hand value in the arguments. Since you overloaded the <code>()</code> operator, you don't need to handle the <code>r</code> and <code>c</code> value with the <code>=</code> operator.  You can just use <code>mt(2,4) = 3.5;</code> and the overloaded <code>()</code> operator will handle the <code>mt(2,4)</code> portion. Then, you can just set the returned data to your desired value without overloading any <code>=</code> operator.</p>\n\n<p>You need to return a reference to the data so you can edit it, however:</p>\n\n<pre><code>template &lt;class _type&gt;\n_type&amp; myClass&lt;_type&gt;::operator()(int r,int c) {\n    return data[r*nCols+c]; \n};\n</code></pre>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 51067076, "answer_count": 1, "score": 3, "last_activity_date": 1530134360, "creation_date": 1530114664, "last_edit_date": 1530134267, "question_id": 51066937, "link": "https://stackoverflow.com/questions/51066937/how-overload-the-operator-with-arguments", "title": "How overload the &#39;=&#39; operator with arguments?", "body": "<p>What would be the correct syntax to use the '=' to set some value to a class member and supply additional arguments? E.g. positions in a vector:</p>\n\n<pre><code>MyClass&lt;float&gt; mt;\nmt(2,4) = 3.5;\n</code></pre>\n\n<p>I've tried: </p>\n\n<pre><code>template &lt;class _type&gt; \n_type myClass&lt;_type&gt;::operator()(int r,int c) {\n    return data[r*nCols+c]; \n};\n\ntemplate &lt;class _type&gt;  \nmyClass&lt;_type&gt;::operator= (int r, int c, _type val) { \n    data(r,c) = val; \n};\n</code></pre>\n\n<p>But the compiler tells me I can override the '=' operator with 1 argument.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 1, "creation_date": 1530114661, "post_id": 51066906, "comment_id": 89123640, "body": "On which operating system?"}, {"owner": {"reputation": 1, "user_id": 9726838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ada5fada7dcecc23e857ded3405fc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9726838/j-doe"}, "reply_to_user": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1530114769, "post_id": 51066906, "comment_id": 89123708, "body": "I am doing this on Windows"}, {"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 1, "creation_date": 1530114871, "post_id": 51066906, "comment_id": 89123781, "body": "You could set up a mutex in one program and check for this in the second"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1530114980, "post_id": 51066906, "comment_id": 89123847, "body": "I would add an option for the user to enter the process name or at least select it from a list the first time.."}, {"owner": {"reputation": 1, "user_id": 9726838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ada5fada7dcecc23e857ded3405fc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9726838/j-doe"}, "edited": false, "score": 0, "creation_date": 1530115545, "post_id": 51066906, "comment_id": 89124135, "body": "It is checking for a malicious program, so that sadly isn&#39;t possible."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1530115965, "post_id": 51066906, "comment_id": 89124356, "body": "You will need to approach this like antivirus and look for some sort of signature in the executable file or behaviour."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 4, "creation_date": 1530115977, "post_id": 51066906, "comment_id": 89124365, "body": "How do you manually identify the process as being the one you&#39;re interested in?"}, {"owner": {"reputation": 154, "user_id": 3314052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89b93a4ff76b305e35ee022ac0bc931b?s=128&d=identicon&r=PG&f=1", "display_name": "np_complete", "link": "https://stackoverflow.com/users/3314052/np-complete"}, "edited": false, "score": 0, "creation_date": 1530116532, "post_id": 51066906, "comment_id": 89124692, "body": "Malwares generally behave in an unusual way, it might be more cpu usage, suspicious disk accesses, high network usage etc."}, {"owner": {"reputation": 1, "user_id": 9726838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ada5fada7dcecc23e857ded3405fc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9726838/j-doe"}, "edited": false, "score": 0, "creation_date": 1530120833, "post_id": 51066906, "comment_id": 89126840, "body": "How would I get a signature of the file and then check for it? I couldn&#39;t find anything about this.."}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 2246239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6941427a49899a83fefd3b64419ebccb?s=128&d=identicon&r=PG", "display_name": "DavisR5", "link": "https://stackoverflow.com/users/2246239/davisr5"}, "is_accepted": false, "score": 0, "last_activity_date": 1530128711, "creation_date": 1530128711, "answer_id": 51070335, "question_id": 51066906, "link": "https://stackoverflow.com/questions/51066906/how-to-check-if-a-certain-process-is-running-without-knowing-its-name/51070335#51070335", "title": "How to check if a certain process is running without knowing it&#39;s name", "body": "<p>Working with the WinAPI you can check the window class of the given process. Since the name of the process can be changed. \"A window class is a set of attributes that the system uses as a template to create a window. Every window is a member of a window class. All window classes are process specific.\" from <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/ms632596(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9726838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ada5fada7dcecc23e857ded3405fc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9726838/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530128711, "creation_date": 1530114594, "last_edit_date": 1530114891, "question_id": 51066906, "link": "https://stackoverflow.com/questions/51066906/how-to-check-if-a-certain-process-is-running-without-knowing-its-name", "title": "How to check if a certain process is running without knowing it&#39;s name", "body": "<p>I have a simple C++ program that waits for a certain process to start, but the name of that process could be changed by the user. Is there a way to check if it is running without knowing it's name?</p>\n"}, {"tags": ["c++", "stdmap"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1530116022, "post_id": 51066890, "comment_id": 89124393, "body": "Have you using the debugger to place breakpoints in your comparison functions?"}, {"owner": {"reputation": 839, "user_id": 3644669, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6f9ce0a8ae3fbf40051b275d8b2d9801?s=128&d=identicon&r=PG&f=1", "display_name": "Laetan", "link": "https://stackoverflow.com/users/3644669/laetan"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1530261686, "post_id": 51066890, "comment_id": 89182851, "body": "I did not thinh the problem was comming from the comparaison function so I&#39;ve overlooked it."}], "answers": [{"comments": [{"owner": {"reputation": 839, "user_id": 3644669, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6f9ce0a8ae3fbf40051b275d8b2d9801?s=128&d=identicon&r=PG&f=1", "display_name": "Laetan", "link": "https://stackoverflow.com/users/3644669/laetan"}, "edited": false, "score": 0, "creation_date": 1530171002, "post_id": 51067249, "comment_id": 89142972, "body": "Thanks. I wrote that too fast"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1530115845, "creation_date": 1530115845, "answer_id": 51067249, "question_id": 51066890, "link": "https://stackoverflow.com/questions/51066890/stdmapcustom-intfind-does-not-find-anything/51067249#51067249", "title": "std::map&lt;Custom, int&gt;::find() does not find anything", "body": "<p>You can't compare character arrays with the <code>&lt;</code> operator.  When you write <code>code &lt; lg.code</code>, the compiler will compare the <em>address</em> of the <code>code</code> array, and not the contents of the arrays.</p>\n\n<p>Change the definition for <code>operator&lt;</code> to use <code>strncmp</code>:</p>\n\n<pre><code>bool operator&lt;(const LangueISO3&amp; lg)const {\n    return strncmp(code, lg.code, SIZE_ISO3) &lt; 0;\n}\n</code></pre>\n\n<p>Also, the comparison for <code>operator==</code> should use the <code>SIZE_ISO3</code> constant instead of hardcoding the size at <code>3</code>.</p>\n"}], "owner": {"reputation": 839, "user_id": 3644669, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6f9ce0a8ae3fbf40051b275d8b2d9801?s=128&d=identicon&r=PG&f=1", "display_name": "Laetan", "link": "https://stackoverflow.com/users/3644669/laetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 51067249, "answer_count": 1, "score": -1, "last_activity_date": 1530115845, "creation_date": 1530114558, "question_id": 51066890, "link": "https://stackoverflow.com/questions/51066890/stdmapcustom-intfind-does-not-find-anything", "title": "std::map&lt;Custom, int&gt;::find() does not find anything", "body": "<p>For some reason <code>std::map</code> does not find my objects.</p>\n\n<p>Here is my simplified object :</p>\n\n<pre><code>class LangueISO3 {\npublic:\n    enum {\n        SIZE_ISO3 = 3\n    };\n\n    static constexpr char DEF_LANG[SIZE_ISO3] = {'-','-','-'};\n\n    constexpr LangueISO3():code() {\n        for(size_t i(0); i &lt; SIZE_ISO3; i++){\n            code[i] = DEF_LANG[i];\n        }\n    };\n    LangueISO3(const std::string&amp; s) {strncpy(code, s.c_str(), 3);};\n\n    bool operator==(const LangueISO3&amp; lg) const { return strncmp(code, lg.code, 3) == 0;};\n    bool operator&lt;(const LangueISO3&amp; lg)const { return code &lt; lg.code;};\n\nprivate:\n    char code[SIZE_ISO3];\n};\n</code></pre>\n\n<p>My test is : </p>\n\n<pre><code>{\n    CPPUNIT_ASSERT_EQUAL(LangueISO3(\"eng\"), LangueISO3(\"eng\"));\n\n    std::map&lt;LangueISO3, int&gt; lmap;\n    lmap.emplace(LangueISO3(\"fra\"), 0);\n    lmap.emplace(LangueISO3(\"deu\"), 1);\n    lmap.emplace(LangueISO3(\"eng\"), 2);\n    auto it = lmap.find(LangueISO3(\"deu\"));\n    CPPUNIT_ASSERT_EQUAL(1, it-&gt;second);\n}\n</code></pre>\n\n<p>The first test has no problem, however the second fails. <code>lmap.find()</code> always return <code>lmap.end()</code></p>\n\n<p>What did I do wrong ?</p>\n"}, {"tags": ["c++", "c++-winrt"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1530117543, "post_id": 51066729, "comment_id": 89125236, "body": "Do you have a supported version of the Windows SDK (version 10.0.17134.0 (Windows 10, version 1803) or later)?  See the <a href=\"https://docs.microsoft.com/en-us/uwp/cpp-ref-for-winrt/from-abi\" rel=\"nofollow noreferrer\">documentation</a> for <code>from_abi</code>."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1530126339, "post_id": 51066729, "comment_id": 89129489, "body": "I&#39;m able to repro this issue. It appears that 17134 version of C++/WinRT is not compatible with VS 2017 (15.8 update preview 3) even without <code>&#47;permissive-</code>... Might be a compiler issue, so I&#39;ll ping the teams involved."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1530126726, "post_id": 51066729, "comment_id": 89129668, "body": "Also note that you should be using <code>&#47;std:c++17</code> and not <code>&#47;std:c++latest</code> with VS 2017. You only need C++17 support for C++/WinRT, not some future C++20."}, {"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "edited": false, "score": 0, "creation_date": 1530219770, "post_id": 51066729, "comment_id": 89170562, "body": "It may be so for C++/WinRT, but it is not the only component in a program. Other parts may require features not available in C++17"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1534499642, "post_id": 51066729, "comment_id": 90736371, "body": "This issue also happens with Visual Studio 2017 15.8.0, released on August 14, 2018. The <a href=\"https://stackoverflow.com/a/51070054/1889329\">answer</a> implies, that this is an issue that needs to be resolved with an SDK update, so that shouldn&#39;t be a surprise. I&#39;m just leaving this information in case a future visitor that isn&#39;t using a Visual Studio Preview runs into this issue as well (like myself)."}, {"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "edited": false, "score": 0, "creation_date": 1534682689, "post_id": 51066729, "comment_id": 90785279, "body": "Currently I work around this issue by installing and using Windows 10 Preview SDK 10.0.17709.0."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1534501131, "post_id": 51070054, "comment_id": 90737172, "body": "The combination <code>&#47;permissive- &#47;Zc:twoPhase- &#47;std:c++latest</code> appears to work, in case you need experimental features in your compilation unit. It is unclear to me, why C++/WinRT doesn&#39;t, though, as it relies on/makes available coroutines, which aren&#39;t part of C++17. What&#39;s the deal here, in case you know?"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1534533292, "post_id": 51070054, "comment_id": 90754359, "body": "C++/WinRT headers for C++17 requires inline namespaces, but otherwise only requires C++14 generalized constexpr to build. Use of co-routines is strongly encouraged, but isn&#39;t actually part of C++11, C++14, or C++17. It&#39;s enabled via the <code>&#47;await</code> flag."}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1535537549, "post_id": 51070054, "comment_id": 91099374, "body": "<code>&#47;permissive-</code> was already there - <code>&#47;Zc:twoPhase-</code> worked though."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1540536952, "post_id": 51070054, "comment_id": 92910090, "body": "What exactly is &#39;breaking&#39; here?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1540749458, "post_id": 51070054, "comment_id": 92969023, "body": "@ChuckWalbourn turning off Conformance Mode has a devastating impact, for example operator names will stop working."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1540838577, "post_id": 51070054, "comment_id": 93003362, "body": "To my knowledge there&#39;s no usage in C++/WinRT that requires Conformance Mode (<code>&#47;permissive-</code>) or Two-Phase Name Lookup (enabled by <code>&#47;permissive-</code>, turned off individually with <code>&#47;Zc:twoPhase-</code>). It does require C++17 mode (<code>&#47;std:c++17</code>). What operator names in particular are you referring to?"}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 12, "last_activity_date": 1538579449, "last_edit_date": 1538579449, "creation_date": 1530127447, "answer_id": 51070054, "question_id": 51066729, "link": "https://stackoverflow.com/questions/51066729/c-winrt-part-of-windows-sdk-17134-is-not-compatible-with-visual-studio-15-8-p/51070054#51070054", "title": "C++/WinRT, part of Windows SDK 17134 is not compatible with Visual Studio 15.8 Preview 3", "body": "<p>This is a known issue which will be addressed in a future Windows 10 SDK update.</p>\n\n<p>You can work around it by either turning off Conformance Mode entirely (<code>/permissive-</code>), -or- keep it on by adding to the <em>Additional Options</em> <code>/Zc:twoPhase-</code> to disable <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/09/11/two-phase-name-lookup-support-comes-to-msvc/\" rel=\"nofollow noreferrer\">two-phase name lookup</a>.</p>\n\n<blockquote>\n  <p>You should use <code>/std:c++17</code> and not <code>/std:c++latest</code> with VS 2017 for C++/WinRT to enable C++17 without opting in to future draft changes.</p>\n</blockquote>\n\n<p><strong>UPDATE:</strong> This issue is resolved using the Windows 10 October 2018 Update SDK (<a href=\"https://blogs.windows.com/buildingapps/2018/10/02/start-developing-on-windows-10-october-2018-update-today/\" rel=\"nofollow noreferrer\">17763</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1540749139, "creation_date": 1540749139, "answer_id": 53034493, "question_id": 51066729, "link": "https://stackoverflow.com/questions/51066729/c-winrt-part-of-windows-sdk-17134-is-not-compatible-with-visual-studio-15-8-p/53034493#53034493", "title": "C++/WinRT, part of Windows SDK 17134 is not compatible with Visual Studio 15.8 Preview 3", "body": "<p>I made a little patch to fix this problem. It adds a couple of forward declarations so necessary names could be found with two-phase lookup and a missing <code>template</code> keyword.</p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\cppwinrt\\winrt\\base.h</p>\n</blockquote>\n\n<pre><code>2171a2172,2189\n&gt;     template &lt;typename D, typename I, typename Enable = void&gt;\n&gt;     struct producer;\n&gt; }\n&gt; \n&gt; WINRT_EXPORT namespace winrt\n&gt; {\n&gt;     template &lt;typename D, typename I&gt;\n&gt;     D* from_abi(I const&amp; from) noexcept;\n&gt; \n&gt;   template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt;Windows::Foundation::IUnknown, I&gt;&gt;* = nullptr&gt;\n&gt;     impl::abi_t&lt;I&gt;* to_abi(impl::producer&lt;D, I&gt; const* from) noexcept;\n&gt; \n&gt;     template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt; ::IUnknown, I&gt;&gt;* = nullptr&gt;\n&gt;     impl::abi_t&lt;I&gt;* to_abi(impl::producer&lt;D, I&gt; const* from) noexcept;\n&gt; }\n&gt; \n&gt; namespace winrt::impl\n&gt; {\n6244c6262\n&lt;     template &lt;typename D, typename I, typename Enable = void&gt;\n---\n&gt;     template &lt;typename D, typename I, typename Enable&gt;\n6353c6371\n&lt;     template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt;Windows::Foundation::IUnknown, I&gt;&gt;* = nullptr&gt;\n---\n&gt;     template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt;Windows::Foundation::IUnknown, I&gt;&gt;*&gt;\n6359c6377\n&lt;     template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt; ::IUnknown, I&gt;&gt;* = nullptr&gt;\n---\n&gt;     template &lt;typename I, typename D, std::enable_if_t&lt;std::is_base_of_v&lt; ::IUnknown, I&gt;&gt;*&gt;\n7189c7207\n&lt;             return root_implements_type::get_weak&lt;D&gt;();\n---\n&gt;             return root_implements_type::template get_weak&lt;D&gt;();\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2013, "favorite_count": 2, "accepted_answer_id": 51070054, "answer_count": 2, "score": 8, "last_activity_date": 1540749139, "creation_date": 1530114037, "question_id": 51066729, "link": "https://stackoverflow.com/questions/51066729/c-winrt-part-of-windows-sdk-17134-is-not-compatible-with-visual-studio-15-8-p", "title": "C++/WinRT, part of Windows SDK 17134 is not compatible with Visual Studio 15.8 Preview 3", "body": "<p>Trying to compile the following code:</p>\n\n<pre><code>#include &lt;winrt/base.h&gt;\n\nint main() {}\n</code></pre>\n\n<p>With the following compiler options:</p>\n\n<pre><code>/permissive- /std:c++latest\n</code></pre>\n\n<p>With recently released Visual Studio 15.8 Preview 3.0 results in the following compilation errors:</p>\n\n<pre><code>1&gt;------ Build started: Project: test1, Configuration: Debug x64 ------\n1&gt;Source.cpp\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(2185): error C3861: 'from_abi': identifier not found\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(2185): note: This diagnostic occurred in the compiler generated function 'conditional&lt;_Test,T,_Ty2&gt;::type winrt::impl::as(From *)'\n1&gt;        with\n1&gt;        [\n1&gt;            _Ty2=winrt::com_ptr&lt;T&gt;\n1&gt;        ]\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(2209): error C3861: 'from_abi': identifier not found\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(2209): note: This diagnostic occurred in the compiler generated function 'conditional&lt;_Test,T,_Ty2&gt;::type winrt::impl::try_as(From *) noexcept'\n1&gt;        with\n1&gt;        [\n1&gt;            _Ty2=winrt::com_ptr&lt;T&gt;\n1&gt;        ]\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(3850): error C3861: 'from_abi': identifier not found\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(3873): note: see reference to class template instantiation 'winrt::weak_ref&lt;T&gt;' being compiled\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(2984): note: see reference to class template instantiation 'winrt::com_ptr&lt;ILanguageExceptionErrorInfo2&gt;' being compiled\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(3054): note: see reference to class template instantiation 'winrt::com_ptr&lt;IRestrictedErrorInfo&gt;' being compiled\n1&gt;c:\\program files (x86)\\microsoft visual studio\\preview\\professional\\vc\\tools\\msvc\\14.15.26608\\include\\type_traits(616): note: see reference to class template instantiation 'std::basic_string_view&lt;wchar_t,std::char_traits&lt;wchar_t&gt;&gt;' being compiled\n1&gt;c:\\program files (x86)\\microsoft visual studio\\preview\\professional\\vc\\tools\\msvc\\14.15.26608\\include\\xstring(2124): note: see reference to class template instantiation 'std::is_convertible&lt;const _StringViewIsh &amp;,std::basic_string_view&lt;wchar_t,std::char_traits&lt;wchar_t&gt;&gt;&gt;' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _StringViewIsh=const wchar_t *\n1&gt;        ]\n1&gt;c:\\program files (x86)\\microsoft visual studio\\preview\\professional\\vc\\tools\\msvc\\14.15.26608\\include\\xstring(2122): note: see reference to variable template 'const bool conjunction_v&lt;std::is_convertible&lt;wchar_t const * const &amp;,std::basic_string_view&lt;wchar_t,std::char_traits&lt;wchar_t&gt; &gt; &gt;,std::negation&lt;std::is_convertible&lt;wchar_t const * const &amp;,wchar_t const *&gt; &gt; &gt;' being compiled\n1&gt;c:\\program files (x86)\\microsoft visual studio\\preview\\professional\\vc\\tools\\msvc\\14.15.26608\\include\\xstring(2281): note: see reference to alias template instantiation '_Is_string_view_ish&lt;const wchar_t*&gt;' being compiled\n1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\cppwinrt\\winrt\\base.h(6308): error C3861: 'to_abi': identifier not found\n1&gt;Done building project \"test1.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>Is there any solution?</p>\n"}, {"tags": ["c++", "clion", "gurobi"], "comments": [{"owner": {"reputation": 4806, "user_id": 446610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115fdf94f87f4fc3f0a817e514e0cbfc?s=128&d=identicon&r=PG", "display_name": "Greg Glockner", "link": "https://stackoverflow.com/users/446610/greg-glockner"}, "edited": false, "score": 0, "creation_date": 1530231951, "post_id": 51066669, "comment_id": 89173702, "body": "What platform and C++ compiler are you using?"}, {"owner": {"reputation": 133, "user_id": 10000878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4924ea808678fc87dfe631a488b421?s=128&d=identicon&r=PG&f=1", "display_name": "Ethanabc", "link": "https://stackoverflow.com/users/10000878/ethanabc"}, "reply_to_user": {"reputation": 4806, "user_id": 446610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115fdf94f87f4fc3f0a817e514e0cbfc?s=128&d=identicon&r=PG", "display_name": "Greg Glockner", "link": "https://stackoverflow.com/users/446610/greg-glockner"}, "edited": false, "score": 0, "creation_date": 1530237836, "post_id": 51066669, "comment_id": 89174762, "body": "I use CLion, the C++ compiler is cmake?   It seems that Clion would let cmake to detect what is the complier.. I didnot change on the choice of complier, just use the default one."}], "owner": {"reputation": 133, "user_id": 10000878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4924ea808678fc87dfe631a488b421?s=128&d=identicon&r=PG&f=1", "display_name": "Ethanabc", "link": "https://stackoverflow.com/users/10000878/ethanabc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1579620828, "creation_date": 1530113858, "question_id": 51066669, "link": "https://stackoverflow.com/questions/51066669/i-cannot-run-gurobi-in-cclion-mac-os", "title": "I cannot run Gurobi in C++(Clion, Mac OS)", "body": "<p>I am trying to run the latest Gurobi version in my laptop. I installed it and got accessed to the newest license..  </p>\n\n<p>When I was trying to run the baby example. It told me that </p>\n\n<p>fatal error: 'gurobi_c++.h' file not found</p>\n\n<p>I believe there may be some initialisation thing to do. However, I cannot find it in their documentation. Can anyone help me about this?   Thank you very much</p>\n"}, {"tags": ["c++", "pointers", "vector", "memory-management"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1530114666, "post_id": 51066435, "comment_id": 89123644, "body": "Why bother having a <code>DerivedList</code> if it doesn&#39;t contain <code>std::shared_ptr&lt;DerivedClass&gt;</code>? Hint: you can have <code>shared_ptr</code>s of different types sharing ownership of the same object, see <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr/pointer_cast\" rel=\"nofollow noreferrer\">static_pointer_cast</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1530115129, "post_id": 51066435, "comment_id": 89123924, "body": "If you have a separate static container for every type then can&#39;t you just store them as <b>values</b>?"}, {"owner": {"reputation": 59, "user_id": 4233298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e9fabfd80dbe1067acff55a31af2dc?s=128&d=identicon&r=PG&f=1", "display_name": "jcg", "link": "https://stackoverflow.com/users/4233298/jcg"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1530115702, "post_id": 51066435, "comment_id": 89124234, "body": "@Galik No, for example <code>DerivedClass</code> instances are stored in both <code>BaseList</code> and <code>DerivedList</code>"}, {"owner": {"reputation": 59, "user_id": 4233298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e9fabfd80dbe1067acff55a31af2dc?s=128&d=identicon&r=PG&f=1", "display_name": "jcg", "link": "https://stackoverflow.com/users/4233298/jcg"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1530115952, "post_id": 51066435, "comment_id": 89124350, "body": "@Caleth The name <code>BaseClass</code> was an example, if you consider it as <code>GameObject</code> for example, the vectors could become <code>DrawableList</code> and <code>CollidableList</code>, which makes it clearer why the type of the vector should be the base class rather than any one of the many derived classes which may arise in context"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1530116380, "post_id": 51066435, "comment_id": 89124595, "body": "From your example: <code>std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; BaseClass::BaseList; std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; DerivedClass::DerivedList;</code> The second one will be easier to use if it is <code>std::vector&lt;std::shared_ptr&lt;DerivedClass&gt;&gt; DerivedClass::DerivedList</code>, you won&#39;t have to litter it&#39;s usage with casts to <code>DerivedClass</code>"}, {"owner": {"reputation": 59, "user_id": 4233298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e9fabfd80dbe1067acff55a31af2dc?s=128&d=identicon&r=PG&f=1", "display_name": "jcg", "link": "https://stackoverflow.com/users/4233298/jcg"}, "edited": false, "score": 0, "creation_date": 1530116741, "post_id": 51066435, "comment_id": 89124810, "body": "Agreed, however in a case such as mine, casts might be unavoidable when <code>drawableList</code> could contain both <code>Player</code> and <code>Enemy</code> under the base class <code>GameObject</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4027579, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001121119014/picture?type=large", "display_name": "Merx", "link": "https://stackoverflow.com/users/4027579/merx"}, "is_accepted": false, "score": 1, "last_activity_date": 1530114654, "last_edit_date": 1530114654, "creation_date": 1530114412, "answer_id": 51066844, "question_id": 51066435, "link": "https://stackoverflow.com/questions/51066435/adding-shared-ptr-to-self-to-vector-in-constructor-of-object-in-a-way-that-suppo/51066844#51066844", "title": "Adding shared_ptr to self to vector in constructor of object in a way that supports inheritance", "body": "<p>I think this can be resolved with using a Factory/Provider.</p>\n\n<pre><code>class SomeBaseClass // Could also be an interface or similar\n{\n};\n\n// Instead of having SomeBaseClassFactory instance, all the methods could also be static\nclass SomeBaseClassFactory\n{\npublic:\n    std::vector&lt;std::shared_ptr&lt;SomeBaseClass&gt;&gt; someBaseClassList;\n\n    std::shared_ptr&lt;SomeBaseClass&gt; GenerateObject(/* Parameters */)\n    {\n        std::shared_ptr&lt;SomeBaseClass&gt; someBaseClass = std::make_shared&lt;SomeBaseClass&gt;(/* Parameters */);\n        RegisterObject(someBaseClass);\n        return someBaseClass;\n    }\n\nprotected:\n    void RegisterObject(std::shared_ptr&lt;SomeBaseClass&gt; objectToRegister)\n    {\n        someBaseClassList.push_back(objectToRegister);\n    }\n};\n\nclass SomeDerivedClass : public SomeBaseClass\n{\n};\n\nclass SomeDerivedClassFactory : public SomeBaseClassFactory\n{\npublic:\n    std::shared_ptr&lt;SomeDerivedClass&gt; GenerateObject(/* Parameters */)\n    {\n        std::shared_ptr&lt;SomeDerivedClass&gt; someDerivedClass = std::make_shared&lt;SomeDerivedClass&gt;(/* Parameters */);\n        RegisterObject(someDerivedClass);\n        return someDerivedClass;\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4233298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e9fabfd80dbe1067acff55a31af2dc?s=128&d=identicon&r=PG&f=1", "display_name": "jcg", "link": "https://stackoverflow.com/users/4233298/jcg"}, "edited": false, "score": 0, "creation_date": 1530117152, "post_id": 51067027, "comment_id": 89125040, "body": "This does not allow for adding the pointer to the vectors required by both <code>BaseClass</code> and <code>DerivedClass</code>, where <code>DerivedClass</code> should also be placed into the vector that <code>BaseClass</code> is. Vectors may not always necessarily be static members of the class that is placed into them (although my question does not clarify this, will edit to correct this), hence using a template in the fashion <code>T::List.push_back()</code> is not really feasable."}], "tags": [], "owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "is_accepted": false, "score": 1, "last_activity_date": 1530114994, "creation_date": 1530114994, "answer_id": 51067027, "question_id": 51066435, "link": "https://stackoverflow.com/questions/51066435/adding-shared-ptr-to-self-to-vector-in-constructor-of-object-in-a-way-that-suppo/51067027#51067027", "title": "Adding shared_ptr to self to vector in constructor of object in a way that supports inheritance", "body": "<p>You can define factory for your objects like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass Factory\n{\npublic:\n    template&lt;class T, class ... Args&gt;\n    static std::shared_ptr&lt;T&gt; Make(Args... args)\n    {\n        auto instance = std::shared_ptr&lt;T&gt;(new T(args...));\n        T::List.push_back(instance);\n        return instance;\n    }\n};\n\nclass BaseClass\n{ \n    friend class Factory;  \nprotected:    \n    BaseClass()\n    {\n        std::cout &lt;&lt; \"Base Created\"&lt;&lt;std::endl;\n    }\n\npublic:\n    virtual ~BaseClass()\n    {\n        std::cout &lt;&lt; \"Base Deleted\"&lt;&lt;std::endl;\n    }\n\n    static std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; List;\n\n};\nclass DerivedClass : public BaseClass\n{//for example \"enemy\"\n    friend class Factory;  \n\n    DerivedClass()\n    {\n        std::cout &lt;&lt; \"Derived Created\" &lt;&lt; std::endl;\n    }\npublic:\n    ~DerivedClass()\n    {\n        std::cout &lt;&lt; \"Derived Deleted\" &lt;&lt; std::endl;\n    }\n\n    static std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; List; //shared_ptr of baseclass can point to derivedclass\n};\n\nstd::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; BaseClass::List;\nstd::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; DerivedClass::List;\n\nint main()\n{\n    auto base = Factory::Make&lt;BaseClass&gt;();\n    auto derived = Factory::Make&lt;DerivedClass&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4233298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e9fabfd80dbe1067acff55a31af2dc?s=128&d=identicon&r=PG&f=1", "display_name": "jcg", "link": "https://stackoverflow.com/users/4233298/jcg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530171430, "creation_date": 1530112974, "question_id": 51066435, "link": "https://stackoverflow.com/questions/51066435/adding-shared-ptr-to-self-to-vector-in-constructor-of-object-in-a-way-that-suppo", "title": "Adding shared_ptr to self to vector in constructor of object in a way that supports inheritance", "body": "<p>I want references to created objects to be automatically added to a vector (often multiple vectors), when the objects are created. To give some context, this code will be used in a game for sets of game objects (Drawable, Collidable, Enemies, etc) hence the need for multiple vectors.</p>\n\n<p>An example of what I am trying to achieve is shown here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\nclass BaseClass :public std::enable_shared_from_this&lt;BaseClass&gt;\n{ //for example \"drawable\"\npublic:\n    BaseClass()\n    {\n        std::cout &lt;&lt; \"Base Created\"&lt;&lt;std::endl;\n        BaseList.push_back(shared_from_this());//I want to put a reference to this object in a vector\n    }\n    ~BaseClass()\n    {\n        std::cout &lt;&lt; \"Base Deleted\"&lt;&lt;std::endl;\n    }\n    static std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; BaseList;\n\n};\nclass DerivedClass :public BaseClass\n{//for example \"enemy\"\npublic:\n    static std::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; DerivedList; //shared_ptr of baseclass can point to derivedclass\n    DerivedClass()\n    {\n        std::cout &lt;&lt; \"Derived Created\" &lt;&lt; std::endl;\n        DerivedList.push_back(shared_from_this());//reference to this object in a vector in addition to the other vector\n    }\n    ~DerivedClass()\n    {\n        std::cout &lt;&lt; \"Derived Deleted\" &lt;&lt; std::endl;\n    }\n};\nstd::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; BaseClass::BaseList;\nstd::vector&lt;std::shared_ptr&lt;BaseClass&gt;&gt; DerivedClass::DerivedList;\nint main()\n{\n\n    std::shared_ptr&lt;BaseClass&gt; C = std::make_shared&lt;BaseClass&gt;();\n    std::shared_ptr&lt;BaseClass&gt; D = std::make_shared&lt;DerivedClass&gt;();\n\n    BaseClass::BaseList.clear(); //C should be deleted, D should not since it is still in DerivedList\n    DerivedClass::DerivedList.clear(); //now D should be deleted\n    return 0;\n}\n</code></pre>\n\n<p>In this code, the use of <code>shared_from_this()</code> does not work correctly, since it is in a constructor (<a href=\"https://stackoverflow.com/questions/31924396/why-shared-from-this-cant-be-used-in-constructor-from-technical-standpoint/\">As Shown Here</a>). Previously I have overcome this issue using separate static functions, for example:</p>\n\n<pre><code>void BaseClass::makeOne()\n{\n    std::shared_ptr&lt;BaseClass&gt; P(new BaseClass());\n    BaseClass::BaseList.push_back(P);\n}\n\nvoid DerivedClass::makeOne()\n{\n    std::shared_ptr&lt;BaseClass&gt; P(new DerivedClass());\n    BaseList.push_back(P);\n    DerivedList.push_back(P);\n}\n</code></pre>\n\n<p>however in a context where multiple classes are derived from a single base class, and each derived class may also be added to other vectors, code duplication becomes an issue (<code>BaseList.push_back(P)</code> should be called for every object that inherits <code>BaseClass</code>, and hence must be written in every <code>X::MakeOne()</code> where <code>X</code> inherits <code>BaseClass</code> ). </p>\n\n<p>I have also overcome this issue by simply using raw pointers (<code>std::vector&lt;BaseClass*&gt;</code>) however this loses the benefit of simple memory management and reference counting when objects are referenced in multiple places. Is there a better option for memory management in this situation?</p>\n"}, {"tags": ["c++", "qt", "shared-ptr"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1530112868, "post_id": 51066334, "comment_id": 89122641, "body": "In order to delete your label object you need to properly set its parent. In general it should be widget that holds it, i.e. <code>multiWidget</code> in your case."}, {"owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1530113734, "post_id": 51066334, "comment_id": 89123129, "body": "@vahancho so when <code>mutliWidget</code> takes control of the layout does it also take control of the widgets in the layout? Is it deleting <code>label</code> for me?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1530113960, "post_id": 51066334, "comment_id": 89123252, "body": "Yes, <code>multiWidget</code> will delete its child object <code>label</code> if it&#39;s created before <code>label</code>. You might refer to this reading: <a href=\"http://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/objecttrees.html</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1530122273, "post_id": 51066885, "comment_id": 89127529, "body": "If you are going to use a layout it is not necessary to indicate a parent, since the layout will be established by your parent <code>label = new QLabel(QLatin1String(&quot;TEST&quot;));</code>"}], "tags": [], "owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "is_accepted": true, "score": 2, "last_activity_date": 1530114547, "creation_date": 1530114547, "answer_id": 51066885, "question_id": 51066334, "link": "https://stackoverflow.com/questions/51066334/when-are-widgets-deleted-in-qt-qvboxlayout-class/51066885#51066885", "title": "When are widgets deleted in Qt (QVBoxLayout class)?", "body": "<p>In order to properly set up the <a href=\"http://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow noreferrer\">objects tree</a> you need to do the following:</p>\n\n<ul>\n<li>Create the container widget first,</li>\n<li>Create child widget and set it's parent,</li>\n<li>Create layout of the container widget,</li>\n<li>Add widget to the layout.</li>\n</ul>\n\n<p>Here is the code that demonstrates the mentioned approach:</p>\n\n<pre><code>Dock::Dock()\n  :\n    QDockWidget()\n{\n  QWidget* multiWidget = new QWidget;\n  label = new QLabel(QLatin1String(\"TEST\"), multiWidget); // Set parent\n\n  QVBoxLayout* layout = new QVBoxLayout(multiWidget); // Sets layout\n  layout-&gt;addWidget(label, 0, Qt::AlignTop);\n  layout-&gt;addStretch(-1);\n\n  setWidget(multiWidget);\n}\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 51066885, "answer_count": 1, "score": 0, "last_activity_date": 1530114547, "creation_date": 1530112652, "question_id": 51066334, "link": "https://stackoverflow.com/questions/51066334/when-are-widgets-deleted-in-qt-qvboxlayout-class", "title": "When are widgets deleted in Qt (QVBoxLayout class)?", "body": "<p>I have some simple code to create a new widget using Qt:</p>\n\n<pre><code>Dock::Dock() : QDockWidget() {\n    label = new QLabel(QLatin1String(\"TEST\"));\n\n    QVBoxLayout* layout = new QVBoxLayout();\n    layout-&gt;addWidget(label, 0, Qt::AlignTop);\n    layout-&gt;addStretch(-1);\n\n    QWidget* multiWidget = new QWidget();\n    multiWidget-&gt;setLayout(layout);\n\n    setWidget(multiWidget);\n}\n</code></pre>\n\n<p>Where <code>label</code> is a private member <code>QLabel* label</code>.  My question is: am I responsible for deleting <code>label</code> in <code>Dock</code>'s destructor?  </p>\n\n<p>I tried changing the code so that <code>label</code> is a <code>std::shared_ptr&lt;QLabel&gt;</code>:</p>\n\n<pre><code>Dock::Dock() : QDockWidget() {\n    label = std::make_shared&lt;QLabel&gt;(QLatin1String(\"TEST\"));\n\n    QVBoxLayout* layout = new QVBoxLayout();\n    layout-&gt;addWidget(label.get(), 0, Qt::AlignTop);\n    layout-&gt;addStretch(-1);\n\n    QWidget* multiWidget = new QWidget();\n    multiWidget-&gt;setLayout(layout);\n\n    setWidget(multiWidget);\n}\n</code></pre>\n\n<p>So that it is deleted automatically when `Dock' is destroyed but I get an error when I close the program.</p>\n"}, {"tags": ["c++", "arrays", "sorting", "binary-search-tree"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530112460, "post_id": 51066214, "comment_id": 89122404, "body": "You have plenty of chances of memory leaks, especially since you don&#39;t do anything with the pointers returned by the recursive calls."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530112538, "post_id": 51066214, "comment_id": 89122449, "body": "As for your problem, is the array you allocate supposed to be used and shared by <i>all</i> calls to the <code>inorder</code> function? Then besides that it&#39;s <i>not</i> shared in any way, you don&#39;t even initialize it. And really, stop using <code>new[]</code> when you have access to <code>std::vector</code>."}, {"owner": {"reputation": 9, "user_id": 9281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12141c5bbdd02e4d91dc21690242824a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav1527", "link": "https://stackoverflow.com/users/9281988/gaurav1527"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530114858, "post_id": 51066214, "comment_id": 89123773, "body": "vector&lt;int&gt; inorder(node* root) { \tvector&lt;int&gt; v; \tif(root==NULL) \treturn; //what to return if the root is NULL \tinorder(root-&gt;left); \tv.push_back(root-&gt;data) \tinorder(root-&gt;right); \treturn v; }"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530147036, "post_id": 51066214, "comment_id": 89136075, "body": "It&#39;s no surprise that your array contains garbage. When do you set the value of any element in the array other than <code>arr[0]</code> (more precisely, <code>arr[i]</code> with <code>i</code> equal to <code>0</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12141c5bbdd02e4d91dc21690242824a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav1527", "link": "https://stackoverflow.com/users/9281988/gaurav1527"}, "edited": false, "score": 0, "creation_date": 1530115415, "post_id": 51067058, "comment_id": 89124071, "body": "Using inorder i want to form a vector and that vector i will pass in main () to check whether it is sorted or not if it is sorted then it is Bst.I want to do it with vector"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 9, "user_id": 9281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12141c5bbdd02e4d91dc21690242824a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav1527", "link": "https://stackoverflow.com/users/9281988/gaurav1527"}, "edited": false, "score": 0, "creation_date": 1530116047, "post_id": 51067058, "comment_id": 89124404, "body": "@Gaurav1527 Added a conversion function for you."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1530117306, "last_edit_date": 1530117306, "creation_date": 1530115138, "answer_id": 51067058, "question_id": 51066214, "link": "https://stackoverflow.com/questions/51066214/check-whether-a-tree-is-a-binary-search-tree-using-inorder/51067058#51067058", "title": "Check whether a tree is a binary search tree using inorder", "body": "<p>Using a vector is unnecessary here. Determining whether a tree is a binary search tree does not require any extra memory apart from the stack for the recursive calls.</p>\n\n<p>If you define a separate inorder tree traversal algorithm that makes the implementation almost trivial:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;functional&gt;\n\ntemplate&lt;class T&gt;\nstruct Node {\n    T value;\n    Node *left, *right;\n};\n\ntemplate&lt;class T, class F&gt;\nbool traverse_inorder(Node&lt;T&gt; const* tree, F&amp;&amp; f) {\n    return !tree || (\n           traverse_inorder(tree-&gt;left, std::forward&lt;F&gt;(f))\n        &amp;&amp; f(tree-&gt;value)\n        &amp;&amp; traverse_inorder(tree-&gt;right, std::forward&lt;F&gt;(f))\n        );\n}\n\ntemplate&lt;class T, class Pred&gt;\nbool is_bst(Node&lt;T&gt; const* tree, Pred&amp;&amp; pred) {\n    T const* p = 0;\n    return traverse_inorder(tree, [&amp;p, &amp;pred](T const&amp; next) {\n        T const* prev = p;\n        p = &amp;next;\n        return !prev || !pred(next, *prev);\n    });\n}\n\ntemplate&lt;class T&gt;\nbool is_bst(Node&lt;T&gt; const* tree) {\n    return is_bst(tree, std::less&lt;T&gt;{});\n}\n\nint main() {\n    // bst tree:\n    //       33\n    //   20      35\n    // 10  30\n    Node&lt;int&gt; n1{10}, n3{30}, n2{20, &amp;n1, &amp;n3}, n5{35}, n4{33, &amp;n2, &amp;n5};\n    auto tree = &amp;n4;\n\n    std::cout &lt;&lt; is_bst(tree) &lt;&lt; '\\n'; // Outputs 1.\n\n    // Break bst property.\n    n4.value = 25;\n    std::cout &lt;&lt; is_bst(tree) &lt;&lt; '\\n'; // Outputs 0.\n}\n</code></pre>\n\n<hr>\n\n<p>To convert a tree into a vector using inorder traversal you can use the following function:</p>\n\n<pre><code>template&lt;class T&gt;\nstd::vector&lt;T&gt; inorder_to_vector(Node&lt;T&gt; const* tree) {\n    std::vector&lt;T&gt; v;\n    traverse_inorder(tree, [&amp;v](T const&amp; t) {\n        v.push_back(t);\n        return true;\n    });\n    return v;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12141c5bbdd02e4d91dc21690242824a?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav1527", "link": "https://stackoverflow.com/users/9281988/gaurav1527"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530117306, "creation_date": 1530112265, "last_edit_date": 1530117089, "question_id": 51066214, "link": "https://stackoverflow.com/questions/51066214/check-whether-a-tree-is-a-binary-search-tree-using-inorder", "title": "Check whether a tree is a binary search tree using inorder", "body": "<pre><code>int* inorder(node* root)\n{\n    //Dynamically Created array as we are required to pass array into main function\n    int* arr=new int[100];\n    int i=0;\n    if(root==NULL)\n    return 0;\n    inorder(root-&gt;left);\n    arr[i]=root-&gt;data;\n    i++;\n    inorder(root-&gt;right);\n    return arr;\n}\n</code></pre>\n\n<p>We are required to check whether the tree is Bst or not using Inorder traversal.If the data present in the array are sorted then it is Bst.After passing the array in main() we will check whether the array is sorted or not but <strong>when i checked the content of the array it comes out to be a garbage value</strong>\nand tree always comes out to be not a Bst for input tree that is bst </p>\n\n<pre><code>int main()\n{\n    node* root= newNode(6);\n    root-&gt;left= newNode(4);\n    root-&gt;right= newNode(8);\n    root-&gt;left-&gt;left= newNode(3);\n    root-&gt;left-&gt;right= newNode(5);\n    root-&gt;right-&gt;left= newNode(7);\n    root-&gt;right-&gt;right= newNode(9);\n    int* ptr=inorder(root);\n    if(is_sorted(ptr,ptr+7))\n    cout&lt;&lt;\"Tree is Binary search tree: \"&lt;&lt;endl;\n    else\n    cout&lt;&lt;\"Tree is not a binary search tree: \"&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "ram", "large-data", "chaiscript"], "answers": [{"comments": [{"owner": {"reputation": 3168, "user_id": 29975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/003bd8a26546a71a644e785fa429f825?s=128&d=identicon&r=PG", "display_name": "lefticus", "link": "https://stackoverflow.com/users/29975/lefticus"}, "edited": false, "score": 1, "creation_date": 1530745312, "post_id": 51176046, "comment_id": 89345496, "body": "As the author of ChaiScript I will comment that yes, all objects are deleted after they leave the current scope. I think this makes ChaiScript one of the very few scripting languages where you can rely on object lifetime and have predictable destructor calls.  So in the case of your &quot;data&quot; object, it&#39;s effectively a global, living in the top scope, there&#39;s no way for it to get destroyed. You could put it in an explicit <code>{}</code> scope as you can with C++."}, {"owner": {"reputation": 606, "user_id": 4759339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mkL09.jpg?s=128&g=1", "display_name": "jan.sende", "link": "https://stackoverflow.com/users/4759339/jan-sende"}, "reply_to_user": {"reputation": 3168, "user_id": 29975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/003bd8a26546a71a644e785fa429f825?s=128&d=identicon&r=PG", "display_name": "lefticus", "link": "https://stackoverflow.com/users/29975/lefticus"}, "edited": false, "score": 0, "creation_date": 1530792226, "post_id": 51176046, "comment_id": 89363321, "body": "Thanks for the clarification! I played for a while with the idea of adding scripting support to my programme, but I did not know how to do that. I found <i>chaiscript</i> by accident, but am quite happy to see it solve my problems so easily :D"}], "tags": [], "owner": {"reputation": 606, "user_id": 4759339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mkL09.jpg?s=128&g=1", "display_name": "jan.sende", "link": "https://stackoverflow.com/users/4759339/jan-sende"}, "is_accepted": true, "score": 1, "last_activity_date": 1530714659, "creation_date": 1530714659, "answer_id": 51176046, "question_id": 51066031, "link": "https://stackoverflow.com/questions/51066031/how-does-chaiscript-handle-big-objects/51176046#51176046", "title": "How does chaiscript handle big objects?", "body": "<p>After lots of testing, I found the answer to my questions with the following code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;chaiscript/chaiscript.hpp&gt;\n\nstd::vector&lt;int&gt; create_big_structure() {\n  //This is 1GB in size.\n  return std::vector&lt;int&gt;(268435456);\n}\nstd::vector&lt;int&gt; update_structure(int i, const std::vector&lt;int&gt;&amp; data) {\n  //This is 1GB in size.\n  return std::vector&lt;int&gt;(268435456);\n}\nvoid output_data_evolution(const std::vector&lt;int&gt;&amp; data, const std::vector&lt;int&gt;&amp; new_data) {}\n\nint main() {\n  chaiscript::ChaiScript chai;\n\n  chai.add(chaiscript::fun(&amp;create_big_structure), \"create_big_structure\");\n  chai.add(chaiscript::fun(&amp;update_structure), \"update_structure\");\n  chai.add(chaiscript::fun(&amp;output_data_evolution), \"output_data_evolution\");\n  chai.add(chaiscript::bootstrap::standard_library::vector_type&lt;std::vector&lt;int&gt;&gt;(\"VectorInt\"));\n  chai.eval(R\"(\n    var max = 5;\n    var data = create_big_structure();\n    for (var i = 1; i &lt; max; ++i)\n    {\n      var new_data = update_structure(i, data);\n      output_data_evolution(data, new_data);\n      data = new_data;\n    }\n  )\");\n}\n</code></pre>\n\n<p>I ran the code using MSVC, and looked at the runtime statistics to figure out what happened in the RAM: <a href=\"https://i.stack.imgur.com/9wMio.png\" rel=\"nofollow noreferrer\">Runtime Statistics</a></p>\n\n<p>The code works reasonably. After a startup phase, 1GB of RAM is allocated for the <code>data</code> object. In the loop, the RAM stays at 2GB, because we also have the <code>new_data</code> object. After the loop, it falls down to 1GB.</p>\n\n<p>Therefore, the answers to my questions are:</p>\n\n<ol>\n<li><em>chaiscript</em> does indeed delete the data after each looping of the for statement.</li>\n<li><em>chaiscript</em> does delete the data after the loops as well.</li>\n<li>Yes, you need to check that the c++ functions do not create unnecessary data. For example, if you write with a copy instead of a reference -- <code>update_structure(int i, std::vector&lt;int&gt; data)</code>, then the function will use a copy of data, and therefore the RAM will jump to 3GB in the loop.</li>\n<li><em>chaiscript</em> does not delete unused data inside the same block. (<code>new_data</code> is deleted after the loop, but not <code>data</code>.)</li>\n</ol>\n"}], "owner": {"reputation": 606, "user_id": 4759339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mkL09.jpg?s=128&g=1", "display_name": "jan.sende", "link": "https://stackoverflow.com/users/4759339/jan-sende"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 51176046, "answer_count": 1, "score": 0, "last_activity_date": 1530714659, "creation_date": 1530111707, "question_id": 51066031, "link": "https://stackoverflow.com/questions/51066031/how-does-chaiscript-handle-big-objects", "title": "How does chaiscript handle big objects?", "body": "<p>I am considering using <em>chaiscript</em> for my project. However, I have a question about performance. Maybe it has been answered already somewhere, but I couldn't find it...</p>\n\n<p>I have a simulation using large data structures (at least 1-2GB). Therefore, I fear that I will blow my RAM by doing something like this in chaiscript:</p>\n\n<pre><code>var data = create_big_structure();\nfor (var i = 1; i &lt; max; ++i)\n{\n   var new_data = update_structure(i, data);\n   output_data_evolution(data, new_data);\n   data = new_data;\n}\n//data is not needed anymore\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Will <em>chaiscript</em> delete the data between each loop execution? Namely <code>new_data</code>...</li>\n<li>Will <em>chaiscript</em> delete the data after exiting loops? Again <code>new_data</code>...</li>\n<li>If the answer to 1. and 2. is yes, is there another way I would need to check, to still be safe?</li>\n<li>Will <em>chaiscript</em> delete unused variables? Namely <code>data</code>, after the loop... (I guess the answer is no.)</li>\n</ol>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c++", "loops", "auto"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1530111836, "post_id": 51065989, "comment_id": 89121990, "body": "Because <code>auto</code> is deduced to <code>int</code> in this context? What did you think it is?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1530112171, "post_id": 51065989, "comment_id": 89122208, "body": "The explicit-loop equivalent is <code>... { auto m = ar[i]; cout &lt;&lt; &amp;m &lt;&lt; ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 6, "last_activity_date": 1530113231, "last_edit_date": 1530113231, "creation_date": 1530112290, "answer_id": 51066227, "question_id": 51065989, "link": "https://stackoverflow.com/questions/51065989/displaying-addresses-using-range-based-loops-in-c/51066227#51066227", "title": "Displaying addresses using range-based loops in C++", "body": "<p>Because with <code>auto m</code> you are passing (array) elements by value / copy in your range based loop:</p>\n\n<pre><code>for (auto m : ar) { // pass by value\n    std::cout &lt;&lt; &amp;m &lt;&lt; ' '; // prints addresses of copies, not the actual array elements\n}\n</code></pre>\n\n<p>This means <code>m</code> becomes a copy of an array element in each iteration and has its own address in the memory.</p>\n\n<p>If you passed by reference (<code>auto&amp; m</code>) or reference to const (<code>const auto&amp; m</code>), you would observe the expected results:</p>\n\n<pre><code>for (auto&amp; m : ar) { // pass by reference\n    std::cout &lt;&lt; &amp;m &lt;&lt; ' '; // prints addresses of the actual array elements\n}\n</code></pre>\n\n<p>Now <code>m</code> <strong>is</strong> an actual array element and <code>&amp;m</code> represents the array element address as expected.</p>\n"}], "owner": {"reputation": 11, "user_id": 10000618, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pjB05rlqntQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3AVelHZTckfiu3WGefFUky-GWu4g/mo/photo.jpg?sz=128", "display_name": "david smith", "link": "https://stackoverflow.com/users/10000618/david-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530113231, "creation_date": 1530111580, "last_edit_date": 1530112177, "question_id": 51065989, "link": "https://stackoverflow.com/questions/51065989/displaying-addresses-using-range-based-loops-in-c", "title": "Displaying addresses using range-based loops in C++", "body": "<p>Why doesn't the range-based loop with <code>auto</code> display addresses?\nThe <code>for</code> loop:</p>\n\n<pre><code>for (int i = 0; i &lt; s; i++) cout &lt;&lt; &amp;ar[i] &lt;&lt; endl; \n</code></pre>\n\n<p>works normally, but range-based loop with <code>auto</code> doesn't:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nint main() {\n    int ar[] = { 12,-23,0,1,2 };\n    int s = sizeof(ar) / sizeof(int);\n    int * m = &amp;ar[0];\n    sort(&amp;ar[0], m+ s);\n    for (auto m : ar)\n        cout &lt;&lt; m &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    for (auto m : ar)\n        cout &lt;&lt; &amp;m &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    for (int i = 0; i &lt; s; i++)\n        cout &lt;&lt; &amp;ar[i] &lt;&lt; endl;\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "outlook"], "comments": [{"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530660620, "post_id": 51065913, "comment_id": 89311308, "body": "Did you try UTF-16 encoding of the password ? Which version of outlook are you using ?"}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530661333, "post_id": 51065913, "comment_id": 89311433, "body": "Also, do not include terminal 0 of the string in the blob size."}, {"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1530838165, "post_id": 51065913, "comment_id": 89384691, "body": "What version of Outlook is this?"}, {"owner": {"reputation": 641, "user_id": 4656230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul9ls.jpg?s=128&g=1", "display_name": "Diego Bauleo", "link": "https://stackoverflow.com/users/4656230/diego-bauleo"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1530841253, "post_id": 51065913, "comment_id": 89385266, "body": "This code specifically is for Outlook 2010. I know 2013 and 2016 changed the algorithm and registry location, but I figured I&#39;d start with 2010 and then move to the other two. Will try your recommendations @MichaelDoubez!"}], "answers": [{"tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1531719315, "last_edit_date": 1531719315, "creation_date": 1531718612, "answer_id": 51355031, "question_id": 51065913, "link": "https://stackoverflow.com/questions/51065913/outlook-refuses-password-from-cryptprotectdata/51355031#51355031", "title": "Outlook refuses password from CryptProtectData()", "body": "<p>This line looks suspicious:</p>\n\n<pre><code>DWORD cbDataInput = strlen((char *)pbDataInput)+1;\n</code></pre>\n\n<p>When you call crypt from C#:</p>\n\n<pre><code>crypt(Encoding.UTF8.GetBytes(\"MyPassword\"));\n</code></pre>\n\n<p>The <code>GetBytesCall</code> is literally retuning a byte array, of all characters in \"MyPassword\" (<code>M</code> to the <code>d</code>) but without a null terminating byte.</p>\n\n<p>So when you invoke <code>strlen</code>, you might be getting more characters consumed from the data blob array, <code>input</code> than you think.  Further, that  <code>+1</code> is not guaranteed to be including a null byte.</p>\n\n<p>Change your <code>crypt</code> function to be:</p>\n\n<pre><code>extern \"C\" DLLEXPORT DATA_BLOB crypt(BYTE *input, DWORD cbDataInput)\n    DATA_BLOB DataIn;\n    DATA_BLOB DataOut;\n    BYTE *pbDataInput = input;\n    DataIn.pbData = pbDataInput;    \n    DataIn.cbData = cbDataInput;\n</code></pre>\n\n<p>And invoke it as follows:</p>\n\n<pre><code>byte[] passwordBytes = Encoding.UTF8.GetBytes(\"MyPassword\");\nDATA_BLOB BlobData = crypt(passwordBytes, passwordBytes.length);\n</code></pre>\n\n<p>Or if you need the null byte passed:</p>\n\n<pre><code>byte[] passwordBytes = Encoding.UTF8.GetBytes(\"MyPassword\" + \"\\0\");\nDATA_BLOB BlobData = crypt(passwordBytes, passwordBytes.Length);\n</code></pre>\n\n<p>I'm not sure if that will resolve all your issues with passing passwords back and forth, but the above is the better way to pass an array of bytes between managed and native code.</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 7665343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c43c8d31f7a188e281ba830808762afc?s=128&d=identicon&r=PG&f=1", "display_name": "Tyson90", "link": "https://stackoverflow.com/users/7665343/tyson90"}, "is_accepted": false, "score": -1, "last_activity_date": 1547082886, "creation_date": 1547082886, "answer_id": 54120722, "question_id": 51065913, "link": "https://stackoverflow.com/questions/51065913/outlook-refuses-password-from-cryptprotectdata/54120722#54120722", "title": "Outlook refuses password from CryptProtectData()", "body": "<p>I am guessing that the problem is that you cannot import the password generated using CryptProtectData into Outlook. And, the different length of the password could be the reason.</p>\n\n<p>Here is what I think.\nI think that the encryption method that Outlook uses to encrypt password is different from that of CryptProtectData. In order to decrypt anything encrypted by CryptProtectData, you need to be at the same computer that you used to encrypt. See remarks at <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/dpapi/nf-dpapi-cryptprotectdata\" rel=\"nofollow noreferrer\">MSDN</a>. But, Outlook supports access from different computers with the same credential. As Outlook tries to decrypt the password, it assumes that the password is generated by it's chosen method. If it's found that the encryption method is different due to different algorithm, or enthropy, it fails to decrypt the password and shows the error.</p>\n\n<p>In order for you to import password directly into the registry, you might want to figure out how Outlook encrypts the password that the user inputs for his/her password.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2633555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de3aad0d2b0bc7527eb3f25dd05c37e?s=128&d=identicon&r=PG", "display_name": "j.b.ruler", "link": "https://stackoverflow.com/users/2633555/j-b-ruler"}, "is_accepted": false, "score": 0, "last_activity_date": 1561714742, "last_edit_date": 1561714742, "creation_date": 1561713896, "answer_id": 56804289, "question_id": 51065913, "link": "https://stackoverflow.com/questions/51065913/outlook-refuses-password-from-cryptprotectdata/56804289#56804289", "title": "Outlook refuses password from CryptProtectData()", "body": "<p>Try add some zeros to password bytes array:</p>\n\n<pre><code>...\ncrypt(Encoding.UTF8.GetBytes(\"MyPassword\").AddZeros());\n...\n\nprivate static IEnumerable&lt;byte&gt; AddZeros(this IEnumerable&lt;byte&gt; pass)\n{\n    foreach (var b in pass)\n    {\n        yield return b;\n        yield return 0;\n    }\n\n    yield return 0;\n    yield return 0;\n}\n</code></pre>\n\n<p>It must be done with POP3 password, but I'm not sure about IMAP password.</p>\n"}], "owner": {"reputation": 641, "user_id": 4656230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul9ls.jpg?s=128&g=1", "display_name": "Diego Bauleo", "link": "https://stackoverflow.com/users/4656230/diego-bauleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1561714742, "creation_date": 1530111309, "question_id": 51065913, "link": "https://stackoverflow.com/questions/51065913/outlook-refuses-password-from-cryptprotectdata", "title": "Outlook refuses password from CryptProtectData()", "body": "<p>I'm developing a tool to import Outlook profiles using a PRF file but it does not import the password, so I have to manually add it to the registry.</p>\n\n<p>I've spent lots of hours reading, testing and debugging this procedure and managed to figure out how everything works, except that Outlook refuses the password generated by CryptProtectData(). I've tried using both the C# .NET wrapper ProtectedData.Protect() and a C++ DLL calling CryptProtectData(), all to no avail.</p>\n\n<p>Whenever I change the password on the registry and open Outlook, it shows the credential dialog. If I type the password then it successfully logs into my email.</p>\n\n<p>Here is the C# code using the .NET wrapper:</p>\n\n<pre><code>RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(\"Software\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Windows Messaging Subsystem\\\\Profiles\\\\MyProfile\\\\9375CFF0413111d3B88A00104B2A6676\\\\0000000b\", true);\nByte[] Password = Encoding.UTF8.GetBytes(\"MyPassword\");\nByte[] EncPassword = ProtectedData.Protect(Password, null, DataProtectionScope.CurrentUser);\nRegKey.SetValue(\"IMAP Password\", EncPassword);\n</code></pre>\n\n<p>This code generates a binary data with 234 bytes, 39 bytes less than the password generated by Outlook (273 bytes).</p>\n\n<p>Here is the C++ code:</p>\n\n<pre><code>extern \"C\" DLLEXPORT DATA_BLOB crypt(BYTE *input) {\n    DATA_BLOB DataIn;\n    DATA_BLOB DataOut;\n    BYTE *pbDataInput = input;\n    DWORD cbDataInput = strlen((char *)pbDataInput)+1;\n    DataIn.pbData = pbDataInput;    \n    DataIn.cbData = cbDataInput;\n\n    if( !CryptProtectData(&amp;DataIn, L\"IMAP Password\", NULL, NULL, NULL, 0, &amp;DataOut) )\n    {\n        printf(\"Encryption error\");\n    }\n\n    return DataOut;\n}\n</code></pre>\n\n<p>The C# code calling the DLL:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]\npublic struct DATA_BLOB\n{\n    public int cbData;\n    public IntPtr pbData;\n}\n\n[DllImport(\"MyLib.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern DATA_BLOB crypt(Byte[] input);\n\n(...)\n\nRegistryKey RegKey = Registry.CurrentUser.OpenSubKey(\"Software\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Windows Messaging Subsystem\\\\Profiles\\\\MyProfile\\\\9375CFF0413111d3B88A00104B2A6676\\\\0000000b\", true);\nByte[] Password = Encoding.UTF8.GetBytes(\"MyPassword\");\nDATA_BLOB BlobData = crypt(Encoding.UTF8.GetBytes(\"MyPassword\"));\nByte[] EncPassword = new Byte[BlobData.cbData];\nMarshal.Copy(BlobData.pbData, EncPassword, 0, BlobData.cbData);\n\nRegKey.SetValue(\"IMAP Password\", EncPassword);\n</code></pre>\n\n<p>This code generates a password with 256 bytes, still not the 273 bytes I get from Outlook.</p>\n\n<p>My guess is that these missing bytes are from a specific entropy I'm not using or even some detail I'm missing.</p>\n\n<p>Any tip on the right direction will help a lot.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1530111447, "post_id": 51065911, "comment_id": 89121737, "body": "You do know that <code>std::pow</code> operates on floating point numbers, not integers, right?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1530111449, "post_id": 51065911, "comment_id": 89121740, "body": "<i>pow() function gives an error</i> and the error is what exactly?"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1530111474, "post_id": 51065911, "comment_id": 89121759, "body": "<a href=\"https://en.cppreference.com/w/c/numeric/math/pow\" rel=\"nofollow noreferrer\"><code>pow()</code></a> returns a real number that when stored in the floating-point format is not exact. Your code should use only integer values and computing the powers of <code>10</code> are not difficult."}, {"owner": {"reputation": 1, "user_id": 10000655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NooNnnDx1i8/AAAAAAAAAAI/AAAAAAAAADc/0cnZKFkoHLQ/photo.jpg?sz=128", "display_name": "gbigz", "link": "https://stackoverflow.com/users/10000655/gbigz"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1530111579, "post_id": 51065911, "comment_id": 89121816, "body": "pow(10,2) = 99 it should be 100 @Borgleader"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1530111864, "post_id": 51065911, "comment_id": 89122003, "body": "<a href=\"http://coliru.stacked-crooked.com/a/cafd84b9eead7e4d\" rel=\"nofollow noreferrer\">Cannot repro</a>"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1530112153, "post_id": 51065911, "comment_id": 89122192, "body": "@KevinBigay <code>pow(10,2) ~= 100.00</code>. The troublemaker is the assignment of a real value to an integer variable. Don&#39;t use real numbers, you don&#39;t need them. Stick with integers."}, {"owner": {"reputation": 1, "user_id": 10000655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NooNnnDx1i8/AAAAAAAAAAI/AAAAAAAAADc/0cnZKFkoHLQ/photo.jpg?sz=128", "display_name": "gbigz", "link": "https://stackoverflow.com/users/10000655/gbigz"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1530112221, "post_id": 51065911, "comment_id": 89122245, "body": "to those who helped me. thank you so much. i found a way to make the pow(10,2) become 100 not 99. i used the pow(10,2) as a parameter for the ceil() function @Borgleader"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1530116091, "post_id": 51065911, "comment_id": 89124433, "body": "@gibgz That is still dangerous. Your problem is that floating point math may give you 99.999994 or 100.000003 or similar. The latter could produce incorrect results with your method. Just round to the <i>nearest</i> integer, i.e. <a href=\"https://en.cppreference.com/w/cpp/numeric/math/round\" rel=\"nofollow noreferrer\">std::round</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530117316, "post_id": 51065911, "comment_id": 89125120, "body": "BTW, on most platforms, <code>10 * 10</code> is more efficient and accurate than <code>pow(10,2)</code>.  Minimally there is a function call involved (which may cause the processor to reload the instruction pipeline).  The multiplication usually involves a few assembly instructions and is more accurate.  Although a smart compiler could replace the expression with 100."}], "owner": {"reputation": 1, "user_id": 10000655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NooNnnDx1i8/AAAAAAAAAAI/AAAAAAAAADc/0cnZKFkoHLQ/photo.jpg?sz=128", "display_name": "gbigz", "link": "https://stackoverflow.com/users/10000655/gbigz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "closed_date": 1530111476, "answer_count": 0, "score": 0, "last_activity_date": 1530111338, "creation_date": 1530111304, "last_edit_date": 1530111338, "question_id": 51065911, "link": "https://stackoverflow.com/questions/51065911/pow-function-gives-an-error", "closed_reason": "Duplicate", "title": "pow() function gives an error", "body": "<pre><code>#include &lt;iostream&gt;\n#include&lt;cmath&gt;\n\nusing namespace std;\n\nint main(){\n\n    int input;\n    int mod = 1;\n    int x;\n    cout &lt;&lt; \"Please Enter a four digit Integer: \";\n    cin &gt;&gt; input;\n\n    for(int i = 3; i &gt;= 0; i--){\n        mod = pow(10,i);\n        x = input / mod;\n        input = input % mod;\n        cout &lt;&lt; x &lt;&lt; \"  \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>this is a programming exercise. we are asked to get a 4 digit input from keyboard and display the input with 2 whitespaces in between the number. the problem is with the pow(10,i) function. when i checked what the function gives to the \"mod\" var is when i is equal to 2, it results to 99 but not 100 because 10 raised to 2 is 100. can you help me debug the code? Thank you</p>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 4, "creation_date": 1530111036, "post_id": 51065783, "comment_id": 89121470, "body": "The answer is in the error message: invalid initialization of <b>non-const reference</b>. Use const reference: <code>const A&amp; sum = a1 + a1;</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1530111050, "post_id": 51065783, "comment_id": 89121476, "body": "<code>a1 + a1</code> produces a temporary. A temporary cannot bind to a non-const reference."}, {"owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1530111111, "post_id": 51065783, "comment_id": 89121517, "body": "@S.M. Hye , can you explain what is the problem to do it with non-const reference? Why I must with const reference?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 3, "creation_date": 1530111291, "post_id": 51065783, "comment_id": 89121636, "body": "Shortly: because you can not modify temp objects (rvalue). If you try to assign it to non-const reference, you tell to a compiler that you want to modify a temp object later."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1530114319, "post_id": 51065824, "comment_id": 89123450, "body": "It might be worth mentioning that MSVC14 actually allows binding temporaries to non-const references as an extension (which presumably includes lifetime extension). Not that you should do it, but maybe someone would be surprised Visual Studio is ok with it."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1530111044, "creation_date": 1530111044, "answer_id": 51065824, "question_id": 51065783, "link": "https://stackoverflow.com/questions/51065783/why-i-get-this-error-invalid-initialization-of-non-const-reference-of-type-a/51065824#51065824", "title": "Why I get this error &quot;invalid initialization of non-const reference of type &#39;A&amp;&#39; from an rvalue of type &#39;A&#39;&quot;", "body": "<p>A <em>reference</em> cannot bind to an anonymous temporary. And <code>a1 + a1</code> is an anonymous temporary.</p>\n\n<p>Out of interest, a <code>const</code> reference can bind, so <code>const A&amp; sum = a1 + a1;</code> is allowed. Furthermore in that particular case, the <em>lifetime</em> of that temporary is extended to the lifetime of the reference (although it's important to note that this is not <em>transitive</em>).</p>\n"}, {"comments": [{"owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "edited": false, "score": 0, "creation_date": 1530111505, "post_id": 51065845, "comment_id": 89121781, "body": "In fact, what is defined as a &quot;fresh object /  anonymous temporary&quot; ? In other words , why in despite to the case in my question - the following code is valid ? : <code>A a1(2); A&amp; s = a1;</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "edited": false, "score": 0, "creation_date": 1530111629, "post_id": 51065845, "comment_id": 89121852, "body": "@Software_t Because you named <code>a1</code>. It lives in a scope and have a defined lifetime."}, {"owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "edited": false, "score": 0, "creation_date": 1530111689, "post_id": 51065845, "comment_id": 89121887, "body": "Ok , I know understand the concept, because that in my question it&#39;s rvalue so it&#39;s problematic , no?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "edited": false, "score": 2, "creation_date": 1530111784, "post_id": 51065845, "comment_id": 89121954, "body": "An <i>rvalue</i> is --- simplifying --- a temporary."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 4, "last_activity_date": 1530111103, "creation_date": 1530111103, "answer_id": 51065845, "question_id": 51065783, "link": "https://stackoverflow.com/questions/51065783/why-i-get-this-error-invalid-initialization-of-non-const-reference-of-type-a/51065845#51065845", "title": "Why I get this error &quot;invalid initialization of non-const reference of type &#39;A&amp;&#39; from an rvalue of type &#39;A&#39;&quot;", "body": "<pre><code>A operator+(const A&amp; a1, const A&amp; a2)\n</code></pre>\n\n<p>This returns a fresh object (an anonymous temporary) of type <code>A</code>.</p>\n\n<pre><code>A&amp; sum = a1 + a1;\n</code></pre>\n\n<p>You try to bind this temporary to a (non-const) reference; thus trying to craft a reference to an object whose lifetime is about to end. Hopefully, this is not legal in C++. You really need to \"<em>store</em>\" this object somewhere:</p>\n\n<pre><code>A sum = a1 + a1;\n</code></pre>\n\n<hr>\n\n<p>A special case:</p>\n\n<pre><code>A const&amp; sum = a1 + a1;\n</code></pre>\n\n<p>When a temporary is bound to a const-reference, the lifetime of this object is extended to the lifetime of the reference. This is useful for function argument, but not advised here.</p>\n"}], "owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 51065845, "answer_count": 2, "score": 1, "last_activity_date": 1530111103, "creation_date": 1530110917, "question_id": 51065783, "link": "https://stackoverflow.com/questions/51065783/why-i-get-this-error-invalid-initialization-of-non-const-reference-of-type-a", "title": "Why I get this error &quot;invalid initialization of non-const reference of type &#39;A&amp;&#39; from an rvalue of type &#39;A&#39;&quot;", "body": "<p>Given the following code:  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::ostream;\n\nclass A {\n    int x;\npublic:\n    A(int x) :\n            x(x) {\n    }\n    A&amp; operator+=(const A&amp; a) {\n        this-&gt;x = this-&gt;x + a.x;\n        return *this;\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const A&amp; a);\n\n};\n\nA operator+(const A&amp; a1, const A&amp; a2) {\n    return A(a1) + a2;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, const A&amp; a) {\n    return os &lt;&lt; a.x;\n}\n\nint main() {\n    const A a1(2);\n    A&amp; sum = a1 + a1; // error**************\n    std::cout &lt;&lt; sum;\n}\n</code></pre>\n\n<p>I get the following error:  </p>\n\n<blockquote>\n  <p>invalid initialization of non-const reference of type 'A&amp;' from an rvalue of type 'A'</p>\n</blockquote>\n\n<p>But I don't understand what is the reason of this error.\nAt all, I get new object from <code>operator+</code> and I define a reference (<code>sum</code>) to this object , so what is the problem in this way? And how can I fix it?</p>\n"}, {"tags": ["c++", "x86", "sse", "simd", "avx"], "comments": [{"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 0, "creation_date": 1530110963, "post_id": 51065757, "comment_id": 89121402, "body": "If it is possible, do you know a good and efficient library that deals with wrapping and using transparently different SIMD instruction sets?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1530111326, "post_id": 51065757, "comment_id": 89121655, "body": "Possible duplicates: <a href=\"https://stackoverflow.com/q/39484012/253056\">Dispatching SIMD instructions + SIMDPP + qmake</a>; <a href=\"https://stackoverflow.com/q/27237650/253056\">Use different class upon available CPU support</a>; <a href=\"https://stackoverflow.com/q/4788592/253056\">x86 CPU Dispatching for SSE/AVX in C++</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1530113227, "post_id": 51065757, "comment_id": 89122867, "body": "It&#39;s not only possible, Intel and AMD both sell math libraries that do this (and the exact conditions under which each implementation is selected have been reverse-engineered by <a href=\"http://www.agner.org/optimize/blog/read.php?i=121\" rel=\"nofollow noreferrer\">people interested in questions like &quot;Is the Intel math library slow on AMD processors because the AMD chips don&#39;t run the code as fast, or because Intel&#39;s code selection logic is broken?&quot;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 0, "creation_date": 1530201505, "post_id": 51076175, "comment_id": 89162741, "body": "Ohhh ok so it&#39;s feasible dynamically. Thank you for the links too! Your post gave me some inspirations to other problems."}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 2, "last_activity_date": 1530167757, "creation_date": 1530167757, "answer_id": 51076175, "question_id": 51065757, "link": "https://stackoverflow.com/questions/51065757/cross-platform-simd-calls-possible-with-only-one-executable/51076175#51076175", "title": "Cross-platform SIMD calls possible with only one executable?", "body": "<p>Generally the issue is what level of granularity you want to use SIMD... Older math libraries like D3DXMath use indirect jump (i.e. virtual methods) to select at runtime a version of the function that is optimized for that instruction set. While this works in theory, the function has to do enough work to cover the overhead of the indirect call.</p>\n\n<p>For example: If you call <code>D3DXVec3Dot</code> and it selects a different version for SSE/SSE2, SSE3, or SSE4.1 most likely the cost of calling the function in the first place is more expensive that the performance savings. To really get a benefit from this kind of optimization, you need to have larger scale routines that do thousands of computations at once rather than micro-functions.</p>\n\n<blockquote>\n  <p>Note that this is why <a href=\"https://blogs.msdn.microsoft.com/chuckw/2012/03/26/introducing-directxmath/\" rel=\"nofollow noreferrer\">DirectXMath</a> is an all inline library that doesn't use indirect jump/dispatch at all. You can count on SSE/SSE2 always being supported for x64, and it's basically always supported for x86. If you happen to be building an EXE/DLL for a platform that always has AVX (such as Xbox One), then use <code>/arch:AVX</code> and the DirectXMath library will use AVX, SSE4.1, SSE3, SSE2/SSE where it makes sense. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2012/09/11/directxmath-sse-sse2-and-arm-neon/\" rel=\"nofollow noreferrer\">this blog post series</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 51076175, "answer_count": 1, "score": 0, "last_activity_date": 1530167757, "creation_date": 1530110848, "last_edit_date": 1530111578, "question_id": 51065757, "link": "https://stackoverflow.com/questions/51065757/cross-platform-simd-calls-possible-with-only-one-executable", "title": "Cross-platform SIMD calls possible with only one executable?", "body": "<p>I have recently picked up an interest in SIMD optimization after wanting to program again in C++ after a while of not doing so. Please, be descriptive as I am still a beginner with SIMD instructions.</p>\n\n<p>My question is : is it possible to compile one cross-platform executable in C++ that support a variety of SIMD instruction sets and that picks in real time the best instruction set to use? Best in terms of performance, usually most recent instruction sets are better.</p>\n\n<p>Example : I compile a game on Windows 10 with an i7-7700K and put it on Steam. Distinct users highly probably have different CPUs that support different SIMD instruction sets. When launching the game, the best SIMD instruction set is detected and used.</p>\n\n<p>Naturally, I would have to adapt my code and support a few hand selected SIMD instruction sets.</p>\n"}, {"tags": ["c++", "concurrency", "c++20"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1530110939, "post_id": 51065637, "comment_id": 89121387, "body": "Might be analogous to <code>std::lock_guard</code> and <code>std::unique_lock</code> - the former coming with a more light-weight implementation..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1530110969, "post_id": 51065637, "comment_id": 89121413, "body": "Sometimes you&#39;ll see more limited versions of some features that are less powerful but also cheaper (in terms of memory or other computational resource) to use. For example <a href=\"https://en.cppreference.com/w/cpp/thread/mutex\" rel=\"nofollow noreferrer\"><code>std::mutex</code></a> is simpler, cheaper and less powerful <a href=\"https://en.cppreference.com/w/cpp/thread/recursive_mutex\" rel=\"nofollow noreferrer\"><code>std::recursive_mutex</code></a>. I&#39;m not sure this is the same situation, but it&#39;s worth a thought."}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1530111088, "post_id": 51065637, "comment_id": 89121509, "body": "@Fran&#231;oisAndrieux That is what I guessed, however I would like to know for sure."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1530111280, "post_id": 51065637, "comment_id": 89121631, "body": "Also see : <a href=\"https://stackoverflow.com/questions/48985967/where-can-we-use-stdbarrier-over-stdlatch\" title=\"where can we use stdbarrier over stdlatch\">stackoverflow.com/questions/48985967/&hellip;</a>"}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1530111384, "post_id": 51065637, "comment_id": 89121687, "body": "@SanderDeDycker I saw that question, it is more about the &quot;when to use&quot; instead of the &quot;why&quot;."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1530111740, "post_id": 51065637, "comment_id": 89121926, "body": "@imreal : I know - that&#39;s why I didn&#39;t mark as duplicate. But I thought it might still be interesting to you (or future readers)."}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1530111899, "post_id": 51065637, "comment_id": 89122028, "body": "Close voters this is not an opinion based question, it is clear there is an objective difference between them."}], "answers": [{"comments": [{"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1530111598, "post_id": 51065941, "comment_id": 89121831, "body": "I don&#39;t understand how <code>count_down</code> differs from <code>arrive_and_drop</code>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1530111390, "creation_date": 1530111390, "answer_id": 51065941, "question_id": 51065637, "link": "https://stackoverflow.com/questions/51065637/why-stdlatch-if-there-is-stdbarrier/51065941#51065941", "title": "Why std::latch if there is std::barrier?", "body": "<p>API wise, <code>std::latch</code> lets you count down without blocking.  Imagine you have to render 172 furbles before some other task starts.  You can set up a latch with a value of 173, and have each thread that completes a furble count down the latch, and have the thread that is supposed to consume those furbles wait on the latch.</p>\n\n<p>The worker threads will count down, but not wait as they have other furbles to render.  If they go to sleep, they'd use some other synchronization primitive to do it.</p>\n\n<p><code>std::barrier</code> only lets you count down while blocking.  It could not be used to permit 10 threads to render 172 furbles.  The only thing you can do as a thread on a barrier is to reach it, or decide you aren't participating anymore.</p>\n\n<p>There may also be hardware differences, but their APIs are quite different and replacing latch use with barriers is not possible.</p>\n"}], "owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 1, "accepted_answer_id": 51065941, "answer_count": 1, "score": 3, "last_activity_date": 1530111390, "creation_date": 1530110459, "last_edit_date": 1530110724, "question_id": 51065637, "link": "https://stackoverflow.com/questions/51065637/why-stdlatch-if-there-is-stdbarrier", "title": "Why std::latch if there is std::barrier?", "body": "<p>From the documentation is pretty clear that the difference between them is that <a href=\"https://en.cppreference.com/w/cpp/experimental/barrier\" rel=\"nofollow noreferrer\"><code>std::barrier</code></a> can be used more than once and <a href=\"https://en.cppreference.com/w/cpp/experimental/latch\" rel=\"nofollow noreferrer\"><code>std::latch</code></a> can only be used once. </p>\n\n<p>That sounds to me like <code>std::latch</code> is simply a special case of <code>std::barrier</code> that adds a limitation instead of a feature. On top of that the documentation says that a call to <code>count_down</code> with an <code>n</code> greater than the internal counter is undefined behavior, so this limitation has to be enforced programatically.</p>\n\n<p>So why do we need <code>std::latch</code>?</p>\n\n<p>My only guess is that it is possible to implement <code>std::latch</code> differently at the hardware level in a way that improves performance.</p>\n\n<p>What is the reason?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530110088, "post_id": 51065452, "comment_id": 89120817, "body": "second argument is a pointer on method."}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1530110282, "post_id": 51065452, "comment_id": 89120959, "body": "That is just a function signature. No way to tell what the function would do. Presumably it takes a const reference to a table of type T and a const member function pointer from type T that takes no arguments and returns a const U reference."}, {"owner": {"reputation": 151, "user_id": 4899473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Dvc8.jpg?s=128&g=1", "display_name": "AteszDude", "link": "https://stackoverflow.com/users/4899473/ateszdude"}, "edited": false, "score": 0, "creation_date": 1530110664, "post_id": 51065452, "comment_id": 89121224, "body": "I know the second argument is a function, but is that a method of the same object? Yes, this is just a signature, my question was badly phased, I will figure it out for myself what does it do, but I can&#39;t write a line that calls the function."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1530110861, "post_id": 51065452, "comment_id": 89121342, "body": "Depends on what <code>DataExchange</code> is, and what is this <code>Table</code> concept it expects."}, {"owner": {"reputation": 151, "user_id": 4899473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Dvc8.jpg?s=128&g=1", "display_name": "AteszDude", "link": "https://stackoverflow.com/users/4899473/ateszdude"}, "edited": false, "score": 0, "creation_date": 1530256594, "post_id": 51065452, "comment_id": 89180136, "body": "The function needs an object of any class and a pointer to a method of the supplied object, which it may call later. This was the answer I was looking for, sorry for the bad wording."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4899473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Dvc8.jpg?s=128&g=1", "display_name": "AteszDude", "link": "https://stackoverflow.com/users/4899473/ateszdude"}, "edited": false, "score": 0, "creation_date": 1530256370, "post_id": 51065846, "comment_id": 89180016, "body": "Worked like a charm! Thank you! Unfortunately I got downvoted because of the bad wording of my question. One thing I don&#39;t get is why the function has 2 consts."}, {"owner": {"reputation": 121, "user_id": 8640175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb1f63ff92e59ffd12ea9fd75a17308?s=128&d=identicon&r=PG", "display_name": "Ch1v1", "link": "https://stackoverflow.com/users/8640175/ch1v1"}, "reply_to_user": {"reputation": 151, "user_id": 4899473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Dvc8.jpg?s=128&g=1", "display_name": "AteszDude", "link": "https://stackoverflow.com/users/4899473/ateszdude"}, "edited": false, "score": 1, "creation_date": 1530269064, "post_id": 51065846, "comment_id": 89187078, "body": "@KillerZefi they are there to match the method signature. The fnMemoryFunc() method will has to const, const X&amp; to said that it will return a constant reference to element X &lt;to enforce no changes on the internal state from outside of Foo class&gt; The 2nd const on nfMemoryFunc() const is to told the compiler that this method should not change any internal attribute of Foo."}], "tags": [], "owner": {"reputation": 121, "user_id": 8640175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb1f63ff92e59ffd12ea9fd75a17308?s=128&d=identicon&r=PG", "display_name": "Ch1v1", "link": "https://stackoverflow.com/users/8640175/ch1v1"}, "is_accepted": true, "score": 2, "last_activity_date": 1530112325, "last_edit_date": 1530112325, "creation_date": 1530111110, "answer_id": 51065846, "question_id": 51065452, "link": "https://stackoverflow.com/questions/51065452/how-to-call-this-member-template-function/51065846#51065846", "title": "How to call this member template function?", "body": "<p>A way is to call the function is:</p>\n\n<pre><code>struct Foo {\n    const X&amp; fnMemoryFunc() const { return /*what ever*/};\n};\nint main (){\n    Foo a;\n    AddNew(a, &amp;Foo::fnMemoryFunc)\n}\n</code></pre>\n\n<p>I change AddNew to free function per simplicity.</p>\n\n<p>EDIT: as looks in comments that you asked what it may do... this is all suppositions... and not enough info.</p>\n\n<p>AddNew needs a reference to probably a internal data of class T (cons reference return type.), that could be any type  and thats the reason because the pointer to the method is required, to know the return type.</p>\n"}], "owner": {"reputation": 151, "user_id": 4899473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Dvc8.jpg?s=128&g=1", "display_name": "AteszDude", "link": "https://stackoverflow.com/users/4899473/ateszdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 51065846, "answer_count": 1, "score": -1, "last_activity_date": 1530112325, "creation_date": 1530109910, "last_edit_date": 1530110503, "question_id": 51065452, "link": "https://stackoverflow.com/questions/51065452/how-to-call-this-member-template-function", "title": "How to call this member template function?", "body": "<p>What is the correct way to call this function?</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nDX&amp; DataExchange::AddNew(const T&amp; Table, const U&amp; (T::* fnMemoryFunc)() const)\n</code></pre>\n"}, {"tags": ["c++", "stl"], "answers": [{"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1530109918, "creation_date": 1530109918, "answer_id": 51065455, "question_id": 51065261, "link": "https://stackoverflow.com/questions/51065261/why-this-function-returns-a-link-type-but-it-was-declared-as-iterator/51065455#51065455", "title": "why this function returns a link_type but it was declared as iterator", "body": "<p><code>__list_iterator</code> has the implicit converting constructor <code>__list_iterator(link_type)</code>. It constructs an iterator from a node pointer: implicit <code>return (link_type)((*node).next)</code> is equivalent to explicit <code>return iterator((link_type)((*node).next))</code>.</p>\n\n<p>You are watching a very old GNU STL. The current one has explicit constructor:</p>\n\n<pre><code>explicit\n_List_iterator(__detail::_List_node_base* __x) _GLIBCXX_NOEXCEPT\n: _M_node(__x) { }\n\niterator\nbegin() _GLIBCXX_NOEXCEPT\n{ return iterator(this-&gt;_M_impl._M_node._M_next); }\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 8300469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147bb444f1193e83b4dd30e0a87aeddc?s=128&d=identicon&r=PG&f=1", "display_name": "W.Cameron", "link": "https://stackoverflow.com/users/8300469/w-cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51065455, "answer_count": 1, "score": 0, "last_activity_date": 1530109918, "creation_date": 1530109334, "last_edit_date": 1530109690, "question_id": 51065261, "link": "https://stackoverflow.com/questions/51065261/why-this-function-returns-a-link-type-but-it-was-declared-as-iterator", "title": "why this function returns a link_type but it was declared as iterator", "body": "<p>This is a member function that was declared in list.h\uff08GNU STL 2.9  list.h\uff09</p>\n\n<pre><code>iterator begin() { \nreturn (link_type)((*node).next); }\n</code></pre>\n\n<p>and <em>link_type</em> is </p>\n\n<pre><code>template &lt;\\class T&gt; struct __list_node\n</code></pre>\n\n<p>However,the <em>iterator</em> is</p>\n\n<pre><code>template&lt;\\class T, class Ref, class Ptr&gt; struct __list_iterat\n</code></pre>\n\n<p>The part of <code>list.h</code> are following</p>\n\n<pre><code>template &lt;class T, class Alloc = alloc&gt;\nclass list {\n  protected:\n    typedef void*                           void_pointer;\n    typedef __list_node&lt;T&gt;                  list_node;\n    typedef simple_alloc&lt;list_node, Alloc&gt;  list_node_allocator;\npublic:      \n    typedef T                   value_type;\n    typedef value_type*         pointer;\n    typedef value_type&amp; r       eference;\n    typedef const value_type&amp;   const_reference;\n    typedef list_node* l        ink_type;\n    typedef size_t              size_type;\n    typedef ptrdiff_t           difference_type;\n\npublic:\n    typedef __list_iterator&lt;T, T&amp;, T*&gt;             iterator;\n    typedef __list_iterator&lt;T, const T&amp;, const T*&gt; const_iterator;\n}\n</code></pre>\n\n<p>And the part of <code>__list_node</code> are following</p>\n\n<pre><code>template&lt;class T, class Ref, class Ptr&gt;\nstruct __list_iterator {\n  typedef __list_iterator&lt;T, T&amp;, T*&gt;             iterator;\n  typedef __list_iterator&lt;T, const T&amp;, const T*&gt; const_iterator;\n  typedef __list_iterator&lt;T, Ref, Ptr&gt;           self;\n\n  typedef bidirectional_iterator_tag iterator_category;\n  typedef T value_type;\n  typedef Ptr pointer;\n  typedef Ref reference;\n  typedef __list_node&lt;T&gt;* link_type;\n  typedef size_t size_type;\n  typedef ptrdiff_t difference_type;\n  link_type node;\n}\n</code></pre>\n\n<p>They are different type at all!??,why ?</p>\n"}, {"tags": ["c++", "hash", "c++17"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1530109701, "post_id": 51065244, "comment_id": 89120557, "body": "Notice that your &quot;working&quot; version is technically UB, as you specialize not for <b>your</b> type."}, {"owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530111793, "post_id": 51065244, "comment_id": 89121961, "body": "The whole point of the question was exactly to avoid needing to supply one.  I know it&#39;s UB."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530112852, "post_id": 51065244, "comment_id": 89122630, "body": "You can provide custom hasher and key_equal instead."}], "answers": [{"comments": [{"owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "edited": false, "score": 0, "creation_date": 1530111654, "post_id": 51065564, "comment_id": 89121863, "body": "I&#39;ve edited the question to add a link that explains the context (just as background).  As for me providing a specialization; you&#39;re right that it&#39;s not technically allowed; it&#39;s one reason I was hoping not to need to!"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1530119064, "post_id": 51065564, "comment_id": 89125983, "body": "They got this from Boost, where <code>hash_value</code> is a customization point used by <code>boost::hash</code>. Of course, <code>std::hash</code> doesn&#39;t use this design."}, {"owner": {"reputation": 698, "user_id": 2323908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80b84a0e679c6c32e168f2b8865cd4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Joakim Thor&#233;n", "link": "https://stackoverflow.com/users/2323908/joakim-thor%c3%a9n"}, "edited": false, "score": 0, "creation_date": 1592992806, "post_id": 51065564, "comment_id": 110621423, "body": "Tip: You can convert any <code>fs::path</code> into a canonical path via <code>fs::canonical(path)</code>. So <code>std::unordered_set&lt;fs::path&gt;</code> could work (except for the lack of a hash) if you ensure that any path that goes into the <code>std::unordered_set</code> is canonical."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 10, "last_activity_date": 1542619875, "last_edit_date": 1592644375, "creation_date": 1530110233, "answer_id": 51065564, "question_id": 51065244, "link": "https://stackoverflow.com/questions/51065244/is-there-no-standard-hash-for-stdfilesystempath/51065564#51065564", "title": "Is there no standard hash for `std::filesystem::path`?", "body": "<blockquote>\n<p>Since there is a <code>std::filesystem::hash_value</code> that's part of the standard, why doesn't this code compile without me having to supply my own <code>std::hash</code>?</p>\n</blockquote>\n<p>Right, there is a <code>fs::hash_value()</code> but there is no specialization of <code>std::hash&lt;fs::path&gt;</code>, which is what you would need. That's why it doesn't compile. As to why the library provides the former function but not the latter, I'll quote from <a href=\"https://www.reddit.com/r/cpp/comments/4rb294/is_there_any_particular_reason_why/d4zno3h/?st=jix80bdr&amp;sh=ee3007c8\" rel=\"nofollow noreferrer\">Billy O'Neal</a> (implementer for MSVC's standard library):</p>\n<blockquote>\n<p>Looks like a defect.</p>\n<p>However, putting paths as keys in a hash table is almost certainly incorrect; you need to test for path equivalence in most such scenarios. That is, <code>&quot;/foo/bar/../baz&quot;</code> and <code>&quot;/foo/baz&quot;</code> are the same target but are not the same path. Similarly, <code>&quot;./bar&quot;</code> and <code>&quot;./bar&quot;</code> may be different paths, depending on the value of <code>current_path</code> in the first context vs. in the second.</p>\n</blockquote>\n<p>If what you want is canonically unique paths, then simply <code>std::unordered_set&lt;fs::path&gt;</code> wouldn't do what you want anyway. So perhaps it failing to compile isn't a bad thing? I don't know enough about filesystem to say one way or the other.</p>\n<hr />\n<p>Note that you, yourself, providing a specialization of <code>std::hash</code> for <code>fs::path</code> is not allowed - you can only add specializations to <code>std</code> for types you control. Types that will be called &quot;program-defined types.&quot; <code>fs::path</code> is not a type you control, so you can't specialize <code>std::hash</code> for it.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1530126116, "creation_date": 1530126116, "answer_id": 51069753, "question_id": 51065244, "link": "https://stackoverflow.com/questions/51065244/is-there-no-standard-hash-for-stdfilesystempath/51069753#51069753", "title": "Is there no standard hash for `std::filesystem::path`?", "body": "<pre><code>namespace hashing {\n  namespace adl {\n    template&lt;class T, class...Ts&gt;\n    auto hash_value( T const&amp; t, Ts&amp;&amp;... )\n    -&gt; std::result_of_t&lt; std::hash&lt;T&gt;&amp;&amp;(T const&amp;) &gt;\n    {\n      return std::hash&lt;T&gt;{}(t);\n    }\n    template&lt;class T&gt;\n    auto hasher_private( T const&amp; t )\n    -&gt; decltype( hash_value( t ) )\n    { return hash_value(t); }\n  }\n\n  struct smart_hasher {\n    template&lt;class T&gt;\n    auto operator()( T const&amp; t ) const\n    -&gt;decltype( adl::hasher_private( t ) )\n    {    return adl::hasher_private( t ); }\n  };      \n};\n</code></pre>\n\n<p>so <code>hashing::smart_hasher</code> is a hash object that will look for <code>hash_value(T const&amp;)</code> in the namespace of <code>T</code>, and if that fails will use <code>std::hash&lt;T&gt;</code> if available, and if not will generate a compiler error.</p>\n\n<p>If you want to write additional hashers for <code>std</code> types, create a <code>hash_value</code> function overload in <code>hashing::adl</code>.  For other types, create it in their associated namespace.  For example, if you want to support hashing of <code>tuple</code>s:</p>\n\n<pre><code>namespace hashing::adl {\n  template&lt;class...Ts&gt;\n  std::size_t hash_value( std::tuple&lt;Ts...&gt; const&amp; tup ) {\n    // get hash values and combine them here\n    // use `smart_hasher{}( elem ) to hash each element for\n    // recursive smart hashing\n  }\n}\n</code></pre>\n\n<p>and now anyone using <code>smart_hasher</code> automatically picks up the hasher for anything that provides that customization.</p>\n"}, {"tags": [], "owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1596893093, "creation_date": 1596893093, "answer_id": 63315898, "question_id": 51065244, "link": "https://stackoverflow.com/questions/51065244/is-there-no-standard-hash-for-stdfilesystempath/63315898#63315898", "title": "Is there no standard hash for `std::filesystem::path`?", "body": "<p>The resolution was to explicitly write and use my own hash.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;optional&gt;\n#include &lt;unordered_set&gt;\n#include &lt;filesystem&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nnamespace fs = std::filesystem;\n\nstruct opt_path_hash {\n    std::size_t operator()(const std::optional&lt;fs::path&gt;&amp; path) const {\n        return path ? hash_value(path.value()) : 0;\n    }\n};\n\nint main()\n{\n    using namespace std::literals;\n    std::unordered_set&lt; std::optional&lt;fs::path&gt;, opt_path_hash &gt;  paths = {\n            &quot;/usr/bin&quot;s, std::nullopt, &quot;/usr//bin&quot;s, &quot;/var/log&quot;s\n    };\n\n    for(const auto&amp; p : paths)\n        std::cout &lt;&lt; p.value_or(&quot;(no path)&quot;) &lt;&lt; '\\n';\n}\n</code></pre>\n<p>This produces the following output, correctly collapsing the two versions of <code>&quot;/usr/bin&quot;</code>:</p>\n<pre><code>&quot;/var/log&quot;\n&quot;(no path)&quot;\n&quot;/usr/bin&quot;\n</code></pre>\n"}], "owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "accepted_answer_id": 51065564, "answer_count": 3, "score": 6, "last_activity_date": 1596893093, "creation_date": 1530109274, "last_edit_date": 1530111436, "question_id": 51065244, "link": "https://stackoverflow.com/questions/51065244/is-there-no-standard-hash-for-stdfilesystempath", "title": "Is there no standard hash for `std::filesystem::path`?", "body": "<p>I have a simple program that's intended to store a set of C++17 <code>std::filesystem::path</code> objects.  Since there is a <a href=\"https://en.cppreference.com/w/cpp/filesystem/path/hash_value\" rel=\"nofollow noreferrer\"><code>std::filesystem::hash_value</code></a> that's part of the standard, why doesn't this code compile without me having to supply my own <code>std::hash</code>?</p>\n\n<p>When I compile and link using gcc 8.1.1 as <code>g++ -std=c++17 -NO_HASH=1 hashtest.cpp -o hashtest -lstdc++fs</code> my hash function is included and everything operates perfectly.  However, if I change it to <code>-NO_HASH=0</code>, I get a very long list of error messages, the key one of which is this:</p>\n\n<pre><code>usr/include/c++/8/bits/hashtable.h:195:21: error: static assertion failed: hash function must be invocable with an argument of key type\n       static_assert(__is_invocable&lt;const _H1&amp;, const _Key&amp;&gt;{},\n</code></pre>\n\n<p>Here's a <a href=\"http://coliru.stacked-crooked.com/a/bb32ff7b485b1240\" rel=\"nofollow noreferrer\">live Coliru version</a> if you'd like to play.</p>\n\n<p><strong>Is there really no defined <code>std::hash&lt;std::filesystem::path&gt;</code>?</strong>  What am I missing?</p>\n\n<p>For those who are interested in why I'd want such a thing, it's this: <a href=\"https://codereview.stackexchange.com/questions/124307/from-new-q-to-compiler-in-30-seconds\">https://codereview.stackexchange.com/questions/124307/from-new-q-to-compiler-in-30-seconds</a></p>\n\n<h2>hashtest.cpp</h2>\n\n<pre><code>#include &lt;optional&gt;\n#include &lt;unordered_set&gt;\n#include &lt;filesystem&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nnamespace fs = std::filesystem;\n\n#if NO_HASH\nnamespace std {\n    template &lt;&gt;\n    struct hash&lt;fs::path&gt; {\n        std::size_t operator()(const fs::path &amp;path) const {\n            return hash_value(path);            }\n    };\n}\n#endif\nint main()\n{\n    using namespace std::literals;\n    std::unordered_set&lt; std::optional&lt;fs::path&gt; &gt;  paths = {\n            \"/usr/bin\"s, std::nullopt, \"/usr//bin\"s, \"/var/log\"s\n    };\n\n    for(const auto&amp; p : paths)\n        std::cout &lt;&lt; p.value_or(\"(no path)\") &lt;&lt; ' ';\n}\n</code></pre>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"reputation": 2043, "user_id": 1662800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1NP25.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f Akkurt", "link": "https://stackoverflow.com/users/1662800/bar%c4%b1%c5%9f-akkurt"}, "edited": false, "score": 0, "creation_date": 1530109678, "post_id": 51065207, "comment_id": 89120544, "body": "What is the expected output and what do you get as output?"}, {"owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "reply_to_user": {"reputation": 2043, "user_id": 1662800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1NP25.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f Akkurt", "link": "https://stackoverflow.com/users/1662800/bar%c4%b1%c5%9f-akkurt"}, "edited": false, "score": 0, "creation_date": 1530110049, "post_id": 51065207, "comment_id": 89120784, "body": "when I gave the code a path to a directory which contains images png I will apply some filters on these images then I want to save the resultats in binary file"}, {"owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "reply_to_user": {"reputation": 2043, "user_id": 1662800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1NP25.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f Akkurt", "link": "https://stackoverflow.com/users/1662800/bar%c4%b1%c5%9f-akkurt"}, "edited": false, "score": 0, "creation_date": 1530113378, "post_id": 51065207, "comment_id": 89122942, "body": "there is not solution to this issue ?"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1530113684, "post_id": 51065207, "comment_id": 89123100, "body": "@cht_usr - easy tiger. One hour is not a long response time. ;)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530115580, "post_id": 51065207, "comment_id": 89124166, "body": "Why are you shelling out to an external command process to enumerate files, instead of using an API like <code>boost::filesystem</code> or <code>Find(First|Next)File()</code>? Also, your <code>replaceExt()</code> is buggy, the replace statement should be <code>s.replace(i+1, s.length()-(i+1), newExt);</code> instead. You are printing out the filenames, are they what you are expecting? Have you tried debugging your code yet to see exactly where it stops behaving as expected? StackOverflow is not a debugging service."}, {"owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1530118548, "post_id": 51065207, "comment_id": 89125738, "body": "thank you after all @Remy Lebeau"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1530147936, "post_id": 51065207, "comment_id": 89136233, "body": "You have several places where output is written to the screen (or to whatever is hooked up to <code>cout</code> and <code>cerr</code>). What output did you get? (Use a small example, say a directory with two files in it.)"}, {"owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1530205299, "post_id": 51065207, "comment_id": 89164747, "body": "@JaMiT I&#39;ve added the output in the question"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530205791, "post_id": 51065207, "comment_id": 89164947, "body": "You better use a debugger to inspect variables during the execution, At least put a lot of <code>cout</code> lines to see those values."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 4884932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-riAXdFFLodI/AAAAAAAAAAI/AAAAAAAAAB0/Fz7t4hnZSsY/photo.jpg?sz=128", "display_name": "petacreepers23", "link": "https://stackoverflow.com/users/4884932/petacreepers23"}, "is_accepted": false, "score": 2, "last_activity_date": 1530213729, "creation_date": 1530213729, "answer_id": 51089978, "question_id": 51065207, "link": "https://stackoverflow.com/questions/51065207/issue-while-creating-binary-files/51089978#51089978", "title": "issue while creating binary files", "body": "<p>First I have to say, if you directory you are looking for doesn't exists or is empty, the program gets locked, it would be nice to have that fixed if making a bigger program.</p>\n\n<p>Then, for your case, I don't see whars the point of that stringstream, so I tried removing that, and changing it by a normal string, removing the last \\n character you get from reading the filenames:</p>\n\n<pre><code>        cout &lt;&lt; fileName &lt;&lt; '\\n';\n\n        string ss = fileName.substr(0, fileName.size() - 1);\n        myOfstream.open(ss.c_str(), fstream::binary);\n        if (!myOfstream)\n        {\n</code></pre>\n\n<p>hope it helps</p>\n"}, {"tags": [], "owner": {"reputation": 1074, "user_id": 6124078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Luxw6.jpg?s=128&g=1", "display_name": "azdoud", "link": "https://stackoverflow.com/users/6124078/azdoud"}, "is_accepted": true, "score": 1, "last_activity_date": 1530293171, "creation_date": 1530293171, "answer_id": 51106770, "question_id": 51065207, "link": "https://stackoverflow.com/questions/51065207/issue-while-creating-binary-files/51106770#51106770", "title": "issue while creating binary files", "body": "<p>I found the issue bro, after debugging ;D </p>\n\n<p>the problem is in the \"newline\", the string fileName has a \"\\n\" at the end that's whats rise your error. Thus you have to erase it, I ve used this statement   <code>fileName.erase(std::remove(fileName.begin(), fileName.end(), '\\n'), fileName.end());</code>\nand I included algorithm lib. \nthe working code is as follows : </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt; // for standard I/O\n#include &lt;string&gt;   // for strings\n#include &lt;iomanip&gt;  // for controlling float print precision\n#include &lt;sstream&gt;  // string to number conversion\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nvoid getDir(string d, vector&lt;string&gt; &amp; f)\n{\n    FILE* pipe =  NULL;\n    string pCmd = \"dir /B /S \" + string(d);\n    char buf[256];\n\n    if( NULL == (pipe = _popen(pCmd.c_str(),\"rt\")))\n    {\n        cout&lt;&lt;\"Error\"&lt;&lt;endl;\n        return;\n    }\n\n    while (!feof(pipe))\n    {\n        if(fgets(buf,256,pipe) != NULL)\n        {\n            f.push_back(string(buf));\n        }\n\n    }\n\n    _pclose(pipe);\n}\n\nvoid replaceExt(string&amp; s, const string&amp; newExt) {\n\n   string::size_type i = s.rfind('.', s.length());\n\n   if (i != string::npos) {\n      s.replace(i+1, newExt.length(), newExt);\n   }\n}\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    vector&lt;string&gt; files;\n    string path = \"C:\\\\repo\";\n    getDir(path, files);\n    vector&lt;string&gt;::const_iterator it = files.begin();\n    cout&lt;&lt;\"Creating bin files \"&lt;&lt;endl;\n\n    ofstream myOfstream;\n\n    while( it != files.end())\n    {\n        string fileName = (string) *it;\n        replaceExt(fileName, \"bin\");\n        cout &lt;&lt; fileName &lt;&lt; '\\n';\n        fileName.erase(std::remove(fileName.begin(), fileName.end(), '\\n'), fileName.end());\n        std::stringstream ss;\n        ss &lt;&lt; fileName &lt;&lt; \"\" ;\n        myOfstream.open(ss.str(),  fstream::binary);\n        if ( !myOfstream )\n        {\n            std::cerr &lt;&lt; \"Error: failed to create file \" &lt;&lt; '\\n';\n            break;\n        }\n\n        myOfstream.close();\n\n        it++;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51106770, "answer_count": 2, "score": 0, "last_activity_date": 1530293171, "creation_date": 1530109166, "last_edit_date": 1530205224, "question_id": 51065207, "link": "https://stackoverflow.com/questions/51065207/issue-while-creating-binary-files", "title": "issue while creating binary files", "body": "<p>I've written this code, which it get the repository and look for the files within. it aims to create binary files for each file found so as to write some data inside it later. However, the code is not running as expected. and the binary file are not created this the issue.</p>\n\n<p>the directory has two images, and the output I get is as follows : </p>\n\n<pre><code>Creating bin files\nC:\\repo\\1.bin\n\nError: failed to create file\nPress &lt;RETURN&gt; to close this window... \n</code></pre>\n\n<p>I really do not know where I miss it. Any advice I'd be glad.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt; // for standard I/O\n#include &lt;string&gt;   // for strings\n#include &lt;iomanip&gt;  // for controlling float print precision\n#include &lt;sstream&gt;  // string to number conversion\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nvoid getDir(string d, vector&lt;string&gt; &amp; f)\n{\n    FILE* pipe =  NULL;\n    string pCmd = \"dir /B /S \" + string(d);\n    char buf[256];\n\n    if( NULL == (pipe = _popen(pCmd.c_str(),\"rt\")))\n    {\n        cout&lt;&lt;\"Error\"&lt;&lt;endl;\n        return;\n    }\n\n    while (!feof(pipe))\n    {\n        if(fgets(buf,256,pipe) != NULL)\n        {\n            f.push_back(string(buf));\n        }\n\n    }\n\n    _pclose(pipe);\n}\n\nvoid replaceExt(string&amp; s, const string&amp; newExt) {\n\n   string::size_type i = s.rfind('.', s.length());\n\n   if (i != string::npos) {\n      s.replace(i+1, newExt.length(), newExt);\n   }\n}\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    vector&lt;string&gt; files;\n    string path = \"C:\\\\repo\";\n    getDir(path, files);\n    vector&lt;string&gt;::const_iterator it = files.begin();\n    cout&lt;&lt;\"Creating bin files \"&lt;&lt;endl;\n\n    ofstream myOfstream;\n\n    while( it != files.end())\n    {\n        string fileName = (string) *it;\n        replaceExt(fileName, \"bin\");\n        cout &lt;&lt; fileName &lt;&lt; '\\n';\n\n        std::stringstream ss;\n        ss &lt;&lt; fileName &lt;&lt; \"\" ;\n        myOfstream.open(ss.str(),  fstream::binary);\n        if ( !myOfstream )\n        {\n            std::cerr &lt;&lt; \"Error: failed to create file \" &lt;&lt; '\\n';\n            break;\n        }\n\n        myOfstream.close();\n\n        it++;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1530108913, "post_id": 51065072, "comment_id": 89120023, "body": "do you have a debugger handy? might be nice to step through the code line by line and view variable values"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530108953, "post_id": 51065072, "comment_id": 89120055, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 19, "user_id": 9986786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed075c1eace4468cbd21f8e095c50d9?s=128&d=identicon&r=PG&f=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/9986786/james-stewart"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1530109019, "post_id": 51065072, "comment_id": 89120108, "body": "@AndyG yes, I am using it right now."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1530109058, "post_id": 51065072, "comment_id": 89120127, "body": "<i>I have looked up every code and syntax on Google</i> -- Learning a complex language such as C++ via Google is not recommended."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1530110043, "post_id": 51065072, "comment_id": 89120778, "body": "<i>There are no more syntax errors that compiler shows, but there are hidden logical errors</i> Yes, well, that happens to the best of us."}], "answers": [{"comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1530109154, "post_id": 51065150, "comment_id": 89120181, "body": "Ah, I was just about to post that as an answer."}, {"owner": {"reputation": 19, "user_id": 9986786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed075c1eace4468cbd21f8e095c50d9?s=128&d=identicon&r=PG&f=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/9986786/james-stewart"}, "edited": false, "score": 0, "creation_date": 1530109165, "post_id": 51065150, "comment_id": 89120188, "body": "I mostly use repl.it as it is fully online. I also use Code::Blocks. The both software show no kind of error."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 19, "user_id": 9986786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed075c1eace4468cbd21f8e095c50d9?s=128&d=identicon&r=PG&f=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/9986786/james-stewart"}, "edited": false, "score": 0, "creation_date": 1530109208, "post_id": 51065150, "comment_id": 89120215, "body": "@JamesStewart: that&#39;s because you haven&#39;t enabled compiler warnings (they are not generally enabled by default, unfortunately). Learn how to do this now, and save yourself a lot of time and effort in the future."}, {"owner": {"reputation": 19, "user_id": 9986786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed075c1eace4468cbd21f8e095c50d9?s=128&d=identicon&r=PG&f=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/9986786/james-stewart"}, "edited": false, "score": 1, "creation_date": 1530109431, "post_id": 51065150, "comment_id": 89120385, "body": "@PaulR Thank you! I will do it right now to save myself some hassle in the future."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 5, "last_activity_date": 1530110299, "last_edit_date": 1530110299, "creation_date": 1530109021, "answer_id": 51065150, "question_id": 51065072, "link": "https://stackoverflow.com/questions/51065072/i-am-debugging-this-c-program-there-are-no-more-syntax-errors-that-compiler-s/51065150#51065150", "title": "I am debugging this C++ program. There are no more syntax errors that compiler shows, but there are hidden logical errors", "body": "<p>If you enable warnings when you compile then the compiler will helpfully point out certain mistakes in your code, and if it's in a good mood it may even suggest a solution:</p>\n\n<pre><code>&lt;stdin&gt;:46:23: warning: using the result of an assignment as a condition without parentheses [-Wparentheses]\n            if(number = 99999)\n               ~~~~~~~^~~~~~~\n&lt;stdin&gt;:46:23: note: place parentheses around the assignment to silence this warning\n            if(number = 99999)\n                      ^\n               (             )\n&lt;stdin&gt;:46:23: note: use '==' to turn this assignment into an equality comparison\n            if(number = 99999)\n                      ^\n</code></pre>\n\n<p>Always compile with warnings enabled (e.g. <code>gcc -Wall ...</code>) - it will save you a lot of time and debugging effort in the long run.</p>\n"}], "owner": {"reputation": 19, "user_id": 9986786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed075c1eace4468cbd21f8e095c50d9?s=128&d=identicon&r=PG&f=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/9986786/james-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 51065150, "answer_count": 1, "score": 0, "last_activity_date": 1530110299, "creation_date": 1530108832, "last_edit_date": 1530109144, "question_id": 51065072, "link": "https://stackoverflow.com/questions/51065072/i-am-debugging-this-c-program-there-are-no-more-syntax-errors-that-compiler-s", "title": "I am debugging this C++ program. There are no more syntax errors that compiler shows, but there are hidden logical errors", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\n\nusing namespace std;\n\nconst int N = 20;\n\nint main ()\n{\n        //Declare variables\n    int counter;    //loop control variable \n    int number;     //variable to store the new number \n\n    int zeros = 0;                                  //Step 1 \n    int odds = 0;                                   //Step 1\n    int evens = 0;                                  //Step 1 \n    int positives = 0;\n    int negatives = 0;\n\n  // Display Program Intro telling what the program does.  \n    cout &lt;&lt;   \"********************************************************\" \n         &lt;&lt; \"\\n*  This is a program that counts integers you enter as *\"\n         &lt;&lt; \"\\n*    even, odd or zero   and     positve or negative   *\"\n         &lt;&lt; \"\\n*  It classifies 20 numbers or use 99999 to exit early *\"\n         &lt;&lt; \"\\n********************************************************\"\n         &lt;&lt; endl;\n\n  // Ask for 20 integers with 99999 as early exit\n    cout &lt;&lt; \"\\n\\nPlease enter \" &lt;&lt; N &lt;&lt; \" integers, \"\n         &lt;&lt; \"positive, negative, or zeros.\"\n         &lt;&lt; \"\\n\\t\\t or enter number 99999 to exit early. \\n\\n\"\n         &lt;&lt; endl;                                   //Step 2\n\n    cout &lt;&lt; \"The numbers you entered are:\" &lt;&lt; endl;\n\n  // Loop that classifies the numbers entered.\n    for (counter = 1; counter &lt;= N; counter++)      //Step 3\n    {\n\n      //  Enter number and mirror it backed on a tabbed line.\n        cin &gt;&gt; number;                              //Step 3a\n        cout &lt;&lt; number &lt;&lt; endl;        //Step 3b  \n\n      //  Early exit condition:  99999        \n        if(number = 99999)\n           break;     // Exit loop before 20 numbers \n\n      //  Count Postive and Negative Numbers           \n        if(number &lt; 0)\n           negatives++;\n        else      \n           positives++;\n\n      //  Count Evens, Odds and Zeros           \n            //Step 3c\n        switch (number % 2)\n        {\n        case 0: \n            evens++;     \n            if (number == 0)       \n                zeros++;  \n        case 1: \n        case -1: \n            odds++; \n        } //end switch\n    } //end for loop \n\n    cout &lt;&lt; endl;\n\n  // Display the results ....  \n                    //Step 4\n    cout &lt;&lt; \"There are \" &lt;&lt; evens &lt;&lt; \" evens, \"\n         &lt;&lt; \"which includes \" &lt;&lt; zeros &lt;&lt; \" zeros.\"\n         &lt;&lt; endl;   \n    cout &lt;&lt; \"The number of odd numbers is: \" &lt;&lt; odds\n         &lt;&lt; endl;\n    cout &lt;&lt; \"The number of positive numbers is: \" &lt;&lt; positives\n         &lt;&lt; endl;\n    cout &lt;&lt; \"The number of negative numbers is: \" &lt;&lt; negatives\n         &lt;&lt; endl;\n\n  // Use Holdscreen to make sure the results are visible ....     \n    char holdscr;     // This character and section is to hold screen open\n    cout &lt;&lt; \"\\n\\n\\tPress a character and Enter to exit program. \";\n    cin &gt;&gt; holdscr;          \n\n    return 0;\n}\n</code></pre>\n\n<p>I am debugging this program. There were originally 6 errors in the program. I've found four of them as they were syntax errors. The compiler doesn't show any error but the program isn't working either.\nThe program is supposed to store 20 numbers and in the end tell you how many of them were even, odd, zero, negative, and positive. I am just a beginner in C++. I have tried every possible way to solve it from my side but I cannot get it to work. I have looked up every code and syntax on Google why it works that way but found no help. Any help here would be highly appreciated.</p>\n"}, {"tags": ["c++", "gcc", "cuda", "openmp", "offloading"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1530109969, "post_id": 51064975, "comment_id": 89120742, "body": "That looks like a broken gcc setup for sure. What happens if you try and compile a sane example (no huge stack arrays please) for the CPU as an openMP target? I am going to remove the CUDA tag, I see nothing related to CUDA programming in the actual question."}, {"owner": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1530110892, "post_id": 51064975, "comment_id": 89121362, "body": "@talonmies A CPU openmp program seems to work, I have added the example to the main question. Both the output is as expected (shows some race conditions with OMP_NUM_THREADS=8) and if I ldd the executable then it says it is linked to libgomp and libpthread."}, {"owner": {"reputation": 761, "user_id": 7050476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c2df49356fac6994f4b447eb135c37?s=128&d=identicon&r=PG&f=1", "display_name": "afarah", "link": "https://stackoverflow.com/users/7050476/afarah"}, "edited": false, "score": 0, "creation_date": 1530914365, "post_id": 51064975, "comment_id": 89417271, "body": "Some ideas: 1. Use only absolute paths (I&#39;m assuming <code>offload&#47;install&#47;lib64&#47;</code> is <code>&#47;home&#47;over_ng&#47;offload&#47;install&#47;lib64</code>); 2. Make sure it is on the search path. If you&#39;re positive it is on the search path but the results indicate it isn&#39;t, find something that you know for sure is on the search path (because it&#39;s compiled and linked successfully), then <code>cd</code> there and <code>ln -s path_to_libgomp.spec</code>."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530781285, "post_id": 51184829, "comment_id": 89356184, "body": "Hey! Unfortunately I have to build to offloading compiler from scratch due to stuff out of my hands, so unfortunately I can&#39;t use the binary provided by Ubuntu. Adding -fno-stack-protector does not resolve the issue, as it goes wrong long before linking. For some reason gcc is unable to find a certain file which it put somewhere itself. In any case you&#39;re correct that my code should do something, which I have now."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530783439, "post_id": 51184829, "comment_id": 89357581, "body": "@NigelOvermars you can check out the source code and build files to <code>gcc-offload-nvptx</code> in Ubuntu to see how they got it to compile."}, {"owner": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530785208, "post_id": 51184829, "comment_id": 89358654, "body": "That&#39;s an excellent idea, do you happen to know where I can find those?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530788302, "post_id": 51184829, "comment_id": 89360667, "body": "I started doing this before my answer but it took too much time. But now I made a bit more progress. See <a href=\"https://askubuntu.com/a/28373/259597\">askubuntu.com/a/28373/259597</a>.  <code>sudo apt-get build-dep gcc-offload-nvptx</code> and <code>sudo apt-get source --compile gcc-offload-nvptx</code>. We are so spoiled nowadays (myself included) with package managers that few people know how to compile from source anymore the ways things used to be done with Linux."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530788496, "post_id": 51184829, "comment_id": 89360814, "body": "@NigelOvermars <a href=\"https://launchpad.net/ubuntu/bionic/amd64/gcc-offload-nvptx/4:7.3.0-3ubuntu2\" rel=\"nofollow noreferrer\">launchpad.net/ubuntu/bionic/amd64/gcc-offload-nvptx/&hellip;</a> . I guess it&#39;s in gcc-defaults. I don&#39;t know if this is any help or a distraction."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "edited": false, "score": 0, "creation_date": 1530790398, "post_id": 51184829, "comment_id": 89362130, "body": "@NigelOvermars <a href=\"https://stackoverflow.com/q/49718730/2542702\">this question</a> got it working for Clang but I did not."}], "tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": false, "score": 1, "last_activity_date": 1530772958, "creation_date": 1530772958, "answer_id": 51184829, "question_id": 51064975, "link": "https://stackoverflow.com/questions/51064975/nvptx-gcc-9-0-0-trunk-for-openmp-4-5-off-loading-to-gpu-device-cannot-find-l/51184829#51184829", "title": "nvptx gcc (9.0.0/trunk) for openmp 4.5 off-loading to (gpu) device cannot find libgomp.spec", "body": "<p>I have been using the package <code>gcc-offload-nvptx</code> in the Ubuntu repository since Ubuntu 17.10.  If I compile your test code like this </p>\n\n<pre><code>g++ test.cpp -fopenmp\n</code></pre>\n\n<p>I get a <code>lto-wrapper failed</code> error.  This can be fixed using <code>-fno-stack-protector</code> like this</p>\n\n<pre><code>g++ test.cpp -fopenmp -fno-stack-protector\n</code></pre>\n\n<p>Then test code compiles and runs.  You can see that it runs on the GPU using <code>nvprof</code> like this</p>\n\n<pre><code>sudo nvprof ./a.out\n</code></pre>\n\n<hr>\n\n<p>Some additional comments. In your test code I would use</p>\n\n<pre><code>#pragma omp target teams distribute parallel for\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/49111443/2542702\">OpenMP offloading to Nvidia wrong reduction</a></p>\n\n<p>Also in your test code you should do something with <code>data_array</code> or the compiler might optimize your code away. </p>\n\n<p>Ubuntu 18.04 also requires <code>-fno-stack-protector</code>.</p>\n"}], "owner": {"reputation": 193, "user_id": 3476835, "user_type": "registered", "profile_image": "https://graph.facebook.com/752856165/picture?type=large", "display_name": "Nigel Overmars", "link": "https://stackoverflow.com/users/3476835/nigel-overmars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3105, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1530790456, "creation_date": 1530108546, "last_edit_date": 1530790456, "question_id": 51064975, "link": "https://stackoverflow.com/questions/51064975/nvptx-gcc-9-0-0-trunk-for-openmp-4-5-off-loading-to-gpu-device-cannot-find-l", "title": "nvptx gcc (9.0.0/trunk) for openmp 4.5 off-loading to (gpu) device cannot find libgomp.spec", "body": "<p>I've been trying to install the OpenMP 4.5 off-loading to Nvidia GPU version of gcc for a while and so far no success, although I'm getting closer.</p>\n\n<p>This time, I followed <a href=\"https://kristerw.blogspot.com/2017/04/building-gcc-with-support-for-nvidia.html\" rel=\"nofollow noreferrer\">this script</a>, where I have made two changes: First I specified the trunk version of gcc instead of 7.2, secondly nvptx-newlib is now included in nvptx-tools according to the github repository, so I removed that part of the script. For easy reference, the original script is</p>\n\n<pre><code>    #!/bin/sh\n\n#\n# Build GCC with support for offloading to NVIDIA GPUs.\n#\n\nwork_dir=$HOME/offload/wrk\ninstall_dir=$HOME/offload/install\n\n# Location of the installed CUDA toolkit\ncuda=/usr/local/cuda\n\n# Build assembler and linking tools\nmkdir -p $work_dir\ncd $work_dir\ngit clone https://github.com/MentorEmbedded/nvptx-tools\ncd nvptx-tools\n./configure \\\n    --with-cuda-driver-include=$cuda/include \\\n    --with-cuda-driver-lib=$cuda/lib64 \\\n    --prefix=$install_dir\nmake\nmake install\ncd ..\n\n# Set up the GCC source tree\ngit clone https://github.com/MentorEmbedded/nvptx-newlib\nsvn co svn://gcc.gnu.org/svn/gcc/tags/gcc_7_2_0_release gcc\ncd gcc\ncontrib/download_prerequisites\nln -s ../nvptx-newlib/newlib newlib\ncd ..\ntarget=$(gcc/config.guess)\n\n# Build nvptx GCC\nmkdir build-nvptx-gcc\ncd build-nvptx-gcc\n../gcc/configure \\\n    --target=nvptx-none --with-build-time-tools=$install_dir/nvptx-none/bin \\\n    --enable-as-accelerator-for=$target \\\n    --disable-sjlj-exceptions \\\n    --enable-newlib-io-long-long \\\n    --enable-languages=\"c,c++,fortran,lto\" \\\n    --prefix=$install_dir\nmake -j4\nmake install\ncd ..\n\n# Build host GCC\nmkdir build-host-gcc\ncd  build-host-gcc\n../gcc/configure \\\n    --enable-offload-targets=nvptx-none \\\n    --with-cuda-driver-include=$cuda/include \\\n    --with-cuda-driver-lib=$cuda/lib64 \\\n    --disable-bootstrap \\\n    --disable-multilib \\\n    --enable-languages=\"c,c++,fortran,lto\" \\\n    --prefix=$install_dir\nmake -j4\nmake install\ncd ..\n</code></pre>\n\n<p>After quite a while, this successfully exits. Per the instructions on that webpage, I added $install_dir/lib64 to my LD_LIBRARY_PATH and additionally to LIBRARY_PATH. </p>\n\n<p>Then as a test, I have the following basic test program</p>\n\n<pre><code>#include &lt;omp.h&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n   double data_array[1000000];\n\n#pragma omp target teams distribute\n   for (int idx = 0; idx &lt; 1000000; ++idx)\n   {\n       data_array[idx] = idx;\n   }   \n\n   std::cout &lt;&lt; \"Hopefully this ran on the gpu...\\n\";\n}\n</code></pre>\n\n<p>Then I try to compile this using <code>offload/install/bin/g++ -fopenmp -foffload=nvptx-none main.cpp</code> then it returns with the following error message:</p>\n\n<pre><code>x86_64-pc-linux-gnu-accel-nvptx-none-gcc: error: libgomp.spec: No such file or directory\nmkoffload: fatal error: offload/install/bin/x86_64-pc-linux-gnu-accel-nvptx-none-gcc returned 1 exit status\ncompilation terminated.\nlto-wrapper: fatal error: /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0//accel/nvptx-none/mkoffload returned 1 exit status\ncompilation terminated.\n/usr/bin/ld: error: lto-wrapper failed\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>The file libgomp.spec can be found in the aforementioned <code>$install_dir/lib64</code>, which on my system is <code>offload/install/lib64/</code>. </p>\n\n<p>Some more information about my system:<br>\nUbuntu 16.04, accessed through slurm\nCuda 9.0.176<br>\n4x Nvidia Tesla V100  </p>\n\n<p>offload/install/bin/g++ -v reports:</p>\n\n<pre><code>Using built-in specs.\nCOLLECT_GCC=offload/install/bin/g++\nCOLLECT_LTO_WRAPPER=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none\nTarget: x86_64-pc-linux-gnu\nConfigured with: ../gcc/configure --enable-offload-targets=nvptx-none --with-cuda-driver-include=/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/include --with-cuda-driver-lib=/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64 --disable-bootstrap --disable-multilib --enable-languages=c,c++,fortran,lto --prefix=/home/over_ng/offload/install\nThread model: posix\ngcc version 9.0.0 20180627 (experimental) (GCC) \n</code></pre>\n\n<p>offload/install/bin/g++ -print-search-dirs reports</p>\n\n<pre><code>install: /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/\nprograms: =/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/bin/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/bin/x86_64-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/bin/\nlibraries: =/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/x86_64-pc-linux-gnu/9.0.0/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/x86_64-linux-gnu/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/../lib64/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib/x86_64-pc-linux-gnu/9.0.0/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib/x86_64-linux-gnu/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib/../lib64/:/home/over_ng/offload/install/lib64/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib64/x86_64-linux-gnu/:/home/over_ng/offload/install/lib64/../lib64/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/lib/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/lib/x86_64-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/lib/../lib64/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../x86_64-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../lib64/:/lib/x86_64-pc-linux-gnu/9.0.0/:/lib/x86_64-linux-gnu/:/lib/../lib64/:/usr/lib/x86_64-pc-linux-gnu/9.0.0/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib64/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib/:/home/over_ng/offload/install/lib64/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/lib/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../:/lib/:/usr/lib/\n</code></pre>\n\n<p>And finally, offload/install/bin/g++ -fopenmp -foffload=nvptx-none -v main.cpp reports </p>\n\n<pre><code>Using built-in specs.\nCOLLECT_GCC=offload/install/bin/g++\nCOLLECT_LTO_WRAPPER=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none\nTarget: x86_64-pc-linux-gnu\nConfigured with: ../gcc/configure --enable-offload-targets=nvptx-none --with-cuda-driver-include=/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/include --with-cuda-driver-lib=/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64 --disable-bootstrap --disable-multilib --enable-languages=c,c++,fortran,lto --prefix=/home/over_ng/offload/install\nThread model: posix\ngcc version 9.0.0 20180627 (experimental) (GCC) \nCOLLECT_GCC_OPTIONS='-fopenmp' '-foffload=nvptx-none' '-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64' '-pthread'\n /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/cc1plus -quiet -v -imultiarch x86_64-linux-gnu -D_GNU_SOURCE -D_REENTRANT main.cpp -quiet -dumpbase main.cpp -mtune=generic -march=x86-64 -auxbase main -version -fopenmp -foffload=nvptx-none -o /tmp/cc9FAd0p.s\nGNU C++14 (GCC) version 9.0.0 20180627 (experimental) (x86_64-pc-linux-gnu)\n    compiled by GNU C version 8.1.0, GMP version 6.1.0, MPFR version 3.1.4, MPC version 1.0.3, isl version isl-0.18-GMP\n\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\nignoring nonexistent directory \"/usr/local/include/x86_64-linux-gnu\"\nignoring nonexistent directory \"/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../x86_64-pc-linux-gnu/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/include\n /tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/include\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../include/c++/9.0.0\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../include/c++/9.0.0/x86_64-pc-linux-gnu\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../include/c++/9.0.0/backward\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include\n /usr/local/include\n /home/over_ng/offload/install/include\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include-fixed\n /usr/include/x86_64-linux-gnu\n /usr/include\nEnd of search list.\nGNU C++14 (GCC) version 9.0.0 20180627 (experimental) (x86_64-pc-linux-gnu)\n    compiled by GNU C version 8.1.0, GMP version 6.1.0, MPFR version 3.1.4, MPC version 1.0.3, isl version isl-0.18-GMP\n\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\nCompiler executable checksum: 716ed3567afb9cd0b736d2b474553211\nCOLLECT_GCC_OPTIONS='-fopenmp' '-foffload=nvptx-none' '-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64' '-pthread'\n as -v --64 -o /tmp/cc2TYtU2.o /tmp/cc9FAd0p.s\nGNU assembler version 2.26.1 (x86_64-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.26.1\nCOMPILER_PATH=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/\nLIBRARY_PATH=/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/../lib64/:/home/over_ng/offload/install/lib64/../lib64/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../lib64/:/lib/x86_64-linux-gnu/:/lib/../lib64/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib64/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/:/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib/:/home/over_ng/offload/install/lib64/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../:/lib/:/usr/lib/\nReading specs from /home/over_ng/offload/install/lib64/../lib64/libgomp.spec\nCOLLECT_GCC_OPTIONS='-fopenmp' '-foffload=nvptx-none' '-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64' '-pthread'\n /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/collect2 -plugin /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/liblto_plugin.so -plugin-opt=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/lto-wrapper -plugin-opt=-fresolution=/tmp/ccnGrpRF.res -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lpthread -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lgcc --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/crt1.o /usr/lib/x86_64-linux-gnu/crti.o /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/crtbegin.o /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/crtoffloadbegin.o -L/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64/../lib64 -L/home/over_ng/offload/install/lib64/../lib64 -L/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0 -L/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../../../lib64 -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib64 -L/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/cuda-9.0.176-m4ivnigh5kuty6u7tcnroxr5on5lot6s/lib64 -L/tools/spack/install/linux-ubuntu16.04-x86_64/gcc-5.4.0/subversion-1.9.7-f5fbcx4xhwzrq5rhhco7byj7cbx2f4fs/lib -L/home/over_ng/offload/install/lib64 -L/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/../../.. /tmp/cc2TYtU2.o -lstdc++ -lm -lgomp -lgcc_s -lgcc -lpthread -lc -lgcc_s -lgcc /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/crtend.o /usr/lib/x86_64-linux-gnu/crtn.o /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/crtoffloadend.o\n/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/lto-wrapper -fresolution=/tmp/ccnGrpRF.res -flinker-output=exec -foffload-objects=/tmp/ccQDi0zV.ofldlist \n/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0//accel/nvptx-none/mkoffload @/tmp/ccJAbpMz\noffload/install/bin/x86_64-pc-linux-gnu-accel-nvptx-none-gcc @/tmp/ccoh8KPc\nUsing built-in specs.\nCOLLECT_GCC=offload/install/bin/x86_64-pc-linux-gnu-accel-nvptx-none-gcc\nCOLLECT_LTO_WRAPPER=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/lto-wrapper\nTarget: nvptx-none\nConfigured with: ../gcc/configure --target=nvptx-none --with-build-time-tools=/home/over_ng/offload/install/nvptx-none/bin --enable-as-accelerator-for=x86_64-pc-linux-gnu --disable-sjlj-exceptions --enable-newlib-io-long-long --enable-languages=c,c++,fortran,lto --prefix=/home/over_ng/offload/install\nThread model: single\ngcc version 9.0.0 20180627 (experimental) (GCC) \nCOLLECT_GCC_OPTIONS='-v' '-m64' '-mgomp' '-v' '-fno-openacc' '-foffload-abi=lp64' '-fopenmp' '-o' '/tmp/ccNVxXFz.mkoffload'\n /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/lto1 -quiet -dumpbase cc2TYtU2.o -m64 -mgomp -auxbase cc2TYtU2 -version -fno-openacc -foffload-abi=lp64 -fopenmp @/tmp/cchKIS8V -o /tmp/ccZLBhjz.s\nGNU GIMPLE (GCC) version 9.0.0 20180627 (experimental) (nvptx-none)\n    compiled by GNU C version 8.1.0, GMP version 6.1.0, MPFR version 3.1.4, MPC version 1.0.3, isl version isl-0.18-GMP\n\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\nGNU GIMPLE (GCC) version 9.0.0 20180627 (experimental) (nvptx-none)\n    compiled by GNU C version 8.1.0, GMP version 6.1.0, MPFR version 3.1.4, MPC version 1.0.3, isl version isl-0.18-GMP\n\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\nCOLLECT_GCC_OPTIONS='-v' '-m64' '-mgomp' '-v' '-fno-openacc' '-foffload-abi=lp64' '-fopenmp' '-o' '/tmp/ccNVxXFz.mkoffload'\n /home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/../../../../../../nvptx-none/bin/as -o /tmp/ccRJFdvc.o /tmp/ccZLBhjz.s\nCOMPILER_PATH=/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/:/home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/:/home/over_ng/offload/install/libexec/gcc/nvptx-none/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/:/home/over_ng/offload/install/lib/gcc/nvptx-none/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/../../../../../../nvptx-none/bin/\nLIBRARY_PATH=/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/mgomp/:/home/over_ng/offload/install/lib/gcc/x86_64-pc-linux-gnu/9.0.0/accel/nvptx-none/\nReading specs from libgomp.spec\nx86_64-pc-linux-gnu-accel-nvptx-none-gcc: error: libgomp.spec: No such file or directory\nmkoffload: fatal error: offload/install/bin/x86_64-pc-linux-gnu-accel-nvptx-none-gcc returned 1 exit status\ncompilation terminated.\nlto-wrapper: fatal error: /home/over_ng/offload/install/libexec/gcc/x86_64-pc-linux-gnu/9.0.0//accel/nvptx-none/mkoffload returned 1 exit status\ncompilation terminated.\n/usr/bin/ld: error: lto-wrapper failed\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>On the same webpage as where I found the script, somebody else reported the same problem and reverting to gcc 7.2 is apparently a solution. Since I want to include the off-loading compiler in the Spack collection, I would like to be able to use any supported version. Although I can live with gcc 8 for the time being, as 9/trunk is still experimental.</p>\n\n<p>This may imply that it is a bug in gcc, in that case I would like to report it to them!</p>\n\n<p><strong>Edit 1</strong>: As requested, a 'sane' CPU only program that seems to work fine:</p>\n\n<pre><code>  #include &lt;omp.h&gt;\n  #include &lt;cmath&gt;\n  #include &lt;vector&gt;\n  #include &lt;iostream&gt;\n\n  int main()\n  {\n    const int size = 1000;\n    std::vector&lt;double&gt; sinTable(size);\n\n    #pragma omp parallel for\n    for(int n=0; n&lt;size; ++n)\n    {\n      sinTable[n] = std::sin(2 * M_PI * n / size);\n      std::cout &lt;&lt; sinTable[n] &lt;&lt; '\\n';\n    }\n\n    // the table is now initialized\n  }\n</code></pre>\n\n<p>This was compiled with <code>offload/install/bin/g++ -fopenmp -v main_cpu.cpp -o cpu</code></p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1530108770, "post_id": 51064910, "comment_id": 89119925, "body": "Won&#39;t <code>std::tuple</code> be a solution to your problem?"}, {"owner": {"reputation": 520, "user_id": 4347243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nYd7hc8Ziqs/AAAAAAAAAAI/AAAAAAAAADU/EYh-S8k3vpQ/photo.jpg?sz=128", "display_name": "Joshua Ryan", "link": "https://stackoverflow.com/users/4347243/joshua-ryan"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1530108831, "post_id": 51064910, "comment_id": 89119969, "body": "Could you elaborate? Using <code>c++11</code> I don&#39;t have access to <code>std::apply</code>, and trying to build the <code>std::tuple</code> from the <code>std::array</code> I would still encounter the sequencing problem."}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1530110763, "post_id": 51064910, "comment_id": 89121287, "body": "Good news is I think it can be done. Bad news is it will probably require recursion and may not be suited for embedded systems"}], "answers": [{"tags": [], "owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "is_accepted": false, "score": 0, "last_activity_date": 1530113428, "last_edit_date": 1530113428, "creation_date": 1530112108, "answer_id": 51066166, "question_id": 51064910, "link": "https://stackoverflow.com/questions/51064910/how-can-i-build-a-sequence-of-structs-with-integer-members-of-increasing-value-a/51066166#51066166", "title": "How Can I Build A Sequence Of Structs With Integer Members of Increasing Value at Compile Time in C++11", "body": "<p>How about something like this...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;cstring&gt;\n#include &lt;typeinfo&gt;\n\nusing namespace std;\n\ntemplate &lt;size_t O,size_t I,size_t C,typename...&gt;\nstruct byte_offset_impl;\n\ntemplate &lt;size_t O,size_t I,size_t C,typename T,typename... Ts&gt;\nstruct byte_offset_impl&lt; O, I, C,T,Ts...&gt; : \n    std::conditional&lt;I == C,\n      std::integral_constant&lt;size_t,O&gt;,\n      byte_offset_impl&lt;O + sizeof(T),I,C+1,Ts...&gt;    \n    &gt;::type\n{};\n\n\ntemplate &lt;typename T&gt;\nstruct type_c \n{ using type = T; };\n\ntemplate &lt;size_t I,size_t C,typename...&gt;\nstruct type_at_impl;\n\ntemplate &lt;size_t I,size_t C,typename T,typename... Ts&gt;\nstruct type_at_impl&lt;I, C,T,Ts...&gt; : \n    std::conditional&lt;I == C,\n      type_c&lt;T&gt;,\n      type_at_impl&lt;I,C+1,Ts...&gt;  \n    &gt;::type\n{};\n\n\ntemplate &lt;size_t I,typename... Ts&gt;\nconstexpr size_t byte_offset = byte_offset_impl&lt;0,I,0,Ts...&gt;::value;\n\ntemplate &lt;size_t I,typename... Ts&gt;\nusing type_at = typename type_at_impl&lt;I,0,Ts...&gt;::type;\n\ntemplate &lt;typename...Ts&gt;\nstruct generic_class\n{\n    generic_class(char* byteptr) : byteptr_(byteptr)\n    {};\n\n\n    template &lt;size_t I&gt;\n    auto get() -&gt; type_at&lt;I, Ts...&gt;&amp; // needed for c++11\n    {\n        using result_type = type_at&lt;I, Ts...&gt;;\n        return *reinterpret_cast&lt;result_type*&gt;(&amp;byteptr_[byte_offset&lt;I, Ts...&gt;]);\n\n    }\n\n    template &lt;size_t I&gt;\n    auto get_v() -&gt; type_at&lt;I, Ts...&gt; // needed for c++11\n    {\n        using result_type = type_at&lt;I, Ts...&gt;;\n        result_type result;\n\n        std::memcpy(&amp;result, &amp;byteptr_[byte_offset&lt;I, Ts...&gt;], sizeof(result_type));\n\n        return result;\n    }\n    char* byteptr_;\n};\n\n\nint main() {\n\n    char bytes[sizeof(uint32_t) + sizeof(uint8_t) + sizeof(uint16_t)];\n\n    uint32_t u32 = 1561;\n    uint8_t u8 = 22;\n    uint16_t u16 = 99;\n\n    char* bytesp = bytes;\n    std::memcpy(bytesp, &amp;u32, sizeof(uint32_t)); bytesp += sizeof(uint32_t);\n    std::memcpy(bytesp, &amp;u8, sizeof(uint8_t)); bytesp += sizeof(uint8_t);\n    std::memcpy(bytesp, &amp;u16, sizeof(uint16_t));\n\n    generic_class&lt;uint32_t, uint8_t, uint16_t&gt; gen(bytes);\n    std::cout &lt;&lt; (uint32_t)gen.get&lt;0&gt;() &lt;&lt; std::endl;\n    std::cout &lt;&lt; (uint32_t)gen.get&lt;1&gt;() &lt;&lt; std::endl;\n    std::cout &lt;&lt; (uint32_t)gen.get&lt;2&gt;() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; (uint32_t)gen.get_v&lt;0&gt;() &lt;&lt; std::endl;\n    std::cout &lt;&lt; (uint32_t)gen.get_v&lt;1&gt;() &lt;&lt; std::endl;\n    std::cout &lt;&lt; (uint32_t)gen.get_v&lt;2&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/xvbSUN\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Depending on your platform you may find the <code>get&lt;I&gt;</code> implementation not suitable, as access may be unaligned. the <code>get_v&lt;I&gt;</code> alternative will copy the data out of your array into an element of the correct type, with the added benefit that it will only copy if the data is accessed.</p>\n"}, {"comments": [{"owner": {"reputation": 520, "user_id": 4347243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nYd7hc8Ziqs/AAAAAAAAAAI/AAAAAAAAADU/EYh-S8k3vpQ/photo.jpg?sz=128", "display_name": "Joshua Ryan", "link": "https://stackoverflow.com/users/4347243/joshua-ryan"}, "edited": false, "score": 0, "creation_date": 1530113458, "post_id": 51066353, "comment_id": 89122979, "body": "I think this is very close to what I&#39;m trying to do. I&#39;m going to try to find a C++11 implementation for <code>std::index_sequence</code> when I have some time, and I&#39;ll see if I can make this solution work for me.  Thanks for the answer!"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1530118279, "post_id": 51066353, "comment_id": 89125594, "body": "Nice but... are we sure that is little endian / big endian safe ?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1530124213, "post_id": 51066353, "comment_id": 89128473, "body": "A little suggestion: pass <code>tuple</code> as reference in both <code>process()</code> function."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1530115850, "last_edit_date": 1530115850, "creation_date": 1530112704, "answer_id": 51066353, "question_id": 51064910, "link": "https://stackoverflow.com/questions/51064910/how-can-i-build-a-sequence-of-structs-with-integer-members-of-increasing-value-a/51066353#51066353", "title": "How Can I Build A Sequence Of Structs With Integer Members of Increasing Value at Compile Time in C++11", "body": "<p>It seems you want something like:</p>\n\n<pre><code>template &lt;typename ...Ts&gt;\nvoid f(Ts... args)\n{\n    const int dummy[] = {0, ((std::cout &lt;&lt; std::hex &lt;&lt; args &lt;&lt; std::endl), 0)...};\n    static_cast&lt;void&gt;(dummy); // Avoid warning for unused variable\n}\n\ntemplate &lt;std::size_t N, typename Tuple, std::size_t ...Is&gt;\nvoid process(std::array&lt;std::uint8_t, N&gt; const&amp; array, Tuple tuple, std::index_sequence&lt;Is...&gt;)\n{\n    int i = 0;\n    const int dummy[] = {((memcpy(&amp;std::get&lt;Is&gt;(tuple), array.data() + i, sizeof(std::tuple_element_t&lt;Is, Tuple&gt;)), i += sizeof(std::tuple_element_t&lt;Is, Tuple&gt;)), 0)...};\n    static_cast&lt;void&gt;(dummy); // Avoid warning for unused variable\n    f(std::get&lt;Is&gt;(tuple)...);\n}\n\ntemplate &lt;std::size_t N, typename ... Ts&gt;\nvoid process(std::array&lt;std::uint8_t, N&gt; const&amp; array, std::tuple&lt;Ts...&gt; tuple)\n{\n    process(array, tuple, std::index_sequence_for&lt;Ts...&gt;{});\n}\n</code></pre>\n\n<p><code>index_sequence</code> can be implemented in C++11.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c4afbb688655664e\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": -1, "last_activity_date": 1530112767, "creation_date": 1530112767, "answer_id": 51066377, "question_id": 51064910, "link": "https://stackoverflow.com/questions/51064910/how-can-i-build-a-sequence-of-structs-with-integer-members-of-increasing-value-a/51066377#51066377", "title": "How Can I Build A Sequence Of Structs With Integer Members of Increasing Value at Compile Time in C++11", "body": "<p>Each class needs an implementation of <code>as_tuple</code>, returning a tie of the members.</p>\n\n<pre><code>class Object\n{\n    // Private members\n    uint32_t val1;\n    uint8_t val2;\n    uint16_t val3;\npublic:\n    auto as_tuple()\n    {\n        return std::tie(val1, val2, val3);\n    }\n    // Use Object\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, Object&amp; o)\n    {\n        return os &lt;&lt; o.val1 &lt;&lt; ' ' &lt;&lt; int(o.val2) &lt;&lt; ' ' &lt;&lt; o.val3;\n    }\n};\n</code></pre>\n\n<p>You can then copy into each member</p>\n\n<pre><code>namespace detail\n{\n    // To verify the size of the input array matches the sum of the member's sizes\n    template &lt;std::size_t...&gt; struct sum;\n    template &lt;&gt; struct sum&lt;&gt; { static constexpr std::size_t value = 0; };\n    template &lt;std::size_t I, std::size_t... Is&gt; struct sum&lt;I, Is...&gt; { static constexpr std::size_t value = I + sum&lt;Is...&gt;::value; };\n\n    template &lt;std::size_t... Is&gt; constexpr std::size_t sum_v = sum&lt;Is...&gt;::value;\n\n    // Remove the front element of a tuple\n    template&lt;typename T, typename Seq&gt;\n    struct tuple_cdr_impl;\n\n    template&lt;typename T, std::size_t I0, std::size_t... I&gt;\n    struct tuple_cdr_impl&lt;T, std::index_sequence&lt;I0, I...&gt;&gt;\n    {\n        using type = std::tuple&lt;typename std::tuple_element&lt;I, T&gt;::type...&gt;;\n    };\n\n    template&lt;typename T&gt;\n    struct tuple_cdr\n    : tuple_cdr_impl&lt;T, std::make_index_sequence&lt;std::tuple_size&lt;T&gt;::value&gt;&gt;\n    { };\n\n    template&lt;typename T&gt;\n    using tuple_cdr_t = typename tuple_cdr&lt;T&gt;::type;\n\n    template&lt;typename T, std::size_t I0, std::size_t... I&gt;\n    tuple_cdr_t&lt;typename std::remove_reference_t&lt;T&gt;&gt;\n    cdr_impl(T&amp;&amp; t, std::index_sequence&lt;I0, I...&gt;)\n    {\n        return std::tie(std::get&lt;I&gt;(t)...);\n    }\n\n    template&lt;typename T&gt;\n    tuple_cdr_t&lt;typename std::remove_reference_t&lt;T&gt;&gt;\n    cdr(T&amp;&amp; t)\n    {\n        return cdr_impl(std::forward&lt;T&gt;(t),\n                        std::make_index_sequence&lt;std::tuple_size&lt;typename std::remove_reference_t&lt;T&gt;&gt;::value&gt;{});\n    }\n\n    // copy from bytes into a reference\n    void fromBytesImpl(const unsigned char *, std::tuple&lt;&gt;)\n    {\n    }\n\n    template &lt;typename T, typename... Ts&gt;\n    void fromBytesImpl(const unsigned char * arr, std::tuple&lt;T&amp;, Ts&amp;...&gt; tup)\n    {\n        auto dest = reinterpret_cast&lt;unsigned char *&gt;(&amp;std::get&lt;0&gt;(tup));\n        std::copy_n(arr, sizeof(T), dest);\n        fromBytesImpl(arr + sizeof(T), cdr(tup));\n    }\n}\n\n// Bringing it all together\ntemplate &lt;typename... Ts&gt;\nvoid fromBytes(const std::array&lt;unsigned char, detail::sum_v&lt;sizeof(Ts)...&gt;&gt; &amp; arr, std::tuple&lt;Ts&amp;...&gt; tup)\n{\n    detail::fromBytesImpl(arr.data(), tup);\n}\n</code></pre>\n\n<p>This is then simple to use</p>\n\n<pre><code>int main()\n{\n    Object obj;\n    std::array&lt;unsigned char, 7&gt; bytes = {0x01, 0x02, 0x03, 0x04, 0x10, 0x20, 0x30};\n    fromBytes(bytes, obj.as_tuple());\n\n    std::cout &lt;&lt; std::hex &lt;&lt; obj &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1124c7c8d85f5996\" rel=\"nofollow noreferrer\">See it live</a></p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530121927, "post_id": 51068692, "comment_id": 89127348, "body": "Your remark about endianess applies here too (it applies in fact to OP&#39;s post)."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530122714, "post_id": 51068692, "comment_id": 89127761, "body": "@Jarod42 - I don&#39;t know... maybe, but in a different way. I mean: I interpret the question (&quot;Where 0x01020304 is my uin32_t&quot;) in the sense that the order of the bytes in the array is starting from the most significant byte; so <code>memcpy()</code> should works only in one type of model (little endian? I ever make confusion); setting one byte at a time, and shifting, should works with both models. But I&#39;m not sure to have understand the OP requirements."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1530124537, "post_id": 51068692, "comment_id": 89128629, "body": "@Jarod - I was wrong: the <code>memcy()</code> method should work (if I understand correctly the OP desiderata) only with big endian models (I <b>ever</b> make confusion). I&#39;ve tried your solution in my Linux intel (little endian) netbook and, for first element, print &quot;0x4030201&quot;; my solution print &quot;0x1020304&quot;."}, {"owner": {"reputation": 520, "user_id": 4347243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nYd7hc8Ziqs/AAAAAAAAAAI/AAAAAAAAADU/EYh-S8k3vpQ/photo.jpg?sz=128", "display_name": "Joshua Ryan", "link": "https://stackoverflow.com/users/4347243/joshua-ryan"}, "edited": false, "score": 0, "creation_date": 1530130197, "post_id": 51068692, "comment_id": 89131126, "body": "One thing that I like better about @max66 &#39;s answer is that I intend to have different overloads of a function like <code>getVal</code> that supports non-packed types. For example, I might have a class that is a <code>uint8</code> and a <code>uint32</code>, so the specialization of <code>getVal</code> for that class would include one call to <code>getVal</code> for a <code>uint8</code> and one call for the <code>uint32</code>."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1530122782, "last_edit_date": 1530122782, "creation_date": 1530121570, "answer_id": 51068692, "question_id": 51064910, "link": "https://stackoverflow.com/questions/51064910/how-can-i-build-a-sequence-of-structs-with-integer-members-of-increasing-value-a/51068692#51068692", "title": "How Can I Build A Sequence Of Structs With Integer Members of Increasing Value at Compile Time in C++11", "body": "<p>I propose the following solution</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename ... Ts&gt;\nclass process\n {\n   private:\n\n      template &lt;typename T&gt;\n      static T getVal (std::uint8_t const * a)\n       {\n         T ret { *a++ };\n\n         for ( auto i = 1U ; i &lt; sizeof(T) ; ++i )\n          {\n            ret &lt;&lt;= 8;\n            ret  += *a++;\n          }\n\n         return ret;\n       }\n\n      static std::size_t postIncr (std::size_t &amp; pos, std::size_t add)\n       {\n         std::size_t ret { pos };\n\n         pos += add;\n\n         return ret;\n       }\n\n   public: \n      template &lt;std::size_t N&gt;\n      static std::tuple&lt;Ts...&gt; func (std::array&lt;std::uint8_t, N&gt; const &amp; a)\n       {\n         std::size_t  pos { 0U };\n\n         return { getVal&lt;Ts&gt;(a.data()+postIncr(pos, sizeof(Ts)))... };\n       }\n };\n\nint main ()\n { \n   std::array&lt;std::uint8_t, 7U&gt;\n      bytes{{0x01U, 0x02U, 0x03U, 0x04U, 0x10U, 0x20U, 0x30U}};\n\n   auto tpl\n    { process&lt;std::uint32_t, std::uint8_t, std::uint16_t&gt;::func(bytes) };\n\n   std::cout &lt;&lt; \"- 0x\" &lt;&lt; std::hex &lt;&lt; std::get&lt;0&gt;(tpl) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"- 0x\" &lt;&lt; int(std::get&lt;1&gt;(tpl)) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"- 0x\" &lt;&lt; std::get&lt;2&gt;(tpl) &lt;&lt; std::endl;\n }\n</code></pre>\n\n<p>If you get (as I get) an annoying warning from <code>ret &lt;&lt;= 8;</code> from <code>getVal()</code> (when <code>T</code> is <code>std::uint8_t</code>; warning \"shift count >= width of type\") you can develop a second <code>getVal</code> for <code>std::uint8_t</code> (without loop and without shift), enabling it only when <code>sizeof(T) == 1</code> and enabling the first one only when <code>sizeof(T) &gt; 1</code>.</p>\n\n<p>Otherwise you can substitute <code>ret &lt;&lt;= 8;</code> with a couple of <code>ret &lt;&lt;= 4;</code>.</p>\n"}], "owner": {"reputation": 520, "user_id": 4347243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nYd7hc8Ziqs/AAAAAAAAAAI/AAAAAAAAADU/EYh-S8k3vpQ/photo.jpg?sz=128", "display_name": "Joshua Ryan", "link": "https://stackoverflow.com/users/4347243/joshua-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 51066353, "answer_count": 4, "score": 1, "last_activity_date": 1530130218, "creation_date": 1530108361, "last_edit_date": 1530130218, "question_id": 51064910, "link": "https://stackoverflow.com/questions/51064910/how-can-i-build-a-sequence-of-structs-with-integer-members-of-increasing-value-a", "title": "How Can I Build A Sequence Of Structs With Integer Members of Increasing Value at Compile Time in C++11", "body": "<p>Working in an embedded environment, I'm repeatedly writing code that takes an array of bytes from a protocol layer and turns those bytes into a C++ class representation. </p>\n\n<p>An example array of bytes that represents a <code>uint32_t</code>, followed by a <code>uint8_t</code>, followed by a <code>uint16_t</code> might look like this. </p>\n\n<pre><code>std::array&lt;uint8_t, 7&gt; bytes(0x01, 0x02, 0x03, 0x04, 0x10, 0x20, 0x30);\n</code></pre>\n\n<p>Where <code>0x01020304</code> is my <code>uin32_t</code>, <code>0x10</code> is my <code>uint8_t</code> and <code>0x2030</code> is my <code>uint16_t</code>.</p>\n\n<p>I also have a variadic function <code>func()</code> that I want to call with the values parsed out of the payload. </p>\n\n<p>To achieve this, I manually define an intermediate object: </p>\n\n<pre><code>// Declaring the Object\nstruct MY_TYPE\n{\n   uint32_t val1;\n   uint8_t val2;\n   uint16_t val3;\n} __attribute__((__packed__));\n\n// Processing the Bytes \nauto &amp; object(reinterpret_cast&lt;MY_TYPE *&gt;(&amp;bytes));\n\nfunc(object.val1, object.val2, object.val3) \n</code></pre>\n\n<p>What I want to do is implement a variadic class such that I don't need to re-implement <code>MY_TYPE</code> for every combination of types. </p>\n\n<p>Here's what I initially tried:</p>\n\n<pre><code>template &lt;typename... Types&gt;\nstruct GENERIC_CLASS\n{\n   template &lt;typename ReturnType, std::size_t ArraySize&gt;\n   ReturnType getValueFromArray(std::array&lt;uint8_t, ArraySize&gt; const &amp; array, \n                                uint32_t &amp; index); \n\n   // Note, not valid c++ since the size of the array (N) isn't \n   // specified. This has been omitted for simplicity. \n   void process(std::array&lt;uin8_t, N&gt; const &amp; array)\n   {\n      auto currentIndex(u0);\n\n      // Assumes this class has a specialization \n      // for getValueFromArray for all of the types in Types. \n\n      // This code doesn't work because there is no sequence point \n      // between each call to getValueFromArray, so the \n      // currentIndex can be incremented in a non-deterministic way. \n      func(this-&gt;getValueFromArray&lt;Types&gt;(array, currentIndex)...);\n   }\n};\n</code></pre>\n\n<p>I was able to work around this problem by introducing a new class: </p>\n\n<pre><code>template &lt;typename T, std::size_t position&gt;\nstruct Param\n{\n   using type = T;\n   static constexpr std::size_t offset = position;\n};\n</code></pre>\n\n<p>This way, instead of maintaining <code>currentIndex</code> at runtime, I can specify the offset of each argument in code, like this: </p>\n\n<pre><code>GENERIC_CLASS&lt;Param&lt;uint32_t, 0&gt;, Param&lt;uint8_t, 4&gt;, Param&lt;uint16_t, 5&gt;&gt;\n</code></pre>\n\n<p>The above is potentially error prone, as the offsets could be wrong. Is there some way to generate my sequence of <code>Params</code> from a parameter pack of types by accumulating sizes? </p>\n\n<p>Alternatively, is there some workaround for the sequence point problem that I've mentioned above? </p>\n"}, {"tags": ["c++", "c++11", "move", "move-semantics", "stdmove"], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1530109051, "post_id": 51065018, "comment_id": 89120125, "body": "I have read that &quot;take by value and move when you want a copy&quot; is not necessarily the best option. <a href=\"https://stackoverflow.com/questions/26261007/why-is-value-taking-setter-member-functions-not-recommended-in-herb-sutters-cpp\">Further reading</a>. But overall this is solid advice."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1530109237, "post_id": 51065018, "comment_id": 89120236, "body": "@MaxLanghof That link is for setters, not constructors.  There is no preexisting storage for constructors.  Which is mostly what I&#39;m talking about above (note I say that assignment should almost always be just =defaulted)."}, {"owner": {"reputation": 525, "user_id": 2042546, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gLrXB.jpg?s=128&g=1", "display_name": "CorellianAle", "link": "https://stackoverflow.com/users/2042546/corellianale"}, "edited": false, "score": 0, "creation_date": 1530109262, "post_id": 51065018, "comment_id": 89120257, "body": "&quot;Consider providing a way for callers to emplace construct into the field in highly generic code, or where you need every ounce of performance&quot; May you explain it a bit more? With an example, if possible."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1530109595, "post_id": 51065018, "comment_id": 89120490, "body": "@MaxLanghof But this question goes beyond construction, so I&#39;ve addressed it now."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1530109580, "last_edit_date": 1530109580, "creation_date": 1530108673, "answer_id": 51065018, "question_id": 51064862, "link": "https://stackoverflow.com/questions/51064862/move-or-copy-when-passing-arguments-to-the-constructor-and-member-functions/51065018#51065018", "title": "move or copy when passing arguments to the constructor and member functions", "body": "<ul>\n<li><p>If it is a primitive type, pass by value.  Locality of reference wins.</p></li>\n<li><p>If you aren't going to store a copy of it, pass by value or <code>const&amp;</code>.</p></li>\n<li><p>If you want to store a copy of it, and it is very cheap to move and modestly expensive to copy, pass by <em>value</em>.</p></li>\n<li><p>If something has a modest cost to move, and is a sink parameter, consider pass by rvalue reference.  Users will be forced to <code>std::move</code>.</p></li>\n<li><p>Consider providing a way for callers to emplace construct into the field in highly generic code, or where you need every ounce of performance</p></li>\n</ul>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">The Rule of 0/3/5</a> describes how you should handle copy assign/construct/destroy.  Ideally you follow the rule of 0; copy/move/destruct is all <code>=default</code> in anything except resource management types.  If you want to implement <em>any</em> of copy/move/destruct, you need to implement, <code>=default</code> or <code>=delete</code> every other one of the 5.</p>\n\n<p>If you are only taking 1 argument to a setter, consider writing both the <code>&amp;&amp;</code> and <code>const&amp;</code> versions of the setter.  Or just exposing the underlying object.  Move-assignment sometimes reuses storage and that is efficient.</p>\n\n<p>Emplacing looks like this:</p>\n\n<pre><code>struct emplace_tag {};\nstruct wrap_foo {\n  template&lt;class...Ts&gt;\n  wrap_foo(emplace_tag, Ts&amp;&amp;...ts):\n    foo( std::forward&lt;Ts&gt;(ts)... )\n  {}\n  template&lt;class T0, class...Ts&gt;\n  wrap_foo(emplace_tag, std::initializer_list&lt;T0&gt; il, Ts&amp;&amp;...ts):\n    foo( il, std::forward&lt;Ts&gt;(ts)... )\n  {}\nprivate:\n  Foo foo;\n};\n</code></pre>\n\n<p>there are a myriad of other ways you can permit \"emplace\" construction.  See <code>emplace_back</code> or <code>emplace</code> in standard containers as well (where they use placement <code>::new</code> to construct objects, forwarding objects passed in).</p>\n\n<p>Emplace construct even permits direct construction without even a move using objects with an <code>operator T()</code> setup properly.  But that is something that is beyond the scope of this question.</p>\n"}], "owner": {"reputation": 525, "user_id": 2042546, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gLrXB.jpg?s=128&g=1", "display_name": "CorellianAle", "link": "https://stackoverflow.com/users/2042546/corellianale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 0, "accepted_answer_id": 51065018, "answer_count": 1, "score": 0, "last_activity_date": 1530109580, "creation_date": 1530108218, "question_id": 51064862, "link": "https://stackoverflow.com/questions/51064862/move-or-copy-when-passing-arguments-to-the-constructor-and-member-functions", "title": "move or copy when passing arguments to the constructor and member functions", "body": "<p>The following is an example of my typical code. A have a lot of objects that look like this:</p>\n\n<pre><code>struct Config\n{\n    Config();\n    Config(const std::string&amp; cType, const std::string&amp; nType); //additional variables omitted\n    Config(Config&amp;&amp;) = default;\n    Config&amp; operator=(Config&amp;&amp;) = default;\n\n    bool operator==(const Config&amp; c) const;\n    bool operator!=(const Config&amp; c) const;\n\n    void doSomething(const std::string&amp; str);\n    bool doAnotherThing(const MyOtherObject&amp; obj);\n    void doYetAnotherThing(int value1, unsigned long value2, const std::string&amp; value3, MyEnums::Seasons value4, const std::vector&lt;MySecondObject&gt;&amp; value5);\n\n    std::string m_controllerType;\n    std::string m_networkType;\n    //...\n};\n\n//...\n\nConfig::Config(const std::string&amp; cType, const std::string&amp; nType) :\n    m_controllerType(cType),\n    m_networkType(nType)\n{\n}\n</code></pre>\n\n<p>My motivations and general understand of the subject:</p>\n\n<ul>\n<li>use const references in constructors and methods to avoid double-copying when passing objects.</li>\n<li>simple types - pass by value; classes and structs - pass by const reference (or simple reference when I need to modify them)</li>\n<li>force compiler to create <code>default</code> move constructor and move assignment so that It would be able to do it's fancy magic and simultaneously it allows to avoid writing boring <code>ctor() : m_v1(std::move(v1)), m_v2(std::move(v2)), m_v3(std::move(v3)) {}</code>.</li>\n<li>if it performs badly, use libc and raw pointers, then wrap it at class and write a comment.</li>\n</ul>\n\n<p>I have a strong feeling that by rules of thumb are flawed and simply incorrect. </p>\n\n<p>After reading cppreference, Scott Mayers, C++ standard, Stroustrup and so on, I feel like: \"Yea, I understand every word here, but it still doesn't make any sense'. The only thing I king of understood is that move semantics makes sense when my class contains non-copiable types, like <code>std::mutex</code> and <code>std::unique_ptr</code>.</p>\n\n<p>I've seen a lot of code where people pass complex object by value, like large strings, vectors and custom classes - I believe this is where move semantics happen, but, again, how can you pass an object to a function by move? If I am correct, it would leave an object in a \"kind-of-null-state\", making it unusable.</p>\n\n<p>So, the question\u044b are: \n- How do I correctly decide between pass-by-value and pass-by-reference?\n- Do I need to provide both copy and move constructors? \n- Do I need to explicitly write move and copy constructors? May I use <code>= default</code>? My classes are mostly POD object so there is no complex login involved.\n- When debugging, I can always write <code>std::cout &lt;&lt; \"move\\n\";</code> or <code>std::cout &lt;&lt; \"copy\\n\";</code> in constructors of my own classes, but how do I know what happens with classes from <code>stdlib</code>?</p>\n\n<p>P.S. It may look like it is a cry out of desperation (it is), not a valid SO question. I simply don't know to formulate my problems better than this. </p>\n"}, {"tags": ["c++", "find", "wstring", "wofstream", "wifstream"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1530108010, "post_id": 51064698, "comment_id": 89119401, "body": "Have you used a debugger to determine what data is stored within <code>buf</code>?  Or anything else to determine what is within <code>buf</code>?  Have you examined the binary contents of the text file to determine what that <code>\u0107</code> is encoded as?  Have you examined the integer value of <code>\u0107</code> within your C++ program?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1530108160, "post_id": 51064698, "comment_id": 89119519, "body": "<code>sizeof(wchar_t) == 2</code> on Windows. You can imaging reading such a string from a file encoded in UTF-8 will not give you what you want."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1530109224, "post_id": 51064698, "comment_id": 89120227, "body": "@DeiDei I can imagine that it might corrupt the string, but I cannot image then how come only the non-ASCII characters become corrupted"}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1530109169, "post_id": 51064921, "comment_id": 89120191, "body": "I can see why this might be an issue. Also, the corrupted characters are only those which are non-ASCII. How come when read from the file, these characters become &#39;corrupted&#39; but when tried to be compared, they yield different values? I would imagine the corruption to be applied in the same manner. Could you please provide an example how what I tried to do could be achieved?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1530109488, "post_id": 51064921, "comment_id": 89120420, "body": "The easiest way is to use the utf8cpp library: <a href=\"http://utfcpp.sourceforge.net/\" rel=\"nofollow noreferrer\">utfcpp.sourceforge.net</a>. ASCII characters probably work due to the standard library doing some sort of automatic widening"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1530109871, "post_id": 51064921, "comment_id": 89120684, "body": "Thank you. This clarified few things."}, {"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 0, "creation_date": 1532896335, "post_id": 51064921, "comment_id": 90134015, "body": "FYI only, if you do need to convert from UTF8 to UTF16 on Windows, the <code>MultibyteToWideChar</code> function does that."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 1, "last_activity_date": 1530109612, "last_edit_date": 1530109612, "creation_date": 1530108388, "answer_id": 51064921, "question_id": 51064698, "link": "https://stackoverflow.com/questions/51064698/failing-to-find-a-wchar-t-that-is-present-in-a-stdwstring/51064921#51064921", "title": "Failing to find a wchar_t that is present in a std::wstring", "body": "<p>Unfortunately <code>wchar_t</code> isn't UTF-8, its UTF-16(on Windows) and no magic conversion happens when you read a UTF-8 file. If you debug your program you'll see corrupted characters in your <code>buf</code> variable.</p>\n\n<p>You either need to read your string as a <code>std::string</code> then convert from UTF-8 to <code>whar_t</code> or work in UTF-8 and convert your literal string from <code>whcar_t</code> to <code>std::string</code> of UTF-8 characters.</p>\n\n<p>If you are using a recent compiler you can use the following to create a UTF-8 string literal:</p>\n\n<pre><code>u8\"\u0107\"\n</code></pre>\n\n<p>The following should work:</p>\n\n<pre><code>int main()\n{\n    std::ifstream input(\"input.txt\");\n    std::ofstream output(\"output.txt\");\n\n    if(!(input &amp;&amp; output)){\n        std::cerr &lt;&lt; \"file(s) not opened\";\n        return -1;\n    }\n\n    std::string buf;\n    std::getline(input, buf);\n\n    output &lt;&lt; buf;\n\n    std::cout &lt;&lt; buf.find(u8\"\u0107\");\n}\n</code></pre>\n"}], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 51064921, "answer_count": 1, "score": 0, "last_activity_date": 1530109612, "creation_date": 1530107795, "question_id": 51064698, "link": "https://stackoverflow.com/questions/51064698/failing-to-find-a-wchar-t-that-is-present-in-a-stdwstring", "title": "Failing to find a wchar_t that is present in a std::wstring", "body": "<p>I was playing with <code>std::wstring</code> and <code>std::wfstream</code>, when I encountered a strange behaviour. Namely, it appears that <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/find\" rel=\"nofollow noreferrer\"><code>std::basic_string&lt;wchar_t&gt;::find</code></a> fails to find certain characters. Consider the following code:</p>\n\n<pre><code>int main()\n{\n    std::wifstream input(\"input.txt\");\n    std::wofstream output(\"output.txt\");\n\n    if(!(input &amp;&amp; output)){\n        std::cerr &lt;&lt; \"file(s) not opened\";\n        return -1;\n    }\n\n    std::wstring buf;\n    std::getline(input, buf);\n\n    output &lt;&lt; buf;\n\n    std::cout &lt;&lt; buf.find(L'\u0107');\n}\n</code></pre>\n\n<p>Here I am simply reading the first line of the <code>input</code> file and writing it to the <code>output</code> file. Before the program runs, the content of the first file is <code>a\u0105bc\u0107d</code> and the output file is empty. After executing the code, the input file is successfully copied into the output file.</p>\n\n<p>What's surprising to me is that I tried to find a <code>\u0107</code> letter in the <code>buf</code> and encountered the mentioned strange behaviour. After the program executed, I confirmed that the output file contains exactly <code>a\u0105bc\u0107d</code>, which obviously contains the mentioned character <code>\u0107</code>.</p>\n\n<p>However, the line <code>std::cout &lt;&lt; buf.find(L'\u0107')</code> did not behave as expected. I wasn't expecting to get an output of <code>4</code>, given the memory layout of <code>std::wstring</code>, but I also <em>definitely did not expect to get <code>std::string::npos</code></em>. It's worth mentioning that finding regular ASCII characters with this method succeeds.</p>\n\n<p>To sum up, the mentioned code correctly copies the first line of input file to output file, but it fails to find a character in a string (returning npos), that is responsible of holding the data that is to be copied. Why is that so? What causes the <code>find</code> to fail here?</p>\n\n<p><em>Note: both of the files are UTF-8 encoded on Windows.</em></p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1530113626, "post_id": 51064591, "comment_id": 89123079, "body": "Your code prints only 0 and returns 0 here. What&#39;s correct?"}, {"owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "reply_to_user": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1530113868, "post_id": 51064591, "comment_id": 89123206, "body": "Sorry. I&#39;ve revised."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1530114106, "post_id": 51064591, "comment_id": 89123334, "body": "No change here."}, {"owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "reply_to_user": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1530114385, "post_id": 51064591, "comment_id": 89123482, "body": "With the new values for g&lt;-c(1,2,1,2) i&#39;m getting 0.25 as the output, but return should be 0.5"}], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "edited": false, "score": 0, "creation_date": 1530116567, "post_id": 51067005, "comment_id": 89124716, "body": "Thank you....based on this <a href=\"https://stackoverflow.com/questions/1074474/should-i-use-double-or-float\" title=\"should i use double or float\">stackoverflow.com/questions/1074474/&hellip;</a> .... &quot;whereas floats take up less memory and are faster. In general you should use float unless you have a case where it isn&#39;t accurate enough. &quot;"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "edited": false, "score": 0, "creation_date": 1530116868, "post_id": 51067005, "comment_id": 89124893, "body": "@user2723494 That&#39;s from a 0-score answer, while the top rated answers advocate that there is not much difference (if any at all) on CPU. Besides, R&#39;s <code>numeric</code> type corresponds to a <code>double</code>. So while you might use <code>float</code> in C++, the result will be converted to <code>double</code> on its way to R."}, {"owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "edited": false, "score": 0, "creation_date": 1530118063, "post_id": 51067005, "comment_id": 89125479, "body": "thank you. Ironically when you google, &quot;float instead of double&quot; the line I quoted is the google auto-answer."}], "tags": [], "owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "is_accepted": true, "score": 1, "last_activity_date": 1530114914, "creation_date": 1530114914, "answer_id": 51067005, "question_id": 51064591, "link": "https://stackoverflow.com/questions/51064591/translating-python-to-rcpp/51067005#51067005", "title": "Translating Python to Rcpp", "body": "<p>There is an error in one of your loops: <code>i</code> is not initialized. In my case the caused the loop to be not evaluated at all. With the proper fix in place, the result looks better:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\nfloat gini_index(NumericVector y, NumericVector g){\n  int n_records = y.size();\n  float gini = 0.0;\n  NumericVector groups = unique(y);\n  int group_count = groups.size();\n  for(int i_g=0; i_g&lt;group_count; i_g++){\n    float size = 0;\n    for(int i = 0;i&lt;n_records;i++){ // !!!\n      if(g[i]==groups[i_g]){\n        size++;\n      }\n    }\n    float score = 0.0;\n    for(int i_y=0; i_y&lt;n_records; i_y++){\n      float class_count=0;\n      if(y[i_y]==groups[i_g]){\n        class_count++;}\n      float p=0;\n      if(size==0){\n        p=0;\n      }\n      else{\n        p = class_count/size;\n      }\n      Rcpp::Rcout&lt;&lt;p&lt;&lt;std::endl;\n      score = score + p*p;\n    }\n    gini = gini+(1.0-score)*(size/n_records);  \n  }\n  return(gini);\n}\n\n/*** R\ny&lt;-c(1,1,2,2)\ng&lt;-c(1,2,1,2)\ngini_index(y,g)\n*/\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&gt; gini_index(y,g)\n0 2\n0\n0\n0.5\n0.5\n1 2\n0.5\n0.5\n0\n0\n[1] 0.5\n</code></pre>\n\n<p>BTW: </p>\n\n<ul>\n<li>Why are you returning <code>float</code> instead of <code>double</code>? </li>\n<li>Increments should be written as <code>++i</code> etc.</li>\n<li>C++ has <code>+=</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "is_accepted": false, "score": 0, "last_activity_date": 1530729389, "creation_date": 1530729389, "answer_id": 51179379, "question_id": 51064591, "link": "https://stackoverflow.com/questions/51064591/translating-python-to-rcpp/51179379#51179379", "title": "Translating Python to Rcpp", "body": "<p>This is what I ended up using, if anyone tries to recreate. The answer I originally accepted was very helpful but printed out errant answers in other scenarios.</p>\n\n<pre><code>float gini_index(NumericVector y, NumericVector g){\n  float gini = 0.0;\n  NumericVector classes = unique(y);\n  int class_count = classes.size();\n  int n_instances = y.size();\n\n  float p;\n  for(int group=0; group&lt;class_count; group++){\n    float size = 0;\n    for(int i=0; i&lt;g.size();i++){\n      if(g[i]==classes[group]){\n        size++;\n      }\n    }\n    if(size==0){\n      p=0;\n    }\n    float score =0.0;\n    if(size!=0){\n      for(int class_val=0; class_val&lt;classes.size(); class_val++){\n        float correctly_assigned = 0;\n        for(int i=0; i&lt;g.size();i++){\n          if(g[i]==classes[group] &amp;&amp; y[i]==classes[class_val])\n            correctly_assigned++;\n        }\n        p = correctly_assigned/size;\n        score = score +p*p;\n      }\n      gini = gini+ (1.0-score)*(size / n_instances);\n    }\n  }\n  return gini;\n}\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 51067005, "answer_count": 2, "score": 0, "last_activity_date": 1530729389, "creation_date": 1530107511, "last_edit_date": 1530113847, "question_id": 51064591, "link": "https://stackoverflow.com/questions/51064591/translating-python-to-rcpp", "title": "Translating Python to Rcpp", "body": "<p>I'm having trouble converting this ptyhon to Rcpp</p>\n\n<p>The script is part of a classification and regression tree logic:</p>\n\n<pre><code># Calculate the Gini index for a split dataset\ndef gini_index(groups, classes):\n    # count all samples at split point\n    n_instances = float(sum([len(group) for group in groups]))\n    # sum weighted Gini index for each group\n    gini = 0.0\n    for group in groups:\n        size = float(len(group))\n        # avoid divide by zero\n        if size == 0:\n            continue\n        score = 0.0\n        # score the group based on the score for each class\n        for class_val in classes:\n            p = [row[-1] for row in group].count(class_val) / size\n            score += p * p\n        # weight the group score by its relative size\n        gini += (1.0 - score) * (size / n_instances)\n    return gini\n\n# test Gini values\nprint(gini_index([[[1, 1], [1, 0]], [[1, 1], [1, 0]]], [0, 1]))\n&gt;&gt;0.5\nprint(gini_index([[[1, 0], [1, 0]], [[1, 1], [1, 1]]], [0, 1]))\n&gt;&gt;0\n</code></pre>\n\n<p>I'm trying to speed it up by simply providing two vectors, and looping.\nThe vectors are the actual group and proposed group.\nThe actual group corresponds to the last element in each nested list above:</p>\n\n<pre><code>1,0,1,0\n</code></pre>\n\n<p>The proposed group corresponds to the way the nested lists are grouped (first two elements are in one group; the second two elements are in another)</p>\n\n<pre><code>1,1,2,2\n</code></pre>\n\n<p>My C++ / Rcpp is not strong enough to see what's going wrong here:</p>\n\n<pre><code>float gini_index(NumericVector y, NumericVector g){\n  int n_records = y.size();\n  float gini = 0.0;\n  NumericVector groups = unique(y);\n  int group_count = groups.size();\n  for(int i_g=0; i_g&lt;group_count; i_g++){\n    float size = 0;\n    for(int i;i&lt;n_records;i++){\n      if(g[i]==groups[i_g]){\n        size++;\n      }\n    }\n    float score = 0.0;\n    for(int i_y=0; i_y&lt;n_records; i_y++){\n      float class_count=0;\n      if(y[i_y]==groups[i_g]){\n        class_count++;}\n      float p=0;\n      if(size==0){\n        p=0;\n      }\n      else{\n        p = class_count/size;\n      }\n      std::cout&lt;&lt;p&lt;&lt;std::endl;\n      score = score + p*p;\n    }\n    gini = gini+(1.0-score)*(size/n_records);  \n  }\nreturn(gini);\n}\n\n\ny&lt;-c(1,1,2,2)\ng&lt;-c(1,2,1,2)\ngini_index(y,g)\n\n\n\n\n &gt; gini_index(y,g)\n    0\n    0.5\n    0\n    0.5\n    0\n    0\n    0\n    0\n    [1] 0.25\n</code></pre>\n\n<p>This should return 0.5</p>\n"}, {"tags": ["c++", "linux", "windows", "macos"], "comments": [{"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 2, "creation_date": 1530107386, "post_id": 51064431, "comment_id": 89118939, "body": "what is <code>sizeof (RawCodePoint)</code> on each platform?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1530107472, "post_id": 51064431, "comment_id": 89119008, "body": "I assume you are using the .o file as part of a shared library or executable at some point -- is that executable also 12MB larger under Linux?  Even after you run <code>strip</code> on the executable?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1530108700, "post_id": 51064431, "comment_id": 89119876, "body": "How big are the executables?  Since object files are temporary, is the size important?"}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1530108718, "post_id": 51064431, "comment_id": 89119889, "body": "What was the full compiler command line you used?"}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1530108958, "post_id": 51064431, "comment_id": 89120061, "body": "This question may help with analyzing the result further: <a href=\"https://stackoverflow.com/questions/11720340/tool-to-analyze-size-of-elf-sections-and-symbol\" title=\"tool to analyze size of elf sections and symbol\">stackoverflow.com/questions/11720340/&hellip;</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1530121958, "post_id": 51064431, "comment_id": 89127364, "body": "Sounds like <code>-fmerge-constants</code> isn&#39;t happening on your Linux platform."}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "reply_to_user": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1530183525, "post_id": 51064431, "comment_id": 89150634, "body": "@PaulR The <code>sizeof(RawCodePoint)</code> is the same - 12 bytes."}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1530184147, "post_id": 51064431, "comment_id": 89151016, "body": "@JeremyFriesner The shared library is 12MB larger on linux as well. That&#39;s how I found out that the object file is so large."}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "edited": false, "score": 0, "creation_date": 1530184169, "post_id": 51064431, "comment_id": 89151038, "body": "The full command line looks like the following: <code>&#47;usr&#47;bin&#47;c++  -DUSE_CLANG_COMPLETER -DYCMD_CORE_VERSION=39 -DYCM_EXPORT=&quot;&quot; -Dycm_core_EXPORTS -I&#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;ycm -I&#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;ycm&#47;ClangCompleter -isystem &#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;BoostParts -isystem &#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;pybind11 -isystem &#47;usr&#47;include&#47;python3.6m -isystem &#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;llvm&#47;include  -fvisibility=hidden -O3 -DNDEBUG -fPIC   -std=c++11 -o CMakeFiles&#47;ycm_core.dir&#47;CodePoint.cpp.o -c &#47;home&#47;bstaletic&#47;Temp&#47;ycmd&#47;cpp&#47;ycm&#47;CodePoint.cpp</code>"}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1530184279, "post_id": 51064431, "comment_id": 89151108, "body": "@Eljay Manually passing <code>-fmerge-constants</code> didn&#39;t improve the size at all."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1530185069, "post_id": 51064431, "comment_id": 89151657, "body": "What do the object dumps of CodePoint.cpp.o look like on the 3 platforms?  That should give you some insight as to what is going on that is different on Linux."}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "edited": false, "score": 0, "creation_date": 1530186015, "post_id": 51064431, "comment_id": 89152251, "body": "Sorry, I have not used <code>objdump</code> before. Would you mind telling me what to look out for? Should I just get the output of <code>objdump --full-contents CodePoint.o</code>?"}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "reply_to_user": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1530220474, "post_id": 51064431, "comment_id": 89170843, "body": "@PaulR I was only now able to try the <code>nm</code> and <code>size</code> from that other stackoverflow thread. <code>nm</code> on macOS just said that <code>sizes with -print-size for Mach-O files are always zero</code> while <code>size</code> didn&#39;t report anything close to 20MB."}, {"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "edited": false, "score": 0, "creation_date": 1530222600, "post_id": 51064431, "comment_id": 89171561, "body": "Here&#39;s what happens when I do <code>size -A -d ycm_core.so</code> (which is the name of the shared object on both linux and mac):  <a href=\"https://gist.github.com/bstaletic/360197714ad7ceb6df7a14589d698e50\" rel=\"nofollow noreferrer\">gist.github.com/bstaletic/360197714ad7ceb6df7a14589d698e50</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "edited": false, "score": 0, "creation_date": 1530337925, "post_id": 51099337, "comment_id": 89211085, "body": "Thanks for the help! That surely pointed me in the right direction. Replacing <code>char*</code> with (appropriately sized) <code>char[]</code> made <code>.rela.dyn</code> drop to negligable size, but then MSVC took forever to compile (however, that&#39;s another issue)."}], "tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": true, "score": 2, "last_activity_date": 1530267742, "last_edit_date": 1530267742, "creation_date": 1530266960, "answer_id": 51099337, "question_id": 51064431, "link": "https://stackoverflow.com/questions/51064431/object-file-is-2-5x-larger-on-linux-than-on-macos-or-windows/51099337#51099337", "title": "Object file is 2.5x larger on linux than on macOS or Windows", "body": "<p>From the output of <code>size</code> you linked you can see that there are 12 MB of relocations in the elf object (section <code>.rela.dyn</code>). If a <a href=\"https://docs.oracle.com/cd/E23824_01/html/819-0690/chapter6-54839.html#scrolltoc\" rel=\"nofollow noreferrer\">64 bit relocation</a> takes 24 bytes and you have 132624 table entries with 4 pointers to strings each, this pretty much explains the 12 MB difference (132624 *4 * 24 = 12731904 ~ 12 MB ).</p>\n\n<p>Apparently the other formats either use a more efficient relocation type or link the references directly and just relocate the whole block together with the strings as one piece of memory.</p>\n\n<p>Since you are linking this to a shared library the dynamic relocations will not go away.</p>\n\n<p>I am not sure if it is possible to avoid this with the code you currently use.\nHowever, I think a unicode code point must have a maximal size. Why don't you store the code points by value in char arrays in the RawCodePoint struct? The size of each code point string should be no larger than the pointer you currently store, and the locality of reference of the table lookup may actually improve.</p>\n\n<pre><code>constexpr size_t MAX_CP_SIZE = 4; // Check if that is correct\n\nstruct RawCodePointLocal {\n  const std::array&lt;char, MAX_CP_SIZE&gt; original;\n  const std::array&lt;char, MAX_CP_SIZE&gt; normal;\n  const std::array&lt;char, MAX_CP_SIZE&gt; folded_case;\n  const std::array&lt;char, MAX_CP_SIZE&gt; swapped_case;\n  bool is_letter;\n  bool is_punctuation;\n  bool is_uppercase;\n  uint8_t break_property;\n  uint8_t combining_class;\n};\n</code></pre>\n\n<p>This way you should not need relocations for the entries.</p>\n"}], "owner": {"reputation": 13, "user_id": 5836371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fecc776101ecc4e2ece7e2da3c0f5c?s=128&d=identicon&r=PG&f=1", "display_name": "bstaletic", "link": "https://stackoverflow.com/users/5836371/bstaletic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 51099337, "answer_count": 1, "score": 1, "last_activity_date": 1530267742, "creation_date": 1530107084, "question_id": 51064431, "link": "https://stackoverflow.com/questions/51064431/object-file-is-2-5x-larger-on-linux-than-on-macos-or-windows", "title": "Object file is 2.5x larger on linux than on macOS or Windows", "body": "<p>I have a file which, when compiled to object file, has the following size:</p>\n\n<ul>\n<li>On Windows, using MSVC, it's 8MB.</li>\n<li>On macOS, using clang, it's 8MB.</li>\n<li>On linux (Ubuntu 18.04 or Gentoo), using either gcc or clang, it's 20MB.</li>\n</ul>\n\n<p>The file (detailed below) is a representation of (a part of) a unicode table along with character properties. The encoding is utf8.</p>\n\n<p>It occured to me that the problem might be that libstdc++ can't handle the file well, so I tried libc++ with clang on Gentoo, but it didn't do anything (the object file size remained the same).</p>\n\n<p>Then I thought that it might be some optimization doing something odd, but once again I had no size improvements when I went from <code>-O3</code> to <code>-O0</code>.</p>\n\n<p><a href=\"https://github.com/Valloric/ycmd/blob/master/cpp/ycm/CodePoint.cpp\" rel=\"nofollow noreferrer\">The file</a>, on <a href=\"https://github.com/Valloric/ycmd/blob/master/cpp/ycm/CodePoint.cpp#L50\" rel=\"nofollow noreferrer\">line 50</a> includes <a href=\"https://github.com/Valloric/ycmd/blob/master/cpp/ycm/UnicodeTable.inc\" rel=\"nofollow noreferrer\"><code>UnicodeTable.inc</code></a>. The <code>UnicodeTable.inc</code> contains a <code>std::array</code> of the unicode codepoints.</p>\n\n<p>I tried changing <code>std::array</code> to C style array, but again, the object file size did not change.</p>\n\n<p>I have the preprocessed version of the <code>CodePoint.cpp</code> which can be compiled with <code>$CC -xc++ CodePoint.i -c -o CodePoint.o</code>. <code>CodePoint.i</code> contains about 40k lines of STL code and about 130k lines of unicode table.</p>\n\n<p>I tried uploading the preprocessed <code>CodePoint.i</code> to gists.github.com and to paste.pound-python.org,  but both refused the 170k lines long file.</p>\n\n<p>At this point I'm out of ideas and would greatly appreciate any help regarding finding out the source of the \"bloated\" object file size. </p>\n"}, {"tags": ["c++", "qt", "qml", "qabstractitemmodel", "qabstractlistmodel"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530112233, "post_id": 51064345, "comment_id": 89122249, "body": "I guess that question is largely opinion-based since on other questions this has been discussed sometimes in the comments. Most of the times I just use the <code>QQmlObjectListModel&lt;MyItem&gt;</code> that you can find in some GIT-Repositories like the one of <i>TheBootroo</i> - it exposes all properties of <code>MyItem</code> as roles and has a special role that exposes the item itself. Properties and Roles automatically update them selves."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530112731, "post_id": 51064345, "comment_id": 89122570, "body": "* Here is the link to aforementioned model: <a href=\"https://github.com/Cavewhere/lib-qt-qml-tricks\" rel=\"nofollow noreferrer\">github.com/Cavewhere/lib-qt-qml-tricks</a> - as disclaimer: This is not self-advertisement, since I am not  <a href=\"https://stackoverflow.com/users/1195141/thebootroo\"><i>TheBootroo</i></a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530115334, "post_id": 51064345, "comment_id": 89124027, "body": "@derM I disagree this is largely opinion-based. There are various objective reasons that one of these might be preferred over the other. I just don&#39;t know them. Your suggestion is a nice midway, but still the question remains if using the QObject&#39;s properties or the list model&#39;s properties have any up/downsides."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530116574, "post_id": 51064345, "comment_id": 89124718, "body": "Well then, my most rational explanation, why roles are necessary."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530132910, "post_id": 51064345, "comment_id": 89132331, "body": "As you can see, with the two answers, and the discussion in the comments - it is opinion-based, or at least not answerable in a general way."}], "answers": [{"comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1530121113, "post_id": 51067423, "comment_id": 89126957, "body": "<code>the Qt way to write models</code> that is not to say it is not stiff, clunky and morally outdated."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1530123812, "post_id": 51067423, "comment_id": 89128251, "body": ";-) - &quot;Ok, this reason is nothing that really matters&quot;"}], "tags": [], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "is_accepted": false, "score": 0, "last_activity_date": 1530124819, "last_edit_date": 1530124819, "creation_date": 1530116531, "answer_id": 51067423, "question_id": 51064345, "link": "https://stackoverflow.com/questions/51064345/should-i-use-many-roles-or-a-single-one-deferring-the-actual-properties-to-a-qob/51067423#51067423", "title": "Should I use many roles or a single one deferring the actual properties to a QObject wrapping/exposing the data as its properties", "body": "<blockquote>\n  <p><strong>Yes, you should.</strong></p>\n</blockquote>\n\n<p>The most fundamental reason to use roles is: <em>It is the Qt way to write models.</em></p>\n\n<p>Ok, this reason is nothing that really matters --- unless there are things that expect you to do it the Qt way...</p>\n\n<p>So, there are reasons why you should implement roles, but that does not mean, you have to use them in QML - and <em>depending on what you plan to do with your model</em>, it will be unnecessary.</p>\n\n<p>In my opinion, the most important reason is, that you have to implement that <code>dataChanged</code>-signal. If you don't do that, your model is worth as much as <code>QVariantList</code>.</p>\n\n<p>Changes of the the properties of your object would only be reflected in the delegates that are generated but objects that are relying on the <code>dataChanged</code>-signal won't receive updates - unless you trigger it for the object-role when ever a property of that object has changed.<br>\nThis on the other hand will have large impact on the delegates, since than all bindings have to be reevaluated.</p>\n\n<p>Take for example the <code>QSortFilterProxyModel</code> - if you don't have the <code>dataChanged</code>-signal, it won't update the filter or sorting, if a value has been changed, since it is listening to the <code>dataChanged</code>-signal for that.</p>\n\n<p>Ad hoc, I don't know any other cases that would use that from the Qt libraries, but there might be others.</p>\n\n<p>However, as long as you don't intend to use any of those - you don't need to fire the <code>dataChanged</code>-signal.</p>\n\n<p>Whether you have to really implement roles for that, I don't know. I have not tried to implement the <code>dataChanged</code>-signal without roles.</p>\n\n<p><a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/itemmodels/qsortfilterproxymodel.cpp.html#_ZN21QSortFilterProxyModel14setSourceModelEP18QAbstractItemModel\" rel=\"nofollow noreferrer\">Code of QSortFilterProxyModel, that uses the <code>dataChanged</code>-signal</a></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>You don't need to</strong><br>\n  When you either don't use anything that relies on properly implemented roles or you reimplement that functionality that would rely on the roles your self.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530123647, "post_id": 51068501, "comment_id": 89128176, "body": "So, you say if I use a JS functor that I pass from QML, I don&#39;t have to use <code>filterAcceptsRow</code> which IMHO is only called, when the <code>dataChanged</code>-signal in the model is implemented? How do you do that?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530124275, "post_id": 51068501, "comment_id": 89128503, "body": "@derM I manually invalidate and then call <code>sort()</code> and it is resorted and refiltered."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530124577, "post_id": 51068501, "comment_id": 89128656, "body": "That means, you need to refilter and sort the whole thing when ever a property in any Item in the model is changing? I don&#39;t see how that is any better."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530126746, "post_id": 51068501, "comment_id": 89129676, "body": "Well, not on every change, but on every change that needs to be reflected by sorting or filtering. As I mentioned in the linked question, even though the implementation looks rather inefficient at first, it is really not all that bad. It is still immensely slower than what the GUI takes to update."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530130356, "post_id": 51068501, "comment_id": 89131193, "body": "Most of the time it takes to update the GUI comes from a full rebuild of the view when you invalidate the filter. Assume you have a model of <code>Goods</code> each with a price tag and an availability. You sort for the price and filter for the availability. Now one of those <code>Goods</code> is changing the prize or the availability. You need a full refresh of the view, fully filter the model again and fully sort the model again. That seems tremendously inefficient to me, when you compare it to: Remove only the unavailable Item and destroy, move the now more expensive one."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1530132374, "post_id": 51068501, "comment_id": 89132095, "body": "Well, it does the job for me, and I do have huge data models. It is definitely worth the overhead as opposed to spending my life implementing models with various and varying schema. If you ask me, fetching data all the way from the internet just because I changed the view from ascending to descending is tremendously inefficient too, but that&#39;s how 99.99% sites do it. In the end you have to balance things out, is something theoretically inefficient, memory inefficient, CPU inefficient, bandwidth inefficient etc.. and factor in what matters the most, what you can sacrifice and to what gains."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 0, "last_activity_date": 1530121876, "last_edit_date": 1530121876, "creation_date": 1530120819, "answer_id": 51068501, "question_id": 51064345, "link": "https://stackoverflow.com/questions/51064345/should-i-use-many-roles-or-a-single-one-deferring-the-actual-properties-to-a-qob/51068501#51068501", "title": "Should I use many roles or a single one deferring the actual properties to a QObject wrapping/exposing the data as its properties", "body": "<p>Using roles means you have to stick to a pre-defined model schema.</p>\n\n<p>Roles are good if your objects are low level, so you can expose various object members as roles.</p>\n\n<p>But in the case of a <code>QObject *</code> model, that is entirely unnecessary. You are already utilizing Qt's meta object system, which can facilitate the same functionality in conjunction with the QML engine.. </p>\n\n<p>As long as the properties are properly implemented and have notify signals, it will all work seamlessly in QML.</p>\n\n<p>And it is a big time saver too, as the model is generic, and you can populate it with objects, defined in QML without having to recompile the C++ code or have a dedicated model for each and every model.</p>\n\n<p>Keep in mind that <code>QObject</code>s are rather big, and to present a significant overhead if you have scores of model items. If your model is huge or you are dealing with an already existing data set that is not available as <code>QObject*</code>s out of the box, it will be more efficient to implement a \"classical\" model with roles and whatnot. </p>\n\n<p>As long as you don't run into its limitations, I'd say a single role <code>QObject*</code> model is the simpler, easier, faster, more flexible and more elegant solution.</p>\n\n<p>As for sorting and filtering issue mentioned, the stock solutions obviously won't cut it. As mentioned <a href=\"https://stackoverflow.com/questions/50689617/sort-and-filter-a-c-model-via-qml-functors\">here</a>, it is possible to implement sorting and filtering which takes in a JS functor in which you can run your custom logic, which I dare say is actually better than the stock role based functionality. And again, you can get new code in it without having to recompile, it is even possible to drive it via functors generated at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "is_accepted": true, "score": 2, "last_activity_date": 1530136457, "creation_date": 1530136457, "answer_id": 51071957, "question_id": 51064345, "link": "https://stackoverflow.com/questions/51064345/should-i-use-many-roles-or-a-single-one-deferring-the-actual-properties-to-a-qob/51071957#51071957", "title": "Should I use many roles or a single one deferring the actual properties to a QObject wrapping/exposing the data as its properties", "body": "<p>Having roles in a model is helpful when you want to use it with features that rely on roles.</p>\n\n<p>For example you want to feed your model to a <code>ComboBox</code>, if it has roles you can just specify a <code>textRole</code> to the <code>ComboBox</code> and it will do its thing. If using a single object role, you will have to modify the delegate to display your correct object property.\nRoles are also needed if you want to make use of <code>ListView</code>'s section feature.</p>\n\n<p>Like @derm said, it's also useful with a <code>QSortFilterProxyModel</code> (shameless plug: if your model has roles, it's super easy to filter or sort it with my <a href=\"https://github.com/oKcerG/SortFilterProxyModel\" rel=\"nofollow noreferrer\"><code>SortFilterProxyModel</code> library</a>).</p>\n\n<p>You mention reusability and having to reimplement stuff. That's a good point but it's totally doable to have a generic model with roles based on <code>QObject</code> properties.\nIn fact it has been done and it is available with a very permissible license here : <a href=\"http://gitlab.unique-conception.org/qt-qml-tricks/qt-qml-models\" rel=\"nofollow noreferrer\">Thomas Boutroue's <code>QQmlObjectListModel</code></a>. From c++ it has the same API as a <code>QList</code> but it exposes a <code>QAbstractListModel</code> that is usable by QML.\nThe roles are based on the properties of your objects, and when a notify signal is emitted, it emits the corresponding <code>dataChanged</code> signal. <code>insertRows</code> and friends are also handled automatically.</p>\n\n<p>With that said, I don't see much point in doing a model with a single object role. If you want a proper model with <code>rowsInserted</code>/<code>rowRemoved</code> signals (and you should, unless you just have a static model, in this case a <code>QVariantList</code> or a <code>QObjectList</code> is enough), you'd have to implement it yourself anyway when you can just use <code>QQmlObjectListModel</code> and be done with it.</p>\n"}], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 51071957, "answer_count": 3, "score": 0, "last_activity_date": 1530136457, "creation_date": 1530106899, "question_id": 51064345, "link": "https://stackoverflow.com/questions/51064345/should-i-use-many-roles-or-a-single-one-deferring-the-actual-properties-to-a-qob", "title": "Should I use many roles or a single one deferring the actual properties to a QObject wrapping/exposing the data as its properties", "body": "<p>Is an <code>QAbstractListModel</code> implementation with say roles</p>\n\n<pre><code>name, image, enabled, color, editable\n</code></pre>\n\n<p>Better than an implementation with a single role (forgive me for not being able to come up with a better name)</p>\n\n<pre><code>thing\n</code></pre>\n\n<p>which causes a <code>QObject*</code> with aforementioned <code>Q_PROPERTY</code>s to be returned?</p>\n\n<p>The difference on QML side would be an extra \"indirection\" when accessing the values in say, a delegate:</p>\n\n<pre><code>model.thing.name\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>model.name\n</code></pre>\n\n<p>I lean towards the QObject approach, because it disentangles the data view from the list model, and has a potential for reuse. It also doesn't require you to also implement the <code>setData</code> function. As far as I can tell, there are no specific pro's for the \"many roles\" option, unless of course it's impossible to properly define a proper <code>QObject</code> subclass wrapping the data (because e.g. it could make little sense conceptuallyfor specific cases).</p>\n"}, {"tags": ["c++", "regex", "search", "unordered-map"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530106890, "post_id": 51064222, "comment_id": 89118610, "body": "If ordering doesn&#39;t matter you might want to try a <code>std::vector&lt;std::pair&lt;std::regex, std::string&gt;&gt;</code>.  You can get better cache performance out of it."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530106937, "post_id": 51064222, "comment_id": 89118642, "body": "@NathanOliver What&#39;s that have to do with ordering?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530106965, "post_id": 51064222, "comment_id": 89118659, "body": "Regular expressions are really their own little mini-language, and as such it will need to be compiled. This compilation of course takes a little time. You could save a lot of time by pre-compiling the regex instead of doing it in your loop."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1530107193, "post_id": 51064222, "comment_id": 89118815, "body": "@PasserBy One would use a <code>map</code> over an <code>unordered_map</code> if they need the data sorted.  Since the OP is using an <code>unordered_map</code> they don&#39;t seem to care about the order of the regexes and if that is the case using a <code>vector</code> will do the same thing but be more cache friendly."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530107672, "post_id": 51064222, "comment_id": 89119153, "body": "If profiled, my money would be on the cost of <code>regex_match()</code> so I&#39;m with @SomeProgrammerDude.  But yes, I would also go with <code>std::vector</code> unless the <code>unordered_map</code> is being accessed via, eg, <code>find()</code> for some other reason."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530108222, "post_id": 51064222, "comment_id": 89119558, "body": "@NathanOliver I think I just misread your comment ;)"}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1530160796, "post_id": 51064600, "comment_id": 89138872, "body": "Thank You..  Time taken by initialization process got increased by 300% , But the searching time is reduced to 20 % ."}, {"owner": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1530170618, "post_id": 51064600, "comment_id": 89142768, "body": "Is there any way I can do bidirectional searching"}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "reply_to_user": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1530177186, "post_id": 51064600, "comment_id": 89146591, "body": "Can you explain your meaning?"}, {"owner": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1530252953, "post_id": 51064600, "comment_id": 89178518, "body": "My problem is,  I have two Unordered maps, map1 an map2.. Map1 has a string in its value.. Map2 key is RegEX (compiled) and value is struct instance.  I have to loop over the Map2 to find the regex that matches the string in Map1.   Size of Map2 is fixed 2,45,000 Size of Map1 is depends on the user.. expecting 3000 unique in worst case.."}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "reply_to_user": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1530342677, "post_id": 51064600, "comment_id": 89211933, "body": "You are giving me a description for half of yohr solution, but you do not explain the problem you are trying to solve."}], "tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": true, "score": 3, "last_activity_date": 1530107534, "creation_date": 1530107534, "answer_id": 51064600, "question_id": 51064222, "link": "https://stackoverflow.com/questions/51064222/regex-pattern-match-search-over-an-un-ordered-map-in-cpp/51064600#51064600", "title": "Regex pattern match search over an un-ordered map in cpp", "body": "<p>The construction of the <code>std::regex</code> object takes a lot of time because the regex input string is compiled during construction. So construct the <code>std::regex</code> objects in advance and keep them in your container of choice.</p>\n\n<p>Calling <code>std::regex_match</code> on a precompiled <code>std::regex</code> object is very efficient.</p>\n\n<p>Consider also passing the <code>std::regex::optimize</code> flag when constructing your <code>std::regex</code> object. This would mean even slower construction, but an even faster match performance.</p>\n"}], "owner": {"reputation": 322, "user_id": 1142763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9287f345b03dc3048e0a2cc2f2325c6?s=128&d=identicon&r=PG", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/1142763/karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 51064600, "answer_count": 1, "score": 1, "last_activity_date": 1530107534, "creation_date": 1530106567, "question_id": 51064222, "link": "https://stackoverflow.com/questions/51064222/regex-pattern-match-search-over-an-un-ordered-map-in-cpp", "title": "Regex pattern match search over an un-ordered map in cpp", "body": "<p>I have an unordered_map, its key and values are string type.</p>\n\n<p>key is a regex.</p>\n\n<p>Number of elements in the map is about 2,50,000.</p>\n\n<p>I have to find the element whose key(regex) returns exactly one match against the string received in request.</p>\n\n<p>When I iterate over the map by each element, in worst case it takes around to 10 seconds.</p>\n\n<p>My sample code:</p>\n\n<pre><code>string string_to_match = \"Find my Regex\";\nfor (MyMap::const_iterator it = myMap.begin();\n        it != myMap.end(); ++it) {\n    //cout &lt;&lt; it-&gt;first &lt;&lt; \"\\n\";\n    if (regex_match( string_to_match ,\n            regex(it-&gt;first,std::regex::ECMAScript | std::regex::icase))) {\n        cout &lt;&lt; \", \" &lt;&lt; it-&gt;second &lt;&lt; \"\\n \";\n        break;\n    }\n    ++it;\n}\n</code></pre>\n\n<p>is there any way I could reduce the time taken...</p>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530106410, "post_id": 51064067, "comment_id": 89118237, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/26371215/how-to-add-compiler-options-in-eclipse-ide\" title=\"how to add compiler options in eclipse ide\">stackoverflow.com/questions/26371215/&hellip;</a>"}, {"owner": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1530107462, "post_id": 51064067, "comment_id": 89119001, "body": "@NathanOliver the mentioned way didn&#39;t work as the updated information."}], "answers": [{"comments": [{"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "reply_to_user": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "edited": false, "score": 0, "creation_date": 1530207969, "post_id": 51074091, "comment_id": 89165961, "body": "@caot: The solution mentioned in &quot;UPDATE 2&quot; is a different approach: you are adding it to the <code>Libraries</code> list, so you don&#39;t want the <code>-l</code> prefix because that gets added automatically for library. I was suggesting putting it in <code>Linker flags</code> where you need the <code>-l</code>."}, {"owner": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "edited": false, "score": 0, "creation_date": 1530211463, "post_id": 51074091, "comment_id": 89167210, "body": "It didn&#39;t work to put it in Linker flags for Eclipse Invoking: GCC C++ Linker as <code>g++ -lstdc++fs -o ...</code>. The only way that works is <code>-lstdc++fs</code> located at the very end as the for mat of <code>g++ -o ... -o ...  -lstdc++fs</code>"}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "reply_to_user": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "edited": false, "score": 0, "creation_date": 1530237114, "post_id": 51074091, "comment_id": 89174636, "body": "@caot: Did you read the &quot;UPDATE&quot; section of my answer that talks about moving the flags in the <code>Command line pattern</code>?"}], "tags": [], "owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "is_accepted": true, "score": 1, "last_activity_date": 1530207558, "last_edit_date": 1530207558, "creation_date": 1530155079, "answer_id": 51074091, "question_id": 51064067, "link": "https://stackoverflow.com/questions/51064067/how-to-add-lstdcfs-in-eclipse-c-for-filesystem/51074091#51074091", "title": "How to add -lstdc++fs in Eclipse C++ for filesystem?", "body": "<p>The example command line you gave creates an executable file from a source file in a single command, but it's typically done in two steps:</p>\n\n<pre><code>g++ -c -std=c++11 filesystem-testing.cpp  # creates filesystem-testing.o\ng++ filesystem-testing.o -lstdc++fs       # creates a.out\n</code></pre>\n\n<p>The first step invokes the compiler, the second step the linker (<code>g++</code> is the driver for both).</p>\n\n<p>Note that the <code>-lstdc++fs</code> flag belongs to the linker command, not the compiler command.</p>\n\n<p>Eclipse's managed build system also performs the compilation in these two steps. Accordingly, you need to specify <code>-lstdc++fs</code> in the linker options (e.g. <code>Tool Settings | GCC C++ Linker | Linker flags</code>).</p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: OK, I tried this, and I see that adding the flag to <code>Linker flags</code> is not sufficient.</p>\n\n<p>To understand why, let's look at the output in the Console view:</p>\n\n<pre><code>23:13:04 **** Incremental Build of configuration Debug for project test ****\nInfo: Internal Builder is used for build\ng++ -std=c++0x -O0 -g3 -Wall -c -fmessage-length=0 -o test.o ../test.cpp \ng++ -lstdc++fs -o test test.o \ntest.o: In function `main':\n/home/nr/dev/projects/c++/test/Debug/../test.cpp:7: undefined reference to `std::experimental::filesystem::v1::current_path[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\n\n23:13:05 Build Failed. 1 errors, 0 warnings. (took 880ms)\n</code></pre>\n\n<p>Notice it shows you the commands it's running. The linker command it's running is:</p>\n\n<pre><code>g++ -lstdc++fs -o test test.o\n</code></pre>\n\n<p>This is different from what I wrote above in one important way: the <code>-lstdc++fs</code> options is before the input file that requires it (<code>test.o</code>), rather than after. <a href=\"https://stackoverflow.com/a/11894098/141719\">Order matters</a> for the GCC linker.</p>\n\n<p>To fix this, we need to get Eclipse to change the order of arguments to the build system. You can do this by modifying <code>Tool Settings | GCC C++ Linker | Expert settings | Command line pattern</code>. This is basically a pattern for how Eclipse constructs the linker command line. Its default value is:</p>\n\n<pre><code>${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}\n</code></pre>\n\n<p>Notice how <code>${FLAGS}</code> (which is where the <code>-lstdc++fs</code> goes) comes before <code>${INPUTS}</code> (which is where the <code>test.o</code> goes).</p>\n\n<p>Let's reorder that to be:</p>\n\n<pre><code>${COMMAND} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS} ${FLAGS}\n</code></pre>\n\n<p>And try building again:</p>\n\n<pre><code>23:20:26 **** Incremental Build of configuration Debug for project test ****\nInfo: Internal Builder is used for build\ng++ -o test test.o -lstdc++fs \n\n23:20:26 Build Finished. 0 errors, 0 warnings. (took 272ms)\n</code></pre>\n\n<p>All is well now!</p>\n\n<p><strong>UPDATE 2: The following worked as that highlighted in the snapshot.</strong> It's important not to add <code>-l</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a6QkC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6QkC.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 1, "accepted_answer_id": 51074091, "answer_count": 1, "score": 1, "last_activity_date": 1530212084, "creation_date": 1530106112, "last_edit_date": 1530212084, "question_id": 51064067, "link": "https://stackoverflow.com/questions/51064067/how-to-add-lstdcfs-in-eclipse-c-for-filesystem", "title": "How to add -lstdc++fs in Eclipse C++ for filesystem?", "body": "<p>Here is a demo <code>filesystem-testing.cpp</code> on <code>c++</code> <code>filesystem</code> that works in command lines:</p>\n\n<p>env: <code>gcc/5.5.0</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;experimental/filesystem&gt;\n\nint main()\n{\n    std::string path = std::experimental::filesystem::current_path();\n\n    std::cout &lt;&lt; \"path = \" &lt;&lt; path &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Here is the compiling and testing:</p>\n\n<pre><code>$ g++ -std=c++11 filesystem-testing.cpp -lstdc++fs\n$ ./a.out\npath = /home/userid/projects-c++/filesystem-testing\n</code></pre>\n\n<p>How to add <code>-lstdc++fs</code> in <code>Eclipse</code> <code>GCC C++ Compiler</code> and /or <code>GCC C++ Linker</code>?</p>\n\n<p>The following ways didn't work and had <code>undefined reference</code> to <code>'_ZNSt12experimental10filesystem2v112current_pathB5cxx11Ev'</code></p>\n\n<p><strong>1. Case A</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/A9M0x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A9M0x.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2. Case B</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Mjo7E.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mjo7E.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "opencv", "image-processing", "apache-kafka", "video-streaming"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1530106446, "post_id": 51064008, "comment_id": 89118272, "body": "Why don&#39;t you use actual video streaming protocols?"}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1530106659, "post_id": 51064008, "comment_id": 89118436, "body": "I felt I would have more control over the process, by using kafka. What protocol are you referring to ? rtmp ?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1530106959, "post_id": 51064008, "comment_id": 89118657, "body": "I&#39;m not suggesting one protocol over the other, just never heard of Kafka being used for &quot;segments of image/video/audio feeds&quot;... Only simple messages. My point being, you need a unique message to know when a feed starts and ends. A Kafka topic ideally is distributed and replicated for storage, not just transferring data"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1530107379, "post_id": 51064008, "comment_id": 89118936, "body": "You&#39;re welcome to go look at this example <a href=\"https://medium.com/@kevin.michael.horan/distributed-video-streaming-with-python-and-kafka-551de69fe1dd\" rel=\"nofollow noreferrer\">medium.com/@kevin.michael.horan/&hellip;</a>"}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1530108352, "post_id": 51064008, "comment_id": 89119641, "body": "Seems very close to what I am trying to do. I will check it out, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 50, "user_id": 12052556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTrLb.jpg?s=128&g=1", "display_name": "Simran Singh", "link": "https://stackoverflow.com/users/12052556/simran-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1578892938, "last_edit_date": 1578892938, "creation_date": 1577248948, "answer_id": 59475290, "question_id": 51064008, "link": "https://stackoverflow.com/questions/51064008/live-streaming-and-processing-with-opencv/59475290#59475290", "title": "Live streaming and processing with opencv", "body": "<p>Apologies for the late response. I have built a Live-streaming project with a basic Analytics (Face Detection) using Kafka and OpenCV. </p>\n\n<p>The publisher application has OpenCV to access the Live video from Webcam/Ip Camera / USB camera. Like you have mentioned <code>VideoCapture.read(frame)</code> fetches a continuous stream of frames/Images of the video as a Mat. Mat is then converted into a String (JSON)  and published it to Kafka.</p>\n\n<p>You can then, transform these objects as per their requirement (into Buffered Image for live streaming application) or work with the raw form (for face detection application). This will be the desired solution as it exhibits reusability by allowing a publisher application to produce data for multiple consumers.</p>\n"}], "owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 622, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1578892938, "creation_date": 1530105962, "question_id": 51064008, "link": "https://stackoverflow.com/questions/51064008/live-streaming-and-processing-with-opencv", "title": "Live streaming and processing with opencv", "body": "<p>I am having a hard time figuring out a seemingly simple problem : my aim is to send a video stream to a server, process it using opencv, then send back the processed feed to be displayed.\nI am thinking of using kafka to send and receive the feed since I already have some experience with it. However, this is raising a problem : opencv process video streams using the VideoCapture method, which is different from just reading a single image using the Read method. \nIf I stream my video feed frame by frame, will I be able to process my feed on the server as a video rather than a single image at time ? And when I get back the processed frame, can I display it again as a video ?</p>\n\n<p>I am sure I misunderstood some concepts so please let me know if you need further explanations.</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 7885820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e383933ccb0e4612d91dd4087cf4d17b?s=128&d=identicon&r=PG&f=1", "display_name": "Eff", "link": "https://stackoverflow.com/users/7885820/eff"}, "edited": false, "score": 0, "creation_date": 1530120094, "post_id": 51068091, "comment_id": 89126449, "body": "Thanks a lot (+1). I have time to properly look at it tomorrow, so I won&#39;t accept yet. I have one question: What exactly is the output corresponding to what I called output in my question? I&#39;m guessing it is <code>sum</code>, but that represents the percentile of a single pixel value right? Or am I misunderstanding something?"}, {"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "reply_to_user": {"reputation": 133, "user_id": 7885820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e383933ccb0e4612d91dd4087cf4d17b?s=128&d=identicon&r=PG&f=1", "display_name": "Eff", "link": "https://stackoverflow.com/users/7885820/eff"}, "edited": false, "score": 0, "creation_date": 1530120747, "post_id": 51068091, "comment_id": 89126796, "body": "@Eff For a given pixel value like 185, it outputs a value like 22.6 out of 100. It means 22th percentile."}, {"owner": {"reputation": 133, "user_id": 7885820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e383933ccb0e4612d91dd4087cf4d17b?s=128&d=identicon&r=PG&f=1", "display_name": "Eff", "link": "https://stackoverflow.com/users/7885820/eff"}, "edited": false, "score": 0, "creation_date": 1530120903, "post_id": 51068091, "comment_id": 89126873, "body": "Okay. Thanks a lot for the help. I&#39;m pretty sure I understand now. As I said, I&#39;ll look at in detail tomorrow, and mostly likely accept your answer."}], "tags": [], "owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "is_accepted": true, "score": 2, "last_activity_date": 1530119104, "creation_date": 1530119104, "answer_id": 51068091, "question_id": 51063944, "link": "https://stackoverflow.com/questions/51063944/mapping-pixels-elements-to-percentiles-c-opencv/51068091#51068091", "title": "Mapping pixels/elements to percentiles (C++/OpenCV)", "body": "<p>I am not sure it this is what you're looking for but this a naive implementation of percentile for image pixel values.</p>\n\n<pre><code>    cv::Mat image = cv::imread(\"image.jpg\",cv::IMREAD_UNCHANGED);\n\n    // convert image to gray\n    cv::Mat gray;\n    cv::cvtColor(image, gray, cv::COLOR_BGR2GRAY);\n\n    // calculate histogram for every pixel value (i.e [0 - 255])\n    cv::Mat hist;\n    int histSize = 256;\n    float range[] = { 0, 256 } ;\n    const float* histRange = { range };\n    bool uniform = true; bool accumulate = false;\n    cv::calcHist( &amp;gray, 1, 0, cv::Mat(), hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );\n\n    // total pixels in image\n    float totalPixels = gray.cols * gray.rows;\n\n    // calculate percentage of every histogram bin (i.e: pixel value [0 - 255])\n    // the 'bins' variable holds pairs of (int pixelValue, float percentage) \n    std::vector&lt;std::pair&lt;int, float&gt;&gt; bins;\n    float percentage;\n    for(int i = 0; i &lt; 256; ++i)\n    {\n        percentage = (hist.at&lt;float&gt;(i,0)*100.0)/totalPixels;\n        bins.push_back(std::make_pair(i, percentage));\n    }\n\n    // sort the bins according to percentage\n    sort(bins.begin(), bins.end(),comparator());\n\n    // compute percentile for a pixel value\n    int pixel = 185;\n    float sum = 0;\n\n    for (auto b : bins)\n    {\n        if(b.first != pixel)\n            sum += b.second;\n        else\n        {\n            sum += b.second/2;\n            break;\n        }\n    }\n\n    std::cout&lt;&lt;\"Percentile for pixel(\"&lt;&lt;pixel&lt;&lt;\"): \"&lt;&lt;sum&lt;&lt;std::endl;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7885820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e383933ccb0e4612d91dd4087cf4d17b?s=128&d=identicon&r=PG&f=1", "display_name": "Eff", "link": "https://stackoverflow.com/users/7885820/eff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 0, "accepted_answer_id": 51068091, "answer_count": 1, "score": 0, "last_activity_date": 1530119104, "creation_date": 1530105760, "question_id": 51063944, "link": "https://stackoverflow.com/questions/51063944/mapping-pixels-elements-to-percentiles-c-opencv", "title": "Mapping pixels/elements to percentiles (C++/OpenCV)", "body": "<p>I am using OpenCV and I have the following problem I wish to solve on an image. However, my question doesn't have to be restricted to OpenCV if it is an issue, it could simply be more general c++ on, say, vectors.</p>\n\n<p><strong>The problem</strong></p>\n\n<p>I want to map the pixel values of an input image (or elements of an input vector) into an output image (or vector) of same size. Each element of the output should contain the percentile* of the corresponding element in the input.</p>\n\n<p>My question is</p>\n\n<blockquote>\n  <p>How would I code an implementation of this problem? (In c++ or OpenCV)</p>\n</blockquote>\n\n<p><strong>Example</strong></p>\n\n<p>I will show an example of a one-dimensional image, just for simplicity.</p>\n\n<p>Input:\n<code>(1, 2, 10, 3, 4, 5, 6, 12, 7)</code></p>\n\n<p>Output*: <code>(0.11, 0.22, 0.89, 0.33, 0.44, 0.56, 0.67, 1.00, 0.78)</code></p>\n\n<p><strong>Performance?</strong> </p>\n\n<p>I'm writing code for an analysis of images that may be a few hundred by a few hundred. I assume that my problem is possible in O(n log n), but I don't think even O(n^2) would be an issue (where n is the total number of elements in the image/vector). However, if precise percentiles cause too much issues with the complexity, I'm okay with having a certain number of bins instead.</p>\n\n<hr>\n\n<p>(*) I know that there are a few different ways of conceptualizing percentile, whether you round up or down et cetera. This is of no importance to me. Whatever way works.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 105, "user_id": 3146542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d83228d0b7e595ba1f6873abd9ac889?s=128&d=identicon&r=PG&f=1", "display_name": "marouane18", "link": "https://stackoverflow.com/users/3146542/marouane18"}, "edited": false, "score": 0, "creation_date": 1530107520, "post_id": 51063767, "comment_id": 89119045, "body": "what&#39;s the error type ? is it a segmentation fault ?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1530109308, "post_id": 51063767, "comment_id": 89120289, "body": "The first thing you need to do is determine exactly which line of the code the crash occurred at.  That can be done using a debugger, or by putting printf() or qDebug() statements at various places in the code and seeing which was the last one printed before the crash.  Once you know which line crashed, you will have a much better chance of understanding why the crash occurred and fixing the underlying bug."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8767906"}, "is_accepted": false, "score": 0, "last_activity_date": 1530117335, "creation_date": 1530117335, "answer_id": 51067644, "question_id": 51063767, "link": "https://stackoverflow.com/questions/51063767/qt-crashed-during-running/51067644#51067644", "title": "QT crashed during running", "body": "<p>So first off, you're allocating a whole lot of heap memory without ever clearing it afterwards. Each of those <code>new</code> statements without a corresponding delete will lead to a memory leak.</p>\n\n<p>Also if the <code>nPorts.toInt()</code> conversion fails or parses incorrectly, you're going to get a <code>numberItems</code> equal to something odd. You then use that number to allocate <code>listVector</code> assuming it will have the size you expect. Then operate directly on it with subscript operators, without checking the actual size of the object or the number you used to allocate it.</p>\n\n<p>Accessing a dynamically allocated object using subscript operators like that, without checking the actual size, could absolutely crash your program. </p>\n\n<p>I believe your problem is with this line: (edit: didn't read the comment on this line initially, but glad you know that. this furthers my suspicions.)</p>\n\n<p><code>listVector[counter%numberItems]-&gt;push_back(data.toDouble());  //crashed in this line</code></p>\n\n<p>And it's because you're getting a segmentation fault from exceeding the bounds of your listVector object, which isn't the size you expect. I could be wrong, but there's at least some things to start investigating.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 5304932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36cce2a286794c3443fe98ee35ea6058?s=128&d=identicon&r=PG&f=1", "display_name": "seanh", "link": "https://stackoverflow.com/users/5304932/seanh"}, "edited": false, "score": 0, "creation_date": 1530304963, "post_id": 51068152, "comment_id": 89205346, "body": "thanks, that is the main issue. Also, the push_back also create the overflow issue once the size of vector is specified"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1530119364, "creation_date": 1530119364, "answer_id": 51068152, "question_id": 51063767, "link": "https://stackoverflow.com/questions/51063767/qt-crashed-during-running/51068152#51068152", "title": "QT crashed during running", "body": "<p>You have too many double values to read all of them using <code>qint8</code> type as counter.\n<code>counter</code> has type <code>qint8</code>, so you can hold signed integers\nin range <code>[-128,127]</code>, when you assign value greater than 127 (\nin your file there are more double values than 127)\nto your <code>counter</code> variable it is treated as negative number, and \nyour app crash while calling index operator because\n<code>counter%numberItems</code> is negative value.</p>\n\n<pre><code>listVector[counter%numberItems]-&gt;push_back(data.toDouble()); // accessing list item with negative index\n</code></pre>\n\n<p>Change <code>counter</code> to wider integer type for example qint32 or\nreset <code>counter</code> value in somewhere in your code to avoid\nthe overflow of int value.</p>\n"}], "owner": {"reputation": 87, "user_id": 5304932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36cce2a286794c3443fe98ee35ea6058?s=128&d=identicon&r=PG&f=1", "display_name": "seanh", "link": "https://stackoverflow.com/users/5304932/seanh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 51068152, "answer_count": 2, "score": 0, "last_activity_date": 1530119364, "creation_date": 1530105285, "last_edit_date": 1530109085, "question_id": 51063767, "link": "https://stackoverflow.com/questions/51063767/qt-crashed-during-running", "title": "QT crashed during running", "body": "<p>I'm trying to load some data from a file into a nested list. However, the application crashed during loading of the data. I found that the code crashed in appending data in my inner most list. Can someone please help me to understand what happened and how to fix it? Thanks.</p>\n\n<p>header file(snp_plotter.h)</p>\n\n<pre><code>#ifndef SNP_PLOTTER_H\n#define SNP_PLOTTER_H\n\n#include &lt;QMainWindow&gt;\n\n#include \"QList\"\n#include &lt;QtCharts/QChartGlobal&gt;\n\nQT_CHARTS_BEGIN_NAMESPACE\nclass QLineSeries;\nclass QChart;\nQT_CHARTS_END_NAMESPACE\nQT_CHARTS_USE_NAMESPACE\n\nnamespace Ui {\nclass SNP_Plotter;\n}\n\nclass SNP_Plotter : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit SNP_Plotter(QWidget *parent = 0);\n    ~SNP_Plotter();\n\nprivate slots:\n    void on_openSnpFile_clicked();\n\nprivate:\n    Ui::SNP_Plotter *ui;\n    QString nPorts;\n    QString currentFile;\n    QString snpData;\n    QString snpHeader;\n    QString domainType; //freq or time\n    QString measureMethod; // s,y,abcd, etc\n    QString measureType; // real+img, log+angl or linear+angl\n    QString referenceImp; // system impd\n    QList&lt;QVector&lt;double&gt;*&gt; listVector; //data list with [[][][]]\n};\n\n#endif // SNP_PLOTTER_H\n</code></pre>\n\n<p>code(main.cpp):</p>\n\n<pre><code>#include \"snp_plotter.h\"\n#include \"ui_snp_plotter.h\"\n#include \"QFile\"\n#include \"QFileDialog\"\n#include \"QTextStream\"\n#include \"QMessageBox\"\n#include \"QDebug\"\n#include \"QRegularExpression\"\n#include \"QRegularExpressionMatch\"\n#include &lt;QQueue&gt;\n#include &lt;QList&gt;\n#include &lt;QList&gt;\n\nSNP_Plotter::SNP_Plotter(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::SNP_Plotter)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;setCentralWidget(ui-&gt;verticalLayoutWidget);\n}\n\nSNP_Plotter::~SNP_Plotter()\n{\n    delete ui;\n}\n\nvoid SNP_Plotter::on_openSnpFile_clicked()\n{\n    // clean up the currntfile cache\n    QString openFile = QFileDialog::getOpenFileName(this,\n                                       tr(\"Open SNP file\"),\n                                       \"/usr\",\n                                       \"SNP(*.s*p)\"\n                                       );\n\n    //extract number of ports\n    QRegularExpression snpFormat(\".s(\\\\d+)p\");\n    QRegularExpressionMatch match0 = snpFormat.match(openFile);\n    nPorts = match0.captured(1);\n    qint8 numberItems = 2*(nPorts.toInt()*nPorts.toInt())+1;\n//    listVector = new QList&lt;QList&lt;double&gt;*&gt;(numberItems);\n\n    for(auto i=0; i&lt;numberItems; i++){\n        QVector&lt;double&gt; *vector = new QVector&lt;double&gt;(1000);\n        listVector.push_back(vector);\n    }\n\n    //open file\n    QFile file(openFile);\n    if (!file.open(QIODevice::ReadOnly | QFile::Text)) {\n        QMessageBox::warning(this, \"Warning\", \"Cannot open file: \" + file.errorString());\n        return;\n    }\n\n\n     QTextStream dataReading(&amp;file);\n\n     qint8 counter = 0;\n     QRegularExpression headerFormat(\"#\\\\s+(\\\\w+)\\\\s+(\\\\w+)\\\\s+(\\\\w+)\\\\s+(\\\\w+)\\\\s+(\\\\w+)\");\n     QRegularExpression dataFormat(\"([^ ][-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?)\");\n     QString currentLine;\n     while(!dataReading.atEnd()){\n        //start a new line in the file\n        currentLine = dataReading.readLine();\n\n        //type of lines to skip\n        if((currentLine[0]==\"\\x0\")||(currentLine[0]==\"!\") ){continue;}\n\n        //data extraction and insertion\n        else if((currentLine[0]!=\"#\")&amp;&amp;(currentLine[0]!=\"!\")){\n            QRegularExpressionMatchIterator dataList = dataFormat.globalMatch(currentLine);\n            while(dataList.hasNext()){\n                QRegularExpressionMatch matchedData = dataList.next();\n                QString data = matchedData.captured(1);\n                qInfo()&lt;&lt;data;\n                listVector[counter%numberItems]-&gt;push_back(data.toDouble());  //crashed in this line \n                counter += 1;\n            }\n        }\n\n        //header type extraction\n        else if ((currentLine[0]==\"#\")) {\n            QRegularExpressionMatch match2 = headerFormat.match(currentLine);\n            domainType = match2.captured(1);\n            measureType = match2.captured(2);\n            measureMethod = match2.captured(3);\n            referenceImp = match2.captured(5);\n        }\n     }\n     qInfo()&lt;&lt;(listVector)[0]-&gt;size();\n    // extraction completed, close file\n     file.close();\n}\n</code></pre>\n\n<p>the data that I'm trying to use</p>\n\n<pre><code>! S3P File: Measurements: Mag&lt;S11&gt; Ang&lt;S11&gt; Mag&lt;S12&gt; Ang&lt;S12&gt; Mag&lt;S13&gt; Ang&lt;S13&gt;! row 1 \n!             Mag&lt;S21&gt; Ang&lt;S21&gt; Mag&lt;S22&gt; Ang&lt;S22&gt; Mag&lt;S23&gt; Ang&lt;S23&gt;! row 2 \n!             Mag&lt;S31&gt; Ang&lt;S31&gt; Mag&lt;S32&gt; Ang&lt;S32&gt; Mag&lt;S33&gt; Ang&lt;S33&gt;! row 3 \n\n\n\n# Hz S  dB   R 50\n10000000 -52.282864 83.754532 -15.67896 -0.49186572 -1.5670134 -1.301762\n-15.748223 -0.10280456 -50.764286 149.86646 -56.900387 -70.843872\n-1.5776229 -1.2955924 -71.374367 -141.70441 -48.866203 65.932648\n29987500 -60.731289 51.972256 -15.724875 -1.8122723 -1.5746148 -3.2653806\n-15.716247 -1.8535374 -52.617325 178.46486 -62.476551 5.2978568\n-1.5735339 -3.2886419 -65.686714 36.462376 -61.792774 9.9133005\n49975000 -64.386765 2.9596229 -15.755823 -3.1201222 -1.5706615 -5.4831181\n-15.738674 -3.0600834 -52.237274 169.75545 -58.964714 27.526367\n-1.5741955 -5.4729681 -58.479481 47.793446 -56.108696 63.561378\n69962500 -60.896507 -36.51757 -15.757278 -4.3601637 -1.577867 -7.6754441\n-15.747104 -4.3896055 -50.548729 177.66254 -57.043007 9.1148758\n-1.5749472 -7.6169047 -56.500164 6.8388286 -57.866039 -28.409134\n89950000 -55.328976 -45.191593 -15.76739 -5.6117945 -1.5797645 -9.8418713\n-15.749889 -5.5769963 -50.809414 173.62177 -57.651119 -0.7305429\n-1.5803487 -9.7842817 -56.621773 5.4209571 -66.583694 23.118269\n109937500 -60.013988 -42.251778 -15.770485 -6.7288284 -1.5785085 -12.021818\n-15.764176 -6.7430348 -51.211327 170.20062 -56.137653 -1.5785257\n-1.5805914 -11.985991 -55.860668 0.92532599 -58.335781 15.83968\n129925000 -55.2337 -47.264515 -15.773083 -7.9232988 -1.5834771 -14.20496\n-15.74941 -7.9423704 -52.448433 166.58505 -57.46785 -5.3259425\n-1.5812542 -14.161623 -57.962692 0.68304181 -66.230148 -5.397459\n149912500 -52.218529 -63.591721 -15.763268 -9.1296005 -1.5826913 -16.37332\n-15.770909 -9.0827551 -51.982231 165.33054 -56.151371 -14.161432\n-1.586452 -16.33128 -56.938805 -20.056446 -57.895336 -49.978813\n169900000 -48.723946 -68.877541 -15.772202 -10.29782 -1.58857 -18.537006\n-15.756567 -10.253307 -53.100327 166.75829 -57.286308 -21.661839\n-1.5859301 -18.455862 -58.19286 -23.011927 -56.403473 -61.177219\n189887500 -47.055653 -63.976929 -15.761551 -11.486256 -1.5892707 -20.66897\n-15.756705 -11.417432 -52.570255 161.31961 -58.11451 -14.260036\n-1.589681 -20.645853 -58.313042 -19.368044 -56.06601 -59.461319\n209875000 -48.199955 -65.147034 -15.758836 -12.678895 -1.5931528 -22.858885\n-15.750708 -12.633892 -54.576355 159.43607 -57.476353 -23.090178\n-1.5905892 -22.808754 -57.229259 -22.673452 -53.756973 -77.388786\n229862500 -47.620575 -65.079559 -15.761273 -13.856562 -1.5960027 -24.995838\n-15.757499 -13.857363 -54.944546 168.24443 -57.51046 -25.383596\n-1.5932056 -24.973335 -56.755974 -24.434172 -53.588017 -78.209816\n249850000 -45.54829 -72.373695 -15.759305 -15.106434 -1.5959594 -27.192209\n-15.754061 -15.04305 -56.757584 167.29137 -57.757648 -35.331924\n-1.593374 -27.133352 -57.15892 -38.918037 -52.251003 -78.6092\n269837500 -45.209282 -79.048836 -15.762296 -16.186449 -1.595193 -29.34836\n-15.761364 -16.268795 -56.31012 155.37877 -58.96965 -36.80077\n-1.6012613 -29.305353 -58.892376 -30.59782 -51.139919 -88.653198\n289825000 -44.495762 -75.946327 -15.77701 -17.442837 -1.5954289 -31.487225\n-15.759547 -17.546104 -57.791164 136.05252 -58.239506 -44.324471\n-1.6040369 -31.49972 -58.461231 -38.748329 -50.686073 -102.10234\n309812500 -43.302803 -82.000542 -15.766918 -18.634033 -1.5996813 -33.661705\n-15.761863 -18.641865 -61.730743 144.8166 -60.559978 -37.826778\n-1.6024027 -33.65374 -57.697384 -42.566422 -51.518753 -105.38393\n329800000 -43.696449 -78.707024 -15.772308 -19.829834 -1.6114002 -35.827797\n-15.758872 -19.892492 -61.704247 131.07913 -60.35778 -39.423588\n-1.6023126 -35.767818 -59.314335 -32.67252 -52.212837 -96.09478\n349787500 -41.770233 -79.74221 -15.764846 -21.037899 -1.6063002 -37.965122\n-15.761175 -21.141983 -67.287781 106.3756 -59.302685 -45.419971\n-1.6093071 -37.931061 -58.065773 -47.054985 -50.113159 -100.45293\n369775000 -41.834766 -85.074005 -15.755595 -22.26008 -1.6062098 -40.106232\n-15.755444 -22.253096 -67.486336 95.830017 -60.84161 -46.56329\n-1.6086895 -40.089161 -59.786545 -45.948189 -49.895309 -123.41199\n389762500 -40.628685 -85.450836 -15.762123 -23.489182 -1.6093255 -42.268429\n-15.763054 -23.396936 -68.248146 81.470787 -60.379967 -55.129562\n-1.608591 -42.201767 -61.377071 -50.809517 -50.866241 -127.41563\n409750000 -40.523582 -86.431625 -15.7611 -24.674004 -1.6127316 -44.40868\n-15.759981 -24.647635 -75.545479 166.72386 -58.76609 -50.209095\n-1.6096529 -44.381767 -58.312939 -53.500042 -50.608158 -125.55299\n429737500 -39.49865 -87.925888 -15.768126 -25.870119 -1.6137398 -46.560898\n-15.756283 -25.906502 -74.112823 -93.561935 -59.226101 -58.54623\n-1.6217877 -46.567924 -59.321663 -53.369888 -48.844105 -125.06399\n</code></pre>\n\n<p>the program will run and process the data until to the line of  </p>\n\n<pre><code>129925000 -55.2337 -47.264515 -15.773083 -7.9232988 -1.5834771 -14.20496\n-15.74941 -7.9423704 -52.448433 166.58505 -57.46785 -5.3259425\n-1.5812542 -14.161623 -57.962692 0.68304181 -66.230148 -5.397459\n</code></pre>\n"}, {"tags": ["c++", "public"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 2, "creation_date": 1530105320, "post_id": 51063721, "comment_id": 89117399, "body": "Why do you have the same function with the same name, but taking arguments of conceptually very different types? In other words: you could just name the functions differently."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1530105358, "post_id": 51063721, "comment_id": 89117422, "body": "What do your functions do? Maybe name the functions dealing with time something else? It&#39;s difficult for me to imagine a case where I&#39;d use the same name for something time related and everything else."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1530105477, "post_id": 51063721, "comment_id": 89117512, "body": "@Yksisarvinen: Wouldn&#39;t help sadly. If <code>time_t</code> is the same type as one of the other three types, the compiler will still not be able to distinguish the templates."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1530105486, "post_id": 51063721, "comment_id": 89117518, "body": "Take a <code>std::chrono::time_point</code> instead?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1530106434, "post_id": 51063721, "comment_id": 89118254, "body": "To reiterate, can you explain your use case? It is hard to imagine why you would need to do this."}, {"owner": {"reputation": 21, "user_id": 9999918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa2d78668388fab385aef28764b19f?s=128&d=identicon&r=PG&f=1", "display_name": "Klaus Holst Jacobsen", "link": "https://stackoverflow.com/users/9999918/klaus-holst-jacobsen"}, "edited": false, "score": 0, "creation_date": 1530107104, "post_id": 51063721, "comment_id": 89118746, "body": "I edited the original question to reflect the actual usecase."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1530109691, "post_id": 51063721, "comment_id": 89120549, "body": "In cases where the <code>time_t</code> and the matching integral value are equal value, is the output the same or different?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1530111311, "post_id": 51063721, "comment_id": 89121647, "body": "You should also note that it could <i>not</i> be an integral type. In <a href=\"https://en.cppreference.com/w/cpp/chrono/c/time_t\" rel=\"nofollow noreferrer\">C++</a> &quot;<b>Arithmetic</b> type capable of representing times. Although not defined, this is <b>almost always</b> an integral value&quot;, while in <a href=\"https://en.cppreference.com/w/c/chrono/time_t\" rel=\"nofollow noreferrer\">C</a> &quot;Arithmetic (until C11) Real (since C11) type capable of representing times.&quot;"}, {"owner": {"reputation": 21, "user_id": 9999918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa2d78668388fab385aef28764b19f?s=128&d=identicon&r=PG&f=1", "display_name": "Klaus Holst Jacobsen", "link": "https://stackoverflow.com/users/9999918/klaus-holst-jacobsen"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1530170674, "post_id": 51063721, "comment_id": 89142798, "body": "@peter In cases where time_t and matching intergal values are the same then the output will be the same."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1530177304, "post_id": 51063721, "comment_id": 89146657, "body": "@KlausHolstJacobsen - then the solution is to overload only for the largest integral type you intend to pass (<code>long long</code> or <code>int64_t</code> as appropriate).   Implicit conversions mean that will work for all sized integral types.    At most, you might need an overload for <code>signed</code> and <code>unsigned</code> types."}, {"owner": {"reputation": 21, "user_id": 9999918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa2d78668388fab385aef28764b19f?s=128&d=identicon&r=PG&f=1", "display_name": "Klaus Holst Jacobsen", "link": "https://stackoverflow.com/users/9999918/klaus-holst-jacobsen"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1530277016, "post_id": 51063721, "comment_id": 89191763, "body": "@Peter For 32bit no intXX_t type maps to a long....so that requires me to implement <code>add(long i)</code> if I wish to be able to add a long, but on 64bit that is a duplicate for int64_t. Only way out as I see it is the greasy <code>#ifdef __wordsize 32</code>path...and I would prefer not to go down that path."}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1530106333, "post_id": 51063797, "comment_id": 89118185, "body": "With all due respect, holy smokes that&#39;s ugly."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1530106384, "post_id": 51063797, "comment_id": 89118221, "body": "@PasserBy: Too bad. Because the type of <code>time_t</code> can be anything, you can&#39;t really use it with a set of overloaded functions. In that respect you&#39;re back to the good old C days."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1530105368, "creation_date": 1530105368, "answer_id": 51063797, "question_id": 51063721, "link": "https://stackoverflow.com/questions/51063721/c-overload-ambiguity-between-int64-and-time-t/51063797#51063797", "title": "c++ overload ambiguity between int64 and time_t", "body": "<p><code>time_t</code> is more often than not either a signed 32 bit or a signed 64 bit integral type. (Its actual type is not guaranteed by the C++ standard).</p>\n\n<p>If you are on a platform where it's a <code>typedef</code> to the same fundamental type as one of the fixed width integral types, then the compiler will not be able do distinguish your functions.</p>\n\n<p>The best workaround is to take a leaf out of a C programmer's book and use</p>\n\n<pre><code>someMethod_time_t(time_t x)\n</code></pre>\n\n<p>and so on.</p>\n"}], "owner": {"reputation": 21, "user_id": 9999918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa2d78668388fab385aef28764b19f?s=128&d=identicon&r=PG&f=1", "display_name": "Klaus Holst Jacobsen", "link": "https://stackoverflow.com/users/9999918/klaus-holst-jacobsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530107078, "creation_date": 1530105145, "last_edit_date": 1530107078, "question_id": 51063721, "link": "https://stackoverflow.com/questions/51063721/c-overload-ambiguity-between-int64-and-time-t", "title": "c++ overload ambiguity between int64 and time_t", "body": "<p>I have a class Format that needs to compile for both 32 and 64 bit linux platforms.</p>\n\n<p>The class has methods for adding primitive values, and then format the values according to a format string. More or less an encapsulation of <code>printf(...)</code></p>\n\n<p>My class looks like this:</p>\n\n<pre><code>class Format\n{\npublic:\n    Format(string fmt);\n    add(int16_t x);\n    add(int32_t x);\n    add(int64_t x);\n    add(time_t x);\n}\n</code></pre>\n\n<p>When I compile for 32 bit the code compiles because int64_t and time_t translates to different types.\nIf I compile for 64 bit I get:</p>\n\n<blockquote>\n  <p>error: \u2018Format::add(time_t)\u2019 cannot be overloaded</p>\n</blockquote>\n\n<p>If I remove <code>add(time_t x)</code> I get a compile error from the 32 bit compiler:</p>\n\n<blockquote>\n  <p>error: call of overloaded \u2018add(time_t&amp;)\u2019 is ambiguous</p>\n</blockquote>\n\n<p>I understand the reasons why the compilation fails.</p>\n\n<p>But I fail to see the best solution for this problem?</p>\n\n<p>I would like to not have to cast from time_t to int64_t at the caller.</p>\n\n<p>So how can I implement this the best way for multi platform support?</p>\n\n<p>I have a similar problem when adding \"long\" and \"int\" overload versions of add(...).</p>\n\n<p>Regards\nKlaus</p>\n"}, {"tags": ["c++", "lua", "lua-table"], "comments": [{"owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "edited": false, "score": 1, "creation_date": 1530107393, "post_id": 51063716, "comment_id": 89118945, "body": "If the question is just about getting the size of the table, see <a href=\"https://stackoverflow.com/questions/26643285/get-lua-table-size-in-c\">this post</a>. Or are you asking for generating a std::vector from the table ?"}, {"owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 1, "creation_date": 1530113847, "post_id": 51063716, "comment_id": 89123195, "body": "here&#39;s another answer that might help: <a href=\"http://stackoverflow.com/a/6142700/847349\">stackoverflow.com/a/6142700/847349</a>"}, {"owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "reply_to_user": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 0, "creation_date": 1530151024, "post_id": 51063716, "comment_id": 89136775, "body": "@DmitryLedentsov Do you mind posting an actual example of copying returned table to float vector using <code>lua_next</code>? I&#39;d appreciate it."}, {"owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 0, "creation_date": 1530193103, "post_id": 51063716, "comment_id": 89157123, "body": "you can simply use <a href=\"https://github.com/d-led/luastackcrawler\" rel=\"nofollow noreferrer\">luastackcrawler</a> or any other comparable library. Here&#39;s a <a href=\"https://github.com/d-led/luastackcrawler/blob/f775ba95878b0ba8b27135ee651028357404ea78/luatablestack/luatablecrawler.cpp\" rel=\"nofollow noreferrer\">generic table crawler</a>, which you could try to understand to write your special simple use case. I won&#39;t be able to write an example now"}, {"owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 0, "creation_date": 1530193239, "post_id": 51063716, "comment_id": 89157212, "body": "have you tried to understand the Lua book <a href=\"https://www.lua.org/pil/25.html\" rel=\"nofollow noreferrer\">PiL</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "is_accepted": true, "score": 0, "last_activity_date": 1530154476, "creation_date": 1530154476, "answer_id": 51074023, "question_id": 51063716, "link": "https://stackoverflow.com/questions/51063716/how-to-get-returned-table-from-lua-function-in-c/51074023#51074023", "title": "How to get returned table from Lua function in C++?", "body": "<p>I think I found out how to do it using <code>lua_next</code>.</p>\n\n<pre><code>lua_getglobal(L, name);\n\nif (lua_pcall(L, 0, 1, 0)) {\n        std::cout &lt;&lt; \"ERROR : \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n}\nvector&lt;float&gt; vec;\n\nif (lua_istable(L, -1) { \n\n   lua_pushvalue(L, -1);\n   lua_pushnil(L);\n\n   while (lua_next(L, -2))\n   {\n\n        if (lua_isnumber(L, -1))\n        {\n            vec.push_back(lua_tonumber(L, -1));\n        }\n        lua_pop(L, 1);\n    }\n    lua_pop(L, 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 51074023, "answer_count": 1, "score": 1, "last_activity_date": 1530154476, "creation_date": 1530105129, "last_edit_date": 1530113335, "question_id": 51063716, "link": "https://stackoverflow.com/questions/51063716/how-to-get-returned-table-from-lua-function-in-c", "title": "How to get returned table from Lua function in C++?", "body": "<p>I'm trying to figure out how to get the returned table from the Lua function in C++.</p>\n\n<p>My code:</p>\n\n<pre><code>if (lua_pcall(L, 0, 1, 0)) {\n        std::cout &lt;&lt; \"ERROR : \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n}\nvector&lt;float&gt; vec;\n\nif (lua_istable(L, -1) { \n\n    //how to copy table to vec?\n}\n</code></pre>\n\n<p>How can I copy the returned table to vector if the table size is unknown? Thanks!</p>\n"}, {"tags": ["c++", "object", "nested", "variant"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1530105091, "post_id": 51063643, "comment_id": 89117221, "body": "you can&#39;t have a recursive type without some indirection"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530105148, "post_id": 51063643, "comment_id": 89117278, "body": "You use forward declarations which is good. But you don&#39;t really remove the source of the circular dependency: The actual <code>#include &quot;value.h&quot;</code>. Remove that, and define the functions using the pointer in a source file instead of inline in the class."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530105235, "post_id": 51063643, "comment_id": 89117345, "body": "Unrelated to your problem, but please read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std\u201d considered bad practice?</a> and <a href=\"https://stackoverflow.com/questions/14575799/using-namespace-std-in-a-header-file\">using namespace std; in a header file</a> (which makes the first issue worse)."}, {"owner": {"reputation": 11, "user_id": 3192107, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000890975980/picture?type=large", "display_name": "user3192107", "link": "https://stackoverflow.com/users/3192107/user3192107"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530178072, "post_id": 51063643, "comment_id": 89147175, "body": "Thank you @Someprogrammerdude for your helpful advice! With <code>code</code> void NameValue::Set(NameValue* nameValue) { valuePtr = nameValue; }  <code>code</code>  I get &quot;cannot convert &#39;config::NameValue*&#39; to &#39;config::Value*&#39; in assignment&quot;. Is it possible to make the Value class to accept NameValue objects? Is polymorphism needed?"}, {"owner": {"reputation": 11, "user_id": 3192107, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000890975980/picture?type=large", "display_name": "user3192107", "link": "https://stackoverflow.com/users/3192107/user3192107"}, "edited": false, "score": 0, "creation_date": 1530179594, "post_id": 51063643, "comment_id": 89148147, "body": "I figured it out with <code>valuePtr = (Value*)&amp;nameValue;</code>"}], "owner": {"reputation": 11, "user_id": 3192107, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000890975980/picture?type=large", "display_name": "user3192107", "link": "https://stackoverflow.com/users/3192107/user3192107"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530104947, "creation_date": 1530104947, "question_id": 51063643, "link": "https://stackoverflow.com/questions/51063643/c-recursive-class-dependencies", "title": "c++ recursive class dependencies", "body": "<p>I'm trying to make something similar to std::Map. I have two classes, NameValue which takes a name and a Value. The class Value can hold data of type int and string. I want the Value class to also accept NameValue to be able to create nested objects. Currently the boost::variant is used to hold the data types allowed to be used.</p>\n\n<p>NameValue.h</p>\n\n<pre><code>  #ifndef INC_NAME_VALUE_H_\n    #define INC_NAME_VALUE_H_\n\n    #include &lt;boost/variant.hpp&gt;\n    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include \"value.h\"\n\n    namespace config {\n\n    using namespace std;\n    class Value;  // forward declaration\n    class NameValue {\n     private:\n      string name;\n      Value* valuePtr;\n\n     public:\n      NameValue(){};\n      NameValue(string name, Value&amp; value)\n          : name(name)\n          , valuePtr(&amp;value){};\n\n      void Print() {\n        cout &lt;&lt; name &lt;&lt; \" : \";\n        // valuePtr-&gt;Print();\n      }\n\n      void Set(Value* value) { valuePtr = value; }\n    };\n    }\n\n    #endif /* INC_NAME_VALUE_H_ */\n</code></pre>\n\n<p>Value.h</p>\n\n<pre><code>    #ifndef INC_VALUE_H_\n#define INC_VALUE_H_\n\n#include &lt;boost/variant.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"name_value.h\"\n\nnamespace config {\nusing namespace std;\n\nusing variantDataType = boost::variant&lt;int, string&gt;;\n\nclass Value {\n private:\n  variantDataType value;\n\n public:\n  Value(){};\n  Value(variantDataType const&amp; value)\n      : value(value){};\n  void Print() { cout &lt;&lt; value &lt;&lt; endl; }\n};\n}\n#endif /* INC_VALUE_H_ */\n</code></pre>\n\n<p>In Value.h I want to add NameValue to variant like this:</p>\n\n<pre><code>boost::variant&lt;int,string,NameValue&gt; value;\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>Value i(42);\nNameValue nv(\"meaning\", i);\nNameValue nv2(\"nested, NameValue(\"deep\", \"value\"));//this is what I want\n</code></pre>\n\n<p>Maybe I'm on the wrong track using variant or the way I'm using dependencies. If there is some other way to make it work I would appreciate the suggestions.</p>\n"}, {"tags": ["c++", "gcc", "mingw-w64"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1530104140, "post_id": 51063311, "comment_id": 89116512, "body": "The problem is most likely not in GCC or the C++ standard library. Even if the error happens in a system header file, it&#39;s infinitely more likely that the root of the problem lies in the code you try to build."}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530104222, "post_id": 51063311, "comment_id": 89116584, "body": "@Someprogrammerdude, I&#39;m sure that&#39;s the case, but I have no idea how to track down the error!"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1530104555, "post_id": 51063311, "comment_id": 89116819, "body": "@crobar Look here <a href=\"https://stackoverflow.com/q/3742822/451600\">stackoverflow.com/q/3742822/451600</a>   The output from the preprocessor should make it a lot easier to track down.  Pull it in to an editor and format + compile the code."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1530104657, "post_id": 51063311, "comment_id": 89116903, "body": "From your preprocessor run, perhaps you should look for something like <code>#define size_t</code>? More importantly, perhaps check for such a macro definition in the library you attempt to build?"}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530105271, "post_id": 51063311, "comment_id": 89117369, "body": "@Someprogrammerdude, indeed, there is a <code>#define size_t unsigned __int64</code> which comes from a header file <code>netcdf.h</code> which is wrapped in a test <code>#if defined (_WIN64)</code> I guess this should actually be <code>#if defined (MSVC) &amp; defined (_WIN64)</code> or something along these lines. This is actually a C header file (the netcdf library is a C library, so maybe the extra check should just be for <code>__cplusplus</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530105719, "post_id": 51063311, "comment_id": 89117688, "body": "Well better us <code>&amp;&amp;</code> instead of <code>&amp;</code>. :) Besides that I would argue it&#39;s an error in general to have it defined in a library header file like that, but yeah adding the extra check for the MSVC compiler should be a good start. <i>And</i> reporting this as a bug for the library maintainers."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1530106336, "post_id": 51063311, "comment_id": 89118190, "body": "@crobar - Using <code>#if defined (MSVC)</code> is just hiding the problem for g++. It would still be wrong for any Visual Studio from this millennium."}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530106577, "post_id": 51063311, "comment_id": 89118379, "body": "@Someprogrammerdude, I&#39;ll inform the developers of the issue!"}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1530106610, "post_id": 51063311, "comment_id": 89118407, "body": "@BoPersson, could you point me in the right direction for what it should be?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1530106889, "post_id": 51063311, "comment_id": 89118609, "body": "@crobar - My guess is that this is old stuff that could just be removed."}, {"owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1530110621, "post_id": 51063311, "comment_id": 89121206, "body": "@BoPersson, actually I looked, and there is a newer version which does not have this, MXE does not have this version yet, but I can work around it for now"}], "owner": {"reputation": 2300, "user_id": 685984, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5620010c3d18b26c8a0ea6b16218fa9b?s=128&d=identicon&r=PG", "display_name": "crobar", "link": "https://stackoverflow.com/users/685984/crobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530104177, "creation_date": 1530103987, "last_edit_date": 1530104177, "question_id": 51063311, "link": "https://stackoverflow.com/questions/51063311/stdsize-t-causes-error-expected-identifier-before-unsigned-in-libstdc-h", "title": "std::size_t causes &quot;error: expected identifier before &#39;unsigned&#39;&quot; in libstdc++ header char_traits.h", "body": "<p>I'm attempting to build the netcdf-cxx4 library and encountering an odd error which is showing up in char_traits.h, a libstdc++ header. The first error is below:</p>\n\n<pre><code>&gt;&gt; $ x86_64-w64-mingw32.static-g++ -DHAVE_CONFIG_H -I. -I.. -g -O2 -MT ncCheck.lo -MD -MP -MF .deps/ncCheck.Tpo -c ncCheck.cpp -o ncCheck.o\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:104:66: error: expected identifier before 'unsigned'\n       compare(const char_type* __s1, const char_type* __s2, std::size_t __n);\n</code></pre>\n\n<p>The full error:</p>\n\n<pre><code>$ x86_64-w64-mingw32.static-g++ -DHAVE_CONFIG_H -I. -I.. -g -O2 -MT ncCheck.lo -MD -MP -MF .deps/ncCheck.Tpo -c ncCheck.cpp -o ncCheck.o\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:104:66: error: expected identifier before 'unsigned'\n       compare(const char_type* __s1, const char_type* __s2, std::size_t __n);\n                                                                  ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:106:19: error: expected unqualified-id before 'unsigned'\n       static std::size_t\n                   ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:110:39: error: expected identifier before 'unsigned'\n       find(const char_type* __s, std::size_t __n, const char_type&amp; __a);\n                                       ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:113:57: error: expected identifier before 'unsigned'\n       move(char_type* __s1, const char_type* __s2, std::size_t __n);\n                                                         ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:116:57: error: expected identifier before 'unsigned'\n       copy(char_type* __s1, const char_type* __s2, std::size_t __n);\n                                                         ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:119:35: error: expected identifier before 'unsigned'\n       assign(char_type* __s, std::size_t __n, char_type __a);\n                                   ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:145:64: error: expected identifier before 'unsigned'\n     compare(const char_type* __s1, const char_type* __s2, std::size_t __n)\n                                                                ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h: In static member function 'static int __gnu_cxx::char_traits&lt;_CharT&gt;::compare(const char_type*, const char_type*, long long unsigned int)':\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:147:17: error: expected unqualified-id before 'unsigned'\n       for (std::size_t __i = 0; __i &lt; __n; ++__i)\n                 ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:40:0,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:147:33: error: '__i' was not declared in this scope\n       for (std::size_t __i = 0; __i &lt; __n; ++__i)\n                                 ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h: At global scope:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:156:10: error: expected unqualified-id before 'unsigned'\n     std::size_t\n          ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:169:37: error: expected identifier before 'unsigned'\n     find(const char_type* __s, std::size_t __n, const char_type&amp; __a)\n                                     ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h: In static member function 'static const char_type* __gnu_cxx::char_traits&lt;_CharT&gt;::find(const char_type*, long long unsigned int, const char_type&amp;)':\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:171:17: error: expected unqualified-id before 'unsigned'\n       for (std::size_t __i = 0; __i &lt; __n; ++__i)\n                 ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:40:0,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:171:33: error: '__i' was not declared in this scope\n       for (std::size_t __i = 0; __i &lt; __n; ++__i)\n                                 ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h: At global scope:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:180:55: error: expected identifier before 'unsigned'\n     move(char_type* __s1, const char_type* __s2, std::size_t __n)\n                                                       ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:189:55: error: expected identifier before 'unsigned'\n     copy(char_type* __s1, const char_type* __s2, std::size_t __n)\n                                                       ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/char_traits.h:199:33: error: expected identifier before 'unsigned'\n     assign(char_type* __s, std::size_t __n, char_type __a)\n                                 ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:111:31: error: declaration of 'operator new' as non-function\n void* operator new(std::size_t) _GLIBCXX_THROW (std::bad_alloc)\n                               ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:111:25: error: expected unqualified-id before 'unsigned'\n void* operator new(std::size_t) _GLIBCXX_THROW (std::bad_alloc)\n                         ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:113:33: error: declaration of 'operator new []' as non-function\n void* operator new[](std::size_t) _GLIBCXX_THROW (std::bad_alloc)\n                                 ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:113:27: error: expected unqualified-id before 'unsigned'\n void* operator new[](std::size_t) _GLIBCXX_THROW (std::bad_alloc)\n                           ^\nIn file included from /opt/mxe/usr/x86_64-w64-mingw32.static/include/crtdefs.h:10:0,\n                 from /opt/mxe/usr/x86_64-w64-mingw32.static/include/string.h:9,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/cstring:42,\n                 from ncCheck.cpp:1:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:119:25: error: declaration of 'operator new' as non-function\n void* operator new(std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                         ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:119:25: error: expected unqualified-id before 'unsigned'\n void* operator new(std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                         ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:119:33: error: expected primary-expression before 'const'\n void* operator new(std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                                 ^\nIn file included from /opt/mxe/usr/x86_64-w64-mingw32.static/include/crtdefs.h:10:0,\n                 from /opt/mxe/usr/x86_64-w64-mingw32.static/include/string.h:9,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/cstring:42,\n                 from ncCheck.cpp:1:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:121:27: error: declaration of 'operator new []' as non-function\n void* operator new[](std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                           ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:121:27: error: expected unqualified-id before 'unsigned'\n void* operator new[](std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                           ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:121:35: error: expected primary-expression before 'const'\n void* operator new[](std::size_t, const std::nothrow_t&amp;) _GLIBCXX_USE_NOEXCEPT\n                                   ^\nIn file included from /opt/mxe/usr/x86_64-w64-mingw32.static/include/crtdefs.h:10:0,\n                 from /opt/mxe/usr/x86_64-w64-mingw32.static/include/string.h:9,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/cstring:42,\n                 from ncCheck.cpp:1:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:129:32: error: declaration of 'operator new' as non-function\n inline void* operator new(std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:129:32: error: expected unqualified-id before 'unsigned'\n inline void* operator new(std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:129:40: error: expected primary-expression before 'void'\n inline void* operator new(std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                        ^\nIn file included from /opt/mxe/usr/x86_64-w64-mingw32.static/include/crtdefs.h:10:0,\n                 from /opt/mxe/usr/x86_64-w64-mingw32.static/include/string.h:9,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/cstring:42,\n                 from ncCheck.cpp:1:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:131:34: error: declaration of 'operator new []' as non-function\n inline void* operator new[](std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                  ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:131:34: error: expected unqualified-id before 'unsigned'\n inline void* operator new[](std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                  ^\nIn file included from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:33:0,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/x86_64-w64-mingw32.static/bits/c++allocator.h:33,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/bits/allocator.h:46,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/string:41,\n                 from ./ncException.h:2,\n                 from ncCheck.cpp:3:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/new:131:42: error: expected primary-expression before 'void'\n inline void* operator new[](std::size_t, void* __p) _GLIBCXX_USE_NOEXCEPT\n                                          ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:44:14: error: expected unqualified-id before 'unsigned'\n   using std::size_t;\n              ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:44:14: error: expected ';' before 'unsigned'\nIn file included from /opt/mxe/usr/x86_64-w64-mingw32.static/include/crtdefs.h:10:0,\n                 from /opt/mxe/usr/x86_64-w64-mingw32.static/include/string.h:9,\n                 from /opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/cstring:42,\n                 from ncCheck.cpp:1:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:44:14: error: declaration does not declare anything [-fpermissive]\n   using std::size_t;\n              ^\nIn file included from ncCheck.cpp:2:0:\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h: In member function '__gnu_cxx::new_allocator&lt;_Tp&gt;::size_type __gnu_cxx::new_allocator&lt;_Tp&gt;::max_size() const':\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:114:16: error: expected primary-expression before 'unsigned'\n       { return size_t(-1) / sizeof(_Tp); }\n                ^\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:114:16: error: expected ';' before 'unsigned'\n/opt/mxe/usr/lib/gcc/x86_64-w64-mingw32.static/5.5.0/include/c++/ext/new_allocator.h:114:16: error: expected primary-expression before 'unsigned'\n</code></pre>\n\n<p>My question is, what could possibly cause this problem, where <code>size_t</code> seems to be causing the error? I've exhausted my ability to track down the problem and need some pointers.</p>\n\n<p>I followed the trail of headers and see that <code>size_t</code> is a typedef defined in a file <code>c++config.h</code> like so:</p>\n\n<pre><code>namespace std\n{\n  typedef __SIZE_TYPE__     size_t;\n  typedef __PTRDIFF_TYPE__  ptrdiff_t;\n\n#if __cplusplus &gt;= 201103L\n  typedef decltype(nullptr) nullptr_t;\n#endif\n}\n</code></pre>\n\n<p>and I see that <code>__SIZE_TYPE__</code> is a  <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\" rel=\"nofollow noreferrer\" title=\"GCC-Common-Predefined-Macros\">gcc predefined macro</a>. The contents of <code>__SIZE_TYPE__</code> appears to be this:</p>\n\n<pre><code>$ x86_64-w64-mingw32.static-g++ -dM -E - &lt; /dev/null | grep __SIZE_TYPE__\n#define __SIZE_TYPE__ long long unsigned int\n</code></pre>\n\n<p>Now, for extra info, I'm actually attempting to cross compile the library for windows from Linux, but I don't know if this is relevant to the question. In case it is relevant I am using minw32-w64 for the cross compile, and I'm actually using the <a href=\"http://mxe.cc\" rel=\"nofollow noreferrer\">MXE</a> system which builds many libraries etc for cross-compiling.</p>\n"}, {"tags": ["c++", "visual-studio", "build", "console-application", "visual-studio-liveshare"], "owner": {"reputation": 11, "user_id": 9574778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c42b74bd49ad280dfdec882d83116d?s=128&d=identicon&r=PG", "display_name": "lukasSVK1", "link": "https://stackoverflow.com/users/9574778/lukassvk1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552626007, "creation_date": 1530103925, "last_edit_date": 1552626007, "question_id": 51063296, "link": "https://stackoverflow.com/questions/51063296/visual-studio-2017-community-live-share-co-debug-not-working", "title": "Visual Studio 2017 Community Live Share Co-Debug not working", "body": "<p>So recently I started using <strong>Live Share</strong> extension for Visual Studio 2017 Community with friend. I read about it on Microsoft page (<a href=\"https://docs.microsoft.com/en-us/visualstudio/liveshare/use/vs\" rel=\"nofollow noreferrer\">Link Here</a>) and I do not understand why <strong>Co-Debugging</strong> is not working or in other words why <strong>Co-BuildApp</strong> is not working. </p>\n\n<p>Everything is set up including <strong>Shared Server</strong> which is not working too. First thing to know is , that we are programming <em>Console Application</em> so I want to know how he can <em>Build &amp; Run</em> code so he can see application window too. Only thing he can see on screen is this : <a href=\"https://i.stack.imgur.com/MwHNT.png\" rel=\"nofollow noreferrer\">Friend's view</a></p>\n\n<p>Any ideas ?</p>\n"}, {"tags": ["c++", "templates", "c++17", "if-constexpr"], "answers": [{"comments": [{"owner": {"reputation": 2698, "user_id": 2030532, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ac8b7394596f759b9688d2ed419db6e6?s=128&d=identicon&r=PG", "display_name": "motam79", "link": "https://stackoverflow.com/users/2030532/motam79"}, "edited": false, "score": 0, "creation_date": 1530104247, "post_id": 51063299, "comment_id": 89116595, "body": "Thanks. It works. If I have more than two branches (say is_third_tag, etc.). Can I use enums as the template variable?"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 8, "last_activity_date": 1530104696, "last_edit_date": 1530104696, "creation_date": 1530103947, "answer_id": 51063299, "question_id": 51063215, "link": "https://stackoverflow.com/questions/51063215/c-17-how-to-call-a-different-constructor-using-if-constexpr/51063299#51063299", "title": "C++ 17: How to call a different constructor using if constexpr?", "body": "<p>Complying to your desired API:</p>\n\n<pre><code>struct is_second_tag { };\n\ntemplate &lt;typename T = void&gt;\nstruct MyClass\n{\n    MyClass()\n    {\n        if constexpr(std::is_same_v&lt;T, is_second_tag&gt;)\n        {\n            second_constructor();\n        }\n        else \n        {\n            first_constructor();\n        }\n    }\n};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/dZ3wGPMEyha6aQWq\" rel=\"nofollow noreferrer\"><strong>live example on wandbox.org</strong></a></p>\n"}], "owner": {"reputation": 2698, "user_id": 2030532, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ac8b7394596f759b9688d2ed419db6e6?s=128&d=identicon&r=PG", "display_name": "motam79", "link": "https://stackoverflow.com/users/2030532/motam79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 51063299, "answer_count": 1, "score": 2, "last_activity_date": 1530104696, "creation_date": 1530103694, "question_id": 51063215, "link": "https://stackoverflow.com/questions/51063215/c-17-how-to-call-a-different-constructor-using-if-constexpr", "title": "C++ 17: How to call a different constructor using if constexpr?", "body": "<p>Say I have a class that takes a boolean in its constructor and depends on the value of the boolean, if calls different functions.</p>\n\n<pre><code>class MyClass {\n    MyClass(bool is_second)\n    {\n        common_code();\n        if (!is_second)\n            first_constructor();\n        else\n            second_constructor();\n    }\n};\n</code></pre>\n\n<p>I am new to C++17 and I am wondering if it is possible to write this logic using template programming and <code>if constexpr</code>. The api is something like this:</p>\n\n<pre><code>MyClass&lt;&gt; obj_calls_first_const;\nMyClass&lt;is_second_tag&gt; obj_calls_second_const;\n</code></pre>\n"}, {"tags": ["c++", "z3"], "answers": [{"tags": [], "owner": {"reputation": 7764, "user_id": 869966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de76b0a45b1c27f08ec1c8e23153588?s=128&d=identicon&r=PG", "display_name": "Christoph Wintersteiger", "link": "https://stackoverflow.com/users/869966/christoph-wintersteiger"}, "is_accepted": false, "score": 1, "last_activity_date": 1530106956, "creation_date": 1530106956, "answer_id": 51064368, "question_id": 51063153, "link": "https://stackoverflow.com/questions/51063153/use-a-c-string-in-z3expr/51064368#51064368", "title": "Use a C++ string in z3::expr?", "body": "<p>There is no way to use that particular string in the example, but you can use <a href=\"http://z3prover.github.io/api/html/classz3_1_1context.html#a31dafd9d9d944828e020c9d7d5694b08\" rel=\"nofollow noreferrer\"><code>parse_string</code></a>, which understands strings in SMT2 format.</p>\n"}], "owner": {"reputation": 21, "user_id": 6162204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bce98b1537e0b4455c8fcb27eed294c?s=128&d=identicon&r=PG&f=1", "display_name": "Zhouyang", "link": "https://stackoverflow.com/users/6162204/zhouyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1530106956, "creation_date": 1530103515, "question_id": 51063153, "link": "https://stackoverflow.com/questions/51063153/use-a-c-string-in-z3expr", "title": "Use a C++ string in z3::expr?", "body": "<p>I got difficulties in using Z3::expr. In z3, the expr <em>conj</em> can be defined like:</p>\n\n<pre><code>expr x = c.bool_const(\"x\");\nexpr y = c.bool_const(\"y\");\nexpr conj = (!x || !y);\n</code></pre>\n\n<p>Is there a way to use a string variable to define <em>conj</em>? Something like:</p>\n\n<pre><code>expr x = c.bool_const(\"x\");\nexpr y = c.bool_const(\"y\");\nstring str = \"(!x || !y)\";\nexpr conj = some_API(str);\n</code></pre>\n\n<p>I got stuck on the problem for days.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1530103459, "post_id": 51063082, "comment_id": 89116022, "body": "What happens if you inherit from <code>std::exception</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1530103512, "post_id": 51063082, "comment_id": 89116058, "body": "What is the reason to reimplement your own exception hierarchy? What&#39;s wrong with the standard C++ exceptions? Why can&#39;t you inherit from them? What is the <i>real</i> problem you want to solve using non-standard exceptions?"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1530103539, "post_id": 51063082, "comment_id": 89116088, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41753358/creating-custom-exceptions-in-c\">Creating custom exceptions in C++</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 6, "creation_date": 1530103781, "post_id": 51063082, "comment_id": 89116255, "body": "Your <code>Exception(const string &amp;)</code> constructor is very likely to store a pointer which becomes invalid when stack unwinding destroys the original <code>std::string</code> object."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 5, "creation_date": 1530104079, "post_id": 51063082, "comment_id": 89116474, "body": "If you want to control what happens when an exception is thrown, <b>catch it</b>. The language definition doesn&#39;t require any sort of display for an uncaught exception."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1530109928, "creation_date": 1530109928, "answer_id": 51065459, "question_id": 51063082, "link": "https://stackoverflow.com/questions/51063082/is-there-any-way-to-print-its-information-when-met-an-uncaught-exception-that-is/51065459#51065459", "title": "Is there any way to print its information when met an uncaught exception that is not from STL?", "body": "<p>If you derive your exception class publicly from <code>std::exception</code> then the compiler provided exception handler will be able to print more information for your exception. </p>\n"}], "owner": {"reputation": 329, "user_id": 7805312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NSMv.jpg?s=128&g=1", "display_name": "Jonny0201", "link": "https://stackoverflow.com/users/7805312/jonny0201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530109928, "creation_date": 1530103314, "question_id": 51063082, "link": "https://stackoverflow.com/questions/51063082/is-there-any-way-to-print-its-information-when-met-an-uncaught-exception-that-is", "title": "Is there any way to print its information when met an uncaught exception that is not from STL?", "body": "<p>When compiler meets an exception that is from STL like <code>std::out_of_range</code> :</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    throw std::out_of_range(\"There is an exception!\");\n}\n</code></pre>\n\n<p>the console will show the message :</p>\n\n<p><code>libc++abi.dylib: terminating with uncaught exception of type std::out_of_range: There is an exception!</code></p>\n\n<p>So I wrote an exception class :</p>\n\n<pre><code>class Exception {\n    protected:\n        const char *msg;\n    public:\n        Exception(const char *msg) noexcept : msg(msg) {}\n        Exception(const string &amp;msg) noexcept : msg(msg.c_str()) {}\n        const char *what() const noexcept {\n            return this-&gt;msg;\n        }\n};\n</code></pre>\n\n<p>However, throwing <code>Exception</code> will not get any information :</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    throw Exception(\"There is an exception!\");\n}\n</code></pre>\n\n<p>Console message :</p>\n\n<p><code>libc++abi.dylib: terminating with uncaught exception of type Exception</code></p>\n\n<p>Is there any way making console show :</p>\n\n<p><code>libc++abi.dylib: terminating with uncaught exception of type Exception: There is an exception!</code></p>\n\n<p>Compiler : <code>Apple LLVM version 9.1.0 (clang-902.0.39.2)</code></p>\n"}, {"tags": ["c++", "image", "algorithm", "image-processing", "simd-library"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5857387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4758eb7f8ba087ce0896d40d25254ec?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5857387/david"}, "edited": false, "score": 0, "creation_date": 1530107725, "post_id": 51063179, "comment_id": 89119194, "body": "Unfortunately this function makes opposite action - it copies all except given region."}, {"owner": {"reputation": 1381, "user_id": 7040601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8645047cc60a3d4cc3a43239b5b523bf?s=128&d=identicon&r=PG&f=1", "display_name": "FutureJJ", "link": "https://stackoverflow.com/users/7040601/futurejj"}, "reply_to_user": {"reputation": 53, "user_id": 5857387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4758eb7f8ba087ce0896d40d25254ec?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5857387/david"}, "edited": false, "score": 0, "creation_date": 1530254176, "post_id": 51063179, "comment_id": 89179011, "body": "For creating the bounding rectangle you can subtract total frame height from expected bounding rectangle height and same for width."}], "tags": [], "owner": {"reputation": 1381, "user_id": 7040601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8645047cc60a3d4cc3a43239b5b523bf?s=128&d=identicon&r=PG&f=1", "display_name": "FutureJJ", "link": "https://stackoverflow.com/users/7040601/futurejj"}, "is_accepted": false, "score": 0, "last_activity_date": 1530103966, "last_edit_date": 1530103966, "creation_date": 1530103589, "answer_id": 51063179, "question_id": 51062856, "link": "https://stackoverflow.com/questions/51062856/copying-a-part-of-simdview/51063179#51063179", "title": "Copying a part of Simd::View", "body": "<p>There is a function named <a href=\"http://ermig1979.github.io/Simd/help/group__copying.html#ga37f00c290856c9075c5facb69cd3f867\" rel=\"nofollow noreferrer\">Simd::CopyFrame</a>\nwhich accepts source, <strong>bounding frame</strong> and destination as input parameters. Using this function you may be able to copy the bottom right corner of your input image to another output image. </p>\n\n<p>The bounding frame can be created by using <a href=\"http://ermig1979.github.io/Simd/help/struct_simd_1_1_rectangle.html\" rel=\"nofollow noreferrer\">Simd::Rectangle()</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5857387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4758eb7f8ba087ce0896d40d25254ec?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5857387/david"}, "edited": false, "score": 0, "creation_date": 1530164662, "post_id": 51075350, "comment_id": 89139902, "body": "Oh it&#39;s really what I need!"}], "tags": [], "owner": {"reputation": 253, "user_id": 5857274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4UWT.png?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/5857274/akira"}, "is_accepted": true, "score": 2, "last_activity_date": 1530164122, "creation_date": 1530164122, "answer_id": 51075350, "question_id": 51062856, "link": "https://stackoverflow.com/questions/51062856/copying-a-part-of-simdview/51075350#51075350", "title": "Copying a part of Simd::View", "body": "<p>I would recommend to use method <a href=\"http://ermig1979.github.io/Simd/help/struct_simd_1_1_view.html#ab8114c875d686dd01fecaa4fa5e791f4\" rel=\"nofollow noreferrer\">Simd::View::Region</a>. It returns reference to subregion in given image.\nSo you can easy copy this subregion with using of <a href=\"http://ermig1979.github.io/Simd/help/group__copying.html#gadc21a4c5957a3e002edaa04721d952e2\" rel=\"nofollow noreferrer\">Simd::Copy</a>:</p>\n\n<pre><code>#include \"Simd/SimdLib.hpp\"\n\nint main()\n{\n    typedef Simd::View&lt;Simd::Allocator&gt; View;\n    View a(200, 200, View::Gray8);\n    View b(100, 100, View::Gray8);\n    // Copying of a part (the rigth bottom corner) of image a to the image b:\n    Simd::Copy(a.Region(b.Size(), View::RightBottom), b);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5857387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4758eb7f8ba087ce0896d40d25254ec?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5857387/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51075350, "answer_count": 2, "score": 1, "last_activity_date": 1530164122, "creation_date": 1530102629, "question_id": 51062856, "link": "https://stackoverflow.com/questions/51062856/copying-a-part-of-simdview", "title": "Copying a part of Simd::View", "body": "<p>I use <a href=\"http://ermig1979.github.io/Simd/help/struct_simd_1_1_view.html\" rel=\"nofollow noreferrer\">Simd::View</a> class from <a href=\"http://github.com/ermig1979/Simd\" rel=\"nofollow noreferrer\">Simd Library</a>. It is a container which holds an image. I need to copy a part (the right bottom corner) of image into another image.</p>\n\n<p>As I know there is a function <a href=\"http://ermig1979.github.io/Simd/help/group__copying.html#gadc21a4c5957a3e002edaa04721d952e2\" rel=\"nofollow noreferrer\">Simd::Copy</a> which allows to copy one image to other. But it copies image as whole. Of course I could write my own function to do this. But maybe anybody know any good-looking solution of this question?</p>\n"}, {"tags": ["c++", "qt", "opencv", "user-interface", "qt-creator"], "comments": [{"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530102742, "post_id": 51062623, "comment_id": 89115545, "body": "Does the path exist? Does the &quot;facelandmark.exe&quot; file exist at that path?"}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530105098, "post_id": 51062623, "comment_id": 89117232, "body": "Yes, I thought that it was either the file was not there or something else. Sadly the file was there and I don&#39;t know what was wrong. I use window 7 btw."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530105418, "post_id": 51062623, "comment_id": 89117468, "body": "Are you using Qt Creator? If you just double click on the exe file from windows explorer does the same thing happen?"}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530105711, "post_id": 51062623, "comment_id": 89117680, "body": "Yes, I&#39;m using Qt Creator. When I clicked from windows explorer I got this message: &quot;C:\\user\\...\\facelandmark.exe is not a valid Win32 application&quot;."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530105905, "post_id": 51062623, "comment_id": 89117844, "body": "Are you running 32-bit version of windows? or 64 bit?"}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106014, "post_id": 51062623, "comment_id": 89117942, "body": "My computer is running Window7 64-bit."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106211, "post_id": 51062623, "comment_id": 89118103, "body": "Ok that might be the problem. I&#39;m not very experienced with MinGW but looks like you&#39;re building using 32 bit right?"}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106441, "post_id": 51062623, "comment_id": 89118265, "body": "I think so. My OpenCV was built with MinGW32 and generated x86 library, also the same with dlib so I guest my program is 32 bit. If so, how can I fix it?"}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106547, "post_id": 51062623, "comment_id": 89118347, "body": "You&#39;ll need to recompile everything with a 64 bit compiler. There is a 64 bit version of MinGW (<a href=\"https://stackoverflow.com/questions/17988904/compile-64-bit-binary-with-mingw-dev-c\" title=\"compile 64 bit binary with mingw dev c\">stackoverflow.com/questions/17988904/&hellip;</a>)"}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106717, "post_id": 51062623, "comment_id": 89118474, "body": "Would it affect my Qt creator project, since it runs with mingw32?"}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530106892, "post_id": 51062623, "comment_id": 89118614, "body": "Yes you&#39;ll need to reconfigure the project or change the tool chain it&#39;s using to compile."}, {"owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1530107031, "post_id": 51062623, "comment_id": 89118708, "body": "Thank you. I&#39;ll try and update the result."}, {"owner": {"reputation": 781, "user_id": 266253, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4eaf05f2af1bd62b33d6341fb45182a6?s=128&d=identicon&r=PG", "display_name": "Alienpenguin", "link": "https://stackoverflow.com/users/266253/alienpenguin"}, "reply_to_user": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "edited": false, "score": 0, "creation_date": 1554186198, "post_id": 51062623, "comment_id": 97647395, "body": "@DeveloperPaul why should OP recompile eveything with a 64bit compiler? Win7 64bit is perfectly able to run 32bit applications (matter of fact many current applications are still 32bit)"}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "reply_to_user": {"reputation": 781, "user_id": 266253, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4eaf05f2af1bd62b33d6341fb45182a6?s=128&d=identicon&r=PG", "display_name": "Alienpenguin", "link": "https://stackoverflow.com/users/266253/alienpenguin"}, "edited": false, "score": 0, "creation_date": 1554293006, "post_id": 51062623, "comment_id": 97696449, "body": "@Alienpenguin looking back at comment chain now I think you&#39;re right. I don&#39;t know what my logic was at the time but the issue the OP experienced doesn&#39;t seem to be related to 64 versus 32 bit...."}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 5275047, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KfdTsqQF050/AAAAAAAAAAI/AAAAAAAAABY/wZVb8f2rptA/photo.jpg?sz=128", "display_name": "Allen ZHU", "link": "https://stackoverflow.com/users/5275047/allen-zhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1600594005, "last_edit_date": 1600594005, "creation_date": 1600587675, "answer_id": 63976631, "question_id": 51062623, "link": "https://stackoverflow.com/questions/51062623/qt-exe-file-error/63976631#63976631", "title": "Qt .exe file error", "body": "<ol>\n<li><p>Open the Qt installation path(such as:'C:\\Qt\\Qt5.14.2\\Tools\\QtCreator\\bin').</p>\n</li>\n<li><p>Right click on the 'QtCreate.exe' program.</p>\n</li>\n<li><p>Select 'Attributes' or 'Property' on the Menu.</p>\n</li>\n<li><p>Select 'Compatibility' tab on the popup window.</p>\n</li>\n<li><p>Click 'Change settings for all users' button.</p>\n</li>\n<li><p>Check 'Run as administrator'.</p>\n</li>\n<li><p>Click 'OK' to close all the popup window.</p>\n</li>\n<li><p>Restart QtCreator, you will find it works correctly.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9828073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dI2GXkvOJ94/AAAAAAAAAAI/AAAAAAAAADo/NrCC8W3ftf0/photo.jpg?sz=128", "display_name": "Helianthus", "link": "https://stackoverflow.com/users/9828073/helianthus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1174, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600594005, "creation_date": 1530101975, "last_edit_date": 1530105233, "question_id": 51062623, "link": "https://stackoverflow.com/questions/51062623/qt-exe-file-error", "title": "Qt .exe file error", "body": "<p>I was making a sleeping detection program with GUI. I decided to choose Qt for the project. I was able to build the program but when I ran it, this message popped up which I had no idea what was wrong.</p>\n\n<blockquote>\n  <p>Starting\n  C:\\Users\\Helianthus\\Documents\\QtProject\\build-facelandmark-Desktop_Qt_5_11_1_MinGW_32bit-Release\\release\\facelandmark.exe...</p>\n  \n  <p>Failed to start program. Path or permissions wrong?</p>\n  \n  <p>C:/Users/Helianthus/Documents/QtProject/build-facelandmark-Desktop_Qt_5_11_1_MinGW_32bit-Release/release/facelandmark.exe\n  exited with code -1</p>\n  \n  <p>The process failed to start. Either the invoked program\n  \"C:/Users/Helianthus/Documents/QtProject/build-facelandmark-Desktop_Qt_5_11_1_MinGW_32bit-Release/release/facelandmark.exe\"\n  is missing, or you may have insufficient permissions to invoke the\n  program.</p>\n</blockquote>\n"}, {"tags": ["c++", "curl", "influxdb"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 8, "creation_date": 1530101487, "post_id": 51062491, "comment_id": 89114684, "body": "On what line is the compiler giving you that error?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1530102708, "post_id": 51062491, "comment_id": 89115513, "body": "Are you sure you pasted the error message correctly? There seems to be <code>typeof</code> or <code>__typeof__</code>, but no <code>_typeof_</code>."}, {"owner": {"reputation": 1, "user_id": 2274653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fb06fe01dbcb51b3a08808ee43bc7?s=128&d=identicon&r=PG", "display_name": "user2274653", "link": "https://stackoverflow.com/users/2274653/user2274653"}, "edited": false, "score": 0, "creation_date": 1530102840, "post_id": 51062491, "comment_id": 89115609, "body": "The compiler gives me an error at line 27"}, {"owner": {"reputation": 1, "user_id": 2274653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fb06fe01dbcb51b3a08808ee43bc7?s=128&d=identicon&r=PG", "display_name": "user2274653", "link": "https://stackoverflow.com/users/2274653/user2274653"}, "edited": false, "score": 0, "creation_date": 1530104003, "post_id": 51062491, "comment_id": 89116421, "body": "line 27: curl_easy_setopt(curl, CURLOPT_URL, url);"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1530104337, "post_id": 51062491, "comment_id": 89116657, "body": "Is this line 27 of your source file? Isn&#39;t it line 27 of some included header file? What if you comment out all the code expect the inclusion of headers?"}, {"owner": {"reputation": 1, "user_id": 2274653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fb06fe01dbcb51b3a08808ee43bc7?s=128&d=identicon&r=PG", "display_name": "user2274653", "link": "https://stackoverflow.com/users/2274653/user2274653"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1530104668, "post_id": 51062491, "comment_id": 89116912, "body": "@DanielLangr Yes it is a line inside the source code, the IDE is actually showing me this with a red square at line 27 of my main code (it corresponds to the first call of curl_easy_setopt() ) However i have tried including only the headers as you mentioned and it compiles."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2274653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fb06fe01dbcb51b3a08808ee43bc7?s=128&d=identicon&r=PG", "display_name": "user2274653", "link": "https://stackoverflow.com/users/2274653/user2274653"}, "is_accepted": true, "score": 0, "last_activity_date": 1530258404, "creation_date": 1530258404, "answer_id": 51096785, "question_id": 51062491, "link": "https://stackoverflow.com/questions/51062491/expected-primary-expression-before-typeof/51096785#51096785", "title": "expected primary-expression before &quot;__typeof__&quot;", "body": "<p>That was due to curl library not being linked to the compiler. The correct way to fix this in Codeblocks editor:\nProject>Build options..>\"Linker settings\" tab</p>\n\n<p>Under Link libraries, click on add, type the library name on the popping window, click OK, click OK again. And reboot Codeblocks.</p>\n"}], "owner": {"reputation": 1, "user_id": 2274653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fb06fe01dbcb51b3a08808ee43bc7?s=128&d=identicon&r=PG", "display_name": "user2274653", "link": "https://stackoverflow.com/users/2274653/user2274653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 51096785, "answer_count": 1, "score": -2, "last_activity_date": 1530258404, "creation_date": 1530101447, "last_edit_date": 1530104799, "question_id": 51062491, "link": "https://stackoverflow.com/questions/51062491/expected-primary-expression-before-typeof", "title": "expected primary-expression before &quot;__typeof__&quot;", "body": "<p>I am new to c++. I am trying a tiny piece of code to interact with a local instance of InfluxDB.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;curl/curlver.h&gt;\n#include &lt;curl/easy.h&gt;\n#include &lt;curl/mprintf.h&gt;\n#include &lt;curl/multi.h&gt;\n#include &lt;curl/stdcheaders.h&gt;\n#include &lt;curl/system.h&gt;\n#include &lt;curl/typecheck-gcc.h&gt;\n\nusing namespace std;\n\nbool createInfluxDB(char *url, char *data) {\n  CURL *curl;\n\n  curl = curl_easy_init();\n\n  if(curl) {\n    CURLcode res;\n    /* What Content-type should i use?*/\n    struct curl_slist* headers = curl_slist_append(headers, \"Content-Type: application/json\");\n    /*--data-urlencode*/\n    char *urlencoded = curl_easy_escape(curl, data, int(strlen(data)));\n\n    curl_easy_setopt(curl, CURLOPT_URL, url); // Error here\n    curl_easy_setopt(curl, CURLOPT_POST, 1L);\n    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, urlencoded);\n    curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE,     (long)strlen(urlencoded));\n\n    res = curl_easy_perform(curl);\n\n    /*omitted controls*/\n\n    curl_free(urlencoded);\n    curl_slist_free_all(headers);\n    curl_easy_cleanup(curl);\n  }\n\n  return(true);\n}\n\nint main(int argc, char *argv[]){\n\n   char *url = \"http://localhost:8086/query\";\n   char *data = \"q=CREATE DATABASE mydb\";\n   /* should i change data string to json?\n      data = \"{\\\"q\\\":\\\"CREATE DATABASE mydb\\\" }\" */\n\n   bool res = createInfluxDB(url, data);\n\n   /*control result*/\n\n   return(0);\n}\n</code></pre>\n\n<p>When trying to build it, i get the following errors: </p>\n\n<pre><code>expected primary-expression before '__typeof__'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UGQVB.png\" rel=\"nofollow noreferrer\">extend list of errors</a></p>\n\n<p>Any ideas where it might come from ?</p>\n\n<p>I am working on codeblocks 16.01, using GCC compiler on Ubuntu.</p>\n"}, {"tags": ["c++", "qt", "signals", "slot"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1530101807, "post_id": 51062250, "comment_id": 89114916, "body": "Has function <code>object2::updateObjects()</code> a definition?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1530102382, "post_id": 51062250, "comment_id": 89115304, "body": "<code>WorldObjectChange</code> doesn&#39;t have members: <code>y</code>, <code>width</code>, or <code>height</code>. You&#39;ve obviously gotta fix that to compile. If that solves your problem I can post it as an answer, but I think fixing that will help get us to the actual issues."}, {"owner": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "edited": false, "score": 0, "creation_date": 1530103055, "post_id": 51062250, "comment_id": 89115753, "body": "I forgot to delete the parameters and the  the definition in object2 exists. Changed it in the question"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1530103352, "post_id": 51062250, "comment_id": 89115953, "body": "OK next question, where is the <code>connect</code> happening? You&#39;re not specifying the classes on the <code>updateObjects</code> so I&#39;d assume that your signal and slot are both using either the signal or the slot&#39;s definition."}, {"owner": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "edited": false, "score": 0, "creation_date": 1530104477, "post_id": 51062250, "comment_id": 89116767, "body": "I&#39;ve updated the question again"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 2, "creation_date": 1530106449, "post_id": 51062250, "comment_id": 89118274, "body": "Linker error is indicating <i>worldOutputGrid</i> namespace or class .. where is that in your code?"}, {"owner": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "edited": false, "score": 0, "creation_date": 1530165848, "post_id": 51062250, "comment_id": 89140342, "body": "worldOutputGrid is object2"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "edited": false, "score": 0, "creation_date": 1530106197, "post_id": 51063802, "comment_id": 89118088, "body": "Sorry, when I edited the code I forgot that I&#39;m using dynamic initilization. I changed it in the question."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "edited": false, "score": 0, "creation_date": 1530108088, "post_id": 51063802, "comment_id": 89119468, "body": "@todayihateprogramming In that case this should work. There&#39;s something else afoot, to figure out what you&#39;ll need to actually build your toy example. Then you&#39;ll see there&#39;s no problem there. Next work backwards piecing in your stuff back in to see where your actual problem is."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1530105382, "creation_date": 1530105382, "answer_id": 51063802, "question_id": 51062250, "link": "https://stackoverflow.com/questions/51062250/signal-slot-custom-struct-issue/51063802#51063802", "title": "signal slot custom struct issue", "body": "<p><a href=\"http://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow noreferrer\"><code>connect</code></a> takes a <code>QObject*</code> as it's 1<sup>st</sup> and 3<sup>rd</sup> arguments. In your code:<strike></p>\n\n<pre><code>connect(object1, SIGNAL(updateObjects(WorldObjectChange)), object2, SLOT(updateObjects(WorldObjectChange)));\n</code></pre>\n\n<p></strike><code>object1</code> is not a <code>QObject*</code>. You need to use instead: </p>\n\n<pre><code>connect(&amp;object1, SIGNAL(updateObjects(WorldObjectChange)), object2, SLOT(updateObjects(WorldObjectChange)));\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4414235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9fe80f1e0106a26d9aba831ffa55c6?s=128&d=identicon&r=PG&f=1", "display_name": "todayihateprogramming", "link": "https://stackoverflow.com/users/4414235/todayihateprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530105564, "creation_date": 1530100730, "last_edit_date": 1530105564, "question_id": 51062250, "link": "https://stackoverflow.com/questions/51062250/signal-slot-custom-struct-issue", "title": "signal slot custom struct issue", "body": "<p>I'm having problems emitting my own struct from a signal to a slot. The struct looks as following:</p>\n\n<p>WorldObjectChange.h</p>\n\n<pre><code>#pragma once\n\n    struct WorldObjectChange  {\n        WorldObjectChange() {}\n        ~WorldObjectChange() {}\n        double x;\n    };        \n    Q_DECLARE_METATYPE(WorldObjectChange)\n</code></pre>\n\n<p>I called qRegisterMetaType to make the type known in the signal slot method</p>\n\n<p>main.c</p>\n\n<pre><code>QApplication a(argc, argv); \nqRegisterMetaType&lt;WorldObjectChange&gt;();\n</code></pre>\n\n<p>The connection is queued since signal and slot inhabit different threads.\nThe connect happens in the constructor of a class that initializes and starts the thread for object1.</p>\n\n<pre><code>InitClass::InitClass(Object2 *object2) {\n  Object1* object1 = new Object1();\n  connect(object1, SIGNAL(updateObjects(WorldObjectChange)), object2, SLOT(updateObjects(WorldObjectChange)));\n}\n</code></pre>\n\n<p>object1.h</p>\n\n<pre><code>#include \"WorldObjectChange.h\"\n\nclass object1 : public QObject{\n    Q_OBJECT\n    public:\n        object1();\n    public signals:\n        void updateObjects(WorldObjectChange);\n};\n</code></pre>\n\n<p>object2.h </p>\n\n<pre><code>#include \"WorldObjectChange.h\"\n\nclass object2: public QLabel {\n    Q_OBJECT\n\npublic:\n    explicit object2(QWidget * parent = 0);\n    public slots:\n        void updateObjects(WorldObjectChange worldChangeVector);\n};\n</code></pre>\n\n<p>object2.cpp</p>\n\n<pre><code>void updateObjects(WorldObjectChange worldChangeVector) { }\n</code></pre>\n\n<p>The object seems to work fine in object1, but whenever I add the line for the slot in object 2 I get the following error:</p>\n\n<blockquote>\n  <p>Error LNK2019 unresolved external symbol \"public: void __cdecl\n  worldOutputGrid::updateObjects(struct WorldObjectChange)\"\n  (?updateObjects@worldOutputGrid@@QEAAXUWorldObjectChange@@@Z)\n  referenced in function \"private: static void __cdecl\n  worldOutputGrid::qt_static_metacall(class QObject *,enum\n  QMetaObject::Call,int,void * *)\"\n  (?qt_static_metacall@worldOutputGrid@@CAXPEAVQObject@@W4Call@QMetaObject@@HPEAPEAX@Z)</p>\n</blockquote>\n\n<p>Thanks in advance for the help</p>\n"}, {"tags": ["c++", "windows", "winapi", "process", "psapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 3, "creation_date": 1530100822, "post_id": 51061878, "comment_id": 89114205, "body": "task manager in win 10 used <code>VM_COUNTERS_EX2</code> most member of this structure copied to <code>PROCESS_MEMORY_COUNTERS</code> (<code>GetProcessMemoryInfo</code>  of course used <code>ZwQueryInformationProcess</code> with <code>ProcessVmCounters</code>) but some members lost. <code>SIZE_T PrivateWorkingSetSize</code> lost, but exactly this field show task manager - <a href=\"https://stackoverflow.com/a/42986966/6401656\">stackoverflow.com/a/42986966/6401656</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1530101486, "post_id": 51061878, "comment_id": 89114681, "body": "if want value exactly as in task manager - <code>VM_COUNTERS_EX2 vm; \tNtQueryInformationProcess(hProcess, ProcessVmCounters, &amp;vm, sizeof(vm), 0);\t \tDbgPrint(&quot;PrivateWorkingSet=%uK\\n&quot;, vm.PrivateWorkingSetSize &gt;&gt; 10);</code>"}, {"owner": {"reputation": 461, "user_id": 9136356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHIL9.png?s=128&g=1", "display_name": "kowsikbabu", "link": "https://stackoverflow.com/users/9136356/kowsikbabu"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530126089, "post_id": 51061878, "comment_id": 89129372, "body": "Hey! Thanks for the reply! I&#39;m having trouble including the header file for VM_COUNTERS_EX2. Any idea on the template to include the header or load the library?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530127039, "post_id": 51061878, "comment_id": 89129826, "body": "<a href=\"https://stackoverflow.com/a/48987318/6401656\">here</a> example how include at once <code>&lt;windows.h&gt;</code> and <code>&lt;ntifs.h&gt;</code> and you need add <code>ntdll.lib</code> or <code>ntdllp.lib</code> to the build. however probably only i do this. all another copy/paste definitions from ntifs/ntddk/wdm"}], "owner": {"reputation": 461, "user_id": 9136356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHIL9.png?s=128&g=1", "display_name": "kowsikbabu", "link": "https://stackoverflow.com/users/9136356/kowsikbabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1530100163, "creation_date": 1530099586, "last_edit_date": 1530100163, "question_id": 51061878, "link": "https://stackoverflow.com/questions/51061878/why-does-any-value-from-process-memory-counter-is-not-similar-to-the-memory-used", "title": "Why does any value from Process Memory Counter is not similar to the memory used value shown in the task manager?", "body": "<p>Process Memory Counter is defined structure available in the psapi (Process Status API). Its structure is defined as,</p>\n\n<pre><code>typedef struct _PROCESS_MEMORY_COUNTERS {\n  DWORD  cb;\n  DWORD  PageFaultCount;\n  SIZE_T PeakWorkingSetSize;\n  SIZE_T WorkingSetSize;\n  SIZE_T QuotaPeakPagedPoolUsage;\n  SIZE_T QuotaPagedPoolUsage;\n  SIZE_T QuotaPeakNonPagedPoolUsage;\n  SIZE_T QuotaNonPagedPoolUsage;\n  SIZE_T PagefileUsage;\n  SIZE_T PeakPagefileUsage;\n} PROCESS_MEMORY_COUNTERS;\n</code></pre>\n\n<p>I use GetProcessMemoryInfo method which has the syntax,\n<code>BOOL GetProcessMemoryInfo(HANDLE Process, PROCESS_MEMORY_COUNTERS* pmc,DWORD size_pmc);</code></p>\n\n<p>From the struct variable pointer pmc I can access the WorkingSetSize of a process (say mspaint.exe) as pmc.WorkingSetSize.</p>\n\n<p>But the memory value displayed in the task manager is not the same as any of the values in the structre. My Questions are,</p>\n\n<ol>\n<li>What are these values?</li>\n<li>What is the value displayed in the task manager?</li>\n<li>What is the programmatic way to get the memory used as displayed in the task manager?</li>\n<li>Can it be calculated using the process memory counter itself?</li>\n</ol>\n\n<p>PS: The preferred language is C++ and I want to do it without running any commands in the command prompt.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1530099642, "post_id": 51061858, "comment_id": 89113470, "body": "I don&#39;t have a Windows machine nearby, but have you tried to <code>fflush(stdin)</code> and then use either pause, getchar etc?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1530099677, "post_id": 51061858, "comment_id": 89113490, "body": "Is there anything in the output window (e.g. errors)"}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 1, "creation_date": 1530099848, "post_id": 51061858, "comment_id": 89113592, "body": "Can you find the executable of your application and run it manually from cmd? Do you see any output there?"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1530099895, "post_id": 51061858, "comment_id": 89113614, "body": "I don&#39;t think he knows if there&#39;s any output, VS tends to close the window REALLY fast, so if it&#39;s just a &quot;hello world&quot; he&#39;s expecting to see..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1530100288, "post_id": 51061858, "comment_id": 89113849, "body": "@Qubit Flushing stdin is undefined."}, {"owner": {"reputation": 121, "user_id": 6110686, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/541dcb643b9fd42f69fff2108a456d15?s=128&d=identicon&r=PG&f=1", "display_name": "Nadan Marenkovi\u0107", "link": "https://stackoverflow.com/users/6110686/nadan-marenkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1530100392, "post_id": 51061858, "comment_id": 89113909, "body": "when i double click exe file or files, it also closes immidiately, and wtf i cannot even open command prompt from windows"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1530100686, "post_id": 51061858, "comment_id": 89114129, "body": "If you can&#39;t open a normal command prompt, it appears that you have a significant problem in your system setup that is unrelated to your C++ coding."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1530100814, "post_id": 51061858, "comment_id": 89114199, "body": "@NeilButterworth Yes, it is - as per the standard. But it does behave as one would expect. <a href=\"https://stackoverflow.com/questions/18170410/what-is-the-use-of-fflushstdin-in-c-programming\" title=\"what is the use of fflushstdin in c programming\">stackoverflow.com/questions/18170410/&hellip;</a>"}, {"owner": {"reputation": 121, "user_id": 6110686, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/541dcb643b9fd42f69fff2108a456d15?s=128&d=identicon&r=PG&f=1", "display_name": "Nadan Marenkovi\u0107", "link": "https://stackoverflow.com/users/6110686/nadan-marenkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1530101096, "post_id": 51061858, "comment_id": 89114419, "body": "thanks guys, but i found solution to the problem with cmd,"}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1530101552, "post_id": 51061858, "comment_id": 89114726, "body": "If you still not found a solution, look at this article, <a href=\"http://www.tomshardware.com/answers/id-1988202/command-prompt-automatically-closes-open.html\" rel=\"nofollow noreferrer\">command prompt automatically closes after open</a>."}], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 7766797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72366906bea234b1bf52992ee619c673?s=128&d=identicon&r=PG&f=1", "display_name": "A_Singh7", "link": "https://stackoverflow.com/users/7766797/a-singh7"}, "is_accepted": false, "score": 0, "last_activity_date": 1530104496, "creation_date": 1530104496, "answer_id": 51063483, "question_id": 51061858, "link": "https://stackoverflow.com/questions/51061858/console-closing-immidiately-after-running-c-programwithout-debugging/51063483#51063483", "title": "console closing immidiately after running c++ program(without debugging)", "body": "<p>Here is a way for C/C++:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n#ifdef _WIN32\n#define WINPAUSE system(\"pause\")\n#endif\n</code></pre>\n\n<p>Put this at the top of your program, and IF it is on a Windows system (#ifdef _WIN32), then it will create a macro called WINPAUSE. Whenever you want your program to pause, call WINPAUSE; and it will pause the program, using the DOS command. For other systems like Unix/Linux, the console should not quit on program exit anyway.\nThis works with most of the versions of visual studio.</p>\n"}], "owner": {"reputation": 121, "user_id": 6110686, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/541dcb643b9fd42f69fff2108a456d15?s=128&d=identicon&r=PG&f=1", "display_name": "Nadan Marenkovi\u0107", "link": "https://stackoverflow.com/users/6110686/nadan-marenkovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530104496, "creation_date": 1530099515, "last_edit_date": 1530100278, "question_id": 51061858, "link": "https://stackoverflow.com/questions/51061858/console-closing-immidiately-after-running-c-programwithout-debugging", "title": "console closing immidiately after running c++ program(without debugging)", "body": "<p>I tried to run simple hello world in Visual Studio 2017 - empty project and empty console apps, but console closes instantly when i press ctrl + f5. Visual studio was working normal few days ago. I updated VS community edition but still have same problem. Tried different solutions like:Properties>Configuration Properties> Linker> System(Console (/SUBSYSTEM:CONSOLE)), tried system(\"pause\"), but nothing is working. Does anyone has any solution to this? </p>\n\n<p>The thing is, VS was working normal few days ago, and console app would run without getchar(), system() and similar functions(console would stay open).</p>\n"}, {"tags": ["c++", "arduino", "visual-studio-code"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1530098910, "post_id": 51061557, "comment_id": 89113033, "body": "You can try using normal Visual Studio or other proper IDE instead of browser codding."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530098928, "post_id": 51061557, "comment_id": 89113040, "body": "If I understand the image correctly, you wrote <code>Serial.</code> and then the popup came with all members? That&#39;s how IntelliSense works, it can&#39;t really know what you want as it&#39;s not telepathic. Try writing <i>another</i> letter, the first letter in the member you want to use, and the list should be narrowed down. And how do you <i>know</i> that the list is of &quot;all methods for all classes&quot;? Maybe it&#39;s the <code>Serial</code> object actually containing all those members you see?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530099010, "post_id": 51061557, "comment_id": 89113099, "body": "@SomeProgrammerDude No, OP is stating it&#39;s showing <i>all methods for all classes</i>."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 1, "creation_date": 1530099168, "post_id": 51061557, "comment_id": 89113189, "body": "He&#39;s probably used to Intellisense that comes with the default VS (on Windows). It works much better than what is available with VS Code. I don&#39;t know of any way to improve it, but you can bug them for the feature on their website, if you wish to."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1530100186, "post_id": 51061557, "comment_id": 89113800, "body": "@SombreroChicken I know, and I&#39;m asking for clarifications from the OP. <i>How</i> do the OP know it&#39;s &quot;all methods for all classes&quot;? What is the evidence?"}, {"owner": {"reputation": 47, "user_id": 4236917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WgIv.jpg?s=128&g=1", "display_name": "Garfius", "link": "https://stackoverflow.com/users/4236917/garfius"}, "edited": false, "score": 0, "creation_date": 1530100608, "post_id": 51061557, "comment_id": 89114063, "body": "Just declare a typical object with a single method. When done intellisense will show all methods from all known classes for any instance of this object."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1530101829, "post_id": 51061557, "comment_id": 89114943, "body": "Did you read the documentation and follow the setup instructions? <a href=\"https://code.visualstudio.com/docs/languages/cpp\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/languages/cpp</a>"}, {"owner": {"reputation": 47, "user_id": 4236917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WgIv.jpg?s=128&g=1", "display_name": "Garfius", "link": "https://stackoverflow.com/users/4236917/garfius"}, "edited": false, "score": 0, "creation_date": 1530111111, "post_id": 51061557, "comment_id": 89121516, "body": "Yes , followed everything."}, {"owner": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 0, "creation_date": 1530129589, "post_id": 51061557, "comment_id": 89130882, "body": "This can happen if not all includes are found and so the intellisense engine falls back to basic autocompletion that just takes hints from everywhere"}, {"owner": {"reputation": 47, "user_id": 4236917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WgIv.jpg?s=128&g=1", "display_name": "Garfius", "link": "https://stackoverflow.com/users/4236917/garfius"}, "edited": false, "score": 0, "creation_date": 1530168260, "post_id": 51061557, "comment_id": 89141431, "body": "understood: Vscode sucks, it&#39;s the worse for c++. Going back to visual studio."}], "owner": {"reputation": 47, "user_id": 4236917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WgIv.jpg?s=128&g=1", "display_name": "Garfius", "link": "https://stackoverflow.com/users/4236917/garfius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530122299, "creation_date": 1530098643, "question_id": 51061557, "link": "https://stackoverflow.com/questions/51061557/starting-on-vscode", "title": "Starting on vscode", "body": "<p>I am trying to use Vscode for c++ and arduino coding, but i need intellisense.</p>\n\n<p>The problem is: Intellisense suggests all methods for all classes all the time. Which renders itself useless.</p>\n\n<p>Example PIC <a href=\"https://i.stack.imgur.com/airoV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/airoV.jpg\" alt=\"Random suggestions\"></a></p>\n\n<p>Any idea?</p>\n"}, {"tags": ["android", "c++", "android-studio"], "comments": [{"owner": {"reputation": 659, "user_id": 3816569, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1aa507b8f0a86c74f040a465a22d75?s=128&d=identicon&r=PG&f=1", "display_name": "user 007", "link": "https://stackoverflow.com/users/3816569/user-007"}, "edited": false, "score": 0, "creation_date": 1530098669, "post_id": 51061472, "comment_id": 89112899, "body": "how are you calling the library in your android project ? please provide the steps you followed to add the library to the project and to call it."}, {"owner": {"reputation": 11, "user_id": 9985187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eda22110da72e7d1e783c0a1289fb51?s=128&d=identicon&r=PG&f=1", "display_name": "Kiminasium", "link": "https://stackoverflow.com/users/9985187/kiminasium"}, "reply_to_user": {"reputation": 659, "user_id": 3816569, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1aa507b8f0a86c74f040a465a22d75?s=128&d=identicon&r=PG&f=1", "display_name": "user 007", "link": "https://stackoverflow.com/users/3816569/user-007"}, "edited": false, "score": 0, "creation_date": 1530099989, "post_id": 51061472, "comment_id": 89113672, "body": "I added some information."}, {"owner": {"reputation": 11, "user_id": 9985187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eda22110da72e7d1e783c0a1289fb51?s=128&d=identicon&r=PG&f=1", "display_name": "Kiminasium", "link": "https://stackoverflow.com/users/9985187/kiminasium"}, "reply_to_user": {"reputation": 659, "user_id": 3816569, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1aa507b8f0a86c74f040a465a22d75?s=128&d=identicon&r=PG&f=1", "display_name": "user 007", "link": "https://stackoverflow.com/users/3816569/user-007"}, "edited": false, "score": 0, "creation_date": 1539956280, "post_id": 51061472, "comment_id": 92699624, "body": "I don&#39;t recommend using native libraries of many functions in cross-compiling. It will be  deeper into a hole. We should find another way to implement."}], "owner": {"reputation": 11, "user_id": 9985187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eda22110da72e7d1e783c0a1289fb51?s=128&d=identicon&r=PG&f=1", "display_name": "Kiminasium", "link": "https://stackoverflow.com/users/9985187/kiminasium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530791566, "creation_date": 1530098398, "last_edit_date": 1530791566, "question_id": 51061472, "link": "https://stackoverflow.com/questions/51061472/java-lang-unsatisfiedlinkerror-dlopen-failed-library-libxxxxx-so-0-not-found", "title": "java.lang.UnsatisfiedLinkError: dlopen failed: library \u201clibXXXXX.so.0\u201d not found", "body": "<p>I have created <code>libXXXXX.so</code> from the third-party sources in my android cross-compiling environment. The build was successful, but the execution was the following error.</p>\n\n<p>Error log(logcat)</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: library \"libXXXXX.so.0\" not found\n</code></pre>\n\n<p>I think that <strong>so.0</strong> is something wrong, but I don't know how to handle it in Android Studio.</p>\n\n<p>The result of <code>readelf</code>:</p>\n\n<pre><code>$readelf -d libXXXXX.so | grep SONAME&lt;br&gt;\n0x000000000000000e (SONAME) Library soname: [libXXXXX.so.0]\n</code></pre>\n\n<p><code>CMakeLists.txt</code> is like this:</p>\n\n<pre><code>add_library( libXXXXX SHARED IMPORTED )\n\nset_target_properties( libXXXXX PROPERTIES\nIMPORTED_LOCATION ${LIB_ROOT}/cpp/libs/${ANDROID_ABI}/libXXXXX.so )\n\nadd_library(hello-jni SHARED src/main/cpp/hello-jni.cpp )\n\ntarget_link_libraries( hello-jni libXXXXX ${log-lib} )\n</code></pre>\n\n<p>Java source code:</p>\n\n<pre><code>static {\n    System.loadLibrary(\"hello-jni\");\n}\n</code></pre>\n\n<ul>\n<li>In the case of <code>libXXXXX.a</code> (STATIC LIBRARY) was successfully executed.</li>\n<li><code>libXXXXX.so.0</code> is placed in the same folder as <code>libXXXXX.so</code>.</li>\n</ul>\n\n<p>How about attaching SONAME related options to <code>CMakeLists.txt</code>? I try it, but I don't understand well.</p>\n\n<p>Could anyone suggest any solutions? </p>\n\n<p><strong>Status change.</strong></p>\n\n<p>I add <code>libXXXXX.so</code> as loadLibrary in Java code. </p>\n\n<pre><code>static {\n    System.loadLibrary(\"XXXXX\");\n    System.loadLibrary(\"hello-jni\");\n}\n</code></pre>\n\n<p>Error log is as follow:</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol \"acos\" referenced by \"...libXXXXX.so\"...\n</code></pre>\n\n<p>No function acos in Android? Any solutions?</p>\n\n<p><strong>Added libm, but it remains the same error</strong></p>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>target_link_libraries( hello-jni libXXXXX m ${log-lib} )\n</code></pre>\n\n<p>Java source code:</p>\n\n<pre><code>static {\n    System.loadLibrary(\"m\");\n    System.loadLibrary(\"XXXXX\");\n    System.loadLibrary(\"hello-jni\");\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1530098303, "post_id": 51061405, "comment_id": 89112711, "body": "What is the problem with the code you show? When asking questions about build errors, please copy-paste (as text) the full and complete error output into the question body, without modifications. Please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and also read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 3, "user_id": 9999559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f4d126b8efbd174b39e07cadd63e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Harlockin", "link": "https://stackoverflow.com/users/9999559/harlockin"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530098427, "post_id": 51061405, "comment_id": 89112774, "body": "yup i made a mistake in the title. It should be c4458 warning not error. edit: corrected"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1530098557, "post_id": 51061405, "comment_id": 89112846, "body": "You&#39;re looking for <code>this-&gt;cb</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9999559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f4d126b8efbd174b39e07cadd63e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Harlockin", "link": "https://stackoverflow.com/users/9999559/harlockin"}, "edited": false, "score": 0, "creation_date": 1530098695, "post_id": 51061491, "comment_id": 89112911, "body": "was it the same in older version of visual studio ? this code was made using vs2003"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 3, "user_id": 9999559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f4d126b8efbd174b39e07cadd63e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Harlockin", "link": "https://stackoverflow.com/users/9999559/harlockin"}, "edited": false, "score": 1, "creation_date": 1530098818, "post_id": 51061491, "comment_id": 89112982, "body": "@Harlockin yes is was certainly the same, but maybe vs2003 simply didn&#39;t show the warning."}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 1, "creation_date": 1530190072, "post_id": 51061491, "comment_id": 89154944, "body": "This is defined in the C standard already (of course not for class member variables, but regarding to variables with same names in nested scopes) and was adopted by the C++ standard, so, yes, it must have been the same in older versions of Visual Studio."}], "tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": true, "score": 3, "last_activity_date": 1530098456, "creation_date": 1530098456, "answer_id": 51061491, "question_id": 51061405, "link": "https://stackoverflow.com/questions/51061405/c4458-warning-how-to-find-which-variable-is-used/51061491#51061491", "title": "c4458 warning - how to find which variable is used", "body": "<p>Local variables always shadow class member variables or global variables. So, in this method, always the local variable <code>int cb</code> is used.</p>\n"}], "owner": {"reputation": 3, "user_id": 9999559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f4d126b8efbd174b39e07cadd63e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Harlockin", "link": "https://stackoverflow.com/users/9999559/harlockin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 51061491, "answer_count": 1, "score": 0, "last_activity_date": 1536091539, "creation_date": 1530098185, "last_edit_date": 1536091539, "question_id": 51061405, "link": "https://stackoverflow.com/questions/51061405/c4458-warning-how-to-find-which-variable-is-used", "title": "c4458 warning - how to find which variable is used", "body": "<p>I need to port an old project to the latest visual studio but it has some very awful code in it that I don't know how to resolve.</p>\n\n<p>if have this function:</p>\n\n<pre><code>void CBuffer::AddData( LPBYTE lpData, u_long uDataSize, u_long &amp;uRemnant )\n{\n    int cb;\n    LPBYTE ptr  = GetWritableBuffer( (int *)&amp;cb );\n\n    cb  = ( cb &lt; uRemnant? cb: uRemnant );\n    ASSERT( ptr + cb &lt;= m_lpBufMax );\n    memcpy( (void*)ptr, &amp;lpData[uDataSize - uRemnant], cb );\n    m_pTail = ptr + cb;\n    uRemnant    -= cb;\n}\n</code></pre>\n\n<p>which prompts </p>\n\n<pre><code>buffer.cpp(90): warning C4458: declaration of 'cb' hides class member\n</code></pre>\n\n<p>here int cb overwrite u_long cb defined by the class CBuffer.</p>\n\n<p>Is there a way to tell which cb should be used after this?</p>\n\n<pre><code>LPBYTE ptr  = GetWritableBuffer( (int *)&amp;cb );\n</code></pre>\n"}, {"tags": ["c++", "gsl"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1530098240, "post_id": 51061363, "comment_id": 89112666, "body": "probably a precision difference"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1530098243, "post_id": 51061363, "comment_id": 89112668, "body": "I don&#39;t know either of these, but I can guess that Scientific Library uses a more accurate method to calculate sine than <code>&lt;math.h&gt;</code>."}, {"owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530098500, "post_id": 51061363, "comment_id": 89112811, "body": "Is there a way to tune speed vs accuracy here?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 3, "creation_date": 1530098608, "post_id": 51061363, "comment_id": 89112868, "body": "Compiler flags?"}, {"owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530098701, "post_id": 51061363, "comment_id": 89112916, "body": "What exactly can I try to make GSL work faster? Is there a chance to beat libc?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1530098859, "post_id": 51061363, "comment_id": 89113003, "body": "A hypothesis: The compiler might know that <code>sin</code> has no side-effects. Therefore it may have been able to conclude that removing all calls to <code>sin</code> does not change the behaviour of the program, and subsequently removed those calls, making the libc code much faster. Conclusion: A benchmark that ignores results of the calculation is often meaningless."}, {"owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530099111, "post_id": 51061363, "comment_id": 89113155, "body": "Tried to add a result of each computation to a list and than print it&#39;s size. The result is : STD : 58.404 ms GSL : 105.436 ms"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1530099524, "post_id": 51061363, "comment_id": 89113409, "body": "@Dmitry that doesn&#39;t still depend on the result of the computation, and furthermore adds a lot of overhead that is significant compared to what you&#39;re measuring.  Suggestion: Use one result variable, and add the result of each call to that. In the end, print the result. That&#39;s still possible to calculate at compile time though, you could input <code>numStepsToCalculate</code> at runtime to prevent that."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1530099574, "post_id": 51061363, "comment_id": 89113433, "body": "Another hypothesis: The compiler probably has internal knowledge about implementation of <code>sin</code>. It also probably doesn&#39;t have internal knowledge about <code>gsl_sf_sin</code>. Therefore the compiler might inline <code>sin</code> and unroll the loop, while has to call <code>gsl_sf_sin</code> as a function call and keep the loop intact, unless you used link-time optimisation. Did you enable link-time optimisation?"}, {"owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530100140, "post_id": 51061363, "comment_id": 89113762, "body": "Refreshed my code snipped with result usage. Also I turned off optomization. GSL is linked statically to my exe. I tried g++ -flto -Os - no effect"}], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530099432, "post_id": 51061778, "comment_id": 89113358, "body": "With optimization turned off I still have similar results :STD : 138.372 ms GSL : 202.59 ms"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "edited": false, "score": 0, "creation_date": 1530101090, "post_id": 51061778, "comment_id": 89114415, "body": "@Dmitry: Of course, when measuring speed, you need to turn optimization on. Your results (57 vs 106ms) suggest that the compiler doesn&#39;t optimize away <code>sin</code> (but it could, and to be honest, it is strange that it doesn&#39;t optimizes it away)."}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 2, "last_activity_date": 1530099295, "creation_date": 1530099295, "answer_id": 51061778, "question_id": 51061363, "link": "https://stackoverflow.com/questions/51061363/gnu-scientific-library-poor-preformance-compared-to-libc/51061778#51061778", "title": "Gnu Scientific Library poor preformance compared to libc", "body": "<p>GSL uses software sin (even when a CPU sin is available), and it can give you error estimates too: <code>gsl_sf_sin</code> is just a wrapper currently to <code>gsl_sf_sin_e</code> (which gives error estimates). This routine is not optimized too much for speed.</p>\n\n<p>On the other hand, libc sin is usually optimized pretty well for speed.</p>\n\n<p>Furthermore, your benchmark may be flawed, as <code>sin</code> might be optimized out by the compiler, if optimization is enabled.</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 6326375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1980c43e8235f285c3423e608566d36?s=128&d=identicon&r=PG&f=1", "display_name": "Bracula", "link": "https://stackoverflow.com/users/6326375/bracula"}, "is_accepted": false, "score": 0, "last_activity_date": 1532121106, "creation_date": 1532121106, "answer_id": 51450422, "question_id": 51061363, "link": "https://stackoverflow.com/questions/51061363/gnu-scientific-library-poor-preformance-compared-to-libc/51450422#51450422", "title": "Gnu Scientific Library poor preformance compared to libc", "body": "<p>Unfortunately, I can't comment so I post this as a separate answer.\nI think that <a href=\"https://stackoverflow.com/users/8157187/geza\">@geza</a>'s answer is correct, I would simply like to add a few details.\nAccording to GSL source codes, they have their own implementation of trigonometric functions:</p>\n\n<pre><code>/*-*-*-*-*-*-*-*-*-*-*-* Functions with Error Codes *-*-*-*-*-*-*-*-*-*-*-*/\n\n/* I would have prefered just using the library sin() function.\n * But after some experimentation I decided that there was\n * no good way to understand the error; library sin() is just a black box.\n * So we have to roll our own.\n */\nint\ngsl_sf_sin_e(double x, gsl_sf_result * result)\n{\n/* CHECK_POINTER(result) */\n\n{\nconst double P1 = 7.85398125648498535156e-1;\nconst double P2 = 3.77489470793079817668e-8;\nconst double P3 = 2.69515142907905952645e-15;\n\nconst double sgn_x = GSL_SIGN(x);\nconst double abs_x = fabs(x);\n\nif(abs_x &lt; GSL_ROOT4_DBL_EPSILON) {\n  const double x2 = x*x;\n  result-&gt;val = x * (1.0 - x2/6.0);\n  result-&gt;err = fabs(x*x2*x2 / 100.0);\n  return GSL_SUCCESS;\n}\nelse {\n  double sgn_result = sgn_x;\n  double y = floor(abs_x/(0.25*M_PI));\n  int octant = y - ldexp(floor(ldexp(y,-3)),3);\n  int stat_cs;\n  double z;\n\n  if(GSL_IS_ODD(octant)) {\n    octant += 1;\n    octant &amp;= 07;\n    y += 1.0;\n  }\n\n  if(octant &gt; 3) {\n    octant -= 4;\n    sgn_result = -sgn_result;\n  }\n\n  z = ((abs_x - y * P1) - y * P2) - y * P3;\n\n  if(octant == 0) {\n    gsl_sf_result sin_cs_result;\n    const double t = 8.0*fabs(z)/M_PI - 1.0;\n    stat_cs = cheb_eval_e(&amp;sin_cs, t, &amp;sin_cs_result);\n    result-&gt;val = z * (1.0 + z*z * sin_cs_result.val);\n  }\n  else { /* octant == 2 */\n    gsl_sf_result cos_cs_result;\n    const double t = 8.0*fabs(z)/M_PI - 1.0;\n    stat_cs = cheb_eval_e(&amp;cos_cs, t, &amp;cos_cs_result);\n    result-&gt;val = 1.0 - 0.5*z*z * (1.0 - z*z * cos_cs_result.val);\n  }\n\n  result-&gt;val *= sgn_result;\n\n  if(abs_x &gt; 1.0/GSL_DBL_EPSILON) {\n    result-&gt;err = fabs(result-&gt;val);\n  }\n  else if(abs_x &gt; 100.0/GSL_SQRT_DBL_EPSILON) {\n    result-&gt;err = 2.0 * abs_x * GSL_DBL_EPSILON * fabs(result-&gt;val);\n  }\n  else if(abs_x &gt; 0.1/GSL_SQRT_DBL_EPSILON) {\n    result-&gt;err = 2.0 * GSL_SQRT_DBL_EPSILON * fabs(result-&gt;val);\n  }\n  else {\n    result-&gt;err = 2.0 * GSL_DBL_EPSILON * fabs(result-&gt;val);\n  }\n\n  return stat_cs;\n}\n}\n}\n</code></pre>\n\n<p>You should remember that GSL is a library created by scientists and for scientists. Therefore you need a way to control your results and their correctness (see that comment above and <a href=\"https://stackoverflow.com/a/2285277/6326375\">this answer</a> for details), speed in this case is secondary. </p>\n\n<p>At the same time you need to remember that system trigonometric functions were implemented by smart <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/ieee754/dbl-64/s_sin.c;hb=HEAD#l281\" rel=\"nofollow noreferrer\">IBM</a> guys who know how to make it fast (and absolutely unreadable).</p>\n"}], "owner": {"reputation": 1448, "user_id": 2769062, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/KLVcR.png?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2769062/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1532121106, "creation_date": 1530098087, "last_edit_date": 1530099855, "question_id": 51061363, "link": "https://stackoverflow.com/questions/51061363/gnu-scientific-library-poor-preformance-compared-to-libc", "title": "Gnu Scientific Library poor preformance compared to libc", "body": "<p>I've implemented a simple program to measure sin calculation performance by gnu scientific library and libc. Here is a source code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;math.h&gt;\n#include &lt;chrono&gt;\n#include &lt;list&gt;\n#include \"gsl/gsl_sf_trig.h\"\n\nint main()\n{\n    std::uint32_t numStepsToCalculate = 1000000;\n    const double startX = 0.0;\n    const double finishX = M_PI*2;\n    const double stepX  = (finishX - startX)/numStepsToCalculate;\n\n    double currentX = startX;\n    std::list&lt;double&gt; res;\n\n    auto startT = std::chrono::steady_clock::now();\n    while ( currentX &lt;= finishX ) {\n        res.push_back( sin ( currentX ) );\n        currentX += stepX;\n    }\n    auto endT = std::chrono::steady_clock::now();\n\n    auto diffT = endT - startT;\n    std::cout &lt;&lt; \"STD : \" &lt;&lt; std::chrono::duration &lt;double, std::milli&gt; (diffT).count() &lt;&lt; \" ms\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"STD res size \" &lt;&lt; res.size() &lt;&lt; std::endl;\n\n    std::list&lt;double&gt; resOpt;\n    currentX = startX;\n    auto startTopt = std::chrono::steady_clock::now();\n    while ( currentX &lt;= finishX ) {\n        resOpt.push_back( gsl_sf_sin ( currentX ) );\n        currentX += stepX;\n    }\n\n    auto endTopt = std::chrono::steady_clock::now();\n\n    auto diffTopt = endTopt - startTopt;\n\n    std::cout &lt;&lt; \"GSL : \" &lt;&lt; std::chrono::duration &lt;double, std::milli&gt; (diffTopt).count() &lt;&lt; \" ms\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"GSL res size \" &lt;&lt; resOpt.size() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here is a result :\nSTD : 57.8869 ms\nGSL : 106.787 ms</p>\n\n<p>So is it OK for GSL to be slower than libc?</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 25, "creation_date": 1530097674, "post_id": 51061148, "comment_id": 89112314, "body": "C and C++ are two very different languages, with very different rules and semantics. There are many things that are valid C but invalid C++. If you have a header that includes valid C but invalid C++, and you can&#39;t really edit the header file to &quot;fix&quot; it, then there&#39;s not really much you can do about it yourself. And <code>extern &quot;C&quot;</code> isn&#39;t really a &quot;C backward compatibility mode&quot;, its main usage is to inhibit name mangling and not much else."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 13, "creation_date": 1530097759, "post_id": 51061148, "comment_id": 89112379, "body": "File a bug report to your library supplier."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 4, "creation_date": 1530106024, "post_id": 51061148, "comment_id": 89117951, "body": "Is the library claimed to be usable with C++ code? Or is it only claimed to be C code?"}, {"owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 11, "creation_date": 1530106061, "post_id": 51061148, "comment_id": 89117972, "body": "@Someprogrammerdude Answers and Comments are two very different concepts, with very different rules. There are many things that are valid comments, but an answer to the question is not one of them."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1530166904, "post_id": 51061476, "comment_id": 89140797, "body": "Wait, so C doesn&#39;t have the scope resolution operator? Wow, but it makes sense in hindsight :)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1530167318, "post_id": 51061476, "comment_id": 89141002, "body": "@Rakete1111 - Are you one of the rare people who only ever did C++ and not C?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1530169481, "post_id": 51061476, "comment_id": 89142099, "body": "Exactly. I always think I know C (because of C++) but I&#39;m always proven wrong :)"}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 4, "creation_date": 1530173992, "post_id": 51061476, "comment_id": 89144651, "body": "@Rakete1111: Just a note, C programming requires a <b>very</b> different approach (and I would even say an entirely different <i>mindset</i>) than C++. To the extent that I would readily admit I&#39;m pretty darn good at C++ but pretty darn bad at C, even though I can write both. This is not obvious when you&#39;re first learning, so that&#39;s why I&#39;m mentioning this -- if you assume two pieces of code in these languages should resemble each other, you&#39;ll only bang your head against the wall sometime afterward (maybe sooner, maybe later). I forget the idea that you ever knew C and just start it from scratch."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1530175002, "post_id": 51061476, "comment_id": 89145215, "body": "@Mehrdad Thanks for the advice! :)"}, {"owner": {"reputation": 653, "user_id": 658762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0833cea067fac2f5f71a00193c06ebfb?s=128&d=identicon&r=PG", "display_name": "Tonny", "link": "https://stackoverflow.com/users/658762/tonny"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 1, "creation_date": 1530183739, "post_id": 51061476, "comment_id": 89150772, "body": "@Mehrdad That goes the other way around as well. My C is up there with the best, but I never fully managed to wrap my head around C++. I can do C++ if needed, but it doesn&#39;t come natural and I really don&#39;t like it."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 48, "last_activity_date": 1530098409, "creation_date": 1530098409, "answer_id": 51061476, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51061476#51061476", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p><code>teststruct</code> defines a scope in C++. You can form the qualified id <code>teststruct::u64</code>. So the language rules for name lookup account for that, allowing members of classes and unions to hide identifiers in outer scope. Once <code>u64 u64;</code> is introduced, the unqualified <code>u64</code> cannot refer to the global <code>::u64</code>, only the member. And the member is not a type.</p>\n\n<p>In C <code>union teststruct</code> does not define a scope. The field can only be used in member access, so there can never arise a conflict. As such the field need not hide the file scope type identifier.</p>\n\n<p>There is nothing, as far as I can tell, that you may do in order to easily work around it. This library (which is a perfectly valid C library), is not a valid C++ library. No different than if it used <code>new</code> or <code>try</code> as variable names. It needs to be adapted.</p>\n"}, {"comments": [{"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 4, "creation_date": 1530123824, "post_id": 51061529, "comment_id": 89128261, "body": "The downside of this approach is that unless you are doing link-time optimisation it adds an extra layer of procedure call overhead to each library call."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 39, "last_activity_date": 1530098563, "creation_date": 1530098563, "answer_id": 51061529, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51061529#51061529", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>It seems that you have a header file that is illegal in C++, so you cannot <code>#include</code> it in code compiled as C++. If you cannot effect a change in the library header file (e.g. by complaining to your library supplier) then the most straightforward option is to write a thin C++-compatible wrapper around the library:</p>\n\n<p>To isolate your C++ code against the C header, create a <code>Wrapper.h</code> and <code>Wrapper.c</code>, where the <code>.h</code> is valid for inclusion in C++, does <strong>not</strong> include <code>header.h</code>, and provides all types and functions that you need for library interaction. Then, in the <code>.c</code>, you can <code>#include \"header.h\"</code> and implement all the calls (and whatever you need to do to safely convert between the types). This would obviously have to be compiled as C, not C++.</p>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 9058464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851f865aed95456302e9b9ad1dcb1d09?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Svietlichnyy", "link": "https://stackoverflow.com/users/9058464/andrew-svietlichnyy"}, "is_accepted": false, "score": 3, "last_activity_date": 1530178785, "creation_date": 1530178785, "answer_id": 51079546, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51079546#51079546", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>If your mentioned incompatibility between C and C++ is the only one, you should be able to convert <code>header.h</code> to C++ compatible header file programmatically, name it something like <code>header.hpp</code>. And then you can convert newer versions the same way.</p>\n\n<p>Compiler errors tell you everything about what and where should be changed:</p>\n\n<pre><code>header.h:11:9: error: \u2018u64\u2019 does not name a type\n</code></pre>\n\n<ol>\n<li>Open <code>header.h</code>;</li>\n<li>Seek position 11:9;</li>\n<li>Insert <code>::</code> there;</li>\n<li>Repeat for all <code>does not name a type</code> error.</li>\n</ol>\n\n<p>Some string processing and it's done.</p>\n\n<p>PS: C to C++ converters may able to do that too.</p>\n"}], "owner": {"reputation": 755, "user_id": 5295802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b667253d9b84a8154a93254e7050c72?s=128&d=identicon&r=PG&f=1", "display_name": "Sander", "link": "https://stackoverflow.com/users/5295802/sander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4612, "favorite_count": 5, "accepted_answer_id": 51061476, "answer_count": 3, "score": 53, "last_activity_date": 1530178785, "creation_date": 1530097419, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>I am trying to use a supplier's library in combination with my C++ application. The library is largely based on C, which is normally not a problem with the <code>extern \"C\"</code> option, but I ran into an issue that the C++ compiler does not accept. </p>\n\n<p>I simplified my code into the following example files. header.h represents a header from the suppier library, main.c/cpp are my own files. My real application is a C++ application, so I want to get it to work with main.cpp. </p>\n\n<p>header.h (note the line <code>u64 u64;</code>):</p>\n\n<pre><code>#ifndef HEADER_H\n#define HEADER_H\n\n#include &lt;stdint.h&gt;\n\ntypedef uint64_t u64;\n\nunion teststruct {\n    u64 u64;\n    struct {\n        u64 x:32;\n        u64 y:32;\n    } s;\n};\n\n#endif\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"header.h\"\n\nint main() {\n    union teststruct a;\n    a.u64=5;\n    printf(\"%x\\n\", a.u64);\n\n    return 0;\n}\n</code></pre>\n\n<p>main.cpp (same as main.c but with an extra <code>extern \"C\"</code> statement): </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern \"C\" {\n#include \"header.h\"\n}\n\nint main() {\n    union teststruct a;\n    a.u64=5;\n    printf(\"%x\\n\", a.u64);\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiling main.c using the line</p>\n\n<pre><code>gcc -o test main.c\n</code></pre>\n\n<p>compiles without problems. However, compiling the C++ version using the g++ compiler with the command </p>\n\n<pre><code>g++ -o test main.cpp\n</code></pre>\n\n<p>gives the following compiler errors:</p>\n\n<pre><code>In file included from main.cpp:12:0:\nheader.h:11:9: error: \u2018u64\u2019 does not name a type\n         u64 x:32;\n         ^\nheader.h:12:9: error: \u2018u64\u2019 does not name a type\n         u64 y:32;\n         ^\n</code></pre>\n\n<p>The issue is that the supplier used the same name (u64) for both the type and the variable name, which seems like a bad idea to begin with, but gcc apparently accepts it. I do not want to change the library (i.e. header.h) as it is very large,this occurs a lot in the code, and I occasionally get updates for it. Is there a way to make g++ accept this combination, or a way to modify main.cpp to make it compile <em>without</em> changing header.h?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1530096401, "post_id": 51060814, "comment_id": 89111507, "body": "This has nothing to do with parameter packs. A template is not a type. Functions returns (objects of particular) types, not templates. C++ does not work the way you want it to work."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1530096408, "post_id": 51060814, "comment_id": 89111513, "body": "<code>msg_formatter</code> is the name of a template, not a type."}], "answers": [{"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 2, "last_activity_date": 1530097706, "creation_date": 1530097706, "answer_id": 51061245, "question_id": 51060814, "link": "https://stackoverflow.com/questions/51060814/c-template-function-with-the-using-keyword-and-parameter-pack/51061245#51061245", "title": "C++ template function with the using keyword and parameter pack", "body": "<p>Since <code>msg_formatter</code> is a template the template arguments must be provided in the return type, but since you don't know the type that will be passed you need another level of indirection. If you have C++14 you can return a lambda from the function using <code>auto</code> return type deduction:</p>\n\n<pre><code>auto formatter() {\n  return [](const string&amp;, auto const&amp;...) {/*...*/};\n}\n</code></pre>\n\n<p>If you have &lt;C++14 you can make your own struct with a <code>operator()</code> and return that instead.</p>\n"}], "owner": {"reputation": 51, "user_id": 5484916, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/914ff981a99d8296ba409f27d06fc8ee?s=128&d=identicon&r=PG&f=1", "display_name": "grayfox", "link": "https://stackoverflow.com/users/5484916/grayfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530097706, "creation_date": 1530096286, "question_id": 51060814, "link": "https://stackoverflow.com/questions/51060814/c-template-function-with-the-using-keyword-and-parameter-pack", "title": "C++ template function with the using keyword and parameter pack", "body": "<pre><code>// I have an alias like this \ntemplate&lt;typename ... Args&gt;\nusing msg_formatter = string(const string&amp;, const Args &amp;... );\n\n// and it is returned by a class like this\nclass logger{\npublic:\nmsg_formatter* formatter() const;\n};\n\n// then somewhere else I wanna be able to call this\nlogger log;\nlog.formatter()(\"my text: %d\", 123);\n</code></pre>\n\n<p>however this doesn't seems to work, any idea?\nthanks a lot.</p>\n"}, {"tags": ["c++", "address-sanitizer", "leak-sanitizer"], "comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1530097628, "post_id": 51060801, "comment_id": 89112287, "body": "Hm, you tell the compiler to add code that checks the correct behavior of your program, but then you don&#39;t want the information where your program behaves wrongly? ... Simply remove the flag again."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1530097652, "post_id": 51060801, "comment_id": 89112301, "body": "what is the point of using <code>-fsanitize=address</code> if you don&#39;t want his report"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 2, "creation_date": 1530097927, "post_id": 51060801, "comment_id": 89112468, "body": "@Tyker Because OP is interested in memory overflows but not memory leaks?"}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 1, "creation_date": 1530129702, "post_id": 51060801, "comment_id": 89130929, "body": "@yugr Indeed. I want to know of memory overflows, double free, use of temporary references after the object was destroyed, etc. Leaks don&#39;t matter as I run an app. for under 1 sec. and quit. It can leak as much as it wants. Unix way!"}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 9, "last_activity_date": 1530176744, "last_edit_date": 1530176744, "creation_date": 1530097906, "answer_id": 51061314, "question_id": 51060801, "link": "https://stackoverflow.com/questions/51060801/how-to-suppress-leaksanitizer-report-when-running-under-fsanitize-address/51061314#51061314", "title": "How to suppress LeakSanitizer report when running under -fsanitize=address?", "body": "<p>You can run with <code>export ASAN_OPTIONS=detect_leaks=0</code> or add a function to your application:</p>\n\n<pre><code>const char* __asan_default_options() { return \"detect_leaks=0\"; }\n</code></pre>\n\n<p>See <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerFlags\" rel=\"noreferrer\">Flags wiki</a> for more details.</p>\n"}], "owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2460, "favorite_count": 1, "accepted_answer_id": 51061314, "answer_count": 1, "score": 3, "last_activity_date": 1530176744, "creation_date": 1530096244, "last_edit_date": 1530098004, "question_id": 51060801, "link": "https://stackoverflow.com/questions/51060801/how-to-suppress-leaksanitizer-report-when-running-under-fsanitize-address", "title": "How to suppress LeakSanitizer report when running under -fsanitize=address?", "body": "<p>When I compile my C++ code with <code>-fsanitize=address</code>, my software prints out a list of leaks at the time it exits. Is there a way to avoid the leaks report (I'm only interested in memory corruptions, not leaks)? I went to the page with <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerFlags#run-time-flags\" rel=\"nofollow noreferrer\">ASAN flags page</a>, but it doesn't look like any of those flags is a match.</p>\n"}, {"tags": ["c++", "object", "destructor", "lifetime"], "comments": [{"owner": {"reputation": 1948, "user_id": 7042963, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CgsFk.jpg?s=128&g=1", "display_name": "BartekPL", "link": "https://stackoverflow.com/users/7042963/bartekpl"}, "edited": false, "score": 0, "creation_date": 1530096588, "post_id": 51060787, "comment_id": 89111625, "body": "Ok, could you answer to me? I didn&#39;t find answer to my questions in link you added."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1530096609, "post_id": 51060787, "comment_id": 89111639, "body": "The argument is symmetry.   The lifetime of an object begins when construction is finished.   Since destruction is logically a reverse sequence of construction, this means lifetime ends when the destructor starts.     Your example is valid - the lifetime of members begins before execution of the constructor body, and ends after execution of the destructor."}, {"owner": {"reputation": 1948, "user_id": 7042963, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CgsFk.jpg?s=128&g=1", "display_name": "BartekPL", "link": "https://stackoverflow.com/users/7042963/bartekpl"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1530096738, "post_id": 51060787, "comment_id": 89111722, "body": "Thanks @Peter ;)"}], "owner": {"reputation": 1948, "user_id": 7042963, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CgsFk.jpg?s=128&g=1", "display_name": "BartekPL", "link": "https://stackoverflow.com/users/7042963/bartekpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1530096507, "answer_count": 0, "score": 0, "last_activity_date": 1530096218, "creation_date": 1530096218, "question_id": 51060787, "link": "https://stackoverflow.com/questions/51060787/why-the-object-lifetime-ends-before-non-trivial-destructor-execution", "closed_reason": "Duplicate", "title": "Why the object lifetime ends before non-trivial destructor execution?", "body": "<p>I am confused because I found some information about lifetime of object in C++:</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/lifetime\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/lifetime</a></p>\n\n<blockquote>\n  <p>For any object of class types whose destructor is not trivial,\n  lifetime ends when the execution of the destructor begins.</p>\n</blockquote>\n\n<ol>\n<li><p><strong>Why</strong>, is there any rationale?</p></li>\n<li><p>If that means <strong>I shouldn't do this</strong>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo {\npublic:\n Foo() = default;\n Foo(const Foo&amp;) = default;\n ~Foo() { std::cout &lt;&lt; member; }\n\n int member = 666;\n};\n\nint main() {\n  Foo a;\n}\n</code></pre></li>\n</ol>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "gcc4.8"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1530271527, "post_id": 51060581, "comment_id": 89188478, "body": "Are you sure you can compile it with Clang? You have names interception, since you are sharing constant &#39;k&#39; with the lambda function formal parameter called k. If clang able to compile it - you probably can test it with GCC 5+ with <code>-std=c++14</code> key. In any case you have an error in your code."}, {"owner": {"reputation": 265, "user_id": 8063157, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-s5EWcJl47ow/AAAAAAAAAAI/AAAAAAAAAAA/79cDcrSLQ_E/photo.jpg?sz=128", "display_name": "user8063157", "link": "https://stackoverflow.com/users/8063157/user8063157"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1530271888, "post_id": 51060581, "comment_id": 89188680, "body": "It fails with all the gcc compiler except 8.1 , we can see it here .<a href=\"https://godbolt.org/g/o355oQ\" rel=\"nofollow noreferrer\">godbolt.org/g/o355oQ</a>"}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1530272097, "post_id": 51060581, "comment_id": 89188786, "body": "Perhaps relevant is that GCC 8.1 supports certain features of C++2a, so perhaps it&#39;s intentional."}, {"owner": {"reputation": 265, "user_id": 8063157, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-s5EWcJl47ow/AAAAAAAAAAI/AAAAAAAAAAA/79cDcrSLQ_E/photo.jpg?sz=128", "display_name": "user8063157", "link": "https://stackoverflow.com/users/8063157/user8063157"}, "edited": false, "score": 0, "creation_date": 1530272186, "post_id": 51060581, "comment_id": 89188832, "body": "This has nothing to do with c++2a clang compiles it from version 3.4.1 onwards <a href=\"https://godbolt.org/g/B46sX9\" rel=\"nofollow noreferrer\">godbolt.org/g/B46sX9</a>"}], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 8063157, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-s5EWcJl47ow/AAAAAAAAAAI/AAAAAAAAAAA/79cDcrSLQ_E/photo.jpg?sz=128", "display_name": "user8063157", "link": "https://stackoverflow.com/users/8063157/user8063157"}, "edited": false, "score": 0, "creation_date": 1530274151, "post_id": 51101002, "comment_id": 89189926, "body": "Then this is a Bug with gcc 8.1 and clang I suppose , Which need to be reported. Clang: <a href=\"https://godbolt.org/g/B46sX9\" rel=\"nofollow noreferrer\">godbolt.org/g/B46sX9</a>  gcc 8.1: <a href=\"https://godbolt.org/g/7p9tyZ\" rel=\"nofollow noreferrer\">godbolt.org/g/7p9tyZ</a>"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 4, "last_activity_date": 1530272686, "last_edit_date": 1592644375, "creation_date": 1530272686, "answer_id": 51101002, "question_id": 51060581, "link": "https://stackoverflow.com/questions/51060581/why-this-code-fails-to-compile-with-gcc-4-8-5-while-it-compiles-fine-with-clang/51101002#51101002", "title": "Why this code fails to compile with gcc 4.8.5 while it compiles fine with clang", "body": "<p>This isn't quite as straightforward as it might seem.  A lambda that captures <code>k</code> by copy is mostly equivalent to a struct object whose closure type has a member named <code>k</code>, and with an <code>operator()</code> whose definition uses the specified parameters and body.  If that were technically true, sure, we know that a function parameter hides a class member.</p>\n<p>Except that's not how the Standard actually defines lambdas.  Instead, it says that any entity captured by value corresponds to an <em>unnamed</em> member of the closure type.  In the lambda body, name lookup looks in the lambda's enclosing scope, not the scope of the closure type.  If that name lookup finds an entity captured by copy, the compiler must internally transform that usage of the name to a usage of the unnamed member instead.  In C++11 and C++14, these rules didn't clearly specify how lambda parameter names fit into that name lookup scheme, and as a result, different compilers and compiler versions didn't agree on behavior in cases like this where a captured entity and a lambda parameter had the same name.</p>\n<p>With <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#2211\" rel=\"nofollow noreferrer\">Defect Resolution 2211</a>, C++17 solved the issue by just making it illegal:</p>\n<p>[expr.prim.lambda.capture]/5:</p>\n<blockquote>\n<p>If an <em>identifier</em> in a <em>simple-capture</em> appears as the <em>declarator-id</em> of a parameter of the <em>lambda-declarator</em>'s <em>parameter-declaration-clause</em>, the program is ill-formed. [ <em>Example:</em></p>\n<pre><code>void f() {\n  int x = 0;\n  auto g = [x](int x) { return 0; } // error: parameter and simple-capture have the same name\n}\n</code></pre>\n<p>-- <em>end example</em> ]</p>\n</blockquote>\n<p>(See also <a href=\"https://timsong-cpp.github.io/cppwp/expr.prim.lambda.capture#5\" rel=\"nofollow noreferrer\">the same paragraph</a> in the current draft mirror.)</p>\n"}], "owner": {"reputation": 265, "user_id": 8063157, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-s5EWcJl47ow/AAAAAAAAAAI/AAAAAAAAAAA/79cDcrSLQ_E/photo.jpg?sz=128", "display_name": "user8063157", "link": "https://stackoverflow.com/users/8063157/user8063157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "accepted_answer_id": 51101002, "answer_count": 1, "score": 5, "last_activity_date": 1530272686, "creation_date": 1530095624, "last_edit_date": 1530271154, "question_id": 51060581, "link": "https://stackoverflow.com/questions/51060581/why-this-code-fails-to-compile-with-gcc-4-8-5-while-it-compiles-fine-with-clang", "title": "Why this code fails to compile with gcc 4.8.5 while it compiles fine with clang", "body": "<pre><code>#include&lt;iostream&gt;                                                                                                                                    \n\nusing namespace std;                                                                                                                                  \n\nint main()                                                                                                                                            \n{                                                                                                                                                     \n   const int k = 10;                                                                                                                                  \n\n   // Capture k by value                                                                                                                              \n   auto myl = [k] (int k) { cout &lt;&lt; \" ++k=\" &lt;&lt; ++k ; };                                                                                            \n\n   myl(k+10);                                                                                                                                             \n}  \n</code></pre>\n\n<p>Error  below</p>\n\n<pre><code>lamda.cpp: In lambda function:\nlamda.cpp:10:50: error: increment of read-only variable \u00e2k\u00e2\n    auto myl = [k] (int k) { cout &lt;&lt; \" ++K=\" &lt;&lt; ++k ; };\n</code></pre>\n\n<p>clearly what I am referring to is local variable K and not const member K.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530099654, "post_id": 51060437, "comment_id": 89113475, "body": "Is Ubuntu using GPU hardware? If not, Mesa emulation would behave different as the GPU driver."}, {"owner": {"reputation": 659, "user_id": 4548818, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/282yZ.gif?s=128&g=1", "display_name": "Shaobo Zi", "link": "https://stackoverflow.com/users/4548818/shaobo-zi"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1530104383, "post_id": 51060437, "comment_id": 89116681, "body": "Yes, it&#39;s hardware accelerated."}], "owner": {"reputation": 659, "user_id": 4548818, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/282yZ.gif?s=128&g=1", "display_name": "Shaobo Zi", "link": "https://stackoverflow.com/users/4548818/shaobo-zi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530095182, "creation_date": 1530095182, "question_id": 51060437, "link": "https://stackoverflow.com/questions/51060437/opengl-draw-dashed-line-does-not-work-when-line-width-is-small", "title": "OpenGL draw dashed line does not work when line width is small", "body": "<p>I use the following test code to draw a dashed line with OpenGL.</p>\n\n<pre><code>glPushAttrib(GL_COLOR_BUFFER_BIT | GL_LINE_BIT | GL_ENABLE_BIT);\n    glLineWidth(1.4);\n    glColor3ub(7, 7, 7);\n    glLineStipple( 1, 0x0F0F );\n    glEnable( GL_LINE_STIPPLE );\n    glBegin(GL_LINE_STRIP);\n        glVertex2d(x0, y0);\n        glVertex2d(x1, y1);\n    glEnd();\nglPopAttrib()\n</code></pre>\n\n<p>The strange thing is that when I set the line width less than 1.5 the dashed line became solid. When the line width is greater or equal than 1.5, the dashed line is rendered as expected. why is that?\nThis happens on Ubuntu 12.04. But the codes works fine with Windows OS.</p>\n"}, {"tags": ["c++", "include"], "answers": [{"tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": true, "score": 1, "last_activity_date": 1530094831, "creation_date": 1530094831, "answer_id": 51060307, "question_id": 51060228, "link": "https://stackoverflow.com/questions/51060228/including-collision-between-two-files-c/51060307#51060307", "title": "including collision between two files c++", "body": "<p>Since you rely on pointers, you can declare (rather than define) the classes, and include the header files in the cpp files:</p>\n\n<pre><code>#ifndef _INTERFACE_H\n#define _INTERFACE_H\n\n#include &lt;SDL.h&gt;\n#include &lt;vector&gt;\n\nclass Widget; //See the swap from include to declaration?\n\nclass Interface\n{\npublic:\n    Interface(SDL_Rect &amp;r);\n    ~Interface();\nprivate:\n    SDL_Rect m_rect;\n    std::vector&lt;Widget*&gt; m_widgets; \n};\n\n#endif\n</code></pre>\n\n<p>Do a similar swap in the other header.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8249349"}, "is_accepted": false, "score": 0, "last_activity_date": 1530094835, "creation_date": 1530094835, "answer_id": 51060308, "question_id": 51060228, "link": "https://stackoverflow.com/questions/51060228/including-collision-between-two-files-c/51060308#51060308", "title": "including collision between two files c++", "body": "<p>EDIT: Doctorlove was faster.</p>\n\n<p>use forward declaration in one of the files:</p>\n\n<pre><code>#ifndef _INTERFACE_H\n#define _INTERFACE_H\n\n#include &lt;SDL.h&gt;\n#include &lt;vector&gt;\n#include \"Widget.h\"\n\nclass Widget;\n\nclass Interface\n{.....\n\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1530094882, "creation_date": 1530094882, "answer_id": 51060326, "question_id": 51060228, "link": "https://stackoverflow.com/questions/51060228/including-collision-between-two-files-c/51060326#51060326", "title": "including collision between two files c++", "body": "<p>That's not a \"collosion\" but a <em>circular dependency</em>.</p>\n\n<p>For your case it's solved <em>very</em> easily by not including the header files at all, and only use <em>forward declarations</em> of the classes:</p>\n\n<p>File <code>Interface.h</code>:</p>\n\n<pre><code>#ifndef INTERFACE_H\n#define INTERFACE_H\n\n#include &lt;SDL.h&gt;\n#include &lt;vector&gt;\n\n// No inclusion of Widget.h\n// Forward declare the class instead\nclass Widget;\n\nclass Interface\n{\npublic:\n    Interface(SDL_Rect &amp;r);\n    ~Interface();\nprivate:\n    SDL_Rect m_rect;\n    std::vector&lt;Widget*&gt; m_widgets; \n};\n\n#endif\n</code></pre>\n\n<p>File <code>Widget.h</code>:</p>\n\n<pre><code>#ifndef WIDGET_H\n#define WIDGET_H\n\n#include &lt;SDL.h&gt;\n\n// Don't include Interface.h\n// Forward declare it instead\nclass Interface;\n\nclass Widget\n{\npublic:\n    Widget(Interface *main, SDL_Rect &amp;r);\n    ~Widget();\nprivate:\n    SDL_Rect m_rect;\n    Interface* m_master; \n};\n\n#endif\n</code></pre>\n\n<p>You of course needs to include the header files in your <em>source</em> files.</p>\n\n<hr>\n\n<p>Also note that I changed the symbols for your include guards. Symbols with a leading underscore followed by an upper-case letter are reserved in all scopes by the \"implementation\" (the compiler and standard library). See <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">this old question and its answers</a> for details.</p>\n"}], "owner": {"reputation": 25, "user_id": 9715281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f83ae2c8232583a2013f46bf598827d7?s=128&d=identicon&r=PG&f=1", "display_name": "icetomtom", "link": "https://stackoverflow.com/users/9715281/icetomtom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 51060307, "answer_count": 3, "score": 0, "last_activity_date": 1530094882, "creation_date": 1530094599, "question_id": 51060228, "link": "https://stackoverflow.com/questions/51060228/including-collision-between-two-files-c", "title": "including collision between two files c++", "body": "<p>I 've got a collision issue. I mean that in my A.h in need to include B.h but in B.h I need to include A.h so I can't figure out how to fixe it.</p>\n\n<p>Interface.h</p>\n\n<pre><code>#ifndef _INTERFACE_H\n#define _INTERFACE_H\n\n#include &lt;SDL.h&gt;\n#include &lt;vector&gt;\n#include \"Widget.h\"\n\nclass Interface\n{\npublic:\n    Interface(SDL_Rect &amp;r);\n    ~Interface();\nprivate:\n    SDL_Rect m_rect;\n    std::vector&lt;Widget*&gt; m_widgets; \n};\n\n#endif\n</code></pre>\n\n<p>Widget.h</p>\n\n<pre><code>#ifndef _WIDGET_H\n#define _WIDGET_H\n\n#include &lt;SDL.h&gt;\n#include \"Interface.h\"\n\nclass Widget\n{\npublic:\n    Widget(Interface *main, SDL_Rect &amp;r);\n    ~Widget();\nprivate:\n    SDL_Rect m_rect;\n    Interface* m_master; \n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "c++11", "initialization", "copy-elision"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1530094036, "post_id": 51059991, "comment_id": 89109947, "body": "copy-elision in action... In C++17, your code should be fine."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 10, "last_activity_date": 1530094136, "creation_date": 1530094136, "answer_id": 51060051, "question_id": 51059991, "link": "https://stackoverflow.com/questions/51059991/why-is-the-move-constructor-involved-here/51060051#51060051", "title": "Why is the move constructor involved here", "body": "<p>See <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"noreferrer\">copy elision</a>:</p>\n\n<blockquote>\n  <p>Under the following circumstances, the compilers are permitted, but not required to omit the copy- and move- (since C++11) construction of class objects even if the copy/move (since C++11) constructor and the destructor have observable side-effects. This is an optimization: <strong>even when it takes place and the copy-/move-constructor is not called, it still must be present and accessible (as if no optimization happened at all), otherwise the program is ill-formed.</strong></p>\n</blockquote>\n\n<p>Since C++17:</p>\n\n<blockquote>\n  <p>They need not be present or accessible, as the language rules ensure that no copy/move operation takes place, even conceptually.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 6, "last_activity_date": 1530095516, "last_edit_date": 1530095516, "creation_date": 1530094140, "answer_id": 51060052, "question_id": 51059991, "link": "https://stackoverflow.com/questions/51059991/why-is-the-move-constructor-involved-here/51060052#51060052", "title": "Why is the move constructor involved here", "body": "<blockquote>\n  <p>Why is this happening? Shouldn't all three statements just call the <code>MyClass(Args&amp; a)</code> constructor?</p>\n</blockquote>\n\n<p>For both <code>MyClass c1 = MyClass(a);</code> and <code>MyClass c2 = a;</code>, temporary <code>MyClass</code> will be constructed at first by the constructor <code>MyClass::MyClass(Args&amp; a)</code>, then used to copy-initialize the object <code>c1</code> and <code>c2</code>. The constructed temporaries are rvalues, that means the move-constructor will be selected for the copy initialization.</p>\n\n<blockquote>\n  <p>On the other hand, if I do create the move constructor the program compiles fine and the move constructor is never called!!!</p>\n</blockquote>\n\n<p>The reason is <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">copy elision</a>; the copy/move operation is omitted here, results in the fact that <code>MyClass::MyClass(Args&amp; a)</code> is used to initialize the object <code>c1</code> and <code>c2</code> directly.</p>\n\n<p>The rule about copy elision changed since C++17. Note that pre-C++17, copy elision is not guaranteed. And for non-guaranteed copy elision, even when the copy/move operation is omitted the copy/move constructor still needs to be present and accessible.</p>\n\n<blockquote>\n  <p>This is an optimization: even when it takes place and the copy-/move-constructor is not called, it still must be present and accessible (as if no optimization happened at all), otherwise the program is ill-formed.</p>\n</blockquote>\n\n<p>After C++17 your code would work fine. For guaranteed copy elision, copy/move constructor is not required to be present or accessible.</p>\n\n<blockquote>\n  <p>Under the following circumstances, the compilers are required to omit\n  the copy- and move- construction of class objects even if the\n  copy/move constructor and the destructor have observable side-effects.\n  They need not be present or accessible, as the language rules ensure\n  that no copy/move operation takes place, even conceptually:</p>\n  \n  <ul>\n  <li><p>In initialization, if the initializer expression is a prvalue and the cv-unqualified version of the source type is the same class as the\n  class of the destination, the initializer expression is used to\n  initialize the destination object:</p>\n\n<pre><code>T x = T(T(T())); // only one call to default constructor of T, to initialize x\n</code></pre></li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 6, "last_activity_date": 1530094676, "last_edit_date": 1530094676, "creation_date": 1530094307, "answer_id": 51060109, "question_id": 51059991, "link": "https://stackoverflow.com/questions/51059991/why-is-the-move-constructor-involved-here/51060109#51060109", "title": "Why is the move constructor involved here", "body": "<p>One major problem is this:</p>\n\n<pre><code>MyClass c1 = MyClass(a);\n</code></pre>\n\n<p>This creates a <em>temporary</em> object of type <code>MyClass</code>, and temporary types are rvalues. It then tries to either <em>copy-construct</em> <code>c1</code> using the temporary object, or if you have a move-constructor then <em>move-construct</em> <code>c1</code>.</p>\n\n<p>In C++11 and C++14, there will be no auto-generated copy-constructor for your class (because you have a user-defined (even if deleted) move-constructor), so only the deleted move-constructor is available. Well it would be available if it wasn't deleted, leading to your error.</p>\n"}], "owner": {"reputation": 111, "user_id": 2282047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5225f76795b9c5b404ba910977618955?s=128&d=identicon&r=PG", "display_name": "skalkoto", "link": "https://stackoverflow.com/users/2282047/skalkoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 2, "accepted_answer_id": 51060051, "answer_count": 3, "score": 8, "last_activity_date": 1530095516, "creation_date": 1530093940, "last_edit_date": 1530095511, "question_id": 51059991, "link": "https://stackoverflow.com/questions/51059991/why-is-the-move-constructor-involved-here", "title": "Why is the move constructor involved here", "body": "<p>I have this piece of C++ code:</p>\n\n<pre><code>class Args {};\n\nclass MyClass {\n  public:\n  MyClass(Args&amp; a) {}\n  MyClass(MyClass &amp;&amp;) = delete;\n};\n\nint main() {\n\n  Args a;\n  MyClass c1 = MyClass(a);\n  MyClass c2 = a;\n  MyClass c3(a);\n\n  return 0;\n}\n</code></pre>\n\n<p>This does not compile because the construction of objects <code>c1</code> and <code>c2</code> seem to involve the class's move constructor:</p>\n\n<p><code>error: use of deleted function \u2018MyClass::MyClass(MyClass&amp;&amp;)\u2019</code></p>\n\n<p>It seems as if the compiler wants to create temporary object and then move them to <code>c1</code> and <code>c2</code>. Why is this happening? Shouldn't all three statements just call the <code>MyClass(Args&amp; a)</code> constructor?</p>\n\n<p>On the other hand, if I do create the move constructor the program compiles fine and the move constructor is never called!!!</p>\n"}, {"tags": ["c++", "rhapsody"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 6141737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jHFlh.jpg?s=128&g=1", "display_name": "Frank Landgraf", "link": "https://stackoverflow.com/users/6141737/frank-landgraf"}, "is_accepted": false, "score": 1, "last_activity_date": 1530184424, "creation_date": 1530184424, "answer_id": 51081479, "question_id": 51059953, "link": "https://stackoverflow.com/questions/51059953/find-when-active-class-destruction-has-completed-in-ibm-rhapsody/51081479#51081479", "title": "Find when active class destruction has completed in IBM Rhapsody", "body": "<p>You may overload the destructor of the class, it is called if class is deleted.</p>\n"}], "owner": {"reputation": 642, "user_id": 4057482, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ea82a5621ea1ed4c0c9550ba443256e0?s=128&d=identicon&r=PG&f=1", "display_name": "User55412", "link": "https://stackoverflow.com/users/4057482/user55412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1530184424, "creation_date": 1530093853, "last_edit_date": 1530094309, "question_id": 51059953, "link": "https://stackoverflow.com/questions/51059953/find-when-active-class-destruction-has-completed-in-ibm-rhapsody", "title": "Find when active class destruction has completed in IBM Rhapsody", "body": "<p>I need to destroy an instance of a class with a statechart in IBM Rhapsody with the OXF framework, and find when the destruction has completed.</p>\n\n<p>From other questions (1) I can see that calling <code>delete</code> on the object is a bad idea as any pending events in the event queue will crash the program.</p>\n\n<p>Calling <code>destroy()</code> cleans up pending events as part of the destruction but is there a way to find when the destruction has completed?</p>\n\n<p>Note that I have tried enabling the <code>CPP_CG::Framework::UseDirectReactiveDeletion</code> option but this does not clean up pending events before deletion so leads to crashes.</p>\n\n<p>Thanks for the help</p>\n\n<p>(1) <a href=\"https://stackoverflow.com/questions/26626872/understanding-on-termination-connector-of-state-diagram-in-ibm-rhapsody\">Understanding on Termination Connector of State Diagram in IBM Rhapsody</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1530093996, "post_id": 51059936, "comment_id": 89109915, "body": "If you know how to fix the code (by removing the <code>=</code>), why are you here?"}, {"owner": {"reputation": 1344, "user_id": 450580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f52b76a3a0cdd668eced52e211da402?s=128&d=identicon&r=PG", "display_name": "sidon", "link": "https://stackoverflow.com/users/450580/sidon"}, "edited": false, "score": 1, "creation_date": 1530094002, "post_id": 51059936, "comment_id": 89109922, "body": "So just remove the &quot;=&quot; sign on the for loop condition ;)"}, {"owner": {"reputation": 1, "user_id": 9999199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1678671812251796/picture?type=large", "display_name": "Jordan Mari Celestino", "link": "https://stackoverflow.com/users/9999199/jordan-mari-celestino"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1530094449, "post_id": 51059936, "comment_id": 89110238, "body": "@ScottHunter cos im new to c++ sir and i want to know why it&#39;s crashing whenever i add the &quot;=&quot; sign"}, {"owner": {"reputation": 154, "user_id": 3314052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89b93a4ff76b305e35ee022ac0bc931b?s=128&d=identicon&r=PG&f=1", "display_name": "np_complete", "link": "https://stackoverflow.com/users/3314052/np-complete"}, "edited": false, "score": 0, "creation_date": 1530095361, "post_id": 51059936, "comment_id": 89110818, "body": "It crashes because the last iteration of the first for loop tries to access <code>arrayValue&#39;th</code> index which exceeds the last index of your array ( which goes from <code>0</code> to <code>arrayValue-1</code> ) and it causes a crash. It doesn&#39;t crash after the first loop, it crashes during the last iteration of the first for loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1530109885, "post_id": 51059936, "comment_id": 89120694, "body": "Variable Length Arrays [VLA] are not supported in C++.  The statement <code>string names[arrayValue];</code> is a VLA.  Use <code>std::vector&lt;std::string&gt;</code> or dynamically allocate the array."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 4884932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-riAXdFFLodI/AAAAAAAAAAI/AAAAAAAAAB0/Fz7t4hnZSsY/photo.jpg?sz=128", "display_name": "petacreepers23", "link": "https://stackoverflow.com/users/4884932/petacreepers23"}, "is_accepted": false, "score": 0, "last_activity_date": 1530094004, "creation_date": 1530094004, "answer_id": 51060019, "question_id": 51059936, "link": "https://stackoverflow.com/questions/51059936/ive-created-a-simple-program-but-something-is-not-right/51060019#51060019", "title": "I&#39;ve created a simple program but something is not right", "body": "<p>You have to know, that arrays start on 0, so, to access your array values, you must iterate from 0 to size-1.</p>\n\n<p>There is your problem, when you put the &lt;= you will iterate until the size, not until the last position.</p>\n\n<p>So, to sum up, when you iterate an array, you must cover it's positions that start in 0, so using i &lt; size is the best option.</p>\n"}, {"comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1530095983, "post_id": 51060355, "comment_id": 89111212, "body": "It is non standard for C++, but commonly supported by compilers (because it&#39;s part of C language). I don&#39;t suppose it&#39;s the issue here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2916669"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1530096449, "post_id": 51060355, "comment_id": 89111536, "body": "@Yksisarvinen How can the compiler know how much space to allocate on the stack when it needs the user input? As he does not initialize the int in the start of the function wouldn&#39;t the array have a undefined / random size?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1530096933, "post_id": 51060355, "comment_id": 89111852, "body": "I&#39;m afraid I don&#39;t C language too well, so I can&#39;t answer <i>how</i> does it work. But <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">Variable Length Arrays</a> are a thing since C99. And gcc for example allows the same when compiling C++ code (will emit a warning with <code>-Wpedantic</code> iirc)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2916669"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1530098523, "post_id": 51060355, "comment_id": 89112825, "body": "I see, I haven&#39;t used gcc much so I didn&#39;t know this was possible (my compiler wouldn&#39;t allow it), but i think its better to stick to the standard."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2916669"}, "is_accepted": false, "score": 0, "last_activity_date": 1530095508, "last_edit_date": 1530095508, "creation_date": 1530094969, "answer_id": 51060355, "question_id": 51059936, "link": "https://stackoverflow.com/questions/51059936/ive-created-a-simple-program-but-something-is-not-right/51060355#51060355", "title": "I&#39;ve created a simple program but something is not right", "body": "<p>string names[arrayValue]; is not working like you intented, a array must be initialized with a fixed size before the program is run. Possible solution to your program could be</p>\n\n<pre><code>const uint32_t maxSize = 1024; // 1024 being a upper limit\nstring names[maxSize];\n\nfor (int x = 0; x &lt;= arrayValue; x++) {\n    if (x &gt;= (maxSize - 1)) // remember a array of size 1024 goes from 0 to 1023 \n        break;\n    cout &lt;&lt; \"Enter a name for no.\" &lt;&lt; x &lt;&lt; \": \";\n    cin &gt;&gt; names[x];\n}\n</code></pre>\n\n<p>other way to write it without the if-check:</p>\n\n<pre><code>for (int x = 0; x &lt;= arrayValue &amp;&amp; x &lt; maxSize; x++) \n</code></pre>\n\n<p>or you could use a vector (a vector is a dynamic array that can grow and shrink):</p>\n\n<pre><code>#include &lt;vector&gt;\nvector&lt;string&gt; names;\n\nfor (int x = 0; x &lt;= arrayValue; x++) {\n    cout &lt;&lt; \"Enter a name for no.\" &lt;&lt; x &lt;&lt; \": \";\n    string n;\n    cin &gt;&gt; n;\n    names.push_back(n);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9999199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1678671812251796/picture?type=large", "display_name": "Jordan Mari Celestino", "link": "https://stackoverflow.com/users/9999199/jordan-mari-celestino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1530095508, "creation_date": 1530093810, "last_edit_date": 1530094248, "question_id": 51059936, "link": "https://stackoverflow.com/questions/51059936/ive-created-a-simple-program-but-something-is-not-right", "title": "I&#39;ve created a simple program but something is not right", "body": "<p>It works if I would remove the \"=\" sign on the for loop condition. But when I add an equal sign to it, it will crash after the first loop. So to sum up, the first loop will work but not the second one. Help please and thank you!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nint main() {\n\n  int arrayValue;\n\n  cout &lt;&lt; \"Enter an array value: \";\n  cin &gt;&gt; arrayValue;\n  cout &lt;&lt; endl;\n\n  string names[arrayValue];\n\n  for (int x = 0; x &lt;= arrayValue; x++) {\n    cout &lt;&lt; \"Enter a name for no.\" &lt;&lt; x &lt;&lt; \": \";\n    cin &gt;&gt; names[x];\n  }\n\n  cout &lt;&lt; \"No.\"\n       &lt;&lt; \"  ------  \"\n       &lt;&lt; \"Value\" &lt;&lt; endl;\n\n  for (int j = 0; j &lt;= arrayValue; j++) {\n    cout &lt;&lt; j &lt;&lt; \"  ------  \" &lt;&lt; names[j] &lt;&lt; endl;\n  }\n}\n</code></pre>\n"}]