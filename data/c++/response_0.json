[{"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420675134, "post_id": 27830815, "comment_id": 44067529, "body": "Search the hard drive and find out where VS put it.  Also confirm that the folders of Visual Studio 2013 and under are writable."}, {"owner": {"reputation": 6593, "user_id": 4316870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHeLV.png?s=128&g=1", "display_name": "Leandro Carracedo", "link": "https://stackoverflow.com/users/4316870/leandro-carracedo"}, "edited": false, "score": 0, "creation_date": 1420675137, "post_id": 27830815, "comment_id": 44067531, "body": "Could you include your application code?"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1420675295, "post_id": 27830815, "comment_id": 44067571, "body": "can you find the executable in the given path? if yes, can you run it from a cmd window? if no, can you check which dependency is missing? (dependency walker tool can help)"}, {"owner": {"reputation": 13, "user_id": 4430922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff4dbff027c82c1a9c40d49aac94782?s=128&d=identicon&r=PG&f=1", "display_name": "Rhys Williams", "link": "https://stackoverflow.com/users/4430922/rhys-williams"}, "edited": false, "score": 0, "creation_date": 1420675508, "post_id": 27830815, "comment_id": 44067635, "body": "Thanks for the comments, the code is now included. I&#39;m pretty new to computing so it might take a while to check the other comments, bear with me"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2846805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe6d858aee55dbc6dc5e16377f5499c?s=128&d=identicon&r=PG&f=1", "display_name": "Axel Vanden Eynden", "link": "https://stackoverflow.com/users/2846805/axel-vanden-eynden"}, "is_accepted": true, "score": 0, "last_activity_date": 1420676054, "creation_date": 1420676054, "answer_id": 27830968, "question_id": 27830815, "link": "https://stackoverflow.com/questions/27830815/cant-run-a-c-program-on-visual-studio-2013/27830968#27830968", "title": "Can&#39;t run a C++ program on Visual Studio 2013", "body": "<p>You should check the properies of your project there is perhaps a difference between the \"Output path\" that you can find under <strong>Configuration properies > C/C++ > Output files</strong> and the path to start your .exe. You'll find the path to start the .exe normally under <strong>Configuration properies > Debugging</strong>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4430922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff4dbff027c82c1a9c40d49aac94782?s=128&d=identicon&r=PG&f=1", "display_name": "Rhys Williams", "link": "https://stackoverflow.com/users/4430922/rhys-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3726, "favorite_count": 0, "accepted_answer_id": 27830968, "answer_count": 1, "score": 1, "last_activity_date": 1420676054, "creation_date": 1420674987, "last_edit_date": 1420675358, "question_id": 27830815, "link": "https://stackoverflow.com/questions/27830815/cant-run-a-c-program-on-visual-studio-2013", "title": "Can&#39;t run a C++ program on Visual Studio 2013", "body": "<p>Whenever I try to run a program for my coursework I keep seeing the error message </p>\n\n<p>\"Unable to start program 'C:\\users\\user\\documents\\visual studio 2013\\projects\\coursework\\debug\\ConsoleApplication1.exe'</p>\n\n<p>The system cannot find the file specified\"</p>\n\n<p>The output tab shows \"</p>\n\n<p>1>------ Build started: Project: ConsoleApplication1, Configuration: Debug Win32 ------</p>\n\n<p>1>  LINK : C:\\Users\\User\\documents\\visual studio 2013\\Projects\\Coursework\\Debug\\ConsoleApplication1.exe not found or not built by the last incremental link; performing full link</p>\n\n<p>1>  ConsoleApplication1.vcxproj -> C:\\Users\\User\\documents\\visual studio 2013\\Projects\\Coursework\\Debug\\ConsoleApplication1.exe</p>\n\n<p>========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n\"</p>\n\n<p>The program builds successfully but will not run, what can I do?</p>\n\n<p>Edit (Application code):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n// Open the data file\nifstream inputFile;\ninputFile.open(\"weir.txt\");\n\nif (inputFile.is_open())\n{\n    int numberOfReadings;\n    float width;\n    float floodHeight;\n\n    // Read the values for number of readings, width and flood height\n    inputFile &gt;&gt; numberOfReadings;\n    inputFile &gt;&gt; width;\n    inputFile &gt;&gt; floodHeight;\n\n    // Use a loop to input the time, date and River height\n\n    for (int i = 0; i&lt; numberOfReadings; i++) {\n\n        string time;\n        string date;\n        float riverHeight;\n        float flowrate;\n\n        // Read the data values to produce\n\n        inputFile &gt;&gt; time;\n        inputFile &gt;&gt; date;\n        inputFile &gt;&gt; riverHeight;\n\n        // Check if the river overflows\n        if (riverHeight &gt; floodHeight) {\n            cout &lt;&lt; \"The river will flood\" &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; \"The river will not flood\" &lt;&lt; endl;\n        }\n\n        // Calculate the flow rate\n\n        flowrate = sqrt(9.81)*width*riverHeight*sqrt(riverHeight);\n\n\n        // Display all results\n\n        cout &lt;&lt; \"time : \" &lt;&lt; time &lt;&lt; endl;\n        cout &lt;&lt; \"date : \" &lt;&lt; date &lt;&lt; endl;\n        cout &lt;&lt; \"River height : \" &lt;&lt; riverHeight &lt;&lt; endl;\n\n        cout &lt;&lt; \"Flow rate : \" &lt;&lt; flowrate &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;\n    }\n\n    // Close the data file\n\n\n    inputFile.close();\n\n\n\n    // If data file does not open then produce an error message\n}\n\nelse {\n    cout &lt;&lt; \"Error, the data file was not opened\" &lt;&lt; endl;\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "parsing", "inheritance", "subclass", "tokenize"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420674605, "post_id": 27830726, "comment_id": 44067374, "body": "Show the class for <code>Number</code>, and a simple <code>main</code> program that demonstrates the use of the class."}, {"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 2, "creation_date": 1420676232, "post_id": 27830726, "comment_id": 44067863, "body": "Note that given your <code>tokens</code> vector&#39;s usage, you are probably suffering <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a> when inserting tokens in the vector. See <a href=\"http://stackoverflow.com/questions/9241680/list-of-polymorphic-objects\">here</a> for the usecase related to containers."}, {"owner": {"reputation": 23, "user_id": 3308030, "user_type": "registered", "profile_image": "https://graph.facebook.com/607653571/picture?type=large", "display_name": "chetlin", "link": "https://stackoverflow.com/users/3308030/chetlin"}, "edited": false, "score": 0, "creation_date": 1420677138, "post_id": 27830726, "comment_id": 44068110, "body": "I added the class and simple program."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1420678105, "post_id": 27830726, "comment_id": 44068381, "body": "All I can say is that I wouldn&#39;t do it like that. You don&#39;t actually need tokens for + and -. The actual characters will do for that in most parser systems."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3308030, "user_type": "registered", "profile_image": "https://graph.facebook.com/607653571/picture?type=large", "display_name": "chetlin", "link": "https://stackoverflow.com/users/3308030/chetlin"}, "edited": false, "score": 0, "creation_date": 1420676840, "post_id": 27830808, "comment_id": 44068034, "body": "Yeah, I thought about that.  With that, then there is no point for Tokens, since I started with strings, then turned them into Tokens, then I would be turning them back into strings.  All they would do is say &quot;here is the string and here is the kind of token it represents.&quot;  I guess that is cleaner than having to call the method that reads the string and determines what kind of thing it is all the time."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1420674945, "creation_date": 1420674945, "answer_id": 27830808, "question_id": 27830726, "link": "https://stackoverflow.com/questions/27830726/c-tokenizing-mathematical-expression-using-classes/27830808#27830808", "title": "C++ Tokenizing mathematical expression using classes", "body": "<p>I suggest you add a method that returns the Token's value as a string.  </p>\n\n<p>This will allow you to convert the value into a number.  </p>\n\n<p>Perhaps what you should be thinking about is:  </p>\n\n<ul>\n<li>What is the value of a Token used for?</li>\n<li>Do you need to tell the token to evaluate an given expression?</li>\n</ul>\n\n<p>One issue is that you may not want to process everything as a generic Token or there is limited processing you can perform on a generic token.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1420681246, "post_id": 27831543, "comment_id": 44069207, "body": "or <code>vector&lt;unique_ptr&lt;Token&gt;&gt;</code> and bypass most of the memory-management issues."}, {"owner": {"reputation": 23, "user_id": 3308030, "user_type": "registered", "profile_image": "https://graph.facebook.com/607653571/picture?type=large", "display_name": "chetlin", "link": "https://stackoverflow.com/users/3308030/chetlin"}, "edited": false, "score": 0, "creation_date": 1420703815, "post_id": 27831543, "comment_id": 44075497, "body": "All right, I&#39;ll try that.  If I use a <code>vector&lt;Token*&gt;</code> (called <code>tvec</code>) and then for a <code>Number</code> token I do <code>tvec.push_back(new Number(12.34))</code>, and then have an iterator <code>it</code> pointing to that element, there is a way to get the <code>value</code>?  Would I do <code>(*it)-&gt;value</code> or is it trickier?  Thanks!"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 3, "last_activity_date": 1420680289, "creation_date": 1420680289, "answer_id": 27831543, "question_id": 27830726, "link": "https://stackoverflow.com/questions/27830726/c-tokenizing-mathematical-expression-using-classes/27831543#27831543", "title": "C++ Tokenizing mathematical expression using classes", "body": "<p>The problem is that you're using a vector of Tokens (<code>vector&lt;Token&gt;</code>) so any time you try stick one of your derived classes into the vector, it creates a new Token object with values copied from the base part of your token class and the rest stripped away.  This is referred to as <a href=\"http://en.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow\">object slicing</a> and is a subtle problem with C++ that programmers who have experience with more dynamic OO languages run into.</p>\n\n<p>In C++, inheritance and object-orientation in general only work via pointers and references.  If you want to have a generic vector that can hold any subclass of <code>Token</code>, you need to use a <code>vector&lt;Token *&gt;</code>, with all the related memory-management issues.</p>\n"}], "owner": {"reputation": 23, "user_id": 3308030, "user_type": "registered", "profile_image": "https://graph.facebook.com/607653571/picture?type=large", "display_name": "chetlin", "link": "https://stackoverflow.com/users/3308030/chetlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1420680289, "creation_date": 1420674419, "last_edit_date": 1420677117, "question_id": 27830726, "link": "https://stackoverflow.com/questions/27830726/c-tokenizing-mathematical-expression-using-classes", "title": "C++ Tokenizing mathematical expression using classes", "body": "<p>I'm attempting to re-learn bits about C++ inheritance as well as write a program that evaluates simple mathematical expressions (as strings) from scratch for practice, but I'm running into a lot of problems.  My only prior experience with lexing like this is with OCaml (and Ocamllex/yacc) and it's quite a bit different there.</p>\n\n<p>Anyway, I created a simple Token class:</p>\n\n<pre><code>class Token{\n    public:\n        string type;\n        string characters;\n};\n</code></pre>\n\n<p>Where <code>type</code> is a string that tells the type of token (plus, minus, etc) and <code>characters</code> is the string that the token actually consists of.\nFrom this, I made the derived classes for each token.  Here is the one for +:</p>\n\n<pre><code>class Plus: public Token{\n    public:\n        Plus(){\n            type = \"plus\";\n            characters = \"+\";\n        }\n};\n</code></pre>\n\n<p><code>Minus</code>, <code>Times</code>, <code>DividedBy</code>, <code>LeftParenthesis</code>, <code>RightParenthesis</code>, and <code>Number</code> are all done the same way.  However, for <code>Number</code>, I wanted to add in a <code>double</code> that stores the value of the token, so it also includes the public variable <code>double value</code> and its constructor sets this value.  You can probably see where issues would come up here already, and I'll get to those in a bit.</p>\n\n<p>I have a function that reads in a string, splits it up into these substrings, and stores it as a string vector (So <code>\"3.2     +(  -1.83)\"</code> will return a vector with the strings <code>\"3.2\"</code>, <code>\"+\"</code>, <code>\"(\"</code>, <code>\"-1.83\"</code>, and <code>\")\"</code>).  I have another one that turns it all into Token objects and stores it as a Token vector (so it does stuff like <code>tokens.push_back(LeftParenthesis());</code>).</p>\n\n<p>Now I want to take this Token vector and do stuff with it.  (The goal is to use the shunting yard algorithm to put it into reverse Polish notation and then evaluate it.)  However, I'm having a lot of issues, mainly with the fact that I am using a Token vector, and every element of it is a derived type of Token.</p>\n\n<p>The biggest issue is that I can't access the <code>value</code> element of the <code>Number</code> type Tokens.  I've tried other things such as using virtual getter functions, and it still doesn't work right.  Another issue is that the only way I can tell what type of Token each thing is is by reading the <code>characters</code> element, which seems to make the whole subclass thing pointless.  </p>\n\n<p>Is it possible to continue down the method I started, or should I just abandon the whole Token class and its subclasses and just work with the strings?  It wouldn't be the worst, since I've been learning stuff about inheritance with all the errors I've been getting.  </p>\n\n<p>Edit:  In response to Thomas Matthews:\nI was playing around with virtual methods (which didn't work either), so here is the actual Token class and Number as well:</p>\n\n<pre><code>class Token{\npublic:\n    string type;\n    string characters;\n    virtual double getValue();\n};\n\nclass Number: public Token{\npublic:\n    double value;\n    Number(string chars){\n        type = \"number\";\n        characters = chars;\n        value = atof(chars.c_str());\n    }\n    virtual double getValue(){\n        return value;\n    }\n};\n</code></pre>\n\n<p>And here's the main method I'm playing with, which just takes a random string I made and attempts to print it back out, but by accessing the <code>value</code> element of any number when doing so:</p>\n\n<pre><code>int main(){\nvector&lt;Token&gt; tvec = tokenize(\"5 + 4 - 11 * (-3.2 + .19)\");\nfor(vector&lt;Token&gt;::iterator it = tvec.begin(), end = tvec.end(); it != end; ++it)\nif(it-&gt;type == \"number\")\n    cout &lt;&lt; it-&gt;getValue();  // doesn't work\nelse\n    cout &lt;&lt; it-&gt;characters;\ncout &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420673567, "post_id": 27830563, "comment_id": 44067081, "body": "Please search StackOverflow for &quot;c++ palindrome&quot; to find many examples on Palindrome."}, {"owner": {"reputation": 35, "user_id": 3746711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc14cdfc88487628b1487e7dc1d94a9d?s=128&d=identicon&r=PG&f=1", "display_name": "user3746711", "link": "https://stackoverflow.com/users/3746711/user3746711"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420673627, "post_id": 27830563, "comment_id": 44067100, "body": "phrase1 works and will display &quot;cat&quot;, but it will not display phrase2. Instead I will get a dialogue box saying the .exe program has stopped working."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420673706, "post_id": 27830563, "comment_id": 44067122, "body": "@ThomasMatthews there are two types of questions. One is &quot;how do I do X?&quot; and the second is &quot;What&#39;s wrong with my code specifically?&quot;. Your suggestion is good for the first, but this question is the second type."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 7, "creation_date": 1420673712, "post_id": 27830563, "comment_id": 44067124, "body": "You could also use a <i>debugger</i> to single step through your program and find out where the issue is.  Many professionals do this rather than posting their programs on StackOverflow."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1420674274, "post_id": 27830563, "comment_id": 44067282, "body": "<code>string phrase1; cin &gt;&gt; phrase1; copy(phrase1.rbegin(), phrase1.rend(), ostream_iterator&lt;char&gt;(cout));</code>..but obligatory side note: <code>using namespace std;</code> is bad-- you probably want <code>std::string...</code>, and so on instead."}], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 3, "last_activity_date": 1420673558, "creation_date": 1420673558, "answer_id": 27830598, "question_id": 27830563, "link": "https://stackoverflow.com/questions/27830563/palindrome-program-help-c/27830598#27830598", "title": "Palindrome program help c++", "body": "<p>You need to resize phrase2 to the right length first.</p>\n\n<pre><code>phrase2.resize(len);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 2, "last_activity_date": 1420673770, "creation_date": 1420673770, "answer_id": 27830624, "question_id": 27830563, "link": "https://stackoverflow.com/questions/27830563/palindrome-program-help-c/27830624#27830624", "title": "Palindrome program help c++", "body": "<p>When you write this:</p>\n\n<pre><code>for(int a=1;a&lt;=len;a++){\n    phrase2[len-a] = phrase1[a-1];\n}\n</code></pre>\n\n<p>You're trying to fill phrase2 with the reverse of phrase1. But you never allocated memory for phrase2 in the first place!</p>\n\n<p>Since this is a palindrome, you know that you want phrase2 to have the same size phrase1 has, so you can write <code>phrase2.resize(len);</code> beforehand.</p>\n"}], "owner": {"reputation": 35, "user_id": 3746711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc14cdfc88487628b1487e7dc1d94a9d?s=128&d=identicon&r=PG&f=1", "display_name": "user3746711", "link": "https://stackoverflow.com/users/3746711/user3746711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1420674942, "creation_date": 1420673367, "question_id": 27830563, "link": "https://stackoverflow.com/questions/27830563/palindrome-program-help-c", "title": "Palindrome program help c++", "body": "<p>I am having trouble flipping around the string in my palindrome program. What I want is to enter \"cat\" for example, and get out \"tac\", but when I run it, it will not display the reversed string, and the program stops working. Can anyone help me?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\nint main(){\nstring phrase1,phrase2;\nint len;\n\ncout&lt;&lt;\"Please enter a word or phrase: \";\ncin&gt;&gt;phrase1;\nlen = phrase1.length();\n\nfor(int a=1;a&lt;=len;a++){\n    phrase2[len-a] = phrase1[a-1];\n}\ncout&lt;&lt;endl&lt;&lt;phrase1&lt;&lt;endl&lt;&lt;phrase2&lt;&lt;endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "visual-studio-2012", "unhandled-exception"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420673960, "post_id": 27830546, "comment_id": 44067192, "body": "I suggest checking the <code>table</code> pointer for validity.  Also the <code>rows</code> and <code>columns</code> variable."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4307635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5b08dfdf8717a2f8808c534a63aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Kdizzile", "link": "https://stackoverflow.com/users/4307635/kdizzile"}, "edited": false, "score": 0, "creation_date": 1420674367, "post_id": 27830653, "comment_id": 44067314, "body": "While your definitly right, i updated that and it still does the same thing. Really i was just using that whole &#39;rows and columns&#39; thing because its a assignment requirment, but in the end its going to be a square so they can be used interchangably. I think something else is happening that im just missing for some reason."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 29, "user_id": 4307635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5b08dfdf8717a2f8808c534a63aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Kdizzile", "link": "https://stackoverflow.com/users/4307635/kdizzile"}, "edited": false, "score": 0, "creation_date": 1420674556, "post_id": 27830653, "comment_id": 44067363, "body": "@Kdizzile Updated with something else."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1462820418, "last_edit_date": 1462820418, "creation_date": 1420673968, "answer_id": 27830653, "question_id": 27830546, "link": "https://stackoverflow.com/questions/27830546/unhandled-exception-when-i-try-to-write-to-2d-array/27830653#27830653", "title": "Unhandled exception when i try to write to 2d array", "body": "<p>You are iterating incorrectly in the function that creates your array:</p>\n\n<pre><code>void create_table(mult_div_values ** table, int rows, int columns)\n{\n    table = new mult_div_values * [rows];\n    for (int i = 0; i &lt; columns; i++)\n    //                  ^^^^^^^\n    {\n        table[i] = new mult_div_values [columns];\n    }\n}\n</code></pre>\n\n<p>The loop should be over <code>rows</code>, not <code>columns</code>.</p>\n\n<p>Also, in set:</p>\n\n<pre><code>void set_mult_values(mult_div_values ** table, int rows, int columns)\n{\n    mult_div_values TableValues;\n    TableValues.div = 0;\n\n    for (int i = 0; i &lt; rows; i++)\n    {\n        TableValues.mult = i+1;\n        table[0][i] = TableValues;\n        //      ^^^\n    }\n\n    ..\n}\n</code></pre>\n\n<p>The <code>i</code> there corresponds to a column index, but you're iterating up to <code>rows</code>. So either that should be <code>table[i][0] = TableValues</code> or the loop should iterate over <code>columns</code></p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 4307635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5b08dfdf8717a2f8808c534a63aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Kdizzile", "link": "https://stackoverflow.com/users/4307635/kdizzile"}, "edited": false, "score": 0, "creation_date": 1420675877, "post_id": 27830839, "comment_id": 44067738, "body": "Im not sure if this is what you meant, but what you said led to the answer. I was initialzing table as 0, and that was causing problems. I changed it so create table returns the table instead and that fixed it. So thanks!"}, {"owner": {"reputation": 767, "user_id": 4356047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q1mrf.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4356047/ian"}, "reply_to_user": {"reputation": 29, "user_id": 4307635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5b08dfdf8717a2f8808c534a63aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Kdizzile", "link": "https://stackoverflow.com/users/4307635/kdizzile"}, "edited": false, "score": 0, "creation_date": 1420676342, "post_id": 27830839, "comment_id": 44067899, "body": "Sort-of. In the original code it doesn&#39;t matter what you initialize the table to; it will remain the same after the call to create_table(). In other words, it still won&#39;t point to anything valid because of pass-by-value semantics. In any case, changing create_table() so that it returns the table is certainly a valid fix :)"}], "tags": [], "owner": {"reputation": 767, "user_id": 4356047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q1mrf.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4356047/ian"}, "is_accepted": true, "score": 1, "last_activity_date": 1420675137, "creation_date": 1420675137, "answer_id": 27830839, "question_id": 27830546, "link": "https://stackoverflow.com/questions/27830546/unhandled-exception-when-i-try-to-write-to-2d-array/27830839#27830839", "title": "Unhandled exception when i try to write to 2d array", "body": "<p>There are likely more problems than just this, but the immediate issue is that in your create_table() method, you're passing the array pointer by value. As a result, the pointer to the 2d array that the client passes to create_table() remains NULL, and causes the crash when set_mult_values() is called. </p>\n\n<p>If I may editorialize briefly, I would highly recommend simply stepping through this kind of code using a debugger before asking the question. Doing so, you would have seen the obvious NULL pointer being passed to set_mult_values(). </p>\n\n<p>Secondarily, consider using STL types instead of raw arrays for this kind of thing. It will make your life approximately nine-hundred times easier.</p>\n"}], "owner": {"reputation": 29, "user_id": 4307635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5b08dfdf8717a2f8808c534a63aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Kdizzile", "link": "https://stackoverflow.com/users/4307635/kdizzile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 27830839, "answer_count": 2, "score": 1, "last_activity_date": 1462820418, "creation_date": 1420673306, "last_edit_date": 1455375660, "question_id": 27830546, "link": "https://stackoverflow.com/questions/27830546/unhandled-exception-when-i-try-to-write-to-2d-array", "title": "Unhandled exception when i try to write to 2d array", "body": "<p>So for some reason I keep getting a 'unhandled exception, would you like to break the code?' whenever i run this, like it thinks I'm going outside the array. Here's the whole code, and ill post the bit that it breaks at below:</p>\n\n<pre><code>Header file:\n\nstruct mult_div_values\n{\nint mult;\nfloat div;\n};\n\nvoid create_table(mult_div_values ** table, int rows, int columns)\n{\ntable = new mult_div_values * [rows];\nfor (int i = 0; i &lt; columns; i++)\n{\n    table[i] = new mult_div_values [columns];\n}\n}\n\nvoid set_mult_values(mult_div_values ** table, int rows, int columns)\n{\nmult_div_values TableValues;\nTableValues.div = 0;\nfor (int i = 0; i &lt; rows; i++)\n{\n    TableValues.mult = i+1;\n    table[0][i] = TableValues;\n}\n\nfor (int i = 1; i &lt; rows; i++)\n    for (int x = 0; x &lt; columns; x++)\n    {\n        if (x == 0)\n        {\n            TableValues.mult = i + 1;\n            table[i][x] = TableValues;\n        }\n        else\n        {\n            TableValues.mult = (i+1) * (x + 1);\n            table[i][x] = TableValues;\n        }\n    }\n};\n\nvoid set_div_values(mult_div_values ** table, int rows, int columns)\n{\nmult_div_values TableValues;\nfor (float i = 0; i &lt; rows; i++)\n{\n    TableValues.div = i+1;\n    table[0][static_cast&lt;int&gt;(i)] = TableValues;\n}\n\nfor (float i = 1; i &lt; rows; i++)\n    for (float x = 0; x &lt; columns; x++)\n    {\n        if (x == 0)\n        {\n            TableValues.div = i + 1;\n            table[static_cast&lt;int&gt;(i)][static_cast&lt;int&gt;(x)] = TableValues;\n        }\n        else\n        {\n            TableValues.div = (i+1) / (x + 1);\n            table[static_cast&lt;int&gt;(i)][static_cast&lt;int&gt;(x)] = TableValues;\n        }\n    }\n};\n</code></pre>\n\n<p>Source file: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"mult_div.h\"\n\nusing namespace::std;\n\nstruct mult_div_values;\n\nint main()\n{\nmult_div_values ** table = 0;\nint rows, columns, rowswanted, columnswanted;\ncout &lt;&lt; \"How many rows?\\n\";\ncin &gt;&gt; rows;\ncout &lt;&lt; \"How many columns?\\n\";\ncin &gt;&gt; columns;\ncout &lt;&lt; \"Which row do you want?\\n\";\ncin &gt;&gt; rowswanted;\ncout &lt;&lt; \"Which column?\\n\";\ncin &gt;&gt; columnswanted;\n\ncreate_table(table, rows, columns);\nset_mult_values(table, rows, columns);\nset_mult_values(table, rows, columns);\n\ncout &lt;&lt; \"Mult value: \" &lt;&lt; table[rowswanted][columnswanted].mult &lt;&lt; endl &lt;&lt; \"Div value: \" &lt;&lt; table[rowswanted][columnswanted].div;\n\nsystem(\"Pause\");\n}\n</code></pre>\n\n<p>And it breaks at:</p>\n\n<pre><code>void set_mult_values(mult_div_values ** table, int rows, int columns)\n{\nmult_div_values TableValues;\nTableValues.div = 0;\nfor (int i = 0; i &lt; rows; i++)\n{\n    TableValues.mult = i+1;\n    table[0][i] = TableValues; }\n</code></pre>\n\n<p>as soon as i hit that last line, it gives me a error message. Any ideas?</p>\n"}, {"tags": ["c++", "pointers", "dynamic", "stack", "heap"], "comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420673120, "post_id": 27830384, "comment_id": 44066927, "body": "If your MainComponent is really too big, you&#39;ll get a nice stack<b>overflow</b>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1420673656, "post_id": 27830384, "comment_id": 44067107, "body": "There is no reason for <code>MainComponent</code> to get really big just because it contains lots of things. If it allocates those things from the free store (heap) it can remain fairly small itself. And that goes for things it contains too. You only need to allocate large data arrays from the free-store (heap), not the class objects that manage them (<code>MainComponent, GameClass, WindowBits...</code>). Use <code>STL</code> containers and they will do that for you."}], "answers": [{"tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 2, "last_activity_date": 1420673124, "last_edit_date": 1420673124, "creation_date": 1420672745, "answer_id": 27830440, "question_id": 27830384, "link": "https://stackoverflow.com/questions/27830384/how-to-decide-what-goes-on-stack/27830440#27830440", "title": "How to decide what goes on stack?", "body": "<p>Depends on what 'big' means. <a href=\"http://www.cs.nyu.edu/exact/core/doc/stackOverflow.txt\" rel=\"nofollow\">This link</a> shows the default stack size limits for some OSes. You'll want to make sure that the size <code>MainComponent</code> allocates on the stack is well below any of these numbers.</p>\n\n<p>Further, if there are certain things being dynamically created, or certain arrays/assets that are too large, which fall under <code>MainComponent</code> or another struct that is below <code>MainComponent</code>, then you can always heap-allocate that struct/array/class while still keeping MainComponent itself on the stack.</p>\n\n<p>Conceptually, keeping <code>MainComponent</code> on the stack makes more sense as its lifecycle is being modeled exactly by its scope in the <code>main</code> function.</p>\n\n<p>To answer your more general question, <em>How to decide what goes on the stack?</em>, consider three aspects:</p>\n\n<ol>\n<li><strong>Ownership</strong>. Is the ownership of a particular data structure clear? Does it explicitly belong to a particular function (and its descendants), or a particular struct/class and can be modeled with RAII?</li>\n<li><strong>Lifecycle</strong>. Is the particular data structure expected to exist within a timeline that closely resembles a lifetime of the class that created it, or the function that created it? What is the scope?</li>\n<li><strong>Is the size known at compile-time?</strong>  This comes up when allocating arrays of a variable size. This is the case with many STL containers. In that case, the basic struct/class includes a few things on the stack and then maintains pointers to heap-allocated structures.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 0, "last_activity_date": 1420674010, "last_edit_date": 1420674010, "creation_date": 1420673199, "answer_id": 27830526, "question_id": 27830384, "link": "https://stackoverflow.com/questions/27830384/how-to-decide-what-goes-on-stack/27830526#27830526", "title": "How to decide what goes on stack?", "body": "<p>You said:</p>\n\n<blockquote>\n  <p>MainComponent class is expected to possibly get very big because of\n  included objects of GameClass</p>\n</blockquote>\n\n<p>object size is constant. for example: empty <code>std::string</code> has the same <code>sizeof</code> as very long <code>std::string</code>, it is the same for any object.</p>\n\n<p>the <code>sizeof(object)</code> is the only bytes it take on the stack. all the rest anyway goes to the heap.</p>\n\n<p>so if you reach to stack limits and got stack overflow exceptions, then you should try to move some objects to heap. or if it is a single object (like your <code>MainComponent</code> class appear to be), you can also use the <code>singleton</code> pattern, or just declare it as <code>static</code>, to remove it from the stack to other segments of memory.</p>\n"}], "owner": {"reputation": 647, "user_id": 4416869, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5dae94dce935b8162a51ef1fa3567061?s=128&d=identicon&r=PG&f=1", "display_name": "SeanRamey", "link": "https://stackoverflow.com/users/4416869/seanramey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 27830440, "answer_count": 2, "score": 0, "last_activity_date": 1420674010, "creation_date": 1420672405, "question_id": 27830384, "link": "https://stackoverflow.com/questions/27830384/how-to-decide-what-goes-on-stack", "title": "How to decide what goes on stack?", "body": "<p>Say I have a C++ class called MainComponent and it has a few classes inside of it: WindowClass, InputClass, GameClass. The main function is setup like so:</p>\n\n<pre><code>int main()\n{\n    MainComponent app;\n    app.start(); // Initializes the MainComponent class, opens window, starts game and all that.\n\n    return 0;\n}\n</code></pre>\n\n<p>The MainComponent class is expected to possibly get very big because of included objects of GameClass and such. Should MainComponent app be dynamically allocated with new? or should I allocate the GameClass objects with new inside the MainComponent class? or is it just fine to leave it on the stack as long as it runs fine or what? </p>\n"}, {"tags": ["c++", "arrays", "matlab", "matrix"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1420672382, "post_id": 27830373, "comment_id": 44066661, "body": "What does this have to do with function pointers?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1420672409, "post_id": 27830373, "comment_id": 44066672, "body": "Without overloading anything, you can simply do <code>A[1][1] = 5</code>. Or you could use one of many existing <code>Matrix</code> classes (or write your own) and define a <code>()</code> operator."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 1, "creation_date": 1420672491, "post_id": 27830373, "comment_id": 44066721, "body": "OP might still want an overloaded <code>operator()</code> to achieve the 1-based indexing like matlab."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420673256, "post_id": 27830373, "comment_id": 44066970, "body": "Please read the C++ FAQ on matrix operators: <a href=\"http://www.parashift.com/c++-faq/matrix-subscript-op.html\" rel=\"nofollow noreferrer\">parashift.com/c++-faq/matrix-subscript-op.html</a>"}, {"owner": {"reputation": 17884, "user_id": 2278029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fKGS.jpg?s=128&g=1", "display_name": "horchler", "link": "https://stackoverflow.com/users/2278029/horchler"}, "edited": false, "score": 0, "creation_date": 1420673275, "post_id": 27830373, "comment_id": 44066973, "body": "As C uses zero-based indexing, it would be <code>A[0][0]</code> of course. Please edit your question clarify precisely what you&#39;re asking about."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 4430865, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daaf1ed786c5e1cb3dcdd2de1c2a58a3?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Valente", "link": "https://stackoverflow.com/users/4430865/rodrigo-valente"}, "edited": false, "score": 0, "creation_date": 1420679989, "post_id": 27830662, "comment_id": 44068870, "body": "Thanks for the answer, I tried your sujecstion, but I cant compile the code I get the following error: &quot;lvalue required as left operand of assigment&quot; @edit I resolved the problem, tha was right, thank you :)"}], "tags": [], "owner": {"reputation": 2012, "user_id": 1178823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yddHz.png?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/1178823/anonymous"}, "is_accepted": true, "score": 2, "last_activity_date": 1420674873, "last_edit_date": 1420674873, "creation_date": 1420674011, "answer_id": 27830662, "question_id": 27830373, "link": "https://stackoverflow.com/questions/27830373/how-to-use-a-function-pointer-in-a-overloaded-operator/27830662#27830662", "title": "How to use a function pointer in a overloaded operator", "body": "<pre><code>template&lt;size_t I, size_t J&gt;\nclass M\n{\n    public:\n    M(double e00, ...)\n    {\n        // use arg_list :)\n    }\n    double&amp; operator () (int i, int j)\n    {\n        return m[i-1][j-1];\n    }\n    private:\n    double m[I][J];\n};\n\nM&lt;2,2&gt; A(1,2,3,4);\nA(1,1)=5.0;\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 4430865, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daaf1ed786c5e1cb3dcdd2de1c2a58a3?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Valente", "link": "https://stackoverflow.com/users/4430865/rodrigo-valente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 27830662, "answer_count": 1, "score": 0, "last_activity_date": 1420678954, "creation_date": 1420672352, "last_edit_date": 1420678954, "question_id": 27830373, "link": "https://stackoverflow.com/questions/27830373/how-to-use-a-function-pointer-in-a-overloaded-operator", "title": "How to use a function pointer in a overloaded operator", "body": "<p>I was trying achieve a Matlab way to acess matrixes elements. For example, if i have the following in MatLab:</p>\n\n<pre><code>&gt;&gt; A = [1 2; 3 4]\n\n A =\n\n 1     2\n 3     4\n\n&gt;&gt; A(1,1) = 5\n</code></pre>\n\n<p>Will generate this output:</p>\n\n<pre><code>A =\n\n 5     2\n 3     4\n</code></pre>\n\n<p>Is this possible to achieve with the operator () in c++? Thanks in advance.</p>\n\n<p>@edit</p>\n\n<p>Sorry guys, i think the resolve would be achieved by a function pointer.</p>\n\n<p>Ill try to be more plain. I have a class matrix, I want to change a respective value of the class using the operator(), passing the number respective to the row and to the column.</p>\n"}, {"tags": ["c++", "vector", "stl", "move-semantics", "c++14"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1420674341, "post_id": 27830323, "comment_id": 44067302, "body": "Think about it this way: If it still has the same capacity, then what was moved? How would move be different from copy?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1420676008, "post_id": 27830323, "comment_id": 44067782, "body": "Near duplicate, if not exactly so: <a href=\"http://stackoverflow.com/a/17735913/576911\">stackoverflow.com/a/17735913/576911</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1420672873, "post_id": 27830376, "comment_id": 44066847, "body": "Implementation of certain container may act on the way of swapping storages after destruction of the elements from left hand side container during move-assignment operation, isn&#39;t it?"}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1420673000, "post_id": 27830376, "comment_id": 44066889, "body": "I&#39;m not sure I understand. Are you trying to say that an implementation could put the elements of the moved-to container in the moved-from container ?"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1420673130, "post_id": 27830376, "comment_id": 44066932, "body": "Firstly elements from LHS container destructed, if exists. Then simply swapping of memory storages (and size, capacity and other members of <code>std::vector</code> class)."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1420673344, "post_id": 27830376, "comment_id": 44066997, "body": "Yes, that&#39;s possible. Although that wouldn&#39;t be such a good idea. Why wait instead of just freeing the unused memory now ? In practice the capacity does get zeroed like the question said : <a href=\"http://ideone.com/t5p4oq\" rel=\"nofollow noreferrer\">ideone.com/t5p4oq</a>"}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 1, "last_activity_date": 1420672692, "last_edit_date": 1420672692, "creation_date": 1420672358, "answer_id": 27830376, "question_id": 27830323, "link": "https://stackoverflow.com/questions/27830323/capacity-of-the-vector-from-which-data-was-moved/27830376#27830376", "title": "Capacity of the vector from which data was moved", "body": "<p>The state of the moved-from vector is unspecified but valid after the move, as you found out.</p>\n\n<p>This means that it could really be in any valid state, in particular you can't assume that its capacity will be 0. It will probably be zero, and that would make a lot of sense, but that's not at all guaranteed.</p>\n\n<p>But again, in practice if you don't care all that much about the standard, I suppose that you could rely on the capacity being 0. Due to the constraints on move operations, the vector move constructor pretty much has to steal memory from the moved-from one, leaving it empty. That's what will happen in almost all cases/implementations, but that's just not required.</p>\n\n<p>A particularly twisted implementation could decide to reserve some elements in the moved-from vector just to mess with you. That technically wouldn't break any requirement.</p>\n"}, {"tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 2, "last_activity_date": 1420679353, "last_edit_date": 1420679353, "creation_date": 1420678927, "answer_id": 27831380, "question_id": 27830323, "link": "https://stackoverflow.com/questions/27830323/capacity-of-the-vector-from-which-data-was-moved/27831380#27831380", "title": "Capacity of the vector from which data was moved", "body": "<p>If your question had been about move construction of a <code>vector</code>, the answer would be easy, the source <code>vector</code> is left empty after the move. This is because of the requirement in </p>\n\n<blockquote>\n  <p>Table 99 \u2014 Allocator-aware container requirements</p>\n  \n  <p>Expression:</p>\n\n<pre><code>  X(rv)\n  X u(rv)\n</code></pre>\n  \n  <p>Requires: move construction of <code>A</code> shall not exit via an exception.<br/></p>\n  \n  <p>post: <code>u</code> shall have the same elements as <code>rv</code> had before this construction; the value of <code>u.get_allocator()</code> shall be the same as the value of <code>rv.get_allocator()</code> before this construction.</p>\n  \n  <p>Complexity: constant</p>\n</blockquote>\n\n<p>(the <code>A</code> in the requirements clause is the allocator type)</p>\n\n<p>The constant complexity leaves no option but to steal resources from the source <code>vector</code>, which means for it to be in a <em>valid, but unspecified state</em> you'd need to leave it empty, and <strong><code>capacity()</code> will equal zero</strong>.</p>\n\n<hr>\n\n<p>The answer is considerably more complicated in case of a move assignment. The same Table 99 lists the requirement for move assignment as</p>\n\n<blockquote>\n  <p>Expression:</p>\n\n<pre><code>  a = rv\n</code></pre>\n  \n  <p>Return type:</p>\n\n<pre><code>  X&amp;\n</code></pre>\n  \n  <p>Requires: If <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_move_assignment::value</code> is\n  <code>false</code>, T is <code>MoveInsertable</code> into <code>X</code> and <code>MoveAssignable</code>. All existing elements of <code>a</code> are either move assigned to or destroyed.</p>\n  \n  <p>post: <code>a</code> shall be equal to the value that <code>rv</code> had before this assignment.</p>\n  \n  <p>Complexity: linear</p>\n</blockquote>\n\n<p>There are different cases to evaluate here. </p>\n\n<hr>\n\n<p>First, say <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_move_assignment::value == true</code>, then the allocator can also be move assigned. This is mentioned in <code>\u00a723.2.1/8</code></p>\n\n<blockquote>\n  <p><code>...</code> <strong>The allocator may be replaced only via assignment</strong> or <code>swap()</code>. <strong>Allocator replacement is performed by</strong> copy assignment, <strong>move assignment</strong>, or swapping of the allocator\n  only if <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_copy_assignment::value</code>,\n  <strong><code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_move_assignment::value</code></strong>, or <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_swap::value</code> <strong>is true</strong> within the implementation of the corresponding container operation.</p>\n</blockquote>\n\n<p>So the destination <code>vector</code> will destroy its elements, the allocator from the source is moved and the destination <code>vector</code> takes ownership of the memory buffer from the source. This will leave the source <code>vector</code> empty, and <strong><code>capacity()</code> will equal zero</strong>.</p>\n\n<hr>\n\n<p>Now let's consider the case where <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_move_assignment::value == false</code>. This means the allocator from the source cannot be move assigned to the destination <code>vector</code>. So you need to check the two allocators for equality before determining what to do.</p>\n\n<p>If <code>dest.get_allocator() == src.get_allocator()</code>, then the destination <code>vector</code> is free to take ownership of the memory buffer from the source because it can use its own allocator to deallocate the storage.</p>\n\n<blockquote>\n  <p>Table 28 \u2014 Allocator requirements</p>\n  \n  <p>Expression:</p>\n\n<pre><code>  a1 == a2\n</code></pre>\n  \n  <p>Return type:</p>\n\n<pre><code>  bool\n</code></pre>\n  \n  <p>returns <code>true</code> only if storage allocated from each can be deallocated via the other. <code>...</code></p>\n</blockquote>\n\n<p>The sequence of operations performed is the same as the first case, except the source allocator is not move assigned. This will leave the source <code>vector</code> empty, and <strong><code>capacity()</code> will equal zero</strong>.</p>\n\n<hr>\n\n<p>In the last case, if <code>allocator_traits&lt;allocator_type&gt;::propagate_on_container_move_assignment::value == false</code> and <code>dest.get_allocator() != src.get_allocator()</code>, then the source allocator cannot be moved, and the destination allocator is unable to deallocate the storage allocated by the source allocator, so it cannot steal the memory buffer from source.</p>\n\n<p>Each element from the source <code>vector</code> must be either <a href=\"http://en.cppreference.com/w/cpp/concept/MoveInsertable\" rel=\"nofollow\">move inserted</a> or <a href=\"http://en.cppreference.com/w/cpp/concept/MoveAssignable\" rel=\"nofollow\">move assigned</a> to the destination <code>vector</code>. Which operation gets done depends on the existing size and capacity of the destination <code>vector</code>.</p>\n\n<p>The source <code>vector</code> retains ownership of its memory buffer after the move assignment, and it is up to the implementation to decide whether to deallocate the buffer or not, and the <code>vector</code> will most likely have <strong><code>capacity() greater than 0</code></strong>.</p>\n\n<hr>\n\n<p>To ensure you do not run into undefined behavior when trying to resuse a <code>vector</code> that has been move assigned from, you should first call the <code>clear()</code> member function. This can be safely done since <code>vector::clear</code> has no pre-conditions, and will return the <code>vector</code> to a valid and specified state.</p>\n\n<p>Also, <code>vector::capacity</code> has no pre-conditions either, so you can always query the <code>capacity()</code> of a moved from <code>vector</code>.</p>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 2, "closed_date": 1531940513, "accepted_answer_id": 27831380, "answer_count": 2, "score": 2, "last_activity_date": 1420679353, "creation_date": 1420672110, "last_edit_date": 1420672463, "question_id": 27830323, "link": "https://stackoverflow.com/questions/27830323/capacity-of-the-vector-from-which-data-was-moved", "closed_reason": "Duplicate", "title": "Capacity of the vector from which data was moved", "body": "<p>Is it mandatory, that the capacity of the <code>std::vector</code> is zero, after moving data from it? Assume that the memory allocators of source and destination vectors are always matching.</p>\n\n<pre><code>std::vector&lt; int &gt; v{1, 2, 3};\nassert(0 &lt; v.capacity());\nstd::vector&lt; int &gt; w;\nw = std::move(v);\nassert(0 == v.capacity());\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/operator%3D\" rel=\"nofollow\">Here</a> said that move assignment operator leaves stealed RHS vector in a valid, but unspecified state. But nowhere pointed, that vector should perform additional memory allocations during move assignment operation. Another note is: vector have continuous memory region as underlying storage.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420741401, "post_id": 27832541, "comment_id": 44097685, "body": "Thanks for answering. but I keep getting the same error msg, &#39;ASSERT FAILURE Qvector::at &quot;Out of Index Range: &#39;  and I don&#39;t even know where the qvector is being used."}, {"owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "reply_to_user": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420741933, "post_id": 27832541, "comment_id": 44097984, "body": "@user3734823 Why didn&#39;t you put this error message in your question?  Also, which of the two solutions I outlined above did you try?"}, {"owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "reply_to_user": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420742094, "post_id": 27832541, "comment_id": 44098062, "body": "@user3734823 There was a minor mistake in my first solution -- I just changed it."}, {"owner": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420742791, "post_id": 27832541, "comment_id": 44098410, "body": "I am sorry for not putting the error msg, but I couldn&#39;t find it at first. Anyway, I tried both, and the application throws the same error msg. ASSERT failure in QVector&lt;T&gt;::at: &quot;index out of range&quot;"}, {"owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "reply_to_user": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420743145, "post_id": 27832541, "comment_id": 44098603, "body": "@user3734823 Can you use a debugger (or even print statements) to determine which line of code is triggering the error message?"}, {"owner": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "edited": false, "score": 0, "creation_date": 1420748292, "post_id": 27832541, "comment_id": 44101417, "body": "Problem solved! It was because ui-&gt;listwidget-&gt;currentrow was -1. By using setcurrent conditioinally, ItemDoubleClicked recognize automatically the opened model is the current one."}], "tags": [], "owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "is_accepted": false, "score": 1, "last_activity_date": 1420742041, "last_edit_date": 1420742041, "creation_date": 1420688444, "answer_id": 27832541, "question_id": 27830265, "link": "https://stackoverflow.com/questions/27830265/combining-two-functions-into-one/27832541#27832541", "title": "Combining Two functions into one", "body": "<blockquote>\n  <p>I guess it's because the selected file is not added yet on the listwidget and in the same function the double clicked function tries to load it.</p>\n</blockquote>\n\n<p>No, it's because <code>QListWidget::currentItem()</code> retrieves the item in the list widget with focus.  Merely adding items to the list widget does not give any item focus, so <code>QListWidget::currentItem()</code> returns a null pointer.</p>\n\n<p>You have a couple of options to fix this.  You can call the <code>on_listWidget_itemDoubleClicked()</code> function with the last item in the list widget:</p>\n\n<pre><code>QListWidgetItem* item = ui-&gt;listWidget-&gt;item(ui-&gt;listWidget-&gt;count()-1);\nthis-&gt;on_listWidget_itemDoubleClicked(item);\n</code></pre>\n\n<p>IMHO, this is a bit messy.  Why not extract a function from <code>on_listWidget_itemDoubleClicked()</code> that takes a file name parameter?  Then, just call the function from both <code>on_listWidget_itemDoubleClicked()</code> and <code>on_actionOpen_File_triggered()</code>:</p>\n\n<pre><code>void MainWindow::on_listWidget_itemDoubleClicked(QListWidgetItem* item)\n{\n    showModel(item-&gt;text());\n}\n\nvoid MainWindow::on_actionOpen_File_triggered()\n{\n    QFileDialog diag(this);\n    // Code for file dialog goes here.\n    QStringList fileNames;\n\n    fileNames = diag.getOpenFileNames(this, \"Open Model Files\", \"\",\n                                      \"STL Files (*.stl)\");\n    ui-&gt;listWidget-&gt;addItems(fileNames);\n    showModel(fileNames.last());\n}\n\nvoid MainWindow::showModel(const QString&amp; fileName)\n{\n    // Code to show model goes here.\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 3734823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af8323d33c6760152a08ef84625045d5?s=128&d=identicon&r=PG&f=1", "display_name": "user3734823", "link": "https://stackoverflow.com/users/3734823/user3734823"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420742041, "creation_date": 1420671833, "last_edit_date": 1420727401, "question_id": 27830265, "link": "https://stackoverflow.com/questions/27830265/combining-two-functions-into-one", "title": "Combining Two functions into one", "body": "<p>In my application, when the \"open file\" menu is clicked and a file is selected, the selected item(3D object file) is added on the <code>listwidget</code>. And if the item is double-clicked on the list, the item is displayed on the screen next to the <code>listwidget</code>. However, to simplify user interface, I want the item to be added on the list and displayed on the screen at the same time without double-click. In a nutshell, I'd like to combine the two functions, <code>void MainWindow::on_actionOpen_Model_triggered()</code> and  <code>MainWindow::on_listWidget_itemDoubleClicked(QListWidgetItem *item)</code> into one. </p>\n\n<pre><code>void MainWindow::on_actionOpen_File_triggered()\n{\nQFileDialog diag(this);\ndiag.setNameFilter(tr(\"STL files(*.stl)\"));\ndiag.setFileMode(QFileDialog::ExistingFiles);\ndiag.setViewMode(QFileDialog::Detail);\nQStringList fileNames;\n\nfileNames = diag.getOpenFileNames(this, \"Open Model Files\", \"\", \"STL Files (*.stl)\");\n//qDebug()&lt;&lt;QFileInfo(fileNames).absoluteDir();\nqDebug()&lt;&lt;fileNames;\nui-&gt;listWidget-&gt;addItems(fileNames);}\n</code></pre>\n\n<p>I tried to add the <code>itemDoubleClicked</code> function at the end of the open file function like this.</p>\n\n<pre><code>this-&gt;on_listWidget_itemDoubleClicked(ui-&gt;listWidget-&gt;currentItem());\n</code></pre>\n\n<p>However, whenever I open a file, the application stops running. I guess it's because the selected file is not added yet on the <code>listwidget</code> and in the same function the double clicked function tries to load it. Since the double click function takes <code>QListWidgetItem *item</code> as its argument. Combining those two seems not an easy task to me. Does anyone have an idea? It'd be appreciated. </p>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 3, "creation_date": 1420671837, "post_id": 27830229, "comment_id": 44066450, "body": "This question is not well suited for our Q&amp;A format on stack overflow, but the short is answer is that apps get written in all sorts of languages, including c++ and java, as well as many more. They all have different approaches to building a GUI-driven application."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420671872, "post_id": 27830229, "comment_id": 44066464, "body": "There&#39;s no absolutely better language. Both Java and C++ are good for creating desktop apps. They both have many libraries, large communities, and plenty of online resources to learn more."}, {"owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "edited": false, "score": 2, "creation_date": 1420672577, "post_id": 27830229, "comment_id": 44066753, "body": "For Java, use the Swing framework and libraries to create desktop GUI applications that can be run on MacOS, Windows, and Linux without modification to your code. You can also port your GUI application to Android because it has a similar GUI library. If you want to use C++, there are cross-OS libraries such as GTK+, Qt, and wxWidgets. If you are targeting a specific operating system (e.g. you want to write only for Windows), then use use an OS-specific language. On Windows, use C#. On MacOS, use Objective-C (or Swift, which was introduced recently)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1420673503, "post_id": 27830229, "comment_id": 44067056, "body": "There is a possibility to use both C++ and Java for programming desktop applications.  Write some libraries in C++ and call them from Java."}], "answers": [{"comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1420672474, "post_id": 27830291, "comment_id": 44066713, "body": "C++ is fairly good for platform independence. There are also good libraries (such as qt) for GUI development. There are cases in which java is indeed the preferable choice, I&#39;m not denying that."}, {"owner": {"reputation": 523, "user_id": 3512949, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4fc59f6dacd014ebd5d514d9425f5991?s=128&d=identicon&r=PG&f=1", "display_name": "blipman17", "link": "https://stackoverflow.com/users/3512949/blipman17"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1420676213, "post_id": 27830291, "comment_id": 44067855, "body": "didn&#39;t know about that one. I always learned to go with java over C++ if you wanted cross platform compatibility"}, {"owner": {"reputation": 820, "user_id": 3734880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbxRY.png?s=128&g=1", "display_name": "orfdorf", "link": "https://stackoverflow.com/users/3734880/orfdorf"}, "edited": false, "score": 0, "creation_date": 1420676991, "post_id": 27830291, "comment_id": 44068069, "body": "C++ is not a platform-dependent language."}], "tags": [], "owner": {"reputation": 523, "user_id": 3512949, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4fc59f6dacd014ebd5d514d9425f5991?s=128&d=identicon&r=PG&f=1", "display_name": "blipman17", "link": "https://stackoverflow.com/users/3512949/blipman17"}, "is_accepted": true, "score": -3, "last_activity_date": 1420671947, "creation_date": 1420671947, "answer_id": 27830291, "question_id": 27830229, "link": "https://stackoverflow.com/questions/27830229/how-do-i-go-about-programming-gui-desktop-apps-with-java-or-c/27830291#27830291", "title": "How do i go about programming GUI desktop apps with Java or C++?", "body": "<p>For java, you use a WYSIWYG tool for UI's. I know netbeans has one. for C++, don't ask me.</p>\n\n<p>If you look for compatibility accross platforms choose java above C++, because java offers it and C++ doesn't. (I'm not saying it's the best)</p>\n"}], "owner": {"reputation": 11, "user_id": 4430820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmXkB.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/4430820/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "closed_date": 1420671979, "accepted_answer_id": 27830291, "answer_count": 1, "score": -1, "last_activity_date": 1420671947, "creation_date": 1420671675, "question_id": 27830229, "link": "https://stackoverflow.com/questions/27830229/how-do-i-go-about-programming-gui-desktop-apps-with-java-or-c", "closed_reason": "Needs more focus", "title": "How do i go about programming GUI desktop apps with Java or C++?", "body": "<p>this is my first post here. I'm new here and i'm also kindda new to programming.\nSo i learned a little bit of c to get a grounding on the concept of programming then jumped to c++ for a bit and now i seem to be understanding it pretty good and doing Java now.\nI'm confused on what languuage is best for creating desktop apps(Especially for mordern programming concepts)?\nHow do i start projects like music player program, picture viewer and stuff?\nAnd i'm from nigeria, there's not much of a good programming environment even for computer science majors in college, it mostly depends on the students. So please some friendly advice for a newbie programmer! </p>\n"}, {"tags": ["c++", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1420670607, "post_id": 27829996, "comment_id": 44065959, "body": "But when I click the File-&gt;Open it already opens the dialog, so this should already be implemented somewhere?"}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "reply_to_user": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 1, "creation_date": 1420670798, "post_id": 27829996, "comment_id": 44066035, "body": "The dialog is opened by CWinAppEx::OnFileOpen(), which is the default handler for the above message."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1420670865, "post_id": 27829996, "comment_id": 44066061, "body": "allright! and so, my callback must call the open dialog by itself right?"}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "reply_to_user": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 1, "creation_date": 1420671006, "post_id": 27829996, "comment_id": 44066123, "body": "Whatever. You can call CWinAppEx::OnFileOpen() if you like."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1420709980, "post_id": 27829996, "comment_id": 44078237, "body": "Ok now I understand what was going on. It creates a callback with CWinAppEx::OnFileOpen() by default. I had to remove that callback first. (maybe there was a better way of doing this, taking advantage of some return code from the default ` CWinAppEx::OnFileOpen()` but whatever)"}], "tags": [], "owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "is_accepted": true, "score": 1, "last_activity_date": 1420670540, "creation_date": 1420670540, "answer_id": 27829996, "question_id": 27829926, "link": "https://stackoverflow.com/questions/27829926/mfc-edit-file-open-action/27829996#27829996", "title": "MFC - edit File-Open action", "body": "<p>If you don't already have one add a message handler in your app class, like this in the message map:</p>\n\n<pre><code>ON_COMMAND(ID_FILE_OPEN, OnMyFileOpen)\n\nvoid CXXApp::OnMyFileOpen()\n{\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 27829996, "answer_count": 1, "score": 1, "last_activity_date": 1420670540, "creation_date": 1420670233, "question_id": 27829926, "link": "https://stackoverflow.com/questions/27829926/mfc-edit-file-open-action", "title": "MFC - edit File-Open action", "body": "<p>I created a MFC application using the MFC app wizard, with the SDI template. Currently, everything is unchanged. So all my classes are the ones generated by the wizard, straight-forward. </p>\n\n<p>Now I want to edit what the File->Open... menu does. \nWhere do I edit this?</p>\n"}, {"tags": ["c++", "qt", "qimage"], "comments": [{"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1420670488, "post_id": 27829830, "comment_id": 44065898, "body": "That depends on the format of the QVideoFrame. QImage can only accept <a href=\"http://qt-project.org/doc/qt-4.8/qimage.html#image-formats\" rel=\"nofollow noreferrer\">a couple of RGB-based formats</a>. There are various libraries that can convert between various YUV and RGB formats. But if you can I&#39;d recommend reading your video frames with OpenCV directly."}, {"owner": {"reputation": 1221, "user_id": 724863, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6cdf3dbade5a11ef5647d061ba63af20?s=128&d=identicon&r=PG", "display_name": "aviit", "link": "https://stackoverflow.com/users/724863/aviit"}, "edited": false, "score": 0, "creation_date": 1449202123, "post_id": 27829830, "comment_id": 55914515, "body": "Did you resolve this?"}], "answers": [{"comments": [{"owner": {"reputation": 4588, "user_id": 853665, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/89528a6bdc5f0e9af429605351151203?s=128&d=identicon&r=PG", "display_name": "Pete", "link": "https://stackoverflow.com/users/853665/pete"}, "edited": false, "score": 0, "creation_date": 1420671127, "post_id": 27830041, "comment_id": 44066169, "body": "though the video is likely in YUV format (imageFormatFromPixelFormat will fail).  Not sure if Qt has yuv conversion built in.. alternatively could use libyuv."}, {"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "edited": false, "score": 1, "creation_date": 1434966225, "post_id": 27830041, "comment_id": 49984060, "body": "I think Qt relies on underlying mediaframework for conversions. On Linux that is gstreamer which supports a lot of conversions. As a supporting fact, in custom implementations of QAbstractVideoSurface you are forced to implement pure virtual supportedPixelFormats, and when I specified BGR24 as the only format that is the format I received."}, {"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "edited": false, "score": 2, "creation_date": 1434966389, "post_id": 27830041, "comment_id": 49984165, "body": "Please also read requirements here: <a href=\"http://doc.qt.io/qt-5/qvideoframe.html#details\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qvideoframe.html#details</a> for QVideoFrame to call map() before calling bits()"}, {"owner": {"reputation": 1221, "user_id": 724863, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6cdf3dbade5a11ef5647d061ba63af20?s=128&d=identicon&r=PG", "display_name": "aviit", "link": "https://stackoverflow.com/users/724863/aviit"}, "edited": false, "score": 0, "creation_date": 1449202256, "post_id": 27830041, "comment_id": 55914554, "body": "I tried, then img.save(&quot;filename.png&quot;), but there are not output."}], "tags": [], "owner": {"reputation": 1774, "user_id": 4248222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fb9c73f19280d3197c915fcc466323?s=128&d=identicon&r=PG&f=1", "display_name": "lared", "link": "https://stackoverflow.com/users/4248222/lared"}, "is_accepted": false, "score": 12, "last_activity_date": 1420670753, "creation_date": 1420670753, "answer_id": 27830041, "question_id": 27829830, "link": "https://stackoverflow.com/questions/27829830/convert-qvideoframe-to-qimage/27830041#27830041", "title": "convert QVideoFrame to QImage", "body": "<p>You can use QImage's constructor:</p>\n\n<pre><code> QImage img( currentFrame.bits(),\n             currentFrame.width(),\n             currentFrame.height(),\n             currentFrame.bytesPerLine(),\n             imageFormat);\n</code></pre>\n\n<p>Where you can get <code>imageFormat</code> from <code>pixelFormat</code> of the <code>QVideoFrame</code>:</p>\n\n<pre><code> QImage::Format imageFormat = QVideoFrame::imageFormatFromPixelFormat(currentFrame.pixelFormat());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 592382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c68a215c3802d5a506493366fcd6b07a?s=128&d=identicon&r=PG", "display_name": "Rudolf Cardinal", "link": "https://stackoverflow.com/users/592382/rudolf-cardinal"}, "is_accepted": false, "score": 7, "last_activity_date": 1473463611, "creation_date": 1473463611, "answer_id": 39420988, "question_id": 27829830, "link": "https://stackoverflow.com/questions/27829830/convert-qvideoframe-to-qimage/39420988#39420988", "title": "convert QVideoFrame to QImage", "body": "<p>For QCamera output, that method doesn't always work. In particular, QVideoFrame::imageFormatFromPixelFormat() returns QImage::Format_Invalid when given QVideoFrame::Format_Jpeg, which is what's coming out of my QCamera. But this works:</p>\n\n<pre><code>QImage Camera::imageFromVideoFrame(const QVideoFrame&amp; buffer) const\n{\n    QImage img;\n    QVideoFrame frame(buffer);  // make a copy we can call map (non-const) on\n    frame.map(QAbstractVideoBuffer::ReadOnly);\n    QImage::Format imageFormat = QVideoFrame::imageFormatFromPixelFormat(\n                frame.pixelFormat());\n    // BUT the frame.pixelFormat() is QVideoFrame::Format_Jpeg, and this is\n    // mapped to QImage::Format_Invalid by\n    // QVideoFrame::imageFormatFromPixelFormat\n    if (imageFormat != QImage::Format_Invalid) {\n        img = QImage(frame.bits(),\n                     frame.width(),\n                     frame.height(),\n                     // frame.bytesPerLine(),\n                     imageFormat);\n    } else {\n        // e.g. JPEG\n        int nbytes = frame.mappedBytes();\n        img = QImage::fromData(frame.bits(), nbytes);\n    }\n    frame.unmap();\n    return img;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14988, "user_id": 881441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ktk8b.jpg?s=128&g=1", "display_name": "Stephen Quan", "link": "https://stackoverflow.com/users/881441/stephen-quan"}, "is_accepted": false, "score": 3, "last_activity_date": 1592287626, "last_edit_date": 1592287626, "creation_date": 1576900213, "answer_id": 59433334, "question_id": 27829830, "link": "https://stackoverflow.com/questions/27829830/convert-qvideoframe-to-qimage/59433334#59433334", "title": "convert QVideoFrame to QImage", "body": "<p>Qt has a private function <code>qt_imageFromVideoFrame</code> for converting <code>QVideoFrame</code> to <code>QImage</code>. If you want to use it, you'll need to:</p>\n\n<ol>\n<li>Add <code>QT += multimedia multimedia-private</code> to your <code>.pro</code> file</li>\n<li>Add <code>#include \"private/qvideoframe_p.h\"</code> to your <code>.cpp</code> file</li>\n<li><p>Then you can use <code>qt_imageFromVideoFrame</code> with the following signature:</p>\n\n<p>QImage qt_imageFromVideoFrame( const QVideoFrame&amp; f );</p></li>\n</ol>\n\n<p>Be aware of the warning in the header:</p>\n\n<pre><code>//\n//  W A R N I N G\n//  -------------\n//\n// This file is not part of the Qt API.  It exists purely as an\n// implementation detail.  This header file may change from version to\n// version without notice, or even be removed.\n//\n// We mean it.\n//\n</code></pre>\n\n<p>The implementation uses <code>QVideoFrame::map()</code> and does low-level manipulation with the bits. The converters handle a variety of conditions including YUV.</p>\n\n<p>The <code>qt_imageFromVideoFrame</code> works on almost all platforms.\ni.e. Windows, macOS, Linux and iOS.\nThe only platform it doesn't work reliably well is Android.\nThere, you'll need to use OpenGL calls to extract the VideoFrame. Also, on Android, you need to call <code>QImage:rgbSwapped()</code> at the end because QImage stores images as ARGB whereas OpenGL retrieves them as ABGR.</p>\n\n<pre><code>QImage QVideoFrameToQImage( const QVideoFrame&amp; videoFrame )\n{\n    if ( videoFrame.handleType() == QAbstractVideoBuffer::NoHandle )\n    {\n        QImage image = qt_imageFromVideoFrame( videoFrame );\n        if ( image.isNull() ) return QImage();\n        if ( image.format() != QImage::Format_ARGB32 ) return image.convertToFormat( QImage::Format_ARGB32 );\n        return image;\n    }\n    if ( videoFrame.handleType() == QAbstractVideoBuffer::GLTextureHandle )\n    {\n        QImage image( videoFrame.width(), videoFrame.height(), QImage::Format_ARGB32 );\n        GLuint textureId = static_cast&lt;GLuint&gt;( videoFrame.handle().toInt() );\n        QOpenGLContext* ctx = QOpenGLContext::currentContext();\n        QOpenGLFunctions* f = ctx-&gt;functions();\n        GLuint fbo;\n        f-&gt;glGenFramebuffers( 1, &amp;fbo );\n        GLint prevFbo;\n        f-&gt;glGetIntegerv( GL_FRAMEBUFFER_BINDING, &amp;prevFbo );\n        f-&gt;glBindFramebuffer( GL_FRAMEBUFFER, fbo );\n        f-&gt;glFramebufferTexture2D( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,  GL_TEXTURE_2D, textureId, 0 );\n        f-&gt;glReadPixels( 0, 0,  videoFrame.width(),  videoFrame.height(), GL_RGBA, GL_UNSIGNED_BYTE, image.bits() );\n        f-&gt;glBindFramebuffer( GL_FRAMEBUFFER, static_cast&lt;GLuint&gt;( prevFbo ) );\n        return image.rgbSwapped();\n    }\n    return QImage();\n}\n</code></pre>\n\n<p>I have a complete working app on GitHub that includes an implementation of the above function:</p>\n\n<p><a href=\"https://github.com/stephenquan/MyVideoFilterApp/blob/master/QVideoFrameToQImage.cpp\" rel=\"nofollow noreferrer\">https://github.com/stephenquan/MyVideoFilterApp/blob/master/QVideoFrameToQImage.cpp</a></p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 7031882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5d3711034edb79543cfffbd6c955c8?s=128&d=identicon&r=PG&f=1", "display_name": "mw2785", "link": "https://stackoverflow.com/users/7031882/mw2785"}, "is_accepted": false, "score": 2, "last_activity_date": 1597353336, "creation_date": 1597353336, "answer_id": 63403295, "question_id": 27829830, "link": "https://stackoverflow.com/questions/27829830/convert-qvideoframe-to-qimage/63403295#63403295", "title": "convert QVideoFrame to QImage", "body": "<p>For anyone ending up here after finding that the qt private function &quot;qt_imageFromVideoFrame&quot; no longer exists in Qt5.15.0, you can now use the newly implemented method QImage QVideoFrame::image().</p>\n<pre><code>QImage img = frame.image();\n</code></pre>\n<p>I've tested this on Ubuntu and it works.</p>\n"}], "owner": {"reputation": 2396, "user_id": 2586447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/567d7024898f875d97ed260321e8568a?s=128&d=identicon&r=PG&f=1", "display_name": "uchar", "link": "https://stackoverflow.com/users/2586447/uchar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10134, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1597353336, "creation_date": 1420669835, "question_id": 27829830, "link": "https://stackoverflow.com/questions/27829830/convert-qvideoframe-to-qimage", "title": "convert QVideoFrame to QImage", "body": "<p>I want to get every frames from a <code>QMediaPlayer</code> and convert it to <code>QImage</code> (or <code>cv::Mat</code>)</p>\n\n<p>so I used   <code>videoFrameProbed</code> signal from <code>QVideoProbe</code>:</p>\n\n<pre><code>connect(&amp;video_probe_, &amp;QVideoProbe::videoFrameProbed, \n         [this](const QVideoFrame&amp; currentFrame){\n   //QImage img = ??\n}\n</code></pre>\n\n<p>But I didn't find any way for getting <code>QImage</code> from <code>QVideoFrame</code>!</p>\n\n<p>How can I convert <code>QVideoFrame</code> to <code>QImage</code> ?!</p>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "std"], "comments": [{"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 1, "creation_date": 1420669764, "post_id": 27829806, "comment_id": 44065577, "body": "No, it is not thread-safe."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420669841, "post_id": 27829806, "comment_id": 44065609, "body": "No, you need to sync access. The map is a shared resource, each call from different threads alters its state."}, {"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1420669893, "post_id": 27829806, "comment_id": 44065633, "body": "Do you have a link to the standard stating that? This answer: <a href=\"http://stackoverflow.com/a/15067564/649140\">stackoverflow.com/a/15067564/649140</a> mentions that &quot;implementations are required to avoid data races when the contents of the contained object in different elements in the same sequence, excepting vector&lt;bool&gt;&quot; -- does this not apply here?"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1420670254, "post_id": 27829806, "comment_id": 44065803, "body": "@SamKellett: That&#39;s different. What you&#39;re modifying concurrently here (by inserting new key-value pairs) is the data structure itself, not the individual elements contained in it :)"}], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1420669945, "post_id": 27829837, "comment_id": 44065660, "body": "Ah ok, so would something like: <code>std::vector&lt;std::vector&lt;message&gt;&gt;</code> where each thread id is mapped 1-1 to an index in the outer vector be a better idea?"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1420670028, "post_id": 27829837, "comment_id": 44065697, "body": "You will still need to make sure that each thread ID exists in the outer vector &#39;a priori&#39;. Multiple insertions in a vector are also not thread safe as they can lead to a resizing of the underlying array."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1420670101, "post_id": 27829837, "comment_id": 44065727, "body": "@DietmarK&#252;hl: my statement was it is &quot;not thread safe for multiple simultaneous writers&quot;. I think that&#39;s fairly accurate, right?"}, {"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1420670105, "post_id": 27829837, "comment_id": 44065728, "body": "@EyasSH, ok that can be done on thread-creation. So they&#39;d be allowed to modify their own inner vector&#39;s concurrently?"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 1, "creation_date": 1420670188, "post_id": 27829837, "comment_id": 44065769, "body": "Separate vectors can be modified concurrently, yes. That said, you need to make sure that these vectors are inserted in the outer vector sequentially and linearly. If &quot;on thread creation&quot; means in the parent (spawning) thread, then that might be fine."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 1, "creation_date": 1420670277, "post_id": 27829837, "comment_id": 44065813, "body": "@SamKellett: actually, even that might not be advisable, unless all threads are created before any thread starts running, since any insertion might move the vectors contained in the outer vector. If you know the maximum number of threads you have, just have an array of vectors, or array of pointers to vectors-- not resizable, and perfectly accessible in parallel."}, {"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 1, "creation_date": 1420670459, "post_id": 27829837, "comment_id": 44065883, "body": "I know how many threads, but at runtime not compile time so will need to use a vector. But can guarantee that the outer vector is populated and &#39;frozen&#39; before any of the inner vectors will ever be used."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1420670562, "post_id": 27829837, "comment_id": 44065936, "body": "If you can guarantee that-- i.e. only use <code>const</code> methods of the outer vector at any given point in time after creation, and having creation not overlap at all with thread access, then you should be all set."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1420670625, "post_id": 27829837, "comment_id": 44065964, "body": "That said, heap allocated arrays can also have runtime constant (and compile-time unknown) sizes :)"}], "tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 4, "last_activity_date": 1420670751, "last_edit_date": 1420670751, "creation_date": 1420669876, "answer_id": 27829837, "question_id": 27829806, "link": "https://stackoverflow.com/questions/27829806/can-different-threads-insert-into-a-map-if-they-always-use-different-keys/27829837#27829837", "title": "Can different threads insert into a map if they always use different keys?", "body": "<p><code>std::map</code> is not thread safe for multiple simultaneous writers.</p>\n\n<p>One of the many reasons why STL maps are not thread safe is that the underlying implementation of an STL map is an AVL tree that needs to be rebalanced every once in a while after a number of insertions. Rebalancing the map affects multiple nodes and is definitely not thread safe.</p>\n\n<p>Refer to the excellent <a href=\"http://www.drdobbs.com/lock-free-data-structures/184401865\" rel=\"nofollow\">Dr. Dobb's article on lock-free data structures</a> if any of this sounds interesting to you.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1420670430, "last_edit_date": 1420670430, "creation_date": 1420669977, "answer_id": 27829863, "question_id": 27829806, "link": "https://stackoverflow.com/questions/27829806/can-different-threads-insert-into-a-map-if-they-always-use-different-keys/27829863#27829863", "title": "Can different threads insert into a map if they always use different keys?", "body": "<p>The general rule for classes in the standard C++ library is this: if you call a non-<code>const</code> method on an object (with the exception of some methods like <code>std::vector&lt;T&gt;::operator[]()</code>) you cannot have any other thread accessing this object in any way concurrently. If you need to use the operations you need to make synchronize the accesses between the different threads somehow. The relevant clauses in the standard are 17.6.4.10 [res.on.objects] paragraph 1:</p>\n\n<blockquote>\n  <p>The behavior of a program is undefined if calls to standard library functions from different threads may\n  introduce a data race. The conditions under which this may occur are specified in 17.6.5.9.</p>\n</blockquote>\n\n<p>... and 17.6.5.9 [res.on.data.races] which describes that the standard C++ library isn't allowed to do mutate objects except when a non-<code>const</code> member function is called on them.</p>\n\n<p>Since inserting an object into a <code>std::map&lt;...&gt;</code> is clearly a non-<code>const</code> operations, you cannot do it concurrently from multiple threads without synchronization.</p>\n"}], "owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2508, "favorite_count": 2, "accepted_answer_id": 27829837, "answer_count": 2, "score": 2, "last_activity_date": 1420670751, "creation_date": 1420669714, "question_id": 27829806, "link": "https://stackoverflow.com/questions/27829806/can-different-threads-insert-into-a-map-if-they-always-use-different-keys", "title": "Can different threads insert into a map if they always use different keys?", "body": "<p>I'm trying to design a message queue for an object. There is a set of X threads that can all send message (to be processed later) to this object. If I have a <code>std::map&lt;thread_id_t, message&gt;</code>, is this thread safe, assuming thread one only adds messages with a key of 1, thread 2 to key 2, etc..?</p>\n"}, {"tags": ["c++", "c", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420669766, "post_id": 27829750, "comment_id": 44065580, "body": "It starts at 3604 for me, rather than 3600.  Did you make a typo?"}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "reply_to_user": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420670053, "post_id": 27829750, "comment_id": 44065708, "body": "@tmyklebu That value (<code>3600</code>) does not refer to the very first finite difference between consecutive partial summations, but to (about) the <code>26000</code>th difference."}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420670134, "post_id": 27829750, "comment_id": 44065736, "body": "@chux That is indeed a typo. Fixed."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1420671683, "post_id": 27829750, "comment_id": 44066381, "body": "@JackOLantern The solution to this problem, in case you missed it in Chux&#39;s answer is to replace every instance of the word <code>float</code> with the word <code>double</code>, and fix the constants as well, e.g. <code>3.f</code> becomes <code>3.0</code>. The calculation that you&#39;re doing won&#39;t exceed the precision of a <code>double</code>, and hence the results of the calculation will have 0 error."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1420675690, "post_id": 27829750, "comment_id": 44067680, "body": "@user3386109 Agree with the  suggestion about changing <code>float</code> to <code>double</code> except that the array <code>*x</code> may remain <code>float</code> for space considerations.  Simple way to make <code>x[i] * x[i]</code> work at <code>double</code> is to do <code>1.0 * x[i] * x[i]</code> or <code>(double) x[i] * x[i]</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420676749, "post_id": 27829750, "comment_id": 44068008, "body": "@chux To quote some anonymous wise guy, &quot;Premature optimization is the root of all evil.&quot; Which is to say that you shouldn&#39;t optimize for space unless space is actually a problem. Personally, I&#39;ve never worked with a computer that could store 900000 floats, but couldn&#39;t just as easily store 900000 doubles. (In the good old days, I did work with PCs that couldn&#39;t store 900000 doubles, but they couldn&#39;t store 900000 floats either.)"}], "answers": [{"comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420670560, "post_id": 27829928, "comment_id": 44065934, "body": "I downvoted because I don&#39;t think your answer addresses the question to any depth.  Downvotes are reversible; if you improve your answer, I&#39;m happy to turn the downvote into an upvote."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1420672386, "post_id": 27829928, "comment_id": 44066662, "body": "@tmyklebu I posted, you posted 10 seconds later, you down voted 3 seconds later.  Hmmm.  This answer is terse and correct.  It goes into enough depth to explain the issue and offers a solution."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1420670245, "creation_date": 1420670245, "answer_id": 27829928, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation/27829928#27829928", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>Typical <code>float</code> is only good to maybe 7 digits of precision.   Repeatedly adding <code>3604</code> to a number 100000x larger than it does not well accumulate the lesser significant digits.</p>\n\n<p>Use <code>double</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420670434, "post_id": 27829929, "comment_id": 44065874, "body": "@PascalCuoq: Uh-oh.  Is it impossibly hard, perchance?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420671219, "post_id": 27829929, "comment_id": 44066204, "body": "BTW: <a href=\"http://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">binary32</a> has 24-bit binary significand (23 bits stored explicitly))"}], "tags": [], "owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "is_accepted": true, "score": 4, "last_activity_date": 1420671310, "last_edit_date": 1420671310, "creation_date": 1420670255, "answer_id": 27829929, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation/27829929#27829929", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>You compute <code>temp = 3604.0f</code> accurately at each iteration.  The problem arises when you try adding <code>3604.0f</code> to something else and round the result to the nearest <code>float</code>.  <code>float</code>s store an exponent and a 23-bit significand, meaning any result with 1-bits more than 24 places apart is going to get rounded to something other than what it is.</p>\n\n<p>Note that 3604 = 901 * 4 and the binary expansion of 901 is 1110000101; you'll start seeing roundoff once you start adding <code>temp</code> to something bigger than 2^24 * 4 = 67108864.  (This happens when you run the code, too; it starts printing out 3600 as the difference between consecutive sum_host's right when sum_host exceeds 67108864.)  You start seeing even more roundoff when you're adding <code>temp</code> to something bigger than 2^26 * 4; at that point, the second smallest '1' bit is getting swallowed as well.</p>\n\n<p>Note that, after you do Kahan summation, <code>sum_host</code> is what you report AND <code>c</code> is <code>-108</code>.  This is loosely because <code>c</code> is keeping track of the next most significant 24 bits.</p>\n"}], "owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 27829929, "answer_count": 2, "score": 0, "last_activity_date": 1420671310, "creation_date": 1420669500, "last_edit_date": 1420670110, "question_id": 27829750, "link": "https://stackoverflow.com/questions/27829750/accuracy-of-rosenbrocks-test-function-calculation", "title": "Accuracy of Rosenbrock&#39;s test function calculation", "body": "<p>I want to calculate Rosenbrock's test function</p>\n\n<p><img src=\"https://i.stack.imgur.com/MgJqd.png\" alt=\"enter image description here\"></p>\n\n<p>I have implemented the following C/C++ code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/********/\n/* MAIN */\n/********/\nint main()\n{\n    const int N = 900000;\n\n    float *x = (float *)malloc(N * sizeof(float));\n    for (int i=0; i&lt;N; i++) x[i] = 3.f;\n\n    float sum_host = 0.f;\n    for (int i=0; i&lt;N-1; i++) {\n        float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f));\n        sum_host = sum_host + temp;\n        printf(\"%i %f %f\\n\", i, temp, sum_host);\n    }\n    printf(\"Result for Rosenbrock's test function calculation = %f\\n\", sum_host);\n\n}\n</code></pre>\n\n<p>Since the <code>x</code> array is initialized to <code>3.f</code>, then each summation term should be <code>3604.f</code>, so that the final summation involving <code>899999</code> terms should be <code>3243596396</code>. However, the result I get is <code>3229239296</code>, with an absolute error of <code>14357100</code>. If I measure the difference between two consecutive partial summations, I see that it is <code>3600.f</code> for the early partial summations and then it drops to <code>3584</code> for the last ones, while it should always be <code>3604.f</code>.</p>\n\n<p>If I use Kahan summation algorithm as</p>\n\n<pre><code>sum_host = 0.f;\nfloat c        = 0.f;\nfor (int i=0; i&lt;N-1; i++) {\n    float temp = (100.f * (x[i+1] - x[i] * x[i]) * (x[i+1] - x[i] * x[i]) + (x[i] - 1.f) * (x[i] - 1.f)) - c;\n    float t    = sum_host + temp;\n    c          = (t - sum_host) - temp;\n    sum_host = t;\n}\n</code></pre>\n\n<p>the result I get is <code>3243596288</code>, with a much smaller absolute error of <code>108</code>.</p>\n\n<p>I'm pretty sure that this effect I see should be ascribed to the precision of floating point arithmetics. Could someone confirm this and provide me an explanation of the mechanism according to which this occurs? </p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1420669257, "post_id": 27829608, "comment_id": 44065359, "body": "parenthetical note, you probably want to still assign <code>i = in.i;</code> in the copy constructor."}, {"owner": {"reputation": 45, "user_id": 3501778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/I9HEG.jpg?s=128&g=1", "display_name": "A Questioner", "link": "https://stackoverflow.com/users/3501778/a-questioner"}, "edited": false, "score": 0, "creation_date": 1420669447, "post_id": 27829608, "comment_id": 44065435, "body": "Am I not passing the pointer to that newly allocated object up into Viewer? And then when Viewer deletes isn&#39;t that value deleted?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420669509, "post_id": 27829608, "comment_id": 44065464, "body": "Ah, there is a call to that, but it&#39;s rather odd to do it that way. You don&#39;t initialize that to <code>NULL</code>, and you delete it regardless of if it was ever assigned."}], "answers": [{"tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 0, "last_activity_date": 1420669748, "last_edit_date": 1420669748, "creation_date": 1420669407, "answer_id": 27829729, "question_id": 27829608, "link": "https://stackoverflow.com/questions/27829608/pointer-works-and-then-breaks-seemingly-without-reason/27829729#27829729", "title": "Pointer Works And Then Breaks Seemingly Without Reason", "body": "<p>In the <code>Viewer</code> class, you are missing a <code>return</code> statement:</p>\n\n<pre><code>int retObjectVal( ) { return myObject-&gt;i; }\n</code></pre>\n\n<p>should work.</p>\n\n<p>What you have is a method where some of its branches fall off without returning a value. This leads to undefined behavior. You are simply evaluating \"myObject->i;\" as a statement.</p>\n\n<hr>\n\n<p>Another issue you should probably address is that your Object pointers are not owned by anyone and not being deleted anywhere. Namely, you are deleting your <code>ObjectManager</code> but nowhere does it <code>delete</code> the underlying object itself. You should probably figure out an ownership model there, have someone keep track of these pointers, and <code>delete</code> them when appropriate.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420669569, "post_id": 27829747, "comment_id": 44065487, "body": "Good catch. There should be a warning for things like this. If not, turn on stronger warnings."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 7, "last_activity_date": 1420669479, "creation_date": 1420669479, "answer_id": 27829747, "question_id": 27829608, "link": "https://stackoverflow.com/questions/27829608/pointer-works-and-then-breaks-seemingly-without-reason/27829747#27829747", "title": "Pointer Works And Then Breaks Seemingly Without Reason", "body": "<p>The problem is:</p>\n\n<pre><code>int retObjectVal(  ) { myObject-&gt;i; }\n</code></pre>\n\n<p>There is no <code>return</code> statement in that function. You just have an expression with no side effect. As a result, we run into \u00a76.6.3/2:</p>\n\n<blockquote>\n  <p>Flowing off the end of a function is equivalent to a return with no value; this results in undefined\n  behavior in a value-returning function.</p>\n</blockquote>\n\n<p>It's undefined behavior what it returns, so it ends up returning some garbage. Just make it:</p>\n\n<pre><code>int retObjectVal() { return myObject-&gt;i; }\n</code></pre>\n\n<p>This is an easy mistake to make, which is why you should always try to compile with the highest warning settings possible. For instance, on gcc with no flags, I get no warnings. But with <code>-Wall</code>, I get:</p>\n\n<blockquote>\n  <p>warning: statement has no effect [-Wunused-value]</p>\n  \n  <p>warning: no return statement in function returning non-void [-Wreturn-type]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "is_accepted": false, "score": 1, "last_activity_date": 1420669713, "creation_date": 1420669713, "answer_id": 27829803, "question_id": 27829608, "link": "https://stackoverflow.com/questions/27829608/pointer-works-and-then-breaks-seemingly-without-reason/27829803#27829803", "title": "Pointer Works And Then Breaks Seemingly Without Reason", "body": "<p>First, you're not initializing <code>Viewer::myObject</code> so if you just do</p>\n\n<pre><code>void something() {\n    Viewer v;\n}\n</code></pre>\n\n<p>You may end up trying to delete an invalid pointer.</p>\n\n<pre><code>myViewer.cpyinObject( &amp;myManager );\nmyViewer.ptrinObject( &amp;myManager );\n</code></pre>\n\n<p>Both functions create a new <code>Object</code> but neither checks to see if there's already one allocated (memory leak). Then later, they immediately ignore that new object created and instead assign yet another new <code>Object</code> allocated by <code>ObjectManager</code> (more memory leaks).</p>\n\n<p>Finally, <code>Viewer::retObjectVal</code> does not actually specifically <code>return</code> a value and therefore you are receiving \"junk off the end of the function\".</p>\n\n<p>I suggest you look at your compiler warnings as any sensible compiler will have warned you about the first and third issues I've mentioned.</p>\n"}], "owner": {"reputation": 45, "user_id": 3501778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/I9HEG.jpg?s=128&g=1", "display_name": "A Questioner", "link": "https://stackoverflow.com/users/3501778/a-questioner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 27829729, "answer_count": 3, "score": -1, "last_activity_date": 1420669748, "creation_date": 1420668969, "last_edit_date": 1420669345, "question_id": 27829608, "link": "https://stackoverflow.com/questions/27829608/pointer-works-and-then-breaks-seemingly-without-reason", "title": "Pointer Works And Then Breaks Seemingly Without Reason", "body": "<p>Why is it that I can access the data held within the object after assigning the pointer WHILE I'm within the scope of the assigning function, but cannot once I try to access the same value through the same pointer but outside of that function?</p>\n\n<p>The pointer is a member function and is assigned within the function. Within the function, that works fine. But, when from within that function, I call ANOTHER function which uses the class scope, the pointer misbehaves, presenting garbage data. Why?</p>\n\n<p>CODE:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Object{\npublic:\n    Object(  ) { std::cout &lt;&lt; \"Object constructor called.\" &lt;&lt; std::endl; }\n    Object( const Object &amp;in ) { i = in.i; std::cout &lt;&lt; \"Object copy constructor called.\" &lt;&lt; std::endl; }\n    ~Object(  ) { std::cout &lt;&lt; \"Object destructor called.\" &lt;&lt; std::endl; }\n    int i;\n};\n\nclass ObjectManager{\npublic:\n    Object * retObject(){\n        Object *myObject = new Object;\n        myObject-&gt;i=55;\n        return myObject;\n    }\n};\n\nclass LogicManager{\npublic:\n    LogicManager(){\n        myObjectManager = new ObjectManager;\n    }\n    ~LogicManager(){\n        delete myObjectManager;\n    }\n    Object * retObject(){\n        return myObjectManager-&gt;retObject();\n    }\nprivate:\n    ObjectManager *myObjectManager;\n};\n\nclass Viewer{\npublic:\n    ~Viewer(  ) { if( myObject ) { delete myObject; } }\n    void ptrinObject( LogicManager * inLogic ){\n        myObject = inLogic-&gt;retObject();\n\n        std::cout &lt;&lt; \"Got path size of \" &lt;&lt; myObject-&gt;i &lt;&lt; std::endl;       //correct\n        std::cout &lt;&lt; \"Got path size of \" &lt;&lt; retObjectVal(  ) &lt;&lt; std::endl;  //0?!?!?!?\n    }\n    int retObjectVal(  ) { myObject-&gt;i; }\nprivate:\n    Object *myObject;\n};\n\n\nint main(){\n    LogicManager myManager;\n    Viewer myViewer;\n    //myViewer.cpyinObject( &amp;myManager );\n    myViewer.ptrinObject( &amp;myManager );\n\n    return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Object constructor called.\nGot path size of 55\nGot path size of 861280848\nObject destructor called.\n</code></pre>\n"}, {"tags": ["c++", "qt", "http-get", "qnetworkaccessmanager", "qnetworkrequest"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1420670161, "post_id": 27829600, "comment_id": 44065751, "body": "&quot;Trying not to use event loops yet.&quot; Well, there&#39;s your problem.  There&#39;s no way this is ever going to work without letting the event loop do its job.  Put breakpoints in your slots and see what happens."}, {"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1420673899, "post_id": 27829600, "comment_id": 44067179, "body": "But there are some sources that didn&#39;t use that.I guess they use apps quit slot.I&#39;m not sure.I&#39;m new to Qt."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420710030, "post_id": 27831009, "comment_id": 44078266, "body": "Thanks. the problem still remains. Maybe there&#39;s a way to wait to get the response? I don&#39;t know why it jumps to slot before the reply finishes.or why it finishes before the reply gets the content!"}, {"owner": {"reputation": 820, "user_id": 3734880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbxRY.png?s=128&g=1", "display_name": "orfdorf", "link": "https://stackoverflow.com/users/3734880/orfdorf"}, "reply_to_user": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420719748, "post_id": 27831009, "comment_id": 44083655, "body": "If you catch and look at the error codes and error string Qt returns, it should tell you.  I&#39;d edit the post to show you how, but Nejat wrote a new answer that shows how.  Can you post the errors you&#39;re getting?"}, {"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420720049, "post_id": 27831009, "comment_id": 44083814, "body": "Answered Nejat. There is no errors.It works fine using a event loop. So I guess the problem is just that it doesn&#39;t wait to get the response. But I don&#39;t know exactly why."}], "tags": [], "owner": {"reputation": 820, "user_id": 3734880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbxRY.png?s=128&g=1", "display_name": "orfdorf", "link": "https://stackoverflow.com/users/3734880/orfdorf"}, "is_accepted": false, "score": 0, "last_activity_date": 1420676847, "last_edit_date": 1420676847, "creation_date": 1420676312, "answer_id": 27831009, "question_id": 27829600, "link": "https://stackoverflow.com/questions/27829600/when-trying-to-get-a-webpage-using-qt-qnetworkaccessmanager-it-always-returns/27831009#27831009", "title": "When trying to get a webpage using Qt QNetworkAccessManager, It always returns &quot;&quot;", "body": "<p>Your QNetworkAccessManager instance goes out of scope at the end of your <code>get_site</code> function.  According to Qt docs, one QNetworkAccessManager should be enough for the whole Qt application.  Your object should persist outside the scope of that function, since it's likely the response will take longer to receive than it will take for that function to end.  Make the QNetworkAccessManager a member of your net class, instead of an automatic variable local to <code>get_site</code>.</p>\n\n<p>Note that you also need to manage the lifetime of the QNetworkReply object, not by using <code>delete</code>, but by using <code>deleteLater()</code> or else you might leak memory.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420709610, "post_id": 27833312, "comment_id": 44078021, "body": "Thanks.But still the same problem. Seems I should wait to get the response using a event loop.I couldn&#39;t figure out any other way."}, {"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420709979, "post_id": 27833312, "comment_id": 44078236, "body": "I don&#39;t know why it jumps to slot before the reply finishes.or why it finishes before the reply gets the content!"}, {"owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "reply_to_user": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420710886, "post_id": 27833312, "comment_id": 44078743, "body": "Does it return an error when <code>finished</code> is emitted? I.e does <code>data = QString(reply-&gt;errorString ());</code> line get executed?"}, {"owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "edited": false, "score": 0, "creation_date": 1420719892, "post_id": 27833312, "comment_id": 44083737, "body": "No, it doesn&#39;t get to else block.just the     if (reply-&gt;error() == QNetworkReply::NoError) block gets executed. So there is no errors."}], "tags": [], "owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "is_accepted": false, "score": 1, "last_activity_date": 1420693603, "creation_date": 1420693603, "answer_id": 27833312, "question_id": 27829600, "link": "https://stackoverflow.com/questions/27829600/when-trying-to-get-a-webpage-using-qt-qnetworkaccessmanager-it-always-returns/27833312#27833312", "title": "When trying to get a webpage using Qt QNetworkAccessManager, It always returns &quot;&quot;", "body": "<p>There are some major problems in your code. First you should have the <code>QNetworkAccessManager</code> as a class member in .h file :</p>\n\n<pre><code>class net : public QObject\n{\n    ...\nprivate:\n    QNetworkAccessManager nam;\n};\n</code></pre>\n\n<p>Also you should not connect the <code>finished</code> signal to two different slots. Your <code>get_site</code> function should be like :</p>\n\n<pre><code>void net::get_site(QString url) {\n\n    QNetworkRequest request;\n    request.setUrl (QUrl(url));\n\n    connect (&amp;man , SIGNAL(finished(QNetworkReply*)) ,this, SLOT(done(QNetworkReply*)));\n\n    man.get (QNetworkRequest(QUrl(url)));\n}\n</code></pre>\n\n<p>And you should manage the returned reply in the following way :</p>\n\n<pre><code>void net::done(QNetworkReply * reply) {\n\n\n    if (reply-&gt;error() == QNetworkReply::NoError)\n    {\n       data = QString(reply-&gt;readAll ());\n    }\n    else\n    {\n       data = QString(reply-&gt;errorString ());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4430695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fafa870513407c8826de26467c3097eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nve", "link": "https://stackoverflow.com/users/4430695/nve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1430636304, "creation_date": 1420668906, "last_edit_date": 1430636304, "question_id": 27829600, "link": "https://stackoverflow.com/questions/27829600/when-trying-to-get-a-webpage-using-qt-qnetworkaccessmanager-it-always-returns", "title": "When trying to get a webpage using Qt QNetworkAccessManager, It always returns &quot;&quot;", "body": "<p>I'm trying to get a web page using Qt and print it on the screen.The problem is it always prints \"\". It won't make it to the done SLOT. I don't know if there's something wrong with the connect(). The code gets compiled with no errors.\nTrying not to use event loops yet.</p>\n\n<p>Here's the code:</p>\n\n<p>net.h\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#ifndef NET_H\r\n#define NET_H\r\n\r\n#include &lt;QObject&gt;\r\n#include &lt;QtNetwork&gt;\r\n#include &lt;QString&gt;\r\n#include &lt;QDebug&gt;\r\n\r\nclass net : public QObject\r\n{\r\n    Q_OBJECT\r\npublic:\r\n    explicit net(QObject *parent = 0);\r\n    void get_site(QString url);\r\n    QString data;\r\n\r\nsignals:\r\n\r\npublic slots:\r\n    void err(QNetworkReply *);\r\n    void done(QNetworkReply *);\r\n\r\nprivate:\r\n\r\n};\r\n\r\n#endif // NET_H</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>net.cpp:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#include \"net.h\"\r\n\r\nnet::net(QObject *parent) :\r\n    QObject(parent)\r\n{\r\n}\r\n\r\nvoid net::get_site(QString url) {\r\n    QNetworkAccessManager man;\r\n    QNetworkRequest request;\r\n\r\n    request.setUrl (QUrl(url));\r\n\r\n    connect (&amp;man , SIGNAL(finished(QNetworkReply*)) ,this, SLOT(done(QNetworkReply*)));\r\n    connect (&amp;man , SIGNAL(finished(QNetworkReply*)) ,this, SLOT(err(QNetworkReply *)));\r\n\r\n    man.get (QNetworkRequest(QUrl(url)));\r\n}\r\n\r\nvoid net::done(QNetworkReply * reply) {\r\n    data = QString(reply-&gt;readAll ());\r\n}\r\n\r\nvoid net::err(QNetworkReply * reply) {\r\n    data = QString(reply-&gt;errorString ());\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And main.cpp: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#include &lt;QCoreApplication&gt;\r\n#include \"net.h\"\r\n\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    QCoreApplication a(argc, argv);\r\n\r\n    net netobj;\r\n    netobj.get_site(\"http://stackoverflow.com\");\r\n    qDebug() &lt;&lt; netobj.data;\r\n    return a.exec();\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420669159, "post_id": 27829586, "comment_id": 44065318, "body": "How do you model the network? How do you represent it?"}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "reply_to_user": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420669386, "post_id": 27829586, "comment_id": 44065407, "body": "@MariusBancila: i have edited my question, please have a look at <code>UPDATE</code> at the end. I am trying to put more information."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420669706, "post_id": 27829586, "comment_id": 44065555, "body": "But what is a Network? A list, a tree, a graph? In your images, the original networks seem to remain the same. What happens to them after splitting. So you have node Network-1.1, but after splitting how does it look? In your example there is still a node with the same name there. What does it contain?"}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "reply_to_user": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420669925, "post_id": 27829586, "comment_id": 44065647, "body": "@MariusBancila: Network consists of &#39;Nodes&#39;. Those nodes have inter-connections. During the leaning process, some connections are lost due to which some smaller networks are resulted. Smaller network also consists of the nodes."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1420701645, "post_id": 27829586, "comment_id": 44074723, "body": "does your first-split-method start on a special &quot;starting node&quot; or is your network very recurrent? cant you use the first-split-method on any sub-network?"}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "edited": false, "score": 0, "creation_date": 1420717184, "post_id": 27829586, "comment_id": 44082269, "body": "the network (whether bigger or smaller) are processed through the same learning process and divided into even smaller network. I can do the processing manually by storing each network into a variable and then sending it for the learning process BUT i want to do it recursively."}], "owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420670138, "creation_date": 1420668849, "last_edit_date": 1420670138, "question_id": 27829586, "link": "https://stackoverflow.com/questions/27829586/logical-implementation-of-hierarchical-networks", "title": "Logical implementation of hierarchical networks", "body": "<p>I am working on neural networks. I start with a big neural network. During some processing, that big neural network gets divided into smaller neural networks. Then again, those smaller neural networks have to be passed through the same processing step individually and will get divided into even smaller neural networks.</p>\n\n<p>Following is the pictorial representation of what i have said above in words:</p>\n\n<p><img src=\"https://i.imgur.com/6W8TnxH.png\" alt=\"image\"></p>\n\n<p><strong>First Step:</strong> I have the above shown big neural network. I will do some processing on it which will divide it in smaller neural networks. <strong><em>I able to do this part</em></strong>.</p>\n\n<p><img src=\"https://i.imgur.com/FFABT9v.png\" alt=\"image\"></p>\n\n<p><strong>Second Step:</strong> The smaller networks resulted from the first big network have to be processed to further divide them into even smaller networks and it will result in the following thing.</p>\n\n<p><img src=\"https://i.imgur.com/aMBSHQE.png\" alt=\"image\"></p>\n\n<p><strong>Third Step:</strong> The same procedure will be applied to the smaller networks achieved in step-2 which will result in even smaller networks.</p>\n\n<p><img src=\"https://i.imgur.com/v5Ldw7G.png\" alt=\"image\"></p>\n\n<p><strong>PROBLEM:</strong> I can subdivide the first bigger network into smaller networks. But even after thinking a lot, i am not able to come up with some kind of recursive algorithm to maintain this structure. </p>\n\n<p>I just need some rough suggestion about the structure of my program to implement this problem.</p>\n\n<p><strong>PS:</strong> The number of layers are not fixed. The number of layers depend upon a termination criteria. I want to terminate the process when the network become so small that it can't be subdivided further.</p>\n\n<p><strong>UPDATE:</strong> I have a <code>class Layer</code> which takes control of everything thing. Then i have a <code>class Learner</code> which carries out the learning process (to subdivide network) for a given network. I have one more class which <code>class Network</code> which represents each individual <code>network</code>.</p>\n\n<p>My current strategy is to make an object of Layer class i.e. <code>Layer layerObject</code> and then do the learning for that layer. </p>\n\n<pre><code>class Layer\n{\n    public:\n        Learner* Learner;\n\n\n};\n\nclass Learner\n{\n    public:\n        Network* network;\n\n\n};\n\nclass Network\n{\n    private:\n        Node* currentSeed;\n\n\n};\n</code></pre>\n"}, {"tags": ["c++", "member-function-pointers", "function-parameter"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420668828, "post_id": 27829566, "comment_id": 44065154, "body": "Please include the exact error and show us the line that it&#39;s coming from."}, {"owner": {"reputation": 3, "user_id": 4430646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aa8fa4c2c9de5c1eb4008ab1475a29?s=128&d=identicon&r=PG&f=1", "display_name": "minsuk ji", "link": "https://stackoverflow.com/users/4430646/minsuk-ji"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420669223, "post_id": 27829566, "comment_id": 44065341, "body": "In file included from main.cpp:11:0: roots_multidim.h: In instantiation of \u2018void newt(VecDoub_IO&amp;, bool&amp;, T&amp;, PTSolver&amp;) [with T = NRvector&lt;double&gt; (PTSolver::*)(NRvector&lt;double&gt;); VecDoub_IO = NRvector&lt;double&gt;]\u2019: main.cpp:27:51:   required from here roots_multidim.h:123:29: error: invalid use of non-static member function   NRfmin&lt;T&gt; fmin(obj.*vecfunc);                              ^ nbproject/Makefile-Debug.mk:72: recipe for target &#39;build/Debug/Cygwin_4.x-Windows/main.o&#39; failed"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4430646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aa8fa4c2c9de5c1eb4008ab1475a29?s=128&d=identicon&r=PG&f=1", "display_name": "minsuk ji", "link": "https://stackoverflow.com/users/4430646/minsuk-ji"}, "edited": false, "score": 0, "creation_date": 1420671478, "post_id": 27829905, "comment_id": 44066296, "body": "Thank you for your input. If you see main(), &#39;vecfunc&#39; (corresponding to &#39;Func&#39; argument in &#39;newt&#39; call) is a non-static member function of class PTSolver. Therefore, I cannot just do fmin(vecfun). I am trying to figure out a way to use the class object ptsolver, which will tell template functions where vecfun is from."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3, "user_id": 4430646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aa8fa4c2c9de5c1eb4008ab1475a29?s=128&d=identicon&r=PG&f=1", "display_name": "minsuk ji", "link": "https://stackoverflow.com/users/4430646/minsuk-ji"}, "edited": false, "score": 0, "creation_date": 1420673621, "post_id": 27829905, "comment_id": 44067096, "body": "@MJJ You probably want to pass in <code>std::bind(vecfunc, obj, _1)</code>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1420670147, "creation_date": 1420670147, "answer_id": 27829905, "question_id": 27829566, "link": "https://stackoverflow.com/questions/27829566/passing-member-function-non-static-as-a-parameter-to-template-function/27829905#27829905", "title": "Passing member function (non-static) as a parameter to template function", "body": "<p>You have a type mismatch:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct NRfmin {\n    NRfmin(T &amp;funcc) : func(funcc) {}\n};\n\ntemplate &lt;class T&gt;\nvoid newt(VecDoub_IO &amp;x, bool &amp;check, T &amp;vecfunc, PTSolver &amp;obj){\n    NRfmin&lt;T&gt; fmin(obj.*vecfunc);\n    ..\n};\n</code></pre>\n\n<p>In both cases <code>T</code> is a pointer to member function, but you're constructing <code>fmin</code> with something that is definitely not a <code>T&amp;</code> (it isn't even a valid expression). Either you meant to just forward the pointer, in which case:</p>\n\n<pre><code>NRfmin&lt;T&gt; fmin(vecfunc);\n</code></pre>\n\n<p>Or you want to pass <code>NRfmin</code> a bound functor.</p>\n"}], "owner": {"reputation": 3, "user_id": 4430646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aa8fa4c2c9de5c1eb4008ab1475a29?s=128&d=identicon&r=PG&f=1", "display_name": "minsuk ji", "link": "https://stackoverflow.com/users/4430646/minsuk-ji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420671894, "creation_date": 1420668739, "last_edit_date": 1420671894, "question_id": 27829566, "link": "https://stackoverflow.com/questions/27829566/passing-member-function-non-static-as-a-parameter-to-template-function", "title": "Passing member function (non-static) as a parameter to template function", "body": "<p>I am trying to define a pointer to non-static member function, and pass the pointer along with class object to a template function, which will again send the member function for template struct operation. It keeps giving me type mismatch errors. Please help!</p>\n\n<p>Clarify: 'vecfunc' is a non-static member function of class PTSolver. It takes as input vector and outputs vector. I want to pass a pointer to this vecfunc as a parameter to template function 'newt', which will also pass down to the template struct operation 'fmin().' All throughout the passing processes, I need to give information about PTSolver object 'ptsolver' since it's not a static member function. But I am not able to do this...</p>\n\n<pre><code>    template &lt;class T&gt;\n    struct NRfmin {\n        VecDoub fvec;\n        T &amp;func;\n        int n;\n        NRfmin(T &amp;funcc) : func(funcc) {}\n        double operator() (VecDoub_I &amp;x) {\n        n=x.size();\n        double sum=0.0;\n        fvec=func(x);\n        for (int i = 0;i&lt;n;i++) sum += SQR(fvec[i]);\n        return 0.5*sum;\n        }\n    };\n\n    template &lt;class T&gt;\n    void newt(VecDoub_IO &amp;x, bool &amp;check, T &amp;vecfunc, PTSolver &amp;obj){\n        NRfmin&lt;T&gt; fmin(obj.*vecfunc);\n        VecDoub &amp;fvec=fmin.fvec;\n        f=fmin(x);\n        ...\n    }\n\n    class PTSolver {\n    public:\n        PTSolver() = default;\n        virtual ~PTSolver() = default;\n        void solve();\n        VecDoub vecfunc(VecDoub_I);\n    };\n\n    VecDoub PTSolver::vecfunc(VecDoub_I x) {\n        int n=x.size();\n        VecDoub results(n);\n        for (int i=0;i&lt;n;i++) {\n            results[i]=2.0*x[i];\n        }\n        return results;\n    }\n\n    int main() {\n        VecDoub initGuess(2);\n        initGuess[0]=4.4;\n        initGuess[1]=5.5;\n        bool check;\n\n        //function&lt;VecDoub(PTSolver*, VecDoub_I)&gt; Func=&amp;PTSolver::vecfunc;\n       typedef VecDoub (PTSolver::*PMemFnc)(VecDoub_I x);\n       PMemFnc Func;\n       PTSolver ptsolver;\n       newt&lt;PMemFnc&gt;(initGuess, check, Func, ptsolver);\n       return 0;\n     }\n</code></pre>\n"}, {"tags": ["c++", "pointers", "allocator", "delete-operator"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1420668462, "post_id": 27829452, "comment_id": 44064981, "body": "There&#39;s been some change in C++11 related to calling <code>delete</code> on NULL pointers. See <a href=\"http://stackoverflow.com/questions/25329576/calling-delete-on-null-pointers-c03-vs-c11\">my question</a> on the subject."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1420669048, "post_id": 27829452, "comment_id": 44065263, "body": "A deallocator can&#39;t be asked to deallocate memory that it didn&#39;t allocate itself. A custom allocator that never returns NULL on allocation should be able to assume that it&#39;s never asked to deallocate NULL."}], "answers": [{"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 4, "last_activity_date": 1420668576, "last_edit_date": 1592644375, "creation_date": 1420668576, "answer_id": 27829522, "question_id": 27829452, "link": "https://stackoverflow.com/questions/27829452/why-is-a-pointer-not-permitted-to-be-null-when-calling-the-deallocate-method-of/27829522#27829522", "title": "Why is a pointer not permitted to be null when calling the deallocate method of the allocator class?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/deallocate\" rel=\"nofollow noreferrer\">documentation for <code>std::allocator::deallocate</code></a>:</p>\n<blockquote>\n<p>Deallocates the storage referenced by the pointer p, which must be a pointer obtained by an earlier call to <code>allocate()</code>. The argument n must be equal to the first argument of the call to <code>allocate()</code> that originally produced p.</p>\n<p>Calls <code>::operator delete(void*)</code>, but it is unspecified when and how it is called.</p>\n</blockquote>\n<p>It seems to me that this specification allows an allocator to assume that the pointer is not null. The allocator you're looking at directly passes the pointer to <code>::operator delete()</code>, but that may not be the case for all allocators.</p>\n"}], "owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 27829522, "answer_count": 1, "score": 2, "last_activity_date": 1436272658, "creation_date": 1420668243, "last_edit_date": 1436272658, "question_id": 27829452, "link": "https://stackoverflow.com/questions/27829452/why-is-a-pointer-not-permitted-to-be-null-when-calling-the-deallocate-method-of", "title": "Why is a pointer not permitted to be null when calling the deallocate method of the allocator class?", "body": "<p>I can across this while reading <a href=\"http://en.wikipedia.org/wiki/C%2B%2B_Primer\" rel=\"nofollow\">C++ Primer</a>: </p>\n\n<blockquote>\n  <p>The pointer we pass to deallocate cannot be null; it must point to\n  memory allocated by allocate.</p>\n</blockquote>\n\n<p>I checked the source of <code>deallocate</code> and found this:</p>\n\n<pre><code>// __p is not permitted to be a null pointer.\nvoid\ndeallocate(pointer __p, size_type)\n{ ::operator delete(__p); }\n</code></pre>\n\n<p>Ok, so I know there is a distinction between the <code>delete</code> expression and <code>operator delete()</code>. The <code>delete</code> expression can be used on a null pointer. However, this function calls the global <code>operator delete()</code> function directly. However, I googled this problem and found a blog post <a href=\"http://www.codesynthesis.com/~boris/blog/2008/11/17/delete-and-null-pointers/\" rel=\"nofollow\">here</a> that also states the global operator delete method checks for null pointers as well, like this:</p>\n\n<pre><code>void\noperator delete (void* ptr) throw ()\n{\n  if (ptr)\n    std::free (ptr);\n}\n</code></pre>\n\n<p>Also, ironically, I also found <a href=\"http://en.cppreference.com/w/cpp/memory/c/free\" rel=\"nofollow\">here</a> that calling <code>std::free</code> on a null pointer has no effect either... So my question is, why is not permitted for <code>__p</code> to be a null pointer? </p>\n"}, {"tags": ["c++", "collision", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "is_accepted": true, "score": 1, "last_activity_date": 1420669568, "creation_date": 1420669568, "answer_id": 27829763, "question_id": 27829411, "link": "https://stackoverflow.com/questions/27829411/sfml-axis-independent-collision/27829763#27829763", "title": "SFML Axis independent collision", "body": "<p>That's because your collision test is all or nothing. I would do extra collision tests to see if the x or y new position is valid or not, something like:</p>\n\n<pre><code>if (tiles[i].collision &amp;&amp; Collision::PixelPerfectTest(sprite, tiles[i].sprite))\n{\n    sf::Vector2f checkPosX = newPos;\n    sf::Vector2f checkPosY = newPos;\n\n    checkPosX.y = oldPos.y;\n    checkPosY.x = oldPos.x;\n\n    sprite.setPosition(checkPosX);\n\n    if (!Collision::PixelPerfectTest(sprite, tiles[i].sprite))\n    {\n        newPos = checkPosX;\n    }\n    else\n    {\n        sprite.setPosition(checkPosY);\n\n        if (!Collision::PixelPerfectTest(sprite, tiles[i].sprite))\n        {\n            newPos = checkPosY;\n        }\n        else\n        {\n            sprite.setPosition(oldPos);\n            newPos = oldPos;\n        }\n    }\n}\n</code></pre>\n\n<p>As an aside, if you do test <code>tiles[i].collision</code> first you will skip the more expensive <code>PixelPerfectTest()</code> test for non-collision tiles due to the expression short-circuiting.</p>\n"}], "owner": {"reputation": 267, "user_id": 3737421, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bd68bd938de20888d177796056ebe4c?s=128&d=identicon&r=PG&f=1", "display_name": "Wahoozel", "link": "https://stackoverflow.com/users/3737421/wahoozel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 27829763, "answer_count": 1, "score": 0, "last_activity_date": 1420669568, "creation_date": 1420668066, "question_id": 27829411, "link": "https://stackoverflow.com/questions/27829411/sfml-axis-independent-collision", "title": "SFML Axis independent collision", "body": "<p>I've implemented tilemap collision into my game, it works but the problem comes when I'm colliding on one axis and trying to move on the other. I can't slide along the wall. </p>\n\n<p>in Player.cpp</p>\n\n<pre><code>void Player::update(float delta, std::vector&lt;Tile&gt;&amp; tiles) {\n    if (sf::Keyboard::isKeyPressed(sf::Keyboard::W) || sf::Keyboard::isKeyPressed(sf::Keyboard::Up) || sf::Joystick::getAxisPosition(0, sf::Joystick::Y) &lt; -20) {\n        newPos.y -= speed * delta;\n    }\n    if (sf::Keyboard::isKeyPressed(sf::Keyboard::A) || sf::Keyboard::isKeyPressed(sf::Keyboard::Left) || sf::Joystick::getAxisPosition(0, sf::Joystick::X) &lt; -20) {\n        newPos.x -= speed * delta;\n    }\n    if (sf::Keyboard::isKeyPressed(sf::Keyboard::S) || sf::Keyboard::isKeyPressed(sf::Keyboard::Down) || sf::Joystick::getAxisPosition(0, sf::Joystick::Y) &gt; 20) {\n        newPos.y += speed * delta;\n    }\n    if (sf::Keyboard::isKeyPressed(sf::Keyboard::D) || sf::Keyboard::isKeyPressed(sf::Keyboard::Right) || sf::Joystick::getAxisPosition(0, sf::Joystick::X) &gt; 20) {\n        newPos.x += speed * delta;\n    }\n\n    sf::Vector2f oldPos = sprite.getPosition();\n    move(delta, newPos);\n\n    for (int i = 0; i &lt; tiles.size(); i++) {\n        if (Collision::PixelPerfectTest(sprite, tiles[i].sprite) &amp;&amp; tiles[i].collision) {\n            sprite.setPosition(oldPos);\n            newPos = oldPos;\n        }\n    }\n}\n\nvoid Player::move(float delta, sf::Vector2f position) {\n    sprite.setPosition(position);\n}\n</code></pre>\n\n<p>In Collision.cpp</p>\n\n<pre><code>bool PixelPerfectTest(const sf::Sprite&amp; Object1, const sf::Sprite&amp; Object2, sf::Uint8 AlphaLimit) {\n        sf::FloatRect Intersection;\n        if (Object1.getGlobalBounds().intersects(Object2.getGlobalBounds(), Intersection)) {\n            sf::IntRect O1SubRect = Object1.getTextureRect();\n            sf::IntRect O2SubRect = Object2.getTextureRect();\n\n            sf::Uint8* mask1 = Bitmasks.GetMask(Object1.getTexture());\n            sf::Uint8* mask2 = Bitmasks.GetMask(Object2.getTexture());\n\n            // Loop through our pixels\n            for (int i = Intersection.left; i &lt; Intersection.left + Intersection.width; i++) {\n                for (int j = Intersection.top; j &lt; Intersection.top + Intersection.height; j++) {\n\n                    sf::Vector2f o1v = Object1.getInverseTransform().transformPoint(i, j);\n                    sf::Vector2f o2v = Object2.getInverseTransform().transformPoint(i, j);\n\n                    // Make sure pixels fall within the sprite's subrect\n                    if (o1v.x &gt; 0 &amp;&amp; o1v.y &gt; 0 &amp;&amp; o2v.x &gt; 0 &amp;&amp; o2v.y &gt; 0 &amp;&amp;\n                        o1v.x &lt; O1SubRect.width &amp;&amp; o1v.y &lt; O1SubRect.height &amp;&amp;\n                        o2v.x &lt; O2SubRect.width &amp;&amp; o2v.y &lt; O2SubRect.height) {\n\n                        if (Bitmasks.GetPixel(mask1, Object1.getTexture(), (int)(o1v.x) + O1SubRect.left, (int)(o1v.y) + O1SubRect.top) &gt; AlphaLimit &amp;&amp;\n                            Bitmasks.GetPixel(mask2, Object2.getTexture(), (int)(o2v.x) + O2SubRect.left, (int)(o2v.y) + O2SubRect.top) &gt; AlphaLimit)\n                            return true;\n\n                    }\n                }\n            }\n        }\n        return false;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "networking", "posix"], "answers": [{"comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1420671821, "post_id": 27830114, "comment_id": 44066448, "body": "So, to sum it up, the only time <code>AI_PASSIVE</code> is ever useful is when you&#39;re creating a server socket and want it to bind to all interfaces (so you&#39;d pass in <code>NULL</code> for <code>nodename</code>)? That&#39;s kind of lame. Why on earth would it ever be useful compared to just using <code>INADDR_ANY</code>/<code>IN6ADDR_ANY_INIT</code> directly?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420672509, "post_id": 27830114, "comment_id": 44066725, "body": "<code>getaddrinfo()</code> populates other fields, not just the IP address.  So it can still be useful to use <code>getaddrinfo()</code> with a NULL <code>nodename</code> instead of populating the <code>sockaddr</code> manually."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420672901, "post_id": 27830114, "comment_id": 44066856, "body": "If <code>nodename</code> is not NULL, and <code>AI_NUMERICHOST</code> is not specified, a DNS lookup is performed. It does not make sense to do that for a passive listening socket. On the other hand, if <code>nodename</code> is an IP address, and <code>AI_NUMERICHOST</code> is specified, it doesn&#39;t matter if <code>AI_PASSIVE</code> is specified or not, the IP address is returned as-is, and can be used equally for <code>bind()</code>, <code>connect()</code>, <code>sendto()</code>, etc, <code>getaddrinfo()</code> doesn&#39;t care. Remember, <code>AI_PASSIVE</code> is just a <b>hint</b>, it does not apply to everything."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1420671614, "last_edit_date": 1420671614, "creation_date": 1420671159, "answer_id": 27830114, "question_id": 27829275, "link": "https://stackoverflow.com/questions/27829275/getaddrinfo-in-what-way-is-ai-passive-ignored-if-the-nodename-is-specified/27830114#27830114", "title": "getaddrinfo: in what way is AI_PASSIVE ignored if the nodename is specified?", "body": "<p>The Linux manpage for <code>gettaddrinfo(2)</code> describes it slightly differently (and a bit more consistently):</p>\n\n<blockquote>\n  <p>If  the  <strong>AI_PASSIVE</strong>  flag  is specified in <em>hints.ai_flags</em>, and <em>node</em> is NULL, then the returned socket addresses will be suitable for <strong>bind</strong>(2)ing a socket that will  <strong>accept</strong>(2)  connections. The returned socket address will contain the \"wildcard address\" [...]. If <em>node</em> is not NULL, then the <strong>AI_PASSIVE</strong> flag is ignored.</p>\n  \n  <p>If the <strong>AI_PASSIVE</strong> flag is not set in <em>hints.ai_flags</em>, then the returned socket addresses will be suitable for use with <strong>connect</strong>(2), <strong>sendto</strong>(2), or <strong>sendmsg</strong>(2).  If <em>node</em> is NULL, then the network address will be set to the loopback interface address [...].</p>\n</blockquote>\n\n<p>Of course, the Linux manpage is not authoritative other than for Linux, but I offer it as a widely-used interpretation.  In particular, note that it specifies that you get a server socket only if AI_PASSIVE is given <strong>and</strong> <em>node</em> is NULL.  That still leaves some ambiguity as to what it means to \"ignore\" AI_PASSIVE, but I think it nevertheless points to the interpretation taken by Linux: you always get address info suitable for a client socket if <em>node</em> is not NULL.</p>\n\n<p>You could perhaps rationalize it this way: \"The AI_PASSIVE flag shall be ignored\" should be interpreted as \"if the AI_PASSIVE flag is set then that fact shall be ignored\".  That is, it shall be handled as if the flag were not set.  I think that's additionally supported by the fact that this statement occurs in the same paragraph with the description of the behavior when AI_PASSIVE is set (in the official docs too, not just the Linux manpage).</p>\n"}], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3759, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1420672203, "creation_date": 1420667555, "last_edit_date": 1420672203, "question_id": 27829275, "link": "https://stackoverflow.com/questions/27829275/getaddrinfo-in-what-way-is-ai-passive-ignored-if-the-nodename-is-specified", "title": "getaddrinfo: in what way is AI_PASSIVE ignored if the nodename is specified?", "body": "<p>Quoting from the specs of <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/freeaddrinfo.html\" rel=\"nofollow\">getaddrinfo</a>:</p>\n\n<blockquote>\n  <p>If the <code>AI_PASSIVE</code> flag is specified, the returned address information shall be suitable for use in binding a socket for accepting incoming connections for the specified service. In this case, if the <code>nodename</code> argument is null, then the IP address portion of the socket address structure shall be set to <code>INADDR_ANY</code> for an IPv4 address or <code>IN6ADDR_ANY_INIT</code> for an IPv6 address.</p>\n</blockquote>\n\n<p>This makes sense. If you specify <code>AI_PASSIVE</code>, you can <code>bind()</code>/<code>listen()</code>/<code>accept()</code> on the returned address. If <code>nodename</code> is null, the returned address binds to all network interfaces so you can use any of the computer's IP addresses (e.g. ethernet LAN IP, Wi-Fi LAN IP, loopback address, etc.). Summary: use <code>AI_PASSIVE</code> on the server (for a TCP socket).</p>\n\n<p>Continuing:</p>\n\n<blockquote>\n  <p>If the <code>AI_PASSIVE</code> flag is not specified, the returned address information shall be suitable for a call to <code>connect()</code> (for a connection-mode protocol) or for a call to <code>connect()</code>, <code>sendto()</code>, or <code>sendmsg()</code> (for a connectionless protocol). In this case, if the <code>nodename</code> argument is null, then the IP address portion of the socket address structure shall be set to the loopback address.</p>\n</blockquote>\n\n<p>This also makes sense. If you <strong>don't</strong> specify <code>AI_PASSIVE</code>, you can <code>connect()</code>/<code>sendto()</code>/<code>sendmsg()</code> on the returned address. If <code>nodename</code> is null, you get the loopback address. Summary: <strong>don't</strong> use <code>AI_PASSIVE</code> on the client (for a TCP socket).</p>\n\n<p>Continuing:</p>\n\n<blockquote>\n  <p>The <code>AI_PASSIVE</code> flag shall be ignored if the <code>nodename</code> argument is not null.</p>\n</blockquote>\n\n<p>Huh? What does it even mean to <em>ignore</em> the <code>AI_PASSIVE</code> flag? From the first two quotes, it sounds like <code>AI_PASSIVE</code> is only used to determine whether you get addresses suitable for server/client use, and in both of those cases it sounds like a null <code>nodename</code> just gives you a <code>INADDR_ANY</code> address (for server) or loopback address (for client). What good does it do to <em>ignore</em> the <code>AI_PASSIVE</code> flag?</p>\n\n<p>What does this last quote really mean? How does it affect the first two quotes?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 2, "creation_date": 1420666672, "post_id": 27829039, "comment_id": 44064150, "body": "Hmm, nothing obviously wrong here. Could you provide the exact input that caused the code to crash?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1420666826, "post_id": 27829039, "comment_id": 44064217, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/count\" rel=\"nofollow noreferrer\"><code>std::count()</code></a>  eliminates the loop."}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 0, "creation_date": 1420666984, "post_id": 27829039, "comment_id": 44064300, "body": "@ApproachingDarknessFish It seems everything above about 100 words and/or containing returns"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420667159, "post_id": 27829039, "comment_id": 44064387, "body": "Note that if the input has two adjacent spaces, you&#39;ll count that as two words...but that&#39;s unrelated to the crash.  <code>getline()</code> only gets one line, doesn&#39;t it?  Have you checked the return value from <code>getline()</code>?  Have you printed the input that causes the crash?  It&#39;s almost the first step in debugging -- print the input to make sure the program got what you expected.  Which platform are you on? Which compiler?"}, {"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 0, "creation_date": 1420667408, "post_id": 27829039, "comment_id": 44064500, "body": "@SashaP. Unable to reproduce. I tried input with 128 words and it worked fine. I imagine returns might cause unexpected behavior as <code>getline</code> would probably end at the first <code>\\n</code> (as it did for me), but it didn&#39;t crash. Can you please provide the <i>exact</i> text that caused your program to misbehave?"}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420667430, "post_id": 27829039, "comment_id": 44064505, "body": "@JonathanLeffler You probably are completely correct about the getline, I simply put it in because cin only gets one word. This also explains the random values I got, they were probably just the values of the first line. But what do you suggest to use in stead of getline?"}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 0, "creation_date": 1420667690, "post_id": 27829039, "comment_id": 44064625, "body": "@ApproachingDarknessFish I cmnd-a&#39;d the Dutch wikipedia article on C++ for testing, I use that for all my text testing in C++. As soon as I get home I will send the link. Thank you for your help so far."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 1, "creation_date": 1420667843, "post_id": 27829039, "comment_id": 44064691, "body": "@ApproachingDarknessFish: when you say nothing is obviously wrong you missed that the code doesn&#39;t check whether the read is successful. ... or that two consecutive spaces would account for two words. ... or that <code>countTotal</code> uses a <code>double</code>. ... or that it works only with one line."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420667890, "post_id": 27829039, "comment_id": 44064713, "body": "Specify <code>&#39;\\0&#39;</code> as a delimiter third argument to <code>getline()</code>?  If you&#39;re processing a text file (in a single-byte code set, or in UTF-8), the zero byte shouldn&#39;t appear, and that will read the whole input until EOF (or <code>str.max_size()</code> bytes are read)."}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420668094, "post_id": 27829039, "comment_id": 44064811, "body": "@JonathanLeffler I am sorry, but I am not familliar with terms just yet, what is a delimiter?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420668201, "post_id": 27829039, "comment_id": 44064851, "body": "The default delimiter for <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline()</code></a> is the newline, <code>&#39;\\n&#39;</code>, so the input stops when it reads a newline (or EOF).  I&#39;m suggesting that you override the default delimiter by specifying <code>&#39;\\0&#39;</code> instead.  That should read up to the EOF in a single operation."}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420668312, "post_id": 27829039, "comment_id": 44064906, "body": "@JonathanLeffler Oh okay, now I get it. But how do I do this? (It&#39;s probably very obvious, I am sorry)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420668381, "post_id": 27829039, "comment_id": 44064940, "body": "The info is there in the linked URL.  Change <code>getline(cin, text);</code> to <code>if (getline(cin, text, &#39;\\0&#39;)) { ...process valid input... } else { ...report reading error... }</code>."}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420668497, "post_id": 27829039, "comment_id": 44065002, "body": "@JonathanLeffler Thank you, I will get to work on it as soon as I get back!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420672842, "post_id": 27829039, "comment_id": 44066837, "body": "Why are you using floating point for the number of letters?  Is there such a thing as 3.14159267 characters in a string?"}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420700196, "post_id": 27829039, "comment_id": 44074185, "body": "@ThomasMatthews I wanted to use int, but it gave me trouble, so I just used double. Didn&#39;t know what else to use, I have only started C++ like 2 days ago."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420669381, "post_id": 27829524, "comment_id": 44065402, "body": "Uptick. Its been over two years now and I still can&#39;t type the code related to your closing paragraph without thinking of your last name, which you duly noted to trip on itself without that cast so long ago. Nice answer."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420669502, "post_id": 27829524, "comment_id": 44065461, "body": "@WhozCraig: thanks! I guess, it give more color if the abstract problems are related to real-world use cases :-) (I shall do that to this answer, too)"}, {"owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "edited": false, "score": 0, "creation_date": 1420669505, "post_id": 27829524, "comment_id": 44065463, "body": "Thanks a lot for the huge answer, it will definitely be very helpful. I would definitely vote up if I had enough reputation."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 2, "last_activity_date": 1420669651, "last_edit_date": 1420669651, "creation_date": 1420668582, "answer_id": 27829524, "question_id": 27829039, "link": "https://stackoverflow.com/questions/27829039/struggling-with-a-textcounter/27829524#27829524", "title": "Struggling with a textcounter", "body": "<p>First of all, the code reads at most one line: <code>std::getline(std::cin, line)</code> stops reading upon receiving the first newline. You can specify a character where to stop, e.g, the character <code>'\\0'</code> is unlikely to be present in typical text. For example, you could use:</p>\n\n<pre><code>std::string text;\nif (std::getline(std::cin, text, '\\0')) {\n     // do something with the read text\n}\n</code></pre>\n\n<p>You should also always check that input was successful. While the above would work with short texts, when the texts become large it makes more sense to read them one line at a time and eventually reading a line will fail when the end of the stream is reached.</p>\n\n<p>In case you don't like the approach of reading everything up to a null character, you could read the entire stream using code like this:</p>\n\n<pre><code>std::istreambuf_iterator&lt;char&gt; it(std::cin), end;\nstd::string text(it, end);\nif (!text.empty()) {\n    // do something with the read text\n}\n</code></pre>\n\n<p>A few notes on the other parts of the code:</p>\n\n<ul>\n<li>Don't use <code>double</code> where you mean to use an integer. You may want to use a bigger integer, e.g., <code>unsigned long</code> or <code>unsigned long long</code> but <code>double</code> is for floating point values.</li>\n<li><p>When iterating through a sequence you should either use an unsigned integer type when dealing with indices, e.g., <code>unsigned int</code> or <code>std::size_t</code>. This way there is no need to cast the <code>size()</code>. Preferably you'd use iterators:</p>\n\n<pre><code>for (auto it(text.begin()), end(text.end()); it != end; ++it) {\n    char chr(*it);\n    // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for (char chr: text) {\n    // ...\n}\n</code></pre></li>\n<li><p>Note that your word count is wrong if there are two consecutive spaces. Also, if you don't break your text using line breaks, you need to use <code>'\\n'</code> as an additional whitespace character separating words. If you want to consider all spaces, you should actually use something like this to determine if a character is a space:</p>\n\n<pre><code>if (std::isspace(static_cast&lt;unsigned char&gt;(chr)) { ... }\n</code></pre>\n\n<p>The <code>static_cast&lt;unsigned char&gt;(chr)</code> is needed because <code>char</code> tends to be signed and using a negative value with <code>std::isspace()</code> results in undefined behavior. Casting the character to <code>unsigned char</code> avoids any problems. Note that negative characters are not entirely uncommon: for example, the second character of my last name (the u-umlaut <code>'\u00fc'</code>) normally result in a negative <code>char</code>, e.g., when <a href=\"http://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow\">UTF-8</a> or <a href=\"http://en.wikipedia.org/wiki/ISO/IEC_8859-1\" rel=\"nofollow\">ISO-Latin-1</a> encoding is used.</p></li>\n</ul>\n"}], "owner": {"reputation": 193, "user_id": 4430588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777ab1aced92fb0b2bb86b8c62383412?s=128&d=identicon&r=PG&f=1", "display_name": "insanikov", "link": "https://stackoverflow.com/users/4430588/insanikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 27829524, "answer_count": 1, "score": 0, "last_activity_date": 1420669651, "creation_date": 1420666486, "last_edit_date": 1420666945, "question_id": 27829039, "link": "https://stackoverflow.com/questions/27829039/struggling-with-a-textcounter", "title": "Struggling with a textcounter", "body": "<p>I tried to write myself a textcounter which tells me how many characters and words are in a piece of text. Every time I try to paste in a long piece of text for it to count, it will crash or display something random.</p>\n\n<p>Does anyone have any suggestions?</p>\n\n<p>This is what I have written:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\n    cout &lt;&lt; \"Text counter\\nPlease insert text.\\n\";\n    string text = \"\";\n    getline(cin, text);\n    double countTotal = text.size();\n    cout &lt;&lt; \"Total characters: \" &lt;&lt; countTotal &lt;&lt; \"\\n\";\n\n    int wordCount = 1;\n    for (int chrSearch = 0; chrSearch &lt; (int)text.size(); chrSearch++)\n    {\n        char chr = text.at(chrSearch);\n        if(chr == ' ')\n        {\n            wordCount++;\n        }\n    }\n    cout &lt;&lt; \"Total words: \" &lt;&lt; wordCount &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "floating-point"], "comments": [{"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1420666766, "post_id": 27828970, "comment_id": 44064186, "body": "I think the standard makes no promises for floating-point returns of functions contained in libraries. But that&#39;s my unexpert understanding on the subject, so not very helpful."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1420666844, "post_id": 27828970, "comment_id": 44064222, "body": "By default Visual Studio sets the precision to &quot;precise&quot; which allows it to do these sort of optimizations. You could try setting it to strict and see what happens."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1420666950, "post_id": 27828970, "comment_id": 44064280, "body": "If all else fails, casting all the intermediates to (double) should do the trick. At least it worked when I was trying to get IEEE-specific behavior for a very specific operation and I didn&#39;t want to turn on global fp:strict."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1420667243, "post_id": 27828970, "comment_id": 44064433, "body": "If you to get rid of the x87 excess precision, typically there&#39;s a specific compilation flag; on gcc there&#39;s <code>-fexcess-precision=standard</code> (and <code>-ffloat-store</code>), for VC++ <code>&#47;fp:strict</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420667554, "post_id": 27828970, "comment_id": 44064569, "body": "Report the value of <code>FLT_EVAL_METHOD</code> in debug and release mode."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1420667649, "post_id": 27828970, "comment_id": 44064601, "body": "For debugging, change to <code>volatile double a1, a2, d;</code>.  This will force intermediate saves and reads."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1420667680, "post_id": 27828970, "comment_id": 44064618, "body": "@chux VS 2005 does not even claim to implement C99, so it does not have to define <code>FLT_EVAL_METHOD</code>. And it is not as if compilers always did what they say when they do define it (<a href=\"http://stackoverflow.com/questions/17663780/is-there-a-document-describing-how-clang-handles-excess-floating-point-precision\" title=\"is there a document describing how clang handles excess floating point precision\">stackoverflow.com/questions/17663780/&hellip;</a> )"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420667859, "post_id": 27828970, "comment_id": 44064696, "body": "@Pascal Cuoq True about VS.  IAC, this is certainly the result of an inconsistent use of wider FP."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 0, "creation_date": 1420668081, "post_id": 27828970, "comment_id": 44064804, "body": "@All: at the end, VS2005 is probably &quot;too old&quot; and, well, not perfect. Not C99, indeed (+1, Pascal). My question may also become &quot;how free to remove assignments is a compiler?&quot;. That&#39;s why I also asked &quot;What if the variables were &quot;float&quot;? What if they were &quot;int&quot; (weird, but legal)?&quot;"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668494, "post_id": 27828970, "comment_id": 44064998, "body": "@GiuseppeGuerrini Assignments have effects (conversion to the type of the destination lvalue, and furthermore removal of excess precision which is not automatically implied by the conversion in FLT_EVAL_METHOD&gt;2). These effects are part of the meaning of the source code and must take place in the assembly code. Apart from that, what&#39;s an \u201cassignment\u201d? Does assigning to a register count? If block-scope variable <code>x</code> is only used as part of the expression <code>x+1</code>, can you never assign <code>x</code> but directly compute <code>x+1</code>?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668660, "post_id": 27828970, "comment_id": 44065069, "body": "@GiuseppeGuerrini What I mean is that there is no notion of \u201cassignment\u201d in assembly code. The only demand one can make is that the functional effects of assignments in the source code are respected in the results computed by the binary code. Non-functional effects (e.g. a place in memory is overwritten with the value, time is spent doing the write) do not have to take place (except for <code>volatile</code> variables, that&#39;s another story)."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1420668960, "post_id": 27828970, "comment_id": 44065218, "body": "@Pascal: &quot;what&#39;s an assigment?&quot;. You have already answered! Since the compiler&#39;s goal is (should be) to preserve the final result of a set of operations, the assignment of a intermediate/internal/temporary (useless?) variable is to convert an intermediate value to a particular type (and in my case it does not happen, hum...)."}], "answers": [{"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": true, "score": 5, "last_activity_date": 1420667564, "last_edit_date": 1420667564, "creation_date": 1420666987, "answer_id": 27829168, "question_id": 27828970, "link": "https://stackoverflow.com/questions/27828970/operations-on-double-and-optimization-in-c/27829168#27829168", "title": "Operations on &quot;double&quot; and optimization in C", "body": "<blockquote>\n  <p>By my \"naive\" point of view, an assignment should force the compiler to convert a value to the precision represented by the variable's type (double, in my case).</p>\n</blockquote>\n\n<p>Yes, this is what the C99 standard says. See below.</p>\n\n<blockquote>\n  <p>So, in short, what does the C standard say about that cases?</p>\n</blockquote>\n\n<p>The C99 standard allows, in some circumstances, floating-point operations to be computed at a higher precision than that implied by the type: look for <code>FLT_EVAL_METHOD</code> and <code>FP_CONTRACT</code> in the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">standard</a>, these are the two constructs related to excess precision. But I am not aware of any words that could be interpreted as meaning that the compiler is allowed to arbitrarily reduce the precision of a floating-point value from the computing precision to the type precision. This should, in a strict interpretation of the standard, only happen in specific spots, such as assignments and casts, in a deterministic fashion.</p>\n\n<p>The best is to read <a href=\"https://gcc.gnu.org/ml/gcc-patches/2008-11/msg00105.html\" rel=\"nofollow\">Joseph S. Myers's analysis</a> of the parts relevant to <code>FLT_EVAL_METHOD</code>:</p>\n\n<blockquote>\n  <p>C99 allows evaluation with excess range and precision following\n  certain rules.  These are outlined in 5.2.4.2.2 paragraph 8:</p>\n  \n  <blockquote>\n    <p>Except for assignment and cast (which remove all extra range and\n        precision), the values of operations with floating operands and\n        values subject to the usual arithmetic conversions and of floating\n        constants are evaluated to a format whose range and precision may\n        be greater than required by the type. The use of evaluation\n        formats is characterized by the implementation-defined value of\n        FLT_EVAL_METHOD:</p>\n  </blockquote>\n</blockquote>\n\n<p>Joseph S. Myers goes on to describe the situation in GCC before the patch that accompanies his post. The situation was just as bad as it is in your compiler (and countless others):</p>\n\n<blockquote>\n  <p>GCC defines FLT_EVAL_METHOD to 2 when using x87 floating point.  Its\n  implementation, however, does not conform to the C99 requirements for\n  FLT_EVAL_METHOD == 2, since it is implemented by the back end\n  pretending that the processor supports operations on SFmode and\n  DFmode:</p>\n  \n  <ul>\n  <li>Sometimes, depending on optimization, a value may be spilled to\n  memory in SFmode or DFmode, so losing excess precision unpredictably\n  and in places other than when C99 specifies that it is lost.</li>\n  <li>An assignment will not generally lose excess precision, although\n  <code>-ffloat-store</code> may make it more likely that it does.</li>\n  </ul>\n  \n  <p>\u2026</p>\n</blockquote>\n\n<p>The C++ standard inherits the definition of <code>math.h</code> from C99, and <code>math.h</code> is the header that defines <code>FLT_EVAL_METHOD</code>. For this reason you might expect C++ compilers to follow suit, but they do not seem to be taking the issue as seriously. Even G++ still does not support <code>-fexcess-precision=standard</code>, although it uses the same back-end as GCC (which has supported this option since Joseph S. Myers' post and accompanying patch).</p>\n"}], "owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 27829168, "answer_count": 1, "score": 4, "last_activity_date": 1420667564, "creation_date": 1420666181, "last_edit_date": 1420666437, "question_id": 27828970, "link": "https://stackoverflow.com/questions/27828970/operations-on-double-and-optimization-in-c", "title": "Operations on &quot;double&quot; and optimization in C", "body": "<p>I have recently analyzed an old piece of code compiled with VS2005 because of a different numerical behaviour in \"debug\" (no optimizations) and \"release\" (/O2 /Oi /Ot options) compilations. The (reduced) code looks like:</p>\n\n<pre><code>void f(double x1, double y1, double x2, double y2)\n{\ndouble a1, a2, d;\n\na1 = atan2(y1,x1);\na2 = atan2(y2,x2);\nd = a1 - a2;\nif (d == 0.0) { // NOTE: I know that == on reals is \"evil\"!\n   printf(\"EQUAL!\\n\");\n}\n</code></pre>\n\n<p>The function <code>f</code> is expected to print \"EQUAL\" if invoked with identical pairs of values (e.g. <code>f(1,2,1,2)</code>), but this doesn't always happen in \"release\". Indeed it happened that the compiler has optimized the code as  if it were something like <code>d = a1-atan2(y2,x2)</code> and removed completely the assignment to the intermediate variable <code>a2</code>. Moreover, it has taken advantage of the fact that the second <code>atan2()</code>'s result is already on the FPU stack, so reloaded <code>a1</code> on FPU and subtracted the values. The problem is that the FPU works at extended precision (80 bits) while <code>a1</code> was \"only\" double (64 bits), so saving the first <code>atan2()</code>'s result in memory has actually lost precision. Eventually, <code>d</code> contains the \"conversion error\" between extended and double precision.</p>\n\n<p>I know perfectly that identity (<code>==</code> operator) with float/double should be avoided. My question is not about how to check proximity between doubles. My question is about how \"contractual\" an assignment to a local variable should be considered. By my \"naive\" point of view, an assignment should force the compiler to convert a value to the precision represented by the variable's type (double, in my case). What if the variables were \"float\"? What if they were \"int\" (weird, but legal)?</p>\n\n<p>So, in short, what does the C standard say about that cases?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1420666194, "post_id": 27828939, "comment_id": 44063920, "body": "What are you trying to do? It looks like you&#39;re converting these numbers to a string, and then concating the strings"}, {"owner": {"reputation": 667, "user_id": 3602281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5yMLT.jpg?s=128&g=1", "display_name": "Don Larynx", "link": "https://stackoverflow.com/users/3602281/don-larynx"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1420666238, "post_id": 27828939, "comment_id": 44063946, "body": "I am converting the number to a string, permutating it, and (then later) converting back to an integer. The break statement is temporary and will be removed when the program is finished."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 1, "creation_date": 1420666367, "post_id": 27828939, "comment_id": 44064012, "body": "Since <code>pandigital</code> does not change in your code <code>qualities(pandigital)</code> will always evaluate to the same value. So you can take that out of the <code>while</code> loop."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1420666393, "post_id": 27828939, "comment_id": 44064026, "body": "What is the actual output that you think is wrong? What is the output you are expecting, and what are you getting instead?"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 1, "creation_date": 1420666449, "post_id": 27828939, "comment_id": 44064057, "body": "Also you are calling <code>next_permutation</code> twice which is probably wrong."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1420666453, "post_id": 27828939, "comment_id": 44064058, "body": "@MariusBancila: unless <code>qualities()</code> uses a global variable to maintain state between calls, and thus can return a different value each time it is called."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1420666779, "post_id": 27828939, "comment_id": 44064193, "body": "@DonLarynx &quot;converting back to an integer&quot; if it suppose to be an integer why do you use <code>double</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1420666581, "creation_date": 1420666581, "answer_id": 27829068, "question_id": 27828939, "link": "https://stackoverflow.com/questions/27828939/why-does-this-code-add-an-extra-zero-to-my-number/27829068#27829068", "title": "Why does this code add an extra zero to my number?", "body": "<p>Zero comes from <code>std::to_string</code> converting a <code>double</code> to <code>string</code>: rather than producing <code>\"123456789\"</code>, it makes <code>\"123456789.0\"</code>.</p>\n\n<p>To fix this problem, declare <code>pandigital</code> as <code>int</code>, or add a cast when converting it to a <code>string</code>:</p>\n\n<pre><code>string strpan = to_string((int)pandigital);\n</code></pre>\n\n<p>With this issue out of the way, you have another fix to make: each iteration of your <code>while</code> loop calls <code>next_permutation</code> twice - once in the header of the loop, and once in the body. You should remove the invocation that you perform in the body of the loop.</p>\n\n<p>Finally, recall that in order to go through all possible permutations the initial call of <code>next_permutation</code> should be made when the range is sorted. It is not a problem for your number, because the digits are arranged in ascending order, but it may become an issue if you start with a different number.</p>\n"}], "owner": {"reputation": 667, "user_id": 3602281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5yMLT.jpg?s=128&g=1", "display_name": "Don Larynx", "link": "https://stackoverflow.com/users/3602281/don-larynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1420666877, "accepted_answer_id": 27829068, "answer_count": 1, "score": -1, "last_activity_date": 1420666581, "creation_date": 1420666066, "last_edit_date": 1420666258, "question_id": 27828939, "link": "https://stackoverflow.com/questions/27828939/why-does-this-code-add-an-extra-zero-to-my-number", "closed_reason": "Not suitable for this site", "title": "Why does this code add an extra zero to my number?", "body": "<p>The following code </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nbool qualities(double number){\n    //function qualities, irrelevant to question\n}\n\nint main(){\n    double pandigital = 123456789;\n    double sum = 0;\n    string strpan = to_string(pandigital);\n    while (next_permutation(strpan.begin(), strpan.end())){\n        cout &lt;&lt; strpan &lt;&lt; endl;\n        if (qualities(pandigital)){\n            sum += pandigital;\n        }\n        next_permutation(strpan.begin(), strpan.end());\n        break;\n    }\n    cout &lt;&lt; \"sum is \" &lt;&lt; sum &lt;&lt; endl;\n    cin.get();\n}\n</code></pre>\n\n<p>has the following problems beginning at this piece of code</p>\n\n<pre><code>double pandigital = 123456789;\ndouble sum = 0;\nstring strpan = to_string(pandigital);\nwhile (next_permutation(strpan.begin(), strpan.end())){\n    cout &lt;&lt; strpan &lt;&lt; endl;\n</code></pre>\n\n<p>The problem is strpan has an extra zero appended to it, which is an error. If I add a zero to pandigital so we have <code>1234567890</code>, it will still append an extra zero.</p>\n"}, {"tags": ["c++", "c", "select", "udp", "p2p"], "comments": [{"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1420673117, "post_id": 27828918, "comment_id": 44066926, "body": "Aside from the parenthetical on the bottom, what is your question?"}, {"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "reply_to_user": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1420710549, "post_id": 27828918, "comment_id": 44078535, "body": "i can&#39;t understand, why my select() is for the first client straight 1 every time and for all other clients it just stays 0//times out --&gt; the first one gets all the data, but the rest gets nothing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420747520, "post_id": 27848565, "comment_id": 44100994, "body": "the recvfd is the only socket i&#39;m putting in the set for select, so if select returns 1, that socket is the only one, that could recv something, i will look through your exapmle"}, {"owner": {"reputation": 5028, "user_id": 986760, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vR2zH.jpg?s=128&g=1", "display_name": "fkl", "link": "https://stackoverflow.com/users/986760/fkl"}, "reply_to_user": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420747943, "post_id": 27848565, "comment_id": 44101234, "body": "Well why are you using select if you have a single descriptor to monitor? Select is only needed when you have multiple ones - each connected to a different client (or in case of udp logically used with a different client) and you want to be notified whenever data is received on any one of them."}, {"owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "edited": false, "score": 0, "creation_date": 1420748235, "post_id": 27848565, "comment_id": 44101382, "body": "the only reason i&#39;m using select, is too  have some kind of time window i&#39;m able to receive data before sending. as mentioned before, we had not that much information about p2p and select looked like a tool that would work. my exact problem with select is anyway, that it stays for the first client the whole time 1 (so he receives the data) and for the other it is just 0"}], "tags": [], "owner": {"reputation": 5028, "user_id": 986760, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vR2zH.jpg?s=128&g=1", "display_name": "fkl", "link": "https://stackoverflow.com/users/986760/fkl"}, "is_accepted": false, "score": 0, "last_activity_date": 1420747258, "creation_date": 1420747258, "answer_id": 27848565, "question_id": 27828918, "link": "https://stackoverflow.com/questions/27828918/problems-with-select-in-an-simple-selfmade-p2p-program-to-exchange-musicdata/27848565#27848565", "title": "Problems with select() in an simple selfmade p2p program to exchange &quot;musicdata&quot; with udp", "body": "<p>Instead of checking which socket from the read set received data, you are directly calling recvfrom on recvfd descriptor. You need to check all of them in a loop.</p>\n\n<p>This is what i could gather in a quick review.</p>\n\n<p>But <a href=\"http://forum.codecall.net/topic/64205-concurrent-tcp-server-using-select-api-in-linux-c/\" rel=\"nofollow\">here</a> is a tcp based example i wrote a long time ago. Your's is udp but you should be able to find the source of your problem easily.</p>\n\n<p>P.S. There was one mistake in code that some one pointed out and fixed in the comments of the post.</p>\n"}], "owner": {"reputation": 11, "user_id": 3775254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5147abbf9ff75b1b5f22f140a4e8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowofsora", "link": "https://stackoverflow.com/users/3775254/shadowofsora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420747258, "creation_date": 1420665981, "last_edit_date": 1420745797, "question_id": 27828918, "link": "https://stackoverflow.com/questions/27828918/problems-with-select-in-an-simple-selfmade-p2p-program-to-exchange-musicdata", "title": "Problems with select() in an simple selfmade p2p program to exchange &quot;musicdata&quot; with udp", "body": "<p>heyho,</p>\n\n<p>i'm trying to make a simple p2p program, that should be able to let at least 3 peers exchange musicdata (author/title) that is stored in 1 file per peer through port 50001-50010. to say it bluntly it's homework and we never really talked about p2p nor did i found any usefull and simple p2p examples without special libraries etc. with beej's guide to network programming and some other sources i got an already halfway working program but i have 1 big problem:</p>\n\n<p>my select call is for the whole loop just for the first client/peer every time 1 for all the other it is just 0 and so they will never receive any data</p>\n\n<p>my p2p code:</p>\n\n<pre><code>case 6:\n{\n    if(!filename.empty())\n    {\n        time_t start, now;\n        time(&amp;start);\n        double elapsedtime = 0;\n        char *recvbuf;\n        char *sendbuf;\n        recvbuf = new char[1024];\n        sendbuf = new char[1024];\n        int recvfd, sendfd,err, port;\n        int errormarker = 0;\n        if((recvfd = socket(AF_INET,SOCK_DGRAM,0)) == -1)\n        {\n            std::cout &lt;&lt; \"Error setting socket\\n\";\n            errormarker =1;\n        }\n        if(errormarker ==1)\n            break;\n        struct sockaddr_in server_address;\n        server_address.sin_family = AF_INET;\n        server_address.sin_addr.s_addr = INADDR_ANY;\n        server_address.sin_port = htons(50001);\n        for (int i =0; i&lt;=9;i++)\n        {\n            port = 50001+i;\n            errormarker = bind(recvfd,(sockaddr*) &amp;server_address, sizeof   (server_address));\n            if(errormarker ==-1)\n                server_address.sin_port = htons(server_address.sin_port+1);\n            else\n                break;\n        }\n        if(errormarker == -1)\n        {\n            std::cout &lt;&lt; \"all ports are used, please wait a minute and try again\\n\";\n            break;\n        }\n        std::cout &lt;&lt; \"Searching for other musicdata owners\\n\";\n        fd_set readset;\n        while (elapsedtime &lt; 15)\n        {\n            if(errormarker != 0)\n                break;\n            memset(recvbuf, 0, sizeof(recvbuf));\n            memset(sendbuf, 0, sizeof(sendbuf));\n            struct timeval tv;\n            tv.tv_sec =0;\n            tv.tv_usec = rnd(10000,50000);\n            FD_ZERO(&amp;readset);\n            FD_SET(recvfd, &amp;readset);\n            int result = select(recvfd + 1, &amp;readset, NULL, NULL, &amp;tv);\n            std::cout &lt;&lt; result &lt;&lt; \"\\n\";\n            if (result &gt;0)\n            {\n                result = recvfrom(recvfd, recvbuf, 1024, NULL,NULL,NULL);\n                if (result != -1)\n                {\n                    buftofile(recvbuf,filename);\n                    addnewdata(filename);\n                }\n                else\n                    std::cout &lt;&lt; \"error receiving data \\n\";\n            }\n            filetobuf(sendbuf,filename);\n            for(int i = 50001; i&lt;=50010;i++)\n            {\n                struct addrinfo hints, *servinfo, *p;\n                memset(&amp;hints, 0, sizeof hints);\n                hints.ai_family = AF_UNSPEC;\n                hints.ai_socktype =SOCK_DGRAM;\n                std::string s_port = to_string(i);\n                err = getaddrinfo(NULL,s_port.c_str(),&amp;hints,&amp;servinfo);\n                for(p=servinfo;p!=NULL;p=p-&gt;ai_next)                                \n                {\n                    if(i == port)\n                    {\n                        err = sendto(recvfd, sendbuf,strlen(sendbuf), 0, p-&gt;ai_addr,p-&gt;ai_addrlen);\n                        continue;\n                    }\n                    if((sendfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,p-&gt;ai_protocol)) == -1)\n                    {\n                        continue;\n                    }\n                    else\n                    {\n                        err=sendto(sendfd,sendbuf,strlen(sendbuf), 0, p-&gt;ai_addr,p-&gt;ai_addrlen);\n                        close(sendfd);                              \n                    }\n                }\n                freeaddrinfo(servinfo);\n            }\n            time(&amp;now);\n            elapsedtime=difftime(now,start);\n        }\n        close(recvfd);\n\n    }\n    else\n        std::cout &lt;&lt; \"Error, please choose a file to save your data first!\" &lt;&lt; std::endl;\n}\nbreak;\n</code></pre>\n\n<p>the functions are all tested and work as they should.</p>\n\n<p>(on a sitenote i got a little irregularity that startles me slightly:\nwhen i run all 3 clients and the first one gets all the data he gets everytime the same line missing exactly 3 characters --- every time again --- i'm running the programm from one pc and can't completely understand, why that happens every time (i guess i should add a start- and an endsign to remove the problem, but the fact, that the same line comes every time fascinates me though). Is there an explanation to that phenomen?)</p>\n\n<p>thanks in advance for the help.</p>\n"}, {"tags": ["c++", "comparator"], "comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 4, "creation_date": 1420665908, "post_id": 27828880, "comment_id": 44063783, "body": "Just use some kind of FIFO container. You don&#39;t really need the time, you just need a relative order."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1420665909, "post_id": 27828880, "comment_id": 44063787, "body": "No, that wouldn&#39;t be good. That would lead to outright undefined behaviour."}, {"owner": {"reputation": 1157, "user_id": 3455840, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMMss.jpg?s=128&g=1", "display_name": "morsecoder", "link": "https://stackoverflow.com/users/3455840/morsecoder"}, "reply_to_user": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1420666097, "post_id": 27828880, "comment_id": 44063877, "body": "Thanks @Conduit, I was worried something like that might happen. What sort of a data structure would you suggest for this sort of thing? Also, if you post as an answer then I can mark it."}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1420666851, "post_id": 27828880, "comment_id": 44064225, "body": "My comments have been moved into my answer."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1420668309, "post_id": 27828880, "comment_id": 44064903, "body": "Sets require a <a href=\"https://www.sgi.com/tech/stl/StrictWeakOrdering.html\" rel=\"nofollow noreferrer\">strict weak ordering</a>. What you&#39;re describing doesn&#39;t fulfill that."}, {"owner": {"reputation": 8966, "user_id": 1327788, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9a7bf2b2cf6fc29548640d5f19d6d8be?s=128&d=identicon&r=PG", "display_name": "Giovanni Botta", "link": "https://stackoverflow.com/users/1327788/giovanni-botta"}, "edited": false, "score": 0, "creation_date": 1420668851, "post_id": 27828880, "comment_id": 44065165, "body": "As per answer, your example does not make much sense because you can obtain the same behavior without subtracting the current time."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 1, "creation_date": 1420672977, "post_id": 27828880, "comment_id": 44066883, "body": "If you want a comparator that sorts based on proximity to the &#39;current&#39; time, the way to implement that is to set what the &#39;current&#39; time is up front and not change it. You wouldn&#39;t call <code>GetTime()</code> inside every comparison. Later when some time passes and you need a new sorting, you would create a new collection with an updated &#39;current&#39; time and move the elements over, causing them to be resorted in the process."}], "answers": [{"tags": [], "owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "is_accepted": false, "score": 2, "last_activity_date": 1420668134, "last_edit_date": 1420668134, "creation_date": 1420666811, "answer_id": 27829126, "question_id": 27828880, "link": "https://stackoverflow.com/questions/27828880/c-stdset-with-a-comparator-that-is-time-based/27829126#27829126", "title": "C++ std::set with a comparator that is time based?", "body": "<p>C++ gurus correct me if I am mistaken:</p>\n\n<p>I believe that the comparator used by <code>std::set</code> instances orders the elements contained in the set within the underlying container. This is necessary to minimize the complexity of the operations and functions defined by <code>std::set</code>. Since the set relies on this ordering, having an order that changes is extremely ill-advised - it would cause intermittent (order might still be correct sometimes), undefined behavior in set functions relying on the proper ordering of the set's elements.</p>\n\n<p>Hazarding a guess without seeing your code, I would say that <a href=\"http://www.cplusplus.com/reference/list/list/\" rel=\"nofollow\"><code>std::list</code></a> or <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow\"><code>std::vector</code></a> would probably be more appropriate for your application. Check the complexity of the operations and functions you will be using, and make sure that all of them are present on the chosen container. You may need to fall back on the <a href=\"http://www.cplusplus.com/reference/algorithm/\" rel=\"nofollow\"><code>std::algorithm</code></a> class for assistance with some tasks, but try to stick to the container's built-in functionality if possible.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1420667061, "creation_date": 1420667061, "answer_id": 27829185, "question_id": 27828880, "link": "https://stackoverflow.com/questions/27828880/c-stdset-with-a-comparator-that-is-time-based/27829185#27829185", "title": "C++ std::set with a comparator that is time based?", "body": "<p>If the relative order of elements within a <code>std::set</code> ever changes, the result is undefined behavior.</p>\n\n<p>In your case, so long as things never happen in the future, and time never overflows, the <code>-now</code> is pointless.  If things happen both before and after the current time at any point, your code will exhibit undefined behavior.</p>\n\n<p>If you simply sorted everything by their time, and then looked for elements <strong>near</strong> now, and processed from there, you'd get a similar result but no undefined behavior.</p>\n\n<p>Ie, have a map from <code>int64_t</code> to <code>Event*</code>.  Store the time stamp in the <code>int64_t</code> (this makes some things easier).  Then get <code>lower_bound</code> of the current time, and carefully examine around it to find the even \"nearest\" to now (or any window you choose).</p>\n\n<p>You can do this with a <code>std::set</code> if your compiler supports transparent comparators (a C++14 feature).  Simply implement a transparent comparator between <code>Event*</code> and <code>int64_t</code> timestamps.</p>\n"}, {"tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 2, "last_activity_date": 1420674288, "last_edit_date": 1495541506, "creation_date": 1420668548, "answer_id": 27829514, "question_id": 27828880, "link": "https://stackoverflow.com/questions/27828880/c-stdset-with-a-comparator-that-is-time-based/27829514#27829514", "title": "C++ std::set with a comparator that is time based?", "body": "<p>I generally agree with what <a href=\"https://stackoverflow.com/a/27829185/1392132\">Yakk</a> and <a href=\"https://stackoverflow.com/a/27829126/1392132\">Conduit</a> have said: Don't make your comparator depend on global state, seriously.  To support this with even more authority, item 87 in <em>C++ Coding Standards</em> by Herb Sutter and Andrei Alexandrescu says:</p>\n\n<blockquote>\n  <p><strong>Make predicates pure functions.</strong></p>\n  \n  <p>Predicate purity: A predicate is a function object that returns a yes / no answer, typically as a <code>bool</code> value.  A function is pure in a mathematical sense if its result depends only on its arguments (note that this use of \u201cpure\u201d has nothing to do with pure virtual functions).</p>\n  \n  <p>Don't allow predicates to hold or access state that affects the result of their <code>operator()</code>, including both member and global state.  Prefer to make <code>operator()</code> a <code>const</code> member function for predicates.</p>\n</blockquote>\n\n<p>What I would most importantly like to add to the discussion is a simple solution to achieve multiple orderings that should be preferred in my opinion.</p>\n\n<ol>\n<li>Store all elements (of type <code>Foo</code>) in a <code>std::vector&lt;Foo&gt;</code> using an arbitrary ordering that never changes.  The obvious choice is of course to simply <code>push_back()</code> them as they occur.</li>\n<li>For each ordering you wish to use, define a pure ordering functor <code>Compare</code> with an <code>bool operator()(const Foo *, const Foo *) const;</code> and a corresponding <code>std::set&lt;Foo *, Compare&gt;</code> (using the constructor that accepts two iterators and a comparator) that is a lightweight structure of pointers into the vector.</li>\n<li>If an ordering becomes obsolete, simply dispose of the corresponding set.</li>\n</ol>\n\n<p>This approach is only worthwhile if you intend to access each ordering multiple (on the order of the number of elements) times.  If you merely wish to look up a small number of elements for various orderings, consider using <a href=\"http://en.cppreference.com/w/cpp/algorithm/partial_sort\" rel=\"nofollow noreferrer\"><code>std::partial_sort</code></a> or <a href=\"http://en.cppreference.com/w/cpp/algorithm/partial_sort_copy\" rel=\"nofollow noreferrer\"><code>std::partial_sort_copy</code></a> instead.  Consider sorting <code>std::vector&lt;Foo *&gt;</code> of pointers that are cheap to copy instead of your original <code>Foo</code> objects.</p>\n\n<p>And now for some code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n\nusing Foo = std::pair&lt;float, float&gt;;\nusing FooIter = std::vector&lt;Foo&gt;::iterator;\n\nstd::ostream&amp;\noperator&lt;&lt;(std::ostream&amp; os, const Foo&amp; foo)\n{\n  os &lt;&lt; std::fixed &lt;&lt; std::setprecision(4)\n     &lt;&lt; \"[\"\n     &lt;&lt; std::setw(8) &lt;&lt; foo.first\n     &lt;&lt; \", \"\n     &lt;&lt; std::setw(8) &lt;&lt; foo.second\n     &lt;&lt; \"]\";\n  return os;\n}\n\n// Ugly template, irrelevant for this discussin, don't use in production code.\ntemplate&lt;typename ContainerT&gt;\nvoid\nprint_container(const ContainerT&amp; container, const std::string&amp; name)\n{\n  std::cout &lt;&lt; name &lt;&lt; \"\\n\\n\";\n  for (const auto&amp; it : container)\n    std::cout &lt;&lt; *it &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; std::endl;\n}\n\nint\nmain()\n{\n  // Create a vector of 10 'Foo's.\n  std::vector&lt;Foo&gt; items {};\n  for (float x = 0.0f; x &lt; 10.0f; x += 1.0f)\n    items.emplace_back(x, std::sin(x));\n  // For convenience, also create a vector of iterators into that vector.\n  std::vector&lt;FooIter&gt; item_iterators {};\n  for (auto it = items.begin(); it != items.end(); ++it)\n    item_iterators.push_back(it);\n  // Comparator based on the first element.\n  const auto cmp1 = [](const FooIter it1, const FooIter it2)-&gt;bool{\n    return it1-&gt;first &lt; it2-&gt;first;\n  };\n  // Comparator based on the second element.\n  const auto cmp2 = [](const FooIter it1, const FooIter it2)-&gt;bool{\n    return it1-&gt;second &lt; it2-&gt;second;\n  };\n  {\n    // Create a set ordered by the value of the first element.\n    std::set&lt;FooIter, decltype(cmp1)&gt; set1 {\n      item_iterators.begin(), item_iterators.end(), cmp1\n    };\n    print_container(set1, \"set1\");\n  }\n  {\n    // Create a set ordered by the value of the second element.\n    std::set&lt;FooIter, decltype(cmp2)&gt; set2 {\n      item_iterators.begin(), item_iterators.end(), cmp2\n    };\n    print_container(set2, \"set2\");\n  }\n  {\n    // Create a vector of the three smallest (by the first element) values.\n    std::vector&lt;FooIter&gt; vec1(3);\n    std::partial_sort_copy(item_iterators.begin(), item_iterators.end(),\n                           vec1.begin(), vec1.end(), cmp1);\n    print_container(vec1, \"vec1\");\n  }\n  {\n    // Create a vector of the three smallest (by the second element) values.\n    std::vector&lt;FooIter&gt; vec2(3);\n    std::partial_sort_copy(item_iterators.begin(), item_iterators.end(),\n                           vec2.begin(), vec2.end(), cmp2);\n    print_container(vec2, \"vec2\");\n  }\n  return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>set1\n\n[  0.0000,   0.0000]\n[  1.0000,   0.8415]\n[  2.0000,   0.9093]\n[  3.0000,   0.1411]\n[  4.0000,  -0.7568]\n[  5.0000,  -0.9589]\n[  6.0000,  -0.2794]\n[  7.0000,   0.6570]\n[  8.0000,   0.9894]\n[  9.0000,   0.4121]\n\nset2\n\n[  5.0000,  -0.9589]\n[  4.0000,  -0.7568]\n[  6.0000,  -0.2794]\n[  0.0000,   0.0000]\n[  3.0000,   0.1411]\n[  9.0000,   0.4121]\n[  7.0000,   0.6570]\n[  1.0000,   0.8415]\n[  2.0000,   0.9093]\n[  8.0000,   0.9894]\n\nvec1\n\n[  0.0000,   0.0000]\n[  1.0000,   0.8415]\n[  2.0000,   0.9093]\n\nvec2\n\n[  5.0000,  -0.9589]\n[  4.0000,  -0.7568]\n[  6.0000,  -0.2794]\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 3455840, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMMss.jpg?s=128&g=1", "display_name": "morsecoder", "link": "https://stackoverflow.com/users/3455840/morsecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 27829185, "answer_count": 3, "score": 1, "last_activity_date": 1420674288, "creation_date": 1420665812, "question_id": 27828880, "link": "https://stackoverflow.com/questions/27828880/c-stdset-with-a-comparator-that-is-time-based", "title": "C++ std::set with a comparator that is time based?", "body": "<p>Is it bad for Comparators used in a C++ std::set to depend on time? i.e. Comparators that will return one thing at one time, but may return another result at a different time even for the exact same objects?</p>\n\n<p>I've read that std::sets are weakly ordered with the comparator given. <strong>Maybe there a way to do a refresh of the ordering right before getting the <code>mySet.begin()</code> or <code>myset.end()</code> values?</strong></p>\n\n<p>As an example of a comparator that could change with time, think about Events and wanting to prioritize events that are closer to the current time:</p>\n\n<pre><code>class Event {\npublic:\n    int64_t nTime;\n}\n\nclass EventComparator {\n    // pa &lt; pb\n    bool operator()(Event* pa, Event* pb) {\n        int64_t now = GetTime();\n        return (std::abs(pa-&gt;nTime - now) &gt; std::abs(pb-&gt;nTime - now));\n    }\n}\n</code></pre>\n\n<p>Maybe there is a better way to sort events by time? Obviously, I could just do a vector and loop through to find the largest event, but just figured it would be good to use built in slot for a comparator.</p>\n"}, {"tags": ["c++", "qt", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 3630031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff3bf32b4ba33783e1d318a546b7a08?s=128&d=identicon&r=PG&f=1", "display_name": "serigado", "link": "https://stackoverflow.com/users/3630031/serigado"}, "edited": false, "score": 2, "creation_date": 1450785736, "post_id": 28091807, "comment_id": 56571826, "body": "Problem still occurs and solution also works for OpenCV 3.1, Qt 5.5 with MinGW 4.92, Cmake 3.4.0"}, {"owner": {"reputation": 1637, "user_id": 8464442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tcepL.jpg?s=128&g=1", "display_name": "AAEM", "link": "https://stackoverflow.com/users/8464442/aaem"}, "edited": false, "score": 0, "creation_date": 1571599553, "post_id": 28091807, "comment_id": 103285746, "body": "problem still happen in case of opencv-3.4.7 &amp; Qt 5.11"}], "tags": [], "owner": {"reputation": 1445, "user_id": 4483047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZMPJ.jpg?s=128&g=1", "display_name": "Neimsz", "link": "https://stackoverflow.com/users/4483047/neimsz"}, "is_accepted": false, "score": 33, "last_activity_date": 1421938558, "creation_date": 1421938558, "answer_id": 28091807, "question_id": 27828740, "link": "https://stackoverflow.com/questions/27828740/opencv-3-0-videoio-error/28091807#28091807", "title": "OpenCV 3.0 videoio error", "body": "<p>I just ran into the same issue when compiling opencv3.0.0 on windows with mingw.\nI found a solutions following this <a href=\"http://code.opencv.org/issues/4107\" rel=\"noreferrer\">link</a>.</p>\n\n<p>Go in the repository where opencv sources are located. </p>\n\n<p>For me it was \"C:/opencv/sources/\".</p>\n\n<p>Go to the \"Cmake/\" folder and search for the file named \"OpenCVCompilerOptions.cmake\"</p>\n\n<p>You just comment the line :</p>\n\n<pre><code>add_extra_compiler_option(-Werror=non-virtual-dtor)\n</code></pre>\n\n<p>So it should become</p>\n\n<pre><code>#add_extra_compiler_option(-Werror=non-virtual-dtor)\n</code></pre>\n\n<p>Now, you're good to configure and generate the makefile with cmake, the mingw32-make command line should work fine.</p>\n"}], "owner": {"reputation": 171, "user_id": 4067934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb1426d74ee595340b57e0445ea02ae?s=128&d=identicon&r=PG&f=1", "display_name": "spy02", "link": "https://stackoverflow.com/users/4067934/spy02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14378, "favorite_count": 6, "answer_count": 1, "score": 17, "last_activity_date": 1447940950, "creation_date": 1420665116, "last_edit_date": 1420666809, "question_id": 27828740, "link": "https://stackoverflow.com/questions/27828740/opencv-3-0-videoio-error", "title": "OpenCV 3.0 videoio error", "body": "<p>I tried to compile OpenCV 3.0 alpha library for Qt Creator 5.4 with CMake 3.1.0, but I have error:</p>\n\n<pre><code>[ 44%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap\n_dshow.cpp.obj\nD:\\opencv\\sources\\modules\\videoio\\src\\cap_dshow.cpp:122:11: error: base class 's\ntruct IUnknown' has accessible non-virtual destructor [-Werror=non-virtual-dtor]\n\n interface IEnumPIDMap : public IUnknown\n           ^\nD:\\opencv\\sources\\modules\\videoio\\src\\cap_dshow.cpp:141:11: error: base class 's\ntruct IUnknown' has accessible non-virtual destructor [-Werror=non-virtual-dtor]\n\n interface IMPEG2PIDMap : public IUnknown\n           ^\nD:\\opencv\\sources\\modules\\videoio\\src\\cap_dshow.cpp:231:11: error: base class 's\ntruct IUnknown' has accessible non-virtual destructor [-Werror=non-virtual-dtor]\n\n interface ISampleGrabberCB : public IUnknown\n           ^\nD:\\opencv\\sources\\modules\\videoio\\src\\cap_dshow.cpp:245:11: error: base class 's\ntruct IUnknown' has accessible non-virtual destructor [-Werror=non-virtual-dtor]\n\n interface ISampleGrabber : public IUnknown\n           ^\ncc1plus.exe: some warnings being treated as errors\nmodules\\videoio\\CMakeFiles\\opencv_videoio.dir\\build.make:150: recipe for target\n'modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_dshow.cpp.obj' failed\nmingw32-make[2]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_dsho\nw.cpp.obj] Error 1\nCMakeFiles\\Makefile2:2719: recipe for target 'modules/videoio/CMakeFiles/opencv_\nvideoio.dir/all' failed\nmingw32-make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2\n\nmakefile:136: recipe for target 'all' failed\nmingw32-make: *** [all] Error 2\n</code></pre>\n\n<p>I selected:</p>\n\n<pre><code>CMAKE --&gt; CMAKE_BUILD_TYPE = Debug\nWITH --&gt; WITH_EIGEN = 0\nWITH --&gt; WITH_OPENGL = 0\nWITH --&gt; WITH_IPP = 0\n</code></pre>\n\n<p>The rest of settings is default. My OS is Windows 7 64 bit. OpenCV library source: <a href=\"http://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.0.0-alpha/\">http://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.0.0-alpha/</a> </p>\n\n<p>What is wrong? Any ideas?</p>\n"}, {"tags": ["c++", "debugging", "gdb", "mingw32"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1420669380, "post_id": 27828589, "comment_id": 44065401, "body": "Why do you use the mingw32-g++ executable at all? And why it has a different version that g++?"}, {"owner": {"reputation": 1819, "user_id": 2059662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/995b46d292bdd2e74f81d247a14cf8bc?s=128&d=identicon&r=PG", "display_name": "Ludwik", "link": "https://stackoverflow.com/users/2059662/ludwik"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1420669780, "post_id": 27828589, "comment_id": 44065585, "body": "THe simple truth is, it was the default executable in my code::blocks setup, and I&#39;ve done a lot in it now. When trying to change to g++ and rebuilding the whole project, I get &quot;cannot find -lSDL2&quot; and similar errors, even tho all other settings are the exact same, so linker should have no problems finding them. Looking closer at the output, one notices the linker does actually go over the libraries I&#39;m providing, outputtin something like &quot;skipping incompatible [path to library] when looking for [library]. That seems even harder to fix so I was hoping someone could solve this instead."}], "owner": {"reputation": 1819, "user_id": 2059662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/995b46d292bdd2e74f81d247a14cf8bc?s=128&d=identicon&r=PG", "display_name": "Ludwik", "link": "https://stackoverflow.com/users/2059662/ludwik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420664559, "creation_date": 1420664559, "question_id": 27828589, "link": "https://stackoverflow.com/questions/27828589/gdb-not-debugging-mingw32-g-compiled-code-well-but-works-with-g", "title": "gdb not debugging mingw32-g++ compiled code well, but works with g++", "body": "<p>I have a simple c++ program I'd like to debug with gdb. When I compile it with \n<code>g++ -g main.cpp -o main.exe</code>\nI can use gdb just fine with the resulting executable. But when I use\n<code>mingw32-g++ -g main.cpp -o main.exe</code>\ngdb says things such as </p>\n\n<blockquote>\n  <p>in ?? ()</p>\n</blockquote>\n\n<p>and functionality is limited; I seem to be able to set break points and run the program, but stepping and such yields the message </p>\n\n<blockquote>\n  <p>Cannot find bounds of current function</p>\n</blockquote>\n\n<p>As I said, this only happens when compiling with the <code>mingw32-g++</code> executable, and not with the plain <code>g++</code> one.</p>\n\n<p>Why is this, and how can I debug executables created with <code>migw32-g++</code>? Both executables run without issue.</p>\n\n<p><strong>Extra info:</strong></p>\n\n<ul>\n<li>Am on Windows 7.  </li>\n<li>g++ version: 4.8.2 </li>\n<li>mingw32-g++ version: 4.8.1</li>\n<li>gdb version: 7.6.50.[lots of numbers]-cvs</li>\n</ul>\n\n<p>If there's any other info I can provide to help find the issue, just let me know.</p>\n"}, {"tags": ["c++", "protocol-buffers"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1420665127, "post_id": 27828491, "comment_id": 44063393, "body": "Which part of the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.zero_copy_stream\" rel=\"nofollow noreferrer\">zero copy API</a> is unsuitable for you?"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 2, "creation_date": 1420668118, "post_id": 27828491, "comment_id": 44064824, "body": "<code>sizeof</code> operator returns the size of the data structure in <i>bytes</i>, so for 1000-item array of <code>int</code>s it is probably 4000 and your loop will index the array far past its actual end, thus causing undefined behavior. Use <code>sizeof(hadware_data)&#47;sizeof(hardware_data[0])</code> to calculate the <i>number of items</i> of the array."}, {"owner": {"reputation": 81, "user_id": 4430495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da28cbe3e8a4f718c1371df618a3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "rbwilliams", "link": "https://stackoverflow.com/users/4430495/rbwilliams"}, "edited": false, "score": 0, "creation_date": 1420673565, "post_id": 27828491, "comment_id": 44067077, "body": "Of course.... I only placed that as example code. Your comment, while correct, does nothing to answer the question of how to use the protocol buffer."}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1420693361, "post_id": 27828491, "comment_id": 44072065, "body": "@KerrekSB That&#39;s a low-level API that has nothing to do with what rbwilliams wants."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "edited": false, "score": 0, "creation_date": 1420710410, "post_id": 27828491, "comment_id": 44078470, "body": "@KentonVarda: Ah, right, because the OP wants varint encoding. If the serialization speed is an issue, then perhaps the fixed-width integers are worth considering."}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1420776709, "post_id": 27828491, "comment_id": 44111297, "body": "@KerrekSB: Even then, the protobuf &quot;zero copy&quot; API is not actually a way to achieve zero-copy use of protobufs. It&#39;s just the library&#39;s I/O stream abstraction, named &quot;zero copy&quot; for relatively silly reasons. <a href=\"https://capnproto.org\" rel=\"nofollow noreferrer\">Cap&#39;n Proto</a>, on the other hand, is an actual zero-copy-capable serialization system with an otherwise similar design to protobufs. (Disclosure: I&#39;m the author of both of these libraries.)"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1421397870, "post_id": 27828491, "comment_id": 44351703, "body": "@rbwilliams \u2013 I know. That&#39;s why I&#39;ve posted it into a comment space. If my note was related to your question, I would have posted it as an answer. That&#39;s how it works, I suppose..."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4430495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da28cbe3e8a4f718c1371df618a3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "rbwilliams", "link": "https://stackoverflow.com/users/4430495/rbwilliams"}, "edited": false, "score": 0, "creation_date": 1420722333, "post_id": 27833421, "comment_id": 44085176, "body": "Thanks Kenton,It looks like there&#39;s no efficient way for me to use the proto buffs. Remember that this is an embedded platform. I&#39;m processing lots of radio spectrum data in real time. So performance is a critical issue for me. Excessive copying of data from one place to another is very wasteful. I think this is a good reason to not use the proto buffs."}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 81, "user_id": 4430495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da28cbe3e8a4f718c1371df618a3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "rbwilliams", "link": "https://stackoverflow.com/users/4430495/rbwilliams"}, "edited": false, "score": 0, "creation_date": 1420776556, "post_id": 27833421, "comment_id": 44111266, "body": "@rbwilliams: I agree, the C++ protobuf library probably does too much allocation to be usable in an embedded environment. You might look at protobuf-c to see if it&#39;s better. Alternatively, you might also have more luck with <a href=\"https://capnproto.org\" rel=\"nofollow noreferrer\">Cap&#39;n Proto</a>, which is all about avoiding copies. Cap&#39;n Proto doesn&#39;t quite allow you to &quot;annex&quot; an external array into a message currently, but it would be quite easy to add and I&#39;d be happy to do so if you need it. (Disclosure: I&#39;m the author of both the Protobuf C++ library and Cap&#39;n Proto.)"}], "tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": false, "score": 1, "last_activity_date": 1420694392, "creation_date": 1420694392, "answer_id": 27833421, "question_id": 27828491, "link": "https://stackoverflow.com/questions/27828491/c-protocol-buffer-sending-integer-array/27833421#27833421", "title": "C++ Protocol Buffer, sending integer array", "body": "<p>On the wire, a packed repeated int32 is encoded as a series of varints. A varint is a variable-width encoding in which smaller values take less space. Of course, this isn't how the data is represented in your array, so embedding it into the message zero-copy isn't really possible.</p>\n\n<p>In fact, though, you're currently doing two copies, and you can eliminate one of them. Instead of allocating <code>int hardware_data[1000]</code> directly, consider sticking the data directly into a <code>google::protobuf::RepeatedField&lt;int&gt;</code>. You can then make clever use of <code>Swap()</code> to move that data into a message without a copy:</p>\n\n<pre><code>RepeatedField&lt;int&gt; hardware_data;\nhardware_data.Reserve(expected_size);\nget_data_somehow(&amp;hardware_data);\n\n// later\nproto.mutable_data()-&gt;Swap(&amp;hardware_data);\n</code></pre>\n\n<p>After you've serialized the message, you may wish to additionally Swap() the field back, so that you can reuse the memory that was already reserved. (<code>RepeatedField::Clear()</code> will not free the underlying memory, just mark it for reuse.)</p>\n\n<p>With all that said, serializing the message will still require copying the data as part of encoding it. Even if you changed the encoding to packed repeated fixed32 (which is actually encoded as 32-bit integers on the wire), there's no way to convince the library to use your memory directly.</p>\n"}], "owner": {"reputation": 81, "user_id": 4430495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da28cbe3e8a4f718c1371df618a3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "rbwilliams", "link": "https://stackoverflow.com/users/4430495/rbwilliams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3883, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1420694392, "creation_date": 1420664171, "last_edit_date": 1420667743, "question_id": 27828491, "link": "https://stackoverflow.com/questions/27828491/c-protocol-buffer-sending-integer-array", "title": "C++ Protocol Buffer, sending integer array", "body": "<p>I have an embedded C++ project where I'm reading a series of int32's from a hardware device, then packing them into an int array as part of large data structure, and then sending to a remote system over TCP/IP. So, I was using a simple data struct with a bunch of stuff defined and now I want to convert this to use Protocol Buffers.\nSo, I was thinking of using a \"repeated int32 data\" as the element of my proto buff. But I want to avoid  using a loop such as this:</p>\n\n<pre><code>int hardware_data[1000]; // An array that holds the data read from the hardware\nfor(int i=0; i&lt; sizeof(hardware_data); i++ )\n{\n    proto.add_data( hardware_data[i] );\n}\n</code></pre>\n\n<p>I'd much rather use an efficient method, such as making the proto buff just point to the existing hardware_data[] array (a zero copy method), or using memcpy from hardware_data into proto.data.</p>\n\n<p>I understand how to setup the memcpy(), but how then does the proto buff know how many elements are in the proto.data \"array\"? \nCan I still use the proto.data_size() to get the number of elements?\nIs there an efficient way to move the data from my hardware read to the proto buff for sending?\nIs there a better way to do this?</p>\n\n<p>Kerrik,\nI wasn't aware of the zero copy API. Here's my proto definition:</p>\n\n<pre><code>message hardware_data \n{\noptional    Lob                     lob             = 1;\noptional    int32                   taskSeqNum      = 2;\noptional    int32                   secondsOfDay    = 3;\noptional    float                   IQOutRateKhz    = 4;\noptional    float                   IQBwKhz         = 5;\noptional    int32                   tStart          = 6;\noptional    int32                   tOffset         = 7;\noptional    float                   collectionTime  = 8;\noptional    int32                   numSamples      = 9;\noptional    int32                   chunk           = 10;\noptional    int32                   dimSize         = 11;\nrepeated    int32                   data            = 12 [packed=true];\n}\n</code></pre>\n\n<p>I'm not sure how the zero copy would play into this proto buff definition. </p>\n"}, {"tags": ["c++", "arrays", "memory", "dynamic"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1420663574, "post_id": 27828320, "comment_id": 44062570, "body": "Use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> with <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\"><code>shrink_to_fit()</code></a> (C++11)."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1420663755, "post_id": 27828320, "comment_id": 44062677, "body": "Use <code>std::vector&lt;std::string&gt;</code> and only <code>push_back</code> the number of strings the user enters, no re-sizing needed afterwards."}, {"owner": {"reputation": 13, "user_id": 3648057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryI2d.jpg?s=128&g=1", "display_name": "Amr Shrief", "link": "https://stackoverflow.com/users/3648057/amr-shrief"}, "edited": false, "score": 0, "creation_date": 1420663908, "post_id": 27828320, "comment_id": 44062770, "body": "the problem is we haven&#39;t learnt vectors yet and we can&#39;t use functions like these ready ones."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1420663997, "post_id": 27828320, "comment_id": 44062818, "body": "Then you&#39;ll have to copy the elements into a smaller array, then delete the original one."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1420663999, "post_id": 27828320, "comment_id": 44062819, "body": "@crashmstr It&#39;s arguably better to vector.reserve(1000) upfront and then vector.shrink_to_fit() after pushing back all your entries (if you know you have the headroom).  That way you only do 1 reallocation instead of several reallocations as you push_back() past the capacity of the vector."}, {"owner": {"reputation": 13, "user_id": 3648057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryI2d.jpg?s=128&g=1", "display_name": "Amr Shrief", "link": "https://stackoverflow.com/users/3648057/amr-shrief"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1420664366, "post_id": 27828320, "comment_id": 44063004, "body": "@juanchopanza when i try to move it to the new array, how can i tell the size that the user entered?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1420664464, "post_id": 27828320, "comment_id": 44063051, "body": "How were you going to reduce the array without knowing the length to reduce it to?"}, {"owner": {"reputation": 13, "user_id": 3648057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryI2d.jpg?s=128&g=1", "display_name": "Amr Shrief", "link": "https://stackoverflow.com/users/3648057/amr-shrief"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1420664528, "post_id": 27828320, "comment_id": 44063088, "body": "@juanchopanza if i knew the size from the beginning why would i even need a dynamic array?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1420664604, "post_id": 27828320, "comment_id": 44063136, "body": "Doh, because the size is only known at runtime?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1420664777, "post_id": 27828320, "comment_id": 44063222, "body": "You have to keep track of how many items the user added. Although you should have done that to add items to the end of the array anyways."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1420664934, "post_id": 27828320, "comment_id": 44063304, "body": "Short answer: You can&#39;t without creating new array, copying, deleting original (practically, with modern standard C++)."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1420683450, "post_id": 27828320, "comment_id": 44069778, "body": "@mbgda But would you expect a user to actually type 1000 values? Maybe for a file, but for user entry that would be a poor interface. I&#39;m guessing OP just wanted to make sure there was &quot;enough&quot; (i.e. way more than he would need)"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1420723790, "post_id": 27828320, "comment_id": 44086176, "body": "@crashmaster It&#39;s probably overkill for user entry, yeah.  And obviously the time saved by skipping an allocation is nothing compared to the time spent waiting for the user to enter another input.  I just felt it was important to mention for the benefit of the poster since it&#39;s the better choice in many cases."}], "answers": [{"tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 1, "last_activity_date": 1420669344, "last_edit_date": 1420669344, "creation_date": 1420668124, "answer_id": 27829427, "question_id": 27828320, "link": "https://stackoverflow.com/questions/27828320/how-to-delete-the-unused-space-in-a-dynamic-array-in-c/27829427#27829427", "title": "how to delete the unused space in a dynamic array in C++", "body": "<p>Memory allocators do not typically allow for deallocating parts of allocated memory, and the allocation facilities specified in C++ certainly do not provide any interface to such functionality.</p>\n\n<hr>\n\n<p>There is a standard function 'realloc' which may allow an allocated block of memory to be, apparently, expanded. However the way this typically works is that the underlying allocator checks to see if previously allocated block of memory is already large enough. That is, when you allocate, say, 1000 bytes, the allocator may provide a chunk of memory that is <em>larger</em> than 1000 bytes.</p>\n\n<p>That hidden 'extra' memory is valid to access just as if you had asked for it, but since you didn't ask for it and don't know how much, if any, extra memory is there, you are limited to only accessing the bytes you actually requested.</p>\n\n<p><code>realloc</code> will provide to you allocated memory of the new size, with the same contents as the memory pointed to by the parameter you pass to it. It may do this by discovering that the existing block of memory is large enough for the requested new size, in which case it simply returns the same pointer you pass to it. In this case you know there was extra memory and now you can access up to the size you requested.</p>\n\n<p>If there's not enough 'extra' memory, or if the <code>realloc</code> implementation is simple, then <code>realloc</code> will allocate a new block, copy the data into the new block, free the old block, and return the new pointer.</p>\n\n<hr>\n\n<p>Reducing the amount of memory for an array will pretty much always mean allocating a new, smaller array, copying the content into the new array, and then freeing the old, larger array. For example <code>vector::shrink_to_fit</code> and the old 'swap with empty' trick do this.</p>\n\n<p>If you want to avoid having too much memory allocated, then you should simply avoid allocating too much in the first place. You should just allocate the correct amount to start with.</p>\n\n<hr>\n\n<p>One side benefit if this approach is that it means you won't engage in the bad practice of, for example, allocating an array of some fixed size which you think is larger than you will ever need:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n  std::string user_input[10000]; // should be enough for anyone\n  int count = 0;\n\n  for (std::string s; std::cin &gt;&gt; s;) {\n    user_input[count] = s;\n    ++count;\n  }\n\n  magic_array_size_reducing_function(user_input, count);\n\n}\n</code></pre>\n\n<p>The above code is wrong, because the user might exceed the fixed limit and cause the program to break. In fact, any time you see such fixed limits you should be suspicious, and the code probably needs to be fixed. You should also be suspicious of any beginning programming book or course that asks you to do this.</p>\n\n<p>The right way to write this is to not have fixed limits, and instead dynamically increase resource usage as necessary.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main() {\n  std::vector&lt;std::string user_input;\n\n  for (std::string s; std::cin &gt;&gt; s;) {\n    user_input.push_back(s);\n  }\n\n  //...\n}\n</code></pre>\n\n<p>Doing this by hand simply means doing the allocation/copy/deallocation dance as necessary. Below is an example where I implement just the bare minimum.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct dynamic_string_array {\n  int capacity, size;\n  std::string *user_input;\n\n  dynamic_string_array() {\n    capacity = 0;\n    size = 0;\n    user_input = nullptr;\n  }\n  ~dynamic_string_array() {\n    delete [] user_input;\n  }\n\n  void push_back(std::string const &amp;s) {\n    if (size == capacity) {\n      int new_capacity = capacity ? 16 : capacity * 1.5;\n      std::string *new_user_input = new std::string[new_capacity];\n      for (int i = 0; i &lt; size; ++i) {\n        new_user_input[i] = user_input[i];\n      }\n      // ---\n      delete [] user_input;\n      user_input = new_user_input;\n      capacity = new_capacity;\n    }\n    user_input[size] = s;\n    ++size;\n  }\n};\n\nint main() {\n  dynamic_string_array user_input;\n\n  for (std::string s; std::cin &gt;&gt; s;) {\n    user_input.push_back(s);\n  }\n\n  //...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3648057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryI2d.jpg?s=128&g=1", "display_name": "Amr Shrief", "link": "https://stackoverflow.com/users/3648057/amr-shrief"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2001, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1420669344, "creation_date": 1420663512, "question_id": 27828320, "link": "https://stackoverflow.com/questions/27828320/how-to-delete-the-unused-space-in-a-dynamic-array-in-c", "title": "how to delete the unused space in a dynamic array in C++", "body": "<p>i want to take a simple array of string from the user in a dynamic array. If i made the size of the array 1000 for example. how to delete the unused space in the array so that it fits just for the size the user entered without deleting the whole array?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 1, "creation_date": 1420663179, "post_id": 27828169, "comment_id": 44062362, "body": "Remove the <code>()</code> around <code>(LIB_API)</code> and try again."}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1420663369, "post_id": 27828169, "comment_id": 44062460, "body": "That causes more errors: error C2143: syntax error : missing &#39;)&#39; before &#39;<i>&#39; error C2143: syntax error : missing &#39;{&#39; before &#39;</i>&#39; error C2059: syntax error : &#39;)&#39;"}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1420664329, "post_id": 27828169, "comment_id": 44062986, "body": "Sorry I jumped the gun on you. You are right. Once I implemented the answer below I ran into another issue that was fixed by removing the parenthesis. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1420663698, "post_id": 27828244, "comment_id": 44062650, "body": "Upticked, Matt, you will likely incur a minimal hit by the latter method mentioned here, <code>typedef struct ToolState {....} ToolState;</code> the rest of the code should require no changes beyond that if you&#39;re using the same MS toolchain for both C and C++ compilation."}, {"owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "edited": false, "score": 0, "creation_date": 1420664368, "post_id": 27828244, "comment_id": 44063006, "body": "Thank you both of you. I appreciate the extra notes and suggestions. They were very helpful. Everything works now. :)"}], "tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": true, "score": 2, "last_activity_date": 1420663210, "creation_date": 1420663210, "answer_id": 27828244, "question_id": 27828169, "link": "https://stackoverflow.com/questions/27828169/syntax-error-c2059-when-building-building-c-application-using-c-c-dll-header/27828244#27828244", "title": "Syntax error C2059 when building building C application using C/C++ DLL header", "body": "<p>In C, structs are not types, so you must use <code>struct Foo</code> and <code>enum Bar</code> where in C++ you are able to use <code>Foo</code> and <code>Bar</code>.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>In C++, you can still use the old syntax even when the type is a class.</li>\n<li>In C, people often use <code>typedef struct Foo Foo</code> which allows the same syntax as in C++ then.</li>\n</ul>\n"}], "owner": {"reputation": 339, "user_id": 2615404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/735fc0be7e9eaa1e6f34d013804e0a45?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2615404/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 27828244, "answer_count": 1, "score": 1, "last_activity_date": 1420663210, "creation_date": 1420662923, "last_edit_date": 1495535170, "question_id": 27828169, "link": "https://stackoverflow.com/questions/27828169/syntax-error-c2059-when-building-building-c-application-using-c-c-dll-header", "title": "Syntax error C2059 when building building C application using C/C++ DLL header", "body": "<p>I'm attempting to translate a C++ DLL header file into a C/C++ compatible header. While I've gotten most of the major constructs in, I'm running into one last compiler issue I can't seem to explain. The following code works fine in C++ but when I attempt to compile a C application which just includes this file I get errors for my function definitions in my header file.</p>\n\n<p>Code.h:</p>\n\n<pre><code>typedef void *PVOID;\ntypedef PVOID HANDLE;\n#define WINAPI  __stdcall\n\n#ifdef LIB_EXPORTS\n    #define LIB_API __declspec(dllexport)\n#else\n    #define LIB_API __declspec(dllimport)\n#endif\n\nstruct ToolState\n{\n    HANDLE DriverHandle;\n    HANDLE Mutex;\n    int LockEnabled;\n    int Type;\n};\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n(LIB_API) int SetRate(ToolState *Driver, int rate);\n\n(LIB_API) void EnableLock(ToolState *Driver) ;\n\n(LIB_API) int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n\n//These also give me the same error:\n//LIB_API WINAPI int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n//__declspec(dllimport) WINAPI int SendPacket(ToolState *Driver, unsigned char *OutBuffer, int frameSize);\n\n//Original C++ call that works fine with C++ but has multiple issues in C\n//LIB_API int SetRate(ToolState *Driver, int rate);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>error C2059: syntax error : 'type'\nerror C2059: syntax error : 'type'\nerror C2059: syntax error : 'type'\n</code></pre>\n\n<p>Google searching hasn't generated any relevant results. The following threads were close but don't exactly answer my question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7948417/c2059-syntax-error-using-declspec-macro-for-one-function-compiles-fine-without\">C2059 syntax error using declspec macro for one function; compiles fine without it</a></p>\n\n<p><a href=\"http://support.microsoft.com/kb/117687/en-us\" rel=\"nofollow noreferrer\">http://support.microsoft.com/kb/117687/en-us</a></p>\n\n<p>Why is this syntax error occuring?</p>\n"}, {"tags": ["c++", "algorithm", "avl-tree"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1420664216, "post_id": 27828113, "comment_id": 44062933, "body": "Augment the node to store the size of the left subtree. What you have then is an <a href=\"http://en.wikipedia.org/wiki/Order_statistic_tree\" rel=\"nofollow noreferrer\">order statistic tree</a> that has an <code>O(log n)</code> algorithm for finding nth element. With regular bst the best you can do is iterate the tree inorder which has linear complexity."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1420665386, "post_id": 27828113, "comment_id": 44063527, "body": "@user2079303 In my answer I added the size of the whole tree. Is holding the size of the left subtree more convenient?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1420671294, "post_id": 27828113, "comment_id": 44066234, "body": "@anatolyg I think storing the total size of the tree at node works just as well. In fact, it makes finding the reverse nth (the nth biggest) simpler since you need the size of the tree at root for that. When the size of left subtree is stored in node, the total size of the tree at root must be maintained separately."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4423367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79789a56308de02b15534ade9030c896?s=128&d=identicon&r=PG&f=1", "display_name": "New Year", "link": "https://stackoverflow.com/users/4423367/new-year"}, "edited": false, "score": 0, "creation_date": 1420665873, "post_id": 27828766, "comment_id": 44063761, "body": "I don&#39;t have to change the left rotation? Where i have to change more? Right rotation, insert and remove? Is  x-&gt;n_nodes +=1;     y-&gt;n_nodes -=1;     T2-&gt;n_nodes +=1; ok?"}, {"owner": {"reputation": 21, "user_id": 4423367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79789a56308de02b15534ade9030c896?s=128&d=identicon&r=PG&f=1", "display_name": "New Year", "link": "https://stackoverflow.com/users/4423367/new-year"}, "edited": false, "score": 0, "creation_date": 1420666374, "post_id": 27828766, "comment_id": 44064017, "body": "I think i did not understand your sugestion. I have a lot of difficulties with this tree"}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1420665236, "creation_date": 1420665236, "answer_id": 27828766, "question_id": 27828113, "link": "https://stackoverflow.com/questions/27828113/avl-tree-most-efficient-way-to-print-a-value-by-location-c/27828766#27828766", "title": "AVL TREE - Most efficient way to print a value, by location. C++", "body": "<p>The advice you heard is correct: you should add a node counter to your <code>node</code> structure:</p>\n\n<pre><code>struct node\n{\n    int key;\n    struct node *left;\n    struct node *right;\n    int height;\n    int n_nodes;\n};\n</code></pre>\n\n<p>It should hold the number of nodes in the tree. Assuming it's correct, you can improve the algorithm for finding a node with a target position: it will know exactly in which branch of the tree to look (<code>left</code> or <code>right</code>), which will make the search faster (current <code>imprime</code> implementation is O(n)).</p>\n\n<p>So, how to make it so the <code>n_nodes</code> field holds the right value? Fortunately, you already have an example: <code>height</code>. Look where your existing code changes it; these are roughly the places where you have to update <code>n_nodes</code>, too. Most of them are trivial (just add 1 to it); the more interesting ones are the rotation functions:</p>\n\n<pre><code>struct node *rightRotate(struct node *y)\n{\n    struct node *x = y-&gt;left;\n    struct node *T2 = x-&gt;right;\n    // Perform rotation\n    x-&gt;right = y;\n    y-&gt;left = T2;\n    // Update heights\n    y-&gt;height = max(height(y-&gt;left), height(y-&gt;right))+1;\n    x-&gt;height = max(height(x-&gt;left), height(x-&gt;right))+1;\n    // Update numbers of nodes\n    x-&gt;n_nodes = ...;\n    y-&gt;n_nodes = ...;\n    T2-&gt;n_nodes = ...;\n    // Return new root\n    return x;\n}\n</code></pre>\n\n<p>So it transforms the tree like this:</p>\n\n<pre><code>    y                   x\n   / \\                 / \\\n  x   D               A   y\n / \\         ==&gt;         / \\\nA   T2                  T2  D\n   / \\                 / \\\n  B   C               B   C\n</code></pre>\n\n<p>Here <code>A</code>, <code>B</code>, <code>C</code> and <code>D</code> are trees whose sizes your program knows; let's denote their sizes as <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code>. So the transformation changes these sizes like this:</p>\n\n<pre><code>size of x:      from a+b+c+2       to     a+b+c+d+3\nsize of y:      from a+b+c+d+3     to     b+c+d+2\nsize of T2:     unchanged\n</code></pre>\n\n<p>So just transform this to code.</p>\n"}], "owner": {"reputation": 21, "user_id": 4423367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79789a56308de02b15534ade9030c896?s=128&d=identicon&r=PG&f=1", "display_name": "New Year", "link": "https://stackoverflow.com/users/4423367/new-year"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1420665236, "creation_date": 1420662699, "question_id": 27828113, "link": "https://stackoverflow.com/questions/27828113/avl-tree-most-efficient-way-to-print-a-value-by-location-c", "title": "AVL TREE - Most efficient way to print a value, by location. C++", "body": "<p>Hey I have to find the most eficient way to print a number by giving the postion. The input is like this:</p>\n\n<pre><code>8 (N-&gt; N Numbers)\nINS 100 (Add 100 to the tree)\nINS 200 (Add 200 to the tree)\nINS 300 (Add 300 to the tree)\nREM 200 (Remove the number 200 from the tree)\nPER 1 (Have to output the biggest number in the tree-&gt; Shoud print 300)\nINS 1000 (Add 1000 to the tree)\nPER 1 ((Have to output the biggest number in the tree-&gt; Shoud print 1000))\nPER 2 (I have to output the second biggest number so:  300)\n</code></pre>\n\n<p>I have a way to print like this, but is very slow and I have to maintain a O(N * log(N)).</p>\n\n<p>Here is my full code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\n// An AVL tree node\nstruct node\n{\n    int key;\n    struct node *left;\n    struct node *right;\n    int height;\n};\n// A utility function to get maximum of two integers\nint max(int a, int b);\n// A utility function to get height of the tree\nint height(struct node *N)\n{\n    if (N == NULL)\n            return 0;\n    return N-&gt;height;\n}\n// A utility function to get maximum of two integers\nint max(int a, int b)\n{\n    return (a &gt; b)? a : b;\n}\n/* Helper function that allocates a new node with the given key and\n    NULL left and right pointers. */\nstruct node* newNode(int key)\n{\n    struct node* node = (struct node*)\n                                            malloc(sizeof(struct node));\n    node-&gt;key   = key;\n    node-&gt;left   = NULL;\n    node-&gt;right  = NULL;\n    node-&gt;height = 1;  // new node is initially added at leaf\n    return(node);\n}\n// A utility function to right rotate subtree rooted with y\n// See the diagram given above.\nstruct node *rightRotate(struct node *y)\n{\n    struct node *x = y-&gt;left;\n    struct node *T2 = x-&gt;right;\n    // Perform rotation\n    x-&gt;right = y;\n    y-&gt;left = T2;\n    // Update heights\n    y-&gt;height = max(height(y-&gt;left), height(y-&gt;right))+1;\n    x-&gt;height = max(height(x-&gt;left), height(x-&gt;right))+1;\n    // Return new root\n    return x;\n}\n// A utility function to left rotate subtree rooted with x\n// See the diagram given above.\nstruct node *leftRotate(struct node *x)\n{\n    struct node *y = x-&gt;right;\n    struct node *T2 = y-&gt;left;\n    // Perform rotation\n    y-&gt;left = x;\n    x-&gt;right = T2;\n    //  Update heights\n    x-&gt;height = max(height(x-&gt;left), height(x-&gt;right))+1;\n    y-&gt;height = max(height(y-&gt;left), height(y-&gt;right))+1;\n    // Return new root\n    return y;\n}\n// Get Balance factor of node N\nint getBalance(struct node *N)\n{\n    if (N == NULL)\n            return 0;\n    return height(N-&gt;left) - height(N-&gt;right);\n}\nstruct node* insert(struct node* node, int key)\n{\n    /* 1.  Perform the normal BST rotation */\n    if (node == NULL)\n            return(newNode(key));\n    if (key &lt; node-&gt;key)\n            node-&gt;left  = insert(node-&gt;left, key);\n    else\n            node-&gt;right = insert(node-&gt;right, key);\n    /* 2. Update height of this ancestor node */\n    node-&gt;height = max(height(node-&gt;left), height(node-&gt;right)) + 1;\n    /* 3. Get the balance factor of this ancestor node to check whether\n           this node became unbalanced */\n    int balance = getBalance(node);\n    // If this node becomes unbalanced, then there are 4 cases\n    // Left Left Case\n    if (balance &gt; 1 &amp;&amp; key &lt; node-&gt;left-&gt;key)\n            return rightRotate(node);\n    // Right Right Case\n    if (balance &lt; -1 &amp;&amp; key &gt; node-&gt;right-&gt;key)\n            return leftRotate(node);\n    // Left Right Case\n    if (balance &gt; 1 &amp;&amp; key &gt; node-&gt;left-&gt;key)\n    {\n            node-&gt;left =  leftRotate(node-&gt;left);\n            return rightRotate(node);\n    }\n    // Right Left Case\n    if (balance &lt; -1 &amp;&amp; key &lt; node-&gt;right-&gt;key)\n    {\n            node-&gt;right = rightRotate(node-&gt;right);\n            return leftRotate(node);\n    }\n    /* return the (unchanged) node pointer */\n    return node;\n}\n/* Given a non-empty binary search tree, return the node with minimum\n   key value found in that tree. Note that the entire tree does not\n   need to be searched. */\nstruct node * minValueNode(struct node* node)\n{\n    struct node* current = node;\n    /* loop down to find the leftmost leaf */\n    while (current-&gt;left != NULL)\n            current = current-&gt;left;\n    return current;\n}\nstruct node* apagaNode(struct node* root, int key)\n{\n    // STEP 1: PERFORM STANDARD BST DELETE\n    if (root == NULL)\n            return root;\n    // If the key to be deleted is smaller than the root's key,\n    // then it lies in left subtree\n    if ( key &lt; root-&gt;key )\n            root-&gt;left = apagaNode(root-&gt;left, key);\n    // If the key to be deleted is greater than the root's key,\n    // then it lies in right subtree\n    else if( key &gt; root-&gt;key )\n            root-&gt;right = apagaNode(root-&gt;right, key);\n    // if key is same as root's key, then This is the node\n    // to be deleted\n    else\n    {\n            // node with only one child or no child\n            if( (root-&gt;left == NULL) || (root-&gt;right == NULL) )\n            {\n                    struct node *temp = root-&gt;left ? root-&gt;left : root-&gt;right;\n                    // No child case\n                    if(temp == NULL)\n                    {\n                            temp = root;\n                            root = NULL;\n                    }\n                    else // One child case\n                         *root = *temp; // Copy the contents of the non-empty child\n                    free(temp);\n            }\n            else\n            {\n                    // node with two children: Get the inorder successor (smallest\n                    // in the right subtree)\n                    struct node* temp = minValueNode(root-&gt;right);\n                    // Copy the inorder successor's data to this node\n                    root-&gt;key = temp-&gt;key;\n                    // Delete the inorder successor\n                    root-&gt;right = apagaNode(root-&gt;right, temp-&gt;key);\n            }\n    }\n    // If the tree had only one node then return\n    if (root == NULL)\n          return root;\n    // STEP 2: UPDATE HEIGHT OF THE CURRENT NODE\n    root-&gt;height = max(height(root-&gt;left), height(root-&gt;right)) + 1;\n    // STEP 3: GET THE BALANCE FACTOR OF THIS NODE (to check whether\n    //  this node became unbalanced)\n    int balance = getBalance(root);\n    // If this node becomes unbalanced, then there are 4 cases\n    // Left Left Case\n    if (balance &gt; 1 &amp;&amp; getBalance(root-&gt;left) &gt;= 0)\n            return rightRotate(root);\n    // Left Right Case\n    if (balance &gt; 1 &amp;&amp; getBalance(root-&gt;left) &lt; 0)\n    {\n            root-&gt;left =  leftRotate(root-&gt;left);\n            return rightRotate(root);\n    }\n    // Right Right Case\n    if (balance &lt; -1 &amp;&amp; getBalance(root-&gt;right) &lt;= 0)\n            return leftRotate(root);\n    // Right Left Case\n    if (balance &lt; -1 &amp;&amp; getBalance(root-&gt;right) &gt; 0)\n    {\n            root-&gt;right = rightRotate(root-&gt;right);\n            return leftRotate(root);\n    }\n    return root;\n}\n\nint imprime(struct node *root,int targetPos,int curPos)\n{\n    if(root != NULL)\n    {\n            int newPos = imprime(root-&gt;left, targetPos, curPos);\n            newPos++;\n            if (newPos == targetPos)\n            {\n                    printf(\"%d\\n\", root-&gt;key);\n            }\n            return imprime(root-&gt;right, targetPos, newPos);\n    }\n    else\n    {\n            return curPos;\n    }\n}\n\nint main()\n{\n  struct node *root = NULL;\n  int total=0;\n  int n,b;\n  string a;\n  cin &gt;&gt; n;\n  for (int i=0; i&lt;n; i++)\n  {\n          cin &gt;&gt; a &gt;&gt; b;\n          if(a==\"INS\")\n                  {root = insert(root, b);total=total+1;}\n          else\n          if(a==\"REM\")\n                   {root = apagaNode(root, b);total=total-1;}\n          else\n                  imprime(root, total-b+1, 0);\n  }\n    return 0;\n}\n</code></pre>\n\n<p>The way I found to print the values:</p>\n\n<pre><code>int imprime(struct node *root,int targetPos,int curPos)\n{\n    if(root != NULL)\n    {\n            int newPos = imprime(root-&gt;left, targetPos, curPos);\n            newPos++;\n            if (newPos == targetPos)\n            {\n                    printf(\"%d\\n\", root-&gt;key);\n            }\n            return imprime(root-&gt;right, targetPos, newPos);\n    }\n    else\n    {\n            return curPos;\n    }\n}\n</code></pre>\n\n<p>Problem is that this function is very slow, and I can't use it. How is the best way to print by a given postion like this? (A heard about, counting n_nodes, and during the rotations I have to incremennt, decrement, i realy did not understand. Help me please! Give some tips, and advices) (PS: I'm not an expert with this kind of algorithms)</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers", "pool"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1420662129, "post_id": 27827923, "comment_id": 44061797, "body": "If you are using a custom deleter, you are no longer returning a <code>std::unique_ptr&lt;T&gt;</code>. Either fix the signature or use something with a type-erased deleter (such as <code>shared_ptr</code>)."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1420662294, "post_id": 27827923, "comment_id": 44061893, "body": "I know :), it might be of the type <code>std::unique_ptr&lt;T, std::function&lt;void(T*)&gt; &gt;</code>, but I didn&#39;t want to add half-answers. My confusion is more how this is properly combined with <code>std::bind</code>. I&#39;ll rely on more experienced C++-devs to fill in the blanks. An alternative, which I wanted to tackle afterwards, was returning a <code>std::shared_ptr</code>, but, if it&#39;s properly solved for <code>std::unique_ptr</code>, it&#39;s automatically solved for the <code>shared_ptr</code> case."}], "answers": [{"comments": [{"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "edited": false, "score": 0, "creation_date": 1420707963, "post_id": 27828584, "comment_id": 44077179, "body": "Thanks for this suggestion. The only downside (but important one), is that <code>acquire</code> and <code>empty</code> are <code>O(n)</code>, when they should be <code>O(1)</code> (since they can)."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "edited": false, "score": 0, "creation_date": 1420713174, "post_id": 27828584, "comment_id": 44080010, "body": "I&#39;ve added an answer with the <code>O(1)</code> implementation I was thinking of."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1420675495, "last_edit_date": 1420675495, "creation_date": 1420664550, "answer_id": 27828584, "question_id": 27827923, "link": "https://stackoverflow.com/questions/27827923/c-object-pool-that-provides-items-as-smart-pointers-that-are-returned-to-pool/27828584#27828584", "title": "C++ object-pool that provides items as smart-pointers that are returned to pool upon deletion", "body": "<p>Consider using a <code>shared_ptr</code> instead. The only change you'd have to make is to <em>not</em> count auto pointers with more than one owner. Objects that had would aquired from the <code>SharedPool</code> could delete the auto pointer as normal, but the <code>SharedPool</code> would still hold the actual auto pointer.</p>\n\n<pre><code>template &lt;class T&gt;\nclass SharedPool\n{\n public:\n  SharedPool(){}\n  virtual ~SharedPool(){}\n\n  void add(std::unique_ptr&lt;T&gt; t) {\n    pool_.push_back(std::move(t));\n  }\n\n  std::shared_ptr&lt;T&gt; acquire() {\n    assert(!empty());\n    return *std::find_if(pool_.begin(), pool.end(), [](const std::shared_ptr&lt;T&gt;&amp; i){return i.count() == 1;});\n  }\n\n  bool empty() const {\n    return std::none_of(pool_.begin(), pool_.end(), [](const std::shared_ptr&lt;T&gt;&amp; i){return i.count() == 1;});\n  }\n\n private:\n  std::vector&lt;std::shared_ptr&lt;T&gt;&gt; pool_;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1420771591, "post_id": 27837534, "comment_id": 44110143, "body": "I&#39;d store the objects in the pool as plain <code>unique_ptr&lt;T&gt;</code>s (no custom deleter), and attach the custom deleter only in the <code>acquire()</code> (which can return either a <code>unique_ptr</code> with a custom deleter or a <code>shared_ptr</code> with a type-erased deleter). This also obviates the need to write a custom destructor."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1420812213, "post_id": 27837534, "comment_id": 44126630, "body": "@T.C. You are absolutely right. I&#39;ve updated my answer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1420829578, "post_id": 27837534, "comment_id": 44136986, "body": "The constructor of <code>std::function</code> may throw, but <code>unique_ptr</code> requires that its deleter&#39;s constructors must not throw, so you might want to use a custom deleter type. Also, your &quot;more robust&quot; version essentially uses a reference-counted smart pointer. There is already such a pointer in the standard library..."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1420978881, "post_id": 27837534, "comment_id": 44174897, "body": "I haven&#39;t accepted my own answer, since there must be a better implementation. I don&#39;t see how using a <code>shared_ptr</code> can substitute the reference counting and also keep it simpler. I think the problem is that I use <code>unique_ptr</code> to represent items that leave the pool. Since they are still linked to an object whose lifetime is undetermined by the item, it should perhaps be a <code>shared_ptr</code>, that only becomes unique if from a deleted pool. But this also feels incorrect. As for the first issue, how would a custom deleter type solve that? Aren&#39;t both ultimately just static functions?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1420991908, "post_id": 27837534, "comment_id": 44178975, "body": "The pool has a <code>shared_ptr</code>, and the deleters can each carry a <code>weak_ptr</code> that they can use to determine if the pool remains valid. <code>std::function</code>&#39;s constructor can throw because it does type erasure and must use dynamic allocation (to handle arbitrarily large functors), but if you use a custom deleter type then there&#39;s no erasure and hence no dynamic allocation to be done."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1421161291, "post_id": 27837534, "comment_id": 44247062, "body": "@T.C. I&#39;ve updated my answer to follow your suggestions as best as possible. I&#39;m not sure I fully understood how (or if I was supposed to,) avoid <code>function&lt;void(T*)&gt;</code> all together. Thanks a lot for your help and suggestions."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1421162510, "post_id": 27837534, "comment_id": 44247850, "body": "The custom deleter still needs to call <code>std::stack&lt;unique_ptr&lt;T&gt;&gt;::push(unique_ptr&lt;T&gt;&amp;&amp;)</code> which can throw, and if that happens inside a <code>unique_ptr</code> destructor it will call <code>std::terminate()</code>, so you need to handle <code>bad_alloc</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1421169165, "post_id": 27837534, "comment_id": 44252397, "body": "Yes, I meant that you should avoid using <code>std::function</code>. Jonathan Wakely&#39;s answer, esp. the second version, is pretty much what I had in mind."}, {"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "edited": false, "score": 0, "creation_date": 1421235712, "post_id": 27837534, "comment_id": 44279850, "body": "Thanks T.C and Jonathan Wakely. I learned several things with this. I&#39;ve updated my answer again to reflect the last suggestions. I did however not understand certain aspects of Jonathan Wakely&#39;s second suggestion (the <code>dummy, this</code> part), and kept my own, now updated, and hopefully finalm version."}, {"owner": {"reputation": 10724, "user_id": 698504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/770938a33e674396b8d1b0f0470f98c0?s=128&d=identicon&r=PG", "display_name": "Cookie", "link": "https://stackoverflow.com/users/698504/cookie"}, "edited": false, "score": 0, "creation_date": 1487536786, "post_id": 27837534, "comment_id": 71817572, "body": "And last but not least none of this is thread safe. At least add and acquire need locks in the current version, unless each thread has their own pool. Your <code>ptr_type</code> is also at least twice the size of a raw ptr - the actual ptr, the custom deleter, and then the weak_ptr. If you were to use the pool as a singleton, then this memory overhead would be quite wasteful, as all information except for the raw pointer would always be identical. Returning by shared_ptr will introduce more overhead as well - namely you&#39;d need to go to the heap for every allocation, which defeats the point of the pool?"}, {"owner": {"reputation": 157, "user_id": 4349071, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/49c8b590e7e94e66fa239b9bf6618756?s=128&d=identicon&r=PG&f=1", "display_name": "vibz", "link": "https://stackoverflow.com/users/4349071/vibz"}, "edited": false, "score": 1, "creation_date": 1522836148, "post_id": 27837534, "comment_id": 86304260, "body": "I&#39;ve learnt a lot from this answer. One thing that I still dont understand, what is meant by the deference operator (*) in std::weak_ptr&lt;SharedPool&lt;T&gt;* &gt; pool_"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1549966600, "post_id": 27837534, "comment_id": 96086600, "body": "Why not do this in the deleter of the object owned by the std::unique_ptr?"}, {"owner": {"reputation": 399, "user_id": 2196270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6aDQb.jpg?s=128&g=1", "display_name": "RandyP", "link": "https://stackoverflow.com/users/2196270/randyp"}, "edited": false, "score": 0, "creation_date": 1572388925, "post_id": 27837534, "comment_id": 103542284, "body": "In my implementation, it seems that <code>External_Deleter</code> needs a trivial default constructor in order to create a <code>SharedPool&lt;T&gt;::ptr_type</code> before assigning it."}, {"owner": {"reputation": 2075, "user_id": 387837, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/791b712b47075240158771d96e4a2362?s=128&d=identicon&r=PG", "display_name": "aggieNick02", "link": "https://stackoverflow.com/users/387837/aggienick02"}, "edited": false, "score": 0, "creation_date": 1593140147, "post_id": 27837534, "comment_id": 110682055, "body": "This is a really interesting problem. I think there are a number of use cases for a general construct like this, and this is the most complete starting point I&#39;ve seen so far. The thread safety aspect can be addressed, I believe, with something like the concurrent_queue and the like from Intel&#39;s TBB - <a href=\"https://software.intel.com/en-us/node/506200\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/506200</a>"}, {"owner": {"reputation": 2075, "user_id": 387837, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/791b712b47075240158771d96e4a2362?s=128&d=identicon&r=PG", "display_name": "aggieNick02", "link": "https://stackoverflow.com/users/387837/aggienick02"}, "reply_to_user": {"reputation": 10724, "user_id": 698504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/770938a33e674396b8d1b0f0470f98c0?s=128&d=identicon&r=PG", "display_name": "Cookie", "link": "https://stackoverflow.com/users/698504/cookie"}, "edited": false, "score": 0, "creation_date": 1593140220, "post_id": 27837534, "comment_id": 110682073, "body": "@Cookie - shared_ptr makes sense for certain use cases. If you are dealing with objects in the pool that are extremely expensive to create, the overhead of the bytes to manage all of this is not significant."}, {"owner": {"reputation": 2075, "user_id": 387837, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/791b712b47075240158771d96e4a2362?s=128&d=identicon&r=PG", "display_name": "aggieNick02", "link": "https://stackoverflow.com/users/387837/aggienick02"}, "edited": false, "score": 1, "creation_date": 1593723674, "post_id": 27837534, "comment_id": 110888177, "body": "I ended up combining several of the good ideas in this solution with parts of the <code>PoolableObjectFactory</code> from the Poco library (and using a thread-safe queue instead of a stack). It works for my needs really well. I also want to extend it to custom pointer types and deleters for the pooled objects, which is useful if you want a pool of something like Windows HANDLEs . For now I have to wrap such things in a real class. <code>unique_ptr</code>/<code>shared_ptr</code> allow for such things, but there is a bit of STL magic involved in how the pointer type is inferred."}], "tags": [], "owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "is_accepted": true, "score": 20, "last_activity_date": 1421235150, "last_edit_date": 1421235150, "creation_date": 1420711885, "answer_id": 27837534, "question_id": 27827923, "link": "https://stackoverflow.com/questions/27827923/c-object-pool-that-provides-items-as-smart-pointers-that-are-returned-to-pool/27837534#27837534", "title": "C++ object-pool that provides items as smart-pointers that are returned to pool upon deletion", "body": "<h2>Naive implementation</h2>\n\n<p>The implementation uses <code>unique_ptr</code> with a custom deleter that returns objects to the pool. Both <code>acquire</code> and <code>release</code> are <code>O(1)</code>. Additionally, <code>unique_ptr</code> with custom deleters can be implicitly converted to <code>shared_ptr</code>.</p>\n\n<pre><code>template &lt;class T&gt;\nclass SharedPool\n{\n public:\n  using ptr_type = std::unique_ptr&lt;T, std::function&lt;void(T*)&gt; &gt;;\n\n  SharedPool() {}\n  virtual ~SharedPool(){}\n\n  void add(std::unique_ptr&lt;T&gt; t) {\n    pool_.push(std::move(t));\n  }\n\n  ptr_type acquire() {\n    assert(!pool_.empty());\n    ptr_type tmp(pool_.top().release(),\n                 [this](T* ptr) {\n                   this-&gt;add(std::unique_ptr&lt;T&gt;(ptr));\n                 });\n    pool_.pop();\n    return std::move(tmp);\n  }\n\n  bool empty() const {\n    return pool_.empty();\n  }\n\n  size_t size() const {\n    return pool_.size();\n  }\n\n private:\n  std::stack&lt;std::unique_ptr&lt;T&gt; &gt; pool_;\n};\n</code></pre>\n\n<p><strong>Example usage:</strong></p>\n\n<pre><code>SharedPool&lt;int&gt; pool;\npool.add(std::unique_ptr&lt;int&gt;(new int(42)));\npool.add(std::unique_ptr&lt;int&gt;(new int(84)));\npool.add(std::unique_ptr&lt;int&gt;(new int(1024)));\npool.add(std::unique_ptr&lt;int&gt;(new int(1337)));\n\n// Three ways to express the unique_ptr object\nauto v1 = pool.acquire();\nSharedPool&lt;int&gt;::ptr_type v2 = pool.acquire();    \nstd::unique_ptr&lt;int, std::function&lt;void(int*)&gt; &gt; v3 = pool.acquire();\n\n// Implicitly converted shared_ptr with correct deleter\nstd::shared_ptr&lt;int&gt; v4 = pool.acquire();\n\n// Note that adding an acquired object is (correctly) disallowed:\n// pool.add(v1);  // compiler error\n</code></pre>\n\n<hr>\n\n<p>You might have caught a severe problem with this implementation. The following usage isn't unthinkable:</p>\n\n<pre><code>  std::unique_ptr&lt; SharedPool&lt;Widget&gt; &gt; pool( new SharedPool&lt;Widget&gt; );\n  pool-&gt;add(std::unique_ptr&lt;Widget&gt;(new Widget(42)));\n  pool-&gt;add(std::unique_ptr&lt;Widget&gt;(new Widget(84)));\n\n  // [Widget,42] acquired(), and released from pool\n  auto v1 = pool-&gt;acquire();\n\n  // [Widget,84] is destroyed properly, together with pool\n  pool.reset(nullptr);\n\n  // [Widget,42] is not destroyed, pool no longer exists.\n  v1.reset(nullptr);\n  // Memory leak\n</code></pre>\n\n<hr>\n\n<p>We need a way to keep alive information necessary for the deleter to make the distinction </p>\n\n<ol>\n<li>Should I return object to pool?</li>\n<li>Should I delete the actual object?</li>\n</ol>\n\n<p>One way of doing this (suggested by T.C.), is having each deleter keep a <code>weak_ptr</code> to <code>shared_ptr</code> member in <code>SharedPool</code>. This lets the deleter know if the pool has been destroyed.</p>\n\n<h2>Correct implementation:</h2>\n\n<pre><code>template &lt;class T&gt;\nclass SharedPool\n{\n private:\n  struct External_Deleter {\n    explicit External_Deleter(std::weak_ptr&lt;SharedPool&lt;T&gt;* &gt; pool)\n        : pool_(pool) {}\n\n    void operator()(T* ptr) {\n      if (auto pool_ptr = pool_.lock()) {\n        try {\n          (*pool_ptr.get())-&gt;add(std::unique_ptr&lt;T&gt;{ptr});\n          return;\n        } catch(...) {}\n      }\n      std::default_delete&lt;T&gt;{}(ptr);\n    }\n   private:\n    std::weak_ptr&lt;SharedPool&lt;T&gt;* &gt; pool_;\n  };\n\n public:\n  using ptr_type = std::unique_ptr&lt;T, External_Deleter &gt;;\n\n  SharedPool() : this_ptr_(new SharedPool&lt;T&gt;*(this)) {}\n  virtual ~SharedPool(){}\n\n  void add(std::unique_ptr&lt;T&gt; t) {\n    pool_.push(std::move(t));\n  }\n\n  ptr_type acquire() {\n    assert(!pool_.empty());\n    ptr_type tmp(pool_.top().release(),\n                 External_Deleter{std::weak_ptr&lt;SharedPool&lt;T&gt;*&gt;{this_ptr_}});\n    pool_.pop();\n    return std::move(tmp);\n  }\n\n  bool empty() const {\n    return pool_.empty();\n  }\n\n  size_t size() const {\n    return pool_.size();\n  }\n\n private:\n  std::shared_ptr&lt;SharedPool&lt;T&gt;* &gt; this_ptr_;\n  std::stack&lt;std::unique_ptr&lt;T&gt; &gt; pool_;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "edited": false, "score": 0, "creation_date": 1421232834, "post_id": 27925567, "comment_id": 44278247, "body": "Would it be possible to explain the <code>std::shared_ptr&lt;SharedPool&gt;{shared, this}</code>. It would be equivalent to the more explicit <code>return_to_pool{std::shared_ptr&lt;SharedPool&gt;{shared, this}}</code>. But, why does this compile? Why does the <code>return_to_pool</code> constructor parameter accept a <code>shared_ptr</code> with <code>SharedPool&lt;T&gt;::dummy</code>, and <code>SharedPool&lt;T&gt;*</code> arguments. What is going on here?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "edited": false, "score": 1, "creation_date": 1421274821, "post_id": 27925567, "comment_id": 44302450, "body": "@swalog <a href=\"http://stackoverflow.com/questions/25920681/what-is-the-difference-between-an-empty-and-a-null-stdshared-ptr-in-c/25920775#25920775\" title=\"what is the difference between an empty and a null stdshared ptr in c\">stackoverflow.com/questions/25920681/&hellip;</a>"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1475510330, "post_id": 27925567, "comment_id": 66960998, "body": "I don&#39;t understand your use of <code>shared</code>. What prevents <code>SharedPool</code> from going out of life (before <code>dummy</code> goes out of life) before the last <code>ptr_type</code> pointer was destroyed? It seems to me that the <code>weak_ptr</code> could tell you &quot;it&#39;s still alife&quot;, while it may be not. Usually the aliasing constructor is passed a pointer to a subobject, and a shared_ptr to the surrounding object. But in your case it&#39;s kindof the other way around, which confuses me."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1475574471, "post_id": 27925567, "comment_id": 66986363, "body": "@litb, you&#39;re right it doesn&#39;t help with object lifetimes. IIRC I was thinking of cases where your pool is already managed elsewhere (e.g. as a global) and is guaranteed to outlive the deleters referring to it ... but in that case there&#39;s no advantage to using <code>weak_ptr</code> to refer to it. That&#39;s fragile code though, so it&#39;s not a good example. I&#39;ll remove it."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 10, "last_activity_date": 1475574554, "last_edit_date": 1475574554, "creation_date": 1421162758, "answer_id": 27925567, "question_id": 27827923, "link": "https://stackoverflow.com/questions/27827923/c-object-pool-that-provides-items-as-smart-pointers-that-are-returned-to-pool/27925567#27925567", "title": "C++ object-pool that provides items as smart-pointers that are returned to pool upon deletion", "body": "<p>Here's a custom deleter that checks if the pool is still alive.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass return_to_pool\n{\n  std::weak_ptr&lt;SharedPool&lt;T&gt;&gt; pool\n\npublic:\n  return_to_pool(const shared_ptr&lt;SharedPool&lt;T&gt;&gt;&amp; sp) : pool(sp) { }\n\n  void operator()(T* p) const\n  {\n    if (auto sp = pool.lock())\n    {\n      try {\n        sp-&gt;add(std::unique_ptr&lt;T&gt;(p));\n        return;\n      } catch (const std::bad_alloc&amp;) {\n      }\n    }\n    std::default_delete&lt;T&gt;{}(p);\n  }\n};\n\ntemplate &lt;class T&gt;\nclass SharedPool : std::enable_shared_from_this&lt;SharedPool&lt;T&gt;&gt;\n{\npublic:\n  using ptr_type = std::unique_ptr&lt;T, return_to_pool&lt;T&gt;&gt;;\n  ...\n  ptr_type acquire()\n  {\n    if (pool_.empty())\n      throw std::logic_error(\"pool closed\");\n    ptr_type tmp{pool_.top().release(), this-&gt;shared_from_this()};\n    pool_.pop();\n    return tmp;\n  }\n  ...\n};\n\n// SharedPool must be owned by a shared_ptr for enable_shared_from_this to work\nauto pool = std::make_shared&lt;SharedPool&lt;int&gt;&gt;();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 2609603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a983ff3058b3103b6c04e4f6659cb8?s=128&d=identicon&r=PG", "display_name": "fgg", "link": "https://stackoverflow.com/users/2609603/fgg"}, "is_accepted": false, "score": 5, "last_activity_date": 1489505108, "last_edit_date": 1489505108, "creation_date": 1489423625, "answer_id": 42769075, "question_id": 27827923, "link": "https://stackoverflow.com/questions/27827923/c-object-pool-that-provides-items-as-smart-pointers-that-are-returned-to-pool/42769075#42769075", "title": "C++ object-pool that provides items as smart-pointers that are returned to pool upon deletion", "body": "<p>Although the question is old and has already been answered, I have one minor comment on the solution proposed by @swalog.</p>\n\n<p>Deleter functor can result in memory corruption due to double deletion:</p>\n\n<pre><code>void operator()(T* ptr) {\n  if (auto pool_ptr = pool_.lock()) {\n    try {\n      (*pool_ptr.get())-&gt;add(std::unique_ptr&lt;T&gt;{ptr});\n      return;\n    } catch(...) {}\n  }\n  std::default_delete&lt;T&gt;{}(ptr);\n}\n</code></pre>\n\n<p><code>unique_ptr</code> created here will be destroyed when exception is caught.\nHence,</p>\n\n<pre><code>std::default_delete&lt;T&gt;{}(ptr);\n</code></pre>\n\n<p>will result in double deletion.</p>\n\n<p>It can be fixed by changing a place of creating unique_ptr from T*:</p>\n\n<pre><code>void operator()(T* ptr) {\n  std::unique_ptr&lt;T&gt; uptr(ptr);\n  if (auto pool_ptr = pool_.lock()) {\n    try {\n      (*pool_ptr.get())-&gt;add(std::move(uptr));\n      return;\n    } catch(...) {}\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 4049, "user_id": 1731448, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ht5vX.png?s=128&g=1", "display_name": "swalog", "link": "https://stackoverflow.com/users/1731448/swalog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13742, "favorite_count": 19, "accepted_answer_id": 27837534, "answer_count": 4, "score": 19, "last_activity_date": 1489505108, "creation_date": 1420661909, "last_edit_date": 1420812456, "question_id": 27827923, "link": "https://stackoverflow.com/questions/27827923/c-object-pool-that-provides-items-as-smart-pointers-that-are-returned-to-pool", "title": "C++ object-pool that provides items as smart-pointers that are returned to pool upon deletion", "body": "<p>I'm having fun with c++-ideas, and got a little stuck with this problem.</p>\n\n<p>I would like a <code>LIFO</code> class that manages a pool of resources.\nWhen a resource is requested (through <code>acquire()</code>), it returns the object as a <code>unique_ptr</code> that, upon deletion, causes the resource to be returned to the pool.</p>\n\n<p>The unit tests would be:</p>\n\n<pre><code>// Create the pool, that holds (for simplicity, int objects)\nSharedPool&lt;int&gt; pool;\nTS_ASSERT(pool.empty());\n\n// Add an object to the pool, which is now, no longer empty\npool.add(std::unique_ptr&lt;int&gt;(new int(42)));\nTS_ASSERT(!pool.empty());\n\n// Pop this object within its own scope, causing the pool to be empty\n{\n  auto v = pool.acquire();\n  TS_ASSERT_EQUALS(*v, 42);\n  TS_ASSERT(pool.empty());\n}\n\n// Object should now have returned to the pool\nTS_ASSERT(!pool.empty())\n</code></pre>\n\n<hr>\n\n<p>Basic implementation, which would pass the tests, except for the important final test:</p>\n\n<pre><code>template &lt;class T&gt;\nclass SharedPool\n{\n public:\n  SharedPool(){}\n  virtual ~SharedPool(){}\n\n  void add(std::unique_ptr&lt;T&gt; t) {\n    pool_.push(std::move(t));\n  }\n\n  std::unique_ptr&lt;T&gt; acquire() {\n    assert(!pool_.empty());\n    std::unique_ptr&lt;T&gt; tmp(std::move(pool_.top()));\n    pool_.pop();\n    return std::move(tmp);\n  }\n\n  bool empty() const {\n    return pool_.empty();\n  }\n\n private:\n  std::stack&lt;std::unique_ptr&lt;T&gt; &gt; pool_;\n};\n</code></pre>\n\n<hr>\n\n<p><strong>The question:</strong> How to go about so that <code>acquire()</code> returns a <code>unique_ptr</code> of a type such that the deleter has knowledge of <code>this</code>, and calls <code>this-&gt;add(...)</code>, returning the resource back to the pool.</p>\n"}, {"tags": ["c++", "windows-phone"], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 668344, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e53ada29b78f8e16882bda441cc10404?s=128&d=identicon&r=PG", "display_name": "An Hoa", "link": "https://stackoverflow.com/users/668344/an-hoa"}, "is_accepted": true, "score": 2, "last_activity_date": 1426043910, "creation_date": 1426043910, "answer_id": 28977986, "question_id": 27827874, "link": "https://stackoverflow.com/questions/27827874/windows-phone-re-layout-after-software-keyboard-is-shown/28977986#28977986", "title": "Windows Phone: re-layout after software keyboard is shown", "body": "<p>It appears that one needs to register handler to update the layout:</p>\n\n<pre><code>auto inputpane = InputPane::GetForCurrentView();\ninputpane-&gt;Showing += ref new TypedEventHandler&lt;InputPane^, InputPaneVisibilityEventArgs^&gt;(this, &amp;MainPage::OnInputPaneVisibilityChanged);\ninputpane-&gt;Hiding += ref new TypedEventHandler&lt;InputPane^, InputPaneVisibilityEventArgs^&gt;(this, &amp;MainPage::OnInputPaneVisibilityChanged);\n</code></pre>\n\n<p>To handle the event, we can make use of <code>OccludedRect</code> in the event argument from which we can extract the height taken by the keyboard. First, we preserve some UI element, say <code>SpaceForKeyboard</code>, in the XAML. For example:</p>\n\n<pre><code>&lt;Grid&gt;\n    &lt;Grid.RowDefinitions&gt;\n        &lt;RowDefinition Height=\"*\"/&gt;\n        &lt;RowDefinition Height=\"Auto\"/&gt;\n    &lt;Grid.RowDefinitions&gt;\n    &lt;Grid Grid.Row=\"0\"&gt; &lt;!-- Main UI goes here --&gt; &lt;/Grid&gt;\n    &lt;Grid Grid.Row=\"1\" x:Name=\"SpaceForKeyboard\"&gt; &lt;!-- Dummy grid for the keyboard --&gt; &lt;/Grid&gt;\n&lt;/Grid&gt;\n</code></pre>\n\n<p>Then in the handler, just change the size for the preserved space:</p>\n\n<pre><code>void MainPage::OnInputPaneVisibilityChanged(InputPane^ sender, InputPaneVisibilityEventArgs^ args)\n{\n    SpaceForKeyboard-&gt;Height = sender-&gt;OccludedRect.Height;\n}\n</code></pre>\n\n<p>As simple as it should be, when the keyboard is shown/hidden, the handler is invoked and it sets (or hide) the dummy grid to occupy the space where the keyboard is shown.</p>\n"}], "owner": {"reputation": 1073, "user_id": 668344, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e53ada29b78f8e16882bda441cc10404?s=128&d=identicon&r=PG", "display_name": "An Hoa", "link": "https://stackoverflow.com/users/668344/an-hoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 28977986, "answer_count": 1, "score": 2, "last_activity_date": 1426043910, "creation_date": 1420661680, "question_id": 27827874, "link": "https://stackoverflow.com/questions/27827874/windows-phone-re-layout-after-software-keyboard-is-shown", "title": "Windows Phone: re-layout after software keyboard is shown", "body": "<p>When the software keyboard is shown, it occludes part of the page UI. That is undesirable. Is there a way to automatically update the UI layout just like Android Activity's onConfigurationChanged?</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1420661387, "post_id": 27827761, "comment_id": 44061404, "body": "1) that is not a reference, but a pointer to a pointer 2) either way, not required unless you want to change what is pointed to, and <code>base-&gt;print</code> won&#39;t work with <code>Base **</code> 3) why even use <code>new</code> (and you don&#39;t <code>delete</code> anyway)."}, {"owner": {"reputation": 7267, "user_id": 1051621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAEvg.jpg?s=128&g=1", "display_name": "Mark Shevchenko", "link": "https://stackoverflow.com/users/1051621/mark-shevchenko"}, "edited": false, "score": 1, "creation_date": 1420661389, "post_id": 27827761, "comment_id": 44061405, "body": "Remove an one asterisk in <code>call_print</code> declaration: <code>void call_print(Base *base)</code>. Also call <code>b-&gt;call_print(b)</code> in <code>main</code> function."}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 1, "creation_date": 1420661403, "post_id": 27827761, "comment_id": 44061412, "body": "If you actually intend a double-pointer:  if (base) { (*base)-&gt;print(); }"}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1420661544, "post_id": 27827761, "comment_id": 44061489, "body": "The person says they want to pass a poiner by pointer essentially - if that is what they want, they can do it"}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1420661563, "post_id": 27827761, "comment_id": 44061496, "body": "Is there a use case you need to write code like this for, or is it just for fun?"}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "edited": false, "score": 0, "creation_date": 1420661597, "post_id": 27827761, "comment_id": 44061520, "body": "What&#39;s the point of not calling <code>print</code> directly?"}, {"owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "edited": false, "score": 0, "creation_date": 1420661693, "post_id": 27827761, "comment_id": 44061565, "body": "But what if I want to call one function inside other.This is what I tried. yeah I forgot to delete that object. Even when I use one asterisk it throws error."}, {"owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "edited": false, "score": 0, "creation_date": 1420661761, "post_id": 27827761, "comment_id": 44061603, "body": "It is not for fun obviously. As I said I just wanted to call one function inside another."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420661792, "post_id": 27827761, "comment_id": 44061620, "body": "&quot;I want to pass pointer object to function by reference&quot; - then pass a pointer by reference: <code>Base *&amp; base</code> as your parameter and simply <code>b</code> from the caller."}, {"owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "edited": false, "score": 0, "creation_date": 1420661904, "post_id": 27827761, "comment_id": 44061664, "body": "I just made it simple to understand. Actually I want to change the value of x which is declared in some class through a function of another class."}, {"owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "edited": false, "score": 0, "creation_date": 1420662076, "post_id": 27827761, "comment_id": 44061765, "body": "Thanks WhozCraig finally I am able to execute my code."}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1420662927, "post_id": 27827761, "comment_id": 44062241, "body": "&quot;It is not for fun obviously. As I said I just wanted to call one function inside another.&quot; - not obvious at all, and also not what was said. There are many ways to write this; requesting one solution and expecting a mind-reading approach is rather frustrating. Double-pointers are often passed in Microsoft interfaces; it might actually be an attempt to understand double-pointers."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1420665087, "post_id": 27827761, "comment_id": 44063382, "body": "The source of the confusion in this comment string is that your phrasing &quot;pass pointer object to function by reference&quot; actually means something very specific in C++, but it&#39;s not idiomatic in basic C++.  It does not appear from your comments that you actually want that specific C++ construct."}], "answers": [{"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 5, "last_activity_date": 1420661790, "creation_date": 1420661790, "answer_id": 27827897, "question_id": 27827761, "link": "https://stackoverflow.com/questions/27827761/c-passing-pointer-reference/27827897#27827897", "title": "C++ passing pointer reference", "body": "\n\n<p>You're passing the object by \"reference\" in the sense that you still have access to the original object through the parameter, but note that <code>base</code> in <code>call_print()</code> is a pointer to the object being passed in, not the <em>actual</em> object. You still have to dereference the pointer if you want access to the object passed in:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>(*base)-&gt;print();\n</code></pre>\n\n<p>C++ introduced actual references that are syntactic sugar upon what you have to do with pointers/double-pointers. For example:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>void call_print(Base*&amp; base)\n{ base-&gt;print(); }\n\nb-&gt;call_print(b);\n</code></pre>\n\n<p>Also, the use of a double pointer or reference seems unnecessary since you don't need to modify the pointer in any way. Why not just take in the pointer itself?</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>void call_print(Base* base)\n{ base-&gt;print(); }\n\nb-&gt;call_print(b);\n</code></pre>\n\n<p>And lastly, you don't need to pass <code>b</code> in as an argument to its own method. A pointer to the <code>Base</code> object is accessible through <code>this</code>:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>void call_print()\n{\n    print(); /* or this-&gt;print() */\n}\n\nb-&gt;call_print();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "edited": false, "score": 0, "creation_date": 1420662910, "post_id": 27828133, "comment_id": 44062234, "body": "This is what I wanted to do. Thank you all for helping me.It is working now :)"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1420663352, "post_id": 27828133, "comment_id": 44062451, "body": "You can change <code>x</code> if you pass a non-pointer <code>Base</code> by reference! (in other words, you don&#39;t need pointers at all, just C++ references)"}], "tags": [], "owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1420663162, "last_edit_date": 1420663162, "creation_date": 1420662761, "answer_id": 27828133, "question_id": 27827761, "link": "https://stackoverflow.com/questions/27827761/c-passing-pointer-reference/27828133#27828133", "title": "C++ passing pointer reference", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nclass Base\n{\n    public:  \n    int x;\n    void print()\n    {\n        cout&lt;&lt;x&lt;&lt;endl;\n    }\n};\nclass Base2\n{\n    public:\n    void change_value(Base *&amp;base) \n    {\n        base-&gt;x = 5;\n    }\n};\nint main()\n{\n    Base *b = new Base;\n    Base2 b2;\n    b2.change_value(b);\n    b-&gt;print();\n    delete b;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "is_accepted": false, "score": 0, "last_activity_date": 1420662786, "creation_date": 1420662786, "answer_id": 27828141, "question_id": 27827761, "link": "https://stackoverflow.com/questions/27827761/c-passing-pointer-reference/27828141#27828141", "title": "C++ passing pointer reference", "body": "<p>a simple note: don't use naked pointers, take advantage of C++11 facilities: std::unique_ptr and std::shared_ptr are even better, for resource management sake, and you can write something like this:</p>\n\n<pre><code>std::unique_ptr&lt;Base&gt; base_ptr(new Base());\nbase_ptr-&gt;call_print();\n//no delete, unique_ptr deletes itself automatically\n</code></pre>\n\n<p>and for Base class, you have to write:</p>\n\n<pre><code>void call_print() //function call print function\n{\n    this-&gt;print();\n}\n</code></pre>\n\n<p>because you don't need to pass to the same object, the reference to itself.</p>\n"}], "owner": {"reputation": 103, "user_id": 4428110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-eti1k4gU8VY/AAAAAAAAAAI/AAAAAAAACqI/N7fmBmu5WwQ/photo.jpg?sz=128", "display_name": "Prashant Gupta", "link": "https://stackoverflow.com/users/4428110/prashant-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1383, "favorite_count": 0, "accepted_answer_id": 27827897, "answer_count": 3, "score": 2, "last_activity_date": 1420663162, "creation_date": 1420661218, "question_id": 27827761, "link": "https://stackoverflow.com/questions/27827761/c-passing-pointer-reference", "title": "C++ passing pointer reference", "body": "<p>I want to pass pointer object to function by reference. I don't know If I am doing correct as It is not working as per below code. Please help me.</p>\n\n<pre><code>class Base\n{\n    public:  \n    int x;\n    void print()// function prints x value\n    {\n        cout&lt;&lt;x;\n    }\n    void call_print(Base **base) //function call print function\n    {\n        base-&gt;print();\n    }\n};\nint main()\n{\n    Base *b = new Base; // creating pointer object\n    b-&gt;call_print(&amp;b); // passing pointer by reference\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1420663236, "post_id": 27827720, "comment_id": 44062388, "body": "Your question is a duplicate of <a href=\"https://stackoverflow.com/questions/27496004/why-isnt-stdinitializer-list-defined-as-a-literal-type\">this</a> (not voting to close because the linked question has no answers). Also relevant is <a href=\"https://groups.google.com/a/isocpp.org/d/topic/std-discussion/aA3BsR4ZuoE/discussion\" rel=\"nofollow noreferrer\">this</a> (linked in the comments of the dupe)."}, {"owner": {"reputation": 1195, "user_id": 3272850, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dab35066230afc30fe3f47c118d8b39c?s=128&d=identicon&r=PG&f=1", "display_name": "dcmm88", "link": "https://stackoverflow.com/users/3272850/dcmm88"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1420664860, "post_id": 27827720, "comment_id": 44063274, "body": "You&#39;re right, I actually didn&#39;t notice that even just defining <code>constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};</code> doesn&#39;t compile, unless it&#39;s global variable."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1420665076, "post_id": 27827720, "comment_id": 44063379, "body": "You can fix one of the problems by declaring (the local) <code>ilist</code> as <code>static</code>. The lifetime of the temporary array used to implement the RHS will be extended to static storage duration, which allows taking its address inside a constant expression. It does not fix the second issue, though - and I&#39;m not sure if that&#39;s intentional or a bug."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1420665458, "post_id": 27827720, "comment_id": 44063555, "body": "It seems intentional: <code>constexpr static int&amp;&amp; i = 42; constexpr int j = i;</code> does not compile as well. I don&#39;t fully understand the reasoning, though."}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1423138647, "post_id": 28342838, "comment_id": 45031857, "body": "<a href=\"https://gcc.gnu.org/projects/cxx1y.html\" rel=\"nofollow noreferrer\">C++14 status for GCC</a>. It should be completed with GCC 5."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1446524837, "post_id": 28342838, "comment_id": 54767262, "body": "The problem is that <code>constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};</code> fails to compile - not anything about <code>min</code>"}], "tags": [], "owner": {"reputation": 1658, "user_id": 2033752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee5cd7850fc71aaaf7aee4d9089c2e7?s=128&d=identicon&r=PG", "display_name": "Patryk Obara", "link": "https://stackoverflow.com/users/2033752/patryk-obara"}, "is_accepted": false, "score": -2, "last_activity_date": 1423135900, "creation_date": 1423135900, "answer_id": 28342838, "question_id": 27827720, "link": "https://stackoverflow.com/questions/27827720/pass-constexpr-intializer-list-as-argument-in-c14/28342838#28342838", "title": "pass constexpr intializer_list as argument in c++14", "body": "<p>C++14 is not implemented in full yet in neither g++ nor clang++. In your particular case: g++ STL does not have implemented <code>template constexpr T min(std::initializer_list ilist);</code> \nwhile clang++ does not have constexptr constructor for initializer_list yet.</p>\n"}, {"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1446511954, "creation_date": 1446511954, "answer_id": 33489694, "question_id": 27827720, "link": "https://stackoverflow.com/questions/27827720/pass-constexpr-intializer-list-as-argument-in-c14/33489694#33489694", "title": "pass constexpr intializer_list as argument in c++14", "body": "<p>The reason why your first snippet doesn't compile as opposed to the second one is the point in time at which the underlying array is being created. [dcl.init.list]/5:</p>\n\n<blockquote>\n  <p>An object of type <code>std::initializer_list&lt;E&gt;</code> is constructed from an\n  initializer list as if the implementation allocated a <strong>temporary array</strong>\n  <strong>of <code>N</code> elements of type <code>const E</code></strong>, where <code>N</code> is the number of elements in\n  the initializer list.</p>\n</blockquote>\n\n<p>Now, when calling <code>min</code>, we access elements of that array. However, [expr.const]/7 is inviolable:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3UNop.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3UNop.png\" alt=\"enter image description here\"></a></p>\n\n<p>None of the exceptions apply, but note the last bullet point which is applicable in your second example.</p>\n\n<p>Clang is (unsurprisingly) correct, while GCC spuriously accepts your code. The above ruling is also why @dyp's code fails: Performing an l-t-r conversion on <code>i</code> is not a constant expression. In particular, (2.7.1) doesn't apply since the temporary isn't <code>const</code>.</p>\n"}], "owner": {"reputation": 1195, "user_id": 3272850, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dab35066230afc30fe3f47c118d8b39c?s=128&d=identicon&r=PG&f=1", "display_name": "dcmm88", "link": "https://stackoverflow.com/users/3272850/dcmm88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 2, "accepted_answer_id": 33489694, "answer_count": 2, "score": 6, "last_activity_date": 1446511954, "creation_date": 1420661046, "last_edit_date": 1420663151, "question_id": 27827720, "link": "https://stackoverflow.com/questions/27827720/pass-constexpr-intializer-list-as-argument-in-c14", "title": "pass constexpr intializer_list as argument in c++14", "body": "<p>Why doesn't this work:</p>\n\n<pre><code>constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};\nconstexpr int my_min = min(ilist);\n</code></pre>\n\n<p>While this does:</p>\n\n<pre><code>constexpr int my_min = min({1,2,3,4});\n</code></pre>\n\n<p>I'm basing my code on the constexpr std::min() function as shown <a href=\"http://en.cppreference.com/w/cpp/algorithm/min\">here</a> and I'm using clang3.5.0 to compiler (g++4.9.1 doesn't seem to be aware of a constexpr std::min()).</p>\n\n<p>I can't make sense of the error I'm getting:</p>\n\n<pre><code>clang35 -stdlib=libc++ -std=c++14 test.cpp  -o test;\ntest.cpp:158:35: error: constexpr variable 'ilist' must be initialized by a constant expression\n  constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};\n                                  ^       ~~~~~~~~~\ntest.cpp:158:35: note: pointer to subobject of temporary is not a constant expression\ntest.cpp:158:43: note: temporary created here\n  constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};\n                                          ^\ntest.cpp:159:17: error: constexpr variable 'my_min' must be initialized by a constant expression\n  constexpr int my_min = min(ilist);\n                ^        ~~~~~~~~~~\ntest.cpp:159:30: note: initializer of 'ilist' is not a constant expression\n  constexpr int my_min = min(ilist);\n                             ^\ntest.cpp:159:30: note: in call to 'initializer_list(ilist)'\ntest.cpp:158:35: note: declared here\n  constexpr initializer_list&lt;int&gt; ilist = {1,2,3,4};\n</code></pre>\n"}, {"tags": ["c++", "qt", "combobox", "qtableview"], "comments": [{"owner": {"reputation": 1893, "user_id": 4257674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1ZeC.png?s=128&g=1", "display_name": "frasnian", "link": "https://stackoverflow.com/users/4257674/frasnian"}, "edited": false, "score": 0, "creation_date": 1420661399, "post_id": 27827719, "comment_id": 44061411, "body": "Your question does not appear to be about a specific issue but rather asking for design or implementation advice.  Please clarify a <i>specific</i> problem or add additional details to highlight exactly what you need."}, {"owner": {"reputation": 3691, "user_id": 4129852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gIrqQ.jpg?s=128&g=1", "display_name": "Iuliu", "link": "https://stackoverflow.com/users/4129852/iuliu"}, "edited": false, "score": 0, "creation_date": 1420730218, "post_id": 27827719, "comment_id": 44090462, "body": "You can set your own model on the combobox and set your own item view. See <code>QComboBox::setModel()</code> and <code>QComboBox::setView()</code>. Try using a table model and a table view. See <a href=\"http://doc.qt.io/qt-5/model-view-programming.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/model-view-programming.html</a> for more info."}], "owner": {"reputation": 1, "user_id": 4430366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b509adb112458c460305e563d6ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Blanco Fernandes", "link": "https://stackoverflow.com/users/4430366/marcos-blanco-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420661045, "creation_date": 1420661045, "question_id": 27827719, "link": "https://stackoverflow.com/questions/27827719/create-new-window-with-qtableview-from-combobox", "title": "Create new window with QTableView from ComboBox", "body": "<p>this is my first time here and my experience with Qt is about 2 months.</p>\n\n<p>My question is:</p>\n\n<p>I have an ui form which will be the main window and will contain a ComboBox. In this ComboBox, imagine I have two options ( Car1 and Car2 ). What I want to do seems to be very simple. If I select the first option ( Car1 ), there will be a new window, which will contain a table (QTableView) with two columns (\u201cVariable\u201d and \u201cValue\u201d in its headers), and three rows (\u201cCar name\u201d, \u201cPrice\u201d and \u201cPower not in the headers, but under the column \u201cVariable\u201d) and under the column \u201cValue\u201d there will be for example \u201cNissan GTR\u201d , \u201c 300.000,00 \u201c and \u201c 500 \u201c. </p>\n\n<p>Also, the information for filling the table cells will be stored in a header (.h) either in an array, or in a vector.</p>\n\n<p>Does anyone have an idea how can I implement this?</p>\n\n<p>Thank you,\nMarcos</p>\n"}, {"tags": ["c++", "console", "send", "sendmessage", "findwindow"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1420660953, "post_id": 27827661, "comment_id": 44061182, "body": "Have you tried anything at all?"}, {"owner": {"reputation": 178, "user_id": 4372300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/673642500/picture?type=large", "display_name": "Haalef", "link": "https://stackoverflow.com/users/4372300/haalef"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420661472, "post_id": 27827661, "comment_id": 44061448, "body": "yeah, things like   \tHWND GameWindow = FindWindow(0, L&quot;Administrator: C:\\Windows\\system32\\cmd.exe&quot;); \tPostMessage(GameWindow, WM_KEYDOWN, &#39;G&#39;, 0);"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 1, "creation_date": 1420663619, "post_id": 27827661, "comment_id": 44062595, "body": "This question looks like it might be closed fairly soon. @Haalef, take a look at <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask a good question</a> and see if you can edit your question to improve it. You&#39;ll be more likely to get help."}, {"owner": {"reputation": 178, "user_id": 4372300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/673642500/picture?type=large", "display_name": "Haalef", "link": "https://stackoverflow.com/users/4372300/haalef"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1420667685, "post_id": 27827661, "comment_id": 44064623, "body": "Thanks for the suggestion @Steve, I just edited the question so it may be easier to understand now."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420668969, "post_id": 27827661, "comment_id": 44065226, "body": "@Haalef That&#39;s a much better example. Maybe if you can edit your question and construct a very minimal example of how that plays out you&#39;ll get a more specific answer. Right now it&#39;s hard to tell what you mean by &quot;Commands&quot;, as in, do you mean to just execute shell commands in a different window? Or simply emulate keystrokes?"}, {"owner": {"reputation": 178, "user_id": 4372300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/673642500/picture?type=large", "display_name": "Haalef", "link": "https://stackoverflow.com/users/4372300/haalef"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420670190, "post_id": 27827661, "comment_id": 44065770, "body": "@tadman, keystrokes would be perfect, send keystrokes to cmd.exe. If I can do that then I assume I can also send those keystrokes in the same way to a running telnet client console."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1420670232, "post_id": 27827661, "comment_id": 44065789, "body": "Maybe if you described your final goals in more specific detail there might be a better way to solve this problem. Anything that involves <code>telnet.exe</code> is usually a bad plan."}, {"owner": {"reputation": 178, "user_id": 4372300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/673642500/picture?type=large", "display_name": "Haalef", "link": "https://stackoverflow.com/users/4372300/haalef"}, "edited": false, "score": 0, "creation_date": 1420671251, "post_id": 27827661, "comment_id": 44066217, "body": "I&#39;m afraid I cannot be more specific than that, but thanks anyway for trying to help."}], "owner": {"reputation": 178, "user_id": 4372300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/673642500/picture?type=large", "display_name": "Haalef", "link": "https://stackoverflow.com/users/4372300/haalef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420667594, "creation_date": 1420660813, "last_edit_date": 1420667594, "question_id": 27827661, "link": "https://stackoverflow.com/questions/27827661/how-can-i-send-text-to-a-console-window-like-cmd-from-c", "title": "How can I send text to a console window like cmd from C++?", "body": "<p>I have cmd.exe already open, and now I need to send commands to it from my running C++ program, how can I do it?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 0, "creation_date": 1420661059, "post_id": 27827391, "comment_id": 44061224, "body": "The fact that <code>vector</code> <i>does not</i> decay to a pointer to the first element is an <i>advantage</i> over arrays. Array decay is awful and one of the reasons to <i>never use raw arrays</i>."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1420663665, "post_id": 27827515, "comment_id": 44062631, "body": "std::array doesn&#39;t convert to array (or pointer) implicitly either"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1420664023, "post_id": 27827515, "comment_id": 44062833, "body": "Sorry, bad formulation. I just meant std::array would be better in this situation generally."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1445368477, "last_edit_date": 1445368477, "creation_date": 1420660302, "answer_id": 27827515, "question_id": 27827391, "link": "https://stackoverflow.com/questions/27827391/why-does-boost-require-vector0/27827515#27827515", "title": "Why does boost require &amp;vector[0]?", "body": "<p>No, a <code>std::vector</code> does <strong>not</strong> have all these operations and won't convert to an array implicitly. Ignoring the fact that a <code>std::array</code> won't change that, for your purposes, it would be better suited.</p>\n"}, {"tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 5, "last_activity_date": 1420660518, "creation_date": 1420660518, "answer_id": 27827568, "question_id": 27827391, "link": "https://stackoverflow.com/questions/27827391/why-does-boost-require-vector0/27827568#27827568", "title": "Why does boost require &amp;vector[0]?", "body": "<p>\"A vector has all operations an array has\" No.  Arrays implicitly decay to pointers, vector does not.  So when boost tries to pass it to the <code>put</code> function it generates this error:</p>\n\n<pre><code>error: no matching function for call to \u2018put(std::vector&lt;unsigned int&gt;&amp;, [blah blah])\nnote: candidates are:\n\ntemplate&lt;class T, class V&gt; void put(T*, std::ptrdiff_t, const V&amp;)\ntemplate argument deduction/substitution failed: \nmismatched types \u2018T*\u2019 and \u2018std::vector&lt;unsigned int&gt;\u2019\n\n[followed by details about the other potential put functions]\n</code></pre>\n\n<p>Apperently the <code>put</code> function would accept one of these, or something that implicitly converts to one of these.</p>\n\n<ul>\n<li><code>T*</code></li>\n<li><code>boost::writable_property_map_archetype&lt;K, V&gt;&amp;</code></li>\n<li><code>const boost::put_get_helper&lt;Reference, PropertyMap&gt;&amp;</code></li>\n<li><code>boost::null_property_map&lt;K, V&gt;&amp;</code></li>\n<li><code>Property</code></li>\n</ul>\n\n<p>(<code>edmonds_maximum_cardinality_matching</code> may have other requirements that cause these other types to also be invalid, I'm just saying these five types pass <em>this particular hurdle</em>.)</p>\n"}], "owner": {"reputation": 4658, "user_id": 2820379, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2K57T.jpg?s=128&g=1", "display_name": "ben", "link": "https://stackoverflow.com/users/2820379/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 27827568, "answer_count": 2, "score": 1, "last_activity_date": 1445368477, "creation_date": 1420659880, "last_edit_date": 1420660843, "question_id": 27827391, "link": "https://stackoverflow.com/questions/27827391/why-does-boost-require-vector0", "title": "Why does boost require &amp;vector[0]?", "body": "<p>Take <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/graph/doc/maximum_matching.html\" rel=\"nofollow\">edmonds_maximum_cardinality_matching</a> for example. I can do:</p>\n\n<pre><code>  vector&lt;uint32_t&gt; mate_map(n_vertices);\n  edmonds_maximum_cardinality_matching(g, &amp;mate_map[0]);\n</code></pre>\n\n<p>But not:</p>\n\n<pre><code>  vector&lt;uint32_t&gt; mate_map(n_vertices);\n  edmonds_maximum_cardinality_matching(g, mate_map);\n</code></pre>\n\n<p>Why is that so? A vector has all operations an array has right? NB: Here is the error message (for the second snippet) which I could not really handle:</p>\n\n<pre><code>In file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp: In instantiation of \u2018static void boost::extra_greedy_matching&lt;Graph, MateMap&gt;::find_matching(const Graph&amp;, MateMap) [with Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::undirectedS&gt;; MateMap = std::vector&lt;unsigned int&gt;]\u2019:\n/usr/include/boost/graph/max_cardinality_matching.hpp:842:63:   required from \u2018bool boost::matching(const Graph&amp;, MateMap, VertexIndexMap) [with Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::undirectedS&gt;; MateMap = std::vector&lt;unsigned int&gt;; VertexIndexMap = boost::vec_adj_list_vertex_id_map&lt;boost::no_property, long unsigned int&gt;; AugmentingPathFinder = boost::edmonds_augmenting_path_finder; InitialMatchingFinder = boost::extra_greedy_matching; MatchingVerifier = boost::no_matching_verifier]\u2019\n/usr/include/boost/graph/max_cardinality_matching.hpp:885:19:   required from \u2018void boost::edmonds_maximum_cardinality_matching(const Graph&amp;, MateMap, VertexIndexMap) [with Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::undirectedS&gt;; MateMap = std::vector&lt;unsigned int&gt;; VertexIndexMap = boost::vec_adj_list_vertex_id_map&lt;boost::no_property, long unsigned int&gt;]\u2019\n/usr/include/boost/graph/max_cardinality_matching.hpp:894:70:   required from \u2018void boost::edmonds_maximum_cardinality_matching(const Graph&amp;, MateMap) [with Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::undirectedS&gt;; MateMap = std::vector&lt;unsigned int&gt;]\u2019\nmain.C:20:51:   required from here\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: error: no matching function for call to \u2018put(std::vector&lt;unsigned int&gt;&amp;, boost::iterators::detail::iterator_facade_base&lt;boost::range_detail::integer_iterator&lt;long unsigned int&gt;, long unsigned int, boost::iterators::random_access_traversal_tag, long unsigned int, long int, false, false&gt;::reference, boost::graph_traits&lt;boost::adjacency_list&lt;boost::setS, boost::vecS, boost::undirectedS&gt; &gt;::vertex_descriptor)\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note: candidates are:\nIn file included from /usr/include/boost/graph/adjacency_list.hpp:36:0,\n                 from main.C:4:\n/usr/include/boost/property_map/property_map.hpp:124:15: note: template&lt;class T, class V&gt; void put(T*, std::ptrdiff_t, const V&amp;)\n   inline void put(T* pa, std::ptrdiff_t k, const V&amp; val) { pa[k] = val;  }\n               ^\n/usr/include/boost/property_map/property_map.hpp:124:15: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   mismatched types \u2018T*\u2019 and \u2018std::vector&lt;unsigned int&gt;\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\nIn file included from /usr/include/boost/graph/adjacency_list.hpp:36:0,\n                 from main.C:4:\n/usr/include/boost/property_map/property_map.hpp:193:8: note: template&lt;class K, class V&gt; void boost::put(const boost::writable_property_map_archetype&lt;K, V&gt;&amp;, const typename boost::writable_property_map_archetype&lt;K, V&gt;::key_type&amp;, const typename boost::writable_property_map_archetype&lt;K, V&gt;::value_type&amp;)\n   void put(const writable_property_map_archetype&lt;K,V&gt;&amp;,\n        ^\n/usr/include/boost/property_map/property_map.hpp:193:8: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   \u2018std::vector&lt;unsigned int&gt;\u2019 is not derived from \u2018const boost::writable_property_map_archetype&lt;K, V&gt;\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\nIn file included from /usr/include/boost/graph/adjacency_list.hpp:36:0,\n                 from main.C:4:\n/usr/include/boost/property_map/property_map.hpp:307:3: note: template&lt;class PropertyMap, class Reference, class K, class V&gt; void boost::put(const boost::put_get_helper&lt;Reference, PropertyMap&gt;&amp;, K, const V&amp;)\n   put(const put_get_helper&lt;Reference, PropertyMap&gt;&amp; pa, K k, const V&amp; v)\n   ^\n/usr/include/boost/property_map/property_map.hpp:307:3: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   \u2018std::vector&lt;unsigned int&gt;\u2019 is not derived from \u2018const boost::put_get_helper&lt;Reference, PropertyMap&gt;\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\nIn file included from /usr/include/boost/graph/properties.hpp:21:0,\n                 from /usr/include/boost/graph/adjacency_list.hpp:44,\n                 from main.C:4:\n/usr/include/boost/graph/property_maps/null_property_map.hpp:32:10: note: template&lt;class K, class V&gt; void boost::put(boost::null_property_map&lt;K, V&gt;&amp;, const K&amp;, const V&amp;)\n     void put(null_property_map&lt;K,V&gt;&amp; /*pm*/, const K&amp; /*key*/, const V&amp; /*value*/)\n          ^\n/usr/include/boost/graph/property_maps/null_property_map.hpp:32:10: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   \u2018std::vector&lt;unsigned int&gt;\u2019 is not derived from \u2018boost::null_property_map&lt;K, V&gt;\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\nIn file included from /usr/include/boost/graph/adjacency_list.hpp:246:0,\n                 from main.C:4:\n/usr/include/boost/graph/detail/adjacency_list.hpp:1760:5: note: template&lt;class Config, class Base, class Property, class Key, class Value&gt; void boost::put(Property, boost::adj_list_helper&lt;Config, Base&gt;&amp;, const Key&amp;, const Value&amp;)\n     put(Property p, adj_list_helper&lt;Config, Base&gt;&amp; g,\n     ^\n/usr/include/boost/graph/detail/adjacency_list.hpp:1760:5: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   mismatched types \u2018boost::adj_list_helper&lt;Config, Base&gt;\u2019 and \u2018boost::iterators::detail::iterator_facade_base&lt;boost::range_detail::integer_iterator&lt;long unsigned int&gt;, long unsigned int, boost::iterators::random_access_traversal_tag, long unsigned int, long int, false, false&gt;::reference {aka long unsigned int}\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\nIn file included from /usr/include/boost/graph/max_cardinality_matching.hpp:22:0,\n                 from main.C:5:\n/usr/include/boost/graph/filtered_graph.hpp:472:3: note: template&lt;class G, class EP, class VP, class Property, class Key, class Value&gt; void boost::put(Property, const boost::filtered_graph&lt;Graph, EdgePredicate, VertexPredicate&gt;&amp;, const Key&amp;, const Value&amp;)\n   put(Property p, const filtered_graph&lt;G, EP, VP&gt;&amp; g, const Key&amp; k,\n   ^\n/usr/include/boost/graph/filtered_graph.hpp:472:3: note:   template argument deduction/substitution failed:\nIn file included from main.C:5:0:\n/usr/include/boost/graph/max_cardinality_matching.hpp:617:58: note:   mismatched types \u2018const boost::filtered_graph&lt;Graph, EdgePredicate, VertexPredicate&gt;\u2019 and \u2018boost::iterators::detail::iterator_facade_base&lt;boost::range_detail::integer_iterator&lt;long unsigned int&gt;, long unsigned int, boost::iterators::random_access_traversal_tag, long unsigned int, long int, false, false&gt;::reference {aka long unsigned int}\u2019\n         put(mate, *vi, graph_traits&lt;Graph&gt;::null_vertex());\n                                                          ^\n</code></pre>\n\n<p>Full output here: <a href=\"http://pastebin.com/fG2aLRiG\" rel=\"nofollow\">http://pastebin.com/fG2aLRiG</a> (Outsourced because of SO's restrictions on post length)</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "valgrind"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420660844, "post_id": 27827379, "comment_id": 44061131, "body": "How do you select the address at which shared memory is created?  If you have a calculated address, rather than letting the system pick the address for you, could it be that <code>valgrind</code> is using space at that address?"}, {"owner": {"reputation": 1675, "user_id": 473781, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8e847a2e48fbe15e555d59c5da96a075?s=128&d=identicon&r=PG", "display_name": "Medicine", "link": "https://stackoverflow.com/users/473781/medicine"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420663303, "post_id": 27827379, "comment_id": 44062416, "body": "no shared memory is allocated before valgrind starts up. so valgrind shouldn&#39;t take that space."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1420664726, "post_id": 27827379, "comment_id": 44063197, "body": "But is the space that <code>valgrind</code> uses where you&#39;d normally locate the shared memory?  There are two modes for shared memory allocation: allocate at a user-defined address or at a system-chosen address.  If you let the system specify the shared memory address, then I have nothing for you.  If you choose the address, then maybe the address you&#39;re choosing is already in use by <code>valgrind</code>.  Or is the trouble that <code>valgrind</code> doesn&#39;t get you to the point where you can allocate shared memory?  You should probably identify the platform and version number as well."}, {"owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "edited": false, "score": 0, "creation_date": 1420665983, "post_id": 27827379, "comment_id": 44063820, "body": "Consider using strace as another tool for debugging, you can strace valgrind as it in turn runs your program.  The loader will use mmap to map shared libraries, so it might take some sleuthing to figure out who is making each of the mmap calls <a href=\"http://stackoverflow.com/questions/174942/how-should-strace-be-used\" title=\"how should strace be used\">stackoverflow.com/questions/174942/how-should-strace-be-used</a>"}], "owner": {"reputation": 1675, "user_id": 473781, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8e847a2e48fbe15e555d59c5da96a075?s=128&d=identicon&r=PG", "display_name": "Medicine", "link": "https://stackoverflow.com/users/473781/medicine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420659902, "creation_date": 1420659817, "last_edit_date": 1420659902, "question_id": 27827379, "link": "https://stackoverflow.com/questions/27827379/valgrind-fails-to-start-a-program-that-needs-to-attach-to-shared-memory-on-start", "title": "valgrind fails to start a program that needs to attach to shared memory on startup", "body": "<p>gcc version is 4.1.2 used to compile the program in debug mode</p>\n\n<pre><code>valgrind --log-file=\"log.txt\" -v prog\n</code></pre>\n\n<p>program throws error of unable to attach to shared memory at address</p>\n\n<p>without valgrind the program is starting properly</p>\n\n<p>Not sure if this is because of old gcc version.</p>\n\n<p>Also please let me know if there is any workaround without upgrading compiler if that is the reason.</p>\n"}, {"tags": ["c++", "unit-testing", "netbeans", "mingw", "cppunit"], "comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1420659712, "post_id": 27827307, "comment_id": 44060491, "body": "I don&#39;t think &quot;nothing&quot; is a very good description of what goes wrong. Also, how do you know that you should use VS?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420659795, "post_id": 27827307, "comment_id": 44060543, "body": "Good story, but was there a question? A review of <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> seems warranted."}, {"owner": {"reputation": 65, "user_id": 3191844, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000158615697/picture?type=large", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3191844/nervousdev"}, "edited": false, "score": 0, "creation_date": 1420659944, "post_id": 27827307, "comment_id": 44060629, "body": "I tried to say that I can&#39;t install sucessfuly the cppunit.  The question is how do I install cppUnit on Windows with minGW compiler."}], "answers": [{"tags": [], "owner": {"reputation": 22989, "user_id": 1622894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fc8ff4593f37f357f8e3985d9f16902?s=128&d=identicon&r=PG&f=1", "display_name": "ollo", "link": "https://stackoverflow.com/users/1622894/ollo"}, "is_accepted": false, "score": 0, "last_activity_date": 1421168905, "creation_date": 1421168905, "answer_id": 27927629, "question_id": 27827307, "link": "https://stackoverflow.com/questions/27827307/cppunit-with-windowsmingw/27927629#27927629", "title": "cppUnit with Windows+minGW", "body": "<blockquote>\n  <p>I tried to use cppUnit but I just can\u00b4t install it correctly.</p>\n</blockquote>\n\n<p>You can't install CppUnit out of the box, you have to build it before.</p>\n\n<h1>Steps to do</h1>\n\n<ol>\n<li>Get the sourcecode</li>\n<li>Build it</li>\n<li>Install (depends on how you handle your probjects)</li>\n<li>Add to your project</li>\n</ol>\n\n<hr>\n\n<h2>Get the sourcecode</h2>\n\n<p>You can get the <strong>sources</strong> from the <a href=\"http://www.freedesktop.org/wiki/Software/cppunit/\" rel=\"nofollow\"><strong>CppUnit website</strong> at freedesktop.org</a>.</p>\n\n<p>Either <strong>clone the git repository</strong> or <strong>download the release version</strong>.</p>\n\n<h2>Build it</h2>\n\n<p>The build is done using <code>configure</code> and <code>make</code>:</p>\n\n<pre><code>cd cppunit\n./autogen.sh\n./configure\nmake\nmake install\n</code></pre>\n\n<p>Do <strong><em>not</em></strong> use the windows cmd for that, this may fail - use <code>sh</code> instead (eg. open a cmd and execute <code>sh</code> to get a mingw shell).</p>\n\n<h2>Install</h2>\n\n<p>For installation on windows see <strong><code>INSTALL-WIN32.txt</code></strong> file within cppunit.</p>\n\n<h2>Add to your project</h2>\n\n<p>You have to <strong>add</strong> the <strong><em>compiled binaries</em></strong> to the <strong>linker</strong>- and <strong><em>header paths</em></strong> to <strong>compiler flags</strong>. This strongly depends on how you build your project (= the one with your unit tests).</p>\n\n<p>Since your question is tagged with <strong>netbeans</strong>, there's something realy cool:</p>\n\n<p>You can add cppunit only as testing dependency. For a default NetBeans C/C++ this is done through a right click on \"Test Files\" -> Properties\" -> \"C(++) Compiler respectively Linker settings.</p>\n\n<p>Unit tests can be added manually or through the \"New File\" Dialog.</p>\n"}], "owner": {"reputation": 65, "user_id": 3191844, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000158615697/picture?type=large", "display_name": "nervousDev", "link": "https://stackoverflow.com/users/3191844/nervousdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2962, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1421168905, "creation_date": 1420659514, "question_id": 27827307, "link": "https://stackoverflow.com/questions/27827307/cppunit-with-windowsmingw", "title": "cppUnit with Windows+minGW", "body": "<p>I'm using minGW with NetBeans to programming in C++. I know that I should use VS but it's defined to use NB.</p>\n\n<p>Now I need to make unit tests. I tried to use cppUnit but I just can\u00b4t install it correctly. I tried to follow several tutorials and nothing. </p>\n\n<p>From commands errors to NetBeans errors.</p>\n\n<p>I have minGW installed with Msys.</p>\n"}, {"tags": ["c++", "cocos2d-x"], "comments": [{"owner": {"reputation": 63704, "user_id": 201863, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/996952de195a8bc83b2421e49a754e7d?s=128&d=identicon&r=PG", "display_name": "LearnCocos2D", "link": "https://stackoverflow.com/users/201863/learncocos2d"}, "edited": false, "score": 0, "creation_date": 1420659876, "post_id": 27827292, "comment_id": 44060593, "body": "post the related/offending code"}, {"owner": {"reputation": 9127, "user_id": 167288, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c29056d9ec0bece9dc7345a0f8d794f7?s=128&d=identicon&r=PG", "display_name": "Adem", "link": "https://stackoverflow.com/users/167288/adem"}, "reply_to_user": {"reputation": 63704, "user_id": 201863, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/996952de195a8bc83b2421e49a754e7d?s=128&d=identicon&r=PG", "display_name": "LearnCocos2D", "link": "https://stackoverflow.com/users/201863/learncocos2d"}, "edited": false, "score": 0, "creation_date": 1420705098, "post_id": 27827292, "comment_id": 44075902, "body": "removeAllChildren(); would be enough after add some sprite nodes that move around the screen."}], "owner": {"reputation": 9127, "user_id": 167288, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c29056d9ec0bece9dc7345a0f8d794f7?s=128&d=identicon&r=PG", "display_name": "Adem", "link": "https://stackoverflow.com/users/167288/adem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420659853, "creation_date": 1420659475, "last_edit_date": 1420659853, "question_id": 27827292, "link": "https://stackoverflow.com/questions/27827292/how-can-i-remove-a-physic-node-safely-in-cocos2d-x", "title": "How can I remove a physic node safely in cocos2d-x", "body": "<p>I add some nodes that move around the screen. at some point, when I press a button (<code>MenuItemImage</code>), I need to change layer (not scene). So, I try to remove all moving nodes' <code>PhysicBody</code> from the <code>PhysicWorld</code> and then, remove nodes themselves. It works usually, but sometimes, I get crash from inside of <code>PhysicsBody::update</code> function. at that point, <code>this</code> refers moving object <code>PhysicBody</code>. and, it seems parent is NULL. But, I try all <code>PhysicBody</code> from the World. So, after I remove, they should not be drawn (I guess this is causing the problem)</p>\n\n<p>It is too obvious that there are some concurrency problem. but, I don't want to touch cocos2d-x dispatcher. so, what is the proper way to remove a <code>PhysicBody</code> and node from the world. </p>\n\n<p>now, I call <code>removeFromWorld()</code> for PhysicBody and <code>removeChildren</code> for Cocos2d node. Even, I put some delay between these two operation, I still get crash sometimes.</p>\n"}, {"tags": ["c++", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1420659414, "post_id": 27827072, "comment_id": 44060323, "body": "Related: Even if this is possible, are both allocation <i>and</i> de-allocation <i>entirely</i> within to the code in question? If not, the number of false-positives could be painful."}, {"owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420660505, "post_id": 27827072, "comment_id": 44060939, "body": "@WhozCraig: the leaks I&#39;m concerned about are most likely allocations within that code that <i>should have been</i> de-allocated within that code, but, apparently, were not."}], "answers": [{"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 6, "last_activity_date": 1420660249, "last_edit_date": 1592644375, "creation_date": 1420659624, "answer_id": 27827335, "question_id": 27827072, "link": "https://stackoverflow.com/questions/27827072/is-it-possible-to-run-valgrind-on-a-portion-of-the-code/27827335#27827335", "title": "Is it possible to run valgrind on a portion of the code?", "body": "<p>Not with memcheck, no. According to the <a href=\"http://valgrind.org/docs/manual/faq.html#faq.attach\" rel=\"noreferrer\">valgrind FAQ</a>, callgrind is currently the only valgrind component that supports this:</p>\n<blockquote>\n<p><strong>5.4. Is it possible to attach Valgrind to a program that is already running?</strong></p>\n<p>No. The environment that Valgrind provides for running programs is significantly different to that for normal programs, e.g. due to different layout of memory. Therefore Valgrind has to have full control from the very start.</p>\n<p>It is possible to achieve something like this by running your program without any instrumentation (which involves a slow-down of about 5x, less than that of most tools), and then adding instrumentation once you get to a point of interest. Support for this must be provided by the tool, however, and Callgrind is the only tool that currently has such support. See the instructions on the <code>callgrind_control</code> program for details.</p>\n</blockquote>\n"}], "owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 27827335, "answer_count": 1, "score": 4, "last_activity_date": 1420660249, "creation_date": 1420658659, "question_id": 27827072, "link": "https://stackoverflow.com/questions/27827072/is-it-possible-to-run-valgrind-on-a-portion-of-the-code", "title": "Is it possible to run valgrind on a portion of the code?", "body": "<p>I have a memory leak that happens within a known section of fairly large system. I'd like to run full speed until that section of code, run valgrind memcheck on that section, and collect valgrind memcheck report at the end of said section without completing the run further. Is that possible?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1420657966, "post_id": 27826873, "comment_id": 44059517, "body": "I think this is your problem: <code>};</code> remove the <code>;</code> does that do the trick?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 10, "creation_date": 1420658116, "post_id": 27826873, "comment_id": 44059603, "body": "The designated initialisers for <code>setup</code> are C (C99) syntax. You seem to compile as C++. (As far as I know, C++ doesn&#39;t have designated initialisers, but I&#39;m not exactly a C++ expert.)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1420658305, "post_id": 27826873, "comment_id": 44059686, "body": "Try to rename that file to numabench.c instead of .cpp"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1420658343, "post_id": 27826873, "comment_id": 44059705, "body": "In other words, C != C++. In general tag only the language you are compiling."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1420658445, "post_id": 27826873, "comment_id": 44059775, "body": "@crashmstr He did. This used to be compiled as C code."}, {"owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "edited": false, "score": 0, "creation_date": 1420658889, "post_id": 27826873, "comment_id": 44060021, "body": "I try to remove the    ; but it does not work also."}, {"owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "edited": false, "score": 0, "creation_date": 1420659185, "post_id": 27826873, "comment_id": 44060196, "body": "is the statement      .regions = (memory_regions_t) { .count = 0, .regions = NULL } not important? i have to remove it??!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1420659435, "post_id": 27826873, "comment_id": 44060334, "body": "@nikomad it is not that they are not imporatnt, that&#39;s not a valid C++ code and you are compiling it in C++"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1420659844, "post_id": 27826873, "comment_id": 44060573, "body": "Where did you get that file from? Why does it have .cpp extension?"}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1420698849, "post_id": 27827569, "comment_id": 44073727, "body": "@JensGustedt: Yes, of course, it&#39;s a literal for compunds. (I must admit that I often mix up designated initialisers and compound literals, although the concepts are straightforward.) Thanks for pointing that out, fixed."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1420698693, "last_edit_date": 1420698693, "creation_date": 1420660519, "answer_id": 27827569, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error/27827569#27827569", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>Your code uses two C features, that C++ doesn't recognise: <em>compound literals</em> that allow you to specify values for compound data structures (arrays and structs) outside initialisation and <em>designated initialisers</em> that allow you to initialise individual fields of structures or individual array entries.</p>\n\n<p>I assume that <code>setup_t</code> is a typedef to a structure. Your code:</p>\n\n<pre><code>setup_t* setup = (setup_t){\n      .regions = (memory_regions_t){ .count = 0, .regions = NULL }\n};\n</code></pre>\n\n<p>does not compile in C. The compiler wants either</p>\n\n<pre><code>setup_t *setup = (setup_t[]) {{ .regions = ... }};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>setup_t *setup = &amp;(setup_t) { .regions = ... };\n</code></pre>\n\n<p>Otherwise you have incompatible types in initialisation, namely <code>setup_t *</code> and <code>setup_t</code>.</p>\n\n<p>You can get around the compound literal by specifying an instance of <code>setup_t</code> and making <code>setup</code> a pointer to that:</p>\n\n<pre><code>setup_t data = { .regions = ... };\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>You can get around the designated initialisers by either specifying the fields in order as in C89 or by creating an instance that is initialised to all zeros and then assigning values to the fields you want to initialise.</p>\n\n<p>In your case, all initialised values are zero. Initialising at least one field ensures that all subsequent fields are also initalised with zero or null values. You could try:</p>\n\n<pre><code>setup_t data = {0};\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>Or, it the first field of <code>setup_t</code> is a structure, for example, <code>regions</code>:</p>\n\n<pre><code>setup_t data = {{0}};\nsetup_t *setup = &amp;data;\n</code></pre>\n\n<p>I've tried this with a (made-up) struct and It seems to work in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420719613, "post_id": 27834274, "comment_id": 44083595, "body": "That&#39;s not really an answer, is it? The OP&#39;s code is just an excerpt that shows the part of the code where the error is indicated. (The line with <code>setup_t</code> is line 176 in OP&#39;s error message.)"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1420726746, "post_id": 27834274, "comment_id": 44088200, "body": "@MOehm: Not to me. The code shown should be producing something like the errors here. To fix those errors, they should include <code>cstdlib</code>, <code>cstdio</code>, <code>cassert</code> and define those two functions. Are we supposed to guess what the code is instead of using the code that nikomad showed us?"}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 0, "last_activity_date": 1420726656, "last_edit_date": 1420726656, "creation_date": 1420698885, "answer_id": 27834274, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error/27834274#27834274", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>Your code should actually be getting a different set of errors then what you've shown above:</p>\n\n<pre><code>[12:33am][wlynch@watermelon /tmp] c++ foo.cc \nfoo.cc:3:5: error: unknown type name 'setup_t'\n    setup_t* setup = (setup_t){\n    ^\nfoo.cc:3:23: error: use of undeclared identifier 'setup_t'; did you mean\n      'setup'?\n    setup_t* setup = (setup_t){\n                      ^~~~~~~\n                      setup\nfoo.cc:3:14: note: 'setup' declared here\n    setup_t* setup = (setup_t){\n             ^\nfoo.cc:7:5: error: use of undeclared identifier 'assert'\n    assert(argc == 2);\n    ^\nfoo.cc:9:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;?xml version='1.0'?&gt;\\n\\n\");\n    ^\nfoo.cc:10:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;numabench-result&gt;\\n\\n\");\n    ^\nfoo.cc:12:5: error: use of undeclared identifier 'printf'\n    printf(\"&lt;/numabench-result&gt;\\n\");\n    ^\nfoo.cc:13:5: error: use of undeclared identifier 'mainPCM'\n    mainPCM();\n    ^\nfoo.cc:14:12: error: use of undeclared identifier 'EXIT_SUCCESS'\n    return EXIT_SUCCESS;\n           ^\n8 errors generated.\n</code></pre>\n\n<p>Notably, you are missing some <code>#include &lt;...&gt;</code> statements, the declaration for <code>setup_t</code>, and the declaration for <code>mainPCM()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4430197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483e60fe136b873df55f2f7302dcea00?s=128&d=identicon&r=PG&f=1", "display_name": "nikomad", "link": "https://stackoverflow.com/users/4430197/nikomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1420726656, "creation_date": 1420657922, "last_edit_date": 1420658109, "question_id": 27826873, "link": "https://stackoverflow.com/questions/27826873/expected-primary-expression-before-token-error", "title": "expected primary-expression before \u2018)\u2019 token ? error", "body": "<p>i searched and find some other questions like this. But i cant find the fail in my code.\nMaybe someone find it?\nThis is/was c-code. but i had to rename it in .cpp and so i have no some errors:</p>\n\n<pre><code>make[1]: Entering directory `/home/numa'\nc++ -DHAVE_CONFIG_H -I.  -I/usr/include/libxml2     -g -O2 -MT numabench.o -MD -MP -MF .deps/numabench.Tpo -c -o numabench.o numabench.cpp\nnumabench.cpp: In function \u2018int main(int, char**)\u2019:\nnumabench.cpp:176:29: error: expected primary-expression before \u2018)\u2019 token\nnumabench.cpp:176:31: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token\nnumabench.cpp:192:1: error: expected \u2018}\u2019 at end of input\n</code></pre>\n\n<p>And this is the method of the numabench.cpp</p>\n\n<p>What is there missing. Anyone an idea?</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    setup_t* setup = (setup_t){\n          .regions = (memory_regions_t){ .count = 0, .regions = NULL }\n    };\n\n    assert(argc == 2);\n    parse_setup_file(&amp;setup, argv[1]);\n    printf(\"&lt;?xml version='1.0'?&gt;\\n\\n\");\n    printf(\"&lt;numabench-result&gt;\\n\\n\");\n    iterate_params(&amp;setup, 0);\n    printf(\"&lt;/numabench-result&gt;\\n\");\n    mainPCM();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "overloading"], "answers": [{"comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1420659122, "post_id": 27826995, "comment_id": 44060160, "body": "Did you mean <code>operator&gt;&gt;</code> instead of <code>operator&lt;&lt;</code>?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1420659324, "post_id": 27826995, "comment_id": 44060271, "body": "@MarkB: Yes, thanks, although the rule applies to all of them."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420659371, "post_id": 27826995, "comment_id": 44060294, "body": "I assume he meant operator&gt;&gt; and it is but a typo. Yet, while I accept the answer, I cannot help but think that the specification hints to a deeper problem. Why would the (convertible) type of an operand have an impact? To my taste, the two forms should always be synonymous and the rewrite from the short to the longer form should take place BEFORE operand types are taken into consideration."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420659444, "post_id": 27826995, "comment_id": 44060339, "body": "@user2225104: Then every usage would become ambiguous.  There&#39;s virtually no built-in type that can&#39;t convert to <i>something</i> of class type.  Anyway, you asked whether it was a compiler bug, and it isn&#39;t; the Standard is clear that this is the required behavior."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420659545, "post_id": 27826995, "comment_id": 44060391, "body": "@user2225104 you cannot do that before operand types are taken into consideration: to what do you convert? You can have unlimited user-types can be constructed from a built-in type (or a built-in type  can be converted to an unlimited class types)"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420659579, "post_id": 27826995, "comment_id": 44060408, "body": "The same should then apply to the other form. I consider the short form &quot;syntactic sugar&quot; and sugar should not pour salt into your dishes ;)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1420659712, "post_id": 27826995, "comment_id": 44060492, "body": "@user2225104: The current rules provide compatibility with C.  C doesn&#39;t have class types, so C++ can do anything with expressions involving class types without breaking anything.  But expressions without class types already have meaning in C, and C++ strives to keep that meaning.  Injecting overload resolution into that would definitely change the behavior of perfectly good C code."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420660074, "post_id": 27826995, "comment_id": 44060711, "body": "@BenVoigt : A valid point, even though not many would (intentionally) shift an integer to the right, the function address of a function pointer times. Maybe C specification could be narrowed and people would find tons of bugs in their code, such as forgotten (). ;)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1420660529, "post_id": 27826995, "comment_id": 44060950, "body": "@user2225104: Currently it gives a perfectly reasonable error message.  Having it rewrite to function-call form and start converting operands would be more likely to hide errors, not less."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421169926, "post_id": 27826995, "comment_id": 44252822, "body": "On a side note: I was trying to configure my clang and also a 4.8.x gcc to become an &quot;oldest possible&quot; compiler, only compiling C code (not C++) and tried to &quot;forget&quot; the (), I.e. shift an integral value to the right by the address of a function and... it never compiled. So C legacy is obviously NOT the reason, this inconvenience is burdened upon us."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421169985, "post_id": 27826995, "comment_id": 44252861, "body": "@user2225104: Continuing to generate the same error for the same datatypes is part of backward compatibility."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421170135, "post_id": 27826995, "comment_id": 44252955, "body": "@BenVoigt : The c++ keyword <code>class</code> also produces a compiler error in C-code compiled with a C-compiler. I fail to see the point here."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421170290, "post_id": 27826995, "comment_id": 44253034, "body": "@user2225104: Is your point that because compatibility is not 100%, that it is not worth trying to get 99.9%?  If so, you&#39;re wrong, many developers appreciate near-perfect compatibility.  If you have a different point, please explain."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421170513, "post_id": 27826995, "comment_id": 44253172, "body": "@BenVoigt : Indeed I do. The construct discussed in this post would allow for great code. Just because someone tries to - as you mused - compile some legacy C code with a C++ compiler, expecting their code NOT to compile (errm...) ... progress is blocked. I doubt there is a majority of people who want code not to compile just for the not-compiling sake of it."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421170637, "post_id": 27826995, "comment_id": 44253256, "body": "@user2225104: Unless I am mistaken, you have proposed overload resolution for operators in all expressions, not just where the operands have class type.  That does not only affect C code which fails to compile, it also changes the meaning of good and working C code.  So the language committee will never approve it.  You could have a rule that &quot;If the built-in operators generate an error, then use overload resolution&quot; but that would be very confusing and complicated and people would still complain when their overload wasn&#39;t used (because the builtin operator <i>did</i> compile)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421170878, "post_id": 27826995, "comment_id": 44253390, "body": "@user2225104: The answer is that: &quot;Overloading happens if at least one operand has class type&quot; is a rule which is simple and easy-to-understand, and does not break any C code.  If you think you can write a rule just as good, first try writing it, then make a proposal to change the language.  But be prepared to be told that (1) your rule isn&#39;t simple or (2) it changes the behavior of code A, B, and C which are working fine under the current rules"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421171164, "post_id": 27826995, "comment_id": 44253522, "body": "Lets assume the lexeme &quot;&gt;&gt;&quot; would always the treated as operator&gt;&gt;() and then the function would be optimized away again in the legacy cases. Do you really think that would break existing code?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421171330, "post_id": 27826995, "comment_id": 44253619, "body": "I know it would change the meaning of existing working code, depending on what overloads you write."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 6, "last_activity_date": 1420659308, "last_edit_date": 1420659308, "creation_date": 1420658350, "answer_id": 27826995, "question_id": 27826824, "link": "https://stackoverflow.com/questions/27826824/operator-overload-behaving-in-a-surprising-way/27826995#27826995", "title": "operator&gt;&gt;(,) overload behaving in a surprising way", "body": "<p>But <strong>\"A function pointer is not a class type\"</strong> <em>is</em> the correct answer.</p>\n\n<p>There's the following note in clause 13.6:</p>\n\n<blockquote>\n  <p>operator overload resolution occurs only when an operand expression originally has class\n  or enumeration type</p>\n</blockquote>\n\n<p>The normative rule is in 13.3.1.2 (emphasis mine):</p>\n\n<blockquote>\n  <p>If no operand of an operator in an expression has a type that is a class or an enumeration,  the operator is assumed to be a built-in operator and interpreted according to Clause 5.</p>\n  \n  <p><strong>If either operand has a type that is a class or an enumeration</strong>, a user-de\ufb01ned operator function might be declared that implements this operator or a user-de\ufb01ned conversion can be necessary to convert the operand to a type that is appropriate for a built-in operator.  In this case, overload resolution is used to determine which  operator  function  or  built-in  operator  is  to  be  invoked  to  implement  the  operator.   Therefore,  <strong>the operator notation is first transformed to the equivalent function-call notation</strong> as summarized in Table 11.</p>\n</blockquote>\n\n<p>The forms are synonymous only when one of the operands is a class type.  Since neither one is here, the rewrite as <code>operator&gt;&gt;()</code> doesn't occur.</p>\n"}], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 27826995, "answer_count": 1, "score": 5, "last_activity_date": 1420659308, "creation_date": 1420657746, "question_id": 27826824, "link": "https://stackoverflow.com/questions/27826824/operator-overload-behaving-in-a-surprising-way", "title": "operator&gt;&gt;(,) overload behaving in a surprising way", "body": "<p>Well, maybe it is not so surprising. Stackoverflow has a lot of questions and contributions to that point. Only they are not EXACTLY to the point.</p>\n\n<p>Here an extract from the C++ standard (in fact a c++14 draft, but I assume the passage is the same in current C++11 standard):</p>\n\n<blockquote>\n  <p>An operator function shall either be a non-static member function or be a non-member function that has\n  at least one parameter whose type is a class, a reference to a class, an enumeration, or a reference to an\n  enumeration. It is not possible to change the precedence, grouping, or number of operands of operators.\n  The meaning of the operators =, (unary) &amp;, and , (comma), predefined for each type, can be changed for\n  specific class and enumeration types by defining operator functions that implement these operators. Operator\n  functions are inherited in the same manner as other base class functions.</p>\n</blockquote>\n\n<p>Thus, to my understanding, it is perfectly legal to have 1 class type and one non-class type as parameters to operator>>(,). The standard does not say \"The first\" or \"The second\" parameter. Just \"One\" of them must be a class type.</p>\n\n<p>Here a code snippet which surprises me:</p>\n\n<pre><code>int operator&gt;&gt; ( int v, std::function&lt;int(int)&gt; transformer )\n{\n    int v1 = transformer(v);\n    DGS::CLogger::GetLogger()-&gt;Log&lt;int&gt;(&amp;IntFormatter, v1 );\n    return v1;\n}\nstatic int DoItLoggedAndCompact( int value )\n{\n    int x = operator&gt;&gt;( operator&gt;&gt;(value, DoIt) , AnotherIntCalculation ); // compiles and works!\n    return x;\n// The following line produces (with clang++):\n// error: invalid operands to binary expression ('int' and 'int (*)(int)')\n//      return value &gt;&gt; DoIt &gt;&gt; AnotherIntCalculation; : \n}\n</code></pre>\n\n<p>Please note that \"A function pointer is not a class type\", while being a correct statement, is not a comprehensive answer. As you see in the rewritten code starting with <code>int x = ...</code> and the definition of operator>> second parameter, the function pointer is silently converted to a std::function.</p>\n\n<p>I cannot find anywhere in the standard a passage which states, that the conversion rules for those two (allegedly) synonymous forms differ.</p>\n\n<p>So, is this a compiler bug, a community wide over-interpretation of the C++ specification or...something else we see here? Or simply some stupid oversight on my part?</p>\n"}, {"tags": ["c++", "image", "opencv", "visual-c++", "emgucv"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3850726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f604f71656129bf6af28dcdea56bfc?s=128&d=identicon&r=PG&f=1", "display_name": "nboch12", "link": "https://stackoverflow.com/users/3850726/nboch12"}, "edited": false, "score": 0, "creation_date": 1420662376, "post_id": 27827787, "comment_id": 44061934, "body": "It still gave me the same error. The &#39;^&#39; is there because it&#39;s a managed variable."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 21, "user_id": 3850726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f604f71656129bf6af28dcdea56bfc?s=128&d=identicon&r=PG&f=1", "display_name": "nboch12", "link": "https://stackoverflow.com/users/3850726/nboch12"}, "edited": false, "score": 0, "creation_date": 1420662570, "post_id": 27827787, "comment_id": 44062034, "body": "Ah, I was unfamiliar with the Microsoft C++ Component Extensions.  Without seeing your entire header file it&#39;s hard to know for sure why the compiler is complaining."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 21, "user_id": 3850726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f604f71656129bf6af28dcdea56bfc?s=128&d=identicon&r=PG&f=1", "display_name": "nboch12", "link": "https://stackoverflow.com/users/3850726/nboch12"}, "edited": false, "score": 0, "creation_date": 1420663073, "post_id": 27827787, "comment_id": 44062315, "body": "Are you sure you have the namespace correct?  Take a look at the library header file and make sure that CV isn&#39;t lower case or something weird like that."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 21, "user_id": 3850726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f604f71656129bf6af28dcdea56bfc?s=128&d=identicon&r=PG&f=1", "display_name": "nboch12", "link": "https://stackoverflow.com/users/3850726/nboch12"}, "edited": false, "score": 0, "creation_date": 1420664236, "post_id": 27827787, "comment_id": 44062942, "body": "Did you change both your .h and .cpp files with the Point2D&lt;int&gt; change?"}], "tags": [], "owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 0, "last_activity_date": 1420661349, "creation_date": 1420661349, "answer_id": 27827787, "question_id": 27826754, "link": "https://stackoverflow.com/questions/27826754/declaring-a-new-point-using-emgu-cv-c/27827787#27827787", "title": "Declaring a new point using Emgu CV C++", "body": "<p>According to the <a href=\"http://www.emgu.com/wiki/files/1.4.0.0/html/594a2f5b-ee34-a879-c4ad-07c59929be43.htm\" rel=\"nofollow\">Point2D documentation</a>, Point2D only takes 1 template argument for the datatype of the point.  You want:</p>\n\n<pre><code>Point2D&lt;int&gt;\n</code></pre>\n\n<p>Also, get rid of that '^' character - why is that even there?</p>\n"}], "owner": {"reputation": 21, "user_id": 3850726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f604f71656129bf6af28dcdea56bfc?s=128&d=identicon&r=PG&f=1", "display_name": "nboch12", "link": "https://stackoverflow.com/users/3850726/nboch12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420661349, "creation_date": 1420657473, "question_id": 27826754, "link": "https://stackoverflow.com/questions/27826754/declaring-a-new-point-using-emgu-cv-c", "title": "Declaring a new point using Emgu CV C++", "body": "<p>Hi I can't seem to be able to even declare a point in Emgu CV currently. I'm trying to declare a new point so that I can use that point as the center of a rectangle which I will show on each frame of a video feed so that the user can see the Region of Interest. In my header file I have </p>\n\n<pre><code>Emgu::CV::Point2D&lt;int,int&gt;^Center;\n</code></pre>\n\n<p>and in my Source file I have </p>\n\n<pre><code>Center = gcnew Emgu::CV::Point2D&lt;int,int&gt;(120, 160);\n</code></pre>\n\n<p>The error that I'm getting is </p>\n\n<pre><code>5&gt;c:\\users\\admin\\desktop\\swir source code\\hyperspectral\\baotfis\\BAOTFISInterface.h(88): error C2039: 'Point2D' : is not a member of 'Emgu::CV'\n</code></pre>\n\n<p>which confuses me because how is it NOT a member of Emgu::CV? </p>\n\n<p>Am I missing a namespace or am I just declaring it wrong? I'm using Microsoft Visual Studio 2010 Express. Any and all help is greatly appreciated thank you very much. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1420658010, "post_id": 27826550, "comment_id": 44059542, "body": "Rather than comparing characters to numbers, compare them to character literals.  For example, <code>if (character == &#39;\\r&#39;)</code>."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1420658161, "post_id": 27826550, "comment_id": 44059624, "body": "I&#39;m not sure I understand why your outer loop even exists.  Can you explain a little clearer what this code is supposed to be doing?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1420658279, "post_id": 27826550, "comment_id": 44059681, "body": "Why are you using <code>getche</code> instead of <code>cin</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 2, "last_activity_date": 1420658018, "creation_date": 1420658018, "answer_id": 27826901, "question_id": 27826550, "link": "https://stackoverflow.com/questions/27826550/first-character-lost-when-writing-data-to-file/27826901#27826901", "title": "First character lost when writing data to file", "body": "<p>You aren't doing anything with ch in the beginning of your first else clause.  You need to write it to the file like you do in your inner loop.  Also, you need to change your inner loop to use j instead of i... never use the same temporary for nested loops.</p>\n"}], "owner": {"reputation": 1, "user_id": 4430115, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001779706948/picture?type=large", "display_name": "Ayub &#206;dr&#233;&#232;s", "link": "https://stackoverflow.com/users/4430115/ayub-%c3%8edr%c3%a9%c3%a8s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420658018, "creation_date": 1420656683, "last_edit_date": 1420657928, "question_id": 27826550, "link": "https://stackoverflow.com/questions/27826550/first-character-lost-when-writing-data-to-file", "title": "First character lost when writing data to file", "body": "<p>I'm facing a problem regarding data entry in file. I'm making arrays which terminate when I press enter key but the problem is that the character at 0 index is not in file while the rest of the indexes are there. In other words,while writing to the file my first character of the array got missed and was not present in the file.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>char CNIC[10000];\nstd::fstream file1;\n\ncout&lt;&lt;\"Enter CNIC's &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \"&lt;&lt;endl;\nfile1.open(\"Nadra database.txt\",std::fstream::in | std::fstream::out | std::fstream::app);\nif(!file1)\n{\n    cout&lt;&lt;\"File was not open\";\n}\nelse\n{\n    for(int i=0;i&lt;11;i++)\n    {\n       char ch = getche();\n       if((int)ch==13)\n       {\n             cout&lt;&lt;\"Press Enter key to close data entry \"&lt;&lt;endl;\n             break;\n       }\n       else\n       {\n           for(int i=0;i&lt;11;i++)\n           {\n                char character = getche();\n                if((int)character==13)\n                {\n                       break;\n                }\n                else\n                {\n                     CNIC[i]=character;\n                     file1&lt;&lt;CNIC[i];\n                } \n           }\n           file1&lt;&lt;endl;\n      }\n } \n\n}\nsystem(\"pause\");\n</code></pre>\n"}, {"tags": ["c++", "vector", "boolean", "bitset", "stl-algorithm"], "comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 2, "creation_date": 1420656367, "post_id": 27826408, "comment_id": 44058593, "body": "What algorithm do you want to use on the bits of the bitset?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1420656729, "post_id": 27826408, "comment_id": 44058828, "body": "@V&#225;clavZeman Well initially I wanted to use <code>std::reverse</code>, but then when I found out <code>std::bitset</code> wouldn&#39;t let me use STL algorithms on it, I just wanted to find a way to use them in general."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1420656769, "post_id": 27826408, "comment_id": 44058852, "body": "You could write appropriate iterators and pair of freestanding <code>begin()</code> and <code>end()</code> functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1420657212, "post_id": 27826408, "comment_id": 44059114, "body": "You might not use an std::algorithm on a bitset, see <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#BitReverseObvio&zwnj;&#8203;us</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1420658389, "post_id": 27826408, "comment_id": 44059735, "body": "@DieterL&#252;cking That&#39;s amazing, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1420658876, "post_id": 27826634, "comment_id": 44060009, "body": "Seems like a loop would be better than that solution... I&#39;m not totally opposed to a loop it just seems like there should be something cleaner. As far as using <code>std::bitset</code>... I think so? The flexibility to convert back and forth between a number and an array is hard to beat."}], "tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": false, "score": 2, "last_activity_date": 1420657024, "creation_date": 1420657024, "answer_id": 27826634, "question_id": 27826408, "link": "https://stackoverflow.com/questions/27826408/converting-between-stdbitset-and-stdvectorbool/27826634#27826634", "title": "Converting Between std::bitset and std::vector&lt;bool&gt;", "body": "<p>If you do not want to write loops using the <code>operator[]</code> of the <code>bitset</code>, then you might try using <code>bitset::to_string()</code> to convert the bitset to a string of <code>'1'</code> and <code>'0'</code>. Since C++11, you can actually choose different characters than those two, so you could actually choose <code>'\\0'</code> and <code>'\\1'</code>.</p>\n\n<p>Are you sure <code>bitset</code> is the optimal type for your task?</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1422450278, "creation_date": 1422450278, "answer_id": 28193033, "question_id": 27826408, "link": "https://stackoverflow.com/questions/27826408/converting-between-stdbitset-and-stdvectorbool/28193033#28193033", "title": "Converting Between std::bitset and std::vector&lt;bool&gt;", "body": "<p>Matthew Austern wrote an iterator for <code>bitset</code> here: <a href=\"http://www.drdobbs.com/the-standard-librarian-bitsets-and-bit-v/184401382?pgno=2\" rel=\"nofollow\">http://www.drdobbs.com/the-standard-librarian-bitsets-and-bit-v/184401382?pgno=2</a></p>\n\n<p>It's over 100 lines so I feel just lifting it and putting it in this answer may be a bit out of bounds. But it works marvelously for STL algorithms.</p>\n\n<p>Austern answers this exact question:</p>\n\n<blockquote>\n  <p>While bitset doesn\u2019t have the STL container interface, it\u2019s still a perfectly good (fixed-size) container. If it makes sense for you to use a bitset, and if you also need iterators, then you can define a simple \u201cindex iterator\u201d adaptor that translates iterator notation like *i into array notation like b[n]. The implementation is straightforward: maintain an index and a pointer to a container.</p>\n</blockquote>\n\n<p>He does warn of his iterator:</p>\n\n<blockquote>\n  <p>If we were willing to accept a slightly more cumbersome interface, we could define a class that worked with arbitrary array-like types. A general purpose index iterator adaptor is often useful when dealing with pre-STL container classes, and sometimes even when dealing with STL containers like vector.</p>\n</blockquote>\n\n<p>It should also be noted that just as with a <code>vector&lt;bool&gt;::iterator</code>, Austern's  <code>bitset_iterator::operator*</code> doesn't return a <code>bool&amp;</code> but a proxy reference: <code>bitset&lt;&gt;::reference</code>.</p>\n\n<p>Usage of <code>bitset_iterator</code> looks like this:</p>\n\n<pre><code>std::bitset&lt;10&gt; foo;\nstd::vector&lt;bool&gt; bar(begin(foo), end(foo));\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4719, "favorite_count": 2, "accepted_answer_id": 28193033, "answer_count": 2, "score": 9, "last_activity_date": 1422450278, "creation_date": 1420656185, "question_id": 27826408, "link": "https://stackoverflow.com/questions/27826408/converting-between-stdbitset-and-stdvectorbool", "title": "Converting Between std::bitset and std::vector&lt;bool&gt;", "body": "<p>I have a <code>std::bitset</code> but now I want to use an STL algorithm on it.</p>\n\n<p>I could have used <code>std::vector&lt;bool&gt;</code> instead, but I like <code>std::bitset</code>'s constructor and I want <code>std::bitset</code>'s bitwise operations.</p>\n\n<p>Do I have to go through a loop and stuff everything in a <code>std::vector&lt;bool&gt;</code> to use STL algorithms, and then copy that back to the <code>std::bitset</code>, or is there a better way?</p>\n"}, {"tags": ["c++", "pointers", "file-io", "cout"], "comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 1, "creation_date": 1420656170, "post_id": 27826359, "comment_id": 44058477, "body": "I&#39;d recommend learning how to use C++ string abstraction.  You might not have learned it yet, but now&#39;s the time."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420656250, "post_id": 27826359, "comment_id": 44058530, "body": "@Rie Kumar The code would be simple if you use std::vector&lt;std::string&gt; instead of the array."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1420656309, "post_id": 27826359, "comment_id": 44058562, "body": "... and fixed <code>while (input.eof())</code>, <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">which is wrong</a>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1420656353, "post_id": 27826359, "comment_id": 44058582, "body": "@Rie Kumar As for you code then you have to declare a two-dimensional array each element of which would have the size that at least equal to the size of the maximum data in the file."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420656641, "post_id": 27826359, "comment_id": 44058771, "body": "What is the problem you&#39;re having with this code currently?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1420658237, "post_id": 27826359, "comment_id": 44059661, "body": "Working strings as buffers and pointers is unecessary and retrograde. This is C++ not C, use the tools it offers."}, {"owner": {"reputation": 37, "user_id": 4160239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6858364ef8f74f09d0be93c248e03a04?s=128&d=identicon&r=PG&f=1", "display_name": "Rie Kumar", "link": "https://stackoverflow.com/users/4160239/rie-kumar"}, "edited": false, "score": 0, "creation_date": 1420661131, "post_id": 27826359, "comment_id": 44061261, "body": "Well, my instructor would dock me big time for using the std::string and the code is not outputting any of the text stored on the text file."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4160239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6858364ef8f74f09d0be93c248e03a04?s=128&d=identicon&r=PG&f=1", "display_name": "Rie Kumar", "link": "https://stackoverflow.com/users/4160239/rie-kumar"}, "edited": false, "score": 0, "creation_date": 1420661334, "post_id": 27826569, "comment_id": 44061378, "body": "I can&#39;t use #include&lt;string&gt; &amp; std::string. I really wish I could because from most of the answers so far it seems the easiest. Unfortunately, my instructor would dock me quite a bit of points for using something we haven&#39;t learned yet."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1420656751, "last_edit_date": 1495542034, "creation_date": 1420656751, "answer_id": 27826569, "question_id": 27826359, "link": "https://stackoverflow.com/questions/27826359/how-to-read-names-into-a-pointer-array-and-output-them/27826569#27826569", "title": "How to read names into a pointer array and output them?", "body": "<p>I would do something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nint main() {\n  std::string array[6];\n  std::ifstream infile(\"Team.txt\");\n  std::string line;\n  int i = 0;\n  while (std::getline(infile, line)) {\n    array[i++] = line;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>based on <a href=\"https://stackoverflow.com/a/7868998/2411320\">this</a> answer.</p>\n\n<p>Here, we assume we have to read 6 lines from the file \"Team.txt\". We use <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\">std:::getline()</a> and we put inside a <code>while</code> so that we read all the file.</p>\n\n<p>At every iteration, <code>line</code> holds the current line of the file read. Inside the body we store it in <code>array[i]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4160239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6858364ef8f74f09d0be93c248e03a04?s=128&d=identicon&r=PG&f=1", "display_name": "Rie Kumar", "link": "https://stackoverflow.com/users/4160239/rie-kumar"}, "edited": false, "score": 0, "creation_date": 1420661298, "post_id": 27826638, "comment_id": 44061359, "body": "I can&#39;t use #include&lt;string&gt; &amp; std::string. I really wish I could because from most of the answers so far it seems the easiest. Unfortunately, my instructor would dock me quite a bit of points for using something we haven&#39;t learned yet."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 2, "last_activity_date": 1420657035, "creation_date": 1420657035, "answer_id": 27826638, "question_id": 27826359, "link": "https://stackoverflow.com/questions/27826359/how-to-read-names-into-a-pointer-array-and-output-them/27826638#27826638", "title": "How to read names into a pointer array and output them?", "body": "<p>I'd suggest you to use <strong><code>std::string</code></strong> instead of manually allocating buffers on the heap with <code>new[]</code> and trying to read text manually from the file into those buffers (and don't forget to free the buffer with proper <code>delete[]</code> calls!).</p>\n\n<p>C++ input stream classes like <strong><code>std::ifstream</code></strong> can simply read text into <code>std::string</code> instances thanks to a proper overload of <code>operator&lt;&lt;</code>.<br>\nThe syntax is as simple as:</p>\n\n<pre><code>    string word;\n    while (inFile &gt;&gt; word)\n    {\n        cout &lt;&lt; word &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>Here's a complete compilable sample code for you to experiment and learn:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    ifstream inFile(\"test.txt\");\n    if (inFile.is_open())\n    {\n        string word;\n        while (inFile &gt;&gt; word)\n        {\n            cout &lt;&lt; word &lt;&lt; endl;\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"Can't open file.\" &lt;&lt; endl;\n    }    \n}\n</code></pre>\n\n<p>This is the output I got on a test text file having the content specified in your question:</p>\n\n<blockquote>\n<pre><code>I\ndon't\nknow\nthe\nkey\nto\nsuccess,\nbut\nthe\nkey\nto\nfailure\nis\ntrying\nto\nplease\neverybody.\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p><strong>NOTE</strong></p>\n\n<p>Of course, once you have your words read into a <code>std::string</code> instance, you can store them in a container like <code>std::vector&lt;std::string&gt;</code>, using its <code>push_back()</code> method.</p>\n"}], "owner": {"reputation": 37, "user_id": 4160239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6858364ef8f74f09d0be93c248e03a04?s=128&d=identicon&r=PG&f=1", "display_name": "Rie Kumar", "link": "https://stackoverflow.com/users/4160239/rie-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "accepted_answer_id": 27826638, "answer_count": 2, "score": 0, "last_activity_date": 1420661567, "creation_date": 1420656043, "last_edit_date": 1420661567, "question_id": 27826359, "link": "https://stackoverflow.com/questions/27826359/how-to-read-names-into-a-pointer-array-and-output-them", "title": "How to read names into a pointer array and output them?", "body": "<p>Here is what I got so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int characterList = 0;\n    char* dynamo = new char[1000];\n    char* buffer = dynamo;\n    ifstream input(\"wordlist.txt\");\n    if (input.is_open())\n    {\n        input &gt;&gt; dynamo[characterList];\n        while (input.eof())\n        {\n            characterList++;\n            input &gt;&gt; dynamo[characterList];\n            cout &lt;&lt; dynamo[characterList];\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"File not opened\" &lt;&lt; endl;\n    }\n    return;\n}\n</code></pre>\n\n<p>I'm a beginner so I do apologize if this looks like terrible coding practice. I created a text file with a quote from Bill Cosby that I'm trying to read one word at a time. The quote is \"I don't know the key to success, but the key to failure is trying to please everybody.\" I'm trying to read one word at a time from a text document ignoring punctuation. I know there are a lot of questions similar to this, but they are using code that I have not learned so I'm sorry for having a repeating question. I have not learned <code>getline</code> (I used <code>cin.getline</code>) and <code>#include &lt;string&gt;</code>.</p>\n\n<p>Edit: I forgot to mention, so I'm sorry for not doing so earlier, but I'm studying dynamic memory allocation which is why I'm using the new char[1000].</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 2, "creation_date": 1420656205, "post_id": 27826333, "comment_id": 44058495, "body": "Wouldn&#39;t a copy-paste do, why waste space?"}, {"owner": {"reputation": 33, "user_id": 3079179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUtWv.jpg?s=128&g=1", "display_name": "CavemanAGz", "link": "https://stackoverflow.com/users/3079179/cavemanagz"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1420676098, "post_id": 27826333, "comment_id": 44067816, "body": "Yes, sorry will do that next time."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3079179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUtWv.jpg?s=128&g=1", "display_name": "CavemanAGz", "link": "https://stackoverflow.com/users/3079179/cavemanagz"}, "edited": false, "score": 0, "creation_date": 1420677063, "post_id": 27826390, "comment_id": 44068092, "body": "Thanks for the help. So my problem was the order and trying to do too many things in one line?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 33, "user_id": 3079179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUtWv.jpg?s=128&g=1", "display_name": "CavemanAGz", "link": "https://stackoverflow.com/users/3079179/cavemanagz"}, "edited": false, "score": 0, "creation_date": 1420705980, "post_id": 27826390, "comment_id": 44076257, "body": "Sort of. If you want to do it in one line, you can write <code>cout &lt;&lt; setw(5) &lt;&lt; setfixed &lt;&lt; setprecision(2) &lt;&lt; table[i][j].div;</code> It&#39;s just that <code>ostream::setf</code> returns a number, and that was then printed; it&#39;s not a manipulator like the others."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 5, "last_activity_date": 1420656141, "creation_date": 1420656141, "answer_id": 27826390, "question_id": 27826333, "link": "https://stackoverflow.com/questions/27826333/need-help-formatting-output-c/27826390#27826390", "title": "Need help formatting output C++", "body": "<p><code>std::ostream::setf</code> returns the old flags, which are then formatted as an integer by <code>cout</code>. Use</p>\n\n<pre><code>cout.setf(std::ios::fixed, std::ios::floatfield);\ncout &lt;&lt; std::setw(5) &lt;&lt; std::setprecision(2) &lt;&lt; table[i][j].div;        \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3079179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUtWv.jpg?s=128&g=1", "display_name": "CavemanAGz", "link": "https://stackoverflow.com/users/3079179/cavemanagz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 27826390, "answer_count": 1, "score": 0, "last_activity_date": 1420656141, "creation_date": 1420655970, "last_edit_date": 1420656052, "question_id": 27826333, "link": "https://stackoverflow.com/questions/27826333/need-help-formatting-output-c", "title": "Need help formatting output C++", "body": "<p>My function to display a division table is working, but I want to format the output to allow any number of character preceding the decimal, but limiting the after decimal places to 2. Here is the code I am working with. Once I added the line <code>cout.setf(std::ios::fixed, std::ios::floatfield)</code> my data appears to be formatted correctly, but I am getting extra numbers appended to the front of the actual number.\nso instead of printing <code>1.00</code>, the program prints <code>40981.00</code>, and it does this for all the results. (the preceding number does change to <code>4102x.xx</code>) x being the desired output.</p>\n\n<pre><code>void print_div_values(mult_div_values ** table, float x, float y){\n\ncout &lt;&lt; endl &lt;&lt; \"Here is the division table: \" &lt;&lt; endl;\n\nfor (int i = 1; i &lt;= y; i++)        \n{\n    cout &lt;&lt; endl;\n\n    for (int j = 1; j &lt;= x; j++)    \n    {\n        cout &lt;&lt; std::setw(5) &lt;&lt; cout.setf(std::ios::fixed, std::ios::floatfield) &lt;&lt; std::setprecision(2) &lt;&lt; table[i][j].div;        \n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/p8TlT.png\" alt=\"picture\"></p>\n"}, {"tags": ["c++", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2821154, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001123995065/picture?type=large", "display_name": "Omar Hashmi", "link": "https://stackoverflow.com/users/2821154/omar-hashmi"}, "edited": false, "score": 0, "creation_date": 1420656926, "post_id": 27826449, "comment_id": 44058943, "body": "thanks it works now. But is this the right way of writing insert function?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 35, "user_id": 2821154, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001123995065/picture?type=large", "display_name": "Omar Hashmi", "link": "https://stackoverflow.com/users/2821154/omar-hashmi"}, "edited": false, "score": 0, "creation_date": 1420657210, "post_id": 27826449, "comment_id": 44059110, "body": "@OmarHashmi Not quite. Your conditions in the <code>insertNode</code> method are misplaced. If the value is less than (or equal to) <code>data</code> then you should be inserting in the left subtree, otherwise the right subtree. Read Jason&#39;s answer as well."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1420658071, "post_id": 27826449, "comment_id": 44059573, "body": "@0x499602D2 Does it really matter whether he inserts to the left or the right when the value is equal?  Either will work just as well.. as long as the choice is consistent throughout the implementation."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1420658341, "post_id": 27826449, "comment_id": 44059702, "body": "@Dmitri <a href=\"http://en.wikipedia.org/wiki/Binary_search_tree\" rel=\"nofollow noreferrer\">The definition</a> of a binary search tree is one where any node is greater than its left tree and less than its right tree."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1420658773, "post_id": 27826449, "comment_id": 44059947, "body": "@0x499602D2 That definition doesn&#39;t allow for inserting <i>at all</i> when the keys are equal (no duplicates).  But when duplicate keys <i>are</i> allowed, either side works."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 2, "last_activity_date": 1420656317, "creation_date": 1420656317, "answer_id": 27826449, "question_id": 27826331, "link": "https://stackoverflow.com/questions/27826331/binary-search-tree-in-c/27826449#27826449", "title": "Binary Search Tree in C++", "body": "<p><code>insertNode()</code> takes a copy of the pointer, so changes made inside the function have no effect on the actual pointer in the tree. What you want to do is take a reference to the pointer:</p>\n\n<pre><code>void insertNode(int data, Node*&amp; head)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1076, "user_id": 789491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d88046d5f80de0fdd0daaef0599a449?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/789491/jason"}, "is_accepted": false, "score": 5, "last_activity_date": 1420656937, "last_edit_date": 1420656937, "creation_date": 1420656339, "answer_id": 27826458, "question_id": 27826331, "link": "https://stackoverflow.com/questions/27826331/binary-search-tree-in-c/27826458#27826458", "title": "Binary Search Tree in C++", "body": "<p>The parameter <code>head</code> in insertNode shadows the member variable named <code>head</code>.</p>\n\n<p>However, while that's a really bad practice, the other answer is the true reason for your error, so please select his answer instead (once you get it working, of course).</p>\n\n<p>I'd recommend changing the signature of <code>insertNode</code> to</p>\n\n<pre><code>void insertNode(int data, Node*&amp; node)\n</code></pre>\n\n<p>Also, you don't need to check for <code>head == nullptr</code> in insert.  You have a duplicate check in <code>insertNode</code></p>\n\n<p>So insert could look like this:</p>\n\n<pre><code>void insert(data) {\n    insertNode(data, head);\n}\n</code></pre>\n\n<p>Finally, you're not initializing head within the constructor.  It's possible that head will be initialized to something other than nullptr, especially if you compile this in release mode.  Add a constructor like this:</p>\n\n<pre><code>BST() : head(nullptr) {\n    // Other init stuff here if necessary\n}\n</code></pre>\n\n<p>You'll also want to make <code>Node* head</code> a private data member instead of public.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 4430165, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/voiXN.jpg?s=128&g=1", "display_name": "Sadeel Anjum", "link": "https://stackoverflow.com/users/4430165/sadeel-anjum"}, "is_accepted": false, "score": 0, "last_activity_date": 1420658105, "creation_date": 1420658105, "answer_id": 27826929, "question_id": 27826331, "link": "https://stackoverflow.com/questions/27826331/binary-search-tree-in-c/27826929#27826929", "title": "Binary Search Tree in C++", "body": "<p>In your function \" insertNode\" you are using if(head) , this if will work only if head == 1 , and head is never equals to 1 because its a pointer  , so this \"if\" is not working.! </p>\n"}], "owner": {"reputation": 35, "user_id": 2821154, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001123995065/picture?type=large", "display_name": "Omar Hashmi", "link": "https://stackoverflow.com/users/2821154/omar-hashmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 27826449, "answer_count": 3, "score": 0, "last_activity_date": 1574336569, "creation_date": 1420655964, "last_edit_date": 1574336569, "question_id": 27826331, "link": "https://stackoverflow.com/questions/27826331/binary-search-tree-in-c", "title": "Binary Search Tree in C++", "body": "<p>I have the following code to insert in the bst however, it fails to insert all the nodes except for the root. Any idea what I am doing wrong?  </p>\n\n<pre><code>class Node\n{\npublic:\n    int data;\n    Node* right;\n    Node* left;\n    Node(int data)\n    {\n        this-&gt;data = data;\n    }\n    Node() {}\n};\n\nclass BST\n{\npublic:\n    Node* head;\n    void insert(int data)\n    {\n        if (head == nullptr)\n        {\n            head = new Node(data);\n            head-&gt;data = data;\n        }\n        else\n        {\n            // head = new Node(data);\n            insertNode(data, head);\n        }\n    }\n\n    void insertNode(int data, Node* head)\n    {\n        if (head == nullptr)\n        {\n            head = new Node(data);\n            return;\n        }\n        if (head)\n        {\n            Node* temp = head;\n            if (temp-&gt;data &gt; data)\n            {\n                insertNode(data, temp-&gt;left);\n            }\n            else if (temp-&gt;data &lt;= data)\n                insertNode(data, temp-&gt;right);\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "trampolines"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1420675548, "post_id": 27826117, "comment_id": 44067646, "body": "You have not called <code>trampoline.enable_f2();</code> in your code sample linked at the bottom (&quot;EDIT&quot;)."}, {"owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1420675719, "post_id": 27826117, "comment_id": 44067689, "body": "@dyp, ARGH! Thanks! (buggy code removed now)"}, {"owner": {"reputation": 3225, "user_id": 2843835, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4636d7abd5b19dcee891618859eaa5ee?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2843835/mark"}, "edited": false, "score": 0, "creation_date": 1420708267, "post_id": 27826117, "comment_id": 44077330, "body": "Could be wrong, but wouldn&#39;t the NVI (non-virtual interface) idiom solve this? Base class has public non-virtual methods that forward to protected helpers. The non-virtual methods can then see to your try/catch code quite conveniently."}], "answers": [{"comments": [{"owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "edited": false, "score": 0, "creation_date": 1420663306, "post_id": 27826316, "comment_id": 44062419, "body": "How would I invoke that?  <code>void enable_f1() { table.fp_1 = &amp;trap&lt;int, &amp;Base::func_1&gt;; }</code> ?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "edited": false, "score": 0, "creation_date": 1420675711, "post_id": 27826316, "comment_id": 44067686, "body": "It&#39;s a function - call it with the pointer to member function, the pointer to base and any other parameters."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1420655898, "creation_date": 1420655898, "answer_id": 27826316, "question_id": 27826117, "link": "https://stackoverflow.com/questions/27826117/design-pattern-for-exception-safe-trampolines/27826316#27826316", "title": "Design pattern for exception-safe trampolines", "body": "<p>something like this?</p>\n\n<pre><code>template&lt;typename RET, class ...Args&gt; // &lt;-- one trap for each f in Base that gets enabled!\nRET trap( RET (Base::*f)(Args...), void* self, Args&amp;&amp;...args )\n{\n    try {\n        auto base = reinterpret_cast&lt;Base*&gt;(self);\n        return (base-&gt;*f)(std::forward&lt;Args&gt;(args)...);\n    }\n    catch (...) {\n        return (RET)0;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1420676226, "post_id": 27830944, "comment_id": 44067861, "body": "Instead of generating the function pointer in the calls of those member functions, you could as well generate a statically filled table and copy the entries on demand. Something like <code>constexpr static Table base_table = { TRAP(Base::func1), TRAP(Base::func2), TRAP(Base::func3) };</code>"}], "tags": [], "owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "is_accepted": false, "score": 3, "last_activity_date": 1420676202, "last_edit_date": 1495542399, "creation_date": 1420675841, "answer_id": 27830944, "question_id": 27826117, "link": "https://stackoverflow.com/questions/27826117/design-pattern-for-exception-safe-trampolines/27830944#27830944", "title": "Design pattern for exception-safe trampolines", "body": "<p>I got it working thanks to <a href=\"https://stackoverflow.com/a/27822086/435129\">Piotr's answer to my previous question</a>, from which I have lifted the core machinery (so please upvote his answer).</p>\n\n<p>Coliru <a href=\"http://coliru.stacked-crooked.com/a/c8cbf4ca2f5e9752\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\nclass Base {\npublic:\n    virtual int   func_1( int a )        { std::cout &lt;&lt; \"Base::func_1\" &lt;&lt; std::endl; return a; }\n    virtual float func_2( int a, int b ) { std::cout &lt;&lt; \"Base::func_2\" &lt;&lt; std::endl; return a+b; }\n    virtual float func_3( char a )       { std::cout &lt;&lt; \"Base::func_3\" &lt;&lt; std::endl; return (float)a; }\n};\n\nclass Final : public Base {\npublic:\n    int   func_1( int a )           override { std::cout &lt;&lt; \"Final::func_1\" &lt;&lt; std::endl; return a+1000; }\n  //float func_2( int a, int b )    override { std::cout &lt;&lt; \"Final::func_2\" &lt;&lt; std::endl; return a*b; }\n    float func_3( char a )          override { std::cout &lt;&lt; \"Final::func_3\" &lt;&lt; std::endl; throw 666; }\n};\n\nBase* get_base(void* s) {\n    return reinterpret_cast&lt;Base*&gt;(s);\n}\n\ntemplate &lt;typename T, T t&gt;\nstruct trap;\n\ntemplate &lt;typename R, typename... Args, R(Base::*t)(Args...)&gt;\nstruct trap&lt;R(Base::*)(Args...), t&gt;\n{    \n    static R \n    call(void* s, Args... args)\n    {\n        std::cout &lt;&lt; \"trap:\" &lt;&lt; typeid(t).name() &lt;&lt; std::endl;\n        try\n        {\n            return (get_base(s)-&gt;*t)(std::forward&lt;Args&gt;(args)...);\n        }\n        catch (...)\n        {\n            std::cout &lt;&lt; \"CAUGHT\" &lt;&lt; std::endl;\n            return std::is_integral&lt;R&gt;::value ? static_cast&lt;R&gt;(-42) : static_cast&lt;R&gt;(-3.14); \n        }\n    }\n};\n\n\n#define TRAP(f)  &amp; trap&lt;decltype(&amp;f), &amp;f&gt;::call\n\nclass Trampoline \n{\n    using F1 = auto ( void* self, int a )         -&gt; int;\n    using F2 = auto ( void* self, int a, int b )  -&gt; float;\n    using F3 = auto ( void* self, char a )        -&gt; float;\n\n    struct Table {\n        F1* fp_1;\n        F2* fp_2;\n        F3* fp_3;\n    };\npublic:\n    Table* table = new Table();\n\n    void enable_f1() { table-&gt;fp_1 = TRAP( Base::func_1 ); }\n    void enable_f2() { table-&gt;fp_2 = TRAP( Base::func_2 ); }\n    void enable_f3() { table-&gt;fp_3 = TRAP( Base::func_3 ); }\n};\n\nint main()\n{\n    Trampoline trampoline{};\n\n    trampoline.enable_f1();\n    trampoline.enable_f2(); \n    trampoline.enable_f3(); \n\n    Final final{};\n\n    void* base_as_pvoid = (void*)static_cast&lt;Base*&gt;(&amp;final);\n\n    // test\n    int u    = trampoline.table-&gt;fp_1( base_as_pvoid, 2 );     std::cout &lt;&lt; u &lt;&lt; std::endl; // expect: 1002   (enabled and Final provides override)\n    float v  = trampoline.table-&gt;fp_2( base_as_pvoid, 3, 5 );  std::cout &lt;&lt; v &lt;&lt; std::endl; // expect: 8      (enabled but no override)\n    float w  = trampoline.table-&gt;fp_3( base_as_pvoid, 'x' );   std::cout &lt;&lt; w &lt;&lt; std::endl; // expect: -3.14  (enabled and Final provides override, which throws!)\n}\n</code></pre>\n"}], "owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1420676202, "creation_date": 1420655183, "last_edit_date": 1495535599, "question_id": 27826117, "link": "https://stackoverflow.com/questions/27826117/design-pattern-for-exception-safe-trampolines", "title": "Design pattern for exception-safe trampolines", "body": "<p>This question follows from <a href=\"https://stackoverflow.com/q/27821106/435129\">here</a>.  However, the previous question was worded so badly (wrongly in fact) that it was suggested I ask again from scratch.</p>\n\n<p>I have a table of C-function pointers.</p>\n\n<p>Some C code (let us call it lib-X) has a basic building block (let's call it a X-object). Each X-object can invoke functions on this table.</p>\n\n<p>These table functions generally have different signatures (see typedefs <a href=\"http://svn.python.org/projects/python/trunk/Include/object.h\" rel=\"nofollow noreferrer\">here</a>), although it is possible for several functions to share the same signature. There are about 100 of these functions in the table.</p>\n\n<p>In C++ I have an associated Final:Base class for each X-object.</p>\n\n<p>And I want to forward these calls to the X-object's corresponding C++ Final instance, but I want to enclose this within try/catch, as the C++ consumer may provide a buggy Final.</p>\n\n<p>So I have a C++ Base class that has a virtual function for each entry on the table.</p>\n\n<p>I then have a C++ Final class (possibly many; Final1 Final2 Final3 etc) that derives from the base class.</p>\n\n<p>So now I just need to write a handler that</p>\n\n<ol>\n<li><p>Gets the first 'self' parameter (which will always be a pointer to the X-object that invoked the function)</p></li>\n<li><p>Retrieves the associated C++ base class instance.</p></li>\n<li><p>Within a try catch block, invokes the corresponding virtual function, forwarding all the remaining parameters through,</p></li>\n<li><p>... which will actually invoke the override in Final.</p></li>\n</ol>\n\n<p>It's a bit like trying to understand the plot for Inception. lib-X is in fact the Python runtime, although I'm trying to keep things general.</p>\n\n<p>The thing is there are dozens of these functions, and this makes for some very messy and unmaintainable C++ code -- if I have to manually write a trampoline function for each one, looking like:</p>\n\n<pre><code>extern \"C\" PyObject *call_handler( PyObject *self, PyObject *args, PyObject *kw )\n{\n    try\n    {\n        PythonExtensionBase *p = getPythonExtensionBase( self );\n        if( kw != NULL )\n            return new_reference_to( p-&gt;call( Object(args), :Object(kw) ) );\n        else\n            return new_reference_to( p-&gt;call( Object(args), Object() ) );\n    }\n    catch( Py::Exception &amp; )\n    {\n        return NULL; // indicate error\n    }\n}\n</code></pre>\n\n<p>(source <a href=\"http://sourceforge.net/p/cxx/code/HEAD/tree/trunk/CXX/Src/Python3/cxx_extensions.cxx\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<p>I'm trying to come up with a compact design that allows this exception-safe trampolining.</p>\n\n<p>My current progress is [REMOVED, see answer below]</p>\n"}, {"tags": ["c++", "ubuntu", "cmake"], "comments": [{"owner": {"reputation": 3181, "user_id": 2828217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f2218f355aa10d4319429930f3a68f8?s=128&d=identicon&r=PG&f=1", "display_name": "brm", "link": "https://stackoverflow.com/users/2828217/brm"}, "edited": false, "score": 1, "creation_date": 1420655333, "post_id": 27826037, "comment_id": 44057963, "body": "Try using <code>link_directories</code> to inform the linker in which directories libraries can be found"}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1420657547, "post_id": 27826133, "comment_id": 44059298, "body": "@Slava, that&#39;s why I said that adds -L. to the linker command, not that it refers to the directory containing the CMakeLists.txt file"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655237, "creation_date": 1420655237, "answer_id": 27826133, "question_id": 27826037, "link": "https://stackoverflow.com/questions/27826037/cannot-find-shared-library-in-same-directory-as-cmakelists-txt/27826133#27826133", "title": "Cannot find shared library in same directory as CMakeLists.txt", "body": "<blockquote>\n  <p>If I rename the library file to Alpha.so or lAlpha.so, I get the same error. </p>\n</blockquote>\n\n<p>Yes, that won't help at all. If the library is called <code>libAlpha.so</code> then <code>-lAlpha</code> tells the linker to use it, so cmake is using the right option and the problem is not with the name of the library.</p>\n\n<blockquote>\n  <p>Why can cmake not find this library, even though it is in the same directory as CMakeLists.txt?</p>\n</blockquote>\n\n<p>Because the current directory has no special meaning to the linker (nor does the directory CMakeLists.txt is in, because the linker knows nothing about cmake at all).</p>\n\n<p>You need to add the directory to the linker's search path, which is done with the <code>-L</code> option. I don't know how to tell cmake to use that option, but a quick look at the cmake docs suggests it is probably <code>link_directories</code> e.g. use <code>link_directories(.)</code> to add <code>-L.</code> to the linker command.</p>\n"}, {"comments": [{"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1420656351, "post_id": 27826354, "comment_id": 44058581, "body": "Thanks! So, I tried `target_link_libraries(MyProgram ${CMAKE_CURRENT_SOURCE_DIR}/libAlpha.so), which worked :)"}], "tags": [], "owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "is_accepted": true, "score": 2, "last_activity_date": 1420656027, "creation_date": 1420656027, "answer_id": 27826354, "question_id": 27826037, "link": "https://stackoverflow.com/questions/27826037/cannot-find-shared-library-in-same-directory-as-cmakelists-txt/27826354#27826354", "title": "Cannot find shared library in same directory as CMakeLists.txt", "body": "<p>Don't use <code>link_directories</code>.</p>\n\n<p>Specify the full path to the library (possibly using <code>${CMAKE_CURRENT_SOURCE_DIR}</code> if that's where you have it, or use <code>find_library</code> with that path and the name (without <code>lib</code> prefix or extension) for a 'more portable' solution, though something tells me portability is not your concern...</p>\n"}, {"comments": [{"owner": {"reputation": 3190, "user_id": 1798015, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/52308759088ab744fdca3fe619dde41d?s=128&d=identicon&r=PG", "display_name": "feedc0de", "link": "https://stackoverflow.com/users/1798015/feedc0de"}, "edited": false, "score": 0, "creation_date": 1506931744, "post_id": 27826591, "comment_id": 79997251, "body": "Any idea, why the line <code>add_library(googletest DYNAMIC IMPORTED)</code> results in a <code>Cannot find source file: DYNAMIC Tried extensions .c .C .c++ ...</code> ?"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1420657573, "last_edit_date": 1420657573, "creation_date": 1420656847, "answer_id": 27826591, "question_id": 27826037, "link": "https://stackoverflow.com/questions/27826037/cannot-find-shared-library-in-same-directory-as-cmakelists-txt/27826591#27826591", "title": "Cannot find shared library in same directory as CMakeLists.txt", "body": "<p>When you use <code>cmake</code> you usually build (and it is recommended practice) in the separate directory than were your source files and <code>CMakeLists.txt</code> file are located. So if you follow this practice (and error show you probably do) linker cannot find library located in that directory. So you either need to add it by link_directories():</p>\n\n<pre><code>link_directories( ${CMAKE_CURRENT_SOURCE_DIR} )\n</code></pre>\n\n<p>or you can set a property to the lib:</p>\n\n<pre><code>add_library( Alpha DYNAMIC IMPORTED )\nset_property( TARGET Alpha PROPERTY IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}/libAlpha.so )\n</code></pre>\n\n<p>if <code>CMakeLists.txt</code> where you put those commands located not in the same directory, you can add path:</p>\n\n<pre><code>link_directories( ${CMAKE_CURRENT_SOURCE_DIR}/foobar )\nlink_directories( ${CMAKE_CURRENT_SOURCE_DIR}/.. )\n</code></pre>\n\n<p>just remember that variable <code>CMAKE_CURRENT_SOURCE_DIR</code> is set to path where that <code>CMakeLists.txt</code> is located.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1481, "favorite_count": 0, "accepted_answer_id": 27826354, "answer_count": 3, "score": 1, "last_activity_date": 1420657573, "creation_date": 1420654922, "question_id": 27826037, "link": "https://stackoverflow.com/questions/27826037/cannot-find-shared-library-in-same-directory-as-cmakelists-txt", "title": "Cannot find shared library in same directory as CMakeLists.txt", "body": "<p>In my source code directory, I have a shared library file called <code>libAlpha.so</code>. Then, in my CMakeLists.txt file, I have:</p>\n\n<pre><code>target_link_libraries(MyProgram Alpha)\n</code></pre>\n\n<p>However, this gives me the error:</p>\n\n<pre><code>usr/bin/ld: cannot find -lAlpha\n</code></pre>\n\n<p>If I rename the library file to <code>Alpha.so</code> or <code>lAlpha.so</code>, I get the same error. Similarly, if I instead use the line:</p>\n\n<pre><code>target_link_libraries(MyProgram libAlpha)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>target_link_libraries(MyProgram libAlpha.so)\n</code></pre>\n\n<p>Why can cmake not find this library, even though it is in the same directory as CMakeLists.txt?</p>\n"}, {"tags": ["c++", "templates", "enable-if"], "comments": [{"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 2, "creation_date": 1420655089, "post_id": 27826029, "comment_id": 44057824, "body": "Why do you need this? Writing <code>enable_if&lt;false, bool&gt;::type</code> necessarily yields a compiler error, so you cannot expect the compiler to somehow recover from it."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1420655136, "post_id": 27826029, "comment_id": 44057851, "body": "The third line has <code>true</code> in it, which doesn&#39;t correspond to the error shown. Also, <code>enable_if</code> has no SFINAE effect in this code if that&#39;s what you were hoping."}, {"owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 0, "creation_date": 1420655287, "post_id": 27826029, "comment_id": 44057935, "body": "I need this because in a more serious part of my code I have some bytes and an object that is meant to parse them and extract some parameters that are specified in its parameters. As an example scanner <code>&lt;unsigned int, bool, char&gt; ()(bytes)</code> will extract an unsigned int, a bool and a char from my bytes. Now, I would like a switch to be able to add an unsigned int at the beginning of the parameters list, like <code>scanner &lt;(if x is true then also unsigned int), unsigned int, bool char&gt; scanner()(bytes)</code>"}, {"owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420655382, "post_id": 27826029, "comment_id": 44058002, "body": "@0x499602D2 thank you, I fixed my typo. I am sorry but I have no idea on what you mean by SFINAE effect."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 1, "creation_date": 1420655544, "post_id": 27826029, "comment_id": 44058113, "body": "@MatteoMonti I&#39;m not sure what the value of this is, but can&#39;t you just use some dummy class template instead of <code>enable_if</code>? Perhaps something like <a href=\"http://coliru.stacked-crooked.com/a/cf2f0db6ac88ef48\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1420656076, "post_id": 27826029, "comment_id": 44058420, "body": "Your example lacks a valid condition for enable_if (which should be used in a template for SFINAE, not in your way)"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1420656180, "post_id": 27826029, "comment_id": 44058485, "body": "<i>Substitution Failure</i> is a necessary precondition for <i>Substitution Failure Is Not An Error</i> to occur."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420657929, "post_id": 27826029, "comment_id": 44059501, "body": "... and <i>Substitution</i> is a necessary condition for <i>Substitution Failure</i> to occur, which means you need to be in a template and the <code>enable_if</code> condition must depend on a template parameter."}], "answers": [{"comments": [{"owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 0, "creation_date": 1420655735, "post_id": 27826221, "comment_id": 44058202, "body": "Basically, I am looking for a more compact version of the following:<code>if(b &#47;* b being a template parameter, so it is known at compile time *&#47;) q &lt;int, int&gt; (); else q &lt;int, int, bool&gt; ();</code>"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "reply_to_user": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 1, "creation_date": 1420655968, "post_id": 27826221, "comment_id": 44058356, "body": "@MatteoMonti: You can use a class template other than <code>enable_if</code>, even one of your own - after all its purpose is just to hold a boolean value and a type as template parameters (if I understand your use case correctly)."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 0, "creation_date": 1420657844, "post_id": 27826221, "comment_id": 44059456, "body": "@MatteoMonti, you can&#39;t use <code>enable_if</code> to change the number of template arguments. <code>&lt;int, int, enable_if&lt;false, bool&gt;::type&gt;</code> still has three arguments, but the third argument is ill-formed and gives an error. <code>q&lt;X, Y, Z&gt;</code> has three template arguments, period. There is no way to make <code>Z</code> maybe exist and maybe not exist. The shortest way to do it with only standard library facilities is probably <code>std::conditional&lt;b, q&lt;int, int&gt;, q&lt;int, int, bool&gt;&gt;::type</code>"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655547, "creation_date": 1420655547, "answer_id": 27826221, "question_id": 27826029, "link": "https://stackoverflow.com/questions/27826029/using-stdenable-if-in-a-parameters-list/27826221#27826221", "title": "Using std::enable_if in a parameters list", "body": "<p><code>enable_if</code> is meant to be used in a context where <a href=\"http://accu.org/content/conf2013/Jonathan_Wakely_sfinae.pdf\" rel=\"nofollow\">SFINAE</a> can be used, which means inside a template.</p>\n\n<p>In a non-template context (or a context that doesn't depend on template parameters) when the condition is false it is an error to refer to <code>enable_if&lt;false, T&gt;::type</code> because that member doesn't exist.</p>\n\n<blockquote>\n  <p>What could I do to correct my example and make it work?</p>\n</blockquote>\n\n<p>I don't understand what you're trying to do. What do you expect <code>enable_if&lt;false, bool&gt;::type</code> to be? There is no such type, how do you think you can use it?</p>\n"}, {"comments": [{"owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 1, "creation_date": 1420998684, "post_id": 27887843, "comment_id": 44181300, "body": "One of the most detailed answers I have ever received on StackOverflow. Thank you very much, now everything is much more clear!"}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 5, "last_activity_date": 1421000876, "last_edit_date": 1421000876, "creation_date": 1420984400, "answer_id": 27887843, "question_id": 27826029, "link": "https://stackoverflow.com/questions/27826029/using-stdenable-if-in-a-parameters-list/27887843#27887843", "title": "Using std::enable_if in a parameters list", "body": "<p>You have misunderstood the use of <code>std::enable_if</code>. (Many of us did, to begin with).\nThis has led you to ask a technically misguided question instead of the more\ngeneral one you want answered. The question you want answered is <em>How can my template use or\nignore a template argument, based only a compiletime condition?</em>, and it's not\na bad one.</p>\n\n<p>You have the impression that <code>std::enable_if&lt;Cond,T&gt;::type</code> is a template expression \nthat will instantiate to <code>T</code> when <code>Cond</code> is <code>true</code> and will instantiate to <em>nothing</em> when \n<code>Cond</code> is false.</p>\n\n<p>That is correct when <code>Cond</code> is <code>true</code>, because <code>std::enable_if&lt;true,T&gt;</code> is defined like:</p>\n\n<pre><code>std::enable_if&lt;true,T&gt; {\n    typedef T type;\n};\n</code></pre>\n\n<p>But <code>std::enable_if&lt;false,T&gt;</code> is defined like:</p>\n\n<pre><code>std::enable_if&lt;false,T&gt; {};\n</code></pre>\n\n<p>See those definitions <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow\">here</a></p>\n\n<p>Hence <code>std::enable_if&lt;false,T&gt;::type</code> does not <em>disappear</em>; for any <code>T</code>,\nit becomes an ill-formed, uncompilable, reference to the member-type <code>type</code> of\n<code>std::enable_if&lt;false,T&gt;</code>, which does not exist. It becomes a compiler error.</p>\n\n<p>Thus <code>std::enable_if</code> can be used to make instantiation of a template class or\nfunction either possible or impossible based upon the compiletime value of some\nboolean constant. And since the compiler will dismiss from consideration any\nnon-viable instantiation of a template, provided there is a viable alternative,\nit can therefore be used to make a compiletime choice between alternative\nimplementations of a template class or function, based on such a condition, e.g.</p>\n\n<pre><code>template&lt;bool Cond&gt;\ntypename std::enable_if&lt;Cond,int&gt;::type foo(int i) // A\n{\n    return i*i;\n}\n\ntemplate&lt;bool Cond&gt;\ntypename std::enable_if&lt;!Cond,int&gt;::type foo(int i) // B\n{\n    return i + i;\n}\n</code></pre>\n\n<p>Here, <code>foo&lt;some_bool_constant&gt;(i)</code> will yield <em>i squared</em> if <code>some_bool_constant</code> is <code>true</code> and\n<em>i doubled</em> if <code>some_bool_constant</code> is <code>false</code>, because in the first case\nthe <code>B</code> overload has an ill-formed instantiation and in the second case\nit's the <code>A</code> overload that becomes ill-formed.</p>\n\n<p>The alternative overloads give the compiler a choice of instantiations to consider\neach time it sees <code>foo&lt;some_bool_constant&gt;(x)</code>, with one turning out ill-formed and the other viable,\ndepending on the truth-value of <code>some_bool_constant</code>. It picks the one that is viable in each case. This\nbehaviour is called <a href=\"http://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow\">SFINAE</a>, and that\nis what you need to understand before you can understand <code>std::enable_if</code>.</p>\n\n<p>But there are no alternative instantiations of your:</p>\n\n<pre><code>q &lt;int, int, enable_if&lt;false, bool&gt;::type&gt; ()\n</code></pre>\n\n<p>\"depending on the value of <em>false</em>\". <em>false</em> unconditionally means <em>false</em> and so this is just ill-formed\ncode.</p>\n\n<p>And consider: Even if <code>std::enable_if&lt;false,bool&gt;::type</code> <em>did</em> somehow disappear, that would leave:</p>\n\n<pre><code>q &lt;int, int, &gt; ()\n</code></pre>\n\n<p>which is <em>still</em> ill-formed.</p>\n\n<blockquote>\n  <p>What could I do to correct my example and make it work?</p>\n</blockquote>\n\n<p>It doesn't take much, in fact, and <code>std::enable_if</code> does not feature. Let's address the real question: <em>How can my template use or\nignore a template argument, based only a compiletime condition?</em></p>\n\n<p>You need to define your template <code>q&lt;First, ... Rest&gt;</code> and some other template <code>accept_if&lt;bool Cond, typename T&gt;</code> in such a way\nthat for any instantiation of <code>q</code>:</p>\n\n<pre><code>/*(Iq)*/    q&lt;A0,....,Aj,....,Ak&gt;  // 0 &lt;= j &lt;= k\n</code></pre>\n\n<p>where <code>Aj</code> = <code>accept_if&lt;some_bool_constant,t&gt;::type</code>, then if <code>some_bool_constant</code> == <code>true</code>,\n<strong>(Iq)</strong> will have exactly the same effects as:</p>\n\n<pre><code>q&lt;A0,....,t,....,Ak&gt;\n</code></pre>\n\n<p>and if <code>some_bool_constant</code> == <code>false</code> then\n<strong>(Iq)</strong> will have the same effects as:</p>\n\n<pre><code>q&lt;A0,....,Ak&gt;\n</code></pre>\n\n<p><em>without resorting to any runtime test of <code>some_bool_constant</code></em>. (In <strong>(Iq)</strong>,\nthe '....' are just schematic place-holders for possible arguments: nothing to do\nwith C++ packs or elipses.)</p>\n\n<p>But <code>accept_if&lt;some_bool_constant,t&gt;::type</code> must resolve to some <em>type specifier</em> at compiletime\nor the code is ill-formed. It cannot resolve to nothing. So in the <code>false</code> case it must resolve to a type\nspecifier that the instantiation of <strong>(Iq)</strong> will handle as specifying <em>no data-type</em>.</p>\n\n<p>Now the compelling utility of possessing a type specifier that specifies <em>no data-type</em>\nin C/C++ was recognized as long ago as the very first ANSI Standard for C. That\ntype specifier is <code>void</code>.</p>\n\n<p>From your comments we learn that the template parameters of <code>q</code>\nrepresent a sequence of data types which an instantiation of the constructor shall extract\nfrom a source passed by argument. In that case, <code>void</code> ideally fits the bill\nas a type specifer denoting <em>nothing to be done</em>. You cannot declare a <code>void</code> object,\nlet alone extract one from somewhere.</p>\n\n<p>Hence I suggest that your <code>accept_if</code> be defined:</p>\n\n<pre><code>template&lt;bool Cond, typename T&gt;\nusing accept_if = std::conditional&lt;Cond,T,void&gt;::type;\n</code></pre>\n\n<p>i.e. <code>accept_if&lt;true,T&gt;</code> = <code>T</code> and <code>accept_if&lt;false,T&gt;</code> = <code>void</code>. Read about\n<a href=\"http://en.cppreference.com/w/cpp/types/conditional\" rel=\"nofollow\">std::conditional</a></p>\n\n<p>With this definition, you then have only to add to your existing specializations\nof <code>q</code> one more:</p>\n\n<pre><code>template&lt;&gt; struct q&lt;void&gt; {};\n</code></pre>\n\n<p>giving <code>q&lt;void&gt;</code> a default constructor that does nothing. Here is a sample program\nlike your own, but well-formed, that illustrates this solution:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;bool Cond, typename T&gt;\nusing accept_if = typename std::conditional&lt;Cond,T,void&gt;::type;\n\ntemplate &lt;typename first, typename... params&gt; struct q;\n\ntemplate&lt;&gt; struct q&lt;void&gt; {};\n\ntemplate &lt;typename first&gt; struct q &lt;first&gt;\n{\n    q()\n    {\n        std::cout &lt;&lt; \"x\" &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;typename first, typename... params&gt; struct q\n{\n    q()\n    {\n        std::cout &lt;&lt; \"x\";\n        q&lt;params...&gt;();\n    }\n};\n\nint main()\n{\n    q&lt;int, int&gt;();\n    q&lt;int, int, accept_if&lt;true,bool&gt;&gt;();\n    q&lt;int, int, accept_if&lt;false,bool&gt;&gt;();\n    return 0;\n}\n</code></pre>\n\n<p>The output is what you wanted:</p>\n\n<pre><code>xx\nxxx\nxx\n</code></pre>\n\n<p>In a different scenario it is possible that you would want even <code>Aj</code> = <code>void</code>\n<em>not</em> to be ignored in <strong>(Iq)</strong>. But since we can create types at will, you can\nalways a create a type that is by fiat different from all those that your template\nmust not ignore, say: <code>struct ignore {};</code> Then you would define:</p>\n\n<pre><code>template&lt;bool Cond, typename T&gt;\nusing accept_if = std::conditional&lt;Cond,T,ignore&gt;::type;\n</code></pre>\n\n<p>and specialize:</p>\n\n<pre><code>template&lt;&gt; struct q&lt;ignore&gt; {};\n</code></pre>\n"}], "owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 1, "accepted_answer_id": 27887843, "answer_count": 2, "score": 0, "last_activity_date": 1421000876, "creation_date": 1420654864, "last_edit_date": 1420655321, "question_id": 27826029, "link": "https://stackoverflow.com/questions/27826029/using-stdenable-if-in-a-parameters-list", "title": "Using std::enable_if in a parameters list", "body": "<p>In C++, consider the following example:</p>\n\n<pre><code>template &lt;typename first, typename... params&gt; struct q;\n\ntemplate &lt;typename first&gt; struct q &lt;first&gt;\n{\n    q()\n    {\n        cout&lt;&lt;\"x\"&lt;&lt;endl;\n    }\n};\n\ntemplate &lt;typename first, typename... params&gt; struct q\n{\n    q()\n    {\n        cout&lt;&lt;\"x\";\n        q &lt;params...&gt; ();\n    }\n};\n\nint main()\n{\n    q &lt;int, int&gt; ();\n    q &lt;int, int, enable_if&lt;true, bool&gt;::type&gt; ();\n    // q &lt;int, int, enable_if&lt;false, bool&gt;::type&gt; ();\n}\n</code></pre>\n\n<p>I defined a template struct that accepts an arbitrary amount of parameters. I then instantiate it with a set of parameters. Each constructor will build a new q, with all its parameters but the first. A q with only one parameter won't call any more recursion.</p>\n\n<p>Every time the constructor of a q is called, it will print out an \"x\". Therefore, the first line of the main will cause the program to print out \"xx\", while the second will print out an \"xxx\" since the enable_if is actually enabled. Now, I would have greatly appreciated if the third line would cause my program to print out \"xx\" (that is: build a q ). Sadly, what I get is the error</p>\n\n<pre><code>No template named 'type' in std::enable_if &lt;false, bool&gt;\n</code></pre>\n\n<p>What could I do to correct my example and make it work?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1420654982, "post_id": 27826017, "comment_id": 44057768, "body": "Why <code>char</code> arrays instead of <code>std::string</code>? In any case, you seem to have misunderstood the concept of array subscripts."}, {"owner": {"reputation": 4451, "user_id": 1245337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rQev9.jpg?s=128&g=1", "display_name": "atish shimpi", "link": "https://stackoverflow.com/users/1245337/atish-shimpi"}, "edited": false, "score": 0, "creation_date": 1420655135, "post_id": 27826017, "comment_id": 44057850, "body": "you should add description with your code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420655379, "post_id": 27826017, "comment_id": 44058000, "body": "<a href=\"https://stackoverflow.com/help/how-to-ask\"><b>Read this please</b></a>."}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1420655431, "post_id": 27826017, "comment_id": 44058030, "body": "@WhozCraig Simply use <code>ask</code> in square brackets, like this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 2, "creation_date": 1420655484, "post_id": 27826017, "comment_id": 44058074, "body": "@cybermonkey You&#39;re my hero man. Been doing it the hard way to two <i>years</i> now. Maybe  <b><i>I</i></b> should go spend some time on the help docs =P"}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1420655515, "post_id": 27826017, "comment_id": 44058098, "body": "You should really be adding a description with your code, as well as this your code has multiple errors. For example comments are <code>&#47;&#47;</code> not `\\`."}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420655558, "post_id": 27826017, "comment_id": 44058124, "body": "@WhozCraig We&#39;re in the same boat, today I discovered how to format links in comments!"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420655667, "post_id": 27826060, "comment_id": 44058171, "body": "Though I highly suspect you&#39;re correct in the array subscript being out of bounds for <code>name[]</code>, there is no definitive proof it is not large enough to accept a subscript of <code>50</code>. You&#39;re <i>very</i> likely correct for <code>Name[]</code>, however, but even there as a parameter that number becomes meaningless, as <code>Name</code> is converted to a <code>char*</code> regardless."}, {"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1420657445, "post_id": 27826060, "comment_id": 44059241, "body": "@WhozCraig yes, understood. I made a guess based on the usage that the OP is mistaking the use of the subscript for the full size, and decided to point out that it&#39;s easier to think of it as a subscript out of bounds, rather than a valid subscript that might result in undefined behavior if the buffer length is exceeded."}], "tags": [], "owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "is_accepted": false, "score": 2, "last_activity_date": 1420655382, "last_edit_date": 1420655382, "creation_date": 1420655011, "answer_id": 27826060, "question_id": 27826017, "link": "https://stackoverflow.com/questions/27826017/invalid-conversion-from-char-to-char-compiler-error/27826060#27826060", "title": "Invalid conversion from char to char compiler error", "body": "<p>You've declared your function arguments to be of type <code>char[]</code> but you're calling the function with an <em>element</em> of a char array, which is of type <code>char</code>. Call the function with just <code>Name</code> and <code>Adress</code></p>\n\n<p>You've got other issues with your code around the usage of arrays, but this will fix the compiler error in question. It won't fix the other issues you're going to see...</p>\n\n<p>I'll point some of them out...</p>\n\n<pre><code>void Emplyee::setname (char Name[50])\n{ \n    name [50] = Name [50] ;   // this line won't do what you think it does. (look at strcpy...)\n       //  ^           ^\n       //  |-----------|------ also, subscript out of bounds...\n}\n</code></pre>\n\n<p>Also, same with address.</p>\n\n<pre><code>char name[50]; // declares an array of chars, called name, with a size of 50 elements\n// ...\nchar c = name[50]; // access the 50th element (out of bounds, btw) of the name array, and assign to c. has nothing to do with size.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": false, "score": 1, "last_activity_date": 1420655317, "creation_date": 1420655317, "answer_id": 27826146, "question_id": 27826017, "link": "https://stackoverflow.com/questions/27826017/invalid-conversion-from-char-to-char-compiler-error/27826146#27826146", "title": "Invalid conversion from char to char compiler error", "body": "<pre><code>name [50] = Name [50] ;\n</code></pre>\n\n<p>This doesn't do what you think it does, it overwrites element 51 of name with element 51 of Name. It doesn't copies the whole arrays, just one element. That's also probably a buffer overflow error.</p>\n\n<p>This whole code shows that you don't understand arrays, I think you'd have less trouble with std::string for now.\nHere's a simple example based on what you wrote :</p>\n\n<pre><code>#include &lt;string&gt;\n\nclass Emplyee{\n    std::string address, name;\n\npublic:\n    void setname (std::string Name)\n    { name = Name ;      }\n\n    void setadress (std::string Adress)\n    {  adress = Adress ;      }\n};\n\nEmplyee Number;\n\nNumber.setname (\"AAAA\");\n\nstd::string Address = \"Your address here\";\nNumber.setadress (Address); \n</code></pre>\n\n<p>Finally I'd like to say that comments are // not \\\\ and that it's good to try and respect the language's naming conventions when possible for consistency.</p>\n"}], "owner": {"reputation": 1, "user_id": 4430035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcc824e5de1a7c00e43ddf805158f104?s=128&d=identicon&r=PG&f=1", "display_name": "AAAA", "link": "https://stackoverflow.com/users/4430035/aaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1420656942, "answer_count": 2, "score": -7, "last_activity_date": 1420655382, "creation_date": 1420654814, "last_edit_date": 1420654930, "question_id": 27826017, "link": "https://stackoverflow.com/questions/27826017/invalid-conversion-from-char-to-char-compiler-error", "closed_reason": "Needs details or clarity", "title": "Invalid conversion from char to char compiler error", "body": "<pre><code>void Emplyee::setname (char Name[50])\n{ name [50] = Name [50] ;      }\n\nvoid Emplyee::setadress (char Adress [100])\n{  adress [100] = Adress [100] ;      }\n\nNumber.setname (Name [50]);   \\\\ Error in this Line\n\nNumber.setadress (Adress [100]);  \\\\ Error in this Line\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string", "reference"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1420653530, "post_id": 27825598, "comment_id": 44057016, "body": "I&#39;m not sure I understand what you&#39;re saying; but you could be looking for a map/dictionary."}], "answers": [{"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 2, "last_activity_date": 1420653483, "creation_date": 1420653483, "answer_id": 27825653, "question_id": 27825598, "link": "https://stackoverflow.com/questions/27825598/how-to-reference-an-array-position-with-a-variable-name/27825653#27825653", "title": "How to reference an array position with a variable name", "body": "<p>You can't; variable names aren't available at run-time.</p>\n\n<p>If you want one variable to refer to another, use a reference or a pointer. For example,</p>\n\n<pre><code>string * var = foo;\ncout &lt;&lt; var[1] &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 1, "creation_date": 1420654351, "post_id": 27825727, "comment_id": 44057455, "body": "Not the &quot;only&quot; way , but defintely the Good way"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1420653728, "creation_date": 1420653728, "answer_id": 27825727, "question_id": 27825598, "link": "https://stackoverflow.com/questions/27825598/how-to-reference-an-array-position-with-a-variable-name/27825727#27825727", "title": "How to reference an array position with a variable name", "body": "<p>The only way I can think of is using a <code>std::map</code>.</p>\n\n<pre><code>std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; mapOfArrays;\nmapOfArrays[\"foo\"] = { \"My name is Bob\", \"My name is Tom\" };\nmapOfArrays[\"bar\"] = { \"My name is Jim\", \"My name is Sam\" };\n\nstd::cout &lt;&lt; mapOfArrays[\"foo\"][1] &lt;&lt; std::endl;\nstd::cout &lt;&lt; mapOfArrays[\"bar\"][1] &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655690, "creation_date": 1420655690, "answer_id": 27826270, "question_id": 27825598, "link": "https://stackoverflow.com/questions/27825598/how-to-reference-an-array-position-with-a-variable-name/27826270#27826270", "title": "How to reference an array position with a variable name", "body": "<p>You also can try the following approach with using tuples. For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n\nint main() \n{\n    std::string bar = \"foo\";\n    std::string foo[] = { \"My name is Bob\", \"My name is Tom\" };\n\n    auto  var = std::make_tuple( std::ref( bar ), std::ref( foo ) );\n\n    std::cout &lt;&lt; std::get&lt;0&gt;( var )[0] &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::get&lt;1&gt;( var )[0] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>f\nMy name is Bob\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3179528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194bc93d6bfbed3c2038a9df57144c43?s=128&d=identicon&r=PG&f=1", "display_name": "Spara1008", "link": "https://stackoverflow.com/users/3179528/spara1008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1420655690, "creation_date": 1420653285, "question_id": 27825598, "link": "https://stackoverflow.com/questions/27825598/how-to-reference-an-array-position-with-a-variable-name", "title": "How to reference an array position with a variable name", "body": "<p>What is the easiest way to reference an array location using a variable name?</p>\n\n<pre><code>string var = \"foo\";\nstring foo[] = { \"My name is Bob\", \"My name is Tom\" };\n</code></pre>\n\n<p>In this case, I want to print the second element of the array referenced by the variable var. I will have a few different arrays and the variable 'var' will keep getting changed to names of different arrays. I've tried:</p>\n\n<pre><code>cout &lt;&lt; var[1] &lt;&lt; endl;\n</code></pre>\n\n<p>But of course, that will only return the second character in the string since it's a group of characters. But I want to reference the name foo with the index of 1. \nHow do I go about doing this?</p>\n"}, {"tags": ["c++", "batch-file"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1420654078, "post_id": 27825586, "comment_id": 44057313, "body": "I make the application subsystem console and I get the console output. Or allocate a console. <a href=\"http://stackoverflow.com/questions/13840942/visual-studio-2012-c-standard-output/13841522#13841522\" title=\"visual studio 2012 c standard output\">stackoverflow.com/questions/13840942/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1420654366, "post_id": 27825586, "comment_id": 44057461, "body": "On top of that for applications that I have both a GUI and a console I control this using command line arguments. If I pass a command line argument on some of my applications I don&#39;t create a GUI window."}, {"owner": {"reputation": 7920, "user_id": 2533082, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7097e6c465ed546a571fd85b9aa5e16c?s=128&d=identicon&r=PG", "display_name": "Vinz243", "link": "https://stackoverflow.com/users/2533082/vinz243"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1420655546, "post_id": 27825586, "comment_id": 44058118, "body": "@drescherjm i need both. It&#39;s based on ogre so... Will try or this tomorrow"}, {"owner": {"reputation": 7920, "user_id": 2533082, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7097e6c465ed546a571fd85b9aa5e16c?s=128&d=identicon&r=PG", "display_name": "Vinz243", "link": "https://stackoverflow.com/users/2533082/vinz243"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1420716239, "post_id": 27825586, "comment_id": 44081742, "body": "Thank you editbin worked :) Is there a way w/ cmake"}], "owner": {"reputation": 7920, "user_id": 2533082, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7097e6c465ed546a571fd85b9aa5e16c?s=128&d=identicon&r=PG", "display_name": "Vinz243", "link": "https://stackoverflow.com/users/2533082/vinz243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420653254, "creation_date": 1420653254, "question_id": 27825586, "link": "https://stackoverflow.com/questions/27825586/batch-file-not-show-output-when-running-exe", "title": "Batch file not show output when running exe", "body": "<p>This is my build.bat</p>\n\n<pre><code>@echo off\nsetlocal\ncall \"%VS120COMNTOOLS%\"\\\\vsvars32.bat\necho Deleting old exe...\ndel build_win32\\dist\\bin\\Whitedrop_d.exe\ncd build_win32\necho Building As Debug\nmsbuild /detailedsummary /p:Configuration=Debug /p:Platform=x86 /t:build ALL_BUILD.vcxproj\necho Done building, Exiting.\ncd dist\\bin\\\nWhitedrop_d.exe\ncd ../../../\nendlocal\n</code></pre>\n\n<p>But when I run everything works perfectly, it builds and run, but nothing is logged when running my exe. If I try to add <code>cout &lt;&lt; 'hi world' &lt;&lt; endl</code> in main it compiles and run but I don't see Hi world in cmd prompt (but the GUI shows). Is there a way to show cmd output in same window?</p>\n"}, {"tags": ["c++", "function", "c++11"], "comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 1, "creation_date": 1420653235, "post_id": 27825559, "comment_id": 44056837, "body": "Might be because deducing the type of function is really hard (impossible?) in C++.  Especially since C++ functions can be (a) templated (b) accept a wide range of types due to implicit conversions."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1420653301, "post_id": 27825559, "comment_id": 44056870, "body": "@Rufflewind Are you saying that it is impossible to implement <code>make_function</code>? If so, please demonstrate it in an answer."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1420653420, "post_id": 27825559, "comment_id": 44056944, "body": "I can&#39;t demonstrate it, but I&#39;ve attempted to deduce the types of a lambda previously and failed.  That doesn&#39;t necessarily mean it&#39;s impossible though, there may be a clever trick that I don&#39;t know of."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 6, "creation_date": 1420653457, "post_id": 27825559, "comment_id": 44056967, "body": "@Walter Are you saying that it&#39;s possible to implement it?  That&#39;s easily demonstrated---demonstrating that it&#39;s impossible may be in itself impossible."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420653559, "post_id": 27825559, "comment_id": 44057036, "body": "@JamesKanze I&#39;m <i>asking</i> (not <i>saying</i>) that."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 2, "creation_date": 1420653576, "post_id": 27825559, "comment_id": 44057048, "body": "@Rufflewind Of course, it&#39;s possible; this is, after all, the standard library, and the committee could require something that requires compiler magic or things what would otherwise be impossible.  (It wouldn&#39;t be the first time.)"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1420653710, "post_id": 27825559, "comment_id": 44057125, "body": "@Walter: Well, the statement in your question: <i>&quot;even though the signature could be inferred from the assigned objects&quot;</i> -- Indicates that you take it as a matter of fact that it is possible."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1420653772, "post_id": 27825559, "comment_id": 44057159, "body": "@BenjaminLindley I thought so, but am not 100% certain -- I havn&#39;t tried to implement it."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420653801, "post_id": 27825559, "comment_id": 44057169, "body": "Of course, the example here is more of an argument for not supporting it; the second version, with all of the <code>auto</code> is completely unreadable and unmaintainable."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "reply_to_user": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420653804, "post_id": 27825559, "comment_id": 44057171, "body": "@JamesKanze: Right, but the committee has been very conservative about introducing &quot;magical&quot; templates."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1420653891, "post_id": 27825559, "comment_id": 44057211, "body": "@Walter: <a href=\"https://stackoverflow.com/a/4482680\">this</a> may be of interest: it shows that you can deduce the type of a monomorphic lambda (or lambda-like object) but it probably wouldn&#39;t be able to handle functions with multiple <code>operator()</code> and/or polymorphic ones."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1420653928, "post_id": 27825559, "comment_id": 44057236, "body": "@Rufflewind Or other &quot;magic&quot;.  Agreed.  There are at least some influential members of the committee who argue that the standard library should not do anything that user code couldn&#39;t do.  (More or less: every one accepts that the implelemtation of <code>std::filebuf</code> must depend on somethings not available at the C++ language level.  But that&#39;s not the same sort of &quot;magic&quot;.)"}, {"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 0, "creation_date": 1420654271, "post_id": 27825559, "comment_id": 44057418, "body": "What would be the use case for make_function?  make_unique (C++14) and make_shared are used to avoid a raw new call, plus make_shared has an efficiency advantage (one allocation instead of two)."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 4, "creation_date": 1420654478, "post_id": 27825559, "comment_id": 44057513, "body": "@Nevin: Reduction in verbosity. Same as the use case for <code>make_tuple</code> and <code>make_pair</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1420654661, "post_id": 27825559, "comment_id": 44057589, "body": "It seems like it wouldn&#39;t be that much work to provide an overloaded <code>make_function(T)</code> function, one for pointers to functions, one for functor objects (using type traits with <code>decltype(&amp;T::operator())</code>, etc.), so that it would work if and only if the <code>function&lt;T&gt;</code> type can be unambiguously determined. But I&#39;m having trouble thinking of concrete cases where it could actually be used, and where keeping it as its original possibly-functor type isn&#39;t preferable."}, {"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1420654932, "post_id": 27825559, "comment_id": 44057738, "body": "@BenjaminLindley I&#39;m still not seeing it.  In the case of make_pair/make_tuple, you are converting it to a pair/tuple because you want to do something with it that is unwieldy (such as, say, generate a comparison operator) if you don&#39;t hitch the variables together.  With functions, about the only thing you can do is call it or copy it; auto is a far better choice than std::function in those cases."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1420656162, "post_id": 27825559, "comment_id": 44058473, "body": "In the above code, what benefit did you gain from storing anything as a <code>std::function</code>?  <code>f_display</code> and similar are all <i>less useful</i> than the original value and value type you created them from."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1420744658, "post_id": 27825559, "comment_id": 44099361, "body": "Sigh. Now that shamelessly beginning every declaration with <code>auto</code> is in vogue, I suppose we&#39;re going to need <code>make_X()</code> for all <code>X</code>. Best get right on that. What could possibly go wrong?"}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 0, "creation_date": 1426658540, "post_id": 27825559, "comment_id": 46458519, "body": "Quoting Stroustrup (<a href=\"http://www.stroustrup.com/bs_faq.htm\" rel=\"nofollow noreferrer\">stroustrup.com/bs_faq.htm</a>): &quot;Standard C++ and the design and programming styles it supports owe a debt to the functional languages, especially to ML. Early variants of ML&#39;s type deduction mechanisms were (together with much else) part of the inspiration of templates. Some of the more effective functional programming techniques were part of the inspiration of the STL and the use of function objects in C++.&quot;  -- can&#39;t remember when and where that wisdom is lost among the C++ community. The crippled <code>std::function</code> is probably the best example."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420654669, "post_id": 27825782, "comment_id": 44057595, "body": "How does it apply to lambdas?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1420654821, "post_id": 27825782, "comment_id": 44057673, "body": "@Walter <code>[](auto x){return x;}</code>"}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420654922, "post_id": 27825782, "comment_id": 44057732, "body": "@Walter Because lambdas juste generates classes with an overloaded <code>operator()</code> and some state, see: <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/lambda</a>"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420655136, "post_id": 27825782, "comment_id": 44057852, "body": "@Drax I think the <code>operator()</code> (of the closure object) can be <i>overloaded</i> only since C++14 (as in Yakk&#39;s comment), but not in C++11."}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 0, "creation_date": 1420655208, "post_id": 27825782, "comment_id": 44057890, "body": "Sorry, my wording was bad, i meant defined instead of overloaded :) The point is that, it&#39;s an object without a signature in it&#39;s type (contrary to function pointers) so it will always be ambiguous."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420655275, "post_id": 27825782, "comment_id": 44057927, "body": "But then, there is no problem with a lambda, isn&#39;t there? (except in C++14 a la Yakk&#39;s comment)"}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420655513, "post_id": 27825782, "comment_id": 44058096, "body": "@Walter There is no guarantee that only one overload will exist in lambdas even if that&#39;s the case right now."}], "tags": [], "owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "is_accepted": false, "score": 14, "last_activity_date": 1420653960, "creation_date": 1420653960, "answer_id": 27825782, "question_id": 27825559, "link": "https://stackoverflow.com/questions/27825559/why-is-there-no-stdmake-function/27825782#27825782", "title": "why is there no std::make_function()?", "body": "<pre><code>class multi_functor\n{\n  public:\n    void operator()(int) { std::cout &lt;&lt; \"i'm int\" &lt;&lt; std::endl }\n    void operator()(double) { std::cout &lt;&lt; \"i'm double\" &lt;&lt; std::endl }\n};\n\nint main(void)\n{\n  auto func = make_function(multi_functor());\n}\n</code></pre>\n\n<p>Because what would be the type of <code>func</code> here ?</p>\n\n<p>This ambiguity applies to all functor objects (which includes <code>bind</code> return values and lambdas), which would make <code>make_function</code> only usable on function pointers.</p>\n"}, {"comments": [{"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 0, "creation_date": 1420948965, "post_id": 27826003, "comment_id": 44169393, "body": "<code>... in all of your examples you can simply remove make_function and you get the same result</code>  -- that depends on how you define &quot;same&quot;. It&#39;s not really the same for most examples such as <code>auto f_display = make_function(print_num);</code>, if a <code>std::function</code> object in the <code>auto</code> variable is intended to be created as in the OP."}], "tags": [], "owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "is_accepted": false, "score": 1, "last_activity_date": 1420655212, "last_edit_date": 1420655212, "creation_date": 1420654771, "answer_id": 27826003, "question_id": 27825559, "link": "https://stackoverflow.com/questions/27825559/why-is-there-no-stdmake-function/27826003#27826003", "title": "why is there no std::make_function()?", "body": "<p>Please notice that in all of your examples you can simply remove <code>make_function</code> and you get the same result, or actually more efficient, because invoking an <code>std::function</code> often requires a virtual call. So a first good point would be to discourage the usage of <code>std::function</code> when it is unnecessary.</p>\n\n<p>Typically you use <code>std::function</code> as a member object of some class (callback et similia) or as argument of a function that can not be a template for whatever reason. In both of these cases <code>make_function</code> would be useless.</p>\n\n<pre><code>struct Foo\n{\n     std::function&lt;int()&gt; callback\n};\nFoo x; x.callback = [](){return 0;} // No need for make_function\n\nvoid bar( std::function&lt;int(int)&gt; f );\nbar( [](int i){ return i;} ); // No need for make function.\n</code></pre>\n\n<p>There is only one case I could think of where you can really have a benefit: a <code>std::function</code> initialized by a ternary operator:</p>\n\n<pre><code> auto f = val ? make_function( foo ) : make_function( bar );\n</code></pre>\n\n<p>is probably better than</p>\n\n<pre><code> auto f = val ? std::function&lt;int()&gt;( foo ) : std::function&lt;int()&gt;( bar );\n</code></pre>\n\n<p>I believe that this is quite rare case, so the advantages of a <code>make_function</code> are minimal.</p>\n\n<p>The real disadvantage, IMO, is that the simple existence of an hypothetical <code>make_function</code> would encourage less experienced developers to use <code>std::function</code> when it is not necessary, as you show in your code.</p>\n"}, {"tags": [], "owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "is_accepted": true, "score": 10, "last_activity_date": 1420744991, "last_edit_date": 1495540055, "creation_date": 1420655069, "answer_id": 27826081, "question_id": 27825559, "link": "https://stackoverflow.com/questions/27825559/why-is-there-no-stdmake-function/27826081#27826081", "title": "why is there no std::make_function()?", "body": "<p>As commented here and elsewhere, there is the ambiguity issue that can confuse type inferencing. Probably these corner cases stopped a <code>std::make_function</code> from being adopted as it would not be able to resolve ambiguity, overloading or work nicely with C++ automatic type conversions. Another argument against it that I see a lot is that <code>std::function</code> has overhead (in type erasure), and many people are against using <code>std::function</code> on that basis for anything other than storage of callables.</p>\n\n<p>However, for the non-ambiguous case, it is possible to write a <code>make_function</code> for lambdas and other callables that takes care of type inferencing, which avoids repeating function type signatures when there is really no ambiguity. One way to do it (taken from <a href=\"https://stackoverflow.com/questions/21738775/c11-how-to-write-a-wrapper-function-to-make-stdfunction-objects\">my related question</a>) is as follows:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;utility&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\n// For generic types that are functors, delegate to its 'operator()'\ntemplate &lt;typename T&gt;\nstruct function_traits\n  : public function_traits&lt;decltype(&amp;T::operator())&gt;\n{};\n\n// for pointers to member function\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType(ClassType::*)(Args...) const&gt; {\n  enum { arity = sizeof...(Args) };\n  typedef function&lt;ReturnType (Args...)&gt; f_type;\n};\n\n// for pointers to member function\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType(ClassType::*)(Args...) &gt; {\n  enum { arity = sizeof...(Args) };\n  typedef function&lt;ReturnType (Args...)&gt; f_type;\n};\n\n// for function pointers\ntemplate &lt;typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType (*)(Args...)&gt;  {\n  enum { arity = sizeof...(Args) };\n  typedef function&lt;ReturnType (Args...)&gt; f_type;\n};\n\ntemplate &lt;typename L&gt; \nstatic typename function_traits&lt;L&gt;::f_type make_function(L l){\n  return (typename function_traits&lt;L&gt;::f_type)(l);\n}\n\n//handles bind &amp; multiple function call operator()'s\ntemplate&lt;typename ReturnType, typename... Args, class T&gt;\nauto make_function(T&amp;&amp; t) \n  -&gt; std::function&lt;decltype(ReturnType(t(std::declval&lt;Args&gt;()...)))(Args...)&gt; \n{return {std::forward&lt;T&gt;(t)};}\n\n//handles explicit overloads\ntemplate&lt;typename ReturnType, typename... Args&gt;\nauto make_function(ReturnType(*p)(Args...))\n    -&gt; std::function&lt;ReturnType(Args...)&gt; {\n  return {p};\n}\n\n//handles explicit overloads\ntemplate&lt;typename ReturnType, typename... Args, typename ClassType&gt;\nauto make_function(ReturnType(ClassType::*p)(Args...)) \n    -&gt; std::function&lt;ReturnType(Args...)&gt; { \n  return {p};\n}\n\n// testing\nusing namespace std::placeholders;\n\nint foo(int x, int y, int z) { return x + y + z;}\nint foo1(int x, int y, int z) { return x + y + z;}\nfloat foo1(int x, int y, float z) { return x + y + z;}\n\nint main () {\n  //unambuiguous\n  auto f0 = make_function(foo);\n  auto f1 = make_function([](int x, int y, int z) { return x + y + z;});\n  cout &lt;&lt; make_function([](int x, int y, int z) { return x + y + z;})(1,2,3) &lt;&lt; endl;\n\n  int first = 4;\n  auto lambda_state = [=](int y, int z) { return first + y + z;}; //lambda with states\n  cout &lt;&lt; make_function(lambda_state)(1,2) &lt;&lt; endl;\n\n  //ambuiguous cases\n  auto f2 = make_function&lt;int,int,int,int&gt;(std::bind(foo,_1,_2,_3)); //bind results has multiple operator() overloads\n  cout &lt;&lt; f2(1,2,3) &lt;&lt; endl;\n  auto f3 = make_function&lt;int,int,int,int&gt;(foo1);     //overload1\n  auto f4 = make_function&lt;float,int,int,float&gt;(foo1); //overload2\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208848, "user_id": 46642, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wjb79.jpg?s=128&g=1", "display_name": "R. Martinho Fernandes", "link": "https://stackoverflow.com/users/46642/r-martinho-fernandes"}, "edited": false, "score": 0, "creation_date": 1420798696, "post_id": 27826209, "comment_id": 44119293, "body": "People often miss the point of <code>std::function</code> and come up with all kinds of ridiculously pointless machinery. +1 for adding sense into this thing."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1420656049, "last_edit_date": 1420656049, "creation_date": 1420655508, "answer_id": 27826209, "question_id": 27825559, "link": "https://stackoverflow.com/questions/27825559/why-is-there-no-stdmake-function/27826209#27826209", "title": "why is there no std::make_function()?", "body": "<p>The general case cannot work.  There are specific cases (that support C++11 lambdas but not C++14, does not support <code>bind</code>, supports non-overloaded functions and methods, does not support function objects) where you can build a <code>make_function</code> that \"works\".  There are also some functions you can write that are useful.</p>\n\n<p>The <code>make_function</code> that \"works\" is <strong>usually a bad idea</strong>.</p>\n\n<p>Just keep a copy of the original function object around if you don't need to convert it to a <code>std::function&lt;?&gt;</code>.  You only need to convert it to a <code>std::function&lt;?&gt;</code> when you already know the types you are going to be passing to it, and what you are doing with the return type -- ie, when you are type-erasing around the signature.</p>\n\n<p><code>std::function</code> is not a \"all purpose holder for a function type\".  It is a type-erasure class that is used to erase type information so you can have code that operates uniformly on it.  If you are deducing the signature from the object, there is little if no reason to store it in a <code>std::function</code> at all.</p>\n\n<p>There are narrow cases where it is useful, when you want to behave differently based on the input and output argument types of the function argument you are passed.  In this case, your signature deduction facility could be useful: tying it to <code>std::function</code> would be a bad idea, in my opinion, as it ties together the two independent concepts (signature deduction and type erasure) in a way that is rarely useful.</p>\n\n<p>In short, reconsider.</p>\n\n<hr>\n\n<p>Now, I mentioned above that there are some useful utilities that could be called <code>make_function</code>.  Here are two of them:</p>\n\n<pre><code>template&lt;class...Args, class F&gt;\nstd::function&lt; std::result_of_t&lt; F&amp;(Args...) &gt;\nmake_function( F&amp;&amp; f ) {\n  return std::forward&lt;F&gt;(f);\n}\n</code></pre>\n\n<p>but requires that you list the arguments.  It deduces return value.</p>\n\n<p>This variant:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct make_function_helper {\n  F f;\n  template&lt;class...Args&gt;\n  std::result_of_t&lt; (F&amp;&amp;)(Args...) &gt;\n  operator()(Args&amp;&amp;...args)&amp;&amp; {\n    return std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n  }\n  template&lt;class...Args&gt;\n  std::result_of_t&lt; (F const&amp;)(Args...) &gt;\n  operator()(Args&amp;&amp;...args) const&amp; {\n    return f(std::forward&lt;Args&gt;(args)...);\n  }\n  template&lt;class...Args&gt;\n  std::result_of_t&lt; (F&amp;)(Args...) &gt;\n  operator()(Args&amp;&amp;...args) &amp; {\n    return f(std::forward&lt;Args&gt;(args)...);\n  }\n  template&lt;class R, class...Args, class=std::enable_if_t&lt;\n    std::is_convertible&lt;decltype( std::declval&lt;F&amp;&gt;(Args...) ), R&gt;{}\n  &gt;&gt;\n  operator std::function&lt;R(Args...)&gt;()&amp;&amp;{ return std::forward&lt;F&gt;(f); }\n  template&lt;class R, class...Args, class=std::enable_if_t&lt;\n    std::is_convertible&lt;decltype( std::declval&lt;F&amp;&gt;(Args...) ), R&gt;{}\n  &gt;&gt;\n  operator std::function&lt;R(Args...)&gt;()const&amp;{ return f; }\n};\ntemplate&lt;class F&gt;\nmake_function_helper&lt;F&gt; make_function(F&amp;&amp;f) { return {std::forward&lt;F&gt;(f)}; }\n</code></pre>\n\n<p>doesn't actually make a function, but lets you call a function with multiple <code>std::function</code> overloads and pick between them correctly.  It is also invokable in a perfect-forwarding way back to the underlying <code>F</code>.  In 97/100 cases, you won't be able to notice the difference between this <code>make_function</code> and one that returns an actual <code>std::function</code> (those last cases being cases where someone expects to type-deduce the <code>std::function</code> from the type, and perfect forwarding failures)</p>\n\n<p>So:</p>\n\n<pre><code>int foo(std::function&lt; int(int) &gt;) { return 0; }\nint foo(std::function&lt; void() &gt;) { return 1; }\nint main() {\n  std::cout &lt;&lt; foo( []{} ) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>fails to compile, while</p>\n\n<pre><code>int main() {\n  std::cout &lt;&lt; foo( make_function([]{}) ) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>succeeds.  However, even this trick is just patching a hole in the design of <code>std::function</code> which I hope will be rolled into the post-concepts <code>std::function</code>.  At that point, you may have well just store the original object.</p>\n\n<p>In general, you cannot determine a single guaranteed unique signature for a callable object x or a function name x.</p>\n\n<p>In the case of a callable object, the <code>operator()</code> could have multiple overloads.  This can be done in C++14 with <code>[](auto x)</code> lambdas, and with function objects or the return from <code>std::bind</code> in C++03.</p>\n\n<p>With the name of a function (or function pointer), the name does not correspond to a single object (or pointer).  Resolution is done when it is passed to the <code>std::function</code>, and the correct overload is often picked (because <code>std::function</code> takes a <code>R(*)(Args...)</code> pointer, and maybe something similar for member functions (I cannot recall)).</p>\n\n<p>Doing so with a <code>make_function</code> is nearly impossible.</p>\n"}], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3504, "favorite_count": 3, "accepted_answer_id": 27826081, "answer_count": 4, "score": 18, "last_activity_date": 1442003445, "creation_date": 1420653141, "last_edit_date": 1495535390, "question_id": 27825559, "link": "https://stackoverflow.com/questions/27825559/why-is-there-no-stdmake-function", "title": "why is there no std::make_function()?", "body": "<p><code>std::function&lt;&gt;</code> is a useful wrapper around almost any callable thing, including free functions, lambdas, functors, member functions, results from <code>std::bind</code>. However, when creating a <code>std::function&lt;&gt;</code>, one must explicitly specify the function signature as in\n(taken from <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"noreferrer\">here</a>)</p>\n\n<pre><code>struct Foo {\n    Foo(int num) : num_(num) {}\n    void print_add(int i) const { std::cout &lt;&lt; num_+i &lt;&lt; '\\n'; }\n    int num_;\n};\n\nvoid print_num(int i)\n{ std::cout &lt;&lt; i &lt;&lt; '\\n'; }\n\nstruct PrintNum {\n    void operator()(int i) const\n    { std::cout &lt;&lt; i &lt;&lt; '\\n'; }\n};\n\n// store a free function\nstd::function&lt;void(int)&gt; f_display = print_num;\n\n// store a lambda\nstd::function&lt;void()&gt; f_display_42 = []() { print_num(42); };\n\n// store the result of a call to std::bind\nstd::function&lt;void()&gt; f_display_31337 = std::bind(print_num, 31337);\n\n// store a call to a member function\nstd::function&lt;void(const Foo&amp;, int)&gt; f_add_display = &amp;Foo::print_add;\n\n// store a call to a member function and object\nusing std::placeholders::_1;\nstd::function&lt;void(int)&gt; f_add_display2= std::bind( &amp;Foo::print_add, foo, _1 );\n\n// store a call to a member function and object ptr\nstd::function&lt;void(int)&gt; f_add_display3= std::bind( &amp;Foo::print_add, &amp;foo, _1 );\n\n// store a call to a function object\nstd::function&lt;void(int)&gt; f_display_obj = PrintNum();\n</code></pre>\n\n<p>even though the signature could be inferred from the assigned objects. It seems that a natural way to avoid this (which should be quite handy in heavily templated code) is an overloaded function template <code>make_function</code> (similar in spirit to <code>std::make_pair</code> or <code>std::make_tuple</code>), when above examples would simply become</p>\n\n<pre><code>// store a free function\nauto f_display = make_function(print_num);\n\n// store a lambda\nauto f_display_42 = make_function([](){ print_num(42);});\n\n// store the result of a call to std::bind\nauto f_display_31337 = make_function(std::bind(print_num, 31337));\n\n// store a call to a member function\nauto f_add_display = make_function(&amp;Foo::print_add);\n\n// store a call to a member function and object\nusing std::placeholders::_1;\nauto f_add_display2 = make_function(std::bind( &amp;Foo::print_add, foo, _1));\n\n// store a call to a member function and object ptr\nauto f_add_display3 = make_function(std::bind( &amp;Foo::print_add, &amp;foo, _1));\n\n// store a call to a function object\nauto f_display_obj = make_function(PrintNum());\n</code></pre>\n\n<p>Another possible use case is to get the return type for callable object of any kind</p>\n\n<pre><code>decltype(make_function(function_object))::return_type;\n</code></pre>\n\n<p>avoiding the traits magic in the answer by Piotr S. to <a href=\"https://stackoverflow.com/questions/27822277/finding-out-the-return-type-of-a-function-lambda-or-function/\">this question</a>.</p>\n\n<p>So, my question: why does the standard not provide this functionality? Can <code>make_function</code> be implemented without compiler magic? Or would it need compiler magic? (even then the first question remains.)</p>\n"}, {"tags": ["c++", "class", "linked-list", "private-members"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1420653491, "post_id": 27825519, "comment_id": 44056990, "body": "I do not believe you should expose this implementation detail outside of the SLinkedList. Instead provide a way to iterate over your list so other classes have access to the elements but not the inner implementation of SLinkedList."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "edited": false, "score": 0, "creation_date": 1420653222, "post_id": 27825541, "comment_id": 44056831, "body": "Then I guess my other question is what public member can I write that will return a pointer in which the data can not be changed."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "edited": false, "score": 0, "creation_date": 1420653278, "post_id": 27825541, "comment_id": 44056863, "body": "But the class is not yours, are you allowed to do so? It depends on what you want. You can&#39;t return a const reference for example of the pointer. Bur probably that&#39;s another question."}, {"owner": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "edited": false, "score": 0, "creation_date": 1420653587, "post_id": 27825541, "comment_id": 44057054, "body": "You&#39;re right. I&#39;m simply using this for testing right now, but I understand a lot better now, thank you."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "edited": false, "score": 0, "creation_date": 1420653661, "post_id": 27825541, "comment_id": 44057101, "body": "You are welcome @Justin. Remember that private is there to ensure that nobody outside the class has direct access to private fields."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "edited": false, "score": 0, "creation_date": 1420653976, "post_id": 27825541, "comment_id": 44057263, "body": "I also included a link. Nice question by the way, +1. @Justin"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1420653949, "last_edit_date": 1495535599, "creation_date": 1420653089, "answer_id": 27825541, "question_id": 27825519, "link": "https://stackoverflow.com/questions/27825519/accessing-linked-list-private-variable-from-outside-class/27825541#27825541", "title": "Accessing Linked List private variable from outside class", "body": "<p>You can't, because it is private.</p>\n\n<p>The other person needs to provide access to you, with a public member function for example.</p>\n\n<p>As for an example, you can take a look at <a href=\"https://stackoverflow.com/questions/19387577/accessing-an-element-within-my-custom-linked-list-class\">this</a> question.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420653598, "creation_date": 1420653598, "answer_id": 27825689, "question_id": 27825519, "link": "https://stackoverflow.com/questions/27825519/accessing-linked-list-private-variable-from-outside-class/27825689#27825689", "title": "Accessing Linked List private variable from outside class", "body": "<p>It is the person who designed this list has to provide an interface that you could access data stored in the list.</p>\n\n<p>Now you can only add data to the list and output them all.</p>\n\n<p>Usually such containers provide iterators that allow to traverse the list. \nThe person should write such an interface. Otherwise there is no any usefulness of the list.</p>\n"}], "owner": {"reputation": 27, "user_id": 4273470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac8e92246a17b4ea671809f770d7513?s=128&d=identicon&r=PG&f=1", "display_name": "hecticd", "link": "https://stackoverflow.com/users/4273470/hecticd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1906, "favorite_count": 0, "accepted_answer_id": 27825541, "answer_count": 2, "score": 1, "last_activity_date": 1420653949, "creation_date": 1420653014, "last_edit_date": 1420653046, "question_id": 27825519, "link": "https://stackoverflow.com/questions/27825519/accessing-linked-list-private-variable-from-outside-class", "title": "Accessing Linked List private variable from outside class", "body": "<p>I am currently working on a program that will access a linked list written by another person. I'm assuming this person will have declared the head and tail variables as private, but I would like to iterate through their linked list.</p>\n\n<p>Here is a possible linked list implementation</p>\n\n<pre><code>/* singly linked list node */\nstruct SLLNode {\n    int data;\n    SLLNode *next;\n};\n\n/* singly linked list implementation */\nclass SLinkedList {\npublic:\n    SLinkedList();\n    ~SLinkedList();\n\n    void addToTail(int newData);\n    void addToHead(int newData);\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const SLinkedList&amp;);\n\nprivate:\n    SLLNode *head;\n    SLLNode *tail;\n};\n</code></pre>\n\n<p>I would like to access the pointer to the head in order to be able to iterate through the linked list.</p>\n\n<p>How can I access that pointer without being able to change the nodes? Not being able to change simply for safety. Thanks in advance!</p>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1420652877, "post_id": 27825443, "comment_id": 44056621, "body": "Hint: the first one allows you to modify whatever <code>f()</code> returns, which may be a part of the object <code>f()</code> is being called on."}, {"owner": {"reputation": 2639, "user_id": 128002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef0f5a3cc4109ce092c641e589a727d?s=128&d=identicon&r=PG", "display_name": "kerem", "link": "https://stackoverflow.com/users/128002/kerem"}, "edited": false, "score": 3, "creation_date": 1420652978, "post_id": 27825443, "comment_id": 44056686, "body": "Second one is not allowed to modify the state of the class that this method is defined in."}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 5, "creation_date": 1420653167, "post_id": 27825443, "comment_id": 44056799, "body": "<a href=\"http://www.parashift.com/c++-faq/const-overloading.html\" rel=\"nofollow noreferrer\">parashift.com/c++-faq/const-overloading.html</a>"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1420653695, "post_id": 27825443, "comment_id": 44057113, "body": "It might be easier to <b>read</b> the info from the object than <b>provide the means to write it</b> (e.g. reading/writing a single bit in a data structure) - then the <code>const</code> version is fast, while the non-<code>const</code> version can write, so their code differs."}], "answers": [{"tags": [], "owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "is_accepted": false, "score": 5, "last_activity_date": 1420653353, "last_edit_date": 1420653353, "creation_date": 1420653029, "answer_id": 27825521, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825521#27825521", "title": "Same function with const and without - When and why?", "body": "<p>The first one with no const allows the caller to modify the object, which is in general a member of the class whose method is being called.</p>\n\n<p>The second one, where our host class is in read-only mode, also allows read-only access to its member.</p>\n\n<p>By the default, the non-const version is invoked if it is allowed under the rules of constness.</p>\n\n<p>One of the most common examples of this is with some kind of collection / array type class.</p>\n\n<pre><code>class Array\n{\n   private:\n      MyType members[MySize];\n\n   public:\n      MyType &amp; operator[]( size_t index );\n      const MyType &amp; operator[]( size_t index ) const;\n};\n</code></pre>\n\n<p>Assuming they are implemented and that it might be a template or they are concrete types and sizes. I'm demonstrating the const overload.</p>\n\n<p>Now we can have someone using the class. You might want to set a value.</p>\n\n<pre><code>Array myArray;\nmyArray[ 3 ] = myObject;\n</code></pre>\n\n<p>Or you might be only reading it:</p>\n\n<pre><code>const Array&amp; myArrayRef = getArrayRef(); // gets it to read\nconst MyType &amp; myValueRef = myArrayRef[ 3 ];\n</code></pre>\n\n<p>So you see I can use the notation to both set a value and read one.\nAs with <code>operator[]</code>, you can apply this technique to any method.</p>\n"}, {"tags": [], "owner": {"reputation": 10424, "user_id": 4047092, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/n5HM6.jpg?s=128&g=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/4047092/ravi"}, "is_accepted": false, "score": 13, "last_activity_date": 1507210681, "last_edit_date": 1507210681, "creation_date": 1420653072, "answer_id": 27825537, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825537#27825537", "title": "Same function with const and without - When and why?", "body": "<p><em>But why would you have both functions in one and the same class definition?</em></p>\n\n<p>Sometimes you want to provide different semantics for same operation depending on whether it's being invoked on <code>const</code> object OR <code>non-const</code> object. Let's take an example of <code>std::string</code> class:-</p>\n\n<pre><code>char&amp; operator[](int index);\nconst char&amp; operator[](int index) const;\n</code></pre>\n\n<p>In this case when <code>operator[]</code> invoked through <code>const</code> object you won't let user to change the content of the string.</p>\n\n<pre><code>const std::string str(\"Hello\");\nstr[1] = 'A';     // You don't want this for const.\n</code></pre>\n\n<p>On the other hand,In case of non-const string you let user to change the content of string. That's why a different overload.</p>\n\n<p><em>And how does the compiler distinguish between these?</em></p>\n\n<p>Compiler checks whether that method is invoked on <code>const</code> object OR <code>non-const</code> object and then appropriately call that method.</p>\n\n<pre><code>const std::string str(\"Hello\");\ncout &lt;&lt; str[1];           // Invokes `const` version.\n\nstd::string str(\"Hello\");\ncout &lt;&lt; str[1];           // Invokes non-const version.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 29, "last_activity_date": 1420653097, "creation_date": 1420653097, "answer_id": 27825546, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825546#27825546", "title": "Same function with const and without - When and why?", "body": "<blockquote>\n  <p>But why would you have both functions in one and the same class definition?</p>\n</blockquote>\n\n<p>Having both allows you to:</p>\n\n<ul>\n<li>call the function on a mutable object, and modify the result if you like; and</li>\n<li>call the function on a <code>const</code> object, and only look at the result.</li>\n</ul>\n\n<p>With only the first, you couldn't call it on a <code>const</code> object. With only the second, you couldn't use it to modify the object it returns a reference to.</p>\n\n<blockquote>\n  <p>And how does the compiler distinguish between these?</p>\n</blockquote>\n\n<p>It chooses the <code>const</code> overload when the function is called on a <code>const</code> object (or via a reference or pointer to <code>const</code>). It chooses the other overload otherwise.</p>\n\n<blockquote>\n  <p>I believe that the second f() (with const) can be called for non-const variables as well.</p>\n</blockquote>\n\n<p>If that were the only overload, then it could. With both overloads, the non-<code>const</code> overload would be selected instead.</p>\n"}, {"tags": [], "owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "is_accepted": false, "score": 3, "last_activity_date": 1420653226, "creation_date": 1420653226, "answer_id": 27825578, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825578#27825578", "title": "Same function with const and without - When and why?", "body": "<p>It allows you to both have access to const instances data in a readonly  way, while still being able to modify non const instances data.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass test\n{\n  public:\n    test() : data_(0) {}\n\n    int&amp; f() { return data_; }\n    const int&amp; f() const { return data_ }\n\n  private:\n    int data_;\n};\n\nint main(void)\n{\n  const test rock;\n  test paper;\n\n  /* we can print both */\n  std::cout &lt;&lt; rock.f() &lt;&lt; std::endl;\n  std::cout &lt;&lt; paper.f() &lt;&lt; std::endl;\n\n  /* but we can modify only the non const one */\n  // rock.f() = 21;\n  paper.f() = 42;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 4, "last_activity_date": 1420654472, "last_edit_date": 1420654472, "creation_date": 1420653240, "answer_id": 27825583, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825583#27825583", "title": "Same function with const and without - When and why?", "body": "<p>The qualifiers after function call parens apply to the hidden <code>this</code> parameter of member functions:</p>\n\n<p>A member function <code>void Foo::bar()</code> is sort of like this: <code>void bar(Foo *this)</code>. But what happens if the Foo object is <code>const</code>?</p>\n\n<pre><code>struct Foo {\n    void bar();\n};\n\nconst Foo f{};\nf.bar();\n</code></pre>\n\n<p>Well, since <code>Foo::bar()</code> takes a <code>Foo *this</code> parameter, which is not allowed to be <code>const</code>, the above <code>f.bar();</code> fails to compile. So we need a way to qualify the hidden <code>this</code> parameter, and the way C++ choose to do that is to allow those qualifiers to go outside the function parens.</p>\n\n<p>The way the compiler distinguishes these functions is identical in every way to regular function overloading, because that's exactly what it is, despite the weird syntax.</p>\n\n<p>Furthermore, <code>const</code> is not the only qualifier. You can also add <code>volatile</code> qualifiers, and in C++11 you can also put lvalue and rvalue reference qualifiers.</p>\n\n<hr>\n\n<p>The reason we need two almost identical copies of this function is because there's no direct way to pull out the one single difference: the different return types. If we have a const object, and that object has a getter that returns a reference to something it contains, that reference needs to be qualified the same as the overall object.</p>\n\n<pre><code>struct Foo {\n  int i;\n  int &amp;get_i() const { return i; }\n};\n\nint main() {\n  const Foo f{};\n  f.get_i() = 10; // i should be const!\n}\n</code></pre>\n\n<p>The above won't even compile because inside <code>Foo::get_i() const</code>, <code>i</code> is const, and we can't return a non-const reference to it. But if it were allowed, it would be wrong because we shouldn't be able to modify members of a const object. So <code>Foo::get_i() const</code> needs to return a const reference to <code>i</code>.</p>\n\n<pre><code>int const &amp;Foo::get_i() const { return i; }\n</code></pre>\n\n<p>But we <em>should</em> be able to modify a member of a non-const object,</p>\n\n<pre><code>int main() {\n  Foo f{};\n  f.get_i() = 10; // should be fine\n}\n</code></pre>\n\n<p>so we can't have only this function. We need a function that returns a non-const reference when the Foo object itself is not const. So we overload the function based on the const-ness of the object:</p>\n\n<pre><code>struct Foo {\n  int i;\n  int const &amp;get_i() const { return i; }\n  int &amp;get_i() { return i; }\n};\n</code></pre>\n\n<p>If the function body is more complicate there's one possible option to avoid that duplication:</p>\n\n<pre><code>struct Foo {\n  int i;\n  int const &amp;get_i() const { return i; }\n\n  int &amp;get_i() { return const_cast&lt;int &amp;&gt;(const_cast&lt;Foo const *&gt;(this)-&gt;get_i()); }\n};\n</code></pre>\n\n<p>That is, the non-const overload delegates its implementation to the const overload, using const_cast to fix up the types. Adding const is always safe. Removing const using a const_cast is only safe when we know for sure that the original object is not const. We do know that in this case, because we know we added the const in the first place to a non-const object.</p>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 4415923, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BeJgx.png?s=128&g=1", "display_name": "manuel", "link": "https://stackoverflow.com/users/4415923/manuel"}, "is_accepted": false, "score": 4, "last_activity_date": 1420654817, "last_edit_date": 1420654817, "creation_date": 1420653891, "answer_id": 27825768, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27825768#27825768", "title": "Same function with const and without - When and why?", "body": "<p>There is a very nice example in the Qt framework.</p>\n\n<p>Take a look at the <a href=\"http://qt-project.org/doc/qt-4.8/qimage.html\" rel=\"nofollow\">QImage</a> class.</p>\n\n<p>There are two public functions:</p>\n\n<pre><code>const uchar* scanLine (int i) const;\nuchar* scanLine (int i);\n</code></pre>\n\n<p>The first one is for read access only. The second one is for the case that you want to modify the scan line.</p>\n\n<p>Why is this distinction important?\nBecause Qt uses <a href=\"http://qt-project.org/doc/qt-4.8/implicit-sharing.html\" rel=\"nofollow\">implicit data sharing</a>. This means, QImage does not immediately perform a deep copy if you do something like this:</p>\n\n<pre><code>QImage i1, i2;\ni1.load(\"image.bmp\");\ni2 = i1;                        // i1 and i2 share data\n</code></pre>\n\n<p>Instead, the data is copied only and only if you call a function that actually modifies one of the two images, like the non-const scanLine.</p>\n"}, {"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 3, "last_activity_date": 1516786674, "last_edit_date": 1516786674, "creation_date": 1420674129, "answer_id": 27830679, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why/27830679#27830679", "title": "Same function with const and without - When and why?", "body": "<p>As it was mentioned before, you can use <code>const</code> and non-<code>const</code> versions of functions depending on the const-ness of the invoking object. The paradigm is very often used with <code>operator[]</code> for arrays. A way to avoid code duplication (taken from Scott Meyers' book Effective C++) is to <code>const_cast</code> the <code>const</code> function return in a non-const overload, such as:</p>\n\n<pre><code>// returns the position of some internal char array in a class Foo\nconst char&amp; Foo::operator[](std::size_t position) const\n{\n    return arr[position]; // getter \n}\n\n// we now define the non-const in terms of the const version\nchar&amp; Foo::operator[](std::size_t position) \n{\n    return const_cast&lt;char&amp;&gt;( // cast back to non-const\n        static_cast&lt;const Foo&amp;&gt;(*this)[position] // calls const overload\n    ); // getter/setter\n}\n</code></pre>\n"}], "owner": {"reputation": 899, "user_id": 4303296, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/211bac632ae1c8bb299a05019e25ff15?s=128&d=identicon&r=PG&f=1", "display_name": "Beko", "link": "https://stackoverflow.com/users/4303296/beko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7632, "favorite_count": 6, "accepted_answer_id": 27825546, "answer_count": 7, "score": 36, "last_activity_date": 1516786674, "creation_date": 1420652788, "last_edit_date": 1420669539, "question_id": 27825443, "link": "https://stackoverflow.com/questions/27825443/same-function-with-const-and-without-when-and-why", "title": "Same function with const and without - When and why?", "body": "<pre><code>T&amp; f() { // some code ... }\nconst T&amp; f() const { // some code ... }\n</code></pre>\n\n<p>I've seen this a couple of times now (in the introductory book I've been studying thus far). I know that the first const makes the return value const, in other words: unmodifiable. The second const allows that the function can be called for const declared variables as well, I believe.</p>\n\n<p>But why would you have both functions in one and the same class definition? And how does the compiler distinguish between these? I believe that the second f() (with const) can be called for non-const variables as well.</p>\n"}, {"tags": ["c++", "memory-leaks", "operator-overloading"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1420652104, "post_id": 27825188, "comment_id": 44056205, "body": "What is the type of _arraySet?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1420652186, "post_id": 27825188, "comment_id": 44056237, "body": "Your class probably has invalid copy semantics - make sure it follows the <a href=\"http://stackoverflow.com/questions/4172722\">Rule of Three</a>. Also, it looks like <code>_arraySet</code> points to an array, so you need <code>delete[]</code> not <code>delete</code>. Better still, just use <code>std::vector</code> and save yourself a world of pain trying to reinvent it."}, {"owner": {"reputation": 635, "user_id": 1959095, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1bde8b2d8765f3948810e373d1bbc6c3?s=128&d=identicon&r=PG", "display_name": "Krzysztof Piszko", "link": "https://stackoverflow.com/users/1959095/krzysztof-piszko"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1420652364, "post_id": 27825188, "comment_id": 44056339, "body": "@MikeSeymour Yeah, I know - it&#39;s for my uni so I can&#39;t do anything about it. About [] after delete, don&#39;t know how I missed that one -- fixed. Going to look into RoT. Borgleaader - The type is T*"}, {"owner": {"reputation": 635, "user_id": 1959095, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1bde8b2d8765f3948810e373d1bbc6c3?s=128&d=identicon&r=PG", "display_name": "Krzysztof Piszko", "link": "https://stackoverflow.com/users/1959095/krzysztof-piszko"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1420653709, "post_id": 27825188, "comment_id": 44057124, "body": "@MikeSeymour You were right, it works now - thanks a ton!"}], "owner": {"reputation": 635, "user_id": 1959095, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1bde8b2d8765f3948810e373d1bbc6c3?s=128&d=identicon&r=PG", "display_name": "Krzysztof Piszko", "link": "https://stackoverflow.com/users/1959095/krzysztof-piszko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1420653754, "answer_count": 0, "score": 0, "last_activity_date": 1420653847, "creation_date": 1420652046, "last_edit_date": 1495540256, "question_id": 27825188, "link": "https://stackoverflow.com/questions/27825188/double-memory-freeing-or-corruption-while-using-operators", "closed_reason": "Duplicate", "title": "Double memory freeing or corruption while using operators", "body": "<p>I have following problem:</p>\n\n<pre><code>~Set()\n{\n    delete _arraySet;\n};\n\nvoid addToSet(T val)\n{\n    if(_currLen &lt; _maxLen)\n    {\n        _arraySet[_currLen] = val;\n        _currLen++;\n    }\n}\n\nSet&lt;T&gt; operator+(Set&amp; other)\n{\n    Set result;\n\n    for(int i=0; i&lt; _currLen; i++)\n    {\n        result.addToSet(_arraySet[i]);\n    }\n    for(int i=0; i&lt; other._currLen; i++)\n    {\n        result.addToSet(other._arraySet[i]);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>After calling </p>\n\n<pre><code>Set&lt;int&gt; temp  = x + x;\n</code></pre>\n\n<p>in main, I get _BLOCK_TYPE_IS_VALID assert error. To be entirely honest I have no clue as to why it is happening, but after running debug it seems that somehow I delete result from operator+ immediately instead of performing an = operation on it. I'm sorry for not being able to provide any more details...</p>\n\n<p>@Edit:</p>\n\n<p>Looks like I've been missing the Rule of Three. <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Here's the link to the article for anyone with similar problem</a>. Thanks a lot for help!</p>\n"}, {"tags": ["c++", "c", "recursion", "fibonacci"], "comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 6, "creation_date": 1420650971, "post_id": 27824831, "comment_id": 44055534, "body": "It&#39;s called <a href=\"http://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">memoization</a>."}, {"owner": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 0, "creation_date": 1420651004, "post_id": 27824831, "comment_id": 44055548, "body": "It looks like a memoization. The function is attributing the first 100 fib numbers as they are calculated and returning prematurely if already memoized."}, {"owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "edited": false, "score": 0, "creation_date": 1420651046, "post_id": 27824831, "comment_id": 44055569, "body": "Thank you! It helps."}, {"owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "edited": false, "score": 0, "creation_date": 1420651406, "post_id": 27824831, "comment_id": 44055791, "body": "Yeah, I still get the correct answer. What do you mean by &quot;inefficiency&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420651106, "post_id": 27824895, "comment_id": 44055599, "body": "The results are still being cached.  He just doesn&#39;t use the cached values."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420651229, "post_id": 27824895, "comment_id": 44055669, "body": "@JamesKanze: It seems reasonable to say that a write-only memory is not a cache.  A log, perhaps."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420652004, "post_id": 27824895, "comment_id": 44056148, "body": "@BenVoigt Yes and no.  The memory is still a cache, in the sense that it could be used if you wanted to.  But yes, it doesn&#39;t fulfill the purpose of a cache unless it is actually used."}], "tags": [], "owner": {"reputation": 332, "user_id": 2701936, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001805193667/picture?type=large", "display_name": "Laszlo Fuleki", "link": "https://stackoverflow.com/users/2701936/laszlo-fuleki"}, "is_accepted": false, "score": 1, "last_activity_date": 1420650973, "creation_date": 1420650973, "answer_id": 27824895, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27824895#27824895", "title": "Get a faster code in recursion algorithm", "body": "<p>That is because the cached results aren't being used anymore in that way. You see, when you use recursive functions such as these for instance f(20) gets called multiple times, try to draw the call tree on a paper and you'll see. What that line does is essentially avoiding recalculation of these values (memoization, if you want to put it in that way).</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420653327, "post_id": 27824930, "comment_id": 44056886, "body": "Good points on range checking and using a local variable (still with static storage duration).  However, the early return in the original code was far simpler than your rewrite, as well as conceptually more straightforward (&quot;if the cache has the value already, we&#39;re done&quot; vs &quot;make sure the cache has the value by calculating it if it isn&#39;t already in the cache, then return from the cache&quot;)."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1420654241, "post_id": 27824930, "comment_id": 44057403, "body": "The early return on the same line as the <code>if</code> makes the original completely unreadable; at the very least, it needs to be on a separate line.  Otherwise... If you&#39;re caching, it&#39;s much clearer if you always return the cached value.  Recursion in general may be one of the rare cases where a premature return to break the recursion makes sense.  I would still avoid it in pedagogical text; 99 times out of 100, premature return signals insufficient thought about the algorithm, and is less clear.  (At least assuming that you are handling errors as fatal or with exceptions.)"}], "tags": [], "owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "is_accepted": false, "score": 5, "last_activity_date": 1420654263, "last_edit_date": 1420654263, "creation_date": 1420651075, "answer_id": 27824930, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27824930#27824930", "title": "Get a faster code in recursion algorithm", "body": "<p>The algorithm is caching previously calculated values in the array <code>f</code>.\nThis array is initialized with 0 (since it is static). The test you\nmention removing checks if there is a cached value, and returns it.  By\neliminating the test, you never use the cached value, but recalculate it\nevery time.  And that is expensive, since you end up calculating the\nsame value many, many times.</p>\n\n<p>EDIT:</p>\n\n<p>I might add that if this is code from a book, you should get a different\nbook, because it is very poor style.  In C, I'd write something like:</p>\n\n<pre><code>long long\nfib( int n )\n{\n    static long long cache[100];    //  limit scope, and give it a good name\n    assert( n &gt;= 0 &amp;&amp; n &lt; sizeof(cache) / sizeof(cache[0]) );\n                                    //  make sure input is legal.\n    if ( cache[n] == 0 ) {\n        cache[n] = n &lt; 2 ? 1 : fib( n - 1 ) + fib( n - 2 );\n    }\n    return cache[n];\n}\n</code></pre>\n\n<p>You'll notice that the code is actually a lot simpler this way.</p>\n\n<p>In C++, of course, I'd use <code>std::vector</code> for the cache, so I don't have\nsome hidden, hard-coded limit.  (For that matter, in C, I'd probably\nimplement something similar, to avoid the hard-coded limit.  But I\nwouldn't expect that in a pedagogic example.)</p>\n"}, {"tags": [], "owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "is_accepted": true, "score": 9, "last_activity_date": 1420651968, "last_edit_date": 1420651968, "creation_date": 1420651499, "answer_id": 27825034, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27825034#27825034", "title": "Get a faster code in recursion algorithm", "body": "<p>At First if you use the na\u00efve formula for recursion ( i.e if you comment the line 10 in your code)</p>\n\n<pre><code>F(n) = F(n-1) + F(n-2)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/2DB6T.gif\" alt=\"Fib Recursion Tree\"></p>\n\n<p>As you can see it computes many values more than once(ans hence is inefficient ) , or in other words have exponential time complexity as every node resolves into 2 branches ( <code>O(2^n)</code> )</p>\n\n<p>So if he save our work and use it to solve the same problem when occurred again:\nWe can achieve linear time complexity ( <code>O(n)</code> )</p>\n\n<p>In your code the array <code>f</code> is <code>cache</code>\n<img src=\"https://i.stack.imgur.com/LFrmy.png\" alt=\"Fib Recursion tree with Memoization\"></p>\n\n<p>However if you interested to know(although it is not asked in question) , you can calculate <code>Fib(n)</code> or any linear recurrence relation in general faster than this , in logarithmic time complexity via Matrix Exponention. ( <code>O(logN)</code> )</p>\n"}, {"comments": [{"owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 1, "creation_date": 1420651804, "post_id": 27825107, "comment_id": 44056016, "body": "Some may argue the difference between Dynamic Programming and Memoization."}, {"owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "reply_to_user": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 0, "creation_date": 1420652208, "post_id": 27825107, "comment_id": 44056252, "body": "@AbhishekGupta memorization is used by the dynamic programming technique to break into sub problems. the scheme here is dynamic programming scheme which uses memorization to store the results."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1420653229, "post_id": 27825107, "comment_id": 44056833, "body": "Memoization is the particular technique applied here, Dynamic Programming is a broad approach which includes memoization and many other techniques."}], "tags": [], "owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1420653610, "last_edit_date": 1420653610, "creation_date": 1420651748, "answer_id": 27825107, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm/27825107#27825107", "title": "Get a faster code in recursion algorithm", "body": "<p>This ideas of solving problem is called dynamic programming, this particular method is called memorization:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Dynamic_programming\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Dynamic_programming</a></p>\n\n<p>The idea is to store previously calculated values and use them instead of calculating them again. in your case they are stored in: <code>f[100]</code> and once they are calculated once a fibonacci number will never be recalculated. when you delete the assignment you disable this storage and the values are recalculated each time.</p>\n"}], "owner": {"reputation": 901, "user_id": 4418033, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/499b51847b38863627f544d943f691b5?s=128&d=identicon&r=PG&f=1", "display_name": "pexea12", "link": "https://stackoverflow.com/users/4418033/pexea12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 27825034, "answer_count": 4, "score": 4, "last_activity_date": 1420654263, "creation_date": 1420650811, "question_id": 27824831, "link": "https://stackoverflow.com/questions/27824831/get-a-faster-code-in-recursion-algorithm", "title": "Get a faster code in recursion algorithm", "body": "<p>I am learning about recursion in C.\nMy problem is: Print 80 first Fibonacci numbers (using recursion)</p>\n\n<p>Here is the book's code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nlong long f[100];\n\nlong long fib(int n)\n{\n    if (n&lt;2) return 1;\n    if (f[n]&gt;0) return f[n];\n    f[n] = fib(n-1)+fib(n-2);       \n    return f[n];\n}\nint main()\n{\n    int i;\n    for (i = 0; i&lt;= 80; i++) printf (\"%lld \\n\", fib(i));\n    system (\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>With this code, my program runs very fast and I immediately get 80 Fibonacci numbers.</p>\n\n<p>However, when I delete the 10th line: </p>\n\n<pre><code>if (f[n] &gt; 0) return f[n];\n</code></pre>\n\n<p>The program becomes very slow and it takes about 20 seconds to print all 80 numbers.\nCan anyone explain why? Thank you.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1420650960, "post_id": 27824821, "comment_id": 44055523, "body": "An <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> will be helpful here."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1420651894, "post_id": 27824821, "comment_id": 44056081, "body": "You have posted a member function definition that takes 2 parameters and a call that provides 1 argument to member function. So probably you have some other &quot;update&quot; somewhere declared that takes 1 parameter (that is int)."}, {"owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "edited": false, "score": 0, "creation_date": 1420652444, "post_id": 27824821, "comment_id": 44056382, "body": "I would have thought that this is the function that is being used- since if I right click on the <code>update()</code> function that has <code>fpETA</code> as the parameter that it&#39;s being given, and click &#39;Go To Definition&#39; that is the function definition that it takes me to... (I&#39;m using Visual Studio 2008 as my IDE by the way). I did wonder about that (only using one parameter when there are two in the definition) myself... I can see that in the same .cpp file as that function definition, there is another &#39;empty&#39; definition: <code>void update(void){};</code> - could it be that this is the one being used, and overladed?"}, {"owner": {"reputation": 1826, "user_id": 3209308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93292fb1163754198282b1141791f84a?s=128&d=identicon&r=PG&f=1", "display_name": "ap-osd", "link": "https://stackoverflow.com/users/3209308/ap-osd"}, "edited": false, "score": 0, "creation_date": 1420652818, "post_id": 27824821, "comment_id": 44056586, "body": "Don&#39;t always rely on the IDE&#39;s &#39;Go To Definition&#39;. Use it only as a hint. There are many cases when the IDE gets it wrong, especially when there are multiple functions with the same name."}, {"owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "edited": false, "score": 0, "creation_date": 1420653764, "post_id": 27824821, "comment_id": 44057155, "body": "I did have a look in the drop down list of functions for that source file, but there was only the one <code>update()</code> function there..."}], "answers": [{"comments": [{"owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "edited": false, "score": 0, "creation_date": 1420653613, "post_id": 27825223, "comment_id": 44057077, "body": "No- as mentioned in my OP, in the original <code>pFlightPlanETAReadout-&gt;update(fpETA);</code> the paramater is of the same type as the one I&#39;m trying to pass to the function, i.e. <code>DateTimeAndZone</code>... I can&#39;t see an overloaded function anywhere, and if I right click the function call, and click &#39;Go To Defintion&#39;, that is the one that it takes me to..."}], "tags": [], "owner": {"reputation": 1826, "user_id": 3209308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93292fb1163754198282b1141791f84a?s=128&d=identicon&r=PG&f=1", "display_name": "ap-osd", "link": "https://stackoverflow.com/users/3209308/ap-osd"}, "is_accepted": false, "score": 1, "last_activity_date": 1420652560, "last_edit_date": 1420652560, "creation_date": 1420652170, "answer_id": 27825223, "question_id": 27824821, "link": "https://stackoverflow.com/questions/27824821/c-compile-error-cannot-convert-parameter-1-from-datetimeandzone-to-const-i/27825223#27825223", "title": "c++ compile error: cannot convert parameter 1 from &#39;DateTimeAndZone&#39; to &#39;const int&#39;", "body": "<p>Unless I am missing something... this is basic C++. \nAs you have mentioned the function <code>pFlightPlanTTGReadout-&gt;update</code> takes an <code>int</code> parameter and you are passing something that is NOT an <code>int</code> and cannot be implicitly converted to an <code>int</code>.</p>\n\n<p>In the original <code>pFlightPlanETAReadout-&gt;update(fpETA)</code> is the function parameter also an <code>int</code>?\nIf it is, </p>\n\n<ul>\n<li>the one possibility is that <code>DateTimeAndZone</code> in the original code has a conversion operator from <code>DateTimeAndZone</code> to <code>int</code>. </li>\n<li>the other possibility is that the original code has an overloaded <code>update</code> function that takes <code>DateTimeAndZone</code> as the parameter.</li>\n</ul>\n"}], "owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420656297, "creation_date": 1420650777, "last_edit_date": 1420656297, "question_id": 27824821, "link": "https://stackoverflow.com/questions/27824821/c-compile-error-cannot-convert-parameter-1-from-datetimeandzone-to-const-i", "title": "c++ compile error: cannot convert parameter 1 from &#39;DateTimeAndZone&#39; to &#39;const int&#39;", "body": "<p>I am working on some simulation software in which I have an entity that is moving toward a particular locatin on a 2D map. While the entity is moving toward to location, I am trying to display some information about its movement- such as how long it will take to get there (TimeToGo- or TTG), its ETA, and the remaining distance that it has to travel (DistanceToGo or DTG).</p>\n\n<p>I have the following function in my <code>DisplayTime.cpp</code> source file:</p>\n\n<pre><code>void TimeReadout::update(const TPEquipmentTime::DateTimeAndZone&amp; dateTimeAndZone_, const bool convertToSavedZone_)\n{\n  ...\n}\n</code></pre>\n\n<p>This function is used to update the value displayed on the GUI for the ETA of the entity at the location. I know that the function works correctly, as it is used in several places in the program and does what's expected in those places.</p>\n\n<p>I am now trying to reuse that function (copy &amp; paste) to update the TTG value</p>\n\n<p>I am now trying to use the function in another source file: <code>Dialogue.cpp</code> in the following way:</p>\n\n<pre><code>pFlightPlanTTGReadout-&gt;update(fpTTG);\n</code></pre>\n\n<p>The variable <code>fpTTG</code> is of type <code>TPEquipmentTime::DateTimeAndZone</code>, and the <code>update()</code> function states takes a variable of type <code>const int</code>. </p>\n\n<p>When I try to compile, I get the expected error:</p>\n\n<blockquote>\n  <p>'update' : cannot convert parameter 1 from 'Time_Value' to 'const int'</p>\n</blockquote>\n\n<p>However, when I look at the function that I have copied this bit of code from- it has done exactly what I'm trying to do with a (different) parameter, of the same type, i.e.</p>\n\n<pre><code>pFlightPlanETAReadout-&gt;update(fpETA);\n</code></pre>\n\n<p>where <code>fpETA</code> is a variable of type <code>TPEquipmentTime::DateTimeAndZone</code></p>\n\n<p>What am I missing here? Why is it that this works in the original function, but not in the function that I am writing, even though I am (trying to at least) doing the same thing, just with a different variable?</p>\n\n<p><strong>EDIT 07/01/2015 @ 18:45</strong>\nI have just noticed a difference between the <code>update()</code> function call that I'm trying to use in my function, and the one used in the original function:</p>\n\n<p>In the original:</p>\n\n<pre><code>pFlightPlanETAReadout-&gt;update(fpETA);\n</code></pre>\n\n<p>If I hover the cursor over <code>update</code>, two functions are displayed in the little dialogue box:</p>\n\n<pre><code>virutal void TimeReadout::update(void)\n\nvirtual void TimeReadout::update(const TPEquipmentTime::DateTimeAndZone &amp; dateTimeAndZone_, const bool convertToSavedZone_ = true)\n</code></pre>\n\n<p>Whereas in my function:</p>\n\n<pre><code>pFlightPlanTTGReadout-&gt;update(fpTTG);\n</code></pre>\n\n<p>If I hover the cursor over 'update', the dialogue box just displays one function:</p>\n\n<pre><code>void ElapsedTimeReadout::update(const int total_seconds_)\n</code></pre>\n"}, {"tags": ["c++", "opencv", "ubuntu", "qt-creator"], "answers": [{"tags": [], "owner": {"reputation": 3691, "user_id": 4129852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gIrqQ.jpg?s=128&g=1", "display_name": "Iuliu", "link": "https://stackoverflow.com/users/4129852/iuliu"}, "is_accepted": true, "score": 5, "last_activity_date": 1420650557, "creation_date": 1420650557, "answer_id": 27824750, "question_id": 27824662, "link": "https://stackoverflow.com/questions/27824662/qt-creator-ubuntu-version-weird-compiler-error/27824750#27824750", "title": "Qt Creator Ubuntu version weird compiler error", "body": "<p>Try</p>\n\n<pre><code>cv::Mat ImagesUtility::makeCanvas(std::vector&lt;cv::Mat&gt; vecMat, int windowHeight, int nRows)\n{\n\n    return canvasImage;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 756337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beccb36f5550ec07cc3144d2ee97b818?s=128&d=identicon&r=PG", "display_name": "Mostafa", "link": "https://stackoverflow.com/users/756337/mostafa"}, "is_accepted": false, "score": 1, "last_activity_date": 1420663554, "creation_date": 1420663554, "answer_id": 27828339, "question_id": 27824662, "link": "https://stackoverflow.com/questions/27824662/qt-creator-ubuntu-version-weird-compiler-error/27828339#27828339", "title": "Qt Creator Ubuntu version weird compiler error", "body": "<p>I ran into the same problem last week. You should add <code>ImagesUtility::</code> to the <code>makeCanvas</code> method in your cpp file.</p>\n"}], "owner": {"reputation": 2757, "user_id": 818663, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5593d77e46f458308087a5aa890ec24e?s=128&d=identicon&r=PG", "display_name": "Maystro", "link": "https://stackoverflow.com/users/818663/maystro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 27824750, "answer_count": 2, "score": 0, "last_activity_date": 1420663554, "creation_date": 1420650245, "last_edit_date": 1420651375, "question_id": 27824662, "link": "https://stackoverflow.com/questions/27824662/qt-creator-ubuntu-version-weird-compiler-error", "title": "Qt Creator Ubuntu version weird compiler error", "body": "<p>I'm just trying to test some methods in <code>OpenCV</code> using <code>Qt</code> in Ubuntu version and I'm running into some compilers problems where I'm stuck.</p>\n\n<pre><code>Mat imageSpecularReflectorRemoved ,edgesImage;\nMat img_object = imread(patternImageName);\nremoveSpecuralReflector(img_object,imageSpecularReflectorRemoved);\napplyLaplacian(img_object, edgesImage);\n\nstd::vector &lt;cv::Mat&gt; listOfImagesToDisplay;\nlistOfImagesToDisplay.push_back(img_object);\nlistOfImagesToDisplay.push_back(imageSpecularReflectorRemoved);\nlistOfImagesToDisplay.push_back(edgesImage);\nImagesUtility imgUtil;\ncv::Mat fullImage = imgUtil.makeCanvas(listOfImagesToDisplay,400,1);\n</code></pre>\n\n<p>Here the is the interface file of the ImagesUtility class (.h file)</p>\n\n<pre><code> class ImagesUtility\n    {\n    public:\n        ImagesUtility();\n        cv::Mat makeCanvas(std::vector&lt;cv::Mat&gt; vecMat, int windowHeight, int nRows);\n    };\n</code></pre>\n\n<p>Here is the cpp file of the ImagesUtility class</p>\n\n<pre><code>ImagesUtility::ImagesUtility()\n{\n\n}\n\ncv::Mat makeCanvas(std::vector&lt;cv::Mat&gt; vecMat, int windowHeight, int nRows)\n{\n\n    return canvasImage;\n}\n</code></pre>\n\n<p>The compiler error is:\n<img src=\"https://i.stack.imgur.com/1uKz1.png\" alt=\"enter image description here\"></p>\n\n<p>Any idea what's going on here?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "boost", "debian", "boost-asio", "keypad"], "comments": [{"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1420650518, "post_id": 27824573, "comment_id": 44055244, "body": "I could open the device, get a file descriptor, then use that in asio I think"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 2, "creation_date": 1420658906, "post_id": 27824573, "comment_id": 44060033, "body": "<code>Boost.Asio</code> provides modern C++ interfaces, but in its implementation it uses plain C (or OS) functions. So, first of all, it&#39;s worth understanding why the above <code>read</code> doesn&#39;t work. What behavior do you observe?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1420659281, "post_id": 27824573, "comment_id": 44060245, "body": "Highly relevant: consider using a library instead of going to the raw device: <a href=\"http://stackoverflow.com/a/25559167/85371\">stackoverflow.com/a/25559167/85371</a>"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1420659498, "post_id": 27824573, "comment_id": 44060362, "body": "@IgorR. I cannot open the device this way: serial_port port (io, &quot;/dev/usb/hiddev0&quot;); I think I should use stream_descriptor"}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1420663546, "post_id": 27827955, "comment_id": 44062558, "body": "You should probably not accept it as &quot;the solution&quot; until you tried it :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1420670101, "post_id": 27827955, "comment_id": 44065725, "body": "I&#39;ve updated to actually decode the events, printing friendly &#181;s timestamps and event batches. <i>(This is a poster-child for how Asio transparently uses a vector of POD structs as a write buffer.)</i>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1420729075, "post_id": 27827955, "comment_id": 44089719, "body": "Possibly date_time. (You could contrast with the <a href=\"http://stackoverflow.com/revisions/27827955/1\">first version</a> perhaps)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1420730009, "post_id": 27827955, "comment_id": 44090305, "body": "Looks like all the include dirs are redundant <code>&#47;usr&#47;include&#47;</code> is on it. So <code>g++ -x c++ -std=c++11 -g -Wall -m32 -c asio_event_reader.cc -o asio_event_reader.o</code> makes more sense typically."}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1464663524, "post_id": 27827955, "comment_id": 62562295, "body": "hello sir; I have gotten your code to work; can you explain how your <code>handle_input</code> function works please?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1464711581, "post_id": 27827955, "comment_id": 62590294, "body": "@xinthose The loop just loops through the <code>events</code> vector. The <code>events | sliced(0,n)</code> expression takes the first <code>n</code> elements (namely, the number of events transferred). You could write this as the more traditional for loop <code>for (size_t i = 0; i &lt; n; ++i) { auto&amp; ev = events[i]; }</code>"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1464832991, "post_id": 27827955, "comment_id": 62649711, "body": "oh I see; and the <code>auto</code> gives <code>ev</code> the <code>input_event</code> type; thank you"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1467834908, "post_id": 27827955, "comment_id": 63886965, "body": "why do you resize the input event vector to 32?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1467834984, "post_id": 27827955, "comment_id": 63887002, "body": "@xinthose just seemed like a reasonable batch of events to receive in one go, at most"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1467836931, "post_id": 27827955, "comment_id": 63888027, "body": "how do I convert <code>ev.code</code> to ASCII?  the codes for me do not match the ASCII table"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 1, "creation_date": 1467837779, "post_id": 27827955, "comment_id": 63888480, "body": "@xinthose The hardware scancodes are mapped to ASCII by what is known as &quot;keyboard layout&quot;. Look at the source of evtest to find out how you could do it. Here&#39;s output showing me pressing-releasing <code>abc&lt;Left-Ctrl&gt;</code>: <a href=\"http://paste.ubuntu.com/18657502/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/18657502</a>"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1482362630, "post_id": 27827955, "comment_id": 69748598, "body": "Hello again.  I am trying to use <code>boost::asio::async_read_until</code> with a delimiter of <code>\\x0D</code> (new line).  But I get lots of binary returns that don&#39;t make much sense.  How do you recommend I proceed?  I can post my code in a new question if you like."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 5, "last_activity_date": 1420670020, "last_edit_date": 1420670020, "creation_date": 1420662009, "answer_id": 27827955, "question_id": 27824573, "link": "https://stackoverflow.com/questions/27824573/boostasio-read-from-dev-input-event0/27827955#27827955", "title": "boost::asio read from /dev/input/event0", "body": "<p>On my system, <code>event2</code> represents the mouse, and the following simple <code>readloop</code> program works like a charm.</p>\n\n<p><strong>Run as root</strong>:</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/posix/stream_descriptor.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n\n#include &lt;iostream&gt;      // for debug output\n#include &lt;iomanip&gt;\n\n#include &lt;linux/input.h&gt; // for input_event\n#include &lt;boost/range/adaptor/sliced.hpp&gt;\n#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;\n\nusing namespace boost::asio;\n\nstruct input {\n    using error_code = boost::system::error_code;\n    using sliced = boost::adaptors::sliced;\n\n    input(const char* devspec) : svc(), sd(svc, open(devspec, O_RDONLY)) {\n        readloop(); // post work\n    }\n\n    void run() {\n        svc.run();\n    }\n\n  private:\n    io_service svc;\n    posix::stream_descriptor sd;\n\n    std::vector&lt;input_event&gt; events;\n\n    void handle_input(error_code ec, size_t bytes_transferred) {\n        if (!ec) {\n            auto const n = bytes_transferred / sizeof(input_event);\n\n            for (auto&amp; ev : events | sliced(0,n)) {\n                using namespace boost::posix_time;\n\n                ptime ts({1970,1,1}, seconds(ev.time.tv_sec) + microsec(ev.time.tv_usec));\n\n                std::cout &lt;&lt; std::dec &lt;&lt; ts.time_of_day() &lt;&lt; \"\\t\" &lt;&lt; std::hex \n                          &lt;&lt; std::hex &lt;&lt; ev.type &lt;&lt; \" \" &lt;&lt; ev.code  &lt;&lt; \" \" &lt;&lt; ev.value &lt;&lt; \"\\n\";\n            }\n\n            std::cout &lt;&lt; \"\\n\";\n\n            readloop();\n        } else {\n            std::cerr &lt;&lt; ec.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    void readloop() {\n        events.resize(32);\n        sd.async_read_some(buffer(events), boost::bind(&amp;input::handle_input, this, placeholders::error, placeholders::bytes_transferred));\n    }\n\n};\n\nint main()\n{\n    input monitor(\"/dev/input/event2\");\n    monitor.run();\n}\n</code></pre>\n\n<p>Typical output:</p>\n\n<pre><code>22:33:09.705346 2 0 ffffffff\n22:33:09.705346 2 1 1\n22:33:09.705346 0 0 0\n\n22:33:09.713412 2 0 ffffffff\n22:33:09.713412 2 1 1\n22:33:09.713412 0 0 0\n\n22:33:09.721308 2 0 ffffffff\n22:33:09.721308 0 0 0\n\n22:33:09.729328 2 0 ffffffff\n22:33:09.729328 0 0 0\n\n22:33:09.737346 2 1 1\n22:33:09.737346 0 0 0\n\n22:33:09.745328 2 0 ffffffff\n22:33:09.745328 2 1 1\n22:33:09.745328 0 0 0\n\n22:33:11.897301 4 4 90001\n22:33:11.897301 1 110 1\n22:33:11.897301 0 0 0\n\n22:33:12.065294 4 4 90001\n22:33:12.065294 1 110 0\n22:33:12.065294 0 0 0\n</code></pre>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2222, "favorite_count": 3, "accepted_answer_id": 27827955, "answer_count": 1, "score": 4, "last_activity_date": 1420670020, "creation_date": 1420649957, "last_edit_date": 1495541757, "question_id": 27824573, "link": "https://stackoverflow.com/questions/27824573/boostasio-read-from-dev-input-event0", "title": "boost::asio read from /dev/input/event0", "body": "<p>I am looking to use boost::asio to read from a 12 digit keypad.  I currently can do it without boost, this way:</p>\n\n<pre><code>fd = open (\"/dev/input/event0\", 0_NONBLOCK);\nread (fd, &amp;ev, sizeof ev);\n</code></pre>\n\n<p>Do you know how I could do this with boost::asio?  I am using Linux and c++.  This <a href=\"https://stackoverflow.com/questions/14001387/how-to-use-asio-with-device-files\">post</a> and this <a href=\"https://stackoverflow.com/questions/4686127/async-wait-on-file-descriptor-using-boost-asio\">post</a> are useful. I would not use serial port port (io, \"/dev/usb/hiddev0\") because its not serial, right?</p>\n\n<p>Thank you.   </p>\n"}, {"tags": ["c++", "exception", "exception-handling", "multiple-inheritance"], "comments": [{"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1420651015, "post_id": 27824543, "comment_id": 44055552, "body": "Why do you need so many exception classes, and why do you need ModuleOpException to derive from a 3rd party library exception class?"}], "answers": [{"comments": [{"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420652582, "post_id": 27824997, "comment_id": 44056455, "body": "So, essentially you&#39;re saying: Do not derive from the 3rd party type&quot;?"}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "reply_to_user": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420652709, "post_id": 27824997, "comment_id": 44056528, "body": "In this instance I can&#39;t see what you gain by doing so. You are using a 3rd party library, they are not using your code and nobody is catching their exception types here other than you."}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420652723, "post_id": 27824997, "comment_id": 44056538, "body": "Thinking about it, <i>not</i> deriving from the 3rd party at all, probably <i>is</i> the best solution. Thanks."}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 0, "creation_date": 1420652810, "post_id": 27824997, "comment_id": 44056584, "body": "And while I&#39;m at it, and since you wrote &quot;... to handle them in a different manner. (My opinion is that this is a bad idea ...&quot; you might like <a href=\"http://stackoverflow.com/a/27825133/321013\">this</a> totally unrelated piece :-)"}], "tags": [], "owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "is_accepted": true, "score": 1, "last_activity_date": 1420651361, "creation_date": 1420651361, "answer_id": 27824997, "question_id": 27824543, "link": "https://stackoverflow.com/questions/27824543/introduce-an-additional-base-type-in-an-exception-hierarchy-in-c/27824997#27824997", "title": "Introduce an additional base type in an exception hierarchy in C++?", "body": "<p>The try...catch should happen at a place where the exception is going to be properly handled, or if an exception will be modified at this point and rethrown.</p>\n\n<p>The purpose of using different exception classes is to handle them in a different manner. (My opinion is that this is a bad idea, switching on some kind of code would be better, and you are likely to change your action based on the type only in rare circumstances, like retrying a request if the error is transient).</p>\n\n<p>In any case, the 3rd party library, I assume, is used to help implement your own libraries. The users of your libraries do not want to know about exceptions from the library you are using to implement.</p>\n\n<p>Therefore you should abstract this from the user of your libraries by catching any of them and re-throwing them as your own, in a way the user would expect.</p>\n\n<p>Exceptions thrown from your library are as much a part of the \"contract\" as return values from your functions.</p>\n\n<p>Thus the users would expect to potentially catch a ModuleBaseException or a ModuleOpException but not an ns3p::OperationException.</p>\n\n<p>Your own code should catch them, probably convert them to your ModuleOpException type and throw that instead.</p>\n"}, {"comments": [{"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1420652790, "post_id": 27825409, "comment_id": 44056571, "body": "On a syntax level or whatever it will work. However in this instance I think the user is getting a bit confused about the hierarchy and what is catching what exception"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1420652718, "creation_date": 1420652718, "answer_id": 27825409, "question_id": 27824543, "link": "https://stackoverflow.com/questions/27824543/introduce-an-additional-base-type-in-an-exception-hierarchy-in-c/27825409#27825409", "title": "Introduce an additional base type in an exception hierarchy in C++?", "body": "<p>IMHO it should work. C++ specification says :</p>\n\n<p><em>A handler is a match for an exception object of type E if ... the handler is of type cv T or cv T&amp; and T is an unambiguous public base class of E or ...</em></p>\n\n<p>and <em>The handlers for a try block are tried in order of appearance.</em></p>\n\n<p>So as long as you catch <code>ModuleBaseException</code> before <code>ns3p::OperationException</code> any exception deriving from <code>ModuleBaseException</code> should be caught in correct handler even if it also derives from <code>ns3p::OperationException</code>.</p>\n\n<p>The only problem is that all methods and fields from std::exception will be duplicated in your exception classes and you should always qualify them as coming from ModuleBaseException to avoid ambiguities. You should probably use a common utility to process the exception that would be used in all the handlers.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1420659447, "creation_date": 1420659447, "answer_id": 27827284, "question_id": 27824543, "link": "https://stackoverflow.com/questions/27824543/introduce-an-additional-base-type-in-an-exception-hierarchy-in-c/27827284#27827284", "title": "Introduce an additional base type in an exception hierarchy in C++?", "body": "<p>When deriving from an existing exception hierarchy you have multiple inheritance (one for your own and one for the existing hierarchy). To avoid ambiguity you can pass and keep a pointer to the existing hierarchy:</p>\n\n<pre><code>#include &lt;stdexcept&gt;\n#include &lt;sstream&gt;\n\n// Error\n//=============================================================================\n\n/// Base class for all exceptions in a library.\n/// \\NOTE The constructor requires a std::exception as argument\nclass Error\n{\n    // Construction\n    // ============\n\n    public:\n    virtual ~Error() noexcept {};\n\n    protected:\n    Error(std::exception&amp; exception)\n    :   m_exception(&amp;exception)\n    {}\n\n\n    // Element Access\n    // ==============\n\n    public:\n    const char* msg() const { return m_exception-&gt;what(); }\n\n    // Cast\n    // ====\n\n    protected:\n    template &lt;typename Derived&gt;\n    static std::exception&amp; cast(Derived&amp; derived) {\n        return static_cast&lt;std::exception&amp;&gt;(derived);\n    }\n\n    private:\n    std::exception* m_exception;\n};\n\n\n// Runtime Errors\n// ============================================================================\n\n/// A Runtime Error.\nclass ErrorRuntime : public std::runtime_error, public Error\n{\n    public:\n    explicit ErrorRuntime(const std::string&amp; msg)\n    :   std::runtime_error(msg), Error(cast(*this))\n    {}\n};\n\n// Test\n// ====\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    try {\n        throw ErrorRuntime(\"Hello Exception\");\n    }\n    catch(const std::exception&amp; e) {\n        try {\n            std::cerr &lt;&lt; \"std::exception: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n            throw;\n        }\n        catch(const Error&amp; e) {\n            try {\n                // No what here\n                std::cerr &lt;&lt; \"Error: \" &lt;&lt; e.msg() &lt;&lt; \"\\n\";\n                throw;\n            }\n            catch(const ErrorRuntime&amp; e) {\n                std::cerr &lt;&lt; \"ErrorRuntime: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>However, if you have a third party library, you might hide all exceptions of that library (as mentioned by other). The costs of hiding are two layers for incoming and outgoing exceptions. </p>\n"}], "owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 27824997, "answer_count": 3, "score": 0, "last_activity_date": 1420659447, "creation_date": 1420649866, "last_edit_date": 1495535169, "question_id": 27824543, "link": "https://stackoverflow.com/questions/27824543/introduce-an-additional-base-type-in-an-exception-hierarchy-in-c", "title": "Introduce an additional base type in an exception hierarchy in C++?", "body": "<p>We have a base situation that looks as as follows:</p>\n\n<pre><code>// 3rd party lib:\n\nnamespace ns3p {\n  class OperationException : public std::exception; // yes, no `virtual` here\n}\n\n// our code:\n\n// wrapper with additional information to the ns3p::OperationException\nclass ModuleOpException : public ns3p::OperationException;\n\n// our catch sites:\n// mostly:\ncatch (ModuleOpException const&amp; ex) { ...\n// but sometimes:\ncatch (ns3p::OperationException const&amp; ex) { ...\n</code></pre>\n\n<p>Now, this grew to include additional exceptions, all derived from the <code>ModuleOpException</code> that <em>do not</em> have anything to do with any error from the 3rd party lib, but are just thrown in the same context where stuff from the 3rd party lib is used.</p>\n\n<pre><code>// This indirectly derives from ns3p::OperationException, even though \n// there is *no* underlying OperationException at all. It just thrown \"stand alone\"\n// and caught by ModuleOpException&amp; :\nclass InvalidXYZException : public ModuleOpExcpetion;\n</code></pre>\n\n<p>We have now thought about \"inverting\" the hierarchy to better reflect the actual situation and do so with (initially) minimal impact on other code.</p>\n\n<p>We plan to do this:</p>\n\n<pre><code>// new base exception type:\nclass ModuleBaseException : public virtual std::exception;\n\n// changed to derive both from our base type as well as the 3rd party type:\nclass ModuleOpException : public virtual ModuleBaseException, public virtual ns3p::OperationException;\n\n// only derives from the base type:\nclass InvalidXYZException : public virtual ModuleBaseException;\n\n// all catch sites change the catch of `ModuleOpException` to:\ncatch (ModuleBaseException const&amp; ex) { ...\n// and leave the catch ns3p::OperationException alone\n</code></pre>\n\n<p><strong>This should work (should it?)</strong>, except that I'm not sure how much the non-virtual inheritance from <code>std::exception</code> of the 3rd part exception type can mess things up. I <em>think</em> we're safe <a href=\"https://stackoverflow.com/a/1605852/321013\">as long as noone tries to <code>catch(std::exception const&amp;)</code> in which case the catch would fail</a> to bind at runtime because the conversion is ambiguous.</p>\n\n<p>Does this seem like a viable solution? Or is it a \"really bad idea\" to try to integrate a <code>non-virtual-std::exception</code> type with a hierarchy like above?</p>\n\n<p><sub>Note: There is zero chance (as in <code>0.00%</code>) that we can ever change the 3rd party lib to derive \"properly\" with <code>virtual</code> from std::exception.</sub></p>\n\n<hr>\n\n<ul>\n<li>Of course, if any <code>catch(ns3p::OperationException&amp;)</code> in the previous version \"accidentally\" caught an <code>InvalidXYZExecption</code> this will break now, but that'd be acceptable.</li>\n</ul>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1420649952, "post_id": 27824527, "comment_id": 44054913, "body": "<b>Books:</b> <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 4938, "user_id": 2538473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uQJ0p.png?s=128&g=1", "display_name": "Hacketo", "link": "https://stackoverflow.com/users/2538473/hacketo"}, "edited": false, "score": 0, "creation_date": 1420649959, "post_id": 27824527, "comment_id": 44054922, "body": "you should use a function to initialize the properties instead of directly doing it in the constructor"}, {"owner": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420650844, "post_id": 27824527, "comment_id": 44055445, "body": "This has already been addressed here - <a href=\"http://stackoverflow.com/questions/14402097/calling-class-constructor-in-member-function-c-solved\" title=\"calling class constructor in member function c solved\">stackoverflow.com/questions/14402097/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 1, "last_activity_date": 1420649976, "creation_date": 1420649976, "answer_id": 27824577, "question_id": 27824527, "link": "https://stackoverflow.com/questions/27824527/call-constructor-to-initialize-variables/27824577#27824577", "title": "Call constructor to initialize variables", "body": "<p>You should not call your constructor after the object has been created. Put the functionality into a protected <code>reset()</code> function that is called from both your constructor and the <code>setup</code> function.</p>\n\n<p><strong>Background:</strong> Your call to <code>foo()</code> in <code>setup</code> does not reinitialize the object, but create a second local object that is never used. In general, you should refrain from explicitly calling constructors unless you absolutely know what you're doing.</p>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 4195568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/w7Ogb.jpg?s=128&g=1", "display_name": "Ying Xiong", "link": "https://stackoverflow.com/users/4195568/ying-xiong"}, "is_accepted": true, "score": 4, "last_activity_date": 1420650046, "creation_date": 1420650046, "answer_id": 27824601, "question_id": 27824527, "link": "https://stackoverflow.com/questions/27824527/call-constructor-to-initialize-variables/27824601#27824601", "title": "Call constructor to initialize variables", "body": "<p>In C++, constructor is only called once when the object is constructed, and not anymore in your class method. In your code</p>\n\n<pre><code>void foo::setup(int x, int y) {\n    foo();  // ==&gt; this line\n}\n</code></pre>\n\n<p>A temporary foo object will be created, which is independent of the current <code>this</code> object, and therefore the <code>a</code>, <code>b</code> and <code>c</code> fields of <code>this</code> object will be unchanged.</p>\n\n<p>In order to do what you have in mind, create a <em>class method</em>, say <code>foo::reset()</code>, and call it from inside <code>foo::setup()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 1, "last_activity_date": 1420650325, "creation_date": 1420650325, "answer_id": 27824688, "question_id": 27824527, "link": "https://stackoverflow.com/questions/27824527/call-constructor-to-initialize-variables/27824688#27824688", "title": "Call constructor to initialize variables", "body": "<pre><code>foo();    // &lt;-- I use this to make sure a,b,c are initialized\n</code></pre>\n\n<p>Unfortunately, it doesn't do that. It creates and destroys a temporary object. You can't call a constructor directly; they are only used to initialise objects at the start of their lifetime.</p>\n\n<p>You could reassign your object with a freshly initialised one:</p>\n\n<pre><code>*this = foo();\n</code></pre>\n\n<p>or you could move the body of the constructor into a <code>reset</code> function, and call that whenever you want to restore the initial state.</p>\n\n<p>My preferred option would be use separate objects rather than trying to reuse a modified one, and to perform all the \"setup\" when initialising each object:</p>\n\n<pre><code>foo a(1,2);\na.some_function_that_changes_a_b_c();\nfoo b(5,7);  // known to be in a freshly initialised state\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 0, "last_activity_date": 1420650396, "creation_date": 1420650396, "answer_id": 27824707, "question_id": 27824527, "link": "https://stackoverflow.com/questions/27824527/call-constructor-to-initialize-variables/27824707#27824707", "title": "Call constructor to initialize variables", "body": "<p>What you are attempting to do is two-stage initialization.  This is unnecessary and clumsy in C++.  You need to realize two things</p>\n\n<ol>\n<li><p>The constructor is called at the point of object creation</p></li>\n<li><p>If you have an object to say <code>f.setup(1, 2, 3);</code> on, that means the constructor must have run already.</p></li>\n</ol>\n\n<p>now:</p>\n\n<pre><code>foo f; // calls foo() with f\nf.setup(1, 2, 3); // foo() has arleady been called\n</code></pre>\n\n<p>as Ying Xiong has pointed out, the <code>foo()</code> line creates a temporary object unrelated to the <code>this</code> you are working with.</p>\n\n<p>Rather than two stage initialization (constructor, then initializer) you can have your constructor take variables and do the initialization</p>\n\n<pre><code>class foo {\n  private:\n   int      a,b,c;\n  public:\n   foo(int x, int y, int z);     // constructor\n};\n\nfoo::foo(int x, int y, int z)\n   : a(x),\n   b(y),\n   c(z)\n{ }\n</code></pre>\n\n<p>and then instead construct with the values you want</p>\n\n<pre><code>foo f(1, 2, 3);\n</code></pre>\n\n<p>if you need to \"reset\" the values each time <code>setup</code> is called, then you're best to use a <code>reset</code> function, or similar.  Trying to call a constructor on yourself is possible but not very healthy.</p>\n\n<pre><code>void foo::reset() {\n    a = b = c = 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 1995086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46dd7326f28efd99e13eb0a3e1b63259?s=128&d=identicon&r=PG", "display_name": "Miki Berkovich", "link": "https://stackoverflow.com/users/1995086/miki-berkovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2630, "favorite_count": 0, "accepted_answer_id": 27824601, "answer_count": 4, "score": 0, "last_activity_date": 1420650467, "creation_date": 1420649834, "last_edit_date": 1420650467, "question_id": 27824527, "link": "https://stackoverflow.com/questions/27824527/call-constructor-to-initialize-variables", "title": "Call constructor to initialize variables", "body": "<p>I have the following class definition in C++ :</p>\n\n<pre><code>class foo {\nprivate:\n   int      a,b,c;\n\n   foo();     // constructor\n   void     setup(int x, int y);\n   void     some_function_that_changes_a_b_c();\n}\n\n\nfoo::foo() {\n   a = b = c = 0;\n}\n\nvoid foo::setup(int x, int y) {\n    foo();    // &lt;-- I use this to make sure a,b,c are initialized\n    a = x;\n    b = y;    // &lt;-- c is left unchanged!\n}\n\nvoid foo::some_function_that_changes_a_b_c() {\n    // here's some code that changes variables a,b,c\n}\n</code></pre>\n\n<p>And then I have a code that uses this class:</p>\n\n<pre><code>foo  *a = new foo;\na-&gt;setup(1,2);\na-&gt;some_function_that_changes_a_b_c();\na-&gt;setup(5,7);   // &lt;-- HERE IS THE PROBLEM\n</code></pre>\n\n<p>The problem is that on the second call to setup(), it doesnt run the foo() constructor to reset my values or a,b,c , so the c variable stays with the old value it was on the call to some_function_that_changes_a_b_c(), I tested this with the debugger and it seems like on the second call, foo() is addressing a different memory space for the variables.</p>\n\n<p>Is there a way to fix this?</p>\n"}, {"tags": ["c++", "arrays", "2d", "cin"], "comments": [{"owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 3, "creation_date": 1420649672, "post_id": 27824423, "comment_id": 44054755, "body": "maybe not make it a <code>const string astrDice[6][4]</code> , instead <code>string astrDice[6][4]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4429700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxbAz.png?s=128&g=1", "display_name": "AmpMunkey", "link": "https://stackoverflow.com/users/4429700/ampmunkey"}, "edited": false, "score": 0, "creation_date": 1420650420, "post_id": 27824464, "comment_id": 44055174, "body": "thank you. that fixed it. i did that earlier in attempt to make something else work and completely forgot about it! works now!"}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": true, "score": 3, "last_activity_date": 1420649998, "last_edit_date": 1420649998, "creation_date": 1420649630, "answer_id": 27824464, "question_id": 27824423, "link": "https://stackoverflow.com/questions/27824423/using-cin-to-change-a-2d-string-array-value/27824464#27824464", "title": "using cin to change a 2d string array value", "body": "<p>Look at this line : <code>const string astrDice[6][4]</code></p>\n\n<p>astrDice is const, you can't modify it!</p>\n\n<p>The compiler should say something like <code>error: passing 'const string' as 'this' argument of 'something' discards qualifier</code>. When you see a message like this, it usually means that you have constness issues.</p>\n\n<p><code>No Viable Overloaded \"=\"</code> is not the best error message ever. It's trying to say that std::string doesn't have a const operator=(). Well, duh.</p>\n\n<p>It's important to try to understand the error messages, even if they are a bit stupid sometimes. You'll save a lot of time.</p>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 2, "last_activity_date": 1420649704, "creation_date": 1420649704, "answer_id": 27824484, "question_id": 27824423, "link": "https://stackoverflow.com/questions/27824423/using-cin-to-change-a-2d-string-array-value/27824484#27824484", "title": "using cin to change a 2d string array value", "body": "<p>Your array is <code>const</code>, meaning that you can't modify it after it's been initialized. Remove the <code>const</code> qualifier and your code should work.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4429700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxbAz.png?s=128&g=1", "display_name": "AmpMunkey", "link": "https://stackoverflow.com/users/4429700/ampmunkey"}, "edited": false, "score": 0, "creation_date": 1420650780, "post_id": 27824687, "comment_id": 44055408, "body": "im not sure what a vector is yet, again i am still learning. i have an if statement in the code to protect against that. ill look into that once i learn about vectors."}, {"owner": {"reputation": 1221, "user_id": 2696576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DpU7e.jpg?s=128&g=1", "display_name": "Abhishek Gupta", "link": "https://stackoverflow.com/users/2696576/abhishek-gupta"}, "edited": false, "score": 0, "creation_date": 1420650829, "post_id": 27824687, "comment_id": 44055434, "body": "and using <code>std::vector</code> and <code>.at()</code> gives you Strong guarantee, It throws <a href=\"http://www.cplusplus.com/reference/stdexcept/out_of_range/\" rel=\"nofollow noreferrer\">out_of_range</a> if is accessed out of bounds"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 11, "user_id": 4429700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxbAz.png?s=128&g=1", "display_name": "AmpMunkey", "link": "https://stackoverflow.com/users/4429700/ampmunkey"}, "edited": false, "score": 0, "creation_date": 1420650967, "post_id": 27824687, "comment_id": 44055531, "body": "@AmpMunkey when you learn about c++ stl types you will try to never use a c-style array again. They are so much better. <code>.at()</code> will throw an exception if the array bounds are violated."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 2, "last_activity_date": 1420650315, "creation_date": 1420650315, "answer_id": 27824687, "question_id": 27824423, "link": "https://stackoverflow.com/questions/27824423/using-cin-to-change-a-2d-string-array-value/27824687#27824687", "title": "using cin to change a 2d string array value", "body": "<p>Because of the <code>const</code> qualifier here <code>const string astrDice[6][4]</code> you will be unable to edit this array. Yes you can change the element to <code>string astrDice[6][4]</code> but is that really a good solution? </p>\n\n<p>Lets take a lok at this line: </p>\n\n<pre><code>cout &lt;&lt; \"Choose Side (1-6):\";\n   int nSideChoice = 0;\n   cin &gt;&gt; nSideChoice;\n</code></pre>\n\n<p>what if the user puts a side choice of 7? Then here: <code>astrDice[nSideChoice][nSlotChoice] = strNewSlot;</code> you are going to have serious memory issues. Consider using a <code>std::vector</code> for this:</p>\n\n<pre><code>vector&lt;vector&lt;string&gt;&gt; astrDice =\n{\n    {\"M1\" , \"DM\" , \"AT\" , \"BK\"},\n    {\"M2\" , \"DM\" , \"BK\" , \"BK\"},\n    {\"M3\" , \"DM\" , \"BK\" , \"BK\"},\n    {\"M4\" , \"BK\" , \"AT\" , \"BK\"},\n    {\"M5\" , \"BK\" , \"AT\" , \"BK\"},\n    {\"M6\" , \"BK\" , \"AT\" , \"BN\"}\n};\n\n   cout &lt;&lt; \"Choose Side (1-6):\";\n       int nSideChoice = 0;\n       cin &gt;&gt; nSideChoice;\n   cout &lt;&lt; \"Choose a Slot (1-4):\";\n       int nSlotChoice = 0;\n       cin &gt;&gt; nSlotChoice;\n   cout &lt;&lt; \"Enter a New Value:\";\n       string strNewSlot;\n       cin &gt;&gt; strNewSlot;\n\n   astrDice.at(nSideChoice).at(nSlotChoice) = strNewSlot;\n</code></pre>\n\n<p>This way you will be protected against out of bounds array problems. </p>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 3324588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72881f7bd0572a89e70eff2546beb5ed?s=128&d=identicon&r=PG&f=1", "display_name": "danbo", "link": "https://stackoverflow.com/users/3324588/danbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1420658086, "creation_date": 1420658086, "answer_id": 27826921, "question_id": 27824423, "link": "https://stackoverflow.com/questions/27824423/using-cin-to-change-a-2d-string-array-value/27826921#27826921", "title": "using cin to change a 2d string array value", "body": "<p>O_o\nWoah ... indeed</p>\n\n<p>Define constraint to write program or body function ... </p>\n\n<p>-> You are asking user to enter numerical value ( signed value of architecture bit : example 32bit )\n-> That's not what you are asking for your code that require ranged value between 1-6 and later 1-4\n-> You compute yourself the matrix dimension of your array ( is that a matrix or a vector of vector )\n---> vector of vector don't add constraint on lenght of each vector, matrix add it\n---> whenever you aren't sure, use slicer , simplicity over complexity\n-> key adress should be handled by map container not vector</p>\n\n<p>It doesn't matter what language you are using, just be specific and handle constraint at the very beginning of coding.</p>\n\n<p>Also STD::CIN is ERROR PRONE ... it's a very basic low level mechanism to read value ( peek, get, readsome and ignore will be harmfull in many way for rookiee ) where almost in 99% you want a regex control for input. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;valarray&gt;\n\nusing namespace std;\n\nconst int IHM_MAXREAD_LOOP= 3;\nconst int BLCK_SIDE= 6;\nint main()\n{\n   valarray&lt;string&gt; astrDice=  // deserialized matrix\n            {\"M1\" , \"DM\" , \"AT\" , \"BK\"\n            ,\"M2\" , \"DM\" , \"BK\" , \"BK\"\n            ,\"M3\" , \"DM\" , \"BK\" , \"BK\"\n            ,\"M4\" , \"BK\" , \"AT\" , \"BK\"\n            ,\"M5\" , \"BK\" , \"AT\" , \"BK\"\n            ,\"M6\" , \"BK\" , \"AT\" , \"BN\"\n            };\n\n    map&lt;int,valarray&lt;string&gt; &gt; astrDice;\n    for(int i=0;i&lt;BLCK_SIDE;++i) astrDice[i]=data[slice(i, BLCK_SIDE, 1)]; // adding constraint on block size , remove constraint on index\n\n    string in1,in2, readyparse;\n    smatch match;    \n    regex re(\"[1-6] [1-4]\");\n    int maxtry;\n    for( maxtry = IHM_MAXREAD_LOOP; !regex_match(readyparse, match, re) &amp;&amp; maxtry&gt;0 ; maxtry--)\n    {\n        cout &lt;&lt; \"Choose Side (1-6):\";\n        cin &gt;&gt; in1;\n        cout &lt;&lt; \"Choose a Slot (1-4):\";\n        cin &gt;&gt; in2;\n        readyparse = in1+\" \"+in2;\n    }\n    if(maxtry&lt;=0)\n    {\n        cout &lt;&lt; \"Run only with 1 2 3 4 5 or 6 for Side and 1 2 3 or 4 for Slot \" &lt;&lt; std::endl;\n    }else {\n        cout &lt;&lt; \"Enter a New Value:\";\n        cin &gt;&gt; astrDice[atol(in1.c_str())-1][atol(in2.c_str())-1];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4429700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxbAz.png?s=128&g=1", "display_name": "AmpMunkey", "link": "https://stackoverflow.com/users/4429700/ampmunkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 27824464, "answer_count": 4, "score": 0, "last_activity_date": 1420658086, "creation_date": 1420649537, "last_edit_date": 1420650656, "question_id": 27824423, "link": "https://stackoverflow.com/questions/27824423/using-cin-to-change-a-2d-string-array-value", "title": "using cin to change a 2d string array value", "body": "<pre><code>const string astrDice[6][4]\n{\n    {\"M1\" , \"DM\" , \"AT\" , \"BK\"},\n    {\"M2\" , \"DM\" , \"BK\" , \"BK\"},\n    {\"M3\" , \"DM\" , \"BK\" , \"BK\"},\n    {\"M4\" , \"BK\" , \"AT\" , \"BK\"},\n    {\"M5\" , \"BK\" , \"AT\" , \"BK\"},\n    {\"M6\" , \"BK\" , \"AT\" , \"BN\"}\n};\n\n   cout &lt;&lt; \"Choose Side (1-6):\";\n       int nSideChoice = 0;\n       cin &gt;&gt; nSideChoice;    // will -1 later for ease of use to operator\n   cout &lt;&lt; \"Choose a Slot (1-4):\";\n       int nSlotChoice = 0;\n       cin &gt;&gt; nSlotChoice;    // will -1 later for ease of use to operator\n   cout &lt;&lt; \"Enter a New Value:\";\n       string strNewSlot;\n       cin &gt;&gt; strNewSlot;\n\n   astrDice[nSideChoice - 1][nSlotChoice - 1] = strNewSlot;\n</code></pre>\n\n<p>says \"No Viable Overloaded \"=\" on the last line. I want to use the nSideChoice and nSlotChoice to change that selection in the array. I am still learning how to do basic code, and only know bits of C++ right now. this is just a test program I have been working on, and constantly changing as I learn new things.</p>\n"}, {"tags": ["c++", "ubuntu"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1420650058, "post_id": 27824176, "comment_id": 44054971, "body": "Possible duplicate of: <a href=\"http://stackoverflow.com/questions/27816739/finding-the-absolute-path-of-the-currently-running-shared-object#comment44040148_27816739\">Finding the absolute path of the currently running shared object</a>. Have a look at the link from my comment."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1420649790, "post_id": 27824370, "comment_id": 44054815, "body": "You forgot the <code>#define _GNU_SOURCE</code> before the <code>#include &lt;dlfcn.h&gt;</code> since <code>dladdr</code> is only a GNU extension. See <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow noreferrer\">feature_test_macros(7)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/dladdr.3.html\" rel=\"nofollow noreferrer\">dladdr(3)</a>"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1420650211, "last_edit_date": 1420650211, "creation_date": 1420649360, "answer_id": 27824370, "question_id": 27824176, "link": "https://stackoverflow.com/questions/27824176/finding-the-path-of-a-called-library/27824370#27824370", "title": "Finding the path of a called library", "body": "<p>In your library code:</p>\n\n<pre><code>#ifndef _GNU_SOURCE\n#   define _GNU_SOURCE 1\n#endif _GNU_SOURCE\n#include &lt;dlfcn.h&gt;\n\n#include &lt;string&gt;\n\nstd::string my_path() {\n    Dl_info info;\n    return dladdr(reinterpret_cast&lt;void*&gt;(&amp;my_path), &amp;info) \n        ? info.dli_fname \n        : std::string()\n        ;\n}\n</code></pre>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420650211, "creation_date": 1420648751, "question_id": 27824176, "link": "https://stackoverflow.com/questions/27824176/finding-the-path-of-a-called-library", "title": "Finding the path of a called library", "body": "<p>In Ubuntu with C++, I have been given some code which creates an executable called Alpha. The code requires loading text files at runtime, and so there is a section of the code which finds the path of the executable, such that the relative directory containing these text files can be found. The executable path is determined by <code>/proc/self/exe</code>.</p>\n\n<p>Now, instead of creating the executable Alpha, I want to create a library called LibAlpha with the same code as Alpha, and then create another executable called Beta which calls LibAlpha. However, the problem with doing this using Alpha's original code, is that when <code>/proc/self/exe</code> is called, it returns the path of Beta, rather than the path of LibAlpha. How can I get the path of the called library, rather than the executable?</p>\n"}, {"tags": ["c++", "boost", "gnuplot"], "comments": [{"owner": {"reputation": 14442, "user_id": 1281879, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b993ae458a5257cdf6fecef9ea56ae4e?s=128&d=identicon&r=PG", "display_name": "andyras", "link": "https://stackoverflow.com/users/1281879/andyras"}, "edited": false, "score": 0, "creation_date": 1420651271, "post_id": 27824175, "comment_id": 44055696, "body": "Can you show how you include the headers in your code? If <code>file_descriptor.hpp</code> is in your source directory but you <code>#include &quot;boost&#47;iostreams&#47;device&#47;file_descriptor.hpp&quot;</code> you might get that error."}, {"owner": {"reputation": 14442, "user_id": 1281879, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b993ae458a5257cdf6fecef9ea56ae4e?s=128&d=identicon&r=PG", "display_name": "andyras", "link": "https://stackoverflow.com/users/1281879/andyras"}, "edited": false, "score": 0, "creation_date": 1420651333, "post_id": 27824175, "comment_id": 44055737, "body": "Also, rather than copying header files into your source directory it is usually preferable to tell the compiler where to look in the system directories, e.g. <code>$COMPILER -I &#47;usr&#47;include</code>"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1420659055, "creation_date": 1420659055, "answer_id": 27827180, "question_id": 27824175, "link": "https://stackoverflow.com/questions/27824175/boost-iostreams-device-file-descriptor-hpp-file-not-found-error/27827180#27827180", "title": "&#39;boost/iostreams/device/file_descriptor.hpp&#39; file not found ERROR", "body": "<p>Are you using the correct include delimiters?</p>\n\n<pre><code>#include &lt;boost/iostreams/device/file_descriptor.hpp&gt;\n</code></pre>\n\n<p>will search the specified library search paths (including the compiler implicits).</p>\n\n<pre><code>#include \"boost/iostreams/device/file_descriptor.hpp\"\n</code></pre>\n\n<p>will search relative to the current translation unit too.</p>\n\n<hr>\n\n<p>If this was the cause, you could</p>\n\n<ul>\n<li>change the delimiter style (recommended)</li>\n<li>add \".\" to the library include paths</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4429697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ca5aa01a6f2c5cba293df75abd4566?s=128&d=identicon&r=PG&f=1", "display_name": "Maggie Picone", "link": "https://stackoverflow.com/users/4429697/maggie-picone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 983, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420659055, "creation_date": 1420648744, "question_id": 27824175, "link": "https://stackoverflow.com/questions/27824175/boost-iostreams-device-file-descriptor-hpp-file-not-found-error", "title": "&#39;boost/iostreams/device/file_descriptor.hpp&#39; file not found ERROR", "body": "<p>I'm trying to call gnuplot from C++ and I've included the gnuplot-iostream.h library and the boost/iostreams/device/file_descriptor.hpp library in the same directory as my source code, but I still get the error that the directory is not found. What am I doing wrong?</p>\n"}, {"tags": ["c++", "assembly", "32-bit", "masm"], "answers": [{"comments": [{"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1420649377, "post_id": 27824242, "comment_id": 44054581, "body": "<code>ecx</code> is redundant here. You can just use <code>eax</code> as your pointer register."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1420649440, "post_id": 27824242, "comment_id": 44054629, "body": "Of course, you&#39;re absolutely right, I&#39;ll edit the answer. I&#39;m not sure what made me do that."}, {"owner": {"reputation": 161, "user_id": 4429142, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-wAjZ1hH92EA/AAAAAAAAAAI/AAAAAAAAAeY/PFLiYszaKFg/photo.jpg?sz=128", "display_name": "Krzysztof Kr&#243;likowski", "link": "https://stackoverflow.com/users/4429142/krzysztof-kr%c3%b3likowski"}, "edited": false, "score": 0, "creation_date": 1420664585, "post_id": 27824242, "comment_id": 44063121, "body": "I&#39;m writing caesar cipher app where i compare timing for C++ and asm. Your help gave me all what I want : ) thank u"}], "tags": [], "owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "is_accepted": true, "score": 1, "last_activity_date": 1420649454, "last_edit_date": 1420649454, "creation_date": 1420648989, "answer_id": 27824242, "question_id": 27824120, "link": "https://stackoverflow.com/questions/27824120/how-to-increment-letters-of-pointer-in-assembler/27824242#27824242", "title": "How to increment letters of pointer in assembler?", "body": "<p>You want to add 3 to each letter of a string ?</p>\n\n<p>The following code is <em>not</em> tested, but it should work. Assuming that your string is a NUL-terminated string, of course.</p>\n\n<p>I'm simply checking to see if we're at the end of the string,\nif we're not it adds 3 and keeps going.</p>\n\n<pre><code>start proc strV: PTR BYTE\n    mov eax, strV\nnext:\n    cmp byte ptr [eax], 0\n    je done\n    add byte ptr [eax], 3\n    inc eax\n    jmp next\ndone:\n    ret\nstart endp\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4429142, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-wAjZ1hH92EA/AAAAAAAAAAI/AAAAAAAAAeY/PFLiYszaKFg/photo.jpg?sz=128", "display_name": "Krzysztof Kr&#243;likowski", "link": "https://stackoverflow.com/users/4429142/krzysztof-kr%c3%b3likowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 27824242, "answer_count": 1, "score": 0, "last_activity_date": 1420649454, "creation_date": 1420648578, "question_id": 27824120, "link": "https://stackoverflow.com/questions/27824120/how-to-increment-letters-of-pointer-in-assembler", "title": "How to increment letters of pointer in assembler?", "body": "<p>I have procedure in assembler and i want to add to each letter of String strV, which is byte pointer some value, in this case it will be +3. I try to add 3 only for first letter, but proc returns weird sign or nothing, so I asks for help. (Returned pointer will be assigned to char * string in C++).</p>\n\n<pre><code>start proc strV: PTR BYTE\n    mov eax, [strV]\n    ret\nstart endp\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "dll", "linker"], "comments": [{"owner": {"reputation": 12895, "user_id": 1881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33c1dcf29d614b9366ccc3e08ac793f?s=128&d=identicon&r=PG", "display_name": "Phillip", "link": "https://stackoverflow.com/users/1881610/phillip"}, "edited": false, "score": 0, "creation_date": 1421050022, "post_id": 27824102, "comment_id": 44195387, "body": "<a href=\"http://stackoverflow.com/a/3573527/1881610\">This post</a> answers most of your questions."}], "answers": [{"comments": [{"owner": {"reputation": 1340, "user_id": 3575426, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/feCzU.png?s=128&g=1", "display_name": "Youda008", "link": "https://stackoverflow.com/users/3575426/youda008"}, "edited": false, "score": 2, "creation_date": 1476816014, "post_id": 27899384, "comment_id": 67502809, "body": "where can i find more details about what exactly is contained in import library and how it works in link time, load time and run time?"}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1616524307, "post_id": 27899384, "comment_id": 118028085, "body": "Chen: &quot;The .dll doesn\u2019t contain all the information the linker needs&quot;... &quot; If I have a program (myprogram.c) that calls some C function <code>void someFunction(int)</code> defined in some dynamic library a.dll, wouldn&#39;t the compiler when compiling myprogram.c -&gt; myprogram.obj  generate some placeholder <code>someFunction</code> in myprogram.obj that would match a symbol in a.dll like it would if a.dll were a static library (a.lib) instead? Why can&#39;t dlls be linked directly like .lib or .obj files? Does the PE format just not support this?"}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1616525885, "post_id": 27899384, "comment_id": 118028823, "body": "Also, it seems like there are exported symbols in a dll file, if I do <code>dumpbin &#47;exports someDll.dll</code> I get a lot of entries, and it seems like the symbols (names) of the functions match up with the ones in the import library file; if the dll has this information, why do I still need a lib? Is VS just not programmed to load DLLs and parse this information?"}], "tags": [], "owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "is_accepted": true, "score": 17, "last_activity_date": 1580292644, "last_edit_date": 1580292644, "creation_date": 1421056961, "answer_id": 27899384, "question_id": 27824102, "link": "https://stackoverflow.com/questions/27824102/how-do-import-libraries-work-and-why-doesnt-mingw-need-them/27899384#27899384", "title": "How do import libraries work and why doesn&#39;t MinGW need them?", "body": "<p>It is possible to link to DLL without an import library as MinGW clearly demonstrates. Hence the question is why MSVC decided to omit this feature.</p>\n\n<p>The reasons are primarily historic.</p>\n\n<p>Back then in 1983 when Windows came around and DLLs were designed there were many toolchains (compilers, linkers) from different vendors. Going out asking the vendors to implement support for linking \"DLLs\" for a minority OS was clearly not an option.</p>\n\n<p>So they made a decision to write a tool to generate a library everyone and their dog could link against even if a linker had absolutely no idea about DLLs.</p>\n\n<p>Besides, import libraries offer some features that were vital 3 decades ago but are next to obsolete now. First is the ability to import a symbol by ordinal \u2014 i.e. DLL has an option to offer no names at all only a list of addresses; the ordinal is an index in this list. Made sence when the amount of RAM was severely limited.</p>\n\n<p>Second is the support for different name mangling schemes. Even in C there is a name mangling scheme, for instance FooBar may become _FooBar@4 (it depends on the platform and the calling convention). It made perfect sense for a DLL to export \"FooBar\" on every supported platform for consistency (and it makes the life of GetProcAddress() user easier). Import library implements the mapping from _FooBar@4 to FooBar.</p>\n\n<p>This is based on the blog (<a href=\"https://devblogs.microsoft.com/oldnewthing/20091013-00/?p=16403\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://devblogs.microsoft.com/oldnewthing/20091012-00/?p=16413\" rel=\"nofollow noreferrer\">2</a>) of  Raimond Chen, the man who was involved in Windows development from the very beginning.</p>\n"}], "owner": {"reputation": 1373, "user_id": 3012814, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/adc610ef7569a6cf322849d74eef8c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Sebi2020", "link": "https://stackoverflow.com/users/3012814/sebi2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 4, "accepted_answer_id": 27899384, "answer_count": 1, "score": 14, "last_activity_date": 1580292644, "creation_date": 1420648492, "last_edit_date": 1421137357, "question_id": 27824102, "link": "https://stackoverflow.com/questions/27824102/how-do-import-libraries-work-and-why-doesnt-mingw-need-them", "title": "How do import libraries work and why doesn&#39;t MinGW need them?", "body": "<p>I looked at this page: <a href=\"http://msdn.microsoft.com/en-us/magazine/cc301805.aspx\" rel=\"noreferrer\">An In-Depth Look into the Win32 Portable Executable File Format</a></p>\n\n<p>It explains that the linker needs an import library because the compiler can't distinguish between normal function calls and API-function calls. But they say also that __declspec(dllimport) specifies a function call to be an API-Call so the linker links against <code>__imp_[<em>function-name</em>]</code>. <strong>But</strong> with this keyword the compiler should know that this is a call to an API-Function.</p>\n\n<p>Why does the linker still need an import library? The compiler could mark this symbol as imported by prepending <code>__imp_</code> to the function name and could make a call to a function pointer (which is an unresolved symbol yet) and the linker could replace this symbol (because it sees that this an API call) with the IAT entry's address.</p>\n\n<p>And why can the MinGW-linker use \"MinGW-DLLs\" directly but the Visual-Studio linker needs an import library?</p>\n\n<p>As I read the post some other questions were also raised. How does the \"dlltool (or linker)\" (whichever creates the import library) know the location of an IAT entry before linkage with the final executable has been done? I thought the IAT entries would be constructed at link-time with the final executable. The post said, that every API-Call has a fixed position in the IAT table, never-mind how many DLLs will be linked. I cannot imagine how that could be achieved. </p>\n"}, {"tags": ["c++", "eclipse", "ide", "systemc"], "answers": [{"tags": [], "owner": {"reputation": 54, "user_id": 4699018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7ddd3430a23011399c6995787666238?s=128&d=identicon&r=PG&f=1", "display_name": "cphurley82", "link": "https://stackoverflow.com/users/4699018/cphurley82"}, "is_accepted": false, "score": 0, "last_activity_date": 1427004430, "last_edit_date": 1495542500, "creation_date": 1427004430, "answer_id": 29191534, "question_id": 27824026, "link": "https://stackoverflow.com/questions/27824026/systemc-ide-out-of-the-box-without-compiling-lib-for-windows-and-mac/29191534#29191534", "title": "SystemC IDE out of the box without compiling lib for windows and mac?", "body": "<p>Any C++ IDE will work once you have the library installed. I recommend Eclipse for C++ that runs on Windows, Mac, and Linux.</p>\n\n<p>EDA tool vendors like Cadence and Synopsys will provide you a pre-compiled library and IDE, but not for free.</p>\n\n<p>Also see:</p>\n\n<p><a href=\"http://karibe.co.ke/2014/02/setting-up-systemc-and-eclipse-for-c-hardware-simulation/\" rel=\"nofollow noreferrer\">http://karibe.co.ke/2014/02/setting-up-systemc-and-eclipse-for-c-hardware-simulation/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/25961573/how-to-use-and-install-systemc-in-terminal-mac-os-x\">how to use and install SystemC in terminal mac OS X?</a></p>\n"}], "owner": {"reputation": 205, "user_id": 1794446, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f45f2c1b6644cb50c535f58cfe1b7294?s=128&d=identicon&r=PG", "display_name": "Danny Archer", "link": "https://stackoverflow.com/users/1794446/danny-archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427004430, "creation_date": 1420648238, "question_id": 27824026, "link": "https://stackoverflow.com/questions/27824026/systemc-ide-out-of-the-box-without-compiling-lib-for-windows-and-mac", "title": "SystemC IDE out of the box without compiling lib for windows and mac?", "body": "<p>Is there an IDE with SystemC out of the box without compiling the lib for windows AND mac?\nLooking for a download, but can't find. Why everybody needs to compile it on its own?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "thrust"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1420730231, "post_id": 27823951, "comment_id": 44090477, "body": "It can be done in thrust. I wouldn&#39;t say there is a built-in solution; it&#39;s necessary to combine various thrust concepts. I came up with one approach, it&#39;s not much faster (2x) than your naive single-threaded CPU implementation. Making it run faster might require understanding your actual intended data sizes better and it might also be faster to use CUDA or some other GPU approach besides thrust. I can show you what I put together if you like, but explaining it will be pretty involved if you&#39;re not familiar with thrust concepts. The GPU may not be useful for the (small) data sizes you&#39;ve shown"}, {"owner": {"reputation": 1181, "user_id": 1930254, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a91781a58fb6bee2e505839ba55c7fe8?s=128&d=identicon&r=PG", "display_name": "user1930254", "link": "https://stackoverflow.com/users/1930254/user1930254"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1420733559, "post_id": 27823951, "comment_id": 44092919, "body": "Thank you Robert, I would appreciate it if you could show me. About the size of my data: it is just a portion of it. I have actually more then 100 millions individuals, and about 5000 centroids."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1420733790, "post_id": 27823951, "comment_id": 44093073, "body": "100 million individuals and 5000 centroids.  Is the dim of each still 8 ?"}, {"owner": {"reputation": 1181, "user_id": 1930254, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a91781a58fb6bee2e505839ba55c7fe8?s=128&d=identicon&r=PG", "display_name": "user1930254", "link": "https://stackoverflow.com/users/1930254/user1930254"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1420735226, "post_id": 27823951, "comment_id": 44094036, "body": "yes, 8 dimensions each. actually I am afraid, it has to be split up, else it wont fit into the GPU&#39;s memory."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 5, "last_activity_date": 1420785215, "last_edit_date": 1495542224, "creation_date": 1420785215, "answer_id": 27855055, "question_id": 27823951, "link": "https://stackoverflow.com/questions/27823951/thrust-vector-distance-calculation/27855055#27855055", "title": "thrust vector distance calculation", "body": "<p>It can be done in thrust.  Explaining how will be rather involved, and the code is rather dense.</p>\n\n<p>The key observation to start with is that the core operation can be done via a transformed reduction.  The thrust transform operation is used to perform the elementwise subtraction of the vectors (individual-centroid) and squaring of each result, and the reduction sums the results together to produce the square of the euclidean distance.  The starting point for this operation is <code>thrust::reduce_by_key</code>, but it gets rather involved to present the data correctly to <code>reduce_by_key</code>.</p>\n\n<p>The final results are produced by taking the square root of each result from above, and we can use an ordinary <code>thrust::transform</code> for this.</p>\n\n<p>The above is a summary description of the only 2 lines of thrust code that do all the work.  However, the first line has considerable complexity to it. In order to exploit parallelism, the approach I took was to virtually \"lay out\" the necessary vectors in sequence, to be presented to <code>reduce_by_key</code>.  To take a simple example, suppose we have 2 centroids and 4 individuals, and suppose our dimension is 2.  </p>\n\n<pre><code>centroid 0: C00 C01\ncentroid 1: C10 C11\nindivid  0: I00 I01\nindivid  1: I10 I11\nindivid  2: I20 I21\nindivid  3: I30 I31\n</code></pre>\n\n<p>We can \"lay out\" the vectors like this:</p>\n\n<pre><code> C00 C01 C00 C01 C00 C01 C00 C01 C10 C11 C10 C11 C10 C11 C10 C11\n I00 I01 I10 I11 I20 I21 I30 I31 I00 I01 I10 I11 I20 I21 I30 I31\n</code></pre>\n\n<p>To facilitate the <code>reduce_by_key</code>, we will also need to generate key values to delineate the vectors:</p>\n\n<pre><code>   0   0   1   1   0   0   1   1   0   0   1   1   0   0   1   1\n</code></pre>\n\n<p>The above data \"laid-out\" data sets can be quite large, and we don't want to incur storage and retrieval cost, so we will generate these \"on-the-fly\" using thrust's collection of <a href=\"https://github.com/thrust/thrust/wiki/Quick-Start-Guide\" rel=\"nofollow noreferrer\">fancy iterators</a>.  This is where things get quite dense.  With the above strategy in mind, we will use <a href=\"https://thrust.github.io/doc/group__reductions.html#ga1fd25c0e5e4cc0a6ab0dcb1f7f13a2ad\" rel=\"nofollow noreferrer\">thrust::reduce_by_key</a> to do the work.  We'll create a custom functor provided to a <code>transform_iterator</code> to do the subtraction (and squaring) of the <code>I</code> and <code>C</code> vectors, which will be zipped together for this purpose.  The \"lay out\" of the vectors will be created on the fly using permutation iterators with additional custom index-creation functors, to help with the replicated patterns in each of <code>I</code> and <code>C</code>.</p>\n\n<p>Therefore, working from the \"inside out\", the sequence of steps is as follows:</p>\n\n<ol>\n<li><p>for both <code>I</code> (<code>data</code>) and <code>C</code> (<code>centr</code>) use a <code>counting_iterator</code> combined with a custom indexing functor inside of a <code>transform_iterator</code> to produce the indexing sequences we will need.</p></li>\n<li><p>using the indexing sequences created in step 1 and the base <code>I</code> and <code>C</code> vectors, virtually \"lay out\" the vectors via a <code>permutation_iterator</code> (one for each laid-out vector).</p></li>\n<li><p>zip the 2 \"laid out\" virtual <code>I</code> and <code>C</code> vectors together, to create a <code>&lt;float, float&gt;</code> tuple vector (virtual).</p></li>\n<li><p>take the <code>zip_iterator</code> from step 3, and combine with a custom distance-calculation functor (<code>(I-C)^2</code>) in a <code>transform_iterator</code></p></li>\n<li><p>use another <code>transform_iterator</code>, combining a <code>counting_iterator</code> with a custom key-generating functor, to produce the key sequence (virtual)</p></li>\n<li><p>pass the iterators in steps 4 and 5 to <code>reduce_by_key</code>as the inputs (keys, values) to be reduced.  The output vectors for <code>reduce_by_key</code> are also keys and values.  We don't need the keys, so we'll use a <code>discard_iterator</code> to dump those.  The values we will save.</p></li>\n</ol>\n\n<p>The above steps are all accomplished in a single line of thrust code.</p>\n\n<p>Here's a code illustrating the above:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/reduce.h&gt;\n#include &lt;thrust/iterator/transform_iterator.h&gt;\n#include &lt;thrust/iterator/counting_iterator.h&gt;\n#include &lt;thrust/iterator/permutation_iterator.h&gt;\n#include &lt;thrust/iterator/zip_iterator.h&gt;\n#include &lt;thrust/iterator/discard_iterator.h&gt;\n#include &lt;thrust/copy.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_DATA 100000000\n#define MAX_CENT 5000\n#define TOL 0.001\n\nunsigned long long dtime_usec(unsigned long long prev){\n#define USECPSEC 1000000ULL\n  timeval tv1;\n  gettimeofday(&amp;tv1,0);\n  return ((tv1.tv_sec * USECPSEC)+tv1.tv_usec) - prev;\n}\n\nunsigned verify(float *d1, float *d2, int len){\n  unsigned pass = 1;\n  for (int i = 0; i &lt; len; i++)\n    if (fabsf(d1[i] - d2[i]) &gt; TOL){\n      std::cout &lt;&lt; \"mismatch at:  \" &lt;&lt; i &lt;&lt; \" val1: \" &lt;&lt; d1[i] &lt;&lt; \" val2: \" &lt;&lt; d2[i] &lt;&lt; std::endl;\n      pass = 0;\n      break;}\n  return pass;\n}\nvoid eucl_dist_cpu(const float *centroids, const float *data, float *rdist, int num_centroids, int dim, int num_data, int print){\n\n  int out_idx = 0;\n  float dist, dist_sqrt;\n  for(int i = 0; i &lt; num_centroids; i++)\n    for(int j = 0; j &lt; num_data; j++)\n    {\n        float dist_sum = 0.0;\n        for(int k = 0; k &lt; dim; k++)\n        {\n            dist = centroids[i * dim + k] - data[j * dim + k];\n            dist_sum += dist * dist;\n        }\n        dist_sqrt = sqrt(dist_sum);\n        // do something with the distance\n        rdist[out_idx++] = dist_sqrt;\n        if (print) std::cout &lt;&lt; dist_sqrt &lt;&lt; \", \";\n\n    }\n    if (print) std::cout &lt;&lt; std::endl;\n}\n\n\nstruct dkeygen : public thrust::unary_function&lt;int, int&gt;\n{\n  int dim;\n  int numd;\n\n  dkeygen(const int _dim, const int _numd) : dim(_dim), numd(_numd) {};\n\n  __host__ __device__ int operator()(const int val) const {\n    return (val/dim);\n    }\n};\n\ntypedef thrust::tuple&lt;float, float&gt; mytuple;\nstruct my_dist : public thrust::unary_function&lt;mytuple, float&gt;\n{\n  __host__ __device__ float operator()(const mytuple &amp;my_tuple) const {\n    float temp = thrust::get&lt;0&gt;(my_tuple) - thrust::get&lt;1&gt;(my_tuple);\n    return temp*temp;\n  }\n};\n\n\nstruct d_idx : public thrust::unary_function&lt;int, int&gt;\n{\n  int dim;\n  int numd;\n\n  d_idx(int _dim, int _numd) : dim(_dim), numd(_numd) {};\n\n  __host__ __device__ int operator()(const int val) const {\n    return (val % (dim*numd));\n    }\n};\n\nstruct c_idx : public thrust::unary_function&lt;int, int&gt;\n{\n  int dim;\n  int numd;\n\n  c_idx(int _dim, int _numd) : dim(_dim), numd(_numd) {};\n\n  __host__ __device__ int operator()(const int val) const {\n    return (val % dim) + (dim * (val/(dim*numd)));\n    }\n};\n\nstruct my_sqrt : public thrust::unary_function&lt;float, float&gt;\n{\n  __host__ __device__ float operator()(const float val) const {\n    return sqrtf(val);\n  }\n};\n\n\nunsigned long long eucl_dist_thrust(thrust::host_vector&lt;float&gt; &amp;centroids, thrust::host_vector&lt;float&gt; &amp;data, thrust::host_vector&lt;float&gt; &amp;dist, int num_centroids, int dim, int num_data, int print){\n\n  thrust::device_vector&lt;float&gt; d_data = data;\n  thrust::device_vector&lt;float&gt; d_centr = centroids;\n  thrust::device_vector&lt;float&gt; values_out(num_centroids*num_data);\n\n  unsigned long long compute_time = dtime_usec(0);\n  thrust::reduce_by_key(thrust::make_transform_iterator(thrust::make_counting_iterator&lt;int&gt;(0), dkeygen(dim, num_data)), thrust::make_transform_iterator(thrust::make_counting_iterator&lt;int&gt;(dim*num_data*num_centroids), dkeygen(dim, num_data)),thrust::make_transform_iterator(thrust::make_zip_iterator(thrust::make_tuple(thrust::make_permutation_iterator(d_centr.begin(), thrust::make_transform_iterator(thrust::make_counting_iterator&lt;int&gt;(0), c_idx(dim, num_data))), thrust::make_permutation_iterator(d_data.begin(), thrust::make_transform_iterator(thrust::make_counting_iterator&lt;int&gt;(0), d_idx(dim, num_data))))), my_dist()), thrust::make_discard_iterator(), values_out.begin());\n  thrust::transform(values_out.begin(), values_out.end(), values_out.begin(), my_sqrt());\n  cudaDeviceSynchronize();\n  compute_time = dtime_usec(compute_time);\n\n  if (print){\n    thrust::copy(values_out.begin(), values_out.end(), std::ostream_iterator&lt;float&gt;(std::cout, \", \"));\n    std::cout &lt;&lt; std::endl;\n    }\n  thrust::copy(values_out.begin(), values_out.end(), dist.begin());\n  return compute_time;\n}\n\n\nint main(int argc, char *argv[]){\n\n  int dim = 8;\n  int num_centroids = 2;\n  float centroids[] = {\n    0.223, 0.002, 0.223, 0.412, 0.334, 0.532, 0.244, 0.612,\n    0.742, 0.812, 0.817, 0.353, 0.325, 0.452, 0.837, 0.441\n  };\n  int num_data = 8;\n  float data[] = {\n    0.314, 0.504, 0.030, 0.215, 0.647, 0.045, 0.443, 0.325,\n    0.731, 0.354, 0.696, 0.604, 0.954, 0.673, 0.625, 0.744,\n    0.615, 0.936, 0.045, 0.779, 0.169, 0.589, 0.303, 0.869,\n    0.275, 0.406, 0.003, 0.763, 0.471, 0.748, 0.230, 0.769,\n    0.903, 0.489, 0.135, 0.599, 0.094, 0.088, 0.272, 0.719,\n    0.112, 0.448, 0.809, 0.157, 0.227, 0.978, 0.747, 0.530,\n    0.908, 0.121, 0.321, 0.911, 0.884, 0.792, 0.658, 0.114,\n    0.721, 0.555, 0.979, 0.412, 0.007, 0.501, 0.844, 0.234\n  };\n  std::cout &lt;&lt; \"cpu results: \" &lt;&lt; std::endl;\n  float dist[num_data*num_centroids];\n  eucl_dist_cpu(centroids, data, dist, num_centroids, dim, num_data, 1);\n\n  thrust::host_vector&lt;float&gt; h_data(data, data + (sizeof(data)/sizeof(float)));\n  thrust::host_vector&lt;float&gt; h_centr(centroids, centroids + (sizeof(centroids)/sizeof(float)));\n  thrust::host_vector&lt;float&gt; h_dist(num_centroids*num_data);\n\n  std::cout &lt;&lt; \"gpu results: \" &lt;&lt; std::endl;\n  eucl_dist_thrust(h_centr, h_data, h_dist, num_centroids, dim, num_data, 1);\n\n  float *data2, *centroids2, *dist2;\n  num_centroids = 10;\n  num_data = 1000000;\n\n  if (argc &gt; 2) {\n    num_centroids = atoi(argv[1]);\n    num_data = atoi(argv[2]);\n    if ((num_centroids &lt; 1) || (num_centroids &gt; MAX_CENT)) {std::cout &lt;&lt; \"Num centroids out of range\" &lt;&lt; std::endl; return 1;}\n    if ((num_data &lt; 1) || (num_data &gt; MAX_DATA)) {std::cout &lt;&lt; \"Num data out of range\" &lt;&lt; std::endl; return 1;}\n    if (num_data * dim * num_centroids &gt; 2000000000) {std::cout &lt;&lt; \"data set out of range\" &lt;&lt; std::endl; return 1;}}\n  std::cout &lt;&lt; \"Num Data: \" &lt;&lt; num_data &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Num Cent: \" &lt;&lt; num_centroids &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"result size: \" &lt;&lt; ((num_data*num_centroids*4)/1048576) &lt;&lt; \" Mbytes\" &lt;&lt; std::endl;\n  data2 = new float[dim*num_data];\n  centroids2 = new float[dim*num_centroids];\n  dist2 = new float[num_data*num_centroids];\n  for (int i = 0; i &lt; dim*num_data; i++) data2[i] = rand()/(float)RAND_MAX;\n  for (int i = 0; i &lt; dim*num_centroids; i++) centroids2[i] = rand()/(float)RAND_MAX;\n  unsigned long long dtime = dtime_usec(0);\n  eucl_dist_cpu(centroids2, data2, dist2, num_centroids, dim, num_data, 0);\n  dtime = dtime_usec(dtime);\n  std::cout &lt;&lt; \"cpu time: \" &lt;&lt; dtime/(float)USECPSEC &lt;&lt; \"s\" &lt;&lt; std::endl;\n  thrust::host_vector&lt;float&gt; h_data2(data2, data2 + (dim*num_data));\n  thrust::host_vector&lt;float&gt; h_centr2(centroids2, centroids2 + (dim*num_centroids));\n  thrust::host_vector&lt;float&gt; h_dist2(num_data*num_centroids);\n  dtime = dtime_usec(0);\n  unsigned long long ctime = eucl_dist_thrust(h_centr2, h_data2, h_dist2, num_centroids, dim, num_data, 0);\n  dtime = dtime_usec(dtime);\n  std::cout &lt;&lt; \"gpu total time: \" &lt;&lt; dtime/(float)USECPSEC &lt;&lt; \"s, gpu compute time: \" &lt;&lt; ctime/(float)USECPSEC &lt;&lt; \"s\" &lt;&lt; std::endl;\n  if (!verify(dist2, &amp;(h_dist2[0]), num_data*num_centroids)) {std::cout &lt;&lt; \"Verification failure.\" &lt;&lt; std::endl; return 1;}\n  std::cout &lt;&lt; \"Success!\" &lt;&lt; std::endl;\n\n  return 0;\n\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li><p>The code is set up to do 2 passes, a short one using a data set similar to yours, with printout for visual check.  Then a larger data set can be entered, via command-line sizing parameters (number of centroids, then number of individuals), for benchmark comparison and validation of results.</p></li>\n<li><p>Contrary to what I stated in the comments, the thrust code is only running about 25% faster than the naive single-threaded CPU code.  Your mileage may vary.</p></li>\n<li><p>This is just one way to think about handling it.  I have had other ideas, but not enough time to flesh them out.</p></li>\n<li><p>The data sets can become rather large.  The code right now is intended to be limited to data sets where the product of <code>dimension*number_of_centroids*number_of_individuals</code> is less than 2 billion.  However, as you approach even this number, you will need a GPU and CPU that both have a few GB of memory.  I briefly explored larger data set sizes.  A few code changes would be needed in various places to extend from e.g. <code>int</code> to <code>unsigned long long</code>, etc.  However I haven't provided that as I am still investigating an issue with that code.</p></li>\n<li><p>For another, non-thrust-related look at computing euclidean distances on the GPU, you may be interested in <a href=\"https://stackoverflow.com/questions/24187038/example-of-increasing-the-work-per-thread-in-cuda\">this question</a>.  If you follow the sequence of optimizations that were made there, it may shed some light on either how this thrust code might be improved, or else how another non-thrust realization could be used.</p></li>\n<li><p>Sorry I wasn't able to squeeze more performance out.</p></li>\n</ol>\n"}], "owner": {"reputation": 1181, "user_id": 1930254, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a91781a58fb6bee2e505839ba55c7fe8?s=128&d=identicon&r=PG", "display_name": "user1930254", "link": "https://stackoverflow.com/users/1930254/user1930254"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 3, "accepted_answer_id": 27855055, "answer_count": 1, "score": 2, "last_activity_date": 1420785215, "creation_date": 1420647985, "last_edit_date": 1420659113, "question_id": 27823951, "link": "https://stackoverflow.com/questions/27823951/thrust-vector-distance-calculation", "title": "thrust vector distance calculation", "body": "<p>Consider the following dataset and centroids. There are 7 individuals and two means each with 8 dimensions. They are stored row major order.</p>\n\n<pre><code>short dim = 8;\nfloat centroids[] = {\n    0.223, 0.002, 0.223, 0.412, 0.334, 0.532, 0.244, 0.612, \n    0.742, 0.812, 0.817, 0.353, 0.325, 0.452, 0.837, 0.441\n};   \nfloat data[] = {\n    0.314, 0.504, 0.030, 0.215, 0.647, 0.045, 0.443, 0.325,\n    0.731, 0.354, 0.696, 0.604, 0.954, 0.673, 0.625, 0.744, \n    0.615, 0.936, 0.045, 0.779, 0.169, 0.589, 0.303, 0.869, \n    0.275, 0.406, 0.003, 0.763, 0.471, 0.748, 0.230, 0.769, \n    0.903, 0.489, 0.135, 0.599, 0.094, 0.088, 0.272, 0.719, \n    0.112, 0.448, 0.809, 0.157, 0.227, 0.978, 0.747, 0.530, \n    0.908, 0.121, 0.321, 0.911, 0.884, 0.792, 0.658, 0.114\n};\n</code></pre>\n\n<p>I want to calculate each euclidean distances. c1 - d1, c1 - d2 .... \nOn CPU I would do:</p>\n\n<pre><code>float dist = 0.0, dist_sqrt;\nfor(int i = 0; i &lt; 2; i++)\n    for(int j = 0; j &lt; 7; j++)\n    { \n        float dist_sum = 0.0;\n        for(int k = 0; k &lt; dim; k++)\n        {\n            dist = centroids[i * dim + k] - data[j * dim + k];\n            dist_sum += dist * dist;\n        }\n        dist_sqrt = sqrt(dist_sum);\n        // do something with the distance\n        std::cout &lt;&lt; dist_sqrt &lt;&lt; std::endl;\n\n    }\n</code></pre>\n\n<p>Is there any built in solution of vector distance calculation in THRUST?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1420648006, "post_id": 27823911, "comment_id": 44053696, "body": "I think you&#39;re missing a <code>const</code> on the reference declaration."}, {"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 0, "creation_date": 1420648050, "post_id": 27823911, "comment_id": 44053734, "body": "its not compiling.<a href=\"http://ideone.com/QSrlb1\" rel=\"nofollow noreferrer\">ideone.com/QSrlb1</a>"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 3, "creation_date": 1420648106, "post_id": 27823911, "comment_id": 44053776, "body": "@Columbo: Shouldn&#39;t, but does on one popular compiler."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1420648107, "post_id": 27823911, "comment_id": 44053777, "body": "<code>Abc &amp;obj11 = fun1();</code> might compile on some compilers (MSVC allows binding temporaries to non-<code>const</code> references, though it will issue a warning when you do), but technically it&#39;s not allowed by the C++ specification, so this program is ill-formed."}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1420648141, "post_id": 27823911, "comment_id": 44053801, "body": "@Columbo Now it can with VC 2010"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 2, "creation_date": 1420648235, "post_id": 27823911, "comment_id": 44053859, "body": "@feelfree That doesn&#39;t make it good practice to do so, and it makes your code non-portable. (It isn&#39;t guaranteed to compile correctly on any other C++ compiler.) There is a good reason this isn&#39;t allowed by the C++ specification. MSVC is known for helping programmers to aim the gun at their feet before pulling the trigger."}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1420648391, "post_id": 27823911, "comment_id": 44053959, "body": "@cdhowie Thanks, and I feel curious that it can compile on vc 2010"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 2, "creation_date": 1420648587, "post_id": 27823911, "comment_id": 44054080, "body": "@feelfree MSVC allows a lot of things that the C++ specification forbids, as &quot;extensions&quot; to the C++ language. It should emit a warning when you use such an extension, if you have warnings turned all the way up (which you should always do!). You would be well served to avoid using these extensions as they will result in non-portable code that likely doesn&#39;t work the way you think it does."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1420649064, "post_id": 27823911, "comment_id": 44054366, "body": "@cdhowie, <code>+1</code> on both of your comments. Neither g++ nor clang++ compiles the OP&#39;s example."}], "answers": [{"comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1420648300, "post_id": 27824023, "comment_id": 44053897, "body": "<i>&quot;A&amp; a = b does not create another object&quot;</i> -- Actually it depends on whether you&#39;re eliding copies. If you&#39;re not eliding copies then it will still make a copy; the returned object will be copied into a temporary, and the temporary is what gets bound to the reference. (And it still won&#39;t compile on a compliant C++ compiler...)"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1420650245, "last_edit_date": 1420650245, "creation_date": 1420648235, "answer_id": 27824023, "question_id": 27823911, "link": "https://stackoverflow.com/questions/27823911/whats-the-difference-between-class-reference-and-class-object-when-the-function/27824023#27824023", "title": "What&#39;s the difference between class reference and class object when the function return class object in C++?", "body": "<p>they are not the same. \nin the line </p>\n\n<pre><code>obj1 = fun1();\n</code></pre>\n\n<p>fun1() creates an objects , then obj1 <em>COPIES</em> the content of it . so you have two objects, one , anonymous , that you can't use anymore , and obj1 , which is an exact copy of it.</p>\n\n<p>in the line </p>\n\n<pre><code>Abc &amp;obj11 = fun1();\n</code></pre>\n\n<p>you catch the object fun1() created which a reference. now you have only <em>ONE</em> object , caught with a reference.</p>\n\n<p>notice that <code>A a</code> and <code>A&amp; a = b</code> are not the same . <code>A a</code>  creates an object on the stack . <code>A&amp; a = b</code> does not create another object , it just \"catches\" one with a reference.  </p>\n"}, {"comments": [{"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420649796, "post_id": 27824206, "comment_id": 44054819, "body": "<i>Note that a decent optimizing compiler...</i> FWIW, <code>Abc obj1; obj1 = fun1();</code> still causes the constructor to be called twice (checked with g++ and clang++), whereas <code>const Abc &amp;obj11 = fun1();</code> only once"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420649820, "post_id": 27824206, "comment_id": 44054836, "body": "@InnocentBystander Yeah, I just discovered that myself and am editing."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420650214, "post_id": 27824206, "comment_id": 44055063, "body": "@InnocentBystander I&#39;m curious if you explicitly disabled copy elision though, because at <code>-O2</code> I don&#39;t see any copies at all."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420650399, "post_id": 27824206, "comment_id": 44055156, "body": "cdhowie, I haven&#39;t. But -O2 doesn&#39;t seem to make any diff. I still get 2 ctor calls. clang 3.5.0, gcc 4.8.3"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420650486, "post_id": 27824206, "comment_id": 44055225, "body": "@InnocentBystander That&#39;s very odd. Check the link in my answer, there g++ is definitely eliding all copies with <code>-O2</code> and I only see one default ctor call in both cases, and no copy ctor calls at all."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 1, "creation_date": 1420650540, "post_id": 27824206, "comment_id": 44055257, "body": "@InnocentBystander you use default-construction and assignment operator in your code above in comment. That is not same as initialization."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420650556, "post_id": 27824206, "comment_id": 44055266, "body": "now if I change <code>Abc obj1; obj1 = fun1();</code> to simply <code>Abc obj1 = fun1();</code> as in your linked example, then the elision works. which all makes sense."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1420650582, "post_id": 27824206, "comment_id": 44055290, "body": "@&#214;&#246;Tiib Good catch. Yeah, that is one of the lines I changed because without changing it the two cases aren&#39;t even comparable anyway. I will note that in my answer."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1420650918, "post_id": 27824206, "comment_id": 44055493, "body": "@&#214;&#246;Tiib, yes, that&#39;s right, as this is what the OP example did. I think we are all good -- my comment was in regards to cdhowie&#39;s original answer :)"}], "tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 1, "last_activity_date": 1420650694, "last_edit_date": 1420650694, "creation_date": 1420648867, "answer_id": 27824206, "question_id": 27823911, "link": "https://stackoverflow.com/questions/27823911/whats-the-difference-between-class-reference-and-class-object-when-the-function/27824206#27824206", "title": "What&#39;s the difference between class reference and class object when the function return class object in C++?", "body": "<pre><code>Abc &amp;obj11 = fun1();\n</code></pre>\n\n<p><strong>This line makes the program ill-formed;</strong> the C++ specification forbids temporaries to be bound to a reference that is not <code>const</code>.  A compliant C++ compiler would emit an error to this effect.  Presumably you are using the Microsoft Visual C++ compiler, which is well-known for allowing the binding of a temporary to a non-<code>const</code> reference in contradiction to the C++ specification.</p>\n\n<pre><code>const Abc &amp;obj11 = fun1();\n</code></pre>\n\n<p>This line would be well-formed, and it causes the temporary to be bound to the reference.</p>\n\n<p>In any case, when binding a temporary to a reference the temporary will have its lifetime extended to match the lifetime of the reference, so when the reference goes out of scope the temporary will also be destroyed.  In other words, in terms of lifetime semantics it's equivalent to the line <code>Abc obj1 = fun1();</code><sup>1</sup>. If you are using a compiler that elides copies then all copies will be elided in both cases. If not eliding copies then the reference case will involve one less copy:</p>\n\n<ul>\n<li>Value case, the returned object will be copied into a temporary and then destroyed, and the temporary will be copied into <code>obj1</code> and then destroyed.</li>\n<li>Reference case, the returned object will be copied into a temporary and then destroyed, and the temporary will be bound to the reference.</li>\n</ul>\n\n<p>Note that a decent optimizing compiler will optimize away all copies as well as the reference detail completely, leaving you with identical assembly output for both of the cases in your question.</p>\n\n<p>(If you're interested, <a href=\"http://coliru.stacked-crooked.com/a/5c638216301b12c0\" rel=\"nofollow\">here is a test case</a> with code slightly tweaked from that in your question. Note that no copies are made in either case unless copy elision is disabled.)</p>\n\n<hr>\n\n<p><sup>1</sup> Note that this is different from the code <code>Abc obj1; obj1 = fun1();</code> in your question. I intentionally changed it, because the code you have written isn't directly comparable and so it doesn't make much sense to compare them.  If you rewrite it as <code>Abc obj1 = fun1();</code> then the two lines can be compared, because <code>Abc obj1; obj1 = fun1();</code> involves default-construction and then copy-assignment.</p>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 27824206, "answer_count": 2, "score": -4, "last_activity_date": 1420651336, "creation_date": 1420647849, "last_edit_date": 1420651336, "question_id": 27823911, "link": "https://stackoverflow.com/questions/27823911/whats-the-difference-between-class-reference-and-class-object-when-the-function", "title": "What&#39;s the difference between class reference and class object when the function return class object in C++?", "body": "<p>In order to make my question clear, I give the following example: </p>\n\n<pre><code>  #include &lt;iostream&gt;   \n\n\n   class Abc\n    {\n       public:\n        int a;\n        int b;\n        int c;\n     };\n     class Abc  fun1()\n      {\n         Abc obj;\n         obj.a = 3;\n         obj.b = 4;\n         obj.c = 5;\n          return obj;\n\n        };\n\n       int main ()\n       {\n          Abc obj1;\n          obj1 = fun1();\n          std::cout&lt;&lt;\"obj1 address is \"&lt;&lt;&amp;obj1&lt;&lt;std::endl;\n\n          Abc &amp;obj11 = fun1();\n          std::cout&lt;&lt;\"obj11 address is \"&lt;&lt;&amp;obj11&lt;&lt;std::endl;\n\n\n\n         return 0;\n }\n</code></pre>\n\n<p>As you can see the function's return value is a class object, and when you invoke this function to create the class object, you can either use the class object <code>obj1</code> or class reference <code>obj11</code>. For me they are the same, and I was wondering what's the difference between them and which practice is encouraged. </p>\n\n<p><strong>EDIT:</strong>\n  It can compile on Visual Studio 2010.</p>\n"}, {"tags": ["c++", "vector", "shared-ptr", "unique-ptr"], "answers": [{"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 5, "last_activity_date": 1420647430, "creation_date": 1420647430, "answer_id": 27823755, "question_id": 27823691, "link": "https://stackoverflow.com/questions/27823691/how-to-pop-back-shared-pointer-from-vector-and-convert-to-unique-ptr/27823755#27823755", "title": "how to pop_back shared pointer from vector and convert to unique_ptr", "body": "<p>You can't transfer ownership from a shared pointer to a unique pointer. Once ownership is shared, it remains shared.</p>\n\n<p>Either store unique pointers if you don't need to share ownership with the container, or continue to use shared pointers after removing from the container if you do.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1420647582, "creation_date": 1420647582, "answer_id": 27823805, "question_id": 27823691, "link": "https://stackoverflow.com/questions/27823691/how-to-pop-back-shared-pointer-from-vector-and-convert-to-unique-ptr/27823805#27823805", "title": "how to pop_back shared pointer from vector and convert to unique_ptr", "body": "<p>i should think something like this would be preferable (assuming m_shpVectorIFC contains unique_ptr objects):</p>\n\n<pre><code>std::unique_ptr&lt;IFC&gt; IFCCCB::getElementVectorIFC()\n{\n  auto result = std::move(m_shpVectorIFC.back());\n  m_shpVectorIFC.pop_back();\n  return result;\n}\n</code></pre>\n\n<p>EDIT: ah, just seen the word shared_ptr in there... nope, you have to return a shared_ptr or store a unique_ptr in the container.</p>\n"}, {"tags": [], "owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "is_accepted": false, "score": 3, "last_activity_date": 1420647662, "creation_date": 1420647662, "answer_id": 27823833, "question_id": 27823691, "link": "https://stackoverflow.com/questions/27823691/how-to-pop-back-shared-pointer-from-vector-and-convert-to-unique-ptr/27823833#27823833", "title": "how to pop_back shared pointer from vector and convert to unique_ptr", "body": "<p><a href=\"http://www.cplusplus.com/reference/vector/vector/pop_back/\" rel=\"nofollow\"><code>std::vector::pop_back</code></a> returns <code>void</code>. That's the reason you are getting that specific error, however once you fix that then you will encounter the problem the others mention.</p>\n"}, {"comments": [{"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420656023, "post_id": 27823852, "comment_id": 44058390, "body": "That&#39;s a lot of great ideas.  I&#39;m thinking of changing it to adding a shared_ptr to the vector of shared_ptrs now. It makes sense.  I&#39;ve just had conflicting requests from the team.  Making a copy would get around the problem, but putting the shared_ptr in in the first place would be good too."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420657580, "post_id": 27823852, "comment_id": 44059315, "body": "I&#39;m not sure it&#39;s a good idea to return a type of auto, since auto is only locally scoped."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420658424, "post_id": 27823852, "comment_id": 44059761, "body": "So if I made it a vector of unique_ptrs, do you think this is how I would return a unique_ptr? std::unique_ptr&lt;IFC&gt; IFCCB::getElementVectorIFC() {     auto temp;     if (m_upVectorIFC.size()) //if there&#39;s something in there     {         temp = std::move(m_upVectorIFC.back()); //access last item         m_upVectorIFC.pop_back(); //remove item from vector     }     if (!temp)         return{};     return(make_unique&lt;IFC&gt;(std::move(*temp)):make_unique&lt;IFC&gt;(*&zwnj;&#8203;temp)); //copy item to it&#39;s own unique_ptr }"}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420659831, "post_id": 27823852, "comment_id": 44060564, "body": "I&#39;m leaning toward something like this now.  I&#39;m a little confused about when I can/should be making a copy of the unique_ptr. What do you think?  std::unique_ptr&lt;IFC&gt; IFCCB::getElementVectorIFC() {     std::unique_ptr&lt;IFC&gt; temp = std::move(m_upVectorIFC.back()); //access last item     m_upVectorIFC.pop_back(); //remove item from vector     return(std::unique_ptr&lt;IFC&gt;(new IFC(temp.get()))); //move local item to it&#39;s own unique_ptr for return }"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 1, "creation_date": 1420662060, "post_id": 27823852, "comment_id": 44061757, "body": "@michele I only made a copy of the guts of the <code>shared_ptr</code> because you cannot convert a <code>shared_ptr</code> to a <code>unique_ptr</code>.  If you are storing a <code>unique_ptr</code>, do a <code>if (vec.empty()) return {}; auto retval = std::move( vec.back() ); vec.pop_back(); return retval;</code>, which returns an empty <code>unique_ptr</code> if the vector is empty, or if the last element is an empty <code>unique_ptr</code>.  That lines up with your second implementation.  Btw, backticks let you quote code in comments or in paragraphcs."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1420647703, "creation_date": 1420647703, "answer_id": 27823852, "question_id": 27823691, "link": "https://stackoverflow.com/questions/27823691/how-to-pop-back-shared-pointer-from-vector-and-convert-to-unique-ptr/27823852#27823852", "title": "how to pop_back shared pointer from vector and convert to unique_ptr", "body": "<p>There are many things wrong here:</p>\n\n<pre><code>return (std::unique_ptr&lt;IFC&gt;(make_unique&lt;IFC&gt;(m_shpVectorIFC.pop_back())));\n</code></pre>\n\n<p>Let us break it down into multiple lines, C++11 style.  This isn't quite equivalent, but close:</p>\n\n<pre><code>auto&amp;&amp; a = m_shpVectorIFC.pop_back();\nauto&amp;&amp; b = make_unique&lt;IFC&gt;(std::move(a));\nauto&amp;&amp; c = std::unique_ptr&lt;IFC&gt;(std::move(b));\nreturn std::move(c);\n</code></pre>\n\n<p>which isn't a bad technique to start with.</p>\n\n<p>Now you'll get an error that will be more informative.</p>\n\n<p>The first problem is that <code>pop_back()</code> returns <code>void</code>.  Fix that with:</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back()); // note a value, as we are about to mutate the vector\nm_shpVectorIFC.pop_back();\nauto&amp;&amp; b = make_unique&lt;IFC&gt;(std::move(a));\nauto&amp;&amp; c = std::unique_ptr&lt;IFC&gt;(std::move(b));\nreturn std::move(c);\n</code></pre>\n\n<p>we still run into problems.  <code>IFC</code> cannot be constructed from a <code>std::shared_ptr&lt;IFC&gt;&amp;&amp;</code>.  It cannot.  We can make a copy:</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back());\nm_shpVectorIFC.pop_back();\nauto&amp;&amp; b = make_unique&lt;IFC&gt;(*a);\nauto&amp;&amp; c = std::unique_ptr&lt;IFC&gt;(std::move(b));\nreturn std::move(c);\n</code></pre>\n\n<p>Next, <code>auto&amp;&amp;c</code> is pointless.</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back());\nm_shpVectorIFC.pop_back();\nauto&amp;&amp; b = make_unique&lt;IFC&gt;(*a);\nreturn std::move(b);\n</code></pre>\n\n<p>and we might as well store <code>b</code> as a value:</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back());\nm_shpVectorIFC.pop_back();\nauto b = make_unique&lt;IFC&gt;(*a);\nreturn b;\n</code></pre>\n\n<p>then some error detecting:</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back());\nm_shpVectorIFC.pop_back();\nif (!a)\n  return {};\nauto b = make_unique&lt;IFC&gt;(*a);\nreturn b;\n</code></pre>\n\n<p>and micro-optimize:</p>\n\n<pre><code>auto a = std::move(m_shpVectorIFC.back());\nm_shpVectorIFC.pop_back();\nif (!a)\n  return {};\nauto b = a.unique()?make_unique&lt;IFC&gt;(std::move(*a)):make_unique&lt;IFC&gt;(*a);\nreturn b;\n</code></pre>\n\n<p>Now, this doesn't return the <code>shared_ptr</code> data, but rather a copy of it.  You cannot move the guts of a C++11 <code>shared_ptr</code> into a <code>unique_ptr</code>.  You can do it the other way.</p>\n\n<p>Odds are you should be storing a <code>unique_ptr</code> in your vector anyhow.</p>\n"}], "owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1896, "favorite_count": 0, "accepted_answer_id": 27823852, "answer_count": 4, "score": 1, "last_activity_date": 1420647703, "creation_date": 1420647256, "question_id": 27823691, "link": "https://stackoverflow.com/questions/27823691/how-to-pop-back-shared-pointer-from-vector-and-convert-to-unique-ptr", "title": "how to pop_back shared pointer from vector and convert to unique_ptr", "body": "<p>I'm trying to pop_back my shared_pointer from my vector and convert to a unique_ptr.  Unfortunately, it's giving a strange compilation message.</p>\n\n<p>IFCCB.cpp:</p>\n\n<pre><code>std::unique_ptr&lt;IFC&gt; IFCCCB::getElementVectorIFC()\n{\n    return (std::unique_ptr&lt;IFC&gt;(make_unique&lt;IFC&gt;(m_shpVectorIFC.pop_back())));\n}\n</code></pre>\n\n<p>IFCCB.h:</p>\n\n<pre><code>public:\nunique_ptr&lt;IFC&gt; getElementVectorIFC();\n</code></pre>\n\n<p>compile error:</p>\n\n<blockquote>\n  <p>error C2784:\n  'enable_if::value,std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty>>>::type\n  std::make_unique(_Types &amp;&amp;...)' : could not deduce template argument\n  for '_Types &amp;&amp;' from 'void'</p>\n</blockquote>\n\n<p>As far as I can tell, I'm doing what I see elsewhere.    </p>\n\n<p>I looked at <a href=\"http://msdn.microsoft.com/en-us/library/dn439780.aspx\" rel=\"nofollow\">make_unique info</a> but it doesn't give a very good example, and <a href=\"http://msdn.microsoft.com/en-us/library/hh279676.aspx\" rel=\"nofollow\">unique_ptr use</a>. Any ideas?</p>\n"}, {"tags": ["c++", "class", "inheritance"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 1, "creation_date": 1420646582, "post_id": 27823381, "comment_id": 44052744, "body": "I think the inheritance is irrelevant here. This is equivalent to the decision of whether to have getters/setters or make a member public. Depends whether you might need to impose invariants on the data."}], "answers": [{"comments": [{"owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "edited": false, "score": 0, "creation_date": 1420647118, "post_id": 27823436, "comment_id": 44053107, "body": "Exactly. If your get is just <code>return m_value</code> and your set is <code>m_value = value</code>, then you don&#39;t need them. (Unless you&#39;re trying to maintain style)"}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": false, "score": 0, "last_activity_date": 1420646474, "creation_date": 1420646474, "answer_id": 27823436, "question_id": 27823381, "link": "https://stackoverflow.com/questions/27823381/protected-get-functions-for-protected-datamembers/27823436#27823436", "title": "Protected get-functions for protected datamembers?", "body": "<p>If you follow the common guidelines, data members should be private. Therefore, version 1 is preferred. On the other hand, completely trivial get/set pairs are a minor code smell in my opinion, so you may want to investigate why that member needs to be fully exposed to the derived class in the first place.</p>\n"}, {"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1420647294, "post_id": 27823629, "comment_id": 44053222, "body": "very much agree here. A simple get/set pair is logically equivalent to an exposed &#39;data is interface&#39; member. Striving to make as many classes invariant as possible is good practice. If the class must be mutable then its updates are likely to be complex and have dependencies."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1420647080, "creation_date": 1420647080, "answer_id": 27823629, "question_id": 27823381, "link": "https://stackoverflow.com/questions/27823381/protected-get-functions-for-protected-datamembers/27823629#27823629", "title": "Protected get-functions for protected datamembers?", "body": "<p>This is fairly subjective, but I would say 95% of the time neither one. Protected data makes your code just as hard to maintain as public so we rule that version out right away. But then also you almost never need a direct mutator (set) function, so we'll chop that function and then change the signature of the get function to <code>const T&amp; get_data() const;</code>. Then we'll add a <em>real</em> interface to the parent to manipulate its state rather than having something external decide what the new state should be.</p>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 0, "last_activity_date": 1420647216, "creation_date": 1420647216, "answer_id": 27823678, "question_id": 27823381, "link": "https://stackoverflow.com/questions/27823381/protected-get-functions-for-protected-datamembers/27823678#27823678", "title": "Protected get-functions for protected datamembers?", "body": "<p>Use accessor functions if you need anything other than simple access to the variable: validating the value, maintaining class invariants, signalling changes, logging, etc. Note that <code>get</code> should return either a value or a <code>const</code> reference; your version, returning a non-const reference, can be used to assign arbitrary values to the variable, bypassing the <code>set</code> function.</p>\n\n<p>If you only need simple access then some would suggest exposing the variable for the sake of simplicity; others would suggest using accessor functions for the sake of consistency (with other types that do need such things), or backwards compatibility (if you later decide you need functions after all). There's no compelling reason to prefer either option.</p>\n"}, {"tags": [], "owner": {"reputation": 10424, "user_id": 4047092, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/n5HM6.jpg?s=128&g=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/4047092/ravi"}, "is_accepted": true, "score": 0, "last_activity_date": 1420648309, "last_edit_date": 1420648309, "creation_date": 1420647295, "answer_id": 27823712, "question_id": 27823381, "link": "https://stackoverflow.com/questions/27823381/protected-get-functions-for-protected-datamembers/27823712#27823712", "title": "Protected get-functions for protected datamembers?", "body": "<p>Your version one is always preferred. Data members of class should by default be <code>private</code>. Making data members all public is justified only in one case i.e If you just want to bundle-o-data. Only then you would use <code>struct</code> and make all data public. ( Like to capture the essence of what is s single node in linked list)</p>\n\n<p>However, there is no such exception in case of <code>protected</code>. You can always make them private and provide accessors/mutators to those data members.</p>\n\n<p>Downside of <code>public</code> data members is that they breaks the encapsulation. And it's difficult to maintain <em>invariants</em> as data is open to modification from all sides. Case of <code>protected</code> data member is bit restrictive than <code>public</code> in that it opens up ways for modification only through derived class members and friends. But still it's breaking encapsulation.</p>\n\n<p>Conclusion :- All data members of class should always be <code>private</code> except in case it's intended to be used as <code>bundle-o-data</code>. </p>\n\n<p>Along with that you would never want to pass handle to your internals to outside users as you have done in:-</p>\n\n<pre><code>T&amp; get_data();\n</code></pre>\n\n<p>So, better way would be </p>\n\n<pre><code>const T&amp; get_data();\n</code></pre>\n\n<p>except in some specific scenarios.</p>\n"}], "owner": {"reputation": 371, "user_id": 1991779, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b98af5b75fd30f5780a77b99f8471931?s=128&d=identicon&r=PG", "display_name": "Bojack", "link": "https://stackoverflow.com/users/1991779/bojack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 27823712, "answer_count": 4, "score": 1, "last_activity_date": 1420648309, "creation_date": 1420646303, "last_edit_date": 1420646767, "question_id": 27823381, "link": "https://stackoverflow.com/questions/27823381/protected-get-functions-for-protected-datamembers", "title": "Protected get-functions for protected datamembers?", "body": "<p>We have two classes(A and B). Class A can only be created by classes who inherit from it(class A)\nand class B can be created by a user.</p>\n\n<p>Class A, version 1 has a <strong>private</strong> data member and has methods to aces the data in class A.</p>\n\n<p>Class A, version 2 has a <strong>protected</strong> data member and therefore, no methods are needed for classes that will inherit from the class to aces the data in class A</p>\n\n<p><strong>Class A, version 1</strong></p>\n\n<pre><code>class A\n{\nprotected:\n   A() = default;\n\n   void set_data( T d );\n   T&amp; get_data();\nprivate:\n   T data;  \n}\n</code></pre>\n\n<p><strong>Class A, version 2</strong></p>\n\n<pre><code>class A\n{\nprotected:\n   A() = default;\n\n   T data;  \n}\n</code></pre>\n\n<p><strong>Class B</strong></p>\n\n<pre><code>class B : public A {}\n</code></pre>\n\n<p>Which version of class A is the preferred one?</p>\n"}, {"tags": ["c++", "opengl", "textures", "rendering", "game-engine"], "comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1420646545, "post_id": 27823373, "comment_id": 44052713, "body": "one of the downside is that you can&#39;t parallax when it&#39;s been rendered to a static background"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1420647075, "post_id": 27823373, "comment_id": 44053070, "body": "The main issue of pre-rendering is memory usage; that texture will likely be huge. Using an array texture or texture atlas can reduce the number of texture binds needed for rendering tiles on-demand."}, {"owner": {"reputation": 396, "user_id": 589219, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fdbe98c5b7fdfebdf8661e275ea09f3?s=128&d=identicon&r=PG&f=1", "display_name": "Bakery", "link": "https://stackoverflow.com/users/589219/bakery"}, "edited": false, "score": 0, "creation_date": 1420647762, "post_id": 27823373, "comment_id": 44053530, "body": "&quot;Is it better to draw multiple smaller textures&quot;.  You will want to make as few state changes as possible as in don&#39;t change texture for each render call. This will for sure be bad for performance. To avoid this you should put your whole UI in an atlas so that you can draw all of the elements with one render call. To be able to do that you need to batch your UI mesh."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1420652090, "post_id": 27823373, "comment_id": 44056193, "body": "Size of the texture isn&#39;t an issue.  Lots (thousands) of binds might be, yes.  You can use texture arrays for this though."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1420657874, "post_id": 27823373, "comment_id": 44059467, "body": "Lots of things make binding textures slow, but something to consider with respect to textures and framebuffer objects is that they have a <i>lot</i> more states than most OpenGL object types. Driver overhead for things like state validation play a much larger part of the performance and have nothing to do with any sort of hardware limitation. You might consider reading the recent presentation on &quot;Approaching Zero Driver Overehead&quot;; the idea is to batch as much work possible with as few API calls as possible and changing textures has traditionally been the biggest obstacle to that."}], "owner": {"reputation": 57, "user_id": 3330642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HQsWe.jpg?s=128&g=1", "display_name": "slippery_nipples", "link": "https://stackoverflow.com/users/3330642/slippery-nipples"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420646289, "creation_date": 1420646289, "question_id": 27823373, "link": "https://stackoverflow.com/questions/27823373/opengl-what-are-best-practices-for-using-fbo-textures", "title": "OpenGL: What are best practices for using FBO textures?", "body": "<p>For context, I was mulling over a design where static UI elements can be rendered to a texture and drawn, instead of drawing each separate UI element every frame. And then I thought, \"Wait, couldn't you do this for everything?\" Instead of drawing each tile in a tile map, couldn't you just draw it once on a big texture and use that? </p>\n\n<p>Although this would seem like a good idea, I don't really know what the best practices are for this type of texture use. </p>\n\n<p>Some possible questions/topics:</p>\n\n<ul>\n<li>Why is binding a texture so slow? Does glBindTexture() push the texture to a higher memory cache for access? </li>\n<li>In the case of the tile map example, does drawing large textures pose performance issues? Is it better to draw multiple smaller textures?</li>\n</ul>\n"}, {"tags": ["c++", "windows", "visual-studio", "assimp"], "comments": [{"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420646290, "post_id": 27823320, "comment_id": 44052548, "body": "With dependency walker."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "reply_to_user": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420646567, "post_id": 27823320, "comment_id": 44052734, "body": "How do I use dependency walker?"}, {"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420646755, "post_id": 27823320, "comment_id": 44052844, "body": "Use it to open the executable from the folder it is being currently run from. It will try to load all dependent libraries and will report back to you any errors it encounters such as loading 64bit libraries and which ones."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "reply_to_user": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420647127, "post_id": 27823320, "comment_id": 44053115, "body": "Ok, DW reported that at least one module has an unresolved import. I&#39;m really not sure as to the kind of dlls it&#39;s asking for. Where do I get DCOMP.DLL for example?"}, {"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420647394, "post_id": 27823320, "comment_id": 44053289, "body": "Some of the errors can be safely ignored, you are looking for the DLL it has marked as being 64bit."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "reply_to_user": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1420648121, "post_id": 27823320, "comment_id": 44053783, "body": "It doesn&#39;t say whether the missing DLLs are 64-bit or not. I still don&#39;t know how I can resolve this assimp run-time error."}], "owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "closed_date": 1420651264, "answer_count": 0, "score": 0, "last_activity_date": 1420646539, "creation_date": 1420646127, "last_edit_date": 1420646539, "question_id": 27823320, "link": "https://stackoverflow.com/questions/27823320/assimp-and-visual-studio-error-0xc000007b", "closed_reason": "Duplicate", "title": "Assimp and visual studio: error 0xc000007b", "body": "<p>I have compiled and linked assimp's 32-bit libraries to a program targeting a 32 bit platform with all other 32-bit libraries linked therein. I've placed the relevant 32-bit binaries into the 'Debug' folder. When I compile the program, there are no errors; there are no linker errors either. But, there is a run-time error:</p>\n\n<p><code>The application was unable to start correctly (0xc000007b). Click OK to close the application.</code></p>\n\n<p>From what I've gathered, this is a bit mismatch whereby there are differences in the bit versions of some libraries. I'm running Windows 7 64-bit. I do not see how there could be a bit mismatch (if that's the cause) since I'm using the 32-bit libraries and binaries. How can I resolve this error? </p>\n\n<p><strong>Please do not close this question! This isn't a duplicate; I only require help as to how I can resolve this error.</strong></p>\n"}, {"tags": ["c++", "windows", "winapi", "scrollbar", "custom-controls"], "answers": [{"comments": [{"owner": {"reputation": 2035, "user_id": 492029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7a38730cb1eaf6a784c74235c2661a?s=128&d=identicon&r=PG", "display_name": "Eran", "link": "https://stackoverflow.com/users/492029/eran"}, "edited": false, "score": 0, "creation_date": 1420647102, "post_id": 27823552, "comment_id": 44053091, "body": "I was afraid of this kind of answer ;) any example online that can help me get started?"}, {"owner": {"reputation": 424, "user_id": 2355768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4560030af14caa06c60e993fef6f9d54?s=128&d=identicon&r=PG", "display_name": "Avert", "link": "https://stackoverflow.com/users/2355768/avert"}, "reply_to_user": {"reputation": 2035, "user_id": 492029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7a38730cb1eaf6a784c74235c2661a?s=128&d=identicon&r=PG", "display_name": "Eran", "link": "https://stackoverflow.com/users/492029/eran"}, "edited": false, "score": 0, "creation_date": 1420648632, "post_id": 27823552, "comment_id": 44054111, "body": "Do I know ... Controls are precisely described in MSDN. Also another useful info can be found there."}], "tags": [], "owner": {"reputation": 424, "user_id": 2355768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4560030af14caa06c60e993fef6f9d54?s=128&d=identicon&r=PG", "display_name": "Avert", "link": "https://stackoverflow.com/users/2355768/avert"}, "is_accepted": true, "score": 0, "last_activity_date": 1420646819, "creation_date": 1420646819, "answer_id": 27823552, "question_id": 27823252, "link": "https://stackoverflow.com/questions/27823252/how-to-customize-scrollbar-on-windows-using-winapi/27823552#27823552", "title": "How to customize scrollbar on Windows using WinAPI", "body": "<p>I'm afraid that if you want to use only C/C++ you will need to create your own scrollbar from the beginning. I mean you have to create special child window which would process the incoming messages and sending notifications to parent window.</p>\n"}], "owner": {"reputation": 2035, "user_id": 492029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7a38730cb1eaf6a784c74235c2661a?s=128&d=identicon&r=PG", "display_name": "Eran", "link": "https://stackoverflow.com/users/492029/eran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "closed_date": 1458638403, "accepted_answer_id": 27823552, "answer_count": 1, "score": 1, "last_activity_date": 1504663023, "creation_date": 1420645918, "last_edit_date": 1504663023, "question_id": 27823252, "link": "https://stackoverflow.com/questions/27823252/how-to-customize-scrollbar-on-windows-using-winapi", "closed_reason": "Not suitable for this site", "title": "How to customize scrollbar on Windows using WinAPI", "body": "<p>Recently, I have seen various applications with customized scrollbar (\"skinned\" ?) \nA good example for such application is Sublime text editor.</p>\n\n<p>I goggled this subject without any meaningful results, so the question is:\nIs it possible to customize a Windows scrollbar using WinAPI (assuming I code in C/C++ <strong>only</strong>), no .NET, C# etc, just plain old C/C++</p>\n\n<p>If it is possible, can someone give a tutorial link or better, a working small example?</p>\n"}, {"tags": ["c++", "partial-specialization", "template-classes"], "comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 3, "creation_date": 1420646115, "post_id": 27823235, "comment_id": 44052439, "body": "A partial specialization is still a template; why would you put it in a .cpp file? Anyway, the question seems to be more about how to partially specialize a member function of a class template without replacing the entire class. Unfortunately, this is not possible. You can&#39;t partially specialize function templates, and that includes member functions of class templates."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1420646117, "post_id": 27823235, "comment_id": 44052442, "body": "The example you show with <code>Foo_Beta</code> is not partial specialization. Partial specialization would be e.g. <code>template&lt;typename A&gt; class Foo&lt;A, Beta&gt; { ... };</code>"}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1420648040, "post_id": 27823235, "comment_id": 44053725, "body": "@SebastianRedl: I suspected that may be the case. Mostly what I wanted was a clean &quot;if you get Beta construct this way, Beth the other way, and it doesn&#39;t matter whether A is Alpha or Aleph.&quot; Aside from the constructor though, the class behaves the same for any combination A, B it will receive."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420646663, "post_id": 27823391, "comment_id": 44052792, "body": "&quot;I imagine I need to declare this partially-specialized class somewhere, but I don&#39;t want to have to keep re-declaring the same class...&quot;"}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1420646736, "post_id": 27823391, "comment_id": 44052836, "body": "@0x499602D2 If the reality is that I must keep re-declaring the class, that&#39;s the reality. It sucks I guess... but that may just be the limitation of the syntax"}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420646860, "post_id": 27823391, "comment_id": 44052931, "body": "@r-sahu, must I add the <code>template&lt;typename A&gt; class Foo&lt;A, Beta&gt; {   Foo(); };</code>  to the header, or can it be in the source file?  Also, I mean... there are a lot of other functions that are common to them, do I need to include those functions in the specialization?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420648712, "post_id": 27823391, "comment_id": 44054162, "body": "@shavera, the answer is &quot;yes&quot; to both questions. Once you create a specialization of the class template, it is unrelated to the original class template."}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420650391, "post_id": 27823391, "comment_id": 44055152, "body": "@r-sahu, ugh. this becomes frustrating. I think it&#39;s probably back to the drawing board on the whole design. I had some assumptions about template classes that I guess simply don&#39;t bear out. Which is too bad, because ultimately it seems like the right approach..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420650667, "post_id": 27823391, "comment_id": 44055335, "body": "@shavera, &quot;back to the drawing board&quot; is only a temporary set back. Once you have cleaned up the design, I have a feeling you will be glad you took the time to design the program well."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1420646337, "creation_date": 1420646337, "answer_id": 27823391, "question_id": 27823235, "link": "https://stackoverflow.com/questions/27823235/c-partial-specialization-of-class-in-source-not-header/27823391#27823391", "title": "C++ Partial-specialization of class in source not header", "body": "<p>You said:</p>\n\n<blockquote>\n  <p><code>template&lt;typename A&gt;\n    Foo&lt;A, Beta&gt;::Foo(){/* some specialized construction */} //&lt;- this doesn't work.</code></p>\n</blockquote>\n\n<p>You can use that only if you specialize the entire class. You can't specialize just one member function of the class.</p>\n\n<p>The following should work:</p>\n\n<pre><code>template&lt;typename A&gt; class Foo&lt;A, Beta&gt;\n{\n   Foo();\n};\n\ntemplate&lt;typename A&gt; \nFoo&lt;A, Beta&gt;::Foo()\n{\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420648477, "post_id": 27824008, "comment_id": 44054019, "body": "This seems like a useful solution.  I think, however, I&#39;m going to go with (what feels to me very poor design)      Foo&lt;A, B&gt;(){       if(typeID(Beta) == typeID(B)) doBetaConstructionStuff();       if(typeID(Beth) == typeID(B)) doBethConstructionStuff();     }"}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 0, "creation_date": 1420649698, "post_id": 27824008, "comment_id": 44054768, "body": "No, you&#39;re right, that was a bad design. I&#39;m going with the template specialization below after all."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "edited": false, "score": 1, "creation_date": 1420650136, "post_id": 27824008, "comment_id": 44055005, "body": "That&#39;s great news shavera. A little work now will save many painful days in the future."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1420648194, "creation_date": 1420648194, "answer_id": 27824008, "question_id": 27823235, "link": "https://stackoverflow.com/questions/27823235/c-partial-specialization-of-class-in-source-not-header/27824008#27824008", "title": "C++ Partial-specialization of class in source not header", "body": "<p>As mentioned by others - you cannot partially specialise a function. However, you can defer work in template functions to specialised implementation functions, which does give the effect of partial specialisation, for instance:</p>\n\n<pre><code>template&lt;class X&gt;\nX make_a_B()\n{\n    return X();  // default implementation\n}\n\ntemplate&lt;&gt;\nBeta make_a_B&lt;Beta&gt;()\n{\n    Beta b;\n    // do custom things with b...\n    return b;  // fully specialised for Beta, everything else uses default case.\n}\n\ntemplate&lt;class X&gt;\nX make_an_A()\n{\n    return X();\n}\n\ntemplate&lt;typename A, typename B&gt;\nclass Foo{\npublic:\n    Foo()\n    : _myA( make_an_A&lt;A&gt;() )\n    , _myB( make_a_B&lt;B&gt;() )\n    {}\n\n    /*..*/\n    A _myA;\n    B _myB;\n};\n</code></pre>\n\n<p><code>Foo&lt;Alpha, Beta&gt;()</code> will now behave differently to <code>Foo&lt;Alpha, Gamma&gt;()</code></p>\n"}], "owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2223, "favorite_count": 0, "accepted_answer_id": 27823391, "answer_count": 2, "score": 1, "last_activity_date": 1420648194, "creation_date": 1420645850, "question_id": 27823235, "link": "https://stackoverflow.com/questions/27823235/c-partial-specialization-of-class-in-source-not-header", "title": "C++ Partial-specialization of class in source not header", "body": "<p>Foo.h</p>\n\n<pre><code>template&lt;typename A, typename B&gt;\nclass Foo{\npublic:\n  Foo();\n  /*..*/\n};\n</code></pre>\n\n<p>Foo.cpp</p>\n\n<pre><code>template&lt;typename A, typename B&gt;\nFoo&lt;A, B&gt;::Foo(){/*...*/}\n\ntemplate&lt;typename A&gt;\nFoo&lt;A, Beta&gt;::Foo(){/* some specialized construction */} //&lt;- this doesn't work.\n\ntemplate&lt;&gt;\nFoo&lt;Alpha, Beta&gt;::Foo(){/*...*/} // &lt;-will work, but I want partial specialization.\n</code></pre>\n\n<p>When I compile, the partially specialized constructor throws an error </p>\n\n<blockquote>\n  <p>nested name specifier 'Foo::' for declaration does not refer into a class, class template or class template partial specialization</p>\n</blockquote>\n\n<p>I imagine I need to declare this partially-specialized class somewhere, but I don't want to have to keep re-declaring the same class ... ie I don't want to have to put the following in the header file:</p>\n\n<pre><code>template&lt;typename A&gt;\nclass Foo_Beta : public Foo&lt;A, Beta&gt;{\npublic:\n  Foo_Beta();\n}\n\n//in cpp\ntemplate&lt;typename A&gt;\nFoo_Beta&lt;A&gt;() : Foo&lt;A, Beta&gt;() {/**specialized constructor stuff**/}\n</code></pre>\n\n<p>Because then I can't construct <em>Foo()</em> that uses the Foo_Beta constructor.</p>\n\n<p>I've tried </p>\n\n<pre><code>template&lt;typename A&gt;\nclass Foo&lt;A,Beta&gt; : public Foo&lt;A, Beta&gt;{\npublic:\n  Foo();\n}\n</code></pre>\n\n<p>but that doesn't compile either. </p>\n\n<p><strong>Essentially, what is the syntax to declare the partial specialization of a class without re-declaring all the internal functions to that class?</strong></p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2012", "intellisense"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1420646271, "post_id": 27823228, "comment_id": 44052539, "body": "The IDE looks for things in the solution, the compiler looks for things in the include paths."}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "edited": false, "score": 0, "creation_date": 1420648008, "post_id": 27823228, "comment_id": 44053697, "body": "Any chance you have the intellisense database switched off (Tools &gt; Options &gt; Text Editor &gt; C/C++ &gt; Advanced &gt; Intellisense &gt; Disable IntelliSense)? This does for some reason prevent the &quot;Open document&quot; command from working on #include statements, and it would of course explain why &quot;find symbol&quot; type commands would fail too."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1420649232, "post_id": 27823228, "comment_id": 44054476, "body": "When you say &quot;All of the paths are set correctly,&quot; are you referring to the paths in Project Properties | Configuration Properties | VC++ Directories?  There are other ways to affect the paths, but this one is the one the IDE seems to understand.  Are you using absolute paths there?"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1420755213, "post_id": 27823228, "comment_id": 44104988, "body": "@AdrianMcCarthy By &quot;all of the paths are set correctly&quot; I mean that the compiler can understand it. Today I noted that when I close IDE and also turn off my pc, the next time that I open project, it finds all files correctly, but after some times it looses data and then I reports it can not find files!"}, {"owner": {"reputation": 1406, "user_id": 1890705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11658fa9ab41dd0c07c874222b1aacb3?s=128&d=identicon&r=PG", "display_name": "reirab", "link": "https://stackoverflow.com/users/1890705/reirab"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1503507168, "post_id": 27823228, "comment_id": 78648838, "body": "@AdrianMcCarthy If you&#39;ll make that into an answer and ping me, you&#39;ll have my upvote. I was having this same problem and adding the paths there (even though they were already included somewhere else that was allowing the compiler to see them) made intellisense happy."}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 909, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420648990, "creation_date": 1420645832, "last_edit_date": 1420648990, "question_id": 27823228, "link": "https://stackoverflow.com/questions/27823228/why-visual-studio-editor-can-not-find-a-header-file-when-compiler-can-find-it", "title": "why visual studio editor can not find a header file, when compiler can find it", "body": "<p>I have a visual studio 2012 project. All of the paths are set correctly, and I can compile the project without any problem.</p>\n\n<p>While using the Visual Studio IDE, I click on a function or class defined in a header, which is not in the root of source directory, and the IDE can not find it. When I select a header file and ask the IDE to open it, the IDE says that it can not find it.</p>\n\n<p>What is the problem and how can I fix it?</p>\n\n<p>I tried to reset IntelliSense cache, but there is no refresh menu on edit -> IntelliSense.#</p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader"], "answers": [{"comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1420658905, "post_id": 27823239, "comment_id": 44060031, "body": "By the way, <code>glProgramUniform*</code> is actually core in OpenGL 4.1 (it was introduced alongside <code>GL_ARB_separate_shader_objects</code>) and also available in older implementations that provide <code>GL_EXT_direct_state_access</code>."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": true, "score": 5, "last_activity_date": 1420645881, "creation_date": 1420645881, "answer_id": 27823239, "question_id": 27823123, "link": "https://stackoverflow.com/questions/27823123/opengl-uniform-behaviour/27823239#27823239", "title": "Opengl uniform behaviour", "body": "<ol>\n<li><p>the <a href=\"https://www.opengl.org/registry/specs/EXT/direct_state_access.txt\">Direct State Access extension</a> (which is included in core 4.5) allows you to set the uniform to a non bound program using <code>glProgramUniform*EXT</code> and you will need to specify the program.</p></li>\n<li><p>uniforms are stored per program, </p></li>\n<li><p>see 1</p></li>\n</ol>\n"}], "owner": {"reputation": 2911, "user_id": 4266765, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/KeB2V.jpg?s=128&g=1", "display_name": "Pilpel", "link": "https://stackoverflow.com/users/4266765/pilpel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 27823239, "answer_count": 1, "score": 3, "last_activity_date": 1420649105, "creation_date": 1420645474, "last_edit_date": 1420649105, "question_id": 27823123, "link": "https://stackoverflow.com/questions/27823123/opengl-uniform-behaviour", "title": "Opengl uniform behaviour", "body": "<p>I've noticed some things that aren't well explained in the opengl docs. Please correct me if I'm wrong.</p>\n\n<ol>\n<li><p>You can't set the value of a uniform if the program isn't the one that opengl is using at that moment. That will generate an error.</p></li>\n<li><p>If you set the value of a uniform in program A, then switch to program B, then switch back to program A, the value stays. Is this reliable?</p></li>\n<li><p>There is no way to set a uniform value to a program that isn't being used at that moment. Is there a workaround?</p></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1420644955, "post_id": 27822898, "comment_id": 44051633, "body": "Did you check the return value on VS? It should return 1."}, {"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 3, "creation_date": 1420645038, "post_id": 27822898, "comment_id": 44051690, "body": "It works fine on ideone. The &quot;runtime error&quot; means that your program is returning a value from <code>main</code> that isn&#39;t <code>0</code>. That is, your program is reporting that there is an error."}], "answers": [{"comments": [{"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1420645065, "post_id": 27822948, "comment_id": 44051718, "body": "Is it guaranteed to do it in that order? It would make sense if it does, but could an optimizing compiler decide to do <code>bool temp = (x &lt; 6); if(4 &lt; temp)</code> instead?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 4, "creation_date": 1420645135, "post_id": 27822948, "comment_id": 44051771, "body": "@wolfPack88: The order is guaranteed by the associativity rules.  If you had <code>f() &lt; x &lt; g()</code> you wouldn&#39;t know whether <code>f()</code> or <code>g()</code> got called first, but <code>x</code> would be compared to the result of <code>f()</code> first."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1420645267, "post_id": 27822948, "comment_id": 44051883, "body": "probably should add that if( 4 &lt; x and x &lt; 6 ) does what he wants"}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1420645368, "post_id": 27822948, "comment_id": 44051962, "body": "good to know that :) Can accept in 5 min, and wow, this answer literally exploded in ups"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 4, "creation_date": 1420645434, "post_id": 27822948, "comment_id": 44052012, "body": "No, not literally. Figuratively. The opposite of literally."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 12, "last_activity_date": 1420644967, "creation_date": 1420644967, "answer_id": 27822948, "question_id": 27822898, "link": "https://stackoverflow.com/questions/27822898/what-does-the-standard-say-about-double-comparision-of-a-single-variable-in-a-si/27822948#27822948", "title": "What does the standard say about double comparision of a single variable in a single if statement?", "body": "<p>This is valid code in both C and C++, but does not do what you meant.  It is the same as:</p>\n\n<pre><code>bool temp = (4 &lt; x);\nif (temp &lt; 6) // always true\n     return 1;  // this is EXIT_FAILURE\n// dead code here returning EXIT_SUCCESS\n</code></pre>\n\n<p>The result of relational operators on primitive types is <code>bool</code> (in C++, <code>int</code> in C), and <code>bool</code> gets promoted to <code>int</code> for the subsequent comparison, giving the value <code>0</code> or <code>1</code>, always.</p>\n\n<p>Since both <code>0</code> and <code>1</code> are less than <code>6</code>, the condition is always true.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1420645273, "post_id": 27822989, "comment_id": 44051887, "body": "Indeed, because <code>EXIT_SUCCESS</code> in <code>stdlib.h</code> is defined as <code>0</code>, and this code takes the other branch."}], "tags": [], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "is_accepted": false, "score": 5, "last_activity_date": 1420645056, "creation_date": 1420645056, "answer_id": 27822989, "question_id": 27822898, "link": "https://stackoverflow.com/questions/27822898/what-does-the-standard-say-about-double-comparision-of-a-single-variable-in-a-si/27822989#27822989", "title": "What does the standard say about double comparision of a single variable in a single if statement?", "body": "<p>Ben Voigt's answer is correct, of course, but I want to address the \"runtime error\" part of the question:</p>\n\n<p>It's works just as fine in Visual Studio as it does on ideone. <a href=\"http://ideone.com/7F7bMv\">The <code>return 1;</code> is reported by ideone as a <code>runtime error</code></a>. Visual Studio has the same return value; it just doesn't complain as loudly as ideone does.</p>\n"}], "owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1420645922, "answer_count": 2, "score": -1, "last_activity_date": 1420645311, "creation_date": 1420644840, "question_id": 27822898, "link": "https://stackoverflow.com/questions/27822898/what-does-the-standard-say-about-double-comparision-of-a-single-variable-in-a-si", "closed_reason": "Duplicate", "title": "What does the standard say about double comparision of a single variable in a single if statement?", "body": "<p>I tried this code on <a href=\"http://ideone.com/tdo29h\" rel=\"nofollow\">ideone</a> and on Visual Studio 2013:</p>\n\n<pre><code>int main()\n{\n    int x = 5;\n    if(4 &lt; x &lt; 6)\n    {\n        return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It produces a runtime error on ideone but works perfectly fine on VS.</p>\n\n<p>What does the standard say about this nonconsistent behaviour. I know there are compilation warnings but I'm wondering why this isn't natively/officially supported?</p>\n"}, {"tags": ["c++", "qt", "qt4"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4429396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f51c0a0b410687dd989e084e658db283?s=128&d=identicon&r=PG&f=1", "display_name": "knuut", "link": "https://stackoverflow.com/users/4429396/knuut"}, "edited": false, "score": 0, "creation_date": 1420701483, "post_id": 27823230, "comment_id": 44074662, "body": "Thanks a lot. That helped me! But now I have a second problem. The read &quot;connectSamba.readAllStandardError()&quot; -function says, that &quot;mount: only root can use &quot;--types&quot; option&quot;. -.-"}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 61, "user_id": 4429396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f51c0a0b410687dd989e084e658db283?s=128&d=identicon&r=PG&f=1", "display_name": "knuut", "link": "https://stackoverflow.com/users/4429396/knuut"}, "edited": false, "score": 0, "creation_date": 1420706504, "post_id": 27823230, "comment_id": 44076453, "body": "As this is a different question, please can you mark this as answered and start a new one on SO; it makes it easier for others to search for the answer to the same or similar problem."}], "tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": true, "score": 3, "last_activity_date": 1420645836, "creation_date": 1420645836, "answer_id": 27823230, "question_id": 27822854, "link": "https://stackoverflow.com/questions/27822854/mount-network-drives-with-qt/27823230#27823230", "title": "mount network drives with Qt", "body": "<p>Rather wondering if there's another solution, I think you should examine and understand why QProcess doesn't work for you.</p>\n\n<p>Calling <a href=\"http://qt-project.org/doc/qt-4.8/qprocess.html#start-2\" rel=\"nofollow\">QProcess::start</a> in this way will take the first token (mount) as the command and pass each of the following items, separated by a space, as arguments. Therefore, tokens such as \"//\" and \"/folder/\" are not valid arguments for the mount command.</p>\n\n<p>You can use QProcess by doing something like this: -</p>\n\n<pre><code>QProcess connectSamba;\n\nQString mountPath = \"//\" + ip + \"/folder/ \" + mountpath;\nQString terminalArgs = QString(\"-c \\\"mount -t cifs %1\\\"\").arg(mountPath);\nconnectSamba.start(\"/bin/bash\", terminalArgs);\nconnectSamba.waitForFinished();\n</code></pre>\n\n<p>Note that the terminal arguments are surrounded by quotes to ensure that only one argument is passed and we're calling the bash interpreter with the -c argument, which takes commands from the proceeding string.</p>\n"}], "owner": {"reputation": 61, "user_id": 4429396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f51c0a0b410687dd989e084e658db283?s=128&d=identicon&r=PG&f=1", "display_name": "knuut", "link": "https://stackoverflow.com/users/4429396/knuut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1593, "favorite_count": 0, "accepted_answer_id": 27823230, "answer_count": 1, "score": 1, "last_activity_date": 1420645836, "creation_date": 1420644731, "question_id": 27822854, "link": "https://stackoverflow.com/questions/27822854/mount-network-drives-with-qt", "title": "mount network drives with Qt", "body": "<p>i try to mount a network drives(CIFS) in Linux with Qt. But it doesnt work. Is there also another solution, without QProcess?</p>\n\n<pre><code>QProcess connectSamba;\n    QString terminalCommand;\n    terminalCommand = \"mount -t cifs //\" + ip + \"/folder/ \" + mountpath;\n    connectSamba.start(terminalCommand);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "this", "pointer-arithmetic", "this-pointer"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 6, "creation_date": 1420644812, "post_id": 27822829, "comment_id": 44051497, "body": "There is no legitimate reason to do this because an object should not be aware that it is a member of a contiguous array (which this assumes). And your code is infinitely recursive."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 5, "creation_date": 1420644829, "post_id": 27822829, "comment_id": 44051518, "body": "I don&#39;t think length is going to be the source of displeasure in this question."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1420645031, "post_id": 27822829, "comment_id": 44051682, "body": "Stack overflow is not &quot;ask a programmer anything&quot;.  This isn&#39;t nam, there are rules here."}, {"owner": {"reputation": 109, "user_id": 1306169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d2ce3c8767697340547ffd0d45db5?s=128&d=identicon&r=PG", "display_name": "Whaa", "link": "https://stackoverflow.com/users/1306169/whaa"}, "edited": false, "score": 0, "creation_date": 1420646030, "post_id": 27822829, "comment_id": 44052396, "body": "Please notice that nowhere does the question ask if this is a good idea generally. It obviously isn&#39;t."}, {"owner": {"reputation": 3951, "user_id": 757345, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7f74fb14f4e7366f5a10160a299bc9c5?s=128&d=identicon&r=PG", "display_name": "DanielHsH", "link": "https://stackoverflow.com/users/757345/danielhsh"}, "edited": false, "score": 2, "creation_date": 1420661987, "post_id": 27822829, "comment_id": 44061713, "body": "There is one good use case when you want to use this[1]. Sometimes you want a pointer to the end of the class (to test buffer overrun on its private variable). You typically do (char*)this + sizeof(*this). However in some cases this will yield a wrong result (if the size of the class is changed during compilation). In that case this[1] might help you. Usually class is defined once and should not change during compilation. But if you include a legacy old .h files that have #pragma pack(push, 1) in them (were popular in 1990-2000 years to reduce memory usage) than this[1] comes in handy."}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 5, "last_activity_date": 1422472998, "last_edit_date": 1495542034, "creation_date": 1420645088, "answer_id": 27823007, "question_id": 27822829, "link": "https://stackoverflow.com/questions/27822829/pointer-arithmetic-on-the-this-pointer/27823007#27823007", "title": "Pointer arithmetic on the &quot;this&quot; pointer", "body": "<p>Short answer: don't.</p>\n\n<p>Of course, you do all sorts of black magic with this, e.g. access previous or next array elements like you've shown, access a private member of a base class via pointer offset, or get a 'unique' ID of the object from its memory location, as long as it's never moved. But all of this is very likely to backfire at some time, and for everything I can think of there is a safer solution.</p>\n\n<p>One legitimate use I can think of is alignment checking. Say you have a <code>float4</code> class that requires 16-byte alignment, you could put an assertion in the constructor that guarantees that <a href=\"https://stackoverflow.com/questions/1898153/how-to-determine-if-memory-is-aligned-testing-for-alignment-not-aligning\"><code>(((uintptr_t)(const void *)(this)) % 16 == 0)</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1420645590, "creation_date": 1420645590, "answer_id": 27823158, "question_id": 27822829, "link": "https://stackoverflow.com/questions/27822829/pointer-arithmetic-on-the-this-pointer/27823158#27823158", "title": "Pointer arithmetic on the &quot;this&quot; pointer", "body": "<p>It's legal, but as the comments have been telling you, it is terrible style.</p>\n\n<p>You shouldn't do this except if you are a toolchain developer writing conformance tests.</p>\n"}], "owner": {"reputation": 109, "user_id": 1306169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d2ce3c8767697340547ffd0d45db5?s=128&d=identicon&r=PG", "display_name": "Whaa", "link": "https://stackoverflow.com/users/1306169/whaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "closed_date": 1420645739, "answer_count": 2, "score": 1, "last_activity_date": 1422472998, "creation_date": 1420644666, "last_edit_date": 1420645472, "question_id": 27822829, "link": "https://stackoverflow.com/questions/27822829/pointer-arithmetic-on-the-this-pointer", "closed_reason": "Opinion-based", "title": "Pointer arithmetic on the &quot;this&quot; pointer", "body": "<p>What are some legitimate and/or interesting uses for performing pointer-arithmetic on C++'s \"this\" pointer, if any?</p>\n\n<p>Just to make SE pleased with the length of this question, I'll include some relevant code.</p>\n\n<pre><code>class Foo\n{\npublic:\n    Foo(bool terminate = false)\n        : _data(terminate ? -1 : 0)\n    {}\n\n    void Bar(void)\n    {\n        if (_data &gt;= 0)\n        {\n            _data++;\n            this[1].Bar();\n        }\n    }\n\nprivate:\n    int _data;\n};\n\nvoid main()\n{\n    std::vector&lt;Foo&gt; vec;\n    vec.push_back(Foo());\n    vec.push_back(Foo());\n    vec.push_back(Foo());\n    vec.push_back(Foo());\n    vec.push_back(Foo(true));\n\n    vec[2].Bar();\n}\n</code></pre>\n"}, {"tags": ["c++", "binary", "boolean"], "answers": [{"comments": [{"owner": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 1, "creation_date": 1420646862, "post_id": 27823499, "comment_id": 44052932, "body": "The bit-string is <i>reversed</i> in the OP&#39;s 32-bit example, not padded."}, {"owner": {"reputation": 127, "user_id": 3796139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8466a8636e326ec1cc2abd37805763c2?s=128&d=identicon&r=PG&f=1", "display_name": "k99731", "link": "https://stackoverflow.com/users/3796139/k99731"}, "edited": false, "score": 0, "creation_date": 1420649319, "post_id": 27823499, "comment_id": 44054538, "body": "I need to store the binary in array because I will need it later and there is a lot of number. is there a way that can create a lot of bitset, that is, foo1, foo2, foo3, ...?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 127, "user_id": 3796139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8466a8636e326ec1cc2abd37805763c2?s=128&d=identicon&r=PG&f=1", "display_name": "k99731", "link": "https://stackoverflow.com/users/3796139/k99731"}, "edited": false, "score": 0, "creation_date": 1420652647, "post_id": 27823499, "comment_id": 44056492, "body": "@k99731 I have three clarification questions: 1) Did you mean to reverse the bits of 98 in your original question? 2) You can create as many <code>bitset</code>s as you want, are you perhaps thinking of creating an array of them? 3) Why do you need to store as a <code>bool[]</code> why will a <code>bitset</code> not work?"}, {"owner": {"reputation": 127, "user_id": 3796139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8466a8636e326ec1cc2abd37805763c2?s=128&d=identicon&r=PG&f=1", "display_name": "k99731", "link": "https://stackoverflow.com/users/3796139/k99731"}, "edited": false, "score": 0, "creation_date": 1420675839, "post_id": 27823499, "comment_id": 44067729, "body": "1. Yes. But i in fact want to get the binary (not necessarily reversed) of eg 100 integer.  2. how to create as many as bitset as different variable?  3. i want it in bool array since i dont know a way to create as mant bitsets as i want."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 127, "user_id": 3796139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8466a8636e326ec1cc2abd37805763c2?s=128&d=identicon&r=PG&f=1", "display_name": "k99731", "link": "https://stackoverflow.com/users/3796139/k99731"}, "edited": false, "score": 0, "creation_date": 1420720294, "post_id": 27823499, "comment_id": 44083935, "body": "@k99731 OK I&#39;ve updated the answer with some example code. In this example <code>foo[42]</code> is the 42nd <code>bitset</code> created and <code>foo[42][13]</code> is the 13th bit of the 42nd <code>bitset</code> created."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1420720075, "last_edit_date": 1420720075, "creation_date": 1420646665, "answer_id": 27823499, "question_id": 27822739, "link": "https://stackoverflow.com/questions/27822739/binary-expression-of-integer-to-boolean-array/27823499#27823499", "title": "binary expression of integer to boolean array", "body": "<p>I think you're on the right track with <code>bitset</code>.</p>\n\n<p>To construct a <code>bitset</code> of size 32 containing 98 you can just do:</p>\n\n<pre><code>bitset&lt;32&gt; foo(98);\n</code></pre>\n\n<p>You could also construct so insert that in the most significant bits by doing:</p>\n\n<pre><code>bitset&lt;32&gt; foo(98 &lt;&lt; 24);\ncout &lt;&lt; foo.to_string() &lt;&lt; endl; // Prints: 01100010000000000000000000000000\n</code></pre>\n\n<p>As far as converting <code>bitset</code> to an array, there's no need you can use the <code>operator[]</code> on <code>bitset</code>. Plus you get:</p>\n\n<ul>\n<li><code>all</code></li>\n<li><code>any</code></li>\n<li><code>count</code></li>\n<li><code>flip</code></li>\n<li><code>none</code></li>\n<li><code>reset</code></li>\n<li><code>set</code></li>\n<li><code>to_string</code></li>\n<li><code>to_ulong</code></li>\n<li><code>to_ullong</code></li>\n</ul>\n\n<p>Plus all the logical operators that are supported by integers.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>OK let's say you have 100 <code>int</code>s that you want to put into <code>bitset&lt;sizeof(int)&gt;</code>s in: <code>vector&lt;int&gt; bar;</code> Lets also say for the point of example that you want to reverse only the odd <code>int</code>s. Here's what I would do:</p>\n\n<pre><code>vector&lt;bitset&lt;sizeof(int) * 8&gt;&gt; foo(bar.size()); // Creating as many empty bitsets as there are ints in bar\n\nfor (int i = 0; i &lt; bar.size(); ++i){\n    foo[i] = bar[i]; // Initializing each element of foo\n\n    if (foo[i][0].test()){ // Is this number odd\n        for (int j = 0; j &lt; foo[i].size() / 2; ++j){ // This loop reverses the elements in a bitset\n            const bool swap = foo[i][j];\n\n            foo[i][j] = foo[i][foo[i].size() - j - 1];\n            foo[i][foo[i].size() - j - 1] = swap;\n        }\n    }\n    cout &lt;&lt; i &lt;&lt; \". \" &lt;&lt; foo[i] &lt;&lt; endl; // This is for testing purposes it'll print the contents of the indexed bitset in foo\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 3796139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8466a8636e326ec1cc2abd37805763c2?s=128&d=identicon&r=PG&f=1", "display_name": "k99731", "link": "https://stackoverflow.com/users/3796139/k99731"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 27823499, "answer_count": 1, "score": 0, "last_activity_date": 1420720075, "creation_date": 1420644432, "question_id": 27822739, "link": "https://stackoverflow.com/questions/27822739/binary-expression-of-integer-to-boolean-array", "title": "binary expression of integer to boolean array", "body": "<p>Given an integer, I want to get its binary expression, and save it in a boolean array.</p>\n\n<p>For example, </p>\n\n<pre><code>bool b[32];\nint a=98; // a=0b1100010\n</code></pre>\n\n<p>I hope there is a way to make b becomes 010001100000000000000000 or something similar.</p>\n\n<p>I know little about bitset, but I don't know how to convert bitset to boolean array (other than using for loop).</p>\n\n<p>I thought it 98 is store in computer as a sequence of 1 or 0, there should be some way that we can get that sequence out, but I don't know how to do it.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "mfc", "modal-dialog"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420644337, "post_id": 27822602, "comment_id": 44051140, "body": "Have you looked at the previous line in the stack?  It&#39;s hard to read from what you posted.  Or, have you tried setting a breakpoint in the DoModal code?"}, {"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420644492, "post_id": 27822602, "comment_id": 44051257, "body": "CDialog is MFC class, <code>CDialog::DoModal</code> is virtual function. And previous line does not tell me exactly which Dialog is getting called."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420644675, "post_id": 27822602, "comment_id": 44051410, "body": "From the little I can see, it looks like you have a dialog based application.  That would imply that the call to DoModal is within the InitInstance method of &quot;CMFCSampleApp&quot;."}, {"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420644853, "post_id": 27822602, "comment_id": 44051538, "body": "You are right, but can you tell me which class is handing dialog. I mean which dialog is exactly shown using DoModal()?"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420645135, "post_id": 27822602, "comment_id": 44051770, "body": "You should be able to determine that by looking at the InitInstance  method of the &quot;CMFCSampleApp&quot;.  If it is a dialog based app, it will have a call to DoModal.  The call will be made from an instantiated class.  Once you have the class, look into the class header of the source code.  It will have the dialog resource that is being loaded."}, {"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420645203, "post_id": 27822602, "comment_id": 44051828, "body": "What if my application has 100 dialogs, and I want to know which one is getting called right now. Please try it yourself in Visual Studio, you will understand my problem."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420645264, "post_id": 27822602, "comment_id": 44051879, "body": "Please post the code for the InitInstance method."}, {"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420645378, "post_id": 27822602, "comment_id": 44051972, "body": "MSDN: Sometimes your code may break in the message pump. In that case, there is no user code on the call stack."}, {"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1420645424, "post_id": 27822602, "comment_id": 44052002, "body": "Please try it on VS, then we can discuss, this has nothing to do with what is written in InitInstance, all MFC developer knows what is written there."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "reply_to_user": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "edited": false, "score": 0, "creation_date": 1420645454, "post_id": 27822602, "comment_id": 44052022, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/68353/discussion-between-rrirower-and-pranit-kothari\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "edited": false, "score": 0, "creation_date": 1420650047, "post_id": 27824434, "comment_id": 44054965, "body": "Your answer upto certain extent ease my solution, but it will not solve problem completely. +1 though, because it is good workaround."}], "tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": true, "score": 2, "last_activity_date": 1420649558, "creation_date": 1420649558, "answer_id": 27824434, "question_id": 27822602, "link": "https://stackoverflow.com/questions/27822602/how-to-find-exactly-from-which-class-domodal-is-called/27824434#27824434", "title": "How to find exactly from which class DoModal() is called?", "body": "<p>It's easier to find the class if you set a breakpoint in the CDialog constructor.  From the call stack from there you will be able to see what your dialog class is.</p>\n"}, {"tags": [], "owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "is_accepted": false, "score": 0, "last_activity_date": 1420763567, "creation_date": 1420763567, "answer_id": 27852056, "question_id": 27822602, "link": "https://stackoverflow.com/questions/27822602/how-to-find-exactly-from-which-class-domodal-is-called/27852056#27852056", "title": "How to find exactly from which class DoModal() is called?", "body": "<p>You could set your breakpoint in <code>CDialog::OnInitDialog()</code>, which is eventually called by <code>DoModal()</code>.</p>\n\n<p><code>OnInitDialog</code> method is almost always overridden by the \"leaf\" CDialog-derived class (although not necessarily) but more importantly, always chained back.  So just move up the call stack to the \"first\" call to <code>OnInitDialog()</code> and that should reference the class.</p>\n\n<p>If it is not the 'leaf' class, or it was not chained back, @JoeWillcoxson answer still works.</p>\n"}], "owner": {"reputation": 8947, "user_id": 744616, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Pfhc.jpg?s=128&g=1", "display_name": "Pranit Kothari", "link": "https://stackoverflow.com/users/744616/pranit-kothari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 27824434, "answer_count": 2, "score": 0, "last_activity_date": 1420763567, "creation_date": 1420644012, "question_id": 27822602, "link": "https://stackoverflow.com/questions/27822602/how-to-find-exactly-from-which-class-domodal-is-called", "title": "How to find exactly from which class DoModal() is called?", "body": "<p>I am working in MFC application which has lots of dialog box. I am not able to tell which class or function created this dialog box while debugging.</p>\n\n<p>To illustrate the problem I have created a simple <em>Dialog based MFC application</em>. Run it in debug mode and pause the debugging. </p>\n\n<p>I can see DoModal is called in call stack using <code>CDialog::DoModal()</code>. How do I understand exactly which function and from which class this <code>DoModal()</code> is getting called?</p>\n\n<p><img src=\"https://i.stack.imgur.com/169Zc.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "function", "design-patterns"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1420644054, "post_id": 27822534, "comment_id": 44050950, "body": "&quot;Ordinarily, it is a bad idea to declare a function locally.&quot;  ;)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420644056, "post_id": 27822534, "comment_id": 44050953, "body": "When you explicitly want to hide all but one specific overload?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1420644127, "post_id": 27822534, "comment_id": 44051006, "body": "Though it&#39;s probably a better idea to select that one explicitly with a cast then..."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1420645639, "post_id": 27822534, "comment_id": 44052154, "body": "I don&#39;t understand how your Scheme code is similar in any way."}, {"owner": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1420646458, "post_id": 27822534, "comment_id": 44052644, "body": "@molbdnilo the lambda expression is a function defined inside the <code>powerset</code> function definition."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1420656217, "post_id": 27822534, "comment_id": 44058504, "body": "@athos Yes, and there is no similarity between that and the declaration in C++."}, {"owner": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1420686043, "post_id": 27822534, "comment_id": 44070304, "body": "@molbdnilo thanks, that was my misunderstanding"}], "answers": [{"comments": [{"owner": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "edited": false, "score": 0, "creation_date": 1420644430, "post_id": 27822667, "comment_id": 44051211, "body": "I don&#39;t get it. In the sample, internally declared function A <code>print(int);</code> actually hides all outside ones, B <code>print(const string &amp;);</code> and C <code>print(double);</code>. So you still need to define the A. Even if there are A and B declared outside and internally re-declare A , you still need to redefine A, there&#39;s no saving..."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "edited": false, "score": 0, "creation_date": 1420645327, "post_id": 27822667, "comment_id": 44051926, "body": "@athos I have not understood what you have said about &quot;saving:. See my updated post. It contains a similar example what shows why local function declaration is useful."}, {"owner": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "edited": false, "score": 0, "creation_date": 1420646558, "post_id": 27822667, "comment_id": 44052726, "body": "@vlad_from_moscow thanks! now i got it. so <code>f(double)</code> only needs to be re-declared inside <code>main()</code>, no re-definition is needed."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "edited": false, "score": 0, "creation_date": 1420646720, "post_id": 27822667, "comment_id": 44052825, "body": "@athos  Of course each function that is called shall be defined. Otherwise the linker will issue an error. But the problem is not related to a function definition. It deals with an ambiguity of a function call. And that to resolve this ambiguity local function declaration is used."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1420646947, "last_edit_date": 1420646947, "creation_date": 1420644208, "answer_id": 27822667, "question_id": 27822534, "link": "https://stackoverflow.com/questions/27822534/c-whats-the-usage-of-declaring-a-function-inside-another-function/27822667#27822667", "title": "C++: what&#39;s the usage of declaring a function inside another function?", "body": "<p>The problem arises when there is an ambiguity in calling a function. Thus to avoid the ambiguity in some scope you can redeclare the required function that hides all other functions with the same name of the outer scope.</p>\n\n<p>Consider the following simple example. If you run the following program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f( int ) { std::cout &lt;&lt; \"f( int )\" &lt;&lt; std::endl; }\nvoid f( double ) { std::cout &lt;&lt; \"f( double )\" &lt;&lt; std::endl; }\n\nint main() \n{\n    f( 10l );\n\n    return 0;\n}\n</code></pre>\n\n<p>you will get an error like</p>\n\n<p>prog.cpp:10:9: error: call of overloaded 'f(long int)' is ambiguous   f( 10l );</p>\n\n<p>But if you will add a declaration of function f within main like this</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f( int ) { std::cout &lt;&lt; \"f( int )\" &lt;&lt; std::endl; }\nvoid f( double ) { std::cout &lt;&lt; \"f( double )\" &lt;&lt; std::endl; }\n\nint main() \n{\n    void f( double );\n    f( 10l );\n\n    return 0;\n}\n</code></pre>\n\n<p>the code will be compiled and the output will look like</p>\n\n<pre><code>f( double )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1420646514, "creation_date": 1420646514, "answer_id": 27823450, "question_id": 27822534, "link": "https://stackoverflow.com/questions/27822534/c-whats-the-usage-of-declaring-a-function-inside-another-function/27823450#27823450", "title": "C++: what&#39;s the usage of declaring a function inside another function?", "body": "<p>Your scheme example both declares and defines a local function.</p>\n\n<p>The C++ example just declares a function locally.</p>\n\n<p>These are different things.</p>\n\n<p>You can create the rough equivalent of scheme local functions with lambdas in C++11.</p>\n\n<p>The declaring of a function locally just says \"there exist a function of this name and signature\".  What more, it does so in a narrower scope than the one outside the function, and as there are functions in said narrower scope only they are considered for overloading (not the ones in the wider scope).</p>\n\n<p>No new function is created -- it must be defined elsewhere.  (You cannot define a local function in C++, barring things like local class methods and lambdas)</p>\n\n<p>You could use this to change how overload resolution works, but this is rarely a good idea.  In the case that you have an overload ambiguity, you are better off manually converting the types and then calling the overload set, and have it resolve normally.</p>\n\n<p>An alternative is to declare only the overload you want to invoke, then invoke it.  This can result in surprising behavior, so do so only in a very narrow scope if you can, and document why you are doing it and what possible problems could occur (as few programmers will have the scope-hiding overload rules at the front of their brain when reading your code without at least a bit of prompting).</p>\n\n<p>I do not think I have ever ran into a situation where I had to declare a function locally.</p>\n\n<p>The handful of times I did it it was because I was hacking into some serious ball of mud code, and wanted to make an extremely local change for prototype/debugging purposes.  I simply declared a function signature and called it somewhere.  The function was a static local in another .cpp file in the same library elsewhere, I removed the static there and tested the result of calling it.</p>\n\n<p>This saved creating a header file (or modifying one), exposing it formally, including said header where we where using it.  Prior to committing to production I would go through steps like that (and probably clean up the interface of that static local function while I was at it).</p>\n\n<p>So, I used it for a quick and dirty prototype hack.  The last time I did this I ended up reverting it after I did the prototype hack, which was easier because I had only touched 2 files each at 1 spot.</p>\n"}], "owner": {"reputation": 5460, "user_id": 826203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ae7b03db7483523fc909e19edbe5dec?s=128&d=identicon&r=PG", "display_name": "athos", "link": "https://stackoverflow.com/users/826203/athos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 2, "accepted_answer_id": 27822667, "answer_count": 2, "score": 1, "last_activity_date": 1420646947, "creation_date": 1420643838, "last_edit_date": 1420644200, "question_id": 27822534, "link": "https://stackoverflow.com/questions/27822534/c-whats-the-usage-of-declaring-a-function-inside-another-function", "title": "C++: what&#39;s the usage of declaring a function inside another function?", "body": "<p>Stanley Lippman's \"C++ primer\" mentioned, in page 234 that </p>\n\n<blockquote>\n  <p>Ordinarily, it is a bad idea to declare a function locally. However,\n  to explain how scope interacts with overloading, we will violate this\n  practice and use local function declarations.</p>\n</blockquote>\n\n<pre><code>...\nvoid print(const string &amp;);\nvoid print(double); // overloads the print function\nvoid fooBar(int ival)\n{ ...\n  // bad practice: usually it's a bad idea to declare functions at local scope\n  void print(int); // new scope: hides previous instances of print\n  print(ival); // ok: print(int) is visible\n  print(3.14); // ok: calls print(int); print(double) is hidden\n}\n</code></pre>\n\n<p>Nevertheless, which situation it might make sense to do so, declaring a function inside the body of a function?</p>\n\n<p>I recall similar code in Scheme:</p>\n\n<pre><code>(define (PowerSet set)\n   (if (null? set) '(())\n      (let ((PowerSetAfterHead (PowerSet (cdr set) ) ))\n         (append PowerSetAfterHead\n            (PowerSet (cdr set) )\n            (map\n               (lambda (subset)\n                  (cons (car set) subset\n                  )\n               )\n               (PowerSet (cdr set) )                                 \n            )\n         )\n      )\n   )\n)\n</code></pre>\n\n<p>Is it normally used to hide from misuse of a \"local function\" that intends for the outer function's usage only? something like internal class? Or is it useful in some design patterns?</p>\n"}, {"tags": ["c++", "vector", "shared-ptr", "unique-ptr"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 1, "creation_date": 1420644047, "post_id": 27822493, "comment_id": 44050945, "body": "Hard to tell, but it looks to me like your error is that <code>IFContent</code> constructor doesn&#39;t accept a <code>unique_ptr&lt;IFCt&gt;</code>."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1420644234, "post_id": 27822493, "comment_id": 44051082, "body": "IFC constructor has a IFO* parameter.  But shouldn&#39;t the default constructor for IFC accept an IFC? (BTW that&#39;s a typo...IFCt is being changed to IFC above now)."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420645561, "post_id": 27822493, "comment_id": 44052097, "body": "Do you really want to create a new object from the <code>rupIFC</code> argument, or is that just because you couldn&#39;t get it to work? Do you just want to push <code>rupIFC</code> into the container instead?"}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420645878, "post_id": 27822493, "comment_id": 44052301, "body": "It&#39;s the first way I thought of doing it.  I didn&#39;t think I could push_back my unique pointer onto a vector of shared_ptrs.  They need to be different...unique_ptr and vec of shared_ptrs."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420646117, "post_id": 27822493, "comment_id": 44052441, "body": "But if you thought it wouldn&#39;t work why did you try to do exactly the same thing with a new <code>unique_ptr</code>?!"}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420646312, "post_id": 27822493, "comment_id": 44052559, "body": "You are mis-understanding me.  I created a copy so I could change the type of pointer, which was what I thought I needed."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420646468, "post_id": 27822493, "comment_id": 44052652, "body": "But you didn&#39;t change it ... <code>rupIFC</code> is a <code>unique_ptr&lt;IFC&gt;</code> and then you create another <code>unique_ptr&lt;IFC&gt;</code> ... that&#39;s the same type."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420647343, "post_id": 27822493, "comment_id": 44053259, "body": "where?  I convert a unique ptr to shared ptr and push_back onto the vector."}], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420644450, "post_id": 27822659, "comment_id": 44051225, "body": "I don&#39;t have a getter for rupIFC.get().  I should be able to use the default constructor here, with <i>m_shpVectorIFC.push_back(std::shared_ptr&lt;IFC&gt;(new IFContent(rupIFC)))</i>, shouldn&#39;t I?"}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "reply_to_user": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 1, "creation_date": 1420644547, "post_id": 27822659, "comment_id": 44051306, "body": "<code>rupIFC</code> is a <code>unique_ptr</code>, which defines <code>get()</code> to provide a raw pointer to the underlying object (I think you indicated that <code>IFContent</code>&#39;s constructor needs a raw pointer?)."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420644667, "post_id": 27822659, "comment_id": 44051403, "body": "Yes, IFC&#39;s constructor needs a ptr to IFO:  IFC::IFC(IFO* pParent) : IFO(pParent) {  } /"}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420644729, "post_id": 27822659, "comment_id": 44051450, "body": "It seems to be happy once I put the get() in there.  Thanks!"}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "reply_to_user": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 1, "creation_date": 1420644818, "post_id": 27822659, "comment_id": 44051507, "body": "Just make sure ownership is clearly defined--if <code>IFContent</code> holds onto that pointer and tries to delete it later, you&#39;ll be in trouble when the original <code>unique_ptr</code> does the same thing."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1420644835, "post_id": 27822659, "comment_id": 44051524, "body": "<code>unique_ptr</code> is convertible to <code>shared_ptr</code> so you <b>can</b> do this"}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420644921, "post_id": 27822659, "comment_id": 44051599, "body": "@JonathanWakely I&#39;m surprised by that, but you&#39;re right. I will edit accordingly."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1420645233, "post_id": 27822659, "comment_id": 44051857, "body": "What&#39;s surprising about being able to transfer ownership from one smart pointer that to another? The conversion is perfectly safe, having the effect of releasing the object owned by the <code>unique_ptr</code> and transferring ownership to a <code>shared_ptr</code> instead."}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420645697, "post_id": 27822659, "comment_id": 44052182, "body": "@JonathanWakely It&#39;s surprising because, while it obviously can and does work, the act of constructing one pointer with another does not clearly (to me) indicate a <i>transfer</i> of ownership. Especially when the type of pointer being constructed is <code>shared_ptr</code>. It seems like this constructor makes it easy to make a mistake."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420645820, "post_id": 27822659, "comment_id": 44052260, "body": "But the relevant <code>shared_ptr</code> takes a <code>unique_ptr</code> rvalue as its argument, which almost always means transfer of ownership ... that&#39;s pretty much the main reason <code>unique_ptr</code> exists! If an object gets constructed from a <code>unique_ptr</code> rvalue it almost always means it is taking ownership of the resources, and if the object being constructed is a <code>shared_ptr</code> then the meaning of it taking ownership from another smart pointer should be self-explanatory."}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420645928, "post_id": 27822659, "comment_id": 44052329, "body": "@JonathanWakely I missed that it had to be <code>unique_ptr&amp;&amp;</code>. I agree that in that case the transfer is unsurprising. But if there was a constructor that took <code>unique_ptr&amp;</code>, my comments would stand. :)"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1420645998, "post_id": 27822659, "comment_id": 44052379, "body": "Well yes, that would make it easy to make mistakes. Luckily the types are carefully designed by smart people so that isn&#39;t a problem."}, {"owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "edited": false, "score": 0, "creation_date": 1420646059, "post_id": 27822659, "comment_id": 44052413, "body": "Which is exactly why it surprised me when I thought you were telling me the lvalue version existed."}], "tags": [], "owner": {"reputation": 8205, "user_id": 3549027, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/38f34cee694143aefa67355314e5ec59?s=128&d=identicon&r=PG&f=1", "display_name": "dlf", "link": "https://stackoverflow.com/users/3549027/dlf"}, "is_accepted": true, "score": 1, "last_activity_date": 1420644957, "last_edit_date": 1420644957, "creation_date": 1420644181, "answer_id": 27822659, "question_id": 27822493, "link": "https://stackoverflow.com/questions/27822493/how-push-back-unique-ptr-parameter-onto-vector-of-shared-ptrs/27822659#27822659", "title": "How push_back unique_ptr parameter onto vector of shared ptrs", "body": "<p>Based on your addendum, you will need to use <code>unique_ptr::get()</code> to provide the <code>IFContent</code> constructor with the raw pointer it wants. Depending on what it does with that pointer, you may actually need to use <code>release</code> instead to prevent double-deletion. Also, no need to create an intermediate <code>unique_ptr</code> when it's just going to be converted right into a <code>shared_ptr</code> anyway:</p>\n\n<pre><code>void IFCCB::addElementVectorIFC(unique_ptr&lt;IFC&gt; rupIFC)\n{\n    m_shpVectorIFC.push_back(std::shared_ptr&lt;IFC&gt;(new IFContent(rupIFC.get())));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1420645967, "post_id": 27822978, "comment_id": 44052354, "body": "it should be ok to create a new copy since when I do the get/pop, I&#39;m creating a copy also."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 4, "last_activity_date": 1420646370, "last_edit_date": 1420646370, "creation_date": 1420645032, "answer_id": 27822978, "question_id": 27822493, "link": "https://stackoverflow.com/questions/27822493/how-push-back-unique-ptr-parameter-onto-vector-of-shared-ptrs/27822978#27822978", "title": "How push_back unique_ptr parameter onto vector of shared ptrs", "body": "<p>The problem is that <code>push_back</code> takes the container's <code>value_type</code>, which is <code>shared_ptr&lt;IFC&gt;</code>, but you are passing it a <code>unique_ptr&lt;IFC&gt;</code> and the conversion from <code>unique_ptr</code> to <code>shared_ptr</code> uses an <code>explicit</code> constructor and can only be done from a <code>unique_ptr</code> rvalue, so the argument cannot be implicitly converted to <code>shared_ptr</code>.</p>\n\n<p>To make it work you need to use <code>std::move</code> to convert the <code>unique_ptr</code> to an rvalue and then  either do the conversion to <code>shared_ptr</code> explicitly:</p>\n\n<pre><code>unique_ptr&lt;IFC&gt; p;\n// ...\nm_shpVectorIFC.push_back(std::shared_ptr&lt;IFC&gt;(std::move(p)));\n</code></pre>\n\n<p>Or use <code>emplace_back</code> instead, because that function can use <code>explicit</code> constructors to construct the new container element:</p>\n\n<pre><code>m_shpVectorIFC.emplace_back(std::move(p)));\n</code></pre>\n\n<p>I'm not convinced your code that creates a new <code>unique_ptr</code> is correct (why can't you just insert <code>rupIFC</code> into the container using either of the solutions shown above?) but if that's really what you want to do, the error you get is because you are trying to pass <code>unique_ptr&lt;IFC&gt;</code> to the <code>IFContent</code> constructor, which takes a <code>IFO*</code> not a <code>unique_ptr&lt;IFC&gt;</code>. To make that compile you need to get the raw pointer out of <code>rupIFC</code>:</p>\n\n<pre><code>std::unique_ptr&lt;IFC&gt;(new IFContent(rupIFC.get()))\n</code></pre>\n\n<p>However this is probably unsafe, because the pointer you passed to the <code>IFContent</code> constructor will be deleted at the end of the function when <code>rupIFC</code> is destroyed, so maybe you meant to release it:</p>\n\n<pre><code>std::unique_ptr&lt;IFC&gt;(new IFContent(rupIFC.release()))\n</code></pre>\n\n<p>N.B. as dlf's answer says, there is no point creating a <code>unique_ptr</code> if you just want to convert it to a <code>shared_ptr</code> immediately, so you could simply do:</p>\n\n<pre><code>m_shpVectorIFC.emplace_back(std::make_shared&lt;IFContent&gt;(rupIFC.release()));\n</code></pre>\n"}], "owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 27822659, "answer_count": 2, "score": 1, "last_activity_date": 1420646370, "creation_date": 1420643748, "last_edit_date": 1420644266, "question_id": 27822493, "link": "https://stackoverflow.com/questions/27822493/how-push-back-unique-ptr-parameter-onto-vector-of-shared-ptrs", "title": "How push_back unique_ptr parameter onto vector of shared ptrs", "body": "<p>I'm having a tough time pushing back a unique_ptr from my method parameter onto a vector of shared pointers.</p>\n\n<p>IFCCB.h:</p>\n\n<pre><code>private:\nvector&lt;shared_ptr&lt;IFC&gt;&gt;  m_shpVectorIFC;\npublic:\nvoid addElementVectorIFC(unique_ptr&lt;IFC&gt; rupIFC);\n</code></pre>\n\n<p>IFCCB.cpp:</p>\n\n<pre><code>void IFCCB::addElementVectorIFC(unique_ptr&lt;IFC&gt; rupIFC)\n{\n    m_shpVectorIFC.push_back(std::unique_ptr&lt;IFC&gt;(new IFContent(rupIFC)));\n}\n</code></pre>\n\n<p>I'm getting the error:</p>\n\n<blockquote>\n  <p>C2664: 'IFC::IFC(const IFC &amp;)' : cannot convert argument 1 from\n  'std::unique_ptr>' to 'IFO *'</p>\n</blockquote>\n\n<p>In this case, IFO is the heirarchical parent of IFC.  I'm not sure why it's looking at that.</p>\n\n<p>I've looked at <a href=\"http://www.cplusplus.com/reference/vector/vector/pop_back/\" rel=\"nofollow\">vector info</a> and <a href=\"http://msdn.microsoft.com/en-us/library/hh279669.aspx\" rel=\"nofollow\">shared_ptr info</a>, as well as <a href=\"http://eli.thegreenplace.net/2012/06/20/c11-using-unique_ptr-with-standard-library-containers/\" rel=\"nofollow\">using unique_ptr with standard library containers</a>.</p>\n\n<p>Any ideas?  I'm not used to working with shared_ptrs and unique_ptrs.</p>\n"}, {"tags": ["c++", "placement-new"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 2, "creation_date": 1420643523, "post_id": 27822395, "comment_id": 44050581, "body": "The right way to allocate arrays in c++ is to use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1420643791, "post_id": 27822395, "comment_id": 44050758, "body": "@Mgetz: Usually, yes. But sometimes you want to avoid the cost of initialising the allocated memory, and there&#39;s no (well-defined) way to do that with <code>vector</code>."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1420643896, "post_id": 27822395, "comment_id": 44050834, "body": "@MikeSeymour <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\">I do believe there is actually</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1420643907, "post_id": 27822395, "comment_id": 44050840, "body": "If you just want to allocate a chunk of memory of a specific size, why use the confusing <code>operator new</code> function, instead of using the operator <code>new[]</code> using e.g. <code>int8_t</code>? The result will be the same, but less confusing to read."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420644511, "post_id": 27822395, "comment_id": 44051273, "body": "Also, if you have special allocation needs, you should probably use <code>std::vector</code> with a custom allocator."}, {"owner": {"reputation": 10424, "user_id": 4047092, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/n5HM6.jpg?s=128&g=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/4047092/ravi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1420652610, "post_id": 27822395, "comment_id": 44056467, "body": "@JoachimPileborg Nice idea. But isn&#39;t use of new[4] would construct objects along with allocating memory."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1420652802, "post_id": 27822395, "comment_id": 44056578, "body": "@ravi Not if you allocate e.g. <code>int8_t</code>, like <code>int8_t* raw = new int8_t[4 * sizeof(Base)];</code>, that just allocates a chunk of bytes, without any initialization or construction."}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 0, "last_activity_date": 1420643992, "creation_date": 1420643992, "answer_id": 27822594, "question_id": 27822395, "link": "https://stackoverflow.com/questions/27822395/placement-new-on-memory-returned-by-new-and-new/27822594#27822594", "title": "Placement new on memory returned by new and new[]", "body": "<p>Quoting <a href=\"http://www.cplusplus.com/reference/new/operator%20new%5B%5D/\" rel=\"nofollow\">this page</a>:</p>\n\n<blockquote>\n  <p>The default definition allocates memory by calling operator new: ::operator new (size).</p>\n</blockquote>\n\n<p>Judging from this, the result should be exactly the same. Both lines should return an identical pointer.</p>\n\n<p>As @Joachim Pileborg pointed out, you should probably avoid <code>operator new</code>and use the simpler <code>new Base[4]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "is_accepted": false, "score": 0, "last_activity_date": 1420646899, "last_edit_date": 1420646899, "creation_date": 1420644014, "answer_id": 27822603, "question_id": 27822395, "link": "https://stackoverflow.com/questions/27822395/placement-new-on-memory-returned-by-new-and-new/27822603#27822603", "title": "Placement new on memory returned by new and new[]", "body": "<p>The difficulty in answering this question is that there must be some \"really weird thing\" in play before using placement new is a good idea. Without knowing what that thing is, it's difficult to say with any confidence that what you're doing is \"right\".</p>\n\n<p>They do both work.</p>\n\n<p>Using global <code>operator new[]</code> is fairly pointless. All it gives you over global <code>operator new</code> is the ability for you (or some other code in your program) to overload them to do different things, for example to allocate from different sources. So you might consider it slightly better practice to use <code>operator new[]</code> for allocations that are probably large, and then you could later optimize for that purpose elsewhere in your program. But that's a fairly blunt instrument compared with directly using specific allocators for specific purposes. I really don't think it's common, but then using global new <em>at all</em> isn't common.</p>\n\n<p>Also, you don't show the code to release the memory so there's plenty of opportunity there to get it wrong. In general you must call the destructors of each element in turn, then call the global delete operator that matches the new operator you used. For your particular class <code>Base</code> there's actually no harm in failing to destruct it, but if you leave out the destructor calls and later change <code>Base</code> you could run into trouble.</p>\n"}], "owner": {"reputation": 10424, "user_id": 4047092, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/n5HM6.jpg?s=128&g=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/4047092/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1420646899, "creation_date": 1420643402, "question_id": 27822395, "link": "https://stackoverflow.com/questions/27822395/placement-new-on-memory-returned-by-new-and-new", "title": "Placement new on memory returned by new and new[]", "body": "<p>Below is my test class:-</p>\n\n<pre><code>class Base\n{\npublic:\n    int data;\n    Base(int x) : data(x) {}\n};\n</code></pre>\n\n<p>Now, I am using placement new to create objects on already allocated memory:-</p>\n\n<p>CASE_1:-</p>\n\n<pre><code>void* raw = operator new(4* sizeof(Base));\nBase* b = static_cast&lt;Base*&gt;(raw);\n\nfor(int i = 0; i &lt; 4; i++)\n    new (&amp;b[i]) Base(i);\n</code></pre>\n\n<p>CASE_2:-</p>\n\n<pre><code>void* raw = operator new[](4* sizeof(Base));  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\nBase* b = static_cast&lt;Base*&gt;(raw);\n\nfor(int i = 0; i &lt; 4; i++)\n    new (&amp;b[i]) Base(i);\n</code></pre>\n\n<p>In CASE_1 I used plain <code>new</code> to allocate enough memory whereas in Case_2 I used <code>new[]</code> to do that allocation. Both are working fine as I tested:-</p>\n\n<pre><code>for(int i = 0; i &lt; 4; i++)\n{\n    Base* b1 = b;\n    cout &lt;&lt; (*(b1+i)).data;\n}\n</code></pre>\n\n<p>However, I am confused whether CASE_1 is the right way of doing the memory allocation for array of objects. Are both of these approaches similar.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1489, "user_id": 2135355, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/KqrdP.png?s=128&g=1", "display_name": "Ed Rowlett-Barbu", "link": "https://stackoverflow.com/users/2135355/ed-rowlett-barbu"}, "edited": false, "score": 1, "creation_date": 1420643215, "post_id": 27822277, "comment_id": 44050385, "body": "When you have two overloaded h functions: <code>int h (int)</code> and <code>float h(float)</code>, what do you expect <code>result_of(h)</code> to return?"}, {"owner": {"reputation": 19024, "user_id": 286335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6882f075e155c96b4ff0fe3bcab951f3?s=128&d=identicon&r=PG&f=1", "display_name": "cibercitizen1", "link": "https://stackoverflow.com/users/286335/cibercitizen1"}, "reply_to_user": {"reputation": 1489, "user_id": 2135355, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/KqrdP.png?s=128&g=1", "display_name": "Ed Rowlett-Barbu", "link": "https://stackoverflow.com/users/2135355/ed-rowlett-barbu"}, "edited": false, "score": 0, "creation_date": 1420643910, "post_id": 27822277, "comment_id": 44050842, "body": "@Zadirion Good point. But in my problem, either there will be only one h() or, actually, h() will be an input parameter for another function."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1420656351, "post_id": 27822277, "comment_id": 44058579, "body": "Why do you want to find the return value of a function <b>without knowing how you are going to call it</b>?  How is that useful?  Or do you know how you are going to call it?"}], "answers": [{"tags": [], "owner": {"reputation": 3460, "user_id": 1704521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cc4308a6ccfdcf91b73adbbdd9b98710?s=128&d=identicon&r=PG", "display_name": "Andrey Mishchenko", "link": "https://stackoverflow.com/users/1704521/andrey-mishchenko"}, "is_accepted": false, "score": 7, "last_activity_date": 1420643490, "creation_date": 1420643490, "answer_id": 27822419, "question_id": 27822277, "link": "https://stackoverflow.com/questions/27822277/finding-out-the-return-type-of-a-function-lambda-or-function/27822419#27822419", "title": "Finding out the return type of a function, lambda or function", "body": "<p><code>std::result_of&lt;h(int)&gt;::type a;</code></p>\n\n<p>(Taken from <a href=\"http://en.cppreference.com/w/cpp/types/result_of\">here</a>.)</p>\n"}, {"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1420649777, "post_id": 27823546, "comment_id": 44054806, "body": "Is there no way to avoid your traits (or compactify it using some <code>std</code> functionality)?"}, {"owner": {"reputation": 19024, "user_id": 286335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6882f075e155c96b4ff0fe3bcab951f3?s=128&d=identicon&r=PG&f=1", "display_name": "cibercitizen1", "link": "https://stackoverflow.com/users/286335/cibercitizen1"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420650890, "post_id": 27823546, "comment_id": 44055480, "body": "@Walter. There should be. As the traits are no more that boilerplate code, it should exist simply <code>return_type&lt;F&gt;</code> the same way it exists <code>decltype(a)</code>."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420651069, "post_id": 27823546, "comment_id": 44055580, "body": "@Walter because its functionality is limited (as I listed at the beginning), I doubt such trait will be introduced to the Standard Library (currently there is no equivalent, you need to know the arguments&#39; types that you will use, and utilize <code>decltype(func(1,2,3))</code> or <code>std::result_of_t&lt;F(int,int,int)&gt;</code>. Also <a href=\"http://stackoverflow.com/q/27743745/3953764\">there is no easy way</a> to compactify it without a help of macro definitions"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1420656458, "post_id": 27823546, "comment_id": 44058654, "body": "@Walter On top of the limited functionality, its use cases are very narrow.  I hesitate to say &quot;useless&quot;, but it is pretty close to useless.  Overloads should be expected in C++: you should know how you are going to use a type before you ask it what it will return."}, {"owner": {"reputation": 3460, "user_id": 1704521, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cc4308a6ccfdcf91b73adbbdd9b98710?s=128&d=identicon&r=PG", "display_name": "Andrey Mishchenko", "link": "https://stackoverflow.com/users/1704521/andrey-mishchenko"}, "edited": false, "score": 0, "creation_date": 1421170416, "post_id": 27823546, "comment_id": 44253109, "body": "I still find it amazing how much people love answers like this about C++, and how much people love the language features that make these kinds of atrocities possible."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 8, "last_activity_date": 1420651499, "last_edit_date": 1420651499, "creation_date": 1420646793, "answer_id": 27823546, "question_id": 27822277, "link": "https://stackoverflow.com/questions/27822277/finding-out-the-return-type-of-a-function-lambda-or-function/27823546#27823546", "title": "Finding out the return type of a function, lambda or function", "body": "<p>Assuming that:</p>\n\n<ol>\n<li>You want only the return type.</li>\n<li>You don't know what are/will be the types of arguments (so neither <code>decltype()</code> nor <code>std::result_of&lt;&gt;</code> is an option.</li>\n<li>The functor object passed as argument will not have an overloaded or generic <code>operator()</code>.</li>\n</ol>\n\n<p>then you can use the below trait that infers the return type of any functor object:</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct return_type_impl;\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(Args...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(Args..., ...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(*)(Args...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(*)(Args..., ...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(&amp;)(Args...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct return_type_impl&lt;R(&amp;)(Args..., ...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...)&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) &amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) &amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) &amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) &amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) volatile&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) volatile&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) volatile&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) volatile&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) volatile&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) volatile&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const volatile&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const volatile&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const volatile&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const volatile&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args...) const volatile&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct return_type_impl&lt;R(C::*)(Args..., ...) const volatile&amp;&amp;&gt; { using type = R; };\n\ntemplate &lt;typename T, typename = void&gt;\nstruct return_type\n    : return_type_impl&lt;T&gt; {};\n\ntemplate &lt;typename T&gt;\nstruct return_type&lt;T, decltype(void(&amp;T::operator()))&gt;\n    : return_type_impl&lt;decltype(&amp;T::operator())&gt; {};\n\ntemplate &lt;typename T&gt;\nusing return_type_t = typename return_type&lt;T&gt;::type;\n</code></pre>\n\n<p><em>Tests:</em></p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename F&gt;\nvoid test(F h)\n{\n    static_assert(std::is_same&lt;return_type_t&lt;F&gt;, int&gt;{}, \"!\");\n\n    return_type_t&lt;F&gt; i = 1;\n}\n\nint function(int i) { return 2*i; }\n\nint c_varargs_function(...) { return 1; }\n\nstruct A\n{\n    int mem_function(double, float) { return 1; } \n};\n\nint main()\n{\n    // Function\n    test(function);\n\n    // C-style variadic function\n    test(c_varargs_function);\n\n    // Non-generic lambda\n    test([](int i) { return 2*i; });\n\n    // Member function\n    test(&amp;A::mem_function);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/45dce91f54dd3c86\" rel=\"noreferrer\"><strong>DEMO</strong></a></p>\n"}], "owner": {"reputation": 19024, "user_id": 286335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6882f075e155c96b4ff0fe3bcab951f3?s=128&d=identicon&r=PG&f=1", "display_name": "cibercitizen1", "link": "https://stackoverflow.com/users/286335/cibercitizen1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1574, "favorite_count": 0, "accepted_answer_id": 27823546, "answer_count": 2, "score": 5, "last_activity_date": 1420651499, "creation_date": 1420643056, "last_edit_date": 1495542034, "question_id": 27822277, "link": "https://stackoverflow.com/questions/27822277/finding-out-the-return-type-of-a-function-lambda-or-function", "title": "Finding out the return type of a function, lambda or function", "body": "<p>This seems to be solved for the case of lambdas in <a href=\"https://stackoverflow.com/questions/7943525/is-it-possible-to-figure-out-the-parameter-type-and-return-type-of-a-lambda\">this question</a>. But that one is a 2011 answer and I'm looking for a general case: lambdas, regular functions, and functors. And, if possible, by means of the most modern c++ language additions. (Note: <code>g++ -std=c++1y test.cpp</code>).</p>\n\n<p>So, given a function (or a lambda), I'm trying to find out what its return type is. For instance, to declare a variable (simplified case). </p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;typename F&gt;\nvoid test (F h) {\n  // any of the following should be equivalent to int a; int b; int c;\n  decltype(h) a; // &lt;&lt;&lt;&lt;&lt; wrong\n  result_of(h) b; // &lt;&lt;&lt;&lt;&lt;&lt; wrong\n  result_of&lt;decltype(h)&gt; c; // &lt;&lt;&lt;&lt;&lt;&lt; wrong\n}\n\nint a_function (int i)  { \n  return 2*i; \n}\n\nint main ()  {\n  test (a_function);\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1420643482, "post_id": 27822262, "comment_id": 44050550, "body": "Looks like a bug: <a href=\"http://stackoverflow.com/questions/22180644/why-is-this-not-compiling-rvalue-as-thread-ctor-arguments\" title=\"why is this not compiling rvalue as thread ctor arguments\">stackoverflow.com/questions/22180644/&hellip;</a>"}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1420643622, "post_id": 27822262, "comment_id": 44050640, "body": "Yeah,looks like my question is a duplicate.But what&#39;s the workaround?"}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1420643855, "post_id": 27822262, "comment_id": 44050804, "body": "Ok,using std::ref for now solves it.The question can be closed."}], "owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1420649213, "answer_count": 0, "score": 1, "last_activity_date": 1420643209, "creation_date": 1420642993, "last_edit_date": 1420643209, "question_id": 27822262, "link": "https://stackoverflow.com/questions/27822262/vc-2013-stdmove-and-rvalue-compile-error", "closed_reason": "Duplicate", "title": "VC++ 2013 std::move and rvalue compile error", "body": "<p>I am following <a href=\"http://youtu.be/o0pCft99K74?list=PL1835A90FC78FF8BE\" rel=\"nofollow\">this tutorial</a>  on using C++ 11 threads.The following code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n#include &lt;future&gt;\n\nvoid theFun(std::promise&lt;std::string&gt; &amp;&amp; prms)\n{\n  std::string str(\"Hellow from  future\");\n  prms.set_value(str); \n}\n\nint main(int argc, char* argv[])\n{\n  std::promise&lt;std::string&gt; prms;\n  std::future&lt;std::string&gt; ftr = prms.get_future();\n\n  std::thread tr(&amp;theFun,std::move(prms));\n  std::cout &lt;&lt; \"Hellow from main!\" &lt;&lt; std::endl;\n  std::string str = ftr.get();//will block if thread still working\n\n  std::cout &lt;&lt; str &lt;&lt; std::endl;\n  tr.join();\n}\n</code></pre>\n\n<p>works for the tutorial author.He is using VS2010 and some experiment implementation.But in my case I am getting the following error:</p>\n\n<blockquote>\n  <p>\\program files (x86)\\microsoft visual studio\n  12.0\\vc\\include\\functional(1149): error C2664: 'void (std::promise &amp;&amp;)' : cannot convert argument 1 from \n  'std::promise' to 'std::promise &amp;&amp;' 1><br>\n  You cannot bind an lvalue to an rvalue reference</p>\n</blockquote>\n\n<p>Does it mean VC2013 doesn't support Rvalue arguments? </p>\n"}, {"tags": ["c++", "class", "derived-class", "pure-virtual"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1420643005, "post_id": 27822242, "comment_id": 44050240, "body": "Why should <code>C</code> care how <code>B</code> provides all its goodies? And pure virtual functions need not be implemented in derived classes. They just need to be implemented somewhere for a derived class not to have a pure virtual function, and thus being non-instantiable."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1420643056, "post_id": 27822242, "comment_id": 44050283, "body": "C inherits its implementation from B so it doesn&#39;t have to provide one. However, B does not get one from A because it&#39;s pure virtual."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1420643134, "post_id": 27822242, "comment_id": 44050334, "body": "I don&#39;t know what you mean by these two &quot;perspectives&quot;. The function has a non-pure override, so all is good. It doesn&#39;t matter exactly where that override is in the hierarchy, as long as it exists."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1420643194, "post_id": 27822242, "comment_id": 44050373, "body": "@Borgleader: <code>B</code> <i>could</i> get one from <code>A</code>, even though <code>A</code> marks the function pure-virtual. That&#39;s most common with dtors though..."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1420643227, "post_id": 27822242, "comment_id": 44050396, "body": "@Deduplicator I was referring to this specific case. And in this case, it does not."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1420643218, "post_id": 27822306, "comment_id": 44050388, "body": "Just getting an implementation is not enough. The implementer must not mark it pure-virtual (<i>again</i>)."}, {"owner": {"reputation": 1489, "user_id": 2135355, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/KqrdP.png?s=128&g=1", "display_name": "Ed Rowlett-Barbu", "link": "https://stackoverflow.com/users/2135355/ed-rowlett-barbu"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1420643502, "post_id": 27822306, "comment_id": 44050568, "body": "@Deduplicator you can&#39;t provide an implementation for a pure virtual, it is enough to state you provided an implementation, the fact it&#39;s not pure virtual can be implied, so sedavidw&#39;s statement is complete and non-reduntant, and you are just nitpicking"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 1489, "user_id": 2135355, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/KqrdP.png?s=128&g=1", "display_name": "Ed Rowlett-Barbu", "link": "https://stackoverflow.com/users/2135355/ed-rowlett-barbu"}, "edited": false, "score": 5, "creation_date": 1420643597, "post_id": 27822306, "comment_id": 44050629, "body": "@Zadirion: &quot;You can&#39;t provide an implementation for a pure virtual...&quot;? Just try it, it works wonderfully."}, {"owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1420647464, "post_id": 27822306, "comment_id": 44053330, "body": "@Deduplicator Edited the question appropriately"}], "tags": [], "owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "is_accepted": true, "score": 5, "last_activity_date": 1420647423, "last_edit_date": 1420647423, "creation_date": 1420643131, "answer_id": 27822306, "question_id": 27822242, "link": "https://stackoverflow.com/questions/27822242/pure-virtual-method-must-be-implemented-only-in-immediate-derived-classes-why/27822306#27822306", "title": "Pure virtual method must be implemented only in immediate derived classes - why?", "body": "<p><code>C</code> doesn't \"care\" how it gets an implementation, just that it gets one.  And it gets one from <code>B</code>.  However <code>B</code> receives no implementation of <code>print</code> and therefore needs to implement <code>print</code> on its own</p>\n\n<p><strong>EDIT</strong>: Per comments below, the implementation must not be marked as pure virtual again</p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 0, "last_activity_date": 1420643985, "creation_date": 1420643985, "answer_id": 27822591, "question_id": 27822242, "link": "https://stackoverflow.com/questions/27822242/pure-virtual-method-must-be-implemented-only-in-immediate-derived-classes-why/27822591#27822591", "title": "Pure virtual method must be implemented only in immediate derived classes - why?", "body": "<p>You need to have a definition for everything which is ODR-used, and virtual functions are always ODR-used by the class (vtable).</p>\n\n<p>Unless, of course, they are marked pure virtual.</p>\n\n<p>A class is abstract, and thus cannot be instantiated, iff it has at least one pure virtual member.<br>\nIt does not matter whether that member is inherited or not, but inheritance is only directly from the base-classes.</p>\n\n<p>Being pure-virtual does not foreclose actually being defined, allowing for non-virtual invocation.</p>\n"}], "owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 27822306, "answer_count": 2, "score": 0, "last_activity_date": 1513484917, "creation_date": 1420642927, "last_edit_date": 1513484917, "question_id": 27822242, "link": "https://stackoverflow.com/questions/27822242/pure-virtual-method-must-be-implemented-only-in-immediate-derived-classes-why", "title": "Pure virtual method must be implemented only in immediate derived classes - why?", "body": "<p>Suppose there is an abstract class <code>A</code> and two classes <code>B</code> &amp; <code>C</code> derived from <code>A</code> and <code>B</code> respectively</p>\n\n<pre><code>class A\n{\n    virtual void print() = 0;\n};\n\nclass B : public A\n{\n    void print(); \n};\n\n//print() must be implemented\nvoid B::print()\n{\n    std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n}\n\nclass C : public B\n{\n    //print() does not require to be implemented\n};\n</code></pre>\n\n<p>I understand that from <code>C</code>'s perspective of its immediate parent <code>B</code>, print() is not a pure virtual method, but from <code>C</code>'s perspective of its grandparent <code>A</code>, print() is a pure virtual method. So, shouldn't it require implementation in <code>C</code> too?</p>\n"}, {"tags": ["c++", "c++11", "boost", "singleton"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1420642805, "post_id": 27822200, "comment_id": 44050108, "body": "This question appears to be off-topic because this should be on CodeReview.SE."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 228406, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08e9d218c501894e2f3cca513411c8d1?s=128&d=identicon&r=PG", "display_name": "flux", "link": "https://stackoverflow.com/users/228406/flux"}, "edited": false, "score": 0, "creation_date": 1420801650, "post_id": 27823380, "comment_id": 44120911, "body": "Agree, using C++11 would be much cleaner."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 181, "user_id": 228406, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08e9d218c501894e2f3cca513411c8d1?s=128&d=identicon&r=PG", "display_name": "flux", "link": "https://stackoverflow.com/users/228406/flux"}, "edited": false, "score": 0, "creation_date": 1420801722, "post_id": 27823380, "comment_id": 44120939, "body": "@flux Oh. I got the impression you were using C++11 (you mention the history, and have tagged as <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b11\">c++11</a>)"}, {"owner": {"reputation": 181, "user_id": 228406, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08e9d218c501894e2f3cca513411c8d1?s=128&d=identicon&r=PG", "display_name": "flux", "link": "https://stackoverflow.com/users/228406/flux"}, "edited": false, "score": 0, "creation_date": 1421105267, "post_id": 27823380, "comment_id": 44224497, "body": "Sorry about that, C++11 was one of the recommended tags so I put it in there."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1420658809, "last_edit_date": 1420658809, "creation_date": 1420646302, "answer_id": 27823380, "question_id": 27822200, "link": "https://stackoverflow.com/questions/27822200/c-singleton-pattern-using-boostcall-once/27823380#27823380", "title": "C++ singleton pattern using boost::call_once", "body": "<ul>\n<li><p>To be fair, I expect that <code>call_once</code> is a threading specific version of something that can already been had in c++11 using just a function local static initializer:</p>\n\n<pre><code>template&lt; class T &gt;\nT&amp; Singleton&lt;T&gt;::Instance()\n{\n    static bool const init = [] () -&gt; bool { Init(); return true; }();\n\n    return *s_instance;\n}\n</code></pre>\n\n<p>The initializer is guaranteed not to race (in the language specification). </p>\n\n<p>Worst case behaviour is when the initializer throws: the exception will propagate out of the <code>Instance()</code> method but next time will try to initialize again, because the specification deems the variable to have \"not been initialized\" when the initializer expression throws.</p></li>\n<li><p>If in fact you \"need\" a thread-aware singleton (e.g. instance per thread), then you may want the <code>thread_local</code> keyword, with largely the same semantics.</p></li>\n</ul>\n"}], "owner": {"reputation": 181, "user_id": 228406, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08e9d218c501894e2f3cca513411c8d1?s=128&d=identicon&r=PG", "display_name": "flux", "link": "https://stackoverflow.com/users/228406/flux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3341, "favorite_count": 0, "accepted_answer_id": 27823380, "answer_count": 1, "score": 2, "last_activity_date": 1420658809, "creation_date": 1420642770, "question_id": 27822200, "link": "https://stackoverflow.com/questions/27822200/c-singleton-pattern-using-boostcall-once", "title": "C++ singleton pattern using boost::call_once", "body": "<p>Singletons in C++ (at least prior C++11 AFAIK) can be a nightmare. With the whole static initialisation order fiasco. But boost::call_once seems to offer a robust way to implement singletons. I've tried to come up with an easy to use idiom I'd like to share for some critical feedback, hope I haven't been completely foolish :)</p>\n\n<pre><code>// Usage:\n// You can make anything with a public or protected ctor a singleton.\n//\n// class A\n// {\n// public:\n//     ~A();\n// public:\n//     // Optional, shorter to type\n//     static A&amp; Instance() { return Singleton&lt;A&gt;::Instance(); }\n//     void foo();\n//\n// protected:\n//     explicit A(); // Can't be private, but can be public, protected is recommended.\n// };\n//\n// Singleton&lt;A&gt;::Instance().foo();\n// A::Instance().foo();\n//\ntemplate&lt; class T &gt;\nclass Singleton : public T // inerits from T so we can access the protected constructor.\n{\npublic:\n    virtual ~Singleton() {}\n\npublic:\n    static T&amp; Instance();\n\nprivate:\n    static boost::once_flag s_onceFlag;\n    // We use a raw pointer to avoid dynamic initialisation. If something that\n    // has a constructor (eg, shared_ptr ) then the dynamically initialised ctor\n    // may get called after the call once function is called (if the call once function\n    // is statically invoked before main). Then the instance pointer will be overwritten.\n    // Using a zero initialised pointer avoids this problem.\n    static T* s_instance;\n\nprivate:\n    static void Init();\n\nprivate:\n    explicit Singleton() {} // Used only to allow access to the protected ctor in base.\n};\n\n\n\ntemplate&lt; class T &gt;\nboost::once_flag Singleton&lt;T&gt;::s_onceFlag = BOOST_ONCE_INIT; // zero initialised variable, no order o initialisation shananigans\n\ntemplate&lt; class T &gt;\nT* Singleton&lt;T&gt;::s_instance = 0;\n\ntemplate&lt; class T &gt;\nvoid Singleton&lt;T&gt;::Init()\n{\n    static Singleton&lt;T&gt; instance; // static local variable is thread safe since this function is called once only.\n    s_instance = &amp;instance;\n}\n\n\ntemplate&lt; class T &gt;\nT&amp; Singleton&lt;T&gt;::Instance()\n{\n    boost::call_once( s_onceFlag, Init );\n\n    return *s_instance;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "gcc"], "comments": [{"owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "reply_to_user": {"reputation": 2449, "user_id": 2587452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NG8kN.png?s=128&g=1", "display_name": "Eric Hauenstein", "link": "https://stackoverflow.com/users/2587452/eric-hauenstein"}, "edited": false, "score": 0, "creation_date": 1420643375, "post_id": 27822163, "comment_id": 44050487, "body": "I tried reinstalling the IDE and googled the problem but nothing helped."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1420643536, "post_id": 27822163, "comment_id": 44050591, "body": "Did you try reading the errors?  Link is failing with undefined references.  For example, where is __imp_MoveToEx?"}, {"owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "edited": false, "score": 0, "creation_date": 1420643633, "post_id": 27822163, "comment_id": 44050649, "body": "I have read it... MoveToEx(hDC,x1,y1,NULL); //---line13"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1420643737, "post_id": 27822163, "comment_id": 44050722, "body": "That&#39;s where you call it.  Your program is compiling OK.  It fails because you aren&#39;t linking it with the library that contains the code."}, {"owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "edited": false, "score": 0, "creation_date": 1420644254, "post_id": 27822163, "comment_id": 44051091, "body": "Everything works fine before I close my IDE. <a href=\"http://tinypic.com/r/6oiu5x/8\" rel=\"nofollow noreferrer\">proof</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1420644771, "post_id": 27822163, "comment_id": 44051475, "body": "Everything worked fine before the Spanish Armada sailed, too."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1420650845, "post_id": 27822163, "comment_id": 44055447, "body": "Can you paste either a screenshot of your project&#39;s linker settings or the project file itself?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "edited": false, "score": 0, "creation_date": 1420656556, "post_id": 27825574, "comment_id": 44058716, "body": "Thx it worked, but why does it open the console window?"}, {"owner": {"reputation": 1037, "user_id": 4316334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbfe91ab0a007708f8bbe52327aaf640?s=128&d=identicon&r=PG&f=1", "display_name": "FelipeDurar", "link": "https://stackoverflow.com/users/4316334/felipedurar"}, "reply_to_user": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "edited": false, "score": 1, "creation_date": 1420657268, "post_id": 27825574, "comment_id": 44059145, "body": "@DireDuke By default the console is enabled, to disable, click in Tools-&gt;Compiler Options and go to Settings tabPage, select Linker and in the option &quot;Do not create a console window&quot; set to Yes. You can also hide the console calling the function FreeWindow()"}, {"owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "edited": false, "score": 0, "creation_date": 1420658410, "post_id": 27825574, "comment_id": 44059745, "body": "Thanks, you helped me a lot."}], "tags": [], "owner": {"reputation": 1037, "user_id": 4316334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbfe91ab0a007708f8bbe52327aaf640?s=128&d=identicon&r=PG&f=1", "display_name": "FelipeDurar", "link": "https://stackoverflow.com/users/4316334/felipedurar"}, "is_accepted": true, "score": 2, "last_activity_date": 1420653203, "creation_date": 1420653203, "answer_id": 27825574, "question_id": 27822163, "link": "https://stackoverflow.com/questions/27822163/my-c-programs-wont-compile-after-i-close-the-source-then-open-it-again/27825574#27825574", "title": "My c++ programs won&#39;t compile after I close the source then open it again", "body": "<p>this is caused because you need to link the library libgdi32.a, if you are using the DevC++, click in Tools->Compiler Options, when open the window, check the box \"Add these commands to the linker command line\" and in the below textbox add the text:</p>\n\n<pre><code>-lgdi32\n</code></pre>\n\n<p>you form need to be like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sFDm4.jpg\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 1, "user_id": 4304493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd998cd4fb79fa0393ba21f9c4b260?s=128&d=identicon&r=PG&f=1", "display_name": "DireDuke", "link": "https://stackoverflow.com/users/4304493/direduke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 27825574, "answer_count": 1, "score": -4, "last_activity_date": 1420653203, "creation_date": 1420642627, "last_edit_date": 1420643145, "question_id": 27822163, "link": "https://stackoverflow.com/questions/27822163/my-c-programs-wont-compile-after-i-close-the-source-then-open-it-again", "title": "My c++ programs won&#39;t compile after I close the source then open it again", "body": "<p>I compile it, it runs and then I reopen it and doesn't work anymore.\nThis happens in devc++ 5.8.3 and codeblocks.</p>\n\n<p>My code(the comments are default from the IDE):</p>\n\n<pre><code>    #include &lt;windows.h&gt;\n    #include &lt;cmath&gt;\n    #include &lt;cstdlib&gt;\n\n    HPEN hPen;\n    HDC hDC;\n    PAINTSTRUCT Ps;\n\n    void DrawLine(int x1, int y1, int x2, int y2, HPEN pen){\n        SelectObject(hDC,pen);\n        MoveToEx(hDC,x1,y1,NULL);\n        LineTo(hDC,x2,y2);\n    }\n    void Draw(int originx, int originy, float value,int handlength){\n        DrawLine(originx, originy, (handlength*cos(value*180/3.14))+originx, (handlength*sin(value*180/3.14))+originy,hPen);\n        DrawLine(originx, originy, -(handlength*cos(value*180/3.14))+originx, -(handlength*sin(value*180/3.14))+originy,hPen);\n    }\n    /* This is where all the input to the window goes to */\n    LRESULT CALLBACK WndProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam) {\n        switch(Message) {\n\n            /* Upon destruction, tell the main thread to stop */\n            case WM_DESTROY: {\n                PostQuitMessage(0);\n                break;\n            }\n            case WM_PAINT: {\n                int r;\n                int g;\n                int b;\n                hDC = BeginPaint(hwnd, &amp;Ps);\n                for(int i=0;i&lt;170;i=i+1){   \n                r = rand() % 256;\n                g = rand() % 256;\n                b = rand() % 256;\n                Sleep(10);\n                hPen = CreatePen(PS_INSIDEFRAME, 1, RGB(r, g, b));\n                Draw(320,240,i,180);\n\n                }       \n                EndPaint(hwnd, &amp;Ps);\n                break;\n            }\n            /* All other messages (a lot of them) are processed using default procedures */\n            default:\n                return DefWindowProc(hwnd, Message, wParam, lParam);\n        }\n        return 0;\n    }\n\n    /* The 'main' function of Win32 GUI programs: this is where execution starts */\n    int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {\n        WNDCLASSEX wc; /* A properties struct of our window */\n        HWND hwnd; /* A 'HANDLE', hence the H, or a pointer to our window */\n        MSG msg; /* A temporary location for all messages */\n\n        /* zero out the struct and set the stuff we want to modify */\n        memset(&amp;wc,0,sizeof(wc));\n        wc.cbSize        = sizeof(WNDCLASSEX);\n        wc.lpfnWndProc   = WndProc; /* This is where we will send messages to */\n        wc.hInstance     = hInstance;\n        wc.hCursor       = LoadCursor(NULL, IDC_ARROW);\n\n        /* White, COLOR_WINDOW is just a #define for a system color, try Ctrl+Clicking it */\n        wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);\n        wc.lpszClassName = \"WindowClass\";\n        wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION); /* Load a standard icon */\n        wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION); /* use the name \"A\" to use the project icon */\n\n        if(!RegisterClassEx(&amp;wc)) {\n            MessageBox(NULL, \"Window Registration Failed!\",\"Error!\",MB_ICONEXCLAMATION|MB_OK);\n            return 0;\n        }\n\n        hwnd = CreateWindowEx(WS_EX_CLIENTEDGE,\"WindowClass\",\"Lines\",WS_VISIBLE|WS_OVERLAPPEDWINDOW,\n            CW_USEDEFAULT, /* x */\n            CW_USEDEFAULT, /* y */\n            640, /* width */\n            480, /* height */\n            NULL,NULL,hInstance,NULL);\n\n        if(hwnd == NULL) {\n            MessageBox(NULL, \"Window Creation Failed!\",\"Error!\",MB_ICONEXCLAMATION|MB_OK);\n            return 0;\n        }\n\n        /*\n            This is the heart of our program where all input is processed and \n            sent to WndProc. Note that GetMessage blocks code flow until it receives something, so\n            this loop will not produce unreasonably high CPU usage\n        */\n        while(GetMessage(&amp;msg, NULL, 0, 0) &gt; 0) { /* If no error is received... */\n            TranslateMessage(&amp;msg); /* Translate key codes to chars if present */\n            DispatchMessage(&amp;msg); /* Send it to WndProc */\n        }\n\n        return msg.wParam;\n    }\n</code></pre>\n\n<p>Compiler log: </p>\n\n<blockquote>\n  <ul>\n  <li>C++ Compiler: C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\bin\\g++.exe</li>\n  <li>Command: g++.exe \"C:\\Users\\Pall\\Desktop\\proj1\\lines.cpp\" -o \"C:\\Users\\Pall\\Desktop\\proj1\\lines.exe\" -g3 -I\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\include\" -I\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\x86_64-w64-mingw32\\include\" -I\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\" -I\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\" -L\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\lib\" -L\"C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\x86_64-w64-mingw32\\lib\" -static-libgcc -g3\n  C:\\Users\\Pall\\AppData\\Local\\Temp\\ccRYW3Cy.o: In function <code>DrawLine(int, int, int, int, HPEN__*)':\n  C:/Users/Pall/Desktop/proj1/lines.cpp:12: undefined reference to</code>__imp_SelectObject'\n  C:/Users/Pall/Desktop/proj1/lines.cpp:13: undefined reference to <code>__imp_MoveToEx'\n  C:/Users/Pall/Desktop/proj1/lines.cpp:14: undefined reference to</code>__imp_LineTo'\n  C:\\Users\\Pall\\AppData\\Local\\Temp\\ccRYW3Cy.o: In function <code>WndProc(HWND__*, unsigned int, unsigned long long, long long)':\n  C:/Users/Pall/Desktop/proj1/lines.cpp:36: undefined reference to</code>__imp_CreatePen'\n  collect2.exe: error: ld returned 1 exit status</li>\n  </ul>\n</blockquote>\n"}, {"tags": ["java", "c++", "math", "calculator"], "comments": [{"owner": {"reputation": 51, "user_id": 4383092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9f7e3bfbef756dcae208fcab8dc6e42?s=128&d=identicon&r=PG&f=1", "display_name": "gg tty", "link": "https://stackoverflow.com/users/4383092/gg-tty"}, "edited": false, "score": 2, "creation_date": 1420642774, "post_id": 27822107, "comment_id": 44050084, "body": "Yes , lim means limit"}, {"owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "reply_to_user": {"reputation": 31116, "user_id": 2670792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jjhe7.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/2670792/christian"}, "edited": false, "score": 1, "creation_date": 1420642815, "post_id": 27822107, "comment_id": 44050122, "body": "@Christian he wants to evaluate math expressions. Nothing to do with regex."}, {"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1420642860, "post_id": 27822107, "comment_id": 44050145, "body": "So does that mean x-&gt;1?  Is this your query?  <a href=\"http://www.wolframalpha.com/input/?i=limit+5x%5E2+as+x-%3E1\" rel=\"nofollow noreferrer\">wolframalpha.com/input/?i=limit+5x%5E2+as+x-%3E1</a>"}, {"owner": {"reputation": 8091, "user_id": 1502148, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e44d7e02bc91648f306666787a329d25?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Bakos", "link": "https://stackoverflow.com/users/1502148/g%c3%a1bor-bakos"}, "edited": false, "score": 0, "creation_date": 1420642916, "post_id": 27822107, "comment_id": 44050178, "body": "@ggtty You want a CAS (Computer Algebra System) for symbolic computations. There are some both for Java and for C++, but selecting from them would probably better fit <a href=\"http://softwarerecs.stackexchange.com/\">softwarerecs.stackexchange.com</a>."}], "answers": [{"comments": [{"owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "edited": false, "score": 0, "creation_date": 1420643216, "post_id": 27822235, "comment_id": 44050386, "body": "yeah, cool. But what about the limits computation of the example?"}, {"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1420644924, "post_id": 27822235, "comment_id": 44051600, "body": "Can&#39;t these mathematical computations be done in Java itself?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1178540"}, "reply_to_user": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 1, "creation_date": 1420645186, "post_id": 27822235, "comment_id": 44051816, "body": "Java is capable of doing this computations itself, I offer a solution which can be used in Java and I&#39;m aware of the overhead it might cost. <a href=\"http://jeval.sourceforge.net/\" rel=\"nofollow noreferrer\">jeval.sourceforge.net</a> is an example... @Sid"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1178540"}, "is_accepted": false, "score": 4, "last_activity_date": 1420645775, "last_edit_date": 1420645775, "creation_date": 1420642910, "answer_id": 27822235, "question_id": 27822107, "link": "https://stackoverflow.com/questions/27822107/math-calculating-in-java/27822235#27822235", "title": "math calculating in java", "body": "<p>You could do this...</p>\n\n<pre><code>import javax.script.ScriptEngineManager;\nimport javax.script.ScriptEngine;\n\npublic class Test {\n  public static void main(String[] args) throws Exception{\n    ScriptEngineManager mgr = new ScriptEngineManager();\n    ScriptEngine engine = mgr.getEngineByName(\"JavaScript\");\n    String foo = \"2 * 6^( log(123) - sin(7)^cos(2) )\";\n    System.out.println(engine.eval(foo));\n    } \n}\n</code></pre>\n\n<p>In addition if you want to solve the limits, you could always use an <a href=\"http://products.wolframalpha.com/api/explorer.html\" rel=\"nofollow\">API</a>.\nYou can send the request with the right syntax for that api, which will give you the\nresult you can parse. This is however harder to program and API's are often not free.\nAnother option is calculating limits yourself, I'm not aware of APIs for that or standard\nJava functions.</p>\n\n<p>If you really want to start from scratch and re-invent the weel I would suggest you build your own eval function. This is a good starting point for that: <a href=\"http://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java-and-cpp/\" rel=\"nofollow\">Java/c++ example</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1420643451, "post_id": 27822247, "comment_id": 44050530, "body": "You can&#39;t parse a Chomsky type-2 grammar with a finite state machine anyway."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1420643936, "post_id": 27822247, "comment_id": 44050861, "body": "There you go; I wasn&#39;t even aware there was an actual limitation other than it would be messy and hard to validate."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "is_accepted": false, "score": 1, "last_activity_date": 1420643863, "last_edit_date": 1420643863, "creation_date": 1420642951, "answer_id": 27822247, "question_id": 27822107, "link": "https://stackoverflow.com/questions/27822107/math-calculating-in-java/27822247#27822247", "title": "math calculating in java", "body": "<p>This is less of a Java domain question and more of a language parsing problem. The <em>traditional</em> way to approach this is to build a lexer and parser, sometimes in another language, that generates the code in the language you want. This way you separate the parsing concerns from the actual \"client\" program concerns.</p>\n\n<p>This can be easier, in the long run, than trying to write what is going to be a pretty complicated regular expression state machine that will be hard to prove is correct in all cases. An infix math parser/processor is interesting enough that having a \"little language\" version of the rules and definitions makes it a lot easier to prove your program is correct.</p>\n\n<p>In Java you might want to consider ANTLR to generate the parser, though I admit I have never had to use it. But my understanding is that ANTLR is familiar enough if you have used Lex &amp; Yacc.</p>\n\n<p>[UPDATE]</p>\n\n<p>I don't know if infix is a hard requirement, but parsing complex math using a stack and postfix operations can be much easier to implement if you don't want to generate a parser. As an added bonus, this allows you to do math like Yoda.</p>\n"}, {"tags": [], "owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "is_accepted": false, "score": 1, "last_activity_date": 1420642961, "last_edit_date": 1495542508, "creation_date": 1420642961, "answer_id": 27822249, "question_id": 27822107, "link": "https://stackoverflow.com/questions/27822107/math-calculating-in-java/27822249#27822249", "title": "math calculating in java", "body": "<p>If your expressions are not very complex, I think this answer will guide you in the right way:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7258538/free-java-library-for-evaluating-math-expressions\">Built-in method for evaluating math expressions in Java</a></p>\n\n<p>If your expressions are rather sophisticated, using limits as in your example, I advice you to take a look at the <a href=\"http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools\" rel=\"nofollow noreferrer\">Dragon Book</a>. It should be easier to implement an easy expression parser and use some strong math library below.</p>\n"}, {"comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1420655512, "post_id": 27824946, "comment_id": 44058095, "body": "You can run Python in JVM using Jython."}], "tags": [], "owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "is_accepted": false, "score": 1, "last_activity_date": 1420651140, "creation_date": 1420651140, "answer_id": 27824946, "question_id": 27822107, "link": "https://stackoverflow.com/questions/27822107/math-calculating-in-java/27824946#27824946", "title": "math calculating in java", "body": "<p>In general, what you need is called a <a href=\"http://en.wikipedia.org/wiki/List_of_computer_algebra_systems\" rel=\"nofollow\">computer algebra system</a>. I don't know what requirements you have but there are at least 2 general ways to go about it.</p>\n\n<p>(1) link your program to a library to do the algebraic stuff. For C++ you can try <a href=\"http://yacas.sourceforge.net/homepage.html\" rel=\"nofollow\">Yacas</a> and for Python you can try <a href=\"http://sympy.org\" rel=\"nofollow\">Sympy</a>. Dunno about Java.</p>\n\n<p>(2) write your program separately and talk to a CAS via a socket. In that case the CAS could be anything, e.g., <a href=\"http://maxima.sourceforge.net\" rel=\"nofollow\">Maxima</a>, <a href=\"http://sagemath.org\" rel=\"nofollow\">Sage</a>, etc etc. A socket interface is maybe less work than you might think -- it is certainly much, much less work than reimplementing CAS functions.</p>\n\n<p>My advice, without knowing your requirements, is to write your program in Python and use Sympy.</p>\n"}], "owner": {"reputation": 51, "user_id": 4383092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9f7e3bfbef756dcae208fcab8dc6e42?s=128&d=identicon&r=PG&f=1", "display_name": "gg tty", "link": "https://stackoverflow.com/users/4383092/gg-tty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1420651140, "creation_date": 1420642452, "last_edit_date": 1420644288, "question_id": 27822107, "link": "https://stackoverflow.com/questions/27822107/math-calculating-in-java", "title": "math calculating in java", "body": "<p>I am trying to develop an advanced math expression calculator in Java. My goal is that calculator can determinate expressions like these:</p>\n\n<pre><code>2 * 6^( log(123) - sin(7)^cos(2) )\n\nlim( (5x^2) / x , x -&gt; 1)\n.\n.\n.\n</code></pre>\n\n<p>Is there anything (default function, external library) for this in Java or C++?</p>\n"}, {"tags": ["c++", "ios", "opengl-es", "cocos2d-x"], "comments": [{"owner": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420646130, "post_id": 27822104, "comment_id": 44052453, "body": "What was the openGL function it was crashing in?"}, {"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "reply_to_user": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420646381, "post_id": 27822104, "comment_id": 44052603, "body": "Added the function..."}, {"owner": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420647183, "post_id": 27822104, "comment_id": 44053151, "body": "I am not completely sure but it could be that you are using vbo&#39;s and not updating them with your vertex array update. Is _dirtyGLLine true for you? If not see how it can be set to true and if that solves your crash ?"}, {"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "reply_to_user": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420647391, "post_id": 27822104, "comment_id": 44053287, "body": "@raveesh, it&#39;s a cocos2dx function which handles all the openGL stuff. didn&#39;t touch anything over there. just guessing it&#39;s supposed to work in a certain matter (which i&#39;m still trying to figure out)"}, {"owner": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1420647793, "post_id": 27822104, "comment_id": 44053561, "body": "Yes, i got that. But there could be some other indirect way through which _dirtyGLLine is set to true, like some function in your draw node??. Sorry if this is is not helpful, but i actually  had a similar problem when working with openscenegraph and it got solved by setting a &quot;dirty&quot; flag on my drawable&#39;s vertex array; it ensured that even the VBO was internally updated."}], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420646373, "creation_date": 1420642438, "last_edit_date": 1420646373, "question_id": 27822104, "link": "https://stackoverflow.com/questions/27822104/drawing-a-continues-line-with-ontouchmoved-callback-cocos2dx", "title": "Drawing a continues line with onTouchMoved callback cocos2dx", "body": "<p>i'm trying to draw a continues spline on every onTouchMoved call, \nthe functionality is supposed to be similar to the line drawing used in the iOS game - flight control.</p>\n\n<p>i'm using it in the following manner:</p>\n\n<p>constructor init:</p>\n\n<pre><code>conPointsArray = new PointArray();\nconPointsArray-&gt;initWithCapacity(DEF_ARRAY_SIZE);\nlineDrawer = DrawNode::create();\n</code></pre>\n\n<p>the onTouchMoved callback usage:</p>\n\n<pre><code>void line::onTouchMoved(cocos2d::Touch *Touch, cocos2d::Event *Event)\n{\nconPointsArray-&gt;addControlPoint(Touch-&gt;getLocation());\nlineDrawer-&gt;drawCardinalSpline((conPointsArray), 0.5f, 100, Color4F::BLUE);\nCCLOG(\"on touch moved x: %f y %f\", Touch-&gt;getLocation().x, Touch-&gt;getLocation().y);\n}\n</code></pre>\n\n<p>But the app is always crashing in a certain openGL function.</p>\n\n<p>I assumed the reason for it is because the array is constantly changing and openGL is having trouble with it (and the fact i'm always sending the same array which is a bad idea, but just to see how things work), so i moved the drawing call to onTouchEnded, And indeed, The line was drawn, but only (as expected) after the onTouch action has ended.</p>\n\n<p>What is the solution/best practice for this issue?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>This is the openGL function in which the code crashes:</p>\n\n<pre><code>void DrawNode::onDrawGLLine(const Mat4 &amp;transform, uint32_t flags)\n{\n    auto glProgram = GLProgramCache::getInstance()-&gt;getGLProgram(GLProgram::SHADER_NAME_POSITION_LENGTH_TEXTURE_COLOR);\n    glProgram-&gt;use();\n    glProgram-&gt;setUniformsForBuiltins(transform);\n\n    if (_dirtyGLLine)\n    {\n        glBindBuffer(GL_ARRAY_BUFFER, _vboGLLine);\n        glBufferData(GL_ARRAY_BUFFER, sizeof(V2F_C4B_T2F)*_bufferCapacityGLLine, _bufferGLLine, GL_STREAM_DRAW);\n        _dirtyGLLine = false;\n    }\n    if (Configuration::getInstance()-&gt;supportsShareableVAO())\n    {\n        GL::bindVAO(_vaoGLLine);\n    }\n    else\n    {\n        glBindBuffer(GL_ARRAY_BUFFER, _vboGLLine);\n        GL::enableVertexAttribs(GL::VERTEX_ATTRIB_FLAG_POS_COLOR_TEX);\n        // vertex\n        glVertexAttribPointer(GLProgram::VERTEX_ATTRIB_POSITION, 2, GL_FLOAT, GL_FALSE, sizeof(V2F_C4B_T2F), (GLvoid *)offsetof(V2F_C4B_T2F, vertices));\n        // color\n        glVertexAttribPointer(GLProgram::VERTEX_ATTRIB_COLOR, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(V2F_C4B_T2F), (GLvoid *)offsetof(V2F_C4B_T2F, colors));\n        // texcood\n        glVertexAttribPointer(GLProgram::VERTEX_ATTRIB_TEX_COORD, 2, GL_FLOAT, GL_FALSE, sizeof(V2F_C4B_T2F), (GLvoid *)offsetof(V2F_C4B_T2F, texCoords));\n    }\n    glLineWidth(2);\n    glDrawArrays(GL_LINES, 0, _bufferCountGLLine); &lt;----------- CRASH HERE\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    CC_INCREMENT_GL_DRAWN_BATCHES_AND_VERTICES(1,_bufferCountGLLine);\n    CHECK_GL_ERROR_DEBUG();\n}\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 4, "creation_date": 1420642580, "post_id": 27822093, "comment_id": 44049949, "body": "&quot;since functions are not lvalues anyway&quot; - not sure what you mean by that. It&#39;s not the function being referenced, it&#39;s the return object."}, {"owner": {"reputation": 19, "user_id": 4415458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda2b617d4cf5ac2737b065ba471e97d?s=128&d=identicon&r=PG&f=1", "display_name": "Schrustra", "link": "https://stackoverflow.com/users/4415458/schrustra"}, "reply_to_user": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1420642688, "post_id": 27822093, "comment_id": 44050024, "body": "You can ignore that part, not so important"}, {"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 0, "creation_date": 1420642733, "post_id": 27822093, "comment_id": 44050061, "body": "not so important? really"}], "answers": [{"comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1420642629, "post_id": 27822122, "comment_id": 44049987, "body": "I would phrase that as &quot;the result of an assignment is an object, namely the object which is being assigned to.&quot; The distinction between object and value here is important."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1420642643, "post_id": 27822122, "comment_id": 44050001, "body": "that&#39;s not true, can use chaining even if you don&#39;t return a reference."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1420642733, "post_id": 27822122, "comment_id": 44050057, "body": "@JoachimPileborg agree, but I think Codor should clarify this, as it is commonly believed that &quot;chaining&quot; doesn&#39;t even compile if <code>operator=</code> doesn&#39;t return a reference. Things like <code>a=b=c</code> will always work, but <code>(a=b) = c</code> will compile but won&#39;t do what one expects when <code>operator=</code> returns by value."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1420642885, "post_id": 27822122, "comment_id": 44050165, "body": "@vsoftco How is chaning possible if no referenc is returned?"}, {"owner": {"reputation": 19, "user_id": 4415458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda2b617d4cf5ac2737b065ba471e97d?s=128&d=identicon&r=PG&f=1", "display_name": "Schrustra", "link": "https://stackoverflow.com/users/4415458/schrustra"}, "edited": false, "score": 0, "creation_date": 1420642939, "post_id": 27822122, "comment_id": 44050198, "body": "@Codor Can you explain why it&#39;s impossible if a reference is not returned?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 19, "user_id": 4415458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda2b617d4cf5ac2737b065ba471e97d?s=128&d=identicon&r=PG&f=1", "display_name": "Schrustra", "link": "https://stackoverflow.com/users/4415458/schrustra"}, "edited": false, "score": 0, "creation_date": 1420642976, "post_id": 27822122, "comment_id": 44050220, "body": "@Schrustra, <code>(a=b)=c</code> will compile, however <code>(a=b)</code> returns by value some temporary <code>X</code>, then that temporary <code>X</code> invokes <code>operator=(c)</code>. At the end, <code>a</code> will be equal to <code>b</code>, but not <code>c</code>."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1420643050, "post_id": 27822122, "comment_id": 44050276, "body": "No, this is a misunderstanding. Chaining of assignments is also possible if the return type is <code>MyClass</code> instead of <code>MyClass&amp;</code>."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1420643359, "post_id": 27822122, "comment_id": 44050477, "body": "@Codor, maybe I wasn&#39;t clear, what I meant is that the code <a href=\"http://coliru.stacked-crooked.com/a/075a8d2a81edb941\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/075a8d2a81edb941</a> gives different results depending wether <code>operator=</code> returns by value or by reference. In particular, <code>(a=b) = c</code> has <code>a==c</code> at the end of the day only if <code>operator=</code> returns by reference."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1420643518, "post_id": 27822122, "comment_id": 44050575, "body": "Ah ok. It is subtle! I find this question a bit confusing. Although I understand the accepted answer, I don&#39;t really see how it relates to the original question. <code>at</code> is not a member of the object whose reference is returned."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1420646002, "post_id": 27822122, "comment_id": 44052384, "body": "I think in assignment operator you return by reference to avoid issues I mentioned before, and also to avoid un-necessary copies (although most compilers can optimize via return value optimization). As for other functions, the accepted answer gave the reason."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1420642831, "last_edit_date": 1420642831, "creation_date": 1420642518, "answer_id": 27822122, "question_id": 27822093, "link": "https://stackoverflow.com/questions/27822093/function-that-returns-a-reference/27822122#27822122", "title": "Function that returns a reference?", "body": "<p>If the reference is returned, the caller can use it for chaining of calls. In your example, it reflects the convention that an assigment is also a value (or an object), namely the value (or object) which is assigned.</p>\n"}, {"comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "reply_to_user": {"reputation": 19, "user_id": 4415458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda2b617d4cf5ac2737b065ba471e97d?s=128&d=identicon&r=PG&f=1", "display_name": "Schrustra", "link": "https://stackoverflow.com/users/4415458/schrustra"}, "edited": false, "score": 0, "creation_date": 1420643053, "post_id": 27822156, "comment_id": 44050280, "body": "@Schrustra Because if it returned by value, you would be assigning to the temporary value that is returned, not the element of the vector. We expect this to assign to the element of the vector."}], "tags": [], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "is_accepted": true, "score": 5, "last_activity_date": 1420642857, "last_edit_date": 1420642857, "creation_date": 1420642604, "answer_id": 27822156, "question_id": 27822093, "link": "https://stackoverflow.com/questions/27822093/function-that-returns-a-reference/27822156#27822156", "title": "Function that returns a reference?", "body": "<pre><code>vector&lt;int&gt; v(5);\nv.at(0) = 666;\n</code></pre>\n\n<p>This works only because <code>at</code> returns a reference.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1420643040, "creation_date": 1420643040, "answer_id": 27822272, "question_id": 27822093, "link": "https://stackoverflow.com/questions/27822093/function-that-returns-a-reference/27822272#27822272", "title": "Function that returns a reference?", "body": "<p>In contrast to <code>C++</code> the result of the assignment operator in <code>C</code> is <code>rvalue</code> instead of <code>lvalue</code> :)</p>\n\n<p>So in C++ you may write</p>\n\n<pre><code>int a, b = 1, c = 2;\n\n( a = b ) = c;\n</code></pre>\n\n<p>and <code>a</code> will get the value of <code>c</code> discarding the previously assigned value of <code>b</code>.</p>\n\n<p>In C such a code will not be compiled.</p>\n\n<p>As for you question about references then such functions are very useful. Consider for example member functions of class <code>std::basic_string</code>.</p>\n\n<p>You may write for example</p>\n\n<pre><code>std::string s( \"Hello\" );\n\nstd::cout &lt;&lt; ( s.append( 1, ' ' ) += \"World\" ) &lt;&lt; std::endl;\n</code></pre>\n\n<p>It is possible because both member functions <code>append</code> and operator <code>+=</code> return reference to the original pbject.</p>\n"}], "owner": {"reputation": 19, "user_id": 4415458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda2b617d4cf5ac2737b065ba471e97d?s=128&d=identicon&r=PG&f=1", "display_name": "Schrustra", "link": "https://stackoverflow.com/users/4415458/schrustra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 27822156, "answer_count": 3, "score": -2, "last_activity_date": 1420643040, "creation_date": 1420642398, "question_id": 27822093, "link": "https://stackoverflow.com/questions/27822093/function-that-returns-a-reference", "title": "Function that returns a reference?", "body": "<p>I am wondering, why are functions that return a reference value useful? It doesn't make much sense to me, since functions are not lvalues anyway...</p>\n\n<p>Here is an example of a function... well not a function it's an assignment operator overload in a class but it looks like this</p>\n\n<pre><code>//class name is MyClass\nMyClass&amp; operator=(const MyClass&amp; source){\n//do things(assign values from the source to the current object)\nreturn *this;\n}\n</code></pre>\n\n<p>Why would you want that class to return a reference? :/ (I found this similar code in a video tutorial here is the link if needed <a href=\"https://www.youtube.com/watch?v=PXcRe-W2w7s\" rel=\"nofollow\">https://www.youtube.com/watch?v=PXcRe-W2w7s</a> )</p>\n"}, {"tags": ["c++", "variadic-templates"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1420642288, "post_id": 27822047, "comment_id": 44049772, "body": "There was a similar question to this a couple of days ago, but it was a <code>std::tuple</code> instead of a <code>std::vector</code>. Edit: <a href=\"http://stackoverflow.com/q/27798098/150634\">Found it</a>."}, {"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1420642437, "post_id": 27822047, "comment_id": 44049862, "body": "And if all else fails, would <code>some_func(v[0], v[1], v[2])</code> be much of a problem?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1420642472, "post_id": 27822047, "comment_id": 44049891, "body": "Won&#39;t work with a vector. Template magic is all resolved at compile time, when you don&#39;t yet know the size of the vector. You could do it with an array, though."}], "owner": {"reputation": 70070, "user_id": 9611, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/749b73007119baf94fc077c50bcc58e8?s=128&d=identicon&r=PG", "display_name": "shoosh", "link": "https://stackoverflow.com/users/9611/shoosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 748, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1420642242, "creation_date": 1420642242, "question_id": 27822047, "link": "https://stackoverflow.com/questions/27822047/c-manually-create-a-variadic-template-parameter-pack", "title": "C++: manually create a variadic template parameter pack", "body": "<p>I'd like to be able to do something like this:<br>\nGiven a function:</p>\n\n<pre><code>void some_func(int a, int b, int c) {\n   cout &lt;&lt; a &lt;&lt; b &lt;&lt; c;\n}\n\nvoid generic_call(vector&lt;int&gt;&amp; v) {\n    Args... args(&lt;make_parameter_pack_from&gt;(v));\n    some_func(args...);\n}\n</code></pre>\n\n<p><code>make_parameter_pack_from()</code> takes a vector of arguments and somehow creates a \"parameter pack\" from it which can then be expanded to its parameters when calling the <code>some_func()</code>. </p>\n\n<p>The reason I need to do this is that I'm given the arguments in a vector and somehow I need to call a normal C++ function which takes these arguments.<br>\nI can use something like libffi to construct the function call but I was really hoping for some C++ variadic template magic which can make this happen.</p>\n"}, {"tags": ["c++", "linux", "bash", "shell"], "comments": [{"owner": {"reputation": 13030, "user_id": 3336968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvcNB.jpg?s=128&g=1", "display_name": "fredtantini", "link": "https://stackoverflow.com/users/3336968/fredtantini"}, "edited": false, "score": 0, "creation_date": 1420642254, "post_id": 27822022, "comment_id": 44049742, "body": "Maybe use popen to run <code>echo $SHELL</code>? or <code>echo $0</code>?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1420642270, "post_id": 27822022, "comment_id": 44049753, "body": "And which user? The one of the script or one of possibly many logged-in ones?"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420642310, "post_id": 27822022, "comment_id": 44049790, "body": "You check in <code>&#47;etc&#47;passwd</code>, eg: <code>cat &#47;etc&#47;passwd | grep user | cut -d: -f7</code>"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420642365, "post_id": 27822022, "comment_id": 44049819, "body": "@InnocentBystander And then? Is the current shell there? No"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1420642403, "post_id": 27822022, "comment_id": 44049838, "body": "You need to run system commands or you need to run shell commands? Those are not the same thing."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1420642613, "post_id": 27822022, "comment_id": 44049975, "body": "@deviantfan, yes. <a href=\"http://linux.die.net/man/5/passwd\" rel=\"nofollow noreferrer\">linux.die.net/man/5/passwd</a> (last field)"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420643463, "post_id": 27822022, "comment_id": 44050537, "body": "@InnocentBystander OP (and I) asked about the <i>current</i> shell, not the login shell (OP wants to know because some commands should be executed)"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1420643595, "post_id": 27822022, "comment_id": 44050627, "body": "@deviantfan, true, it does not tell you the <i>current</i> shell. but when was the last time you changed your shell mid-session?... :)"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420643695, "post_id": 27822022, "comment_id": 44050696, "body": "Jeef, as deviantfan asked, please elaborate a bit more on your question"}, {"owner": {"reputation": 41425, "user_id": 129032, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e8bea8f9e6972dfd3113d67da68e6933?s=128&d=identicon&r=PG", "display_name": "ssube", "link": "https://stackoverflow.com/users/129032/ssube"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1420643749, "post_id": 27822022, "comment_id": 44050729, "body": "@InnocentBystander The last time I bound a clean system to an IPA server that specified a shell for a particular user. How does checking <code>passwd</code> handle that?"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 41425, "user_id": 129032, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e8bea8f9e6972dfd3113d67da68e6933?s=128&d=identicon&r=PG", "display_name": "ssube", "link": "https://stackoverflow.com/users/129032/ssube"}, "edited": false, "score": 0, "creation_date": 1420644457, "post_id": 27822022, "comment_id": 44051230, "body": "@ssube, it doesn&#39;t. In that case use: <code>getent passwd &lt;user&gt; | cut -d: -f7</code>. You may need to use <code>head</code> or <code>tail</code> in case the user has records in both LDAP and passwd."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1420647173, "post_id": 27822022, "comment_id": 44053148, "body": "Don&#39;t <code>system</code> the (insecure) <code>rsh</code> command, but <code>fork</code> then <code>execve</code> it"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1420665429, "post_id": 27822022, "comment_id": 44063543, "body": "You would like your system commands once. Try to specify the new shell in your rsh call. <code>rsh host [...] &#47;bin&#47;bash ls -l</code>"}], "answers": [{"comments": [{"owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1420643735, "post_id": 27822169, "comment_id": 44050721, "body": "Compiles fine. Also comes null for path which is odd"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3442743"}, "reply_to_user": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1420643799, "post_id": 27822169, "comment_id": 44050765, "body": "@Jeef If you type env on the command line is one of the variables SHELL ?If not is there something that looks similar"}, {"owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1420643857, "post_id": 27822169, "comment_id": 44050807, "body": "No it should be there and getenv seems like the right answer... i&#39;ll have to look deeper into my specific build.  Maybe its time for a make clean."}, {"owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "edited": false, "score": 0, "creation_date": 1490397744, "post_id": 27822169, "comment_id": 73111003, "body": "This is not guaranteed to work and will most probably work for bash only."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3442743"}, "is_accepted": true, "score": 1, "last_activity_date": 1420642646, "creation_date": 1420642646, "answer_id": 27822169, "question_id": 27822022, "link": "https://stackoverflow.com/questions/27822022/linux-c-detect-user-shell-csh-bash-etc/27822169#27822169", "title": "Linux C++ Detect user shell (csh,bash,etc)", "body": "<p>Dont know if this will be of any use </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;     /* getenv */\n\nint main ()\n{\n  char* Shell;\n  Shell = getenv (\"SHELL\");\n  if (Shell!=NULL)\n  std::cout &lt;&lt; Shell &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>Will output something similar to</p>\n\n<pre><code>/bin/bash\n</code></pre>\n\n<p>Getenv returns a c-string with the environment variables value.</p>\n\n<p>Link:<a href=\"http://www.cplusplus.com/reference/cstdlib/getenv/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdlib/getenv/</a></p>\n"}, {"tags": [], "owner": {"reputation": 742, "user_id": 561062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d531b454e392cd45d422e30c949aaa?s=128&d=identicon&r=PG", "display_name": "Martin Dvorak", "link": "https://stackoverflow.com/users/561062/martin-dvorak"}, "is_accepted": false, "score": 0, "last_activity_date": 1423783447, "creation_date": 1423783447, "answer_id": 28489809, "question_id": 27822022, "link": "https://stackoverflow.com/questions/27822022/linux-c-detect-user-shell-csh-bash-etc/28489809#28489809", "title": "Linux C++ Detect user shell (csh,bash,etc)", "body": "<p>I failed with getting BASH_VERSION/ZSH_VERSION/... env vars as they are not exported to child processes; /etc/passwd gives login shell, thus the only way to get current shell I found is: </p>\n\n<pre><code>const char* get_process_name_by_pid(const int pid)\n{\n    char* name = (char*)calloc(256,sizeof(char));\n    if(name){\n        sprintf(name, \"/proc/%d/cmdline\",pid);\n        FILE* f = fopen(name,\"r\");\n        if(f){\n            size_t size = fread(name, sizeof(char), 256, f);\n            if(size&gt;0){\n                if('\\n'==name[size-1])\n                    name[size-1]='\\0';\n            }\n            fclose(f);\n        }\n    }\n    return name;\n}\n\nbool isZshParentShell() {\n    pid_t parentPid=getppid();\n    const char* cmdline=get_process_name_by_pid(parentPid);\n    return cmdline &amp;&amp; strstr(cmdline, \"zsh\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "is_accepted": false, "score": 1, "last_activity_date": 1490399327, "last_edit_date": 1490399327, "creation_date": 1490398448, "answer_id": 43010785, "question_id": 27822022, "link": "https://stackoverflow.com/questions/27822022/linux-c-detect-user-shell-csh-bash-etc/43010785#43010785", "title": "Linux C++ Detect user shell (csh,bash,etc)", "body": "<p>Get the userid with <a href=\"https://linux.die.net/man/3/geteuid\" rel=\"nofollow noreferrer\"><code>geteuid</code></a>, get the user database entry for that ID <a href=\"https://linux.die.net/man/3/getpwuid\" rel=\"nofollow noreferrer\"><code>getpwuid</code></a> containing the shell and <em>must not</em> be freed. So it breaks down to</p>\n\n<pre><code>getpwuid(geteuid())-&gt;pw_shell\n</code></pre>\n\n<p>Minimal working example:</p>\n\n<pre><code>#include &lt;pwd.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main (int argc, const char* argv[]) {\n    printf(\"%s\\n\", getpwuid(geteuid())-&gt;pw_shell);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 1, "accepted_answer_id": 27822169, "answer_count": 3, "score": 2, "last_activity_date": 1490399327, "creation_date": 1420642161, "last_edit_date": 1420643815, "question_id": 27822022, "link": "https://stackoverflow.com/questions/27822022/linux-c-detect-user-shell-csh-bash-etc", "title": "Linux C++ Detect user shell (csh,bash,etc)", "body": "<p>I have a C++ application that needs to make shell specific commands using system calls.  Is there a way to detect which shell the user is running?  (Csh/Bash/etc).</p>\n\n<p>Thanks</p>\n\n<hr>\n\n<p>Elaborate</p>\n\n<p>I'm trying to work with some code that forks off via <code>system</code> a <code>rsh</code> call that has a sequence of commands that are using <code>setenv</code> which doesnt work in bash.  I want to detect whether the system is <code>csh</code> or <code>bash</code> and rewrite the calls accordingly.</p>\n"}]